<div class="retirement-dialog">
    <label class="title">
        <span [ghs-label]="'character.progress.retirement'"></span>
        <span class="name">
            <img class="icon character-icon" [src]="character.iconUrl" />
            <span class="character-title">{{gameManager.characterManager.characterName(character,true)}}</span>
        </span>
    </label>

    <div class="rewards">
        <span [ghs-label]="'character.progress.retirement.prosperity'"
            [ghs-label-args]="[gameManager.fhRules() ? '2' : '1']"></span>
    </div>

    <div class="event text-white" *ngIf="character.retireEvent" [ghs-label]="'character.progress.retirement.events'"
        [ghs-label-args]="[character.retireEvent]">
    </div>

    <div class="conclusion" *ngIf="conclusion">
        <a (click)="openConclusion()"><span class="text-white" [ghs-label]="'character.progress.retirement.conclusion'"
                [ghs-label-args]="[conclusion.index]"></span></a>
    </div>

    <div class="personal-quest" *ngIf="personalQuest">
        <div class="text-white" *ngIf="personalQuest.unlockCharacter"
            [ghs-label]="'character.progress.personalQuest.unlockCharacter'"
            [ghs-label-args]="[personalQuest.unlockCharacter]">
        </div>
        <div class="envelope" *ngIf="personalQuest.openEnvelope">
            <span class="text-white"
                [ghs-label]="'character.progress.personalQuest.openEnvelope' + (personalQuest.openEnvelope.split(':').length > 1 ? '.alt' : '')"
                [ghs-label-args]="personalQuest.openEnvelope.split(':')"></span>

            <span class="building" *ngIf="personalQuestBuilding"
                [ghs-label]="'character.progress.personalQuest.openEnvelope.building'"
                [ghs-label-args]="[personalQuestBuilding.id, personalQuestBuilding.name]"></span>
        </div>

        <div class="errata text-white" *ngIf="settingsManager.settings.errata && personalQuest.errata">
            <span [ghs-label]="'errata'"></span>:&nbsp;<span class="text"
                [ghs-label]="'data.custom.' + personalQuest.edition + '.errata.' + personalQuest.errata"></span>
        </div>
    </div>

    <div class="additional" *ngIf="gameManager.fhRules()">
        <a (click)="moveResources()"><span [ghs-label]="'character.progress.retirement.moveSupply'"></span></a>
    </div>

    <div class="additional" *ngIf="gameManager.fhRules() && gameManager.game.party.inspiration > 14">
        <a (click)="additional = !additional"><span
                [ghs-label]="'character.progress.retirement.additionalPQ' + (additional ? '.cancel': '')"></span></a>
    </div>

    <div class="personal-quest" *ngIf="additional">
        <div class="personal-quest-card">
            <input class="card-id" *ngIf="additional" [value]="additionalPQ && additionalPQ.cardId || ''" type="text"
                (change)="changeAdditionalPQ($event)">
            <span *ngIf="additionalPQ" class="personal-quest-name">
                <span [ghs-label]="'data.personalQuest.' + additionalPQ.cardId"></span>
                <span *ngIf="additionalPQ.altId">&nbsp;({{additionalPQ.altId}})</span>
            </span>
        </div>

        <span [ghs-label]="'character.progress.retirement.additionalPQ.inspiration'"></span>

        <span [ghs-label]="'character.progress.retirement.prosperity'" [ghs-label-args]="['2']"></span>

        <div class="text-white" *ngIf="additionalPQ && additionalPQ.unlockCharacter"
            [ghs-label]="'character.progress.personalQuest.unlockCharacter'"
            [ghs-label-args]="[additionalPQ.unlockCharacter]">
        </div>
        <div class="envelope" *ngIf="additionalPQ && additionalPQ.openEnvelope">
            <span class="text-white"
                [ghs-label]="'character.progress.personalQuest.openEnvelope' + (additionalPQ.openEnvelope.split(':').length > 1 ? '.alt' : '')"
                [ghs-label-args]="additionalPQ.openEnvelope.split(':')"></span>

            <span class="building" *ngIf="additionalPQBuilding"
                [ghs-label]="'character.progress.personalQuest.openEnvelope.building'"
                [ghs-label-args]="[additionalPQBuilding.id, additionalPQBuilding.name]"></span>
        </div>

        <div class="errata text-white" *ngIf="settingsManager.settings.errata && additionalPQ && additionalPQ.errata">
            <span [ghs-label]="'errata'"></span>:&nbsp;<span class="text"
                [ghs-label]="'data.custom.' + additionalPQ.edition + '.errata.' + additionalPQ.errata"></span>
        </div>
    </div>


    <div class="menu">
        <a class="cancel" (click)="close()"><span [ghs-label]="'cancel'"></span></a>
        <a class="apply" (click)="apply()"><span [ghs-label]="'character.progress.retirement.apply'"></span></a>
    </div>
</div>