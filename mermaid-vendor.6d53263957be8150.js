(self.webpackChunkgloomhavensecretariat=self.webpackChunkgloomhavensecretariat||[]).push([[911],{1031:(ri,Er,P)=>{"use strict";P.d(Er,{n:()=>lt});var lt={name:"mermaid",version:"11.12.1",description:"Markdown-ish syntax for generating flowcharts, mindmaps, sequence diagrams, class diagrams, gantt charts, git graphs and more.",type:"module",module:"./dist/mermaid.core.mjs",types:"./dist/mermaid.d.ts",exports:{".":{types:"./dist/mermaid.d.ts",import:"./dist/mermaid.core.mjs",default:"./dist/mermaid.core.mjs"},"./*":"./*"},keywords:["diagram","markdown","flowchart","sequence diagram","gantt","class diagram","git graph","mindmap","packet diagram","c4 diagram","er diagram","pie chart","pie diagram","quadrant chart","requirement diagram","graph"],scripts:{clean:"rimraf dist",dev:"pnpm -w dev","docs:code":"typedoc src/defaultConfig.ts src/config.ts src/mermaid.ts && prettier --write ./src/docs/config/setup","docs:build":"rimraf ../../docs && pnpm docs:code && pnpm docs:spellcheck && tsx scripts/docs.cli.mts","docs:verify":"pnpm docs:code && pnpm docs:spellcheck && tsx scripts/docs.cli.mts --verify","docs:pre:vitepress":"pnpm --filter ./src/docs prefetch && rimraf src/vitepress && pnpm docs:code && tsx scripts/docs.cli.mts --vitepress && pnpm --filter ./src/vitepress install --no-frozen-lockfile --ignore-scripts","docs:build:vitepress":"pnpm docs:pre:vitepress && (cd src/vitepress && pnpm run build) && cpy --flat src/docs/landing/ ./src/vitepress/.vitepress/dist/landing","docs:dev":'pnpm docs:pre:vitepress && concurrently "pnpm --filter ./src/vitepress dev" "tsx scripts/docs.cli.mts --watch --vitepress"',"docs:dev:docker":'pnpm docs:pre:vitepress && concurrently "pnpm --filter ./src/vitepress dev:docker" "tsx scripts/docs.cli.mts --watch --vitepress"',"docs:serve":"pnpm docs:build:vitepress && vitepress serve src/vitepress","docs:spellcheck":'cspell "src/docs/**/*.md"',"docs:release-version":"tsx scripts/update-release-version.mts","docs:verify-version":"tsx scripts/update-release-version.mts --verify","types:build-config":"tsx scripts/create-types-from-json-schema.mts","types:verify-config":"tsx scripts/create-types-from-json-schema.mts --verify",checkCircle:"npx madge --circular ./src",prepublishOnly:"pnpm docs:verify-version"},repository:{type:"git",url:"https://github.com/mermaid-js/mermaid"},author:"Knut Sveidqvist",license:"MIT",standard:{ignore:["**/parser/*.js","dist/**/*.js","cypress/**/*.js"],globals:["page"]},dependencies:{"@braintree/sanitize-url":"^7.1.1","@iconify/utils":"^3.0.1","@mermaid-js/parser":"workspace:^","@types/d3":"^7.4.3",cytoscape:"^3.29.3","cytoscape-cose-bilkent":"^4.1.0","cytoscape-fcose":"^2.2.0",d3:"^7.9.0","d3-sankey":"^0.12.3","dagre-d3-es":"7.0.13",dayjs:"^1.11.18",dompurify:"^3.2.5",katex:"^0.16.22",khroma:"^2.1.0","lodash-es":"^4.17.21",marked:"^16.2.1",roughjs:"^4.6.6",stylis:"^4.3.6","ts-dedent":"^2.2.0",uuid:"^11.1.0"},devDependencies:{"@adobe/jsonschema2md":"^8.0.5","@iconify/types":"^2.0.0","@types/cytoscape":"^3.21.9","@types/cytoscape-fcose":"^2.2.4","@types/d3-sankey":"^0.12.4","@types/d3-scale":"^4.0.9","@types/d3-scale-chromatic":"^3.1.0","@types/d3-selection":"^3.0.11","@types/d3-shape":"^3.1.7","@types/jsdom":"^21.1.7","@types/katex":"^0.16.7","@types/lodash-es":"^4.17.12","@types/micromatch":"^4.0.9","@types/stylis":"^4.2.7","@types/uuid":"^10.0.0",ajv:"^8.17.1",canvas:"^3.1.2",chokidar:"3.6.0",concurrently:"^9.1.2","csstree-validator":"^4.0.1",globby:"^14.1.0",jison:"^0.4.18","js-base64":"^3.7.8",jsdom:"^26.1.0","json-schema-to-typescript":"^15.0.4",micromatch:"^4.0.8","path-browserify":"^1.0.1",prettier:"^3.5.3",remark:"^15.0.1","remark-frontmatter":"^5.0.0","remark-gfm":"^4.0.1",rimraf:"^6.0.1","start-server-and-test":"^2.0.13","type-fest":"^4.35.0",typedoc:"^0.28.12","typedoc-plugin-markdown":"^4.8.1",typescript:"~5.7.3","unist-util-flatmap":"^1.0.0","unist-util-visit":"^5.0.0",vitepress:"^1.6.4","vitepress-plugin-search":"1.0.4-alpha.22"},files:["dist/","README.md"],publishConfig:{access:"public"}}},3939:(ri,Er,P)=>{"use strict";P.r(Er),P.d(Er,{default:()=>De});var Gr,lt=P(89204),ie=P(1031),L=P(69664),D=P(24715),Mt=P(72271),Ge=(P(98954),P(36384),P(87452),P(32239),P(19753),P(59355)),bt=P(52052),Gt=P(79006),j=P(32303),hr=P(98245),ze=P(40622),vr=P(52323),Wr=P(99708),Br=P(93551),Ir={id:"c4",detector:(0,j.K2)(tt=>/^\s*C4Context|C4Container|C4Component|C4Dynamic|C4Deployment/.test(tt),"detector"),loader:(0,j.K2)((0,lt.A)(function*(){const{diagram:tt}=yield P.e(911).then(P.bind(P,72635));return{id:"c4",diagram:tt}}),"loader")},Xe="flowchart",Se={id:Xe,detector:(0,j.K2)((tt,l)=>"dagre-wrapper"!==l?.flowchart?.defaultRenderer&&"elk"!==l?.flowchart?.defaultRenderer&&/^\s*graph/.test(tt),"detector"),loader:(0,j.K2)((0,lt.A)(function*(){const{diagram:tt}=yield P.e(911).then(P.bind(P,84545));return{id:Xe,diagram:tt}}),"loader")},X="flowchart-v2",Rt={id:X,detector:(0,j.K2)((tt,l)=>"dagre-d3"!==l?.flowchart?.defaultRenderer&&("elk"===l?.flowchart?.defaultRenderer&&(l.layout="elk"),!(!/^\s*graph/.test(tt)||"dagre-wrapper"!==l?.flowchart?.defaultRenderer)||/^\s*flowchart/.test(tt)),"detector"),loader:(0,j.K2)((0,lt.A)(function*(){const{diagram:tt}=yield P.e(911).then(P.bind(P,84545));return{id:X,diagram:tt}}),"loader")},Nt={id:"er",detector:(0,j.K2)(tt=>/^\s*erDiagram/.test(tt),"detector"),loader:(0,j.K2)((0,lt.A)(function*(){const{diagram:tt}=yield P.e(911).then(P.bind(P,79158));return{id:"er",diagram:tt}}),"loader")},St="gitGraph",Pe={id:St,detector:(0,j.K2)(tt=>/^\s*gitGraph/.test(tt),"detector"),loader:(0,j.K2)((0,lt.A)(function*(){const{diagram:tt}=yield Promise.all([P.e(911),P.e(233)]).then(P.bind(P,18617));return{id:St,diagram:tt}}),"loader")},Tt={id:"gantt",detector:(0,j.K2)(tt=>/^\s*gantt/.test(tt),"detector"),loader:(0,j.K2)((0,lt.A)(function*(){const{diagram:tt}=yield P.e(911).then(P.bind(P,76765));return{id:"gantt",diagram:tt}}),"loader")},B="info",yt={id:B,detector:(0,j.K2)(tt=>/^\s*info/.test(tt),"detector"),loader:(0,j.K2)((0,lt.A)(function*(){const{diagram:tt}=yield Promise.all([P.e(911),P.e(233)]).then(P.bind(P,87788));return{id:B,diagram:tt}}),"loader")},ht={id:"pie",detector:(0,j.K2)(tt=>/^\s*pie/.test(tt),"detector"),loader:(0,j.K2)((0,lt.A)(function*(){const{diagram:tt}=yield Promise.all([P.e(911),P.e(233)]).then(P.bind(P,91634));return{id:"pie",diagram:tt}}),"loader")},Ot="quadrantChart",Pt={id:Ot,detector:(0,j.K2)(tt=>/^\s*quadrantChart/.test(tt),"detector"),loader:(0,j.K2)((0,lt.A)(function*(){const{diagram:tt}=yield P.e(911).then(P.bind(P,59301));return{id:Ot,diagram:tt}}),"loader")},Zt="xychart",de={id:Zt,detector:(0,j.K2)(tt=>/^\s*xychart(-beta)?/.test(tt),"detector"),loader:(0,j.K2)((0,lt.A)(function*(){const{diagram:tt}=yield P.e(911).then(P.bind(P,67137));return{id:Zt,diagram:tt}}),"loader")},yr="requirement",sr={id:yr,detector:(0,j.K2)(tt=>/^\s*requirement(Diagram)?/.test(tt),"detector"),loader:(0,j.K2)((0,lt.A)(function*(){const{diagram:tt}=yield P.e(911).then(P.bind(P,29062));return{id:yr,diagram:tt}}),"loader")},ve="sequence",er={id:ve,detector:(0,j.K2)(tt=>/^\s*sequenceDiagram/.test(tt),"detector"),loader:(0,j.K2)((0,lt.A)(function*(){const{diagram:tt}=yield P.e(911).then(P.bind(P,96434));return{id:ve,diagram:tt}}),"loader")},nr={id:"class",detector:(0,j.K2)((tt,l)=>"dagre-wrapper"!==l?.class?.defaultRenderer&&/^\s*classDiagram/.test(tt),"detector"),loader:(0,j.K2)((0,lt.A)(function*(){const{diagram:tt}=yield P.e(911).then(P.bind(P,86976));return{id:"class",diagram:tt}}),"loader")},te="classDiagram",g={id:te,detector:(0,j.K2)((tt,l)=>!(!/^\s*classDiagram/.test(tt)||"dagre-wrapper"!==l?.class?.defaultRenderer)||/^\s*classDiagram-v2/.test(tt),"detector"),loader:(0,j.K2)((0,lt.A)(function*(){const{diagram:tt}=yield P.e(911).then(P.bind(P,55041));return{id:te,diagram:tt}}),"loader")},y="state",A={id:y,detector:(0,j.K2)((tt,l)=>"dagre-wrapper"!==l?.state?.defaultRenderer&&/^\s*stateDiagram/.test(tt),"detector"),loader:(0,j.K2)((0,lt.A)(function*(){const{diagram:tt}=yield Promise.all([P.e(911),P.e(335)]).then(P.bind(P,63192));return{id:y,diagram:tt}}),"loader")},v="stateDiagram",Q={id:v,detector:(0,j.K2)((tt,l)=>!!(/^\s*stateDiagram-v2/.test(tt)||/^\s*stateDiagram/.test(tt)&&"dagre-wrapper"===l?.state?.defaultRenderer),"detector"),loader:(0,j.K2)((0,lt.A)(function*(){const{diagram:tt}=yield P.e(911).then(P.bind(P,38676));return{id:v,diagram:tt}}),"loader")},mt="journey",Kt={id:mt,detector:(0,j.K2)(tt=>/^\s*journey/.test(tt),"detector"),loader:(0,j.K2)((0,lt.A)(function*(){const{diagram:tt}=yield P.e(911).then(P.bind(P,33350));return{id:mt,diagram:tt}}),"loader")},je={draw:(0,j.K2)((tt,l,T)=>{j.Rm.debug("rendering svg for syntax error\n");const F=(0,L.D)(l),st=F.append("g");F.attr("viewBox","0 0 2412 512"),(0,Gt.a$)(F,100,512,!0),st.append("path").attr("class","error-icon").attr("d","m411.313,123.313c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32-9.375,9.375-20.688-20.688c-12.484-12.5-32.766-12.5-45.25,0l-16,16c-1.261,1.261-2.304,2.648-3.31,4.051-21.739-8.561-45.324-13.426-70.065-13.426-105.867,0-192,86.133-192,192s86.133,192 192,192 192-86.133 192-192c0-24.741-4.864-48.327-13.426-70.065 1.402-1.007 2.79-2.049 4.051-3.31l16-16c12.5-12.492 12.5-32.758 0-45.25l-20.688-20.688 9.375-9.375 32.001-31.999zm-219.313,100.687c-52.938,0-96,43.063-96,96 0,8.836-7.164,16-16,16s-16-7.164-16-16c0-70.578 57.422-128 128-128 8.836,0 16,7.164 16,16s-7.164,16-16,16z"),st.append("path").attr("class","error-icon").attr("d","m459.02,148.98c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l16,16c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16.001-16z"),st.append("path").attr("class","error-icon").attr("d","m340.395,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16-16c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l15.999,16z"),st.append("path").attr("class","error-icon").attr("d","m400,64c8.844,0 16-7.164 16-16v-32c0-8.836-7.156-16-16-16-8.844,0-16,7.164-16,16v32c0,8.836 7.156,16 16,16z"),st.append("path").attr("class","error-icon").attr("d","m496,96.586h-32c-8.844,0-16,7.164-16,16 0,8.836 7.156,16 16,16h32c8.844,0 16-7.164 16-16 0-8.836-7.156-16-16-16z"),st.append("path").attr("class","error-icon").attr("d","m436.98,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688l32-32c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32c-6.251,6.25-6.251,16.375-0.001,22.625z"),st.append("text").attr("class","error-text").attr("x",1440).attr("y",250).attr("font-size","150px").style("text-anchor","middle").text("Syntax error in text"),st.append("text").attr("class","error-text").attr("x",1250).attr("y",400).attr("font-size","100px").style("text-anchor","middle").text(`mermaid version ${T}`)},"draw")},Ke=je,lr={db:{},renderer:je,parser:{parse:(0,j.K2)(()=>{},"parse")}},br="flowchart-elk",kr={id:br,detector:(0,j.K2)((tt,l={})=>!!(/^\s*flowchart-elk/.test(tt)||/^\s*(flowchart|graph)/.test(tt)&&"elk"===l?.flowchart?.defaultRenderer)&&(l.layout="elk",!0),"detector"),loader:(0,j.K2)((0,lt.A)(function*(){const{diagram:tt}=yield P.e(911).then(P.bind(P,84545));return{id:br,diagram:tt}}),"loader")},Kr="timeline",ha={id:Kr,detector:(0,j.K2)(tt=>/^\s*timeline/.test(tt),"detector"),loader:(0,j.K2)((0,lt.A)(function*(){const{diagram:tt}=yield P.e(911).then(P.bind(P,28957));return{id:Kr,diagram:tt}}),"loader")},ia="mindmap",ur={id:ia,detector:(0,j.K2)(tt=>/^\s*mindmap/.test(tt),"detector"),loader:(0,j.K2)((0,lt.A)(function*(){const{diagram:tt}=yield P.e(911).then(P.bind(P,38710));return{id:ia,diagram:tt}}),"loader")},W="kanban",Tr={id:W,detector:(0,j.K2)(tt=>/^\s*kanban/.test(tt),"detector"),loader:(0,j.K2)((0,lt.A)(function*(){const{diagram:tt}=yield P.e(911).then(P.bind(P,90543));return{id:W,diagram:tt}}),"loader")},Wa={id:"sankey",detector:(0,j.K2)(tt=>/^\s*sankey(-beta)?/.test(tt),"detector"),loader:(0,j.K2)((0,lt.A)(function*(){const{diagram:tt}=yield Promise.all([P.e(911),P.e(51)]).then(P.bind(P,57746));return{id:"sankey",diagram:tt}}),"loader")},Sa={id:"packet",detector:(0,j.K2)(tt=>/^\s*packet(-beta)?/.test(tt),"detector"),loader:(0,j.K2)((0,lt.A)(function*(){const{diagram:tt}=yield Promise.all([P.e(911),P.e(233)]).then(P.bind(P,62033));return{id:"packet",diagram:tt}}),"loader")},Ua={id:"radar",detector:(0,j.K2)(tt=>/^\s*radar-beta/.test(tt),"detector"),loader:(0,j.K2)((0,lt.A)(function*(){const{diagram:tt}=yield Promise.all([P.e(911),P.e(233)]).then(P.bind(P,32810));return{id:"radar",diagram:tt}}),"loader")},_a={id:"block",detector:(0,j.K2)(tt=>/^\s*block(-beta)?/.test(tt),"detector"),loader:(0,j.K2)((0,lt.A)(function*(){const{diagram:tt}=yield Promise.all([P.e(911),P.e(823)]).then(P.bind(P,28642));return{id:"block",diagram:tt}}),"loader")},qa="architecture",Ce={id:qa,detector:(0,j.K2)(tt=>/^\s*architecture/.test(tt),"detector"),loader:(0,j.K2)((0,lt.A)(function*(){const{diagram:tt}=yield Promise.all([P.e(911),P.e(233),P.e(867)]).then(P.bind(P,32699));return{id:qa,diagram:tt}}),"loader")},Ri="treemap",Ct={id:Ri,detector:(0,j.K2)(tt=>/^\s*treemap/.test(tt),"detector"),loader:(0,j.K2)((0,lt.A)(function*(){const{diagram:tt}=yield Promise.all([P.e(911),P.e(233)]).then(P.bind(P,55559));return{id:Ri,diagram:tt}}),"loader")},I=!1,Jt=(0,j.K2)(()=>{I||(I=!0,(0,Gt.Js)("error",lr,tt=>"error"===tt.toLowerCase().trim()),(0,Gt.Js)("---",{db:{clear:(0,j.K2)(()=>{},"clear")},styles:{},renderer:{draw:(0,j.K2)(()=>{},"draw")},parser:{parse:(0,j.K2)(()=>{throw new Error("Diagrams beginning with --- are not valid. If you were trying to use a YAML front-matter, please ensure that you've correctly opened and closed the YAML front-matter with un-indented `---` blocks")},"parse")},init:(0,j.K2)(()=>null,"init")},tt=>tt.toLowerCase().trimStart().startsWith("---")),(0,Gt.Xd)(kr,ur,Ce),(0,Gt.Xd)(Ir,Tr,g,nr,Nt,Tt,yt,ht,sr,er,Rt,Se,ha,Pe,Q,A,Kt,Pt,Wa,Sa,de,_a,Ua,Ct))},"addDiagrams"),Ve=(0,j.K2)((0,lt.A)(function*(){j.Rm.debug("Loading registered diagrams");const l=(yield Promise.allSettled(Object.entries(Gt.mW).map(function(){var T=(0,lt.A)(function*([F,{detector:st,loader:xt}]){if(xt)try{(0,Gt.Gs)(F)}catch{try{const{diagram:Me,id:Qt}=yield xt();(0,Gt.Js)(Qt,Me,st)}catch(Me){throw j.Rm.error(`Failed to load external diagram with key ${F}. Removing from detectors.`),delete Gt.mW[F],Me}}});return function(F){return T.apply(this,arguments)}}()))).filter(T=>"rejected"===T.status);if(l.length>0){j.Rm.error(`Failed to load ${l.length} external diagrams`);for(const T of l)j.Rm.error(T);throw new Error(`Failed to load ${l.length} external diagrams`)}}),"loadRegisteredDiagrams");function Dt(tt,l){tt.attr("role","graphics-document document"),""!==l&&tt.attr("aria-roledescription",l)}function Ft(tt,l,T,F){if(void 0!==tt.insert){if(T){const st=`chart-desc-${F}`;tt.attr("aria-describedby",st),tt.insert("desc",":first-child").attr("id",st).text(T)}if(l){const st=`chart-title-${F}`;tt.attr("aria-labelledby",st),tt.insert("title",":first-child").attr("id",st).text(l)}}}(0,j.K2)(Dt,"setA11yDiagramInfo"),(0,j.K2)(Ft,"addSVGa11yTitleDescription");var Je=(class N0{constructor(l,T,F,st,xt){this.type=l,this.text=T,this.db=F,this.parser=st,this.renderer=xt}static fromText(l){return(0,lt.A)(function*(T,F={}){const st=(0,Gt.zj)(),xt=(0,Gt.Ch)(T,st);T=(0,bt.C4)(T)+"\n";try{(0,Gt.Gs)(xt)}catch{const Sr=(0,Gt.J$)(xt);if(!Sr)throw new Gt.C0(`Diagram ${xt} not found.`);const{id:ta,diagram:Pr}=yield Sr();(0,Gt.Js)(ta,Pr)}const{db:Me,parser:Qt,renderer:Ue,init:xr}=(0,Gt.Gs)(xt);return Qt.parser&&(Qt.parser.yy=Me),Me.clear?.(),xr?.(st),F.title&&Me.setDiagramTitle?.(F.title),yield Qt.parse(T),new N0(xt,T,Me,Qt,Ue)}).apply(this,arguments)}render(l,T){var F=this;return(0,lt.A)(function*(){yield F.renderer.draw(F.text,l,T,F)})()}getParser(){return this.parser}getType(){return this.type}static#t=Gr=()=>((0,j.K2)(this,"Diagram"),this)},Gr()),Xr=[],Hr=(0,j.K2)(()=>{Xr.forEach(tt=>{tt()}),Xr=[]},"attachFunctions"),ra=(0,j.K2)(tt=>tt.replace(/^\s*%%(?!{)[^\n]+\n?/gm,"").trimStart(),"cleanupComments");function La(tt){const l=tt.match(Gt.EJ);if(!l)return{text:tt,metadata:{}};let T=(0,D.H)(l[1],{schema:D.r})??{};T="object"!=typeof T||Array.isArray(T)?{}:T;const F={};return T.displayMode&&(F.displayMode=T.displayMode.toString()),T.title&&(F.title=T.title.toString()),T.config&&(F.config=T.config),{text:tt.slice(l[0].length),metadata:F}}(0,j.K2)(La,"extractFrontMatter");var fa=(0,j.K2)(tt=>tt.replace(/\r\n?/g,"\n").replace(/<(\w+)([^>]*)>/g,(l,T,F)=>"<"+T+F.replace(/="([^"]*)"/g,"='$1'")+">"),"cleanupText"),wa=(0,j.K2)(tt=>{const{text:l,metadata:T}=La(tt),{displayMode:F,title:st,config:xt={}}=T;return F&&(xt.gantt||(xt.gantt={}),xt.gantt.displayMode=F),{title:st,config:xt,text:l}},"processFrontmatter"),ja=(0,j.K2)(tt=>{const l=bt._K.detectInit(tt)??{},T=bt._K.detectDirective(tt,"wrap");return Array.isArray(T)?l.wrap=T.some(({type:F})=>"wrap"===F):"wrap"===T?.type&&(l.wrap=!0),{text:(0,bt.vU)(tt),directive:l}},"processDirectives");function $a(tt){const l=fa(tt),T=wa(l),F=ja(T.text),st=(0,bt.$t)(T.config,F.directive);return{code:tt=ra(F.text),title:T.title,config:st}}function yi(tt){const l=(new TextEncoder).encode(tt),T=Array.from(l,F=>String.fromCodePoint(F)).join("");return btoa(T)}(0,j.K2)($a,"preprocessDiagram"),(0,j.K2)(yi,"toBase64");var ln=["foreignobject"],Ji=["dominant-baseline"];function Oi(tt){const l=$a(tt);return(0,Gt.cL)(),(0,Gt.xA)(l.config??{}),l}function zi(tt,l){return cn.apply(this,arguments)}function cn(){return(cn=(0,lt.A)(function*(tt,l){Jt();try{const{code:T,config:F}=Oi(tt);return{diagramType:(yield Rn(T)).type,config:F}}catch(T){if(l?.suppressErrors)return!1;throw T}})).apply(this,arguments)}(0,j.K2)(Oi,"processAndSetConfigs"),(0,j.K2)(zi,"parse");var Ln=(0,j.K2)((tt,l,T=[])=>`\n.${tt} ${l} { ${T.join(" !important; ")} !important; }`,"cssImportantStyles"),Bn=(0,j.K2)((tt,l=new Map)=>{let T="";if(void 0!==tt.themeCSS&&(T+=`\n${tt.themeCSS}`),void 0!==tt.fontFamily&&(T+=`\n:root { --mermaid-font-family: ${tt.fontFamily}}`),void 0!==tt.altFontFamily&&(T+=`\n:root { --mermaid-alt-font-family: ${tt.altFontFamily}}`),l instanceof Map){const Me=tt.htmlLabels??tt.flowchart?.htmlLabels?["> *","span"]:["rect","polygon","ellipse","circle","path"];l.forEach(Qt=>{(0,Br.A)(Qt.styles)||Me.forEach(Ue=>{T+=Ln(Qt.id,Ue,Qt.styles)}),(0,Br.A)(Qt.textStyles)||(T+=Ln(Qt.id,"tspan",(Qt?.textStyles||[]).map(Ue=>Ue.replace("color","fill"))))})}return T},"createCssStyles"),Vn=(0,j.K2)((tt,l,T,F)=>{const st=Bn(tt,T),xt=(0,Gt.tM)(l,st,tt.themeVariables);return(0,vr.lK)((0,vr.wE)(`${F}{${xt}}`),vr.As)},"createUserStyles"),hn=(0,j.K2)((tt="",l,T)=>{let F=tt;return!T&&!l&&(F=F.replace(/marker-end="url\([\d+./:=?A-Za-z-]*?#/g,'marker-end="url(#')),F=(0,bt.Sm)(F),F=F.replace(/<br>/g,"<br/>"),F},"cleanUpSvgCode"),Un=(0,j.K2)((tt="",l)=>`<iframe style="width:100%;height:${l?.viewBox?.baseVal?.height?l.viewBox.baseVal.height+"px":"100%"};border:0;margin:0;" src="data:text/html;charset=UTF-8;base64,${yi(`<body style="margin:0">${tt}</body>`)}" sandbox="allow-top-navigation-by-user-activation allow-popups">\n  The "iframe" tag is not supported by your browser.\n</iframe>`,"putIntoIFrame"),tn=(0,j.K2)((tt,l,T,F,st)=>{const xt=tt.append("div");xt.attr("id",T),F&&xt.attr("style",F);const Me=xt.append("svg").attr("id",l).attr("width","100%").attr("xmlns","http://www.w3.org/2000/svg");return st&&Me.attr("xmlns:xlink",st),Me.append("g"),tt},"appendDivSvgG");function Nn(tt,l){return tt.append("iframe").attr("id",l).attr("style","width: 100%; height: 100%;").attr("sandbox","")}(0,j.K2)(Nn,"sandboxedIframe");var xn=(0,j.K2)((tt,l,T,F)=>{tt.getElementById(l)?.remove(),tt.getElementById(T)?.remove(),tt.getElementById(F)?.remove()},"removeExistingElements"),nn=(0,j.K2)(function(){var tt=(0,lt.A)(function*(l,T,F){Jt();const st=Oi(T);T=st.code;const xt=(0,Gt.zj)();j.Rm.debug(xt),T.length>(xt?.maxTextSize??5e4)&&(T="graph TB;a[Maximum text size in diagram exceeded];style a fill:#faa");const Me="#"+l,Qt="i"+l,Ue="#"+Qt,xr="d"+l,Sr="#"+xr,ta=(0,j.K2)(()=>{const os=(0,ze.Ltv)(la?Ue:Sr).node();os&&"remove"in os&&os.remove()},"removeTempElements");let Pr=(0,ze.Ltv)("body");const la="sandbox"===xt.securityLevel,Ca="loose"===xt.securityLevel,ka=xt.fontFamily;if(void 0!==F){if(F&&(F.innerHTML=""),la){const Ui=Nn((0,ze.Ltv)(F),Qt);Pr=(0,ze.Ltv)(Ui.nodes()[0].contentDocument.body),Pr.node().style.margin=0}else Pr=(0,ze.Ltv)(F);tn(Pr,l,xr,`font-family: ${ka}`,"http://www.w3.org/1999/xlink")}else{if(xn(document,l,xr,Qt),la){const Ui=Nn((0,ze.Ltv)("body"),Qt);Pr=(0,ze.Ltv)(Ui.nodes()[0].contentDocument.body),Pr.node().style.margin=0}else Pr=(0,ze.Ltv)("body");tn(Pr,l,xr)}let Ba,Xa;try{Ba=yield Je.fromText(T,{title:st.title})}catch(Ui){if(xt.suppressErrorRendering)throw ta(),Ui;Ba=yield Je.fromText("error"),Xa=Ui}const za=Pr.select(Sr).node(),Fa=Ba.type,ui=za.firstChild,ji=ui.firstChild,$n=Ba.renderer.getClasses?.(T,Ba),Tn=Vn(xt,Fa,$n,Me),Vi=document.createElement("style");Vi.innerHTML=Tn,ui.insertBefore(Vi,ji);try{yield Ba.renderer.draw(T,l,ie.n.version,Ba)}catch(Ui){throw xt.suppressErrorRendering?ta():Ke.draw(T,l,ie.n.version),Ui}const an=Pr.select(`${Sr} svg`),Fi=Ba.db.getAccTitle?.(),bn=Ba.db.getAccDescription?.();un(Fa,an,Fi,bn),Pr.select(`[id="${l}"]`).selectAll("foreignobject > *").attr("xmlns","http://www.w3.org/1999/xhtml");let pn=Pr.select(Sr).node().innerHTML;if(j.Rm.debug("config.arrowMarkerAbsolute",xt.arrowMarkerAbsolute),pn=hn(pn,la,(0,Gt._3)(xt.arrowMarkerAbsolute)),la){const Ui=Pr.select(Sr+" svg").node();pn=Un(pn,Ui)}else Ca||(pn=Wr.A.sanitize(pn,{ADD_TAGS:ln,ADD_ATTR:Ji,HTML_INTEGRATION_POINTS:{foreignobject:!0}}));if(Hr(),Xa)throw Xa;return ta(),{diagramType:Fa,svg:pn,bindFunctions:Ba.db.bindFunctions}});return function(l,T,F){return tt.apply(this,arguments)}}(),"render");function kn(tt={}){const l=(0,Gt.hH)({},tt);l?.fontFamily&&!l.themeVariables?.fontFamily&&(l.themeVariables||(l.themeVariables={}),l.themeVariables.fontFamily=l.fontFamily),(0,Gt.wZ)(l),l?.theme&&l.theme in Gt.H$?l.themeVariables=Gt.H$[l.theme].getThemeVariables(l.themeVariables):l&&(l.themeVariables=Gt.H$.default.getThemeVariables(l.themeVariables));const T="object"==typeof l?(0,Gt.UU)(l):(0,Gt.Q2)();(0,j.He)(T.logLevel),Jt()}(0,j.K2)(kn,"initialize");var Rn=(0,j.K2)((tt,l={})=>{const{code:T}=$a(tt);return Je.fromText(T,l)},"getDiagramFromText");function un(tt,l,T,F){Dt(l,tt),Ft(l,T,F,l.attr("id"))}(0,j.K2)(un,"addA11yInfo");var Xi=Object.freeze({render:nn,parse:zi,getDiagramFromText:Rn,initialize:kn,getConfig:Gt.zj,setConfig:Gt.Nk,getSiteConfig:Gt.Q2,updateSiteConfig:Gt.B6,reset:(0,j.K2)(()=>{(0,Gt.cL)()},"reset"),globalReset:(0,j.K2)(()=>{(0,Gt.cL)(Gt.sb)},"globalReset"),defaultConfig:Gt.sb});(0,j.He)((0,Gt.zj)().logLevel),(0,Gt.cL)((0,Gt.zj)());var rn=(0,j.K2)((tt,l,T)=>{j.Rm.warn(tt),(0,bt.dq)(tt)?(T&&T(tt.str,tt.hash),l.push({...tt,message:tt.str,error:tt})):(T&&T(tt),tt instanceof Error&&l.push({str:tt.message,message:tt.message,hash:tt.name,error:tt}))},"handleError"),Yn=(0,j.K2)((0,lt.A)(function*(tt={querySelector:".mermaid"}){try{yield Ht(tt)}catch(l){if((0,bt.dq)(l)&&j.Rm.error(l.str),fe.parseError&&fe.parseError(l),!tt.suppressErrors)throw j.Rm.error("Use the suppressErrors option to suppress these errors"),l}}),"run"),Ht=(0,j.K2)((0,lt.A)(function*({postRenderCallback:tt,querySelector:l,nodes:T}={querySelector:".mermaid"}){const F=Xi.getConfig();let st;if(j.Rm.debug((tt?"":"No ")+"Callback function found"),T)st=T;else{if(!l)throw new Error("Nodes and querySelector are both undefined");st=document.querySelectorAll(l)}j.Rm.debug(`Found ${st.length} diagrams`),void 0!==F?.startOnLoad&&(j.Rm.debug("Start On Load: "+F?.startOnLoad),Xi.updateSiteConfig({startOnLoad:F?.startOnLoad}));const xt=new bt._K.InitIDGenerator(F.deterministicIds,F.deterministicIDSeed);let Me;const Qt=[];for(const Ue of Array.from(st)){if(j.Rm.info("Rendering diagram: "+Ue.id),Ue.getAttribute("data-processed"))continue;Ue.setAttribute("data-processed","true");const xr=`mermaid-${xt.next()}`;Me=Ue.innerHTML,Me=(0,hr.T)(bt._K.entityDecode(Me)).trim().replace(/<br\s*\/?>/gi,"<br/>");const Sr=bt._K.detectInit(Me);Sr&&j.Rm.debug("Detected early reinit: ",Sr);try{const{svg:ta,bindFunctions:Pr}=yield Z(xr,Me,Ue);Ue.innerHTML=ta,tt&&(yield tt(xr)),Pr&&Pr(Ue)}catch(ta){rn(ta,Qt,fe.parseError)}}if(Qt.length>0)throw Qt[0]}),"runThrowsErrors"),d=(0,j.K2)(function(tt){Xi.initialize(tt)},"initialize"),ct=(0,j.K2)(function(){var tt=(0,lt.A)(function*(l,T,F){j.Rm.warn("mermaid.init is deprecated. Please use run instead."),l&&d(l);const st={postRenderCallback:F,querySelector:".mermaid"};"string"==typeof T?st.querySelector=T:T&&(st.nodes=T instanceof HTMLElement?[T]:T),yield Yn(st)});return function(l,T,F){return tt.apply(this,arguments)}}(),"init"),Xt=(0,j.K2)(function(){var tt=(0,lt.A)(function*(l,{lazyLoad:T=!0}={}){Jt(),(0,Gt.Xd)(...l),!1===T&&(yield Ve())});return function(l){return tt.apply(this,arguments)}}(),"registerExternalDiagrams"),kt=(0,j.K2)(function(){if(fe.startOnLoad){const{startOnLoad:tt}=Xi.getConfig();tt&&fe.run().catch(l=>j.Rm.error("Mermaid failed to initialize",l))}},"contentLoaded");typeof document<"u"&&window.addEventListener("load",kt,!1);var pt=(0,j.K2)(function(tt){fe.parseError=tt},"setParseErrorHandler"),ue=[],nt=!1,wt=(0,j.K2)((0,lt.A)(function*(){if(!nt){for(nt=!0;ue.length>0;){const tt=ue.shift();if(tt)try{yield tt()}catch(l){j.Rm.error("Error executing queue",l)}}nt=!1}}),"executeQueue"),J=(0,j.K2)(function(){var tt=(0,lt.A)(function*(l,T){return new Promise((F,st)=>{ue.push((0,j.K2)(()=>new Promise((Me,Qt)=>{Xi.parse(l,T).then(Ue=>{Me(Ue),F(Ue)},Ue=>{j.Rm.error("Error parsing",Ue),fe.parseError?.(Ue),Qt(Ue),st(Ue)})}),"performCall")),wt().catch(st)})});return function(l,T){return tt.apply(this,arguments)}}(),"parse"),Z=(0,j.K2)((tt,l,T)=>new Promise((F,st)=>{ue.push((0,j.K2)(()=>new Promise((Me,Qt)=>{Xi.render(tt,l,T).then(Ue=>{Me(Ue),F(Ue)},Ue=>{j.Rm.error("Error parsing",Ue),fe.parseError?.(Ue),Qt(Ue),st(Ue)})}),"performCall")),wt().catch(st)}),"render"),fe={startOnLoad:!0,mermaidAPI:Xi,parse:J,render:Z,init:ct,run:Yn,registerExternalDiagrams:Xt,registerLayoutLoaders:Mt.sO,initialize:d,parseError:void 0,contentLoaded:kt,setParseErrorHandler:pt,detectType:Gt.Ch,registerIconPacks:Ge.pC,getRegisteredDiagramsMetadata:(0,j.K2)(()=>Object.keys(Gt.mW).map(tt=>({id:tt})),"getRegisteredDiagramsMetadata")},De=fe;
/*! Check if previously processed */
/*!
       * Wait for document loaded before starting the execution
       */},4787:(ri,Er)=>{"use strict";Object.defineProperty(Er,"__esModule",{value:!0}),Er.BLANK_URL=Er.relativeFirstCharacters=Er.whitespaceEscapeCharsRegex=Er.urlSchemeRegex=Er.ctrlCharactersRegex=Er.htmlCtrlEntityRegex=Er.htmlEntitiesRegex=Er.invalidProtocolRegex=void 0,Er.invalidProtocolRegex=/^([^\w]*)(javascript|data|vbscript)/im,Er.htmlEntitiesRegex=/&#(\w+)(^\w|;)?/g,Er.htmlCtrlEntityRegex=/&(newline|tab);/gi,Er.ctrlCharactersRegex=/[\u0000-\u001F\u007F-\u009F\u2000-\u200D\uFEFF]/gim,Er.urlSchemeRegex=/^.+(:|&colon;)/gim,Er.whitespaceEscapeCharsRegex=/(\\|%5[cC])((%(6[eE]|72|74))|[nrt])/g,Er.relativeFirstCharacters=[".","/"],Er.BLANK_URL="about:blank"},5675:(ri,Er,P)=>{"use strict";P.d(Er,{A:()=>L});var lt=P(32303),ie=P(40622),L=(0,lt.K2)((D,Mt)=>{let ut;return"sandbox"===Mt&&(ut=(0,ie.Ltv)("#i"+D)),(0,ie.Ltv)("sandbox"===Mt?ut.nodes()[0].contentDocument.body:"body").select(`[id="${D}"]`)},"getDiagramElement")},8026:(ri,Er,P)=>{"use strict";P.r(Er),P.d(Er,{render:()=>hr});var lt=P(89204),ie=P(32303),L=P(15363),D=P(76805),Mt=P(40622);function ut(ze,vr){ze.forEach(Wr=>{const Br={id:Wr.id,labelText:Wr.label,height:Wr.height,width:Wr.width,padding:Wr.padding??0};Object.keys(Wr).forEach(Gr=>{["id","label","height","width","padding","x","y"].includes(Gr)||(Br[Gr]=Wr[Gr])}),vr.add({group:"nodes",data:Br,position:{x:Wr.x??0,y:Wr.y??0}})})}function G(ze,vr){ze.forEach(Wr=>{const Br={id:Wr.id,source:Wr.start,target:Wr.end};Object.keys(Wr).forEach(Gr=>{["id","start","end"].includes(Gr)||(Br[Gr]=Wr[Gr])}),vr.add({group:"edges",data:Br})})}function w(ze){return new Promise(vr=>{const Wr=(0,Mt.Ltv)("body").append("div").attr("id","cy").attr("style","display:none"),Br=(0,L.A)({container:document.getElementById("cy"),style:[{selector:"edge",style:{"curve-style":"bezier"}}]});Wr.remove(),ut(ze.nodes,Br),G(ze.edges,Br),Br.nodes().forEach(function(aa){aa.layoutDimensions=()=>{const zr=aa.data();return{w:zr.width,h:zr.height}}}),Br.layout({name:"cose-bilkent",quality:"proof",styleEnabled:!1,animate:!1}).run(),Br.ready(aa=>{ie.Rm.info("Cytoscape ready",aa),vr(Br)})})}function Lt(ze){return ze.nodes().map(vr=>{const Wr=vr.data(),Br=vr.position(),Gr={id:Wr.id,x:Br.x,y:Br.y};return Object.keys(Wr).forEach(aa=>{"id"!==aa&&(Gr[aa]=Wr[aa])}),Gr})}function At(ze){return ze.edges().map(vr=>{const Wr=vr.data(),Br=vr._private.rscratch,Gr={id:Wr.id,source:Wr.source,target:Wr.target,startX:Br.startX,startY:Br.startY,midX:Br.midX,midY:Br.midY,endX:Br.endX,endY:Br.endY};return Object.keys(Wr).forEach(aa=>{["id","source","target"].includes(aa)||(Gr[aa]=Wr[aa])}),Gr})}function Ge(ze,vr){return bt.apply(this,arguments)}function bt(){return(bt=(0,lt.A)(function*(ze,vr){ie.Rm.debug("Starting cose-bilkent layout algorithm");try{Gt(ze);const Wr=yield w(ze),Br=Lt(Wr),Gr=At(Wr);return ie.Rm.debug(`Layout completed: ${Br.length} nodes, ${Gr.length} edges`),{nodes:Br,edges:Gr}}catch(Wr){throw ie.Rm.error("Error in cose-bilkent layout algorithm:",Wr),Wr}})).apply(this,arguments)}function Gt(ze){if(!ze)throw new Error("Layout data is required");if(!ze.config)throw new Error("Configuration is required in layout data");if(!ze.rootNode)throw new Error("Root node is required");if(!ze.nodes||!Array.isArray(ze.nodes))throw new Error("No nodes found in layout data");if(!Array.isArray(ze.edges))throw new Error("Edges array is required in layout data");return!0}L.A.use(D),(0,ie.K2)(ut,"addNodes"),(0,ie.K2)(G,"addEdges"),(0,ie.K2)(w,"createCytoscapeInstance"),(0,ie.K2)(Lt,"extractPositionedNodes"),(0,ie.K2)(At,"extractPositionedEdges"),(0,ie.K2)(Ge,"executeCoseBilkentLayout"),(0,ie.K2)(Gt,"validateLayoutData");var hr=(0,ie.K2)(function(){var ze=(0,lt.A)(function*(vr,Wr,{insertCluster:Br,insertEdge:Gr,insertEdgeLabel:aa,insertMarkers:zr,insertNode:Or,log:Be,positionEdgeLabel:Ir},{}){const z={},dt={},Bt=Wr.select("g");zr(Bt,vr.markers,vr.type,vr.diagramId);const Se=Bt.insert("g").attr("class","subgraphs"),X=Bt.insert("g").attr("class","edgePaths"),re=Bt.insert("g").attr("class","edgeLabels"),S=Bt.insert("g").attr("class","nodes");Be.debug("Inserting nodes into DOM for dimension calculation"),yield Promise.all(vr.nodes.map(function(){var qt=(0,lt.A)(function*(V){if(V.isGroup){const gt={...V};dt[V.id]=gt,z[V.id]=gt,yield Br(Se,V)}else{const gt={...V};z[V.id]=gt;const Y=yield Or(S,V,{config:vr.config,dir:vr.direction||"TB"}),Nt=Y.node().getBBox();gt.width=Nt.width,gt.height=Nt.height,gt.domId=Y,Be.debug(`Node ${V.id} dimensions: ${Nt.width}x${Nt.height}`)}});return function(V){return qt.apply(this,arguments)}}())),Be.debug("Running cose-bilkent layout algorithm");const ee={...vr,nodes:vr.nodes.map(qt=>{const V=z[qt.id];return{...qt,width:V.width,height:V.height}})},Rt=yield Ge(ee,vr.config);Be.debug("Positioning nodes based on layout results"),Rt.nodes.forEach(qt=>{const V=z[qt.id];V?.domId&&(V.domId.attr("transform",`translate(${qt.x}, ${qt.y})`),V.x=qt.x,V.y=qt.y,Be.debug(`Positioned node ${V.id} at center (${qt.x}, ${qt.y})`))}),Rt.edges.forEach(qt=>{const V=vr.edges.find(gt=>gt.id===qt.id);V&&(V.points=[{x:qt.startX,y:qt.startY},{x:qt.midX,y:qt.midY},{x:qt.endX,y:qt.endY}])}),Be.debug("Inserting and positioning edges"),yield Promise.all(vr.edges.map(function(){var qt=(0,lt.A)(function*(V){yield aa(re,V);const Y=z[V.start??""],Nt=z[V.end??""];if(Y&&Nt){const St=Rt.edges.find(Ut=>Ut.id===V.id);if(St){Be.debug("APA01 positionedEdge",St);const Ut={...V},ye=Gr(X,Ut,dt,vr.type,Y,Nt,vr.diagramId);Ir(Ut,ye)}else{const Ut={...V,points:[{x:Y.x||0,y:Y.y||0},{x:Nt.x||0,y:Nt.y||0}]},ye=Gr(X,Ut,dt,vr.type,Y,Nt,vr.diagramId);Ir(Ut,ye)}}});return function(V){return qt.apply(this,arguments)}}())),Be.debug("Cose-bilkent rendering completed")});return function(vr,Wr,Br,Gr){return ze.apply(this,arguments)}}(),"render")},8086:(ri,Er,P)=>{"use strict";P.d(Er,{P:()=>L});var lt=P(79006),ie=P(32303),L=(0,ie.K2)((ut,G,w,Lt)=>{ut.attr("class",w);const{width:At,height:Ge,x:bt,y:Gt}=D(ut,G);(0,lt.a$)(ut,Ge,At,Lt);const j=Mt(bt,Gt,At,Ge,G);ut.attr("viewBox",j),ie.Rm.debug(`viewBox configured: ${j} with padding: ${G}`)},"setupViewPortForSVG"),D=(0,ie.K2)((ut,G)=>{const w=ut.node()?.getBBox()||{width:0,height:0,x:0,y:0};return{width:w.width+2*G,height:w.height+2*G,x:w.x,y:w.y}},"calculateDimensionsWithPadding"),Mt=(0,ie.K2)((ut,G,w,Lt,At)=>`${ut-At} ${G-At} ${w} ${Lt}`,"createViewBox")},15363:(ri,Er,P)=>{"use strict";function lt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=Array(t);r<t;r++)a[r]=e[r];return a}function D(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ut(e,t,r){return t&&function Mt(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,ze(a.key),a)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function G(e,t){var r=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=Wr(e))||t){r&&(e=r);var a=0,i=function(){};return{s:i,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(u){throw u},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,s=!0,o=!1;return{s:function(){r=r.call(e)},n:function(){var u=r.next();return s=u.done,u},e:function(u){o=!0,n=u},f:function(){try{s||null==r.return||r.return()}finally{if(o)throw n}}}}function w(e,t,r){return(t=ze(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Gt(e,t){return function ie(e){if(Array.isArray(e))return e}(e)||function At(e,t){var r=null==e?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var a,i,n,s,o=[],u=!0,h=!1;try{if(n=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(a=n.call(r)).done)&&(o.push(a.value),o.length!==t);u=!0);}catch(f){h=!0,i=f}finally{try{if(!u&&null!=r.return&&(s=r.return(),Object(s)!==s))return}finally{if(h)throw i}}return o}}(e,t)||Wr(e,t)||function Ge(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(e){return function L(e){if(Array.isArray(e))return lt(e)}(e)||function Lt(e){if(typeof Symbol<"u"&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Wr(e)||function bt(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ze(e){var t=function hr(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t);if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}function vr(e){return(vr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function Wr(e,t){if(e){if("string"==typeof e)return lt(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?lt(e,t):void 0}}P.d(Er,{A:()=>Ps});var Wt,we,ve,ce,Ae,er,Dr,_e,nr,te,be,ar,y,E,m,A,b,C,Q,mt,jt,Vt,xe,je,fr,lr,$e,He,Br=typeof window>"u"?null:window,Gr=Br?Br.navigator:null,aa=vr(""),zr=vr({}),Or=vr(function(){}),Be=typeof HTMLElement>"u"?"undefined":vr(HTMLElement),Ir=function(t){return t&&t.instanceString&&z(t.instanceString)?t.instanceString():null},Xe=function(t){return null!=t&&vr(t)==aa},z=function(t){return null!=t&&vr(t)===Or},dt=function(t){return!ee(t)&&(Array.isArray?Array.isArray(t):null!=t&&t instanceof Array)},Bt=function(t){return null!=t&&vr(t)===zr&&!dt(t)&&t.constructor===Object},X=function(t){return null!=t&&vr(t)===vr(1)&&!isNaN(t)},S=function(t){if("undefined"!==Be)return null!=t&&t instanceof HTMLElement},ee=function(t){return Rt(t)||qt(t)},Rt=function(t){return"collection"===Ir(t)&&t._private.single},qt=function(t){return"collection"===Ir(t)&&!t._private.single},V=function(t){return"core"===Ir(t)},gt=function(t){return"stylesheet"===Ir(t)},Nt=function(t){return null==t||!(""!==t&&!t.match(/^\s+$/))},ye=function(t){return function(t){return null!=t&&vr(t)===zr}(t)&&z(t.then)},Pe=function(t,r){r||(r=function(){if(1===arguments.length)return arguments[0];if(0===arguments.length)return"undefined";for(var n=[],s=0;s<arguments.length;s++)n.push(arguments[s]);return n.join("$")});var a=function(){var o,s=arguments,u=r.apply(this,s),h=a.cache;return(o=h[u])||(o=h[u]=t.apply(this,s)),o};return a.cache={},a},oe=Pe(function(e){return e.replace(/([A-Z])/g,function(t){return"-"+t.toLowerCase()})}),qe=Pe(function(e){return e.replace(/(-\w)/g,function(t){return t[1].toUpperCase()})}),We=Pe(function(e,t){return e+t[0].toUpperCase()+t.substring(1)},function(e,t){return e+"$"+t}),Et=function(t){return Nt(t)?t:t.charAt(0).toUpperCase()+t.substring(1)},Tt=function(t,r){return t.slice(-1*r.length)===r},B="(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))",N="rgb[a]?\\(("+B+"[%]?)\\s*,\\s*("+B+"[%]?)\\s*,\\s*("+B+"[%]?)(?:\\s*,\\s*("+B+"))?\\)",et="rgb[a]?\\((?:"+B+"[%]?)\\s*,\\s*(?:"+B+"[%]?)\\s*,\\s*(?:"+B+"[%]?)(?:\\s*,\\s*(?:"+B+"))?\\)",yt="hsl[a]?\\(("+B+")\\s*,\\s*("+B+"[%])\\s*,\\s*("+B+"[%])(?:\\s*,\\s*("+B+"))?\\)",it="hsl[a]?\\((?:"+B+")\\s*,\\s*(?:"+B+"[%])\\s*,\\s*(?:"+B+"[%])(?:\\s*,\\s*(?:"+B+"))?\\)",ht=function(t,r){return t<r?-1:t>r?1:0},H=null!=Object.assign?Object.assign.bind(Object):function(e){for(var t=arguments,r=1;r<t.length;r++){var a=t[r];if(null!=a)for(var i=Object.keys(a),n=0;n<i.length;n++){var s=i[n];e[s]=a[s]}}return e},pe=function(t){return(dt(t)?t:null)||function(t){return Re[t.toLowerCase()]}(t)||function(t){if((4===t.length||7===t.length)&&"#"===t[0]){var a,i,n,s=16;return 4===t.length?(a=parseInt(t[1]+t[1],s),i=parseInt(t[2]+t[2],s),n=parseInt(t[3]+t[3],s)):(a=parseInt(t[1]+t[2],s),i=parseInt(t[3]+t[4],s),n=parseInt(t[5]+t[6],s)),[a,i,n]}}(t)||function(t){var r,a=new RegExp("^"+N+"$").exec(t);if(a){r=[];for(var i=[],n=1;n<=3;n++){var s=a[n];if("%"===s[s.length-1]&&(i[n]=!0),s=parseFloat(s),i[n]&&(s=s/100*255),s<0||s>255)return;r.push(Math.floor(s))}if((i[1]||i[2]||i[3])&&!(i[1]&&i[2]&&i[3]))return;var h=a[4];if(void 0!==h){if((h=parseFloat(h))<0||h>1)return;r.push(h)}}return r}(t)||function(t){var r,a,i,n,s,o,u,h;function f(_,U,O){return O<0&&(O+=1),O>1&&(O-=1),O<1/6?_+6*(U-_)*O:O<.5?U:O<2/3?_+(U-_)*(2/3-O)*6:_}var p=new RegExp("^"+yt+"$").exec(t);if(p){if((a=parseInt(p[1]))<0?a=(360- -1*a%360)%360:a>360&&(a%=360),a/=360,(i=parseFloat(p[2]))<0||i>100||(i/=100,(n=parseFloat(p[3]))<0||n>100)||(n/=100,void 0!==(s=p[4])&&((s=parseFloat(s))<0||s>1)))return;if(0===i)o=u=h=Math.round(255*n);else{var x=n<.5?n*(1+i):n+i-n*i,k=2*n-x;o=Math.round(255*f(k,x,a+1/3)),u=Math.round(255*f(k,x,a)),h=Math.round(255*f(k,x,a-1/3))}r=[o,u,h,s]}return r}(t)},Re={transparent:[0,0,0,0],aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},Ze=function(t){for(var r=t.map,a=t.keys,i=a.length,n=0;n<i;n++){var s=a[n];if(Bt(s))throw Error("Tried to set map with object key");n<a.length-1?(null==r[s]&&(r[s]={}),r=r[s]):r[s]=t.value}},de=function(t){for(var r=t.map,a=t.keys,i=a.length,n=0;n<i;n++){var s=a[n];if(Bt(s))throw Error("Tried to get map with object key");if(null==(r=r[s]))return r}return r},yr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function mr(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function sr(){return we?Wt:(we=1,Wt=function e(t){var r=typeof t;return null!=t&&("object"==r||"function"==r)})}function Qe(){if(er)return Ae;er=1;var e=function Ee(){return ce?ve:(ce=1,ve="object"==typeof yr&&yr&&yr.Object===Object&&yr)}(),t="object"==typeof self&&self&&self.Object===Object&&self,r=e||t||Function("return this")();return Ae=r}function M(){if(E)return y;E=1;var e=Qe();return y=e.Symbol}function zt(){if(mt)return Q;mt=1;var e=M(),t=function v(){if(A)return m;A=1;var e=M(),t=Object.prototype,r=t.hasOwnProperty,a=t.toString,i=e?e.toStringTag:void 0;return m=function n(s){var o=r.call(s,i),u=s[i];try{s[i]=void 0;var h=!0}catch{}var f=a.call(s);return h&&(o?s[i]=u:delete s[i]),f}}(),r=function R(){if(C)return b;C=1;var t=Object.prototype.toString;return b=function r(a){return t.call(a)}}(),n=e?e.toStringTag:void 0;return Q=function s(o){return null==o?void 0===o?"[object Undefined]":"[object Null]":n&&n in Object(o)?t(o):r(o)}}function Ke(){if(je)return xe;je=1;var e=zt(),t=function Kt(){return Vt?jt:(Vt=1,jt=function e(t){return null!=t&&"object"==typeof t})}();return xe=function a(i){return"symbol"==typeof i||t(i)&&"[object Symbol]"==e(i)}}var kr=function wr(){if(He)return $e;He=1;var e=sr(),t=function Yr(){if(_e)return Dr;_e=1;var e=Qe();return Dr=function(){return e.Date.now()}}(),r=function br(){if(lr)return fr;lr=1;var e=function g(){if(ar)return be;ar=1;var e=function ne(){if(te)return nr;te=1;var e=/\s/;return nr=function t(r){for(var a=r.length;a--&&e.test(r.charAt(a)););return a}}(),t=/^\s+/;return be=function r(a){return a&&a.slice(0,e(a)+1).replace(t,"")}}(),t=sr(),r=Ke(),i=/^[-+]0x[0-9a-f]+$/i,n=/^0b[01]+$/i,s=/^0o[0-7]+$/i,o=parseInt;return fr=function u(h){if("number"==typeof h)return h;if(r(h))return NaN;if(t(h)){var f="function"==typeof h.valueOf?h.valueOf():h;h=t(f)?f+"":f}if("string"!=typeof h)return 0===h?h:+h;h=e(h);var p=n.test(h);return p||s.test(h)?o(h.slice(2),p?2:8):i.test(h)?NaN:+h}}(),i=Math.max,n=Math.min;return $e=function s(o,u,h){var f,p,x,k,_,U,O=0,K=!1,$=!1,q=!0;if("function"!=typeof o)throw new TypeError("Expected a function");function vt(Oe){var tr=f,cr=p;return f=p=void 0,O=Oe,k=o.apply(cr,tr)}function Yt(Oe){var tr=Oe-U;return void 0===U||tr>=u||tr<0||$&&Oe-O>=x}function he(){var Oe=t();if(Yt(Oe))return me(Oe);_=setTimeout(he,function se(Oe){var dr=u-(Oe-U);return $?n(dr,x-(Oe-O)):dr}(Oe))}function me(Oe){return _=void 0,q&&f?vt(Oe):(f=p=void 0,k)}function Ie(){var Oe=t(),tr=Yt(Oe);if(f=arguments,p=this,U=Oe,tr){if(void 0===_)return function ae(Oe){return O=Oe,_=setTimeout(he,u),K?vt(Oe):k}(U);if($)return clearTimeout(_),_=setTimeout(he,u),vt(U)}return void 0===_&&(_=setTimeout(he,u)),k}return u=r(u)||0,e(h)&&(K=!!h.leading,x=($="maxWait"in h)?i(r(h.maxWait)||0,u):x,q="trailing"in h?!!h.trailing:q),Ie.cancel=function Te(){void 0!==_&&clearTimeout(_),O=0,f=U=p=_=void 0},Ie.flush=function Le(){return void 0===_?k:me(t())},Ie}}(),Kr=mr(kr),_r=Br?Br.performance:null,Jr=_r&&_r.now?function(){return _r.now()}:function(){return Date.now()},Lr=function(){if(Br){if(Br.requestAnimationFrame)return function(e){Br.requestAnimationFrame(e)};if(Br.mozRequestAnimationFrame)return function(e){Br.mozRequestAnimationFrame(e)};if(Br.webkitRequestAnimationFrame)return function(e){Br.webkitRequestAnimationFrame(e)};if(Br.msRequestAnimationFrame)return function(e){Br.msRequestAnimationFrame(e)}}return function(e){e&&setTimeout(function(){e(Jr())},1e3/60)}}(),ha=function(t){return Lr(t)},ia=Jr,jr=9261,or=5381,ur=function(t){for(var i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:jr;!(i=t.next()).done;)a=65599*a+i.value|0;return a},W=function(t){return 65599*(arguments.length>1&&void 0!==arguments[1]?arguments[1]:jr)+t|0},$t=function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:or;return(r<<5)+r+t|0},Fe=function(t){return 2097152*t[0]+t[1]},Tr=function(t,r){return[W(t[0],r[0]),$t(t[1],r[1])]},pr=function(t,r){var a={value:0,done:!1},i=0,n=t.length;return ur({next:function(){return i<n?a.value=t[i++]:a.done=!0,a}},r)},da=function(t,r){var a={value:0,done:!1},i=0,n=t.length;return ur({next:function(){return i<n?a.value=t.charCodeAt(i++):a.done=!0,a}},r)},Pa=function(){return Ma(arguments)},Ma=function(t){for(var r,a=0;a<t.length;a++){var i=t[a];r=0===a?da(i):da(i,r)}return r};var sa=!0,Sa=null!=console.warn,ea=null!=console.trace,Va=Number.MAX_SAFE_INTEGER||9007199254740991,gr=function(){return!0},Ua=function(){return!1},ir=function(){return 0},Oa=function(){},Ka=function(t){throw new Error(t)},Ja=function(t){if(void 0===t)return sa;sa=!!t},_a=function(t){Ja()&&(Sa?console.warn(t):(console.log(t),ea&&console.trace()))},Ha=function(t){return null==t?t:dt(t)?t.slice():Bt(t)?function(t){return H({},t)}(t):t},hi=function(t,r){for(r=t="";t++<36;r+=51*t&52?(15^t?8^Math.random()*(20^t?16:4):4).toString(16):"-");return r},Ce={},Ri=function(){return Ce},Ne=function(t){var r=Object.keys(t);return function(a){for(var i={},n=0;n<r.length;n++){var s=r[n],o=a?.[s];i[s]=void 0===o?t[s]:o}return i}},at=function(t,r,a){for(var i=t.length-1;i>=0;i--)t[i]===r&&t.splice(i,1)},Ct=function(t){t.splice(0,t.length)},Jt=function(t,r,a){return a&&(r=We(a,r)),t[r]},Ve=function(t,r,a,i){a&&(r=We(a,r)),t[r]=i},Dt=typeof Map<"u"?Map:function(){return ut(function e(){D(this,e),this._obj={}},[{key:"set",value:function(r,a){return this._obj[r]=a,this}},{key:"delete",value:function(r){return this._obj[r]=void 0,this}},{key:"clear",value:function(){this._obj={}}},{key:"has",value:function(r){return void 0!==this._obj[r]}},{key:"get",value:function(r){return this._obj[r]}}])}(),Je=function(){return ut(function e(t){if(D(this,e),this._obj=Object.create(null),this.size=0,null!=t){var r;r=null!=t.instanceString&&t.instanceString()===this.instanceString()?t.toArray():t;for(var a=0;a<r.length;a++)this.add(r[a])}},[{key:"instanceString",value:function(){return"set"}},{key:"add",value:function(r){var a=this._obj;1!==a[r]&&(a[r]=1,this.size++)}},{key:"delete",value:function(r){var a=this._obj;1===a[r]&&(a[r]=0,this.size--)}},{key:"clear",value:function(){this._obj=Object.create(null)}},{key:"has",value:function(r){return 1===this._obj[r]}},{key:"toArray",value:function(){var r=this;return Object.keys(this._obj).filter(function(a){return r.has(a)})}},{key:"forEach",value:function(r,a){return this.toArray().forEach(r,a)}}])}(),Xr="undefined"!==(typeof Set>"u"?"undefined":vr(Set))?Set:Je,Hr=function(t,r){var a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(void 0!==t&&void 0!==r&&V(t)){var i=r.group;if(null==i&&(i=r.data&&null!=r.data.source&&null!=r.data.target?"edges":"nodes"),"nodes"===i||"edges"===i){this.length=1,this[0]=this;var n=this._private={cy:t,single:!0,data:r.data||{},position:r.position||{x:0,y:0},autoWidth:void 0,autoHeight:void 0,autoPadding:void 0,compoundBoundsClean:!1,listeners:[],group:i,style:{},rstyle:{},styleCxts:[],styleKeys:{},removed:!0,selected:!!r.selected,selectable:void 0===r.selectable||!!r.selectable,locked:!!r.locked,grabbed:!1,grabbable:void 0===r.grabbable||!!r.grabbable,pannable:void 0===r.pannable?"edges"===i:!!r.pannable,active:!1,classes:new Xr,animation:{current:[],queue:[]},rscratch:{},scratch:r.scratch||{},edges:[],children:[],parent:r.parent&&r.parent.isNode()?r.parent:null,traversalCache:{},backgrounding:!1,bbCache:null,bbCacheShift:{x:0,y:0},bodyBounds:null,overlayBounds:null,labelBounds:{all:null,source:null,target:null,main:null},arrowBounds:{source:null,target:null,"mid-source":null,"mid-target":null}};if(null==n.position.x&&(n.position.x=0),null==n.position.y&&(n.position.y=0),r.renderedPosition){var s=r.renderedPosition,o=t.pan(),u=t.zoom();n.position={x:(s.x-o.x)/u,y:(s.y-o.y)/u}}var h=[];dt(r.classes)?h=r.classes:Xe(r.classes)&&(h=r.classes.split(/\s+/));for(var f=0,p=h.length;f<p;f++){var x=h[f];!x||""===x||n.classes.add(x)}this.createEmitter(),(void 0===a||a)&&this.restore();var k=r.style||r.css;k&&(_a("Setting a `style` bypass at element creation should be done only when absolutely necessary.  Try to use the stylesheet instead."),this.style(k))}else Ka("An element must be of type `nodes` or `edges`; you specified `"+i+"`")}else Ka("An element must have a core reference and parameters set")},ra=function(t){return t={bfs:t.bfs||!t.dfs,dfs:t.dfs||!t.bfs},function(a,i,n){var s;Bt(a)&&!ee(a)&&(a=(s=a).roots||s.root,i=s.visit,n=s.directed),n=2!==arguments.length||z(i)?n:i,i=z(i)?i:function(){};for(var U,o=this._private.cy,u=a=Xe(a)?this.filter(a):a,h=[],f=[],p={},x={},k={},_=0,O=this.byGroup(),K=O.nodes,$=O.edges,q=0;q<u.length;q++){var vt=u[q],ae=vt.id();vt.isNode()&&(h.unshift(vt),t.bfs&&(k[ae]=!0,f.push(vt)),x[ae]=0)}for(var Yt,se=function(){var Oe=t.bfs?h.shift():h.pop(),tr=Oe.id();if(t.dfs){if(k[tr])return 0;k[tr]=!0,f.push(Oe)}var qr,cr=x[tr],dr=p[tr],rr=null!=dr?dr.source():null,Cr=null!=dr?dr.target():null,Vr=null==dr?void 0:Oe.same(rr)?Cr[0]:rr[0];if(!0===(qr=i(Oe,dr,Vr,_++,cr)))return U=Oe,1;if(!1===qr)return 1;for(var Ar=Oe.connectedEdges().filter(function(Aa){return(!n||Aa.source().same(Oe))&&$.has(Aa)}),Fr=0;Fr<Ar.length;Fr++){var ga=Ar[Fr],Ea=ga.connectedNodes().filter(function(Aa){return!Aa.same(Oe)&&K.has(Aa)}),pa=Ea.id();0!==Ea.length&&!k[pa]&&(h.push(Ea=Ea[0]),t.bfs&&(k[pa]=!0,f.push(Ea)),p[pa]=ga,x[pa]=x[tr]+1)}};0!==h.length&&(0===(Yt=se())||1!==Yt););for(var he=o.collection(),me=0;me<f.length;me++){var Te=f[me],Le=p[Te.id()];null!=Le&&he.push(Le),he.push(Te)}return{path:o.collection(he),found:o.collection(U)}}},La={breadthFirstSearch:ra({bfs:!0}),depthFirstSearch:ra({dfs:!0})};La.bfs=La.breadthFirstSearch,La.dfs=La.depthFirstSearch;var ja,yi,Ei,fa={exports:{}},wa=fa.exports;var cn,Rr=mr(function mi(){return Ei||(Ei=1,yi=function $a(){return ja||(ja=1,e=fa,function(){var r,a,i,n,s,o,u,h,f,p,x,k,_,U,O;i=Math.floor,p=Math.min,a=function(K,$){return K<$?-1:K>$?1:0},f=function(K,$,q,vt,ae){var se;if(null==q&&(q=0),null==ae&&(ae=a),q<0)throw new Error("lo must be non-negative");for(null==vt&&(vt=K.length);q<vt;)ae($,K[se=i((q+vt)/2)])<0?vt=se:q=se+1;return[].splice.apply(K,[q,q-q].concat($)),$},o=function(K,$,q){return null==q&&(q=a),K.push($),U(K,0,K.length-1,q)},s=function(K,$){var q,vt;return null==$&&($=a),q=K.pop(),K.length?(vt=K[0],K[0]=q,O(K,0,$)):vt=q,vt},h=function(K,$,q){var vt;return null==q&&(q=a),vt=K[0],K[0]=$,O(K,0,q),vt},u=function(K,$,q){var vt;return null==q&&(q=a),K.length&&q(K[0],$)<0&&($=(vt=[K[0],$])[0],K[0]=vt[1],O(K,0,q)),$},n=function(K,$){var vt,ae,se,Yt,he;for(null==$&&($=a),Yt=[],vt=0,ae=(se=function(){he=[];for(var me=0,Te=i(K.length/2);0<=Te?me<Te:me>Te;0<=Te?me++:me--)he.push(me);return he}.apply(this).reverse()).length;vt<ae;vt++)Yt.push(O(K,se[vt],$));return Yt},_=function(K,$,q){var vt;if(null==q&&(q=a),-1!==(vt=K.indexOf($)))return U(K,0,vt,q),O(K,vt,q)},x=function(K,$,q){var ae,se,Yt,he;if(null==q&&(q=a),!(ae=K.slice(0,$)).length)return ae;for(n(ae,q),se=0,Yt=(he=K.slice($)).length;se<Yt;se++)u(ae,he[se],q);return ae.sort(q).reverse()},k=function(K,$,q){var vt,ae,se,Yt,he,me,Te,Le,Ie;if(null==q&&(q=a),10*$<=K.length){if(!(se=K.slice(0,$).sort(q)).length)return se;for(ae=se[se.length-1],Yt=0,me=(Te=K.slice($)).length;Yt<me;Yt++)q(vt=Te[Yt],ae)<0&&(f(se,vt,0,null,q),se.pop(),ae=se[se.length-1]);return se}for(n(K,q),Ie=[],he=0,Le=p($,K.length);0<=Le?he<Le:he>Le;0<=Le?++he:--he)Ie.push(s(K,q));return Ie},U=function(K,$,q,vt){var ae,se,Yt;for(null==vt&&(vt=a),ae=K[q];q>$&&vt(ae,se=K[Yt=q-1>>1])<0;)K[q]=se,q=Yt;return K[q]=ae},O=function(K,$,q){var vt,ae,se,Yt,he;for(null==q&&(q=a),ae=K.length,he=$,se=K[$],vt=2*$+1;vt<ae;)(Yt=vt+1)<ae&&!(q(K[vt],K[Yt])<0)&&(vt=Yt),K[$]=K[vt],vt=2*($=vt)+1;return K[$]=se,U(K,he,$,q)},r=function(){function K($){this.cmp=$??a,this.nodes=[]}return K.push=o,K.pop=s,K.replace=h,K.pushpop=u,K.heapify=n,K.updateItem=_,K.nlargest=x,K.nsmallest=k,K.prototype.push=function($){return o(this.nodes,$,this.cmp)},K.prototype.pop=function(){return s(this.nodes,this.cmp)},K.prototype.peek=function(){return this.nodes[0]},K.prototype.contains=function($){return-1!==this.nodes.indexOf($)},K.prototype.replace=function($){return h(this.nodes,$,this.cmp)},K.prototype.pushpop=function($){return u(this.nodes,$,this.cmp)},K.prototype.heapify=function(){return n(this.nodes,this.cmp)},K.prototype.updateItem=function($){return _(this.nodes,$,this.cmp)},K.prototype.clear=function(){return this.nodes=[]},K.prototype.empty=function(){return 0===this.nodes.length},K.prototype.size=function(){return this.nodes.length},K.prototype.clone=function(){var $;return($=new K).nodes=this.nodes.slice(0),$},K.prototype.toArray=function(){return this.nodes.slice(0)},K.prototype.insert=K.prototype.push,K.prototype.top=K.prototype.peek,K.prototype.front=K.prototype.peek,K.prototype.has=K.prototype.contains,K.prototype.copy=K.prototype.clone,K}(),e.exports=r}.call(wa)),fa.exports;var e}()),yi}()),ya=Ne({root:null,weight:function(t){return 1},directed:!1}),Ya={dijkstra:function(t){if(!Bt(t)){var r=arguments;t={root:r[0],weight:r[1],directed:r[2]}}var a=ya(t),i=a.root,s=a.directed,o=this,u=a.weight,h=Xe(i)?this.filter(i)[0]:i[0],f={},p={},x={},k=this.byGroup(),_=k.nodes,U=k.edges;U.unmergeBy(function(cr){return cr.isLoop()});for(var O=function(dr){return f[dr.id()]},K=function(dr,rr){f[dr.id()]=rr,$.updateItem(dr)},$=new Rr(function(cr,dr){return O(cr)-O(dr)}),q=0;q<_.length;q++){var vt=_[q];f[vt.id()]=vt.same(h)?0:1/0,$.push(vt)}for(var ae=function(dr,rr){for(var qr,Cr=(s?dr.edgesTo(rr):dr.edgesWith(rr)).intersect(U),Vr=1/0,Ar=0;Ar<Cr.length;Ar++){var Fr=Cr[Ar],ga=u(Fr);(ga<Vr||!qr)&&(Vr=ga,qr=Fr)}return{edge:qr,dist:Vr}};$.size()>0;){var se=$.pop(),Yt=O(se),he=se.id();if(x[he]=Yt,Yt!==1/0)for(var me=se.neighborhood().intersect(_),Te=0;Te<me.length;Te++){var Le=me[Te],Ie=Le.id(),Oe=ae(se,Le),tr=Yt+Oe.dist;tr<O(Le)&&(K(Le,tr),p[Ie]={node:se,edge:Oe.edge})}}return{distanceTo:function(dr){var rr=Xe(dr)?_.filter(dr)[0]:dr[0];return x[rr.id()]},pathTo:function(dr){var rr=Xe(dr)?_.filter(dr)[0]:dr[0],Cr=[],Vr=rr,qr=Vr.id();if(rr.length>0)for(Cr.unshift(rr);p[qr];){var Ar=p[qr];Cr.unshift(Ar.edge),Cr.unshift(Ar.node),qr=(Vr=Ar.node).id()}return o.spawn(Cr)}}}},ni={kruskal:function(t){t=t||function(q){return 1};for(var r=this.byGroup(),a=r.nodes,i=r.edges,n=a.length,s=new Array(n),o=a,u=function(vt){for(var ae=0;ae<s.length;ae++)if(s[ae].has(vt))return ae},h=0;h<n;h++)s[h]=this.spawn(a[h]);for(var f=i.sort(function(q,vt){return t(q)-t(vt)}),p=0;p<f.length;p++){var x=f[p],k=x.source()[0],_=x.target()[0],U=u(k),O=u(_),K=s[U],$=s[O];U!==O&&(o.merge(x),K.merge($),s.splice(O,1))}return o}},Mr=Ne({root:null,goal:null,weight:function(t){return 1},heuristic:function(t){return 0},directed:!1}),Pi={aStar:function(t){var r=this.cy(),a=Mr(t),i=a.root,n=a.goal,s=a.heuristic,o=a.directed,u=a.weight;i=r.collection(i)[0],n=r.collection(n)[0];var q,vt,h=i.id(),f=n.id(),p={},x={},k={},_=new Rr(function(qr,Ar){return x[qr.id()]-x[Ar.id()]}),U=new Xr,O={},K={},$=function(Ar,Fr){_.push(Ar),U.add(Fr)},ae=function(){q=_.pop(),vt=q.id(),U.delete(vt)},se=function(Ar){return U.has(Ar)};$(i,h),p[h]=0,x[h]=s(i);for(var Yt=0;_.size()>0;){if(ae(),Yt++,vt===f){for(var he=[],me=n,Te=f,Le=K[Te];he.unshift(me),null!=Le&&he.unshift(Le),null!=(me=O[Te]);)Le=K[Te=me.id()];return{found:!0,distance:p[vt],path:this.spawn(he),steps:Yt}}k[vt]=!0;for(var Ie=q._private.edges,Oe=0;Oe<Ie.length;Oe++){var tr=Ie[Oe];if(this.hasElementWithId(tr.id())&&(!o||tr.data("source")===vt)){var cr=tr.source(),dr=tr.target(),rr=cr.id()!==vt?cr:dr,Cr=rr.id();if(this.hasElementWithId(Cr)&&!k[Cr]){var Vr=p[vt]+u(tr);if(!se(Cr)){p[Cr]=Vr,x[Cr]=Vr+s(rr),$(rr,Cr),O[Cr]=q,K[Cr]=tr;continue}Vr<p[Cr]&&(p[Cr]=Vr,x[Cr]=Vr+s(rr),O[Cr]=q,K[Cr]=tr)}}}}return{found:!1,distance:void 0,path:void 0,steps:Yt}}},ua=Ne({weight:function(t){return 1},directed:!1}),ki={floydWarshall:function(t){for(var r=this.cy(),a=ua(t),n=a.directed,s=a.weight,o=this.byGroup(),u=o.nodes,h=o.edges,f=u.length,p=f*f,x=function(ga){return u.indexOf(ga)},k=function(ga){return u[ga]},_=new Array(p),U=0;U<p;U++){var O=U%f;_[U]=(U-O)/f===O?0:1/0}for(var $=new Array(p),q=new Array(p),vt=0;vt<h.length;vt++){var ae=h[vt],se=ae.source()[0],Yt=ae.target()[0];if(se!==Yt){var he=x(se),me=x(Yt),Te=he*f+me,Le=s(ae);if(_[Te]>Le&&(_[Te]=Le,$[Te]=me,q[Te]=ae),!n){var Ie=me*f+he;!n&&_[Ie]>Le&&(_[Ie]=Le,$[Ie]=he,q[Ie]=ae)}}}for(var Oe=0;Oe<f;Oe++)for(var tr=0;tr<f;tr++)for(var cr=tr*f+Oe,dr=0;dr<f;dr++){var rr=tr*f+dr,Cr=Oe*f+dr;_[cr]+_[Cr]<_[rr]&&(_[rr]=_[cr]+_[Cr],$[rr]=$[cr])}var qr=function(ga){return x(function(ga){return(Xe(ga)?r.filter(ga):ga)[0]}(ga))};return{distance:function(ga,Ea){var pa=qr(ga),Aa=qr(Ea);return _[pa*f+Aa]},path:function(ga,Ea){var pa=qr(ga),Aa=qr(Ea),Ra=k(pa);if(pa===Aa)return Ra.collection();if(null==$[pa*f+Aa])return r.collection();var Za=r.collection();for(Za.merge(Ra);pa!==Aa;)Za.merge(q[pa*f+(pa=$[pa*f+Aa])]),Za.merge(k(pa));return Za}}}},Bi=Ne({weight:function(t){return 1},directed:!1,root:null}),Wi={bellmanFord:function(t){var r=this,a=Bi(t),n=a.directed,s=a.root,o=a.weight,u=this,h=this.cy(),f=this.byGroup(),p=f.edges,x=f.nodes,k=x.length,_=new Dt,U=!1,O=[];s=h.collection(s)[0],p.unmergeBy(function(Ci){return Ci.isLoop()});for(var K=p.length,$=function(xi){var gi=_.get(xi.id());return gi||(gi={},_.set(xi.id(),gi)),gi},q=function(xi){return(Xe(xi)?h.$(xi):xi)[0]},se=0;se<k;se++){var Yt=x[se],he=$(Yt);he.dist=Yt.same(s)?0:1/0,he.pred=null,he.edge=null}for(var me=!1,Te=function(xi,gi,Qa,ci,di,_i){var fi=ci.dist+_i;fi<di.dist&&!Qa.same(ci.edge)&&(di.dist=fi,di.pred=xi,di.edge=Qa,me=!0)},Le=1;Le<k;Le++){me=!1;for(var Ie=0;Ie<K;Ie++){var Oe=p[Ie],tr=Oe.source(),cr=Oe.target(),dr=o(Oe),rr=$(tr),Cr=$(cr);Te(tr,0,Oe,rr,Cr,dr),n||Te(cr,0,Oe,Cr,rr,dr)}if(!me)break}if(me)for(var Vr=[],qr=0;qr<K;qr++){var Ar=p[qr],Fr=Ar.source(),ga=Ar.target(),Ea=o(Ar),pa=$(Fr).dist,Aa=$(ga).dist;if(pa+Ea<Aa||!n&&Aa+Ea<pa){if(U||(_a("Graph contains a negative weight cycle for Bellman-Ford"),U=!0),!1===t.findNegativeWeightCycles)break;var Ra=[];pa+Ea<Aa&&Ra.push(Fr),!n&&Aa+Ea<pa&&Ra.push(ga);for(var Za=Ra.length,Ta=0;Ta<Za;Ta++){var Nr=Ra[Ta],Ur=[Nr];Ur.push($(Nr).edge);for(var Zr=$(Nr).pred;-1===Ur.indexOf(Zr);)Ur.push(Zr),Ur.push($(Zr).edge),Zr=$(Zr).pred;for(var ma=(Ur=Ur.slice(Ur.indexOf(Zr)))[0].id(),Ga=0,li=2;li<Ur.length;li+=2)Ur[li].id()<ma&&(ma=Ur[li].id(),Ga=li);(Ur=Ur.slice(Ga).concat(Ur.slice(0,Ga))).push(Ur[0]);var Mi=Ur.map(function(Ci){return Ci.id()}).join(",");-1===Vr.indexOf(Mi)&&(O.push(u.spawn(Ur)),Vr.push(Mi))}}}return{distanceTo:function(xi){return $(q(xi)).dist},pathTo:function(xi){for(var gi=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s,ci=[],di=q(xi);;){if(null==di)return r.spawn();var _i=$(di),fi=_i.edge,wi=_i.pred;if(ci.unshift(di[0]),di.same(gi)&&ci.length>0)break;null!=fi&&ci.unshift(fi),di=wi}return u.spawn(ci)},hasNegativeWeightCycle:U,negativeWeightCycles:O}}},ln=Math.sqrt(2),Ji=function(t,r,a){0===a.length&&Ka("Karger-Stein must be run on a connected (sub)graph");for(var i=a[t],o=r[i[1]],u=r[i[2]],h=a,f=h.length-1;f>=0;f--){var p=h[f],x=p[1],k=p[2];(r[x]===o&&r[k]===u||r[x]===u&&r[k]===o)&&h.splice(f,1)}for(var _=0;_<h.length;_++){var U=h[_];U[1]===u?(h[_]=U.slice(),h[_][1]=o):U[2]===u&&(h[_]=U.slice(),h[_][2]=o)}for(var O=0;O<r.length;O++)r[O]===u&&(r[O]=o);return h},Oi=function(t,r,a,i){for(;a>i;){var n=Math.floor(Math.random()*r.length);r=Ji(n,t,r),a--}return r},zi={kargerStein:function(){var t=this,r=this.byGroup(),a=r.nodes,i=r.edges;i.unmergeBy(function(Cr){return Cr.isLoop()});var n=a.length,s=i.length,o=Math.ceil(Math.pow(Math.log(n)/Math.LN2,2)),u=Math.floor(n/ln);if(!(n<2)){for(var h=[],f=0;f<s;f++){var p=i[f];h.push([f,a.indexOf(p.source()),a.indexOf(p.target())])}for(var x=1/0,k=[],_=new Array(n),U=new Array(n),O=new Array(n),K=function(Vr,qr){for(var Ar=0;Ar<n;Ar++)qr[Ar]=Vr[Ar]},$=0;$<=o;$++){for(var q=0;q<n;q++)U[q]=q;var vt=Oi(U,h.slice(),n,u),ae=vt.slice();K(U,O);var se=Oi(U,vt,u,2),Yt=Oi(O,ae,u,2);se.length<=Yt.length&&se.length<x?(x=se.length,k=se,K(U,_)):Yt.length<=se.length&&Yt.length<x&&(x=Yt.length,k=Yt,K(O,_))}for(var he=this.spawn(k.map(function(Cr){return i[Cr[0]]})),me=this.spawn(),Te=this.spawn(),Le=_[0],Ie=0;Ie<_.length;Ie++){var tr=a[Ie];_[Ie]===Le?me.merge(tr):Te.merge(tr)}var cr=function(Vr){var qr=t.spawn();return Vr.forEach(function(Ar){qr.merge(Ar),Ar.connectedEdges().forEach(function(Fr){t.contains(Fr)&&!he.contains(Fr)&&qr.merge(Fr)})}),qr},dr=[cr(me),cr(Te)];return{cut:he,components:dr,partition1:me,partition2:Te}}Ka("At least 2 nodes are required for Karger-Stein algorithm")}},Bn=function(t,r,a){return{x:t.x*r+a.x,y:t.y*r+a.y}},Vn=function(t,r,a){return{x:(t.x-a.x)/r,y:(t.y-a.y)/r}},hn=function(t){return{x:t[0],y:t[1]}},kn=function(t,r){return Math.atan2(r,t)-Math.PI/2},Rn=Math.log2||function(e){return Math.log(e)/Math.log(2)},un=function(t){return t>0?1:t<0?-1:0},Xi=function(t,r){return Math.sqrt(rn(t,r))},rn=function(t,r){var a=r.x-t.x,i=r.y-t.y;return a*a+i*i},Yn=function(t){for(var r=t.length,a=0,i=0;i<r;i++)a+=t[i];for(var n=0;n<r;n++)t[n]=t[n]/a;return t},Ht=function(t,r,a,i){return(1-i)*(1-i)*t+2*(1-i)*i*r+i*i*a},d=function(t,r,a,i){return{x:Ht(t.x,r.x,a.x,i),y:Ht(t.y,r.y,a.y,i)}},Xt=function(t,r,a){return Math.max(t,Math.min(a,r))},kt=function(t){if(null==t)return{x1:1/0,y1:1/0,x2:-1/0,y2:-1/0,w:0,h:0};if(null!=t.x1&&null!=t.y1){if(null!=t.x2&&null!=t.y2&&t.x2>=t.x1&&t.y2>=t.y1)return{x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2,w:t.x2-t.x1,h:t.y2-t.y1};if(null!=t.w&&null!=t.h&&t.w>=0&&t.h>=0)return{x1:t.x1,y1:t.y1,x2:t.x1+t.w,y2:t.y1+t.h,w:t.w,h:t.h}}},nt=function(t,r){t.x1=Math.min(t.x1,r.x1),t.x2=Math.max(t.x2,r.x2),t.w=t.x2-t.x1,t.y1=Math.min(t.y1,r.y1),t.y2=Math.max(t.y2,r.y2),t.h=t.y2-t.y1},wt=function(t,r,a){t.x1=Math.min(t.x1,r),t.x2=Math.max(t.x2,r),t.w=t.x2-t.x1,t.y1=Math.min(t.y1,a),t.y2=Math.max(t.y2,a),t.h=t.y2-t.y1},J=function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t.x1-=r,t.x2+=r,t.y1-=r,t.y2+=r,t.w=t.x2-t.x1,t.h=t.y2-t.y1,t},Z=function(t){var a,i,n,s,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0];if(1===r.length)a=i=n=s=r[0];else if(2===r.length)a=n=r[0],s=i=r[1];else if(4===r.length){var o=Gt(r,4);a=o[0],i=o[1],n=o[2],s=o[3]}return t.x1-=s,t.x2+=i,t.y1-=a,t.y2+=n,t.w=t.x2-t.x1,t.h=t.y2-t.y1,t},It=function(t,r){t.x1=r.x1,t.y1=r.y1,t.x2=r.x2,t.y2=r.y2,t.w=t.x2-t.x1,t.h=t.y2-t.y1},fe=function(t,r){return!(t.x1>r.x2||r.x1>t.x2||t.x2<r.x1||r.x2<t.x1||t.y2<r.y1||r.y2<t.y1||t.y1>r.y2||r.y1>t.y2)},De=function(t,r,a){return t.x1<=r&&r<=t.x2&&t.y1<=a&&a<=t.y2},tt=function(t,r){return De(t,r.x,r.y)},l=function(t,r){return De(t,r.x1,r.y1)&&De(t,r.x2,r.y2)},T=null!==(cn=Math.hypot)&&void 0!==cn?cn:function(e,t){return Math.sqrt(e*e+t*t)};var xt=function(t,r,a,i,n,s,o){var _,cr,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"auto",h="auto"===u?Ui(n,s):u,f=n/2,p=s/2,x=(h=Math.min(h,f,p))!==f,k=h!==p;if(x){var O=i-p-o;if((_=ji(t,r,a,i,a-f+h-o,O,a+f-h+o,O,!1)).length>0)return _}if(k){var q=a+f+o;if((_=ji(t,r,a,i,q,i-p+h-o,q,i+p-h+o,!1)).length>0)return _}if(x){var he=i+p+o;if((_=ji(t,r,a,i,a-f+h-o,he,a+f-h+o,he,!1)).length>0)return _}if(k){var Le=a-f-o;if((_=ji(t,r,a,i,Le,i-p+h-o,Le,i+p-h+o,!1)).length>0)return _}var dr=a-f+h,rr=i-p+h;if((cr=Fa(t,r,a,i,dr,rr,h+o)).length>0&&cr[0]<=dr&&cr[1]<=rr)return[cr[0],cr[1]];var Cr=a+f-h,Vr=i-p+h;if((cr=Fa(t,r,a,i,Cr,Vr,h+o)).length>0&&cr[0]>=Cr&&cr[1]<=Vr)return[cr[0],cr[1]];var qr=a+f-h,Ar=i+p-h;if((cr=Fa(t,r,a,i,qr,Ar,h+o)).length>0&&cr[0]>=qr&&cr[1]>=Ar)return[cr[0],cr[1]];var Fr=a-f+h,ga=i+p-h;return(cr=Fa(t,r,a,i,Fr,ga,h+o)).length>0&&cr[0]<=Fr&&cr[1]>=ga?[cr[0],cr[1]]:[]},Me=function(t,r,a,i,n,s,o){var u=o,h=Math.min(a,n),f=Math.max(a,n),p=Math.min(i,s),x=Math.max(i,s);return h-u<=t&&t<=f+u&&p-u<=r&&r<=x+u},Qt=function(t,r,a,i,n,s,o,u,h){var f_x1=Math.min(a,o,n)-h,f_x2=Math.max(a,o,n)+h,f_y1=Math.min(i,u,s)-h,f_y2=Math.max(i,u,s)+h;return!(t<f_x1||t>f_x2||r<f_y1||r>f_y2)},Sr=function(t,r,a,i,n,s,o,u){var k=[];!function(t,r,a,i,n){var o,u,h,f,p,x,k,_;0===t&&(t=1e-5),h=-27*(i/=t)+(r/=t)*(9*(a/=t)-r*r*2),o=(u=(3*a-r*r)/9)*u*u+(h/=54)*h,n[1]=0,k=r/3,o>0?(p=(p=h+Math.sqrt(o))<0?-Math.pow(-p,1/3):Math.pow(p,1/3),x=(x=h-Math.sqrt(o))<0?-Math.pow(-x,1/3):Math.pow(x,1/3),n[0]=-k+p+x,n[4]=n[2]=-(k+=(p+x)/2),k=Math.sqrt(3)*(-x+p)/2,n[3]=k,n[5]=-k):(n[5]=n[3]=0,0===o?(_=h<0?-Math.pow(-h,1/3):Math.pow(h,1/3),n[0]=2*_-k,n[4]=n[2]=-(_+k)):(f=(u=-u)*u*u,f=Math.acos(h/Math.sqrt(f)),_=2*Math.sqrt(u),n[0]=-k+_*Math.cos(f/3),n[2]=-k+_*Math.cos((f+2*Math.PI)/3),n[4]=-k+_*Math.cos((f+4*Math.PI)/3)))}(1*a*a-4*a*n+2*a*o+4*n*n-4*n*o+o*o+i*i-4*i*s+2*i*u+4*s*s-4*s*u+u*u,9*a*n-3*a*a-3*a*o-6*n*n+3*n*o+9*i*s-3*i*i-3*i*u-6*s*s+3*s*u,3*a*a-6*a*n+a*o-a*t+2*n*n+2*n*t-o*t+3*i*i-6*i*s+i*u-i*r+2*s*s+2*s*r-u*r,1*a*n-a*a+a*t-n*t+i*s-i*i+i*r-s*r,k);for(var U=[],O=0;O<6;O+=2)Math.abs(k[O+1])<1e-7&&k[O]>=0&&k[O]<=1&&U.push(k[O]);U.push(1),U.push(0);for(var $,q,vt,K=-1,ae=0;ae<U.length;ae++)$=Math.pow(1-U[ae],2)*a+2*(1-U[ae])*U[ae]*n+U[ae]*U[ae]*o,q=Math.pow(1-U[ae],2)*i+2*(1-U[ae])*U[ae]*s+U[ae]*U[ae]*u,vt=Math.pow($-t,2)+Math.pow(q-r,2),K>=0?vt<K&&(K=vt):K=vt;return K},ta=function(t,r,a,i,n,s){var o=[t-a,r-i],u=[n-a,s-i],h=u[0]*u[0]+u[1]*u[1],f=o[0]*o[0]+o[1]*o[1],p=o[0]*u[0]+o[1]*u[1],x=p*p/h;return p<0?f:x>h?(t-n)*(t-n)+(r-s)*(r-s):f-x},Pr=function(t,r,a){for(var i,n,s,o,h=0,f=0;f<a.length/2;f++)if(n=a[2*f+1],f+1<a.length/2?(s=a[2*(f+1)],o=a[2*(f+1)+1]):(s=a[2*(f+1-a.length/2)],o=a[2*(f+1-a.length/2)+1]),(i=a[2*f])!=t||s!=t){if(!(i>=t&&t>=s||i<=t&&t<=s))continue;(t-i)/(s-i)*(o-n)+n>r&&h++}return h%2!=0},la=function(t,r,a,i,n,s,o,u,h){var p,U,f=new Array(a.length);null!=u[0]?(p=Math.atan(u[1]/u[0]),u[0]<0?p+=Math.PI/2:p=-p-Math.PI/2):p=u;for(var x=Math.cos(-p),k=Math.sin(-p),_=0;_<f.length/2;_++)f[2*_]=s/2*(a[2*_]*x-a[2*_+1]*k),f[2*_+1]=o/2*(a[2*_+1]*x+a[2*_]*k),f[2*_]+=i,f[2*_+1]+=n;if(h>0){var O=Ba(f,-h);U=ka(O)}else U=f;return Pr(t,r,U)},ka=function(t){for(var o,u,h,f,r=new Array(t.length/2),p=0;p<t.length/4;p++){p<t.length/4-1?(o=t[4*(p+1)],u=t[4*(p+1)+1],h=t[4*(p+1)+2],f=t[4*(p+1)+3]):(o=t[0],u=t[1],h=t[2],f=t[3]);var x=ji(t[4*p],t[4*p+1],t[4*p+2],t[4*p+3],o,u,h,f,!0);r[2*p]=x[0],r[2*p+1]=x[1]}return r},Ba=function(t,r){for(var i,n,s,o,a=new Array(2*t.length),u=0;u<t.length/2;u++){u<t.length/2-1?(s=t[2*(u+1)],o=t[2*(u+1)+1]):(s=t[0],o=t[1]);var h=o-(n=t[2*u+1]),f=-(s-(i=t[2*u])),p=Math.sqrt(h*h+f*f),x=h/p,k=f/p;a[4*u]=i+x*r,a[4*u+1]=n+k*r,a[4*u+2]=s+x*r,a[4*u+3]=o+k*r}return a},za=function(t,r,a,i,n,s,o){return t-=n,r-=s,(t/=a/2+o)*t+(r/=i/2+o)*r<=1},Fa=function(t,r,a,i,n,s,o){var u=[a-t,i-r],h=[t-n,r-s],f=u[0]*u[0]+u[1]*u[1],p=2*(h[0]*u[0]+h[1]*u[1]),k=p*p-4*f*(h[0]*h[0]+h[1]*h[1]-o*o);if(k<0)return[];var _=(-p+Math.sqrt(k))/(2*f),U=(-p-Math.sqrt(k))/(2*f),O=Math.min(_,U),K=Math.max(_,U),$=[];if(O>=0&&O<=1&&$.push(O),K>=0&&K<=1&&$.push(K),0===$.length)return[];var q=$[0]*u[0]+t,vt=$[0]*u[1]+r;return $.length>1?$[0]==$[1]?[q,vt]:[q,vt,$[1]*u[0]+t,$[1]*u[1]+r]:[q,vt]},ui=function(t,r,a){return r<=t&&t<=a||a<=t&&t<=r?t:t<=r&&r<=a||a<=r&&r<=t?r:a},ji=function(t,r,a,i,n,s,o,u,h){var f=t-n,p=a-t,x=o-n,k=r-s,_=i-r,U=u-s,O=x*k-U*f,K=p*k-_*f,$=U*p-x*_;if(0!==$){var q=O/$,vt=K/$;return-.001<=q&&q<=1.001&&-.001<=vt&&vt<=1.001||h?[t+q*p,r+q*_]:[]}return 0===O||0===K?ui(t,a,o)===o?[o,u]:ui(t,a,n)===n?[n,s]:ui(n,o,a)===a?[a,i]:[]:[]},$n=function(t,r,a,i,n){var s=[],o=i/2,u=n/2,h=r,f=a;s.push({x:h+o*t[0],y:f+u*t[1]});for(var p=1;p<t.length/2;p++)s.push({x:h+o*t[2*p],y:f+u*t[2*p+1]});return s},Tn=function(t,r,a,i,n,s,o,u){var f,k,h=[],p=new Array(a.length),x=!0;if(null==s&&(x=!1),x){for(var _=0;_<p.length/2;_++)p[2*_]=a[2*_]*s+i,p[2*_+1]=a[2*_+1]*o+n;if(u>0){var U=Ba(p,-u);k=ka(U)}else k=p}else k=a;for(var $,q,vt=0;vt<k.length/2;vt++)vt<k.length/2-1?($=k[2*(vt+1)],q=k[2*(vt+1)+1]):($=k[0],q=k[1]),0!==(f=ji(t,r,i,n,k[2*vt],k[2*vt+1],$,q)).length&&h.push(f[0],f[1]);return h},an=function(t,r,a){var i=[t[0]-r[0],t[1]-r[1]],n=Math.sqrt(i[0]*i[0]+i[1]*i[1]),s=(n-a)/n;return s<0&&(s=1e-5),[r[0]+s*i[0],r[1]+s*i[1]]},Fi=function(t,r){var a=pn(t,r);return bn(a)},bn=function(t){for(var r,a,i=t.length/2,n=1/0,s=1/0,o=-1/0,u=-1/0,h=0;h<i;h++)r=t[2*h],a=t[2*h+1],n=Math.min(n,r),o=Math.max(o,r),s=Math.min(s,a),u=Math.max(u,a);for(var f=2/(o-n),p=2/(u-s),x=0;x<i;x++)r=t[2*x]=t[2*x]*f,a=t[2*x+1]=t[2*x+1]*p,n=Math.min(n,r),o=Math.max(o,r),s=Math.min(s,a),u=Math.max(u,a);if(s<-1)for(var k=0;k<i;k++)a=t[2*k+1]=t[2*k+1]+(-1-s);return t},pn=function(t,r){var a=1/t*2*Math.PI,i=t%2==0?Math.PI/2+a/2:Math.PI/2;i+=r;for(var s,n=new Array(2*t),o=0;o<t;o++)s=o*a+i,n[2*o]=Math.cos(s),n[2*o+1]=Math.sin(-s);return n},Ui=function(t,r){return Math.min(t/4,r/4,8)},os=function(t,r){return Math.min(t/10,r/10,8)},yl=function(t,r){return{heightOffset:Math.min(15,.05*r),widthOffset:Math.min(100,.25*t),ctrlPtOffsetPct:.05}};function ml(e,t){function r(p){for(var x=[],k=0;k<p.length;k++){var _=p[k],U=p[(k+1)%p.length],O={x:U.x-_.x,y:U.y-_.y},K={x:-O.y,y:O.x},$=Math.sqrt(K.x*K.x+K.y*K.y);x.push({x:K.x/$,y:K.y/$})}return x}function a(p,x){var O,k=1/0,_=-1/0,U=G(p);try{for(U.s();!(O=U.n()).done;){var K=O.value,$=K.x*x.x+K.y*x.y;k=Math.min(k,$),_=Math.max(_,$)}}catch(q){U.e(q)}finally{U.f()}return{min:k,max:_}}function i(p,x){return!(p.max<x.min||x.max<p.min)}var o,s=G([].concat(j(r(e)),j(r(t))));try{for(s.s();!(o=s.n()).done;){var u=o.value;if(!i(a(e,u),a(t,u)))return!1}}catch(p){s.e(p)}finally{s.f()}return!0}var F0=Ne({dampingFactor:.8,precision:1e-6,iterations:200,weight:function(t){return 1}}),K0={pageRank:function(t){for(var r=F0(t),a=r.dampingFactor,i=r.precision,n=r.iterations,s=r.weight,o=this._private.cy,u=this.byGroup(),h=u.nodes,f=u.edges,p=h.length,k=f.length,_=new Array(p*p),U=new Array(p),O=(1-a)/p,K=0;K<p;K++){for(var $=0;$<p;$++)_[K*p+$]=0;U[K]=0}for(var vt=0;vt<k;vt++){var ae=f[vt],se=ae.data("source"),Yt=ae.data("target");if(se!==Yt){var he=h.indexOfId(se),me=h.indexOfId(Yt),Te=s(ae);_[me*p+he]+=Te,U[he]+=Te}}for(var Ie=1/p+O,Oe=0;Oe<p;Oe++)if(0===U[Oe])for(var tr=0;tr<p;tr++)_[tr*p+Oe]=Ie;else for(var dr=0;dr<p;dr++){var rr=dr*p+Oe;_[rr]=_[rr]/U[Oe]+O}for(var qr,Cr=new Array(p),Vr=new Array(p),Ar=0;Ar<p;Ar++)Cr[Ar]=1;for(var Fr=0;Fr<n;Fr++){for(var ga=0;ga<p;ga++)Vr[ga]=0;for(var Ea=0;Ea<p;Ea++)for(var pa=0;pa<p;pa++)Vr[Ea]+=_[Ea*p+pa]*Cr[pa];Yn(Vr),qr=Cr,Cr=Vr,Vr=qr;for(var Ra=0,Za=0;Za<p;Za++){var Ta=qr[Za]-Cr[Za];Ra+=Ta*Ta}if(Ra<i)break}return{rank:function(Zr){return Zr=o.collection(Zr)[0],Cr[h.indexOf(Zr)]}}}},ch=Ne({root:null,weight:function(t){return 1},directed:!1,alpha:0}),Is={degreeCentralityNormalized:function(t){t=ch(t);var r=this.cy(),a=this.nodes(),i=a.length;if(t.directed){for(var f={},p={},x=0,k=0,_=0;_<i;_++){var U=a[_],O=U.id();t.root=U;var K=this.degreeCentrality(t);x<K.indegree&&(x=K.indegree),k<K.outdegree&&(k=K.outdegree),f[O]=K.indegree,p[O]=K.outdegree}return{indegree:function(q){return 0==x?0:(Xe(q)&&(q=r.filter(q)),f[q.id()]/x)},outdegree:function(q){return 0===k?0:(Xe(q)&&(q=r.filter(q)),p[q.id()]/k)}}}for(var n={},s=0,o=0;o<i;o++){var u=a[o];t.root=u;var h=this.degreeCentrality(t);s<h.degree&&(s=h.degree),n[u.id()]=h.degree}return{degree:function(q){return 0===s?0:(Xe(q)&&(q=r.filter(q)),n[q.id()]/s)}}},degreeCentrality:function(t){t=ch(t);var r=this.cy(),a=this,n=t.root,s=t.weight,o=t.directed,u=t.alpha;if(n=r.collection(n)[0],o){for(var k=n.connectedEdges(),_=k.filter(function(se){return se.target().same(n)&&a.has(se)}),U=k.filter(function(se){return se.source().same(n)&&a.has(se)}),O=_.length,K=U.length,$=0,q=0,vt=0;vt<_.length;vt++)$+=s(_[vt]);for(var ae=0;ae<U.length;ae++)q+=s(U[ae]);return{indegree:Math.pow(O,1-u)*Math.pow($,u),outdegree:Math.pow(K,1-u)*Math.pow(q,u)}}for(var h=n.connectedEdges().intersection(a),f=h.length,p=0,x=0;x<h.length;x++)p+=s(h[x]);return{degree:Math.pow(f,1-u)*Math.pow(p,u)}}};Is.dc=Is.degreeCentrality,Is.dcn=Is.degreeCentralityNormalised=Is.degreeCentralityNormalized;var hh=Ne({harmonic:!0,weight:function(){return 1},directed:!1,root:null}),Os={closenessCentralityNormalized:function(t){for(var r=hh(t),a=r.harmonic,i=r.weight,n=r.directed,s=this.cy(),o={},u=0,h=this.nodes(),f=this.floydWarshall({weight:i,directed:n}),p=0;p<h.length;p++){for(var x=0,k=h[p],_=0;_<h.length;_++)if(p!==_){var U=f.distance(k,h[_]);x+=a?1/U:U}a||(x=1/x),u<x&&(u=x),o[k.id()]=x}return{closeness:function(K){return 0==u?0:(K=Xe(K)?s.filter(K)[0].id():K.id(),o[K]/u)}}},closenessCentrality:function(t){var r=hh(t),a=r.root,i=r.weight,n=r.directed,s=r.harmonic;a=this.filter(a)[0];for(var o=this.dijkstra({root:a,weight:i,directed:n}),u=0,h=this.nodes(),f=0;f<h.length;f++){var p=h[f];if(!p.same(a)){var x=o.distanceTo(p);u+=s?1/x:x}}return s?u:1/u}};Os.cc=Os.closenessCentrality,Os.ccn=Os.closenessCentralityNormalised=Os.closenessCentralityNormalized;var W0=Ne({weight:null,directed:!1}),xl={betweennessCentrality:function(t){for(var r=W0(t),a=r.directed,i=r.weight,n=null!=i,s=this.cy(),o=this.nodes(),u={},h={},f=0,p={set:function(q,vt){h[q]=vt,vt>f&&(f=vt)},get:function(q){return h[q]}},x=0;x<o.length;x++){var k=o[x],_=k.id();u[_]=a?k.outgoers().nodes():k.openNeighborhood().nodes(),p.set(_,0)}for(var U=function(){for(var q=o[O].id(),vt=[],ae={},se={},Yt={},he=new Rr(function(Ea,pa){return Yt[Ea]-Yt[pa]}),me=0;me<o.length;me++){var Te=o[me].id();ae[Te]=[],se[Te]=0,Yt[Te]=1/0}for(se[q]=1,Yt[q]=0,he.push(q);!he.empty();){var Le=he.pop();if(vt.push(Le),n)for(var Ie=0;Ie<u[Le].length;Ie++){var cr,Oe=u[Le][Ie],tr=s.getElementById(Le);cr=tr.edgesTo(Oe).length>0?tr.edgesTo(Oe)[0]:Oe.edgesTo(tr)[0];var dr=i(cr);Oe=Oe.id(),Yt[Oe]>Yt[Le]+dr&&(Yt[Oe]=Yt[Le]+dr,he.nodes.indexOf(Oe)<0?he.push(Oe):he.updateItem(Oe),se[Oe]=0,ae[Oe]=[]),Yt[Oe]==Yt[Le]+dr&&(se[Oe]=se[Oe]+se[Le],ae[Oe].push(Le))}else for(var rr=0;rr<u[Le].length;rr++){var Cr=u[Le][rr].id();Yt[Cr]==1/0&&(he.push(Cr),Yt[Cr]=Yt[Le]+1),Yt[Cr]==Yt[Le]+1&&(se[Cr]=se[Cr]+se[Le],ae[Cr].push(Le))}}for(var Vr={},qr=0;qr<o.length;qr++)Vr[o[qr].id()]=0;for(;vt.length>0;){for(var Ar=vt.pop(),Fr=0;Fr<ae[Ar].length;Fr++){var ga=ae[Ar][Fr];Vr[ga]=Vr[ga]+se[ga]/se[Ar]*(1+Vr[Ar])}Ar!=o[O].id()&&p.set(Ar,p.get(Ar)+Vr[Ar])}},O=0;O<o.length;O++)U();var K={betweenness:function(q){var vt=s.collection(q).id();return p.get(vt)},betweennessNormalized:function(q){if(0==f)return 0;var vt=s.collection(q).id();return p.get(vt)/f}};return K.betweennessNormalised=K.betweennessNormalized,K}};xl.bc=xl.betweennessCentrality;var z0=Ne({expandFactor:2,inflateFactor:2,multFactor:1,maxIterations:20,attributes:[function(e){return 1}]}),U0=function(t,r){for(var a=0,i=0;i<r.length;i++)a+=r[i](t);return a},uh=function(t,r){for(var a,i=0;i<r;i++){a=0;for(var n=0;n<r;n++)a+=t[n*r+i];for(var s=0;s<r;s++)t[s*r+i]=t[s*r+i]/a}},Y0=function(t,r,a){for(var i=new Array(a*a),n=0;n<a;n++){for(var s=0;s<a;s++)i[n*a+s]=0;for(var o=0;o<a;o++)for(var u=0;u<a;u++)i[n*a+u]+=t[n*a+o]*r[o*a+u]}return i},H0=function(t,r,a){for(var i=t.slice(0),n=1;n<a;n++)t=Y0(t,i,r);return t},G0=function(t,r,a){for(var i=new Array(r*r),n=0;n<r*r;n++)i[n]=Math.pow(t[n],a);return uh(i,r),i},q0=function(t,r,a,i){for(var n=0;n<a;n++)if(Math.round(t[n]*Math.pow(10,i))/Math.pow(10,i)!==Math.round(r[n]*Math.pow(10,i))/Math.pow(10,i))return!1;return!0},X0=function(t,r){for(var a=0;a<t.length;a++)if(!r[a]||t[a].id()!==r[a].id())return!1;return!0},dh=function(t){for(var r=this.nodes(),a=this.edges(),i=this.cy(),n=function(t){return z0(t)}(t),s={},o=0;o<r.length;o++)s[r[o].id()]=o;for(var p,u=r.length,h=u*u,f=new Array(h),x=0;x<h;x++)f[x]=0;for(var k=0;k<a.length;k++){var _=a[k],U=s[_.source().id()],O=s[_.target().id()],K=U0(_,n.attributes);f[U*u+O]+=K,f[O*u+U]+=K}(function(t,r,a){for(var i=0;i<r;i++)t[i*r+i]=a})(f,u,n.multFactor),uh(f,u);for(var $=!0,q=0;$&&q<n.maxIterations;)$=!1,p=H0(f,u,n.expandFactor),f=G0(p,u,n.inflateFactor),q0(f,p,h,4)||($=!0),q++;var vt=function(t,r,a,i){for(var n=[],s=0;s<r;s++){for(var o=[],u=0;u<r;u++)Math.round(1e3*t[s*r+u])/1e3>0&&o.push(a[u]);0!==o.length&&n.push(i.collection(o))}return n}(f,u,r,i);return vt=function(t){for(var r=0;r<t.length;r++)for(var a=0;a<t.length;a++)r!=a&&X0(t[r],t[a])&&t.splice(a,1);return t}(vt),vt},Q0={markovClustering:dh,mcl:dh},J0=function(t){return t},fh=function(t,r){return Math.abs(r-t)},gh=function(t,r,a){return t+fh(r,a)},ph=function(t,r,a){return t+Math.pow(a-r,2)},tf=function(t){return Math.sqrt(t)},ef=function(t,r,a){return Math.max(t,fh(r,a))},ao=function(t,r,a,i,n){for(var s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:J0,o=i,f=0;f<t;f++)o=n(o,r(f),a(f));return s(o)},Ns={euclidean:function(t,r,a){return t>=2?ao(t,r,a,0,ph,tf):ao(t,r,a,0,gh)},squaredEuclidean:function(t,r,a){return ao(t,r,a,0,ph)},manhattan:function(t,r,a){return ao(t,r,a,0,gh)},max:function(t,r,a){return ao(t,r,a,-1/0,ef)}};function Lo(e,t,r,a,i,n){var s;return s=z(e)?e:Ns[e]||Ns.euclidean,0===t&&z(e)?s(i,n):s(t,r,a,i,n)}Ns["squared-euclidean"]=Ns.squaredEuclidean,Ns.squaredeuclidean=Ns.squaredEuclidean;var rf=Ne({k:2,m:2,sensitivityThreshold:1e-4,distance:"euclidean",maxIterations:10,attributes:[],testMode:!1,testCentroids:null}),bl=function(t){return rf(t)},Bo=function(t,r,a,i,n){var o="kMedoids"!==n?function(p){return a[p]}:function(p){return i[p](a)};return Lo(t,i.length,o,function(x){return i[x](r)},a,r)},_l=function(t,r,a){for(var i=a.length,n=new Array(i),s=new Array(i),o=new Array(r),u=null,h=0;h<i;h++)n[h]=t.min(a[h]).value,s[h]=t.max(a[h]).value;for(var f=0;f<r;f++){u=[];for(var p=0;p<i;p++)u[p]=Math.random()*(s[p]-n[p])+n[p];o[f]=u}return o},vh=function(t,r,a,i,n){for(var s=1/0,o=0,u=0;u<r.length;u++){var h=Bo(a,t,r[u],i,n);h<s&&(s=h,o=u)}return o},yh=function(t,r,a){for(var i=[],n=null,s=0;s<r.length;s++)a[(n=r[s]).id()]===t&&i.push(n);return i},af=function(t,r,a){return Math.abs(r-t)<=a},nf=function(t,r,a){for(var i=0;i<t.length;i++)for(var n=0;n<t[i].length;n++)if(Math.abs(t[i][n]-r[i][n])>a)return!1;return!0},sf=function(t,r,a){for(var i=0;i<a;i++)if(t===r[i])return!0;return!1},mh=function(t,r){var a=new Array(r);if(t.length<50)for(var i=0;i<r;i++){for(var n=t[Math.floor(Math.random()*t.length)];sf(n,a,i);)n=t[Math.floor(Math.random()*t.length)];a[i]=n}else for(var s=0;s<r;s++)a[s]=t[Math.floor(Math.random()*t.length)];return a},xh=function(t,r,a){for(var i=0,n=0;n<r.length;n++)i+=Bo("manhattan",r[n],t,a,"kMedoids");return i},cf=function(t,r,a,i,n){for(var s,o,u=0;u<r.length;u++)for(var h=0;h<t.length;h++)i[u][h]=Math.pow(a[u][h],n.m);for(var f=0;f<t.length;f++)for(var p=0;p<n.attributes.length;p++){s=0,o=0;for(var x=0;x<r.length;x++)s+=i[x][f]*n.attributes[p](r[x]),o+=i[x][f];t[f][p]=s/o}},hf=function(t,r,a,i,n){for(var s=0;s<t.length;s++)r[s]=t[s].slice();for(var o,u,h,f=2/(n.m-1),p=0;p<a.length;p++)for(var x=0;x<i.length;x++){o=0;for(var k=0;k<a.length;k++)u=Bo(n.distance,i[x],a[p],n.attributes,"cmeans"),h=Bo(n.distance,i[x],a[k],n.attributes,"cmeans"),o+=Math.pow(u/h,f);t[x][p]=1/o}},bh=function(t){var n,s,o,u,h,r=this.cy(),a=this.nodes(),i=bl(t);u=new Array(a.length);for(var f=0;f<a.length;f++)u[f]=new Array(i.k);o=new Array(a.length);for(var p=0;p<a.length;p++)o[p]=new Array(i.k);for(var x=0;x<a.length;x++){for(var k=0,_=0;_<i.k;_++)o[x][_]=Math.random(),k+=o[x][_];for(var U=0;U<i.k;U++)o[x][U]=o[x][U]/k}s=new Array(i.k);for(var O=0;O<i.k;O++)s[O]=new Array(i.attributes.length);h=new Array(a.length);for(var K=0;K<a.length;K++)h[K]=new Array(i.k);for(var $=!0,q=0;$&&q<i.maxIterations;)$=!1,cf(s,a,o,h,i),hf(o,u,s,a,i),nf(o,u,i.sensitivityThreshold)||($=!0),q++;return n=function(t,r,a,i){for(var n=new Array(a.k),s=0;s<n.length;s++)n[s]=[];for(var o,u,h=0;h<r.length;h++){o=-1/0,u=-1;for(var f=0;f<r[0].length;f++)r[h][f]>o&&(o=r[h][f],u=f);n[u].push(t[h])}for(var p=0;p<n.length;p++)n[p]=i.collection(n[p]);return n}(a,o,i,r),{clusters:n,degreeOfMembership:o}},df={kMeans:function(t){var u,r=this.cy(),a=this.nodes(),i=null,n=bl(t),s=new Array(n.k),o={};u=n.testMode?"number"==typeof n.testCentroids?_l(a,n.k,n.attributes):"object"===vr(n.testCentroids)?n.testCentroids:_l(a,n.k,n.attributes):_l(a,n.k,n.attributes);for(var h=!0,f=0;h&&f<n.maxIterations;){for(var p=0;p<a.length;p++)o[(i=a[p]).id()]=vh(i,u,n.distance,n.attributes,"kMeans");h=!1;for(var x=0;x<n.k;x++){var k=yh(x,a,o);if(0!==k.length){for(var _=n.attributes.length,U=u[x],O=new Array(_),K=new Array(_),$=0;$<_;$++){K[$]=0;for(var q=0;q<k.length;q++)K[$]+=n.attributes[$](i=k[q]);O[$]=K[$]/k.length,af(O[$],U[$],n.sensitivityThreshold)||(h=!0)}u[x]=O,s[x]=r.collection(k)}}f++}return s},kMedoids:function(t){var o,h,r=this.cy(),a=this.nodes(),i=null,n=bl(t),s=new Array(n.k),u={},f=new Array(n.k);n.testMode?"number"==typeof n.testCentroids||(o="object"===vr(n.testCentroids)?n.testCentroids:mh(a,n.k)):o=mh(a,n.k);for(var p=!0,x=0;p&&x<n.maxIterations;){for(var k=0;k<a.length;k++)u[(i=a[k]).id()]=vh(i,o,n.distance,n.attributes,"kMedoids");p=!1;for(var _=0;_<o.length;_++){var U=yh(_,a,u);if(0!==U.length){f[_]=xh(o[_],U,n.attributes);for(var O=0;O<U.length;O++)(h=xh(U[O],U,n.attributes))<f[_]&&(f[_]=h,o[_]=U[O],p=!0);s[_]=r.collection(U)}}x++}return s},fuzzyCMeans:bh,fcm:bh},ff=Ne({distance:"euclidean",linkage:"min",mode:"threshold",threshold:1/0,addDendrogram:!1,dendrogramDepth:0,attributes:[]}),gf={single:"min",complete:"max"},_h=function(t,r,a,i,n){for(var u,s=0,o=1/0,h=n.attributes,f=function(me,Te){return Lo(n.distance,h.length,function(Le){return h[Le](me)},function(Le){return h[Le](Te)},me,Te)},p=0;p<t.length;p++){var x=t[p].key,k=a[x][i[x]];k<o&&(s=x,o=k)}if("threshold"===n.mode&&o>=n.threshold||"dendrogram"===n.mode&&1===t.length)return!1;var O,_=r[s],U=r[i[s]];O="dendrogram"===n.mode?{left:_,right:U,key:_.key}:{value:_.value.concat(U.value),key:_.key},t[_.index]=O,t.splice(U.index,1),r[_.key]=O;for(var K=0;K<t.length;K++){var $=t[K];_.key===$.key?u=1/0:"min"===n.linkage?(u=a[_.key][$.key],a[_.key][$.key]>a[U.key][$.key]&&(u=a[U.key][$.key])):"max"===n.linkage?(u=a[_.key][$.key],a[_.key][$.key]<a[U.key][$.key]&&(u=a[U.key][$.key])):u="mean"===n.linkage?(a[_.key][$.key]*_.size+a[U.key][$.key]*U.size)/(_.size+U.size):"dendrogram"===n.mode?f($.value,_.value):f($.value[0],_.value[0]),a[_.key][$.key]=a[$.key][_.key]=u}for(var q=0;q<t.length;q++){var vt=t[q].key;if(i[vt]===_.key||i[vt]===U.key){for(var ae=vt,se=0;se<t.length;se++){var Yt=t[se].key;a[vt][Yt]<a[vt][ae]&&(ae=Yt)}i[vt]=ae}t[q].index=q}return _.key=U.key=_.index=U.index=null,!0},Fs=function(t,r,a){t&&(t.value?r.push(t.value):(t.left&&Fs(t.left,r),t.right&&Fs(t.right,r)))},El=function(t,r){if(!t)return"";if(t.left&&t.right){var a=El(t.left,r),i=El(t.right,r),n=r.add({group:"nodes",data:{id:a+","+i}});return r.add({group:"edges",data:{source:a,target:n.id()}}),r.add({group:"edges",data:{source:i,target:n.id()}}),n.id()}return t.value?t.value.id():void 0},Cl=function(t,r,a){if(!t)return[];var i=[],n=[],s=[];return 0===r?(t.left&&Fs(t.left,i),t.right&&Fs(t.right,n),s=i.concat(n),[a.collection(s)]):1===r?t.value?[a.collection(t.value)]:(t.left&&Fs(t.left,i),t.right&&Fs(t.right,n),[a.collection(i),a.collection(n)]):t.value?[a.collection(t.value)]:(t.left&&(i=Cl(t.left,r-1,a)),t.right&&(n=Cl(t.right,r-1,a)),i.concat(n))},Eh=function(t){for(var r=this.cy(),a=this.nodes(),i=function(t){var r=ff(t),a=gf[r.linkage];return null!=a&&(r.linkage=a),r}(t),n=i.attributes,s=function(q,vt){return Lo(i.distance,n.length,function(ae){return n[ae](q)},function(ae){return n[ae](vt)},q,vt)},o=[],u=[],h=[],f=[],p=0;p<a.length;p++){var x={value:"dendrogram"===i.mode?a[p]:[a[p]],key:p,index:p};o[p]=x,f[p]=x,u[p]=[],h[p]=0}for(var k=0;k<o.length;k++)for(var _=0;_<=k;_++){var U;U="dendrogram"===i.mode?k===_?1/0:s(o[k].value,o[_].value):k===_?1/0:s(o[k].value[0],o[_].value[0]),u[k][_]=U,u[_][k]=U,U<u[k][h[k]]&&(h[k]=_)}for(var O=_h(o,f,u,h,i);O;)O=_h(o,f,u,h,i);var K;return"dendrogram"===i.mode?(K=Cl(o[0],i.dendrogramDepth,r),i.addDendrogram&&El(o[0],r)):(K=new Array(o.length),o.forEach(function($,q){$.key=$.index=null,K[q]=r.collection($.value)})),K},vf={hierarchicalClustering:Eh,hca:Eh},yf=Ne({distance:"euclidean",preference:"median",damping:.8,maxIterations:1e3,minIterations:100,attributes:[]}),xf=function(t,r,a,i){var n=function(o,u){return i[u](o)};return-Lo(t,i.length,function(s){return n(r,s)},function(s){return n(a,s)},r,a)},Ch=function(t,r,a){for(var i=[],n=0;n<t;n++){for(var s=-1,o=-1/0,u=0;u<a.length;u++){var h=a[u];r[n*t+h]>o&&(s=h,o=r[n*t+h])}s>0&&i.push(s)}for(var f=0;f<a.length;f++)i[a[f]]=a[f];return i},kh=function(t){for(var r=this.cy(),a=this.nodes(),i=function(t){var r=t.damping,a=t.preference;.5<=r&&r<1||Ka("Damping must range on [0.5, 1).  Got: ".concat(r));var i=["median","mean","min","max"];return i.some(function(n){return n===a})||X(a)||Ka("Preference must be one of [".concat(i.map(function(n){return"'".concat(n,"'")}).join(", "),"] or a number.  Got: ").concat(a)),yf(t)}(t),n={},s=0;s<a.length;s++)n[a[s].id()]=s;var o,u,h,f,p,x,me;u=(o=a.length)*o,h=new Array(u);for(var k=0;k<u;k++)h[k]=-1/0;for(var _=0;_<o;_++)for(var U=0;U<o;U++)_!==U&&(h[_*o+U]=xf(i.distance,a[_],a[U],i.attributes));f=function(t,r){var a;return a="median"===r?function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.length,n=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],s=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];arguments.length>3&&void 0!==arguments[3]&&!arguments[3]?(a<t.length&&t.splice(a,t.length-a),r>0&&t.splice(0,r)):t=t.slice(r,a);for(var o=0,u=t.length-1;u>=0;u--)s?isFinite(t[u])||(t[u]=-1/0,o++):t.splice(u,1);n&&t.sort(function(x,k){return x-k});var f=t.length,p=Math.floor(f/2);return f%2!=0?t[p+1+o]:(t[p-1+o]+t[p+o])/2}(t):"mean"===r?function(t){for(var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.length,i=0,n=0,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;s<a;s++){var o=t[s];isFinite(o)&&(i+=o,n++)}return i/n}(t):"min"===r?function(t){for(var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.length,i=1/0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;n<a;n++){var s=t[n];isFinite(s)&&(i=Math.min(s,i))}return i}(t):"max"===r?function(t){for(var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.length,i=-1/0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;n<a;n++){var s=t[n];isFinite(s)&&(i=Math.max(s,i))}return i}(t):r,a}(h,i.preference);for(var O=0;O<o;O++)h[O*o+O]=f;p=new Array(u);for(var K=0;K<u;K++)p[K]=0;x=new Array(u);for(var $=0;$<u;$++)x[$]=0;for(var q=new Array(o),vt=new Array(o),ae=new Array(o),se=0;se<o;se++)q[se]=0,vt[se]=0,ae[se]=0;for(var Yt=new Array(o*i.minIterations),he=0;he<Yt.length;he++)Yt[he]=0;for(me=0;me<i.maxIterations;me++){for(var Te=0;Te<o;Te++){for(var Le=-1/0,Ie=-1/0,Oe=-1,tr=0,cr=0;cr<o;cr++)q[cr]=p[Te*o+cr],(tr=x[Te*o+cr]+h[Te*o+cr])>=Le?(Ie=Le,Le=tr,Oe=cr):tr>Ie&&(Ie=tr);for(var dr=0;dr<o;dr++)p[Te*o+dr]=(1-i.damping)*(h[Te*o+dr]-Le)+i.damping*q[dr];p[Te*o+Oe]=(1-i.damping)*(h[Te*o+Oe]-Ie)+i.damping*q[Oe]}for(var rr=0;rr<o;rr++){for(var Cr=0,Vr=0;Vr<o;Vr++)q[Vr]=x[Vr*o+rr],vt[Vr]=Math.max(0,p[Vr*o+rr]),Cr+=vt[Vr];Cr-=vt[rr],vt[rr]=p[rr*o+rr],Cr+=vt[rr];for(var qr=0;qr<o;qr++)x[qr*o+rr]=(1-i.damping)*Math.min(0,Cr-vt[qr])+i.damping*q[qr];x[rr*o+rr]=(1-i.damping)*(Cr-vt[rr])+i.damping*q[rr]}for(var Ar=0,Fr=0;Fr<o;Fr++){var ga=x[Fr*o+Fr]+p[Fr*o+Fr]>0?1:0;Yt[me%i.minIterations*o+Fr]=ga,Ar+=ga}if(Ar>0&&(me>=i.minIterations-1||me==i.maxIterations-1)){for(var Ea=0,pa=0;pa<o;pa++){ae[pa]=0;for(var Aa=0;Aa<i.minIterations;Aa++)ae[pa]+=Yt[Aa*o+pa];(0===ae[pa]||ae[pa]===i.minIterations)&&Ea++}if(Ea===o)break}}for(var Ra=function(t,r,a){for(var i=[],n=0;n<t;n++)r[n*t+n]+a[n*t+n]>0&&i.push(n);return i}(o,p,x),Za=function(t,r,a){for(var i=Ch(t,r,a),n=0;n<a.length;n++){for(var s=[],o=0;o<i.length;o++)i[o]===a[n]&&s.push(o);for(var u=-1,h=-1/0,f=0;f<s.length;f++){for(var p=0,x=0;x<s.length;x++)p+=r[s[x]*t+s[f]];p>h&&(u=f,h=p)}a[n]=s[u]}return Ch(t,r,a)}(o,h,Ra),Ta={},Nr=0;Nr<Ra.length;Nr++)Ta[Ra[Nr]]=[];for(var Ur=0;Ur<a.length;Ur++){var ma=Za[n[a[Ur].id()]];null!=ma&&Ta[ma].push(a[Ur])}for(var Ga=new Array(Ra.length),li=0;li<Ra.length;li++)Ga[li]=r.collection(Ta[Ra[li]]);return Ga},Cf={affinityPropagation:kh,ap:kh},kf=Ne({root:void 0,directed:!1}),Tf={hierholzer:function(t){if(!Bt(t)){var r=arguments;t={root:r[0],directed:r[1]}}var u,h,f,a=kf(t),i=a.root,n=a.directed,s=this,o=!1;i&&(f=Xe(i)?this.filter(i)[0].id():i[0].id());var p={},x={};s.forEach(n?function($){var q=$.id();if($.isNode()){var vt=$.indegree(!0),ae=$.outdegree(!0),se=vt-ae,Yt=ae-vt;1==se?u?o=!0:u=q:1==Yt?h?o=!0:h=q:(Yt>1||se>1)&&(o=!0),p[q]=[],$.outgoers().forEach(function(he){he.isEdge()&&p[q].push(he.id())})}else x[q]=[void 0,$.target().id()]}:function($){var q=$.id();$.isNode()?($.degree(!0)%2&&(u?h?o=!0:h=q:u=q),p[q]=[],$.connectedEdges().forEach(function(ae){return p[q].push(ae.id())})):x[q]=[$.source().id(),$.target().id()]});var k={found:!1,trail:void 0};if(o)return k;if(h&&u)if(n){if(f&&h!=f)return k;f=h}else{if(f&&h!=f&&u!=f)return k;f||(f=h)}else f||(f=s[0].id());var _=function(q){for(var se,Yt,he,vt=q,ae=[q];p[vt].length;)se=p[vt].shift(),Yt=x[se][0],vt!=(he=x[se][1])?(p[he]=p[he].filter(function(me){return me!=se}),vt=he):!n&&vt!=Yt&&(p[Yt]=p[Yt].filter(function(me){return me!=se}),vt=Yt),ae.unshift(se),ae.unshift(vt);return ae},U=[],O=[];for(O=_(f);1!=O.length;)0==p[O[0]].length?(U.unshift(s.getElementById(O.shift())),U.unshift(s.getElementById(O.shift()))):O=_(O.shift()).concat(O);for(var K in U.unshift(s.getElementById(O.shift())),p)if(p[K].length)return k;return k.found=!0,k.trail=this.spawn(U,!0),k}},Ro=function(){var t=this,r={},a=0,i=0,n=[],s=[],o={},h=function(x,k,_){x===_&&(i+=1),r[k]={id:a,low:a++,cutVertex:!1};var O,K,$,q,U=t.getElementById(k).connectedEdges().intersection(t);0===U.size()?n.push(t.spawn(t.getElementById(k))):U.forEach(function(vt){O=vt.source().id(),K=vt.target().id(),($=O===k?K:O)!==_&&(q=vt.id(),o[q]||(o[q]=!0,s.push({x:k,y:$,edge:vt})),$ in r?r[k].low=Math.min(r[k].low,r[$].id):(h(x,$,k),r[k].low=Math.min(r[k].low,r[$].low),r[k].id<=r[$].low&&(r[k].cutVertex=!0,function(x,k){for(var _=s.length-1,U=[],O=t.spawn();s[_].x!=x||s[_].y!=k;)U.push(s.pop().edge),_--;U.push(s.pop().edge),U.forEach(function(K){var $=K.connectedNodes().intersection(t);O.merge(K),$.forEach(function(q){var vt=q.id(),ae=q.connectedEdges().intersection(t);O.merge(q),O.merge(r[vt].cutVertex?ae.filter(function(se){return se.isLoop()}):ae)})}),n.push(O)}(k,$))))})};t.forEach(function(p){if(p.isNode()){var x=p.id();x in r||(i=0,h(x,x),r[x].cutVertex=i>1)}});var f=Object.keys(r).filter(function(p){return r[p].cutVertex}).map(function(p){return t.getElementById(p)});return{cut:t.spawn(f),components:n}},Po=function(){var t=this,r={},a=0,i=[],n=[],s=t.spawn(t),o=function(h){if(n.push(h),r[h]={index:a,low:a++,explored:!1},t.getElementById(h).connectedEdges().intersection(t).forEach(function(U){var O=U.target().id();O!==h&&(O in r||o(O),r[O].explored||(r[h].low=Math.min(r[h].low,r[O].low)))}),r[h].index===r[h].low){for(var p=t.spawn();;){var x=n.pop();if(p.merge(t.getElementById(x)),r[x].low=r[h].index,r[x].explored=!0,x===h)break}var k=p.edgesWith(p),_=p.merge(k);i.push(_),s=s.difference(_)}};return t.forEach(function(u){if(u.isNode()){var h=u.id();h in r||o(h)}}),{cut:s,components:i}},Th={};[La,Ya,ni,Pi,ki,Wi,zi,K0,Is,Os,xl,Q0,df,vf,Cf,Tf,{hopcroftTarjanBiconnected:Ro,htbc:Ro,htb:Ro,hopcroftTarjanBiconnectedComponents:Ro},{tarjanStronglyConnected:Po,tsc:Po,tscc:Po,tarjanStronglyConnectedComponents:Po}].forEach(function(e){H(Th,e)});
/*!
      Embeddable Minimum Strictly-Compliant Promises/A+ 1.1.1 Thenable
      Copyright (c) 2013-2014 Ralf S. Engelschall (http://engelschall.com)
      Licensed under The MIT License (http://opensource.org/licenses/MIT)
      */
var Xn=function(t){if(!(this instanceof Xn))return new Xn(t);this.id="Thenable/1.0.7",this.state=0,this.fulfillValue=void 0,this.rejectReason=void 0,this.onFulfilled=[],this.onRejected=[],this.proxy={then:this.then.bind(this)},"function"==typeof t&&t.call(this,this.fulfill.bind(this),this.reject.bind(this))};Xn.prototype={fulfill:function(t){return Dh(this,1,"fulfillValue",t)},reject:function(t){return Dh(this,2,"rejectReason",t)},then:function(t,r){var a=this,i=new Xn;return a.onFulfilled.push(Rh(t,i,"fulfill")),a.onRejected.push(Rh(r,i,"reject")),Lh(a),i.proxy}};var Dh=function(t,r,a,i){return 0===t.state&&(t.state=r,t[a]=i,Lh(t)),t},Lh=function(t){1===t.state?Bh(t,"onFulfilled",t.fulfillValue):2===t.state&&Bh(t,"onRejected",t.rejectReason)},Bh=function(t,r,a){if(0!==t[r].length){var i=t[r];t[r]=[];var n=function(){for(var o=0;o<i.length;o++)i[o](a)};"function"==typeof setImmediate?setImmediate(n):setTimeout(n,0)}},Rh=function(t,r,a){return function(i){if("function"!=typeof t)r[a].call(r,i);else{var n;try{n=t(i)}catch(s){return void r.reject(s)}Ph(r,n)}}},Ph=function(t,r){if(t!==r&&t.proxy!==r){var a;if("object"===vr(r)&&null!==r||"function"==typeof r)try{a=r.then}catch(n){return void t.reject(n)}if("function"!=typeof a)t.fulfill(r);else{var i=!1;try{a.call(r,function(n){i||(i=!0,n===r?t.reject(new TypeError("circular thenable chain")):Ph(t,n))},function(n){i||(i=!0,t.reject(n))})}catch(n){i||t.reject(n)}}}else t.reject(new TypeError("cannot resolve promise with itself"))};Xn.all=function(e){return new Xn(function(t,r){for(var a=new Array(e.length),i=0,n=function(u,h){a[u]=h,++i===e.length&&t(a)},s=0;s<e.length;s++)(function(o){var u=e[o];null!=u&&null!=u.then?u.then(function(p){n(o,p)},function(p){r(p)}):n(o,u)})(s)})},Xn.resolve=function(e){return new Xn(function(t,r){t(e)})},Xn.reject=function(e){return new Xn(function(t,r){r(e)})};var Ks=typeof Promise<"u"?Promise:Xn,kl=function(t,r,a){var i=V(t),n=!i,s=this._private=H({duration:1e3},r,a);if(s.target=t,s.style=s.style||s.css,s.started=!1,s.playing=!1,s.hooked=!1,s.applying=!1,s.progress=0,s.completes=[],s.frames=[],s.complete&&z(s.complete)&&s.completes.push(s.complete),n){var o=t.position();s.startPosition=s.startPosition||{x:o.x,y:o.y},s.startStyle=s.startStyle||t.cy().style().getAnimationStartStyle(t,s.style)}if(i){var u=t.pan();s.startPan={x:u.x,y:u.y},s.startZoom=t.zoom()}this.length=1,this[0]=this},ks=kl.prototype;H(ks,{instanceString:function(){return"animation"},hook:function(){var t=this._private;if(!t.hooked){var a=t.target._private.animation;(t.queue?a.queue:a.current).push(this),ee(t.target)&&t.target.cy().addToAnimationPool(t.target),t.hooked=!0}return this},play:function(){var t=this._private;return 1===t.progress&&(t.progress=0),t.playing=!0,t.started=!1,t.stopped=!1,this.hook(),this},playing:function(){return this._private.playing},apply:function(){var t=this._private;return t.applying=!0,t.started=!1,t.stopped=!1,this.hook(),this},applying:function(){return this._private.applying},pause:function(){var t=this._private;return t.playing=!1,t.started=!1,this},stop:function(){var t=this._private;return t.playing=!1,t.started=!1,t.stopped=!0,this},rewind:function(){return this.progress(0)},fastforward:function(){return this.progress(1)},time:function(t){var r=this._private;return void 0===t?r.progress*r.duration:this.progress(t/r.duration)},progress:function(t){var r=this._private,a=r.playing;return void 0===t?r.progress:(a&&this.pause(),r.progress=t,r.started=!1,a&&this.play(),this)},completed:function(){return 1===this._private.progress},reverse:function(){var t=this._private,r=t.playing;r&&this.pause(),t.progress=1-t.progress,t.started=!1;var a=function(h,f){var p=t[h];null!=p&&(t[h]=t[f],t[f]=p)};if(a("zoom","startZoom"),a("pan","startPan"),a("position","startPosition"),t.style)for(var i=0;i<t.style.length;i++){var n=t.style[i],s=n.name,o=t.startStyle[s];t.startStyle[s]=n,t.style[i]=o}return r&&this.play(),this},promise:function(t){var a,r=this._private;return a="frame"===t?r.frames:r.completes,new Ks(function(i,n){a.push(function(){i()})})}}),ks.complete=ks.completed,ks.run=ks.play,ks.running=ks.playing;var Tl,Mh,Sl,Ih,wl,Oh,Al,Nh,Dl,Fh,Ll,Kh,Bl,Wh,Rl,zh,Pl,Vh,Il,Uh,Ol,$h,Nl,Yh,Fl,Hh,Kl,Gh,Wl,qh,zl,jh,Vl,Xh,Ul,Zh,$l,Jh,Yl,tu,Hl,eu,Gl,ru,ql,au,jl,iu,Xl,nu,Zl,su,Ql,ou,Jl,lu,tc,cu,ec,hu,rc,uu,ac,du,ic,fu,nc,gu,sc,pu,oc,vu,lc,mu,cc,bu,hc,_u,uc,Cu,dc,Tu,gc,Su,pc,wu,Af={animated:function(){return function(){var r=this,i=void 0!==r.length?r:[r];if(!(this._private.cy||this).styleEnabled())return!1;var s=i[0];return s?s._private.animation.current.length>0:void 0}},clearQueue:function(){return function(){var r=this,i=void 0!==r.length?r:[r];if(!(this._private.cy||this).styleEnabled())return this;for(var s=0;s<i.length;s++)i[s]._private.animation.queue=[];return this}},delay:function(){return function(r,a){return(this._private.cy||this).styleEnabled()?this.animate({delay:r,duration:r,complete:a}):this}},delayAnimation:function(){return function(r,a){return(this._private.cy||this).styleEnabled()?this.animation({delay:r,duration:r,complete:a}):this}},animation:function(){return function(r,a){var i=this,n=void 0!==i.length,s=n?i:[i],o=this._private.cy||this,u=!n,h=!u;if(!o.styleEnabled())return this;var f=o.style();if(r=H({},r,a),0===Object.keys(r).length)return new kl(s[0],r);switch(void 0===r.duration&&(r.duration=400),r.duration){case"slow":r.duration=600;break;case"fast":r.duration=200}if(h&&(r.style=f.getPropsList(r.style||r.css),r.css=void 0),h&&null!=r.renderedPosition){var x=r.renderedPosition,k=o.pan(),_=o.zoom();r.position=Vn(x,_,k)}if(u&&null!=r.panBy){var U=r.panBy,O=o.pan();r.pan={x:O.x+U.x,y:O.y+U.y}}var K=r.center||r.centre;if(u&&null!=K){var $=o.getCenterPan(K.eles,r.zoom);null!=$&&(r.pan=$)}if(u&&null!=r.fit){var q=r.fit,vt=o.getFitViewport(q.eles||q.boundingBox,q.padding);null!=vt&&(r.pan=vt.pan,r.zoom=vt.zoom)}if(u&&Bt(r.zoom)){var ae=o.getZoomedViewport(r.zoom);null!=ae?(ae.zoomed&&(r.zoom=ae.zoom),ae.panned&&(r.pan=ae.pan)):r.zoom=null}return new kl(s[0],r)}},animate:function(){return function(r,a){var i=this,s=void 0!==i.length?i:[i];if(!(this._private.cy||this).styleEnabled())return this;a&&(r=H({},r,a));for(var u=0;u<s.length;u++){var h=s[u],f=h.animated()&&(void 0===r.queue||r.queue);h.animation(r,f?{queue:!0}:void 0).play()}return this}},stop:function(){return function(r,a){var i=this,s=void 0!==i.length?i:[i],o=this._private.cy||this;if(!o.styleEnabled())return this;for(var u=0;u<s.length;u++){for(var f=s[u]._private,p=f.animation.current,x=0;x<p.length;x++)a&&(p[x]._private.duration=0);r&&(f.animation.queue=[]),a||(f.animation.current=[])}return o.notify("draw"),this}}};function Mo(){return Mh?Tl:(Mh=1,Tl=Array.isArray)}function Mf(){if(Wh)return Bl;Wh=1;var e=function Lf(){if(Oh)return wl;Oh=1;var e=zt(),t=sr();return wl=function s(o){if(!t(o))return!1;var u=e(o);return"[object Function]"==u||"[object GeneratorFunction]"==u||"[object AsyncFunction]"==u||"[object Proxy]"==u}}(),t=function Rf(){if(Fh)return Dl;Fh=1;var a,e=function Bf(){if(Nh)return Al;Nh=1;var e=Qe();return Al=e["__core-js_shared__"]}(),t=(a=/[^.]+$/.exec(e&&e.keys&&e.keys.IE_PROTO||""))?"Symbol(src)_1."+a:"";return Dl=function r(a){return!!t&&t in a},Dl}(),r=sr(),a=function Pf(){if(Kh)return Ll;Kh=1;var t=Function.prototype.toString;return Ll=function r(a){if(null!=a){try{return t.call(a)}catch{}try{return a+""}catch{}}return""}}(),n=/^\[object .+?Constructor\]$/,f=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");return Bl=function p(x){return!(!r(x)||t(x))&&(e(x)?f:n).test(a(x))}}function Ml(){if(Vh)return Pl;Vh=1;var e=Mf(),t=function If(){return zh?Rl:(zh=1,Rl=function e(t,r){return t?.[r]})}();return Pl=function r(a,i){var n=t(a,i);return e(n)?n:void 0}}function Io(){if(Uh)return Il;Uh=1;var t=Ml()(Object,"create");return Il=t}function Qh(){return Zh?Ul:(Zh=1,Ul=function e(t,r){return t===r||t!=t&&r!=r})}function Oo(){if(Jh)return $l;Jh=1;var e=Qh();return $l=function t(r,a){for(var i=r.length;i--;)if(e(r[i][0],a))return i;return-1}}function jf(){if(su)return Zl;su=1;var e=function zf(){if(jh)return zl;jh=1;var e=function Of(){if($h)return Ol;$h=1;var e=Io();return Ol=function t(){this.__data__=e?e(null):{},this.size=0}}(),t=function Nf(){return Yh?Nl:(Yh=1,Nl=function e(t){var r=this.has(t)&&delete this.__data__[t];return this.size-=r?1:0,r})}(),r=function Ff(){if(Hh)return Fl;Hh=1;var e=Io(),a=Object.prototype.hasOwnProperty;return Fl=function i(n){var s=this.__data__;if(e){var o=s[n];return"__lodash_hash_undefined__"===o?void 0:o}return a.call(s,n)?s[n]:void 0}}(),a=function Kf(){if(Gh)return Kl;Gh=1;var e=Io(),r=Object.prototype.hasOwnProperty;return Kl=function a(i){var n=this.__data__;return e?void 0!==n[i]:r.call(n,i)}}(),i=function Wf(){if(qh)return Wl;qh=1;var e=Io();return Wl=function r(a,i){var n=this.__data__;return this.size+=this.has(a)?0:1,n[a]=e&&void 0===i?"__lodash_hash_undefined__":i,this}}();function n(s){var o=-1,u=null==s?0:s.length;for(this.clear();++o<u;){var h=s[o];this.set(h[0],h[1])}}return n.prototype.clear=e,n.prototype.delete=t,n.prototype.get=r,n.prototype.has=a,n.prototype.set=i,zl=n}(),t=function Gf(){if(iu)return jl;iu=1;var e=function Vf(){return Xh?Vl:(Xh=1,Vl=function e(){this.__data__=[],this.size=0})}(),t=function Uf(){if(tu)return Yl;tu=1;var e=Oo(),r=Array.prototype.splice;return Yl=function a(i){var n=this.__data__,s=e(n,i);return!(s<0||(s==n.length-1?n.pop():r.call(n,s,1),--this.size,0))}}(),r=function $f(){if(eu)return Hl;eu=1;var e=Oo();return Hl=function t(r){var a=this.__data__,i=e(a,r);return i<0?void 0:a[i][1]}}(),a=function Yf(){if(ru)return Gl;ru=1;var e=Oo();return Gl=function t(r){return e(this.__data__,r)>-1}}(),i=function Hf(){if(au)return ql;au=1;var e=Oo();return ql=function t(r,a){var i=this.__data__,n=e(i,r);return n<0?(++this.size,i.push([r,a])):i[n][1]=a,this}}();function n(s){var o=-1,u=null==s?0:s.length;for(this.clear();++o<u;){var h=s[o];this.set(h[0],h[1])}}return n.prototype.clear=e,n.prototype.delete=t,n.prototype.get=r,n.prototype.has=a,n.prototype.set=i,jl=n}(),r=function qf(){if(nu)return Xl;nu=1;var r=Ml()(Qe(),"Map");return Xl=r}();return Zl=function a(){this.size=0,this.__data__={hash:new e,map:new(r||t),string:new e}}}function No(){if(lu)return Jl;lu=1;var e=function Xf(){return ou?Ql:(ou=1,Ql=function e(t){var r=typeof t;return"string"==r||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==t:null===t})}();return Jl=function t(r,a){var i=r.__data__;return e(a)?i["string"==typeof a?"string":"hash"]:i.map}}function ag(){if(pu)return sc;pu=1;var e=function rg(){if(gu)return nc;gu=1;var e=function eg(){if(fu)return ic;fu=1;var e=jf(),t=function Zf(){if(cu)return tc;cu=1;var e=No();return tc=function t(r){var a=e(this,r).delete(r);return this.size-=a?1:0,a}}(),r=function Qf(){if(hu)return ec;hu=1;var e=No();return ec=function t(r){return e(this,r).get(r)}}(),a=function Jf(){if(uu)return rc;uu=1;var e=No();return rc=function t(r){return e(this,r).has(r)}}(),i=function tg(){if(du)return ac;du=1;var e=No();return ac=function t(r,a){var i=e(this,r),n=i.size;return i.set(r,a),this.size+=i.size==n?0:1,this}}();function n(s){var o=-1,u=null==s?0:s.length;for(this.clear();++o<u;){var h=s[o];this.set(h[0],h[1])}}return n.prototype.clear=e,n.prototype.delete=t,n.prototype.get=r,n.prototype.has=a,n.prototype.set=i,ic=n}();function r(a,i){if("function"!=typeof a||null!=i&&"function"!=typeof i)throw new TypeError("Expected a function");var n=function(){var s=arguments,o=i?i.apply(this,s):s[0],u=n.cache;if(u.has(o))return u.get(o);var h=a.apply(this,s);return n.cache=u.set(o,h)||u,h};return n.cache=new(r.Cache||e),n}return r.Cache=e,nc=r}();return sc=function r(a){var i=e(a,function(s){return 500===n.size&&n.clear(),s}),n=i.cache;return i}}function yu(){if(vu)return oc;vu=1;var e=ag(),t=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,r=/\\(\\)?/g,a=e(function(i){var n=[];return 46===i.charCodeAt(0)&&n.push(""),i.replace(t,function(s,o,u,h){n.push(u?h.replace(r,"$1"):o||s)}),n});return oc=a}function xu(){return mu?lc:(mu=1,lc=function e(t,r){for(var a=-1,i=null==t?0:t.length,n=Array(i);++a<i;)n[a]=r(t[a],a,t);return n})}function Eu(){if(_u)return hc;_u=1;var e=function ig(){if(bu)return cc;bu=1;var e=M(),t=xu(),r=Mo(),a=Ke(),i=e?e.prototype:void 0,n=i?i.toString:void 0;return cc=function s(o){if("string"==typeof o)return o;if(r(o))return t(o,s)+"";if(a(o))return n?n.call(o):"";var u=o+"";return"0"==u&&1/o==-1/0?"-0":u}}();return hc=function t(r){return null==r?"":e(r)}}function ku(){if(Cu)return uc;Cu=1;var e=Mo(),t=function Df(){if(Ih)return Sl;Ih=1;var e=Mo(),t=Ke(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;return Sl=function i(n,s){if(e(n))return!1;var o=typeof n;return!("number"!=o&&"symbol"!=o&&"boolean"!=o&&null!=n&&!t(n))||a.test(n)||!r.test(n)||null!=s&&n in Object(s)}}(),r=yu(),a=Eu();return uc=function i(n,s){return e(n)?n:t(n,s)?[n]:r(a(n))}}function fc(){if(Tu)return dc;Tu=1;var e=Ke();return dc=function t(r){if("string"==typeof r||e(r))return r;var a=r+"";return"0"==a&&1/r==-1/0?"-0":a}}var vc,Au,yc,Du,mc,Lu,xc,Bu,bc,Ru,_c,Pu,og=function sg(){if(wu)return pc;wu=1;var e=function ng(){if(Su)return gc;Su=1;var e=ku(),t=fc();return gc=function r(a,i){for(var n=0,s=(i=e(i,a)).length;null!=a&&n<s;)a=a[t(i[n++])];return n&&n==s?a:void 0}}();return pc=function t(r,a,i){var n=null==r?void 0:e(r,a);return void 0===n?i:n}}(),lg=mr(og);function fg(){if(Ru)return bc;Ru=1;var e=function ug(){if(Lu)return mc;Lu=1;var e=function hg(){if(Du)return yc;Du=1;var e=function cg(){if(Au)return vc;Au=1;var e=Ml(),t=function(){try{var r=e(Object,"defineProperty");return r({},"",{}),r}catch{}}();return vc=t}();return yc=function t(r,a,i){"__proto__"==a&&e?e(r,a,{configurable:!0,enumerable:!0,value:i,writable:!0}):r[a]=i}}(),t=Qh(),a=Object.prototype.hasOwnProperty;return mc=function i(n,s,o){var u=n[s];(!a.call(n,s)||!t(u,o)||void 0===o&&!(s in n))&&e(n,s,o)}}(),t=ku(),r=function dg(){if(Bu)return xc;Bu=1;var t=/^(?:0|[1-9]\d*)$/;return xc=function r(a,i){var n=typeof a;return!!(i=i??9007199254740991)&&("number"==n||"symbol"!=n&&t.test(a))&&a>-1&&a%1==0&&a<i}}(),a=sr(),i=fc();return bc=function n(s,o,u,h){if(!a(s))return s;for(var f=-1,p=(o=t(o,s)).length,x=p-1,k=s;null!=k&&++f<p;){var _=i(o[f]),U=u;if("__proto__"===_||"constructor"===_||"prototype"===_)return s;if(f!=x){var O=k[_];void 0===(U=h?h(O,_,k):void 0)&&(U=a(O)?O:r(o[f+1])?[]:{})}e(k,_,U),k=k[_]}return s}}var Ec,Mu,Cc,Iu,vg=mr(function gg(){if(Pu)return _c;Pu=1;var e=fg();return _c=function t(r,a,i){return null==r?r:e(r,a,i)}}()),xg=function mg(){if(Iu)return Cc;Iu=1;var e=xu(),t=function yg(){return Mu?Ec:(Mu=1,Ec=function e(t,r){var a=-1,i=t.length;for(r||(r=Array(i));++a<i;)r[a]=t[a];return r})}(),r=Mo(),a=Ke(),i=yu(),n=fc(),s=Eu();return Cc=function o(u){return r(u)?e(u,n):a(u)?[u]:t(i(s(u)))}}(),bg=mr(xg),_g={data:function(t){return t=H({},{field:"data",bindingEvent:"data",allowBinding:!1,allowSetting:!1,allowGetting:!1,settingEvent:"data",settingTriggersEvent:!1,triggerFnName:"trigger",immutableKeys:{},updateStyle:!1,beforeGet:function(i){},beforeSet:function(i,n){},onSet:function(i){},canSet:function(i){return!0}},t),function(i,n){var s=t,o=this,u=void 0!==o.length,h=u?o:[o],f=u?o[0]:o;if(Xe(i)){var k,x=-1!==i.indexOf(".")&&bg(i);if(s.allowGetting&&void 0===n)return f&&(s.beforeGet(f),k=x&&void 0===f._private[s.field][i]?lg(f._private[s.field],x):f._private[s.field][i]),k;if(s.allowSetting&&void 0!==n&&!s.immutableKeys[i]){var U=w({},i,n);s.beforeSet(o,U);for(var O=0,K=h.length;O<K;O++){var $=h[O];s.canSet($)&&(x&&void 0===f._private[s.field][i]?vg($._private[s.field],x,n):$._private[s.field][i]=n)}s.updateStyle&&o.updateStyle(),s.onSet(o),s.settingTriggersEvent&&o[s.triggerFnName](s.settingEvent)}}else if(s.allowSetting&&Bt(i)){var vt,ae,q=i,se=Object.keys(q);s.beforeSet(o,q);for(var Yt=0;Yt<se.length;Yt++)if(ae=q[vt=se[Yt]],!s.immutableKeys[vt])for(var me=0;me<h.length;me++){var Te=h[me];s.canSet(Te)&&(Te._private[s.field][vt]=ae)}s.updateStyle&&o.updateStyle(),s.onSet(o),s.settingTriggersEvent&&o[s.triggerFnName](s.settingEvent)}else if(s.allowBinding&&z(i))o.on(s.bindingEvent,i);else if(s.allowGetting&&void 0===i){var Ie;return f&&(s.beforeGet(f),Ie=f._private[s.field]),Ie}return o}},removeData:function(t){return t=H({},{field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!1,immutableKeys:{}},t),function(i){var n=t,s=this,u=void 0!==s.length?s:[s];if(Xe(i)){for(var h=i.split(/\s+/),f=h.length,p=0;p<f;p++){var x=h[p];if(!Nt(x)&&!n.immutableKeys[x])for(var _=0,U=u.length;_<U;_++)u[_]._private[n.field][x]=void 0}n.triggerEvent&&s[n.triggerFnName](n.event)}else if(void 0===i){for(var O=0,K=u.length;O<K;O++)for(var $=u[O]._private[n.field],q=Object.keys($),vt=0;vt<q.length;vt++){var ae=q[vt];!n.immutableKeys[ae]&&($[ae]=void 0)}n.triggerEvent&&s[n.triggerFnName](n.event)}return s}}},Eg={eventAliasesOn:function(t){var r=t;r.addListener=r.listen=r.bind=r.on,r.unlisten=r.unbind=r.off=r.removeListener,r.trigger=r.emit,r.pon=r.promiseOn=function(a,i){var n=this,s=Array.prototype.slice.call(arguments,0);return new Ks(function(o,u){var f=s.concat([function(k){n.off.apply(n,p),o(k)}]),p=f.concat([]);n.on.apply(n,f)})}}},$i={};[Af,_g,Eg].forEach(function(e){H($i,e)});var Cg={animate:$i.animate(),animation:$i.animation(),animated:$i.animated(),clearQueue:$i.clearQueue(),delay:$i.delay(),delayAnimation:$i.delayAnimation(),stop:$i.stop()},Fo={classes:function(t){var r=this;if(void 0===t){var a=[];return r[0]._private.classes.forEach(function(_){return a.push(_)}),a}dt(t)||(t=(t||"").match(/\S+/g)||[]);for(var i=[],n=new Xr(t),s=0;s<r.length;s++){for(var o=r[s],u=o._private,h=u.classes,f=!1,p=0;p<t.length;p++)if(!h.has(t[p])){f=!0;break}f||(f=h.size!==t.length),f&&(u.classes=n,i.push(o))}return i.length>0&&this.spawn(i).updateStyle().emit("class"),r},addClass:function(t){return this.toggleClass(t,!0)},hasClass:function(t){var r=this[0];return null!=r&&r._private.classes.has(t)},toggleClass:function(t,r){dt(t)||(t=t.match(/\S+/g)||[]);for(var a=this,i=void 0===r,n=[],s=0,o=a.length;s<o;s++)for(var u=a[s],h=u._private.classes,f=!1,p=0;p<t.length;p++){var x=t[p],k=h.has(x),_=!1;r||i&&!k?(h.add(x),_=!0):(!r||i&&k)&&(h.delete(x),_=!0),!f&&_&&(n.push(u),f=!0)}return n.length>0&&this.spawn(n).updateStyle().emit("class"),a},removeClass:function(t){return this.toggleClass(t,!1)},flashClass:function(t,r){var a=this;if(null==r)r=250;else if(0===r)return a;return a.addClass(t),setTimeout(function(){a.removeClass(t)},r),a}};Fo.className=Fo.classNames=Fo.classes;var Ni={metaChar:"[\\!\\\"\\#\\$\\%\\&\\'\\(\\)\\*\\+\\,\\.\\/\\:\\;\\<\\=\\>\\?\\@\\[\\]\\^\\`\\{\\|\\}\\~]",comparatorOp:"=|\\!=|>|>=|<|<=|\\$=|\\^=|\\*=",boolOp:"\\?|\\!|\\^",string:"\"(?:\\\\\"|[^\"])*\"|'(?:\\\\'|[^'])*'",number:B,meta:"degree|indegree|outdegree",separator:"\\s*,\\s*",descendant:"\\s+",child:"\\s+>\\s+",subject:"\\$",group:"node|edge|\\*",directedEdge:"\\s+->\\s+",undirectedEdge:"\\s+<->\\s+"};Ni.variable="(?:[\\w-.]|(?:\\\\"+Ni.metaChar+"))+",Ni.className="(?:[\\w-]|(?:\\\\"+Ni.metaChar+"))+",Ni.value=Ni.string+"|"+Ni.number,Ni.id=Ni.variable,function(){var e,t,r;for(e=Ni.comparatorOp.split("|"),r=0;r<e.length;r++)Ni.comparatorOp+="|@"+(t=e[r]);for(e=Ni.comparatorOp.split("|"),r=0;r<e.length;r++)!((t=e[r]).indexOf("!")>=0)&&"="!==t&&(Ni.comparatorOp+="|\\!"+t)}();var kc=[{selector:":selected",matches:function(t){return t.selected()}},{selector:":unselected",matches:function(t){return!t.selected()}},{selector:":selectable",matches:function(t){return t.selectable()}},{selector:":unselectable",matches:function(t){return!t.selectable()}},{selector:":locked",matches:function(t){return t.locked()}},{selector:":unlocked",matches:function(t){return!t.locked()}},{selector:":visible",matches:function(t){return t.visible()}},{selector:":hidden",matches:function(t){return!t.visible()}},{selector:":transparent",matches:function(t){return t.transparent()}},{selector:":grabbed",matches:function(t){return t.grabbed()}},{selector:":free",matches:function(t){return!t.grabbed()}},{selector:":removed",matches:function(t){return t.removed()}},{selector:":inside",matches:function(t){return!t.removed()}},{selector:":grabbable",matches:function(t){return t.grabbable()}},{selector:":ungrabbable",matches:function(t){return!t.grabbable()}},{selector:":animated",matches:function(t){return t.animated()}},{selector:":unanimated",matches:function(t){return!t.animated()}},{selector:":parent",matches:function(t){return t.isParent()}},{selector:":childless",matches:function(t){return t.isChildless()}},{selector:":child",matches:function(t){return t.isChild()}},{selector:":orphan",matches:function(t){return t.isOrphan()}},{selector:":nonorphan",matches:function(t){return t.isChild()}},{selector:":compound",matches:function(t){return t.isNode()?t.isParent():t.source().isParent()||t.target().isParent()}},{selector:":loop",matches:function(t){return t.isLoop()}},{selector:":simple",matches:function(t){return t.isSimple()}},{selector:":active",matches:function(t){return t.active()}},{selector:":inactive",matches:function(t){return!t.active()}},{selector:":backgrounding",matches:function(t){return t.backgrounding()}},{selector:":nonbackgrounding",matches:function(t){return!t.backgrounding()}}].sort(function(e,t){return function(t,r){return-1*ht(t,r)}(e.selector,t.selector)}),kg=function(){for(var t,e={},r=0;r<kc.length;r++)e[(t=kc[r]).selector]=t.matches;return e}(),Sg="("+kc.map(function(e){return e.selector}).join("|")+")",Ws=function(t){return t.replace(new RegExp("\\\\("+Ni.metaChar+")","g"),function(r,a){return a})},fs=function(t,r,a){t[t.length-1]=a},Tc=[{name:"group",query:!0,regex:"("+Ni.group+")",populate:function(t,r,a){var n=Gt(a,1)[0];r.checks.push({type:0,value:"*"===n?n:n+"s"})}},{name:"state",query:!0,regex:Sg,populate:function(t,r,a){var i=Gt(a,1);r.checks.push({type:7,value:i[0]})}},{name:"id",query:!0,regex:"\\#("+Ni.id+")",populate:function(t,r,a){var i=Gt(a,1);r.checks.push({type:8,value:Ws(i[0])})}},{name:"className",query:!0,regex:"\\.("+Ni.className+")",populate:function(t,r,a){var i=Gt(a,1);r.checks.push({type:9,value:Ws(i[0])})}},{name:"dataExists",query:!0,regex:"\\[\\s*("+Ni.variable+")\\s*\\]",populate:function(t,r,a){var i=Gt(a,1);r.checks.push({type:4,field:Ws(i[0])})}},{name:"dataCompare",query:!0,regex:"\\[\\s*("+Ni.variable+")\\s*("+Ni.comparatorOp+")\\s*("+Ni.value+")\\s*\\]",populate:function(t,r,a){var i=Gt(a,3),n=i[0],s=i[1],o=i[2];o=null!=new RegExp("^"+Ni.string+"$").exec(o)?o.substring(1,o.length-1):parseFloat(o),r.checks.push({type:3,field:Ws(n),operator:s,value:o})}},{name:"dataBool",query:!0,regex:"\\[\\s*("+Ni.boolOp+")\\s*("+Ni.variable+")\\s*\\]",populate:function(t,r,a){var i=Gt(a,2),n=i[0];r.checks.push({type:5,field:Ws(i[1]),operator:n})}},{name:"metaCompare",query:!0,regex:"\\[\\[\\s*("+Ni.meta+")\\s*("+Ni.comparatorOp+")\\s*("+Ni.number+")\\s*\\]\\]",populate:function(t,r,a){var i=Gt(a,3),s=i[1],o=i[2];r.checks.push({type:6,field:Ws(i[0]),operator:s,value:parseFloat(o)})}},{name:"nextQuery",separator:!0,regex:Ni.separator,populate:function(t,r){var a=t.currentSubject,i=t.edgeCount,n=t.compoundCount,s=t[t.length-1];return null!=a&&(s.subject=a,t.currentSubject=null),s.edgeCount=i,s.compoundCount=n,t.edgeCount=0,t.compoundCount=0,t[t.length++]={checks:[]}}},{name:"directedEdge",separator:!0,regex:Ni.directedEdge,populate:function(t,r){if(null==t.currentSubject){var a={checks:[]},n={checks:[]};return a.checks.push({type:11,source:r,target:n}),fs(t,0,a),t.edgeCount++,n}var s={checks:[]},u={checks:[]};return s.checks.push({type:12,source:r,target:u}),fs(t,0,s),t.edgeCount++,u}},{name:"undirectedEdge",separator:!0,regex:Ni.undirectedEdge,populate:function(t,r){if(null==t.currentSubject){var a={checks:[]},n={checks:[]};return a.checks.push({type:10,nodes:[r,n]}),fs(t,0,a),t.edgeCount++,n}var s={checks:[]},u={checks:[]};return s.checks.push({type:14,node:r,neighbor:u}),fs(t,0,s),u}},{name:"child",separator:!0,regex:Ni.child,populate:function(t,r){if(null==t.currentSubject){var a={checks:[]},i={checks:[]};return a.checks.push({type:15,parent:t[t.length-1],child:i}),fs(t,0,a),t.compoundCount++,i}if(t.currentSubject===r){var s={checks:[]},u={checks:[]},h={checks:[]},f={checks:[]},p={checks:[]};return s.checks.push({type:19,left:t[t.length-1],right:u,subject:h}),h.checks=r.checks,r.checks=[{type:20}],p.checks.push({type:20}),u.checks.push({type:17,parent:p,child:f}),fs(t,0,s),t.currentSubject=h,t.compoundCount++,f}var x={checks:[]},k={checks:[]},_=[{type:17,parent:x,child:k}];return x.checks=r.checks,r.checks=_,t.compoundCount++,k}},{name:"descendant",separator:!0,regex:Ni.descendant,populate:function(t,r){if(null==t.currentSubject){var a={checks:[]},i={checks:[]};return a.checks.push({type:16,ancestor:t[t.length-1],descendant:i}),fs(t,0,a),t.compoundCount++,i}if(t.currentSubject===r){var s={checks:[]},u={checks:[]},h={checks:[]},f={checks:[]},p={checks:[]};return s.checks.push({type:19,left:t[t.length-1],right:u,subject:h}),h.checks=r.checks,r.checks=[{type:20}],p.checks.push({type:20}),u.checks.push({type:18,ancestor:p,descendant:f}),fs(t,0,s),t.currentSubject=h,t.compoundCount++,f}var x={checks:[]},k={checks:[]},_=[{type:18,ancestor:x,descendant:k}];return x.checks=r.checks,r.checks=_,t.compoundCount++,k}},{name:"subject",modifier:!0,regex:Ni.subject,populate:function(t,r){if(null!=t.currentSubject&&t.currentSubject!==r)return _a("Redefinition of subject in selector `"+t.toString()+"`"),!1;t.currentSubject=r;var i=t[t.length-1].checks[0],n=null==i?null:i.type;11===n?i.type=13:10===n&&(i.type=14,i.node=i.nodes[1],i.neighbor=i.nodes[0],i.nodes=null)}}];Tc.forEach(function(e){return e.regexObj=new RegExp("^"+e.regex)});var wg=function(t){for(var r,a,i,n=0;n<Tc.length;n++){var s=Tc[n],o=s.name,u=t.match(s.regexObj);if(null!=u){a=u,r=s,i=o,t=t.substring(u[0].length);break}}return{expr:r,match:a,name:i,remaining:t}},Bg={parse:function(t){var r=this,a=r.inputText=t,i=r[0]={checks:[]};for(r.length=1,a=function(t){var r=t.match(/^\s+/);return r&&(t=t.substring(r[0].length)),t}(a);;){var n=wg(a);if(null==n.expr)return _a("The selector `"+t+"`is invalid"),!1;var s=n.match.slice(1),o=n.expr.populate(r,i,s);if(!1===o)return!1;if(null!=o&&(i=o),(a=n.remaining).match(/^\s*$/))break}var u=r[r.length-1];null!=r.currentSubject&&(u.subject=r.currentSubject),u.edgeCount=r.edgeCount,u.compoundCount=r.compoundCount;for(var h=0;h<r.length;h++){var f=r[h];if(f.compoundCount>0&&f.edgeCount>0)return _a("The selector `"+t+"` is invalid because it uses both a compound selector and an edge selector"),!1;if(f.edgeCount>1)return _a("The selector `"+t+"` is invalid because it uses multiple edge selectors"),!1;1===f.edgeCount&&_a("The selector `"+t+"` is deprecated.  Edge selectors do not take effect on changes to source and target nodes after an edge is added, for performance reasons.  Use a class or data selector on edges instead, updating the class or data of an edge when your app detects a change in source or target nodes.")}return!0},toString:function(){if(null!=this.toStringCache)return this.toStringCache;for(var t=function(f){return f??""},r=function(f){return Xe(f)?'"'+f+'"':t(f)},a=function(f){return" "+f+" "},n=function(f,p){return f.checks.reduce(function(x,k,_){return x+(p===f&&0===_?"$":"")+function(f,p){var k=f.value;switch(f.type){case 0:var _=t(k);return _.substring(0,_.length-1);case 3:return"["+f.field+a(t(f.operator))+r(k)+"]";case 5:var $=f.field;return"["+t(f.operator)+$+"]";case 4:return"["+f.field+"]";case 6:return"[["+f.field+a(t(f.operator))+r(k)+"]]";case 7:return k;case 8:return"#"+k;case 9:return"."+k;case 17:case 15:return n(f.parent,p)+a(">")+n(f.child,p);case 18:case 16:return n(f.ancestor,p)+" "+n(f.descendant,p);case 19:var se=n(f.left,p),Yt=n(f.subject,p),he=n(f.right,p);return se+(se.length>0?" ":"")+Yt+he;case 20:return""}}(k,p)},"")},s="",o=0;o<this.length;o++){var u=this[o];s+=n(u,u.subject),this.length>1&&o<this.length-1&&(s+=", ")}return this.toStringCache=s,s}},Ou=function(t,r,a){var i,u,h,n=Xe(t),s=X(t),o=Xe(a),f=!1,p=!1,x=!1;switch(r.indexOf("!")>=0&&(r=r.replace("!",""),p=!0),r.indexOf("@")>=0&&(r=r.replace("@",""),f=!0),(n||o||f)&&(u=n||s?""+t:"",h=""+a),f&&(t=u=u.toLowerCase(),a=h=h.toLowerCase()),r){case"*=":i=u.indexOf(h)>=0;break;case"$=":i=u.indexOf(h,u.length-h.length)>=0;break;case"^=":i=0===u.indexOf(h);break;case"=":i=t===a;break;case">":x=!0,i=t>a;break;case">=":x=!0,i=t>=a;break;case"<":x=!0,i=t<a;break;case"<=":x=!0,i=t<=a;break;default:i=!1}return p&&(null!=t||!x)&&(i=!i),i},Sc=function(t,r){return t.data(r)},sn=[],en=function(t,r){return t.checks.every(function(a){return sn[a.type](a,r)})};sn[0]=function(e,t){var r=e.value;return"*"===r||r===t.group()},sn[7]=function(e,t){return function(t,r){return kg[t](r)}(e.value,t)},sn[8]=function(e,t){var r=e.value;return t.id()===r},sn[9]=function(e,t){return t.hasClass(e.value)},sn[6]=function(e,t){var a=e.operator,i=e.value;return Ou(function(t,r){return t[r]()}(t,e.field),a,i)},sn[3]=function(e,t){var a=e.operator,i=e.value;return Ou(Sc(t,e.field),a,i)},sn[5]=function(e,t){var a=e.operator;return function(t,r){switch(r){case"?":return!!t;case"!":return!t;case"^":return void 0===t}}(Sc(t,e.field),a)},sn[4]=function(e,t){return function(t){return void 0!==t}(Sc(t,e.field))},sn[10]=function(e,t){var r=e.nodes[0],a=e.nodes[1],i=t.source(),n=t.target();return en(r,i)&&en(a,n)||en(a,i)&&en(r,n)},sn[14]=function(e,t){return en(e.node,t)&&t.neighborhood().some(function(r){return r.isNode()&&en(e.neighbor,r)})},sn[11]=function(e,t){return en(e.source,t.source())&&en(e.target,t.target())},sn[12]=function(e,t){return en(e.source,t)&&t.outgoers().some(function(r){return r.isNode()&&en(e.target,r)})},sn[13]=function(e,t){return en(e.target,t)&&t.incomers().some(function(r){return r.isNode()&&en(e.source,r)})},sn[15]=function(e,t){return en(e.child,t)&&en(e.parent,t.parent())},sn[17]=function(e,t){return en(e.parent,t)&&t.children().some(function(r){return en(e.child,r)})},sn[16]=function(e,t){return en(e.descendant,t)&&t.ancestors().some(function(r){return en(e.ancestor,r)})},sn[18]=function(e,t){return en(e.ancestor,t)&&t.descendants().some(function(r){return en(e.descendant,r)})},sn[19]=function(e,t){return en(e.subject,t)&&en(e.left,t)&&en(e.right,t)},sn[20]=function(){return!0},sn[1]=function(e,t){return e.value.has(t)},sn[2]=function(e,t){return(0,e.value)(t)};var Ng={matches:function(t){for(var a=0;a<this.length;a++)if(en(this[a],t))return!0;return!1},filter:function(t){var r=this;if(1===r.length&&1===r[0].checks.length&&8===r[0].checks[0].type)return t.getElementById(r[0].checks[0].value).collection();var a=function(n){for(var s=0;s<r.length;s++)if(en(r[s],n))return!0;return!1};return null==r.text()&&(a=function(){return!0}),t.filter(a)}},gs=function(t){this.inputText=t,this.currentSubject=null,this.compoundCount=0,this.edgeCount=0,this.length=0,null==t||Xe(t)&&t.match(/^\s*$/)||(ee(t)?this.addQuery({checks:[{type:1,value:t.collection()}]}):z(t)?this.addQuery({checks:[{type:2,value:t}]}):Xe(t)?this.parse(t)||(this.invalid=!0):Ka("A selector must be created from a string; found "))},ps=gs.prototype;[Bg,Ng].forEach(function(e){return H(ps,e)}),ps.text=function(){return this.inputText},ps.size=function(){return this.length},ps.eq=function(e){return this[e]},ps.sameText=function(e){return!this.invalid&&!e.invalid&&this.text()===e.text()},ps.addQuery=function(e){this[this.length++]=e},ps.selector=ps.toString;var vs={allAre:function(t){var r=new gs(t);return this.every(function(a){return r.matches(a)})},is:function(t){var r=new gs(t);return this.some(function(a){return r.matches(a)})},some:function(t,r){for(var a=0;a<this.length;a++)if(r?t.apply(r,[this[a],a,this]):t(this[a],a,this))return!0;return!1},every:function(t,r){for(var a=0;a<this.length;a++)if(!(r?t.apply(r,[this[a],a,this]):t(this[a],a,this)))return!1;return!0},same:function(t){if(this===t)return!0;t=this.cy().collection(t);var r=this.length;return r===t.length&&(1===r?this[0]===t[0]:this.every(function(i){return t.hasElementWithId(i.id())}))},anySame:function(t){return t=this.cy().collection(t),this.some(function(r){return t.hasElementWithId(r.id())})},allAreNeighbors:function(t){t=this.cy().collection(t);var r=this.neighborhood();return t.every(function(a){return r.hasElementWithId(a.id())})},contains:function(t){t=this.cy().collection(t);var r=this;return t.every(function(a){return r.hasElementWithId(a.id())})}};vs.allAreNeighbours=vs.allAreNeighbors,vs.has=vs.contains,vs.equal=vs.equals=vs.same;var io,Ku,Hn=function(t,r){return function(i,n,s,o){var f,u=i,h=this;if(null==u?f="":ee(u)&&1===u.length&&(f=u.id()),1===h.length&&f){var p=h[0]._private,x=p.traversalCache=p.traversalCache||{},k=x[r]=x[r]||[],_=da(f);return k[_]||(k[_]=t.call(h,i,n,s,o))}return t.call(h,i,n,s,o)}},zs={parent:function(t){var r=[];if(1===this.length){var a=this[0]._private.parent;if(a)return a}for(var i=0;i<this.length;i++){var s=this[i]._private.parent;s&&r.push(s)}return this.spawn(r,!0).filter(t)},parents:function(t){for(var r=[],a=this.parent();a.nonempty();){for(var i=0;i<a.length;i++)r.push(a[i]);a=a.parent()}return this.spawn(r,!0).filter(t)},commonAncestors:function(t){for(var r,a=0;a<this.length;a++){var n=this[a].parents();r=(r=r||n).intersect(n)}return r.filter(t)},orphans:function(t){return this.stdFilter(function(r){return r.isOrphan()}).filter(t)},nonorphans:function(t){return this.stdFilter(function(r){return r.isChild()}).filter(t)},children:Hn(function(e){for(var t=[],r=0;r<this.length;r++)for(var i=this[r]._private.children,n=0;n<i.length;n++)t.push(i[n]);return this.spawn(t,!0).filter(e)},"children"),siblings:function(t){return this.parent().children().not(this).filter(t)},isParent:function(){var t=this[0];if(t)return t.isNode()&&0!==t._private.children.length},isChildless:function(){var t=this[0];if(t)return t.isNode()&&0===t._private.children.length},isChild:function(){var t=this[0];if(t)return t.isNode()&&null!=t._private.parent},isOrphan:function(){var t=this[0];if(t)return t.isNode()&&null==t._private.parent},descendants:function(t){var r=[];return function a(i){for(var n=0;n<i.length;n++){var s=i[n];r.push(s),s.children().nonempty()&&a(s.children())}}(this.children()),this.spawn(r,!0).filter(t)}};function wc(e,t,r,a){for(var i=[],n=new Xr,o=e.cy().hasCompoundNodes(),u=0;u<e.length;u++){var h=e[u];r?i.push(h):o&&a(i,n,h)}for(;i.length>0;){var f=i.shift();t(f),n.add(f.id()),o&&a(i,n,f)}return e}function Nu(e,t,r){if(r.isParent())for(var a=r._private.children,i=0;i<a.length;i++){var n=a[i];t.has(n.id())||e.push(n)}}function Fu(e,t,r){if(r.isChild()){var a=r._private.parent;t.has(a.id())||e.push(a)}}function Fg(e,t,r){Fu(e,t,r),Nu(e,t,r)}zs.forEachDown=function(e){return wc(this,e,!(arguments.length>1&&void 0!==arguments[1])||arguments[1],Nu)},zs.forEachUp=function(e){return wc(this,e,!(arguments.length>1&&void 0!==arguments[1])||arguments[1],Fu)},zs.forEachUpAndDown=function(e){return wc(this,e,!(arguments.length>1&&void 0!==arguments[1])||arguments[1],Fg)},zs.ancestors=zs.parents,io=Ku={data:$i.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),removeData:$i.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),scratch:$i.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:$i.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),rscratch:$i.data({field:"rscratch",allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!0}),removeRscratch:$i.removeData({field:"rscratch",triggerEvent:!1}),id:function(){var t=this[0];if(t)return t._private.data.id}},io.attr=io.data,io.removeAttr=io.removeData;var Kg=Ku,Ko={};function Ac(e){return function(t){var r=this;if(void 0===t&&(t=!0),0===r.length);else if(r.isNode()&&!r.removed()){for(var a=0,i=r[0],n=i._private.edges,s=0;s<n.length;s++){var o=n[s];!t&&o.isLoop()||(a+=e(i,o))}return a}}}function Vs(e,t){return function(r){for(var a,i=this.nodes(),n=0;n<i.length;n++){var o=i[n][e](r);void 0!==o&&(void 0===a||t(o,a))&&(a=o)}return a}}H(Ko,{degree:Ac(function(e,t){return t.source().same(t.target())?2:1}),indegree:Ac(function(e,t){return t.target().same(e)?1:0}),outdegree:Ac(function(e,t){return t.source().same(e)?1:0})}),H(Ko,{minDegree:Vs("degree",function(e,t){return e<t}),maxDegree:Vs("degree",function(e,t){return e>t}),minIndegree:Vs("indegree",function(e,t){return e<t}),maxIndegree:Vs("indegree",function(e,t){return e>t}),minOutdegree:Vs("outdegree",function(e,t){return e<t}),maxOutdegree:Vs("outdegree",function(e,t){return e>t})}),H(Ko,{totalDegree:function(t){for(var r=0,a=this.nodes(),i=0;i<a.length;i++)r+=a[i].degree(t);return r}});var Zn,Wu,zu=function(t,r,a){for(var i=0;i<t.length;i++){var n=t[i];if(!n.locked()){var s=n._private.position,o={x:null!=r.x?r.x-s.x:0,y:null!=r.y?r.y-s.y:0};n.isParent()&&!(0===o.x&&0===o.y)&&n.children().shift(o,a),n.dirtyBoundingBoxCache()}}},Vu={field:"position",bindingEvent:"position",allowBinding:!0,allowSetting:!0,settingEvent:"position",settingTriggersEvent:!0,triggerFnName:"emitAndNotify",allowGetting:!0,validKeys:["x","y"],beforeGet:function(t){t.updateCompoundBounds()},beforeSet:function(t,r){zu(t,r,!1)},onSet:function(t){t.dirtyCompoundBoundsCache()},canSet:function(t){return!t.locked()}};Zn=Wu={position:$i.data(Vu),silentPosition:$i.data(H({},Vu,{allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!1,beforeSet:function(t,r){zu(t,r,!0)},onSet:function(t){t.dirtyCompoundBoundsCache()}})),positions:function(t,r){if(Bt(t))r?this.silentPosition(t):this.position(t);else if(z(t)){var a=t,i=this.cy();i.startBatch();for(var n=0;n<this.length;n++){var o,s=this[n];(o=a(s,n))&&(r?s.silentPosition(o):s.position(o))}i.endBatch()}return this},silentPositions:function(t){return this.positions(t,!0)},shift:function(t,r,a){var i;if(Bt(t)?(i={x:X(t.x)?t.x:0,y:X(t.y)?t.y:0},a=r):Xe(t)&&X(r)&&((i={x:0,y:0})[t]=r),null!=i){var n=this.cy();n.startBatch();for(var s=0;s<this.length;s++){var o=this[s];if(!(n.hasCompoundNodes()&&o.isChild()&&o.ancestors().anySame(this))){var u=o.position(),h={x:u.x+i.x,y:u.y+i.y};a?o.silentPosition(h):o.position(h)}}n.endBatch()}return this},silentShift:function(t,r){return Bt(t)?this.shift(t,!0):Xe(t)&&X(r)&&this.shift(t,r,!0),this},renderedPosition:function(t,r){var a=this[0],i=this.cy(),n=i.zoom(),s=i.pan(),o=Bt(t)?t:void 0,u=void 0!==o||void 0!==r&&Xe(t);if(a&&a.isNode()){if(!u){var p=a.position();return o=Bn(p,n,s),void 0===t?o:o[t]}for(var h=0;h<this.length;h++){var f=this[h];void 0!==r?f.position(t,(r-s[t])/n):void 0!==o&&f.position(Vn(o,n,s))}}else if(!u)return;return this},relativePosition:function(t,r){var a=this[0],i=this.cy(),n=Bt(t)?t:void 0,s=void 0!==n||void 0!==r&&Xe(t),o=i.hasCompoundNodes();if(a&&a.isNode()){if(!s){var _=a.position(),U=o?a.parent():null,O=U&&U.length>0;O&&(U=U[0]);var $=O?U.position():{x:0,y:0};return n={x:_.x-$.x,y:_.y-$.y},void 0===t?n:n[t]}for(var u=0;u<this.length;u++){var h=this[u],f=o?h.parent():null,p=f&&f.length>0;p&&(f=f[0]);var k=p?f.position():{x:0,y:0};void 0!==r?h.position(t,r+k[t]):void 0!==n&&h.position({x:n.x+k.x,y:n.y+k.y})}}else if(!s)return;return this}},Zn.modelPosition=Zn.point=Zn.position,Zn.modelPositions=Zn.points=Zn.positions,Zn.renderedPoint=Zn.renderedPosition,Zn.relativePoint=Zn.relativePosition;var Us,ys,Wg=Wu;Us=ys={},ys.renderedBoundingBox=function(e){var t=this.boundingBox(e),r=this.cy(),a=r.zoom(),i=r.pan(),n=t.x1*a+i.x,s=t.x2*a+i.x,o=t.y1*a+i.y,u=t.y2*a+i.y;return{x1:n,x2:s,y1:o,y2:u,w:s-n,h:u-o}},ys.dirtyCompoundBoundsCache=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.cy();return t.styleEnabled()&&t.hasCompoundNodes()?(this.forEachUp(function(r){if(r.isParent()){var a=r._private;a.compoundBoundsClean=!1,a.bbCache=null,e||r.emitAndNotify("bounds")}}),this):this},ys.updateCompoundBounds=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.cy();if(!t.styleEnabled()||!t.hasCompoundNodes())return this;if(!e&&t.batching())return this;function r(s){if(s.isParent()){var o=s._private,u=s.children(),h="include"===s.pstyle("compound-sizing-wrt-labels").value,f={width:{val:s.pstyle("min-width").pfValue,left:s.pstyle("min-width-bias-left"),right:s.pstyle("min-width-bias-right")},height:{val:s.pstyle("min-height").pfValue,top:s.pstyle("min-height-bias-top"),bottom:s.pstyle("min-height-bias-bottom")}},p=u.boundingBox({includeLabels:h,includeOverlays:!1,useCache:!1}),x=o.position;(0===p.w||0===p.h)&&((p={w:s.pstyle("width").pfValue,h:s.pstyle("height").pfValue}).x1=x.x-p.w/2,p.x2=x.x+p.w/2,p.y1=x.y-p.h/2,p.y2=x.y+p.h/2);var U=f.width.left.value;"px"===f.width.left.units&&f.width.val>0&&(U=100*U/f.width.val);var O=f.width.right.value;"px"===f.width.right.units&&f.width.val>0&&(O=100*O/f.width.val);var K=f.height.top.value;"px"===f.height.top.units&&f.height.val>0&&(K=100*K/f.height.val);var $=f.height.bottom.value;"px"===f.height.bottom.units&&f.height.val>0&&($=100*$/f.height.val);var q=k(f.width.val-p.w,U,O),vt=q.biasDiff,ae=q.biasComplementDiff,se=k(f.height.val-p.h,K,$),Yt=se.biasDiff,he=se.biasComplementDiff;o.autoPadding=function _(me,Te,Le,Ie){if("%"!==Le.units)return"px"===Le.units?Le.pfValue:0;switch(Ie){case"width":return me>0?Le.pfValue*me:0;case"height":return Te>0?Le.pfValue*Te:0;case"average":return me>0&&Te>0?Le.pfValue*(me+Te)/2:0;case"min":return me>0&&Te>0?me>Te?Le.pfValue*Te:Le.pfValue*me:0;case"max":return me>0&&Te>0?me>Te?Le.pfValue*me:Le.pfValue*Te:0;default:return 0}}(p.w,p.h,s.pstyle("padding"),s.pstyle("padding-relative-to").value),o.autoWidth=Math.max(p.w,f.width.val),x.x=(-vt+p.x1+p.x2+ae)/2,o.autoHeight=Math.max(p.h,f.height.val),x.y=(-Yt+p.y1+p.y2+he)/2}function k(me,Te,Le){var Ie=0,Oe=0,tr=Te+Le;return me>0&&tr>0&&(Ie=Te/tr*me,Oe=Le/tr*me),{biasDiff:Ie,biasComplementDiff:Oe}}}for(var a=0;a<this.length;a++){var i=this[a],n=i._private;(!n.compoundBoundsClean||e)&&(r(i),t.batching()||(n.compoundBoundsClean=!0))}return this};var Gn=function(t){return t===1/0||t===-1/0?0:t},Qn=function(t,r,a,i,n){i-r===0||n-a===0||null==r||null==a||null==i||null==n||(t.x1=r<t.x1?r:t.x1,t.x2=i>t.x2?i:t.x2,t.y1=a<t.y1?a:t.y1,t.y2=n>t.y2?n:t.y2,t.w=t.x2-t.x1,t.h=t.y2-t.y1)},ms=function(t,r){return null==r?t:Qn(t,r.x1,r.y1,r.x2,r.y2)},no=function(t,r,a){return Jt(t,r,a)},Wo=function(t,r,a){if(!r.cy().headless()){var u,h,i=r._private,n=i.rstyle,s=n.arrowWidth/2;if("none"!==r.pstyle(a+"-arrow-shape").value){"source"===a?(u=n.srcX,h=n.srcY):"target"===a?(u=n.tgtX,h=n.tgtY):(u=n.midX,h=n.midY);var f=i.arrowBounds=i.arrowBounds||{},p=f[a]=f[a]||{};p.x1=u-s,p.y1=h-s,p.x2=u+s,p.y2=h+s,p.w=p.x2-p.x1,p.h=p.y2-p.y1,J(p,1),Qn(t,p.x1,p.y1,p.x2,p.y2)}}},Dc=function(t,r,a){if(!r.cy().headless()){var i,n=r._private,s=n.rstyle;if(r.pstyle((i=a?a+"-":"")+"label").strValue){var Le,Ie,Oe,tr,u=r.pstyle("text-halign"),h=r.pstyle("text-valign"),f=no(s,"labelWidth",a),p=no(s,"labelHeight",a),x=no(s,"labelX",a),k=no(s,"labelY",a),_=r.pstyle(i+"text-margin-x").pfValue,U=r.pstyle(i+"text-margin-y").pfValue,O=r.isEdge(),K=r.pstyle(i+"text-rotation"),$=r.pstyle("text-outline-width").pfValue,vt=r.pstyle("text-border-width").pfValue/2,ae=r.pstyle("text-background-padding").pfValue,Yt=p,he=f,me=he/2,Te=Yt/2;if(O)Le=x-me,Ie=x+me,Oe=k-Te,tr=k+Te;else{switch(u.value){case"left":Le=x-he,Ie=x;break;case"center":Le=x-me,Ie=x+me;break;case"right":Le=x,Ie=x+he}switch(h.value){case"top":Oe=k-Yt,tr=k;break;case"center":Oe=k-Te,tr=k+Te;break;case"bottom":Oe=k,tr=k+Yt}}var cr=_-Math.max($,vt)-ae-2,dr=_+Math.max($,vt)+ae+2,rr=U-Math.max($,vt)-ae-2,Cr=U+Math.max($,vt)+ae+2;Le+=cr,Ie+=dr,Oe+=rr,tr+=Cr;var Vr=a||"main",qr=n.labelBounds,Ar=qr[Vr]=qr[Vr]||{};Ar.x1=Le,Ar.y1=Oe,Ar.x2=Ie,Ar.y2=tr,Ar.w=Ie-Le,Ar.h=tr-Oe,Ar.leftPad=cr,Ar.rightPad=dr,Ar.topPad=rr,Ar.botPad=Cr;var Fr=O&&"autorotate"===K.strValue;if(Fr||null!=K.pfValue&&0!==K.pfValue){var Ea=Fr?no(n.rstyle,"labelAngle",a):K.pfValue,pa=Math.cos(Ea),Aa=Math.sin(Ea),Ra=(Le+Ie)/2,Za=(Oe+tr)/2;if(!O){switch(u.value){case"left":Ra=Ie;break;case"right":Ra=Le}switch(h.value){case"top":Za=tr;break;case"bottom":Za=Oe}}var Ta=function(Ci,xi){return{x:(Ci-=Ra)*pa-(xi-=Za)*Aa+Ra,y:Ci*Aa+xi*pa+Za}},Nr=Ta(Le,Oe),Ur=Ta(Le,tr),Zr=Ta(Ie,Oe),ma=Ta(Ie,tr);Le=Math.min(Nr.x,Ur.x,Zr.x,ma.x),Ie=Math.max(Nr.x,Ur.x,Zr.x,ma.x),Oe=Math.min(Nr.y,Ur.y,Zr.y,ma.y),tr=Math.max(Nr.y,Ur.y,Zr.y,ma.y)}var Ga=Vr+"Rot",li=qr[Ga]=qr[Ga]||{};li.x1=Le,li.y1=Oe,li.x2=Ie,li.y2=tr,li.w=Ie-Le,li.h=tr-Oe,Qn(t,Le,Oe,Ie,tr),Qn(n.labelBounds.all,Le,Oe,Ie,tr)}return t}},Uu=function(t,r){if(!r.cy().headless()){var a=r.pstyle("outline-opacity").value,s=r.pstyle("outline-width").value+r.pstyle("outline-offset").value;$u(t,r,a,s,"outside",s/2)}},$u=function(t,r,a,i,n,s){if(!(0===a||i<=0||"inside"===n)){var o=r.cy(),u=r.pstyle("shape").value,h=o.renderer().nodeShapes[u],f=r.position(),p=f.x,x=f.y,k=r.width(),_=r.height();if(h.hasMiterBounds){"center"===n&&(i/=2);var U=h.miterBounds(p,x,k,_,i);ms(t,U)}else null!=s&&s>0&&Z(t,[s,s,s,s])}},Yu=function(t){var r=0,a=function(s){return(s?1:0)<<r++},i=0;return i+=a(t.incudeNodes),i+=a(t.includeEdges),i+=a(t.includeLabels),i+=a(t.includeMainLabels),i+=a(t.includeSourceLabels),i+=a(t.includeTargetLabels),(i+=a(t.includeOverlays))+a(t.includeOutlines)},Hu=function(t){var r=function(o){return Math.round(o)};if(t.isEdge()){var a=t.source().position(),i=t.target().position();return pr([r(a.x),r(a.y),r(i.x),r(i.y)])}var n=t.position();return pr([r(n.x),r(n.y)])},Gu=function(t,r){var i,a=t._private,n=t.isEdge(),o=(null==r?qu:Yu(r))===qu;if(null==a.bbCache?(i=function(t,r){var f,p,x,k,_,U,a=t._private.cy,i=a.styleEnabled(),n=a.headless(),s=kt(),o=t._private,u=t.isNode(),h=t.isEdge(),O=o.rstyle,K=u&&i?t.pstyle("bounds-expansion").pfValue:[0],$=function(Mi){return"none"!==Mi.pstyle("display").value},q=!i||$(t)&&(!h||$(t.source())&&$(t.target()));if(q){var ae=0;i&&r.includeOverlays&&0!==t.pstyle("overlay-opacity").value&&(ae=t.pstyle("overlay-padding").value);var Yt=0;i&&r.includeUnderlays&&0!==t.pstyle("underlay-opacity").value&&(Yt=t.pstyle("underlay-padding").value);var he=Math.max(ae,Yt),Te=0;if(i&&(Te=t.pstyle("width").pfValue/2),u&&r.includeNodes){var Le=t.position();_=Le.x,U=Le.y;var Oe=t.outerWidth()/2,cr=t.outerHeight()/2;Qn(s,f=_-Oe,x=U-cr,p=_+Oe,k=U+cr),i&&Uu(s,t),i&&r.includeOutlines&&!n&&Uu(s,t),i&&function(t,r){if(!r.cy().headless()){var a=r.pstyle("border-opacity").value,i=r.pstyle("border-width").pfValue,n=r.pstyle("border-position").value;$u(t,r,a,i,n)}}(s,t)}else if(h&&r.includeEdges)if(i&&!n){var dr=t.pstyle("curve-style").strValue;if(f=Math.min(O.srcX,O.midX,O.tgtX),p=Math.max(O.srcX,O.midX,O.tgtX),x=Math.min(O.srcY,O.midY,O.tgtY),k=Math.max(O.srcY,O.midY,O.tgtY),Qn(s,f-=Te,x-=Te,p+=Te,k+=Te),"haystack"===dr){var rr=O.haystackPts;if(rr&&2===rr.length){if((f=rr[0].x)>(p=rr[1].x)){var Cr=f;f=p,p=Cr}if((x=rr[0].y)>(k=rr[1].y)){var Vr=x;x=k,k=Vr}Qn(s,f-Te,x-Te,p+Te,k+Te)}}else if("bezier"===dr||"unbundled-bezier"===dr||Tt(dr,"segments")||Tt(dr,"taxi")){var qr;switch(dr){case"bezier":case"unbundled-bezier":qr=O.bezierPts;break;case"segments":case"taxi":case"round-segments":case"round-taxi":qr=O.linePts}if(null!=qr)for(var Ar=0;Ar<qr.length;Ar++){var Fr=qr[Ar];Qn(s,f=Fr.x-Te,x=Fr.y-Te,p=Fr.x+Te,k=Fr.y+Te)}}}else{var Ea=t.source().position(),Aa=t.target().position();if((f=Ea.x)>(p=Aa.x)){var Ra=f;f=p,p=Ra}if((x=Ea.y)>(k=Aa.y)){var Za=x;x=k,k=Za}Qn(s,f-=Te,x-=Te,p+=Te,k+=Te)}if(i&&r.includeEdges&&h&&(Wo(s,t,"mid-source"),Wo(s,t,"mid-target"),Wo(s,t,"source"),Wo(s,t,"target")),i&&"yes"===t.pstyle("ghost").value){var Nr=t.pstyle("ghost-offset-x").pfValue,Ur=t.pstyle("ghost-offset-y").pfValue;Qn(s,s.x1+Nr,s.y1+Ur,s.x2+Nr,s.y2+Ur)}var Zr=o.bodyBounds=o.bodyBounds||{};It(Zr,s),Z(Zr,K),J(Zr,1),i&&Qn(s,(f=s.x1)-he,(x=s.y1)-he,(p=s.x2)+he,(k=s.y2)+he);var ma=o.overlayBounds=o.overlayBounds||{};It(ma,s),Z(ma,K),J(ma,1);var Ga=o.labelBounds=o.labelBounds||{};null!=Ga.all?function(t){t.x1=1/0,t.y1=1/0,t.x2=-1/0,t.y2=-1/0,t.w=0,t.h=0}(Ga.all):Ga.all=kt(),i&&r.includeLabels&&(r.includeMainLabels&&Dc(s,t,null),h&&(r.includeSourceLabels&&Dc(s,t,"source"),r.includeTargetLabels&&Dc(s,t,"target")))}return s.x1=Gn(s.x1),s.y1=Gn(s.y1),s.x2=Gn(s.x2),s.y2=Gn(s.y2),s.w=Gn(s.x2-s.x1),s.h=Gn(s.y2-s.y1),s.w>0&&s.h>0&&q&&(Z(s,K),J(s,1)),s}(t,so),a.bbCache=i,a.bbCachePosKey=Hu(t)):i=a.bbCache,!o){var u=t.isNode();i=kt(),(r.includeNodes&&u||r.includeEdges&&!u)&&ms(i,r.includeOverlays?a.overlayBounds:a.bodyBounds),r.includeLabels&&(r.includeMainLabels&&(!n||r.includeSourceLabels&&r.includeTargetLabels)?ms(i,a.labelBounds.all):(r.includeMainLabels&&ms(i,a.labelBounds.mainRot),r.includeSourceLabels&&ms(i,a.labelBounds.sourceRot),r.includeTargetLabels&&ms(i,a.labelBounds.targetRot))),i.w=i.x2-i.x1,i.h=i.y2-i.y1}return i},so={includeNodes:!0,includeEdges:!0,includeLabels:!0,includeMainLabels:!0,includeSourceLabels:!0,includeTargetLabels:!0,includeOverlays:!0,includeUnderlays:!0,includeOutlines:!0,useCache:!0},qu=Yu(so),ju=Ne(so);ys.boundingBox=function(e){var t,r=void 0===e||void 0===e.useCache||!0===e.useCache,a=Pe(function(f){var p=f._private;return null==p.bbCache||p.styleDirty||p.bbCachePosKey!==Hu(f)},function(f){return f.id()});if(r&&1===this.length&&!a(this[0]))e=void 0===e?so:ju(e),t=Gu(this[0],e);else{t=kt();var i=ju(e=e||so),n=this,o=n.cy().styleEnabled();this.edges().forEach(a),this.nodes().forEach(a),o&&this.recalculateRenderedStyle(r),this.updateCompoundBounds(!r);for(var u=0;u<n.length;u++){var h=n[u];a(h)&&h.dirtyBoundingBoxCache(),ms(t,Gu(h,i))}}return t.x1=Gn(t.x1),t.y1=Gn(t.y1),t.x2=Gn(t.x2),t.y2=Gn(t.y2),t.w=Gn(t.x2-t.x1),t.h=Gn(t.y2-t.y1),t},ys.dirtyBoundingBoxCache=function(){for(var e=0;e<this.length;e++){var t=this[e]._private;t.bbCache=null,t.bbCachePosKey=null,t.bodyBounds=null,t.overlayBounds=null,t.labelBounds.all=null,t.labelBounds.source=null,t.labelBounds.target=null,t.labelBounds.main=null,t.labelBounds.sourceRot=null,t.labelBounds.targetRot=null,t.labelBounds.mainRot=null,t.arrowBounds.source=null,t.arrowBounds.target=null,t.arrowBounds["mid-source"]=null,t.arrowBounds["mid-target"]=null}return this.emitAndNotify("bounds"),this},ys.boundingBoxAt=function(e){var t=this.nodes(),r=this.cy(),a=r.hasCompoundNodes(),i=r.collection();if(a&&(i=t.filter(function(h){return h.isParent()}),t=t.not(i)),Bt(e)){var n=e;e=function(){return n}}r.startBatch(),t.forEach(function(f,p){return f._private.bbAtOldPos=e(f,p)}).silentPositions(e),a&&(i.dirtyCompoundBoundsCache(),i.dirtyBoundingBoxCache(),i.updateCompoundBounds(!0));var u=function(t){return{x1:t.x1,x2:t.x2,w:t.w,y1:t.y1,y2:t.y2,h:t.h}}(this.boundingBox({useCache:!1}));return t.silentPositions(function(f){return f._private.bbAtOldPos}),a&&(i.dirtyCompoundBoundsCache(),i.dirtyBoundingBoxCache(),i.updateCompoundBounds(!0)),r.endBatch(),u},Us.boundingbox=Us.bb=Us.boundingBox,Us.renderedBoundingbox=Us.renderedBoundingBox;var oo,lo,Ug=ys;oo=lo={};var Xu=function(t){t.uppercaseName=Et(t.name),t.autoName="auto"+t.uppercaseName,t.labelName="label"+t.uppercaseName,t.outerName="outer"+t.uppercaseName,t.uppercaseOuterName=Et(t.outerName),oo[t.name]=function(){var a=this[0],i=a._private;if(a){if(i.cy._private.styleEnabled){if(a.isParent())return a.updateCompoundBounds(),i[t.autoName]||0;var o=a.pstyle(t.name);return"label"===o.strValue?(a.recalculateRenderedStyle(),i.rstyle[t.labelName]||0):o.pfValue}return 1}},oo["outer"+t.uppercaseName]=function(){var a=this[0];if(a){if(a._private.cy._private.styleEnabled){var o=a[t.name](),u=a.pstyle("border-position").value;return o+("center"===u?a.pstyle("border-width").pfValue:"outside"===u?2*a.pstyle("border-width").pfValue:0)+2*a.padding()}return 1}},oo["rendered"+t.uppercaseName]=function(){var a=this[0];if(a)return a[t.name]()*this.cy().zoom()},oo["rendered"+t.uppercaseOuterName]=function(){var a=this[0];if(a)return a[t.outerName]()*this.cy().zoom()}};Xu({name:"width"}),Xu({name:"height"}),lo.padding=function(){var e=this[0],t=e._private;return e.isParent()?(e.updateCompoundBounds(),void 0!==t.autoPadding?t.autoPadding:e.pstyle("padding").pfValue):e.pstyle("padding").pfValue},lo.paddedHeight=function(){var e=this[0];return e.height()+2*e.padding()},lo.paddedWidth=function(){var e=this[0];return e.width()+2*e.padding()};var $g=lo,Zu={controlPoints:{get:function(t){return t.renderer().getControlPoints(t)},mult:!0},segmentPoints:{get:function(t){return t.renderer().getSegmentPoints(t)},mult:!0},sourceEndpoint:{get:function(t){return t.renderer().getSourceEndpoint(t)}},targetEndpoint:{get:function(t){return t.renderer().getTargetEndpoint(t)}},midpoint:{get:function(t){return t.renderer().getEdgeMidpoint(t)}}},t1=Object.keys(Zu).reduce(function(e,t){var r=Zu[t],a=function(t){return"rendered"+t[0].toUpperCase()+t.substr(1)}(t);return e[t]=function(){return function(t,r){if(t.isEdge()&&t.takesUpSpace())return r(t)}(this,r.get)},e[a]=r.mult?function(){return function(t,r){if(t.isEdge()&&t.takesUpSpace()){var a=t.cy(),i=a.pan(),n=a.zoom();return r(t).map(function(s){return Bn(s,n,i)})}}(this,r.get)}:function(){return function(t,r){if(t.isEdge()&&t.takesUpSpace()){var a=t.cy();return Bn(r(t),a.zoom(),a.pan())}}(this,r.get)},e},{}),e1=H({},Wg,Ug,$g,t1),Qu=function(t,r){this.recycle(t,r)};
/*!
      Event object based on jQuery events, MIT license
      
      https://jquery.org/license/
      https://tldrlegal.com/license/mit-license
      https://github.com/jquery/jquery/blob/master/src/event.js
      */function co(){return!1}function zo(){return!0}Qu.prototype={instanceString:function(){return"event"},recycle:function(t,r){if(this.isImmediatePropagationStopped=this.isPropagationStopped=this.isDefaultPrevented=co,null!=t&&t.preventDefault?(this.type=t.type,this.isDefaultPrevented=t.defaultPrevented?zo:co):null!=t&&t.type?r=t:this.type=t,null!=r&&(this.originalEvent=r.originalEvent,this.type=null!=r.type?r.type:this.type,this.cy=r.cy,this.target=r.target,this.position=r.position,this.renderedPosition=r.renderedPosition,this.namespace=r.namespace,this.layout=r.layout),null!=this.cy&&null!=this.position&&null==this.renderedPosition){var a=this.position,i=this.cy.zoom(),n=this.cy.pan();this.renderedPosition={x:a.x*i+n.x,y:a.y*i+n.y}}this.timeStamp=t&&t.timeStamp||Date.now()},preventDefault:function(){this.isDefaultPrevented=zo;var t=this.originalEvent;t&&t.preventDefault&&t.preventDefault()},stopPropagation:function(){this.isPropagationStopped=zo;var t=this.originalEvent;t&&t.stopPropagation&&t.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=zo,this.stopPropagation()},isDefaultPrevented:co,isPropagationStopped:co,isImmediatePropagationStopped:co};var Ju=/^([^.]+)(\.(?:[^.]+))?$/,td={qualifierCompare:function(t,r){return t===r},eventMatches:function(){return!0},addEventFields:function(){},callbackContext:function(t){return t},beforeEmit:function(){},afterEmit:function(){},bubble:function(){return!1},parent:function(){return null},context:null},ed=Object.keys(td),a1={};function Vo(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a1,t=arguments.length>1?arguments[1]:void 0,r=0;r<ed.length;r++){var a=ed[r];this[a]=e[a]||td[a]}this.context=t||this.context,this.listeners=[],this.emitting=0}var xs=Vo.prototype,rd=function(t,r,a,i,n,s,o){z(i)&&(n=i,i=null),o&&(s=null==s?o:H({},s,o));for(var u=dt(a)?a:a.split(/\s+/),h=0;h<u.length;h++){var f=u[h];if(!Nt(f)){var p=f.match(Ju);if(p&&!1===r(t,f,p[1],p[2]?p[2]:null,i,n,s))break}}},ad=function(t,r){return t.addEventFields(t.context,r),new Qu(r.type,r)};xs.on=xs.addListener=function(e,t,r,a,i){return rd(this,function(n,s,o,u,h,f,p){z(f)&&n.listeners.push({event:s,callback:f,type:o,namespace:u,qualifier:h,conf:p})},e,t,r,a,i),this},xs.one=function(e,t,r,a){return this.on(e,t,r,a,{one:!0})},xs.removeListener=xs.off=function(e,t,r,a){var i=this;0!==this.emitting&&(this.listeners=function(t){return t.slice()}(this.listeners));for(var n=this.listeners,s=function(h){var f=n[h];rd(i,function(p,x,k,_,U,O){if((f.type===k||"*"===e)&&(!_&&".*"!==f.namespace||f.namespace===_)&&(!U||p.qualifierCompare(f.qualifier,U))&&(!O||f.callback===O))return n.splice(h,1),!1},e,t,r,a)},o=n.length-1;o>=0;o--)s(o);return this},xs.removeAllListeners=function(){return this.removeListener("*")},xs.emit=xs.trigger=function(e,t,r){var a=this.listeners,i=a.length;return this.emitting++,dt(t)||(t=[t]),function(t,r,a){if(function(t){return"event"===Ir(t)}(a))r(t,a);else if(Bt(a))r(t,ad(t,a));else for(var i=dt(a)?a:a.split(/\s+/),n=0;n<i.length;n++){var s=i[n];if(!Nt(s)){var o=s.match(Ju);o&&r(t,ad(t,{type:o[1],namespace:o[2]?o[2]:null,target:t.context}))}}}(this,function(n,s){null!=r&&(i=(a=[{event:s.event,type:s.type,namespace:s.namespace,callback:r}]).length);for(var o=function(){var f=a[u];if(f.type===s.type&&(!f.namespace||f.namespace===s.namespace||".*"===f.namespace)&&n.eventMatches(n.context,f,s)){var p=[s];null!=t&&function(t,r){for(var a=0;a<r.length;a++)t.push(r[a])}(p,t),n.beforeEmit(n.context,f,s),f.conf&&f.conf.one&&(n.listeners=n.listeners.filter(function(_){return _!==f}));var x=n.callbackContext(n.context,f,s),k=f.callback.apply(x,p);n.afterEmit(n.context,f,s),!1===k&&(s.stopPropagation(),s.preventDefault())}},u=0;u<i;u++)o();n.bubble(n.context)&&!s.isPropagationStopped()&&n.parent(n.context).emit(s,t)},e),this.emitting--,this};var n1={qualifierCompare:function(t,r){return null==t||null==r?null==t&&null==r:t.sameText(r)},eventMatches:function(t,r,a){var i=r.qualifier;return null==i||t!==a.target&&Rt(a.target)&&i.matches(a.target)},addEventFields:function(t,r){r.cy=t.cy(),r.target=t},callbackContext:function(t,r,a){return null!=r.qualifier?a.target:t},beforeEmit:function(t,r){r.conf&&r.conf.once&&r.conf.onceCollection.removeListener(r.event,r.qualifier,r.callback)},bubble:function(){return!0},parent:function(t){return t.isChild()?t.parent():t.cy()}},Uo=function(t){return Xe(t)?new gs(t):t},id={createEmitter:function(){for(var t=0;t<this.length;t++){var r=this[t],a=r._private;a.emitter||(a.emitter=new Vo(n1,r))}return this},emitter:function(){return this._private.emitter},on:function(t,r,a){for(var i=Uo(r),n=0;n<this.length;n++)this[n].emitter().on(t,i,a);return this},removeListener:function(t,r,a){for(var i=Uo(r),n=0;n<this.length;n++)this[n].emitter().removeListener(t,i,a);return this},removeAllListeners:function(){for(var t=0;t<this.length;t++)this[t].emitter().removeAllListeners();return this},one:function(t,r,a){for(var i=Uo(r),n=0;n<this.length;n++)this[n].emitter().one(t,i,a);return this},once:function(t,r,a){for(var i=Uo(r),n=0;n<this.length;n++)this[n].emitter().on(t,i,a,{once:!0,onceCollection:this})},emit:function(t,r){for(var a=0;a<this.length;a++)this[a].emitter().emit(t,r);return this},emitAndNotify:function(t,r){if(0!==this.length)return this.cy().notify(t,this),this.emit(t,r),this}};$i.eventAliasesOn(id);var nd={nodes:function(t){return this.filter(function(r){return r.isNode()}).filter(t)},edges:function(t){return this.filter(function(r){return r.isEdge()}).filter(t)},byGroup:function(){for(var t=this.spawn(),r=this.spawn(),a=0;a<this.length;a++){var i=this[a];i.isNode()?t.push(i):r.push(i)}return{nodes:t,edges:r}},filter:function(t,r){if(void 0===t)return this;if(Xe(t)||ee(t))return new gs(t).filter(this);if(z(t)){for(var a=this.spawn(),i=this,n=0;n<i.length;n++){var s=i[n];(r?t.apply(r,[s,n,i]):t(s,n,i))&&a.push(s)}return a}return this.spawn()},not:function(t){if(t){Xe(t)&&(t=this.filter(t));for(var r=this.spawn(),a=0;a<this.length;a++){var i=this[a];t.has(i)||r.push(i)}return r}return this},absoluteComplement:function(){return this.cy().mutableElements().not(this)},intersect:function(t){if(Xe(t))return this.filter(t);for(var a=this.spawn(),s=this.length<t.length,o=s?this:t,u=s?t:this,h=0;h<o.length;h++){var f=o[h];u.has(f)&&a.push(f)}return a},xor:function(t){var r=this._private.cy;Xe(t)&&(t=r.$(t));var a=this.spawn(),n=t,s=function(u,h){for(var f=0;f<u.length;f++){var p=u[f];h.hasElementWithId(p._private.data.id)||a.push(p)}};return s(this,n),s(n,this),a},diff:function(t){var r=this._private.cy;Xe(t)&&(t=r.$(t));var a=this.spawn(),i=this.spawn(),n=this.spawn(),o=t,u=function(f,p,x){for(var k=0;k<f.length;k++){var _=f[k];p.hasElementWithId(_._private.data.id)?n.merge(_):x.push(_)}};return u(this,o,a),u(o,this,i),{left:a,right:i,both:n}},add:function(t){var r=this._private.cy;if(!t)return this;if(Xe(t)){var a=t;t=r.mutableElements().filter(a)}for(var i=this.spawnSelf(),n=0;n<t.length;n++){var s=t[n];!this.has(s)&&i.push(s)}return i},merge:function(t){var r=this._private,a=r.cy;if(!t)return this;if(t&&Xe(t)){var i=t;t=a.mutableElements().filter(i)}for(var n=r.map,s=0;s<t.length;s++){var o=t[s],u=o._private.data.id;if(!n.has(u)){var f=this.length++;this[f]=o,n.set(u,{ele:o,index:f})}}return this},unmergeAt:function(t){var a=this[t].id(),n=this._private.map;if(this[t]=void 0,n.delete(a),this.length>1&&t!==this.length-1){var o=this.length-1,u=this[o],h=u._private.data.id;this[o]=void 0,this[t]=u,n.set(h,{ele:u,index:t})}return this.length--,this},unmergeOne:function(t){var n=this._private.map.get((t=t[0])._private.data.id);return n?(this.unmergeAt(n.index),this):this},unmerge:function(t){var r=this._private.cy;if(!t)return this;if(t&&Xe(t)){var a=t;t=r.mutableElements().filter(a)}for(var i=0;i<t.length;i++)this.unmergeOne(t[i]);return this},unmergeBy:function(t){for(var r=this.length-1;r>=0;r--)t(this[r])&&this.unmergeAt(r);return this},map:function(t,r){for(var a=[],i=this,n=0;n<i.length;n++){var s=i[n],o=r?t.apply(r,[s,n,i]):t(s,n,i);a.push(o)}return a},reduce:function(t,r){for(var a=r,i=this,n=0;n<i.length;n++)a=t(a,i[n],n,i);return a},max:function(t,r){for(var i,a=-1/0,n=this,s=0;s<n.length;s++){var o=n[s],u=r?t.apply(r,[o,s,n]):t(o,s,n);u>a&&(a=u,i=o)}return{value:a,ele:i}},min:function(t,r){for(var i,a=1/0,n=this,s=0;s<n.length;s++){var o=n[s],u=r?t.apply(r,[o,s,n]):t(o,s,n);u<a&&(a=u,i=o)}return{value:a,ele:i}}},Ki=nd;Ki.u=Ki["|"]=Ki["+"]=Ki.union=Ki.or=Ki.add,Ki["\\"]=Ki["!"]=Ki["-"]=Ki.difference=Ki.relativeComplement=Ki.subtract=Ki.not,Ki.n=Ki["&"]=Ki["."]=Ki.and=Ki.intersection=Ki.intersect,Ki["^"]=Ki["(+)"]=Ki["(-)"]=Ki.symmetricDifference=Ki.symdiff=Ki.xor,Ki.fnFilter=Ki.filterFn=Ki.stdFilter=Ki.filter,Ki.complement=Ki.abscomp=Ki.absoluteComplement;var t,sd=function(t,r){var i=t.cy().hasCompoundNodes();function n(f){var p=f.pstyle("z-compound-depth");return"auto"===p.value?i?f.zDepth():0:"bottom"===p.value?-1:"top"===p.value?Va:0}var s=n(t)-n(r);if(0!==s)return s;function o(f){return"auto"===f.pstyle("z-index-compare").value&&f.isNode()?1:0}var u=o(t)-o(r);if(0!==u)return u;var h=t.pstyle("z-index").value-r.pstyle("z-index").value;return 0!==h?h:t.poolIndex()-r.poolIndex()},$o={forEach:function(t,r){if(z(t))for(var a=this.length,i=0;i<a;i++){var n=this[i];if(!1===(r?t.apply(r,[n,i,this]):t(n,i,this)))break}return this},toArray:function(){for(var t=[],r=0;r<this.length;r++)t.push(this[r]);return t},slice:function(t,r){var a=[],i=this.length;null==r&&(r=i),null==t&&(t=0),t<0&&(t=i+t),r<0&&(r=i+r);for(var n=t;n>=0&&n<r&&n<i;n++)a.push(this[n]);return this.spawn(a)},size:function(){return this.length},eq:function(t){return this[t]||this.spawn()},first:function(){return this[0]||this.spawn()},last:function(){return this[this.length-1]||this.spawn()},empty:function(){return 0===this.length},nonempty:function(){return!this.empty()},sort:function(t){if(!z(t))return this;var r=this.toArray().sort(t);return this.spawn(r)},sortByZIndex:function(){return this.sort(sd)},zDepth:function(){var t=this[0];if(t){var r=t._private;if("nodes"===r.group){var i=r.data.parent?t.parents().size():0;return t.isParent()?i:Va-1}var s=r.target,o=r.source.zDepth(),u=s.zDepth();return Math.max(o,u,0)}}};$o.each=$o.forEach,t="undefined",(typeof Symbol>"u"?"undefined":vr(Symbol))!=t&&vr(Symbol.iterator)!=t&&($o[Symbol.iterator]=function(){var a=this,i={value:void 0,done:!1},n=0,s=this.length;return w({next:function(){return n<s?i.value=a[n++]:(i.value=void 0,i.done=!0),i}},Symbol.iterator,function(){return this})});var l1=Ne({nodeDimensionsIncludeLabels:!1}),Yo={layoutDimensions:function(t){var r;if(t=l1(t),this.takesUpSpace())if(t.nodeDimensionsIncludeLabels){var a=this.boundingBox();r={w:a.w,h:a.h}}else r={w:this.outerWidth(),h:this.outerHeight()};else r={w:0,h:0};return(0===r.w||0===r.h)&&(r.w=r.h=1),r},layoutPositions:function(t,r,a){var i=this.nodes().filter(function(ae){return!ae.isParent()}),n=this.cy(),s=r.eles,o=function(se){return se.id()},u=Pe(a,o);t.emit({type:"layoutstart",layout:t}),t.animations=[];var f=r.spacingFactor&&1!==r.spacingFactor,x=function(){if(!f)return null;for(var se=kt(),Yt=0;Yt<i.length;Yt++){var me=u(i[Yt],Yt);wt(se,me.x,me.y)}return se}(),k=Pe(function(ae,se){var Yt=u(ae,se);return f&&(Yt=function(se,Yt,he){var me_x=Yt.x1+Yt.w/2,me_y=Yt.y1+Yt.h/2;return{x:me_x+(he.x-me_x)*se,y:me_y+(he.y-me_y)*se}}(Math.abs(r.spacingFactor),x,Yt)),null!=r.transform&&(Yt=r.transform(ae,Yt)),Yt},o);if(r.animate){for(var _=0;_<i.length;_++){var U=i[_],O=k(U,_);if(null==r.animateFilter||r.animateFilter(U,_)){var $=U.animation({position:O,duration:r.animationDuration,easing:r.animationEasing});t.animations.push($)}else U.position(O)}if(r.fit){var q=n.animation({fit:{boundingBox:s.boundingBoxAt(k),padding:r.padding},duration:r.animationDuration,easing:r.animationEasing});t.animations.push(q)}else if(void 0!==r.zoom&&void 0!==r.pan){var vt=n.animation({zoom:r.zoom,pan:r.pan,duration:r.animationDuration,easing:r.animationEasing});t.animations.push(vt)}t.animations.forEach(function(ae){return ae.play()}),t.one("layoutready",r.ready),t.emit({type:"layoutready",layout:t}),Ks.all(t.animations.map(function(ae){return ae.promise()})).then(function(){t.one("layoutstop",r.stop),t.emit({type:"layoutstop",layout:t})})}else i.positions(k),r.fit&&n.fit(r.eles,r.padding),null!=r.zoom&&n.zoom(r.zoom),r.pan&&n.pan(r.pan),t.one("layoutready",r.ready),t.emit({type:"layoutready",layout:t}),t.one("layoutstop",r.stop),t.emit({type:"layoutstop",layout:t});return this},layout:function(t){return this.cy().makeLayout(H({},t,{eles:this}))}};function od(e,t,r){var n,a=r._private,i=a.styleCache=a.styleCache||[];return null!=(n=i[e])||(n=i[e]=t(r)),n}function Ho(e,t){return e=da(e),function(a){return od(e,t,a)}}function Go(e,t){e=da(e);var r=function(i){return t.call(i)};return function(){var i=this[0];if(i)return od(e,r,i)}}Yo.createLayout=Yo.makeLayout=Yo.layout;var Sn={recalculateRenderedStyle:function(t){var r=this.cy(),a=r.renderer(),i=r.styleEnabled();return a&&i&&a.recalculateRenderedStyle(this,t),this},dirtyStyleCache:function(){var a,t=this.cy(),r=function(n){return n._private.styleCache=null};return t.hasCompoundNodes()?((a=this.spawnSelf().merge(this.descendants()).merge(this.parents())).merge(a.connectedEdges()),a.forEach(r)):this.forEach(function(i){r(i),i.connectedEdges().forEach(r)}),this},updateStyle:function(t){var r=this._private.cy;if(!r.styleEnabled())return this;if(r.batching())return r._private.batchStyleEles.merge(this),this;var n=this;t=!(!t&&void 0!==t),r.hasCompoundNodes()&&(n=this.spawnSelf().merge(this.descendants()).merge(this.parents()));var s=n;return t?s.emitAndNotify("style"):s.emit("style"),n.forEach(function(o){return o._private.styleDirty=!0}),this},cleanStyle:function(){var t=this.cy();if(t.styleEnabled())for(var r=0;r<this.length;r++){var a=this[r];a._private.styleDirty&&(a._private.styleDirty=!1,t.style().apply(a))}},parsedStyle:function(t){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=this[0],i=a.cy();if(i.styleEnabled()&&a)return a._private.styleDirty&&(a._private.styleDirty=!1,i.style().apply(a)),a._private.style[t]??(r?i.style().getDefaultProperty(t):null)},numericStyle:function(t){var r=this[0];if(r.cy().styleEnabled()&&r){var a=r.pstyle(t);return void 0!==a.pfValue?a.pfValue:a.value}},numericStyleUnits:function(t){var r=this[0];if(r.cy().styleEnabled()&&r)return r.pstyle(t).units},renderedStyle:function(t){var r=this.cy();if(!r.styleEnabled())return this;var a=this[0];return a?r.style().getRenderedStyle(a,t):void 0},style:function(t,r){var a=this.cy();if(!a.styleEnabled())return this;var i=!1,n=a.style();if(Bt(t))n.applyBypass(this,t,i),this.emitAndNotify("style");else if(Xe(t)){if(void 0===r){var o=this[0];return o?n.getStylePropertyValue(o,t):void 0}n.applyBypass(this,t,r,i),this.emitAndNotify("style")}else if(void 0===t){var u=this[0];return u?n.getRawStyle(u):void 0}return this},removeStyle:function(t){var r=this.cy();if(!r.styleEnabled())return this;var a=!1,i=r.style(),n=this;if(void 0===t)for(var s=0;s<n.length;s++)i.removeAllBypasses(n[s],a);else{t=t.split(/\s+/);for(var u=0;u<n.length;u++)i.removeBypasses(n[u],t,a)}return this.emitAndNotify("style"),this},show:function(){return this.css("display","element"),this},hide:function(){return this.css("display","none"),this},effectiveOpacity:function(){var t=this.cy();if(!t.styleEnabled())return 1;var r=t.hasCompoundNodes(),a=this[0];if(a){var i=a._private,n=a.pstyle("opacity").value;if(!r)return n;var s=i.data.parent?a.parents():null;if(s)for(var o=0;o<s.length;o++)n*=s[o].pstyle("opacity").value;return n}},transparent:function(){if(!this.cy().styleEnabled())return!1;var r=this[0],a=r.cy().hasCompoundNodes();return r?a?0===r.effectiveOpacity():0===r.pstyle("opacity").value:void 0},backgrounding:function(){return!!this.cy().styleEnabled()&&!!this[0]._private.backgrounding}};function Lc(e,t){var a=e._private.data.parent?e.parents():null;if(a)for(var i=0;i<a.length;i++)if(!t(a[i]))return!1;return!0}function Bc(e){var t=e.ok,r=e.edgeOkViaNode||e.ok,a=e.parentOk||e.ok;return function(){var i=this.cy();if(!i.styleEnabled())return!0;var n=this[0],s=i.hasCompoundNodes();if(n){var o=n._private;if(!t(n))return!1;if(n.isNode())return!s||Lc(n,a);var u=o.source,h=o.target;return r(u)&&(!s||Lc(u,r))&&(u===h||r(h)&&(!s||Lc(h,r)))}}}var $s=Ho("eleTakesUpSpace",function(e){return"element"===e.pstyle("display").value&&0!==e.width()&&(!e.isNode()||0!==e.height())});Sn.takesUpSpace=Go("takesUpSpace",Bc({ok:$s}));var c1=Ho("eleInteractive",function(e){return"yes"===e.pstyle("events").value&&"visible"===e.pstyle("visibility").value&&$s(e)}),h1=Ho("parentInteractive",function(e){return"visible"===e.pstyle("visibility").value&&$s(e)});Sn.interactive=Go("interactive",Bc({ok:c1,parentOk:h1,edgeOkViaNode:$s})),Sn.noninteractive=function(){var e=this[0];if(e)return!e.interactive()};var u1=Ho("eleVisible",function(e){return"visible"===e.pstyle("visibility").value&&0!==e.pstyle("opacity").pfValue&&$s(e)});Sn.visible=Go("visible",Bc({ok:u1,edgeOkViaNode:$s})),Sn.hidden=function(){var e=this[0];if(e)return!e.visible()},Sn.isBundledBezier=Go("isBundledBezier",function(){return!!this.cy().styleEnabled()&&!this.removed()&&"bezier"===this.pstyle("curve-style").value&&this.takesUpSpace()}),Sn.bypass=Sn.css=Sn.style,Sn.renderedCss=Sn.renderedStyle,Sn.removeBypass=Sn.removeCss=Sn.removeStyle,Sn.pstyle=Sn.parsedStyle;var bs={};function ld(e){return function(){var t=arguments,r=[];if(2===t.length)this.on(e.event,t[0],t[1]);else if(1===t.length&&z(t[0]))this.on(e.event,t[0]);else if(0===t.length||1===t.length&&dt(t[0])){for(var s=1===t.length?t[0]:null,o=0;o<this.length;o++){var u=this[o],h=!e.ableField||u._private[e.ableField],f=u._private[e.field]!=e.value;if(e.overrideAble){var p=e.overrideAble(u);if(void 0!==p&&(h=p,!p))return this}h&&(u._private[e.field]=e.value,f&&r.push(u))}var x=this.spawn(r);x.updateStyle(),x.emit(e.event),s&&x.emit(s)}return this}}function Ys(e){bs[e.field]=function(){var t=this[0];if(t){if(e.overrideField){var r=e.overrideField(t);if(void 0!==r)return r}return t._private[e.field]}},bs[e.on]=ld({event:e.on,field:e.field,ableField:e.ableField,overrideAble:e.overrideAble,value:!0}),bs[e.off]=ld({event:e.off,field:e.field,ableField:e.ableField,overrideAble:e.overrideAble,value:!1})}Ys({field:"locked",overrideField:function(t){return!!t.cy().autolock()||void 0},on:"lock",off:"unlock"}),Ys({field:"grabbable",overrideField:function(t){return!t.cy().autoungrabify()&&!t.pannable()&&void 0},on:"grabify",off:"ungrabify"}),Ys({field:"selected",ableField:"selectable",overrideAble:function(t){return!t.cy().autounselectify()&&void 0},on:"select",off:"unselect"}),Ys({field:"selectable",overrideField:function(t){return!t.cy().autounselectify()&&void 0},on:"selectify",off:"unselectify"}),bs.deselect=bs.unselect,bs.grabbed=function(){var e=this[0];if(e)return e._private.grabbed},Ys({field:"active",on:"activate",off:"unactivate"}),Ys({field:"pannable",on:"panify",off:"unpanify"}),bs.inactive=function(){var e=this[0];if(e)return!e._private.active};var Pn={},cd=function(t){return function(a){for(var n=[],s=0;s<this.length;s++){var o=this[s];if(o.isNode()){for(var u=!1,h=o.connectedEdges(),f=0;f<h.length;f++){var p=h[f],x=p.source(),k=p.target();if(t.noIncomingEdges&&k===o&&x!==o||t.noOutgoingEdges&&x===o&&k!==o){u=!0;break}}u||n.push(o)}}return this.spawn(n,!0).filter(a)}},hd=function(t){return function(r){for(var i=[],n=0;n<this.length;n++){var s=this[n];if(s.isNode())for(var o=s.connectedEdges(),u=0;u<o.length;u++){var h=o[u],f=h.source(),p=h.target();t.outgoing&&f===s?(i.push(h),i.push(p)):t.incoming&&p===s&&(i.push(h),i.push(f))}}return this.spawn(i,!0).filter(r)}},ud=function(t){return function(r){for(var a=this,i=[],n={};;){var s=t.outgoing?a.outgoers():a.incomers();if(0===s.length)break;for(var o=!1,u=0;u<s.length;u++){var h=s[u],f=h.id();n[f]||(n[f]=!0,i.push(h),o=!0)}if(!o)break;a=s}return this.spawn(i,!0).filter(r)}};function dd(e){return function(r){for(var a=[],i=0;i<this.length;i++){var s=this[i]._private[e.attr];s&&a.push(s)}return this.spawn(a,!0).filter(r)}}function fd(e){return function(r){var a=[],i=this._private.cy,n=e||{};Xe(r)&&(r=i.$(r));for(var s=0;s<r.length;s++)for(var o=r[s]._private.edges,u=0;u<o.length;u++){var h=o[u],f=h._private.data,p=this.hasElementWithId(f.source)&&r.hasElementWithId(f.target),x=r.hasElementWithId(f.source)&&this.hasElementWithId(f.target);(p||x)&&((n.thisIsSrc||n.thisIsTgt)&&(n.thisIsSrc&&!p||n.thisIsTgt&&!x)||a.push(h))}return this.spawn(a,!0)}}function gd(e){return e=H({},{codirected:!1},e),function(a){for(var i=[],n=this.edges(),s=e,o=0;o<n.length;o++)for(var h=n[o]._private,f=h.source,p=f._private.data.id,x=h.data.target,k=f._private.edges,_=0;_<k.length;_++){var U=k[_],O=U._private.data,K=O.target,$=O.source,q=K===x&&$===p;(s.codirected&&q||!s.codirected&&(q||p===K&&x===$))&&i.push(U)}return this.spawn(i,!0).filter(a)}}Pn.clearTraversalCache=function(){for(var e=0;e<this.length;e++)this[e]._private.traversalCache=null},H(Pn,{roots:cd({noIncomingEdges:!0}),leaves:cd({noOutgoingEdges:!0}),outgoers:Hn(hd({outgoing:!0}),"outgoers"),successors:ud({outgoing:!0}),incomers:Hn(hd({incoming:!0}),"incomers"),predecessors:ud({})}),H(Pn,{neighborhood:Hn(function(e){for(var t=[],r=this.nodes(),a=0;a<r.length;a++)for(var i=r[a],n=i.connectedEdges(),s=0;s<n.length;s++){var o=n[s],u=o.source(),h=o.target(),f=i===u?h:u;f.length>0&&t.push(f[0]),t.push(o[0])}return this.spawn(t,!0).filter(e)},"neighborhood"),closedNeighborhood:function(t){return this.neighborhood().add(this).filter(t)},openNeighborhood:function(t){return this.neighborhood(t)}}),Pn.neighbourhood=Pn.neighborhood,Pn.closedNeighbourhood=Pn.closedNeighborhood,Pn.openNeighbourhood=Pn.openNeighborhood,H(Pn,{source:Hn(function(t){var a,r=this[0];return r&&(a=r._private.source||r.cy().collection()),a&&t?a.filter(t):a},"source"),target:Hn(function(t){var a,r=this[0];return r&&(a=r._private.target||r.cy().collection()),a&&t?a.filter(t):a},"target"),sources:dd({attr:"source"}),targets:dd({attr:"target"})}),H(Pn,{edgesWith:Hn(fd(),"edgesWith"),edgesTo:Hn(fd({thisIsSrc:!0}),"edgesTo")}),H(Pn,{connectedEdges:Hn(function(e){for(var t=[],a=0;a<this.length;a++){var i=this[a];if(i.isNode())for(var n=i._private.edges,s=0;s<n.length;s++)t.push(n[s])}return this.spawn(t,!0).filter(e)},"connectedEdges"),connectedNodes:Hn(function(e){for(var t=[],a=0;a<this.length;a++){var i=this[a];i.isEdge()&&(t.push(i.source()[0]),t.push(i.target()[0]))}return this.spawn(t,!0).filter(e)},"connectedNodes"),parallelEdges:Hn(gd(),"parallelEdges"),codirectedEdges:Hn(gd({codirected:!0}),"codirectedEdges")}),H(Pn,{components:function(t){var r=this,a=r.cy(),i=a.collection(),n=null==t?r.nodes():t.nodes(),s=[];null!=t&&n.empty()&&(n=t.sources());var o=function(f,p){i.merge(f),n.unmerge(f),p.merge(f)};if(n.empty())return r.spawn();var u=function(){var f=a.collection();s.push(f);var p=n[0];o(p,f),r.bfs({directed:!1,roots:p,visit:function(k){return o(k,f)}}),f.forEach(function(x){x.connectedEdges().forEach(function(k){r.has(k)&&f.has(k.source())&&f.has(k.target())&&f.merge(k)})})};do{u()}while(n.length>0);return s},component:function(){var t=this[0];return t.cy().mutableElements().components(t)[0]}}),Pn.componentsOf=Pn.components;var wn=function(t,r){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(void 0!==t){var n=new Dt,s=!1;if(r){if(r.length>0&&Bt(r[0])&&!Rt(r[0])){s=!0;for(var o=[],u=new Xr,h=0,f=r.length;h<f;h++){var p=r[h];null==p.data&&(p.data={});var x=p.data;if(null==x.id)x.id=hi();else if(t.hasElementWithId(x.id)||u.has(x.id))continue;var k=new Hr(t,p,!1);o.push(k),u.add(x.id)}r=o}}else r=[];this.length=0;for(var _=0,U=r.length;_<U;_++){var O=r[_][0];if(null!=O){var K=O._private.data.id;(!a||!n.has(K))&&(a&&n.set(K,{index:this.length,ele:O}),this[this.length]=O,this.length++)}}this._private={eles:this,cy:t,get map(){return null==this.lazyMap&&this.rebuildMap(),this.lazyMap},set map($){this.lazyMap=$},rebuildMap:function(){for(var q=this.lazyMap=new Dt,vt=this.eles,ae=0;ae<vt.length;ae++){var se=vt[ae];q.set(se.id(),{index:ae,ele:se})}}},a&&(this._private.map=n),s&&!i&&this.restore()}else Ka("A collection must have a reference to the core")},Zi=Hr.prototype=wn.prototype=Object.create(Array.prototype);Zi.instanceString=function(){return"collection"},Zi.spawn=function(e,t){return new wn(this.cy(),e,t)},Zi.spawnSelf=function(){return this.spawn(this)},Zi.cy=function(){return this._private.cy},Zi.renderer=function(){return this._private.cy.renderer()},Zi.element=function(){return this[0]},Zi.collection=function(){return qt(this)?this:new wn(this._private.cy,[this])},Zi.unique=function(){return new wn(this._private.cy,this,!0)},Zi.hasElementWithId=function(e){return this._private.map.has(e=""+e)},Zi.getElementById=function(e){var t=this._private.cy,r=this._private.map.get(e=""+e);return r?r.ele:new wn(t)},Zi.$id=Zi.getElementById,Zi.poolIndex=function(){return this._private.cy._private.elements._private.map.get(this[0]._private.data.id).index},Zi.indexOf=function(e){return this._private.map.get(e[0]._private.data.id).index},Zi.indexOfId=function(e){return this._private.map.get(e=""+e).index},Zi.json=function(e){var t=this.element(),r=this.cy();if(null==t&&e)return this;if(null!=t){var a=t._private;if(Bt(e)){if(r.startBatch(),e.data){t.data(e.data);var i=a.data;if(t.isEdge()){var n=!1,s={},o=e.data.source,u=e.data.target;null!=o&&o!=i.source&&(s.source=""+o,n=!0),null!=u&&u!=i.target&&(s.target=""+u,n=!0),n&&(t=t.move(s))}else{var f=e.data.parent;"parent"in e.data&&(null!=f||null!=i.parent)&&f!=i.parent&&(void 0===f&&(f=null),null!=f&&(f=""+f),t=t.move({parent:f}))}}e.position&&t.position(e.position);var p=function(U,O,K){var $=e[U];null!=$&&$!==a[U]&&($?t[O]():t[K]())};return p("removed","remove","restore"),p("selected","select","unselect"),p("selectable","selectify","unselectify"),p("locked","lock","unlock"),p("grabbable","grabify","ungrabify"),p("pannable","panify","unpanify"),null!=e.classes&&t.classes(e.classes),r.endBatch(),this}if(void 0===e){var x={data:Ha(a.data),position:Ha(a.position),group:a.group,removed:a.removed,selected:a.selected,selectable:a.selectable,locked:a.locked,grabbable:a.grabbable,pannable:a.pannable,classes:""},k=0;return a.classes.forEach(function(_){return x.classes+=0===k++?_:" "+_}),x}}},Zi.jsons=function(){for(var e=[],t=0;t<this.length;t++){var a=this[t].json();e.push(a)}return e},Zi.clone=function(){for(var e=this.cy(),t=[],r=0;r<this.length;r++){var i=this[r].json(),n=new Hr(e,i,!1);t.push(n)}return new wn(e,t)},Zi.copy=Zi.clone,Zi.restore=function(){for(var o,e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=this,a=r.cy(),i=a._private,n=[],s=[],u=0,h=r.length;u<h;u++){var f=r[u];t&&!f.removed()||(f.isNode()?n.push(f):s.push(f))}o=n.concat(s);var p,x=function(){o.splice(p,1),p--};for(p=0;p<o.length;p++){var k=o[p],_=k._private,U=_.data;if(k.clearTraversalCache(),t||_.removed)if(void 0===U.id)U.id=hi();else if(X(U.id))U.id=""+U.id;else{if(Nt(U.id)||!Xe(U.id)){Ka("Can not create element with invalid string ID `"+U.id+"`"),x();continue}if(a.hasElementWithId(U.id)){Ka("Can not create second element with ID `"+U.id+"`"),x();continue}}var O=U.id;if(k.isNode()){var K=_.position;null==K.x&&(K.x=0),null==K.y&&(K.y=0)}if(k.isEdge()){for(var $=k,q=["source","target"],vt=q.length,ae=!1,se=0;se<vt;se++){var Yt=q[se],he=U[Yt];X(he)&&(he=U[Yt]=""+U[Yt]),null==he||""===he?(Ka("Can not create edge `"+O+"` with unspecified "+Yt),ae=!0):a.hasElementWithId(he)||(Ka("Can not create edge `"+O+"` with nonexistant "+Yt+" `"+he+"`"),ae=!0)}if(ae){x();continue}var me=a.getElementById(U.source),Te=a.getElementById(U.target);me.same(Te)?me._private.edges.push($):(me._private.edges.push($),Te._private.edges.push($)),$._private.source=me,$._private.target=Te}_.map=new Dt,_.map.set(O,{ele:k,index:0}),_.removed=!1,t&&a.addToPool(k)}for(var Le=0;Le<n.length;Le++){var Ie=n[Le],Oe=Ie._private.data;X(Oe.parent)&&(Oe.parent=""+Oe.parent);var tr=Oe.parent;if(null!=tr||Ie._private.parent){var dr=Ie._private.parent?a.collection().merge(Ie._private.parent):a.getElementById(tr);if(dr.empty())Oe.parent=void 0;else if(dr[0].removed())_a("Node added with missing parent, reference to parent removed"),Oe.parent=void 0,Ie._private.parent=null;else{for(var rr=!1,Cr=dr;!Cr.empty();){if(Ie.same(Cr)){rr=!0,Oe.parent=void 0;break}Cr=Cr.parent()}rr||(dr[0]._private.children.push(Ie),Ie._private.parent=dr[0],i.hasCompoundNodes=!0)}}}if(o.length>0){for(var Vr=o.length===r.length?r:new wn(a,o),qr=0;qr<Vr.length;qr++){var Ar=Vr[qr];Ar.isNode()||(Ar.parallelEdges().clearTraversalCache(),Ar.source().clearTraversalCache(),Ar.target().clearTraversalCache())}(i.hasCompoundNodes?a.collection().merge(Vr).merge(Vr.connectedNodes()).merge(Vr.parent()):Vr).dirtyCompoundBoundsCache().dirtyBoundingBoxCache().updateStyle(e),e?Vr.emitAndNotify("add"):t&&Vr.emit("add")}return r},Zi.removed=function(){var e=this[0];return e&&e._private.removed},Zi.inside=function(){var e=this[0];return e&&!e._private.removed},Zi.remove=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=this,a=[],i={},n=r._private.cy;function u(tr){var cr=i[tr.id()];t&&tr.removed()||cr||(i[tr.id()]=!0,tr.isNode()?(a.push(tr),function s(tr){for(var cr=tr._private.edges,dr=0;dr<cr.length;dr++)u(cr[dr])}(tr),function o(tr){for(var cr=tr._private.children,dr=0;dr<cr.length;dr++)u(cr[dr])}(tr)):a.unshift(tr))}for(var h=0,f=r.length;h<f;h++)u(r[h]);function x(tr,cr){at(tr._private.edges,cr),tr.clearTraversalCache()}function k(tr){tr.clearTraversalCache()}var _=[];function U(tr,cr){cr=cr[0];var dr=(tr=tr[0])._private.children,rr=tr.id();at(dr,cr),cr._private.parent=null,_.ids[rr]||(_.ids[rr]=!0,_.push(tr))}_.ids={},r.dirtyCompoundBoundsCache(),t&&n.removeFromPool(a);for(var O=0;O<a.length;O++){var K=a[O];if(K.isEdge()){var $=K.source()[0],q=K.target()[0];x($,K),x(q,K);for(var vt=K.parallelEdges(),ae=0;ae<vt.length;ae++){var se=vt[ae];k(se),se.isBundledBezier()&&se.dirtyBoundingBoxCache()}}else{var Yt=K.parent();0!==Yt.length&&U(Yt,K)}t&&(K._private.removed=!0)}var he=n._private.elements;n._private.hasCompoundNodes=!1;for(var me=0;me<he.length;me++)if(he[me].isParent()){n._private.hasCompoundNodes=!0;break}var Le=new wn(this.cy(),a);Le.size()>0&&(e?Le.emitAndNotify("remove"):t&&Le.emit("remove"));for(var Ie=0;Ie<_.length;Ie++){var Oe=_[Ie];(!t||!Oe.removed())&&Oe.updateStyle()}return Le},Zi.move=function(e){var t=this._private.cy,r=this,a=!1,i=!1,n=function(_){return null==_?_:""+_};if(void 0!==e.source||void 0!==e.target){var s=n(e.source),o=n(e.target),u=null!=s&&t.hasElementWithId(s),h=null!=o&&t.hasElementWithId(o);(u||h)&&(t.batch(function(){r.remove(a,i),r.emitAndNotify("moveout");for(var k=0;k<r.length;k++){var _=r[k],U=_._private.data;_.isEdge()&&(u&&(U.source=s),h&&(U.target=o))}r.restore(a,i)}),r.emitAndNotify("move"))}else if(void 0!==e.parent){var f=n(e.parent);if(null===f||t.hasElementWithId(f)){var x=null===f?void 0:f;t.batch(function(){var k=r.remove(a,i);k.emitAndNotify("moveout");for(var _=0;_<r.length;_++){var U=r[_],O=U._private.data;U.isNode()&&(O.parent=x)}k.restore(a,i)}),r.emitAndNotify("move")}}return this},[Th,Cg,Fo,vs,zs,Kg,Ko,e1,id,nd,{isNode:function(){return"nodes"===this.group()},isEdge:function(){return"edges"===this.group()},isLoop:function(){return this.isEdge()&&this.source()[0]===this.target()[0]},isSimple:function(){return this.isEdge()&&this.source()[0]!==this.target()[0]},group:function(){var t=this[0];if(t)return t._private.group}},$o,Yo,Sn,bs,Pn].forEach(function(e){H(Zi,e)});var f1={add:function(t){var r,a=this;if(ee(t)){var i=t;if(i._private.cy===a)r=i.restore();else{for(var n=[],s=0;s<i.length;s++)n.push(i[s].json());r=new wn(a,n)}}else if(dt(t))r=new wn(a,t);else if(Bt(t)&&(dt(t.nodes)||dt(t.edges))){for(var h=t,f=[],p=["nodes","edges"],x=0,k=p.length;x<k;x++){var _=p[x],U=h[_];if(dt(U))for(var O=0,K=U.length;O<K;O++){var $=H({group:_},U[O]);f.push($)}}r=new wn(a,f)}else r=new Hr(a,t).collection();return r},remove:function(t){return ee(t)||Xe(t)&&(t=this.$(t)),t.remove()}};
/*! Bezier curve function generator. Copyright Gaetan Renaudeau. MIT License: http://en.wikipedia.org/wiki/MIT_License */function g1(e,t,r,a){var h=.1,f=typeof Float32Array<"u";if(4!==arguments.length)return!1;for(var p=0;p<4;++p)if("number"!=typeof arguments[p]||isNaN(arguments[p])||!isFinite(arguments[p]))return!1;e=Math.min(e,1),r=Math.min(r,1),e=Math.max(e,0),r=Math.max(r,0);var x=f?new Float32Array(11):new Array(11);function k(Te,Le){return 1-3*Le+3*Te}function _(Te,Le){return 3*Le-6*Te}function U(Te){return 3*Te}function O(Te,Le,Ie){return((k(Le,Ie)*Te+_(Le,Ie))*Te+U(Le))*Te}function K(Te,Le,Ie){return 3*k(Le,Ie)*Te*Te+2*_(Le,Ie)*Te+U(Le)}var se=!1;var he=function(Le){return se||function Yt(){se=!0,(e!==t||r!==a)&&function q(){for(var Te=0;Te<11;++Te)x[Te]=O(Te*h,e,r)}()}(),e===t&&r===a?Le:0===Le?0:1===Le?1:O(function ae(Te){for(var Le=0,Ie=1;10!==Ie&&x[Ie]<=Te;++Ie)Le+=h;--Ie;var cr=Le+(Te-x[Ie])/(x[Ie+1]-x[Ie])*h,dr=K(cr,e,r);return dr>=.001?function $(Te,Le){for(var Ie=0;Ie<4;++Ie){var Oe=K(Le,e,r);if(0===Oe)return Le;Le-=(O(Le,e,r)-Te)/Oe}return Le}(Te,cr):0===dr?cr:function vt(Te,Le,Ie){var Oe,tr,cr=0;do{(Oe=O(tr=Le+(Ie-Le)/2,e,r)-Te)>0?Ie=tr:Le=tr}while(Math.abs(Oe)>1e-7&&++cr<10);return tr}(Te,Le,Le+h)}(Le),t,a)};he.getControlPoints=function(){return[{x:e,y:t},{x:r,y:a}]};var me="generateBezier("+[e,t,r,a]+")";return he.toString=function(){return me},he
/*! Runge-Kutta spring physics function generator. Adapted from Framer.js, copyright Koen Bok. MIT License: http://en.wikipedia.org/wiki/MIT_License */}var p1=function(){function e(a){return-a.tension*a.x-a.friction*a.v}function t(a,i,n){var s={x:a.x+n.dx*i,v:a.v+n.dv*i,tension:a.tension,friction:a.friction};return{dx:s.v,dv:e(s)}}function r(a,i){var n={dx:a.v,dv:e(a)},s=t(a,.5*i,n),o=t(a,.5*i,s),u=t(a,i,o),f=1/6*(n.dv+2*(s.dv+o.dv)+u.dv);return a.x=a.x+1/6*(n.dx+2*(s.dx+o.dx)+u.dx)*i,a.v=a.v+f*i,a}return function a(i,n,s){var x,k,_,o={x:-1,v:0,tension:null,friction:null},u=[0],h=0,f=1e-4;for(i=parseFloat(i)||500,n=parseFloat(n)||20,s=s||null,o.tension=i,o.friction=n,k=(x=null!==s)?(h=a(i,n))/s*.016:.016;_=r(_||o,k),u.push(1+_.x),h+=16,Math.abs(_.x)>f&&Math.abs(_.v)>f;);return x?function(U){return u[U*(u.length-1)|0]}:h}}(),Qi=function(t,r,a,i){var n=g1(t,r,a,i);return function(s,o,u){return s+(o-s)*n(u)}},qo={linear:function(t,r,a){return t+(r-t)*a},ease:Qi(.25,.1,.25,1),"ease-in":Qi(.42,0,1,1),"ease-out":Qi(0,0,.58,1),"ease-in-out":Qi(.42,0,.58,1),"ease-in-sine":Qi(.47,0,.745,.715),"ease-out-sine":Qi(.39,.575,.565,1),"ease-in-out-sine":Qi(.445,.05,.55,.95),"ease-in-quad":Qi(.55,.085,.68,.53),"ease-out-quad":Qi(.25,.46,.45,.94),"ease-in-out-quad":Qi(.455,.03,.515,.955),"ease-in-cubic":Qi(.55,.055,.675,.19),"ease-out-cubic":Qi(.215,.61,.355,1),"ease-in-out-cubic":Qi(.645,.045,.355,1),"ease-in-quart":Qi(.895,.03,.685,.22),"ease-out-quart":Qi(.165,.84,.44,1),"ease-in-out-quart":Qi(.77,0,.175,1),"ease-in-quint":Qi(.755,.05,.855,.06),"ease-out-quint":Qi(.23,1,.32,1),"ease-in-out-quint":Qi(.86,0,.07,1),"ease-in-expo":Qi(.95,.05,.795,.035),"ease-out-expo":Qi(.19,1,.22,1),"ease-in-out-expo":Qi(1,0,0,1),"ease-in-circ":Qi(.6,.04,.98,.335),"ease-out-circ":Qi(.075,.82,.165,1),"ease-in-out-circ":Qi(.785,.135,.15,.86),spring:function(t,r,a){if(0===a)return qo.linear;var i=p1(t,r,a);return function(n,s,o){return n+(s-n)*i(o)}},"cubic-bezier":Qi};function pd(e,t,r,a,i){if(1===a||t===r)return r;var n=i(t,r,a);return null==e||((e.roundValue||e.color)&&(n=Math.round(n)),void 0!==e.min&&(n=Math.max(n,e.min)),void 0!==e.max&&(n=Math.min(n,e.max))),n}function vd(e,t){return null!=e.pfValue||null!=e.value?null==e.pfValue||null!=t&&"%"===t.type.units?e.value:e.pfValue:e}function Hs(e,t,r,a,i){var n=null!=i?i.type:null;r<0?r=0:r>1&&(r=1);var s=vd(e,i),o=vd(t,i);if(X(s)&&X(o))return pd(n,s,o,r,a);if(dt(s)&&dt(o)){for(var u=[],h=0;h<o.length;h++){var f=s[h],p=o[h];if(null!=f&&null!=p){var x=pd(n,f,p,r,a);u.push(x)}else u.push(p)}return u}}function y1(e,t,r,a){var i=!a,n=e._private,s=t._private,o=s.easing,u=s.startTime,f=(a?e:e.cy()).style();if(!s.easingImpl)if(null==o)s.easingImpl=qo.linear;else{var p,k,_;p=Xe(o)?f.parse("transition-timing-function",o).value:o,Xe(p)?(k=p,_=[]):(k=p[1],_=p.slice(2).map(function(Vr){return+Vr})),_.length>0?("spring"===k&&_.push(s.duration),s.easingImpl=qo[k].apply(null,_)):s.easingImpl=qo[k]}var O,U=s.easingImpl;if(O=0===s.duration?1:(r-u)/s.duration,s.applying&&(O=s.progress),O<0?O=0:O>1&&(O=1),null==s.delay){var K=s.startPosition,$=s.position;if($&&i&&!e.locked()){var q={};ho(K.x,$.x)&&(q.x=Hs(K.x,$.x,O,U)),ho(K.y,$.y)&&(q.y=Hs(K.y,$.y,O,U)),e.position(q)}var vt=s.startPan,ae=s.pan,se=n.pan,Yt=null!=ae&&a;Yt&&(ho(vt.x,ae.x)&&(se.x=Hs(vt.x,ae.x,O,U)),ho(vt.y,ae.y)&&(se.y=Hs(vt.y,ae.y,O,U)),e.emit("pan"));var he=s.startZoom,me=s.zoom,Te=null!=me&&a;Te&&(ho(he,me)&&(n.zoom=Xt(n.minZoom,Hs(he,me,O,U),n.maxZoom)),e.emit("zoom")),(Yt||Te)&&e.emit("viewport");var Le=s.style;if(Le&&Le.length>0&&i){for(var Ie=0;Ie<Le.length;Ie++){var Oe=Le[Ie],tr=Oe.name,dr=s.startStyle[tr],Cr=Hs(dr,Oe,O,U,f.properties[dr.name]);f.overrideBypass(e,tr,Cr)}e.emit("style")}}return s.progress=O,O}function ho(e,t){return!!(null!=e&&null!=t&&(X(e)&&X(t)||e&&t))}function m1(e,t,r,a){var i=t._private;i.started=!0,i.startTime=r-i.progress*i.duration}function yd(e,t){var r=t._private.aniEles,a=[];function i(f,p){var x=f._private,k=x.animation.current,_=x.animation.queue,U=!1;if(0===k.length){var O=_.shift();O&&k.push(O)}for(var K=function(se){for(var Yt=se.length-1;Yt>=0;Yt--)(0,se[Yt])();se.splice(0,se.length)},$=k.length-1;$>=0;$--){var q=k[$],vt=q._private;vt.stopped?(k.splice($,1),vt.hooked=!1,vt.playing=!1,vt.started=!1,K(vt.frames)):!vt.playing&&!vt.applying||(vt.playing&&vt.applying&&(vt.applying=!1),vt.started||m1(0,q,e),y1(f,q,e,p),vt.applying&&(vt.applying=!1),K(vt.frames),null!=vt.step&&vt.step(e),q.completed()&&(k.splice($,1),vt.hooked=!1,vt.playing=!1,vt.started=!1,K(vt.completes)),U=!0)}return!p&&0===k.length&&0===_.length&&a.push(f),U}for(var n=!1,s=0;s<r.length;s++){var u=i(r[s]);n=n||u}var h=i(t,!0);(n||h)&&(r.length>0?t.notify("draw",r):t.notify("draw")),r.unmerge(a),t.emit("step")}var x1={animate:$i.animate(),animation:$i.animation(),animated:$i.animated(),clearQueue:$i.clearQueue(),delay:$i.delay(),delayAnimation:$i.delayAnimation(),stop:$i.stop(),addToAnimationPool:function(t){this.styleEnabled()&&this._private.aniEles.merge(t)},stopAnimationLoop:function(){this._private.animationsRunning=!1},startAnimationLoop:function(){var t=this;if(t._private.animationsRunning=!0,t.styleEnabled()){var a=t.renderer();a&&a.beforeRender?a.beforeRender(function(n,s){yd(s,t)},a.beforeRenderPriorities.animations):function r(){t._private.animationsRunning&&ha(function(n){yd(n,t),r()})}()}}},b1={qualifierCompare:function(t,r){return null==t||null==r?null==t&&null==r:t.sameText(r)},eventMatches:function(t,r,a){var i=r.qualifier;return null==i||t!==a.target&&Rt(a.target)&&i.matches(a.target)},addEventFields:function(t,r){r.cy=t,r.target=t},callbackContext:function(t,r,a){return null!=r.qualifier?a.target:t}},jo=function(t){return Xe(t)?new gs(t):t},md={createEmitter:function(){var t=this._private;return t.emitter||(t.emitter=new Vo(b1,this)),this},emitter:function(){return this._private.emitter},on:function(t,r,a){return this.emitter().on(t,jo(r),a),this},removeListener:function(t,r,a){return this.emitter().removeListener(t,jo(r),a),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},one:function(t,r,a){return this.emitter().one(t,jo(r),a),this},once:function(t,r,a){return this.emitter().one(t,jo(r),a),this},emit:function(t,r){return this.emitter().emit(t,r),this},emitAndNotify:function(t,r){return this.emit(t),this.notify(t,r),this}};$i.eventAliasesOn(md);var Rc={png:function(t){return this._private.renderer.png(t=t||{})},jpg:function(t){var r=this._private.renderer;return(t=t||{}).bg=t.bg||"#fff",r.jpg(t)}};Rc.jpeg=Rc.jpg;var Xo={layout:function(t){var r=this;if(null!=t)if(null!=t.name){var n,a=t.name,i=r.extension("layout",a);if(null!=i)return n=Xe(t.eles)?r.$(t.eles):null!=t.eles?t.eles:r.$(),new i(H({},t,{cy:r,eles:n}));Ka("No such layout `"+a+"` found.  Did you forget to import it and `cytoscape.use()` it?")}else Ka("A `name` must be specified to make a layout");else Ka("Layout options must be specified to make a layout")}};Xo.createLayout=Xo.makeLayout=Xo.layout;var _1={notify:function(t,r){var a=this._private;if(this.batching()){a.batchNotifications=a.batchNotifications||{};var i=a.batchNotifications[t]=a.batchNotifications[t]||this.collection();null!=r&&i.merge(r)}else if(a.notificationsEnabled){var n=this.renderer();this.destroyed()||!n||n.notify(t,r)}},notifications:function(t){var r=this._private;return void 0===t?r.notificationsEnabled:(r.notificationsEnabled=!!t,this)},noNotifications:function(t){this.notifications(!1),t(),this.notifications(!0)},batching:function(){return this._private.batchCount>0},startBatch:function(){var t=this._private;return null==t.batchCount&&(t.batchCount=0),0===t.batchCount&&(t.batchStyleEles=this.collection(),t.batchNotifications={}),t.batchCount++,this},endBatch:function(){var t=this._private;if(0===t.batchCount)return this;if(t.batchCount--,0===t.batchCount){t.batchStyleEles.updateStyle();var r=this.renderer();Object.keys(t.batchNotifications).forEach(function(a){var i=t.batchNotifications[a];i.empty()?r.notify(a):r.notify(a,i)})}return this},batch:function(t){return this.startBatch(),t(),this.endBatch(),this},batchData:function(t){var r=this;return this.batch(function(){for(var a=Object.keys(t),i=0;i<a.length;i++){var n=a[i],s=t[n];r.getElementById(n).data(s)}})}},E1=Ne({hideEdgesOnViewport:!1,textureOnViewport:!1,motionBlur:!1,motionBlurOpacity:.05,pixelRatio:void 0,desktopTapThreshold:4,touchTapThreshold:8,wheelSensitivity:1,debug:!1,showFps:!1,webgl:!1,webglDebug:!1,webglDebugShowAtlases:!1,webglTexSize:2048,webglTexRows:36,webglTexRowsNodes:18,webglBatchSize:2048,webglTexPerBatch:14,webglBgColor:[255,255,255]}),Pc={renderTo:function(t,r,a,i){return this._private.renderer.renderTo(t,r,a,i),this},renderer:function(){return this._private.renderer},forceRender:function(){return this.notify("draw"),this},resize:function(){return this.invalidateSize(),this.emitAndNotify("resize"),this},initRenderer:function(t){var r=this,a=r.extension("renderer",t.name);if(null!=a){void 0!==t.wheelSensitivity&&_a("You have set a custom wheel sensitivity.  This will make your app zoom unnaturally when using mainstream mice.  You should change this value from the default only if you can guarantee that all your users will use the same hardware and OS configuration as your current machine.");var i=E1(t);i.cy=r,r._private.renderer=new a(i),this.notify("init")}else Ka("Can not initialise: No such renderer `".concat(t.name,"` found. Did you forget to import it and `cytoscape.use()` it?"))},destroyRenderer:function(){var t=this;t.notify("destroy");var r=t.container();if(r)for(r._cyreg=null;r.childNodes.length>0;)r.removeChild(r.childNodes[0]);t._private.renderer=null,t.mutableElements().forEach(function(a){var i=a._private;i.rscratch={},i.rstyle={},i.animation.current=[],i.animation.queue=[]})},onRender:function(t){return this.on("render",t)},offRender:function(t){return this.off("render",t)}};Pc.invalidateDimensions=Pc.resize;var Zo={collection:function(t,r){return Xe(t)?this.$(t):ee(t)?t.collection():dt(t)?(r||(r={}),new wn(this,t,r.unique,r.removed)):new wn(this)},nodes:function(t){var r=this.$(function(a){return a.isNode()});return t?r.filter(t):r},edges:function(t){var r=this.$(function(a){return a.isEdge()});return t?r.filter(t):r},$:function(t){var r=this._private.elements;return t?r.filter(t):r.spawnSelf()},mutableElements:function(){return this._private.elements}};Zo.elements=Zo.filter=Zo.$;var _n={apply:function(e){for(var t=this,i=t._private.cy.collection(),n=0;n<e.length;n++){var s=e[n],o=t.getContextMeta(s);if(!o.empty){var u=t.getContextStyle(o),h=t.applyContextStyle(o,u,s);s._private.appliedInitStyle?t.updateTransitions(s,h.diffProps):s._private.appliedInitStyle=!0,t.updateStyleHints(s)&&i.push(s)}}return i},getPropertiesDiff:function(e,t){var r=this,a=r._private.propDiffs=r._private.propDiffs||{},i=e+"-"+t,n=a[i];if(n)return n;for(var s=[],o={},u=0;u<r.length;u++){var h=r[u],p="t"===t[u],x="t"===e[u]!==p,k=h.mappedProperties.length>0;if(x||p&&k){var _=void 0;x&&k||x?_=h.properties:k&&(_=h.mappedProperties);for(var U=0;U<_.length;U++){for(var O=_[U],K=O.name,$=!1,q=u+1;q<r.length&&("t"!==t[q]||!($=null!=r[q].properties[O.name]));q++);!o[K]&&!$&&(o[K]=!0,s.push(K))}}}return a[i]=s,s},getContextMeta:function(e){for(var a,t=this,r="",i=e._private.styleCxtKey||"",n=0;n<t.length;n++){var s=t[n];r+=s.selector&&s.selector.matches(e)?"t":"f"}return a=t.getPropertiesDiff(i,r),e._private.styleCxtKey=r,{key:r,diffPropNames:a,empty:0===a.length}},getContextStyle:function(e){var t=e.key,a=this._private.contextStyles=this._private.contextStyles||{};if(a[t])return a[t];for(var i={_private:{key:t}},n=0;n<this.length;n++){var s=this[n];if("t"===t[n])for(var u=0;u<s.properties.length;u++){var h=s.properties[u];i[h.name]=h}}return a[t]=i,i},applyContextStyle:function(e,t,r){for(var i=e.diffPropNames,n={},s=this.types,o=0;o<i.length;o++){var u=i[o],h=t[u],f=r.pstyle(u);if(!h){if(!f)continue;h=f.bypass?{name:u,deleteBypassed:!0}:{name:u,delete:!0}}if(f!==h){if(h.mapped===s.fn&&null!=f&&null!=f.mapping&&f.mapping.value===h.value){var p=f.mapping;if((p.fnValue=h.value(r))===p.prevFnValue)continue}var k=n[u]={prev:f};this.applyParsedProperty(r,h),k.next=r.pstyle(u),k.next&&k.next.bypass&&(k.next=k.next.bypassed)}}return{diffProps:n}},updateStyleHints:function(e){var a,t=e._private,r=this,i=r.propertyGroupKeys,n=function(Zr,ma,Ga){return r.getPropertiesHash(Zr,ma,Ga)},s=t.styleKey;if(e.removed())return!1;var o="nodes"===t.group,u=e._private.style;a=Object.keys(u);for(var h=0;h<i.length;h++)t.styleKeys[i[h]]=[jr,or];for(var p=function(Zr,ma){return t.styleKeys[ma][0]=W(Zr,t.styleKeys[ma][0])},x=function(Zr,ma){return t.styleKeys[ma][1]=$t(Zr,t.styleKeys[ma][1])},k=function(Zr,ma){p(Zr,ma),x(Zr,ma)},_=function(Zr,ma){for(var Ga=0;Ga<Zr.length;Ga++){var li=Zr.charCodeAt(Ga);p(li,ma),x(li,ma)}},O=function(Zr){return-128<Zr&&Zr<128&&Math.floor(Zr)!==Zr?2e9-(1024*Zr|0):Zr},K=0;K<a.length;K++){var $=a[K],q=u[$];if(null!=q){var vt=this.properties[$],ae=vt.type,se=vt.groupKey,Yt=void 0;null!=vt.hashOverride?Yt=vt.hashOverride(e,q):null!=q.pfValue&&(Yt=q.pfValue);var he=null==vt.enums?q.value:null,me=null!=Yt,Ie=q.units;!ae.number||!me&&null==he||ae.multiple?_(q.strValue,se):(k(O(me?Yt:he),se),!me&&null!=Ie&&_(Ie,se))}}for(var tr=[jr,or],cr=0;cr<i.length;cr++){var rr=t.styleKeys[i[cr]];tr[0]=W(rr[0],tr[0]),tr[1]=$t(rr[1],tr[1])}t.styleKey=function(t,r){return 2097152*t+r}(tr[0],tr[1]);var Cr=t.styleKeys;t.labelDimsKey=Fe(Cr.labelDimensions);var Vr=n(e,["label"],Cr.labelDimensions);if(t.labelKey=Fe(Vr),t.labelStyleKey=Fe(Tr(Cr.commonLabel,Vr)),!o){var qr=n(e,["source-label"],Cr.labelDimensions);t.sourceLabelKey=Fe(qr),t.sourceLabelStyleKey=Fe(Tr(Cr.commonLabel,qr));var Ar=n(e,["target-label"],Cr.labelDimensions);t.targetLabelKey=Fe(Ar),t.targetLabelStyleKey=Fe(Tr(Cr.commonLabel,Ar))}if(o){var Fr=t.styleKeys,Za=Fr.pie,Ta=Fr.stripe,Nr=[Fr.nodeBody,Fr.nodeBorder,Fr.nodeOutline,Fr.backgroundImage,Fr.compound,Za,Ta].filter(function(Ur){return null!=Ur}).reduce(Tr,[jr,or]);t.nodeKey=Fe(Nr),t.hasPie=null!=Za&&Za[0]!==jr&&Za[1]!==or,t.hasStripe=null!=Ta&&Ta[0]!==jr&&Ta[1]!==or}return s!==t.styleKey},clearStyleHints:function(e){var t=e._private;t.styleCxtKey="",t.styleKeys={},t.styleKey=null,t.labelKey=null,t.labelStyleKey=null,t.sourceLabelKey=null,t.sourceLabelStyleKey=null,t.targetLabelKey=null,t.targetLabelStyleKey=null,t.nodeKey=null,t.hasPie=null,t.hasStripe=null},applyParsedProperty:function(e,t){var n,r=this,a=t,i=e._private.style,s=r.types,o=r.properties[a.name].type,u=a.bypass,h=i[a.name],f=h&&h.bypass,p=e._private,x="mapping",k=function(ga){return null==ga?null:null!=ga.pfValue?ga.pfValue:ga.value},_=function(){var ga=k(h),Ea=k(a);r.checkTriggers(e,a.name,ga,Ea)};if("curve-style"===t.name&&e.isEdge()&&("bezier"!==t.value&&e.isLoop()||"haystack"===t.value&&(e.source().isParent()||e.target().isParent()))&&(a=t=this.parse(t.name,"bezier",u)),a.delete)return i[a.name]=void 0,_(),!0;if(a.deleteBypassed)return h?!!h.bypass&&(h.bypassed=void 0,_(),!0):(_(),!0);if(a.deleteBypass)return h?!!h.bypass&&(i[a.name]=h.bypassed,_(),!0):(_(),!0);var U=function(){_a("Do not assign mappings to elements without corresponding data (i.e. ele `"+e.id()+"` has no mapping for property `"+a.name+"` with data field `"+a.field+"`); try a `["+a.field+"]` selector to limit scope to elements with `"+a.field+"` defined")};switch(a.mapped){case s.mapData:for(var O=a.field.split("."),K=p.data,$=0;$<O.length&&K;$++)K=K[O[$]];if(null==K)return U(),!1;var vt;if(!X(K))return _a("Do not use continuous mappers without specifying numeric data (i.e. `"+a.field+": "+K+"` for `"+e.id()+"` is non-numeric)"),!1;var ae=a.fieldMax-a.fieldMin;if((vt=0===ae?0:(K-a.fieldMin)/ae)<0?vt=0:vt>1&&(vt=1),o.color){var se=a.valueMin[0],he=a.valueMin[1],me=a.valueMax[1],Te=a.valueMin[2],Le=a.valueMax[2],Ie=null==a.valueMin[3]?1:a.valueMin[3],Oe=null==a.valueMax[3]?1:a.valueMax[3],tr=[Math.round(se+(a.valueMax[0]-se)*vt),Math.round(he+(me-he)*vt),Math.round(Te+(Le-Te)*vt),Math.round(Ie+(Oe-Ie)*vt)];n={bypass:a.bypass,name:a.name,value:tr,strValue:"rgb("+tr[0]+", "+tr[1]+", "+tr[2]+")"}}else{if(!o.number)return!1;n=this.parse(a.name,a.valueMin+(a.valueMax-a.valueMin)*vt,a.bypass,x)}if(!n)return U(),!1;n.mapping=a,a=n;break;case s.data:for(var dr=a.field.split("."),rr=p.data,Cr=0;Cr<dr.length&&rr;Cr++)rr=rr[dr[Cr]];if(null!=rr&&(n=this.parse(a.name,rr,a.bypass,x)),!n)return U(),!1;n.mapping=a,a=n;break;case s.fn:var Ar=null!=a.fnValue?a.fnValue:(0,a.value)(e);if(a.prevFnValue=Ar,null==Ar)return _a("Custom function mappers may not return null (i.e. `"+a.name+"` for ele `"+e.id()+"` is null)"),!1;if(!(n=this.parse(a.name,Ar,a.bypass,x)))return _a("Custom function mappers may not return invalid values for the property type (i.e. `"+a.name+"` for ele `"+e.id()+"` is invalid)"),!1;n.mapping=Ha(a),a=n;break;case void 0:break;default:return!1}return u?(a.bypassed=f?h.bypassed:h,i[a.name]=a):f?h.bypassed=a:i[a.name]=a,_(),!0},cleanElements:function(e,t){for(var r=0;r<e.length;r++){var a=e[r];if(this.clearStyleHints(a),a.dirtyCompoundBoundsCache(),a.dirtyBoundingBoxCache(),t)for(var i=a._private.style,n=Object.keys(i),s=0;s<n.length;s++){var o=n[s],u=i[o];null!=u&&(u.bypass?u.bypassed=null:i[o]=null)}else a._private.style={}}},update:function(){this._private.cy.mutableElements().updateStyle()},updateTransitions:function(e,t){var r=this,a=e._private,i=e.pstyle("transition-property").value,n=e.pstyle("transition-duration").pfValue,s=e.pstyle("transition-delay").pfValue;if(i.length>0&&n>0){for(var o={},u=!1,h=0;h<i.length;h++){var f=i[h],p=e.pstyle(f),x=t[f];if(x){var _=x.prev,U=null!=x.next?x.next:p,O=!1,K=void 0,$=1e-6;_&&(X(_.pfValue)&&X(U.pfValue)?K=_.pfValue+$*(O=U.pfValue-_.pfValue):X(_.value)&&X(U.value)?K=_.value+$*(O=U.value-_.value):dt(_.value)&&dt(U.value)&&(O=_.value[0]!==U.value[0]||_.value[1]!==U.value[1]||_.value[2]!==U.value[2],K=_.strValue),O&&(o[f]=U.strValue,this.applyBypass(e,f,K),u=!0))}}if(!u)return;a.transitioning=!0,new Ks(function(q){s>0?e.delayAnimation(s).play().promise().then(q):q()}).then(function(){return e.animation({style:o,duration:n,easing:e.pstyle("transition-timing-function").value,queue:!1}).play().promise()}).then(function(){r.removeBypasses(e,i),e.emitAndNotify("style"),a.transitioning=!1})}else a.transitioning&&(this.removeBypasses(e,i),e.emitAndNotify("style"),a.transitioning=!1)},checkTrigger:function(e,t,r,a,i,n){var s=this.properties[t],o=i(s);e.removed()||null!=o&&o(r,a,e)&&n(s)},checkZOrderTrigger:function(e,t,r,a){var i=this;this.checkTrigger(e,t,r,a,function(n){return n.triggersZOrder},function(){i._private.cy.notify("zorder",e)})},checkBoundsTrigger:function(e,t,r,a){this.checkTrigger(e,t,r,a,function(i){return i.triggersBounds},function(i){e.dirtyCompoundBoundsCache(),e.dirtyBoundingBoxCache()})},checkConnectedEdgesBoundsTrigger:function(e,t,r,a){this.checkTrigger(e,t,r,a,function(i){return i.triggersBoundsOfConnectedEdges},function(i){e.connectedEdges().forEach(function(n){n.dirtyBoundingBoxCache()})})},checkParallelEdgesBoundsTrigger:function(e,t,r,a){this.checkTrigger(e,t,r,a,function(i){return i.triggersBoundsOfParallelEdges},function(i){e.parallelEdges().forEach(function(n){n.dirtyBoundingBoxCache()})})},checkTriggers:function(e,t,r,a){e.dirtyStyleCache(),this.checkZOrderTrigger(e,t,r,a),this.checkBoundsTrigger(e,t,r,a),this.checkConnectedEdgesBoundsTrigger(e,t,r,a),this.checkParallelEdgesBoundsTrigger(e,t,r,a)}},fo={applyBypass:function(e,t,r,a){var n=[];if("*"===t||"**"===t){if(void 0!==r)for(var o=0;o<this.properties.length;o++){var f=this.parse(this.properties[o].name,r,!0);f&&n.push(f)}}else if(Xe(t)){var p=this.parse(t,r,!0);p&&n.push(p)}else{if(!Bt(t))return!1;var x=t;a=r;for(var k=Object.keys(x),_=0;_<k.length;_++){var U=k[_],O=x[U];if(void 0===O&&(O=x[qe(U)]),void 0!==O){var K=this.parse(U,O,!0);K&&n.push(K)}}}if(0===n.length)return!1;for(var $=!1,q=0;q<e.length;q++){for(var vt=e[q],ae={},se=void 0,Yt=0;Yt<n.length;Yt++){var he=n[Yt];if(a){var me=vt.pstyle(he.name);se=ae[he.name]={prev:me}}$=this.applyParsedProperty(vt,Ha(he))||$,a&&(se.next=vt.pstyle(he.name))}$&&this.updateStyleHints(vt),a&&this.updateTransitions(vt,ae,!0)}return $},overrideBypass:function(e,t,r){t=oe(t);for(var a=0;a<e.length;a++){var i=e[a],n=i._private.style[t],s=this.properties[t].type,o=s.color,u=s.mutiple,h=n?null!=n.pfValue?n.pfValue:n.value:null;n&&n.bypass?(n.value=r,null!=n.pfValue&&(n.pfValue=r),n.strValue=o?"rgb("+r.join(",")+")":u?r.join(" "):""+r,this.updateStyleHints(i)):this.applyBypass(i,t,r),this.checkTriggers(i,t,h,r)}},removeAllBypasses:function(e,t){return this.removeBypasses(e,this.propertyNames,t)},removeBypasses:function(e,t,r){for(var i=0;i<e.length;i++){for(var n=e[i],s={},o=0;o<t.length;o++){var u=t[o],h=this.properties[u],f=n.pstyle(h.name);if(f&&f.bypass){var x=this.parse(u,"",!0),k=s[h.name]={prev:f};this.applyParsedProperty(n,x),k.next=n.pstyle(h.name)}}this.updateStyleHints(n),r&&this.updateTransitions(n,s,!0)}}},Mc={getEmSizeInPixels:function(){var e=this.containerCss("font-size");return null!=e?parseFloat(e):1},containerCss:function(e){var t=this._private.cy,r=t.container(),a=t.window();if(a&&r&&a.getComputedStyle)return a.getComputedStyle(r).getPropertyValue(e)}},es={getRenderedStyle:function(e,t){return t?this.getStylePropertyValue(e,t,!0):this.getRawStyle(e,!0)},getRawStyle:function(e,t){var r=this;if(e=e[0]){for(var a={},i=0;i<r.properties.length;i++){var n=r.properties[i],s=r.getStylePropertyValue(e,n.name,t);null!=s&&(a[n.name]=s,a[qe(n.name)]=s)}return a}},getIndexedStyle:function(e,t,r,a){return e.pstyle(t)[r][a]??e.cy().style().getDefaultProperty(t)[r][0]},getStylePropertyValue:function(e,t,r){if(e=e[0]){var i=this.properties[t];i.alias&&(i=i.pointsTo);var n=i.type,s=e.pstyle(i.name);if(s){var o=s.value,u=s.units,h=s.strValue;if(r&&n.number&&null!=o&&X(o)){var f=e.cy().zoom(),p=function(O){return O*f},x=function(O,K){return p(O)+K},k=dt(o);return(k?u.every(function(U){return null!=U}):null!=u)?k?o.map(function(U,O){return x(U,u[O])}).join(" "):x(o,u):k?o.map(function(U){return Xe(U)?U:""+p(U)}).join(" "):""+p(o)}if(null!=h)return h}return null}},getAnimationStartStyle:function(e,t){for(var r={},a=0;a<t.length;a++){var n=t[a].name,s=e.pstyle(n);void 0!==s&&(s=Bt(s)?this.parse(n,s.strValue):this.parse(n,s)),s&&(r[n]=s)}return r},getPropsList:function(e){var r=[],a=e,i=this.properties;if(a)for(var n=Object.keys(a),s=0;s<n.length;s++){var o=n[s],u=a[o],h=i[o]||i[oe(o)],f=this.parse(h.name,u);f&&r.push(f)}return r},getNonDefaultPropertiesHash:function(e,t,r){var n,s,o,u,h,a=r.slice();for(u=0;u<t.length;u++)if(null!=(n=e.pstyle(t[u],!1)))if(null!=n.pfValue)a[0]=W(o,a[0]),a[1]=$t(o,a[1]);else for(s=n.strValue,h=0;h<s.length;h++)o=s.charCodeAt(h),a[0]=W(o,a[0]),a[1]=$t(o,a[1]);return a}};es.getPropertiesHash=es.getNonDefaultPropertiesHash;var Qo={appendFromJson:function(e){for(var t=this,r=0;r<e.length;r++){var a=e[r],i=a.selector,n=a.style||a.css,s=Object.keys(n);t.selector(i);for(var o=0;o<s.length;o++){var u=s[o];t.css(u,n[u])}}return t},fromJson:function(e){var t=this;return t.resetToDefault(),t.appendFromJson(e),t},json:function(){for(var e=[],t=this.defaultLength;t<this.length;t++){for(var r=this[t],a=r.selector,i=r.properties,n={},s=0;s<i.length;s++){var o=i[s];n[o.name]=o.strValue}e.push({selector:a?a.toString():"core",style:n})}return e}},Ic={appendFromString:function(e){var i,n,s,r=this,a=""+e;function o(){a=a.length>i.length?a.substr(i.length):""}function u(){n=n.length>s.length?n.substr(s.length):""}for(a=a.replace(/[/][*](\s|.)+?[*][/]/g,"");!a.match(/^\s*$/);){var f=a.match(/^\s*((?:.|\s)+?)\s*\{((?:.|\s)+?)\}/);if(!f){_a("Halting stylesheet parsing: String stylesheet contains more to parse but no selector and block found in: "+a);break}i=f[0];var p=f[1];if("core"!==p&&new gs(p).invalid)_a("Skipping parsing of block: Invalid selector found in string stylesheet: "+p),o();else{var k=f[2],_=!1;n=k;for(var U=[];!n.match(/^\s*$/);){var K=n.match(/^\s*(.+?)\s*:\s*(.+?)(?:\s*;|\s*$)/);if(!K){_a("Skipping parsing of block: Invalid formatting of style property and value definitions found in:"+k),_=!0;break}s=K[0];var $=K[1],q=K[2];this.properties[$]?r.parse($,q)?(U.push({name:$,val:q}),u()):(_a("Skipping property: Invalid property definition in: "+s),u()):(_a("Skipping property: Invalid property name in: "+s),u())}if(_){o();break}r.selector(p);for(var se=0;se<U.length;se++){var Yt=U[se];r.css(Yt.name,Yt.val)}o()}}return r},fromString:function(e){var t=this;return t.resetToDefault(),t.appendFromString(e),t}},dn={};(function(){var e=B,t=et,r=it,n=function(Ur){return"^"+Ur+"\\s*\\(\\s*([\\w\\.]+)\\s*\\)$"},s=function(Ur){var Zr=e+"|\\w+|"+t+"|"+r+"|\\#[0-9a-fA-F]{3}|\\#[0-9a-fA-F]{6}";return"^"+Ur+"\\s*\\(([\\w\\.]+)\\s*\\,\\s*("+e+")\\s*\\,\\s*("+e+")\\s*,\\s*("+Zr+")\\s*\\,\\s*("+Zr+")\\)$"},o=["^url\\s*\\(\\s*['\"]?(.+?)['\"]?\\s*\\)$","^(none)$","^(.+)$"];dn.types={time:{number:!0,min:0,units:"s|ms",implicitUnits:"ms"},percent:{number:!0,min:0,max:100,units:"%",implicitUnits:"%"},percentages:{number:!0,min:0,max:100,units:"%",implicitUnits:"%",multiple:!0},zeroOneNumber:{number:!0,min:0,max:1,unitless:!0},zeroOneNumbers:{number:!0,min:0,max:1,unitless:!0,multiple:!0},nOneOneNumber:{number:!0,min:-1,max:1,unitless:!0},nonNegativeInt:{number:!0,min:0,integer:!0,unitless:!0},nonNegativeNumber:{number:!0,min:0,unitless:!0},position:{enums:["parent","origin"]},nodeSize:{number:!0,min:0,enums:["label"]},number:{number:!0,unitless:!0},numbers:{number:!0,unitless:!0,multiple:!0},positiveNumber:{number:!0,unitless:!0,min:0,strictMin:!0},size:{number:!0,min:0},bidirectionalSize:{number:!0},bidirectionalSizeMaybePercent:{number:!0,allowPercent:!0},bidirectionalSizes:{number:!0,multiple:!0},sizeMaybePercent:{number:!0,min:0,allowPercent:!0},axisDirection:{enums:["horizontal","leftward","rightward","vertical","upward","downward","auto"]},axisDirectionExplicit:{enums:["leftward","rightward","upward","downward"]},axisDirectionPrimary:{enums:["horizontal","vertical"]},paddingRelativeTo:{enums:["width","height","average","min","max"]},bgWH:{number:!0,min:0,allowPercent:!0,enums:["auto"],multiple:!0},bgPos:{number:!0,allowPercent:!0,multiple:!0},bgRelativeTo:{enums:["inner","include-padding"],multiple:!0},bgRepeat:{enums:["repeat","repeat-x","repeat-y","no-repeat"],multiple:!0},bgFit:{enums:["none","contain","cover"],multiple:!0},bgCrossOrigin:{enums:["anonymous","use-credentials","null"],multiple:!0},bgClip:{enums:["none","node"],multiple:!0},bgContainment:{enums:["inside","over"],multiple:!0},boxSelection:{enums:["contain","overlap","none"]},color:{color:!0},colors:{color:!0,multiple:!0},fill:{enums:["solid","linear-gradient","radial-gradient"]},bool:{enums:["yes","no"]},bools:{enums:["yes","no"],multiple:!0},lineStyle:{enums:["solid","dotted","dashed"]},lineCap:{enums:["butt","round","square"]},linePosition:{enums:["center","inside","outside"]},lineJoin:{enums:["round","bevel","miter"]},borderStyle:{enums:["solid","dotted","dashed","double"]},curveStyle:{enums:["bezier","unbundled-bezier","haystack","segments","straight","straight-triangle","taxi","round-segments","round-taxi"]},radiusType:{enums:["arc-radius","influence-radius"],multiple:!0},fontFamily:{regex:'^([\\w- \\"]+(?:\\s*,\\s*[\\w- \\"]+)*)$'},fontStyle:{enums:["italic","normal","oblique"]},fontWeight:{enums:["normal","bold","bolder","lighter","100","200","300","400","500","600","800","900",100,200,300,400,500,600,700,800,900]},textDecoration:{enums:["none","underline","overline","line-through"]},textTransform:{enums:["none","uppercase","lowercase"]},textWrap:{enums:["none","wrap","ellipsis"]},textOverflowWrap:{enums:["whitespace","anywhere"]},textBackgroundShape:{enums:["rectangle","roundrectangle","round-rectangle","circle"]},nodeShape:{enums:["rectangle","roundrectangle","round-rectangle","cutrectangle","cut-rectangle","bottomroundrectangle","bottom-round-rectangle","barrel","ellipse","triangle","round-triangle","square","pentagon","round-pentagon","hexagon","round-hexagon","concavehexagon","concave-hexagon","heptagon","round-heptagon","octagon","round-octagon","tag","round-tag","star","diamond","round-diamond","vee","rhomboid","right-rhomboid","polygon"]},overlayShape:{enums:["roundrectangle","round-rectangle","ellipse"]},cornerRadius:{number:!0,min:0,units:"px|em",implicitUnits:"px",enums:["auto"]},compoundIncludeLabels:{enums:["include","exclude"]},arrowShape:{enums:["tee","triangle","triangle-tee","circle-triangle","triangle-cross","triangle-backcurve","vee","square","circle","diamond","chevron","none"]},arrowFill:{enums:["filled","hollow"]},arrowWidth:{number:!0,units:"%|px|em",implicitUnits:"px",enums:["match-line"]},display:{enums:["element","none"]},visibility:{enums:["hidden","visible"]},zCompoundDepth:{enums:["bottom","orphan","auto","top"]},zIndexCompare:{enums:["auto","manual"]},valign:{enums:["top","center","bottom"]},halign:{enums:["left","center","right"]},justification:{enums:["left","center","right","auto"]},text:{string:!0},data:{mapping:!0,regex:n("data")},layoutData:{mapping:!0,regex:n("layoutData")},scratch:{mapping:!0,regex:n("scratch")},mapData:{mapping:!0,regex:s("mapData")},mapLayoutData:{mapping:!0,regex:s("mapLayoutData")},mapScratch:{mapping:!0,regex:s("mapScratch")},fn:{mapping:!0,fn:!0},url:{regexes:o,singleRegexMatchValue:!0},urls:{regexes:o,singleRegexMatchValue:!0,multiple:!0},propList:{propList:!0},angle:{number:!0,units:"deg|rad",implicitUnits:"rad"},textRotation:{number:!0,units:"deg|rad",implicitUnits:"rad",enums:["none","autorotate"]},polygonPointList:{number:!0,multiple:!0,evenMultiple:!0,min:-1,max:1,unitless:!0},edgeDistances:{enums:["intersection","node-position","endpoints"]},edgeEndpoint:{number:!0,multiple:!0,units:"%|px|em|deg|rad",implicitUnits:"px",enums:["inside-to-node","outside-to-node","outside-to-node-or-label","outside-to-line","outside-to-line-or-label"],singleEnum:!0,validate:function(Ur,Zr){switch(Ur.length){case 2:return"deg"!==Zr[0]&&"rad"!==Zr[0]&&"deg"!==Zr[1]&&"rad"!==Zr[1];case 1:return Xe(Ur[0])||"deg"===Zr[0]||"rad"===Zr[0];default:return!1}}},easing:{regexes:["^(spring)\\s*\\(\\s*("+e+")\\s*,\\s*("+e+")\\s*\\)$","^(cubic-bezier)\\s*\\(\\s*("+e+")\\s*,\\s*("+e+")\\s*,\\s*("+e+")\\s*,\\s*("+e+")\\s*\\)$"],enums:["linear","ease","ease-in","ease-out","ease-in-out","ease-in-sine","ease-out-sine","ease-in-out-sine","ease-in-quad","ease-out-quad","ease-in-out-quad","ease-in-cubic","ease-out-cubic","ease-in-out-cubic","ease-in-quart","ease-out-quart","ease-in-out-quart","ease-in-quint","ease-out-quint","ease-in-out-quint","ease-in-expo","ease-out-expo","ease-in-out-expo","ease-in-circ","ease-out-circ","ease-in-out-circ"]},gradientDirection:{enums:["to-bottom","to-top","to-left","to-right","to-bottom-right","to-bottom-left","to-top-right","to-top-left","to-right-bottom","to-left-bottom","to-right-top","to-left-top"]},boundsExpansion:{number:!0,multiple:!0,min:0,validate:function(Ur){var Zr=Ur.length;return 1===Zr||2===Zr||4===Zr}}};var u={zeroNonZero:function(Ur,Zr){return(null==Ur||null==Zr)&&Ur!==Zr||0==Ur&&0!=Zr||0!=Ur&&0==Zr},any:function(Ur,Zr){return Ur!=Zr},emptyNonEmpty:function(Ur,Zr){var ma=Nt(Ur),Ga=Nt(Zr);return ma&&!Ga||!ma&&Ga}},h=dn.types,f=[{name:"label",type:h.text,triggersBounds:u.any,triggersZOrder:u.emptyNonEmpty},{name:"text-rotation",type:h.textRotation,triggersBounds:u.any},{name:"text-margin-x",type:h.bidirectionalSize,triggersBounds:u.any},{name:"text-margin-y",type:h.bidirectionalSize,triggersBounds:u.any}],p=[{name:"source-label",type:h.text,triggersBounds:u.any},{name:"source-text-rotation",type:h.textRotation,triggersBounds:u.any},{name:"source-text-margin-x",type:h.bidirectionalSize,triggersBounds:u.any},{name:"source-text-margin-y",type:h.bidirectionalSize,triggersBounds:u.any},{name:"source-text-offset",type:h.size,triggersBounds:u.any}],x=[{name:"target-label",type:h.text,triggersBounds:u.any},{name:"target-text-rotation",type:h.textRotation,triggersBounds:u.any},{name:"target-text-margin-x",type:h.bidirectionalSize,triggersBounds:u.any},{name:"target-text-margin-y",type:h.bidirectionalSize,triggersBounds:u.any},{name:"target-text-offset",type:h.size,triggersBounds:u.any}],k=[{name:"font-family",type:h.fontFamily,triggersBounds:u.any},{name:"font-style",type:h.fontStyle,triggersBounds:u.any},{name:"font-weight",type:h.fontWeight,triggersBounds:u.any},{name:"font-size",type:h.size,triggersBounds:u.any},{name:"text-transform",type:h.textTransform,triggersBounds:u.any},{name:"text-wrap",type:h.textWrap,triggersBounds:u.any},{name:"text-overflow-wrap",type:h.textOverflowWrap,triggersBounds:u.any},{name:"text-max-width",type:h.size,triggersBounds:u.any},{name:"text-outline-width",type:h.size,triggersBounds:u.any},{name:"line-height",type:h.positiveNumber,triggersBounds:u.any}],_=[{name:"text-valign",type:h.valign,triggersBounds:u.any},{name:"text-halign",type:h.halign,triggersBounds:u.any},{name:"color",type:h.color},{name:"text-outline-color",type:h.color},{name:"text-outline-opacity",type:h.zeroOneNumber},{name:"text-background-color",type:h.color},{name:"text-background-opacity",type:h.zeroOneNumber},{name:"text-background-padding",type:h.size,triggersBounds:u.any},{name:"text-border-opacity",type:h.zeroOneNumber},{name:"text-border-color",type:h.color},{name:"text-border-width",type:h.size,triggersBounds:u.any},{name:"text-border-style",type:h.borderStyle,triggersBounds:u.any},{name:"text-background-shape",type:h.textBackgroundShape,triggersBounds:u.any},{name:"text-justification",type:h.justification},{name:"box-select-labels",type:h.bool,triggersBounds:u.any}],U=[{name:"events",type:h.bool,triggersZOrder:u.any},{name:"text-events",type:h.bool,triggersZOrder:u.any},{name:"box-selection",type:h.boxSelection,triggersZOrder:u.any}],O=[{name:"display",type:h.display,triggersZOrder:u.any,triggersBounds:u.any,triggersBoundsOfConnectedEdges:u.any,triggersBoundsOfParallelEdges:function(Ur,Zr,ma){return Ur!==Zr&&"bezier"===ma.pstyle("curve-style").value}},{name:"visibility",type:h.visibility,triggersZOrder:u.any},{name:"opacity",type:h.zeroOneNumber,triggersZOrder:u.zeroNonZero},{name:"text-opacity",type:h.zeroOneNumber},{name:"min-zoomed-font-size",type:h.size},{name:"z-compound-depth",type:h.zCompoundDepth,triggersZOrder:u.any},{name:"z-index-compare",type:h.zIndexCompare,triggersZOrder:u.any},{name:"z-index",type:h.number,triggersZOrder:u.any}],K=[{name:"overlay-padding",type:h.size,triggersBounds:u.any},{name:"overlay-color",type:h.color},{name:"overlay-opacity",type:h.zeroOneNumber,triggersBounds:u.zeroNonZero},{name:"overlay-shape",type:h.overlayShape,triggersBounds:u.any},{name:"overlay-corner-radius",type:h.cornerRadius}],$=[{name:"underlay-padding",type:h.size,triggersBounds:u.any},{name:"underlay-color",type:h.color},{name:"underlay-opacity",type:h.zeroOneNumber,triggersBounds:u.zeroNonZero},{name:"underlay-shape",type:h.overlayShape,triggersBounds:u.any},{name:"underlay-corner-radius",type:h.cornerRadius}],q=[{name:"transition-property",type:h.propList},{name:"transition-duration",type:h.time},{name:"transition-delay",type:h.time},{name:"transition-timing-function",type:h.easing}],vt=function(Ur,Zr){return"label"===Zr.value?-Ur.poolIndex():Zr.pfValue},ae=[{name:"height",type:h.nodeSize,triggersBounds:u.any,hashOverride:vt},{name:"width",type:h.nodeSize,triggersBounds:u.any,hashOverride:vt},{name:"shape",type:h.nodeShape,triggersBounds:u.any},{name:"shape-polygon-points",type:h.polygonPointList,triggersBounds:u.any},{name:"corner-radius",type:h.cornerRadius},{name:"background-color",type:h.color},{name:"background-fill",type:h.fill},{name:"background-opacity",type:h.zeroOneNumber},{name:"background-blacken",type:h.nOneOneNumber},{name:"background-gradient-stop-colors",type:h.colors},{name:"background-gradient-stop-positions",type:h.percentages},{name:"background-gradient-direction",type:h.gradientDirection},{name:"padding",type:h.sizeMaybePercent,triggersBounds:u.any},{name:"padding-relative-to",type:h.paddingRelativeTo,triggersBounds:u.any},{name:"bounds-expansion",type:h.boundsExpansion,triggersBounds:u.any}],se=[{name:"border-color",type:h.color},{name:"border-opacity",type:h.zeroOneNumber},{name:"border-width",type:h.size,triggersBounds:u.any},{name:"border-style",type:h.borderStyle},{name:"border-cap",type:h.lineCap},{name:"border-join",type:h.lineJoin},{name:"border-dash-pattern",type:h.numbers},{name:"border-dash-offset",type:h.number},{name:"border-position",type:h.linePosition}],Yt=[{name:"outline-color",type:h.color},{name:"outline-opacity",type:h.zeroOneNumber},{name:"outline-width",type:h.size,triggersBounds:u.any},{name:"outline-style",type:h.borderStyle},{name:"outline-offset",type:h.size,triggersBounds:u.any}],he=[{name:"background-image",type:h.urls},{name:"background-image-crossorigin",type:h.bgCrossOrigin},{name:"background-image-opacity",type:h.zeroOneNumbers},{name:"background-image-containment",type:h.bgContainment},{name:"background-image-smoothing",type:h.bools},{name:"background-position-x",type:h.bgPos},{name:"background-position-y",type:h.bgPos},{name:"background-width-relative-to",type:h.bgRelativeTo},{name:"background-height-relative-to",type:h.bgRelativeTo},{name:"background-repeat",type:h.bgRepeat},{name:"background-fit",type:h.bgFit},{name:"background-clip",type:h.bgClip},{name:"background-width",type:h.bgWH},{name:"background-height",type:h.bgWH},{name:"background-offset-x",type:h.bgPos},{name:"background-offset-y",type:h.bgPos}],me=[{name:"position",type:h.position,triggersBounds:u.any},{name:"compound-sizing-wrt-labels",type:h.compoundIncludeLabels,triggersBounds:u.any},{name:"min-width",type:h.size,triggersBounds:u.any},{name:"min-width-bias-left",type:h.sizeMaybePercent,triggersBounds:u.any},{name:"min-width-bias-right",type:h.sizeMaybePercent,triggersBounds:u.any},{name:"min-height",type:h.size,triggersBounds:u.any},{name:"min-height-bias-top",type:h.sizeMaybePercent,triggersBounds:u.any},{name:"min-height-bias-bottom",type:h.sizeMaybePercent,triggersBounds:u.any}],Te=[{name:"line-style",type:h.lineStyle},{name:"line-color",type:h.color},{name:"line-fill",type:h.fill},{name:"line-cap",type:h.lineCap},{name:"line-opacity",type:h.zeroOneNumber},{name:"line-dash-pattern",type:h.numbers},{name:"line-dash-offset",type:h.number},{name:"line-outline-width",type:h.size},{name:"line-outline-color",type:h.color},{name:"line-gradient-stop-colors",type:h.colors},{name:"line-gradient-stop-positions",type:h.percentages},{name:"curve-style",type:h.curveStyle,triggersBounds:u.any,triggersBoundsOfParallelEdges:function(Ur,Zr){return Ur!==Zr&&("bezier"===Ur||"bezier"===Zr)}},{name:"haystack-radius",type:h.zeroOneNumber,triggersBounds:u.any},{name:"source-endpoint",type:h.edgeEndpoint,triggersBounds:u.any},{name:"target-endpoint",type:h.edgeEndpoint,triggersBounds:u.any},{name:"control-point-step-size",type:h.size,triggersBounds:u.any},{name:"control-point-distances",type:h.bidirectionalSizes,triggersBounds:u.any},{name:"control-point-weights",type:h.numbers,triggersBounds:u.any},{name:"segment-distances",type:h.bidirectionalSizes,triggersBounds:u.any},{name:"segment-weights",type:h.numbers,triggersBounds:u.any},{name:"segment-radii",type:h.numbers,triggersBounds:u.any},{name:"radius-type",type:h.radiusType,triggersBounds:u.any},{name:"taxi-turn",type:h.bidirectionalSizeMaybePercent,triggersBounds:u.any},{name:"taxi-turn-min-distance",type:h.size,triggersBounds:u.any},{name:"taxi-direction",type:h.axisDirection,triggersBounds:u.any},{name:"taxi-radius",type:h.number,triggersBounds:u.any},{name:"edge-distances",type:h.edgeDistances,triggersBounds:u.any},{name:"arrow-scale",type:h.positiveNumber,triggersBounds:u.any},{name:"loop-direction",type:h.angle,triggersBounds:u.any},{name:"loop-sweep",type:h.angle,triggersBounds:u.any},{name:"source-distance-from-node",type:h.size,triggersBounds:u.any},{name:"target-distance-from-node",type:h.size,triggersBounds:u.any}],Le=[{name:"ghost",type:h.bool,triggersBounds:u.any},{name:"ghost-offset-x",type:h.bidirectionalSize,triggersBounds:u.any},{name:"ghost-offset-y",type:h.bidirectionalSize,triggersBounds:u.any},{name:"ghost-opacity",type:h.zeroOneNumber}],Ie=[{name:"selection-box-color",type:h.color},{name:"selection-box-opacity",type:h.zeroOneNumber},{name:"selection-box-border-color",type:h.color},{name:"selection-box-border-width",type:h.size},{name:"active-bg-color",type:h.color},{name:"active-bg-opacity",type:h.zeroOneNumber},{name:"active-bg-size",type:h.size},{name:"outside-texture-bg-color",type:h.color},{name:"outside-texture-bg-opacity",type:h.zeroOneNumber}],Oe=[];dn.pieBackgroundN=16,Oe.push({name:"pie-size",type:h.sizeMaybePercent}),Oe.push({name:"pie-hole",type:h.sizeMaybePercent}),Oe.push({name:"pie-start-angle",type:h.angle});for(var tr=1;tr<=dn.pieBackgroundN;tr++)Oe.push({name:"pie-"+tr+"-background-color",type:h.color}),Oe.push({name:"pie-"+tr+"-background-size",type:h.percent}),Oe.push({name:"pie-"+tr+"-background-opacity",type:h.zeroOneNumber});var cr=[];dn.stripeBackgroundN=16,cr.push({name:"stripe-size",type:h.sizeMaybePercent}),cr.push({name:"stripe-direction",type:h.axisDirectionPrimary});for(var dr=1;dr<=dn.stripeBackgroundN;dr++)cr.push({name:"stripe-"+dr+"-background-color",type:h.color}),cr.push({name:"stripe-"+dr+"-background-size",type:h.percent}),cr.push({name:"stripe-"+dr+"-background-opacity",type:h.zeroOneNumber});var rr=[],Cr=dn.arrowPrefixes=["source","mid-source","target","mid-target"];[{name:"arrow-shape",type:h.arrowShape,triggersBounds:u.any},{name:"arrow-color",type:h.color},{name:"arrow-fill",type:h.arrowFill},{name:"arrow-width",type:h.arrowWidth}].forEach(function(Nr){Cr.forEach(function(Ur){rr.push({name:Ur+"-"+Nr.name,type:Nr.type,triggersBounds:Nr.triggersBounds})})},{});var Vr=dn.properties=[].concat(U,q,O,K,$,Le,_,k,f,p,x,ae,se,Yt,he,Oe,cr,me,Te,rr,Ie),qr=dn.propertyGroups={behavior:U,transition:q,visibility:O,overlay:K,underlay:$,ghost:Le,commonLabel:_,labelDimensions:k,mainLabel:f,sourceLabel:p,targetLabel:x,nodeBody:ae,nodeBorder:se,nodeOutline:Yt,backgroundImage:he,pie:Oe,stripe:cr,compound:me,edgeLine:Te,edgeArrow:rr,core:Ie},Ar=dn.propertyGroupNames={};(dn.propertyGroupKeys=Object.keys(qr)).forEach(function(Nr){Ar[Nr]=qr[Nr].map(function(Ur){return Ur.name}),qr[Nr].forEach(function(Ur){return Ur.groupKey=Nr})});var ga=dn.aliases=[{name:"content",pointsTo:"label"},{name:"control-point-distance",pointsTo:"control-point-distances"},{name:"control-point-weight",pointsTo:"control-point-weights"},{name:"segment-distance",pointsTo:"segment-distances"},{name:"segment-weight",pointsTo:"segment-weights"},{name:"segment-radius",pointsTo:"segment-radii"},{name:"edge-text-rotation",pointsTo:"text-rotation"},{name:"padding-left",pointsTo:"padding"},{name:"padding-right",pointsTo:"padding"},{name:"padding-top",pointsTo:"padding"},{name:"padding-bottom",pointsTo:"padding"}];dn.propertyNames=Vr.map(function(Nr){return Nr.name});for(var Ea=0;Ea<Vr.length;Ea++){var pa=Vr[Ea];Vr[pa.name]=pa}for(var Aa=0;Aa<ga.length;Aa++){var Ra=ga[Aa],Ta={name:Ra.name,alias:!0,pointsTo:Vr[Ra.pointsTo]};Vr.push(Ta),Vr[Ra.name]=Ta}})(),dn.getDefaultProperty=function(e){return this.getDefaultProperties()[e]},dn.getDefaultProperties=function(){var e=this._private;if(null!=e.defaultProperties)return e.defaultProperties;for(var t=H({"selection-box-color":"#ddd","selection-box-opacity":.65,"selection-box-border-color":"#aaa","selection-box-border-width":1,"active-bg-color":"black","active-bg-opacity":.15,"active-bg-size":30,"outside-texture-bg-color":"#000","outside-texture-bg-opacity":.125,events:"yes","text-events":"no","text-valign":"top","text-halign":"center","text-justification":"auto","line-height":1,color:"#000","box-selection":"contain","text-outline-color":"#000","text-outline-width":0,"text-outline-opacity":1,"text-opacity":1,"text-decoration":"none","text-transform":"none","text-wrap":"none","text-overflow-wrap":"whitespace","text-max-width":9999,"text-background-color":"#000","text-background-opacity":0,"text-background-shape":"rectangle","text-background-padding":0,"text-border-opacity":0,"text-border-width":0,"text-border-style":"solid","text-border-color":"#000","font-family":"Helvetica Neue, Helvetica, sans-serif","font-style":"normal","font-weight":"normal","font-size":16,"min-zoomed-font-size":0,"text-rotation":"none","source-text-rotation":"none","target-text-rotation":"none",visibility:"visible",display:"element",opacity:1,"z-compound-depth":"auto","z-index-compare":"auto","z-index":0,label:"","text-margin-x":0,"text-margin-y":0,"source-label":"","source-text-offset":0,"source-text-margin-x":0,"source-text-margin-y":0,"target-label":"","target-text-offset":0,"target-text-margin-x":0,"target-text-margin-y":0,"overlay-opacity":0,"overlay-color":"#000","overlay-padding":10,"overlay-shape":"round-rectangle","overlay-corner-radius":"auto","underlay-opacity":0,"underlay-color":"#000","underlay-padding":10,"underlay-shape":"round-rectangle","underlay-corner-radius":"auto","transition-property":"none","transition-duration":0,"transition-delay":0,"transition-timing-function":"linear","box-select-labels":"no","background-blacken":0,"background-color":"#999","background-fill":"solid","background-opacity":1,"background-image":"none","background-image-crossorigin":"anonymous","background-image-opacity":1,"background-image-containment":"inside","background-image-smoothing":"yes","background-position-x":"50%","background-position-y":"50%","background-offset-x":0,"background-offset-y":0,"background-width-relative-to":"include-padding","background-height-relative-to":"include-padding","background-repeat":"no-repeat","background-fit":"none","background-clip":"node","background-width":"auto","background-height":"auto","border-color":"#000","border-opacity":1,"border-width":0,"border-style":"solid","border-dash-pattern":[4,2],"border-dash-offset":0,"border-cap":"butt","border-join":"miter","border-position":"center","outline-color":"#999","outline-opacity":1,"outline-width":0,"outline-offset":0,"outline-style":"solid",height:30,width:30,shape:"ellipse","shape-polygon-points":"-1, -1,   1, -1,   1, 1,   -1, 1","corner-radius":"auto","bounds-expansion":0,"background-gradient-direction":"to-bottom","background-gradient-stop-colors":"#999","background-gradient-stop-positions":"0%",ghost:"no","ghost-offset-y":0,"ghost-offset-x":0,"ghost-opacity":0,padding:0,"padding-relative-to":"width",position:"origin","compound-sizing-wrt-labels":"include","min-width":0,"min-width-bias-left":0,"min-width-bias-right":0,"min-height":0,"min-height-bias-top":0,"min-height-bias-bottom":0},{"pie-size":"100%","pie-hole":0,"pie-start-angle":"0deg"},[{name:"pie-{{i}}-background-color",value:"black"},{name:"pie-{{i}}-background-size",value:"0%"},{name:"pie-{{i}}-background-opacity",value:1}].reduce(function(u,h){for(var f=1;f<=dn.pieBackgroundN;f++)u[h.name.replace("{{i}}",f)]=h.value;return u},{}),{"stripe-size":"100%","stripe-direction":"horizontal"},[{name:"stripe-{{i}}-background-color",value:"black"},{name:"stripe-{{i}}-background-size",value:"0%"},{name:"stripe-{{i}}-background-opacity",value:1}].reduce(function(u,h){for(var f=1;f<=dn.stripeBackgroundN;f++)u[h.name.replace("{{i}}",f)]=h.value;return u},{}),{"line-style":"solid","line-color":"#999","line-fill":"solid","line-cap":"butt","line-opacity":1,"line-outline-width":0,"line-outline-color":"#000","line-gradient-stop-colors":"#999","line-gradient-stop-positions":"0%","control-point-step-size":40,"control-point-weights":.5,"segment-weights":.5,"segment-distances":20,"segment-radii":15,"radius-type":"arc-radius","taxi-turn":"50%","taxi-radius":15,"taxi-turn-min-distance":10,"taxi-direction":"auto","edge-distances":"intersection","curve-style":"haystack","haystack-radius":0,"arrow-scale":1,"loop-direction":"-45deg","loop-sweep":"-90deg","source-distance-from-node":0,"target-distance-from-node":0,"source-endpoint":"outside-to-node","target-endpoint":"outside-to-node","line-dash-pattern":[6,3],"line-dash-offset":0},[{name:"arrow-shape",value:"none"},{name:"arrow-color",value:"#999"},{name:"arrow-fill",value:"filled"},{name:"arrow-width",value:1}].reduce(function(u,h){return dn.arrowPrefixes.forEach(function(f){u[f+"-"+h.name]=h.value}),u},{})),r={},a=0;a<this.properties.length;a++){var i=this.properties[a];if(!i.pointsTo){var n=i.name,o=this.parse(n,t[n]);r[n]=o}}return e.defaultProperties=r,e.defaultProperties},dn.addDefaultStylesheet=function(){this.selector(":parent").css({shape:"rectangle",padding:10,"background-color":"#eee","border-color":"#ccc","border-width":1}).selector("edge").css({width:3}).selector(":loop").css({"curve-style":"bezier"}).selector("edge:compound").css({"curve-style":"bezier","source-endpoint":"outside-to-line","target-endpoint":"outside-to-line"}).selector(":selected").css({"background-color":"#0169D9","line-color":"#0169D9","source-arrow-color":"#0169D9","target-arrow-color":"#0169D9","mid-source-arrow-color":"#0169D9","mid-target-arrow-color":"#0169D9"}).selector(":parent:selected").css({"background-color":"#CCE1F9","border-color":"#aec8e5"}).selector(":active").css({"overlay-color":"black","overlay-padding":10,"overlay-opacity":.25}),this.defaultLength=this.length};var Jo={parse:function(e,t,r,a){var i=this;if(z(t))return i.parseImplWarn(e,t,r,a);var f,u=Pa(e,""+t,r?"t":"f","mapping"===a||!0===a||!1===a||null==a?"dontcare":a),h=i.propCache=i.propCache||[];return(f=h[u])||(f=h[u]=i.parseImplWarn(e,t,r,a)),(r||"mapping"===a)&&(f=Ha(f))&&(f.value=Ha(f.value)),f},parseImplWarn:function(e,t,r,a){var i=this.parseImpl(e,t,r,a);return!i&&null!=t&&_a("The style property `".concat(e,": ").concat(t,"` is invalid")),i&&("width"===i.name||"height"===i.name)&&"label"===t&&_a("The style value of `label` is deprecated for `"+i.name+"`"),i},parseImpl:function(e,t,r,a){var i=this;e=oe(e);var n=i.properties[e],s=t,o=i.types;if(!n||void 0===t)return null;n.alias&&(e=(n=n.pointsTo).name);var u=Xe(t);u&&(t=t.trim());var f,p,h=n.type;if(!h)return null;if(r&&(""===t||null===t))return{name:e,value:t,bypass:!0,deleteBypass:!0};if(z(t))return{name:e,value:t,strValue:"fn",mapped:o.fn,bypass:r};if(!(!u||a||t.length<7||"a"!==t[1])){if(t.length>=7&&"d"===t[0]&&(f=new RegExp(o.data.regex).exec(t)))return!r&&{name:e,value:f,strValue:""+t,mapped:o.data,field:f[1],bypass:r};if(t.length>=10&&"m"===t[0]&&(p=new RegExp(o.mapData.regex).exec(t))){if(r||h.multiple)return!1;var k=o.mapData;if(!h.color&&!h.number)return!1;var _=this.parse(e,p[4]);if(!_||_.mapped)return!1;var U=this.parse(e,p[5]);if(!U||U.mapped)return!1;if(_.pfValue===U.pfValue||_.strValue===U.strValue)return _a("`"+e+": "+t+"` is not a valid mapper because the output range is zero; converting to `"+e+": "+_.strValue+"`"),this.parse(e,_.strValue);if(h.color){var O=_.value,K=U.value;if(!(O[0]!==K[0]||O[1]!==K[1]||O[2]!==K[2]||O[3]!==K[3]&&(null!=O[3]&&1!==O[3]||null!=K[3]&&1!==K[3])))return!1}return{name:e,value:p,strValue:""+t,mapped:k,field:p[1],fieldMin:parseFloat(p[2]),fieldMax:parseFloat(p[3]),valueMin:_.value,valueMax:U.value,bypass:r}}}if(h.multiple&&"multiple"!==a){var q;if(q=u?t.split(/\s+/):dt(t)?t:[t],h.evenMultiple&&q.length%2!=0)return null;for(var vt=[],ae=[],se=[],Yt="",he=!1,me=0;me<q.length;me++){var Te=i.parse(e,q[me],r,"multiple");he=he||Xe(Te.value),vt.push(Te.value),se.push(null!=Te.pfValue?Te.pfValue:Te.value),ae.push(Te.units),Yt+=(me>0?" ":"")+Te.strValue}return h.validate&&!h.validate(vt,ae)?null:h.singleEnum&&he?1===vt.length&&Xe(vt[0])?{name:e,value:vt[0],strValue:vt[0],bypass:r}:null:{name:e,value:vt,pfValue:se,strValue:Yt,bypass:r,units:ae}}var Le=function(){for(var Ta=0;Ta<h.enums.length;Ta++)if(h.enums[Ta]===t)return{name:e,value:t,strValue:""+t,bypass:r};return null};if(h.number){var Ie,Oe="px";if(h.units&&(Ie=h.units),h.implicitUnits&&(Oe=h.implicitUnits),!h.unitless)if(u){var tr="px|em"+(h.allowPercent?"|\\%":"");Ie&&(tr=Ie);var cr=t.match("^("+B+")("+tr+")?$");cr&&(t=cr[1],Ie=cr[2]||Oe)}else(!Ie||h.implicitUnits)&&(Ie=Oe);if(t=parseFloat(t),isNaN(t)&&void 0===h.enums)return null;if(isNaN(t)&&void 0!==h.enums)return t=s,Le();if(h.integer&&!function(t){return X(t)&&Math.floor(t)===t}(t)||void 0!==h.min&&(t<h.min||h.strictMin&&t===h.min)||void 0!==h.max&&(t>h.max||h.strictMax&&t===h.max))return null;var dr={name:e,value:t,strValue:""+t+(Ie||""),units:Ie,bypass:r};return dr.pfValue=h.unitless||"px"!==Ie&&"em"!==Ie?t:"px"!==Ie&&Ie?this.getEmSizeInPixels()*t:t,("ms"===Ie||"s"===Ie)&&(dr.pfValue="ms"===Ie?t:1e3*t),("deg"===Ie||"rad"===Ie)&&(dr.pfValue="rad"===Ie?t:function(t){return Math.PI*t/180}(t)),"%"===Ie&&(dr.pfValue=t/100),dr}if(h.propList){var rr=[],Cr=""+t;if("none"!==Cr){for(var Vr=Cr.split(/\s*,\s*|\s+/),qr=0;qr<Vr.length;qr++){var Ar=Vr[qr].trim();i.properties[Ar]?rr.push(Ar):_a("`"+Ar+"` is not a valid property name")}if(0===rr.length)return null}return{name:e,value:rr,strValue:0===rr.length?"none":rr.join(" "),bypass:r}}if(h.color){var Fr=pe(t);return Fr?{name:e,value:Fr,pfValue:Fr,strValue:"rgb("+Fr[0]+","+Fr[1]+","+Fr[2]+")",bypass:r}:null}if(h.regex||h.regexes){if(h.enums){var ga=Le();if(ga)return ga}for(var Ea=h.regexes?h.regexes:[h.regex],pa=0;pa<Ea.length;pa++){var Ra=new RegExp(Ea[pa]).exec(t);if(Ra)return{name:e,value:h.singleRegexMatchValue?Ra[1]:Ra,strValue:""+t,bypass:r}}return null}return h.string?{name:e,value:""+t,strValue:""+t,bypass:r}:h.enums?Le():null}},En=function(t){if(!(this instanceof En))return new En(t);V(t)?(this._private={cy:t,coreStyle:{}},this.length=0,this.resetToDefault()):Ka("A style must have a core reference")},Mn=En.prototype;Mn.instanceString=function(){return"style"},Mn.clear=function(){for(var e=this._private,r=e.cy.elements(),a=0;a<this.length;a++)this[a]=void 0;return this.length=0,e.contextStyles={},e.propDiffs={},this.cleanElements(r,!0),r.forEach(function(i){var n=i[0]._private;n.styleDirty=!0,n.appliedInitStyle=!1}),this},Mn.resetToDefault=function(){return this.clear(),this.addDefaultStylesheet(),this},Mn.core=function(e){return this._private.coreStyle[e]||this.getDefaultProperty(e)},Mn.selector=function(e){var t="core"===e?null:new gs(e),r=this.length++;return this[r]={selector:t,properties:[],mappedProperties:[],index:r},this},Mn.css=function(){var t=arguments;if(1===t.length)for(var r=t[0],a=0;a<this.properties.length;a++){var i=this.properties[a],n=r[i.name];void 0===n&&(n=r[qe(i.name)]),void 0!==n&&this.cssRule(i.name,n)}else 2===t.length&&this.cssRule(t[0],t[1]);return this},Mn.style=Mn.css,Mn.cssRule=function(e,t){var r=this.parse(e,t);if(r){var a=this.length-1;this[a].properties.push(r),this[a].properties[r.name]=r,r.name.match(/pie-(\d+)-background-size/)&&r.value&&(this._private.hasPie=!0),r.name.match(/stripe-(\d+)-background-size/)&&r.value&&(this._private.hasStripe=!0),r.mapped&&this[a].mappedProperties.push(r),!this[a].selector&&(this._private.coreStyle[r.name]=r)}return this},Mn.append=function(e){return gt(e)?e.appendToStyle(this):dt(e)?this.appendFromJson(e):Xe(e)&&this.appendFromString(e),this},En.fromJson=function(e,t){var r=new En(e);return r.fromJson(t),r},En.fromString=function(e,t){return new En(e).fromString(t)},[_n,fo,Mc,es,Qo,Ic,dn,Jo].forEach(function(e){H(Mn,e)}),En.types=Mn.types,En.properties=Mn.properties,En.propertyGroups=Mn.propertyGroups,En.propertyGroupNames=Mn.propertyGroupNames,En.propertyGroupKeys=Mn.propertyGroupKeys;var k1={style:function(t){return t&&this.setStyle(t).update(),this._private.style},setStyle:function(t){var r=this._private;return r.style=gt(t)?t.generateStyle(this):dt(t)?En.fromJson(this,t):Xe(t)?En.fromString(this,t):En(this),r.style},updateStyle:function(){this.mutableElements().updateStyle()}},Ts={autolock:function(t){return void 0===t?this._private.autolock:(this._private.autolock=!!t,this)},autoungrabify:function(t){return void 0===t?this._private.autoungrabify:(this._private.autoungrabify=!!t,this)},autounselectify:function(t){return void 0===t?this._private.autounselectify:(this._private.autounselectify=!!t,this)},selectionType:function(t){var r=this._private;return null==r.selectionType&&(r.selectionType="single"),void 0===t?r.selectionType:(("additive"===t||"single"===t)&&(r.selectionType=t),this)},panningEnabled:function(t){return void 0===t?this._private.panningEnabled:(this._private.panningEnabled=!!t,this)},userPanningEnabled:function(t){return void 0===t?this._private.userPanningEnabled:(this._private.userPanningEnabled=!!t,this)},zoomingEnabled:function(t){return void 0===t?this._private.zoomingEnabled:(this._private.zoomingEnabled=!!t,this)},userZoomingEnabled:function(t){return void 0===t?this._private.userZoomingEnabled:(this._private.userZoomingEnabled=!!t,this)},boxSelectionEnabled:function(t){return void 0===t?this._private.boxSelectionEnabled:(this._private.boxSelectionEnabled=!!t,this)},pan:function(){var a,i,n,s,o,t=arguments,r=this._private.pan;switch(t.length){case 0:return r;case 1:if(Xe(t[0]))return r[a=t[0]];if(Bt(t[0])){if(!this._private.panningEnabled)return this;o=(n=t[0]).y,X(s=n.x)&&(r.x=s),X(o)&&(r.y=o),this.emit("pan viewport")}break;case 2:if(!this._private.panningEnabled)return this;i=t[1],("x"===(a=t[0])||"y"===a)&&X(i)&&(r[a]=i),this.emit("pan viewport")}return this.notify("viewport"),this},panBy:function(t,r){var n,s,o,u,h,a=arguments,i=this._private.pan;if(!this._private.panningEnabled)return this;switch(a.length){case 1:Bt(t)&&(h=(o=a[0]).y,X(u=o.x)&&(i.x+=u),X(h)&&(i.y+=h),this.emit("pan viewport"));break;case 2:s=r,("x"===(n=t)||"y"===n)&&X(s)&&(i[n]+=s),this.emit("pan viewport")}return this.notify("viewport"),this},gc:function(){this.notify("gc")},fit:function(t,r){var a=this.getFitViewport(t,r);if(a){var i=this._private;i.zoom=a.zoom,i.pan=a.pan,this.emit("pan zoom viewport"),this.notify("viewport")}return this},getFitViewport:function(t,r){var a;if((X(t)&&void 0===r&&(r=t,t=void 0),this._private.panningEnabled&&this._private.zoomingEnabled)&&(Xe(t)?t=this.$(t):!function(t){return Bt(t)&&X(t.x1)&&X(t.x2)&&X(t.y1)&&X(t.y2)}(t)?ee(t)||(t=this.mutableElements()):((a={x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2}).w=a.x2-a.x1,a.h=a.y2-a.y1),!ee(t)||!t.empty())){a=a||t.boundingBox();var u,s=this.width(),o=this.height();if(r=X(r)?r:0,!isNaN(s)&&!isNaN(o)&&s>0&&o>0&&!isNaN(a.w)&&!isNaN(a.h)&&a.w>0&&a.h>0)return{zoom:u=(u=(u=Math.min((s-2*r)/a.w,(o-2*r)/a.h))>this._private.maxZoom?this._private.maxZoom:u)<this._private.minZoom?this._private.minZoom:u,pan:{x:(s-u*(a.x1+a.x2))/2,y:(o-u*(a.y1+a.y2))/2}}}},zoomRange:function(t,r){var a=this._private;if(null==r){var i=t;t=i.min,r=i.max}return X(t)&&X(r)&&t<=r?(a.minZoom=t,a.maxZoom=r):X(t)&&void 0===r&&t<=a.maxZoom?a.minZoom=t:X(r)&&void 0===t&&r>=a.minZoom&&(a.maxZoom=r),this},minZoom:function(t){return void 0===t?this._private.minZoom:this.zoomRange({min:t})},maxZoom:function(t){return void 0===t?this._private.maxZoom:this.zoomRange({max:t})},getZoomedViewport:function(t){var n,s,r=this._private,a=r.pan,i=r.zoom,o=!1;return r.zoomingEnabled||(o=!0),X(t)?s=t:Bt(t)&&(s=t.level,null!=t.position?n=Bn(t.position,i,a):null!=t.renderedPosition&&(n=t.renderedPosition),null!=n&&!r.panningEnabled&&(o=!0)),s=(s=s>r.maxZoom?r.maxZoom:s)<r.minZoom?r.minZoom:s,!o&&X(s)&&s!==i&&(null==n||X(n.x)&&X(n.y))?null!=n?{zoomed:!0,panned:!0,zoom:s,pan:{x:-s/i*(n.x-a.x)+n.x,y:-s/i*(n.y-a.y)+n.y}}:{zoomed:!0,panned:!1,zoom:s,pan:a}:null},zoom:function(t){if(void 0===t)return this._private.zoom;var r=this.getZoomedViewport(t),a=this._private;return null!=r&&r.zoomed?(a.zoom=r.zoom,r.panned&&(a.pan.x=r.pan.x,a.pan.y=r.pan.y),this.emit("zoom"+(r.panned?" pan":"")+" viewport"),this.notify("viewport"),this):this},viewport:function(t){var r=this._private,a=!0,i=!0,n=[],s=!1,o=!1;if(!t)return this;if(X(t.zoom)||(a=!1),Bt(t.pan)||(i=!1),!a&&!i)return this;if(a){var u=t.zoom;u<r.minZoom||u>r.maxZoom||!r.zoomingEnabled?s=!0:(r.zoom=u,n.push("zoom"))}if(i&&(!s||!t.cancelOnFailedZoom)&&r.panningEnabled){var h=t.pan;X(h.x)&&(r.pan.x=h.x,o=!1),X(h.y)&&(r.pan.y=h.y,o=!1),o||n.push("pan")}return n.length>0&&(n.push("viewport"),this.emit(n.join(" ")),this.notify("viewport")),this},center:function(t){var r=this.getCenterPan(t);return r&&(this._private.pan=r,this.emit("pan viewport"),this.notify("viewport")),this},getCenterPan:function(t,r){if(this._private.panningEnabled){if(Xe(t)){var a=t;t=this.mutableElements().filter(a)}else ee(t)||(t=this.mutableElements());if(0!==t.length){var i=t.boundingBox(),n=this.width(),s=this.height();return{x:(n-(r=void 0===r?this._private.zoom:r)*(i.x1+i.x2))/2,y:(s-r*(i.y1+i.y2))/2}}}},reset:function(){return this._private.panningEnabled&&this._private.zoomingEnabled?(this.viewport({pan:{x:0,y:0},zoom:1}),this):this},invalidateSize:function(){this._private.sizeCache=null},size:function(){var i,n,t=this._private,r=t.container;return t.sizeCache=t.sizeCache||(r?(i=this.window().getComputedStyle(r),{width:r.clientWidth-(n=function(o){return parseFloat(i.getPropertyValue(o))})("padding-left")-n("padding-right"),height:r.clientHeight-n("padding-top")-n("padding-bottom")}):{width:1,height:1})},width:function(){return this.size().width},height:function(){return this.size().height},extent:function(){var t=this._private.pan,r=this._private.zoom,a=this.renderedExtent(),i={x1:(a.x1-t.x)/r,x2:(a.x2-t.x)/r,y1:(a.y1-t.y)/r,y2:(a.y2-t.y)/r};return i.w=i.x2-i.x1,i.h=i.y2-i.y1,i},renderedExtent:function(){var t=this.width(),r=this.height();return{x1:0,y1:0,x2:t,y2:r,w:t,h:r}},multiClickDebounceTime:function(t){return t?(this._private.multiClickDebounceTime=t,this):this._private.multiClickDebounceTime}};Ts.centre=Ts.center,Ts.autolockNodes=Ts.autolock,Ts.autoungrabifyNodes=Ts.autoungrabify;var go={data:$i.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeData:$i.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),scratch:$i.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:$i.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0})};go.attr=go.data,go.removeAttr=go.removeData;var po=function(t){var r=this,a=(t=H({},t)).container;a&&!S(a)&&S(a[0])&&(a=a[0]);var i=a?a._cyreg:null;(i=i||{})&&i.cy&&(i.cy.destroy(),i={});var n=i.readies=i.readies||[];a&&(a._cyreg=i),i.cy=r;var s=void 0!==Br&&void 0!==a&&!t.headless,o=t;o.layout=H({name:s?"grid":"null"},o.layout),o.renderer=H({name:s?"canvas":"null"},o.renderer);var u=function(_,U,O){return void 0!==U?U:void 0!==O?O:_},h=this._private={container:a,ready:!1,options:o,elements:new wn(this),listeners:[],aniEles:new wn(this),data:o.data||{},scratch:{},layout:null,renderer:null,destroyed:!1,notificationsEnabled:!0,minZoom:1e-50,maxZoom:1e50,zoomingEnabled:u(!0,o.zoomingEnabled),userZoomingEnabled:u(!0,o.userZoomingEnabled),panningEnabled:u(!0,o.panningEnabled),userPanningEnabled:u(!0,o.userPanningEnabled),boxSelectionEnabled:u(!0,o.boxSelectionEnabled),autolock:u(!1,o.autolock,o.autolockNodes),autoungrabify:u(!1,o.autoungrabify,o.autoungrabifyNodes),autounselectify:u(!1,o.autounselectify),styleEnabled:void 0===o.styleEnabled?s:o.styleEnabled,zoom:X(o.zoom)?o.zoom:1,pan:{x:Bt(o.pan)&&X(o.pan.x)?o.pan.x:0,y:Bt(o.pan)&&X(o.pan.y)?o.pan.y:0},animation:{current:[],queue:[]},hasCompoundNodes:!1,multiClickDebounceTime:u(250,o.multiClickDebounceTime)};this.createEmitter(),this.selectionType(o.selectionType),this.zoomRange({min:o.minZoom,max:o.maxZoom}),h.styleEnabled&&r.setStyle([]);var p=H({},o,o.renderer);r.initRenderer(p),function(_,U){if(_.some(ye))return Ks.all(_).then(U);U(_)}([o.style,o.elements],function(k){var _=k[0],U=k[1];h.styleEnabled&&r.style().append(_),function(_,U,O){r.notifications(!1);var K=r.mutableElements();K.length>0&&K.remove(),null!=_&&(Bt(_)||dt(_))&&r.add(_),r.one("layoutready",function(q){r.notifications(!0),r.emit(q),r.one("load",U),r.emitAndNotify("load")}).one("layoutstop",function(){r.one("done",O),r.emit("done")});var $=H({},r._private.options.layout);$.eles=r.elements(),r.layout($).run()}(U,function(){r.startAnimationLoop(),h.ready=!0,z(o.ready)&&r.on("ready",o.ready);for(var O=0;O<n.length;O++)r.on("ready",n[O]);i&&(i.readies=[]),r.emit("ready")},o.done)})},tl=po.prototype;H(tl,{instanceString:function(){return"core"},isReady:function(){return this._private.ready},destroyed:function(){return this._private.destroyed},ready:function(t){return this.isReady()?this.emitter().emit("ready",[],t):this.on("ready",t),this},destroy:function(){var t=this;if(!t.destroyed())return t.stopAnimationLoop(),t.destroyRenderer(),this.emit("destroy"),t._private.destroyed=!0,t},hasElementWithId:function(t){return this._private.elements.hasElementWithId(t)},getElementById:function(t){return this._private.elements.getElementById(t)},hasCompoundNodes:function(){return this._private.hasCompoundNodes},headless:function(){return this._private.renderer.isHeadless()},styleEnabled:function(){return this._private.styleEnabled},addToPool:function(t){return this._private.elements.merge(t),this},removeFromPool:function(t){return this._private.elements.unmerge(t),this},container:function(){return this._private.container||null},window:function(){if(null==this._private.container)return Br;var r=this._private.container.ownerDocument;return void 0===r||null==r?Br:r.defaultView||Br},mount:function(t){if(null!=t){var r=this,a=r._private,i=a.options;return!S(t)&&S(t[0])&&(t=t[0]),r.stopAnimationLoop(),r.destroyRenderer(),a.container=t,a.styleEnabled=!0,r.invalidateSize(),r.initRenderer(H({},i,i.renderer,{name:"null"===i.renderer.name?"canvas":i.renderer.name})),r.startAnimationLoop(),r.style(i.style),r.emit("mount"),r}},unmount:function(){var t=this;return t.stopAnimationLoop(),t.destroyRenderer(),t.initRenderer({name:"null"}),t.emit("unmount"),t},options:function(){return Ha(this._private.options)},json:function(t){var r=this,a=r._private,i=r.mutableElements();if(Bt(t)){if(r.startBatch(),t.elements){var s={},o=function(vt,ae){for(var se=[],Yt=[],he=0;he<vt.length;he++){var me=vt[he];if(me.data.id){var Te=""+me.data.id,Le=r.getElementById(Te);s[Te]=!0,0!==Le.length?Yt.push({ele:Le,json:me}):(ae&&(me.group=ae),se.push(me))}else _a("cy.json() cannot handle elements without an ID attribute")}r.add(se);for(var Ie=0;Ie<Yt.length;Ie++){var Oe=Yt[Ie];Oe.ele.json(Oe.json)}};if(dt(t.elements))o(t.elements);else for(var u=["nodes","edges"],h=0;h<u.length;h++){var f=u[h],p=t.elements[f];dt(p)&&o(p,f)}var x=r.collection();i.filter(function(q){return!s[q.id()]}).forEach(function(q){q.isParent()?x.merge(q):q.remove()}),x.forEach(function(q){return q.children().move({parent:null})}),x.forEach(function(q){return(vt=q,r.getElementById(vt.id())).remove();var vt})}t.style&&r.style(t.style),null!=t.zoom&&t.zoom!==a.zoom&&r.zoom(t.zoom),t.pan&&(t.pan.x!==a.pan.x||t.pan.y!==a.pan.y)&&r.pan(t.pan),t.data&&r.data(t.data);for(var k=["minZoom","maxZoom","zoomingEnabled","userZoomingEnabled","panningEnabled","userPanningEnabled","boxSelectionEnabled","autolock","autoungrabify","autounselectify","multiClickDebounceTime"],_=0;_<k.length;_++){var U=k[_];null!=t[U]&&r[U](t[U])}return r.endBatch(),this}var K={};t?K.elements=this.elements().map(function(q){return q.json()}):(K.elements={},i.forEach(function(q){var vt=q.group();K.elements[vt]||(K.elements[vt]=[]),K.elements[vt].push(q.json())})),this._private.styleEnabled&&(K.style=r.style().json()),K.data=Ha(r.data());var $=a.options;return K.zoomingEnabled=a.zoomingEnabled,K.userZoomingEnabled=a.userZoomingEnabled,K.zoom=a.zoom,K.minZoom=a.minZoom,K.maxZoom=a.maxZoom,K.panningEnabled=a.panningEnabled,K.userPanningEnabled=a.userPanningEnabled,K.pan=Ha(a.pan),K.boxSelectionEnabled=a.boxSelectionEnabled,K.renderer=Ha($.renderer),K.hideEdgesOnViewport=$.hideEdgesOnViewport,K.textureOnViewport=$.textureOnViewport,K.wheelSensitivity=$.wheelSensitivity,K.motionBlur=$.motionBlur,K.multiClickDebounceTime=$.multiClickDebounceTime,K}}),tl.$id=tl.getElementById,[f1,x1,md,Rc,Xo,_1,Pc,Zo,k1,Ts,go].forEach(function(e){H(tl,e)});var S1={fit:!0,directed:!1,direction:"downward",padding:30,circle:!1,grid:!1,spacingFactor:1.75,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,roots:void 0,depthSort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(t,r){return!0},ready:void 0,stop:void 0,transform:function(t,r){return r}},w1={maximal:!1,acyclic:!1},Gs=function(t){return t.scratch("breadthfirst")},xd=function(t,r){return t.scratch("breadthfirst",r)};function bd(e){this.options=H({},S1,w1,e)}bd.prototype.run=function(){var h,e=this.options,t=e.cy,r=e.eles,a=r.nodes().filter(function(gi){return gi.isChildless()}),i=r,n=e.directed,s=e.acyclic||e.maximal||e.maximalAdjustments>0,o=!!e.boundingBox,u=kt(o?e.boundingBox:structuredClone(t.extent()));if(ee(e.roots))h=e.roots;else if(dt(e.roots)){for(var f=[],p=0;p<e.roots.length;p++){var k=t.getElementById(e.roots[p]);f.push(k)}h=t.collection(f)}else if(Xe(e.roots))h=t.$(e.roots);else if(n)h=a.roots();else{var _=r.components();h=t.collection();for(var U=function(){var Qa=_[O],ci=Qa.maxDegree(!1),di=Qa.filter(function(_i){return _i.degree(!1)===ci});h=h.add(di)},O=0;O<_.length;O++)U()}var K=[],$={},q=function(Qa,ci){null==K[ci]&&(K[ci]=[]);var di=K[ci].length;K[ci].push(Qa),xd(Qa,{index:di,depth:ci})};i.bfs({roots:h,directed:e.directed,visit:function(Qa,ci,di,_i,fi){var wi=Qa[0],Ii=wi.id();wi.isChildless()&&q(wi,fi),$[Ii]=!0}});for(var ae=[],se=0;se<a.length;se++){var Yt=a[se];$[Yt.id()]||ae.push(Yt)}var he=function(Qa){for(var ci=K[Qa],di=0;di<ci.length;di++){var _i=ci[di];null!=_i?xd(_i,{depth:Qa,index:di}):(ci.splice(di,1),di--)}},me=function(Qa,ci){for(var di=Gs(Qa),_i=Qa.incomers().filter(function(bi){return bi.isNode()&&r.has(bi)}),fi=-1,wi=Qa.id(),Ii=0;Ii<_i.length;Ii++){var Hi=Gs(_i[Ii]);fi=Math.max(fi,Hi.depth)}if(di.depth<=fi){if(!e.acyclic&&ci[wi])return null;var Gi=fi+1;return function(Qa,ci){var di=Gs(Qa);K[di.depth][di.index]=null,Qa.isChildless()&&q(Qa,ci)}(Qa,Gi),ci[wi]=Gi,!0}return!1};if(n&&s){var Te=[],Le={},Ie=function(Qa){return Te.push(Qa)},Oe=function(){return Te.shift()};for(a.forEach(function(gi){return Te.push(gi)});Te.length>0;){var tr=Oe(),cr=me(tr,Le);if(cr)tr.outgoers().filter(function(gi){return gi.isNode()&&r.has(gi)}).forEach(Ie);else if(null===cr){_a("Detected double maximal shift for node `"+tr.id()+"`.  Bailing maximal adjustment due to cycle.  Use `options.maximal: true` only on DAGs.");break}}}var dr=0;if(e.avoidOverlap)for(var rr=0;rr<a.length;rr++){var Vr=a[rr].layoutDimensions(e);dr=Math.max(dr,Vr.w,Vr.h)}var Fr={},ga=function(Qa){if(Fr[Qa.id()])return Fr[Qa.id()];for(var ci=Gs(Qa).depth,di=Qa.neighborhood(),_i=0,fi=0,wi=0;wi<di.length;wi++){var Ii=di[wi];if(!Ii.isEdge()&&!Ii.isParent()&&a.has(Ii)){var Yi=Gs(Ii);if(null!=Yi){var Hi=Yi.index,Gi=Yi.depth;null!=Hi&&null!=Gi&&Gi<ci&&(_i+=Hi/K[Gi].length,fi++)}}}return _i/=fi=Math.max(1,fi),0===fi&&(_i=0),Fr[Qa.id()]=_i,_i},Ea=function(Qa,ci){var fi=ga(Qa)-ga(ci);return 0===fi?ht(Qa.id(),ci.id()):fi};void 0!==e.depthSort&&(Ea=e.depthSort);for(var pa=K.length,Aa=0;Aa<pa;Aa++)K[Aa].sort(Ea),he(Aa);for(var Ra=[],Za=0;Za<ae.length;Za++)Ra.push(ae[Za]);Ra.length&&(K.unshift(Ra),pa=K.length,function(){for(var Qa=0;Qa<pa;Qa++)he(Qa)}());for(var Nr=0,Ur=0;Ur<pa;Ur++)Nr=Math.max(K[Ur].length,Nr);var Zr_x=u.x1+u.w/2,Zr_y=u.y1+u.h/2,ma=a.reduce(function(gi,Qa){return ci=Qa.boundingBox({includeLabels:e.nodeDimensionsIncludeLabels}),{w:-1===gi.w?ci.w:(gi.w+ci.w)/2,h:-1===gi.h?ci.h:(gi.h+ci.h)/2};var ci},{w:-1,h:-1}),Ga=Math.max(1===pa?0:o?(u.h-2*e.padding-ma.h)/(pa-1):(u.h-2*e.padding-ma.h)/(pa+1),dr),li=K.reduce(function(gi,Qa){return Math.max(gi,Qa.length)},0),Ci={downward:0,leftward:90,upward:180,rightward:-90};return-1===Object.keys(Ci).indexOf(e.direction)&&Ka("Invalid direction '".concat(e.direction,"' specified for breadthfirst layout. Valid values are: ").concat(Object.keys(Ci).join(", "))),r.nodes().layoutPositions(this,e,function(Qa){return function ba(e,t,r){if(0===r)return e;var a=(t.x1+t.x2)/2,i=(t.y1+t.y2)/2,n=t.w/t.h,s=1/n,o=function Wa(e,t,r,a,i){var n=i*Math.PI/180;return{x:Math.cos(n)*(e-r)-Math.sin(n)*(t-a)+r,y:Math.sin(n)*(e-r)+Math.cos(n)*(t-a)+a}}(e.x,e.y,a,i,r),u=function(t,r,a,i,n,s){return{x:(t-a)*n+a,y:(r-i)*s+i}}(o.x,o.y,a,i,n,s);return{x:u.x,y:u.y}}(function(Qa){var ci=Gs(Qa),di=ci.depth,_i=ci.index;if(e.circle){var fi=Math.min(u.w/2/pa,u.h/2/pa),wi=(fi=Math.max(fi,dr))*di+fi-(pa>0&&K[0].length<=3?fi/2:0),Ii=2*Math.PI/K[di].length*_i;return 0===di&&1===K[0].length&&(wi=1),{x:Zr_x+wi*Math.cos(Ii),y:Zr_y+wi*Math.sin(Ii)}}var Yi=K[di].length,Hi=Math.max(1===Yi?0:o?(u.w-2*e.padding-ma.w)/((e.grid?li:Yi)-1):(u.w-2*e.padding-ma.w)/((e.grid?li:Yi)+1),dr);return{x:Zr_x+(_i+1-(Yi+1)/2)*Hi,y:Zr_y+(di+1-(pa+1)/2)*Ga}}(Qa),u,Ci[e.direction])}),this};var A1={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,radius:void 0,startAngle:1.5*Math.PI,sweep:void 0,clockwise:!0,sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(t,r){return!0},ready:void 0,stop:void 0,transform:function(t,r){return r}};function _d(e){this.options=H({},A1,e)}_d.prototype.run=function(){var e=this.options,t=e,r=e.cy,a=t.eles,i=void 0!==t.counterclockwise?!t.counterclockwise:t.clockwise,n=a.nodes().not(":parent");t.sort&&(n=n.sort(t.sort));for(var f,s=kt(t.boundingBox?t.boundingBox:{x1:0,y1:0,w:r.width(),h:r.height()}),o={x:s.x1+s.w/2,y:s.y1+s.h/2},h=(void 0===t.sweep?2*Math.PI-2*Math.PI/n.length:t.sweep)/Math.max(1,n.length-1),p=0,x=0;x<n.length;x++){var _=n[x].layoutDimensions(t);p=Math.max(p,_.w,_.h)}if(f=X(t.radius)?t.radius:n.length<=1?0:Math.min(s.h,s.w)/2-p,n.length>1&&t.avoidOverlap){p*=1.75;var K=Math.cos(h)-Math.cos(0),$=Math.sin(h)-Math.sin(0),q=Math.sqrt(p*p/(K*K+$*$));f=Math.max(q,f)}return a.nodes().layoutPositions(this,t,function(se,Yt){var he=t.startAngle+Yt*h*(i?1:-1),me=f*Math.cos(he),Te=f*Math.sin(he);return{x:o.x+me,y:o.y+Te}}),this};var D1={fit:!0,padding:30,startAngle:1.5*Math.PI,sweep:void 0,clockwise:!0,equidistant:!1,minNodeSpacing:10,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,height:void 0,width:void 0,spacingFactor:void 0,concentric:function(t){return t.degree()},levelWidth:function(t){return t.maxDegree()/4},animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(t,r){return!0},ready:void 0,stop:void 0,transform:function(t,r){return r}};function Ed(e){this.options=H({},D1,e)}Ed.prototype.run=function(){for(var e=this.options,t=e,r=void 0!==t.counterclockwise?!t.counterclockwise:t.clockwise,a=e.cy,i=t.eles,n=i.nodes().not(":parent"),s=kt(t.boundingBox?t.boundingBox:{x1:0,y1:0,w:a.width(),h:a.height()}),o={x:s.x1+s.w/2,y:s.y1+s.h/2},u=[],h=0,f=0;f<n.length;f++){var x,p=n[f];x=t.concentric(p),u.push({value:x,node:p}),p._private.scratch.concentric=x}n.updateStyle();for(var k=0;k<n.length;k++){var U=n[k].layoutDimensions(t);h=Math.max(h,U.w,U.h)}u.sort(function(Ga,li){return li.value-Ga.value});for(var O=t.levelWidth(n),K=[[]],$=K[0],q=0;q<u.length;q++){var vt=u[q];$.length>0&&Math.abs($[0].value-vt.value)>=O&&K.push($=[]),$.push(vt)}var se=h+t.minNodeSpacing;if(!t.avoidOverlap){var Yt=K.length>0&&K[0].length>1,he=Math.min(s.w,s.h)/2-se;se=Math.min(se,he/(K.length+Yt?1:0))}for(var Te=0,Le=0;Le<K.length;Le++){var Ie=K[Le],Oe=void 0===t.sweep?2*Math.PI-2*Math.PI/Ie.length:t.sweep,tr=Ie.dTheta=Oe/Math.max(1,Ie.length-1);if(Ie.length>1&&t.avoidOverlap){var cr=Math.cos(tr)-Math.cos(0),dr=Math.sin(tr)-Math.sin(0),rr=Math.sqrt(se*se/(cr*cr+dr*dr));Te=Math.max(rr,Te)}Ie.r=Te,Te+=se}if(t.equidistant){for(var Cr=0,Vr=0,qr=0;qr<K.length;qr++)Cr=Math.max(Cr,K[qr].r-Vr);Vr=0;for(var ga=0;ga<K.length;ga++){var Ea=K[ga];0===ga&&(Vr=Ea.r),Ea.r=Vr,Vr+=Cr}}for(var pa={},Aa=0;Aa<K.length;Aa++)for(var Ra=K[Aa],Za=Ra.dTheta,Ta=Ra.r,Nr=0;Nr<Ra.length;Nr++){var Ur=Ra[Nr],Zr=t.startAngle+(r?1:-1)*Za*Nr,ma={x:o.x+Ta*Math.cos(Zr),y:o.y+Ta*Math.sin(Zr)};pa[Ur.node.id()]=ma}return i.nodes().layoutPositions(this,t,function(Ga){var li=Ga.id();return pa[li]}),this};var Oc,L1={ready:function(){},stop:function(){},animate:!0,animationEasing:void 0,animationDuration:void 0,animateFilter:function(t,r){return!0},animationThreshold:250,refresh:20,fit:!0,padding:30,boundingBox:void 0,nodeDimensionsIncludeLabels:!1,randomize:!1,componentSpacing:40,nodeRepulsion:function(t){return 2048},nodeOverlap:4,idealEdgeLength:function(t){return 32},edgeElasticity:function(t){return 32},nestingFactor:1.2,gravity:1,numIter:1e3,initialTemp:1e3,coolingFactor:.99,minTemp:1};function el(e){this.options=H({},L1,e),this.options.layout=this;var t=this.options.eles.nodes(),a=this.options.eles.edges().filter(function(i){var n=i.source().data("id"),s=i.target().data("id"),o=t.some(function(h){return h.data("id")===n}),u=t.some(function(h){return h.data("id")===s});return!o||!u});this.options.eles=this.options.eles.not(a)}el.prototype.run=function(){var e=this.options,t=e.cy,r=this;r.stopped=!1,(!0===e.animate||!1===e.animate)&&r.emit({type:"layoutstart",layout:r}),Oc=!0===e.debug;var a=B1(t,r,e);Oc&&(void 0)(a),e.randomize&&M1(a);var i=ia(),n=function(){I1(a,t,e),!0===e.fit&&t.fit(e.padding)},s=function(x){return!(r.stopped||x>=e.numIter||(O1(a,e),a.temperature=a.temperature*e.coolingFactor,a.temperature<e.minTemp))},o=function(){if(!0===e.animate||!1===e.animate)n(),r.one("layoutstop",e.stop),r.emit({type:"layoutstop",layout:r});else{var x=e.eles.nodes(),k=kd(a,e,x);x.layoutPositions(r,e,k)}},u=0,h=!0;if(!0===e.animate){var f=function(){for(var x=0;h&&x<e.refresh;)h=s(u),u++,x++;h?(ia()-i>=e.animationThreshold&&n(),ha(f)):(wd(a,e),o())};f()}else{for(;h;)h=s(u),u++;wd(a,e),o()}return this},el.prototype.stop=function(){return this.stopped=!0,this.thread&&this.thread.stop(),this.emit("layoutstop"),this},el.prototype.destroy=function(){return this.thread&&this.thread.stop(),this};var B1=function(t,r,a){for(var i=a.eles.edges(),n=a.eles.nodes(),s=kt(a.boundingBox?a.boundingBox:{x1:0,y1:0,w:t.width(),h:t.height()}),o={isCompound:t.hasCompoundNodes(),layoutNodes:[],idToIndex:{},nodeSize:n.size(),graphSet:[],indexToGraph:[],layoutEdges:[],edgeSize:i.size(),temperature:a.initialTemp,clientWidth:s.w,clientHeight:s.h,boundingBox:s},u=a.eles.components(),h={},f=0;f<u.length;f++)for(var p=u[f],x=0;x<p.length;x++)h[p[x].id()]=f;for(f=0;f<o.nodeSize;f++){var U=(_=n[f]).layoutDimensions(a);(O={}).isLocked=_.locked(),O.id=_.data("id"),O.parentId=_.data("parent"),O.cmptId=h[_.id()],O.children=[],O.positionX=_.position("x"),O.positionY=_.position("y"),O.offsetX=0,O.offsetY=0,O.height=U.w,O.width=U.h,O.maxX=O.positionX+O.width/2,O.minX=O.positionX-O.width/2,O.maxY=O.positionY+O.height/2,O.minY=O.positionY-O.height/2,O.padLeft=parseFloat(_.style("padding")),O.padRight=parseFloat(_.style("padding")),O.padTop=parseFloat(_.style("padding")),O.padBottom=parseFloat(_.style("padding")),O.nodeRepulsion=z(a.nodeRepulsion)?a.nodeRepulsion(_):a.nodeRepulsion,o.layoutNodes.push(O),o.idToIndex[O.id]=f}var K=[],$=0,q=-1,vt=[];for(f=0;f<o.nodeSize;f++){var _,ae=(_=o.layoutNodes[f]).parentId;null!=ae?o.layoutNodes[o.idToIndex[ae]].children.push(_.id):(K[++q]=_.id,vt.push(_.id))}for(o.graphSet.push(vt);$<=q;){var se=K[$++],he=o.layoutNodes[o.idToIndex[se]].children;if(he.length>0)for(o.graphSet.push(he),f=0;f<he.length;f++)K[++q]=he[f]}for(f=0;f<o.graphSet.length;f++){var me=o.graphSet[f];for(x=0;x<me.length;x++)o.indexToGraph[o.idToIndex[me[x]]]=f}for(f=0;f<o.edgeSize;f++){var Le=i[f],Ie={};Ie.id=Le.data("id"),Ie.sourceId=Le.data("source"),Ie.targetId=Le.data("target");var Oe=z(a.idealEdgeLength)?a.idealEdgeLength(Le):a.idealEdgeLength,tr=z(a.edgeElasticity)?a.edgeElasticity(Le):a.edgeElasticity,cr=o.idToIndex[Ie.sourceId],dr=o.idToIndex[Ie.targetId];if(o.indexToGraph[cr]!=o.indexToGraph[dr]){for(var Vr=R1(Ie.sourceId,Ie.targetId,o),qr=o.graphSet[Vr],Ar=0,O=o.layoutNodes[cr];-1===qr.indexOf(O.id);)O=o.layoutNodes[o.idToIndex[O.parentId]],Ar++;for(O=o.layoutNodes[dr];-1===qr.indexOf(O.id);)O=o.layoutNodes[o.idToIndex[O.parentId]],Ar++;Oe*=Ar*a.nestingFactor}Ie.idealLength=Oe,Ie.elasticity=tr,o.layoutEdges.push(Ie)}return o},R1=function(t,r,a){var i=Cd(t,r,0,a);return 2>i.count?0:i.graph},Cd=function(t,r,a,i){var n=i.graphSet[a];if(-1<n.indexOf(t)&&-1<n.indexOf(r))return{count:2,graph:a};for(var s=0,o=0;o<n.length;o++){var f=i.layoutNodes[i.idToIndex[n[o]]].children;if(0!==f.length){var x=Cd(t,r,i.indexToGraph[i.idToIndex[f[0]]],i);if(0!==x.count){if(1!==x.count)return x;if(2===++s)break}}}return{count:s,graph:a}},M1=function(t,r){for(var a=t.clientWidth,i=t.clientHeight,n=0;n<t.nodeSize;n++){var s=t.layoutNodes[n];0===s.children.length&&!s.isLocked&&(s.positionX=Math.random()*a,s.positionY=Math.random()*i)}},kd=function(t,r,a){var i=t.boundingBox,n={x1:1/0,x2:-1/0,y1:1/0,y2:-1/0};return r.boundingBox&&(a.forEach(function(s){var o=t.layoutNodes[t.idToIndex[s.data("id")]];n.x1=Math.min(n.x1,o.positionX),n.x2=Math.max(n.x2,o.positionX),n.y1=Math.min(n.y1,o.positionY),n.y2=Math.max(n.y2,o.positionY)}),n.w=n.x2-n.x1,n.h=n.y2-n.y1),function(s,o){var u=t.layoutNodes[t.idToIndex[s.data("id")]];return r.boundingBox?{x:i.x1+(0===n.w?.5:(u.positionX-n.x1)/n.w)*i.w,y:i.y1+(0===n.h?.5:(u.positionY-n.y1)/n.h)*i.h}:{x:u.positionX,y:u.positionY}}},I1=function(t,r,a){var i=a.layout,n=a.eles.nodes(),s=kd(t,a,n);n.positions(s),!0!==t.ready&&(t.ready=!0,i.one("layoutready",a.ready),i.emit({type:"layoutready",layout:this}))},O1=function(t,r,a){N1(t,r),W1(t),z1(t,r),V1(t),U1(t)},N1=function(t,r){for(var a=0;a<t.graphSet.length;a++)for(var i=t.graphSet[a],n=i.length,s=0;s<n;s++)for(var o=t.layoutNodes[t.idToIndex[i[s]]],u=s+1;u<n;u++)F1(o,t.layoutNodes[t.idToIndex[i[u]]],t,r)},Td=function(t){return 2*t*Math.random()-1},F1=function(t,r,a,i){if(t.cmptId===r.cmptId||a.isCompound){var o=r.positionX-t.positionX,u=r.positionY-t.positionY;0===o&&0===u&&(o=Td(1),u=Td(1));var f=K1(t,r,o,u);if(f>0)var k=(p=i.nodeOverlap*f)*o/(x=Math.sqrt(o*o+u*u)),_=p*u/x;else{var p,U=rl(t,o,u),O=rl(r,-1*o,-1*u),K=O.x-U.x,$=O.y-U.y,q=K*K+$*$,x=Math.sqrt(q);k=(p=(t.nodeRepulsion+r.nodeRepulsion)/q)*K/x,_=p*$/x}t.isLocked||(t.offsetX-=k,t.offsetY-=_),r.isLocked||(r.offsetX+=k,r.offsetY+=_)}},K1=function(t,r,a,i){if(a>0)var n=t.maxX-r.minX;else n=r.maxX-t.minX;if(i>0)var s=t.maxY-r.minY;else s=r.maxY-t.minY;return n>=0&&s>=0?Math.sqrt(n*n+s*s):0},rl=function(t,r,a){var i=t.positionX,n=t.positionY,s=t.height||1,o=t.width||1,u=a/r,h=s/o,f={};return 0===r&&0<a||0===r&&0>a?(f.x=i,f.y=n+s/2,f):0<r&&-1*h<=u&&u<=h?(f.x=i+o/2,f.y=n+o*a/2/r,f):0>r&&-1*h<=u&&u<=h?(f.x=i-o/2,f.y=n-o*a/2/r,f):0<a&&(u<=-1*h||u>=h)?(f.x=i+s*r/2/a,f.y=n+s/2,f):(0>a&&(u<=-1*h||u>=h)&&(f.x=i-s*r/2/a,f.y=n-s/2),f)},W1=function(t,r){for(var a=0;a<t.edgeSize;a++){var i=t.layoutEdges[a],s=t.layoutNodes[t.idToIndex[i.sourceId]],u=t.layoutNodes[t.idToIndex[i.targetId]],h=u.positionX-s.positionX,f=u.positionY-s.positionY;if(0!==h||0!==f){var p=rl(s,h,f),x=rl(u,-1*h,-1*f),k=x.x-p.x,_=x.y-p.y,U=Math.sqrt(k*k+_*_),O=Math.pow(i.idealLength-U,2)/i.elasticity;if(0!==U)var K=O*k/U,$=O*_/U;else K=0,$=0;s.isLocked||(s.offsetX+=K,s.offsetY+=$),u.isLocked||(u.offsetX-=K,u.offsetY-=$)}}},z1=function(t,r){if(0!==r.gravity)for(var i=0;i<t.graphSet.length;i++){var n=t.graphSet[i],s=n.length;if(0===i)var o=t.clientHeight/2,u=t.clientWidth/2;else{var f=t.layoutNodes[t.idToIndex[t.layoutNodes[t.idToIndex[n[0]]].parentId]];o=f.positionX,u=f.positionY}for(var p=0;p<s;p++){var x=t.layoutNodes[t.idToIndex[n[p]]];if(!x.isLocked){var k=o-x.positionX,_=u-x.positionY,U=Math.sqrt(k*k+_*_);if(U>1){var K=r.gravity*_/U;x.offsetX+=r.gravity*k/U,x.offsetY+=K}}}}},V1=function(t,r){var a=[],i=0,n=-1;for(a.push.apply(a,t.graphSet[0]),n+=t.graphSet[0].length;i<=n;){var s=a[i++],u=t.layoutNodes[t.idToIndex[s]],h=u.children;if(0<h.length&&!u.isLocked){for(var f=u.offsetX,p=u.offsetY,x=0;x<h.length;x++){var k=t.layoutNodes[t.idToIndex[h[x]]];k.offsetX+=f,k.offsetY+=p,a[++n]=h[x]}u.offsetX=0,u.offsetY=0}}},U1=function(t,r){for(var a=0;a<t.nodeSize;a++)0<(i=t.layoutNodes[a]).children.length&&(i.maxX=void 0,i.minX=void 0,i.maxY=void 0,i.minY=void 0);for(a=0;a<t.nodeSize;a++)if(!(0<(i=t.layoutNodes[a]).children.length||i.isLocked)){var n=$1(i.offsetX,i.offsetY,t.temperature);i.positionX+=n.x,i.positionY+=n.y,i.offsetX=0,i.offsetY=0,i.minX=i.positionX-i.width,i.maxX=i.positionX+i.width,i.minY=i.positionY-i.height,i.maxY=i.positionY+i.height,Sd(i,t)}for(a=0;a<t.nodeSize;a++){var i;0<(i=t.layoutNodes[a]).children.length&&!i.isLocked&&(i.positionX=(i.maxX+i.minX)/2,i.positionY=(i.maxY+i.minY)/2,i.width=i.maxX-i.minX,i.height=i.maxY-i.minY)}},$1=function(t,r,a){var i=Math.sqrt(t*t+r*r);if(i>a)var n={x:a*t/i,y:a*r/i};else n={x:t,y:r};return n},Sd=function(t,r){var a=t.parentId;if(null!=a){var i=r.layoutNodes[r.idToIndex[a]],n=!1;if((null==i.maxX||t.maxX+i.padRight>i.maxX)&&(i.maxX=t.maxX+i.padRight,n=!0),(null==i.minX||t.minX-i.padLeft<i.minX)&&(i.minX=t.minX-i.padLeft,n=!0),(null==i.maxY||t.maxY+i.padBottom>i.maxY)&&(i.maxY=t.maxY+i.padBottom,n=!0),(null==i.minY||t.minY-i.padTop<i.minY)&&(i.minY=t.minY-i.padTop,n=!0),n)return Sd(i,r)}},wd=function(t,r){for(var a=t.layoutNodes,i=[],n=0;n<a.length;n++){var s=a[n],o=s.cmptId;(i[o]=i[o]||[]).push(s)}var h=0;for(n=0;n<i.length;n++)if(f=i[n]){f.x1=1/0,f.x2=-1/0,f.y1=1/0,f.y2=-1/0;for(var p=0;p<f.length;p++){var x=f[p];f.x1=Math.min(f.x1,x.positionX-x.width/2),f.x2=Math.max(f.x2,x.positionX+x.width/2),f.y1=Math.min(f.y1,x.positionY-x.height/2),f.y2=Math.max(f.y2,x.positionY+x.height/2)}f.w=f.x2-f.x1,f.h=f.y2-f.y1,h+=f.w*f.h}i.sort(function($,q){return q.w*q.h-$.w*$.h});var k=0,_=0,U=0,O=0,K=Math.sqrt(h)*t.clientWidth/t.clientHeight;for(n=0;n<i.length;n++){var f;if(f=i[n]){for(p=0;p<f.length;p++)(x=f[p]).isLocked||(x.positionX+=k-f.x1,x.positionY+=_-f.y1);k+=f.w+r.componentSpacing,U+=f.w+r.componentSpacing,O=Math.max(O,f.h),U>K&&(_+=O+r.componentSpacing,k=0,U=0,O=0)}}},Y1={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,avoidOverlapPadding:10,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,condense:!1,rows:void 0,cols:void 0,position:function(t){},sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(t,r){return!0},ready:void 0,stop:void 0,transform:function(t,r){return r}};function Ad(e){this.options=H({},Y1,e)}Ad.prototype.run=function(){var e=this.options,t=e,r=e.cy,a=t.eles,i=a.nodes().not(":parent");t.sort&&(i=i.sort(t.sort));var n=kt(t.boundingBox?t.boundingBox:{x1:0,y1:0,w:r.width(),h:r.height()});if(0===n.h||0===n.w)a.nodes().layoutPositions(this,t,function(ga){return{x:n.x1,y:n.y1}});else{var s=i.size(),o=Math.sqrt(s*n.h/n.w),u=Math.round(o),h=Math.round(n.w/n.h*o),f=function(Ea){if(null==Ea)return Math.min(u,h);Math.min(u,h)==u?u=Ea:h=Ea},p=function(Ea){if(null==Ea)return Math.max(u,h);Math.max(u,h)==u?u=Ea:h=Ea},x=t.rows,k=null!=t.cols?t.cols:t.columns;if(null!=x&&null!=k)u=x,h=k;else if(null!=x&&null==k)u=x,h=Math.ceil(s/u);else if(null==x&&null!=k)h=k,u=Math.ceil(s/h);else if(h*u>s){var _=f(),U=p();(_-1)*U>=s?f(_-1):(U-1)*_>=s&&p(U-1)}else for(;h*u<s;){var O=f(),K=p();(K+1)*O>=s?p(K+1):f(O+1)}var $=n.w/h,q=n.h/u;if(t.condense&&($=0,q=0),t.avoidOverlap)for(var vt=0;vt<i.length;vt++){var ae=i[vt],se=ae._private.position;(null==se.x||null==se.y)&&(se.x=0,se.y=0);var Yt=ae.layoutDimensions(t),he=t.avoidOverlapPadding,Te=Yt.h+he;$=Math.max($,Yt.w+he),q=Math.max(q,Te)}for(var Le={},Ie=function(Ea,pa){return!!Le["c-"+Ea+"-"+pa]},Oe=function(Ea,pa){Le["c-"+Ea+"-"+pa]=!0},tr=0,cr=0,dr=function(){++cr>=h&&(cr=0,tr++)},rr={},Cr=0;Cr<i.length;Cr++){var Vr=i[Cr],qr=t.position(Vr);if(qr&&(void 0!==qr.row||void 0!==qr.col)){var Ar={row:qr.row,col:qr.col};if(void 0===Ar.col)for(Ar.col=0;Ie(Ar.row,Ar.col);)Ar.col++;else if(void 0===Ar.row)for(Ar.row=0;Ie(Ar.row,Ar.col);)Ar.row++;rr[Vr.id()]=Ar,Oe(Ar.row,Ar.col)}}i.layoutPositions(this,t,function(Ea,pa){var Aa,Ra;if(Ea.locked()||Ea.isParent())return!1;var Za=rr[Ea.id()];if(Za)Aa=Za.col*$+$/2+n.x1,Ra=Za.row*q+q/2+n.y1;else{for(;Ie(tr,cr);)dr();Aa=cr*$+$/2+n.x1,Ra=tr*q+q/2+n.y1,Oe(tr,cr),dr()}return{x:Aa,y:Ra}})}return this};var H1={ready:function(){},stop:function(){}};function Nc(e){this.options=H({},H1,e)}Nc.prototype.run=function(){var e=this.options,t=e.eles,r=this;return r.emit("layoutstart"),t.nodes().positions(function(){return{x:0,y:0}}),r.one("layoutready",e.ready),r.emit("layoutready"),r.one("layoutstop",e.stop),r.emit("layoutstop"),this},Nc.prototype.stop=function(){return this};var G1={positions:void 0,zoom:void 0,pan:void 0,fit:!0,padding:30,spacingFactor:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(t,r){return!0},ready:void 0,stop:void 0,transform:function(t,r){return r}};function Dd(e){this.options=H({},G1,e)}Dd.prototype.run=function(){var e=this.options,r=e.eles.nodes(),a=z(e.positions);return r.layoutPositions(this,e,function(n,s){var o=function i(n){return null==e.positions?function(t){return{x:t.x,y:t.y}}(n.position()):a?e.positions(n):e.positions[n._private.data.id]??null}(n);return!n.locked()&&null!=o&&o}),this};var q1={fit:!0,padding:30,boundingBox:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(t,r){return!0},ready:void 0,stop:void 0,transform:function(t,r){return r}};function Ld(e){this.options=H({},q1,e)}Ld.prototype.run=function(){var e=this.options,t=e.cy,r=e.eles,a=kt(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:t.width(),h:t.height()});return r.nodes().layoutPositions(this,e,function(s,o){return{x:a.x1+Math.round(Math.random()*a.w),y:a.y1+Math.round(Math.random()*a.h)}}),this};var j1=[{name:"breadthfirst",impl:bd},{name:"circle",impl:_d},{name:"concentric",impl:Ed},{name:"cose",impl:el},{name:"grid",impl:Ad},{name:"null",impl:Nc},{name:"preset",impl:Dd},{name:"random",impl:Ld}];function Bd(e){this.options=e,this.notifications=0}var Rd=function(){},Pd=function(){throw new Error("A headless instance can not render images")};Bd.prototype={recalculateRenderedStyle:Rd,notify:function(){this.notifications++},init:Rd,isHeadless:function(){return!0},png:Pd,jpg:Pd};var Fc={arrowShapeWidth:.3,registerArrowShapes:function(){var e=this.arrowShapes={},t=this,r=function(h,f,p,x,k,_,U){return k.x-p/2-U<=h&&h<=k.x+p/2+U&&k.y-p/2-U<=f&&f<=k.y+p/2+U},a=function(h,f,p,x,k){var _=h*Math.cos(x)-f*Math.sin(x),U=h*Math.sin(x)+f*Math.cos(x);return{x:_*p+k.x,y:U*p+k.y}},i=function(h,f,p,x){for(var k=[],_=0;_<h.length;_+=2)k.push(a(h[_],h[_+1],f,p,x));return k},n=function(h){for(var f=[],p=0;p<h.length;p++){var x=h[p];f.push(x.x,x.y)}return f},s=function(h){return h.pstyle("width").pfValue*h.pstyle("arrow-scale").pfValue*2},o=function(h,f){Xe(f)&&(f=e[f]),e[h]=H({name:h,points:[-.15,-.3,.15,-.3,.15,.3,-.15,.3],collide:function(x,k,_,U,O,K){var $=n(i(this.points,_+2*K,U,O));return Pr(x,k,$)},roughCollide:r,draw:function(x,k,_,U){var O=i(this.points,k,_,U);t.arrowShapeImpl("polygon")(x,O)},spacing:function(x){return 0},gap:s},f)};o("none",{collide:Ua,roughCollide:Ua,draw:Oa,spacing:ir,gap:ir}),o("triangle",{points:[-.15,-.3,0,0,.15,-.3]}),o("arrow","triangle"),o("triangle-backcurve",{points:e.triangle.points,controlPoint:[0,-.15],roughCollide:r,draw:function(h,f,p,x,k){var _=i(this.points,f,p,x),U=this.controlPoint,O=a(U[0],U[1],f,p,x);t.arrowShapeImpl(this.name)(h,_,O)},gap:function(h){return.8*s(h)}}),o("triangle-tee",{points:[0,0,.15,-.3,-.15,-.3,0,0],pointsTee:[-.15,-.4,-.15,-.5,.15,-.5,.15,-.4],collide:function(h,f,p,x,k,_,U){var O=n(i(this.points,p+2*U,x,k)),K=n(i(this.pointsTee,p+2*U,x,k));return Pr(h,f,O)||Pr(h,f,K)},draw:function(h,f,p,x,k){var _=i(this.points,f,p,x),U=i(this.pointsTee,f,p,x);t.arrowShapeImpl(this.name)(h,_,U)}}),o("circle-triangle",{radius:.15,pointsTr:[0,-.15,.15,-.45,-.15,-.45,0,-.15],collide:function(h,f,p,x,k,_,U){var O=k,K=Math.pow(O.x-h,2)+Math.pow(O.y-f,2)<=Math.pow((p+2*U)*this.radius,2),$=n(i(this.points,p+2*U,x,k));return Pr(h,f,$)||K},draw:function(h,f,p,x,k){var _=i(this.pointsTr,f,p,x);t.arrowShapeImpl(this.name)(h,_,x.x,x.y,this.radius*f)},spacing:function(h){return t.getArrowWidth(h.pstyle("width").pfValue,h.pstyle("arrow-scale").value)*this.radius}}),o("triangle-cross",{points:[0,0,.15,-.3,-.15,-.3,0,0],baseCrossLinePts:[-.15,-.4,-.15,-.4,.15,-.4,.15,-.4],crossLinePts:function(h,f){var p=this.baseCrossLinePts.slice(),x=f/h;return p[3]=p[3]-x,p[5]=p[5]-x,p},collide:function(h,f,p,x,k,_,U){var O=n(i(this.points,p+2*U,x,k)),K=n(i(this.crossLinePts(p,_),p+2*U,x,k));return Pr(h,f,O)||Pr(h,f,K)},draw:function(h,f,p,x,k){var _=i(this.points,f,p,x),U=i(this.crossLinePts(f,k),f,p,x);t.arrowShapeImpl(this.name)(h,_,U)}}),o("vee",{points:[-.15,-.3,0,0,.15,-.3,0,-.15],gap:function(h){return.525*s(h)}}),o("circle",{radius:.15,collide:function(h,f,p,x,k,_,U){var O=k;return Math.pow(O.x-h,2)+Math.pow(O.y-f,2)<=Math.pow((p+2*U)*this.radius,2)},draw:function(h,f,p,x,k){t.arrowShapeImpl(this.name)(h,x.x,x.y,this.radius*f)},spacing:function(h){return t.getArrowWidth(h.pstyle("width").pfValue,h.pstyle("arrow-scale").value)*this.radius}}),o("tee",{points:[-.15,0,-.15,-.1,.15,-.1,.15,0],spacing:function(h){return 1},gap:function(h){return 1}}),o("square",{points:[-.15,0,.15,0,.15,-.3,-.15,-.3]}),o("diamond",{points:[-.15,-.15,0,-.3,.15,-.15,0,0],gap:function(h){return h.pstyle("width").pfValue*h.pstyle("arrow-scale").value}}),o("chevron",{points:[0,0,-.15,-.15,-.1,-.2,0,-.1,.1,-.2,.15,-.15],gap:function(h){return.95*h.pstyle("width").pfValue*h.pstyle("arrow-scale").value}})}},Ss={projectIntoViewport:function(e,t){var r=this.cy,a=this.findContainerClientCoords(),i=a[0],n=a[1],s=a[4],o=r.pan(),u=r.zoom();return[((e-i)/s-o.x)/u,((t-n)/s-o.y)/u]},findContainerClientCoords:function(){if(this.containerBB)return this.containerBB;var e=this.container,t=e.getBoundingClientRect(),r=this.cy.window().getComputedStyle(e),a=function(K){return parseFloat(r.getPropertyValue(K))},i_left=a("padding-left"),i_right=a("padding-right"),i_top=a("padding-top"),i_bottom=a("padding-bottom"),n_left=a("border-left-width"),n_right=a("border-right-width"),n_top=a("border-top-width"),s=(a("border-bottom-width"),e.clientWidth);return this.containerBB=[t.left+i_left+n_left,t.top+i_top+n_top,s-(i_left+i_right),e.clientHeight-(i_top+i_bottom),t.width/(s+(n_left+n_right))]},invalidateContainerClientCoordsCache:function(){this.containerBB=null},findNearestElement:function(e,t,r,a){return this.findNearestElements(e,t,r,a)[0]},findNearestElements:function(e,t,r,a){var _,U,i=this,n=this,s=n.getCachedZSortedEles(),o=[],u=n.cy.zoom(),h=n.cy.hasCompoundNodes(),f=(a?24:8)/u,p=(a?8:2)/u,x=(a?8:2)/u,k=1/0;function O(Yt,he){if(Yt.isNode()){if(U)return;U=Yt,o.push(Yt)}if(Yt.isEdge()&&(null==he||he<k))if(_){if(_.pstyle("z-compound-depth").value===Yt.pstyle("z-compound-depth").value&&_.pstyle("z-compound-depth").value===Yt.pstyle("z-compound-depth").value)for(var me=0;me<o.length;me++)if(o[me].isEdge()){o[me]=Yt,_=Yt,k=he??k;break}}else o.push(Yt),_=Yt,k=he??k}function K(Yt){var he=Yt.outerWidth()+2*p,me=Yt.outerHeight()+2*p,Te=he/2,Le=me/2,Ie=Yt.position(),Oe="auto"===Yt.pstyle("corner-radius").value?"auto":Yt.pstyle("corner-radius").pfValue,tr=Yt._private.rscratch;if(Ie.x-Te<=e&&e<=Ie.x+Te&&Ie.y-Le<=t&&t<=Ie.y+Le&&n.nodeShapes[i.getNodeShape(Yt)].checkPoint(e,t,0,he,me,Ie.x,Ie.y,Oe,tr))return O(Yt,0),!0}function $(Yt){var cr,he=Yt._private,me=he.rscratch,Te=Yt.pstyle("width").pfValue,Le=Yt.pstyle("arrow-scale").value,Ie=Te/2+f,Oe=Ie*Ie,tr=2*Ie,Cr=he.source,Vr=he.target;if("segments"===me.edgeType||"straight"===me.edgeType||"haystack"===me.edgeType){for(var dr=me.allpts,rr=0;rr+3<dr.length;rr+=2)if(Me(e,t,dr[rr],dr[rr+1],dr[rr+2],dr[rr+3],tr)&&Oe>(cr=ta(e,t,dr[rr],dr[rr+1],dr[rr+2],dr[rr+3])))return O(Yt,cr),!0}else if("bezier"===me.edgeType||"multibezier"===me.edgeType||"self"===me.edgeType||"compound"===me.edgeType)for(dr=me.allpts,rr=0;rr+5<me.allpts.length;rr+=4)if(Qt(e,t,dr[rr],dr[rr+1],dr[rr+2],dr[rr+3],dr[rr+4],dr[rr+5],tr)&&Oe>(cr=Sr(e,t,dr[rr],dr[rr+1],dr[rr+2],dr[rr+3],dr[rr+4],dr[rr+5])))return O(Yt,cr),!0;Cr=Cr||he.source,Vr=Vr||he.target;var qr=i.getArrowWidth(Te,Le),Ar=[{name:"source",x:me.arrowStartX,y:me.arrowStartY,angle:me.srcArrowAngle},{name:"target",x:me.arrowEndX,y:me.arrowEndY,angle:me.tgtArrowAngle},{name:"mid-source",x:me.midX,y:me.midY,angle:me.midsrcArrowAngle},{name:"mid-target",x:me.midX,y:me.midY,angle:me.midtgtArrowAngle}];for(rr=0;rr<Ar.length;rr++){var Fr=Ar[rr],ga=n.arrowShapes[Yt.pstyle(Fr.name+"-arrow-shape").value],Ea=Yt.pstyle("width").pfValue;if(ga.roughCollide(e,t,qr,Fr.angle,{x:Fr.x,y:Fr.y},Ea,f)&&ga.collide(e,t,qr,Fr.angle,{x:Fr.x,y:Fr.y},Ea,f))return O(Yt),!0}h&&o.length>0&&(K(Cr),K(Vr))}function q(Yt,he,me){return Jt(Yt,he,me)}function vt(Yt,he){var Le,me=Yt._private,Te=x;Le=he?he+"-":"",Yt.boundingBox();var Ie=me.labelBounds[he||"main"],Oe=Yt.pstyle(Le+"label").value;if("yes"===Yt.pstyle("text-events").strValue&&Oe){var cr=q(me.rscratch,"labelX",he),dr=q(me.rscratch,"labelY",he),rr=q(me.rscratch,"labelAngle",he),Cr=Yt.pstyle(Le+"text-margin-x").pfValue,Vr=Yt.pstyle(Le+"text-margin-y").pfValue,qr=Ie.x1-Te-Cr,Ar=Ie.x2+Te-Cr,Fr=Ie.y1-Te-Vr,ga=Ie.y2+Te-Vr;if(rr){var Ea=Math.cos(rr),pa=Math.sin(rr),Aa=function(ma,Ga){return{x:(ma-=cr)*Ea-(Ga-=dr)*pa+cr,y:ma*pa+Ga*Ea+dr}},Ra=Aa(qr,Fr),Za=Aa(qr,ga),Ta=Aa(Ar,Fr),Nr=Aa(Ar,ga);if(Pr(e,t,[Ra.x+Cr,Ra.y+Vr,Ta.x+Cr,Ta.y+Vr,Nr.x+Cr,Nr.y+Vr,Za.x+Cr,Za.y+Vr]))return O(Yt),!0}else if(De(Ie,e,t))return O(Yt),!0}}r&&(s=s.interactive);for(var ae=s.length-1;ae>=0;ae--){var se=s[ae];se.isNode()?K(se)||vt(se):$(se)||vt(se)||vt(se,"source")||vt(se,"target")}return o},getAllInBox:function(e,t,r,a){var i=this.getCachedZSortedEles().interactive,s=2/this.cy.zoom(),o=[],u=Math.min(e,r),h=Math.max(e,r),f=Math.min(t,a),p=Math.max(t,a),x=kt({x1:e=u,y1:t=f,x2:r=h,y2:a=p}),k=[{x:x.x1,y:x.y1},{x:x.x2,y:x.y1},{x:x.x2,y:x.y2},{x:x.x1,y:x.y2}],_=[[k[0],k[1]],[k[1],k[2]],[k[2],k[3]],[k[3],k[0]]];function U(ma,Ga,li){return Jt(ma,Ga,li)}function O(ma,Ga){var li=ma._private,Mi=s;ma.boundingBox();var xi=li.labelBounds.main;if(!xi)return null;var gi=U(li.rscratch,"labelX",Ga),Qa=U(li.rscratch,"labelY",Ga),ci=U(li.rscratch,"labelAngle",Ga),di=ma.pstyle("text-margin-x").pfValue,_i=ma.pstyle("text-margin-y").pfValue,fi=xi.x1-Mi-di,wi=xi.x2+Mi-di,Ii=xi.y1-Mi-_i,Yi=xi.y2+Mi-_i;if(ci){var Hi=Math.cos(ci),Gi=Math.sin(ci),bi=function(va,ge){return{x:(va-=gi)*Hi-(ge-=Qa)*Gi+gi,y:va*Gi+ge*Hi+Qa}};return[bi(fi,Ii),bi(wi,Ii),bi(wi,Yi),bi(fi,Yi)]}return[{x:fi,y:Ii},{x:wi,y:Ii},{x:wi,y:Yi},{x:fi,y:Yi}]}function K(ma,Ga,li,Mi){function Ci(xi,gi,Qa){return(Qa.y-xi.y)*(gi.x-xi.x)>(gi.y-xi.y)*(Qa.x-xi.x)}return Ci(ma,li,Mi)!==Ci(Ga,li,Mi)&&Ci(ma,Ga,li)!==Ci(ma,Ga,Mi)}for(var $=0;$<i.length;$++){var q=i[$];if(q.isNode()){var vt=q,ae="yes"===vt.pstyle("text-events").strValue,se=vt.pstyle("box-selection").strValue,Yt="yes"===vt.pstyle("box-select-labels").strValue;if("none"===se)continue;var me=vt.boundingBox({includeNodes:!0,includeEdges:!1,includeLabels:("overlap"===se||Yt)&&ae});if("contain"===se){var Te=!1;if(Yt&&ae){var Le=O(vt);Le&&ml(Le,k)&&(o.push(vt),Te=!0)}!Te&&l(x,me)&&o.push(vt)}else if("overlap"===se&&fe(x,me)){var Ie=vt.boundingBox({includeNodes:!0,includeEdges:!0,includeLabels:!1,includeMainLabels:!1,includeSourceLabels:!1,includeTargetLabels:!1});if(ml([{x:Ie.x1,y:Ie.y1},{x:Ie.x2,y:Ie.y1},{x:Ie.x2,y:Ie.y2},{x:Ie.x1,y:Ie.y2}],k))o.push(vt);else{var tr=O(vt);tr&&ml(tr,k)&&o.push(vt)}}}else{var cr=q,dr=cr._private,rr=dr.rscratch,Cr=cr.pstyle("box-selection").strValue;if("none"===Cr)continue;if("contain"===Cr){if(null!=rr.startX&&null!=rr.startY&&!De(x,rr.startX,rr.startY)||null!=rr.endX&&null!=rr.endY&&!De(x,rr.endX,rr.endY))continue;if("bezier"===rr.edgeType||"multibezier"===rr.edgeType||"self"===rr.edgeType||"compound"===rr.edgeType||"segments"===rr.edgeType||"haystack"===rr.edgeType){for(var Vr=dr.rstyle.bezierPts||dr.rstyle.linePts||dr.rstyle.haystackPts,qr=!0,Ar=0;Ar<Vr.length;Ar++)if(!tt(x,Vr[Ar])){qr=!1;break}qr&&o.push(cr)}else"straight"===rr.edgeType&&o.push(cr)}else if("overlap"===Cr){var Fr=!1;if(null!=rr.startX&&null!=rr.startY&&null!=rr.endX&&null!=rr.endY&&(De(x,rr.startX,rr.startY)||De(x,rr.endX,rr.endY)))o.push(cr),Fr=!0;else if(!Fr&&"haystack"===rr.edgeType)for(var ga=dr.rstyle.haystackPts,Ea=0;Ea<ga.length;Ea++)if(tt(x,ga[Ea])){o.push(cr),Fr=!0;break}if(!Fr){var pa=dr.rstyle.bezierPts||dr.rstyle.linePts||dr.rstyle.haystackPts;if((!pa||pa.length<2)&&"straight"===rr.edgeType&&null!=rr.startX&&null!=rr.startY&&null!=rr.endX&&null!=rr.endY&&(pa=[{x:rr.startX,y:rr.startY},{x:rr.endX,y:rr.endY}]),!pa||pa.length<2)continue;for(var Aa=0;Aa<pa.length-1;Aa++){for(var Ra=pa[Aa],Za=pa[Aa+1],Ta=0;Ta<_.length;Ta++){var Nr=Gt(_[Ta],2);if(K(Ra,Za,Nr[0],Nr[1])){o.push(cr),Fr=!0;break}}if(Fr)break}}}}}return o}},al={calculateArrowAngles:function(e){var u,h,f,p,x,k,t=e._private.rscratch,r="haystack"===t.edgeType,a="bezier"===t.edgeType,i="multibezier"===t.edgeType,n="segments"===t.edgeType,s="compound"===t.edgeType,o="self"===t.edgeType;r?(f=t.haystackPts[0],p=t.haystackPts[1],x=t.haystackPts[2],k=t.haystackPts[3]):(f=t.arrowStartX,p=t.arrowStartY,x=t.arrowEndX,k=t.arrowEndY),K=t.midX,$=t.midY,n?(u=f-t.segpts[0],h=p-t.segpts[1]):i||s||o||a?(u=f-Ht((_=t.allpts)[0],_[2],_[4],.1),h=p-Ht(_[1],_[3],_[5],.1)):(u=f-K,h=p-$),t.srcArrowAngle=kn(u,h);var K=t.midX,$=t.midY;if(r&&(K=(f+x)/2,$=(p+k)/2),u=x-f,h=k-p,n)if((_=t.allpts).length/2%2==0)u=_[q=_.length/2]-_[vt=q-2],h=_[q+1]-_[vt+1];else if(t.isRound)u=t.midVector[1],h=-t.midVector[0];else{var vt;u=_[q=_.length/2-1]-_[vt=q-2],h=_[q+1]-_[vt+1]}else if(i||s||o){var se,Yt,he,me,Le,Te,Ie,_=t.allpts;t.ctrlpts.length/2%2==0?(se=Ht(_[Te=_.length/2-1],_[Le=Te+2],_[Ie=Le+2],0),Yt=Ht(_[Te+1],_[Le+1],_[Ie+1],0),he=Ht(_[Te],_[Le],_[Ie],1e-4),me=Ht(_[Te+1],_[Le+1],_[Ie+1],1e-4)):(se=Ht(_[Te=(Le=_.length/2-1)-2],_[Le],_[Ie=Le+2],.4999),Yt=Ht(_[Te+1],_[Le+1],_[Ie+1],.4999),he=Ht(_[Te],_[Le],_[Ie],.5),me=Ht(_[Te+1],_[Le+1],_[Ie+1],.5)),u=he-se,h=me-Yt}if(t.midtgtArrowAngle=kn(u,h),t.midDispX=u,t.midDispY=h,u*=-1,h*=-1,n&&(_=t.allpts).length/2%2!=0&&!t.isRound){var q,Oe=2+(q=_.length/2-1);u=-(_[Oe]-_[q]),h=-(_[Oe+1]-_[q+1])}if(t.midsrcArrowAngle=kn(u,h),n)u=x-t.segpts[t.segpts.length-2],h=k-t.segpts[t.segpts.length-1];else if(i||s||o||a){var tr=(_=t.allpts).length;u=x-Ht(_[tr-6],_[tr-4],_[tr-2],.9),h=k-Ht(_[tr-5],_[tr-3],_[tr-1],.9)}else u=x-K,h=k-$;t.tgtArrowAngle=kn(u,h)}};al.getArrowWidth=al.getArrowHeight=function(e,t){var r=this.arrowWidthCache=this.arrowWidthCache||{},a=r[e+", "+t];return a||(a=Math.max(Math.pow(13.37*e,.9),29)*t,r[e+", "+t]=a,a)};var Kc,Wc,Id,ws,il,ls,As,Ds,as,qs,nl,Od,Nd,zc,Vc,Fd,rs={},qn={},Kd=function(t,r,a){a.x=r.x-t.x,a.y=r.y-t.y,a.len=Math.sqrt(a.x*a.x+a.y*a.y),a.nx=a.x/a.len,a.ny=a.y/a.len,a.ang=Math.atan2(a.ny,a.nx)};function Wd(e,t){0===t.radius?e.lineTo(t.cx,t.cy):e.arc(t.cx,t.cy,t.radius,t.startAngle,t.endAngle,t.counterClockwise)}function Uc(e,t,r,a){return 0===a||0===t.radius?{cx:t.x,cy:t.y,radius:0,startX:t.x,startY:t.y,stopX:t.x,stopY:t.y,startAngle:void 0,endAngle:void 0,counterClockwise:void 0}:(function(t,r,a,i,n){if(t!==Fd?Kd(r,t,rs):function(t,r){r.x=-1*t.x,r.y=-1*t.y,r.nx=-1*t.nx,r.ny=-1*t.ny,r.ang=t.ang>0?-(Math.PI-t.ang):Math.PI+t.ang}(qn,rs),Kd(r,a,qn),Id=rs.nx*qn.nx-rs.ny*-qn.ny,ls=Math.asin(Math.max(-1,Math.min(1,rs.nx*qn.ny-rs.ny*qn.nx))),Math.abs(ls)<1e-6)return Kc=r.x,Wc=r.y,void(Ds=qs=0);ws=1,il=!1,Id<0?ls<0?ls=Math.PI+ls:(ls=Math.PI-ls,ws=-1,il=!0):ls>0&&(ws=-1,il=!0),qs=void 0!==r.radius?r.radius:i,As=ls/2,nl=Math.min(rs.len/2,qn.len/2),n?(as=Math.abs(Math.cos(As)*qs/Math.sin(As)))>nl?(as=nl,Ds=Math.abs(as*Math.sin(As)/Math.cos(As))):Ds=qs:(as=Math.min(nl,qs),Ds=Math.abs(as*Math.sin(As)/Math.cos(As))),Kc=(zc=r.x+qn.nx*as)-qn.ny*Ds*ws,Wc=(Vc=r.y+qn.ny*as)+qn.nx*Ds*ws,Od=r.x+rs.nx*as,Nd=r.y+rs.ny*as,Fd=r}(e,t,r,a,!(arguments.length>4&&void 0!==arguments[4])||arguments[4]),{cx:Kc,cy:Wc,radius:Ds,startX:Od,startY:Nd,stopX:zc,stopY:Vc,startAngle:rs.ang+Math.PI/2*ws,endAngle:qn.ang-Math.PI/2*ws,counterClockwise:il})}var Q1=Math.sqrt(.02),In={};function zd(e){var t=[];if(null!=e){for(var r=0;r<e.length;r+=2)t.push({x:e[r],y:e[r+1]});return t}}In.findMidptPtsEtc=function(e,t){var n,me,Te,Le,r=t.posPts,a=t.intersectionPts,i=t.vectorNormInverse,s=e.pstyle("source-endpoint"),o=e.pstyle("target-endpoint"),u=null!=s.units&&null!=o.units;switch(e.pstyle("edge-distances").value){case"node-position":n=r;break;case"intersection":n=a;break;case"endpoints":if(u){var x=Gt(this.manualEndptToPx(e.source()[0],s),2),k=x[0],_=x[1],O=Gt(this.manualEndptToPx(e.target()[0],o),2),K=O[0],$=O[1],q={x1:k,y1:_,x2:K,y2:$};Te=K-k,i={x:-(me=$-_)/(Le=Math.sqrt(Te*Te+me*me)),y:Te/Le},n=q}else _a("Edge ".concat(e.id()," has edge-distances:endpoints specified without manual endpoints specified via source-endpoint and target-endpoint.  Falling back on edge-distances:intersection (default).")),n=a}return{midptPts:n,vectorNormInverse:i}},In.findHaystackPoints=function(e){for(var t=0;t<e.length;t++){var r=e[t],a=r._private,i=a.rscratch;if(!i.haystack){var n=2*Math.random()*Math.PI;i.source={x:Math.cos(n),y:Math.sin(n)},n=2*Math.random()*Math.PI,i.target={x:Math.cos(n),y:Math.sin(n)}}var s=a.source,o=a.target,u=s.position(),h=o.position(),f=s.width(),p=o.width(),x=s.height(),k=o.height(),U=r.pstyle("haystack-radius").value/2;i.haystackPts=i.allpts=[i.source.x*f*U+u.x,i.source.y*x*U+u.y,i.target.x*p*U+h.x,i.target.y*k*U+h.y],i.midX=(i.allpts[0]+i.allpts[2])/2,i.midY=(i.allpts[1]+i.allpts[3])/2,i.edgeType="haystack",i.haystack=!0,this.storeEdgeProjections(r),this.calculateArrowAngles(r),this.recalculateEdgeLabelProjections(r),this.calculateLabelAngles(r)}},In.findSegmentsPoints=function(e,t){var r=e._private.rscratch,a=e.pstyle("segment-weights"),i=e.pstyle("segment-distances"),n=e.pstyle("segment-radii"),s=e.pstyle("radius-type"),o=Math.min(a.pfValue.length,i.pfValue.length),u=n.pfValue[n.pfValue.length-1],h=s.pfValue[s.pfValue.length-1];r.edgeType="segments",r.segpts=[],r.radii=[],r.isArcRadius=[];for(var f=0;f<o;f++){var p=a.pfValue[f],x=i.pfValue[f],k=1-p,_=p,U=this.findMidptPtsEtc(e,t),O=U.midptPts,K=U.vectorNormInverse,$={x:O.x1*k+O.x2*_,y:O.y1*k+O.y2*_};r.segpts.push($.x+K.x*x,$.y+K.y*x),r.radii.push(void 0!==n.pfValue[f]?n.pfValue[f]:u),r.isArcRadius.push("arc-radius"===(void 0!==s.pfValue[f]?s.pfValue[f]:h))}},In.findLoopPoints=function(e,t,r,a){var i=e._private.rscratch,n=t.dirCounts,s=t.srcPos,o=e.pstyle("control-point-distances"),u=o?o.pfValue[0]:void 0,h=e.pstyle("loop-direction").pfValue,f=e.pstyle("loop-sweep").pfValue,p=e.pstyle("control-point-step-size").pfValue;i.edgeType="self";var x=r,k=p;a&&(x=0,k=u);var _=h-Math.PI/2,U=_-f/2,O=_+f/2,K=h+"_"+f;x=void 0===n[K]?n[K]=0:++n[K],i.ctrlpts=[s.x+1.4*Math.cos(U)*k*(x/3+1),s.y+1.4*Math.sin(U)*k*(x/3+1),s.x+1.4*Math.cos(O)*k*(x/3+1),s.y+1.4*Math.sin(O)*k*(x/3+1)]},In.findCompoundLoopPoints=function(e,t,r,a){var i=e._private.rscratch;i.edgeType="compound";var n=t.srcPos,s=t.tgtPos,o=t.srcW,u=t.srcH,h=t.tgtW,f=t.tgtH,p=e.pstyle("control-point-step-size").pfValue,x=e.pstyle("control-point-distances"),_=r,U=p;a&&(_=0,U=x?x.pfValue[0]:void 0);var K={x:n.x-o/2,y:n.y-u/2},$={x:s.x-h/2,y:s.y-f/2},q={x:Math.min(K.x,$.x),y:Math.min(K.y,$.y)},ae=Math.max(.5,Math.log(.01*o)),se=Math.max(.5,Math.log(.01*h));i.ctrlpts=[q.x,q.y-(1+Math.pow(50,1.12)/100)*U*(_/3+1)*ae,q.x-(1+Math.pow(50,1.12)/100)*U*(_/3+1)*se,q.y]},In.findStraightEdgePoints=function(e){e._private.rscratch.edgeType="straight"},In.findBezierPoints=function(e,t,r,a,i){var n=e._private.rscratch,s=e.pstyle("control-point-step-size").pfValue,o=e.pstyle("control-point-distances"),u=e.pstyle("control-point-weights"),h=o&&u?Math.min(o.value.length,u.value.length):1,f=o?o.pfValue[0]:void 0,p=u.value[0],x=a;n.edgeType=x?"multibezier":"bezier",n.ctrlpts=[];for(var k=0;k<h;k++){var U,_=(.5-t.eles.length/2+r)*s*(i?-1:1),O=un(_);x&&(f=o?o.pfValue[k]:s,p=u.value[k]);var K=void 0!==(U=a?f:void 0!==f?O*f:void 0)?U:_,$=1-p,q=p,vt=this.findMidptPtsEtc(e,t),ae=vt.midptPts,se=vt.vectorNormInverse,Yt={x:ae.x1*$+ae.x2*q,y:ae.y1*$+ae.y2*q};n.ctrlpts.push(Yt.x+se.x*K,Yt.y+se.y*K)}},In.findTaxiPoints=function(e,t){var r=e._private.rscratch;r.edgeType="segments";var a="vertical",i="horizontal",n="leftward",s="rightward",o="downward",u="upward",f=t.posPts,p=t.srcW,x=t.srcH,k=t.tgtW,_=t.tgtH,O="node-position"!==e.pstyle("edge-distances").value,K=e.pstyle("taxi-direction").value,$=K,q=e.pstyle("taxi-turn"),vt="%"===q.units,ae=q.pfValue,se=ae<0,Yt=e.pstyle("taxi-turn-min-distance").pfValue,me=O?(x+_)/2:0,Te=f.x2-f.x1,Le=f.y2-f.y1,Ie=function(ge,$r){return ge>0?Math.max(ge-$r,0):Math.min(ge+$r,0)},Oe=Ie(Te,O?(p+k)/2:0),tr=Ie(Le,me),cr=!1;"auto"===$?K=Math.abs(Oe)>Math.abs(tr)?i:a:$===u||$===o?(K=a,cr=!0):($===n||$===s)&&(K=i,cr=!0);var Ar,dr=K===a,rr=dr?tr:Oe,Cr=dr?Le:Te,Vr=un(Cr),qr=!1;(!cr||!vt&&!se)&&($===o&&Cr<0||$===u&&Cr>0||$===n&&Cr>0||$===s&&Cr<0)&&(rr=(Vr*=-1)*Math.abs(rr),qr=!0);var Ea=function(ge){return Math.abs(ge)<Yt||Math.abs(ge)>=Math.abs(rr)},pa=Ea(Ar=vt?(ae<0?1+ae:ae)*rr:(ae<0?rr:0)+ae*Vr),Aa=Ea(Math.abs(rr)-Math.abs(Ar));if(!pa&&!Aa||qr)if(dr){var fi=f.y1+Ar+(O?x/2*Vr:0);r.segpts=[f.x1,fi,f.x2,fi]}else{var Yi=f.x1+Ar+(O?p/2*Vr:0);r.segpts=[Yi,f.y1,Yi,f.y2]}else if(dr){var Za=Math.abs(Cr)<=x/2,Ta=Math.abs(Te)<=k/2;if(Za){var Nr=(f.x1+f.x2)/2;r.segpts=[Nr,f.y1,Nr,f.y2]}else if(Ta){var ma=(f.y1+f.y2)/2;r.segpts=[f.x1,ma,f.x2,ma]}else r.segpts=[f.x1,f.y2]}else{var Mi=Math.abs(Cr)<=p/2,Ci=Math.abs(Le)<=_/2;if(Mi){var xi=(f.y1+f.y2)/2;r.segpts=[f.x1,xi,f.x2,xi]}else if(Ci){var ci=(f.x1+f.x2)/2;r.segpts=[ci,f.y1,ci,f.y2]}else r.segpts=[f.x2,f.y1]}if(r.isRound){var bi=e.pstyle("taxi-radius").value,ai="arc-radius"===e.pstyle("radius-type").value[0];r.radii=new Array(r.segpts.length/2).fill(bi),r.isArcRadius=new Array(r.segpts.length/2).fill(ai)}},In.tryToCorrectInvalidPoints=function(e,t){var r=e._private.rscratch;if("bezier"===r.edgeType){var a=t.srcPos,i=t.tgtPos,n=t.srcW,s=t.srcH,o=t.tgtW,u=t.tgtH,h=t.srcShape,f=t.tgtShape,p=t.srcCornerRadius,x=t.tgtCornerRadius,k=t.srcRs,_=t.tgtRs,U=!X(r.startX)||!X(r.startY),O=!X(r.arrowStartX)||!X(r.arrowStartY),K=!X(r.endX)||!X(r.endY),$=!X(r.arrowEndX)||!X(r.arrowEndY),ae=this.getArrowWidth(e.pstyle("width").pfValue,e.pstyle("arrow-scale").value)*this.arrowShapeWidth*3,se=Xi({x:r.ctrlpts[0],y:r.ctrlpts[1]},{x:r.startX,y:r.startY}),Yt=se<ae,he=Xi({x:r.ctrlpts[0],y:r.ctrlpts[1]},{x:r.endX,y:r.endY}),me=he<ae,Te=!1;if(U||O||Yt){Te=!0;var Le={x:r.ctrlpts[0]-a.x,y:r.ctrlpts[1]-a.y},Ie=Math.sqrt(Le.x*Le.x+Le.y*Le.y),Oe={x:Le.x/Ie,y:Le.y/Ie},tr=Math.max(n,s),cr={x:r.ctrlpts[0]+2*Oe.x*tr,y:r.ctrlpts[1]+2*Oe.y*tr},dr=h.intersectLine(a.x,a.y,n,s,cr.x,cr.y,0,p,k);Yt?(r.ctrlpts[0]=r.ctrlpts[0]+Oe.x*(ae-se),r.ctrlpts[1]=r.ctrlpts[1]+Oe.y*(ae-se)):(r.ctrlpts[0]=dr[0]+Oe.x*ae,r.ctrlpts[1]=dr[1]+Oe.y*ae)}if(K||$||me){Te=!0;var rr={x:r.ctrlpts[0]-i.x,y:r.ctrlpts[1]-i.y},Cr=Math.sqrt(rr.x*rr.x+rr.y*rr.y),Vr={x:rr.x/Cr,y:rr.y/Cr},qr=Math.max(n,s),Ar={x:r.ctrlpts[0]+2*Vr.x*qr,y:r.ctrlpts[1]+2*Vr.y*qr},Fr=f.intersectLine(i.x,i.y,o,u,Ar.x,Ar.y,0,x,_);me?(r.ctrlpts[0]=r.ctrlpts[0]+Vr.x*(ae-he),r.ctrlpts[1]=r.ctrlpts[1]+Vr.y*(ae-he)):(r.ctrlpts[0]=Fr[0]+Vr.x*ae,r.ctrlpts[1]=Fr[1]+Vr.y*ae)}Te&&this.findEndpoints(e)}},In.storeAllpts=function(e){var t=e._private.rscratch;if("multibezier"===t.edgeType||"bezier"===t.edgeType||"self"===t.edgeType||"compound"===t.edgeType){t.allpts=[],t.allpts.push(t.startX,t.startY);for(var r=0;r+1<t.ctrlpts.length;r+=2)t.allpts.push(t.ctrlpts[r],t.ctrlpts[r+1]),r+3<t.ctrlpts.length&&t.allpts.push((t.ctrlpts[r]+t.ctrlpts[r+2])/2,(t.ctrlpts[r+1]+t.ctrlpts[r+3])/2);var a;t.allpts.push(t.endX,t.endY),t.ctrlpts.length/2%2==0?(t.midX=t.allpts[a=t.allpts.length/2-1],t.midY=t.allpts[a+1]):(t.midX=Ht(t.allpts[a=t.allpts.length/2-3],t.allpts[a+2],t.allpts[a+4],.5),t.midY=Ht(t.allpts[a+1],t.allpts[a+3],t.allpts[a+5],.5))}else if("straight"===t.edgeType)t.allpts=[t.startX,t.startY,t.endX,t.endY],t.midX=(t.startX+t.endX+t.arrowStartX+t.arrowEndX)/4,t.midY=(t.startY+t.endY+t.arrowStartY+t.arrowEndY)/4;else if("segments"===t.edgeType){if(t.allpts=[],t.allpts.push(t.startX,t.startY),t.allpts.push.apply(t.allpts,t.segpts),t.allpts.push(t.endX,t.endY),t.isRound){t.roundCorners=[];for(var n=2;n+3<t.allpts.length;n+=2){var s=t.radii[n/2-1];t.roundCorners.push(Uc({x:t.allpts[n-2],y:t.allpts[n-1]},{x:t.allpts[n],y:t.allpts[n+1],radius:s},{x:t.allpts[n+2],y:t.allpts[n+3]},s,t.isArcRadius[n/2-1]))}}if(t.segpts.length%4==0){var u=t.segpts.length/2,h=u-2;t.midX=(t.segpts[h]+t.segpts[u])/2,t.midY=(t.segpts[h+1]+t.segpts[u+1])/2}else{var f=t.segpts.length/2-1;if(t.isRound){var p={x:t.segpts[f],y:t.segpts[f+1]},x=t.roundCorners[f/2];if(0===x.radius){var k={x:t.segpts[f+2],y:t.segpts[f+3]};t.midX=p.x,t.midY=p.y,t.midVector=[p.y-k.y,k.x-p.x]}else{var _=[p.x-x.cx,p.y-x.cy],U=x.radius/Math.sqrt(Math.pow(_[0],2)+Math.pow(_[1],2));_=_.map(function(O){return O*U}),t.midX=x.cx+_[0],t.midY=x.cy+_[1],t.midVector=_}}else t.midX=t.segpts[f],t.midY=t.segpts[f+1]}}},In.checkForInvalidEdgeWarning=function(e){var t=e[0]._private.rscratch;t.nodesOverlap||X(t.startX)&&X(t.startY)&&X(t.endX)&&X(t.endY)?t.loggedErr=!1:t.loggedErr||(t.loggedErr=!0,_a("Edge `"+e.id()+"` has invalid endpoints and so it is impossible to draw.  Adjust your edge style (e.g. control points) accordingly or use an alternative edge type.  This is expected behaviour when the source node and the target node overlap."))},In.findEdgeControlPoints=function(e){var t=this;if(e&&0!==e.length){for(var r=this,i=r.cy.hasCompoundNodes(),n=new Dt,s=function(me,Te){return[].concat(j(me),[Te?1:0]).join("-")},o=[],u=[],h=0;h<e.length;h++){var f=e[h],p=f._private,x=f.pstyle("curve-style").value;if(!f.removed()&&f.takesUpSpace()){if("haystack"===x){u.push(f);continue}var k="unbundled-bezier"===x||Tt(x,"segments")||"straight"===x||"straight-triangle"===x||Tt(x,"taxi"),_="unbundled-bezier"===x||"bezier"===x,O=p.target,q=[p.source.poolIndex(),O.poolIndex()].sort(),vt=s(q,k),ae=n.get(vt);null==ae&&(ae={eles:[]},o.push({pairId:q,edgeIsUnbundled:k}),n.set(vt,ae)),ae.eles.push(f),k&&(ae.hasUnbundled=!0),_&&(ae.hasBezier=!0)}}for(var se=function(){var tr,me=o[Yt],Ie=s(me.pairId,me.edgeIsUnbundled),Oe=n.get(Ie);if(!Oe.hasUnbundled){var cr=Oe.eles[0].parallelEdges().filter(function(ai){return ai.isBundledBezier()});Ct(Oe.eles),cr.forEach(function(ai){return Oe.eles.push(ai)}),Oe.eles.sort(function(ai,va){return ai.poolIndex()-va.poolIndex()})}var dr=Oe.eles[0],rr=dr.source(),Cr=dr.target();if(rr.poolIndex()>Cr.poolIndex()){var Vr=rr;rr=Cr,Cr=Vr}var qr=Oe.srcPos=rr.position(),Ar=Oe.tgtPos=Cr.position(),Fr=Oe.srcW=rr.outerWidth(),ga=Oe.srcH=rr.outerHeight(),Ea=Oe.tgtW=Cr.outerWidth(),pa=Oe.tgtH=Cr.outerHeight(),Aa=Oe.srcShape=r.nodeShapes[t.getNodeShape(rr)],Ra=Oe.tgtShape=r.nodeShapes[t.getNodeShape(Cr)],Za=Oe.srcCornerRadius="auto"===rr.pstyle("corner-radius").value?"auto":rr.pstyle("corner-radius").pfValue,Ta=Oe.tgtCornerRadius="auto"===Cr.pstyle("corner-radius").value?"auto":Cr.pstyle("corner-radius").pfValue,Nr=Oe.tgtRs=Cr._private.rscratch,Ur=Oe.srcRs=rr._private.rscratch;Oe.dirCounts={north:0,west:0,south:0,east:0,northwest:0,southwest:0,northeast:0,southeast:0};for(var Zr=0;Zr<Oe.eles.length;Zr++){var ma=Oe.eles[Zr],Ga=ma[0]._private.rscratch,li=ma.pstyle("curve-style").value,Mi="unbundled-bezier"===li||Tt(li,"segments")||Tt(li,"taxi"),Ci=!rr.same(ma.source());if(!Oe.calculatedIntersection&&rr!==Cr&&(Oe.hasBezier||Oe.hasUnbundled)){Oe.calculatedIntersection=!0;var xi=Aa.intersectLine(qr.x,qr.y,Fr,ga,Ar.x,Ar.y,0,Za,Ur),gi=Oe.srcIntn=xi,Qa=Ra.intersectLine(Ar.x,Ar.y,Ea,pa,qr.x,qr.y,0,Ta,Nr),ci=Oe.tgtIntn=Qa,di=Oe.intersectionPts={x1:xi[0],x2:Qa[0],y1:xi[1],y2:Qa[1]},_i=Oe.posPts={x1:qr.x,x2:Ar.x,y1:qr.y,y2:Ar.y},fi=Qa[1]-xi[1],wi=Qa[0]-xi[0],Ii=Math.sqrt(wi*wi+fi*fi);X(Ii)&&Ii>=Q1||(Ii=Math.sqrt(Math.max(wi*wi,.01)+Math.max(fi*fi,.01)));var Yi=Oe.vector={x:wi,y:fi},Hi=Oe.vectorNorm={x:Yi.x/Ii,y:Yi.y/Ii},Gi={x:-Hi.y,y:Hi.x};Oe.nodesOverlap=!X(Ii)||Ra.checkPoint(xi[0],xi[1],0,Ea,pa,Ar.x,Ar.y,Ta,Nr)||Aa.checkPoint(Qa[0],Qa[1],0,Fr,ga,qr.x,qr.y,Za,Ur),Oe.vectorNormInverse=Gi,tr={nodesOverlap:Oe.nodesOverlap,dirCounts:Oe.dirCounts,calculatedIntersection:!0,hasBezier:Oe.hasBezier,hasUnbundled:Oe.hasUnbundled,eles:Oe.eles,srcPos:Ar,srcRs:Nr,tgtPos:qr,tgtRs:Ur,srcW:Ea,srcH:pa,tgtW:Fr,tgtH:ga,srcIntn:ci,tgtIntn:gi,srcShape:Ra,tgtShape:Aa,posPts:{x1:_i.x2,y1:_i.y2,x2:_i.x1,y2:_i.y1},intersectionPts:{x1:di.x2,y1:di.y2,x2:di.x1,y2:di.y1},vector:{x:-Yi.x,y:-Yi.y},vectorNorm:{x:-Hi.x,y:-Hi.y},vectorNormInverse:{x:-Gi.x,y:-Gi.y}}}var bi=Ci?tr:Oe;Ga.nodesOverlap=bi.nodesOverlap,Ga.srcIntn=bi.srcIntn,Ga.tgtIntn=bi.tgtIntn,Ga.isRound=li.startsWith("round"),i&&(rr.isParent()||rr.isChild()||Cr.isParent()||Cr.isChild())&&(rr.parents().anySame(Cr)||Cr.parents().anySame(rr)||rr.same(Cr)&&rr.isParent())?t.findCompoundLoopPoints(ma,bi,Zr,Mi):rr===Cr?t.findLoopPoints(ma,bi,Zr,Mi):li.endsWith("segments")?t.findSegmentsPoints(ma,bi):li.endsWith("taxi")?t.findTaxiPoints(ma,bi):"straight"===li||!Mi&&Oe.eles.length%2==1&&Zr===Math.floor(Oe.eles.length/2)?t.findStraightEdgePoints(ma):t.findBezierPoints(ma,bi,Zr,Mi,Ci),t.findEndpoints(ma),t.tryToCorrectInvalidPoints(ma,bi),t.checkForInvalidEdgeWarning(ma),t.storeAllpts(ma),t.storeEdgeProjections(ma),t.calculateArrowAngles(ma),t.recalculateEdgeLabelProjections(ma),t.calculateLabelAngles(ma)}},Yt=0;Yt<o.length;Yt++)se();this.findHaystackPoints(u)}},In.getSegmentPoints=function(e){var t=e[0]._private.rscratch;if(this.recalculateRenderedStyle(e),"segments"===t.edgeType)return zd(t.segpts)},In.getControlPoints=function(e){var t=e[0]._private.rscratch;this.recalculateRenderedStyle(e);var r=t.edgeType;if("bezier"===r||"multibezier"===r||"self"===r||"compound"===r)return zd(t.ctrlpts)},In.getEdgeMidpoint=function(e){var t=e[0]._private.rscratch;return this.recalculateRenderedStyle(e),{x:t.midX,y:t.midY}};var yo={manualEndptToPx:function(e,t){var a=e.position(),i=e.outerWidth(),n=e.outerHeight(),s=e._private.rscratch;if(2===t.value.length){var o=[t.pfValue[0],t.pfValue[1]];return"%"===t.units[0]&&(o[0]=o[0]*i),"%"===t.units[1]&&(o[1]=o[1]*n),o[0]+=a.x,o[1]+=a.y,o}var u=t.pfValue[0];u=-Math.PI/2+u;var h=2*Math.max(i,n),f=[a.x+Math.cos(u)*h,a.y+Math.sin(u)*h];return this.nodeShapes[this.getNodeShape(e)].intersectLine(a.x,a.y,i,n,f[0],f[1],0,"auto"===e.pstyle("corner-radius").value?"auto":e.pstyle("corner-radius").pfValue,s)},findEndpoints:function(e){var t,r,a,i,s,n=this,o=e.source()[0],u=e.target()[0],h=o.position(),f=u.position(),p=e.pstyle("target-arrow-shape").value,x=e.pstyle("source-arrow-shape").value,k=e.pstyle("target-distance-from-node").pfValue,_=e.pstyle("source-distance-from-node").pfValue,U=o._private.rscratch,O=u._private.rscratch,K=e.pstyle("curve-style").value,$=e._private.rscratch,q=$.edgeType,vt=Tt(K,"taxi"),ae="self"===q||"compound"===q,se="bezier"===q||"multibezier"===q||ae,Yt="bezier"!==q,he="straight"===q||"segments"===q,me="segments"===q,Te=se||Yt||he,Le=ae||vt,Ie=e.pstyle("source-endpoint"),Oe=Le?"outside-to-node":Ie.value,tr="auto"===o.pstyle("corner-radius").value?"auto":o.pstyle("corner-radius").pfValue,cr=e.pstyle("target-endpoint"),dr=Le?"outside-to-node":cr.value,rr="auto"===u.pstyle("corner-radius").value?"auto":u.pstyle("corner-radius").pfValue;$.srcManEndpt=Ie,$.tgtManEndpt=cr;var Cr,Vr,qr,Ar,Fr=null!==(t=2===(null==cr||null===(r=cr.pfValue)||void 0===r?void 0:r.length)?cr.pfValue:null)&&void 0!==t?t:[0,0],ga=null!==(a=2===(null==Ie||null===(i=Ie.pfValue)||void 0===i?void 0:i.length)?Ie.pfValue:null)&&void 0!==a?a:[0,0];if(se){var Ea=[$.ctrlpts[0],$.ctrlpts[1]];Cr=Yt?[$.ctrlpts[$.ctrlpts.length-2],$.ctrlpts[$.ctrlpts.length-1]]:Ea,Vr=Ea}else if(he){var Aa=me?$.segpts.slice(0,2):[f.x+Fr[0],f.y+Fr[1]];Cr=me?$.segpts.slice($.segpts.length-2):[h.x+ga[0],h.y+ga[1]],Vr=Aa}if("inside-to-node"===dr)s=[f.x,f.y];else if(cr.units)s=this.manualEndptToPx(u,cr);else if("outside-to-line"===dr)s=$.tgtIntn;else if("outside-to-node"===dr||"outside-to-node-or-label"===dr?qr=Cr:("outside-to-line"===dr||"outside-to-line-or-label"===dr)&&(qr=[h.x,h.y]),s=n.nodeShapes[this.getNodeShape(u)].intersectLine(f.x,f.y,u.outerWidth(),u.outerHeight(),qr[0],qr[1],0,rr,O),"outside-to-node-or-label"===dr||"outside-to-line-or-label"===dr){var Za=u._private.rscratch,Ur=Za.labelX,Zr=Za.labelY,ma=Za.labelWidth/2,Ga=Za.labelHeight/2,li=u.pstyle("text-valign").value;"top"===li?Zr-=Ga:"bottom"===li&&(Zr+=Ga);var Mi=u.pstyle("text-halign").value;"left"===Mi?Ur-=ma:"right"===Mi&&(Ur+=ma);var Ci=Tn(qr[0],qr[1],[Ur-ma,Zr-Ga,Ur+ma,Zr-Ga,Ur+ma,Zr+Ga,Ur-ma,Zr+Ga],f.x,f.y);if(Ci.length>0){var xi=h,gi=rn(xi,hn(s)),Qa=rn(xi,hn(Ci)),ci=gi;Qa<gi&&(s=Ci,ci=Qa),Ci.length>2&&rn(xi,{x:Ci[2],y:Ci[3]})<ci&&(s=[Ci[2],Ci[3]])}}var _i=an(s,Cr,n.arrowShapes[p].spacing(e)+k),fi=an(s,Cr,n.arrowShapes[p].gap(e)+k);if($.endX=fi[0],$.endY=fi[1],$.arrowEndX=_i[0],$.arrowEndY=_i[1],"inside-to-node"===Oe)s=[h.x,h.y];else if(Ie.units)s=this.manualEndptToPx(o,Ie);else if("outside-to-line"===Oe)s=$.srcIntn;else if("outside-to-node"===Oe||"outside-to-node-or-label"===Oe?Ar=Vr:("outside-to-line"===Oe||"outside-to-line-or-label"===Oe)&&(Ar=[f.x,f.y]),s=n.nodeShapes[this.getNodeShape(o)].intersectLine(h.x,h.y,o.outerWidth(),o.outerHeight(),Ar[0],Ar[1],0,tr,U),"outside-to-node-or-label"===Oe||"outside-to-line-or-label"===Oe){var wi=o._private.rscratch,Hi=wi.labelX,Gi=wi.labelY,bi=wi.labelWidth/2,ai=wi.labelHeight/2,va=o.pstyle("text-valign").value;"top"===va?Gi-=ai:"bottom"===va&&(Gi+=ai);var ge=o.pstyle("text-halign").value;"left"===ge?Hi-=bi:"right"===ge&&(Hi+=bi);var $r=Tn(Ar[0],Ar[1],[Hi-bi,Gi-ai,Hi+bi,Gi-ai,Hi+bi,Gi+ai,Hi-bi,Gi+ai],h.x,h.y);if($r.length>0){var na=f,ca=rn(na,hn(s)),xa=rn(na,hn($r)),ei=ca;xa<ca&&(s=[$r[0],$r[1]],ei=xa),$r.length>2&&rn(na,{x:$r[2],y:$r[3]})<ei&&(s=[$r[2],$r[3]])}}var si=an(s,Vr,n.arrowShapes[x].spacing(e)+_),ii=an(s,Vr,n.arrowShapes[x].gap(e)+_);$.startX=ii[0],$.startY=ii[1],$.arrowStartX=si[0],$.arrowStartY=si[1],Te&&($.badLine=!(X($.startX)&&X($.startY)&&X($.endX)&&X($.endY)))},getSourceEndpoint:function(e){var t=e[0]._private.rscratch;return"haystack"===(this.recalculateRenderedStyle(e),t.edgeType)?{x:t.haystackPts[0],y:t.haystackPts[1]}:{x:t.arrowStartX,y:t.arrowStartY}},getTargetEndpoint:function(e){var t=e[0]._private.rscratch;return"haystack"===(this.recalculateRenderedStyle(e),t.edgeType)?{x:t.haystackPts[2],y:t.haystackPts[3]}:{x:t.arrowEndX,y:t.arrowEndY}}},$c={};function J1(e,t,r){for(var a=function(h,f,p,x){return Ht(h,f,p,x)},n=t._private.rstyle.bezierPts,s=0;s<e.bezierProjPcts.length;s++){var o=e.bezierProjPcts[s];n.push({x:a(r[0],r[2],r[4],o),y:a(r[1],r[3],r[5],o)})}}$c.storeEdgeProjections=function(e){var t=e._private,r=t.rscratch,a=r.edgeType;if(t.rstyle.bezierPts=null,t.rstyle.linePts=null,t.rstyle.haystackPts=null,"multibezier"===a||"bezier"===a||"self"===a||"compound"===a){t.rstyle.bezierPts=[];for(var i=0;i+5<r.allpts.length;i+=4)J1(this,e,r.allpts.slice(i,i+6))}else if("segments"===a){var n=t.rstyle.linePts=[];for(i=0;i+1<r.allpts.length;i+=2)n.push({x:r.allpts[i],y:r.allpts[i+1]})}else if("haystack"===a){var s=r.haystackPts;t.rstyle.haystackPts=[{x:s[0],y:s[1]},{x:s[2],y:s[3]}]}t.rstyle.arrowWidth=this.getArrowWidth(e.pstyle("width").pfValue,e.pstyle("arrow-scale").value)*this.arrowShapeWidth},$c.recalculateEdgeProjections=function(e){this.findEdgeControlPoints(e)};var is={recalculateNodeLabelProjection:function(e){var t=e.pstyle("label").strValue;if(!Nt(t)){var r,a,i=e._private,n=e.width(),s=e.height(),o=e.padding(),u=e.position(),h=e.pstyle("text-halign").strValue,f=e.pstyle("text-valign").strValue,p=i.rscratch,x=i.rstyle;switch(h){case"left":r=u.x-n/2-o;break;case"right":r=u.x+n/2+o;break;default:r=u.x}switch(f){case"top":a=u.y-s/2-o;break;case"bottom":a=u.y+s/2+o;break;default:a=u.y}p.labelX=r,p.labelY=a,x.labelX=r,x.labelY=a,this.calculateLabelAngles(e),this.applyLabelDimensions(e)}}},Vd=function(t,r){var a=Math.atan(r/t);return 0===t&&a<0&&(a*=-1),a},Ud=function(t,r){return Vd(r.x-t.x,r.y-t.y)};is.recalculateEdgeLabelProjections=function(e){var t,r=e._private,a=r.rscratch,i=this,n={mid:e.pstyle("label").strValue,source:e.pstyle("source-label").strValue,target:e.pstyle("target-label").strValue};if(n.mid||n.source||n.target){var s=function(p,x,k){Ve(r.rscratch,p,x,k),Ve(r.rstyle,p,x,k)};s("labelX",null,(t={x:a.midX,y:a.midY}).x),s("labelY",null,t.y);var o=Vd(a.midDispX,a.midDispY);s("labelAutoAngle",null,o);var u=function(){if(u.cache)return u.cache;for(var p=[],x=0;x+5<a.allpts.length;x+=4)p.push({p0:{x:a.allpts[x],y:a.allpts[x+1]},p1:{x:a.allpts[x+2],y:a.allpts[x+3]},p2:{x:a.allpts[x+4],y:a.allpts[x+5]},startDist:0,length:0,segments:[]});var O=r.rstyle.bezierPts,K=i.bezierProjPcts.length;function $(Yt,he,me,Te,Le){var Ie=Xi(he,me),Oe=Yt.segments[Yt.segments.length-1];Yt.segments.push({p0:he,p1:me,t0:Te,t1:Le,startDist:Oe?Oe.startDist+Oe.length:0,length:Ie}),Yt.length+=Ie}for(var q=0;q<p.length;q++){var vt=p[q],ae=p[q-1];ae&&(vt.startDist=ae.startDist+ae.length),$(vt,vt.p0,O[q*K],0,i.bezierProjPcts[0]);for(var se=0;se<K-1;se++)$(vt,O[q*K+se],O[q*K+se+1],i.bezierProjPcts[se],i.bezierProjPcts[se+1]);$(vt,O[q*K+K-1],vt.p2,i.bezierProjPcts[K-1],1)}return u.cache=p},h=function(p){var x,k="source"===p;if(n[p]){var _=e.pstyle(p+"-text-offset").pfValue;switch(a.edgeType){case"self":case"compound":case"bezier":case"multibezier":for(var O,U=u(),K=0,$=0,q=0;q<U.length;q++){for(var vt=U[k?q:U.length-1-q],ae=0;ae<vt.segments.length;ae++){var se=vt.segments[k?ae:vt.segments.length-1-ae];if(K=$,($+=se.length)>=_||q===U.length-1&&ae===vt.segments.length-1){O={cp:vt,segment:se};break}}if(O)break}var he=O.cp,me=O.segment,Te=(_-K)/me.length,Le=me.t1-me.t0,Ie=k?me.t0+Le*Te:me.t1-Le*Te;Ie=Xt(0,Ie,1),t=d(he.p0,he.p1,he.p2,Ie),x=function(t,r,a,i){var n=Xt(0,i-.001,1),s=Xt(0,i+.001,1),o=d(t,r,a,n),u=d(t,r,a,s);return Ud(o,u)}(he.p0,he.p1,he.p2,Ie);break;case"straight":case"segments":case"haystack":for(var tr,cr,dr,rr,Oe=0,Cr=a.allpts.length,Vr=0;Vr+3<Cr&&(k?(dr={x:a.allpts[Vr],y:a.allpts[Vr+1]},rr={x:a.allpts[Vr+2],y:a.allpts[Vr+3]}):(dr={x:a.allpts[Cr-2-Vr],y:a.allpts[Cr-1-Vr]},rr={x:a.allpts[Cr-4-Vr],y:a.allpts[Cr-3-Vr]}),cr=Oe,!((Oe+=tr=Xi(dr,rr))>=_));Vr+=2);var Ar=(_-cr)/tr;Ar=Xt(0,Ar,1),t=function(t,r,a,i){var n_x=r.x-t.x,n_y=r.y-t.y,s=Xi(t,r);return a=a??0,{x:t.x+n_x/s*(i=i??a*s),y:t.y+n_y/s*i}}(dr,rr,Ar),x=Ud(dr,rr)}s("labelX",p,t.x),s("labelY",p,t.y),s("labelAutoAngle",p,x)}};h("source"),h("target"),this.applyLabelDimensions(e)}},is.applyLabelDimensions=function(e){this.applyPrefixedLabelDimensions(e),e.isEdge()&&(this.applyPrefixedLabelDimensions(e,"source"),this.applyPrefixedLabelDimensions(e,"target"))},is.applyPrefixedLabelDimensions=function(e,t){var r=e._private,a=this.getLabelText(e,t),i=da(a,e._private.labelDimsKey);if(Jt(r.rscratch,"prefixedLabelDimsKey",t)!==i){Ve(r.rscratch,"prefixedLabelDimsKey",t,i);var n=this.calculateLabelDimensions(e,a),s=e.pstyle("line-height").pfValue,o=e.pstyle("text-wrap").strValue,u=Jt(r.rscratch,"labelWrapCachedLines",t)||[],h="wrap"!==o?1:Math.max(u.length,1),f=n.height/h,p=f*s,x=n.width,k=n.height+(h-1)*(s-1)*f;Ve(r.rstyle,"labelWidth",t,x),Ve(r.rscratch,"labelWidth",t,x),Ve(r.rstyle,"labelHeight",t,k),Ve(r.rscratch,"labelHeight",t,k),Ve(r.rscratch,"labelLineHeight",t,p)}},is.getLabelText=function(e,t){var r=e._private,i=e.pstyle((t?t+"-":"")+"label").strValue,n=e.pstyle("text-transform").value,s=function(ga,Ea){return Ea?(Ve(r.rscratch,ga,t,Ea),Ea):Jt(r.rscratch,ga,t)};if(!i)return"";"none"==n||("uppercase"==n?i=i.toUpperCase():"lowercase"==n&&(i=i.toLowerCase()));var o=e.pstyle("text-wrap").value;if("wrap"===o){var u=s("labelKey");if(null!=u&&s("labelWrapKey")===u)return s("labelWrapCachedText");for(var f=i.split("\n"),p=e.pstyle("text-max-width").pfValue,k="anywhere"===e.pstyle("text-overflow-wrap").value,_=[],U=/[\s\u200b]+|$/g,O=0;O<f.length;O++){var K=f[O],q=this.calculateLabelDimensions(e,K).width;if(k){var vt=K.split("").join("\u200b");K=vt}if(q>p){var me,se="",Yt=0,he=G(K.matchAll(U));try{for(he.s();!(me=he.n()).done;){var Te=me.value,Le=Te[0],Ie=K.substring(Yt,Te.index);Yt=Te.index+Le.length,this.calculateLabelDimensions(e,0===se.length?Ie:se+Ie+Le).width<=p?se+=Ie+Le:(se&&_.push(se),se=Ie+Le)}}catch(Fr){he.e(Fr)}finally{he.f()}se.match(/^[\s\u200b]+$/)||_.push(se)}else _.push(K)}s("labelWrapCachedLines",_),i=s("labelWrapCachedText",_.join("\n")),s("labelWrapKey",u)}else if("ellipsis"===o){var dr=e.pstyle("text-max-width").pfValue,rr="",Vr=!1;if(this.calculateLabelDimensions(e,i).width<dr)return i;for(var qr=0;qr<i.length&&!(this.calculateLabelDimensions(e,rr+i[qr]+"\u2026").width>dr);qr++)rr+=i[qr],qr===i.length-1&&(Vr=!0);return Vr||(rr+="\u2026"),rr}return i},is.getLabelJustification=function(e){var t=e.pstyle("text-justification").strValue,r=e.pstyle("text-halign").strValue;if("auto"!==t)return t;if(!e.isNode())return"center";switch(r){case"left":return"right";case"right":return"left";default:return"center"}},is.calculateLabelDimensions=function(e,t){var i=this.cy.window().document,s=e.pstyle("font-style").strValue,o=e.pstyle("font-size").pfValue,u=e.pstyle("font-family").strValue,h=e.pstyle("font-weight").strValue,f=this.labelCalcCanvas,p=this.labelCalcCanvasContext;if(!f){f=this.labelCalcCanvas=i.createElement("canvas"),p=this.labelCalcCanvasContext=f.getContext("2d");var x=f.style;x.position="absolute",x.left="-9999px",x.top="-9999px",x.zIndex="-1",x.visibility="hidden",x.pointerEvents="none"}p.font="".concat(s," ").concat(h," ").concat(o,"px ").concat(u);for(var k=0,_=0,U=t.split("\n"),O=0;O<U.length;O++){var $=p.measureText(U[O]),q=Math.ceil($.width),vt=o;k=Math.max(q,k),_+=vt}return{width:k+=0,height:_+=0}},is.calculateLabelAngle=function(e,t){var a=e._private.rscratch,i=e.isEdge(),s=e.pstyle((t?t+"-":"")+"text-rotation"),o=s.strValue;return"none"===o?0:i&&"autorotate"===o?a.labelAutoAngle:"autorotate"===o?0:s.pfValue},is.calculateLabelAngles=function(e){var t=this,r=e.isEdge(),i=e._private.rscratch;i.labelAngle=t.calculateLabelAngle(e),r&&(i.sourceLabelAngle=t.calculateLabelAngle(e,"source"),i.targetLabelAngle=t.calculateLabelAngle(e,"target"))};var $d={},Hd=!1;$d.getNodeShape=function(e){var r=e.pstyle("shape").value;if("cutrectangle"===r&&(e.width()<28||e.height()<28))return Hd||(_a("The `cutrectangle` node shape can not be used at small sizes so `rectangle` is used instead"),Hd=!0),"rectangle";if(e.isParent())return"rectangle"===r||"roundrectangle"===r||"round-rectangle"===r||"cutrectangle"===r||"cut-rectangle"===r||"barrel"===r?r:"rectangle";if("polygon"===r){var a=e.pstyle("shape-polygon-points").value;return this.nodeShapes.makePolygon(a).name}return r};var ol={updateCachedGrabbedEles:function(){var e=this.cachedZSortedEles;if(e){e.drag=[],e.nondrag=[];for(var t=[],r=0;r<e.length;r++){var i=(a=e[r])._private.rscratch;a.grabbed()&&!a.isParent()?t.push(a):i.inDragLayer?e.drag.push(a):e.nondrag.push(a)}for(r=0;r<t.length;r++){var a;e.drag.push(a=t[r])}}},invalidateCachedZSortedEles:function(){this.cachedZSortedEles=null},getCachedZSortedEles:function(e){if(e||!this.cachedZSortedEles){var t=this.cy.mutableElements().toArray();t.sort(sd),t.interactive=t.filter(function(r){return r.interactive()}),this.cachedZSortedEles=t,this.updateCachedGrabbedEles()}else t=this.cachedZSortedEles;return t}},Gd={};[Ss,al,In,yo,$c,is,$d,{registerCalculationListeners:function(){var e=this.cy,t=e.collection(),r=this,a=function(s){var o=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(t.merge(s),o)for(var u=0;u<s.length;u++){var p=s[u]._private.rstyle;p.clean=!1,p.cleanConnected=!1}};r.binder(e).on("bounds.* dirty.*",function(s){a(s.target)}).on("style.* background.*",function(s){a(s.target,!1)});var i=function(s){if(s){var o=r.onUpdateEleCalcsFns;t.cleanStyle();for(var u=0;u<t.length;u++){var h=t[u],f=h._private.rstyle;h.isNode()&&!f.cleanConnected&&(a(h.connectedEdges()),f.cleanConnected=!0)}if(o)for(var p=0;p<o.length;p++)(0,o[p])(s,t);r.recalculateRenderedStyle(t),t=e.collection()}};r.flushRenderedStyleQueue=function(){i(!0)},r.beforeRender(i,r.beforeRenderPriorities.eleCalcs)},onUpdateEleCalcs:function(e){(this.onUpdateEleCalcsFns=this.onUpdateEleCalcsFns||[]).push(e)},recalculateRenderedStyle:function(e,t){var r=function(vt){return vt._private.rstyle.cleanConnected};if(0!==e.length){var a=[],i=[];if(!this.destroyed){void 0===t&&(t=!0);for(var n=0;n<e.length;n++){var s=e[n],o=s._private,u=o.rstyle;s.isEdge()&&(!r(s.source())||!r(s.target()))&&(u.clean=!1),s.isEdge()&&s.isBundledBezier()&&s.parallelEdges().some(function(q){return!q._private.rstyle.clean&&q.isBundledBezier()})&&(u.clean=!1),!(t&&u.clean||s.removed())&&"none"!==s.pstyle("display").value&&("nodes"===o.group?i.push(s):a.push(s),u.clean=!0)}for(var h=0;h<i.length;h++){var f=i[h],x=f._private.rstyle,k=f.position();this.recalculateNodeLabelProjection(f),x.nodeX=k.x,x.nodeY=k.y,x.nodeW=f.pstyle("width").pfValue,x.nodeH=f.pstyle("height").pfValue}this.recalculateEdgeProjections(a);for(var _=0;_<a.length;_++){var O=a[_]._private,K=O.rstyle,$=O.rscratch;K.srcX=$.arrowStartX,K.srcY=$.arrowStartY,K.tgtX=$.arrowEndX,K.tgtY=$.arrowEndY,K.midX=$.midX,K.midY=$.midY,K.labelAngle=$.labelAngle,K.sourceLabelAngle=$.sourceLabelAngle,K.targetLabelAngle=$.targetLabelAngle}}}}},ol].forEach(function(e){H(Gd,e)});var qd={getCachedImage:function(e,t,r){var i=this.imageCache=this.imageCache||{},n=i[e];if(n)return n.image.complete||n.image.addEventListener("load",r),n.image;var s=(n=i[e]=i[e]||{}).image=new Image;s.addEventListener("load",r),s.addEventListener("error",function(){s.error=!0});return"data:"===e.substring(0,5).toLowerCase()||(s.crossOrigin=t="null"===t?null:t),s.src=e,s}},js={registerBinding:function(e,t,r,a){var i=Array.prototype.slice.apply(arguments,[1]);if(Array.isArray(e)){for(var n=[],s=0;s<e.length;s++){var o=e[s];if(void 0!==o){var u=this.binder(o);n.push(u.on.apply(u,i))}}return n}return(u=this.binder(e)).on.apply(u,i)},binder:function(e){var t=this,r=t.cy.window(),a=e===r||e===r.document||e===r.document.body||function(t){return!(typeof HTMLElement>"u")&&t instanceof HTMLElement}(e);if(null==t.supportsPassiveEvents){var i=!1;try{var n=Object.defineProperty({},"passive",{get:function(){return i=!0,!0}});r.addEventListener("test",null,n)}catch{}t.supportsPassiveEvents=i}var s=function(u,h,f){var p=Array.prototype.slice.call(arguments);return a&&t.supportsPassiveEvents&&(p[2]={capture:f??!1,passive:!1,once:!1}),t.bindings.push({target:e,args:p}),(e.addEventListener||e.on).apply(e,p),this};return{on:s,addEventListener:s,addListener:s,bind:s}},nodeIsDraggable:function(e){return e&&e.isNode()&&!e.locked()&&e.grabbable()},nodeIsGrabbable:function(e){return this.nodeIsDraggable(e)&&e.interactive()}};js.load=function(){var e=this,t=e.cy.window(),r=function(ge){return ge.selected()},i=function(ge,$r,na,ca){null==ge&&(ge=e.cy);for(var xa=0;xa<$r.length;xa++)ge.emit({originalEvent:na,type:$r[xa],position:ca})},n=function(ge){return ge.shiftKey||ge.metaKey||ge.ctrlKey},s=function(ge,$r){var na=!0;if(e.cy.hasCompoundNodes()&&ge&&ge.pannable()){for(var ca=0;$r&&ca<$r.length;ca++)if((ge=$r[ca]).isNode()&&ge.isParent()&&!ge.pannable()){na=!1;break}}else na=!0;return na},h=function(ge){ge[0]._private.rscratch.inDragLayer=!0},p=function(ge){ge[0]._private.rscratch.isGrabTarget=!0},k=function(ge,$r){var na=$r.addToList;!na.has(ge)&&ge.grabbable()&&!ge.locked()&&(na.merge(ge),function(ge){ge[0]._private.grabbed=!0}(ge))},U=function(ge,$r){$r=$r||{};var na=ge.cy().hasCompoundNodes();$r.inDragLayer&&(ge.forEach(h),ge.neighborhood().stdFilter(function(ca){return!na||ca.isEdge()}).forEach(h)),$r.addToList&&ge.forEach(function(ca){k(ca,$r)}),function(ge,$r){if(ge.cy().hasCompoundNodes()&&(null!=$r.inDragLayer||null!=$r.addToList)){var na=ge.descendants();$r.inDragLayer&&(na.forEach(h),na.connectedEdges().forEach(h)),$r.addToList&&k(na,$r)}}(ge,$r),$(ge,{inDragLayer:$r.inDragLayer}),e.updateCachedGrabbedEles()},O=U,K=function(ge){ge&&(e.getCachedZSortedEles().forEach(function($r){(function(ge){ge[0]._private.grabbed=!1})($r),function(ge){ge[0]._private.rscratch.inDragLayer=!1}($r),function(ge){ge[0]._private.rscratch.isGrabTarget=!1}($r)}),e.updateCachedGrabbedEles())},$=function(ge,$r){if((null!=$r.inDragLayer||null!=$r.addToList)&&ge.cy().hasCompoundNodes()){var na=ge.ancestors().orphans();if(!na.same(ge)){var ca=na.descendants().spawnSelf().merge(na).unmerge(ge).unmerge(ge.descendants()),xa=ca.connectedEdges();$r.inDragLayer&&(xa.forEach(h),ca.forEach(h)),$r.addToList&&ca.forEach(function(ei){k(ei,$r)})}}},q=function(){null!=document.activeElement&&null!=document.activeElement.blur&&document.activeElement.blur()},vt=typeof MutationObserver<"u",ae=typeof ResizeObserver<"u";vt?(e.removeObserver=new MutationObserver(function(va){for(var ge=0;ge<va.length;ge++){var na=va[ge].removedNodes;if(na)for(var ca=0;ca<na.length;ca++)if(na[ca]===e.container){e.destroy();break}}}),e.container.parentNode&&e.removeObserver.observe(e.container.parentNode,{childList:!0})):e.registerBinding(e.container,"DOMNodeRemoved",function(va){e.destroy()});var se=Kr(function(){e.cy.resize()},100);vt&&(e.styleObserver=new MutationObserver(se),e.styleObserver.observe(e.container,{attributes:!0})),e.registerBinding(t,"resize",se),ae&&(e.resizeObserver=new ResizeObserver(se),e.resizeObserver.observe(e.container));var he=function(){e.invalidateContainerClientCoordsCache()};(function(ge,$r){for(;null!=ge;)$r(ge),ge=ge.parentNode})(e.container,function(va){e.registerBinding(va,"transitionend",he),e.registerBinding(va,"animationend",he),e.registerBinding(va,"scroll",he)}),e.registerBinding(e.container,"contextmenu",function(va){va.preventDefault()});var Te=function(ge){for(var $r=e.findContainerClientCoords(),na=$r[0],ca=$r[1],xa=$r[2],ei=$r[3],Da=ge.touches?ge.touches:[ge],si=!1,ii=0;ii<Da.length;ii++){var pi=Da[ii];if(na<=pi.clientX&&pi.clientX<=na+xa&&ca<=pi.clientY&&pi.clientY<=ca+ei){si=!0;break}}if(!si)return!1;for(var Ai=e.container,oi=ge.target.parentNode,Li=!1;oi;){if(oi===Ai){Li=!0;break}oi=oi.parentNode}return!!Li};e.registerBinding(e.container,"mousedown",function(ge){if(Te(ge)&&(1!==e.hoverData.which||1===ge.which)){ge.preventDefault(),q(),e.hoverData.capture=!0,e.hoverData.which=ge.which;var $r=e.cy,na=[ge.clientX,ge.clientY],ca=e.projectIntoViewport(na[0],na[1]),xa=e.selection,ei=e.findNearestElements(ca[0],ca[1],!0,!1),Da=ei[0],si=e.dragData.possibleDragElements;e.hoverData.mdownPos=ca,e.hoverData.mdownGPos=na;var ii=function(Di){return{originalEvent:ge,type:Di,position:{x:ca[0],y:ca[1]}}};if(3==ge.which){e.hoverData.cxtStarted=!0;var Ai={originalEvent:ge,type:"cxttapstart",position:{x:ca[0],y:ca[1]}};Da?(Da.activate(),Da.emit(Ai),e.hoverData.down=Da):$r.emit(Ai),e.hoverData.downTime=(new Date).getTime(),e.hoverData.cxtDragged=!1}else if(1==ge.which){if(Da&&Da.activate(),null!=Da&&e.nodeIsGrabbable(Da)){if(p(Da),Da.selected()){si=e.dragData.possibleDragElements=$r.collection();var oi=$r.$(function(Li){return Li.isNode()&&Li.selected()&&e.nodeIsGrabbable(Li)});U(oi,{addToList:si}),Da.emit(ii("grabon")),oi.forEach(function(Di){Di.emit(ii("grab"))})}else si=e.dragData.possibleDragElements=$r.collection(),O(Da,{addToList:si}),Da.emit(ii("grabon")).emit(ii("grab"));e.redrawHint("eles",!0),e.redrawHint("drag",!0)}e.hoverData.down=Da,e.hoverData.downs=ei,e.hoverData.downTime=(new Date).getTime(),i(Da,["mousedown","tapstart","vmousedown"],ge,{x:ca[0],y:ca[1]}),null==Da?(xa[4]=1,e.data.bgActivePosistion={x:ca[0],y:ca[1]},e.redrawHint("select",!0),e.redraw()):Da.pannable()&&(xa[4]=1),e.hoverData.tapholdCancelled=!1,clearTimeout(e.hoverData.tapholdTimeout),e.hoverData.tapholdTimeout=setTimeout(function(){if(!e.hoverData.tapholdCancelled){var Di=e.hoverData.down;Di?Di.emit(ii("taphold")):$r.emit(ii("taphold"))}},e.tapholdDuration)}xa[0]=xa[2]=ca[0],xa[1]=xa[3]=ca[1]}},!1);var Ie,Oe,tr,Le=function(ge){var $r=ge.getRootNode();if($r&&11===$r.nodeType&&void 0!==$r.host)return $r}(e.container);e.registerBinding([t,Le],"mousemove",function(ge){var jn;if(e.hoverData.capture||Te(ge)){var na=!1,ca=e.cy,xa=ca.zoom(),ei=[ge.clientX,ge.clientY],Da=e.projectIntoViewport(ei[0],ei[1]),si=e.hoverData.mdownPos,ii=e.hoverData.mdownGPos,pi=e.selection,Ai=null;!e.hoverData.draggingEles&&!e.hoverData.dragging&&!e.hoverData.selecting&&(Ai=e.findNearestElement(Da[0],Da[1],!0,!1));var yn,Ti=e.hoverData.last,oi=e.hoverData.down,Li=[Da[0]-pi[2],Da[1]-pi[3]],Di=e.dragData.possibleDragElements;if(ii){var on=ei[0]-ii[0],fn=ei[1]-ii[1];e.hoverData.isOverThresholdDrag=yn=on*on+fn*fn>=e.desktopTapThreshold2}var Dn=n(ge);yn&&(e.hoverData.tapholdCancelled=!0),na=!0,i(Ai,["mousemove","vmousemove","tapdrag"],ge,{x:Da[0],y:Da[1]});var gn=function(jn){return{originalEvent:ge,type:jn,position:{x:Da[0],y:Da[1]}}},us=function(){e.data.bgActivePosistion=void 0,e.hoverData.selecting||ca.emit(gn("boxstart")),pi[4]=1,e.hoverData.selecting=!0,e.redrawHint("select",!0),e.redraw()};if(3===e.hoverData.which){if(yn){var ds=gn("cxtdrag");oi?oi.emit(ds):ca.emit(ds),e.hoverData.cxtDragged=!0,(!e.hoverData.cxtOver||Ai!==e.hoverData.cxtOver)&&(e.hoverData.cxtOver&&e.hoverData.cxtOver.emit(gn("cxtdragout")),e.hoverData.cxtOver=Ai,Ai&&Ai.emit(gn("cxtdragover")))}}else if(e.hoverData.dragging){if(na=!0,ca.panningEnabled()&&ca.userPanningEnabled()){var eo;if(e.hoverData.justStartedPan){var pl=e.hoverData.mdownPos;eo={x:(Da[0]-pl[0])*xa,y:(Da[1]-pl[1])*xa},e.hoverData.justStartedPan=!1}else eo={x:Li[0]*xa,y:Li[1]*xa};ca.panBy(eo),ca.emit(gn("dragpan")),e.hoverData.dragged=!0}Da=e.projectIntoViewport(ge.clientX,ge.clientY)}else if(1!=pi[4]||null!=oi&&!oi.pannable()){if(oi&&oi.pannable()&&oi.active()&&oi.unactivate(),(!oi||!oi.grabbed())&&Ai!=Ti&&(Ti&&i(Ti,["mouseout","tapdragout"],ge,{x:Da[0],y:Da[1]}),Ai&&i(Ai,["mouseover","tapdragover"],ge,{x:Da[0],y:Da[1]}),e.hoverData.last=Ai),oi)if(yn){if(ca.boxSelectionEnabled()&&Dn)oi&&oi.grabbed()&&(K(Di),oi.emit(gn("freeon")),Di.emit(gn("free")),e.dragData.didDrag&&(oi.emit(gn("dragfreeon")),Di.emit(gn("dragfree")))),us();else if(oi&&oi.grabbed()&&e.nodeIsDraggable(oi)){var Wn=!e.dragData.didDrag;Wn&&e.redrawHint("eles",!0),e.dragData.didDrag=!0,e.hoverData.draggingEles||U(Di,{inDragLayer:!0});var On={x:0,y:0};if(X(Li[0])&&X(Li[1])&&(On.x+=Li[0],On.y+=Li[1],Wn)){var zn=e.hoverData.dragDelta;zn&&X(zn[0])&&X(zn[1])&&(On.x+=zn[0],On.y+=zn[1])}e.hoverData.draggingEles=!0,Di.silentShift(On).emit(gn("position")).emit(gn("drag")),e.redrawHint("drag",!0),e.redraw()}}else 0===(jn=e.hoverData.dragDelta=e.hoverData.dragDelta||[]).length?(jn.push(Li[0]),jn.push(Li[1])):(jn[0]+=Li[0],jn[1]+=Li[1]);na=!0}else yn&&(e.hoverData.dragging||!ca.boxSelectionEnabled()||!Dn&&ca.panningEnabled()&&ca.userPanningEnabled()?!e.hoverData.selecting&&ca.panningEnabled()&&ca.userPanningEnabled()&&s(oi,e.hoverData.downs)&&(e.hoverData.dragging=!0,e.hoverData.justStartedPan=!0,pi[4]=0,e.data.bgActivePosistion=hn(si),e.redrawHint("select",!0),e.redraw()):us(),oi&&oi.pannable()&&oi.active()&&oi.unactivate());if(pi[2]=Da[0],pi[3]=Da[1],na)return ge.stopPropagation&&ge.stopPropagation(),ge.preventDefault&&ge.preventDefault(),!1}},!1),e.registerBinding(t,"mouseup",function(ge){if((1!==e.hoverData.which||1===ge.which||!e.hoverData.capture)&&e.hoverData.capture){e.hoverData.capture=!1;var na=e.cy,ca=e.projectIntoViewport(ge.clientX,ge.clientY),xa=e.selection,ei=e.findNearestElement(ca[0],ca[1],!0,!1),Da=e.dragData.possibleDragElements,si=e.hoverData.down,ii=n(ge);e.data.bgActivePosistion&&(e.redrawHint("select",!0),e.redraw()),e.hoverData.tapholdCancelled=!0,e.data.bgActivePosistion=void 0,si&&si.unactivate();var pi=function(on){return{originalEvent:ge,type:on,position:{x:ca[0],y:ca[1]}}};if(3===e.hoverData.which){var Ai=pi("cxttapend");if(si?si.emit(Ai):na.emit(Ai),!e.hoverData.cxtDragged){var Ti=pi("cxttap");si?si.emit(Ti):na.emit(Ti)}e.hoverData.cxtDragged=!1,e.hoverData.which=null}else if(1===e.hoverData.which){if(i(ei,["mouseup","tapend","vmouseup"],ge,{x:ca[0],y:ca[1]}),!e.dragData.didDrag&&!e.hoverData.dragged&&!e.hoverData.selecting&&!e.hoverData.isOverThresholdDrag&&(i(si,["click","tap","vclick"],ge,{x:ca[0],y:ca[1]}),Oe=!1,ge.timeStamp-tr<=na.multiClickDebounceTime()?(Ie&&clearTimeout(Ie),Oe=!0,tr=null,i(si,["dblclick","dbltap","vdblclick"],ge,{x:ca[0],y:ca[1]})):(Ie=setTimeout(function(){Oe||i(si,["oneclick","onetap","voneclick"],ge,{x:ca[0],y:ca[1]})},na.multiClickDebounceTime()),tr=ge.timeStamp)),null==si&&!e.dragData.didDrag&&!e.hoverData.selecting&&!e.hoverData.dragged&&!n(ge)&&(na.$(r).unselect(["tapunselect"]),Da.length>0&&e.redrawHint("eles",!0),e.dragData.possibleDragElements=Da=na.collection()),ei==si&&!e.dragData.didDrag&&!e.hoverData.selecting&&null!=ei&&ei._private.selectable&&(e.hoverData.dragging||("additive"===na.selectionType()||ii?ei.selected()?ei.unselect(["tapunselect"]):ei.select(["tapselect"]):ii||(na.$(r).unmerge(ei).unselect(["tapunselect"]),ei.select(["tapselect"]))),e.redrawHint("eles",!0)),e.hoverData.selecting){var oi=na.collection(e.getAllInBox(xa[0],xa[1],xa[2],xa[3]));e.redrawHint("select",!0),oi.length>0&&e.redrawHint("eles",!0),na.emit(pi("boxend")),"additive"===na.selectionType()||ii||na.$(r).unmerge(oi).unselect(),oi.emit(pi("box")).stdFilter(function(on){return on.selectable()&&!on.selected()}).select().emit(pi("boxselect")),e.redraw()}if(e.hoverData.dragging&&(e.hoverData.dragging=!1,e.redrawHint("select",!0),e.redrawHint("eles",!0),e.redraw()),!xa[4]){e.redrawHint("drag",!0),e.redrawHint("eles",!0);var Di=si&&si.grabbed();K(Da),Di&&(si.emit(pi("freeon")),Da.emit(pi("free")),e.dragData.didDrag&&(si.emit(pi("dragfreeon")),Da.emit(pi("dragfree"))))}}xa[4]=0,e.hoverData.down=null,e.hoverData.cxtStarted=!1,e.hoverData.draggingEles=!1,e.hoverData.selecting=!1,e.hoverData.isOverThresholdDrag=!1,e.dragData.didDrag=!1,e.hoverData.dragged=!1,e.hoverData.dragDelta=[],e.hoverData.mdownPos=null,e.hoverData.mdownGPos=null,e.hoverData.which=null}},!1);var rr,cr=[],Cr=1e5,Ar=function(ge){var $r=!1,na=ge.deltaY;if(null==na&&(null!=ge.wheelDeltaY?na=ge.wheelDeltaY/4:null!=ge.wheelDelta&&(na=ge.wheelDelta/4)),0!==na){if(null==rr)if(cr.length>=4){var ca=cr;if(rr=function(ge){for(var na=0;na<ge.length;na++)if(ge[na]%5!=0)return!1;return!0}(ca),!rr){var xa=Math.abs(ca[0]);rr=function(ge){for(var $r=Math.abs(ge[0]),na=1;na<ge.length;na++)if(Math.abs(ge[na])!==$r)return!1;return!0}(ca)&&xa>5}if(rr)for(var ei=0;ei<ca.length;ei++)Cr=Math.min(Math.abs(ca[ei]),Cr)}else cr.push(na),$r=!0;else rr&&(Cr=Math.min(Math.abs(na),Cr));if(!e.scrollingPage){var Da=e.cy,si=Da.zoom(),ii=Da.pan(),pi=e.projectIntoViewport(ge.clientX,ge.clientY),Ai=[pi[0]*si+ii.x,pi[1]*si+ii.y];if(e.hoverData.draggingEles||e.hoverData.dragging||e.hoverData.cxtStarted||0!==e.selection[4])return void ge.preventDefault();if(Da.panningEnabled()&&Da.userPanningEnabled()&&Da.zoomingEnabled()&&Da.userZoomingEnabled()){var Ti;ge.preventDefault(),e.data.wheelZooming=!0,clearTimeout(e.data.wheelTimeout),e.data.wheelTimeout=setTimeout(function(){e.data.wheelZooming=!1,e.redrawHint("eles",!0),e.redraw()},150),$r&&Math.abs(na)>5&&(na=5*un(na)),Ti=na/-250,rr&&(Ti/=Cr,Ti*=3),Ti*=e.wheelSensitivity,1===ge.deltaMode&&(Ti*=33);var Li=Da.zoom()*Math.pow(10,Ti);"gesturechange"===ge.type&&(Li=e.gestureStartZoom*ge.scale),Da.zoom({level:Li,renderedPosition:{x:Ai[0],y:Ai[1]}}),Da.emit({type:"gesturechange"===ge.type?"pinchzoom":"scrollzoom",originalEvent:ge,position:{x:pi[0],y:pi[1]}})}}}};e.registerBinding(e.container,"wheel",Ar,!0),e.registerBinding(t,"scroll",function(ge){e.scrollingPage=!0,clearTimeout(e.scrollingPageTimeout),e.scrollingPageTimeout=setTimeout(function(){e.scrollingPage=!1},250)},!0),e.registerBinding(e.container,"gesturestart",function(ge){e.gestureStartZoom=e.cy.zoom(),e.hasTouchStarted||ge.preventDefault()},!0),e.registerBinding(e.container,"gesturechange",function(va){e.hasTouchStarted||Ar(va)},!0),e.registerBinding(e.container,"mouseout",function(ge){var $r=e.projectIntoViewport(ge.clientX,ge.clientY);e.cy.emit({originalEvent:ge,type:"mouseout",position:{x:$r[0],y:$r[1]}})},!1),e.registerBinding(e.container,"mouseover",function(ge){var $r=e.projectIntoViewport(ge.clientX,ge.clientY);e.cy.emit({originalEvent:ge,type:"mouseover",position:{x:$r[0],y:$r[1]}})},!1);var Fr,ga,Ea,pa,Aa,Ra,Za,Ta,Nr,Ur,Zr,ma,Ga,Ci,xi,gi,Qa,ci,di,_i,li=function(ge,$r,na,ca){return Math.sqrt((na-ge)*(na-ge)+(ca-$r)*(ca-$r))},Mi=function(ge,$r,na,ca){return(na-ge)*(na-ge)+(ca-$r)*(ca-$r)};if(e.registerBinding(e.container,"touchstart",Ci=function(ge){if(e.hasTouchStarted=!0,Te(ge)){q(),e.touchData.capture=!0,e.data.bgActivePosistion=void 0;var $r=e.cy,na=e.touchData.now,ca=e.touchData.earlier;if(ge.touches[0]){var xa=e.projectIntoViewport(ge.touches[0].clientX,ge.touches[0].clientY);na[0]=xa[0],na[1]=xa[1]}ge.touches[1]&&(xa=e.projectIntoViewport(ge.touches[1].clientX,ge.touches[1].clientY),na[2]=xa[0],na[3]=xa[1]),ge.touches[2]&&(xa=e.projectIntoViewport(ge.touches[2].clientX,ge.touches[2].clientY),na[4]=xa[0],na[5]=xa[1]);var ei=function(Dn){return{originalEvent:ge,type:Dn,position:{x:na[0],y:na[1]}}};if(ge.touches[1]){e.touchData.singleTouchMoved=!0,K(e.dragData.touchDragEles);var Da=e.findContainerClientCoords();Zr=Da[2],ma=Da[3],ga=ge.touches[0].clientY-(Ur=Da[1]),Ea=ge.touches[1].clientX-(Nr=Da[0]),pa=ge.touches[1].clientY-Ur,Ga=0<=(Fr=ge.touches[0].clientX-Nr)&&Fr<=Zr&&0<=Ea&&Ea<=Zr&&0<=ga&&ga<=ma&&0<=pa&&pa<=ma;var si=$r.pan(),ii=$r.zoom();if(Aa=li(Fr,ga,Ea,pa),Ra=Mi(Fr,ga,Ea,pa),Ta=[((Za=[(Fr+Ea)/2,(ga+pa)/2])[0]-si.x)/ii,(Za[1]-si.y)/ii],Ra<4e4&&!ge.touches[2]){var Ti=e.findNearestElement(na[0],na[1],!0,!0),oi=e.findNearestElement(na[2],na[3],!0,!0);return Ti&&Ti.isNode()?(Ti.activate().emit(ei("cxttapstart")),e.touchData.start=Ti):oi&&oi.isNode()?(oi.activate().emit(ei("cxttapstart")),e.touchData.start=oi):$r.emit(ei("cxttapstart")),e.touchData.start&&(e.touchData.start._private.grabbed=!1),e.touchData.cxt=!0,e.touchData.cxtDragged=!1,e.data.bgActivePosistion=void 0,void e.redraw()}}if(ge.touches[2])$r.boxSelectionEnabled()&&ge.preventDefault();else if(!ge.touches[1]&&ge.touches[0]){var Li=e.findNearestElements(na[0],na[1],!0,!0),Di=Li[0];if(null!=Di&&(Di.activate(),e.touchData.start=Di,e.touchData.starts=Li,e.nodeIsGrabbable(Di))){var yn=e.dragData.touchDragEles=$r.collection(),on=null;e.redrawHint("eles",!0),e.redrawHint("drag",!0),Di.selected()?(on=$r.$(function(mn){return mn.selected()&&e.nodeIsGrabbable(mn)}),U(on,{addToList:yn})):O(Di,{addToList:yn}),p(Di),Di.emit(ei("grabon")),on?on.forEach(function(mn){mn.emit(ei("grab"))}):Di.emit(ei("grab"))}i(Di,["touchstart","tapstart","vmousedown"],ge,{x:na[0],y:na[1]}),null==Di&&(e.data.bgActivePosistion={x:xa[0],y:xa[1]},e.redrawHint("select",!0),e.redraw()),e.touchData.singleTouchMoved=!1,e.touchData.singleTouchStartTime=+new Date,clearTimeout(e.touchData.tapholdTimeout),e.touchData.tapholdTimeout=setTimeout(function(){!1===e.touchData.singleTouchMoved&&!e.pinching&&!e.touchData.selecting&&i(e.touchData.start,["taphold"],ge,{x:na[0],y:na[1]})},e.tapholdDuration)}if(ge.touches.length>=1){for(var Kn=e.touchData.startPosition=[null,null,null,null,null,null],fn=0;fn<na.length;fn++)Kn[fn]=ca[fn]=na[fn];var Cn=ge.touches[0];e.touchData.startGPosition=[Cn.clientX,Cn.clientY]}}},!1),e.registerBinding(t,"touchmove",xi=function(ge){var $r=e.touchData.capture;if($r||Te(ge)){var na=e.selection,ca=e.cy,xa=e.touchData.now,ei=e.touchData.earlier,Da=ca.zoom();if(ge.touches[0]){var si=e.projectIntoViewport(ge.touches[0].clientX,ge.touches[0].clientY);xa[0]=si[0],xa[1]=si[1]}ge.touches[1]&&(si=e.projectIntoViewport(ge.touches[1].clientX,ge.touches[1].clientY),xa[2]=si[0],xa[3]=si[1]),ge.touches[2]&&(si=e.projectIntoViewport(ge.touches[2].clientX,ge.touches[2].clientY),xa[4]=si[0],xa[5]=si[1]);var Ai,ii=function(N2){return{originalEvent:ge,type:N2,position:{x:xa[0],y:xa[1]}}},pi=e.touchData.startGPosition;if($r&&ge.touches[0]&&pi){for(var Ti=[],oi=0;oi<xa.length;oi++)Ti[oi]=xa[oi]-ei[oi];var Li=ge.touches[0].clientX-pi[0],yn=ge.touches[0].clientY-pi[1];Ai=Li*Li+yn*yn>=e.touchTapThreshold2}if($r&&e.touchData.cxt){ge.preventDefault();var Cs=Mi(fn=ge.touches[0].clientX-Nr,Cn=ge.touches[0].clientY-Ur,mn=ge.touches[1].clientX-Nr,Dn=ge.touches[1].clientY-Ur);if(Cs/Ra>=2.25||Cs>=22500){e.touchData.cxt=!1,e.data.bgActivePosistion=void 0,e.redrawHint("select",!0);var Ms=ii("cxttapend");e.touchData.start?(e.touchData.start.unactivate().emit(Ms),e.touchData.start=null):ca.emit(Ms)}}if($r&&e.touchData.cxt){Ms=ii("cxtdrag"),e.data.bgActivePosistion=void 0,e.redrawHint("select",!0),e.touchData.start?e.touchData.start.emit(Ms):ca.emit(Ms),e.touchData.start&&(e.touchData.start._private.grabbed=!1),e.touchData.cxtDragged=!0;var Wn=e.findNearestElement(xa[0],xa[1],!0,!0);(!e.touchData.cxtOver||Wn!==e.touchData.cxtOver)&&(e.touchData.cxtOver&&e.touchData.cxtOver.emit(ii("cxtdragout")),e.touchData.cxtOver=Wn,Wn&&Wn.emit(ii("cxtdragover")))}else if($r&&ge.touches[2]&&ca.boxSelectionEnabled())ge.preventDefault(),e.data.bgActivePosistion=void 0,this.lastThreeTouch=+new Date,e.touchData.selecting||ca.emit(ii("boxstart")),e.touchData.selecting=!0,e.touchData.didSelect=!0,na[4]=1,na&&0!==na.length&&void 0!==na[0]?(na[2]=(xa[0]+xa[2]+xa[4])/3,na[3]=(xa[1]+xa[3]+xa[5])/3):(na[0]=(xa[0]+xa[2]+xa[4])/3,na[1]=(xa[1]+xa[3]+xa[5])/3,na[2]=(xa[0]+xa[2]+xa[4])/3+1,na[3]=(xa[1]+xa[3]+xa[5])/3+1),e.redrawHint("select",!0),e.redraw();else if($r&&ge.touches[1]&&!e.touchData.didSelect&&ca.zoomingEnabled()&&ca.panningEnabled()&&ca.userZoomingEnabled()&&ca.userPanningEnabled()){if(ge.preventDefault(),e.data.bgActivePosistion=void 0,e.redrawHint("select",!0),On=e.dragData.touchDragEles){e.redrawHint("drag",!0);for(var zn=0;zn<On.length;zn++){var So=On[zn]._private;So.grabbed=!1,So.rscratch.inDragLayer=!1}}var fn,Cn,mn,Dn,jn=e.touchData.start,P0=li(fn=ge.touches[0].clientX-Nr,Cn=ge.touches[0].clientY-Ur,mn=ge.touches[1].clientX-Nr,Dn=ge.touches[1].clientY-Ur),A2=P0/Aa;if(Ga){var P2=(fn-Fr+(mn-Ea))/2,M2=(Cn-ga+(Dn-pa))/2,wo=ca.zoom(),sh=wo*A2,vl=ca.pan(),M0=Ta[0]*wo+vl.x,I0=Ta[1]*wo+vl.y,I2={x:-sh/wo*(M0-vl.x-P2)+M0,y:-sh/wo*(I0-vl.y-M2)+I0};jn&&jn.active()&&(K(On=e.dragData.touchDragEles),e.redrawHint("drag",!0),e.redrawHint("eles",!0),jn.unactivate().emit(ii("freeon")),On.emit(ii("free")),e.dragData.didDrag&&(jn.emit(ii("dragfreeon")),On.emit(ii("dragfree")))),ca.viewport({zoom:sh,pan:I2,cancelOnFailedZoom:!0}),ca.emit(ii("pinchzoom")),Aa=P0,Fr=fn,ga=Cn,Ea=mn,pa=Dn,e.pinching=!0}ge.touches[0]&&(si=e.projectIntoViewport(ge.touches[0].clientX,ge.touches[0].clientY),xa[0]=si[0],xa[1]=si[1]),ge.touches[1]&&(si=e.projectIntoViewport(ge.touches[1].clientX,ge.touches[1].clientY),xa[2]=si[0],xa[3]=si[1]),ge.touches[2]&&(si=e.projectIntoViewport(ge.touches[2].clientX,ge.touches[2].clientY),xa[4]=si[0],xa[5]=si[1])}else if(ge.touches[0]&&!e.touchData.didSelect){var Jn=e.touchData.start,oh=e.touchData.last;if(!e.hoverData.draggingEles&&!e.swipePanning&&(Wn=e.findNearestElement(xa[0],xa[1],!0,!0)),$r&&null!=Jn&&ge.preventDefault(),$r&&null!=Jn&&e.nodeIsDraggable(Jn))if(Ai){var On=e.dragData.touchDragEles,O0=!e.dragData.didDrag;O0&&U(On,{inDragLayer:!0}),e.dragData.didDrag=!0;var Ao={x:0,y:0};X(Ti[0])&&X(Ti[1])&&(Ao.x+=Ti[0],Ao.y+=Ti[1],O0)&&(e.redrawHint("eles",!0),(ts=e.touchData.dragDelta)&&X(ts[0])&&X(ts[1])&&(Ao.x+=ts[0],Ao.y+=ts[1])),e.hoverData.draggingEles=!0,On.silentShift(Ao).emit(ii("position")).emit(ii("drag")),e.redrawHint("drag",!0),e.touchData.startPosition[0]==ei[0]&&e.touchData.startPosition[1]==ei[1]&&e.redrawHint("eles",!0),e.redraw()}else{var ts;0===(ts=e.touchData.dragDelta=e.touchData.dragDelta||[]).length?(ts.push(Ti[0]),ts.push(Ti[1])):(ts[0]+=Ti[0],ts[1]+=Ti[1])}if(i(Jn||Wn,["touchmove","tapdrag","vmousemove"],ge,{x:xa[0],y:xa[1]}),(!Jn||!Jn.grabbed())&&Wn!=oh&&(oh&&oh.emit(ii("tapdragout")),Wn&&Wn.emit(ii("tapdragover"))),e.touchData.last=Wn,$r)for(zn=0;zn<xa.length;zn++)xa[zn]&&e.touchData.startPosition[zn]&&Ai&&(e.touchData.singleTouchMoved=!0);$r&&(null==Jn||Jn.pannable())&&ca.panningEnabled()&&ca.userPanningEnabled()&&(s(Jn,e.touchData.starts)&&(ge.preventDefault(),e.data.bgActivePosistion||(e.data.bgActivePosistion=hn(e.touchData.startPosition)),e.swipePanning?(ca.panBy({x:Ti[0]*Da,y:Ti[1]*Da}),ca.emit(ii("dragpan"))):Ai&&(e.swipePanning=!0,ca.panBy({x:Li*Da,y:yn*Da}),ca.emit(ii("dragpan")),Jn&&(Jn.unactivate(),e.redrawHint("select",!0),e.touchData.start=null))),si=e.projectIntoViewport(ge.touches[0].clientX,ge.touches[0].clientY),xa[0]=si[0],xa[1]=si[1])}for(oi=0;oi<xa.length;oi++)ei[oi]=xa[oi];$r&&ge.touches.length>0&&!e.hoverData.draggingEles&&!e.swipePanning&&null!=e.data.bgActivePosistion&&(e.data.bgActivePosistion=void 0,e.redrawHint("select",!0),e.redraw())}},!1),e.registerBinding(t,"touchcancel",gi=function(ge){var $r=e.touchData.start;e.touchData.capture=!1,$r&&$r.unactivate()}),e.registerBinding(t,"touchend",Qa=function(ge){var $r=e.touchData.start;if(e.touchData.capture){0===ge.touches.length&&(e.touchData.capture=!1),ge.preventDefault();var ca=e.selection;e.swipePanning=!1,e.hoverData.draggingEles=!1;var xa=e.cy,ei=xa.zoom(),Da=e.touchData.now,si=e.touchData.earlier;if(ge.touches[0]){var ii=e.projectIntoViewport(ge.touches[0].clientX,ge.touches[0].clientY);Da[0]=ii[0],Da[1]=ii[1]}ge.touches[1]&&(ii=e.projectIntoViewport(ge.touches[1].clientX,ge.touches[1].clientY),Da[2]=ii[0],Da[3]=ii[1]),ge.touches[2]&&(ii=e.projectIntoViewport(ge.touches[2].clientX,ge.touches[2].clientY),Da[4]=ii[0],Da[5]=ii[1]);var Ai,pi=function(ds){return{originalEvent:ge,type:ds,position:{x:Da[0],y:Da[1]}}};if($r&&$r.unactivate(),e.touchData.cxt){if(Ai=pi("cxttapend"),$r?$r.emit(Ai):xa.emit(Ai),!e.touchData.cxtDragged){var Ti=pi("cxttap");$r?$r.emit(Ti):xa.emit(Ti)}return e.touchData.start&&(e.touchData.start._private.grabbed=!1),e.touchData.cxt=!1,e.touchData.start=null,void e.redraw()}if(!ge.touches[2]&&xa.boxSelectionEnabled()&&e.touchData.selecting){e.touchData.selecting=!1;var oi=xa.collection(e.getAllInBox(ca[0],ca[1],ca[2],ca[3]));ca[0]=void 0,ca[1]=void 0,ca[2]=void 0,ca[3]=void 0,ca[4]=0,e.redrawHint("select",!0),xa.emit(pi("boxend")),oi.emit(pi("box")).stdFilter(function(ds){return ds.selectable()&&!ds.selected()}).select().emit(pi("boxselect")),oi.nonempty()&&e.redrawHint("eles",!0),e.redraw()}if($r?.unactivate(),ge.touches[2])e.data.bgActivePosistion=void 0,e.redrawHint("select",!0);else if(!ge.touches[1]&&!ge.touches[0]&&!ge.touches[0]){e.data.bgActivePosistion=void 0,e.redrawHint("select",!0);var Di=e.dragData.touchDragEles;if(null!=$r){var yn=$r._private.grabbed;K(Di),e.redrawHint("drag",!0),e.redrawHint("eles",!0),yn&&($r.emit(pi("freeon")),Di.emit(pi("free")),e.dragData.didDrag&&($r.emit(pi("dragfreeon")),Di.emit(pi("dragfree")))),i($r,["touchend","tapend","vmouseup","tapdragout"],ge,{x:Da[0],y:Da[1]}),$r.unactivate(),e.touchData.start=null}else{var on=e.findNearestElement(Da[0],Da[1],!0,!0);i(on,["touchend","tapend","vmouseup","tapdragout"],ge,{x:Da[0],y:Da[1]})}var Kn=e.touchData.startPosition[0]-Da[0],Cn=e.touchData.startPosition[1]-Da[1],Cs=(Kn*Kn+Cn*Cn)*ei*ei;e.touchData.singleTouchMoved||($r||xa.$(":selected").unselect(["tapunselect"]),i($r,["tap","vclick"],ge,{x:Da[0],y:Da[1]}),ci=!1,ge.timeStamp-_i<=xa.multiClickDebounceTime()?(di&&clearTimeout(di),ci=!0,_i=null,i($r,["dbltap","vdblclick"],ge,{x:Da[0],y:Da[1]})):(di=setTimeout(function(){ci||i($r,["onetap","voneclick"],ge,{x:Da[0],y:Da[1]})},xa.multiClickDebounceTime()),_i=ge.timeStamp)),null!=$r&&!e.dragData.didDrag&&$r._private.selectable&&Cs<e.touchTapThreshold2&&!e.pinching&&("single"===xa.selectionType()?(xa.$(r).unmerge($r).unselect(["tapunselect"]),$r.select(["tapselect"])):$r.selected()?$r.unselect(["tapunselect"]):$r.select(["tapselect"]),e.redrawHint("eles",!0)),e.touchData.singleTouchMoved=!0}for(var gn=0;gn<Da.length;gn++)si[gn]=Da[gn];e.dragData.didDrag=!1,0===ge.touches.length&&(e.touchData.dragDelta=[],e.touchData.startPosition=[null,null,null,null,null,null],e.touchData.startGPosition=null,e.touchData.didSelect=!1),ge.touches.length<2&&(1===ge.touches.length&&(e.touchData.startGPosition=[ge.touches[0].clientX,ge.touches[0].clientY]),e.pinching=!1,e.redrawHint("eles",!0),e.redraw())}},!1),typeof TouchEvent>"u"){var fi=[],wi=function(ge){return{clientX:ge.clientX,clientY:ge.clientY,force:1,identifier:ge.pointerId,pageX:ge.pageX,pageY:ge.pageY,radiusX:ge.width/2,radiusY:ge.height/2,screenX:ge.screenX,screenY:ge.screenY,target:ge.target}},Hi=function(ge){for(var $r=0;$r<fi.length;$r++)if(fi[$r].event.pointerId===ge.pointerId)return void fi.splice($r,1)},bi=function(ge){ge.touches=fi.map(function($r){return $r.touch})},ai=function(ge){return"mouse"===ge.pointerType||4===ge.pointerType};e.registerBinding(e.container,"pointerdown",function(va){ai(va)||(va.preventDefault(),fi.push(function(ge){return{event:ge,touch:wi(ge)}}(va)),bi(va),Ci(va))}),e.registerBinding(e.container,"pointerup",function(va){ai(va)||(Hi(va),bi(va),Qa(va))}),e.registerBinding(e.container,"pointercancel",function(va){ai(va)||(Hi(va),bi(va),gi())}),e.registerBinding(e.container,"pointermove",function(va){var ge,$r;ai(va)||(va.preventDefault(),ge=va,($r=fi.filter(function(na){return na.event.pointerId===ge.pointerId})[0]).event=ge,$r.touch=wi(ge),bi(va),xi(va))})}};var cs={generatePolygon:function(e,t){return this.nodeShapes[e]={renderer:this,name:e,points:t,draw:function(a,i,n,s,o,u){this.renderer.nodeShapeImpl("polygon",a,i,n,s,o,this.points)},intersectLine:function(a,i,n,s,o,u,h,f){return Tn(o,u,this.points,a,i,n/2,s/2,h)},checkPoint:function(a,i,n,s,o,u,h,f){return la(a,i,this.points,u,h,s,o,[0,-1],n)},hasMiterBounds:"rectangle"!==e,miterBounds:function(a,i,n,s,o,u){return function st(e,t,r,a,i,n){var o=function F(e,t){if(e.length<3)throw new Error("Need at least 3 vertices");var r=function(he,me){return{x:he.x+me.x,y:he.y+me.y}},a=function(he,me){return{x:he.x-me.x,y:he.y-me.y}},i=function(he,me){return{x:he.x*me,y:he.y*me}},n=function(he,me){return he.x*me.y-he.y*me.x},s=function(he){var me=T(he.x,he.y);return 0===me?{x:0,y:0}:{x:he.x/me,y:he.y/me}},u=function(he,me,Te,Le){var Ie=a(me,he),Oe=a(Le,Te),tr=n(Ie,Oe);if(Math.abs(tr)<1e-9)return r(he,i(Ie,.5));var cr=n(a(Te,he),Oe)/tr;return r(he,i(Ie,cr))},h=e.map(function(Yt){return{x:Yt.x,y:Yt.y}});(function(he){for(var me=0,Te=0;Te<he.length;Te++){var Le=he[Te],Ie=he[(Te+1)%he.length];me+=Le.x*Ie.y-Ie.x*Le.y}return me/2})(h)<0&&h.reverse();for(var f=h.length,p=[],x=0;x<f;x++){var U=a(h[(x+1)%f],h[x]),O=s({x:U.y,y:-U.x});p.push(O)}for(var K=p.map(function(Yt,he){return{p1:r(h[he],i(Yt,t)),p2:r(h[(he+1)%f],i(Yt,t))}}),$=[],q=0;q<f;q++){var vt=K[(q-1+f)%f],ae=K[q],se=u(vt.p1,vt.p2,ae.p1,ae.p2);$.push(se)}return $}($n(e,t,r,a,i),n),u=kt();return o.forEach(function(h){return wt(u,h.x,h.y)}),u}(this.points,a,i,n,s,o)}}},generateEllipse:function(){return this.nodeShapes.ellipse={renderer:this,name:"ellipse",draw:function(t,r,a,i,n,s){this.renderer.nodeShapeImpl(this.name,t,r,a,i,n)},intersectLine:function(t,r,a,i,n,s,o,u){return function(t,r,a,i,n,s){var o=a-t,u=i-r;o/=n,u/=s;var h=Math.sqrt(o*o+u*u),f=h-1;if(f<0)return[];var p=f/h;return[(a-t)*p+t,(i-r)*p+r]}(n,s,t,r,a/2+o,i/2+o)},checkPoint:function(t,r,a,i,n,s,o,u){return za(t,r,i,n,s,o,a)}}},generateRoundPolygon:function(e,t){return this.nodeShapes[e]={renderer:this,name:e,points:t,getOrCreateCorners:function(a,i,n,s,o,u,h){if(void 0!==u[h]&&u[h+"-cx"]===a&&u[h+"-cy"]===i)return u[h];u[h]=new Array(t.length/2),u[h+"-cx"]=a,u[h+"-cy"]=i;var f=n/2,p=s/2;o="auto"===o?os(n,s):o;for(var x=new Array(t.length/2),k=0;k<t.length/2;k++)x[k]={x:a+f*t[2*k],y:i+p*t[2*k+1]};var _,U,O,K,$=x.length;for(U=x[$-1],_=0;_<$;_++)u[h][_]=Uc(U,O=x[_%$],K=x[(_+1)%$],o),U=O,O=K;return u[h]},draw:function(a,i,n,s,o,u,h){this.renderer.nodeShapeImpl("round-polygon",a,i,n,s,o,this.points,this.getOrCreateCorners(i,n,s,o,u,h,"drawCorners"))},intersectLine:function(a,i,n,s,o,u,h,f,p){return function(t,r,a,i,n,s,o,u,h){var p,f=[],x=new Array(2*a.length);h.forEach(function($,q){0===q?(x[x.length-2]=$.startX,x[x.length-1]=$.startY):(x[4*q-2]=$.startX,x[4*q-1]=$.startY),x[4*q]=$.stopX,x[4*q+1]=$.stopY,0!==(p=Fa(t,r,i,n,$.cx,$.cy,$.radius)).length&&f.push(p[0],p[1])});for(var k=0;k<x.length/4;k++)0!==(p=ji(t,r,i,n,x[4*k],x[4*k+1],x[4*k+2],x[4*k+3],!1)).length&&f.push(p[0],p[1]);if(f.length>2){for(var _=[f[0],f[1]],U=Math.pow(_[0]-t,2)+Math.pow(_[1]-r,2),O=1;O<f.length/2;O++){var K=Math.pow(f[2*O]-t,2)+Math.pow(f[2*O+1]-r,2);K<=U&&(_[0]=f[2*O],_[1]=f[2*O+1],U=K)}return _}return f}(o,u,this.points,a,i,0,0,0,this.getOrCreateCorners(a,i,n,s,f,p,"corners"))},checkPoint:function(a,i,n,s,o,u,h,f,p){return function(t,r,a,i,n,s,o,u){for(var h=new Array(2*a.length),f=0;f<u.length;f++){var p=u[f];if(h[4*f+0]=p.startX,h[4*f+1]=p.startY,h[4*f+2]=p.stopX,h[4*f+3]=p.stopY,Math.pow(p.cx-t,2)+Math.pow(p.cy-r,2)<=Math.pow(p.radius,2))return!0}return Pr(t,r,h)}(a,i,this.points,0,0,0,0,this.getOrCreateCorners(u,h,s,o,f,p,"corners"))}}},generateRoundRectangle:function(){return this.nodeShapes["round-rectangle"]=this.nodeShapes.roundrectangle={renderer:this,name:"round-rectangle",points:Fi(4,0),draw:function(t,r,a,i,n,s){this.renderer.nodeShapeImpl(this.name,t,r,a,i,n,this.points,s)},intersectLine:function(t,r,a,i,n,s,o,u){return xt(n,s,t,r,a,i,o,u)},checkPoint:function(t,r,a,i,n,s,o,u){var h=i/2,f=n/2;u="auto"===u?Ui(i,n):u;var p=2*(u=Math.min(h,f,u));return!!(la(t,r,this.points,s,o,i,n-p,[0,-1],a)||la(t,r,this.points,s,o,i-p,n,[0,-1],a)||za(t,r,p,p,s-h+u,o-f+u,a)||za(t,r,p,p,s+h-u,o-f+u,a)||za(t,r,p,p,s+h-u,o+f-u,a)||za(t,r,p,p,s-h+u,o+f-u,a))}}},generateCutRectangle:function(){return this.nodeShapes["cut-rectangle"]=this.nodeShapes.cutrectangle={renderer:this,name:"cut-rectangle",cornerLength:8,points:Fi(4,0),draw:function(t,r,a,i,n,s){this.renderer.nodeShapeImpl(this.name,t,r,a,i,n,null,s)},generateCutTrianglePts:function(t,r,a,i,n){var s="auto"===n?this.cornerLength:n,o=r/2,u=t/2,h=a-u,f=a+u,p=i-o,x=i+o;return{topLeft:[h,p+s,h+s,p,h+s,p+s],topRight:[f-s,p,f,p+s,f-s,p+s],bottomRight:[f,x-s,f-s,x,f-s,x-s],bottomLeft:[h+s,x,h,x-s,h+s,x-s]}},intersectLine:function(t,r,a,i,n,s,o,u){var h=this.generateCutTrianglePts(a+2*o,i+2*o,t,r,u),f=[].concat.apply([],[h.topLeft.splice(0,4),h.topRight.splice(0,4),h.bottomRight.splice(0,4),h.bottomLeft.splice(0,4)]);return Tn(n,s,f,t,r)},checkPoint:function(t,r,a,i,n,s,o,u){var h="auto"===u?this.cornerLength:u;if(la(t,r,this.points,s,o,i,n-2*h,[0,-1],a)||la(t,r,this.points,s,o,i-2*h,n,[0,-1],a))return!0;var f=this.generateCutTrianglePts(i,n,s,o);return Pr(t,r,f.topLeft)||Pr(t,r,f.topRight)||Pr(t,r,f.bottomRight)||Pr(t,r,f.bottomLeft)}}},generateBarrel:function(){return this.nodeShapes.barrel={renderer:this,name:"barrel",points:Fi(4,0),draw:function(t,r,a,i,n,s){this.renderer.nodeShapeImpl(this.name,t,r,a,i,n)},intersectLine:function(t,r,a,i,n,s,o,u){var x=this.generateBarrelBezierPts(a+2*o,i+2*o,t,r),k=function(O){var K=d({x:O[0],y:O[1]},{x:O[2],y:O[3]},{x:O[4],y:O[5]},.15),$=d({x:O[0],y:O[1]},{x:O[2],y:O[3]},{x:O[4],y:O[5]},.5),q=d({x:O[0],y:O[1]},{x:O[2],y:O[3]},{x:O[4],y:O[5]},.85);return[O[0],O[1],K.x,K.y,$.x,$.y,q.x,q.y,O[4],O[5]]},_=[].concat(k(x.topLeft),k(x.topRight),k(x.bottomRight),k(x.bottomLeft));return Tn(n,s,_,t,r)},generateBarrelBezierPts:function(t,r,a,i){var n=r/2,s=t/2,o=a-s,u=a+s,h=i-n,f=i+n,p=yl(t,r),x=p.heightOffset,k=p.widthOffset,_=p.ctrlPtOffsetPct*t,U={topLeft:[o,h+x,o+_,h,o+k,h],topRight:[u-k,h,u-_,h,u,h+x],bottomRight:[u,f-x,u-_,f,u-k,f],bottomLeft:[o+k,f,o+_,f,o,f-x]};return U.topLeft.isTop=!0,U.topRight.isTop=!0,U.bottomLeft.isBottom=!0,U.bottomRight.isBottom=!0,U},checkPoint:function(t,r,a,i,n,s,o,u){var h=yl(i,n),p=h.widthOffset;if(la(t,r,this.points,s,o,i,n-2*h.heightOffset,[0,-1],a)||la(t,r,this.points,s,o,i-2*p,n,[0,-1],a))return!0;for(var x=this.generateBarrelBezierPts(i,n,s,o),k=function(he,me,Te){var Le=Te[4],Ie=Te[2],Oe=Te[0],tr=Te[5],cr=Te[1],dr=Math.min(Le,Oe),rr=Math.max(Le,Oe),Cr=Math.min(tr,cr),Vr=Math.max(tr,cr);if(dr<=he&&he<=rr&&Cr<=me&&me<=Vr){var qr=function(t,r,a){return[t-2*r+a,2*(r-t),t]}(Le,Ie,Oe),Ar=function(t,r,a,i){var n=r*r-4*t*(a-=i);if(n<0)return[];var s=Math.sqrt(n),o=2*t;return[(-r+s)/o,(-r-s)/o]}(qr[0],qr[1],qr[2],he),Fr=Ar.filter(function(ga){return 0<=ga&&ga<=1});if(Fr.length>0)return Fr[0]}return null},_=Object.keys(x),U=0;U<_.length;U++){var K=x[_[U]],$=k(t,r,K);if(null!=$){var se=Ht(K[5],K[3],K[1],$);if(K.isTop&&se<=r||K.isBottom&&r<=se)return!0}}return!1}}},generateBottomRoundrectangle:function(){return this.nodeShapes["bottom-round-rectangle"]=this.nodeShapes.bottomroundrectangle={renderer:this,name:"bottom-round-rectangle",points:Fi(4,0),draw:function(t,r,a,i,n,s){this.renderer.nodeShapeImpl(this.name,t,r,a,i,n,this.points,s)},intersectLine:function(t,r,a,i,n,s,o,u){var f=r-(i/2+o),k=ji(n,s,t,r,t-(a/2+o),f,t+(a/2+o),f,!1);return k.length>0?k:xt(n,s,t,r,a,i,o,u)},checkPoint:function(t,r,a,i,n,s,o,u){var h=2*(u="auto"===u?Ui(i,n):u);if(la(t,r,this.points,s,o,i,n-h,[0,-1],a)||la(t,r,this.points,s,o,i-h,n,[0,-1],a))return!0;var f=i/2+2*a,p=n/2+2*a;return!!(Pr(t,r,[s-f,o-p,s-f,o,s+f,o,s+f,o-p])||za(t,r,h,h,s+i/2-u,o+n/2-u,a)||za(t,r,h,h,s-i/2+u,o+n/2-u,a))}}},registerNodeShapes:function(){var e=this.nodeShapes={},t=this;this.generateEllipse(),this.generatePolygon("triangle",Fi(3,0)),this.generateRoundPolygon("round-triangle",Fi(3,0)),this.generatePolygon("rectangle",Fi(4,0)),e.square=e.rectangle,this.generateRoundRectangle(),this.generateCutRectangle(),this.generateBarrel(),this.generateBottomRoundrectangle();var r=[0,1,1,0,0,-1,-1,0];this.generatePolygon("diamond",r),this.generateRoundPolygon("round-diamond",r),this.generatePolygon("pentagon",Fi(5,0)),this.generateRoundPolygon("round-pentagon",Fi(5,0)),this.generatePolygon("hexagon",Fi(6,0)),this.generateRoundPolygon("round-hexagon",Fi(6,0)),this.generatePolygon("heptagon",Fi(7,0)),this.generateRoundPolygon("round-heptagon",Fi(7,0)),this.generatePolygon("octagon",Fi(8,0)),this.generateRoundPolygon("round-octagon",Fi(8,0));var a=new Array(20),i=pn(5,0),n=pn(5,Math.PI/5),s=.5*(3-Math.sqrt(5));s*=1.57;for(var o=0;o<n.length/2;o++)n[2*o]*=s,n[2*o+1]*=s;for(o=0;o<5;o++)a[4*o]=i[2*o],a[4*o+1]=i[2*o+1],a[4*o+2]=n[2*o],a[4*o+3]=n[2*o+1];a=bn(a),this.generatePolygon("star",a),this.generatePolygon("vee",[-1,-1,0,-.333,1,-1,0,1]),this.generatePolygon("rhomboid",[-1,-1,.333,-1,1,1,-.333,1]),this.generatePolygon("right-rhomboid",[-.333,-1,1,-1,.333,1,-1,1]),this.nodeShapes.concavehexagon=this.generatePolygon("concave-hexagon",[-1,-.95,-.75,0,-1,.95,1,.95,.75,0,1,-.95]);var u=[-1,-1,.25,-1,1,0,.25,1,-1,1];this.generatePolygon("tag",u),this.generateRoundPolygon("round-tag",u),e.makePolygon=function(h){var x,p="polygon-"+h.join("$");return(x=this[p])?x:t.generatePolygon(p,h)}}},mo={timeToRender:function(){return this.redrawTotalTime/this.redrawCount},redraw:function(e){e=e||Ri();var t=this;void 0===t.averageRedrawTime&&(t.averageRedrawTime=0),void 0===t.lastRedrawTime&&(t.lastRedrawTime=0),void 0===t.lastDrawTime&&(t.lastDrawTime=0),t.requestedFrame=!0,t.renderOptions=e},beforeRender:function(e,t){if(!this.destroyed){null==t&&Ka("Priority is not optional for beforeRender");var r=this.beforeRenderCallbacks;r.push({fn:e,priority:t}),r.sort(function(a,i){return i.priority-a.priority})}}},jd=function(t,r,a){for(var i=t.beforeRenderCallbacks,n=0;n<i.length;n++)i[n].fn(r,a)};mo.startRenderLoop=function(){var e=this,t=e.cy;if(!e.renderLoopStarted){e.renderLoopStarted=!0;var r=function(i){if(!e.destroyed){if(!t.batching())if(e.requestedFrame&&!e.skipFrame){jd(e,!0,i);var n=ia();e.render(e.renderOptions);var s=e.lastDrawTime=ia();void 0===e.averageRedrawTime&&(e.averageRedrawTime=s-n),void 0===e.redrawCount&&(e.redrawCount=0),e.redrawCount++,void 0===e.redrawTotalTime&&(e.redrawTotalTime=0);var o=s-n;e.redrawTotalTime+=o,e.lastRedrawTime=o,e.averageRedrawTime=e.averageRedrawTime/2+o/2,e.requestedFrame=!1}else jd(e,!1,i);e.skipFrame=!1,ha(r)}};ha(r)}};var Xd=function(t){this.init(t)},Xs=Xd.prototype;Xs.clientFunctions=["redrawHint","render","renderTo","matchCanvasSize","nodeShapeImpl","arrowShapeImpl"],Xs.init=function(e){var t=this;t.options=e,t.cy=e.cy;var r=t.container=e.cy.container(),a=t.cy.window();if(a){var i=a.document,n=i.head,s="__________cytoscape_stylesheet",o="__________cytoscape_container",u=null!=i.getElementById(s);if(r.className.indexOf(o)<0&&(r.className=(r.className||"")+" "+o),!u){var h=i.createElement("style");h.id=s,h.textContent="."+o+" { position: relative; }",n.insertBefore(h,n.children[0])}"static"===a.getComputedStyle(r).getPropertyValue("position")&&_a("A Cytoscape container has style position:static and so can not use UI extensions properly")}t.selection=[void 0,void 0,void 0,void 0,0],t.bezierProjPcts=[.05,.225,.4,.5,.6,.775,.95],t.hoverData={down:null,last:null,downTime:null,triggerMode:null,dragging:!1,initialPan:[null,null],capture:!1},t.dragData={possibleDragElements:[]},t.touchData={start:null,capture:!1,startPosition:[null,null,null,null,null,null],singleTouchStartTime:null,singleTouchMoved:!0,now:[null,null,null,null,null,null],earlier:[null,null,null,null,null,null]},t.redraws=0,t.showFps=e.showFps,t.debug=e.debug,t.webgl=e.webgl,t.hideEdgesOnViewport=e.hideEdgesOnViewport,t.textureOnViewport=e.textureOnViewport,t.wheelSensitivity=e.wheelSensitivity,t.motionBlurEnabled=e.motionBlur,t.forcedPixelRatio=X(e.pixelRatio)?e.pixelRatio:null,t.motionBlur=e.motionBlur,t.motionBlurOpacity=e.motionBlurOpacity,t.motionBlurTransparency=1-t.motionBlurOpacity,t.motionBlurPxRatio=1,t.mbPxRBlurry=1,t.minMbLowQualFrames=4,t.fullQualityMb=!1,t.clearedForMotionBlur=[],t.desktopTapThreshold=e.desktopTapThreshold,t.desktopTapThreshold2=e.desktopTapThreshold*e.desktopTapThreshold,t.touchTapThreshold=e.touchTapThreshold,t.touchTapThreshold2=e.touchTapThreshold*e.touchTapThreshold,t.tapholdDuration=500,t.bindings=[],t.beforeRenderCallbacks=[],t.beforeRenderPriorities={animations:400,eleCalcs:300,eleTxrDeq:200,lyrTxrDeq:150,lyrTxrSkip:100},t.registerNodeShapes(),t.registerArrowShapes(),t.registerCalculationListeners()},Xs.notify=function(e,t){var r=this,a=r.cy;if(!this.destroyed){if("init"===e)return void r.load();if("destroy"===e)return void r.destroy();("add"===e||"remove"===e||"move"===e&&a.hasCompoundNodes()||"load"===e||"zorder"===e||"mount"===e)&&r.invalidateCachedZSortedEles(),"viewport"===e&&r.redrawHint("select",!0),"gc"===e&&r.redrawHint("gc",!0),("load"===e||"resize"===e||"mount"===e)&&(r.invalidateContainerClientCoordsCache(),r.matchCanvasSize(r.container)),r.redrawHint("eles",!0),r.redrawHint("drag",!0),this.startRenderLoop(),this.redraw()}},Xs.destroy=function(){var e=this;e.destroyed=!0,e.cy.stopAnimationLoop();for(var t=0;t<e.bindings.length;t++){var r=e.bindings[t],i=r.target;(i.off||i.removeEventListener).apply(i,r.args)}if(e.bindings=[],e.beforeRenderCallbacks=[],e.onUpdateEleCalcsFns=[],e.removeObserver&&e.removeObserver.disconnect(),e.styleObserver&&e.styleObserver.disconnect(),e.resizeObserver&&e.resizeObserver.disconnect(),e.labelCalcDiv)try{document.body.removeChild(e.labelCalcDiv)}catch{}},Xs.isHeadless=function(){return!1},[Fc,Gd,qd,js,cs,mo].forEach(function(e){H(Xs,e)});var Yc=1e3/60,Zd_setupDequeueing=function(t){return function(){var a=this,i=this.renderer;if(!a.dequeueingSetup){a.dequeueingSetup=!0;var n=Kr(function(){i.redrawHint("eles",!0),i.redrawHint("drag",!0),i.redraw()},t.deqRedrawThreshold);i.beforeRender(function(h,f){var p=ia(),x=i.averageRedrawTime,k=i.lastRedrawTime,_=[],U=i.cy.extent(),O=i.getPixelRatio();for(h||i.flushRenderedStyleQueue();;){var K=ia(),$=K-p,q=K-f;if(k<Yc){if(q>=t.deqFastCost*(Yc-(h?x:0)))break}else if(h){if($>=t.deqCost*k||$>=t.deqAvgCost*x)break}else if(q>=t.deqNoDrawCost*Yc)break;var ae=t.deq(a,O,U);if(!(ae.length>0))break;for(var se=0;se<ae.length;se++)_.push(ae[se])}_.length>0&&(t.onDeqd(a,_),!h&&t.shouldRedraw(a,_,O,U)&&n())},(t.priority||Oa)(a))}}},rp=function(){return ut(function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ua;D(this,e),this.idsByKey=new Dt,this.keyForId=new Dt,this.cachesByLvl=new Dt,this.lvls=[],this.getKey=t,this.doesEleInvalidateKey=r},[{key:"getIdsFor",value:function(r){null==r&&Ka("Can not get id list for null key");var a=this.idsByKey,i=this.idsByKey.get(r);return i||(i=new Xr,a.set(r,i)),i}},{key:"addIdForKey",value:function(r,a){null!=r&&this.getIdsFor(r).add(a)}},{key:"deleteIdForKey",value:function(r,a){null!=r&&this.getIdsFor(r).delete(a)}},{key:"getNumberOfIdsForKey",value:function(r){return null==r?0:this.getIdsFor(r).size}},{key:"updateKeyMappingFor",value:function(r){var a=r.id(),i=this.keyForId.get(a),n=this.getKey(r);this.deleteIdForKey(i,a),this.addIdForKey(n,a),this.keyForId.set(a,n)}},{key:"deleteKeyMappingFor",value:function(r){var a=r.id(),i=this.keyForId.get(a);this.deleteIdForKey(i,a),this.keyForId.delete(a)}},{key:"keyHasChangedFor",value:function(r){var a=r.id();return this.keyForId.get(a)!==this.getKey(r)}},{key:"isInvalid",value:function(r){return this.keyHasChangedFor(r)||this.doesEleInvalidateKey(r)}},{key:"getCachesAt",value:function(r){var a=this.cachesByLvl,i=this.lvls,n=a.get(r);return n||(n=new Dt,a.set(r,n),i.push(r)),n}},{key:"getCache",value:function(r,a){return this.getCachesAt(a).get(r)}},{key:"get",value:function(r,a){var i=this.getKey(r),n=this.getCache(i,a);return null!=n&&this.updateKeyMappingFor(r),n}},{key:"getForCachedKey",value:function(r,a){var i=this.keyForId.get(r.id());return this.getCache(i,a)}},{key:"hasCache",value:function(r,a){return this.getCachesAt(a).has(r)}},{key:"has",value:function(r,a){var i=this.getKey(r);return this.hasCache(i,a)}},{key:"setCache",value:function(r,a,i){i.key=r,this.getCachesAt(a).set(r,i)}},{key:"set",value:function(r,a,i){var n=this.getKey(r);this.setCache(n,a,i),this.updateKeyMappingFor(r)}},{key:"deleteCache",value:function(r,a){this.getCachesAt(a).delete(r)}},{key:"delete",value:function(r,a){var i=this.getKey(r);this.deleteCache(i,a)}},{key:"invalidateKey",value:function(r){var a=this;this.lvls.forEach(function(i){return a.deleteCache(r,i)})}},{key:"invalidate",value:function(r){var a=r.id(),i=this.keyForId.get(a);this.deleteKeyMappingFor(r);var n=this.doesEleInvalidateKey(r);return n&&this.invalidateKey(i),n||0===this.getNumberOfIdsForKey(i)}}])}(),Zs={dequeue:"dequeue",downscale:"downscale",highQuality:"highQuality"},vp=Ne({getKey:null,doesEleInvalidateKey:Ua,drawElement:null,getBoundingBox:null,getRotationPoint:null,getRotationOffset:null,isVisible:gr,allowEdgeTxrCaching:!0,allowParentTxrCaching:!0}),xo=function(t,r){var a=this;a.renderer=t,a.onDequeues=[];var i=vp(r);H(a,i),a.lookup=new rp(i.getKey,i.doesEleInvalidateKey),a.setupDequeueing()},vn=xo.prototype;vn.reasons=Zs,vn.getTextureQueue=function(e){var t=this;return t.eleImgCaches=t.eleImgCaches||{},t.eleImgCaches[e]=t.eleImgCaches[e]||[]},vn.getRetiredTextureQueue=function(e){var r=this.eleImgCaches.retired=this.eleImgCaches.retired||{};return r[e]=r[e]||[]},vn.getElementQueue=function(){return this.eleCacheQueue=this.eleCacheQueue||new Rr(function(r,a){return a.reqs-r.reqs})},vn.getElementKeyToQueue=function(){return this.eleKeyToCacheQueue=this.eleKeyToCacheQueue||{}},vn.getElement=function(e,t,r,a,i){var n=this,s=this.renderer,o=s.cy.zoom(),u=this.lookup;if(!t||0===t.w||0===t.h||isNaN(t.w)||isNaN(t.h)||!e.visible()||e.removed()||!n.allowEdgeTxrCaching&&e.isEdge()||!n.allowParentTxrCaching&&e.isParent())return null;if(null==a&&(a=Math.ceil(Rn(o*r))),a<-4)a=-4;else if(o>=7.99||a>3)return null;var h=Math.pow(2,a),f=t.h*h,p=t.w*h,x=s.eleTextBiggerThanMin(e,h);if(!this.isVisible(e,x))return null;var _,k=u.get(e,a);if(k&&k.invalidated&&(k.invalidated=!1,k.texture.invalidatedWidth-=k.width),k)return k;if(_=f<=25?25:f<=50?50:50*Math.ceil(f/50),f>1024||p>1024)return null;var U=n.getTextureQueue(_),O=U[U.length-2],K=function(){return n.recycleTexture(_,p)||n.addTexture(_,p)};O||(O=U[U.length-1]),O||(O=K()),O.width-O.usedWidth<p&&(O=K());for(var se,$=function(dr){return dr&&dr.scaledLabelShown===x},q=i&&i===Zs.dequeue,vt=i&&i===Zs.highQuality,ae=i&&i===Zs.downscale,Yt=a+1;Yt<=3;Yt++){var he=u.get(e,Yt);if(he){se=he;break}}var me=se&&se.level===a+1?se:null,Te=function(){O.context.drawImage(me.texture.canvas,me.x,0,me.width,me.height,O.usedWidth,0,p,f)};if(O.context.setTransform(1,0,0,1,0,0),O.context.clearRect(O.usedWidth,0,p,_),$(me))Te();else if($(se)){if(!vt)return n.queueElement(e,se.level-1),se;for(var Le=se.level;Le>a;Le--)me=n.getElement(e,t,r,Le,Zs.downscale);Te()}else{var Ie;if(!q&&!vt&&!ae)for(var Oe=a-1;Oe>=-4;Oe--){var tr=u.get(e,Oe);if(tr){Ie=tr;break}}if($(Ie))return n.queueElement(e,a),Ie;O.context.translate(O.usedWidth,0),O.context.scale(h,h),this.drawElement(O.context,e,t,x,!1),O.context.scale(1/h,1/h),O.context.translate(-O.usedWidth,0)}return k={x:O.usedWidth,texture:O,level:a,scale:h,width:p,height:f,scaledLabelShown:x},O.usedWidth+=Math.ceil(p+8),O.eleCaches.push(k),u.set(e,a,k),n.checkTextureFullness(O),k},vn.invalidateElements=function(e){for(var t=0;t<e.length;t++)this.invalidateElement(e[t])},vn.invalidateElement=function(e){var t=this,r=t.lookup,a=[];if(r.isInvalid(e)){for(var n=-4;n<=3;n++){var s=r.getForCachedKey(e,n);s&&a.push(s)}if(r.invalidate(e))for(var u=0;u<a.length;u++){var h=a[u],f=h.texture;f.invalidatedWidth+=h.width,h.invalidated=!0,t.checkTextureUtility(f)}t.removeFromQueue(e)}},vn.checkTextureUtility=function(e){e.invalidatedWidth>=.2*e.width&&this.retireTexture(e)},vn.checkTextureFullness=function(e){var r=this.getTextureQueue(e.height);e.usedWidth/e.width>.8&&e.fullnessChecks>=10?at(r,e):e.fullnessChecks++},vn.retireTexture=function(e){var r=e.height,a=this.getTextureQueue(r),i=this.lookup;at(a,e),e.retired=!0;for(var n=e.eleCaches,s=0;s<n.length;s++){var o=n[s];i.deleteCache(o.key,o.level)}Ct(n),this.getRetiredTextureQueue(r).push(e)},vn.addTexture=function(e,t){var i={};return this.getTextureQueue(e).push(i),i.eleCaches=[],i.height=e,i.width=Math.max(1024,t),i.usedWidth=0,i.invalidatedWidth=0,i.fullnessChecks=0,i.canvas=this.renderer.makeOffscreenCanvas(i.width,i.height),i.context=i.canvas.getContext("2d"),i},vn.recycleTexture=function(e,t){for(var a=this.getTextureQueue(e),i=this.getRetiredTextureQueue(e),n=0;n<i.length;n++){var s=i[n];if(s.width>=t)return s.retired=!1,s.usedWidth=0,s.invalidatedWidth=0,s.fullnessChecks=0,Ct(s.eleCaches),s.context.setTransform(1,0,0,1,0,0),s.context.clearRect(0,0,s.width,s.height),at(i,s),a.push(s),s}},vn.queueElement=function(e,t){var a=this.getElementQueue(),i=this.getElementKeyToQueue(),n=this.getKey(e),s=i[n];if(s)s.level=Math.max(s.level,t),s.eles.merge(e),s.reqs++,a.updateItem(s);else{var o={eles:e.spawn().merge(e),level:t,reqs:1,key:n};a.push(o),i[n]=o}},vn.dequeue=function(e){for(var t=this,r=t.getElementQueue(),a=t.getElementKeyToQueue(),i=[],n=t.lookup,s=0;s<1&&r.size()>0;s++){var o=r.pop(),u=o.key,h=o.eles[0],f=n.hasCache(h,o.level);if(a[u]=null,!f){i.push(o);var p=t.getBoundingBox(h);t.getElement(h,p,e,o.level,Zs.dequeue)}}return i},vn.removeFromQueue=function(e){var r=this.getElementQueue(),a=this.getElementKeyToQueue(),i=this.getKey(e),n=a[i];null!=n&&(1===n.eles.length?(n.reqs=Va,r.updateItem(n),r.pop(),a[i]=null):n.eles.unmerge(e))},vn.onDequeue=function(e){this.onDequeues.push(e)},vn.offDequeue=function(e){at(this.onDequeues,e)},vn.setupDequeueing=Zd_setupDequeueing({deqRedrawThreshold:100,deqCost:.15,deqAvgCost:.1,deqNoDrawCost:.9,deqFastCost:.9,deq:function(t,r,a){return t.dequeue(r,a)},onDeqd:function(t,r){for(var a=0;a<t.onDequeues.length;a++)(0,t.onDequeues[a])(r)},shouldRedraw:function(t,r,a,i){for(var n=0;n<r.length;n++)for(var s=r[n].eles,o=0;o<s.length;o++){var u=s[o].boundingBox();if(fe(u,i))return!0}return!1},priority:function(t){return t.renderer.beforeRenderPriorities.eleTxrDeq}});var r0=function(t){var r=this,a=r.renderer=t,i=a.cy;r.layersByLevel={},r.firstGet=!0,r.lastInvalidationTime=ia()-500,r.skipping=!1,r.eleTxrDeqs=i.collection(),r.scheduleElementRefinement=Kr(function(){r.refineElementTextures(r.eleTxrDeqs),r.eleTxrDeqs.unmerge(r.eleTxrDeqs)},50),a.beforeRender(function(s,o){r.skipping=o-r.lastInvalidationTime<=250},a.beforeRenderPriorities.lyrTxrSkip),r.layersQueue=new Rr(function(o,u){return u.reqs-o.reqs}),r.setupDequeueing()},An=r0.prototype,a0=0,Ap=Math.pow(2,53)-1;An.makeLayer=function(e,t){var r=Math.pow(2,t),a=Math.ceil(e.w*r),i=Math.ceil(e.h*r),n=this.renderer.makeOffscreenCanvas(a,i),s={id:a0=++a0%Ap,bb:e,level:t,width:a,height:i,canvas:n,context:n.getContext("2d"),eles:[],elesQueue:[],reqs:0},o=s.context,u=-s.bb.x1,h=-s.bb.y1;return o.scale(r,r),o.translate(u,h),s},An.getLayers=function(e,t,r){var a=this,s=a.renderer.cy.zoom(),o=a.firstGet;if(a.firstGet=!1,null==r)if((r=Math.ceil(Rn(s*t)))<-4)r=-4;else if(s>=3.99||r>2)return null;a.validateLayersElesOrdering(r,e);var p,k,u=a.layersByLevel,h=Math.pow(2,r),f=u[r]=u[r]||[];if(a.levelIsComplete(r,e))return f;!function(){var Te=function(cr){if(a.validateLayersElesOrdering(cr,e),a.levelIsComplete(cr,e))return k=u[cr],!0},Le=function(cr){if(!k)for(var dr=r+cr;-4<=dr&&dr<=2&&!Te(dr);dr+=cr);};Le(1),Le(-1);for(var Ie=f.length-1;Ie>=0;Ie--){var Oe=f[Ie];Oe.invalid&&at(f,Oe)}}();var O=function(Te){var Le=(Te=Te||{}).after;!function(){if(!p){p=kt();for(var Te=0;Te<e.length;Te++)nt(p,e[Te].boundingBox())}}();var Ie=Math.ceil(p.w*h),Oe=Math.ceil(p.h*h);if(Ie>32767||Oe>32767)return null;if(Ie*Oe>16e6)return null;var cr=a.makeLayer(p,r);if(null!=Le){var dr=f.indexOf(Le)+1;f.splice(dr,0,cr)}else(void 0===Te.insert||Te.insert)&&f.unshift(cr);return cr};if(a.skipping&&!o)return null;for(var K=null,$=e.length/1,q=!o,vt=0;vt<e.length;vt++){var ae=e[vt],se=ae._private.rscratch,Yt=se.imgLayerCaches=se.imgLayerCaches||{},he=Yt[r];if(he)K=he;else{if((!K||K.eles.length>=$||!l(K.bb,ae.boundingBox()))&&!(K=O({insert:!0,after:K})))return null;k||q?a.queueLayer(K,ae):a.drawEleInLayer(K,ae,r,t),K.eles.push(ae),Yt[r]=K}}return k||(q?null:f)},An.getEleLevelForLayerLevel=function(e,t){return e},An.drawEleInLayer=function(e,t,r,a){var n=this.renderer,s=e.context,o=t.boundingBox();0===o.w||0===o.h||!t.visible()||(r=this.getEleLevelForLayerLevel(r,a),n.setImgSmoothing(s,!1),n.drawCachedElement(s,t,null,null,r,!0),n.setImgSmoothing(s,!0))},An.levelIsComplete=function(e,t){var a=this.layersByLevel[e];if(!a||0===a.length)return!1;for(var i=0,n=0;n<a.length;n++){var s=a[n];if(s.reqs>0||s.invalid)return!1;i+=s.eles.length}return i===t.length},An.validateLayersElesOrdering=function(e,t){var r=this.layersByLevel[e];if(r)for(var a=0;a<r.length;a++){for(var i=r[a],n=-1,s=0;s<t.length;s++)if(i.eles[0]===t[s]){n=s;break}if(n<0)this.invalidateLayer(i);else{var o=n;for(s=0;s<i.eles.length;s++)if(i.eles[s]!==t[o+s]){this.invalidateLayer(i);break}}}},An.updateElementsInLayers=function(e,t){for(var a=Rt(e[0]),i=0;i<e.length;i++)for(var n=a?null:e[i],s=a?e[i]:e[i].ele,o=s._private.rscratch,u=o.imgLayerCaches=o.imgLayerCaches||{},h=-4;h<=2;h++){var f=u[h];f&&(n&&this.getEleLevelForLayerLevel(f.level)!==n.level||t(f,s,n))}},An.haveLayers=function(){for(var t=!1,r=-4;r<=2;r++){var a=this.layersByLevel[r];if(a&&a.length>0){t=!0;break}}return t},An.invalidateElements=function(e){var t=this;0!==e.length&&(t.lastInvalidationTime=ia(),0!==e.length&&t.haveLayers()&&t.updateElementsInLayers(e,function(a,i,n){t.invalidateLayer(a)}))},An.invalidateLayer=function(e){if(this.lastInvalidationTime=ia(),!e.invalid){var t=e.level,r=e.eles;at(this.layersByLevel[t],e),e.elesQueue=[],e.invalid=!0,e.replacement&&(e.replacement.invalid=!0);for(var i=0;i<r.length;i++){var n=r[i]._private.rscratch.imgLayerCaches;n&&(n[t]=null)}}},An.refineElementTextures=function(e){var t=this;t.updateElementsInLayers(e,function(a,i,n){var s=a.replacement;if(s||((s=a.replacement=t.makeLayer(a.bb,a.level)).replaces=a,s.eles=a.eles),!s.reqs)for(var o=0;o<s.eles.length;o++)t.queueLayer(s,s.eles[o])})},An.enqueueElementRefinement=function(e){this.eleTxrDeqs.merge(e),this.scheduleElementRefinement()},An.queueLayer=function(e,t){var a=this.layersQueue,i=e.elesQueue,n=i.hasId=i.hasId||{};if(!e.replacement){if(t){if(n[t.id()])return;i.push(t),n[t.id()]=!0}e.reqs?(e.reqs++,a.updateItem(e)):(e.reqs=1,a.push(e))}},An.dequeue=function(e){for(var t=this,r=t.layersQueue,a=[],i=0;i<1&&0!==r.size();){var n=r.peek();if(n.replacement)r.pop();else if(n.replaces&&n!==n.replaces.replacement)r.pop();else if(n.invalid)r.pop();else{var s=n.elesQueue.shift();s&&(t.drawEleInLayer(n,s,n.level,e),i++),0===a.length&&a.push(!0),0===n.elesQueue.length&&(r.pop(),n.reqs=0,n.replaces&&t.applyLayerReplacement(n),t.requestRedraw())}}return a},An.applyLayerReplacement=function(e){var r=this.layersByLevel[e.level],a=e.replaces,i=r.indexOf(a);if(!(i<0||a.invalid)){r[i]=e;for(var n=0;n<e.eles.length;n++){var s=e.eles[n]._private,o=s.imgLayerCaches=s.imgLayerCaches||{};o&&(o[e.level]=e)}this.requestRedraw()}},An.requestRedraw=Kr(function(){var e=this.renderer;e.redrawHint("eles",!0),e.redrawHint("drag",!0),e.redraw()},100),An.setupDequeueing=Zd_setupDequeueing({deqRedrawThreshold:50,deqCost:.15,deqAvgCost:.1,deqNoDrawCost:.9,deqFastCost:.9,deq:function(t,r){return t.dequeue(r)},onDeqd:Oa,shouldRedraw:gr,priority:function(t){return t.renderer.beforeRenderPriorities.lyrTxrDeq}});var n0,i0={};function Dp(e,t){for(var r=0;r<t.length;r++){var a=t[r];e.lineTo(a.x,a.y)}}function Lp(e,t,r){for(var a,i=0;i<t.length;i++){var n=t[i];0===i&&(a=n),e.lineTo(n.x,n.y)}e.quadraticCurveTo(r.x,r.y,a.x,a.y)}function s0(e,t,r){e.beginPath&&e.beginPath();for(var a=t,i=0;i<a.length;i++)e.lineTo((n=a[i]).x,n.y);var s=r,o=r[0];for(e.moveTo(o.x,o.y),i=1;i<s.length;i++){var n;e.lineTo((n=s[i]).x,n.y)}e.closePath&&e.closePath()}function Bp(e,t,r,a,i){e.beginPath&&e.beginPath(),e.arc(r,a,i,0,2*Math.PI,!1);var n=t,s=n[0];e.moveTo(s.x,s.y);for(var o=0;o<n.length;o++){var u=n[o];e.lineTo(u.x,u.y)}e.closePath&&e.closePath()}function Rp(e,t,r,a){e.arc(t,r,a,0,2*Math.PI,!1)}i0.arrowShapeImpl=function(e){return(n0||(n0={polygon:Dp,"triangle-backcurve":Lp,"triangle-tee":s0,"circle-triangle":Bp,"triangle-cross":s0,circle:Rp}))[e]};var ns={drawElement:function(e,t,r,a,i,n){t.isNode()?this.drawNode(e,t,r,a,i,n):this.drawEdge(e,t,r,a,i,n)},drawElementOverlay:function(e,t){t.isNode()?this.drawNodeOverlay(e,t):this.drawEdgeOverlay(e,t)},drawElementUnderlay:function(e,t){t.isNode()?this.drawNodeUnderlay(e,t):this.drawEdgeUnderlay(e,t)},drawCachedElementPortion:function(e,t,r,a,i,n,s,o){var u=this,h=r.getBoundingBox(t);if(0!==h.w&&0!==h.h){var f=r.getElement(t,h,a,i,n);if(null!=f){var p=o(u,t);if(0===p)return;var K,$,q,vt,ae,he,x=s(u,t),k=h.x1,_=h.y1,U=h.w,O=h.h;if(0!==x){var se=r.getRotationPoint(t);e.translate(q=se.x,vt=se.y),e.rotate(x),(ae=u.getImgSmoothing(e))||u.setImgSmoothing(e,!0);var Yt=r.getRotationOffset(t);K=Yt.x,$=Yt.y}else K=k,$=_;1!==p&&(e.globalAlpha=(he=e.globalAlpha)*p),e.drawImage(f.texture.canvas,f.x,0,f.width,f.height,K,$,U,O),1!==p&&(e.globalAlpha=he),0!==x&&(e.rotate(-x),e.translate(-q,-vt),ae||u.setImgSmoothing(e,!1))}else r.drawElement(e,t)}}},Pp=function(){return 0},Mp=function(t,r){return t.getTextAngle(r,null)},Ip=function(t,r){return t.getTextAngle(r,"source")},Op=function(t,r){return t.getTextAngle(r,"target")},Np=function(t,r){return r.effectiveOpacity()},Gc=function(t,r){return r.pstyle("text-opacity").pfValue*r.effectiveOpacity()};ns.drawCachedElement=function(e,t,r,a,i,n){var s=this,o=s.data,u=o.eleTxrCache,h=o.lblTxrCache,f=o.slbTxrCache,p=o.tlbTxrCache,x=t.boundingBox(),k=!0===n?u.reasons.highQuality:null;if(0!==x.w&&0!==x.h&&t.visible()&&(!a||fe(x,a))){var _=t.isEdge(),U=t.element()._private.rscratch.badLine;s.drawElementUnderlay(e,t),s.drawCachedElementPortion(e,t,u,r,i,k,Pp,Np),(!_||!U)&&s.drawCachedElementPortion(e,t,h,r,i,k,Mp,Gc),_&&!U&&(s.drawCachedElementPortion(e,t,f,r,i,k,Ip,Gc),s.drawCachedElementPortion(e,t,p,r,i,k,Op,Gc)),s.drawElementOverlay(e,t)}},ns.drawElements=function(e,t){for(var a=0;a<t.length;a++)this.drawElement(e,t[a])},ns.drawCachedElements=function(e,t,r,a){for(var n=0;n<t.length;n++)this.drawCachedElement(e,t[n],r,a)},ns.drawCachedNodes=function(e,t,r,a){for(var n=0;n<t.length;n++){var s=t[n];s.isNode()&&this.drawCachedElement(e,s,r,a)}},ns.drawLayeredElements=function(e,t,r,a){var n=this.data.lyrTxrCache.getLayers(t,r);if(n)for(var s=0;s<n.length;s++){var o=n[s],u=o.bb;0===u.w||0===u.h||e.drawImage(o.canvas,u.x1,u.y1,u.w,u.h)}else this.drawCachedElements(e,t,r,a)};var hs={drawEdge:function(e,t,r){var a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],n=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],s=this,o=t._private.rscratch;if((!n||t.visible())&&!o.badLine&&null!=o.allpts&&!isNaN(o.allpts[0])){var u;r&&e.translate(-(u=r).x1,-u.y1);var h=n?t.pstyle("opacity").value:1,f=n?t.pstyle("line-opacity").value:1,p=t.pstyle("curve-style").value,x=t.pstyle("line-style").value,k=t.pstyle("width").pfValue,_=t.pstyle("line-cap").value,U=t.pstyle("line-outline-width").value,O=t.pstyle("line-outline-color").value,K=h*f,$=h*f,q=function(){var cr=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K;"straight-triangle"===p?(s.eleStrokeStyle(e,t,cr),s.drawEdgeTrianglePath(t,e,o.allpts)):(e.lineWidth=k,e.lineCap=_,s.eleStrokeStyle(e,t,cr),s.drawEdgePath(t,e,o.allpts,x),e.lineCap="butt")},Yt=function(){s.drawArrowheads(e,t,arguments.length>0&&void 0!==arguments[0]?arguments[0]:$)};if(e.lineJoin="round","yes"===t.pstyle("ghost").value){var Te=t.pstyle("ghost-offset-x").pfValue,Le=t.pstyle("ghost-offset-y").pfValue,Ie=t.pstyle("ghost-opacity").value,Oe=K*Ie;e.translate(Te,Le),q(Oe),Yt(Oe),e.translate(-Te,-Le)}else!function(){var cr=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K;e.lineWidth=k+U,e.lineCap=_,U>0?(s.colorStrokeStyle(e,O[0],O[1],O[2],cr),"straight-triangle"===p?s.drawEdgeTrianglePath(t,e,o.allpts):(s.drawEdgePath(t,e,o.allpts,x),e.lineCap="butt")):e.lineCap="butt"}();i&&s.drawEdgeUnderlay(e,t),q(),Yt(),i&&s.drawEdgeOverlay(e,t),s.drawElementText(e,t,null,a),r&&e.translate(u.x1,u.y1)}}},o0=function(t){if(!["overlay","underlay"].includes(t))throw new Error("Invalid state");return function(r,a){if(a.visible()){var i=a.pstyle("".concat(t,"-opacity")).value;if(0!==i){var n=this,s=n.usePaths(),o=a._private.rscratch,h=2*a.pstyle("".concat(t,"-padding")).pfValue,f=a.pstyle("".concat(t,"-color")).value;r.lineWidth=h,r.lineCap="self"!==o.edgeType||s?"round":"butt",n.colorStrokeStyle(r,f[0],f[1],f[2],i),n.drawEdgePath(a,r,o.allpts,"solid")}}}};hs.drawEdgeOverlay=o0("overlay"),hs.drawEdgeUnderlay=o0("underlay"),hs.drawEdgePath=function(e,t,r,a){var s,i=e._private.rscratch,n=t,o=!1,u=this.usePaths(),h=e.pstyle("line-dash-pattern").pfValue,f=e.pstyle("line-dash-offset").pfValue;if(u){var p=r.join("$");i.pathCacheKey&&i.pathCacheKey===p?(s=t=i.pathCache,o=!0):(s=t=new Path2D,i.pathCacheKey=p,i.pathCache=s)}if(n.setLineDash)switch(a){case"dotted":n.setLineDash([1,1]);break;case"dashed":n.setLineDash(h),n.lineDashOffset=f;break;case"solid":n.setLineDash([])}if(!o&&!i.badLine)switch(t.beginPath&&t.beginPath(),t.moveTo(r[0],r[1]),i.edgeType){case"bezier":case"self":case"compound":case"multibezier":for(var k=2;k+3<r.length;k+=4)t.quadraticCurveTo(r[k],r[k+1],r[k+2],r[k+3]);break;case"straight":case"haystack":for(var _=2;_+1<r.length;_+=2)t.lineTo(r[_],r[_+1]);break;case"segments":if(i.isRound){var O,U=G(i.roundCorners);try{for(U.s();!(O=U.n()).done;)Wd(t,O.value)}catch(q){U.e(q)}finally{U.f()}t.lineTo(r[r.length-2],r[r.length-1])}else for(var $=2;$+1<r.length;$+=2)t.lineTo(r[$],r[$+1])}t=n,u?t.stroke(s):t.stroke(),t.setLineDash&&t.setLineDash([])},hs.drawEdgeTrianglePath=function(e,t,r){t.fillStyle=t.strokeStyle;for(var a=e.pstyle("width").pfValue,i=0;i+1<r.length;i+=2){var n=[r[i+2]-r[i],r[i+3]-r[i+1]],s=Math.sqrt(n[0]*n[0]+n[1]*n[1]),o=[n[1]/s,-n[0]/s],u=[o[0]*a/2,o[1]*a/2];t.beginPath(),t.moveTo(r[i]-u[0],r[i+1]-u[1]),t.lineTo(r[i]+u[0],r[i+1]+u[1]),t.lineTo(r[i+2],r[i+3]),t.closePath(),t.fill()}},hs.drawArrowheads=function(e,t,r){var a=t._private.rscratch,i="haystack"===a.edgeType;i||this.drawArrowhead(e,t,"source",a.arrowStartX,a.arrowStartY,a.srcArrowAngle,r),this.drawArrowhead(e,t,"mid-target",a.midX,a.midY,a.midtgtArrowAngle,r),this.drawArrowhead(e,t,"mid-source",a.midX,a.midY,a.midsrcArrowAngle,r),i||this.drawArrowhead(e,t,"target",a.arrowEndX,a.arrowEndY,a.tgtArrowAngle,r)},hs.drawArrowhead=function(e,t,r,a,i,n,s){if(!(isNaN(a)||null==a||isNaN(i)||null==i||isNaN(n)||null==n)){var o=this,u=t.pstyle(r+"-arrow-shape").value;if("none"!==u){var h="hollow"===t.pstyle(r+"-arrow-fill").value?"both":"filled",f=t.pstyle(r+"-arrow-fill").value,p=t.pstyle("width").pfValue,x=t.pstyle(r+"-arrow-width"),k="match-line"===x.value?p:x.pfValue;"%"===x.units&&(k*=p);var _=t.pstyle("opacity").value;void 0===s&&(s=_);var U=e.globalCompositeOperation;(1!==s||"hollow"===f)&&(e.globalCompositeOperation="destination-out",o.colorFillStyle(e,255,255,255,1),o.colorStrokeStyle(e,255,255,255,1),o.drawArrowShape(t,e,h,p,u,k,a,i,n),e.globalCompositeOperation=U);var O=t.pstyle(r+"-arrow-color").value;o.colorFillStyle(e,O[0],O[1],O[2],s),o.colorStrokeStyle(e,O[0],O[1],O[2],s),o.drawArrowShape(t,e,f,p,u,k,a,i,n)}}},hs.drawArrowShape=function(e,t,r,a,i,n,s,o,u){var x,h=this,f=this.usePaths()&&"triangle-cross"!==i,p=!1,k=t,_={x:s,y:o},U=e.pstyle("arrow-scale").value,O=this.getArrowWidth(a,U),K=h.arrowShapes[i];if(f){var $=h.arrowPathCache=h.arrowPathCache||[],q=da(i),vt=$[q];null!=vt?(x=t=vt,p=!0):(x=t=new Path2D,$[q]=x)}p||(t.beginPath&&t.beginPath(),f?K.draw(t,1,0,{x:0,y:0},1):K.draw(t,O,u,_,a),t.closePath&&t.closePath()),t=k,f&&(t.translate(s,o),t.rotate(u),t.scale(O,O)),("filled"===r||"both"===r)&&(f?t.fill(x):t.fill()),("hollow"===r||"both"===r)&&(t.lineWidth=n/(f?O:1),t.lineJoin="miter",f?t.stroke(x):t.stroke()),f&&(t.scale(1/O,1/O),t.rotate(-u),t.translate(-s,-o))};var qc={safeDrawImage:function(e,t,r,a,i,n,s,o,u,h){if(!(i<=0||n<=0||u<=0||h<=0))try{e.drawImage(t,r,a,i,n,s,o,u,h)}catch(f){_a(f)}},drawInscribedImage:function(e,t,r,a,i){var n=this,s=r.position(),o=s.x,u=s.y,h=r.cy().style(),f=h.getIndexedStyle.bind(h),p=f(r,"background-fit","value",a),x=f(r,"background-repeat","value",a),k=r.width(),_=r.height(),U=2*r.padding(),O=k+("inner"===f(r,"background-width-relative-to","value",a)?0:U),K=_+("inner"===f(r,"background-height-relative-to","value",a)?0:U),$=r._private.rscratch,vt="node"===f(r,"background-clip","value",a),ae=f(r,"background-image-opacity","value",a)*i,se=f(r,"background-image-smoothing","value",a),Yt=r.pstyle("corner-radius").value;"auto"!==Yt&&(Yt=r.pstyle("corner-radius").pfValue);var he=t.width||t.cachedW,me=t.height||t.cachedH;(null==he||null==me)&&(document.body.appendChild(t),he=t.cachedW=t.width||t.offsetWidth,me=t.cachedH=t.height||t.offsetHeight,document.body.removeChild(t));var Te=he,Le=me;if("auto"!==f(r,"background-width","value",a)&&(Te="%"===f(r,"background-width","units",a)?f(r,"background-width","pfValue",a)*O:f(r,"background-width","pfValue",a)),"auto"!==f(r,"background-height","value",a)&&(Le="%"===f(r,"background-height","units",a)?f(r,"background-height","pfValue",a)*K:f(r,"background-height","pfValue",a)),0!==Te&&0!==Le){if("contain"===p)Te*=Ie=Math.min(O/Te,K/Le),Le*=Ie;else if("cover"===p){var Ie;Te*=Ie=Math.max(O/Te,K/Le),Le*=Ie}var Oe=o-O/2,tr=f(r,"background-position-x","units",a),cr=f(r,"background-position-x","pfValue",a);Oe+="%"===tr?(O-Te)*cr:cr;var dr=f(r,"background-offset-x","units",a),rr=f(r,"background-offset-x","pfValue",a);Oe+="%"===dr?(O-Te)*rr:rr;var Cr=u-K/2,Vr=f(r,"background-position-y","units",a),qr=f(r,"background-position-y","pfValue",a);Cr+="%"===Vr?(K-Le)*qr:qr;var Ar=f(r,"background-offset-y","units",a),Fr=f(r,"background-offset-y","pfValue",a);Cr+="%"===Ar?(K-Le)*Fr:Fr,$.pathCache&&(Oe-=o,Cr-=u,o=0,u=0);var ga=e.globalAlpha;e.globalAlpha=ae;var Ea=n.getImgSmoothing(e),pa=!1;if("no"===se&&Ea?(n.setImgSmoothing(e,!1),pa=!0):"yes"===se&&!Ea&&(n.setImgSmoothing(e,!0),pa=!0),"no-repeat"===x)vt&&(e.save(),$.pathCache?e.clip($.pathCache):(n.nodeShapes[n.getNodeShape(r)].draw(e,o,u,O,K,Yt,$),e.clip())),n.safeDrawImage(e,t,0,0,he,me,Oe,Cr,Te,Le),vt&&e.restore();else{var Aa=e.createPattern(t,x);e.fillStyle=Aa,n.nodeShapes[n.getNodeShape(r)].draw(e,o,u,O,K,Yt,$),e.translate(Oe,Cr),e.fill(),e.translate(-Oe,-Cr)}e.globalAlpha=ga,pa&&n.setImgSmoothing(e,Ea)}}},Ls={};function l0(e,t,r,a,i){var s=Math.min(arguments.length>5&&void 0!==arguments[5]?arguments[5]:5,a/2,i/2);e.beginPath(),e.moveTo(t+s,r),e.lineTo(t+a-s,r),e.quadraticCurveTo(t+a,r,t+a,r+s),e.lineTo(t+a,r+i-s),e.quadraticCurveTo(t+a,r+i,t+a-s,r+i),e.lineTo(t+s,r+i),e.quadraticCurveTo(t,r+i,t,r+i-s),e.lineTo(t,r+s),e.quadraticCurveTo(t,r,t+s,r),e.closePath()}Ls.eleTextBiggerThanMin=function(e,t){if(!t){var r=e.cy().zoom(),a=this.getPixelRatio(),i=Math.ceil(Rn(r*a));t=Math.pow(2,i)}return!(e.pstyle("font-size").pfValue*t<e.pstyle("min-zoomed-font-size").pfValue)},Ls.drawElementText=function(e,t,r,a,i){var n=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],s=this;if(null==a){if(n&&!s.eleTextBiggerThanMin(t))return}else if(!1===a)return;if(t.isNode()){var o=t.pstyle("label");if(!o||!o.value)return;var u=s.getLabelJustification(t);e.textAlign=u,e.textBaseline="bottom"}else{var h=t.element()._private.rscratch.badLine,f=t.pstyle("label"),p=t.pstyle("source-label"),x=t.pstyle("target-label");if(h||(!f||!f.value)&&(!p||!p.value)&&(!x||!x.value))return;e.textAlign="center",e.textBaseline="bottom"}var _,k=!r;r&&e.translate(-(_=r).x1,-_.y1),null==i?(s.drawText(e,t,null,k,n),t.isEdge()&&(s.drawText(e,t,"source",k,n),s.drawText(e,t,"target",k,n))):s.drawText(e,t,i,k,n),r&&e.translate(_.x1,_.y1)},Ls.getFontCache=function(e){var t;this.fontCaches=this.fontCaches||[];for(var r=0;r<this.fontCaches.length;r++)if((t=this.fontCaches[r]).context===e)return t;return this.fontCaches.push(t={context:e}),t},Ls.setupTextStyle=function(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=t.pstyle("font-style").strValue,i=t.pstyle("font-size").pfValue+"px",n=t.pstyle("font-family").strValue,s=t.pstyle("font-weight").strValue,o=r?t.effectiveOpacity()*t.pstyle("text-opacity").value:1,u=t.pstyle("text-outline-opacity").value*o,h=t.pstyle("color").value,f=t.pstyle("text-outline-color").value;e.font=a+" "+s+" "+i+" "+n,e.lineJoin="round",this.colorFillStyle(e,h[0],h[1],h[2],o),this.colorStrokeStyle(e,f[0],f[1],f[2],u)},Ls.getTextAngle=function(e,t){var r,i=e._private.rscratch,s=e.pstyle((t?t+"-":"")+"text-rotation");if("autorotate"===s.strValue){var o=Jt(i,"labelAngle",t);r=e.isEdge()?o:0}else r="none"===s.strValue?0:s.pfValue;return r},Ls.drawText=function(e,t,r){var a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],s=t._private.rscratch,o=i?t.effectiveOpacity():1;if(!i||0!==o&&0!==t.pstyle("text-opacity").value){"main"===r&&(r=null);var f,p,u=Jt(s,"labelX",r),h=Jt(s,"labelY",r),x=this.getLabelText(t,r);if(null!=x&&""!==x&&!isNaN(u)&&!isNaN(h)){this.setupTextStyle(e,t,i);var ae,k=r?r+"-":"",_=Jt(s,"labelWidth",r),U=Jt(s,"labelHeight",r),O=t.pstyle(k+"text-margin-x").pfValue,K=t.pstyle(k+"text-margin-y").pfValue,$=t.isEdge(),q=t.pstyle("text-halign").value,vt=t.pstyle("text-valign").value;switch($&&(q="center",vt="center"),u+=O,h+=K,0!==(ae=a?this.getTextAngle(t,r):0)&&(e.translate(f=u,p=h),e.rotate(ae),u=0,h=0),vt){case"top":break;case"center":h+=U/2;break;case"bottom":h+=U}var se=t.pstyle("text-background-opacity").value,Yt=t.pstyle("text-border-opacity").value,he=t.pstyle("text-border-width").pfValue,me=t.pstyle("text-background-padding").pfValue,Te=t.pstyle("text-background-shape").strValue,Le="round-rectangle"===Te||"roundrectangle"===Te,Ie="circle"===Te;if(se>0||he>0&&Yt>0){var tr=e.fillStyle,cr=e.strokeStyle,dr=e.lineWidth,rr=t.pstyle("text-background-color").value,Cr=t.pstyle("text-border-color").value,Vr=t.pstyle("text-border-style").value,qr=se>0,Ar=he>0&&Yt>0,Fr=u-me;switch(q){case"left":Fr-=_;break;case"center":Fr-=_/2}var ga=h-U-me,Ea=_+2*me,pa=U+2*me;if(qr&&(e.fillStyle="rgba(".concat(rr[0],",").concat(rr[1],",").concat(rr[2],",").concat(se*o,")")),Ar&&(e.strokeStyle="rgba(".concat(Cr[0],",").concat(Cr[1],",").concat(Cr[2],",").concat(Yt*o,")"),e.lineWidth=he,e.setLineDash))switch(Vr){case"dotted":e.setLineDash([1,1]);break;case"dashed":e.setLineDash([4,2]);break;case"double":e.lineWidth=he/4,e.setLineDash([]);break;default:e.setLineDash([])}if(Le?(e.beginPath(),l0(e,Fr,ga,Ea,pa,2)):Ie?(e.beginPath(),function Fp(e,t,r,a,i){var s=Math.min(a,i)/2,o=t+a/2,u=r+i/2;e.beginPath(),e.arc(o,u,s,0,2*Math.PI),e.closePath()}(e,Fr,ga,Ea,pa)):(e.beginPath(),e.rect(Fr,ga,Ea,pa)),qr&&e.fill(),Ar&&e.stroke(),Ar&&"double"===Vr){var Aa=he/2;e.beginPath(),Le?l0(e,Fr+Aa,ga+Aa,Ea-2*Aa,pa-2*Aa,2):e.rect(Fr+Aa,ga+Aa,Ea-2*Aa,pa-2*Aa),e.stroke()}e.fillStyle=tr,e.strokeStyle=cr,e.lineWidth=dr,e.setLineDash&&e.setLineDash([])}var Ra=2*t.pstyle("text-outline-width").pfValue;if(Ra>0&&(e.lineWidth=Ra),"wrap"===t.pstyle("text-wrap").value){var Za=Jt(s,"labelWrapCachedLines",r),Ta=Jt(s,"labelLineHeight",r),Nr=_/2,Ur=this.getLabelJustification(t);switch("auto"===Ur||("left"===q?"left"===Ur?u+=-_:"center"===Ur&&(u+=-Nr):"center"===q?"left"===Ur?u+=-Nr:"right"===Ur&&(u+=Nr):"right"===q&&("center"===Ur?u+=Nr:"right"===Ur&&(u+=_))),vt){case"top":case"center":case"bottom":h-=(Za.length-1)*Ta}for(var Zr=0;Zr<Za.length;Zr++)Ra>0&&e.strokeText(Za[Zr],u,h),e.fillText(Za[Zr],u,h),h+=Ta}else Ra>0&&e.strokeText(x,u,h),e.fillText(x,u,h);0!==ae&&(e.rotate(-ae),e.translate(-f,-p))}}};var _s={drawNode:function(e,t,r){var o,u,a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],n=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],s=this,h=t._private,f=h.rscratch,p=t.position();if(X(p.x)&&X(p.y)&&(!n||t.visible())){var _,K,x=n?t.effectiveOpacity():1,k=s.usePaths(),U=!1,O=t.padding();o=t.width()+2*O,u=t.height()+2*O,r&&e.translate(-(K=r).x1,-K.y1);for(var q=t.pstyle("background-image").value,vt=new Array(q.length),ae=new Array(q.length),se=0,Yt=0;Yt<q.length;Yt++){var he=q[Yt];if(vt[Yt]=null!=he&&"none"!==he){var Te=t.cy().style().getIndexedStyle(t,"background-image-crossorigin","value",Yt);se++,ae[Yt]=s.getCachedImage(he,Te,function(){h.backgroundTimestamp=Date.now(),t.emitAndNotify("background")})}}var Le=t.pstyle("background-blacken").value,Ie=t.pstyle("border-width").pfValue,Oe=t.pstyle("background-opacity").value*x,tr=t.pstyle("border-color").value,cr=t.pstyle("border-style").value,dr=t.pstyle("border-join").value,rr=t.pstyle("border-cap").value,Cr=t.pstyle("border-position").value,Vr=t.pstyle("border-dash-pattern").pfValue,qr=t.pstyle("border-dash-offset").pfValue,Ar=t.pstyle("border-opacity").value*x,Fr=t.pstyle("outline-width").pfValue,ga=t.pstyle("outline-color").value,Ea=t.pstyle("outline-style").value,pa=t.pstyle("outline-opacity").value*x,Aa=t.pstyle("outline-offset").value,Ra=t.pstyle("corner-radius").value;"auto"!==Ra&&(Ra=t.pstyle("corner-radius").pfValue);var Za=function(){s.eleFillStyle(e,t,arguments.length>0&&void 0!==arguments[0]?arguments[0]:Oe)},Ta=function(){s.colorStrokeStyle(e,tr[0],tr[1],tr[2],arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ar)},Nr=function(){s.colorStrokeStyle(e,ga[0],ga[1],ga[2],arguments.length>0&&void 0!==arguments[0]?arguments[0]:pa)},Ur=function(ai,va,ge,$r){var ei,na=s.nodePathCache=s.nodePathCache||[],ca=Pa("polygon"===ge?ge+","+$r.join(","):ge,""+va,""+ai,""+Ra),xa=na[ca],Da=!1;return null!=xa?(Da=!0,f.pathCache=ei=xa):(ei=new Path2D,na[ca]=f.pathCache=ei),{path:ei,cacheHit:Da}},Zr=t.pstyle("shape").strValue,ma=t.pstyle("shape-polygon-points").pfValue;if(k){e.translate(p.x,p.y);var Ga=Ur(o,u,Zr,ma);_=Ga.path,U=Ga.cacheHit}var li=function(){if(!U){var ai=p;k&&(ai={x:0,y:0}),s.nodeShapes[s.getNodeShape(t)].draw(_||e,ai.x,ai.y,o,u,Ra,f)}k?e.fill(_):e.fill()},Mi=function(){for(var ai=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,va=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],ge=h.backgrounding,$r=0,na=0;na<ae.length;na++){var ca=t.cy().style().getIndexedStyle(t,"background-image-containment","value",na);va&&"over"===ca||!va&&"inside"===ca?$r++:vt[na]&&ae[na].complete&&!ae[na].error&&($r++,s.drawInscribedImage(e,ae[na],t,na,ai))}h.backgrounding=$r!==se,ge!==h.backgrounding&&t.updateStyle(!1)},Ci=function(){var ai=arguments.length>0&&void 0!==arguments[0]&&arguments[0],va=arguments.length>1&&void 0!==arguments[1]?arguments[1]:x;s.hasPie(t)&&(s.drawPie(e,t,va),ai&&(k||s.nodeShapes[s.getNodeShape(t)].draw(e,p.x,p.y,o,u,Ra,f)))},xi=function(){var ai=arguments.length>0&&void 0!==arguments[0]&&arguments[0],va=arguments.length>1&&void 0!==arguments[1]?arguments[1]:x;s.hasStripe(t)&&(e.save(),k?e.clip(f.pathCache):(s.nodeShapes[s.getNodeShape(t)].draw(e,p.x,p.y,o,u,Ra,f),e.clip()),s.drawStripe(e,t,va),e.restore(),ai&&(k||s.nodeShapes[s.getNodeShape(t)].draw(e,p.x,p.y,o,u,Ra,f)))},gi=function(){var ge=Le>0?0:255;0!==Le&&(s.colorFillStyle(e,ge,ge,ge,(Le>0?Le:-Le)*(arguments.length>0&&void 0!==arguments[0]?arguments[0]:x)),k?e.fill(_):e.fill())},Qa=function(){if(Ie>0){if(e.lineWidth=Ie,e.lineCap=rr,e.lineJoin=dr,e.setLineDash)switch(cr){case"dotted":e.setLineDash([1,1]);break;case"dashed":e.setLineDash(Vr),e.lineDashOffset=qr;break;case"solid":case"double":e.setLineDash([])}if("center"!==Cr){if(e.save(),e.lineWidth*=2,"inside"===Cr)k?e.clip(_):e.clip();else{var ai=new Path2D;ai.rect(-o/2-Ie,-u/2-Ie,o+2*Ie,u+2*Ie),ai.addPath(_),e.clip(ai,"evenodd")}k?e.stroke(_):e.stroke(),e.restore()}else k?e.stroke(_):e.stroke();if("double"===cr){e.lineWidth=Ie/3;var va=e.globalCompositeOperation;e.globalCompositeOperation="destination-out",k?e.stroke(_):e.stroke(),e.globalCompositeOperation=va}e.setLineDash&&e.setLineDash([])}},ci=function(){if(Fr>0){if(e.lineWidth=Fr,e.lineCap="butt",e.setLineDash)switch(Ea){case"dotted":e.setLineDash([1,1]);break;case"dashed":e.setLineDash([4,2]);break;case"solid":case"double":e.setLineDash([])}var ai=p;k&&(ai={x:0,y:0});var va=s.getNodeShape(t),ge=Ie;"inside"===Cr&&(ge=0),"outside"===Cr&&(ge*=2);var Da,$r=(o+ge+(Fr+Aa))/o,na=(u+ge+(Fr+Aa))/u,ca=o*$r,xa=u*na,ei=s.nodeShapes[va].points;if(k&&(Da=Ur(ca,xa,va,ei).path),"ellipse"===va)s.drawEllipsePath(Da||e,ai.x,ai.y,ca,xa);else if(["round-diamond","round-heptagon","round-hexagon","round-octagon","round-pentagon","round-polygon","round-triangle","round-tag"].includes(va)){var ii=0,pi=0,Ai=0;"round-diamond"===va?ii=1.4*(ge+Aa+Fr):"round-heptagon"===va?(ii=1.075*(ge+Aa+Fr),Ai=-(ge/2+Aa+Fr)/35):"round-hexagon"===va?ii=1.12*(ge+Aa+Fr):"round-pentagon"===va?(ii=1.13*(ge+Aa+Fr),Ai=-(ge/2+Aa+Fr)/15):"round-tag"===va?(ii=1.12*(ge+Aa+Fr),pi=.07*(ge/2+Fr+Aa)):"round-triangle"===va&&(ii=(ge+Aa+Fr)*(Math.PI/2),Ai=-(ge+Aa/2+Fr)/Math.PI),0!==ii&&(ca=o*($r=(o+ii)/o),["round-hexagon","round-tag"].includes(va)||(xa=u*(na=(u+ii)/u)));for(var Ti=ca/2,oi=xa/2,Li=(Ra="auto"===Ra?os(ca,xa):Ra)+(ge+Fr+Aa)/2,Di=new Array(ei.length/2),yn=new Array(ei.length/2),on=0;on<ei.length/2;on++)Di[on]={x:ai.x+pi+Ti*ei[2*on],y:ai.y+Ai+oi*ei[2*on+1]};var Kn,fn,Cn,mn,Dn=Di.length;for(fn=Di[Dn-1],Kn=0;Kn<Dn;Kn++)yn[Kn]=Uc(fn,Cn=Di[Kn%Dn],mn=Di[(Kn+1)%Dn],Li),fn=Cn,Cn=mn;s.drawRoundPolygonPath(Da||e,ai.x+pi,ai.y+Ai,o*$r,u*na,ei,yn)}else["roundrectangle","round-rectangle"].includes(va)?(Ra="auto"===Ra?Ui(ca,xa):Ra,s.drawRoundRectanglePath(Da||e,ai.x,ai.y,ca,xa,Ra+(ge+Fr+Aa)/2)):["cutrectangle","cut-rectangle"].includes(va)?s.drawCutRectanglePath(Da||e,ai.x,ai.y,ca,xa,null,(Ra="auto"===Ra?8:Ra)+(ge+Fr+Aa)/4):["bottomroundrectangle","bottom-round-rectangle"].includes(va)?(Ra="auto"===Ra?Ui(ca,xa):Ra,s.drawBottomRoundRectanglePath(Da||e,ai.x,ai.y,ca,xa,Ra+(ge+Fr+Aa)/2)):"barrel"===va?s.drawBarrelPath(Da||e,ai.x,ai.y,ca,xa):va.startsWith("polygon")||["rhomboid","right-rhomboid","round-tag","tag","vee"].includes(va)?(ei=ka(Ba(ei,(ge+Fr+Aa)/o)),s.drawPolygonPath(Da||e,ai.x,ai.y,o,u,ei)):(ei=ka(Ba(ei,-(ge+Fr+Aa)/o)),s.drawPolygonPath(Da||e,ai.x,ai.y,o,u,ei));if(k?e.stroke(Da):e.stroke(),"double"===Ea){e.lineWidth=ge/3;var us=e.globalCompositeOperation;e.globalCompositeOperation="destination-out",k?e.stroke(Da):e.stroke(),e.globalCompositeOperation=us}e.setLineDash&&e.setLineDash([])}};if("yes"===t.pstyle("ghost").value){var Ii=t.pstyle("ghost-offset-x").pfValue,Yi=t.pstyle("ghost-offset-y").pfValue,Hi=t.pstyle("ghost-opacity").value,Gi=Hi*x;e.translate(Ii,Yi),Nr(),ci(),Za(Hi*Oe),li(),Mi(Gi,!0),Ta(Hi*Ar),Qa(),Ci(0!==Le||0!==Ie),xi(0!==Le||0!==Ie),Mi(Gi,!1),gi(Gi),e.translate(-Ii,-Yi)}k&&e.translate(-p.x,-p.y),i&&s.drawNodeUnderlay(e,t,p,o,u),k&&e.translate(p.x,p.y),Nr(),ci(),Za(),li(),Mi(x,!0),Ta(),Qa(),Ci(0!==Le||0!==Ie),xi(0!==Le||0!==Ie),Mi(x,!1),gi(),k&&e.translate(-p.x,-p.y),s.drawElementText(e,t,null,a),i&&s.drawNodeOverlay(e,t,p,o,u),r&&e.translate(K.x1,K.y1)}}},c0=function(t){if(!["overlay","underlay"].includes(t))throw new Error("Invalid state");return function(r,a,i,n,s){if(a.visible()){var u=a.pstyle("".concat(t,"-padding")).pfValue,h=a.pstyle("".concat(t,"-opacity")).value,f=a.pstyle("".concat(t,"-color")).value,p=a.pstyle("".concat(t,"-shape")).value,x=a.pstyle("".concat(t,"-corner-radius")).value;if(h>0){if(i=i||a.position(),null==n||null==s){var k=a.padding();n=a.width()+2*k,s=a.height()+2*k}this.colorFillStyle(r,f[0],f[1],f[2],h),this.nodeShapes[p].draw(r,i.x,i.y,n+2*u,s+2*u,x),r.fill()}}}};_s.drawNodeOverlay=c0("overlay"),_s.drawNodeUnderlay=c0("underlay"),_s.hasPie=function(e){return(e=e[0])._private.hasPie},_s.hasStripe=function(e){return(e=e[0])._private.hasStripe},_s.drawPie=function(e,t,r,a){t=t[0],a=a||t.position();var k,i=t.cy().style(),n=t.pstyle("pie-size"),s=t.pstyle("pie-hole"),o=t.pstyle("pie-start-angle").pfValue,u=a.x,h=a.y,f=t.width(),p=t.height(),x=Math.min(f,p)/2,_=0;if(this.usePaths()&&(u=0,h=0),"%"===n.units?x*=n.pfValue:void 0!==n.pfValue&&(x=n.pfValue/2),"%"===s.units?k=x*s.pfValue:void 0!==s.pfValue&&(k=s.pfValue/2),!(k>=x))for(var O=1;O<=i.pieBackgroundN;O++){var K=t.pstyle("pie-"+O+"-background-size").value,$=t.pstyle("pie-"+O+"-background-color").value,q=t.pstyle("pie-"+O+"-background-opacity").value*r,vt=K/100;vt+_>1&&(vt=1-_);var ae=1.5*Math.PI+2*Math.PI*_,Yt=(ae+=o)+2*Math.PI*vt;0===K||_>=1||_+vt>1||(0===k?(e.beginPath(),e.moveTo(u,h),e.arc(u,h,x,ae,Yt),e.closePath()):(e.beginPath(),e.arc(u,h,x,ae,Yt),e.arc(u,h,k,Yt,ae,!0),e.closePath()),this.colorFillStyle(e,$[0],$[1],$[2],q),e.fill(),_+=vt)}},_s.drawStripe=function(e,t,r,a){t=t[0],a=a||t.position();var i=t.cy().style(),n=a.x,s=a.y,o=t.width(),u=t.height(),h=0,f=this.usePaths();e.save();var p=t.pstyle("stripe-direction").value,x=t.pstyle("stripe-size");switch(p){case"vertical":break;case"righward":e.rotate(-Math.PI/2)}var k=o,_=u;"%"===x.units?(k*=x.pfValue,_*=x.pfValue):void 0!==x.pfValue&&(k=x.pfValue,_=x.pfValue),f&&(n=0,s=0),s-=k/2,n-=_/2;for(var U=1;U<=i.stripeBackgroundN;U++){var O=t.pstyle("stripe-"+U+"-background-size").value,K=t.pstyle("stripe-"+U+"-background-color").value,$=t.pstyle("stripe-"+U+"-background-opacity").value*r,q=O/100;q+h>1&&(q=1-h),!(0===O||h>=1||h+q>1)&&(e.beginPath(),e.rect(n,s+_*h,k,_*q),e.closePath(),this.colorFillStyle(e,K[0],K[1],K[2],$),e.fill(),h+=q)}e.restore()};var _o,Fn={};function h0(e,t,r){var a=e.createShader(t);if(e.shaderSource(a,r),e.compileShader(a),!e.getShaderParameter(a,e.COMPILE_STATUS))throw new Error(e.getShaderInfoLog(a));return a}function zp(e,t,r){void 0===r&&(r=t);var a=e.makeOffscreenCanvas(t,r),i=a.context=a.getContext("2d");return a.clear=function(){return i.clearRect(0,0,a.width,a.height)},a.clear(),a}function jc(e){var t=e.pixelRatio,r=e.cy.zoom(),a=e.cy.pan();return{zoom:r*t,pan:{x:a.x*t,y:a.y*t}}}function $p(e){return"solid"===e.pstyle("background-fill").value&&"none"===e.pstyle("background-image").strValue&&(0===e.pstyle("border-width").value||0===e.pstyle("border-opacity").value||"solid"===e.pstyle("border-style").value)}function Yp(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function Bs(e,t,r){var a=e[0]/255,i=e[1]/255,n=e[2]/255,s=t,o=r||new Array(4);return o[0]=a*s,o[1]=i*s,o[2]=n*s,o[3]=s,o}function Qs(e,t){var r=t||new Array(4);return r[0]=(255&e)/255,r[1]=(e>>8&255)/255,r[2]=(e>>16&255)/255,r[3]=(e>>24&255)/255,r}function Hp(e){return e[0]+(e[1]<<8)+(e[2]<<16)+(e[3]<<24)}function u0(e,t){switch(t){case"float":return[1,e.FLOAT,4];case"vec2":return[2,e.FLOAT,4];case"vec3":return[3,e.FLOAT,4];case"vec4":return[4,e.FLOAT,4];case"int":return[1,e.INT,4];case"ivec2":return[2,e.INT,4]}}function d0(e,t,r){switch(t){case e.FLOAT:return new Float32Array(r);case e.INT:return new Int32Array(r)}}function qp(e,t,r,a,i,n){switch(t){case e.FLOAT:return new Float32Array(r.buffer,n*a,i);case e.INT:return new Int32Array(r.buffer,n*a,i)}}function ss(e,t,r,a){var n=Gt(u0(e,r),3),s=n[0],o=n[1],u=n[2],h=d0(e,o,t*s),f=s*u,p=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,p),e.bufferData(e.ARRAY_BUFFER,t*f,e.DYNAMIC_DRAW),e.enableVertexAttribArray(a),o===e.FLOAT?e.vertexAttribPointer(a,s,o,!1,f,0):o===e.INT&&e.vertexAttribIPointer(a,s,o,f,0),e.vertexAttribDivisor(a,1),e.bindBuffer(e.ARRAY_BUFFER,null);for(var x=new Array(t),k=0;k<t;k++)x[k]=qp(e,o,h,f,s,k);return p.dataArray=h,p.stride=f,p.size=s,p.getView=function(_){return x[_]},p.setPoint=function(_,U,O){var K=x[_];K[0]=U,K[1]=O},p.bufferSubData=function(_){e.bindBuffer(e.ARRAY_BUFFER,p),_?e.bufferSubData(e.ARRAY_BUFFER,0,h,0,_*s):e.bufferSubData(e.ARRAY_BUFFER,0,h)},p}Fn.getPixelRatio=function(){var e=this.data.contexts[0];return null!=this.forcedPixelRatio?this.forcedPixelRatio:(this.cy.window().devicePixelRatio||1)/(e.backingStorePixelRatio||e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1)},Fn.paintCache=function(e){for(var a,t=this.paintCaches=this.paintCaches||[],r=!0,i=0;i<t.length;i++)if((a=t[i]).context===e){r=!1;break}return r&&t.push(a={context:e}),a},Fn.createGradientStyleFor=function(e,t,r,a,i){var n,s=this.usePaths(),o=r.pstyle(t+"-gradient-stop-colors").value,u=r.pstyle(t+"-gradient-stop-positions").pfValue;if("radial-gradient"===a)if(r.isEdge()){var h=r.sourceEndpoint(),f=r.targetEndpoint(),p=r.midpoint(),x=Xi(h,p),k=Xi(f,p);n=e.createRadialGradient(p.x,p.y,0,p.x,p.y,Math.max(x,k))}else{var _=s?{x:0,y:0}:r.position(),U=r.paddedWidth(),O=r.paddedHeight();n=e.createRadialGradient(_.x,_.y,0,_.x,_.y,Math.max(U,O))}else if(r.isEdge()){var K=r.sourceEndpoint(),$=r.targetEndpoint();n=e.createLinearGradient(K.x,K.y,$.x,$.y)}else{var q=s?{x:0,y:0}:r.position(),se=r.paddedWidth()/2,Yt=r.paddedHeight()/2;switch(r.pstyle("background-gradient-direction").value){case"to-bottom":n=e.createLinearGradient(q.x,q.y-Yt,q.x,q.y+Yt);break;case"to-top":n=e.createLinearGradient(q.x,q.y+Yt,q.x,q.y-Yt);break;case"to-left":n=e.createLinearGradient(q.x+se,q.y,q.x-se,q.y);break;case"to-right":n=e.createLinearGradient(q.x-se,q.y,q.x+se,q.y);break;case"to-bottom-right":case"to-right-bottom":n=e.createLinearGradient(q.x-se,q.y-Yt,q.x+se,q.y+Yt);break;case"to-top-right":case"to-right-top":n=e.createLinearGradient(q.x-se,q.y+Yt,q.x+se,q.y-Yt);break;case"to-bottom-left":case"to-left-bottom":n=e.createLinearGradient(q.x+se,q.y-Yt,q.x-se,q.y+Yt);break;case"to-top-left":case"to-left-top":n=e.createLinearGradient(q.x+se,q.y+Yt,q.x-se,q.y-Yt)}}if(!n)return null;for(var me=u.length===o.length,Te=o.length,Le=0;Le<Te;Le++)n.addColorStop(me?u[Le]:Le/(Te-1),"rgba("+o[Le][0]+","+o[Le][1]+","+o[Le][2]+","+i+")");return n},Fn.gradientFillStyle=function(e,t,r,a){var i=this.createGradientStyleFor(e,"background",t,r,a);if(!i)return null;e.fillStyle=i},Fn.colorFillStyle=function(e,t,r,a,i){e.fillStyle="rgba("+t+","+r+","+a+","+i+")"},Fn.eleFillStyle=function(e,t,r){var a=t.pstyle("background-fill").value;if("linear-gradient"===a||"radial-gradient"===a)this.gradientFillStyle(e,t,a,r);else{var i=t.pstyle("background-color").value;this.colorFillStyle(e,i[0],i[1],i[2],r)}},Fn.gradientStrokeStyle=function(e,t,r,a){var i=this.createGradientStyleFor(e,"line",t,r,a);if(!i)return null;e.strokeStyle=i},Fn.colorStrokeStyle=function(e,t,r,a,i){e.strokeStyle="rgba("+t+","+r+","+a+","+i+")"},Fn.eleStrokeStyle=function(e,t,r){var a=t.pstyle("line-fill").value;if("linear-gradient"===a||"radial-gradient"===a)this.gradientStrokeStyle(e,t,a,r);else{var i=t.pstyle("line-color").value;this.colorStrokeStyle(e,i[0],i[1],i[2],r)}},Fn.matchCanvasSize=function(e){var t=this,r=t.data,a=t.findContainerClientCoords(),i=a[2],n=a[3],s=t.getPixelRatio();(e===t.data.bufferCanvases[t.MOTIONBLUR_BUFFER_NODE]||e===t.data.bufferCanvases[t.MOTIONBLUR_BUFFER_DRAG])&&(s=t.motionBlurPxRatio);var f,u=i*s,h=n*s;if(u!==t.canvasWidth||h!==t.canvasHeight){t.fontCaches=null;var p=r.canvasContainer;p.style.width=i+"px",p.style.height=n+"px";for(var x=0;x<t.CANVAS_LAYERS;x++)(f=r.canvases[x]).width=u,f.height=h,f.style.width=i+"px",f.style.height=n+"px";for(x=0;x<t.BUFFER_COUNT;x++)(f=r.bufferCanvases[x]).width=u,f.height=h,f.style.width=i+"px",f.style.height=n+"px";t.textureMult=1,s<=1&&(f=r.bufferCanvases[t.TEXTURE_BUFFER],t.textureMult=2,f.width=u*t.textureMult,f.height=h*t.textureMult),t.canvasWidth=u,t.canvasHeight=h,t.pixelRatio=s}},Fn.renderTo=function(e,t,r,a){this.render({forcedContext:e,forcedZoom:t,forcedPan:r,drawAllLayers:!0,forcedPxRatio:a})},Fn.clearCanvas=function(){var e=this,t=e.data;function r(a){a.clearRect(0,0,e.canvasWidth,e.canvasHeight)}r(t.contexts[e.NODE]),r(t.contexts[e.DRAG])},Fn.render=function(e){var t=this;e=e||Ri();var r=t.cy,a=e.forcedContext,i=e.drawAllLayers,n=e.drawOnlyNodeLayer,s=e.forcedZoom,o=e.forcedPan,u=void 0===e.forcedPxRatio?this.getPixelRatio():e.forcedPxRatio,h=t.data,f=h.canvasNeedsRedraw,p=t.textureOnViewport&&!a&&(t.pinching||t.hoverData.dragging||t.swipePanning||t.data.wheelZooming),x=void 0!==e.motionBlur?e.motionBlur:t.motionBlur,k=t.motionBlurPxRatio,_=r.hasCompoundNodes(),U=t.hoverData.draggingEles,K=x=x&&!a&&t.motionBlurEnabled&&!(t.hoverData.selecting||t.touchData.selecting);a||(t.prevPxRatio!==u&&(t.invalidateContainerClientCoordsCache(),t.matchCanvasSize(t.container),t.redrawHint("eles",!0),t.redrawHint("drag",!0)),t.prevPxRatio=u),!a&&t.motionBlurTimeout&&clearTimeout(t.motionBlurTimeout),x&&(null==t.mbFrames&&(t.mbFrames=0),t.mbFrames++,t.mbFrames<3&&(K=!1),t.mbFrames>t.minMbLowQualFrames&&(t.motionBlurPxRatio=t.mbPxRBlurry)),t.clearingMotionBlur&&(t.motionBlurPxRatio=1),t.textureDrawLastFrame&&!p&&(f[t.NODE]=!0,f[t.SELECT_BOX]=!0);var $=r.style(),q=r.zoom(),vt=void 0!==s?s:q,ae=r.pan(),se={x:ae.x,y:ae.y},Yt={zoom:q,pan:{x:ae.x,y:ae.y}},he=t.prevViewport;!(void 0===he||Yt.zoom!==he.zoom||Yt.pan.x!==he.pan.x||Yt.pan.y!==he.pan.y)&&!(U&&!_)&&(t.motionBlurPxRatio=1),o&&(se=o),vt*=u,se.x*=u,se.y*=u;var Te=t.getCachedZSortedEles();function Le(Ta,Nr,Ur,Zr,ma){var Ga=Ta.globalCompositeOperation;Ta.globalCompositeOperation="destination-out",t.colorFillStyle(Ta,255,255,255,t.motionBlurTransparency),Ta.fillRect(Nr,Ur,Zr,ma),Ta.globalCompositeOperation=Ga}function Ie(Ta,Nr){var Ur,Zr,ma,Ga;t.clearingMotionBlur||Ta!==h.bufferContexts[t.MOTIONBLUR_BUFFER_NODE]&&Ta!==h.bufferContexts[t.MOTIONBLUR_BUFFER_DRAG]?(Ur=se,Zr=vt,ma=t.canvasWidth,Ga=t.canvasHeight):(Ur={x:ae.x*k,y:ae.y*k},Zr=q*k,ma=t.canvasWidth*k,Ga=t.canvasHeight*k),Ta.setTransform(1,0,0,1,0,0),"motionBlur"===Nr?Le(Ta,0,0,ma,Ga):!a&&(void 0===Nr||Nr)&&Ta.clearRect(0,0,ma,Ga),i||(Ta.translate(Ur.x,Ur.y),Ta.scale(Zr,Zr)),o&&Ta.translate(o.x,o.y),s&&Ta.scale(s,s)}if(p||(t.textureDrawLastFrame=!1),p){if(t.textureDrawLastFrame=!0,!t.textureCache){t.textureCache={},t.textureCache.bb=r.mutableElements().boundingBox(),t.textureCache.texture=t.data.bufferCanvases[t.TEXTURE_BUFFER];var Oe=t.data.bufferContexts[t.TEXTURE_BUFFER];Oe.setTransform(1,0,0,1,0,0),Oe.clearRect(0,0,t.canvasWidth*t.textureMult,t.canvasHeight*t.textureMult),t.render({forcedContext:Oe,drawOnlyNodeLayer:!0,forcedPxRatio:u*t.textureMult}),(Yt=t.textureCache.viewport={zoom:r.zoom(),pan:r.pan(),width:t.canvasWidth,height:t.canvasHeight}).mpan={x:(0-Yt.pan.x)/Yt.zoom,y:(0-Yt.pan.y)/Yt.zoom}}f[t.DRAG]=!1,f[t.NODE]=!1;var cr=t.textureCache.texture;Yt=t.textureCache.viewport,(tr=h.contexts[t.NODE]).setTransform(1,0,0,1,0,0),x?Le(tr,0,0,Yt.width,Yt.height):tr.clearRect(0,0,Yt.width,Yt.height);var dr=$.core("outside-texture-bg-color").value,rr=$.core("outside-texture-bg-opacity").value;t.colorFillStyle(tr,dr[0],dr[1],dr[2],rr),tr.fillRect(0,0,Yt.width,Yt.height),q=r.zoom(),Ie(tr,!1),tr.clearRect(Yt.mpan.x,Yt.mpan.y,Yt.width/Yt.zoom/u,Yt.height/Yt.zoom/u),tr.drawImage(cr,Yt.mpan.x,Yt.mpan.y,Yt.width/Yt.zoom/u,Yt.height/Yt.zoom/u)}else t.textureOnViewport&&!a&&(t.textureCache=null);var tr,Cr=r.extent(),Vr=t.pinching||t.hoverData.dragging||t.swipePanning||t.data.wheelZooming||t.hoverData.draggingEles||t.cy.animated(),qr=t.hideEdgesOnViewport&&Vr,Ar=[];if(Ar[t.NODE]=!f[t.NODE]&&x&&!t.clearedForMotionBlur[t.NODE]||t.clearingMotionBlur,Ar[t.NODE]&&(t.clearedForMotionBlur[t.NODE]=!0),Ar[t.DRAG]=!f[t.DRAG]&&x&&!t.clearedForMotionBlur[t.DRAG]||t.clearingMotionBlur,Ar[t.DRAG]&&(t.clearedForMotionBlur[t.DRAG]=!0),f[t.NODE]||i||n||Ar[t.NODE]){var Fr=x&&!Ar[t.NODE]&&1!==k;Ie(tr=a||(Fr?t.data.bufferContexts[t.MOTIONBLUR_BUFFER_NODE]:h.contexts[t.NODE]),x&&!Fr?"motionBlur":void 0),qr?t.drawCachedNodes(tr,Te.nondrag,u,Cr):t.drawLayeredElements(tr,Te.nondrag,u,Cr),t.debug&&t.drawDebugPoints(tr,Te.nondrag),!i&&!x&&(f[t.NODE]=!1)}!n&&(f[t.DRAG]||i||Ar[t.DRAG])&&(Fr=x&&!Ar[t.DRAG]&&1!==k,Ie(tr=a||(Fr?t.data.bufferContexts[t.MOTIONBLUR_BUFFER_DRAG]:h.contexts[t.DRAG]),x&&!Fr?"motionBlur":void 0),qr?t.drawCachedNodes(tr,Te.drag,u,Cr):t.drawCachedElements(tr,Te.drag,u,Cr),t.debug&&t.drawDebugPoints(tr,Te.drag),!i&&!x&&(f[t.DRAG]=!1));if(this.drawSelectionRectangle(e,Ie),x&&1!==k){var Aa=h.contexts[t.DRAG],Ra=t.data.bufferCanvases[t.MOTIONBLUR_BUFFER_DRAG],Za=function(Nr,Ur,Zr){Nr.setTransform(1,0,0,1,0,0),Zr||!K?Nr.clearRect(0,0,t.canvasWidth,t.canvasHeight):Le(Nr,0,0,t.canvasWidth,t.canvasHeight),Nr.drawImage(Ur,0,0,t.canvasWidth*k,t.canvasHeight*k,0,0,t.canvasWidth,t.canvasHeight)};(f[t.NODE]||Ar[t.NODE])&&(Za(h.contexts[t.NODE],t.data.bufferCanvases[t.MOTIONBLUR_BUFFER_NODE],Ar[t.NODE]),f[t.NODE]=!1),(f[t.DRAG]||Ar[t.DRAG])&&(Za(Aa,Ra,Ar[t.DRAG]),f[t.DRAG]=!1)}t.prevViewport=Yt,t.clearingMotionBlur&&(t.clearingMotionBlur=!1,t.motionBlurCleared=!0,t.motionBlur=!0),x&&(t.motionBlurTimeout=setTimeout(function(){t.motionBlurTimeout=null,t.clearedForMotionBlur[t.NODE]=!1,t.clearedForMotionBlur[t.DRAG]=!1,t.motionBlur=!1,t.clearingMotionBlur=!p,t.mbFrames=0,f[t.NODE]=!0,f[t.DRAG]=!0,t.redraw()},100)),a||r.emit("render")},Fn.drawSelectionRectangle=function(e,t){var r=this,i=r.data,n=r.cy.style(),o=e.drawAllLayers,u=i.canvasNeedsRedraw;if(r.showFps||!e.drawOnlyNodeLayer&&u[r.SELECT_BOX]&&!o){var f=e.forcedContext||i.contexts[r.SELECT_BOX];if(t(f),1==r.selection[4]&&(r.hoverData.selecting||r.touchData.selecting)){var p=r.cy.zoom(),x=n.core("selection-box-border-width").value/p;f.lineWidth=x,f.fillStyle="rgba("+n.core("selection-box-color").value[0]+","+n.core("selection-box-color").value[1]+","+n.core("selection-box-color").value[2]+","+n.core("selection-box-opacity").value+")",f.fillRect(r.selection[0],r.selection[1],r.selection[2]-r.selection[0],r.selection[3]-r.selection[1]),x>0&&(f.strokeStyle="rgba("+n.core("selection-box-border-color").value[0]+","+n.core("selection-box-border-color").value[1]+","+n.core("selection-box-border-color").value[2]+","+n.core("selection-box-opacity").value+")",f.strokeRect(r.selection[0],r.selection[1],r.selection[2]-r.selection[0],r.selection[3]-r.selection[1]))}if(i.bgActivePosistion&&!r.hoverData.selecting){p=r.cy.zoom();var k=i.bgActivePosistion;f.fillStyle="rgba("+n.core("active-bg-color").value[0]+","+n.core("active-bg-color").value[1]+","+n.core("active-bg-color").value[2]+","+n.core("active-bg-opacity").value+")",f.beginPath(),f.arc(k.x,k.y,n.core("active-bg-size").pfValue/p,0,2*Math.PI),f.fill()}var _=r.lastRedrawTime;if(r.showFps&&_){_=Math.round(_);var U=Math.round(1e3/_),O="1 frame = "+_+" ms = "+U+" fps";if(f.setTransform(1,0,0,1,0,0),f.fillStyle="rgba(255, 0, 0, 0.75)",f.strokeStyle="rgba(255, 0, 0, 0.75)",f.font="30px Arial",!_o){var K=f.measureText(O);_o=K.actualBoundingBoxAscent}f.fillText(O,0,_o),f.strokeRect(0,_o+10,250,20),f.fillRect(0,_o+10,250*Math.min(U/60,1),20)}o||(u[r.SELECT_BOX]=!1)}};var f0=typeof Float32Array<"u"?Float32Array:Array;function Xc(){var e=new f0(9);return f0!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e}function g0(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function ul(e,t,r){var a=t[0],i=t[1],n=t[2],s=t[3],o=t[4],u=t[5],h=t[6],f=t[7],p=t[8],x=r[0],k=r[1];return e[0]=a,e[1]=i,e[2]=n,e[3]=s,e[4]=o,e[5]=u,e[6]=x*a+k*s+h,e[7]=x*i+k*o+f,e[8]=x*n+k*u+p,e}function p0(e,t,r){var a=t[0],i=t[1],n=t[2],s=t[3],o=t[4],u=t[5],h=t[6],f=t[7],p=t[8],x=Math.sin(r),k=Math.cos(r);return e[0]=k*a+x*s,e[1]=k*i+x*o,e[2]=k*n+x*u,e[3]=k*s-x*a,e[4]=k*o-x*i,e[5]=k*u-x*n,e[6]=h,e[7]=f,e[8]=p,e}function Zc(e,t,r){var a=r[0],i=r[1];return e[0]=a*t[0],e[1]=a*t[1],e[2]=a*t[2],e[3]=i*t[3],e[4]=i*t[4],e[5]=i*t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)});var t2=function(){return ut(function e(t,r,a,i){D(this,e),this.debugID=Math.floor(1e4*Math.random()),this.r=t,this.texSize=r,this.texRows=a,this.texHeight=Math.floor(r/a),this.enableWrapping=!0,this.locked=!1,this.texture=null,this.needsBuffer=!0,this.freePointer={x:0,row:0},this.keyToLocation=new Map,this.canvas=i(t,r,r),this.scratch=i(t,r,this.texHeight,"scratch")},[{key:"lock",value:function(){this.locked=!0}},{key:"getKeys",value:function(){return new Set(this.keyToLocation.keys())}},{key:"getScale",value:function(r){var a=r.w,i=r.h,s=this.texSize,o=this.texHeight/i,u=a*o,h=i*o;return u>s&&(u=a*(o=s/a),h=i*o),{scale:o,texW:u,texH:h}}},{key:"draw",value:function(r,a,i){var n=this;if(this.locked)throw new Error("can't draw, atlas is locked");var s=this.texSize,o=this.texRows,u=this.texHeight,h=this.getScale(a),f=h.scale,p=h.texW,x=h.texH,k=function(q,vt){if(i&&vt){var ae=vt.context,he=q.x,me=u*q.row;ae.save(),ae.translate(he,me),ae.scale(f,f),i(ae,a),ae.restore()}},_=[null,null],U=function(){k(n.freePointer,n.canvas),_[0]={x:n.freePointer.x,y:n.freePointer.row*u,w:p,h:x},_[1]={x:n.freePointer.x+p,y:n.freePointer.row*u,w:0,h:x},n.freePointer.x+=p,n.freePointer.x==s&&(n.freePointer.x=0,n.freePointer.row++)},K=function(){n.freePointer.x=0,n.freePointer.row++};if(this.freePointer.x+p<=s)U();else{if(this.freePointer.row>=o-1)return!1;this.freePointer.x===s?(K(),U()):this.enableWrapping?function(){var q=n.scratch,vt=n.canvas;q.clear(),k({x:0,row:0},q);var ae=s-n.freePointer.x,se=p-ae,Yt=u,he=n.freePointer.x,me=n.freePointer.row*u,Te=ae;vt.context.drawImage(q,0,0,Te,Yt,he,me,Te,Yt),_[0]={x:he,y:me,w:Te,h:x};var Ie=(n.freePointer.row+1)*u,Oe=se;vt&&vt.context.drawImage(q,ae,0,Oe,Yt,0,Ie,Oe,Yt),_[1]={x:0,y:Ie,w:Oe,h:x},n.freePointer.x=se,n.freePointer.row++}():(K(),U())}return this.keyToLocation.set(r,_),this.needsBuffer=!0,_}},{key:"getOffsets",value:function(r){return this.keyToLocation.get(r)}},{key:"isEmpty",value:function(){return 0===this.freePointer.x&&0===this.freePointer.row}},{key:"canFit",value:function(r){if(this.locked)return!1;var a=this.texSize,i=this.texRows,n=this.getScale(r);return!(this.freePointer.x+n.texW>a)||this.freePointer.row<i-1}},{key:"bufferIfNeeded",value:function(r){this.texture||(this.texture=function Gp(e){var r=e.createTexture();return r.buffer=function(a){e.bindTexture(e.TEXTURE_2D,r),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR_MIPMAP_NEAREST),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,a),e.generateMipmap(e.TEXTURE_2D),e.bindTexture(e.TEXTURE_2D,null)},r.deleteTexture=function(){e.deleteTexture(r)},r}(r)),this.needsBuffer&&(this.texture.buffer(this.canvas),this.needsBuffer=!1,this.locked&&(this.canvas=null,this.scratch=null))}},{key:"dispose",value:function(){this.texture&&(this.texture.deleteTexture(),this.texture=null),this.canvas=null,this.scratch=null,this.locked=!0}}])}(),e2=function(){return ut(function e(t,r,a,i){D(this,e),this.r=t,this.texSize=r,this.texRows=a,this.createTextureCanvas=i,this.atlases=[],this.styleKeyToAtlas=new Map,this.markedKeys=new Set},[{key:"getKeys",value:function(){return new Set(this.styleKeyToAtlas.keys())}},{key:"_createAtlas",value:function(){return new t2(this.r,this.texSize,this.texRows,this.createTextureCanvas)}},{key:"_getScratchCanvas",value:function(){if(!this.scratch){var r=this.r,a=this.texSize,n=this.createTextureCanvas,s=Math.floor(a/this.texRows);this.scratch=n(r,a,s,"scratch")}return this.scratch}},{key:"draw",value:function(r,a,i){var n=this.styleKeyToAtlas.get(r);return n||((!(n=this.atlases[this.atlases.length-1])||!n.canFit(a))&&(n&&n.lock(),n=this._createAtlas(),this.atlases.push(n)),n.draw(r,a,i),this.styleKeyToAtlas.set(r,n)),n}},{key:"getAtlas",value:function(r){return this.styleKeyToAtlas.get(r)}},{key:"hasAtlas",value:function(r){return this.styleKeyToAtlas.has(r)}},{key:"markKeyForGC",value:function(r){this.markedKeys.add(r)}},{key:"gc",value:function(){var r=this,a=this.markedKeys;if(0!==a.size){var u,i=[],n=new Map,s=null,o=G(this.atlases);try{var h=function(){var p=u.value,x=p.getKeys(),k=function r2(e,t){return e.intersection?e.intersection(t):new Set(j(e).filter(function(r){return t.has(r)}))}(a,x);if(0===k.size)return i.push(p),x.forEach(function(ae){return n.set(ae,p)}),1;s||(s=r._createAtlas(),i.push(s));var U,_=G(x);try{for(_.s();!(U=_.n()).done;){var O=U.value;if(!k.has(O)){var $=Gt(p.getOffsets(O),2),q=$[0];s.canFit({w:q.w+$[1].w,h:q.h})||(s.lock(),s=r._createAtlas(),i.push(s)),p.canvas&&(r._copyTextureToNewAtlas(O,p,s),n.set(O,s))}}}catch(ae){_.e(ae)}finally{_.f()}p.dispose()};for(o.s();!(u=o.n()).done;)h()}catch(f){o.e(f)}finally{o.f()}this.atlases=i,this.styleKeyToAtlas=n,this.markedKeys=new Set}else console.log("nothing to garbage collect")}},{key:"_copyTextureToNewAtlas",value:function(r,a,i){var s=Gt(a.getOffsets(r),2),o=s[0],u=s[1];if(0===u.w)i.draw(r,o,function(x){x.drawImage(a.canvas,o.x,o.y,o.w,o.h,0,0,o.w,o.h)});else{var h=this._getScratchCanvas();h.clear(),h.context.drawImage(a.canvas,o.x,o.y,o.w,o.h,0,0,o.w,o.h),h.context.drawImage(a.canvas,u.x,u.y,u.w,u.h,o.w,0,u.w,u.h);var f=o.w+u.w,p=o.h;i.draw(r,{w:f,h:p},function(x){x.drawImage(h,0,0,f,p,0,0,f,p)})}}},{key:"getCounts",value:function(){return{keyCount:this.styleKeyToAtlas.size,atlasCount:new Set(this.styleKeyToAtlas.values()).size}}}])}(),a2=function(){return ut(function e(t,r){D(this,e),this.r=t,this.globalOptions=r,this.atlasSize=r.webglTexSize,this.maxAtlasesPerBatch=r.webglTexPerBatch,this.renderTypes=new Map,this.collections=new Map,this.typeAndIdToKey=new Map},[{key:"getAtlasSize",value:function(){return this.atlasSize}},{key:"addAtlasCollection",value:function(r,a){var i=this.globalOptions,n=i.webglTexSize,o=a.texRows,u=this._cacheScratchCanvas(i.createTextureCanvas),h=new e2(this.r,n,o,u);this.collections.set(r,h)}},{key:"addRenderType",value:function(r,a){var i=a.collection;if(!this.collections.has(i))throw new Error("invalid atlas collection name '".concat(i,"'"));var n=this.collections.get(i),s=H({type:r,atlasCollection:n},a);this.renderTypes.set(r,s)}},{key:"getRenderTypeOpts",value:function(r){return this.renderTypes.get(r)}},{key:"getAtlasCollection",value:function(r){return this.collections.get(r)}},{key:"_cacheScratchCanvas",value:function(r){var a=-1,i=-1,n=null;return function(s,o,u,h){return h?((!n||o!=a||u!=i)&&(a=o,i=u,n=r(s,o,u)),n):r(s,o,u)}}},{key:"_key",value:function(r,a){return"".concat(r,"-").concat(a)}},{key:"invalidate",value:function(r){var _,a=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=i.forceRedraw,s=void 0!==n&&n,o=i.filterEle,u=void 0===o?function(){return!0}:o,h=i.filterType,f=void 0===h?function(){return!0}:h,p=!1,x=!1,k=G(r);try{for(k.s();!(_=k.n()).done;){var U=_.value;if(u(U)){var K,O=G(this.renderTypes.values());try{var $=function(){var vt=K.value,ae=vt.type;if(f(ae)){var se=a.collections.get(vt.collection),Yt=vt.getKey(U),he=Array.isArray(Yt)?Yt:[Yt];if(s)he.forEach(function(Ie){return se.markKeyForGC(Ie)}),x=!0;else{var me=vt.getID?vt.getID(U):U.id(),Te=a._key(ae,me),Le=a.typeAndIdToKey.get(Te);void 0!==Le&&!Yp(he,Le)&&(p=!0,a.typeAndIdToKey.delete(Te),Le.forEach(function(Ie){return se.markKeyForGC(Ie)}))}}};for(O.s();!(K=O.n()).done;)$()}catch(q){O.e(q)}finally{O.f()}}}}catch(q){k.e(q)}finally{k.f()}return x&&(this.gc(),p=!1),p}},{key:"gc",value:function(){var a,r=G(this.collections.values());try{for(r.s();!(a=r.n()).done;)a.value.gc()}catch(n){r.e(n)}finally{r.f()}}},{key:"getOrCreateAtlas",value:function(r,a,i,n){var s=this.renderTypes.get(a),o=this.collections.get(s.collection),u=!1,h=o.draw(n,i,function(x){s.drawClipped?(x.save(),x.beginPath(),x.rect(0,0,i.w,i.h),x.clip(),s.drawElement(x,r,i,!0,!0),x.restore()):s.drawElement(x,r,i,!0,!0),u=!0});if(u){var f=s.getID?s.getID(r):r.id(),p=this._key(a,f);this.typeAndIdToKey.has(p)?this.typeAndIdToKey.get(p).push(n):this.typeAndIdToKey.set(p,[n])}return h}},{key:"getAtlasInfo",value:function(r,a){var i=this,n=this.renderTypes.get(a),s=n.getKey(r);return(Array.isArray(s)?s:[s]).map(function(u){var h=n.getBoundingBox(r,u),f=i.getOrCreateAtlas(r,a,h,u),x=Gt(f.getOffsets(u),2),k=x[0];return{atlas:f,tex:k,tex1:k,tex2:x[1],bb:h}})}},{key:"getDebugInfo",value:function(){var i,r=[],a=G(this.collections);try{for(a.s();!(i=a.n()).done;){var n=Gt(i.value,2),s=n[0],u=n[1].getCounts();r.push({type:s,keyCount:u.keyCount,atlasCount:u.atlasCount})}}catch(p){a.e(p)}finally{a.f()}return r}}])}(),i2=function(){return ut(function e(t){D(this,e),this.globalOptions=t,this.atlasSize=t.webglTexSize,this.maxAtlasesPerBatch=t.webglTexPerBatch,this.batchAtlases=[]},[{key:"getMaxAtlasesPerBatch",value:function(){return this.maxAtlasesPerBatch}},{key:"getAtlasSize",value:function(){return this.atlasSize}},{key:"getIndexArray",value:function(){return Array.from({length:this.maxAtlasesPerBatch},function(r,a){return a})}},{key:"startBatch",value:function(){this.batchAtlases=[]}},{key:"getAtlasCount",value:function(){return this.batchAtlases.length}},{key:"getAtlases",value:function(){return this.batchAtlases}},{key:"canAddToCurrentBatch",value:function(r){return this.batchAtlases.length!==this.maxAtlasesPerBatch||this.batchAtlases.includes(r)}},{key:"getAtlasIndexForBatch",value:function(r){var a=this.batchAtlases.indexOf(r);if(a<0){if(this.batchAtlases.length===this.maxAtlasesPerBatch)throw new Error("cannot add more atlases to batch");this.batchAtlases.push(r),a=this.batchAtlases.length-1}return a}}])}(),Eo={SCREEN:{name:"screen",screen:!0},PICKING:{name:"picking",picking:!0}},c2=function(){return ut(function e(t,r,a){D(this,e),this.r=t,this.gl=r,this.maxInstances=a.webglBatchSize,this.atlasSize=a.webglTexSize,this.bgColor=a.bgColor,this.debug=a.webglDebug,this.batchDebugInfo=[],a.enableWrapping=!0,a.createTextureCanvas=zp,this.atlasManager=new a2(t,a),this.batchManager=new i2(a),this.simpleShapeOptions=new Map,this.program=this._createShaderProgram(Eo.SCREEN),this.pickingProgram=this._createShaderProgram(Eo.PICKING),this.vao=this._createVAO()},[{key:"addAtlasCollection",value:function(r,a){this.atlasManager.addAtlasCollection(r,a)}},{key:"addTextureAtlasRenderType",value:function(r,a){this.atlasManager.addRenderType(r,a)}},{key:"addSimpleShapeRenderType",value:function(r,a){this.simpleShapeOptions.set(r,a)}},{key:"invalidate",value:function(r){var i=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).type,n=this.atlasManager;return i?n.invalidate(r,{filterType:function(o){return o===i},forceRedraw:!0}):n.invalidate(r)}},{key:"gc",value:function(){this.atlasManager.gc()}},{key:"_createShaderProgram",value:function(r){var a=this.gl,i="#version 300 es\n      precision highp float;\n\n      uniform mat3 uPanZoomMatrix;\n      uniform int  uAtlasSize;\n      \n      // instanced\n      in vec2 aPosition; // a vertex from the unit square\n      \n      in mat3 aTransform; // used to transform verticies, eg into a bounding box\n      in int aVertType; // the type of thing we are rendering\n\n      // the z-index that is output when using picking mode\n      in vec4 aIndex;\n      \n      // For textures\n      in int aAtlasId; // which shader unit/atlas to use\n      in vec4 aTex; // x/y/w/h of texture in atlas\n\n      // for edges\n      in vec4 aPointAPointB;\n      in vec4 aPointCPointD;\n      in vec2 aLineWidth; // also used for node border width\n\n      // simple shapes\n      in vec4 aCornerRadius; // for round-rectangle [top-right, bottom-right, top-left, bottom-left]\n      in vec4 aColor; // also used for edges\n      in vec4 aBorderColor; // aLineWidth is used for border width\n\n      // output values passed to the fragment shader\n      out vec2 vTexCoord;\n      out vec4 vColor;\n      out vec2 vPosition;\n      // flat values are not interpolated\n      flat out int vAtlasId; \n      flat out int vVertType;\n      flat out vec2 vTopRight;\n      flat out vec2 vBotLeft;\n      flat out vec4 vCornerRadius;\n      flat out vec4 vBorderColor;\n      flat out vec2 vBorderWidth;\n      flat out vec4 vIndex;\n      \n      void main(void) {\n        int vid = gl_VertexID;\n        vec2 position = aPosition; // TODO make this a vec3, simplifies some code below\n\n        if(aVertType == ".concat(0,") {\n          float texX = aTex.x; // texture coordinates\n          float texY = aTex.y;\n          float texW = aTex.z;\n          float texH = aTex.w;\n\n          if(vid == 1 || vid == 2 || vid == 4) {\n            texX += texW;\n          }\n          if(vid == 2 || vid == 4 || vid == 5) {\n            texY += texH;\n          }\n\n          float d = float(uAtlasSize);\n          vTexCoord = vec2(texX / d, texY / d); // tex coords must be between 0 and 1\n\n          gl_Position = vec4(uPanZoomMatrix * aTransform * vec3(position, 1.0), 1.0);\n        }\n        else if(aVertType == ").concat(4," || aVertType == ").concat(7," \n             || aVertType == ").concat(5," || aVertType == ").concat(6,") { // simple shapes\n\n          // the bounding box is needed by the fragment shader\n          vBotLeft  = (aTransform * vec3(0, 0, 1)).xy; // flat\n          vTopRight = (aTransform * vec3(1, 1, 1)).xy; // flat\n          vPosition = (aTransform * vec3(position, 1)).xy; // will be interpolated\n\n          // calculations are done in the fragment shader, just pass these along\n          vColor = aColor;\n          vCornerRadius = aCornerRadius;\n          vBorderColor = aBorderColor;\n          vBorderWidth = aLineWidth;\n\n          gl_Position = vec4(uPanZoomMatrix * aTransform * vec3(position, 1.0), 1.0);\n        }\n        else if(aVertType == ").concat(1,") {\n          vec2 source = aPointAPointB.xy;\n          vec2 target = aPointAPointB.zw;\n\n          // adjust the geometry so that the line is centered on the edge\n          position.y = position.y - 0.5;\n\n          // stretch the unit square into a long skinny rectangle\n          vec2 xBasis = target - source;\n          vec2 yBasis = normalize(vec2(-xBasis.y, xBasis.x));\n          vec2 point = source + xBasis * position.x + yBasis * aLineWidth[0] * position.y;\n\n          gl_Position = vec4(uPanZoomMatrix * vec3(point, 1.0), 1.0);\n          vColor = aColor;\n        } \n        else if(aVertType == ").concat(2,") {\n          vec2 pointA = aPointAPointB.xy;\n          vec2 pointB = aPointAPointB.zw;\n          vec2 pointC = aPointCPointD.xy;\n          vec2 pointD = aPointCPointD.zw;\n\n          // adjust the geometry so that the line is centered on the edge\n          position.y = position.y - 0.5;\n\n          vec2 p0, p1, p2, pos;\n          if(position.x == 0.0) { // The left side of the unit square\n            p0 = pointA;\n            p1 = pointB;\n            p2 = pointC;\n            pos = position;\n          } else { // The right side of the unit square, use same approach but flip the geometry upside down\n            p0 = pointD;\n            p1 = pointC;\n            p2 = pointB;\n            pos = vec2(0.0, -position.y);\n          }\n\n          vec2 p01 = p1 - p0;\n          vec2 p12 = p2 - p1;\n          vec2 p21 = p1 - p2;\n\n          // Find the normal vector.\n          vec2 tangent = normalize(normalize(p12) + normalize(p01));\n          vec2 normal = vec2(-tangent.y, tangent.x);\n\n          // Find the vector perpendicular to p0 -> p1.\n          vec2 p01Norm = normalize(vec2(-p01.y, p01.x));\n\n          // Determine the bend direction.\n          float sigma = sign(dot(p01 + p21, normal));\n          float width = aLineWidth[0];\n\n          if(sign(pos.y) == -sigma) {\n            // This is an intersecting vertex. Adjust the position so that there's no overlap.\n            vec2 point = 0.5 * width * normal * -sigma / dot(normal, p01Norm);\n            gl_Position = vec4(uPanZoomMatrix * vec3(p1 + point, 1.0), 1.0);\n          } else {\n            // This is a non-intersecting vertex. Treat it like a mitre join.\n            vec2 point = 0.5 * width * normal * sigma * dot(normal, p01Norm);\n            gl_Position = vec4(uPanZoomMatrix * vec3(p1 + point, 1.0), 1.0);\n          }\n\n          vColor = aColor;\n        } \n        else if(aVertType == ").concat(3," && vid < 3) {\n          // massage the first triangle into an edge arrow\n          if(vid == 0)\n            position = vec2(-0.15, -0.3);\n          if(vid == 1)\n            position = vec2(  0.0,  0.0);\n          if(vid == 2)\n            position = vec2( 0.15, -0.3);\n\n          gl_Position = vec4(uPanZoomMatrix * aTransform * vec3(position, 1.0), 1.0);\n          vColor = aColor;\n        }\n        else {\n          gl_Position = vec4(2.0, 0.0, 0.0, 1.0); // discard vertex by putting it outside webgl clip space\n        }\n\n        vAtlasId = aAtlasId;\n        vVertType = aVertType;\n        vIndex = aIndex;\n      }\n    "),n=this.batchManager.getIndexArray(),o=function Wp(e,t,r){var a=h0(e,e.VERTEX_SHADER,t),i=h0(e,e.FRAGMENT_SHADER,r),n=e.createProgram();if(e.attachShader(n,a),e.attachShader(n,i),e.linkProgram(n),!e.getProgramParameter(n,e.LINK_STATUS))throw new Error("Could not initialize shaders");return n}(a,i,"#version 300 es\n      precision highp float;\n\n      // declare texture unit for each texture atlas in the batch\n      ".concat(n.map(function(h){return"uniform sampler2D uTexture".concat(h,";")}).join("\n\t"),"\n\n      uniform vec4 uBGColor;\n      uniform float uZoom;\n\n      in vec2 vTexCoord;\n      in vec4 vColor;\n      in vec2 vPosition; // model coordinates\n\n      flat in int vAtlasId;\n      flat in vec4 vIndex;\n      flat in int vVertType;\n      flat in vec2 vTopRight;\n      flat in vec2 vBotLeft;\n      flat in vec4 vCornerRadius;\n      flat in vec4 vBorderColor;\n      flat in vec2 vBorderWidth;\n\n      out vec4 outColor;\n\n      ").concat("\n  float circleSD(vec2 p, float r) {\n    return distance(vec2(0), p) - r; // signed distance\n  }\n","\n      ").concat("\n  float rectangleSD(vec2 p, vec2 b) {\n    vec2 d = abs(p)-b;\n    return distance(vec2(0),max(d,0.0)) + min(max(d.x,d.y),0.0);\n  }\n","\n      ").concat("\n  float roundRectangleSD(vec2 p, vec2 b, vec4 cr) {\n    cr.xy = (p.x > 0.0) ? cr.xy : cr.zw;\n    cr.x  = (p.y > 0.0) ? cr.x  : cr.y;\n    vec2 q = abs(p) - b + cr.x;\n    return min(max(q.x, q.y), 0.0) + distance(vec2(0), max(q, 0.0)) - cr.x;\n  }\n","\n      ").concat("\n  float ellipseSD(vec2 p, vec2 ab) {\n    p = abs( p ); // symmetry\n\n    // find root with Newton solver\n    vec2 q = ab*(p-ab);\n    float w = (q.x<q.y)? 1.570796327 : 0.0;\n    for( int i=0; i<5; i++ ) {\n      vec2 cs = vec2(cos(w),sin(w));\n      vec2 u = ab*vec2( cs.x,cs.y);\n      vec2 v = ab*vec2(-cs.y,cs.x);\n      w = w + dot(p-u,v)/(dot(p-u,u)+dot(v,v));\n    }\n    \n    // compute final point and distance\n    float d = length(p-ab*vec2(cos(w),sin(w)));\n    \n    // return signed distance\n    return (dot(p/ab,p/ab)>1.0) ? d : -d;\n  }\n","\n\n      vec4 blend(vec4 top, vec4 bot) { // blend colors with premultiplied alpha\n        return vec4( \n          top.rgb + (bot.rgb * (1.0 - top.a)),\n          top.a   + (bot.a   * (1.0 - top.a)) \n        );\n      }\n\n      vec4 distInterp(vec4 cA, vec4 cB, float d) { // interpolate color using Signed Distance\n        // scale to the zoom level so that borders don't look blurry when zoomed in\n        // note 1.5 is an aribitrary value chosen because it looks good\n        return mix(cA, cB, 1.0 - smoothstep(0.0, 1.5 / uZoom, abs(d))); \n      }\n\n      void main(void) {\n        if(vVertType == ").concat(0,") {\n          // look up the texel from the texture unit\n          ").concat(n.map(function(h){return"if(vAtlasId == ".concat(h,") outColor = texture(uTexture").concat(h,", vTexCoord);")}).join("\n\telse "),"\n        } \n        else if(vVertType == ").concat(3,") {\n          // mimics how canvas renderer uses context.globalCompositeOperation = 'destination-out';\n          outColor = blend(vColor, uBGColor);\n          outColor.a = 1.0; // make opaque, masks out line under arrow\n        }\n        else if(vVertType == ").concat(4," && vBorderWidth == vec2(0.0)) { // simple rectangle with no border\n          outColor = vColor; // unit square is already transformed to the rectangle, nothing else needs to be done\n        }\n        else if(vVertType == ").concat(4," || vVertType == ").concat(7," \n          || vVertType == ").concat(5," || vVertType == ").concat(6,") { // use SDF\n\n          float outerBorder = vBorderWidth[0];\n          float innerBorder = vBorderWidth[1];\n          float borderPadding = outerBorder * 2.0;\n          float w = vTopRight.x - vBotLeft.x - borderPadding;\n          float h = vTopRight.y - vBotLeft.y - borderPadding;\n          vec2 b = vec2(w/2.0, h/2.0); // half width, half height\n          vec2 p = vPosition - vec2(vTopRight.x - b[0] - outerBorder, vTopRight.y - b[1] - outerBorder); // translate to center\n\n          float d; // signed distance\n          if(vVertType == ").concat(4,") {\n            d = rectangleSD(p, b);\n          } else if(vVertType == ").concat(7," && w == h) {\n            d = circleSD(p, b.x); // faster than ellipse\n          } else if(vVertType == ").concat(7,") {\n            d = ellipseSD(p, b);\n          } else {\n            d = roundRectangleSD(p, b, vCornerRadius.wzyx);\n          }\n\n          // use the distance to interpolate a color to smooth the edges of the shape, doesn't need multisampling\n          // we must smooth colors inwards, because we can't change pixels outside the shape's bounding box\n          if(d > 0.0) {\n            if(d > outerBorder) {\n              discard;\n            } else {\n              outColor = distInterp(vBorderColor, vec4(0), d - outerBorder);\n            }\n          } else {\n            if(d > innerBorder) {\n              vec4 outerColor = outerBorder == 0.0 ? vec4(0) : vBorderColor;\n              vec4 innerBorderColor = blend(vBorderColor, vColor);\n              outColor = distInterp(innerBorderColor, outerColor, d);\n            } \n            else {\n              vec4 outerColor;\n              if(innerBorder == 0.0 && outerBorder == 0.0) {\n                outerColor = vec4(0);\n              } else if(innerBorder == 0.0) {\n                outerColor = vBorderColor;\n              } else {\n                outerColor = blend(vBorderColor, vColor);\n              }\n              outColor = distInterp(vColor, outerColor, d - innerBorder);\n            }\n          }\n        }\n        else {\n          outColor = vColor;\n        }\n\n        ").concat(r.picking?"if(outColor.a == 0.0) discard;\n             else outColor = vIndex;":"","\n      }\n    "));o.aPosition=a.getAttribLocation(o,"aPosition"),o.aIndex=a.getAttribLocation(o,"aIndex"),o.aVertType=a.getAttribLocation(o,"aVertType"),o.aTransform=a.getAttribLocation(o,"aTransform"),o.aAtlasId=a.getAttribLocation(o,"aAtlasId"),o.aTex=a.getAttribLocation(o,"aTex"),o.aPointAPointB=a.getAttribLocation(o,"aPointAPointB"),o.aPointCPointD=a.getAttribLocation(o,"aPointCPointD"),o.aLineWidth=a.getAttribLocation(o,"aLineWidth"),o.aColor=a.getAttribLocation(o,"aColor"),o.aCornerRadius=a.getAttribLocation(o,"aCornerRadius"),o.aBorderColor=a.getAttribLocation(o,"aBorderColor"),o.uPanZoomMatrix=a.getUniformLocation(o,"uPanZoomMatrix"),o.uAtlasSize=a.getUniformLocation(o,"uAtlasSize"),o.uBGColor=a.getUniformLocation(o,"uBGColor"),o.uZoom=a.getUniformLocation(o,"uZoom"),o.uTextures=[];for(var u=0;u<this.batchManager.getMaxAtlasesPerBatch();u++)o.uTextures.push(a.getUniformLocation(o,"uTexture".concat(u)));return o}},{key:"_createVAO",value:function(){var r=[0,0,1,0,1,1,0,0,1,1,0,1];this.vertexCount=r.length/2;var a=this.maxInstances,i=this.gl,n=this.program,s=i.createVertexArray();return i.bindVertexArray(s),function jp(e,t,r,a){var n=Gt(u0(e,t),2),s=n[0],o=n[1],u=d0(e,o,a),h=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,h),e.bufferData(e.ARRAY_BUFFER,u,e.STATIC_DRAW),o===e.FLOAT?e.vertexAttribPointer(r,s,o,!1,0,0):o===e.INT&&e.vertexAttribIPointer(r,s,o,0,0),e.enableVertexAttribArray(r),e.bindBuffer(e.ARRAY_BUFFER,null)}(i,"vec2",n.aPosition,r),this.transformBuffer=function Xp(e,t,r){for(var i=new Float32Array(9*t),n=new Array(t),s=0;s<t;s++)n[s]=new Float32Array(i.buffer,9*s*4,9);var u=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,u),e.bufferData(e.ARRAY_BUFFER,i.byteLength,e.DYNAMIC_DRAW);for(var h=0;h<3;h++){var f=r+h;e.enableVertexAttribArray(f),e.vertexAttribPointer(f,3,e.FLOAT,!1,36,12*h),e.vertexAttribDivisor(f,1)}return e.bindBuffer(e.ARRAY_BUFFER,null),u.getMatrixView=function(p){return n[p]},u.setData=function(p,x){n[x].set(p,0)},u.bufferSubData=function(){e.bindBuffer(e.ARRAY_BUFFER,u),e.bufferSubData(e.ARRAY_BUFFER,0,i)},u}(i,a,n.aTransform),this.indexBuffer=ss(i,a,"vec4",n.aIndex),this.vertTypeBuffer=ss(i,a,"int",n.aVertType),this.atlasIdBuffer=ss(i,a,"int",n.aAtlasId),this.texBuffer=ss(i,a,"vec4",n.aTex),this.pointAPointBBuffer=ss(i,a,"vec4",n.aPointAPointB),this.pointCPointDBuffer=ss(i,a,"vec4",n.aPointCPointD),this.lineWidthBuffer=ss(i,a,"vec2",n.aLineWidth),this.colorBuffer=ss(i,a,"vec4",n.aColor),this.cornerRadiusBuffer=ss(i,a,"vec4",n.aCornerRadius),this.borderColorBuffer=ss(i,a,"vec4",n.aBorderColor),i.bindVertexArray(null),s}},{key:"buffers",get:function(){var r=this;return this._buffers||(this._buffers=Object.keys(this).filter(function(a){return Tt(a,"Buffer")}).map(function(a){return r[a]})),this._buffers}},{key:"startFrame",value:function(r){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Eo.SCREEN;this.panZoomMatrix=r,this.renderTarget=a,this.batchDebugInfo=[],this.wrappedCount=0,this.simpleCount=0,this.startBatch()}},{key:"startBatch",value:function(){this.instanceCount=0,this.batchManager.startBatch()}},{key:"endFrame",value:function(){this.endBatch()}},{key:"_isVisible",value:function(r,a){return!!r.visible()&&(!a||!a.isVisible||a.isVisible(r))}},{key:"drawTexture",value:function(r,a,i){var n=this.atlasManager,s=this.batchManager,o=n.getRenderTypeOpts(i);if(this._isVisible(r,o)&&(!r.isEdge()||this._isValidEdge(r))){if(this.renderTarget.picking&&o.getTexPickingMode){var u=o.getTexPickingMode(r);if(1===u)return;if(2==u)return void this.drawPickingRectangle(r,a,i)}var p,f=G(n.getAtlasInfo(r,i));try{for(f.s();!(p=f.n()).done;){var x=p.value,k=x.atlas,_=x.tex1,U=x.tex2;s.canAddToCurrentBatch(k)||this.endBatch();for(var O=s.getAtlasIndexForBatch(k),K=0,$=[[_,!0],[U,!1]];K<$.length;K++){var q=Gt($[K],2),vt=q[0],ae=q[1];if(0!=vt.w){var se=this.instanceCount;this.vertTypeBuffer.getView(se)[0]=0,Qs(a,this.indexBuffer.getView(se)),this.atlasIdBuffer.getView(se)[0]=O;var me=this.texBuffer.getView(se);me[0]=vt.x,me[1]=vt.y,me[2]=vt.w,me[3]=vt.h;var Te=this.transformBuffer.getMatrixView(se);this.setTransformMatrix(r,Te,o,x,ae),this.instanceCount++,ae||this.wrappedCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}}}catch(Le){f.e(Le)}finally{f.f()}}}},{key:"setTransformMatrix",value:function(r,a,i,n){var s=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],o=0;if(i.shapeProps&&i.shapeProps.padding&&(o=r.pstyle(i.shapeProps.padding).pfValue),n){var h=n.tex1,p=h.w/(h.w+n.tex2.w);s||(p=1-p);var x=this._getAdjustedBB(n.bb,o,s,p);this._applyTransformMatrix(a,x,i,r)}else{var k=i.getBoundingBox(r),_=this._getAdjustedBB(k,o,!0,1);this._applyTransformMatrix(a,_,i,r)}}},{key:"_applyTransformMatrix",value:function(r,a,i,n){var s,o;g0(r);var u=i.getRotation?i.getRotation(n):0;if(0!==u){var h=i.getRotationPoint(n);ul(r,r,[h.x,h.y]),p0(r,r,u);var x=i.getRotationOffset(n);s=x.x+(a.xOffset||0),o=x.y+(a.yOffset||0)}else s=a.x1,o=a.y1;ul(r,r,[s,o]),Zc(r,r,[a.w,a.h])}},{key:"_getAdjustedBB",value:function(r,a,i,n){var s=r.x1,o=r.y1,u=r.w,h=r.h;a&&(s-=a,o-=a,u+=2*a,h+=2*a);var p=0,x=u*n;return i&&n<1?u=x:!i&&n<1&&(s+=p=u-x,u=x),{x1:s,y1:o,w:u,h,xOffset:p,yOffset:r.yOffset}}},{key:"drawPickingRectangle",value:function(r,a,i){var n=this.atlasManager.getRenderTypeOpts(i),s=this.instanceCount;this.vertTypeBuffer.getView(s)[0]=4,Qs(a,this.indexBuffer.getView(s)),Bs([0,0,0],1,this.colorBuffer.getView(s));var h=this.transformBuffer.getMatrixView(s);this.setTransformMatrix(r,h,n),this.simpleCount++,this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}},{key:"drawNode",value:function(r,a,i){var n=this.simpleShapeOptions.get(i);if(this._isVisible(r,n)){var s=n.shapeProps,o=this._getVertTypeForShape(r,s.shape);if(void 0===o||n.isSimple&&!n.isSimple(r))return void this.drawTexture(r,a,i);var u=this.instanceCount;if(this.vertTypeBuffer.getView(u)[0]=o,5===o||6===o){var h=n.getBoundingBox(r),f=this._getCornerRadius(r,s.radius,h),p=this.cornerRadiusBuffer.getView(u);p[0]=f,p[1]=f,p[2]=f,p[3]=f,6===o&&(p[0]=0,p[2]=0)}Qs(a,this.indexBuffer.getView(u)),Bs(r.pstyle(s.color).value,r.pstyle(s.opacity).value,this.colorBuffer.getView(u));var O=this.lineWidthBuffer.getView(u);if(O[0]=0,O[1]=0,s.border){var K=r.pstyle("border-width").value;if(K>0){Bs(r.pstyle("border-color").value,r.pstyle("border-opacity").value,this.borderColorBuffer.getView(u));var ae=r.pstyle("border-position").value;if("inside"===ae)O[0]=0,O[1]=-K;else if("outside"===ae)O[0]=K,O[1]=0;else{var se=K/2;O[0]=se,O[1]=-se}}}var Yt=this.transformBuffer.getMatrixView(u);this.setTransformMatrix(r,Yt,n),this.simpleCount++,this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}},{key:"_getVertTypeForShape",value:function(r,a){switch(r.pstyle(a).value){case"rectangle":return 4;case"ellipse":return 7;case"roundrectangle":case"round-rectangle":return 5;case"bottom-round-rectangle":return 6;default:return}}},{key:"_getCornerRadius",value:function(r,a,i){var n=i.w,s=i.h;if("auto"===r.pstyle(a).value)return Ui(n,s);var o=r.pstyle(a).pfValue;return Math.min(o,s/2,n/2)}},{key:"drawEdgeArrow",value:function(r,a,i){if(r.visible()){var s,o,u,n=r._private.rscratch;if(!("source"===i?(s=n.arrowStartX,o=n.arrowStartY,u=n.srcArrowAngle):(s=n.arrowEndX,o=n.arrowEndY,u=n.tgtArrowAngle),isNaN(s)||null==s||isNaN(o)||null==o||isNaN(u)||null==u||"none"===r.pstyle(i+"-arrow-shape").value)){var f=r.pstyle(i+"-arrow-color").value,k=r.pstyle("opacity").value*r.pstyle("line-opacity").value,_=r.pstyle("width").pfValue,U=r.pstyle("arrow-scale").value,O=this.r.getArrowWidth(_,U),K=this.instanceCount,$=this.transformBuffer.getMatrixView(K);g0($),ul($,$,[s,o]),Zc($,$,[O,O]),p0($,$,u),this.vertTypeBuffer.getView(K)[0]=3,Qs(a,this.indexBuffer.getView(K)),Bs(f,k,this.colorBuffer.getView(K)),this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}}},{key:"drawEdgeLine",value:function(r,a){if(r.visible()){var i=this._getEdgePoints(r);if(i){var n=r.pstyle("opacity").value,s=r.pstyle("line-opacity").value,o=r.pstyle("width").pfValue,u=r.pstyle("line-color").value,h=n*s;if(i.length/2+this.instanceCount>this.maxInstances&&this.endBatch(),4==i.length){var f=this.instanceCount;this.vertTypeBuffer.getView(f)[0]=1,Qs(a,this.indexBuffer.getView(f)),Bs(u,h,this.colorBuffer.getView(f)),this.lineWidthBuffer.getView(f)[0]=o;var _=this.pointAPointBBuffer.getView(f);_[0]=i[0],_[1]=i[1],_[2]=i[2],_[3]=i[3],this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}else for(var U=0;U<i.length-2;U+=2){var O=this.instanceCount;this.vertTypeBuffer.getView(O)[0]=2,Qs(a,this.indexBuffer.getView(O)),Bs(u,h,this.colorBuffer.getView(O)),this.lineWidthBuffer.getView(O)[0]=o;var vt=i[U-2],ae=i[U-1],se=i[U],Yt=i[U+1],he=i[U+2],me=i[U+3],Te=i[U+4],Le=i[U+5];0==U&&(vt=2*se-he+.001,ae=2*Yt-me+.001),U==i.length-4&&(Te=2*he-se+.001,Le=2*me-Yt+.001);var Ie=this.pointAPointBBuffer.getView(O);Ie[0]=vt,Ie[1]=ae,Ie[2]=se,Ie[3]=Yt;var Oe=this.pointCPointDBuffer.getView(O);Oe[0]=he,Oe[1]=me,Oe[2]=Te,Oe[3]=Le,this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}}}},{key:"_isValidEdge",value:function(r){var a=r._private.rscratch;return!(a.badLine||null==a.allpts||isNaN(a.allpts[0]))}},{key:"_getEdgePoints",value:function(r){var a=r._private.rscratch;if(this._isValidEdge(r)){var i=a.allpts;if(4==i.length)return i;var n=this._getNumSegments(r);return this._getCurveSegmentPoints(i,n)}}},{key:"_getNumSegments",value:function(r){return Math.min(Math.max(15,5),this.maxInstances)}},{key:"_getCurveSegmentPoints",value:function(r,a){if(4==r.length)return r;for(var i=Array(2*(a+1)),n=0;n<=a;n++)0==n?(i[0]=r[0],i[1]=r[1]):n==a?(i[2*n]=r[r.length-2],i[2*n+1]=r[r.length-1]):this._setCurvePoint(r,n/a,i,2*n);return i}},{key:"_setCurvePoint",value:function(r,a,i,n){if(!(r.length<=2)){for(var s=Array(r.length-2),o=0;o<s.length;o+=2){var h=(1-a)*r[o+1]+a*r[o+3];s[o]=(1-a)*r[o]+a*r[o+2],s[o+1]=h}return this._setCurvePoint(s,a,i,n)}i[n]=r[0],i[n+1]=r[1]}},{key:"endBatch",value:function(){var r=this.gl,a=this.vao,i=this.vertexCount,n=this.instanceCount;if(0!==n){var s=this.renderTarget.picking?this.pickingProgram:this.program;r.useProgram(s),r.bindVertexArray(a);var u,o=G(this.buffers);try{for(o.s();!(u=o.n()).done;)u.value.bufferSubData(n)}catch(_){o.e(_)}finally{o.f()}for(var f=this.batchManager.getAtlases(),p=0;p<f.length;p++)f[p].bufferIfNeeded(r);for(var x=0;x<f.length;x++)r.activeTexture(r.TEXTURE0+x),r.bindTexture(r.TEXTURE_2D,f[x].texture),r.uniform1i(s.uTextures[x],x);r.uniform1f(s.uZoom,function Vp(e){var t=e.pixelRatio;return e.cy.zoom()*t}(this.r)),r.uniformMatrix3fv(s.uPanZoomMatrix,!1,this.panZoomMatrix),r.uniform1i(s.uAtlasSize,this.batchManager.getAtlasSize());var k=Bs(this.bgColor,1);r.uniform4fv(s.uBGColor,k),r.drawArraysInstanced(r.TRIANGLES,0,i,n),r.bindVertexArray(null),r.bindTexture(r.TEXTURE_2D,null),this.debug&&this.batchDebugInfo.push({count:n,atlasCount:f.length}),this.startBatch()}}},{key:"getDebugInfo",value:function(){var r=this.atlasManager.getDebugInfo(),a=r.reduce(function(s,o){return s+o.atlasCount},0),i=this.batchDebugInfo,n=i.reduce(function(s,o){return s+o.count},0);return{atlasInfo:r,totalAtlases:a,wrappedCount:this.wrappedCount,simpleCount:this.simpleCount,batchCount:i.length,batchInfo:i,totalInstances:n}}}])}(),m0={};function x0(e,t){return Jt(e._private.rscratch,"labelWrapCachedLines",t)||[]}m0.initWebgl=function(e,t){var r=this,a=r.data.contexts[r.WEBGL];e.bgColor=function h2(e){var t=e.cy.container();return pe(t&&t.style&&t.style.backgroundColor||"white")}(r),e.webglTexSize=Math.min(e.webglTexSize,a.getParameter(a.MAX_TEXTURE_SIZE)),e.webglTexRows=Math.min(e.webglTexRows,54),e.webglTexRowsNodes=Math.min(e.webglTexRowsNodes,54),e.webglBatchSize=Math.min(e.webglBatchSize,16384),e.webglTexPerBatch=Math.min(e.webglTexPerBatch,a.getParameter(a.MAX_TEXTURE_IMAGE_UNITS)),r.webglDebug=e.webglDebug,r.webglDebugShowAtlases=e.webglDebugShowAtlases,r.pickingFrameBuffer=function Zp(e){var t=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,t);var r=e.createTexture();return e.bindTexture(e.TEXTURE_2D,r),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,r,0),e.bindFramebuffer(e.FRAMEBUFFER,null),t.setFramebufferAttachmentSizes=function(a,i){e.bindTexture(e.TEXTURE_2D,r),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,a,i,0,e.RGBA,e.UNSIGNED_BYTE,null)},t}(a),r.pickingFrameBuffer.needsDraw=!0,r.drawing=new c2(r,a,e);var i=function(p){return function(x){return r.getTextAngle(x,p)}},n=function(p){return function(x){var k=x.pstyle(p);return k&&k.value}},s=function(p){return function(x){return x.pstyle("".concat(p,"-opacity")).value>0}},o=function(p){return"yes"===p.pstyle("text-events").strValue?2:1},u=function(p){var x=p.position(),k=x.x,_=x.y,U=p.outerWidth(),O=p.outerHeight();return{w:U,h:O,x1:k-U/2,y1:_-O/2}};r.drawing.addAtlasCollection("node",{texRows:e.webglTexRowsNodes}),r.drawing.addAtlasCollection("label",{texRows:e.webglTexRows}),r.drawing.addTextureAtlasRenderType("node-body",{collection:"node",getKey:t.getStyleKey,getBoundingBox:t.getElementBox,drawElement:t.drawElement}),r.drawing.addSimpleShapeRenderType("node-body",{getBoundingBox:u,isSimple:$p,shapeProps:{shape:"shape",color:"background-color",opacity:"background-opacity",radius:"corner-radius",border:!0}}),r.drawing.addSimpleShapeRenderType("node-overlay",{getBoundingBox:u,isVisible:s("overlay"),shapeProps:{shape:"overlay-shape",color:"overlay-color",opacity:"overlay-opacity",padding:"overlay-padding",radius:"overlay-corner-radius"}}),r.drawing.addSimpleShapeRenderType("node-underlay",{getBoundingBox:u,isVisible:s("underlay"),shapeProps:{shape:"underlay-shape",color:"underlay-color",opacity:"underlay-opacity",padding:"underlay-padding",radius:"underlay-corner-radius"}}),r.drawing.addTextureAtlasRenderType("label",{collection:"label",getTexPickingMode:o,getKey:th(t.getLabelKey,null),getBoundingBox:eh(t.getLabelBox,null),drawClipped:!0,drawElement:t.drawLabel,getRotation:i(null),getRotationPoint:t.getLabelRotationPoint,getRotationOffset:t.getLabelRotationOffset,isVisible:n("label")}),r.drawing.addTextureAtlasRenderType("edge-source-label",{collection:"label",getTexPickingMode:o,getKey:th(t.getSourceLabelKey,"source"),getBoundingBox:eh(t.getSourceLabelBox,"source"),drawClipped:!0,drawElement:t.drawSourceLabel,getRotation:i("source"),getRotationPoint:t.getSourceLabelRotationPoint,getRotationOffset:t.getSourceLabelRotationOffset,isVisible:n("source-label")}),r.drawing.addTextureAtlasRenderType("edge-target-label",{collection:"label",getTexPickingMode:o,getKey:th(t.getTargetLabelKey,"target"),getBoundingBox:eh(t.getTargetLabelBox,"target"),drawClipped:!0,drawElement:t.drawTargetLabel,getRotation:i("target"),getRotationPoint:t.getTargetLabelRotationPoint,getRotationOffset:t.getTargetLabelRotationOffset,isVisible:n("target-label")});var h=Kr(function(){console.log("garbage collect flag set"),r.data.gc=!0},1e4);r.onUpdateEleCalcs(function(f,p){var x=!1;p&&p.length>0&&(x|=r.drawing.invalidate(p)),x&&h()}),function u2(e){var t=e.render;e.render=function(n){n=n||{},e.webgl&&(e.cy.zoom()>7.99?(function d2(e){var t=e.data.contexts[e.WEBGL];t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT)}(e),t.call(e,n)):(function f2(e){var t=function(a){a.save(),a.setTransform(1,0,0,1,0,0),a.clearRect(0,0,e.canvasWidth,e.canvasHeight),a.restore()};t(e.data.contexts[e.NODE]),t(e.data.contexts[e.DRAG])}(e),_0(e,n,Eo.SCREEN)))};var r=e.matchCanvasSize;e.matchCanvasSize=function(n){r.call(e,n),e.pickingFrameBuffer.setFramebufferAttachmentSizes(e.canvasWidth,e.canvasHeight),e.pickingFrameBuffer.needsDraw=!0},e.findNearestElements=function(n,s,o,u){return function x2(e,t,r){var n,s,u,a=function m2(e,t,r){var n,s,h=jc(e),x=function Up(e,t,r,a,i){var s=i*r+t.y;return[a*r+t.x,s=Math.round(e.canvasHeight-s)]}(e,h.pan,h.zoom,t,r),k=Gt(x,2);n=k[0]-3,s=k[1]-3;var K=e.data.contexts[e.WEBGL];K.bindFramebuffer(K.FRAMEBUFFER,e.pickingFrameBuffer),e.pickingFrameBuffer.needsDraw&&(K.viewport(0,0,K.canvas.width,K.canvas.height),_0(e,null,Eo.PICKING),e.pickingFrameBuffer.needsDraw=!1);var q=new Uint8Array(144);K.readPixels(n,s,6,6,K.RGBA,K.UNSIGNED_BYTE,q),K.bindFramebuffer(K.FRAMEBUFFER,null);for(var vt=new Set,ae=0;ae<36;ae++){var Yt=Hp(q.slice(4*ae,4*ae+4))-1;Yt>=0&&vt.add(Yt)}return vt}(e,t,r),i=e.getCachedZSortedEles(),o=G(a);try{for(o.s();!(u=o.n()).done;){var f=i[u.value];if(!n&&f.isNode()&&(n=f),!s&&f.isEdge()&&(s=f),n&&s)break}}catch(p){o.e(p)}finally{o.f()}return[n,s].filter(Boolean)}(e,n,s)};var a=e.invalidateCachedZSortedEles;e.invalidateCachedZSortedEles=function(){a.call(e),e.pickingFrameBuffer.needsDraw=!0};var i=e.notify;e.notify=function(n,s){i.call(e,n,s),"viewport"===n||"bounds"===n?e.pickingFrameBuffer.needsDraw=!0:"background"===n&&e.drawing.invalidate(s,{type:"node-body"})}}(r)};var th=function(t,r){return function(a){var i=t(a),n=x0(a,r);return n.length>1?n.map(function(s,o){return"".concat(i,"_").concat(o)}):i}},eh=function(t,r){return function(a,i){var n=t(a);if("string"==typeof i){var s=i.indexOf("_");if(s>0){var o=Number(i.substring(s+1)),u=x0(a,r),h=n.h/u.length,f=h*o;return{x1:n.x1,w:n.w,y1:n.y1+f,h,yOffset:f}}}return n}};function b0(e,t){var r=e.canvasWidth,a=e.canvasHeight,i=jc(e),n=i.pan,s=i.zoom;t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,r,a),t.translate(n.x,n.y),t.scale(s,s)}function rh(e,t,r){var a=e.drawing;t+=1,r.isNode()?(a.drawNode(r,t,"node-underlay"),a.drawNode(r,t,"node-body"),a.drawTexture(r,t,"label"),a.drawNode(r,t,"node-overlay")):(a.drawEdgeLine(r,t),a.drawEdgeArrow(r,t,"source"),a.drawEdgeArrow(r,t,"target"),a.drawTexture(r,t,"label"),a.drawTexture(r,t,"edge-source-label"),a.drawTexture(r,t,"edge-target-label"))}function _0(e,t,r){var a;e.webglDebug&&(a=performance.now());var i=e.drawing,n=0;if(r.screen&&e.data.canvasNeedsRedraw[e.SELECT_BOX]&&function p2(e,t){e.drawSelectionRectangle(t,function(r){return b0(e,r)})}(e,t),e.data.canvasNeedsRedraw[e.NODE]||r.picking){var s=e.data.contexts[e.WEBGL];r.screen?(s.clearColor(0,0,0,0),s.enable(s.BLEND),s.blendFunc(s.ONE,s.ONE_MINUS_SRC_ALPHA)):s.disable(s.BLEND),s.clear(s.COLOR_BUFFER_BIT|s.DEPTH_BUFFER_BIT),s.viewport(0,0,s.canvas.width,s.canvas.height);var o=function g2(e){var t=e.canvasWidth,r=e.canvasHeight,a=jc(e),i=a.pan,n=a.zoom,s=Xc();ul(s,s,[i.x,i.y]),Zc(s,s,[n,n]);var o=Xc();!function Jp(e,t,r){e[0]=2/t,e[1]=0,e[2]=0,e[3]=0,e[4]=-2/r,e[5]=0,e[6]=-1,e[7]=1,e[8]=1}(o,t,r);var u=Xc();return function Qp(e,t,r){var a=t[0],i=t[1],n=t[2],s=t[3],o=t[4],u=t[5],h=t[6],f=t[7],p=t[8],x=r[0],k=r[1],_=r[2],U=r[3],O=r[4],K=r[5],$=r[6],q=r[7],vt=r[8];e[0]=x*a+k*s+_*h,e[1]=x*i+k*o+_*f,e[2]=x*n+k*u+_*p,e[3]=U*a+O*s+K*h,e[4]=U*i+O*o+K*f,e[5]=U*n+O*u+K*p,e[6]=$*a+q*s+vt*h,e[7]=$*i+q*o+vt*f,e[8]=$*n+q*u+vt*p}(u,o,s),u}(e),u=e.getCachedZSortedEles();if(n=u.length,i.startFrame(o,r),r.screen){for(var h=0;h<u.nondrag.length;h++)rh(e,h,u.nondrag[h]);for(var f=0;f<u.drag.length;f++)rh(e,f,u.drag[f])}else if(r.picking)for(var p=0;p<u.length;p++)rh(e,p,u[p]);i.endFrame(),r.screen&&e.webglDebugShowAtlases&&(function v2(e){var t=e.data.contexts[e.NODE];t.save(),b0(e,t),t.strokeStyle="rgba(0, 0, 0, 0.3)",t.beginPath(),t.moveTo(-1e3,0),t.lineTo(1e3,0),t.stroke(),t.beginPath(),t.moveTo(0,-1e3),t.lineTo(0,1e3),t.stroke(),t.restore()}(e),function y2(e){var t=function(i,n,s){for(var o=i.atlasManager.getAtlasCollection(n),u=e.data.contexts[e.NODE],h=o.atlases,f=0;f<h.length;f++){var x=h[f].canvas;if(x){var k=x.width,_=x.height,U=k*f,O=x.height*s;u.save(),u.scale(.4,.4),u.drawImage(x,U,O),u.strokeStyle="black",u.rect(U,O,k,_),u.stroke(),u.restore()}}},r=0;t(e.drawing,"node",r++),t(e.drawing,"label",r++)}(e)),e.data.canvasNeedsRedraw[e.NODE]=!1,e.data.canvasNeedsRedraw[e.DRAG]=!1}if(e.webglDebug){var x=performance.now(),_=Math.ceil(x-a),U=i.getDebugInfo(),O=["".concat(n," elements"),"".concat(U.totalInstances," instances"),"".concat(U.batchCount," batches"),"".concat(U.totalAtlases," atlases"),"".concat(U.wrappedCount," wrapped textures"),"".concat(U.simpleCount," simple shapes")].join(", ");console.log("WebGL (".concat(r.name,") - frame time ").concat(_,"ms")),console.log("Totals:"),console.log("  ".concat(O)),console.log("Texture Atlases Used:");var q,$=G(U.atlasInfo);try{for($.s();!(q=$.n()).done;){var vt=q.value;console.log("  ".concat(vt.type,": ").concat(vt.keyCount," keys, ").concat(vt.atlasCount," atlases"))}}catch(ae){$.e(ae)}finally{$.f()}console.log("")}e.data.gc&&(console.log("Garbage Collect!"),e.data.gc=!1,i.gc())}for(var Es={drawPolygonPath:function(e,t,r,a,i,n){var s=a/2,o=i/2;e.beginPath&&e.beginPath(),e.moveTo(t+s*n[0],r+o*n[1]);for(var u=1;u<n.length/2;u++)e.lineTo(t+s*n[2*u],r+o*n[2*u+1]);e.closePath()},drawRoundPolygonPath:function(e,t,r,a,i,n,s){s.forEach(function(o){return Wd(e,o)}),e.closePath()},drawRoundRectanglePath:function(e,t,r,a,i,n){var s=a/2,o=i/2,u="auto"===n?Ui(a,i):Math.min(n,o,s);e.beginPath&&e.beginPath(),e.moveTo(t,r-o),e.arcTo(t+s,r-o,t+s,r,u),e.arcTo(t+s,r+o,t,r+o,u),e.arcTo(t-s,r+o,t-s,r,u),e.arcTo(t-s,r-o,t,r-o,u),e.lineTo(t,r-o),e.closePath()},drawBottomRoundRectanglePath:function(e,t,r,a,i,n){var s=a/2,o=i/2,u="auto"===n?Ui(a,i):n;e.beginPath&&e.beginPath(),e.moveTo(t,r-o),e.lineTo(t+s,r-o),e.lineTo(t+s,r),e.arcTo(t+s,r+o,t,r+o,u),e.arcTo(t-s,r+o,t-s,r,u),e.lineTo(t-s,r-o),e.lineTo(t,r-o),e.closePath()},drawCutRectanglePath:function(e,t,r,a,i,n,s){var o=a/2,u=i/2,h="auto"===s?8:s;e.beginPath&&e.beginPath(),e.moveTo(t-o+h,r-u),e.lineTo(t+o-h,r-u),e.lineTo(t+o,r-u+h),e.lineTo(t+o,r+u-h),e.lineTo(t+o-h,r+u),e.lineTo(t-o+h,r+u),e.lineTo(t-o,r+u-h),e.lineTo(t-o,r-u+h),e.closePath()},drawBarrelPath:function(e,t,r,a,i){var n=a/2,s=i/2,o=t-n,u=t+n,h=r-s,f=r+s,p=yl(a,i),x=p.widthOffset,k=p.heightOffset,_=p.ctrlPtOffsetPct*x;e.beginPath&&e.beginPath(),e.moveTo(o,h+k),e.lineTo(o,f-k),e.quadraticCurveTo(o+_,f,o+x,f),e.lineTo(u-x,f),e.quadraticCurveTo(u-_,f,u,f-k),e.lineTo(u,h+k),e.quadraticCurveTo(u-_,h,u-x,h),e.lineTo(o+x,h),e.quadraticCurveTo(o+_,h,o,h+k),e.closePath()}},E0=Math.sin(0),C0=Math.cos(0),ah={},ih={},k0=Math.PI/40,to=0*Math.PI;to<2*Math.PI;to+=k0)ah[to]=Math.sin(to),ih[to]=Math.cos(to);Es.drawEllipsePath=function(e,t,r,a,i){if(e.beginPath&&e.beginPath(),e.ellipse)e.ellipse(t,r,a/2,i/2,0,0,2*Math.PI);else for(var n,s,o=a/2,u=i/2,h=0*Math.PI;h<2*Math.PI;h+=k0)n=t-o*ah[h]*E0+o*ih[h]*C0,s=r+u*ih[h]*E0+u*ah[h]*C0,0===h?e.moveTo(n,s):e.lineTo(n,s);e.closePath()};var To={};function T0(e){var t=e.indexOf(",");return e.substr(t+1)}function S0(e,t,r){var a=function(){return t.toDataURL(r,e.quality)};switch(e.output){case"blob-promise":return new Ks(function(i,n){try{t.toBlob(function(s){null!=s?i(s):n(new Error("`canvas.toBlob()` sent a null value in its callback"))},r,e.quality)}catch(s){n(s)}});case"blob":return function b2(e,t){for(var r=atob(e),a=new ArrayBuffer(r.length),i=new Uint8Array(a),n=0;n<r.length;n++)i[n]=r.charCodeAt(n);return new Blob([a],{type:t})}(T0(a()),r);case"base64":return T0(a());default:return a()}}To.createBuffer=function(e,t){var r=document.createElement("canvas");return r.width=e,r.height=t,[r,r.getContext("2d")]},To.bufferCanvasImage=function(e){var t=this.cy,a=t.mutableElements().boundingBox(),i=this.findContainerClientCoords(),n=e.full?Math.ceil(a.w):i[2],s=e.full?Math.ceil(a.h):i[3],o=X(e.maxWidth)||X(e.maxHeight),u=this.getPixelRatio(),h=1;if(void 0!==e.scale)n*=e.scale,s*=e.scale,h=e.scale;else if(o){var f=1/0,p=1/0;X(e.maxWidth)&&(f=h*e.maxWidth/n),X(e.maxHeight)&&(p=h*e.maxHeight/s),n*=h=Math.min(f,p),s*=h}o||(n*=u,s*=u,h*=u);var x=document.createElement("canvas");x.width=n,x.height=s,x.style.width=n+"px",x.style.height=s+"px";var k=x.getContext("2d");if(n>0&&s>0){k.clearRect(0,0,n,s),k.globalCompositeOperation="source-over";var _=this.getCachedZSortedEles();if(e.full)k.translate(-a.x1*h,-a.y1*h),k.scale(h,h),this.drawElements(k,_),k.scale(1/h,1/h),k.translate(a.x1*h,a.y1*h);else{var U=t.pan(),O={x:U.x*h,y:U.y*h};h*=t.zoom(),k.translate(O.x,O.y),k.scale(h,h),this.drawElements(k,_),k.scale(1/h,1/h),k.translate(-O.x,-O.y)}e.bg&&(k.globalCompositeOperation="destination-over",k.fillStyle=e.bg,k.rect(0,0,n,s),k.fill())}return x},To.png=function(e){return S0(e,this.bufferCanvasImage(e),"image/png")},To.jpg=function(e){return S0(e,this.bufferCanvasImage(e),"image/jpeg")};var _2=A0,Si=A0.prototype;function A0(e){var t=this,a=t.cy.window().document;e.webgl&&(Si.CANVAS_LAYERS=t.CANVAS_LAYERS=4,console.log("webgl rendering enabled")),t.data={canvases:new Array(Si.CANVAS_LAYERS),contexts:new Array(Si.CANVAS_LAYERS),canvasNeedsRedraw:new Array(Si.CANVAS_LAYERS),bufferCanvases:new Array(Si.BUFFER_COUNT),bufferContexts:new Array(Si.CANVAS_LAYERS)};var i="-webkit-tap-highlight-color",n="rgba(0,0,0,0)";t.data.canvasContainer=a.createElement("div");var s=t.data.canvasContainer.style;t.data.canvasContainer.style[i]=n,s.position="relative",s.zIndex="0",s.overflow="hidden";var o=e.cy.container();o.appendChild(t.data.canvasContainer),o.style[i]=n;var u={"-webkit-user-select":"none","-moz-user-select":"-moz-none","user-select":"none","-webkit-tap-highlight-color":"rgba(0,0,0,0)","outline-style":"none"};Gr&&Gr.userAgent.match(/msie|trident|edge/i)&&(u["-ms-touch-action"]="none",u["touch-action"]="none");for(var h=0;h<Si.CANVAS_LAYERS;h++){var f=t.data.canvases[h]=a.createElement("canvas"),p=Si.CANVAS_TYPES[h];t.data.contexts[h]=f.getContext(p),t.data.contexts[h]||Ka("Could not create canvas of type "+p),Object.keys(u).forEach(function(Ta){f.style[Ta]=u[Ta]}),f.style.position="absolute",f.setAttribute("data-id","layer"+h),f.style.zIndex=String(Si.CANVAS_LAYERS-h),t.data.canvasContainer.appendChild(f),t.data.canvasNeedsRedraw[h]=!1}for(t.data.topCanvas=t.data.canvases[0],t.data.canvases[Si.NODE].setAttribute("data-id","layer"+Si.NODE+"-node"),t.data.canvases[Si.SELECT_BOX].setAttribute("data-id","layer"+Si.SELECT_BOX+"-selectbox"),t.data.canvases[Si.DRAG].setAttribute("data-id","layer"+Si.DRAG+"-drag"),t.data.canvases[Si.WEBGL]&&t.data.canvases[Si.WEBGL].setAttribute("data-id","layer"+Si.WEBGL+"-webgl"),h=0;h<Si.BUFFER_COUNT;h++)t.data.bufferCanvases[h]=a.createElement("canvas"),t.data.bufferContexts[h]=t.data.bufferCanvases[h].getContext("2d"),t.data.bufferCanvases[h].style.position="absolute",t.data.bufferCanvases[h].setAttribute("data-id","buffer"+h),t.data.bufferCanvases[h].style.zIndex=String(-h-1),t.data.bufferCanvases[h].style.visibility="hidden";t.pathsEnabled=!0;var x=kt(),_=function(Nr){return{x:-Nr.w/2,y:-Nr.h/2}},O=function(Nr){return Nr[0]._private.nodeKey},K=function(Nr){return Nr[0]._private.labelStyleKey},$=function(Nr){return Nr[0]._private.sourceLabelStyleKey},q=function(Nr){return Nr[0]._private.targetLabelStyleKey},vt=function(Nr,Ur,Zr,ma,Ga){return t.drawElement(Nr,Ur,Zr,!1,!1,Ga)},ae=function(Nr,Ur,Zr,ma,Ga){return t.drawElementText(Nr,Ur,Zr,ma,"main",Ga)},se=function(Nr,Ur,Zr,ma,Ga){return t.drawElementText(Nr,Ur,Zr,ma,"source",Ga)},Yt=function(Nr,Ur,Zr,ma,Ga){return t.drawElementText(Nr,Ur,Zr,ma,"target",Ga)},he=function(Nr){return Nr.boundingBox(),Nr[0]._private.bodyBounds},me=function(Nr){return Nr.boundingBox(),Nr[0]._private.labelBounds.main||x},Te=function(Nr){return Nr.boundingBox(),Nr[0]._private.labelBounds.source||x},Le=function(Nr){return Nr.boundingBox(),Nr[0]._private.labelBounds.target||x},Ie=function(Nr,Ur){return Ur},Oe=function(Nr){return function(Nr){return{x:(Nr.x1+Nr.x2)/2,y:(Nr.y1+Nr.y2)/2}}(he(Nr))},tr=function(Nr,Ur,Zr){var ma=Nr?Nr+"-":"";return{x:Ur.x+Zr.pstyle(ma+"text-margin-x").pfValue,y:Ur.y+Zr.pstyle(ma+"text-margin-y").pfValue}},cr=function(Nr,Ur,Zr){var ma=Nr[0]._private.rscratch;return{x:ma[Ur],y:ma[Zr]}},dr=function(Nr){return tr("",cr(Nr,"labelX","labelY"),Nr)},rr=function(Nr){return tr("source",cr(Nr,"sourceLabelX","sourceLabelY"),Nr)},Cr=function(Nr){return tr("target",cr(Nr,"targetLabelX","targetLabelY"),Nr)},Vr=function(Nr){return _(he(Nr))},qr=function(Nr){return _(Te(Nr))},Ar=function(Nr){return _(Le(Nr))},Fr=function(Nr){var Ur=me(Nr),Zr=_(me(Nr));if(Nr.isNode()){switch(Nr.pstyle("text-halign").value){case"left":Zr.x=-Ur.w-(Ur.leftPad||0);break;case"right":Zr.x=-(Ur.rightPad||0)}switch(Nr.pstyle("text-valign").value){case"top":Zr.y=-Ur.h-(Ur.topPad||0);break;case"bottom":Zr.y=-(Ur.botPad||0)}}return Zr},ga=t.data.eleTxrCache=new xo(t,{getKey:O,doesEleInvalidateKey:function(Nr){var Ur=Nr[0]._private;return!(Ur.oldBackgroundTimestamp===Ur.backgroundTimestamp)},drawElement:vt,getBoundingBox:he,getRotationPoint:Oe,getRotationOffset:Vr,allowEdgeTxrCaching:!1,allowParentTxrCaching:!1}),Ea=t.data.lblTxrCache=new xo(t,{getKey:K,drawElement:ae,getBoundingBox:me,getRotationPoint:dr,getRotationOffset:Fr,isVisible:Ie}),pa=t.data.slbTxrCache=new xo(t,{getKey:$,drawElement:se,getBoundingBox:Te,getRotationPoint:rr,getRotationOffset:qr,isVisible:Ie}),Aa=t.data.tlbTxrCache=new xo(t,{getKey:q,drawElement:Yt,getBoundingBox:Le,getRotationPoint:Cr,getRotationOffset:Ar,isVisible:Ie}),Ra=t.data.lyrTxrCache=new r0(t);t.onUpdateEleCalcs(function(Nr,Ur){ga.invalidateElements(Ur),Ea.invalidateElements(Ur),pa.invalidateElements(Ur),Aa.invalidateElements(Ur),Ra.invalidateElements(Ur);for(var Zr=0;Zr<Ur.length;Zr++){var ma=Ur[Zr]._private;ma.oldBackgroundTimestamp=ma.backgroundTimestamp}});var Za=function(Nr){for(var Ur=0;Ur<Nr.length;Ur++)Ra.enqueueElementRefinement(Nr[Ur].ele)};ga.onDequeue(Za),Ea.onDequeue(Za),pa.onDequeue(Za),Aa.onDequeue(Za),e.webgl&&t.initWebgl(e,{getStyleKey:O,getLabelKey:K,getSourceLabelKey:$,getTargetLabelKey:q,drawElement:vt,drawLabel:ae,drawSourceLabel:se,drawTargetLabel:Yt,getElementBox:he,getLabelBox:me,getSourceLabelBox:Te,getTargetLabelBox:Le,getElementRotationPoint:Oe,getElementRotationOffset:Vr,getLabelRotationPoint:dr,getSourceLabelRotationPoint:rr,getTargetLabelRotationPoint:Cr,getLabelRotationOffset:Fr,getSourceLabelRotationOffset:qr,getTargetLabelRotationOffset:Ar})}Si.CANVAS_LAYERS=3,Si.SELECT_BOX=0,Si.DRAG=1,Si.NODE=2,Si.WEBGL=3,Si.CANVAS_TYPES=["2d","2d","2d","webgl2"],Si.BUFFER_COUNT=3,Si.TEXTURE_BUFFER=0,Si.MOTIONBLUR_BUFFER_NODE=1,Si.MOTIONBLUR_BUFFER_DRAG=2,Si.redrawHint=function(e,t){var r=this;switch(e){case"eles":r.data.canvasNeedsRedraw[Si.NODE]=t;break;case"drag":r.data.canvasNeedsRedraw[Si.DRAG]=t;break;case"select":r.data.canvasNeedsRedraw[Si.SELECT_BOX]=t;break;case"gc":r.data.gc=!0}};var E2=typeof Path2D<"u";Si.path2dEnabled=function(e){if(void 0===e)return this.pathsEnabled;this.pathsEnabled=!!e},Si.usePaths=function(){return E2&&this.pathsEnabled},Si.setImgSmoothing=function(e,t){null!=e.imageSmoothingEnabled?e.imageSmoothingEnabled=t:(e.webkitImageSmoothingEnabled=t,e.mozImageSmoothingEnabled=t,e.msImageSmoothingEnabled=t)},Si.getImgSmoothing=function(e){return null!=e.imageSmoothingEnabled?e.imageSmoothingEnabled:e.webkitImageSmoothingEnabled||e.mozImageSmoothingEnabled||e.msImageSmoothingEnabled},Si.makeOffscreenCanvas=function(e,t){var r;return"undefined"!==(typeof OffscreenCanvas>"u"?"undefined":vr(OffscreenCanvas))?r=new OffscreenCanvas(e,t):((r=this.cy.window().document.createElement("canvas")).width=e,r.height=t),r},[i0,ns,hs,qc,Ls,_s,Fn,m0,Es,To,{nodeShapeImpl:function(e,t,r,a,i,n,s,o){switch(e){case"ellipse":return this.drawEllipsePath(t,r,a,i,n);case"polygon":return this.drawPolygonPath(t,r,a,i,n,s);case"round-polygon":return this.drawRoundPolygonPath(t,r,a,i,n,s,o);case"roundrectangle":case"round-rectangle":return this.drawRoundRectanglePath(t,r,a,i,n,o);case"cutrectangle":case"cut-rectangle":return this.drawCutRectanglePath(t,r,a,i,n,s,o);case"bottomroundrectangle":case"bottom-round-rectangle":return this.drawBottomRoundRectanglePath(t,r,a,i,n,o);case"barrel":return this.drawBarrelPath(t,r,a,i,n)}}}].forEach(function(e){H(Si,e)});var k2=[{type:"layout",extensions:j1},{type:"renderer",extensions:[{name:"null",impl:Bd},{name:"base",impl:Xd},{name:"canvas",impl:_2}]}],D0={},L0={};function B0(e,t,r){var a=r,i=function(he){_a("Can not register `"+t+"` for `"+e+"` since `"+he+"` already exists in the prototype and can not be overridden")};if("core"===e){if(po.prototype[t])return i(t);po.prototype[t]=r}else if("collection"===e){if(wn.prototype[t])return i(t);wn.prototype[t]=r}else if("layout"===e){for(var n=function(he){this.options=he,r.call(this,he),Bt(this._private)||(this._private={}),this._private.cy=he.cy,this._private.listeners=[],this.createEmitter()},s=n.prototype=Object.create(r.prototype),o=[],u=0;u<o.length;u++){var h=o[u];s[h]=s[h]||function(){return this}}s.start&&!s.run?s.run=function(){return this.start(),this}:!s.start&&s.run&&(s.start=function(){return this.run(),this});var f=r.prototype.stop;s.stop=function(){var Yt=this.options;if(Yt&&Yt.animate){var he=this.animations;if(he)for(var me=0;me<he.length;me++)he[me].stop()}return f?f.call(this):this.emit("layoutstop"),this},s.destroy||(s.destroy=function(){return this}),s.cy=function(){return this._private.cy};var p=function(he){return he._private.cy},x={addEventFields:function(he,me){me.layout=he,me.cy=p(he),me.target=he},bubble:function(){return!0},parent:function(he){return p(he)}};H(s,{createEmitter:function(){return this._private.emitter=new Vo(x,this),this},emitter:function(){return this._private.emitter},on:function(he,me){return this.emitter().on(he,me),this},one:function(he,me){return this.emitter().one(he,me),this},once:function(he,me){return this.emitter().one(he,me),this},removeListener:function(he,me){return this.emitter().removeListener(he,me),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},emit:function(he,me){return this.emitter().emit(he,me),this}}),$i.eventAliasesOn(s),a=n}else if("renderer"===e&&"null"!==t&&"base"!==t){var k=R0("renderer","base"),_=k.prototype,U=r,O=r.prototype,K=function(){k.apply(this,arguments),U.apply(this,arguments)},$=K.prototype;for(var q in _){var vt=_[q];if(null!=O[q])return i(q);$[q]=vt}for(var se in O)$[se]=O[se];_.clientFunctions.forEach(function(Yt){$[Yt]=$[Yt]||function(){Ka("Renderer does not implement `renderer."+Yt+"()` on its prototype")}}),a=K}else if("__proto__"===e||"constructor"===e||"prototype"===e)return Ka(e+" is an illegal type to be registered, possibly lead to prototype pollutions");return Ze({map:D0,keys:[e,t],value:a})}function R0(e,t){return de({map:D0,keys:[e,t]})}function T2(e,t,r,a,i){return Ze({map:L0,keys:[e,t,r,a],value:i})}function S2(e,t,r,a){return de({map:L0,keys:[e,t,r,a]})}var nh=function(){return 2===arguments.length?R0.apply(null,arguments):3===arguments.length?B0.apply(null,arguments):4===arguments.length?S2.apply(null,arguments):5===arguments.length?T2.apply(null,arguments):void Ka("Invalid extension access syntax")};po.prototype.extension=nh,k2.forEach(function(e){e.extensions.forEach(function(t){B0(e.type,t.name,t.impl)})});var gl=function(){if(!(this instanceof gl))return new gl;this.length=0},Rs=gl.prototype;Rs.instanceString=function(){return"stylesheet"},Rs.selector=function(e){return this[this.length++]={selector:e,properties:[]},this},Rs.css=function(e,t){var r=this.length-1;if(Xe(e))this[r].properties.push({name:e,value:t});else if(Bt(e))for(var a=e,i=Object.keys(a),n=0;n<i.length;n++){var s=i[n],o=a[s];if(null!=o){var u=En.properties[s]||En.properties[qe(s)];null!=u&&this[r].properties.push({name:u.name,value:o})}}return this},Rs.style=Rs.css,Rs.generateStyle=function(e){var t=new En(e);return this.appendToStyle(t)},Rs.appendToStyle=function(e){for(var t=0;t<this.length;t++){var r=this[t],i=r.properties;e.selector(r.selector);for(var n=0;n<i.length;n++){var s=i[n];e.css(s.name,s.value)}}return e};var Ps=function(t){return void 0===t&&(t={}),Bt(t)?new po(t):Xe(t)?nh.apply(nh,arguments):void 0};Ps.use=function(e){var t=Array.prototype.slice.call(arguments,1);return t.unshift(Ps),e.apply(null,t),this},Ps.warnings=function(e){return Ja(e)},Ps.version="3.33.1",Ps.stylesheet=Ps.Stylesheet=gl},18617:(ri,Er,P)=>{"use strict";P.r(Er),P.d(Er,{diagram:()=>nr});var lt=P(89204),ie=P(80525),L=P(67040),D=P(52052),Mt=P(79006),ut=P(32303),G=P(62233),w=P(40622),Lt={NORMAL:0,REVERSE:1,HIGHLIGHT:2,MERGE:3,CHERRY_PICK:4},At=Mt.UI.gitGraph,Ge=(0,ut.K2)(()=>(0,D.$t)({...At,...(0,Mt.zj)().gitGraph}),"getConfig"),bt=new L.m(()=>{const te=Ge(),ne=te.mainBranchName,be=te.mainBranchOrder;return{mainBranchName:ne,commits:new Map,head:null,branchConfig:new Map([[ne,{name:ne,order:be}]]),branches:new Map([[ne,null]]),currBranch:ne,direction:"LR",seq:0,options:{}}});function Gt(){return(0,D.yT)({length:7})}function j(te,ne){const be=Object.create(null);return te.reduce((ar,g)=>{const y=ne(g);return be[y]||(be[y]=!0,ar.push(g)),ar},[])}(0,ut.K2)(Gt,"getID"),(0,ut.K2)(j,"uniqBy");var hr=(0,ut.K2)(function(te){bt.records.direction=te},"setDirection"),ze=(0,ut.K2)(function(te){ut.Rm.debug("options str",te),te=te?.trim(),te=te||"{}";try{bt.records.options=JSON.parse(te)}catch(ne){ut.Rm.error("error while parsing gitGraph options",ne.message)}},"setOptions"),vr=(0,ut.K2)(function(){return bt.records.options},"getOptions"),Wr=(0,ut.K2)(function(te){let ne=te.msg,be=te.id;const ar=te.type;let g=te.tags;ut.Rm.info("commit",ne,be,ar,g),ut.Rm.debug("Entering commit:",ne,be,ar,g);const y=Ge();be=Mt.Y2.sanitizeText(be,y),ne=Mt.Y2.sanitizeText(ne,y),g=g?.map(M=>Mt.Y2.sanitizeText(M,y));const E={id:be||bt.records.seq+"-"+Gt(),message:ne,seq:bt.records.seq++,type:ar??Lt.NORMAL,tags:g??[],parents:null==bt.records.head?[]:[bt.records.head.id],branch:bt.records.currBranch};bt.records.head=E,ut.Rm.info("main branch",y.mainBranchName),bt.records.commits.has(E.id)&&ut.Rm.warn(`Commit ID ${E.id} already exists`),bt.records.commits.set(E.id,E),bt.records.branches.set(bt.records.currBranch,E.id),ut.Rm.debug("in pushCommit "+E.id)},"commit"),Br=(0,ut.K2)(function(te){let ne=te.name;const be=te.order;if(ne=Mt.Y2.sanitizeText(ne,Ge()),bt.records.branches.has(ne))throw new Error(`Trying to create an existing branch. (Help: Either use a new name if you want create a new branch or try using "checkout ${ne}")`);bt.records.branches.set(ne,null!=bt.records.head?bt.records.head.id:null),bt.records.branchConfig.set(ne,{name:ne,order:be}),zr(ne),ut.Rm.debug("in createBranch")},"branch"),Gr=(0,ut.K2)(te=>{let ne=te.branch,be=te.id;const ar=te.type,g=te.tags,y=Ge();ne=Mt.Y2.sanitizeText(ne,y),be&&(be=Mt.Y2.sanitizeText(be,y));const E=bt.records.branches.get(bt.records.currBranch),M=bt.records.branches.get(ne),m=E?bt.records.commits.get(E):void 0,A=M?bt.records.commits.get(M):void 0;if(m&&A&&m.branch===ne)throw new Error(`Cannot merge branch '${ne}' into itself.`);if(bt.records.currBranch===ne){const C=new Error('Incorrect usage of "merge". Cannot merge a branch to itself');throw C.hash={text:`merge ${ne}`,token:`merge ${ne}`,expected:["branch abc"]},C}if(void 0===m||!m){const C=new Error(`Incorrect usage of "merge". Current branch (${bt.records.currBranch})has no commits`);throw C.hash={text:`merge ${ne}`,token:`merge ${ne}`,expected:["commit"]},C}if(!bt.records.branches.has(ne)){const C=new Error('Incorrect usage of "merge". Branch to be merged ('+ne+") does not exist");throw C.hash={text:`merge ${ne}`,token:`merge ${ne}`,expected:[`branch ${ne}`]},C}if(void 0===A||!A){const C=new Error('Incorrect usage of "merge". Branch to be merged ('+ne+") has no commits");throw C.hash={text:`merge ${ne}`,token:`merge ${ne}`,expected:['"commit"']},C}if(m===A){const C=new Error('Incorrect usage of "merge". Both branches have same head');throw C.hash={text:`merge ${ne}`,token:`merge ${ne}`,expected:["branch abc"]},C}if(be&&bt.records.commits.has(be)){const C=new Error('Incorrect usage of "merge". Commit with id:'+be+" already exists, use different custom id");throw C.hash={text:`merge ${ne} ${be} ${ar} ${g?.join(" ")}`,token:`merge ${ne} ${be} ${ar} ${g?.join(" ")}`,expected:[`merge ${ne} ${be}_UNIQUE ${ar} ${g?.join(" ")}`]},C}const v=M||"",b={id:be||`${bt.records.seq}-${Gt()}`,message:`merged branch ${ne} into ${bt.records.currBranch}`,seq:bt.records.seq++,parents:null==bt.records.head?[]:[bt.records.head.id,v],branch:bt.records.currBranch,type:Lt.MERGE,customType:ar,customId:!!be,tags:g??[]};bt.records.head=b,bt.records.commits.set(b.id,b),bt.records.branches.set(bt.records.currBranch,b.id),ut.Rm.debug(bt.records.branches),ut.Rm.debug("in mergeBranch")},"merge"),aa=(0,ut.K2)(function(te){let ne=te.id,be=te.targetId,ar=te.tags,g=te.parent;ut.Rm.debug("Entering cherryPick:",ne,be,ar);const y=Ge();if(ne=Mt.Y2.sanitizeText(ne,y),be=Mt.Y2.sanitizeText(be,y),ar=ar?.map(m=>Mt.Y2.sanitizeText(m,y)),g=Mt.Y2.sanitizeText(g,y),!ne||!bt.records.commits.has(ne)){const m=new Error('Incorrect usage of "cherryPick". Source commit id should exist and provided');throw m.hash={text:`cherryPick ${ne} ${be}`,token:`cherryPick ${ne} ${be}`,expected:["cherry-pick abc"]},m}const E=bt.records.commits.get(ne);if(void 0===E||!E)throw new Error('Incorrect usage of "cherryPick". Source commit id should exist and provided');if(g&&(!Array.isArray(E.parents)||!E.parents.includes(g)))throw new Error("Invalid operation: The specified parent commit is not an immediate parent of the cherry-picked commit.");const M=E.branch;if(E.type===Lt.MERGE&&!g)throw new Error("Incorrect usage of cherry-pick: If the source commit is a merge commit, an immediate parent commit must be specified.");if(!be||!bt.records.commits.has(be)){if(M===bt.records.currBranch){const b=new Error('Incorrect usage of "cherryPick". Source commit is already on current branch');throw b.hash={text:`cherryPick ${ne} ${be}`,token:`cherryPick ${ne} ${be}`,expected:["cherry-pick abc"]},b}const m=bt.records.branches.get(bt.records.currBranch);if(void 0===m||!m){const b=new Error(`Incorrect usage of "cherry-pick". Current branch (${bt.records.currBranch})has no commits`);throw b.hash={text:`cherryPick ${ne} ${be}`,token:`cherryPick ${ne} ${be}`,expected:["cherry-pick abc"]},b}const A=bt.records.commits.get(m);if(void 0===A||!A){const b=new Error(`Incorrect usage of "cherry-pick". Current branch (${bt.records.currBranch})has no commits`);throw b.hash={text:`cherryPick ${ne} ${be}`,token:`cherryPick ${ne} ${be}`,expected:["cherry-pick abc"]},b}const v={id:bt.records.seq+"-"+Gt(),message:`cherry-picked ${E?.message} into ${bt.records.currBranch}`,seq:bt.records.seq++,parents:null==bt.records.head?[]:[bt.records.head.id,E.id],branch:bt.records.currBranch,type:Lt.CHERRY_PICK,tags:ar?ar.filter(Boolean):[`cherry-pick:${E.id}${E.type===Lt.MERGE?`|parent:${g}`:""}`]};bt.records.head=v,bt.records.commits.set(v.id,v),bt.records.branches.set(bt.records.currBranch,v.id),ut.Rm.debug(bt.records.branches),ut.Rm.debug("in cherryPick")}},"cherryPick"),zr=(0,ut.K2)(function(te){if(te=Mt.Y2.sanitizeText(te,Ge()),!bt.records.branches.has(te)){const ne=new Error(`Trying to checkout branch which is not yet created. (Help try using "branch ${te}")`);throw ne.hash={text:`checkout ${te}`,token:`checkout ${te}`,expected:[`branch ${te}`]},ne}{bt.records.currBranch=te;const ne=bt.records.branches.get(bt.records.currBranch);bt.records.head=void 0!==ne&&ne?bt.records.commits.get(ne)??null:null}},"checkout");function Or(te,ne,be){const ar=te.indexOf(ne);-1===ar?te.push(be):te.splice(ar,1,be)}function Be(te){const ne=te.reduce((g,y)=>g.seq>y.seq?g:y,te[0]);let be="";te.forEach(function(g){be+=g===ne?"\t*":"\t|"});const ar=[be,ne.id,ne.seq];for(const g in bt.records.branches)bt.records.branches.get(g)===ne.id&&ar.push(g);if(ut.Rm.debug(ar.join(" ")),ne.parents&&2==ne.parents.length&&ne.parents[0]&&ne.parents[1]){const g=bt.records.commits.get(ne.parents[0]);Or(te,ne,g),ne.parents[1]&&te.push(bt.records.commits.get(ne.parents[1]))}else{if(0==ne.parents.length)return;if(ne.parents[0]){const g=bt.records.commits.get(ne.parents[0]);Or(te,ne,g)}}Be(te=j(te,g=>g.id))}(0,ut.K2)(Or,"upsert"),(0,ut.K2)(Be,"prettyPrintCommitHistory");var Ir=(0,ut.K2)(function(){ut.Rm.debug(bt.records.commits),Be([Se()[0]])},"prettyPrint"),Xe=(0,ut.K2)(function(){bt.reset(),(0,Mt.IU)()},"clear"),z=(0,ut.K2)(function(){return[...bt.records.branchConfig.values()].map((ne,be)=>null!=ne.order?ne:{...ne,order:parseFloat(`0.${be}`)}).sort((ne,be)=>(ne.order??0)-(be.order??0)).map(({name:ne})=>({name:ne}))},"getBranchesAsObjArray"),dt=(0,ut.K2)(function(){return bt.records.branches},"getBranches"),Bt=(0,ut.K2)(function(){return bt.records.commits},"getCommits"),Se=(0,ut.K2)(function(){const te=[...bt.records.commits.values()];return te.forEach(function(ne){ut.Rm.debug(ne.id)}),te.sort((ne,be)=>ne.seq-be.seq),te},"getCommitsArray"),ee={commitType:Lt,getConfig:Ge,setDirection:hr,setOptions:ze,getOptions:vr,commit:Wr,branch:Br,merge:Gr,cherryPick:aa,checkout:zr,prettyPrint:Ir,clear:Xe,getBranchesAsObjArray:z,getBranches:dt,getCommits:Bt,getCommitsArray:Se,getCurrentBranch:(0,ut.K2)(function(){return bt.records.currBranch},"getCurrentBranch"),getDirection:(0,ut.K2)(function(){return bt.records.direction},"getDirection"),getHead:(0,ut.K2)(function(){return bt.records.head},"getHead"),setAccTitle:Mt.SV,getAccTitle:Mt.iN,getAccDescription:Mt.m7,setAccDescription:Mt.EI,setDiagramTitle:Mt.ke,getDiagramTitle:Mt.ab},Rt=(0,ut.K2)((te,ne)=>{(0,ie.S)(te,ne),te.dir&&ne.setDirection(te.dir);for(const be of te.statements)qt(be,ne)},"populate"),qt=(0,ut.K2)((te,ne)=>{const ar={Commit:(0,ut.K2)(g=>ne.commit(V(g)),"Commit"),Branch:(0,ut.K2)(g=>ne.branch(gt(g)),"Branch"),Merge:(0,ut.K2)(g=>ne.merge(Y(g)),"Merge"),Checkout:(0,ut.K2)(g=>ne.checkout(Nt(g)),"Checkout"),CherryPicking:(0,ut.K2)(g=>ne.cherryPick(St(g)),"CherryPicking")}[te.$type];ar?ar(te):ut.Rm.error(`Unknown statement type: ${te.$type}`)},"parseStatement"),V=(0,ut.K2)(te=>({id:te.id,msg:te.message??"",type:void 0!==te.type?Lt[te.type]:Lt.NORMAL,tags:te.tags??void 0}),"parseCommit"),gt=(0,ut.K2)(te=>({name:te.name,order:te.order??0}),"parseBranch"),Y=(0,ut.K2)(te=>({branch:te.branch,id:te.id??"",type:void 0!==te.type?Lt[te.type]:void 0,tags:te.tags??void 0}),"parseMerge"),Nt=(0,ut.K2)(te=>te.branch,"parseCheckout"),St=(0,ut.K2)(te=>({id:te.id,targetId:"",tags:0===te.tags?.length?void 0:te.tags,parent:te.parent}),"parseCherryPicking"),Ut={parse:(0,ut.K2)(function(){var te=(0,lt.A)(function*(ne){const be=yield(0,G.qg)("gitGraph",ne);ut.Rm.debug(be),Rt(be,ee)});return function(ne){return te.apply(this,arguments)}}(),"parse")},ye=(0,Mt.D7)(),le=ye?.gitGraph,Tt=new Map,B=new Map,et=new Map,yt=[],it=0,rt="LR",_t=(0,ut.K2)(()=>{Tt.clear(),B.clear(),et.clear(),it=0,yt=[],rt="LR"},"clear"),ht=(0,ut.K2)(te=>{const ne=document.createElementNS("http://www.w3.org/2000/svg","text");return("string"==typeof te?te.split(/\\n|\n|<br\s*\/?>/gi):te).forEach(ar=>{const g=document.createElementNS("http://www.w3.org/2000/svg","tspan");g.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),g.setAttribute("dy","1em"),g.setAttribute("x","0"),g.setAttribute("class","row"),g.textContent=ar.trim(),ne.appendChild(g)}),ne},"drawText"),Ot=(0,ut.K2)(te=>{let ne,be,ar;return"BT"===rt?(be=(0,ut.K2)((g,y)=>g<=y,"comparisonFunc"),ar=1/0):(be=(0,ut.K2)((g,y)=>g>=y,"comparisonFunc"),ar=0),te.forEach(g=>{const y="TB"===rt||"BT"==rt?B.get(g)?.y:B.get(g)?.x;void 0!==y&&be(y,ar)&&(ne=g,ar=y)}),ne},"findClosestParent"),H=(0,ut.K2)(te=>{let ne="",be=1/0;return te.forEach(ar=>{const g=B.get(ar).y;g<=be&&(ne=ar,be=g)}),ne||void 0},"findClosestParentBT"),ot=(0,ut.K2)((te,ne,be)=>{let ar=be,g=be;const y=[];te.forEach(E=>{const M=ne.get(E);if(!M)throw new Error(`Commit not found for key ${E}`);M.parents.length?(ar=Pt(M),g=Math.max(ar,g)):y.push(M),Zt(M,ar)}),ar=g,y.forEach(E=>{pe(E,ar,be)}),te.forEach(E=>{const M=ne.get(E);if(M?.parents.length){const m=H(M.parents);ar=B.get(m).y-40,ar<=g&&(g=ar);const A=Tt.get(M.branch).pos;B.set(M.id,{x:A,y:ar-10})}})},"setParallelBTPos"),ke=(0,ut.K2)(te=>{const ne=Ot(te.parents.filter(ar=>null!==ar));if(!ne)throw new Error(`Closest parent not found for commit ${te.id}`);const be=B.get(ne)?.y;if(void 0===be)throw new Error(`Closest parent position not found for commit ${te.id}`);return be},"findClosestParentPos"),Pt=(0,ut.K2)(te=>ke(te)+40,"calculateCommitPosition"),Zt=(0,ut.K2)((te,ne)=>{const be=Tt.get(te.branch);if(!be)throw new Error(`Branch not found for commit ${te.id}`);const ar=be.pos,g=ne+10;return B.set(te.id,{x:ar,y:g}),{x:ar,y:g}},"setCommitPosition"),pe=(0,ut.K2)((te,ne,be)=>{const ar=Tt.get(te.branch);if(!ar)throw new Error(`Branch not found for commit ${te.id}`);B.set(te.id,{x:ar.pos,y:ne+be})},"setRootPosition"),Re=(0,ut.K2)((te,ne,be,ar,g,y)=>{if(y===Lt.HIGHLIGHT)te.append("rect").attr("x",be.x-10).attr("y",be.y-10).attr("width",20).attr("height",20).attr("class",`commit ${ne.id} commit-highlight${g%8} ${ar}-outer`),te.append("rect").attr("x",be.x-6).attr("y",be.y-6).attr("width",12).attr("height",12).attr("class",`commit ${ne.id} commit${g%8} ${ar}-inner`);else if(y===Lt.CHERRY_PICK)te.append("circle").attr("cx",be.x).attr("cy",be.y).attr("r",10).attr("class",`commit ${ne.id} ${ar}`),te.append("circle").attr("cx",be.x-3).attr("cy",be.y+2).attr("r",2.75).attr("fill","#fff").attr("class",`commit ${ne.id} ${ar}`),te.append("circle").attr("cx",be.x+3).attr("cy",be.y+2).attr("r",2.75).attr("fill","#fff").attr("class",`commit ${ne.id} ${ar}`),te.append("line").attr("x1",be.x+3).attr("y1",be.y+1).attr("x2",be.x).attr("y2",be.y-5).attr("stroke","#fff").attr("class",`commit ${ne.id} ${ar}`),te.append("line").attr("x1",be.x-3).attr("y1",be.y+1).attr("x2",be.x).attr("y2",be.y-5).attr("stroke","#fff").attr("class",`commit ${ne.id} ${ar}`);else{const E=te.append("circle");if(E.attr("cx",be.x),E.attr("cy",be.y),E.attr("r",ne.type===Lt.MERGE?9:10),E.attr("class",`commit ${ne.id} commit${g%8}`),y===Lt.MERGE){const M=te.append("circle");M.attr("cx",be.x),M.attr("cy",be.y),M.attr("r",6),M.attr("class",`commit ${ar} ${ne.id} commit${g%8}`)}y===Lt.REVERSE&&te.append("path").attr("d",`M ${be.x-5},${be.y-5}L${be.x+5},${be.y+5}M${be.x-5},${be.y+5}L${be.x+5},${be.y-5}`).attr("class",`commit ${ar} ${ne.id} commit${g%8}`)}},"drawCommitBullet"),Ze=(0,ut.K2)((te,ne,be,ar)=>{if(ne.type!==Lt.CHERRY_PICK&&(ne.customId&&ne.type===Lt.MERGE||ne.type!==Lt.MERGE)&&le?.showCommitLabel){const g=te.append("g"),y=g.insert("rect").attr("class","commit-label-bkg"),E=g.append("text").attr("x",ar).attr("y",be.y+25).attr("class","commit-label").text(ne.id),M=E.node()?.getBBox();M&&(y.attr("x",be.posWithOffset-M.width/2-2).attr("y",be.y+13.5).attr("width",M.width+4).attr("height",M.height+4),"TB"===rt||"BT"===rt?(y.attr("x",be.x-(M.width+16+5)).attr("y",be.y-12),E.attr("x",be.x-(M.width+16)).attr("y",be.y+M.height-12)):E.attr("x",be.posWithOffset-M.width/2),le.rotateCommitLabel)&&("TB"===rt||"BT"===rt?(E.attr("transform","rotate(-45, "+be.x+", "+be.y+")"),y.attr("transform","rotate(-45, "+be.x+", "+be.y+")")):g.attr("transform","translate("+(-7.5-(M.width+10)/25*9.5)+", "+(10+M.width/25*8.5)+") rotate(-45, "+ar+", "+be.y+")"))}},"drawCommitLabel"),de=(0,ut.K2)((te,ne,be,ar)=>{if(ne.tags.length>0){let g=0,y=0,E=0;const M=[];for(const m of ne.tags.reverse()){const A=te.insert("polygon"),v=te.append("circle"),b=te.append("text").attr("y",be.y-16-g).attr("class","tag-label").text(m),C=b.node()?.getBBox();if(!C)throw new Error("Tag bbox not found");y=Math.max(y,C.width),E=Math.max(E,C.height),b.attr("x",be.posWithOffset-C.width/2),M.push({tag:b,hole:v,rect:A,yOffset:g}),g+=20}for(const{tag:m,hole:A,rect:v,yOffset:b}of M){const C=E/2,R=be.y-19.2-b;if(v.attr("class","tag-label-bkg").attr("points",`\n      ${ar-y/2-2},${R+2}  \n      ${ar-y/2-2},${R-2}\n      ${be.posWithOffset-y/2-4},${R-C-2}\n      ${be.posWithOffset+y/2+4},${R-C-2}\n      ${be.posWithOffset+y/2+4},${R+C+2}\n      ${be.posWithOffset-y/2-4},${R+C+2}`),A.attr("cy",R).attr("cx",ar-y/2+2).attr("r",1.5).attr("class","tag-hole"),"TB"===rt||"BT"===rt){const Q=ar+b;v.attr("class","tag-label-bkg").attr("points",`\n        ${be.x},${Q+2}\n        ${be.x},${Q-2}\n        ${be.x+10},${Q-C-2}\n        ${be.x+10+y+4},${Q-C-2}\n        ${be.x+10+y+4},${Q+C+2}\n        ${be.x+10},${Q+C+2}`).attr("transform","translate(12,12) rotate(45, "+be.x+","+ar+")"),A.attr("cx",be.x+2).attr("cy",Q).attr("transform","translate(12,12) rotate(45, "+be.x+","+ar+")"),m.attr("x",be.x+5).attr("y",Q+3).attr("transform","translate(14,14) rotate(45, "+be.x+","+ar+")")}}}},"drawCommitTags"),yr=(0,ut.K2)(te=>{switch(te.customType??te.type){case Lt.NORMAL:return"commit-normal";case Lt.REVERSE:return"commit-reverse";case Lt.HIGHLIGHT:return"commit-highlight";case Lt.MERGE:return"commit-merge";case Lt.CHERRY_PICK:return"commit-cherry-pick";default:return"commit-normal"}},"getCommitClassType"),mr=(0,ut.K2)((te,ne,be,ar)=>{const g={x:0,y:0};if(!(te.parents.length>0))return"TB"===ne?30:"BT"===ne?(ar.get(te.id)??g).y-40:0;{const y=Ot(te.parents);if(y){const E=ar.get(y)??g;return"TB"===ne?E.y+40:"BT"===ne?(ar.get(te.id)??g).y-40:E.x+40}}return 0},"calculatePosition"),Wt=(0,ut.K2)((te,ne,be)=>{const ar="BT"===rt&&be?ne:ne+10,g="TB"===rt||"BT"===rt?ar:Tt.get(te.branch)?.pos,y="TB"===rt||"BT"===rt?Tt.get(te.branch)?.pos:ar;if(void 0===y||void 0===g)throw new Error(`Position were undefined for commit ${te.id}`);return{x:y,y:g,posWithOffset:ar}},"getCommitPosition"),we=(0,ut.K2)((te,ne,be)=>{if(!le)throw new Error("GitGraph config not found");const ar=te.append("g").attr("class","commit-bullets"),g=te.append("g").attr("class","commit-labels");let y="TB"===rt||"BT"===rt?30:0;const E=[...ne.keys()],M=le?.parallelCommits??!1;let A=E.sort((0,ut.K2)((v,b)=>{const C=ne.get(v)?.seq,R=ne.get(b)?.seq;return void 0!==C&&void 0!==R?C-R:0},"sortKeys"));"BT"===rt&&(M&&ot(A,ne,y),A=A.reverse()),A.forEach(v=>{const b=ne.get(v);if(!b)throw new Error(`Commit not found for key ${v}`);M&&(y=mr(b,rt,y,B));const C=Wt(b,y,M);if(be){const R=yr(b),Q=b.customType??b.type,mt=Tt.get(b.branch)?.index??0;Re(ar,b,C,R,mt,Q),Ze(g,b,C,y),de(g,b,C,y)}B.set(b.id,"TB"===rt||"BT"===rt?{x:C.x,y:C.posWithOffset}:{x:C.posWithOffset,y:C.y}),y="BT"===rt&&M?y+40:y+40+10,y>it&&(it=y)})},"drawCommits"),sr=(0,ut.K2)((te,ne,be,ar,g)=>{const E=("TB"===rt||"BT"===rt?be.x<ar.x:be.y<ar.y)?ne.branch:te.branch,M=(0,ut.K2)(A=>A.branch===E,"isOnBranchToGetCurve"),m=(0,ut.K2)(A=>A.seq>te.seq&&A.seq<ne.seq,"isBetweenCommits");return[...g.values()].some(A=>m(A)&&M(A))},"shouldRerouteArrow"),ve=(0,ut.K2)((te,ne,be=0)=>{const ar=te+Math.abs(te-ne)/2;if(be>5)return ar;if(yt.every(E=>Math.abs(E-ar)>=10))return yt.push(ar),ar;const y=Math.abs(te-ne);return ve(te,ne-y/5,be+1)},"findLane"),ce=(0,ut.K2)((te,ne,be,ar)=>{const g=B.get(ne.id),y=B.get(be.id);if(void 0===g||void 0===y)throw new Error(`Commit positions not found for commits ${ne.id} and ${be.id}`);const E=sr(ne,be,g,y,ar);let C,M="",m="",A=0,v=0,b=Tt.get(be.branch)?.index;if(be.type===Lt.MERGE&&ne.id!==be.parents[0]&&(b=Tt.get(ne.branch)?.index),E){M="A 10 10, 0, 0, 0,",m="A 10 10, 0, 0, 1,",A=10,v=10;const R=g.y<y.y?ve(g.y,y.y):ve(y.y,g.y),Q=g.x<y.x?ve(g.x,y.x):ve(y.x,g.x);"TB"===rt?g.x<y.x?C=`M ${g.x} ${g.y} L ${Q-A} ${g.y} ${m} ${Q} ${g.y+v} L ${Q} ${y.y-A} ${M} ${Q+v} ${y.y} L ${y.x} ${y.y}`:(b=Tt.get(ne.branch)?.index,C=`M ${g.x} ${g.y} L ${Q+A} ${g.y} ${M} ${Q} ${g.y+v} L ${Q} ${y.y-A} ${m} ${Q-v} ${y.y} L ${y.x} ${y.y}`):"BT"===rt?g.x<y.x?C=`M ${g.x} ${g.y} L ${Q-A} ${g.y} ${M} ${Q} ${g.y-v} L ${Q} ${y.y+A} ${m} ${Q+v} ${y.y} L ${y.x} ${y.y}`:(b=Tt.get(ne.branch)?.index,C=`M ${g.x} ${g.y} L ${Q+A} ${g.y} ${m} ${Q} ${g.y-v} L ${Q} ${y.y+A} ${M} ${Q-v} ${y.y} L ${y.x} ${y.y}`):g.y<y.y?C=`M ${g.x} ${g.y} L ${g.x} ${R-A} ${M} ${g.x+v} ${R} L ${y.x-A} ${R} ${m} ${y.x} ${R+v} L ${y.x} ${y.y}`:(b=Tt.get(ne.branch)?.index,C=`M ${g.x} ${g.y} L ${g.x} ${R+A} ${m} ${g.x+v} ${R} L ${y.x-A} ${R} ${M} ${y.x} ${R-v} L ${y.x} ${y.y}`)}else M="A 20 20, 0, 0, 0,",m="A 20 20, 0, 0, 1,",A=20,v=20,"TB"===rt?(g.x<y.x&&(C=be.type===Lt.MERGE&&ne.id!==be.parents[0]?`M ${g.x} ${g.y} L ${g.x} ${y.y-A} ${M} ${g.x+v} ${y.y} L ${y.x} ${y.y}`:`M ${g.x} ${g.y} L ${y.x-A} ${g.y} ${m} ${y.x} ${g.y+v} L ${y.x} ${y.y}`),g.x>y.x&&(M="A 20 20, 0, 0, 0,",m="A 20 20, 0, 0, 1,",A=20,v=20,C=be.type===Lt.MERGE&&ne.id!==be.parents[0]?`M ${g.x} ${g.y} L ${g.x} ${y.y-A} ${m} ${g.x-v} ${y.y} L ${y.x} ${y.y}`:`M ${g.x} ${g.y} L ${y.x+A} ${g.y} ${M} ${y.x} ${g.y+v} L ${y.x} ${y.y}`),g.x===y.x&&(C=`M ${g.x} ${g.y} L ${y.x} ${y.y}`)):"BT"===rt?(g.x<y.x&&(C=be.type===Lt.MERGE&&ne.id!==be.parents[0]?`M ${g.x} ${g.y} L ${g.x} ${y.y+A} ${m} ${g.x+v} ${y.y} L ${y.x} ${y.y}`:`M ${g.x} ${g.y} L ${y.x-A} ${g.y} ${M} ${y.x} ${g.y-v} L ${y.x} ${y.y}`),g.x>y.x&&(M="A 20 20, 0, 0, 0,",m="A 20 20, 0, 0, 1,",A=20,v=20,C=be.type===Lt.MERGE&&ne.id!==be.parents[0]?`M ${g.x} ${g.y} L ${g.x} ${y.y+A} ${M} ${g.x-v} ${y.y} L ${y.x} ${y.y}`:`M ${g.x} ${g.y} L ${y.x-A} ${g.y} ${M} ${y.x} ${g.y-v} L ${y.x} ${y.y}`),g.x===y.x&&(C=`M ${g.x} ${g.y} L ${y.x} ${y.y}`)):(g.y<y.y&&(C=be.type===Lt.MERGE&&ne.id!==be.parents[0]?`M ${g.x} ${g.y} L ${y.x-A} ${g.y} ${m} ${y.x} ${g.y+v} L ${y.x} ${y.y}`:`M ${g.x} ${g.y} L ${g.x} ${y.y-A} ${M} ${g.x+v} ${y.y} L ${y.x} ${y.y}`),g.y>y.y&&(C=be.type===Lt.MERGE&&ne.id!==be.parents[0]?`M ${g.x} ${g.y} L ${y.x-A} ${g.y} ${M} ${y.x} ${g.y-v} L ${y.x} ${y.y}`:`M ${g.x} ${g.y} L ${g.x} ${y.y+A} ${m} ${g.x+v} ${y.y} L ${y.x} ${y.y}`),g.y===y.y&&(C=`M ${g.x} ${g.y} L ${y.x} ${y.y}`));if(void 0===C)throw new Error("Line definition not found");te.append("path").attr("d",C).attr("class","arrow arrow"+b%8)},"drawArrow"),Ee=(0,ut.K2)((te,ne)=>{const be=te.append("g").attr("class","commit-arrows");[...ne.keys()].forEach(ar=>{const g=ne.get(ar);g.parents&&g.parents.length>0&&g.parents.forEach(y=>{ce(be,ne.get(y),g,ne)})})},"drawArrows"),Ae=(0,ut.K2)((te,ne)=>{const be=te.append("g");ne.forEach((ar,g)=>{const y=g%8,E=Tt.get(ar.name)?.pos;if(void 0===E)throw new Error(`Position not found for branch ${ar.name}`);const M=be.append("line");M.attr("x1",0),M.attr("y1",E),M.attr("x2",it),M.attr("y2",E),M.attr("class","branch branch"+y),"TB"===rt?(M.attr("y1",30),M.attr("x1",E),M.attr("y2",it),M.attr("x2",E)):"BT"===rt&&(M.attr("y1",it),M.attr("x1",E),M.attr("y2",30),M.attr("x2",E)),yt.push(E);const A=ht(ar.name),v=be.insert("rect"),C=be.insert("g").attr("class","branchLabel").insert("g").attr("class","label branch-label"+y);C.node().appendChild(A);const R=A.getBBox();v.attr("class","branchLabelBkg label"+y).attr("rx",4).attr("ry",4).attr("x",-R.width-4-(!0===le?.rotateCommitLabel?30:0)).attr("y",-R.height/2+8).attr("width",R.width+18).attr("height",R.height+4),C.attr("transform","translate("+(-R.width-14-(!0===le?.rotateCommitLabel?30:0))+", "+(E-R.height/2-1)+")"),"TB"===rt?(v.attr("x",E-R.width/2-10).attr("y",0),C.attr("transform","translate("+(E-R.width/2-5)+", 0)")):"BT"===rt?(v.attr("x",E-R.width/2-10).attr("y",it),C.attr("transform","translate("+(E-R.width/2-5)+", "+it+")")):v.attr("transform","translate(-19, "+(E-R.height/2)+")")})},"drawBranches"),er=(0,ut.K2)(function(te,ne,be,ar,g){return Tt.set(te,{pos:ne,index:be}),ne+(50+(g?40:0)+("TB"===rt||"BT"===rt?ar.width/2:0))},"setBranchPosition"),nr={parser:Ut,db:ee,renderer:{draw:(0,ut.K2)(function(te,ne,be,ar){if(_t(),ut.Rm.debug("in gitgraph renderer",te+"\n","id:",ne,be),!le)throw new Error("GitGraph config not found");const g=le.rotateCommitLabel??!1,y=ar.db;et=y.getCommits();const E=y.getBranchesAsObjArray();rt=y.getDirection();const M=(0,w.Ltv)(`[id="${ne}"]`);let m=0;E.forEach((A,v)=>{const b=ht(A.name),C=M.append("g"),R=C.insert("g").attr("class","branchLabel"),Q=R.insert("g").attr("class","label branch-label");Q.node()?.appendChild(b);const mt=b.getBBox();m=er(A.name,m,v,mt,g),Q.remove(),R.remove(),C.remove()}),we(M,et,!1),le.showBranches&&Ae(M,E),Ee(M,et),we(M,et,!0),D._K.insertTitle(M,"gitTitleText",le.titleTopMargin??0,y.getDiagramTitle()),(0,Mt.mj)(void 0,M,le.diagramPadding,le.useMaxWidth)},"draw")},styles:(0,ut.K2)(te=>`\n  .commit-id,\n  .commit-msg,\n  .branch-label {\n    fill: lightgrey;\n    color: lightgrey;\n    font-family: 'trebuchet ms', verdana, arial, sans-serif;\n    font-family: var(--mermaid-font-family);\n  }\n  ${[0,1,2,3,4,5,6,7].map(ne=>`\n        .branch-label${ne} { fill: ${te["gitBranchLabel"+ne]}; }\n        .commit${ne} { stroke: ${te["git"+ne]}; fill: ${te["git"+ne]}; }\n        .commit-highlight${ne} { stroke: ${te["gitInv"+ne]}; fill: ${te["gitInv"+ne]}; }\n        .label${ne}  { fill: ${te["git"+ne]}; }\n        .arrow${ne} { stroke: ${te["git"+ne]}; }\n        `).join("\n")}\n\n  .branch {\n    stroke-width: 1;\n    stroke: ${te.lineColor};\n    stroke-dasharray: 2;\n  }\n  .commit-label { font-size: ${te.commitLabelFontSize}; fill: ${te.commitLabelColor};}\n  .commit-label-bkg { font-size: ${te.commitLabelFontSize}; fill: ${te.commitLabelBackground}; opacity: 0.5; }\n  .tag-label { font-size: ${te.tagLabelFontSize}; fill: ${te.tagLabelColor};}\n  .tag-label-bkg { fill: ${te.tagLabelBackground}; stroke: ${te.tagLabelBorder}; }\n  .tag-hole { fill: ${te.textColor}; }\n\n  .commit-merge {\n    stroke: ${te.primaryColor};\n    fill: ${te.primaryColor};\n  }\n  .commit-reverse {\n    stroke: ${te.primaryColor};\n    fill: ${te.primaryColor};\n    stroke-width: 3;\n  }\n  .commit-highlight-outer {\n  }\n  .commit-highlight-inner {\n    stroke: ${te.primaryColor};\n    fill: ${te.primaryColor};\n  }\n\n  .arrow { stroke-width: 8; stroke-linecap: round; fill: none}\n  .gitTitleText {\n    text-anchor: middle;\n    font-size: 18px;\n    fill: ${te.textColor};\n  }\n`,"getStyles")}},19753:(ri,Er,P)=>{"use strict";P.d(Er,{Fr:()=>w,GX:()=>G,KX:()=>ut,WW:()=>D,ue:()=>L});var lt=P(79006),ie=P(32303),L=(0,ie.K2)(At=>{const{handDrawnSeed:Ge}=(0,lt.D7)();return{fill:At,hachureAngle:120,hachureGap:4,fillWeight:2,roughness:.7,stroke:At,seed:Ge}},"solidStateFill"),D=(0,ie.K2)(At=>{const Ge=Mt([...At.cssCompiledStyles||[],...At.cssStyles||[],...At.labelStyle||[]]);return{stylesMap:Ge,stylesArray:[...Ge]}},"compileStyles"),Mt=(0,ie.K2)(At=>{const Ge=new Map;return At.forEach(bt=>{const[Gt,j]=bt.split(":");Ge.set(Gt.trim(),j?.trim())}),Ge},"styles2Map"),ut=(0,ie.K2)(At=>"color"===At||"font-size"===At||"font-family"===At||"font-weight"===At||"font-style"===At||"text-decoration"===At||"text-align"===At||"text-transform"===At||"line-height"===At||"letter-spacing"===At||"word-spacing"===At||"text-shadow"===At||"text-overflow"===At||"white-space"===At||"word-wrap"===At||"word-break"===At||"overflow-wrap"===At||"hyphens"===At,"isLabelStyle"),G=(0,ie.K2)(At=>{const{stylesArray:Ge}=D(At),bt=[],Gt=[],j=[],hr=[];return Ge.forEach(ze=>{const vr=ze[0];ut(vr)?bt.push(ze.join(":")+" !important"):(Gt.push(ze.join(":")+" !important"),vr.includes("stroke")&&j.push(ze.join(":")+" !important"),"fill"===vr&&hr.push(ze.join(":")+" !important"))}),{labelStyles:bt.join(";"),nodeStyles:Gt.join(";"),stylesArray:Ge,borderStyles:j,backgroundStyles:hr}},"styles2String"),w=(0,ie.K2)((At,Ge)=>{const{themeVariables:bt,handDrawnSeed:Gt}=(0,lt.D7)(),{nodeBorder:j,mainBkg:hr}=bt,{stylesMap:ze}=D(At);return Object.assign({roughness:.7,fill:ze.get("fill")||hr,fillStyle:"hachure",fillWeight:4,hachureGap:5.2,stroke:ze.get("stroke")||j,seed:Gt,strokeWidth:ze.get("stroke-width")?.replace("px","")||1.3,fillLineDash:[0,0],strokeLineDash:Lt(ze.get("stroke-dasharray"))},Ge)},"userNodeOverrides"),Lt=(0,ie.K2)(At=>{if(!At)return[0,0];const Ge=At.trim().split(/\s+/).map(Number);if(1===Ge.length){const j=isNaN(Ge[0])?0:Ge[0];return[j,j]}return[isNaN(Ge[0])?0:Ge[0],isNaN(Ge[1])?0:Ge[1]]},"getStrokeDashArray")},24715:(ri,Er,P)=>{"use strict";P.d(Er,{H:()=>J,r:()=>wt});var lt=P(32303);function ie(l){return typeof l>"u"||null===l}function L(l){return"object"==typeof l&&null!==l}function D(l){return Array.isArray(l)?l:ie(l)?[]:[l]}function Mt(l,T){var F,st,xt,Me;if(T)for(F=0,st=(Me=Object.keys(T)).length;F<st;F+=1)l[xt=Me[F]]=T[xt];return l}function ut(l,T){var st,F="";for(st=0;st<T;st+=1)F+=l;return F}function G(l){return 0===l&&Number.NEGATIVE_INFINITY===1/l}(0,lt.K2)(ie,"isNothing"),(0,lt.K2)(L,"isObject"),(0,lt.K2)(D,"toArray"),(0,lt.K2)(Mt,"extend"),(0,lt.K2)(ut,"repeat"),(0,lt.K2)(G,"isNegativeZero");var j={isNothing:ie,isObject:L,toArray:D,repeat:ut,isNegativeZero:G,extend:Mt};function hr(l,T){var F="",st=l.reason||"(unknown reason)";return l.mark?(l.mark.name&&(F+='in "'+l.mark.name+'" '),F+="("+(l.mark.line+1)+":"+(l.mark.column+1)+")",!T&&l.mark.snippet&&(F+="\n\n"+l.mark.snippet),st+" "+F):st}function ze(l,T){Error.call(this),this.name="YAMLException",this.reason=l,this.mark=T,this.message=hr(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack||""}(0,lt.K2)(hr,"formatError"),(0,lt.K2)(ze,"YAMLException$1"),(ze.prototype=Object.create(Error.prototype)).constructor=ze,ze.prototype.toString=(0,lt.K2)(function(T){return this.name+": "+hr(this,T)},"toString");var vr=ze;function Wr(l,T,F,st,xt){var Me="",Qt="",Ue=Math.floor(xt/2)-1;return st-T>Ue&&(T=st-Ue+(Me=" ... ").length),F-st>Ue&&(F=st+Ue-(Qt=" ...").length),{str:Me+l.slice(T,F).replace(/\t/g,"\u2192")+Qt,pos:st-T+Me.length}}function Br(l,T){return j.repeat(" ",T-l.length)+l}function Gr(l,T){if(T=Object.create(T||null),!l.buffer)return null;T.maxLength||(T.maxLength=79),"number"!=typeof T.indent&&(T.indent=1),"number"!=typeof T.linesBefore&&(T.linesBefore=3),"number"!=typeof T.linesAfter&&(T.linesAfter=2);for(var Me,F=/\r?\n|\r|\0/g,st=[0],xt=[],Qt=-1;Me=F.exec(l.buffer);)xt.push(Me.index),st.push(Me.index+Me[0].length),l.position<=Me.index&&Qt<0&&(Qt=st.length-2);Qt<0&&(Qt=st.length-1);var xr,Sr,Ue="",ta=Math.min(l.line+T.linesAfter,xt.length).toString().length,Pr=T.maxLength-(T.indent+ta+3);for(xr=1;xr<=T.linesBefore&&!(Qt-xr<0);xr++)Sr=Wr(l.buffer,st[Qt-xr],xt[Qt-xr],l.position-(st[Qt]-st[Qt-xr]),Pr),Ue=j.repeat(" ",T.indent)+Br((l.line-xr+1).toString(),ta)+" | "+Sr.str+"\n"+Ue;for(Sr=Wr(l.buffer,st[Qt],xt[Qt],l.position,Pr),Ue+=j.repeat(" ",T.indent)+Br((l.line+1).toString(),ta)+" | "+Sr.str+"\n",Ue+=j.repeat("-",T.indent+ta+3+Sr.pos)+"^\n",xr=1;xr<=T.linesAfter&&!(Qt+xr>=xt.length);xr++)Sr=Wr(l.buffer,st[Qt+xr],xt[Qt+xr],l.position-(st[Qt]-st[Qt+xr]),Pr),Ue+=j.repeat(" ",T.indent)+Br((l.line+xr+1).toString(),ta)+" | "+Sr.str+"\n";return Ue.replace(/\n$/,"")}(0,lt.K2)(Wr,"getLine"),(0,lt.K2)(Br,"padStart"),(0,lt.K2)(Gr,"makeSnippet");var aa=Gr,zr=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],Or=["scalar","sequence","mapping"];function Be(l){var T={};return null!==l&&Object.keys(l).forEach(function(F){l[F].forEach(function(st){T[String(st)]=F})}),T}function Ir(l,T){if(T=T||{},Object.keys(T).forEach(function(F){if(-1===zr.indexOf(F))throw new vr('Unknown option "'+F+'" is met in definition of "'+l+'" YAML type.')}),this.options=T,this.tag=l,this.kind=T.kind||null,this.resolve=T.resolve||function(){return!0},this.construct=T.construct||function(F){return F},this.instanceOf=T.instanceOf||null,this.predicate=T.predicate||null,this.represent=T.represent||null,this.representName=T.representName||null,this.defaultStyle=T.defaultStyle||null,this.multi=T.multi||!1,this.styleAliases=Be(T.styleAliases||null),-1===Or.indexOf(this.kind))throw new vr('Unknown kind "'+this.kind+'" is specified for "'+l+'" YAML type.')}(0,lt.K2)(Be,"compileStyleAliases"),(0,lt.K2)(Ir,"Type$1");var Xe=Ir;function z(l,T){var F=[];return l[T].forEach(function(st){var xt=F.length;F.forEach(function(Me,Qt){Me.tag===st.tag&&Me.kind===st.kind&&Me.multi===st.multi&&(xt=Qt)}),F[xt]=st}),F}function dt(){var T,F,l={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}};function st(xt){xt.multi?(l.multi[xt.kind].push(xt),l.multi.fallback.push(xt)):l[xt.kind][xt.tag]=l.fallback[xt.tag]=xt}for((0,lt.K2)(st,"collectType"),T=0,F=arguments.length;T<F;T+=1)arguments[T].forEach(st);return l}function Bt(l){return this.extend(l)}(0,lt.K2)(z,"compileList"),(0,lt.K2)(dt,"compileMap"),(0,lt.K2)(Bt,"Schema$1"),Bt.prototype.extend=(0,lt.K2)(function(T){var F=[],st=[];if(T instanceof Xe)st.push(T);else if(Array.isArray(T))st=st.concat(T);else{if(!T||!Array.isArray(T.implicit)&&!Array.isArray(T.explicit))throw new vr("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");T.implicit&&(F=F.concat(T.implicit)),T.explicit&&(st=st.concat(T.explicit))}F.forEach(function(Me){if(!(Me instanceof Xe))throw new vr("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(Me.loadKind&&"scalar"!==Me.loadKind)throw new vr("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(Me.multi)throw new vr("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),st.forEach(function(Me){if(!(Me instanceof Xe))throw new vr("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var xt=Object.create(Bt.prototype);return xt.implicit=(this.implicit||[]).concat(F),xt.explicit=(this.explicit||[]).concat(st),xt.compiledImplicit=z(xt,"implicit"),xt.compiledExplicit=z(xt,"explicit"),xt.compiledTypeMap=dt(xt.compiledImplicit,xt.compiledExplicit),xt},"extend");var ee=new Bt({explicit:[new Xe("tag:yaml.org,2002:str",{kind:"scalar",construct:(0,lt.K2)(function(l){return null!==l?l:""},"construct")}),new Xe("tag:yaml.org,2002:seq",{kind:"sequence",construct:(0,lt.K2)(function(l){return null!==l?l:[]},"construct")}),new Xe("tag:yaml.org,2002:map",{kind:"mapping",construct:(0,lt.K2)(function(l){return null!==l?l:{}},"construct")})]});function Rt(l){if(null===l)return!0;var T=l.length;return 1===T&&"~"===l||4===T&&("null"===l||"Null"===l||"NULL"===l)}function qt(){return null}function V(l){return null===l}(0,lt.K2)(Rt,"resolveYamlNull"),(0,lt.K2)(qt,"constructYamlNull"),(0,lt.K2)(V,"isNull");var gt=new Xe("tag:yaml.org,2002:null",{kind:"scalar",resolve:Rt,construct:qt,predicate:V,represent:{canonical:(0,lt.K2)(function(){return"~"},"canonical"),lowercase:(0,lt.K2)(function(){return"null"},"lowercase"),uppercase:(0,lt.K2)(function(){return"NULL"},"uppercase"),camelcase:(0,lt.K2)(function(){return"Null"},"camelcase"),empty:(0,lt.K2)(function(){return""},"empty")},defaultStyle:"lowercase"});function Y(l){if(null===l)return!1;var T=l.length;return 4===T&&("true"===l||"True"===l||"TRUE"===l)||5===T&&("false"===l||"False"===l||"FALSE"===l)}function Nt(l){return"true"===l||"True"===l||"TRUE"===l}function St(l){return"[object Boolean]"===Object.prototype.toString.call(l)}(0,lt.K2)(Y,"resolveYamlBoolean"),(0,lt.K2)(Nt,"constructYamlBoolean"),(0,lt.K2)(St,"isBoolean");var Ut=new Xe("tag:yaml.org,2002:bool",{kind:"scalar",resolve:Y,construct:Nt,predicate:St,represent:{lowercase:(0,lt.K2)(function(l){return l?"true":"false"},"lowercase"),uppercase:(0,lt.K2)(function(l){return l?"TRUE":"FALSE"},"uppercase"),camelcase:(0,lt.K2)(function(l){return l?"True":"False"},"camelcase")},defaultStyle:"lowercase"});function ye(l){return 48<=l&&l<=57||65<=l&&l<=70||97<=l&&l<=102}function le(l){return 48<=l&&l<=55}function Pe(l){return 48<=l&&l<=57}function oe(l){if(null===l)return!1;var xt,T=l.length,F=0,st=!1;if(!T)return!1;if(("-"===(xt=l[F])||"+"===xt)&&(xt=l[++F]),"0"===xt){if(F+1===T)return!0;if("b"===(xt=l[++F])){for(F++;F<T;F++)if("_"!==(xt=l[F])){if("0"!==xt&&"1"!==xt)return!1;st=!0}return st&&"_"!==xt}if("x"===xt){for(F++;F<T;F++)if("_"!==(xt=l[F])){if(!ye(l.charCodeAt(F)))return!1;st=!0}return st&&"_"!==xt}if("o"===xt){for(F++;F<T;F++)if("_"!==(xt=l[F])){if(!le(l.charCodeAt(F)))return!1;st=!0}return st&&"_"!==xt}}if("_"===xt)return!1;for(;F<T;F++)if("_"!==(xt=l[F])){if(!Pe(l.charCodeAt(F)))return!1;st=!0}return!(!st||"_"===xt)}function qe(l){var st,T=l,F=1;if(-1!==T.indexOf("_")&&(T=T.replace(/_/g,"")),("-"===(st=T[0])||"+"===st)&&("-"===st&&(F=-1),st=(T=T.slice(1))[0]),"0"===T)return 0;if("0"===st){if("b"===T[1])return F*parseInt(T.slice(2),2);if("x"===T[1])return F*parseInt(T.slice(2),16);if("o"===T[1])return F*parseInt(T.slice(2),8)}return F*parseInt(T,10)}function We(l){return"[object Number]"===Object.prototype.toString.call(l)&&l%1==0&&!j.isNegativeZero(l)}(0,lt.K2)(ye,"isHexCode"),(0,lt.K2)(le,"isOctCode"),(0,lt.K2)(Pe,"isDecCode"),(0,lt.K2)(oe,"resolveYamlInteger"),(0,lt.K2)(qe,"constructYamlInteger"),(0,lt.K2)(We,"isInteger");var Et=new Xe("tag:yaml.org,2002:int",{kind:"scalar",resolve:oe,construct:qe,predicate:We,represent:{binary:(0,lt.K2)(function(l){return l>=0?"0b"+l.toString(2):"-0b"+l.toString(2).slice(1)},"binary"),octal:(0,lt.K2)(function(l){return l>=0?"0o"+l.toString(8):"-0o"+l.toString(8).slice(1)},"octal"),decimal:(0,lt.K2)(function(l){return l.toString(10)},"decimal"),hexadecimal:(0,lt.K2)(function(l){return l>=0?"0x"+l.toString(16).toUpperCase():"-0x"+l.toString(16).toUpperCase().slice(1)},"hexadecimal")},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),Tt=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function B(l){return!(null===l||!Tt.test(l)||"_"===l[l.length-1])}function N(l){var T,F;return F="-"===(T=l.replace(/_/g,"").toLowerCase())[0]?-1:1,"+-".indexOf(T[0])>=0&&(T=T.slice(1)),".inf"===T?1===F?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:".nan"===T?NaN:F*parseFloat(T,10)}(0,lt.K2)(B,"resolveYamlFloat"),(0,lt.K2)(N,"constructYamlFloat");var et=/^[-+]?[0-9]+e/;function yt(l,T){var F;if(isNaN(l))switch(T){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===l)switch(T){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===l)switch(T){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(j.isNegativeZero(l))return"-0.0";return F=l.toString(10),et.test(F)?F.replace("e",".e"):F}function it(l){return"[object Number]"===Object.prototype.toString.call(l)&&(l%1!=0||j.isNegativeZero(l))}(0,lt.K2)(yt,"representYamlFloat"),(0,lt.K2)(it,"isFloat");var rt=new Xe("tag:yaml.org,2002:float",{kind:"scalar",resolve:B,construct:N,predicate:it,represent:yt,defaultStyle:"lowercase"}),_t=ee.extend({implicit:[gt,Ut,Et,rt]}),ht=_t,Ot=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),H=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function ot(l){return null!==l&&(null!==Ot.exec(l)||null!==H.exec(l))}function ke(l){var T,F,st,xt,Me,Qt,Ue,la,xr=0,Sr=null;if(null===(T=Ot.exec(l))&&(T=H.exec(l)),null===T)throw new Error("Date resolve error");if(F=+T[1],st=+T[2]-1,xt=+T[3],!T[4])return new Date(Date.UTC(F,st,xt));if(Me=+T[4],Qt=+T[5],Ue=+T[6],T[7]){for(xr=T[7].slice(0,3);xr.length<3;)xr+="0";xr=+xr}return T[9]&&(Sr=6e4*(60*+T[10]+ +(T[11]||0)),"-"===T[9]&&(Sr=-Sr)),la=new Date(Date.UTC(F,st,xt,Me,Qt,Ue,xr)),Sr&&la.setTime(la.getTime()-Sr),la}function Pt(l){return l.toISOString()}(0,lt.K2)(ot,"resolveYamlTimestamp"),(0,lt.K2)(ke,"constructYamlTimestamp"),(0,lt.K2)(Pt,"representYamlTimestamp");var Zt=new Xe("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:ot,construct:ke,instanceOf:Date,represent:Pt});function pe(l){return"<<"===l||null===l}(0,lt.K2)(pe,"resolveYamlMerge");var Re=new Xe("tag:yaml.org,2002:merge",{kind:"scalar",resolve:pe}),Ze="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\n\r";function de(l){if(null===l)return!1;var T,F,st=0,xt=l.length,Me=Ze;for(F=0;F<xt;F++)if(!((T=Me.indexOf(l.charAt(F)))>64)){if(T<0)return!1;st+=6}return st%8==0}function yr(l){var T,F,st=l.replace(/[\r\n=]/g,""),xt=st.length,Me=Ze,Qt=0,Ue=[];for(T=0;T<xt;T++)T%4==0&&T&&(Ue.push(Qt>>16&255),Ue.push(Qt>>8&255),Ue.push(255&Qt)),Qt=Qt<<6|Me.indexOf(st.charAt(T));return 0==(F=xt%4*6)?(Ue.push(Qt>>16&255),Ue.push(Qt>>8&255),Ue.push(255&Qt)):18===F?(Ue.push(Qt>>10&255),Ue.push(Qt>>2&255)):12===F&&Ue.push(Qt>>4&255),new Uint8Array(Ue)}function mr(l){var st,xt,T="",F=0,Me=l.length,Qt=Ze;for(st=0;st<Me;st++)st%3==0&&st&&(T+=Qt[F>>18&63],T+=Qt[F>>12&63],T+=Qt[F>>6&63],T+=Qt[63&F]),F=(F<<8)+l[st];return 0==(xt=Me%3)?(T+=Qt[F>>18&63],T+=Qt[F>>12&63],T+=Qt[F>>6&63],T+=Qt[63&F]):2===xt?(T+=Qt[F>>10&63],T+=Qt[F>>4&63],T+=Qt[F<<2&63],T+=Qt[64]):1===xt&&(T+=Qt[F>>2&63],T+=Qt[F<<4&63],T+=Qt[64],T+=Qt[64]),T}function Wt(l){return"[object Uint8Array]"===Object.prototype.toString.call(l)}(0,lt.K2)(de,"resolveYamlBinary"),(0,lt.K2)(yr,"constructYamlBinary"),(0,lt.K2)(mr,"representYamlBinary"),(0,lt.K2)(Wt,"isBinary");var we=new Xe("tag:yaml.org,2002:binary",{kind:"scalar",resolve:de,construct:yr,predicate:Wt,represent:mr}),sr=Object.prototype.hasOwnProperty,ve=Object.prototype.toString;function ce(l){if(null===l)return!0;var F,st,xt,Me,Qt,T=[],Ue=l;for(F=0,st=Ue.length;F<st;F+=1){if(Qt=!1,"[object Object]"!==ve.call(xt=Ue[F]))return!1;for(Me in xt)if(sr.call(xt,Me)){if(Qt)return!1;Qt=!0}if(!Qt)return!1;if(-1!==T.indexOf(Me))return!1;T.push(Me)}return!0}function Ee(l){return null!==l?l:[]}(0,lt.K2)(ce,"resolveYamlOmap"),(0,lt.K2)(Ee,"constructYamlOmap");var Ae=new Xe("tag:yaml.org,2002:omap",{kind:"sequence",resolve:ce,construct:Ee}),er=Object.prototype.toString;function Qe(l){if(null===l)return!0;var T,F,st,xt,Me,Qt=l;for(Me=new Array(Qt.length),T=0,F=Qt.length;T<F;T+=1){if("[object Object]"!==er.call(st=Qt[T])||1!==(xt=Object.keys(st)).length)return!1;Me[T]=[xt[0],st[xt[0]]]}return!0}function Dr(l){if(null===l)return[];var T,F,st,xt,Me,Qt=l;for(Me=new Array(Qt.length),T=0,F=Qt.length;T<F;T+=1)st=Qt[T],xt=Object.keys(st),Me[T]=[xt[0],st[xt[0]]];return Me}(0,lt.K2)(Qe,"resolveYamlPairs"),(0,lt.K2)(Dr,"constructYamlPairs");var _e=new Xe("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:Qe,construct:Dr}),Yr=Object.prototype.hasOwnProperty;function nr(l){if(null===l)return!0;var T,F=l;for(T in F)if(Yr.call(F,T)&&null!==F[T])return!1;return!0}function te(l){return null!==l?l:{}}(0,lt.K2)(nr,"resolveYamlSet"),(0,lt.K2)(te,"constructYamlSet");var ne=new Xe("tag:yaml.org,2002:set",{kind:"mapping",resolve:nr,construct:te}),be=ht.extend({implicit:[Zt,Re],explicit:[we,Ae,_e,ne]}),ar=Object.prototype.hasOwnProperty,b=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,C=/[\x85\u2028\u2029]/,R=/[,\[\]\{\}]/,Q=/^(?:!|!!|![a-z\-]+!)$/i,mt=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function zt(l){return Object.prototype.toString.call(l)}function jt(l){return 10===l||13===l}function Vt(l){return 9===l||32===l}function Kt(l){return 9===l||32===l||10===l||13===l}function xe(l){return 44===l||91===l||93===l||123===l||125===l}function je(l){var T;return 48<=l&&l<=57?l-48:97<=(T=32|l)&&T<=102?T-97+10:-1}function Ke(l){return 120===l?2:117===l?4:85===l?8:0}function fr(l){return 48<=l&&l<=57?l-48:-1}function lr(l){return 48===l?"\0":97===l?"\x07":98===l?"\b":116===l||9===l?"\t":110===l?"\n":118===l?"\v":102===l?"\f":114===l?"\r":101===l?"\x1b":32===l?" ":34===l?'"':47===l?"/":92===l?"\\":78===l?"\x85":95===l?"\xa0":76===l?"\u2028":80===l?"\u2029":""}function br(l){return l<=65535?String.fromCharCode(l):String.fromCharCode(55296+(l-65536>>10),56320+(l-65536&1023))}(0,lt.K2)(zt,"_class"),(0,lt.K2)(jt,"is_EOL"),(0,lt.K2)(Vt,"is_WHITE_SPACE"),(0,lt.K2)(Kt,"is_WS_OR_EOL"),(0,lt.K2)(xe,"is_FLOW_INDICATOR"),(0,lt.K2)(je,"fromHexCode"),(0,lt.K2)(Ke,"escapedHexLen"),(0,lt.K2)(fr,"fromDecimalCode"),(0,lt.K2)(lr,"simpleEscapeSequence"),(0,lt.K2)(br,"charFromCodepoint");var wr,$e=new Array(256),He=new Array(256);for(wr=0;wr<256;wr++)$e[wr]=lr(wr)?1:0,He[wr]=lr(wr);function kr(l,T){this.input=l,this.filename=T.filename||null,this.schema=T.schema||be,this.onWarning=T.onWarning||null,this.legacy=T.legacy||!1,this.json=T.json||!1,this.listener=T.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=l.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function Kr(l,T){var F={name:l.filename,buffer:l.input.slice(0,-1),position:l.position,line:l.line,column:l.position-l.lineStart};return F.snippet=aa(F),new vr(T,F)}function _r(l,T){throw Kr(l,T)}function Jr(l,T){l.onWarning&&l.onWarning.call(null,Kr(l,T))}(0,lt.K2)(kr,"State$1"),(0,lt.K2)(Kr,"generateError"),(0,lt.K2)(_r,"throwError"),(0,lt.K2)(Jr,"throwWarning");var Lr={YAML:(0,lt.K2)(function(T,F,st){var xt,Me,Qt;null!==T.version&&_r(T,"duplication of %YAML directive"),1!==st.length&&_r(T,"YAML directive accepts exactly one argument"),null===(xt=/^([0-9]+)\.([0-9]+)$/.exec(st[0]))&&_r(T,"ill-formed argument of the YAML directive"),Me=parseInt(xt[1],10),Qt=parseInt(xt[2],10),1!==Me&&_r(T,"unacceptable YAML version of the document"),T.version=st[0],T.checkLineBreaks=Qt<2,1!==Qt&&2!==Qt&&Jr(T,"unsupported YAML version of the document")},"handleYamlDirective"),TAG:(0,lt.K2)(function(T,F,st){var xt,Me;2!==st.length&&_r(T,"TAG directive accepts exactly two arguments"),Me=st[1],Q.test(xt=st[0])||_r(T,"ill-formed tag handle (first argument) of the TAG directive"),ar.call(T.tagMap,xt)&&_r(T,'there is a previously declared suffix for "'+xt+'" tag handle'),mt.test(Me)||_r(T,"ill-formed tag prefix (second argument) of the TAG directive");try{Me=decodeURIComponent(Me)}catch{_r(T,"tag prefix is malformed: "+Me)}T.tagMap[xt]=Me},"handleTagDirective")};function ha(l,T,F,st){var xt,Me,Qt,Ue;if(T<F){if(Ue=l.input.slice(T,F),st)for(xt=0,Me=Ue.length;xt<Me;xt+=1)9===(Qt=Ue.charCodeAt(xt))||32<=Qt&&Qt<=1114111||_r(l,"expected valid JSON character");else b.test(Ue)&&_r(l,"the stream contains non-printable characters");l.result+=Ue}}function ia(l,T,F,st){var xt,Me,Qt,Ue;for(j.isObject(F)||_r(l,"cannot merge mappings; the provided source object is unacceptable"),Qt=0,Ue=(xt=Object.keys(F)).length;Qt<Ue;Qt+=1)ar.call(T,Me=xt[Qt])||(T[Me]=F[Me],st[Me]=!0)}function jr(l,T,F,st,xt,Me,Qt,Ue,xr){var Sr,ta;if(Array.isArray(xt))for(Sr=0,ta=(xt=Array.prototype.slice.call(xt)).length;Sr<ta;Sr+=1)Array.isArray(xt[Sr])&&_r(l,"nested arrays are not supported inside keys"),"object"==typeof xt&&"[object Object]"===zt(xt[Sr])&&(xt[Sr]="[object Object]");if("object"==typeof xt&&"[object Object]"===zt(xt)&&(xt="[object Object]"),xt=String(xt),null===T&&(T={}),"tag:yaml.org,2002:merge"===st)if(Array.isArray(Me))for(Sr=0,ta=Me.length;Sr<ta;Sr+=1)ia(l,T,Me[Sr],F);else ia(l,T,Me,F);else!l.json&&!ar.call(F,xt)&&ar.call(T,xt)&&(l.line=Qt||l.line,l.lineStart=Ue||l.lineStart,l.position=xr||l.position,_r(l,"duplicated mapping key")),"__proto__"===xt?Object.defineProperty(T,xt,{configurable:!0,enumerable:!0,writable:!0,value:Me}):T[xt]=Me,delete F[xt];return T}function Qr(l){var T;10===(T=l.input.charCodeAt(l.position))?l.position++:13===T?(l.position++,10===l.input.charCodeAt(l.position)&&l.position++):_r(l,"a line break is expected"),l.line+=1,l.lineStart=l.position,l.firstTabInLine=-1}function or(l,T,F){for(var st=0,xt=l.input.charCodeAt(l.position);0!==xt;){for(;Vt(xt);)9===xt&&-1===l.firstTabInLine&&(l.firstTabInLine=l.position),xt=l.input.charCodeAt(++l.position);if(T&&35===xt)do{xt=l.input.charCodeAt(++l.position)}while(10!==xt&&13!==xt&&0!==xt);if(!jt(xt))break;for(Qr(l),xt=l.input.charCodeAt(l.position),st++,l.lineIndent=0;32===xt;)l.lineIndent++,xt=l.input.charCodeAt(++l.position)}return-1!==F&&0!==st&&l.lineIndent<F&&Jr(l,"deficient indentation"),st}function ur(l){var F,T=l.position;return!(45!==(F=l.input.charCodeAt(T))&&46!==F||F!==l.input.charCodeAt(T+1)||F!==l.input.charCodeAt(T+2)||(T+=3,F=l.input.charCodeAt(T),0!==F&&!Kt(F)))}function W(l,T){1===T?l.result+=" ":T>1&&(l.result+=j.repeat("\n",T-1))}function $t(l,T,F){var xt,Me,Qt,Ue,xr,Sr,ta,Ca,Pr=l.kind,la=l.result;if(Kt(Ca=l.input.charCodeAt(l.position))||xe(Ca)||35===Ca||38===Ca||42===Ca||33===Ca||124===Ca||62===Ca||39===Ca||34===Ca||37===Ca||64===Ca||96===Ca||(63===Ca||45===Ca)&&(Kt(xt=l.input.charCodeAt(l.position+1))||F&&xe(xt)))return!1;for(l.kind="scalar",l.result="",Me=Qt=l.position,Ue=!1;0!==Ca;){if(58===Ca){if(Kt(xt=l.input.charCodeAt(l.position+1))||F&&xe(xt))break}else if(35===Ca){if(Kt(l.input.charCodeAt(l.position-1)))break}else{if(l.position===l.lineStart&&ur(l)||F&&xe(Ca))break;if(jt(Ca)){if(xr=l.line,Sr=l.lineStart,ta=l.lineIndent,or(l,!1,-1),l.lineIndent>=T){Ue=!0,Ca=l.input.charCodeAt(l.position);continue}l.position=Qt,l.line=xr,l.lineStart=Sr,l.lineIndent=ta;break}}Ue&&(ha(l,Me,Qt,!1),W(l,l.line-xr),Me=Qt=l.position,Ue=!1),Vt(Ca)||(Qt=l.position+1),Ca=l.input.charCodeAt(++l.position)}return ha(l,Me,Qt,!1),!!l.result||(l.kind=Pr,l.result=la,!1)}function Ye(l,T){var F,st,xt;if(39!==(F=l.input.charCodeAt(l.position)))return!1;for(l.kind="scalar",l.result="",l.position++,st=xt=l.position;0!==(F=l.input.charCodeAt(l.position));)if(39===F){if(ha(l,st,l.position,!0),39!==(F=l.input.charCodeAt(++l.position)))return!0;st=l.position,l.position++,xt=l.position}else jt(F)?(ha(l,st,xt,!0),W(l,or(l,!1,T)),st=xt=l.position):l.position===l.lineStart&&ur(l)?_r(l,"unexpected end of the document within a single quoted scalar"):(l.position++,xt=l.position);_r(l,"unexpected end of the stream within a single quoted scalar")}function Fe(l,T){var F,st,xt,Me,Qt,Ue;if(34!==(Ue=l.input.charCodeAt(l.position)))return!1;for(l.kind="scalar",l.result="",l.position++,F=st=l.position;0!==(Ue=l.input.charCodeAt(l.position));){if(34===Ue)return ha(l,F,l.position,!0),l.position++,!0;if(92===Ue){if(ha(l,F,l.position,!0),jt(Ue=l.input.charCodeAt(++l.position)))or(l,!1,T);else if(Ue<256&&$e[Ue])l.result+=He[Ue],l.position++;else if((Qt=Ke(Ue))>0){for(xt=Qt,Me=0;xt>0;xt--)(Qt=je(Ue=l.input.charCodeAt(++l.position)))>=0?Me=(Me<<4)+Qt:_r(l,"expected hexadecimal character");l.result+=br(Me),l.position++}else _r(l,"unknown escape sequence");F=st=l.position}else jt(Ue)?(ha(l,F,st,!0),W(l,or(l,!1,T)),F=st=l.position):l.position===l.lineStart&&ur(l)?_r(l,"unexpected end of the document within a double quoted scalar"):(l.position++,st=l.position)}_r(l,"unexpected end of the stream within a double quoted scalar")}function Tr(l,T){var st,xt,Me,Ue,ta,Pr,la,Ca,Ba,Xa,za,Fa,F=!0,Qt=l.tag,xr=l.anchor,ka=Object.create(null);if(91===(Fa=l.input.charCodeAt(l.position)))ta=93,Ca=!1,Ue=[];else{if(123!==Fa)return!1;ta=125,Ca=!0,Ue={}}for(null!==l.anchor&&(l.anchorMap[l.anchor]=Ue),Fa=l.input.charCodeAt(++l.position);0!==Fa;){if(or(l,!0,T),(Fa=l.input.charCodeAt(l.position))===ta)return l.position++,l.tag=Qt,l.anchor=xr,l.kind=Ca?"mapping":"sequence",l.result=Ue,!0;F?44===Fa&&_r(l,"expected the node content, but found ','"):_r(l,"missed comma between flow collection entries"),za=null,Pr=la=!1,63===Fa&&Kt(l.input.charCodeAt(l.position+1))&&(Pr=la=!0,l.position++,or(l,!0,T)),st=l.line,xt=l.lineStart,Me=l.position,ba(l,T,1,!1,!0),Xa=l.tag,Ba=l.result,or(l,!0,T),Fa=l.input.charCodeAt(l.position),(la||l.line===st)&&58===Fa&&(Pr=!0,Fa=l.input.charCodeAt(++l.position),or(l,!0,T),ba(l,T,1,!1,!0),za=l.result),Ca?jr(l,Ue,ka,Xa,Ba,za,st,xt,Me):Ue.push(Pr?jr(l,null,ka,Xa,Ba,za,st,xt,Me):Ba),or(l,!0,T),44===(Fa=l.input.charCodeAt(l.position))?(F=!0,Fa=l.input.charCodeAt(++l.position)):F=!1}_r(l,"unexpected end of the stream within a flow collection")}function pr(l,T){var F,st,ta,Pr,xt=1,Me=!1,Qt=!1,Ue=T,xr=0,Sr=!1;if(124===(Pr=l.input.charCodeAt(l.position)))st=!1;else{if(62!==Pr)return!1;st=!0}for(l.kind="scalar",l.result="";0!==Pr;)if(43===(Pr=l.input.charCodeAt(++l.position))||45===Pr)1===xt?xt=43===Pr?3:2:_r(l,"repeat of a chomping mode identifier");else{if(!((ta=fr(Pr))>=0))break;0===ta?_r(l,"bad explicit indentation width of a block scalar; it cannot be less than one"):Qt?_r(l,"repeat of an indentation width identifier"):(Ue=T+ta-1,Qt=!0)}if(Vt(Pr)){do{Pr=l.input.charCodeAt(++l.position)}while(Vt(Pr));if(35===Pr)do{Pr=l.input.charCodeAt(++l.position)}while(!jt(Pr)&&0!==Pr)}for(;0!==Pr;){for(Qr(l),l.lineIndent=0,Pr=l.input.charCodeAt(l.position);(!Qt||l.lineIndent<Ue)&&32===Pr;)l.lineIndent++,Pr=l.input.charCodeAt(++l.position);if(!Qt&&l.lineIndent>Ue&&(Ue=l.lineIndent),jt(Pr))xr++;else{if(l.lineIndent<Ue){3===xt?l.result+=j.repeat("\n",Me?1+xr:xr):1===xt&&Me&&(l.result+="\n");break}for(st?Vt(Pr)?(Sr=!0,l.result+=j.repeat("\n",Me?1+xr:xr)):Sr?(Sr=!1,l.result+=j.repeat("\n",xr+1)):0===xr?Me&&(l.result+=" "):l.result+=j.repeat("\n",xr):l.result+=j.repeat("\n",Me?1+xr:xr),Me=!0,Qt=!0,xr=0,F=l.position;!jt(Pr)&&0!==Pr;)Pr=l.input.charCodeAt(++l.position);ha(l,F,l.position,!1)}}return!0}function da(l,T){var F,xr,st=l.tag,xt=l.anchor,Me=[],Ue=!1;if(-1!==l.firstTabInLine)return!1;for(null!==l.anchor&&(l.anchorMap[l.anchor]=Me),xr=l.input.charCodeAt(l.position);0!==xr&&(-1!==l.firstTabInLine&&(l.position=l.firstTabInLine,_r(l,"tab characters must not be used in indentation")),45===xr&&Kt(l.input.charCodeAt(l.position+1)));)if(Ue=!0,l.position++,or(l,!0,-1)&&l.lineIndent<=T)Me.push(null),xr=l.input.charCodeAt(l.position);else if(F=l.line,ba(l,T,3,!1,!0),Me.push(l.result),or(l,!0,-1),xr=l.input.charCodeAt(l.position),(l.line===F||l.lineIndent>T)&&0!==xr)_r(l,"bad indentation of a sequence entry");else if(l.lineIndent<T)break;return!!Ue&&(l.tag=st,l.anchor=xt,l.kind="sequence",l.result=Me,!0)}function Pa(l,T,F){var st,xt,Me,Qt,Ue,xr,Fa,Sr=l.tag,ta=l.anchor,Pr={},la=Object.create(null),Ca=null,ka=null,Ba=null,Xa=!1,za=!1;if(-1!==l.firstTabInLine)return!1;for(null!==l.anchor&&(l.anchorMap[l.anchor]=Pr),Fa=l.input.charCodeAt(l.position);0!==Fa;){if(!Xa&&-1!==l.firstTabInLine&&(l.position=l.firstTabInLine,_r(l,"tab characters must not be used in indentation")),st=l.input.charCodeAt(l.position+1),Me=l.line,63!==Fa&&58!==Fa||!Kt(st)){if(Qt=l.line,Ue=l.lineStart,xr=l.position,!ba(l,F,2,!1,!0))break;if(l.line===Me){for(Fa=l.input.charCodeAt(l.position);Vt(Fa);)Fa=l.input.charCodeAt(++l.position);if(58===Fa)Kt(Fa=l.input.charCodeAt(++l.position))||_r(l,"a whitespace character is expected after the key-value separator within a block mapping"),Xa&&(jr(l,Pr,la,Ca,ka,null,Qt,Ue,xr),Ca=ka=Ba=null),za=!0,Xa=!1,xt=!1,Ca=l.tag,ka=l.result;else{if(!za)return l.tag=Sr,l.anchor=ta,!0;_r(l,"can not read an implicit mapping pair; a colon is missed")}}else{if(!za)return l.tag=Sr,l.anchor=ta,!0;_r(l,"can not read a block mapping entry; a multiline key may not be an implicit key")}}else 63===Fa?(Xa&&(jr(l,Pr,la,Ca,ka,null,Qt,Ue,xr),Ca=ka=Ba=null),za=!0,Xa=!0,xt=!0):Xa?(Xa=!1,xt=!0):_r(l,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),l.position+=1,Fa=st;if((l.line===Me||l.lineIndent>T)&&(Xa&&(Qt=l.line,Ue=l.lineStart,xr=l.position),ba(l,T,4,!0,xt)&&(Xa?ka=l.result:Ba=l.result),Xa||(jr(l,Pr,la,Ca,ka,Ba,Qt,Ue,xr),Ca=ka=Ba=null),or(l,!0,-1),Fa=l.input.charCodeAt(l.position)),(l.line===Me||l.lineIndent>T)&&0!==Fa)_r(l,"bad indentation of a mapping entry");else if(l.lineIndent<T)break}return Xa&&jr(l,Pr,la,Ca,ka,null,Qt,Ue,xr),za&&(l.tag=Sr,l.anchor=ta,l.kind="mapping",l.result=Pr),za}function Ma(l){var T,xt,Me,Qt,F=!1,st=!1;if(33!==(Qt=l.input.charCodeAt(l.position)))return!1;if(null!==l.tag&&_r(l,"duplication of a tag property"),60===(Qt=l.input.charCodeAt(++l.position))?(F=!0,Qt=l.input.charCodeAt(++l.position)):33===Qt?(st=!0,xt="!!",Qt=l.input.charCodeAt(++l.position)):xt="!",T=l.position,F){do{Qt=l.input.charCodeAt(++l.position)}while(0!==Qt&&62!==Qt);l.position<l.length?(Me=l.input.slice(T,l.position),Qt=l.input.charCodeAt(++l.position)):_r(l,"unexpected end of the stream within a verbatim tag")}else{for(;0!==Qt&&!Kt(Qt);)33===Qt&&(st?_r(l,"tag suffix cannot contain exclamation marks"):(xt=l.input.slice(T-1,l.position+1),Q.test(xt)||_r(l,"named tag handle cannot contain such characters"),st=!0,T=l.position+1)),Qt=l.input.charCodeAt(++l.position);Me=l.input.slice(T,l.position),R.test(Me)&&_r(l,"tag suffix cannot contain flow indicator characters")}Me&&!mt.test(Me)&&_r(l,"tag name cannot contain such characters: "+Me);try{Me=decodeURIComponent(Me)}catch{_r(l,"tag name is malformed: "+Me)}return F?l.tag=Me:ar.call(l.tagMap,xt)?l.tag=l.tagMap[xt]+Me:"!"===xt?l.tag="!"+Me:"!!"===xt?l.tag="tag:yaml.org,2002:"+Me:_r(l,'undeclared tag handle "'+xt+'"'),!0}function Wa(l){var T,F;if(38!==(F=l.input.charCodeAt(l.position)))return!1;for(null!==l.anchor&&_r(l,"duplication of an anchor property"),F=l.input.charCodeAt(++l.position),T=l.position;0!==F&&!Kt(F)&&!xe(F);)F=l.input.charCodeAt(++l.position);return l.position===T&&_r(l,"name of an anchor node must contain at least one character"),l.anchor=l.input.slice(T,l.position),!0}function Ia(l){var T,F,st;if(42!==(st=l.input.charCodeAt(l.position)))return!1;for(st=l.input.charCodeAt(++l.position),T=l.position;0!==st&&!Kt(st)&&!xe(st);)st=l.input.charCodeAt(++l.position);return l.position===T&&_r(l,"name of an alias node must contain at least one character"),F=l.input.slice(T,l.position),ar.call(l.anchorMap,F)||_r(l,'unidentified alias "'+F+'"'),l.result=l.anchorMap[F],or(l,!0,-1),!0}function ba(l,T,F,st,xt){var Me,Qt,Ue,Pr,la,Ca,ka,Ba,Xa,xr=1,Sr=!1,ta=!1;if(null!==l.listener&&l.listener("open",l),l.tag=null,l.anchor=null,l.kind=null,l.result=null,Me=Qt=Ue=4===F||3===F,st&&or(l,!0,-1)&&(Sr=!0,l.lineIndent>T?xr=1:l.lineIndent===T?xr=0:l.lineIndent<T&&(xr=-1)),1===xr)for(;Ma(l)||Wa(l);)or(l,!0,-1)?(Sr=!0,Ue=Me,l.lineIndent>T?xr=1:l.lineIndent===T?xr=0:l.lineIndent<T&&(xr=-1)):Ue=!1;if(Ue&&(Ue=Sr||xt),(1===xr||4===F)&&(Ba=1===F||2===F?T:T+1,Xa=l.position-l.lineStart,1===xr?Ue&&(da(l,Xa)||Pa(l,Xa,Ba))||Tr(l,Ba)?ta=!0:(Qt&&pr(l,Ba)||Ye(l,Ba)||Fe(l,Ba)?ta=!0:Ia(l)?(ta=!0,(null!==l.tag||null!==l.anchor)&&_r(l,"alias node should not have any properties")):$t(l,Ba,1===F)&&(ta=!0,null===l.tag&&(l.tag="?")),null!==l.anchor&&(l.anchorMap[l.anchor]=l.result)):0===xr&&(ta=Ue&&da(l,Xa))),null===l.tag)null!==l.anchor&&(l.anchorMap[l.anchor]=l.result);else if("?"===l.tag){for(null!==l.result&&"scalar"!==l.kind&&_r(l,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+l.kind+'"'),Pr=0,la=l.implicitTypes.length;Pr<la;Pr+=1)if((ka=l.implicitTypes[Pr]).resolve(l.result)){l.result=ka.construct(l.result),l.tag=ka.tag,null!==l.anchor&&(l.anchorMap[l.anchor]=l.result);break}}else if("!"!==l.tag){if(ar.call(l.typeMap[l.kind||"fallback"],l.tag))ka=l.typeMap[l.kind||"fallback"][l.tag];else for(ka=null,Pr=0,la=(Ca=l.typeMap.multi[l.kind||"fallback"]).length;Pr<la;Pr+=1)if(l.tag.slice(0,Ca[Pr].tag.length)===Ca[Pr].tag){ka=Ca[Pr];break}ka||_r(l,"unknown tag !<"+l.tag+">"),null!==l.result&&ka.kind!==l.kind&&_r(l,"unacceptable node kind for !<"+l.tag+'> tag; it should be "'+ka.kind+'", not "'+l.kind+'"'),ka.resolve(l.result,l.tag)?(l.result=ka.construct(l.result,l.tag),null!==l.anchor&&(l.anchorMap[l.anchor]=l.result)):_r(l,"cannot resolve a node with !<"+l.tag+"> explicit tag")}return null!==l.listener&&l.listener("close",l),null!==l.tag||null!==l.anchor||ta}function sa(l){var F,st,xt,Qt,T=l.position,Me=!1;for(l.version=null,l.checkLineBreaks=l.legacy,l.tagMap=Object.create(null),l.anchorMap=Object.create(null);0!==(Qt=l.input.charCodeAt(l.position))&&(or(l,!0,-1),Qt=l.input.charCodeAt(l.position),!(l.lineIndent>0||37!==Qt));){for(Me=!0,Qt=l.input.charCodeAt(++l.position),F=l.position;0!==Qt&&!Kt(Qt);)Qt=l.input.charCodeAt(++l.position);for(xt=[],(st=l.input.slice(F,l.position)).length<1&&_r(l,"directive name must not be less than one character in length");0!==Qt;){for(;Vt(Qt);)Qt=l.input.charCodeAt(++l.position);if(35===Qt){do{Qt=l.input.charCodeAt(++l.position)}while(0!==Qt&&!jt(Qt));break}if(jt(Qt))break;for(F=l.position;0!==Qt&&!Kt(Qt);)Qt=l.input.charCodeAt(++l.position);xt.push(l.input.slice(F,l.position))}0!==Qt&&Qr(l),ar.call(Lr,st)?Lr[st](l,st,xt):Jr(l,'unknown document directive "'+st+'"')}or(l,!0,-1),0===l.lineIndent&&45===l.input.charCodeAt(l.position)&&45===l.input.charCodeAt(l.position+1)&&45===l.input.charCodeAt(l.position+2)?(l.position+=3,or(l,!0,-1)):Me&&_r(l,"directives end mark is expected"),ba(l,l.lineIndent-1,4,!1,!0),or(l,!0,-1),l.checkLineBreaks&&C.test(l.input.slice(T,l.position))&&Jr(l,"non-ASCII line breaks are interpreted as content"),l.documents.push(l.result),l.position===l.lineStart&&ur(l)?46===l.input.charCodeAt(l.position)&&(l.position+=3,or(l,!0,-1)):l.position<l.length-1&&_r(l,"end of the stream or a document separator is expected")}function Sa(l,T){T=T||{},0!==(l=String(l)).length&&(10!==l.charCodeAt(l.length-1)&&13!==l.charCodeAt(l.length-1)&&(l+="\n"),65279===l.charCodeAt(0)&&(l=l.slice(1)));var F=new kr(l,T),st=l.indexOf("\0");for(-1!==st&&(F.position=st,_r(F,"null byte is not allowed in input")),F.input+="\0";32===F.input.charCodeAt(F.position);)F.lineIndent+=1,F.position+=1;for(;F.position<F.length-1;)sa(F);return F.documents}function ea(l,T,F){null!==T&&"object"==typeof T&&typeof F>"u"&&(F=T,T=null);var st=Sa(l,F);if("function"!=typeof T)return st;for(var xt=0,Me=st.length;xt<Me;xt+=1)T(st[xt])}function Va(l,T){var F=Sa(l,T);if(0!==F.length){if(1===F.length)return F[0];throw new vr("expected a single document in the stream, but found more")}}(0,lt.K2)(ha,"captureSegment"),(0,lt.K2)(ia,"mergeMappings"),(0,lt.K2)(jr,"storeMappingPair"),(0,lt.K2)(Qr,"readLineBreak"),(0,lt.K2)(or,"skipSeparationSpace"),(0,lt.K2)(ur,"testDocumentSeparator"),(0,lt.K2)(W,"writeFoldedLines"),(0,lt.K2)($t,"readPlainScalar"),(0,lt.K2)(Ye,"readSingleQuotedScalar"),(0,lt.K2)(Fe,"readDoubleQuotedScalar"),(0,lt.K2)(Tr,"readFlowCollection"),(0,lt.K2)(pr,"readBlockScalar"),(0,lt.K2)(da,"readBlockSequence"),(0,lt.K2)(Pa,"readBlockMapping"),(0,lt.K2)(Ma,"readTagProperty"),(0,lt.K2)(Wa,"readAnchorProperty"),(0,lt.K2)(Ia,"readAlias"),(0,lt.K2)(ba,"composeNode"),(0,lt.K2)(sa,"readDocument"),(0,lt.K2)(Sa,"loadDocuments"),(0,lt.K2)(ea,"loadAll$1"),(0,lt.K2)(Va,"load$1");var ir_load=Va,Oa=Object.prototype.toString,Ka=Object.prototype.hasOwnProperty,$a={0:"\\0",7:"\\a",8:"\\b",9:"\\t",10:"\\n",11:"\\v",12:"\\f",13:"\\r",27:"\\e",34:'\\"',92:"\\\\",133:"\\N",160:"\\_",8232:"\\L",8233:"\\P"},yi=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],Ei=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function mi(l,T){var F,st,xt,Me,Qt,Ue,xr;if(null===T)return{};for(F={},xt=0,Me=(st=Object.keys(T)).length;xt<Me;xt+=1)Qt=st[xt],Ue=String(T[Qt]),"!!"===Qt.slice(0,2)&&(Qt="tag:yaml.org,2002:"+Qt.slice(2)),(xr=l.compiledTypeMap.fallback[Qt])&&Ka.call(xr.styleAliases,Ue)&&(Ue=xr.styleAliases[Ue]),F[Qt]=Ue;return F}function Na(l){var T,F,st;if(T=l.toString(16).toUpperCase(),l<=255)F="x",st=2;else if(l<=65535)F="u",st=4;else{if(!(l<=4294967295))throw new vr("code point within a string may not be greater than 0xFFFFFFFF");F="U",st=8}return"\\"+F+j.repeat("0",st-T.length)+T}function Ya(l){this.schema=l.schema||be,this.indent=Math.max(1,l.indent||2),this.noArrayIndent=l.noArrayIndent||!1,this.skipInvalid=l.skipInvalid||!1,this.flowLevel=j.isNothing(l.flowLevel)?-1:l.flowLevel,this.styleMap=mi(this.schema,l.styles||null),this.sortKeys=l.sortKeys||!1,this.lineWidth=l.lineWidth||80,this.noRefs=l.noRefs||!1,this.noCompatMode=l.noCompatMode||!1,this.condenseFlow=l.condenseFlow||!1,this.quotingType='"'===l.quotingType?2:1,this.forceQuotes=l.forceQuotes||!1,this.replacer="function"==typeof l.replacer?l.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function ni(l,T){for(var Qt,F=j.repeat(" ",T),st=0,xt=-1,Me="",Ue=l.length;st<Ue;)-1===(xt=l.indexOf("\n",st))?(Qt=l.slice(st),st=Ue):(Qt=l.slice(st,xt+1),st=xt+1),Qt.length&&"\n"!==Qt&&(Me+=F),Me+=Qt;return Me}function Mr(l,T){return"\n"+j.repeat(" ",l.indent*T)}function Pi(l,T){var F,st;for(F=0,st=l.implicitTypes.length;F<st;F+=1)if(l.implicitTypes[F].resolve(T))return!0;return!1}function ua(l){return 32===l||9===l}function ki(l){return 32<=l&&l<=126||161<=l&&l<=55295&&8232!==l&&8233!==l||57344<=l&&l<=65533&&65279!==l||65536<=l&&l<=1114111}function Bi(l){return ki(l)&&65279!==l&&13!==l&&10!==l}function Wi(l,T,F){var st=Bi(l),xt=st&&!ua(l);return(F?st:st&&44!==l&&91!==l&&93!==l&&123!==l&&125!==l)&&35!==l&&!(58===T&&!xt)||Bi(T)&&!ua(T)&&35===l||58===T&&xt}function ln(l){return ki(l)&&65279!==l&&!ua(l)&&45!==l&&63!==l&&58!==l&&44!==l&&91!==l&&93!==l&&123!==l&&125!==l&&35!==l&&38!==l&&42!==l&&33!==l&&124!==l&&61!==l&&62!==l&&39!==l&&34!==l&&37!==l&&64!==l&&96!==l}function Ji(l){return!ua(l)&&58!==l}function Oi(l,T){var st,F=l.charCodeAt(T);return F>=55296&&F<=56319&&T+1<l.length&&(st=l.charCodeAt(T+1))>=56320&&st<=57343?1024*(F-55296)+st-56320+65536:F}function zi(l){return/^\n* /.test(l)}function Un(l,T,F,st,xt,Me,Qt,Ue){var xr,Sr=0,ta=null,Pr=!1,la=!1,Ca=-1!==st,ka=-1,Ba=ln(Oi(l,0))&&Ji(Oi(l,l.length-1));if(T||Qt)for(xr=0;xr<l.length;Sr>=65536?xr+=2:xr++){if(!ki(Sr=Oi(l,xr)))return 5;Ba=Ba&&Wi(Sr,ta,Ue),ta=Sr}else{for(xr=0;xr<l.length;Sr>=65536?xr+=2:xr++){if(10===(Sr=Oi(l,xr)))Pr=!0,Ca&&(la=la||xr-ka-1>st&&" "!==l[ka+1],ka=xr);else if(!ki(Sr))return 5;Ba=Ba&&Wi(Sr,ta,Ue),ta=Sr}la=la||Ca&&xr-ka-1>st&&" "!==l[ka+1]}return Pr||la?F>9&&zi(l)?5:Qt?2===Me?5:2:la?4:3:!Ba||Qt||xt(l)?2===Me?5:2:1}function tn(l,T,F,st,xt){l.dump=function(){if(0===T.length)return 2===l.quotingType?'""':"''";if(!l.noCompatMode&&(-1!==yi.indexOf(T)||Ei.test(T)))return 2===l.quotingType?'"'+T+'"':"'"+T+"'";var Me=l.indent*Math.max(1,F),Qt=-1===l.lineWidth?-1:Math.max(Math.min(l.lineWidth,40),l.lineWidth-Me),Ue=st||l.flowLevel>-1&&F>=l.flowLevel;function xr(Sr){return Pi(l,Sr)}switch((0,lt.K2)(xr,"testAmbiguity"),Un(T,Ue,l.indent,Qt,xr,l.quotingType,l.forceQuotes&&!st,xt)){case 1:return T;case 2:return"'"+T.replace(/'/g,"''")+"'";case 3:return"|"+Nn(T,l.indent)+xn(ni(T,Me));case 4:return">"+Nn(T,l.indent)+xn(ni(nn(T,Qt),Me));case 5:return'"'+Rn(T)+'"';default:throw new vr("impossible error: invalid scalar style")}}()}function Nn(l,T){var F=zi(l)?String(T):"",st="\n"===l[l.length-1];return F+(!st||"\n"!==l[l.length-2]&&"\n"!==l?st?"":"-":"+")+"\n"}function xn(l){return"\n"===l[l.length-1]?l.slice(0,-1):l}function nn(l,T){for(var Me,Qt,F=/(\n+)([^\n]*)/g,st=(Sr=void 0,Sr=l.indexOf("\n"),F.lastIndex=Sr=-1!==Sr?Sr:l.length,kn(l.slice(0,Sr),T)),xt="\n"===l[0]||" "===l[0];Qt=F.exec(l);){var xr=Qt[2];Me=" "===xr[0],st+=Qt[1]+(xt||Me||""===xr?"":"\n")+kn(xr,T),xt=Me}var Sr;return st}function kn(l,T){if(""===l||" "===l[0])return l;for(var st,Me,F=/ [^ ]/g,xt=0,Qt=0,Ue=0,xr="";st=F.exec(l);)(Ue=st.index)-xt>T&&(xr+="\n"+l.slice(xt,Me=Qt>xt?Qt:Ue),xt=Me+1),Qt=Ue;return xr+="\n",(xr+=l.length-xt>T&&Qt>xt?l.slice(xt,Qt)+"\n"+l.slice(Qt+1):l.slice(xt)).slice(1)}function Rn(l){for(var st,T="",F=0,xt=0;xt<l.length;F>=65536?xt+=2:xt++)F=Oi(l,xt),!(st=$a[F])&&ki(F)?(T+=l[xt],F>=65536&&(T+=l[xt+1])):T+=st||Na(F);return T}function un(l,T,F){var Me,Qt,Ue,st="",xt=l.tag;for(Me=0,Qt=F.length;Me<Qt;Me+=1)Ue=F[Me],l.replacer&&(Ue=l.replacer.call(F,String(Me),Ue)),(d(l,T,Ue,!1,!1)||typeof Ue>"u"&&d(l,T,null,!1,!1))&&(""!==st&&(st+=","+(l.condenseFlow?"":" ")),st+=l.dump);l.tag=xt,l.dump="["+st+"]"}function Xi(l,T,F,st){var Qt,Ue,xr,xt="",Me=l.tag;for(Qt=0,Ue=F.length;Qt<Ue;Qt+=1)xr=F[Qt],l.replacer&&(xr=l.replacer.call(F,String(Qt),xr)),(d(l,T+1,xr,!0,!0,!1,!0)||typeof xr>"u"&&d(l,T+1,null,!0,!0,!1,!0))&&((!st||""!==xt)&&(xt+=Mr(l,T)),l.dump&&10===l.dump.charCodeAt(0)?xt+="-":xt+="- ",xt+=l.dump);l.tag=Me,l.dump=xt||"[]"}function rn(l,T,F){var Qt,Ue,xr,Sr,ta,st="",xt=l.tag,Me=Object.keys(F);for(Qt=0,Ue=Me.length;Qt<Ue;Qt+=1)ta="",""!==st&&(ta+=", "),l.condenseFlow&&(ta+='"'),Sr=F[xr=Me[Qt]],l.replacer&&(Sr=l.replacer.call(F,xr,Sr)),d(l,T,xr,!1,!1)&&(l.dump.length>1024&&(ta+="? "),ta+=l.dump+(l.condenseFlow?'"':"")+":"+(l.condenseFlow?"":" "),d(l,T,Sr,!1,!1)&&(st+=ta+=l.dump));l.tag=xt,l.dump="{"+st+"}"}function Yn(l,T,F,st){var Ue,xr,Sr,ta,Pr,la,xt="",Me=l.tag,Qt=Object.keys(F);if(!0===l.sortKeys)Qt.sort();else if("function"==typeof l.sortKeys)Qt.sort(l.sortKeys);else if(l.sortKeys)throw new vr("sortKeys must be a boolean or a function");for(Ue=0,xr=Qt.length;Ue<xr;Ue+=1)la="",(!st||""!==xt)&&(la+=Mr(l,T)),ta=F[Sr=Qt[Ue]],l.replacer&&(ta=l.replacer.call(F,Sr,ta)),d(l,T+1,Sr,!0,!0,!0)&&((Pr=null!==l.tag&&"?"!==l.tag||l.dump&&l.dump.length>1024)&&(l.dump&&10===l.dump.charCodeAt(0)?la+="?":la+="? "),la+=l.dump,Pr&&(la+=Mr(l,T)),d(l,T+1,ta,!0,Pr)&&(l.dump&&10===l.dump.charCodeAt(0)?la+=":":la+=": ",xt+=la+=l.dump));l.tag=Me,l.dump=xt||"{}"}function Ht(l,T,F){var st,xt,Me,Qt,Ue,xr;for(Me=0,Qt=(xt=F?l.explicitTypes:l.implicitTypes).length;Me<Qt;Me+=1)if(((Ue=xt[Me]).instanceOf||Ue.predicate)&&(!Ue.instanceOf||"object"==typeof T&&T instanceof Ue.instanceOf)&&(!Ue.predicate||Ue.predicate(T))){if(l.tag=F?Ue.multi&&Ue.representName?Ue.representName(T):Ue.tag:"?",Ue.represent){if(xr=l.styleMap[Ue.tag]||Ue.defaultStyle,"[object Function]"===Oa.call(Ue.represent))st=Ue.represent(T,xr);else{if(!Ka.call(Ue.represent,xr))throw new vr("!<"+Ue.tag+'> tag resolver accepts not "'+xr+'" style');st=Ue.represent[xr](T,xr)}l.dump=st}return!0}return!1}function d(l,T,F,st,xt,Me,Qt){l.tag=null,l.dump=F,Ht(l,F,!1)||Ht(l,F,!0);var Sr,Ue=Oa.call(l.dump),xr=st;st&&(st=l.flowLevel<0||l.flowLevel>T);var Pr,la,ta="[object Object]"===Ue||"[object Array]"===Ue;if(ta&&(la=-1!==(Pr=l.duplicates.indexOf(F))),(null!==l.tag&&"?"!==l.tag||la||2!==l.indent&&T>0)&&(xt=!1),la&&l.usedDuplicates[Pr])l.dump="*ref_"+Pr;else{if(ta&&la&&!l.usedDuplicates[Pr]&&(l.usedDuplicates[Pr]=!0),"[object Object]"===Ue)st&&0!==Object.keys(l.dump).length?(Yn(l,T,l.dump,xt),la&&(l.dump="&ref_"+Pr+l.dump)):(rn(l,T,l.dump),la&&(l.dump="&ref_"+Pr+" "+l.dump));else if("[object Array]"===Ue)st&&0!==l.dump.length?(Xi(l,l.noArrayIndent&&!Qt&&T>0?T-1:T,l.dump,xt),la&&(l.dump="&ref_"+Pr+l.dump)):(un(l,T,l.dump),la&&(l.dump="&ref_"+Pr+" "+l.dump));else{if("[object String]"!==Ue){if("[object Undefined]"===Ue)return!1;if(l.skipInvalid)return!1;throw new vr("unacceptable kind of an object to dump "+Ue)}"?"!==l.tag&&tn(l,l.dump,T,Me,xr)}null!==l.tag&&"?"!==l.tag&&(Sr=encodeURI("!"===l.tag[0]?l.tag.slice(1):l.tag).replace(/!/g,"%21"),Sr="!"===l.tag[0]?"!"+Sr:"tag:yaml.org,2002:"===Sr.slice(0,18)?"!!"+Sr.slice(18):"!<"+Sr+">",l.dump=Sr+" "+l.dump)}return!0}function ct(l,T){var xt,Me,F=[],st=[];for(Xt(l,F,st),xt=0,Me=st.length;xt<Me;xt+=1)T.duplicates.push(F[st[xt]]);T.usedDuplicates=new Array(Me)}function Xt(l,T,F){var st,xt,Me;if(null!==l&&"object"==typeof l)if(-1!==(xt=T.indexOf(l)))-1===F.indexOf(xt)&&F.push(xt);else if(T.push(l),Array.isArray(l))for(xt=0,Me=l.length;xt<Me;xt+=1)Xt(l[xt],T,F);else for(xt=0,Me=(st=Object.keys(l)).length;xt<Me;xt+=1)Xt(l[st[xt]],T,F)}function nt(l,T){return function(){throw new Error("Function yaml."+l+" is removed in js-yaml 4. Use yaml."+T+" instead, which is now safe by default.")}}(0,lt.K2)(mi,"compileStyleMap"),(0,lt.K2)(Na,"encodeHex"),(0,lt.K2)(Ya,"State"),(0,lt.K2)(ni,"indentString"),(0,lt.K2)(Mr,"generateNextLine"),(0,lt.K2)(Pi,"testImplicitResolving"),(0,lt.K2)(ua,"isWhitespace"),(0,lt.K2)(ki,"isPrintable"),(0,lt.K2)(Bi,"isNsCharOrWhitespace"),(0,lt.K2)(Wi,"isPlainSafe"),(0,lt.K2)(ln,"isPlainSafeFirst"),(0,lt.K2)(Ji,"isPlainSafeLast"),(0,lt.K2)(Oi,"codePointAt"),(0,lt.K2)(zi,"needIndentIndicator"),(0,lt.K2)(Un,"chooseScalarStyle"),(0,lt.K2)(tn,"writeScalar"),(0,lt.K2)(Nn,"blockHeader"),(0,lt.K2)(xn,"dropEndingNewline"),(0,lt.K2)(nn,"foldString"),(0,lt.K2)(kn,"foldLine"),(0,lt.K2)(Rn,"escapeString"),(0,lt.K2)(un,"writeFlowSequence"),(0,lt.K2)(Xi,"writeBlockSequence"),(0,lt.K2)(rn,"writeFlowMapping"),(0,lt.K2)(Yn,"writeBlockMapping"),(0,lt.K2)(Ht,"detectType"),(0,lt.K2)(d,"writeNode"),(0,lt.K2)(ct,"getDuplicateReferences"),(0,lt.K2)(Xt,"inspectNode"),(0,lt.K2)(function kt(l,T){var F=new Ya(T=T||{});F.noRefs||ct(l,F);var st=l;return F.replacer&&(st=F.replacer.call({"":st},"",st)),d(F,0,st,!0,!0)?F.dump+"\n":""},"dump$1"),(0,lt.K2)(nt,"renamed");var wt=_t,J=ir_load;
/*! Bundled license information:
      
      js-yaml/dist/js-yaml.mjs:
        (*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT *)
      */nt("safeLoad","load"),nt("safeLoadAll","loadAll"),nt("safeDump","dump")},28642:(ri,Er,P)=>{"use strict";P.r(Er),P.d(Er,{diagram:()=>Ne});var lt=P(89204),ie=P(97787),L=P(36384),D=P(32239),Mt=P(59355),ut=P(52052),G=P(79006),w=P(32303),Lt=P(39115),At=P(79687),Ge=P(40622),bt=P(61823),Gt=function(){var at=(0,w.K2)(function(mi,Na,Rr,ya){for(Rr=Rr||{},ya=mi.length;ya--;Rr[mi[ya]]=Na);return Rr},"o"),Ct=[1,15],I=[1,7],Jt=[1,13],Ve=[1,14],ft=[1,19],Dt=[1,16],Ft=[1,17],Je=[1,18],Xr=[8,30],Hr=[8,10,21,28,29,30,31,39,43,46],ra=[1,23],La=[1,24],fa=[8,10,15,16,21,28,29,30,31,39,43,46],wa=[8,10,15,16,21,27,28,29,30,31,39,43,46],ja=[1,49],$a={trace:(0,w.K2)(function(){},"trace"),yy:{},symbols_:{error:2,spaceLines:3,SPACELINE:4,NL:5,separator:6,SPACE:7,EOF:8,start:9,BLOCK_DIAGRAM_KEY:10,document:11,stop:12,statement:13,link:14,LINK:15,START_LINK:16,LINK_LABEL:17,STR:18,nodeStatement:19,columnsStatement:20,SPACE_BLOCK:21,blockStatement:22,classDefStatement:23,cssClassStatement:24,styleStatement:25,node:26,SIZE:27,COLUMNS:28,"id-block":29,end:30,NODE_ID:31,nodeShapeNLabel:32,dirList:33,DIR:34,NODE_DSTART:35,NODE_DEND:36,BLOCK_ARROW_START:37,BLOCK_ARROW_END:38,classDef:39,CLASSDEF_ID:40,CLASSDEF_STYLEOPTS:41,DEFAULT:42,class:43,CLASSENTITY_IDS:44,STYLECLASS:45,style:46,STYLE_ENTITY_IDS:47,STYLE_DEFINITION_DATA:48,$accept:0,$end:1},terminals_:{2:"error",4:"SPACELINE",5:"NL",7:"SPACE",8:"EOF",10:"BLOCK_DIAGRAM_KEY",15:"LINK",16:"START_LINK",17:"LINK_LABEL",18:"STR",21:"SPACE_BLOCK",27:"SIZE",28:"COLUMNS",29:"id-block",30:"end",31:"NODE_ID",34:"DIR",35:"NODE_DSTART",36:"NODE_DEND",37:"BLOCK_ARROW_START",38:"BLOCK_ARROW_END",39:"classDef",40:"CLASSDEF_ID",41:"CLASSDEF_STYLEOPTS",42:"DEFAULT",43:"class",44:"CLASSENTITY_IDS",45:"STYLECLASS",46:"style",47:"STYLE_ENTITY_IDS",48:"STYLE_DEFINITION_DATA"},productions_:[0,[3,1],[3,2],[3,2],[6,1],[6,1],[6,1],[9,3],[12,1],[12,1],[12,2],[12,2],[11,1],[11,2],[14,1],[14,4],[13,1],[13,1],[13,1],[13,1],[13,1],[13,1],[13,1],[19,3],[19,2],[19,1],[20,1],[22,4],[22,3],[26,1],[26,2],[33,1],[33,2],[32,3],[32,4],[23,3],[23,3],[24,3],[25,3]],performAction:(0,w.K2)(function(Na,Rr,ya,Ya,ni,Mr,Pi){var ua=Mr.length-1;switch(ni){case 4:Ya.getLogger().debug("Rule: separator (NL) ");break;case 5:Ya.getLogger().debug("Rule: separator (Space) ");break;case 6:Ya.getLogger().debug("Rule: separator (EOF) ");break;case 7:Ya.getLogger().debug("Rule: hierarchy: ",Mr[ua-1]),Ya.setHierarchy(Mr[ua-1]);break;case 8:Ya.getLogger().debug("Stop NL ");break;case 9:Ya.getLogger().debug("Stop EOF ");break;case 10:Ya.getLogger().debug("Stop NL2 ");break;case 11:Ya.getLogger().debug("Stop EOF2 ");break;case 12:Ya.getLogger().debug("Rule: statement: ",Mr[ua]),this.$="number"==typeof Mr[ua].length?Mr[ua]:[Mr[ua]];break;case 13:Ya.getLogger().debug("Rule: statement #2: ",Mr[ua-1]),this.$=[Mr[ua-1]].concat(Mr[ua]);break;case 14:Ya.getLogger().debug("Rule: link: ",Mr[ua],Na),this.$={edgeTypeStr:Mr[ua],label:""};break;case 15:Ya.getLogger().debug("Rule: LABEL link: ",Mr[ua-3],Mr[ua-1],Mr[ua]),this.$={edgeTypeStr:Mr[ua],label:Mr[ua-1]};break;case 18:const ki=parseInt(Mr[ua]),Bi=Ya.generateId();this.$={id:Bi,type:"space",label:"",width:ki,children:[]};break;case 23:Ya.getLogger().debug("Rule: (nodeStatement link node) ",Mr[ua-2],Mr[ua-1],Mr[ua]," typestr: ",Mr[ua-1].edgeTypeStr);const Wi=Ya.edgeStrToEdgeData(Mr[ua-1].edgeTypeStr);this.$=[{id:Mr[ua-2].id,label:Mr[ua-2].label,type:Mr[ua-2].type,directions:Mr[ua-2].directions},{id:Mr[ua-2].id+"-"+Mr[ua].id,start:Mr[ua-2].id,end:Mr[ua].id,label:Mr[ua-1].label,type:"edge",directions:Mr[ua].directions,arrowTypeEnd:Wi,arrowTypeStart:"arrow_open"},{id:Mr[ua].id,label:Mr[ua].label,type:Ya.typeStr2Type(Mr[ua].typeStr),directions:Mr[ua].directions}];break;case 24:Ya.getLogger().debug("Rule: nodeStatement (abc88 node size) ",Mr[ua-1],Mr[ua]),this.$={id:Mr[ua-1].id,label:Mr[ua-1].label,type:Ya.typeStr2Type(Mr[ua-1].typeStr),directions:Mr[ua-1].directions,widthInColumns:parseInt(Mr[ua],10)};break;case 25:Ya.getLogger().debug("Rule: nodeStatement (node) ",Mr[ua]),this.$={id:Mr[ua].id,label:Mr[ua].label,type:Ya.typeStr2Type(Mr[ua].typeStr),directions:Mr[ua].directions,widthInColumns:1};break;case 26:Ya.getLogger().debug("APA123",this?this:"na"),Ya.getLogger().debug("COLUMNS: ",Mr[ua]),this.$={type:"column-setting",columns:"auto"===Mr[ua]?-1:parseInt(Mr[ua])};break;case 27:Ya.getLogger().debug("Rule: id-block statement : ",Mr[ua-2],Mr[ua-1]),Ya.generateId(),this.$={...Mr[ua-2],type:"composite",children:Mr[ua-1]};break;case 28:Ya.getLogger().debug("Rule: blockStatement : ",Mr[ua-2],Mr[ua-1],Mr[ua]);const Ji=Ya.generateId();this.$={id:Ji,type:"composite",label:"",children:Mr[ua-1]};break;case 29:Ya.getLogger().debug("Rule: node (NODE_ID separator): ",Mr[ua]),this.$={id:Mr[ua]};break;case 30:Ya.getLogger().debug("Rule: node (NODE_ID nodeShapeNLabel separator): ",Mr[ua-1],Mr[ua]),this.$={id:Mr[ua-1],label:Mr[ua].label,typeStr:Mr[ua].typeStr,directions:Mr[ua].directions};break;case 31:Ya.getLogger().debug("Rule: dirList: ",Mr[ua]),this.$=[Mr[ua]];break;case 32:Ya.getLogger().debug("Rule: dirList: ",Mr[ua-1],Mr[ua]),this.$=[Mr[ua-1]].concat(Mr[ua]);break;case 33:Ya.getLogger().debug("Rule: nodeShapeNLabel: ",Mr[ua-2],Mr[ua-1],Mr[ua]),this.$={typeStr:Mr[ua-2]+Mr[ua],label:Mr[ua-1]};break;case 34:Ya.getLogger().debug("Rule: BLOCK_ARROW nodeShapeNLabel: ",Mr[ua-3],Mr[ua-2]," #3:",Mr[ua-1],Mr[ua]),this.$={typeStr:Mr[ua-3]+Mr[ua],label:Mr[ua-2],directions:Mr[ua-1]};break;case 35:case 36:this.$={type:"classDef",id:Mr[ua-1].trim(),css:Mr[ua].trim()};break;case 37:this.$={type:"applyClass",id:Mr[ua-1].trim(),styleClass:Mr[ua].trim()};break;case 38:this.$={type:"applyStyles",id:Mr[ua-1].trim(),stylesStr:Mr[ua].trim()}}},"anonymous"),table:[{9:1,10:[1,2]},{1:[3]},{10:Ct,11:3,13:4,19:5,20:6,21:I,22:8,23:9,24:10,25:11,26:12,28:Jt,29:Ve,31:ft,39:Dt,43:Ft,46:Je},{8:[1,20]},at(Xr,[2,12],{13:4,19:5,20:6,22:8,23:9,24:10,25:11,26:12,11:21,10:Ct,21:I,28:Jt,29:Ve,31:ft,39:Dt,43:Ft,46:Je}),at(Hr,[2,16],{14:22,15:ra,16:La}),at(Hr,[2,17]),at(Hr,[2,18]),at(Hr,[2,19]),at(Hr,[2,20]),at(Hr,[2,21]),at(Hr,[2,22]),at(fa,[2,25],{27:[1,25]}),at(Hr,[2,26]),{19:26,26:12,31:ft},{10:Ct,11:27,13:4,19:5,20:6,21:I,22:8,23:9,24:10,25:11,26:12,28:Jt,29:Ve,31:ft,39:Dt,43:Ft,46:Je},{40:[1,28],42:[1,29]},{44:[1,30]},{47:[1,31]},at(wa,[2,29],{32:32,35:[1,33],37:[1,34]}),{1:[2,7]},at(Xr,[2,13]),{26:35,31:ft},{31:[2,14]},{17:[1,36]},at(fa,[2,24]),{10:Ct,11:37,13:4,14:22,15:ra,16:La,19:5,20:6,21:I,22:8,23:9,24:10,25:11,26:12,28:Jt,29:Ve,31:ft,39:Dt,43:Ft,46:Je},{30:[1,38]},{41:[1,39]},{41:[1,40]},{45:[1,41]},{48:[1,42]},at(wa,[2,30]),{18:[1,43]},{18:[1,44]},at(fa,[2,23]),{18:[1,45]},{30:[1,46]},at(Hr,[2,28]),at(Hr,[2,35]),at(Hr,[2,36]),at(Hr,[2,37]),at(Hr,[2,38]),{36:[1,47]},{33:48,34:ja},{15:[1,50]},at(Hr,[2,27]),at(wa,[2,33]),{38:[1,51]},{33:52,34:ja,38:[2,31]},{31:[2,15]},at(wa,[2,34]),{38:[2,32]}],defaultActions:{20:[2,7],23:[2,14],50:[2,15],52:[2,32]},parseError:(0,w.K2)(function(Na,Rr){if(!Rr.recoverable){var ya=new Error(Na);throw ya.hash=Rr,ya}this.trace(Na)},"parseError"),parse:(0,w.K2)(function(Na){var Rr=this,ya=[0],Ya=[],ni=[null],Mr=[],Pi=this.table,ua="",ki=0,Bi=0,Wi=0,Oi=Mr.slice.call(arguments,1),zi=Object.create(this.lexer),cn={yy:{}};for(var Ln in this.yy)Object.prototype.hasOwnProperty.call(this.yy,Ln)&&(cn.yy[Ln]=this.yy[Ln]);zi.setInput(Na,cn.yy),cn.yy.lexer=zi,cn.yy.parser=this,typeof zi.yylloc>"u"&&(zi.yylloc={});var Bn=zi.yylloc;Mr.push(Bn);var Vn=zi.options&&zi.options.ranges;function Un(){var ct;return"number"!=typeof(ct=Ya.pop()||zi.lex()||1)&&(ct instanceof Array&&(ct=(Ya=ct).pop()),ct=Rr.symbols_[ct]||ct),ct}this.parseError="function"==typeof cn.yy.parseError?cn.yy.parseError:Object.getPrototypeOf(this).parseError,(0,w.K2)(function hn(ct){ya.length=ya.length-2*ct,ni.length=ni.length-ct,Mr.length=Mr.length-ct},"popStack"),(0,w.K2)(Un,"lex");for(var tn,Nn,xn,nn,Rn,Xi,rn,Ht,un={};;){if(this.defaultActions[xn=ya[ya.length-1]]?nn=this.defaultActions[xn]:((null===tn||typeof tn>"u")&&(tn=Un()),nn=Pi[xn]&&Pi[xn][tn]),typeof nn>"u"||!nn.length||!nn[0]){var d;for(Xi in Ht=[],Pi[xn])this.terminals_[Xi]&&Xi>2&&Ht.push("'"+this.terminals_[Xi]+"'");d=zi.showPosition?"Parse error on line "+(ki+1)+":\n"+zi.showPosition()+"\nExpecting "+Ht.join(", ")+", got '"+(this.terminals_[tn]||tn)+"'":"Parse error on line "+(ki+1)+": Unexpected "+(1==tn?"end of input":"'"+(this.terminals_[tn]||tn)+"'"),this.parseError(d,{text:zi.match,token:this.terminals_[tn]||tn,line:zi.yylineno,loc:Bn,expected:Ht})}if(nn[0]instanceof Array&&nn.length>1)throw new Error("Parse Error: multiple actions possible at state: "+xn+", token: "+tn);switch(nn[0]){case 1:ya.push(tn),ni.push(zi.yytext),Mr.push(zi.yylloc),ya.push(nn[1]),tn=null,Nn?(tn=Nn,Nn=null):(Bi=zi.yyleng,ua=zi.yytext,ki=zi.yylineno,Bn=zi.yylloc,Wi>0&&Wi--);break;case 2:if(un.$=ni[ni.length-(rn=this.productions_[nn[1]][1])],un._$={first_line:Mr[Mr.length-(rn||1)].first_line,last_line:Mr[Mr.length-1].last_line,first_column:Mr[Mr.length-(rn||1)].first_column,last_column:Mr[Mr.length-1].last_column},Vn&&(un._$.range=[Mr[Mr.length-(rn||1)].range[0],Mr[Mr.length-1].range[1]]),typeof(Rn=this.performAction.apply(un,[ua,Bi,ki,cn.yy,nn[1],ni,Mr].concat(Oi)))<"u")return Rn;rn&&(ya=ya.slice(0,-1*rn*2),ni=ni.slice(0,-1*rn),Mr=Mr.slice(0,-1*rn)),ya.push(this.productions_[nn[1]][0]),ni.push(un.$),Mr.push(un._$),ya.push(Pi[ya[ya.length-2]][ya[ya.length-1]]);break;case 3:return!0}}return!0},"parse")};function Ei(){this.yy={}}return $a.lexer=function(){return{EOF:1,parseError:(0,w.K2)(function(Rr,ya){if(!this.yy.parser)throw new Error(Rr);this.yy.parser.parseError(Rr,ya)},"parseError"),setInput:(0,w.K2)(function(Na,Rr){return this.yy=Rr||this.yy||{},this._input=Na,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},"setInput"),input:(0,w.K2)(function(){var Na=this._input[0];return this.yytext+=Na,this.yyleng++,this.offset++,this.match+=Na,this.matched+=Na,Na.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),Na},"input"),unput:(0,w.K2)(function(Na){var Rr=Na.length,ya=Na.split(/(?:\r\n?|\n)/g);this._input=Na+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-Rr),this.offset-=Rr;var Ya=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),ya.length-1&&(this.yylineno-=ya.length-1);var ni=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:ya?(ya.length===Ya.length?this.yylloc.first_column:0)+Ya[Ya.length-ya.length].length-ya[0].length:this.yylloc.first_column-Rr},this.options.ranges&&(this.yylloc.range=[ni[0],ni[0]+this.yyleng-Rr]),this.yyleng=this.yytext.length,this},"unput"),more:(0,w.K2)(function(){return this._more=!0,this},"more"),reject:(0,w.K2)(function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},"reject"),less:(0,w.K2)(function(Na){this.unput(this.match.slice(Na))},"less"),pastInput:(0,w.K2)(function(){var Na=this.matched.substr(0,this.matched.length-this.match.length);return(Na.length>20?"...":"")+Na.substr(-20).replace(/\n/g,"")},"pastInput"),upcomingInput:(0,w.K2)(function(){var Na=this.match;return Na.length<20&&(Na+=this._input.substr(0,20-Na.length)),(Na.substr(0,20)+(Na.length>20?"...":"")).replace(/\n/g,"")},"upcomingInput"),showPosition:(0,w.K2)(function(){var Na=this.pastInput(),Rr=new Array(Na.length+1).join("-");return Na+this.upcomingInput()+"\n"+Rr+"^"},"showPosition"),test_match:(0,w.K2)(function(Na,Rr){var ya,Ya,ni;if(this.options.backtrack_lexer&&(ni={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(ni.yylloc.range=this.yylloc.range.slice(0))),(Ya=Na[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=Ya.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:Ya?Ya[Ya.length-1].length-Ya[Ya.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+Na[0].length},this.yytext+=Na[0],this.match+=Na[0],this.matches=Na,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(Na[0].length),this.matched+=Na[0],ya=this.performAction.call(this,this.yy,this,Rr,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),ya)return ya;if(this._backtrack){for(var Mr in ni)this[Mr]=ni[Mr];return!1}return!1},"test_match"),next:(0,w.K2)(function(){if(this.done)return this.EOF;var Na,Rr,ya,Ya;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var ni=this._currentRules(),Mr=0;Mr<ni.length;Mr++)if((ya=this._input.match(this.rules[ni[Mr]]))&&(!Rr||ya[0].length>Rr[0].length)){if(Rr=ya,Ya=Mr,this.options.backtrack_lexer){if(!1!==(Na=this.test_match(ya,ni[Mr])))return Na;if(this._backtrack){Rr=!1;continue}return!1}if(!this.options.flex)break}return Rr?!1!==(Na=this.test_match(Rr,ni[Ya]))&&Na:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},"next"),lex:(0,w.K2)(function(){return this.next()||this.lex()},"lex"),begin:(0,w.K2)(function(Rr){this.conditionStack.push(Rr)},"begin"),popState:(0,w.K2)(function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},"popState"),_currentRules:(0,w.K2)(function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},"_currentRules"),topState:(0,w.K2)(function(Rr){return(Rr=this.conditionStack.length-1-Math.abs(Rr||0))>=0?this.conditionStack[Rr]:"INITIAL"},"topState"),pushState:(0,w.K2)(function(Rr){this.begin(Rr)},"pushState"),stateStackSize:(0,w.K2)(function(){return this.conditionStack.length},"stateStackSize"),options:{},performAction:(0,w.K2)(function(Rr,ya,Ya,ni){switch(Ya){case 0:return Rr.getLogger().debug("Found block-beta"),10;case 1:return Rr.getLogger().debug("Found id-block"),29;case 2:return Rr.getLogger().debug("Found block"),10;case 3:Rr.getLogger().debug(".",ya.yytext);break;case 4:Rr.getLogger().debug("_",ya.yytext);break;case 5:return 5;case 6:return ya.yytext=-1,28;case 7:return ya.yytext=ya.yytext.replace(/columns\s+/,""),Rr.getLogger().debug("COLUMNS (LEX)",ya.yytext),28;case 8:case 76:case 77:case 99:this.pushState("md_string");break;case 9:return"MD_STR";case 10:case 34:case 79:this.popState();break;case 11:this.pushState("string");break;case 12:Rr.getLogger().debug("LEX: POPPING STR:",ya.yytext),this.popState();break;case 13:return Rr.getLogger().debug("LEX: STR end:",ya.yytext),"STR";case 14:return ya.yytext=ya.yytext.replace(/space\:/,""),Rr.getLogger().debug("SPACE NUM (LEX)",ya.yytext),21;case 15:return ya.yytext="1",Rr.getLogger().debug("COLUMNS (LEX)",ya.yytext),21;case 16:return 42;case 17:return"LINKSTYLE";case 18:return"INTERPOLATE";case 19:return this.pushState("CLASSDEF"),39;case 20:return this.popState(),this.pushState("CLASSDEFID"),"DEFAULT_CLASSDEF_ID";case 21:return this.popState(),this.pushState("CLASSDEFID"),40;case 22:return this.popState(),41;case 23:return this.pushState("CLASS"),43;case 24:return this.popState(),this.pushState("CLASS_STYLE"),44;case 25:return this.popState(),45;case 26:return this.pushState("STYLE_STMNT"),46;case 27:return this.popState(),this.pushState("STYLE_DEFINITION"),47;case 28:return this.popState(),48;case 29:return this.pushState("acc_title"),"acc_title";case 30:return this.popState(),"acc_title_value";case 31:return this.pushState("acc_descr"),"acc_descr";case 32:return this.popState(),"acc_descr_value";case 33:this.pushState("acc_descr_multiline");break;case 35:return"acc_descr_multiline_value";case 36:return 30;case 37:case 38:case 40:case 41:case 44:return this.popState(),Rr.getLogger().debug("Lex: (("),"NODE_DEND";case 39:return this.popState(),Rr.getLogger().debug("Lex: ))"),"NODE_DEND";case 42:return this.popState(),Rr.getLogger().debug("Lex: (-"),"NODE_DEND";case 43:return this.popState(),Rr.getLogger().debug("Lex: -)"),"NODE_DEND";case 45:return this.popState(),Rr.getLogger().debug("Lex: ]]"),"NODE_DEND";case 46:return this.popState(),Rr.getLogger().debug("Lex: ("),"NODE_DEND";case 47:return this.popState(),Rr.getLogger().debug("Lex: ])"),"NODE_DEND";case 48:case 49:return this.popState(),Rr.getLogger().debug("Lex: /]"),"NODE_DEND";case 50:return this.popState(),Rr.getLogger().debug("Lex: )]"),"NODE_DEND";case 51:return this.popState(),Rr.getLogger().debug("Lex: )"),"NODE_DEND";case 52:return this.popState(),Rr.getLogger().debug("Lex: ]>"),"NODE_DEND";case 53:return this.popState(),Rr.getLogger().debug("Lex: ]"),"NODE_DEND";case 54:return Rr.getLogger().debug("Lexa: -)"),this.pushState("NODE"),35;case 55:return Rr.getLogger().debug("Lexa: (-"),this.pushState("NODE"),35;case 56:return Rr.getLogger().debug("Lexa: ))"),this.pushState("NODE"),35;case 57:case 59:case 60:case 61:case 64:return Rr.getLogger().debug("Lexa: )"),this.pushState("NODE"),35;case 58:return Rr.getLogger().debug("Lex: ((("),this.pushState("NODE"),35;case 62:return Rr.getLogger().debug("Lexc: >"),this.pushState("NODE"),35;case 63:return Rr.getLogger().debug("Lexa: (["),this.pushState("NODE"),35;case 65:case 66:case 67:case 68:case 69:case 70:case 71:return this.pushState("NODE"),35;case 72:return Rr.getLogger().debug("Lexa: ["),this.pushState("NODE"),35;case 73:return this.pushState("BLOCK_ARROW"),Rr.getLogger().debug("LEX ARR START"),37;case 74:return Rr.getLogger().debug("Lex: NODE_ID",ya.yytext),31;case 75:return Rr.getLogger().debug("Lex: EOF",ya.yytext),8;case 78:return"NODE_DESCR";case 80:Rr.getLogger().debug("Lex: Starting string"),this.pushState("string");break;case 81:Rr.getLogger().debug("LEX ARR: Starting string"),this.pushState("string");break;case 82:return Rr.getLogger().debug("LEX: NODE_DESCR:",ya.yytext),"NODE_DESCR";case 83:Rr.getLogger().debug("LEX POPPING"),this.popState();break;case 84:Rr.getLogger().debug("Lex: =>BAE"),this.pushState("ARROW_DIR");break;case 85:return ya.yytext=ya.yytext.replace(/^,\s*/,""),Rr.getLogger().debug("Lex (right): dir:",ya.yytext),"DIR";case 86:return ya.yytext=ya.yytext.replace(/^,\s*/,""),Rr.getLogger().debug("Lex (left):",ya.yytext),"DIR";case 87:return ya.yytext=ya.yytext.replace(/^,\s*/,""),Rr.getLogger().debug("Lex (x):",ya.yytext),"DIR";case 88:return ya.yytext=ya.yytext.replace(/^,\s*/,""),Rr.getLogger().debug("Lex (y):",ya.yytext),"DIR";case 89:return ya.yytext=ya.yytext.replace(/^,\s*/,""),Rr.getLogger().debug("Lex (up):",ya.yytext),"DIR";case 90:return ya.yytext=ya.yytext.replace(/^,\s*/,""),Rr.getLogger().debug("Lex (down):",ya.yytext),"DIR";case 91:return ya.yytext="]>",Rr.getLogger().debug("Lex (ARROW_DIR end):",ya.yytext),this.popState(),this.popState(),"BLOCK_ARROW_END";case 92:return Rr.getLogger().debug("Lex: LINK","#"+ya.yytext+"#"),15;case 93:case 94:case 95:return Rr.getLogger().debug("Lex: LINK",ya.yytext),15;case 96:case 97:case 98:return Rr.getLogger().debug("Lex: START_LINK",ya.yytext),this.pushState("LLABEL"),16;case 100:return Rr.getLogger().debug("Lex: Starting string"),this.pushState("string"),"LINK_LABEL";case 101:return this.popState(),Rr.getLogger().debug("Lex: LINK","#"+ya.yytext+"#"),15;case 102:case 103:return this.popState(),Rr.getLogger().debug("Lex: LINK",ya.yytext),15;case 104:return Rr.getLogger().debug("Lex: COLON",ya.yytext),ya.yytext=ya.yytext.slice(1),27}},"anonymous"),rules:[/^(?:block-beta\b)/,/^(?:block:)/,/^(?:block\b)/,/^(?:[\s]+)/,/^(?:[\n]+)/,/^(?:((\u000D\u000A)|(\u000A)))/,/^(?:columns\s+auto\b)/,/^(?:columns\s+[\d]+)/,/^(?:["][`])/,/^(?:[^`"]+)/,/^(?:[`]["])/,/^(?:["])/,/^(?:["])/,/^(?:[^"]*)/,/^(?:space[:]\d+)/,/^(?:space\b)/,/^(?:default\b)/,/^(?:linkStyle\b)/,/^(?:interpolate\b)/,/^(?:classDef\s+)/,/^(?:DEFAULT\s+)/,/^(?:\w+\s+)/,/^(?:[^\n]*)/,/^(?:class\s+)/,/^(?:(\w+)+((,\s*\w+)*))/,/^(?:[^\n]*)/,/^(?:style\s+)/,/^(?:(\w+)+((,\s*\w+)*))/,/^(?:[^\n]*)/,/^(?:accTitle\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*\{\s*)/,/^(?:[\}])/,/^(?:[^\}]*)/,/^(?:end\b\s*)/,/^(?:\(\(\()/,/^(?:\)\)\))/,/^(?:[\)]\))/,/^(?:\}\})/,/^(?:\})/,/^(?:\(-)/,/^(?:-\))/,/^(?:\(\()/,/^(?:\]\])/,/^(?:\()/,/^(?:\]\))/,/^(?:\\\])/,/^(?:\/\])/,/^(?:\)\])/,/^(?:[\)])/,/^(?:\]>)/,/^(?:[\]])/,/^(?:-\))/,/^(?:\(-)/,/^(?:\)\))/,/^(?:\))/,/^(?:\(\(\()/,/^(?:\(\()/,/^(?:\{\{)/,/^(?:\{)/,/^(?:>)/,/^(?:\(\[)/,/^(?:\()/,/^(?:\[\[)/,/^(?:\[\|)/,/^(?:\[\()/,/^(?:\)\)\))/,/^(?:\[\\)/,/^(?:\[\/)/,/^(?:\[\\)/,/^(?:\[)/,/^(?:<\[)/,/^(?:[^\(\[\n\-\)\{\}\s\<\>:]+)/,/^(?:$)/,/^(?:["][`])/,/^(?:["][`])/,/^(?:[^`"]+)/,/^(?:[`]["])/,/^(?:["])/,/^(?:["])/,/^(?:[^"]+)/,/^(?:["])/,/^(?:\]>\s*\()/,/^(?:,?\s*right\s*)/,/^(?:,?\s*left\s*)/,/^(?:,?\s*x\s*)/,/^(?:,?\s*y\s*)/,/^(?:,?\s*up\s*)/,/^(?:,?\s*down\s*)/,/^(?:\)\s*)/,/^(?:\s*[xo<]?--+[-xo>]\s*)/,/^(?:\s*[xo<]?==+[=xo>]\s*)/,/^(?:\s*[xo<]?-?\.+-[xo>]?\s*)/,/^(?:\s*~~[\~]+\s*)/,/^(?:\s*[xo<]?--\s*)/,/^(?:\s*[xo<]?==\s*)/,/^(?:\s*[xo<]?-\.\s*)/,/^(?:["][`])/,/^(?:["])/,/^(?:\s*[xo<]?--+[-xo>]\s*)/,/^(?:\s*[xo<]?==+[=xo>]\s*)/,/^(?:\s*[xo<]?-?\.+-[xo>]?\s*)/,/^(?::\d+)/],conditions:{STYLE_DEFINITION:{rules:[28],inclusive:!1},STYLE_STMNT:{rules:[27],inclusive:!1},CLASSDEFID:{rules:[22],inclusive:!1},CLASSDEF:{rules:[20,21],inclusive:!1},CLASS_STYLE:{rules:[25],inclusive:!1},CLASS:{rules:[24],inclusive:!1},LLABEL:{rules:[99,100,101,102,103],inclusive:!1},ARROW_DIR:{rules:[85,86,87,88,89,90,91],inclusive:!1},BLOCK_ARROW:{rules:[76,81,84],inclusive:!1},NODE:{rules:[37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,77,80],inclusive:!1},md_string:{rules:[9,10,78,79],inclusive:!1},space:{rules:[],inclusive:!1},string:{rules:[12,13,82,83],inclusive:!1},acc_descr_multiline:{rules:[34,35],inclusive:!1},acc_descr:{rules:[32],inclusive:!1},acc_title:{rules:[30],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,5,6,7,8,11,14,15,16,17,18,19,23,26,29,31,33,36,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,92,93,94,95,96,97,98,104],inclusive:!0}}}}(),(0,w.K2)(Ei,"Parser"),Ei.prototype=$a,$a.Parser=Ei,new Ei}();Gt.parser=Gt;var j=Gt,hr=new Map,ze=[],vr=new Map,zr=(0,G.D7)(),Or=new Map,Be=(0,w.K2)(at=>G.Y2.sanitizeText(at,zr),"sanitizeText"),Ir=(0,w.K2)(function(at,Ct=""){let I=Or.get(at);I||(I={id:at,styles:[],textStyles:[]},Or.set(at,I)),Ct?.split(",").forEach(Jt=>{const Ve=Jt.replace(/([^;]*);/,"$1").trim();if(RegExp("color").exec(Jt)){const Dt=Ve.replace("fill","bgFill").replace("color","fill");I.textStyles.push(Dt)}I.styles.push(Ve)})},"addStyleClass"),Xe=(0,w.K2)(function(at,Ct=""){const I=hr.get(at);null!=Ct&&(I.styles=Ct.split(","))},"addStyle2Node"),z=(0,w.K2)(function(at,Ct){at.split(",").forEach(function(I){let Jt=hr.get(I);if(void 0===Jt){const Ve=I.trim();Jt={id:Ve,type:"na",children:[]},hr.set(Ve,Jt)}Jt.classes||(Jt.classes=[]),Jt.classes.push(Ct)})},"setCssClass"),dt=(0,w.K2)((at,Ct)=>{const I=at.flat(),Jt=[],ft=I.find(Dt=>"column-setting"===Dt?.type)?.columns??-1;for(const Dt of I)if("number"==typeof ft&&ft>0&&"column-setting"!==Dt.type&&"number"==typeof Dt.widthInColumns&&Dt.widthInColumns>ft&&w.Rm.warn(`Block ${Dt.id} width ${Dt.widthInColumns} exceeds configured column width ${ft}`),Dt.label&&(Dt.label=Be(Dt.label)),"classDef"!==Dt.type)if("applyClass"!==Dt.type)if("applyStyles"!==Dt.type)if("column-setting"===Dt.type)Ct.columns=Dt.columns??-1;else if("edge"===Dt.type){const Ft=(vr.get(Dt.id)??0)+1;vr.set(Dt.id,Ft),Dt.id=Ft+"-"+Dt.id,ze.push(Dt)}else{Dt.label||(Dt.label="composite"===Dt.type?"":Dt.id);const Ft=hr.get(Dt.id);if(void 0===Ft?hr.set(Dt.id,Dt):("na"!==Dt.type&&(Ft.type=Dt.type),Dt.label!==Dt.id&&(Ft.label=Dt.label)),Dt.children&&dt(Dt.children,Dt),"space"===Dt.type){const Je=Dt.width??1;for(let Xr=0;Xr<Je;Xr++){const Hr=(0,Lt.A)(Dt);Hr.id=Hr.id+"-"+Xr,hr.set(Hr.id,Hr),Jt.push(Hr)}}else void 0===Ft&&Jt.push(Dt)}else Dt?.stylesStr&&Xe(Dt.id,Dt?.stylesStr);else z(Dt.id,Dt?.styleClass??"");else Ir(Dt.id,Dt.css);Ct.children=Jt},"populateBlockDatabase"),Bt=[],Se={id:"root",type:"composite",children:[],columns:-1},X=(0,w.K2)(()=>{w.Rm.debug("Clear called"),(0,G.IU)(),Se={id:"root",type:"composite",children:[],columns:-1},hr=new Map([["root",Se]]),Bt=[],Or=new Map,ze=[],vr=new Map},"clear");function re(at){switch(w.Rm.debug("typeStr2Type",at),at){case"[]":return"square";case"()":return w.Rm.debug("we have a round"),"round";case"(())":return"circle";case">]":return"rect_left_inv_arrow";case"{}":return"diamond";case"{{}}":return"hexagon";case"([])":return"stadium";case"[[]]":return"subroutine";case"[()]":return"cylinder";case"((()))":return"doublecircle";case"[//]":return"lean_right";case"[\\\\]":return"lean_left";case"[/\\]":return"trapezoid";case"[\\/]":return"inv_trapezoid";case"<[]>":return"block_arrow";default:return"na"}}function S(at){return"=="===(w.Rm.debug("typeStr2Type",at),at)?"thick":"normal"}function ee(at){switch(at.replace(/^[\s-]+|[\s-]+$/g,"")){case"x":return"arrow_cross";case"o":return"arrow_circle";case">":return"arrow_point";default:return""}}(0,w.K2)(re,"typeStr2Type"),(0,w.K2)(S,"edgeTypeStr2Type"),(0,w.K2)(ee,"edgeStrToEdgeData");var Rt=0,qt=(0,w.K2)(()=>(Rt++,"id-"+Math.random().toString(36).substr(2,12)+"-"+Rt),"generateId"),V=(0,w.K2)(at=>{Se.children=at,dt(at,Se),Bt=Se.children},"setHierarchy"),gt=(0,w.K2)(at=>{const Ct=hr.get(at);return Ct?Ct.columns?Ct.columns:Ct.children?Ct.children.length:-1:-1},"getColumns"),Y=(0,w.K2)(()=>[...hr.values()],"getBlocksFlat"),Nt=(0,w.K2)(()=>Bt||[],"getBlocks"),St=(0,w.K2)(()=>ze,"getEdges"),Ut=(0,w.K2)(at=>hr.get(at),"getBlock"),ye=(0,w.K2)(at=>{hr.set(at.id,at)},"setBlock"),le=(0,w.K2)(()=>w.Rm,"getLogger"),Pe=(0,w.K2)(function(){return Or},"getClasses"),qe={getConfig:(0,w.K2)(()=>(0,G.zj)().block,"getConfig"),typeStr2Type:re,edgeTypeStr2Type:S,edgeStrToEdgeData:ee,getLogger:le,getBlocksFlat:Y,getBlocks:Nt,getEdges:St,setHierarchy:V,getBlock:Ut,setBlock:ye,getColumns:gt,getClasses:Pe,clear:X,generateId:qt},We=(0,w.K2)((at,Ct)=>{const I=At.Ix,Jt=I(at,"r"),Ve=I(at,"g"),ft=I(at,"b");return At.B3(Jt,Ve,ft,Ct)},"fade"),Tt=(0,w.K2)(at=>`.label {\n    font-family: ${at.fontFamily};\n    color: ${at.nodeTextColor||at.textColor};\n  }\n  .cluster-label text {\n    fill: ${at.titleColor};\n  }\n  .cluster-label span,p {\n    color: ${at.titleColor};\n  }\n\n\n\n  .label text,span,p {\n    fill: ${at.nodeTextColor||at.textColor};\n    color: ${at.nodeTextColor||at.textColor};\n  }\n\n  .node rect,\n  .node circle,\n  .node ellipse,\n  .node polygon,\n  .node path {\n    fill: ${at.mainBkg};\n    stroke: ${at.nodeBorder};\n    stroke-width: 1px;\n  }\n  .flowchart-label text {\n    text-anchor: middle;\n  }\n  // .flowchart-label .text-outer-tspan {\n  //   text-anchor: middle;\n  // }\n  // .flowchart-label .text-inner-tspan {\n  //   text-anchor: start;\n  // }\n\n  .node .label {\n    text-align: center;\n  }\n  .node.clickable {\n    cursor: pointer;\n  }\n\n  .arrowheadPath {\n    fill: ${at.arrowheadColor};\n  }\n\n  .edgePath .path {\n    stroke: ${at.lineColor};\n    stroke-width: 2.0px;\n  }\n\n  .flowchart-link {\n    stroke: ${at.lineColor};\n    fill: none;\n  }\n\n  .edgeLabel {\n    background-color: ${at.edgeLabelBackground};\n    rect {\n      opacity: 0.5;\n      background-color: ${at.edgeLabelBackground};\n      fill: ${at.edgeLabelBackground};\n    }\n    text-align: center;\n  }\n\n  /* For html labels only */\n  .labelBkg {\n    background-color: ${We(at.edgeLabelBackground,.5)};\n    // background-color:\n  }\n\n  .node .cluster {\n    // fill: ${We(at.mainBkg,.5)};\n    fill: ${We(at.clusterBkg,.5)};\n    stroke: ${We(at.clusterBorder,.2)};\n    box-shadow: rgba(50, 50, 93, 0.25) 0px 13px 27px -5px, rgba(0, 0, 0, 0.3) 0px 8px 16px -8px;\n    stroke-width: 1px;\n  }\n\n  .cluster text {\n    fill: ${at.titleColor};\n  }\n\n  .cluster span,p {\n    color: ${at.titleColor};\n  }\n  /* .cluster div {\n    color: ${at.titleColor};\n  } */\n\n  div.mermaidTooltip {\n    position: absolute;\n    text-align: center;\n    max-width: 200px;\n    padding: 2px;\n    font-family: ${at.fontFamily};\n    font-size: 12px;\n    background: ${at.tertiaryColor};\n    border: 1px solid ${at.border2};\n    border-radius: 2px;\n    pointer-events: none;\n    z-index: 100;\n  }\n\n  .flowchartTitleText {\n    text-anchor: middle;\n    font-size: 18px;\n    fill: ${at.textColor};\n  }\n  ${(0,ie.o)()}\n`,"getStyles"),B=(0,w.K2)((at,Ct,I,Jt)=>{Ct.forEach(Ve=>{ot[Ve](at,I,Jt)})},"insertMarkers"),ot={extension:(0,w.K2)((at,Ct,I)=>{w.Rm.trace("Making markers for ",I),at.append("defs").append("marker").attr("id",I+"_"+Ct+"-extensionStart").attr("class","marker extension "+Ct).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 1,7 L18,13 V 1 Z"),at.append("defs").append("marker").attr("id",I+"_"+Ct+"-extensionEnd").attr("class","marker extension "+Ct).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 1,1 V 13 L18,7 Z")},"extension"),composition:(0,w.K2)((at,Ct,I)=>{at.append("defs").append("marker").attr("id",I+"_"+Ct+"-compositionStart").attr("class","marker composition "+Ct).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),at.append("defs").append("marker").attr("id",I+"_"+Ct+"-compositionEnd").attr("class","marker composition "+Ct).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")},"composition"),aggregation:(0,w.K2)((at,Ct,I)=>{at.append("defs").append("marker").attr("id",I+"_"+Ct+"-aggregationStart").attr("class","marker aggregation "+Ct).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),at.append("defs").append("marker").attr("id",I+"_"+Ct+"-aggregationEnd").attr("class","marker aggregation "+Ct).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")},"aggregation"),dependency:(0,w.K2)((at,Ct,I)=>{at.append("defs").append("marker").attr("id",I+"_"+Ct+"-dependencyStart").attr("class","marker dependency "+Ct).attr("refX",6).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 5,7 L9,13 L1,7 L9,1 Z"),at.append("defs").append("marker").attr("id",I+"_"+Ct+"-dependencyEnd").attr("class","marker dependency "+Ct).attr("refX",13).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")},"dependency"),lollipop:(0,w.K2)((at,Ct,I)=>{at.append("defs").append("marker").attr("id",I+"_"+Ct+"-lollipopStart").attr("class","marker lollipop "+Ct).attr("refX",13).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("circle").attr("stroke","black").attr("fill","transparent").attr("cx",7).attr("cy",7).attr("r",6),at.append("defs").append("marker").attr("id",I+"_"+Ct+"-lollipopEnd").attr("class","marker lollipop "+Ct).attr("refX",1).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("circle").attr("stroke","black").attr("fill","transparent").attr("cx",7).attr("cy",7).attr("r",6)},"lollipop"),point:(0,w.K2)((at,Ct,I)=>{at.append("marker").attr("id",I+"_"+Ct+"-pointEnd").attr("class","marker "+Ct).attr("viewBox","0 0 10 10").attr("refX",6).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),at.append("marker").attr("id",I+"_"+Ct+"-pointStart").attr("class","marker "+Ct).attr("viewBox","0 0 10 10").attr("refX",4.5).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 0 5 L 10 10 L 10 0 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")},"point"),circle:(0,w.K2)((at,Ct,I)=>{at.append("marker").attr("id",I+"_"+Ct+"-circleEnd").attr("class","marker "+Ct).attr("viewBox","0 0 10 10").attr("refX",11).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),at.append("marker").attr("id",I+"_"+Ct+"-circleStart").attr("class","marker "+Ct).attr("viewBox","0 0 10 10").attr("refX",-1).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")},"circle"),cross:(0,w.K2)((at,Ct,I)=>{at.append("marker").attr("id",I+"_"+Ct+"-crossEnd").attr("class","marker cross "+Ct).attr("viewBox","0 0 11 11").attr("refX",12).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0"),at.append("marker").attr("id",I+"_"+Ct+"-crossStart").attr("class","marker cross "+Ct).attr("viewBox","0 0 11 11").attr("refX",-1).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0")},"cross"),barb:(0,w.K2)((at,Ct,I)=>{at.append("defs").append("marker").attr("id",I+"_"+Ct+"-barbEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",14).attr("markerUnits","strokeWidth").attr("orient","auto").append("path").attr("d","M 19,7 L9,13 L14,7 L9,1 Z")},"barb")},ke=B,Pt=(0,G.D7)()?.block?.padding??8;function Zt(at,Ct){if(0===at||!Number.isInteger(at))throw new Error("Columns must be an integer !== 0.");if(Ct<0||!Number.isInteger(Ct))throw new Error("Position must be a non-negative integer."+Ct);return at<0?{px:Ct,py:0}:1===at?{px:0,py:Ct}:{px:Ct%at,py:Math.floor(Ct/at)}}(0,w.K2)(Zt,"calculateBlockPosition");var pe=(0,w.K2)(at=>{let Ct=0,I=0;for(const Jt of at.children){const{width:Ve,height:ft,x:Dt,y:Ft}=Jt.size??{width:0,height:0,x:0,y:0};w.Rm.debug("getMaxChildSize abc95 child:",Jt.id,"width:",Ve,"height:",ft,"x:",Dt,"y:",Ft,Jt.type),"space"!==Jt.type&&(Ve>Ct&&(Ct=Ve/(at.widthInColumns??1)),ft>I&&(I=ft))}return{width:Ct,height:I}},"getMaxChildSize");function Re(at,Ct,I=0,Jt=0){w.Rm.debug("setBlockSizes abc95 (start)",at.id,at?.size?.x,"block width =",at?.size,"siblingWidth",I),at?.size?.width||(at.size={width:I,height:Jt,x:0,y:0});let Ve=0,ft=0;if(at.children?.length>0){for(const fa of at.children)Re(fa,Ct);const Dt=pe(at);Ve=Dt.width,ft=Dt.height,w.Rm.debug("setBlockSizes abc95 maxWidth of",at.id,":s children is ",Ve,ft);for(const fa of at.children)fa.size&&(w.Rm.debug(`abc95 Setting size of children of ${at.id} id=${fa.id} ${Ve} ${ft} ${JSON.stringify(fa.size)}`),fa.size.width=Ve*(fa.widthInColumns??1)+Pt*((fa.widthInColumns??1)-1),fa.size.height=ft,fa.size.x=0,fa.size.y=0,w.Rm.debug(`abc95 updating size of ${at.id} children child:${fa.id} maxWidth:${Ve} maxHeight:${ft}`));for(const fa of at.children)Re(fa,Ct,Ve,ft);const Ft=at.columns??-1;let Je=0;for(const fa of at.children)Je+=fa.widthInColumns??1;let Xr=at.children.length;Ft>0&&Ft<Je&&(Xr=Ft);const Hr=Math.ceil(Je/Xr);let ra=Xr*(Ve+Pt)+Pt,La=Hr*(ft+Pt)+Pt;if(ra<I){w.Rm.debug(`Detected to small sibling: abc95 ${at.id} siblingWidth ${I} siblingHeight ${Jt} width ${ra}`),ra=I,La=Jt;const fa=(I-Xr*Pt-Pt)/Xr,wa=(Jt-Hr*Pt-Pt)/Hr;w.Rm.debug("Size indata abc88",at.id,"childWidth",fa,"maxWidth",Ve),w.Rm.debug("Size indata abc88",at.id,"childHeight",wa,"maxHeight",ft),w.Rm.debug("Size indata abc88 xSize",Xr,"padding",Pt);for(const ja of at.children)ja.size&&(ja.size.width=fa,ja.size.height=wa,ja.size.x=0,ja.size.y=0)}if(w.Rm.debug(`abc95 (finale calc) ${at.id} xSize ${Xr} ySize ${Hr} columns ${Ft}${at.children.length} width=${Math.max(ra,at.size?.width||0)}`),ra<(at?.size?.width||0)){ra=at?.size?.width||0;const fa=Ft>0?Math.min(at.children.length,Ft):at.children.length;if(fa>0){const wa=(ra-fa*Pt-Pt)/fa;w.Rm.debug("abc95 (growing to fit) width",at.id,ra,at.size?.width,wa);for(const ja of at.children)ja.size&&(ja.size.width=wa)}}at.size={width:ra,height:La,x:0,y:0}}w.Rm.debug("setBlockSizes abc94 (done)",at.id,at?.size?.x,at?.size?.width,at?.size?.y,at?.size?.height)}function Ze(at,Ct){w.Rm.debug(`abc85 layout blocks (=>layoutBlocks) ${at.id} x: ${at?.size?.x} y: ${at?.size?.y} width: ${at?.size?.width}`);const I=at.columns??-1;if(w.Rm.debug("layoutBlocks columns abc95",at.id,"=>",I,at),at.children&&at.children.length>0){w.Rm.debug("widthOfChildren 88",at.children.length*(at?.children[0]?.size?.width??0)+(at.children.length-1)*Pt,"posX");let ft=0;w.Rm.debug("abc91 block?.size?.x",at.id,at?.size?.x);let Dt=at?.size?.x?at?.size?.x+(-at?.size?.width/2||0):-Pt,Ft=0;for(const Je of at.children){const Xr=at;if(!Je.size)continue;const{width:Hr,height:ra}=Je.size,{px:La,py:fa}=Zt(I,ft);if(fa!=Ft&&(Ft=fa,Dt=at?.size?.x?at?.size?.x+(-at?.size?.width/2||0):-Pt,w.Rm.debug("New row in layout for block",at.id," and child ",Je.id,Ft)),w.Rm.debug(`abc89 layout blocks (child) id: ${Je.id} Pos: ${ft} (px, py) ${La},${fa} (${Xr?.size?.x},${Xr?.size?.y}) parent: ${Xr.id} width: ${Hr}${Pt}`),Xr.size){const ja=Hr/2;Je.size.x=Dt+Pt+ja,w.Rm.debug(`abc91 layout blocks (calc) px, pyid:${Je.id} startingPos=X${Dt} new startingPosX${Je.size.x} ${ja} padding=${Pt} width=${Hr} halfWidth=${ja} => x:${Je.size.x} y:${Je.size.y} ${Je.widthInColumns} (width * (child?.w || 1)) / 2 ${Hr*(Je?.widthInColumns??1)/2}`),Dt=Je.size.x+ja,Je.size.y=Xr.size.y-Xr.size.height/2+fa*(ra+Pt)+ra/2+Pt,w.Rm.debug(`abc88 layout blocks (calc) px, pyid:${Je.id}startingPosX${Dt}${Pt}${ja}=>x:${Je.size.x}y:${Je.size.y}${Je.widthInColumns}(width * (child?.w || 1)) / 2${Hr*(Je?.widthInColumns??1)/2}`)}Je.children&&Ze(Je,Ct);let wa=Je?.widthInColumns??1;I>0&&(wa=Math.min(wa,I-ft%I)),ft+=wa,w.Rm.debug("abc88 columnsPos",Je,ft)}}w.Rm.debug(`layout blocks (<==layoutBlocks) ${at.id} x: ${at?.size?.x} y: ${at?.size?.y} width: ${at?.size?.width}`)}function de(at,{minX:Ct,minY:I,maxX:Jt,maxY:Ve}={minX:0,minY:0,maxX:0,maxY:0}){if(at.size&&"root"!==at.id){const{x:ft,y:Dt,width:Ft,height:Je}=at.size;ft-Ft/2<Ct&&(Ct=ft-Ft/2),Dt-Je/2<I&&(I=Dt-Je/2),ft+Ft/2>Jt&&(Jt=ft+Ft/2),Dt+Je/2>Ve&&(Ve=Dt+Je/2)}if(at.children)for(const ft of at.children)({minX:Ct,minY:I,maxX:Jt,maxY:Ve}=de(ft,{minX:Ct,minY:I,maxX:Jt,maxY:Ve}));return{minX:Ct,minY:I,maxX:Jt,maxY:Ve}}function yr(at){const Ct=at.getBlock("root");if(!Ct)return;Re(Ct,at,0,0),Ze(Ct,at),w.Rm.debug("getBlocks",JSON.stringify(Ct,null,2));const{minX:I,minY:Jt,maxX:Ve,maxY:ft}=de(Ct);return{x:I,y:Jt,width:Ve-I,height:ft-Jt}}function mr(at,Ct){Ct&&at.attr("style",Ct)}function Wt(at,Ct){const I=(0,Ge.Ltv)(document.createElementNS("http://www.w3.org/2000/svg","foreignObject")),Jt=I.append("xhtml:div"),Ve=at.label,ft=at.isNode?"nodeLabel":"edgeLabel",Dt=Jt.append("span");return Dt.html((0,G.jZ)(Ve,Ct)),mr(Dt,at.labelStyle),Dt.attr("class",ft),mr(Jt,at.labelStyle),Jt.style("display","inline-block"),Jt.style("white-space","nowrap"),Jt.attr("xmlns","http://www.w3.org/1999/xhtml"),I.node()}(0,w.K2)(Re,"setBlockSizes"),(0,w.K2)(Ze,"layoutBlocks"),(0,w.K2)(de,"findBounds"),(0,w.K2)(yr,"layout"),(0,w.K2)(mr,"applyStyle"),(0,w.K2)(Wt,"addHtmlLabel");var sr=(0,w.K2)(function(){var at=(0,lt.A)(function*(Ct,I,Jt,Ve){let ft=Ct||"";"object"==typeof ft&&(ft=ft[0]);const Dt=(0,G.D7)();if((0,G._3)(Dt.flowchart.htmlLabels))return ft=ft.replace(/\\n|\n/g,"<br />"),w.Rm.debug("vertexText"+ft),Wt({isNode:Ve,label:yield(0,Mt.hE)((0,ut.Sm)(ft)),labelStyle:I.replace("fill:","color:")},Dt);{const Ft=document.createElementNS("http://www.w3.org/2000/svg","text");Ft.setAttribute("style",I.replace("color:","fill:"));let Je=[];Je="string"==typeof ft?ft.split(/\\n|\n|<br\s*\/?>/gi):Array.isArray(ft)?ft:[];for(const Xr of Je){const Hr=document.createElementNS("http://www.w3.org/2000/svg","tspan");Hr.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),Hr.setAttribute("dy","1em"),Hr.setAttribute("x","0"),Hr.setAttribute("class",Jt?"title-row":"row"),Hr.textContent=Xr.trim(),Ft.appendChild(Hr)}return Ft}});return function(Ct,I,Jt,Ve){return at.apply(this,arguments)}}(),"createLabel"),ve=(0,w.K2)((at,Ct,I,Jt,Ve)=>{Ct.arrowTypeStart&&Ee(at,"start",Ct.arrowTypeStart,I,Jt,Ve),Ct.arrowTypeEnd&&Ee(at,"end",Ct.arrowTypeEnd,I,Jt,Ve)},"addEdgeMarkers"),ce={arrow_cross:"cross",arrow_point:"point",arrow_barb:"barb",arrow_circle:"circle",aggregation:"aggregation",extension:"extension",composition:"composition",dependency:"dependency",lollipop:"lollipop"},Ee=(0,w.K2)((at,Ct,I,Jt,Ve,ft)=>{const Dt=ce[I];Dt?at.attr(`marker-${Ct}`,`url(${Jt}#${Ve}_${ft}-${Dt}${"start"===Ct?"Start":"End"})`):w.Rm.warn(`Unknown arrow type: ${I}`)},"addEdgeMarker"),Ae={},er={},Qe=(0,w.K2)(function(){var at=(0,lt.A)(function*(Ct,I){const Jt=(0,G.D7)(),Ve=(0,G._3)(Jt.flowchart.htmlLabels),ft="markdown"===I.labelType?(0,Mt.GZ)(Ct,I.label,{style:I.labelStyle,useHtmlLabels:Ve,addSvgBackground:!0},Jt):yield sr(I.label,I.labelStyle),Dt=Ct.insert("g").attr("class","edgeLabel"),Ft=Dt.insert("g").attr("class","label");Ft.node().appendChild(ft);let Xr,Je=ft.getBBox();if(Ve){const Hr=ft.children[0],ra=(0,Ge.Ltv)(ft);Je=Hr.getBoundingClientRect(),ra.attr("width",Je.width),ra.attr("height",Je.height)}if(Ft.attr("transform","translate("+-Je.width/2+", "+-Je.height/2+")"),Ae[I.id]=Dt,I.width=Je.width,I.height=Je.height,I.startLabelLeft){const Hr=yield sr(I.startLabelLeft,I.labelStyle),ra=Ct.insert("g").attr("class","edgeTerminals"),La=ra.insert("g").attr("class","inner");Xr=La.node().appendChild(Hr);const fa=Hr.getBBox();La.attr("transform","translate("+-fa.width/2+", "+-fa.height/2+")"),er[I.id]||(er[I.id]={}),er[I.id].startLeft=ra,Dr(Xr,I.startLabelLeft)}if(I.startLabelRight){const Hr=yield sr(I.startLabelRight,I.labelStyle),ra=Ct.insert("g").attr("class","edgeTerminals"),La=ra.insert("g").attr("class","inner");Xr=ra.node().appendChild(Hr),La.node().appendChild(Hr);const fa=Hr.getBBox();La.attr("transform","translate("+-fa.width/2+", "+-fa.height/2+")"),er[I.id]||(er[I.id]={}),er[I.id].startRight=ra,Dr(Xr,I.startLabelRight)}if(I.endLabelLeft){const Hr=yield sr(I.endLabelLeft,I.labelStyle),ra=Ct.insert("g").attr("class","edgeTerminals"),La=ra.insert("g").attr("class","inner");Xr=La.node().appendChild(Hr);const fa=Hr.getBBox();La.attr("transform","translate("+-fa.width/2+", "+-fa.height/2+")"),ra.node().appendChild(Hr),er[I.id]||(er[I.id]={}),er[I.id].endLeft=ra,Dr(Xr,I.endLabelLeft)}if(I.endLabelRight){const Hr=yield sr(I.endLabelRight,I.labelStyle),ra=Ct.insert("g").attr("class","edgeTerminals"),La=ra.insert("g").attr("class","inner");Xr=La.node().appendChild(Hr);const fa=Hr.getBBox();La.attr("transform","translate("+-fa.width/2+", "+-fa.height/2+")"),ra.node().appendChild(Hr),er[I.id]||(er[I.id]={}),er[I.id].endRight=ra,Dr(Xr,I.endLabelRight)}return ft});return function(Ct,I){return at.apply(this,arguments)}}(),"insertEdgeLabel");function Dr(at,Ct){(0,G.D7)().flowchart.htmlLabels&&at&&(at.style.width=9*Ct.length+"px",at.style.height="12px")}(0,w.K2)(Dr,"setTerminalWidth");var _e=(0,w.K2)((at,Ct)=>{w.Rm.debug("Moving label abc88 ",at.id,at.label,Ae[at.id],Ct);let I=Ct.updatedPath?Ct.updatedPath:Ct.originalPath;const Jt=(0,G.D7)(),{subGraphTitleTotalMargin:Ve}=(0,D.O)(Jt);if(at.label){const ft=Ae[at.id];let Dt=at.x,Ft=at.y;if(I){const Je=ut._K.calcLabelPosition(I);w.Rm.debug("Moving label "+at.label+" from (",Dt,",",Ft,") to (",Je.x,",",Je.y,") abc88"),Ct.updatedPath&&(Dt=Je.x,Ft=Je.y)}ft.attr("transform",`translate(${Dt}, ${Ft+Ve/2})`)}if(at.startLabelLeft){const ft=er[at.id].startLeft;let Dt=at.x,Ft=at.y;if(I){const Je=ut._K.calcTerminalLabelPosition(at.arrowTypeStart?10:0,"start_left",I);Dt=Je.x,Ft=Je.y}ft.attr("transform",`translate(${Dt}, ${Ft})`)}if(at.startLabelRight){const ft=er[at.id].startRight;let Dt=at.x,Ft=at.y;if(I){const Je=ut._K.calcTerminalLabelPosition(at.arrowTypeStart?10:0,"start_right",I);Dt=Je.x,Ft=Je.y}ft.attr("transform",`translate(${Dt}, ${Ft})`)}if(at.endLabelLeft){const ft=er[at.id].endLeft;let Dt=at.x,Ft=at.y;if(I){const Je=ut._K.calcTerminalLabelPosition(at.arrowTypeEnd?10:0,"end_left",I);Dt=Je.x,Ft=Je.y}ft.attr("transform",`translate(${Dt}, ${Ft})`)}if(at.endLabelRight){const ft=er[at.id].endRight;let Dt=at.x,Ft=at.y;if(I){const Je=ut._K.calcTerminalLabelPosition(at.arrowTypeEnd?10:0,"end_right",I);Dt=Je.x,Ft=Je.y}ft.attr("transform",`translate(${Dt}, ${Ft})`)}},"positionEdgeLabel"),Yr=(0,w.K2)((at,Ct)=>{const Jt=at.y,Ve=Math.abs(Ct.x-at.x),ft=Math.abs(Ct.y-Jt);return Ve>=at.width/2||ft>=at.height/2},"outsideNode"),nr=(0,w.K2)((at,Ct,I)=>{w.Rm.debug(`intersection calc abc89:\n  outsidePoint: ${JSON.stringify(Ct)}\n  insidePoint : ${JSON.stringify(I)}\n  node        : x:${at.x} y:${at.y} w:${at.width} h:${at.height}`);const Jt=at.x,Ve=at.y,ft=Math.abs(Jt-I.x),Dt=at.width/2;let Ft=I.x<Ct.x?Dt-ft:Dt+ft;const Je=at.height/2,Xr=Math.abs(Ct.y-I.y),Hr=Math.abs(Ct.x-I.x);if(Math.abs(Ve-Ct.y)*Dt>Math.abs(Jt-Ct.x)*Je){let ra=I.y<Ct.y?Ct.y-Je-Ve:Ve-Je-Ct.y;Ft=Hr*ra/Xr;const La={x:I.x<Ct.x?I.x+Ft:I.x-Hr+Ft,y:I.y<Ct.y?I.y+Xr-ra:I.y-Xr+ra};return 0===Ft&&(La.x=Ct.x,La.y=Ct.y),0===Hr&&(La.x=Ct.x),0===Xr&&(La.y=Ct.y),w.Rm.debug(`abc89 topp/bott calc, Q ${Xr}, q ${ra}, R ${Hr}, r ${Ft}`,La),La}{Ft=I.x<Ct.x?Ct.x-Dt-Jt:Jt-Dt-Ct.x;let ra=Xr*Ft/Hr,La=I.x<Ct.x?I.x+Hr-Ft:I.x-Hr+Ft,fa=I.y<Ct.y?I.y+ra:I.y-ra;return w.Rm.debug(`sides calc abc89, Q ${Xr}, q ${ra}, R ${Hr}, r ${Ft}`,{_x:La,_y:fa}),0===Ft&&(La=Ct.x,fa=Ct.y),0===Hr&&(La=Ct.x),0===Xr&&(fa=Ct.y),{x:La,y:fa}}},"intersection"),te=(0,w.K2)((at,Ct)=>{w.Rm.debug("abc88 cutPathAtIntersect",at,Ct);let I=[],Jt=at[0],Ve=!1;return at.forEach(ft=>{if(Yr(Ct,ft)||Ve)Jt=ft,Ve||I.push(ft);else{const Dt=nr(Ct,Jt,ft);let Ft=!1;I.forEach(Je=>{Ft=Ft||Je.x===Dt.x&&Je.y===Dt.y}),I.some(Je=>Je.x===Dt.x&&Je.y===Dt.y)||I.push(Dt),Ve=!0}}),I},"cutPathAtIntersect"),ne=(0,w.K2)(function(at,Ct,I,Jt,Ve,ft,Dt){let Ft=I.points;w.Rm.debug("abc88 InsertEdge: edge=",I,"e=",Ct);let Je=!1;const Xr=ft.node(Ct.v);var Hr=ft.node(Ct.w);Hr?.intersect&&Xr?.intersect&&(Ft=Ft.slice(1,I.points.length-1),Ft.unshift(Xr.intersect(Ft[0])),Ft.push(Hr.intersect(Ft[Ft.length-1]))),I.toCluster&&(w.Rm.debug("to cluster abc88",Jt[I.toCluster]),Ft=te(I.points,Jt[I.toCluster].node),Je=!0),I.fromCluster&&(w.Rm.debug("from cluster abc88",Jt[I.fromCluster]),Ft=te(Ft.reverse(),Jt[I.fromCluster].node).reverse(),Je=!0);const ra=Ft.filter(Na=>!Number.isNaN(Na.y));let La=Ge.qrM;I.curve&&("graph"===Ve||"flowchart"===Ve)&&(La=I.curve);const{x:fa,y:wa}=(0,L.RI)(I),ja=(0,Ge.n8j)().x(fa).y(wa).curve(La);let $a;switch(I.thickness){case"normal":$a="edge-thickness-normal";break;case"thick":case"invisible":$a="edge-thickness-thick";break;default:$a=""}switch(I.pattern){case"solid":$a+=" edge-pattern-solid";break;case"dotted":$a+=" edge-pattern-dotted";break;case"dashed":$a+=" edge-pattern-dashed"}const yi=at.append("path").attr("d",ja(ra)).attr("id",I.id).attr("class"," "+$a+(I.classes?" "+I.classes:"")).attr("style",I.style);let Ei="";((0,G.D7)().flowchart.arrowMarkerAbsolute||(0,G.D7)().state.arrowMarkerAbsolute)&&(Ei=(0,G.ID)(!0)),ve(yi,I,Ei,Dt,Ve);let mi={};return Je&&(mi.updatedPath=Ft),mi.originalPath=I.points,mi},"insertEdge"),be=(0,w.K2)(at=>{const Ct=new Set;for(const I of at)switch(I){case"x":Ct.add("right"),Ct.add("left");break;case"y":Ct.add("up"),Ct.add("down");break;default:Ct.add(I)}return Ct},"expandAndDeduplicateDirections"),ar=(0,w.K2)((at,Ct,I)=>{const Jt=be(at),ft=Ct.height+2*I.padding,Dt=ft/2,Ft=Ct.width+2*Dt+I.padding,Je=I.padding/2;return Jt.has("right")&&Jt.has("left")&&Jt.has("up")&&Jt.has("down")?[{x:0,y:0},{x:Dt,y:0},{x:Ft/2,y:2*Je},{x:Ft-Dt,y:0},{x:Ft,y:0},{x:Ft,y:-ft/3},{x:Ft+2*Je,y:-ft/2},{x:Ft,y:-2*ft/3},{x:Ft,y:-ft},{x:Ft-Dt,y:-ft},{x:Ft/2,y:-ft-2*Je},{x:Dt,y:-ft},{x:0,y:-ft},{x:0,y:-2*ft/3},{x:-2*Je,y:-ft/2},{x:0,y:-ft/3}]:Jt.has("right")&&Jt.has("left")&&Jt.has("up")?[{x:Dt,y:0},{x:Ft-Dt,y:0},{x:Ft,y:-ft/2},{x:Ft-Dt,y:-ft},{x:Dt,y:-ft},{x:0,y:-ft/2}]:Jt.has("right")&&Jt.has("left")&&Jt.has("down")?[{x:0,y:0},{x:Dt,y:-ft},{x:Ft-Dt,y:-ft},{x:Ft,y:0}]:Jt.has("right")&&Jt.has("up")&&Jt.has("down")?[{x:0,y:0},{x:Ft,y:-Dt},{x:Ft,y:-ft+Dt},{x:0,y:-ft}]:Jt.has("left")&&Jt.has("up")&&Jt.has("down")?[{x:Ft,y:0},{x:0,y:-Dt},{x:0,y:-ft+Dt},{x:Ft,y:-ft}]:Jt.has("right")&&Jt.has("left")?[{x:Dt,y:0},{x:Dt,y:-Je},{x:Ft-Dt,y:-Je},{x:Ft-Dt,y:0},{x:Ft,y:-ft/2},{x:Ft-Dt,y:-ft},{x:Ft-Dt,y:-ft+Je},{x:Dt,y:-ft+Je},{x:Dt,y:-ft},{x:0,y:-ft/2}]:Jt.has("up")&&Jt.has("down")?[{x:Ft/2,y:0},{x:0,y:-Je},{x:Dt,y:-Je},{x:Dt,y:-ft+Je},{x:0,y:-ft+Je},{x:Ft/2,y:-ft},{x:Ft,y:-ft+Je},{x:Ft-Dt,y:-ft+Je},{x:Ft-Dt,y:-Je},{x:Ft,y:-Je}]:Jt.has("right")&&Jt.has("up")?[{x:0,y:0},{x:Ft,y:-Dt},{x:0,y:-ft}]:Jt.has("right")&&Jt.has("down")?[{x:0,y:0},{x:Ft,y:0},{x:0,y:-ft}]:Jt.has("left")&&Jt.has("up")?[{x:Ft,y:0},{x:0,y:-Dt},{x:Ft,y:-ft}]:Jt.has("left")&&Jt.has("down")?[{x:Ft,y:0},{x:0,y:0},{x:Ft,y:-ft}]:Jt.has("right")?[{x:Dt,y:-Je},{x:Dt,y:-Je},{x:Ft-Dt,y:-Je},{x:Ft-Dt,y:0},{x:Ft,y:-ft/2},{x:Ft-Dt,y:-ft},{x:Ft-Dt,y:-ft+Je},{x:Dt,y:-ft+Je},{x:Dt,y:-ft+Je}]:Jt.has("left")?[{x:Dt,y:0},{x:Dt,y:-Je},{x:Ft-Dt,y:-Je},{x:Ft-Dt,y:-ft+Je},{x:Dt,y:-ft+Je},{x:Dt,y:-ft},{x:0,y:-ft/2}]:Jt.has("up")?[{x:Dt,y:-Je},{x:Dt,y:-ft+Je},{x:0,y:-ft+Je},{x:Ft/2,y:-ft},{x:Ft,y:-ft+Je},{x:Ft-Dt,y:-ft+Je},{x:Ft-Dt,y:-Je}]:Jt.has("down")?[{x:Ft/2,y:0},{x:0,y:-Je},{x:Dt,y:-Je},{x:Dt,y:-ft+Je},{x:Ft-Dt,y:-ft+Je},{x:Ft-Dt,y:-Je},{x:Ft,y:-Je}]:[{x:0,y:0}]},"getArrowPoints");function g(at,Ct){return at.intersect(Ct)}(0,w.K2)(g,"intersectNode");var y=g;function E(at,Ct,I,Jt){var Ve=at.x,ft=at.y,Dt=Ve-Jt.x,Ft=ft-Jt.y,Je=Math.sqrt(Ct*Ct*Ft*Ft+I*I*Dt*Dt),Xr=Math.abs(Ct*I*Dt/Je);Jt.x<Ve&&(Xr=-Xr);var Hr=Math.abs(Ct*I*Ft/Je);return Jt.y<ft&&(Hr=-Hr),{x:Ve+Xr,y:ft+Hr}}(0,w.K2)(E,"intersectEllipse");var M=E;function m(at,Ct,I){return M(at,Ct,Ct,I)}(0,w.K2)(m,"intersectCircle");var A=m;function v(at,Ct,I,Jt){var Ve,ft,Dt,Ft,Je,Xr,Hr,ra,La,fa,wa,ja,$a;if(fa=(Ve=Ct.y-at.y)*Jt.x+(Dt=at.x-Ct.x)*Jt.y+(Je=Ct.x*at.y-at.x*Ct.y),!(0!==(La=Ve*I.x+Dt*I.y+Je)&&0!==fa&&b(La,fa)||(ft=Jt.y-I.y,Ft=I.x-Jt.x,Xr=Jt.x*I.y-I.x*Jt.y,Hr=ft*at.x+Ft*at.y+Xr,ra=ft*Ct.x+Ft*Ct.y+Xr,0!==Hr&&0!==ra&&b(Hr,ra)||(wa=Ve*Ft-ft*Dt,0===wa))))return ja=Math.abs(wa/2),{x:($a=Dt*Xr-Ft*Je)<0?($a-ja)/wa:($a+ja)/wa,y:($a=ft*Je-Ve*Xr)<0?($a-ja)/wa:($a+ja)/wa}}function b(at,Ct){return at*Ct>0}(0,w.K2)(v,"intersectLine"),(0,w.K2)(b,"sameSign");var C=v,R=Q;function Q(at,Ct,I){var Jt=at.x,Ve=at.y,ft=[],Dt=Number.POSITIVE_INFINITY,Ft=Number.POSITIVE_INFINITY;"function"==typeof Ct.forEach?Ct.forEach(function(wa){Dt=Math.min(Dt,wa.x),Ft=Math.min(Ft,wa.y)}):(Dt=Math.min(Dt,Ct.x),Ft=Math.min(Ft,Ct.y));for(var Je=Jt-at.width/2-Dt,Xr=Ve-at.height/2-Ft,Hr=0;Hr<Ct.length;Hr++){var ra=Ct[Hr],La=Ct[Hr<Ct.length-1?Hr+1:0],fa=C(at,I,{x:Je+ra.x,y:Xr+ra.y},{x:Je+La.x,y:Xr+La.y});fa&&ft.push(fa)}return ft.length?(ft.length>1&&ft.sort(function(wa,ja){var $a=wa.x-I.x,yi=wa.y-I.y,Ei=Math.sqrt($a*$a+yi*yi),mi=ja.x-I.x,Na=ja.y-I.y,Rr=Math.sqrt(mi*mi+Na*Na);return Ei<Rr?-1:Ei===Rr?0:1}),ft[0]):at}(0,w.K2)(Q,"intersectPolygon");var jt={node:y,circle:A,ellipse:M,polygon:R,rect:(0,w.K2)((at,Ct)=>{var Je,Xr,I=at.x,Jt=at.y,Ve=Ct.x-I,ft=Ct.y-Jt,Dt=at.width/2,Ft=at.height/2;return Math.abs(ft)*Dt>Math.abs(Ve)*Ft?(ft<0&&(Ft=-Ft),Je=0===ft?0:Ft*Ve/ft,Xr=Ft):(Ve<0&&(Dt=-Dt),Je=Dt,Xr=0===Ve?0:Dt*ft/Ve),{x:I+Je,y:Jt+Xr}},"intersectRect")},Vt=(0,w.K2)(function(){var at=(0,lt.A)(function*(Ct,I,Jt,Ve){const ft=(0,G.D7)();let Dt;const Ft=I.useHtmlLabels||(0,G._3)(ft.flowchart.htmlLabels);Dt=Jt||"node default";const Je=Ct.insert("g").attr("class",Dt).attr("id",I.domId||I.id),Xr=Je.insert("g").attr("class","label").attr("style",I.labelStyle);let Hr;Hr=void 0===I.labelText?"":"string"==typeof I.labelText?I.labelText:I.labelText[0];const ra=Xr.node();let La;La="markdown"===I.labelType?(0,Mt.GZ)(Xr,(0,G.jZ)((0,ut.Sm)(Hr),ft),{useHtmlLabels:Ft,width:I.width||ft.flowchart.wrappingWidth,classes:"markdown-node-label"},ft):ra.appendChild(yield sr((0,G.jZ)((0,ut.Sm)(Hr),ft),I.labelStyle,!1,Ve));let fa=La.getBBox();const wa=I.padding/2;if((0,G._3)(ft.flowchart.htmlLabels)){const ja=La.children[0],$a=(0,Ge.Ltv)(La),yi=ja.getElementsByTagName("img");if(yi){const Ei=""===Hr.replace(/<img[^>]*>/g,"").trim();yield Promise.all([...yi].map(mi=>new Promise(Na=>{function Rr(){if(mi.style.display="flex",mi.style.flexDirection="column",Ei){const ya=ft.fontSize?ft.fontSize:window.getComputedStyle(document.body).fontSize,ni=5*parseInt(ya,10)+"px";mi.style.minWidth=ni,mi.style.maxWidth=ni}else mi.style.width="100%";Na(mi)}(0,w.K2)(Rr,"setupImage"),setTimeout(()=>{mi.complete&&Rr()}),mi.addEventListener("error",Rr),mi.addEventListener("load",Rr)})))}fa=ja.getBoundingClientRect(),$a.attr("width",fa.width),$a.attr("height",fa.height)}return Xr.attr("transform",Ft?"translate("+-fa.width/2+", "+-fa.height/2+")":"translate(0, "+-fa.height/2+")"),I.centerLabel&&Xr.attr("transform","translate("+-fa.width/2+", "+-fa.height/2+")"),Xr.insert("rect",":first-child"),{shapeSvg:Je,bbox:fa,halfPadding:wa,label:Xr}});return function(Ct,I,Jt,Ve){return at.apply(this,arguments)}}(),"labelHelper"),Kt=(0,w.K2)((at,Ct)=>{const I=Ct.node().getBBox();at.width=I.width,at.height=I.height},"updateNodeBounds");function xe(at,Ct,I,Jt){return at.insert("polygon",":first-child").attr("points",Jt.map(function(Ve){return Ve.x+","+Ve.y}).join(" ")).attr("class","label-container").attr("transform","translate("+-Ct/2+","+I/2+")")}(0,w.K2)(xe,"insertPolygonShape");var Ke=(0,w.K2)(function(){var at=(0,lt.A)(function*(Ct,I){I.useHtmlLabels||(0,G.D7)().flowchart.htmlLabels||(I.centerLabel=!0);const{shapeSvg:Ve,bbox:ft,halfPadding:Dt}=yield Vt(Ct,I,"node "+I.classes,!0);w.Rm.info("Classes = ",I.classes);const Ft=Ve.insert("rect",":first-child");return Ft.attr("rx",I.rx).attr("ry",I.ry).attr("x",-ft.width/2-Dt).attr("y",-ft.height/2-Dt).attr("width",ft.width+I.padding).attr("height",ft.height+I.padding),Kt(I,Ft),I.intersect=function(Je){return jt.rect(I,Je)},Ve});return function(Ct,I){return at.apply(this,arguments)}}(),"note"),fr=(0,w.K2)(at=>at?" "+at:"","formatClass"),lr=(0,w.K2)((at,Ct)=>`${Ct||"node default"}${fr(at.classes)} ${fr(at.class)}`,"getClassesFromNode"),br=(0,w.K2)(function(){var at=(0,lt.A)(function*(Ct,I){const{shapeSvg:Jt,bbox:Ve}=yield Vt(Ct,I,lr(I,void 0),!0),Ft=Ve.width+I.padding+(Ve.height+I.padding),Je=[{x:Ft/2,y:0},{x:Ft,y:-Ft/2},{x:Ft/2,y:-Ft},{x:0,y:-Ft/2}];w.Rm.info("Question main (Circle)");const Xr=xe(Jt,Ft,Ft,Je);return Xr.attr("style",I.style),Kt(I,Xr),I.intersect=function(Hr){return w.Rm.warn("Intersect called"),jt.polygon(I,Je,Hr)},Jt});return function(Ct,I){return at.apply(this,arguments)}}(),"question"),$e=(0,w.K2)((at,Ct)=>{const I=at.insert("g").attr("class","node default").attr("id",Ct.domId||Ct.id);return I.insert("polygon",":first-child").attr("points",[{x:0,y:14},{x:14,y:0},{x:0,y:-14},{x:-14,y:0}].map(function(Dt){return Dt.x+","+Dt.y}).join(" ")).attr("class","state-start").attr("r",7).attr("width",28).attr("height",28),Ct.width=28,Ct.height=28,Ct.intersect=function(Dt){return jt.circle(Ct,14,Dt)},I},"choice"),He=(0,w.K2)(function(){var at=(0,lt.A)(function*(Ct,I){const{shapeSvg:Jt,bbox:Ve}=yield Vt(Ct,I,lr(I,void 0),!0),Dt=Ve.height+I.padding,Ft=Dt/4,Je=Ve.width+2*Ft+I.padding,Xr=[{x:Ft,y:0},{x:Je-Ft,y:0},{x:Je,y:-Dt/2},{x:Je-Ft,y:-Dt},{x:Ft,y:-Dt},{x:0,y:-Dt/2}],Hr=xe(Jt,Je,Dt,Xr);return Hr.attr("style",I.style),Kt(I,Hr),I.intersect=function(ra){return jt.polygon(I,Xr,ra)},Jt});return function(Ct,I){return at.apply(this,arguments)}}(),"hexagon"),wr=(0,w.K2)(function(){var at=(0,lt.A)(function*(Ct,I){const{shapeSvg:Jt,bbox:Ve}=yield Vt(Ct,I,void 0,!0),Dt=Ve.height+2*I.padding,Je=Ve.width+Dt/2*2+I.padding,Xr=ar(I.directions,Ve,I),Hr=xe(Jt,Je,Dt,Xr);return Hr.attr("style",I.style),Kt(I,Hr),I.intersect=function(ra){return jt.polygon(I,Xr,ra)},Jt});return function(Ct,I){return at.apply(this,arguments)}}(),"block_arrow"),kr=(0,w.K2)(function(){var at=(0,lt.A)(function*(Ct,I){const{shapeSvg:Jt,bbox:Ve}=yield Vt(Ct,I,lr(I,void 0),!0),ft=Ve.width+I.padding,Dt=Ve.height+I.padding,Ft=[{x:-Dt/2,y:0},{x:ft,y:0},{x:ft,y:-Dt},{x:-Dt/2,y:-Dt},{x:0,y:-Dt/2}];return xe(Jt,ft,Dt,Ft).attr("style",I.style),I.width=ft+Dt,I.height=Dt,I.intersect=function(Xr){return jt.polygon(I,Ft,Xr)},Jt});return function(Ct,I){return at.apply(this,arguments)}}(),"rect_left_inv_arrow"),Kr=(0,w.K2)(function(){var at=(0,lt.A)(function*(Ct,I){const{shapeSvg:Jt,bbox:Ve}=yield Vt(Ct,I,lr(I),!0),ft=Ve.width+I.padding,Dt=Ve.height+I.padding,Ft=[{x:-2*Dt/6,y:0},{x:ft-Dt/6,y:0},{x:ft+2*Dt/6,y:-Dt},{x:Dt/6,y:-Dt}],Je=xe(Jt,ft,Dt,Ft);return Je.attr("style",I.style),Kt(I,Je),I.intersect=function(Xr){return jt.polygon(I,Ft,Xr)},Jt});return function(Ct,I){return at.apply(this,arguments)}}(),"lean_right"),_r=(0,w.K2)(function(){var at=(0,lt.A)(function*(Ct,I){const{shapeSvg:Jt,bbox:Ve}=yield Vt(Ct,I,lr(I,void 0),!0),ft=Ve.width+I.padding,Dt=Ve.height+I.padding,Ft=[{x:2*Dt/6,y:0},{x:ft+Dt/6,y:0},{x:ft-2*Dt/6,y:-Dt},{x:-Dt/6,y:-Dt}],Je=xe(Jt,ft,Dt,Ft);return Je.attr("style",I.style),Kt(I,Je),I.intersect=function(Xr){return jt.polygon(I,Ft,Xr)},Jt});return function(Ct,I){return at.apply(this,arguments)}}(),"lean_left"),Jr=(0,w.K2)(function(){var at=(0,lt.A)(function*(Ct,I){const{shapeSvg:Jt,bbox:Ve}=yield Vt(Ct,I,lr(I,void 0),!0),ft=Ve.width+I.padding,Dt=Ve.height+I.padding,Ft=[{x:-2*Dt/6,y:0},{x:ft+2*Dt/6,y:0},{x:ft-Dt/6,y:-Dt},{x:Dt/6,y:-Dt}],Je=xe(Jt,ft,Dt,Ft);return Je.attr("style",I.style),Kt(I,Je),I.intersect=function(Xr){return jt.polygon(I,Ft,Xr)},Jt});return function(Ct,I){return at.apply(this,arguments)}}(),"trapezoid"),Lr=(0,w.K2)(function(){var at=(0,lt.A)(function*(Ct,I){const{shapeSvg:Jt,bbox:Ve}=yield Vt(Ct,I,lr(I,void 0),!0),ft=Ve.width+I.padding,Dt=Ve.height+I.padding,Ft=[{x:Dt/6,y:0},{x:ft-Dt/6,y:0},{x:ft+2*Dt/6,y:-Dt},{x:-2*Dt/6,y:-Dt}],Je=xe(Jt,ft,Dt,Ft);return Je.attr("style",I.style),Kt(I,Je),I.intersect=function(Xr){return jt.polygon(I,Ft,Xr)},Jt});return function(Ct,I){return at.apply(this,arguments)}}(),"inv_trapezoid"),ha=(0,w.K2)(function(){var at=(0,lt.A)(function*(Ct,I){const{shapeSvg:Jt,bbox:Ve}=yield Vt(Ct,I,lr(I,void 0),!0),ft=Ve.width+I.padding,Dt=Ve.height+I.padding,Ft=[{x:0,y:0},{x:ft+Dt/2,y:0},{x:ft,y:-Dt/2},{x:ft+Dt/2,y:-Dt},{x:0,y:-Dt}],Je=xe(Jt,ft,Dt,Ft);return Je.attr("style",I.style),Kt(I,Je),I.intersect=function(Xr){return jt.polygon(I,Ft,Xr)},Jt});return function(Ct,I){return at.apply(this,arguments)}}(),"rect_right_inv_arrow"),ia=(0,w.K2)(function(){var at=(0,lt.A)(function*(Ct,I){const{shapeSvg:Jt,bbox:Ve}=yield Vt(Ct,I,lr(I,void 0),!0),ft=Ve.width+I.padding,Dt=ft/2,Ft=Dt/(2.5+ft/50),Je=Ve.height+Ft+I.padding,Xr="M 0,"+Ft+" a "+Dt+","+Ft+" 0,0,0 "+ft+" 0 a "+Dt+","+Ft+" 0,0,0 "+-ft+" 0 l 0,"+Je+" a "+Dt+","+Ft+" 0,0,0 "+ft+" 0 l 0,"+-Je,Hr=Jt.attr("label-offset-y",Ft).insert("path",":first-child").attr("style",I.style).attr("d",Xr).attr("transform","translate("+-ft/2+","+-(Je/2+Ft)+")");return Kt(I,Hr),I.intersect=function(ra){const La=jt.rect(I,ra),fa=La.x-I.x;if(0!=Dt&&(Math.abs(fa)<I.width/2||Math.abs(fa)==I.width/2&&Math.abs(La.y-I.y)>I.height/2-Ft)){let wa=Ft*Ft*(1-fa*fa/(Dt*Dt));0!=wa&&(wa=Math.sqrt(wa)),wa=Ft-wa,ra.y-I.y>0&&(wa=-wa),La.y+=wa}return La},Jt});return function(Ct,I){return at.apply(this,arguments)}}(),"cylinder"),jr=(0,w.K2)(function(){var at=(0,lt.A)(function*(Ct,I){const{shapeSvg:Jt,bbox:Ve,halfPadding:ft}=yield Vt(Ct,I,"node "+I.classes+" "+I.class,!0),Dt=Jt.insert("rect",":first-child"),Ft=I.positioned?I.width:Ve.width+I.padding,Je=I.positioned?I.height:Ve.height+I.padding,Xr=I.positioned?-Ft/2:-Ve.width/2-ft,Hr=I.positioned?-Je/2:-Ve.height/2-ft;if(Dt.attr("class","basic label-container").attr("style",I.style).attr("rx",I.rx).attr("ry",I.ry).attr("x",Xr).attr("y",Hr).attr("width",Ft).attr("height",Je),I.props){const ra=new Set(Object.keys(I.props));I.props.borders&&(ur(Dt,I.props.borders,Ft,Je),ra.delete("borders")),ra.forEach(La=>{w.Rm.warn(`Unknown node property ${La}`)})}return Kt(I,Dt),I.intersect=function(ra){return jt.rect(I,ra)},Jt});return function(Ct,I){return at.apply(this,arguments)}}(),"rect"),Qr=(0,w.K2)(function(){var at=(0,lt.A)(function*(Ct,I){const{shapeSvg:Jt,bbox:Ve,halfPadding:ft}=yield Vt(Ct,I,"node "+I.classes,!0),Dt=Jt.insert("rect",":first-child"),Ft=I.positioned?I.width:Ve.width+I.padding,Je=I.positioned?I.height:Ve.height+I.padding,Xr=I.positioned?-Ft/2:-Ve.width/2-ft,Hr=I.positioned?-Je/2:-Ve.height/2-ft;if(Dt.attr("class","basic cluster composite label-container").attr("style",I.style).attr("rx",I.rx).attr("ry",I.ry).attr("x",Xr).attr("y",Hr).attr("width",Ft).attr("height",Je),I.props){const ra=new Set(Object.keys(I.props));I.props.borders&&(ur(Dt,I.props.borders,Ft,Je),ra.delete("borders")),ra.forEach(La=>{w.Rm.warn(`Unknown node property ${La}`)})}return Kt(I,Dt),I.intersect=function(ra){return jt.rect(I,ra)},Jt});return function(Ct,I){return at.apply(this,arguments)}}(),"composite"),or=(0,w.K2)(function(){var at=(0,lt.A)(function*(Ct,I){const{shapeSvg:Jt}=yield Vt(Ct,I,"label",!0);w.Rm.trace("Classes = ",I.class);const Ve=Jt.insert("rect",":first-child");if(Ve.attr("width",0).attr("height",0),Jt.attr("class","label edgeLabel"),I.props){const Ft=new Set(Object.keys(I.props));I.props.borders&&(ur(Ve,I.props.borders,0,0),Ft.delete("borders")),Ft.forEach(Je=>{w.Rm.warn(`Unknown node property ${Je}`)})}return Kt(I,Ve),I.intersect=function(Ft){return jt.rect(I,Ft)},Jt});return function(Ct,I){return at.apply(this,arguments)}}(),"labelRect");function ur(at,Ct,I,Jt){const Ve=[],ft=(0,w.K2)(Ft=>{Ve.push(Ft,0)},"addBorder"),Dt=(0,w.K2)(Ft=>{Ve.push(0,Ft)},"skipBorder");Ct.includes("t")?(w.Rm.debug("add top border"),ft(I)):Dt(I),Ct.includes("r")?(w.Rm.debug("add right border"),ft(Jt)):Dt(Jt),Ct.includes("b")?(w.Rm.debug("add bottom border"),ft(I)):Dt(I),Ct.includes("l")?(w.Rm.debug("add left border"),ft(Jt)):Dt(Jt),at.attr("stroke-dasharray",Ve.join(" "))}(0,w.K2)(ur,"applyNodePropertyBorders");var W=(0,w.K2)(function(){var at=(0,lt.A)(function*(Ct,I){let Jt;Jt=I.classes?"node "+I.classes:"node default";const Ve=Ct.insert("g").attr("class",Jt).attr("id",I.domId||I.id),ft=Ve.insert("rect",":first-child"),Dt=Ve.insert("line"),Ft=Ve.insert("g").attr("class","label"),Je=I.labelText.flat?I.labelText.flat():I.labelText;let Xr="";Xr="object"==typeof Je?Je[0]:Je,w.Rm.info("Label text abc79",Xr,Je,"object"==typeof Je);const Hr=Ft.node().appendChild(yield sr(Xr,I.labelStyle,!0,!0));let ra={width:0,height:0};if((0,G._3)((0,G.D7)().flowchart.htmlLabels)){const $a=Hr.children[0],yi=(0,Ge.Ltv)(Hr);ra=$a.getBoundingClientRect(),yi.attr("width",ra.width),yi.attr("height",ra.height)}w.Rm.info("Text 2",Je);const La=Je.slice(1,Je.length);let fa=Hr.getBBox();const wa=Ft.node().appendChild(yield sr(La.join?La.join("<br/>"):La,I.labelStyle,!0,!0));if((0,G._3)((0,G.D7)().flowchart.htmlLabels)){const $a=wa.children[0],yi=(0,Ge.Ltv)(wa);ra=$a.getBoundingClientRect(),yi.attr("width",ra.width),yi.attr("height",ra.height)}const ja=I.padding/2;return(0,Ge.Ltv)(wa).attr("transform","translate( "+(ra.width>fa.width?0:(fa.width-ra.width)/2)+", "+(fa.height+ja+5)+")"),(0,Ge.Ltv)(Hr).attr("transform","translate( "+(ra.width<fa.width?0:-(fa.width-ra.width)/2)+", 0)"),ra=Ft.node().getBBox(),Ft.attr("transform","translate("+-ra.width/2+", "+(-ra.height/2-ja+3)+")"),ft.attr("class","outer title-state").attr("x",-ra.width/2-ja).attr("y",-ra.height/2-ja).attr("width",ra.width+I.padding).attr("height",ra.height+I.padding),Dt.attr("class","divider").attr("x1",-ra.width/2-ja).attr("x2",ra.width/2+ja).attr("y1",-ra.height/2-ja+fa.height+ja).attr("y2",-ra.height/2-ja+fa.height+ja),Kt(I,ft),I.intersect=function($a){return jt.rect(I,$a)},Ve});return function(Ct,I){return at.apply(this,arguments)}}(),"rectWithTitle"),$t=(0,w.K2)(function(){var at=(0,lt.A)(function*(Ct,I){const{shapeSvg:Jt,bbox:Ve}=yield Vt(Ct,I,lr(I,void 0),!0),ft=Ve.height+I.padding,Dt=Ve.width+ft/4+I.padding,Ft=Jt.insert("rect",":first-child").attr("style",I.style).attr("rx",ft/2).attr("ry",ft/2).attr("x",-Dt/2).attr("y",-ft/2).attr("width",Dt).attr("height",ft);return Kt(I,Ft),I.intersect=function(Je){return jt.rect(I,Je)},Jt});return function(Ct,I){return at.apply(this,arguments)}}(),"stadium"),Ye=(0,w.K2)(function(){var at=(0,lt.A)(function*(Ct,I){const{shapeSvg:Jt,bbox:Ve,halfPadding:ft}=yield Vt(Ct,I,lr(I,void 0),!0),Dt=Jt.insert("circle",":first-child");return Dt.attr("style",I.style).attr("rx",I.rx).attr("ry",I.ry).attr("r",Ve.width/2+ft).attr("width",Ve.width+I.padding).attr("height",Ve.height+I.padding),w.Rm.info("Circle main"),Kt(I,Dt),I.intersect=function(Ft){return w.Rm.info("Circle intersect",I,Ve.width/2+ft,Ft),jt.circle(I,Ve.width/2+ft,Ft)},Jt});return function(Ct,I){return at.apply(this,arguments)}}(),"circle"),Fe=(0,w.K2)(function(){var at=(0,lt.A)(function*(Ct,I){const{shapeSvg:Jt,bbox:Ve,halfPadding:ft}=yield Vt(Ct,I,lr(I,void 0),!0),Ft=Jt.insert("g",":first-child"),Je=Ft.insert("circle"),Xr=Ft.insert("circle");return Ft.attr("class",I.class),Je.attr("style",I.style).attr("rx",I.rx).attr("ry",I.ry).attr("r",Ve.width/2+ft+5).attr("width",Ve.width+I.padding+10).attr("height",Ve.height+I.padding+10),Xr.attr("style",I.style).attr("rx",I.rx).attr("ry",I.ry).attr("r",Ve.width/2+ft).attr("width",Ve.width+I.padding).attr("height",Ve.height+I.padding),w.Rm.info("DoubleCircle main"),Kt(I,Je),I.intersect=function(Hr){return w.Rm.info("DoubleCircle intersect",I,Ve.width/2+ft+5,Hr),jt.circle(I,Ve.width/2+ft+5,Hr)},Jt});return function(Ct,I){return at.apply(this,arguments)}}(),"doublecircle"),Tr=(0,w.K2)(function(){var at=(0,lt.A)(function*(Ct,I){const{shapeSvg:Jt,bbox:Ve}=yield Vt(Ct,I,lr(I,void 0),!0),ft=Ve.width+I.padding,Dt=Ve.height+I.padding,Ft=[{x:0,y:0},{x:ft,y:0},{x:ft,y:-Dt},{x:0,y:-Dt},{x:0,y:0},{x:-8,y:0},{x:ft+8,y:0},{x:ft+8,y:-Dt},{x:-8,y:-Dt},{x:-8,y:0}],Je=xe(Jt,ft,Dt,Ft);return Je.attr("style",I.style),Kt(I,Je),I.intersect=function(Xr){return jt.polygon(I,Ft,Xr)},Jt});return function(Ct,I){return at.apply(this,arguments)}}(),"subroutine"),pr=(0,w.K2)((at,Ct)=>{const I=at.insert("g").attr("class","node default").attr("id",Ct.domId||Ct.id),Jt=I.insert("circle",":first-child");return Jt.attr("class","state-start").attr("r",7).attr("width",14).attr("height",14),Kt(Ct,Jt),Ct.intersect=function(Ve){return jt.circle(Ct,7,Ve)},I},"start"),da=(0,w.K2)((at,Ct,I)=>{const Jt=at.insert("g").attr("class","node default").attr("id",Ct.domId||Ct.id);let Ve=70,ft=10;"LR"===I&&(Ve=10,ft=70);const Dt=Jt.append("rect").attr("x",-1*Ve/2).attr("y",-1*ft/2).attr("width",Ve).attr("height",ft).attr("class","fork-join");return Kt(Ct,Dt),Ct.height=Ct.height+Ct.padding/2,Ct.width=Ct.width+Ct.padding/2,Ct.intersect=function(Ft){return jt.rect(Ct,Ft)},Jt},"forkJoin"),Wa={rhombus:br,composite:Qr,question:br,rect:jr,labelRect:or,rectWithTitle:W,choice:$e,circle:Ye,doublecircle:Fe,stadium:$t,hexagon:He,block_arrow:wr,rect_left_inv_arrow:kr,lean_right:Kr,lean_left:_r,trapezoid:Jr,inv_trapezoid:Lr,rect_right_inv_arrow:ha,cylinder:ia,start:pr,end:(0,w.K2)((at,Ct)=>{const I=at.insert("g").attr("class","node default").attr("id",Ct.domId||Ct.id),Jt=I.insert("circle",":first-child"),Ve=I.insert("circle",":first-child");return Ve.attr("class","state-start").attr("r",7).attr("width",14).attr("height",14),Jt.attr("class","state-end").attr("r",5).attr("width",10).attr("height",10),Kt(Ct,Ve),Ct.intersect=function(ft){return jt.circle(Ct,7,ft)},I},"end"),note:Ke,subroutine:Tr,fork:da,join:da,class_box:(0,w.K2)(function(){var at=(0,lt.A)(function*(Ct,I){const Jt=I.padding/2;let Dt;Dt=I.classes?"node "+I.classes:"node default";const Ft=Ct.insert("g").attr("class",Dt).attr("id",I.domId||I.id),Je=Ft.insert("rect",":first-child"),Xr=Ft.insert("line"),Hr=Ft.insert("line");let ra=0,La=4;const fa=Ft.insert("g").attr("class","label");let wa=0;const ja=I.classData.annotations?.[0],$a=I.classData.annotations[0]?"\xab"+I.classData.annotations[0]+"\xbb":"",yi=fa.node().appendChild(yield sr($a,I.labelStyle,!0,!0));let Ei=yi.getBBox();if((0,G._3)((0,G.D7)().flowchart.htmlLabels)){const Mr=yi.children[0],Pi=(0,Ge.Ltv)(yi);Ei=Mr.getBoundingClientRect(),Pi.attr("width",Ei.width),Pi.attr("height",Ei.height)}I.classData.annotations[0]&&(La+=Ei.height+4,ra+=Ei.width);let mi=I.classData.label;void 0!==I.classData.type&&""!==I.classData.type&&((0,G.D7)().flowchart.htmlLabels?mi+="&lt;"+I.classData.type+"&gt;":mi+="<"+I.classData.type+">");const Na=fa.node().appendChild(yield sr(mi,I.labelStyle,!0,!0));(0,Ge.Ltv)(Na).attr("class","classTitle");let Rr=Na.getBBox();if((0,G._3)((0,G.D7)().flowchart.htmlLabels)){const Mr=Na.children[0],Pi=(0,Ge.Ltv)(Na);Rr=Mr.getBoundingClientRect(),Pi.attr("width",Rr.width),Pi.attr("height",Rr.height)}La+=Rr.height+4,Rr.width>ra&&(ra=Rr.width);const ya=[];I.classData.members.forEach(function(){var Mr=(0,lt.A)(function*(Pi){const ua=Pi.getDisplayDetails();let ki=ua.displayText;(0,G.D7)().flowchart.htmlLabels&&(ki=ki.replace(/</g,"&lt;").replace(/>/g,"&gt;"));const Bi=fa.node().appendChild(yield sr(ki,ua.cssStyle?ua.cssStyle:I.labelStyle,!0,!0));let Wi=Bi.getBBox();if((0,G._3)((0,G.D7)().flowchart.htmlLabels)){const ln=Bi.children[0],Ji=(0,Ge.Ltv)(Bi);Wi=ln.getBoundingClientRect(),Ji.attr("width",Wi.width),Ji.attr("height",Wi.height)}Wi.width>ra&&(ra=Wi.width),La+=Wi.height+4,ya.push(Bi)});return function(Pi){return Mr.apply(this,arguments)}}()),La+=8;const Ya=[];if(I.classData.methods.forEach(function(){var Mr=(0,lt.A)(function*(Pi){const ua=Pi.getDisplayDetails();let ki=ua.displayText;(0,G.D7)().flowchart.htmlLabels&&(ki=ki.replace(/</g,"&lt;").replace(/>/g,"&gt;"));const Bi=fa.node().appendChild(yield sr(ki,ua.cssStyle?ua.cssStyle:I.labelStyle,!0,!0));let Wi=Bi.getBBox();if((0,G._3)((0,G.D7)().flowchart.htmlLabels)){const ln=Bi.children[0],Ji=(0,Ge.Ltv)(Bi);Wi=ln.getBoundingClientRect(),Ji.attr("width",Wi.width),Ji.attr("height",Wi.height)}Wi.width>ra&&(ra=Wi.width),La+=Wi.height+4,Ya.push(Bi)});return function(Pi){return Mr.apply(this,arguments)}}()),La+=8,ja){let Mr=(ra-Ei.width)/2;(0,Ge.Ltv)(yi).attr("transform","translate( "+(-1*ra/2+Mr)+", "+-1*La/2+")"),wa=Ei.height+4}let ni=(ra-Rr.width)/2;return(0,Ge.Ltv)(Na).attr("transform","translate( "+(-1*ra/2+ni)+", "+(-1*La/2+wa)+")"),wa+=Rr.height+4,Xr.attr("class","divider").attr("x1",-ra/2-Jt).attr("x2",ra/2+Jt).attr("y1",-La/2-Jt+8+wa).attr("y2",-La/2-Jt+8+wa),wa+=8,ya.forEach(Mr=>{(0,Ge.Ltv)(Mr).attr("transform","translate( "+-ra/2+", "+(-1*La/2+wa+4)+")");const Pi=Mr?.getBBox();wa+=(Pi?.height??0)+4}),wa+=8,Hr.attr("class","divider").attr("x1",-ra/2-Jt).attr("x2",ra/2+Jt).attr("y1",-La/2-Jt+8+wa).attr("y2",-La/2-Jt+8+wa),wa+=8,Ya.forEach(Mr=>{(0,Ge.Ltv)(Mr).attr("transform","translate( "+-ra/2+", "+(-1*La/2+wa)+")");const Pi=Mr?.getBBox();wa+=(Pi?.height??0)+4}),Je.attr("style",I.style).attr("class","outer title-state").attr("x",-ra/2-Jt).attr("y",-La/2-Jt).attr("width",ra+I.padding).attr("height",La+I.padding),Kt(I,Je),I.intersect=function(Mr){return jt.rect(I,Mr)},Ft});return function(Ct,I){return at.apply(this,arguments)}}(),"class_box")},Ia={},ba=(0,w.K2)(function(){var at=(0,lt.A)(function*(Ct,I,Jt){let Ve,ft;if(I.link){let Dt;"sandbox"===(0,G.D7)().securityLevel?Dt="_top":I.linkTarget&&(Dt=I.linkTarget||"_blank"),Ve=Ct.insert("svg:a").attr("xlink:href",I.link).attr("target",Dt),ft=yield Wa[I.shape](Ve,I,Jt)}else ft=yield Wa[I.shape](Ct,I,Jt),Ve=ft;return I.tooltip&&ft.attr("title",I.tooltip),I.class&&ft.attr("class","node default "+I.class),Ia[I.id]=Ve,I.haveCallback&&Ia[I.id].attr("class",Ia[I.id].attr("class")+" clickable"),Ve});return function(Ct,I,Jt){return at.apply(this,arguments)}}(),"insertNode"),sa=(0,w.K2)(at=>{const Ct=Ia[at.id];w.Rm.trace("Transforming node",at.diff,at,"translate("+(at.x-at.width/2-5)+", "+at.width/2+")");const Jt=at.diff||0;return Ct.attr("transform",at.clusterNode?"translate("+(at.x+Jt-at.width/2)+", "+(at.y-at.height/2-8)+")":"translate("+at.x+", "+at.y+")"),Jt},"positionNode");function Sa(at,Ct,I=!1){const Jt=at;let Ve="default";(Jt?.classes?.length||0)>0&&(Ve=(Jt?.classes??[]).join(" ")),Ve+=" flowchart-label";let Ft,ft=0,Dt="";switch(Jt.type){case"round":ft=5,Dt="rect";break;case"composite":ft=0,Dt="composite",Ft=0;break;case"square":case"group":default:Dt="rect";break;case"diamond":Dt="question";break;case"hexagon":Dt="hexagon";break;case"block_arrow":Dt="block_arrow";break;case"odd":case"rect_left_inv_arrow":Dt="rect_left_inv_arrow";break;case"lean_right":Dt="lean_right";break;case"lean_left":Dt="lean_left";break;case"trapezoid":Dt="trapezoid";break;case"inv_trapezoid":Dt="inv_trapezoid";break;case"circle":Dt="circle";break;case"ellipse":Dt="ellipse";break;case"stadium":Dt="stadium";break;case"subroutine":Dt="subroutine";break;case"cylinder":Dt="cylinder";break;case"doublecircle":Dt="doublecircle"}const Je=(0,ut.sM)(Jt?.styles??[]),Hr=Jt.size??{width:0,height:0,x:0,y:0};return{labelStyle:Je.labelStyle,shape:Dt,labelText:Jt.label,rx:ft,ry:ft,class:Ve,style:Je.style,id:Jt.id,directions:Jt.directions,width:Hr.width,height:Hr.height,x:Hr.x,y:Hr.y,positioned:I,intersect:void 0,type:Jt.type,padding:Ft??(0,G.zj)()?.block?.padding??0}}function ea(at,Ct,I){return Va.apply(this,arguments)}function Va(){return(Va=(0,lt.A)(function*(at,Ct,I){const Jt=Sa(Ct,0,!1);if("group"===Jt.type)return;const Ve=(0,G.zj)(),ft=yield ba(at,Jt,{config:Ve}),Dt=ft.node().getBBox(),Ft=I.getBlock(Jt.id);Ft.size={width:Dt.width,height:Dt.height,x:0,y:0,node:ft},I.setBlock(Ft),ft.remove()})).apply(this,arguments)}function gr(at,Ct,I){return Ua.apply(this,arguments)}function Ua(){return(Ua=(0,lt.A)(function*(at,Ct,I){const Jt=Sa(Ct,0,!0);if("space"!==I.getBlock(Jt.id).type){const ft=(0,G.zj)();yield ba(at,Jt,{config:ft}),Ct.intersect=Jt?.intersect,sa(Jt)}})).apply(this,arguments)}function ir(at,Ct,I,Jt){return Oa.apply(this,arguments)}function Oa(){return(Oa=(0,lt.A)(function*(at,Ct,I,Jt){for(const Ve of Ct)yield Jt(at,Ve,I),Ve.children&&(yield ir(at,Ve.children,I,Jt))})).apply(this,arguments)}function Ka(at,Ct,I){return Ja.apply(this,arguments)}function Ja(){return(Ja=(0,lt.A)(function*(at,Ct,I){yield ir(at,Ct,I,ea)})).apply(this,arguments)}function _a(at,Ct,I){return qa.apply(this,arguments)}function qa(){return(qa=(0,lt.A)(function*(at,Ct,I){yield ir(at,Ct,I,gr)})).apply(this,arguments)}function Ha(at,Ct,I,Jt,Ve){return oa.apply(this,arguments)}function oa(){return(oa=(0,lt.A)(function*(at,Ct,I,Jt,Ve){const ft=new bt.T({multigraph:!0,compound:!0});ft.setGraph({rankdir:"TB",nodesep:10,ranksep:10,marginx:8,marginy:8});for(const Dt of I)Dt.size&&ft.setNode(Dt.id,{width:Dt.size.width,height:Dt.size.height,intersect:Dt.intersect});for(const Dt of Ct)if(Dt.start&&Dt.end){const Ft=Jt.getBlock(Dt.start),Je=Jt.getBlock(Dt.end);if(Ft?.size&&Je?.size){const Xr=Ft.size,Hr=Je.size,ra=[{x:Xr.x,y:Xr.y},{x:Xr.x+(Hr.x-Xr.x)/2,y:Xr.y+(Hr.y-Xr.y)/2},{x:Hr.x,y:Hr.y}];ne(at,{v:Dt.start,w:Dt.end,name:Dt.id},{...Dt,arrowTypeEnd:Dt.arrowTypeEnd,arrowTypeStart:Dt.arrowTypeStart,points:ra,classes:"edge-thickness-normal edge-pattern-solid flowchart-link LS-a1 LE-b1"},void 0,"block",ft,Ve),Dt.label&&(yield Qe(at,{...Dt,label:Dt.label,labelStyle:"stroke: #333; stroke-width: 1.5px;fill:none;",arrowTypeEnd:Dt.arrowTypeEnd,arrowTypeStart:Dt.arrowTypeStart,points:ra,classes:"edge-thickness-normal edge-pattern-solid flowchart-link LS-a1 LE-b1"}),_e({...Dt,x:ra[1].x,y:ra[1].y},{originalPath:ra}))}}})).apply(this,arguments)}(0,w.K2)(Sa,"getNodeFromBlock"),(0,w.K2)(ea,"calculateBlockSize"),(0,w.K2)(gr,"insertBlockPositioned"),(0,w.K2)(ir,"performOperations"),(0,w.K2)(Ka,"calculateBlockSizes"),(0,w.K2)(_a,"insertBlocks"),(0,w.K2)(Ha,"insertEdges");var hi=(0,w.K2)(function(at,Ct){return Ct.db.getClasses()},"getClasses"),Ne={parser:j,db:qe,renderer:{draw:(0,w.K2)(function(){var at=(0,lt.A)(function*(Ct,I,Jt,Ve){const{securityLevel:ft,block:Dt}=(0,G.zj)(),Ft=Ve.db;let Je;"sandbox"===ft&&(Je=(0,Ge.Ltv)("#i"+I));const Xr=(0,Ge.Ltv)("sandbox"===ft?Je.nodes()[0].contentDocument.body:"body"),Hr="sandbox"===ft?Xr.select(`[id="${I}"]`):(0,Ge.Ltv)(`[id="${I}"]`);ke(Hr,["point","circle","cross"],Ve.type,I);const La=Ft.getBlocks(),fa=Ft.getBlocksFlat(),wa=Ft.getEdges(),ja=Hr.insert("g").attr("class","block");yield Ka(ja,La,Ft);const $a=yr(Ft);if(yield _a(ja,La,Ft),yield Ha(ja,wa,fa,Ft,I),$a){const yi=$a,Ei=Math.max(1,Math.round(yi.width/yi.height*.125)),mi=yi.height+Ei+10,Na=yi.width+10,{useMaxWidth:Rr}=Dt;(0,G.a$)(Hr,mi,Na,!!Rr),w.Rm.debug("Here Bounds",$a,yi),Hr.attr("viewBox",`${yi.x-5} ${yi.y-5} ${yi.width+10} ${yi.height+10}`)}});return function(Ct,I,Jt,Ve){return at.apply(this,arguments)}}(),"draw"),getClasses:hi},styles:Tt}},28957:(ri,Er,P)=>{"use strict";P.r(Er),P.d(Er,{diagram:()=>Et});var lt=P(79006),ie=P(32303),L=P(40622),D=P(79687),Mt=function(){var Tt=(0,ie.K2)(function(ke,Pt,Zt,pe){for(Zt=Zt||{},pe=ke.length;pe--;Zt[ke[pe]]=Pt);return Zt},"o"),B=[6,8,10,11,12,14,16,17,20,21],N=[1,9],et=[1,10],yt=[1,11],it=[1,12],rt=[1,13],_t=[1,16],ht=[1,17],Ot={trace:(0,ie.K2)(function(){},"trace"),yy:{},symbols_:{error:2,start:3,timeline:4,document:5,EOF:6,line:7,SPACE:8,statement:9,NEWLINE:10,title:11,acc_title:12,acc_title_value:13,acc_descr:14,acc_descr_value:15,acc_descr_multiline_value:16,section:17,period_statement:18,event_statement:19,period:20,event:21,$accept:0,$end:1},terminals_:{2:"error",4:"timeline",6:"EOF",8:"SPACE",10:"NEWLINE",11:"title",12:"acc_title",13:"acc_title_value",14:"acc_descr",15:"acc_descr_value",16:"acc_descr_multiline_value",17:"section",20:"period",21:"event"},productions_:[0,[3,3],[5,0],[5,2],[7,2],[7,1],[7,1],[7,1],[9,1],[9,2],[9,2],[9,1],[9,1],[9,1],[9,1],[18,1],[19,1]],performAction:(0,ie.K2)(function(Pt,Zt,pe,Re,Ze,de,yr){var mr=de.length-1;switch(Ze){case 1:return de[mr-1];case 2:case 6:case 7:this.$=[];break;case 3:de[mr-1].push(de[mr]),this.$=de[mr-1];break;case 4:case 5:this.$=de[mr];break;case 8:Re.getCommonDb().setDiagramTitle(de[mr].substr(6)),this.$=de[mr].substr(6);break;case 9:this.$=de[mr].trim(),Re.getCommonDb().setAccTitle(this.$);break;case 10:case 11:this.$=de[mr].trim(),Re.getCommonDb().setAccDescription(this.$);break;case 12:Re.addSection(de[mr].substr(8)),this.$=de[mr].substr(8);break;case 15:Re.addTask(de[mr],0,""),this.$=de[mr];break;case 16:Re.addEvent(de[mr].substr(2)),this.$=de[mr]}},"anonymous"),table:[{3:1,4:[1,2]},{1:[3]},Tt(B,[2,2],{5:3}),{6:[1,4],7:5,8:[1,6],9:7,10:[1,8],11:N,12:et,14:yt,16:it,17:rt,18:14,19:15,20:_t,21:ht},Tt(B,[2,7],{1:[2,1]}),Tt(B,[2,3]),{9:18,11:N,12:et,14:yt,16:it,17:rt,18:14,19:15,20:_t,21:ht},Tt(B,[2,5]),Tt(B,[2,6]),Tt(B,[2,8]),{13:[1,19]},{15:[1,20]},Tt(B,[2,11]),Tt(B,[2,12]),Tt(B,[2,13]),Tt(B,[2,14]),Tt(B,[2,15]),Tt(B,[2,16]),Tt(B,[2,4]),Tt(B,[2,9]),Tt(B,[2,10])],defaultActions:{},parseError:(0,ie.K2)(function(Pt,Zt){if(!Zt.recoverable){var pe=new Error(Pt);throw pe.hash=Zt,pe}this.trace(Pt)},"parseError"),parse:(0,ie.K2)(function(Pt){var Zt=this,pe=[0],Re=[],Ze=[null],de=[],yr=this.table,mr="",Wt=0,we=0,sr=0,Ee=de.slice.call(arguments,1),Ae=Object.create(this.lexer),er={yy:{}};for(var Qe in this.yy)Object.prototype.hasOwnProperty.call(this.yy,Qe)&&(er.yy[Qe]=this.yy[Qe]);Ae.setInput(Pt,er.yy),er.yy.lexer=Ae,er.yy.parser=this,typeof Ae.yylloc>"u"&&(Ae.yylloc={});var Dr=Ae.yylloc;de.push(Dr);var _e=Ae.options&&Ae.options.ranges;function nr(){var C;return"number"!=typeof(C=Re.pop()||Ae.lex()||1)&&(C instanceof Array&&(C=(Re=C).pop()),C=Zt.symbols_[C]||C),C}this.parseError="function"==typeof er.yy.parseError?er.yy.parseError:Object.getPrototypeOf(this).parseError,(0,ie.K2)(function Yr(C){pe.length=pe.length-2*C,Ze.length=Ze.length-C,de.length=de.length-C},"popStack"),(0,ie.K2)(nr,"lex");for(var te,ne,be,ar,y,M,m,v,E={};;){if(this.defaultActions[be=pe[pe.length-1]]?ar=this.defaultActions[be]:((null===te||typeof te>"u")&&(te=nr()),ar=yr[be]&&yr[be][te]),typeof ar>"u"||!ar.length||!ar[0]){var b;for(M in v=[],yr[be])this.terminals_[M]&&M>2&&v.push("'"+this.terminals_[M]+"'");b=Ae.showPosition?"Parse error on line "+(Wt+1)+":\n"+Ae.showPosition()+"\nExpecting "+v.join(", ")+", got '"+(this.terminals_[te]||te)+"'":"Parse error on line "+(Wt+1)+": Unexpected "+(1==te?"end of input":"'"+(this.terminals_[te]||te)+"'"),this.parseError(b,{text:Ae.match,token:this.terminals_[te]||te,line:Ae.yylineno,loc:Dr,expected:v})}if(ar[0]instanceof Array&&ar.length>1)throw new Error("Parse Error: multiple actions possible at state: "+be+", token: "+te);switch(ar[0]){case 1:pe.push(te),Ze.push(Ae.yytext),de.push(Ae.yylloc),pe.push(ar[1]),te=null,ne?(te=ne,ne=null):(we=Ae.yyleng,mr=Ae.yytext,Wt=Ae.yylineno,Dr=Ae.yylloc,sr>0&&sr--);break;case 2:if(E.$=Ze[Ze.length-(m=this.productions_[ar[1]][1])],E._$={first_line:de[de.length-(m||1)].first_line,last_line:de[de.length-1].last_line,first_column:de[de.length-(m||1)].first_column,last_column:de[de.length-1].last_column},_e&&(E._$.range=[de[de.length-(m||1)].range[0],de[de.length-1].range[1]]),typeof(y=this.performAction.apply(E,[mr,we,Wt,er.yy,ar[1],Ze,de].concat(Ee)))<"u")return y;m&&(pe=pe.slice(0,-1*m*2),Ze=Ze.slice(0,-1*m),de=de.slice(0,-1*m)),pe.push(this.productions_[ar[1]][0]),Ze.push(E.$),de.push(E._$),pe.push(yr[pe[pe.length-2]][pe[pe.length-1]]);break;case 3:return!0}}return!0},"parse")};function ot(){this.yy={}}return Ot.lexer=function(){return{EOF:1,parseError:(0,ie.K2)(function(Zt,pe){if(!this.yy.parser)throw new Error(Zt);this.yy.parser.parseError(Zt,pe)},"parseError"),setInput:(0,ie.K2)(function(Pt,Zt){return this.yy=Zt||this.yy||{},this._input=Pt,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},"setInput"),input:(0,ie.K2)(function(){var Pt=this._input[0];return this.yytext+=Pt,this.yyleng++,this.offset++,this.match+=Pt,this.matched+=Pt,Pt.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),Pt},"input"),unput:(0,ie.K2)(function(Pt){var Zt=Pt.length,pe=Pt.split(/(?:\r\n?|\n)/g);this._input=Pt+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-Zt),this.offset-=Zt;var Re=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),pe.length-1&&(this.yylineno-=pe.length-1);var Ze=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:pe?(pe.length===Re.length?this.yylloc.first_column:0)+Re[Re.length-pe.length].length-pe[0].length:this.yylloc.first_column-Zt},this.options.ranges&&(this.yylloc.range=[Ze[0],Ze[0]+this.yyleng-Zt]),this.yyleng=this.yytext.length,this},"unput"),more:(0,ie.K2)(function(){return this._more=!0,this},"more"),reject:(0,ie.K2)(function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},"reject"),less:(0,ie.K2)(function(Pt){this.unput(this.match.slice(Pt))},"less"),pastInput:(0,ie.K2)(function(){var Pt=this.matched.substr(0,this.matched.length-this.match.length);return(Pt.length>20?"...":"")+Pt.substr(-20).replace(/\n/g,"")},"pastInput"),upcomingInput:(0,ie.K2)(function(){var Pt=this.match;return Pt.length<20&&(Pt+=this._input.substr(0,20-Pt.length)),(Pt.substr(0,20)+(Pt.length>20?"...":"")).replace(/\n/g,"")},"upcomingInput"),showPosition:(0,ie.K2)(function(){var Pt=this.pastInput(),Zt=new Array(Pt.length+1).join("-");return Pt+this.upcomingInput()+"\n"+Zt+"^"},"showPosition"),test_match:(0,ie.K2)(function(Pt,Zt){var pe,Re,Ze;if(this.options.backtrack_lexer&&(Ze={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(Ze.yylloc.range=this.yylloc.range.slice(0))),(Re=Pt[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=Re.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:Re?Re[Re.length-1].length-Re[Re.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+Pt[0].length},this.yytext+=Pt[0],this.match+=Pt[0],this.matches=Pt,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(Pt[0].length),this.matched+=Pt[0],pe=this.performAction.call(this,this.yy,this,Zt,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),pe)return pe;if(this._backtrack){for(var de in Ze)this[de]=Ze[de];return!1}return!1},"test_match"),next:(0,ie.K2)(function(){if(this.done)return this.EOF;var Pt,Zt,pe,Re;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var Ze=this._currentRules(),de=0;de<Ze.length;de++)if((pe=this._input.match(this.rules[Ze[de]]))&&(!Zt||pe[0].length>Zt[0].length)){if(Zt=pe,Re=de,this.options.backtrack_lexer){if(!1!==(Pt=this.test_match(pe,Ze[de])))return Pt;if(this._backtrack){Zt=!1;continue}return!1}if(!this.options.flex)break}return Zt?!1!==(Pt=this.test_match(Zt,Ze[Re]))&&Pt:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},"next"),lex:(0,ie.K2)(function(){return this.next()||this.lex()},"lex"),begin:(0,ie.K2)(function(Zt){this.conditionStack.push(Zt)},"begin"),popState:(0,ie.K2)(function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},"popState"),_currentRules:(0,ie.K2)(function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},"_currentRules"),topState:(0,ie.K2)(function(Zt){return(Zt=this.conditionStack.length-1-Math.abs(Zt||0))>=0?this.conditionStack[Zt]:"INITIAL"},"topState"),pushState:(0,ie.K2)(function(Zt){this.begin(Zt)},"pushState"),stateStackSize:(0,ie.K2)(function(){return this.conditionStack.length},"stateStackSize"),options:{"case-insensitive":!0},performAction:(0,ie.K2)(function(Zt,pe,Re,Ze){switch(Re){case 0:case 1:case 3:case 4:break;case 2:return 10;case 5:return 4;case 6:return 11;case 7:return this.begin("acc_title"),12;case 8:return this.popState(),"acc_title_value";case 9:return this.begin("acc_descr"),14;case 10:return this.popState(),"acc_descr_value";case 11:this.begin("acc_descr_multiline");break;case 12:this.popState();break;case 13:return"acc_descr_multiline_value";case 14:return 17;case 15:return 21;case 16:return 20;case 17:return 6;case 18:return"INVALID"}},"anonymous"),rules:[/^(?:%(?!\{)[^\n]*)/i,/^(?:[^\}]%%[^\n]*)/i,/^(?:[\n]+)/i,/^(?:\s+)/i,/^(?:#[^\n]*)/i,/^(?:timeline\b)/i,/^(?:title\s[^\n]+)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:section\s[^:\n]+)/i,/^(?::\s(?:[^:\n]|:(?!\s))+)/i,/^(?:[^#:\n]+)/i,/^(?:$)/i,/^(?:.)/i],conditions:{acc_descr_multiline:{rules:[12,13],inclusive:!1},acc_descr:{rules:[10],inclusive:!1},acc_title:{rules:[8],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,5,6,7,9,11,14,15,16,17,18],inclusive:!0}}}}(),(0,ie.K2)(ot,"Parser"),ot.prototype=Ot,Ot.Parser=ot,new ot}();Mt.parser=Mt;var ut=Mt,G={};(0,ie.VA)(G,{addEvent:()=>Br,addSection:()=>hr,addTask:()=>Wr,addTaskOrg:()=>Gr,clear:()=>j,default:()=>zr,getCommonDb:()=>Gt,getSections:()=>ze,getTasks:()=>vr});var w="",Lt=0,At=[],Ge=[],bt=[],Gt=(0,ie.K2)(()=>lt.Wt,"getCommonDb"),j=(0,ie.K2)(function(){At.length=0,Ge.length=0,w="",bt.length=0,(0,lt.IU)()},"clear"),hr=(0,ie.K2)(function(Tt){w=Tt,At.push(Tt)},"addSection"),ze=(0,ie.K2)(function(){return At},"getSections"),vr=(0,ie.K2)(function(){let Tt=aa(),N=0;for(;!Tt&&N<100;)Tt=aa(),N++;return Ge.push(...bt),Ge},"getTasks"),Wr=(0,ie.K2)(function(Tt,B,N){const et={id:Lt++,section:w,type:w,task:Tt,score:B||0,events:N?[N]:[]};bt.push(et)},"addTask"),Br=(0,ie.K2)(function(Tt){bt.find(N=>N.id===Lt-1).events.push(Tt)},"addEvent"),Gr=(0,ie.K2)(function(Tt){Ge.push({section:w,type:w,description:Tt,task:Tt,classes:[]})},"addTaskOrg"),aa=(0,ie.K2)(function(){const Tt=(0,ie.K2)(function(N){return bt[N].processed},"compileTask");let B=!0;for(const[N,et]of bt.entries())Tt(N),B=B&&et.processed;return B},"compileTasks"),zr={clear:j,getCommonDb:Gt,addSection:hr,getSections:ze,getTasks:vr,addTask:Wr,addTaskOrg:Gr,addEvent:Br},Be=(0,ie.K2)(function(Tt,B){const N=Tt.append("rect");return N.attr("x",B.x),N.attr("y",B.y),N.attr("fill",B.fill),N.attr("stroke",B.stroke),N.attr("width",B.width),N.attr("height",B.height),N.attr("rx",B.rx),N.attr("ry",B.ry),void 0!==B.class&&N.attr("class",B.class),N},"drawRect"),Ir=(0,ie.K2)(function(Tt,B){const et=Tt.append("circle").attr("cx",B.cx).attr("cy",B.cy).attr("class","face").attr("r",15).attr("stroke-width",2).attr("overflow","visible"),yt=Tt.append("g");function it(ht){const Ot=(0,L.JLW)().startAngle(Math.PI/2).endAngle(Math.PI/2*3).innerRadius(7.5).outerRadius(6.8181818181818175);ht.append("path").attr("class","mouth").attr("d",Ot).attr("transform","translate("+B.cx+","+(B.cy+2)+")")}function rt(ht){const Ot=(0,L.JLW)().startAngle(3*Math.PI/2).endAngle(Math.PI/2*5).innerRadius(7.5).outerRadius(6.8181818181818175);ht.append("path").attr("class","mouth").attr("d",Ot).attr("transform","translate("+B.cx+","+(B.cy+7)+")")}function _t(ht){ht.append("line").attr("class","mouth").attr("stroke",2).attr("x1",B.cx-5).attr("y1",B.cy+7).attr("x2",B.cx+5).attr("y2",B.cy+7).attr("class","mouth").attr("stroke-width","1px").attr("stroke","#666")}return yt.append("circle").attr("cx",B.cx-5).attr("cy",B.cy-5).attr("r",1.5).attr("stroke-width",2).attr("fill","#666").attr("stroke","#666"),yt.append("circle").attr("cx",B.cx+5).attr("cy",B.cy-5).attr("r",1.5).attr("stroke-width",2).attr("fill","#666").attr("stroke","#666"),(0,ie.K2)(it,"smile"),(0,ie.K2)(rt,"sad"),(0,ie.K2)(_t,"ambivalent"),B.score>3?it(yt):B.score<3?rt(yt):_t(yt),et},"drawFace"),Xe=(0,ie.K2)(function(Tt,B){const N=Tt.append("circle");return N.attr("cx",B.cx),N.attr("cy",B.cy),N.attr("class","actor-"+B.pos),N.attr("fill",B.fill),N.attr("stroke",B.stroke),N.attr("r",B.r),void 0!==N.class&&N.attr("class",N.class),void 0!==B.title&&N.append("title").text(B.title),N},"drawCircle"),z=(0,ie.K2)(function(Tt,B){const N=B.text.replace(/<br\s*\/?>/gi," "),et=Tt.append("text");et.attr("x",B.x),et.attr("y",B.y),et.attr("class","legend"),et.style("text-anchor",B.anchor),void 0!==B.class&&et.attr("class",B.class);const yt=et.append("tspan");return yt.attr("x",B.x+2*B.textMargin),yt.text(N),et},"drawText"),dt=(0,ie.K2)(function(Tt,B){function N(yt,it,rt,_t,ht){return yt+","+it+" "+(yt+rt)+","+it+" "+(yt+rt)+","+(it+_t-ht)+" "+(yt+rt-1.2*ht)+","+(it+_t)+" "+yt+","+(it+_t)}(0,ie.K2)(N,"genPoints");const et=Tt.append("polygon");et.attr("points",N(B.x,B.y,50,20,7)),et.attr("class","labelBox"),B.y=B.y+B.labelMargin,B.x=B.x+.5*B.labelMargin,z(Tt,B)},"drawLabel"),Bt=(0,ie.K2)(function(Tt,B,N){const et=Tt.append("g"),yt=ee();yt.x=B.x,yt.y=B.y,yt.fill=B.fill,yt.width=N.width,yt.height=N.height,yt.class="journey-section section-type-"+B.num,yt.rx=3,yt.ry=3,Be(et,yt),Rt(N)(B.text,et,yt.x,yt.y,yt.width,yt.height,{class:"journey-section section-type-"+B.num},N,B.colour)},"drawSection"),Se=-1,X=(0,ie.K2)(function(Tt,B,N){const et=B.x+N.width/2,yt=Tt.append("g");Se++,yt.append("line").attr("id","task"+Se).attr("x1",et).attr("y1",B.y).attr("x2",et).attr("y2",450).attr("class","task-line").attr("stroke-width","1px").attr("stroke-dasharray","4 2").attr("stroke","#666"),Ir(yt,{cx:et,cy:300+30*(5-B.score),score:B.score});const rt=ee();rt.x=B.x,rt.y=B.y,rt.fill=B.fill,rt.width=N.width,rt.height=N.height,rt.class="task task-type-"+B.num,rt.rx=3,rt.ry=3,Be(yt,rt),Rt(N)(B.task,yt,rt.x,rt.y,rt.width,rt.height,{class:"task"},N,B.colour)},"drawTask"),re=(0,ie.K2)(function(Tt,B){Be(Tt,{x:B.startx,y:B.starty,width:B.stopx-B.startx,height:B.stopy-B.starty,fill:B.fill,class:"rect"}).lower()},"drawBackgroundRect"),S=(0,ie.K2)(function(){return{x:0,y:0,fill:void 0,"text-anchor":"start",width:100,height:100,textMargin:0,rx:0,ry:0}},"getTextObj"),ee=(0,ie.K2)(function(){return{x:0,y:0,width:100,anchor:"start",height:100,rx:0,ry:0}},"getNoteRect"),Rt=function(){function Tt(yt,it,rt,_t,ht,Ot,H,ot){et(it.append("text").attr("x",rt+ht/2).attr("y",_t+Ot/2+5).style("font-color",ot).style("text-anchor","middle").text(yt),H)}function B(yt,it,rt,_t,ht,Ot,H,ot,ke){const{taskFontSize:Pt,taskFontFamily:Zt}=ot,pe=yt.split(/<br\s*\/?>/gi);for(let Re=0;Re<pe.length;Re++){const Ze=Re*Pt-Pt*(pe.length-1)/2,de=it.append("text").attr("x",rt+ht/2).attr("y",_t).attr("fill",ke).style("text-anchor","middle").style("font-size",Pt).style("font-family",Zt);de.append("tspan").attr("x",rt+ht/2).attr("dy",Ze).text(pe[Re]),de.attr("y",_t+Ot/2).attr("dominant-baseline","central").attr("alignment-baseline","central"),et(de,H)}}function N(yt,it,rt,_t,ht,Ot,H,ot){const ke=it.append("switch"),Zt=ke.append("foreignObject").attr("x",rt).attr("y",_t).attr("width",ht).attr("height",Ot).attr("position","fixed").append("xhtml:div").style("display","table").style("height","100%").style("width","100%");Zt.append("div").attr("class","label").style("display","table-cell").style("text-align","center").style("vertical-align","middle").text(yt),B(yt,ke,rt,_t,ht,Ot,H,ot),et(Zt,H)}function et(yt,it){for(const rt in it)rt in it&&yt.attr(rt,it[rt])}return(0,ie.K2)(Tt,"byText"),(0,ie.K2)(B,"byTspan"),(0,ie.K2)(N,"byFo"),(0,ie.K2)(et,"_setTextAttrs"),function(yt){return"fo"===yt.textPlacement?N:"old"===yt.textPlacement?Tt:B}}(),qt=(0,ie.K2)(function(Tt){Tt.append("defs").append("marker").attr("id","arrowhead").attr("refX",5).attr("refY",2).attr("markerWidth",6).attr("markerHeight",4).attr("orient","auto").append("path").attr("d","M 0,0 V 4 L6,2 Z")},"initGraphics");function V(Tt,B){Tt.each(function(){var yt,N=(0,L.Ltv)(this),et=N.text().split(/(\s+|<br>)/).reverse(),it=[],_t=N.attr("y"),ht=parseFloat(N.attr("dy")),Ot=N.text(null).append("tspan").attr("x",0).attr("y",_t).attr("dy",ht+"em");for(let H=0;H<et.length;H++)it.push(yt=et[et.length-1-H]),Ot.text(it.join(" ").trim()),(Ot.node().getComputedTextLength()>B||"<br>"===yt)&&(it.pop(),Ot.text(it.join(" ").trim()),it="<br>"===yt?[""]:[yt],Ot=N.append("tspan").attr("x",0).attr("y",_t).attr("dy","1.1em").text(yt))})}(0,ie.K2)(V,"wrap");var gt=(0,ie.K2)(function(Tt,B,N,et){const yt=N%12-1,it=Tt.append("g");B.section=yt,it.attr("class",(B.class?B.class+" ":"")+"timeline-node section-"+yt);const rt=it.append("g"),_t=it.append("g"),Ot=_t.append("text").text(B.descr).attr("dy","1em").attr("alignment-baseline","middle").attr("dominant-baseline","middle").attr("text-anchor","middle").call(V,B.width).node().getBBox(),H=et.fontSize?.replace?et.fontSize.replace("px",""):et.fontSize;return B.height=Ot.height+1.1*H*.5+B.padding,B.height=Math.max(B.height,B.maxHeight),B.width=B.width+2*B.padding,_t.attr("transform","translate("+B.width/2+", "+B.padding/2+")"),Nt(rt,B,yt,et),B},"drawNode"),Y=(0,ie.K2)(function(Tt,B,N){const et=Tt.append("g"),it=et.append("text").text(B.descr).attr("dy","1em").attr("alignment-baseline","middle").attr("dominant-baseline","middle").attr("text-anchor","middle").call(V,B.width).node().getBBox(),rt=N.fontSize?.replace?N.fontSize.replace("px",""):N.fontSize;return et.remove(),it.height+1.1*rt*.5+B.padding},"getVirtualNodeHeight"),Nt=(0,ie.K2)(function(Tt,B,N){Tt.append("path").attr("id","node-"+B.id).attr("class","node-bkg node-"+B.type).attr("d",`M0 ${B.height-5} v${10-B.height} q0,-5 5,-5 h${B.width-10} q5,0 5,5 v${B.height-5} H0 Z`),Tt.append("line").attr("class","node-line-"+N).attr("x1",0).attr("y1",B.height).attr("x2",B.width).attr("y2",B.height)},"defaultBkg"),St={drawRect:Be,drawCircle:Xe,drawSection:Bt,drawText:z,drawLabel:dt,drawTask:X,drawBackgroundRect:re,getTextObj:S,getNoteRect:ee,initGraphics:qt,drawNode:gt,getVirtualNodeHeight:Y},Ut=(0,ie.K2)(function(Tt,B,N,et){const yt=(0,lt.D7)(),it=yt.timeline?.leftMargin??50;ie.Rm.debug("timeline",et.db);const rt=yt.securityLevel;let _t;"sandbox"===rt&&(_t=(0,L.Ltv)("#i"+B));const Ot=(0,L.Ltv)("sandbox"===rt?_t.nodes()[0].contentDocument.body:"body").select("#"+B);Ot.append("g");const H=et.db.getTasks(),ot=et.db.getCommonDb().getDiagramTitle();ie.Rm.debug("task",H),St.initGraphics(Ot);const ke=et.db.getSections();ie.Rm.debug("sections",ke);let Pt=0,Zt=0,pe=0,Re=0,Ze=50+it,de=50;Re=50;let yr=0,mr=!0;ke.forEach(function(ce){const Ae=St.getVirtualNodeHeight(Ot,{number:yr,descr:ce,section:yr,width:150,padding:20,maxHeight:Pt},yt);ie.Rm.debug("sectionHeight before draw",Ae),Pt=Math.max(Pt,Ae+20)});let Wt=0,we=0;ie.Rm.debug("tasks.length",H.length);for(const[ce,Ee]of H.entries()){const er=St.getVirtualNodeHeight(Ot,{number:ce,descr:Ee,section:Ee.section,width:150,padding:20,maxHeight:Zt},yt);ie.Rm.debug("taskHeight before draw",er),Zt=Math.max(Zt,er+20),Wt=Math.max(Wt,Ee.events.length);let Qe=0;for(const Dr of Ee.events)Qe+=St.getVirtualNodeHeight(Ot,{descr:Dr,section:Ee.section,number:Ee.section,width:150,padding:20,maxHeight:50},yt);Ee.events.length>0&&(Qe+=10*(Ee.events.length-1)),we=Math.max(we,Qe)}ie.Rm.debug("maxSectionHeight before draw",Pt),ie.Rm.debug("maxTaskHeight before draw",Zt),ke&&ke.length>0?ke.forEach(ce=>{const Ee=H.filter(Dr=>Dr.section===ce),Ae={number:yr,descr:ce,section:yr,width:200*Math.max(Ee.length,1)-50,padding:20,maxHeight:Pt};ie.Rm.debug("sectionNode",Ae);const er=Ot.append("g"),Qe=St.drawNode(er,Ae,yr,yt);ie.Rm.debug("sectionNode output",Qe),er.attr("transform",`translate(${Ze}, 50)`),de+=Pt+50,Ee.length>0&&ye(Ot,Ee,yr,Ze,de,Zt,yt,Wt,we,Pt,!1),Ze+=200*Math.max(Ee.length,1),de=50,yr++}):(mr=!1,ye(Ot,H,yr,Ze,de,Zt,yt,Wt,we,Pt,!0));const sr=Ot.node().getBBox();ie.Rm.debug("bounds",sr),ot&&Ot.append("text").text(ot).attr("x",sr.width/2-it).attr("font-size","4ex").attr("font-weight","bold").attr("y",20),pe=mr?Pt+Zt+150:Zt+100,Ot.append("g").attr("class","lineWrapper").append("line").attr("x1",it).attr("y1",pe).attr("x2",sr.width+3*it).attr("y2",pe).attr("stroke-width",4).attr("stroke","black").attr("marker-end","url(#arrowhead)"),(0,lt.ot)(void 0,Ot,yt.timeline?.padding??50,yt.timeline?.useMaxWidth??!1)},"draw"),ye=(0,ie.K2)(function(Tt,B,N,et,yt,it,rt,_t,ht,Ot,H){for(const ot of B){const ke={descr:ot.task,section:N,number:N,width:150,padding:20,maxHeight:it};ie.Rm.debug("taskNode",ke);const Pt=Tt.append("g").attr("class","taskWrapper"),pe=St.drawNode(Pt,ke,N,rt).height;if(ie.Rm.debug("taskHeight after draw",pe),Pt.attr("transform",`translate(${et}, ${yt})`),it=Math.max(it,pe),ot.events){const Re=Tt.append("g").attr("class","lineWrapper");let Ze=it;Ze+=le(Tt,ot.events,N,et,yt+=100,rt),yt-=100,Re.append("line").attr("x1",et+95).attr("y1",yt+it).attr("x2",et+95).attr("y2",yt+it+100+ht+100).attr("stroke-width",2).attr("stroke","black").attr("marker-end","url(#arrowhead)").attr("stroke-dasharray","5,5")}et+=200,H&&!rt.timeline?.disableMulticolor&&N++}yt-=10},"drawTasks"),le=(0,ie.K2)(function(Tt,B,N,et,yt,it){let rt=0;const _t=yt;yt+=100;for(const ht of B){const Ot={descr:ht,section:N,number:N,width:150,padding:20,maxHeight:50};ie.Rm.debug("eventNode",Ot);const H=Tt.append("g").attr("class","eventWrapper"),ke=St.drawNode(H,Ot,N,it).height;rt+=ke,H.attr("transform",`translate(${et}, ${yt})`),yt=yt+10+ke}return yt=_t,rt},"drawEvents"),Pe={setConf:(0,ie.K2)(()=>{},"setConf"),draw:Ut},oe=(0,ie.K2)(Tt=>{let B="";for(let N=0;N<Tt.THEME_COLOR_LIMIT;N++)Tt["lineColor"+N]=Tt["lineColor"+N]||Tt["cScaleInv"+N],Tt["lineColor"+N]=(0,D.HD)(Tt["lineColor"+N])?(0,D.a)(Tt["lineColor"+N],20):(0,D.e$)(Tt["lineColor"+N],20);for(let N=0;N<Tt.THEME_COLOR_LIMIT;N++)B+=`\n    .section-${N-1} rect, .section-${N-1} path, .section-${N-1} circle, .section-${N-1} path  {\n      fill: ${Tt["cScale"+N]};\n    }\n    .section-${N-1} text {\n     fill: ${Tt["cScaleLabel"+N]};\n    }\n    .node-icon-${N-1} {\n      font-size: 40px;\n      color: ${Tt["cScaleLabel"+N]};\n    }\n    .section-edge-${N-1}{\n      stroke: ${Tt["cScale"+N]};\n    }\n    .edge-depth-${N-1}{\n      stroke-width: ${""+(17-3*N)};\n    }\n    .section-${N-1} line {\n      stroke: ${Tt["cScaleInv"+N]} ;\n      stroke-width: 3;\n    }\n\n    .lineWrapper line{\n      stroke: ${Tt["cScaleLabel"+N]} ;\n    }\n\n    .disabled, .disabled circle, .disabled text {\n      fill: lightgray;\n    }\n    .disabled text {\n      fill: #efefef;\n    }\n    `;return B},"genSections"),Et={db:G,renderer:Pe,parser:ut,styles:(0,ie.K2)(Tt=>`\n  .edge {\n    stroke-width: 3;\n  }\n  ${oe(Tt)}\n  .section-root rect, .section-root path, .section-root circle  {\n    fill: ${Tt.git0};\n  }\n  .section-root text {\n    fill: ${Tt.gitBranchLabel0};\n  }\n  .icon-container {\n    height:100%;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n  }\n  .edge {\n    fill: none;\n  }\n  .eventWrapper  {\n   filter: brightness(120%);\n  }\n`,"getStyles")}},29062:(ri,Er,P)=>{"use strict";P.r(Er),P.d(Er,{diagram:()=>Or});var hr,lt=P(89204),ie=P(45027),L=P(5675),D=P(8086),Mt=P(72271),bt=(P(98954),P(36384),P(87452),P(32239),P(19753),P(59355),P(52052)),Gt=P(79006),j=P(32303),ze=function(){var Be=(0,j.K2)(function(y,E,M,m){for(M=M||{},m=y.length;m--;M[y[m]]=E);return M},"o"),Ir=[1,3],Xe=[1,4],z=[1,5],dt=[1,6],Bt=[5,6,8,9,11,13,21,22,23,24,41,42,43,44,45,46,54,72,74,77,89,90],Se=[1,22],X=[2,7],re=[1,26],S=[1,27],ee=[1,28],Rt=[1,29],qt=[1,33],V=[1,34],gt=[1,35],Y=[1,36],Nt=[1,37],St=[1,38],Ut=[1,24],ye=[1,31],le=[1,32],Pe=[1,30],oe=[1,39],qe=[1,40],We=[5,8,9,11,13,21,22,23,24,41,42,43,44,45,46,54,72,74,77,89,90],Et=[1,61],Tt=[89,90],B=[5,8,9,11,13,21,22,23,24,27,29,41,42,43,44,45,46,54,61,63,72,74,75,76,77,80,81,82,83,84,85,86,87,88,89,90],N=[27,29],et=[1,70],yt=[1,71],it=[1,72],rt=[1,73],_t=[1,74],ht=[1,75],Ot=[1,76],H=[1,83],ot=[1,80],ke=[1,84],Pt=[1,85],Zt=[1,86],pe=[1,87],Re=[1,88],Ze=[1,89],de=[1,90],yr=[1,91],mr=[1,92],Wt=[5,8,9,11,13,21,22,23,24,27,41,42,43,44,45,46,54,72,74,75,76,77,80,81,82,83,84,85,86,87,88,89,90],we=[63,64],sr=[1,101],ve=[5,8,9,11,13,21,22,23,24,41,42,43,44,45,46,54,72,74,76,77,89,90],ce=[5,8,9,11,13,21,22,23,24,41,42,43,44,45,46,54,72,74,75,76,77,80,81,82,83,84,85,86,87,88,89,90],Ee=[1,110],Ae=[1,106],er=[1,107],Qe=[1,108],Dr=[1,109],_e=[1,111],Yr=[1,116],nr=[1,117],te=[1,114],ne=[1,115],be={trace:(0,j.K2)(function(){},"trace"),yy:{},symbols_:{error:2,start:3,directive:4,NEWLINE:5,RD:6,diagram:7,EOF:8,acc_title:9,acc_title_value:10,acc_descr:11,acc_descr_value:12,acc_descr_multiline_value:13,requirementDef:14,elementDef:15,relationshipDef:16,direction:17,styleStatement:18,classDefStatement:19,classStatement:20,direction_tb:21,direction_bt:22,direction_rl:23,direction_lr:24,requirementType:25,requirementName:26,STRUCT_START:27,requirementBody:28,STYLE_SEPARATOR:29,idList:30,ID:31,COLONSEP:32,id:33,TEXT:34,text:35,RISK:36,riskLevel:37,VERIFYMTHD:38,verifyType:39,STRUCT_STOP:40,REQUIREMENT:41,FUNCTIONAL_REQUIREMENT:42,INTERFACE_REQUIREMENT:43,PERFORMANCE_REQUIREMENT:44,PHYSICAL_REQUIREMENT:45,DESIGN_CONSTRAINT:46,LOW_RISK:47,MED_RISK:48,HIGH_RISK:49,VERIFY_ANALYSIS:50,VERIFY_DEMONSTRATION:51,VERIFY_INSPECTION:52,VERIFY_TEST:53,ELEMENT:54,elementName:55,elementBody:56,TYPE:57,type:58,DOCREF:59,ref:60,END_ARROW_L:61,relationship:62,LINE:63,END_ARROW_R:64,CONTAINS:65,COPIES:66,DERIVES:67,SATISFIES:68,VERIFIES:69,REFINES:70,TRACES:71,CLASSDEF:72,stylesOpt:73,CLASS:74,ALPHA:75,COMMA:76,STYLE:77,style:78,styleComponent:79,NUM:80,COLON:81,UNIT:82,SPACE:83,BRKT:84,PCT:85,MINUS:86,LABEL:87,SEMICOLON:88,unqString:89,qString:90,$accept:0,$end:1},terminals_:{2:"error",5:"NEWLINE",6:"RD",8:"EOF",9:"acc_title",10:"acc_title_value",11:"acc_descr",12:"acc_descr_value",13:"acc_descr_multiline_value",21:"direction_tb",22:"direction_bt",23:"direction_rl",24:"direction_lr",27:"STRUCT_START",29:"STYLE_SEPARATOR",31:"ID",32:"COLONSEP",34:"TEXT",36:"RISK",38:"VERIFYMTHD",40:"STRUCT_STOP",41:"REQUIREMENT",42:"FUNCTIONAL_REQUIREMENT",43:"INTERFACE_REQUIREMENT",44:"PERFORMANCE_REQUIREMENT",45:"PHYSICAL_REQUIREMENT",46:"DESIGN_CONSTRAINT",47:"LOW_RISK",48:"MED_RISK",49:"HIGH_RISK",50:"VERIFY_ANALYSIS",51:"VERIFY_DEMONSTRATION",52:"VERIFY_INSPECTION",53:"VERIFY_TEST",54:"ELEMENT",57:"TYPE",59:"DOCREF",61:"END_ARROW_L",63:"LINE",64:"END_ARROW_R",65:"CONTAINS",66:"COPIES",67:"DERIVES",68:"SATISFIES",69:"VERIFIES",70:"REFINES",71:"TRACES",72:"CLASSDEF",74:"CLASS",75:"ALPHA",76:"COMMA",77:"STYLE",80:"NUM",81:"COLON",82:"UNIT",83:"SPACE",84:"BRKT",85:"PCT",86:"MINUS",87:"LABEL",88:"SEMICOLON",89:"unqString",90:"qString"},productions_:[0,[3,3],[3,2],[3,4],[4,2],[4,2],[4,1],[7,0],[7,2],[7,2],[7,2],[7,2],[7,2],[7,2],[7,2],[7,2],[7,2],[17,1],[17,1],[17,1],[17,1],[14,5],[14,7],[28,5],[28,5],[28,5],[28,5],[28,2],[28,1],[25,1],[25,1],[25,1],[25,1],[25,1],[25,1],[37,1],[37,1],[37,1],[39,1],[39,1],[39,1],[39,1],[15,5],[15,7],[56,5],[56,5],[56,2],[56,1],[16,5],[16,5],[62,1],[62,1],[62,1],[62,1],[62,1],[62,1],[62,1],[19,3],[20,3],[20,3],[30,1],[30,3],[30,1],[30,3],[18,3],[73,1],[73,3],[78,1],[78,2],[79,1],[79,1],[79,1],[79,1],[79,1],[79,1],[79,1],[79,1],[79,1],[79,1],[26,1],[26,1],[33,1],[33,1],[35,1],[35,1],[55,1],[55,1],[58,1],[58,1],[60,1],[60,1]],performAction:(0,j.K2)(function(E,M,m,A,v,b,C){var R=b.length-1;switch(v){case 4:this.$=b[R].trim(),A.setAccTitle(this.$);break;case 5:case 6:this.$=b[R].trim(),A.setAccDescription(this.$);break;case 7:this.$=[];break;case 17:A.setDirection("TB");break;case 18:A.setDirection("BT");break;case 19:A.setDirection("RL");break;case 20:A.setDirection("LR");break;case 21:A.addRequirement(b[R-3],b[R-4]);break;case 22:A.addRequirement(b[R-5],b[R-6]),A.setClass([b[R-5]],b[R-3]);break;case 23:A.setNewReqId(b[R-2]);break;case 24:A.setNewReqText(b[R-2]);break;case 25:A.setNewReqRisk(b[R-2]);break;case 26:A.setNewReqVerifyMethod(b[R-2]);break;case 29:this.$=A.RequirementType.REQUIREMENT;break;case 30:this.$=A.RequirementType.FUNCTIONAL_REQUIREMENT;break;case 31:this.$=A.RequirementType.INTERFACE_REQUIREMENT;break;case 32:this.$=A.RequirementType.PERFORMANCE_REQUIREMENT;break;case 33:this.$=A.RequirementType.PHYSICAL_REQUIREMENT;break;case 34:this.$=A.RequirementType.DESIGN_CONSTRAINT;break;case 35:this.$=A.RiskLevel.LOW_RISK;break;case 36:this.$=A.RiskLevel.MED_RISK;break;case 37:this.$=A.RiskLevel.HIGH_RISK;break;case 38:this.$=A.VerifyType.VERIFY_ANALYSIS;break;case 39:this.$=A.VerifyType.VERIFY_DEMONSTRATION;break;case 40:this.$=A.VerifyType.VERIFY_INSPECTION;break;case 41:this.$=A.VerifyType.VERIFY_TEST;break;case 42:A.addElement(b[R-3]);break;case 43:A.addElement(b[R-5]),A.setClass([b[R-5]],b[R-3]);break;case 44:A.setNewElementType(b[R-2]);break;case 45:A.setNewElementDocRef(b[R-2]);break;case 48:A.addRelationship(b[R-2],b[R],b[R-4]);break;case 49:A.addRelationship(b[R-2],b[R-4],b[R]);break;case 50:this.$=A.Relationships.CONTAINS;break;case 51:this.$=A.Relationships.COPIES;break;case 52:this.$=A.Relationships.DERIVES;break;case 53:this.$=A.Relationships.SATISFIES;break;case 54:this.$=A.Relationships.VERIFIES;break;case 55:this.$=A.Relationships.REFINES;break;case 56:this.$=A.Relationships.TRACES;break;case 57:this.$=b[R-2],A.defineClass(b[R-1],b[R]);break;case 58:A.setClass(b[R-1],b[R]);break;case 59:A.setClass([b[R-2]],b[R]);break;case 60:case 62:case 65:this.$=[b[R]];break;case 61:case 63:this.$=b[R-2].concat([b[R]]);break;case 64:this.$=b[R-2],A.setCssStyle(b[R-1],b[R]);break;case 66:b[R-2].push(b[R]),this.$=b[R-2];break;case 68:this.$=b[R-1]+b[R]}},"anonymous"),table:[{3:1,4:2,6:Ir,9:Xe,11:z,13:dt},{1:[3]},{3:8,4:2,5:[1,7],6:Ir,9:Xe,11:z,13:dt},{5:[1,9]},{10:[1,10]},{12:[1,11]},Be(Bt,[2,6]),{3:12,4:2,6:Ir,9:Xe,11:z,13:dt},{1:[2,2]},{4:17,5:Se,7:13,8:X,9:Xe,11:z,13:dt,14:14,15:15,16:16,17:18,18:19,19:20,20:21,21:re,22:S,23:ee,24:Rt,25:23,33:25,41:qt,42:V,43:gt,44:Y,45:Nt,46:St,54:Ut,72:ye,74:le,77:Pe,89:oe,90:qe},Be(Bt,[2,4]),Be(Bt,[2,5]),{1:[2,1]},{8:[1,41]},{4:17,5:Se,7:42,8:X,9:Xe,11:z,13:dt,14:14,15:15,16:16,17:18,18:19,19:20,20:21,21:re,22:S,23:ee,24:Rt,25:23,33:25,41:qt,42:V,43:gt,44:Y,45:Nt,46:St,54:Ut,72:ye,74:le,77:Pe,89:oe,90:qe},{4:17,5:Se,7:43,8:X,9:Xe,11:z,13:dt,14:14,15:15,16:16,17:18,18:19,19:20,20:21,21:re,22:S,23:ee,24:Rt,25:23,33:25,41:qt,42:V,43:gt,44:Y,45:Nt,46:St,54:Ut,72:ye,74:le,77:Pe,89:oe,90:qe},{4:17,5:Se,7:44,8:X,9:Xe,11:z,13:dt,14:14,15:15,16:16,17:18,18:19,19:20,20:21,21:re,22:S,23:ee,24:Rt,25:23,33:25,41:qt,42:V,43:gt,44:Y,45:Nt,46:St,54:Ut,72:ye,74:le,77:Pe,89:oe,90:qe},{4:17,5:Se,7:45,8:X,9:Xe,11:z,13:dt,14:14,15:15,16:16,17:18,18:19,19:20,20:21,21:re,22:S,23:ee,24:Rt,25:23,33:25,41:qt,42:V,43:gt,44:Y,45:Nt,46:St,54:Ut,72:ye,74:le,77:Pe,89:oe,90:qe},{4:17,5:Se,7:46,8:X,9:Xe,11:z,13:dt,14:14,15:15,16:16,17:18,18:19,19:20,20:21,21:re,22:S,23:ee,24:Rt,25:23,33:25,41:qt,42:V,43:gt,44:Y,45:Nt,46:St,54:Ut,72:ye,74:le,77:Pe,89:oe,90:qe},{4:17,5:Se,7:47,8:X,9:Xe,11:z,13:dt,14:14,15:15,16:16,17:18,18:19,19:20,20:21,21:re,22:S,23:ee,24:Rt,25:23,33:25,41:qt,42:V,43:gt,44:Y,45:Nt,46:St,54:Ut,72:ye,74:le,77:Pe,89:oe,90:qe},{4:17,5:Se,7:48,8:X,9:Xe,11:z,13:dt,14:14,15:15,16:16,17:18,18:19,19:20,20:21,21:re,22:S,23:ee,24:Rt,25:23,33:25,41:qt,42:V,43:gt,44:Y,45:Nt,46:St,54:Ut,72:ye,74:le,77:Pe,89:oe,90:qe},{4:17,5:Se,7:49,8:X,9:Xe,11:z,13:dt,14:14,15:15,16:16,17:18,18:19,19:20,20:21,21:re,22:S,23:ee,24:Rt,25:23,33:25,41:qt,42:V,43:gt,44:Y,45:Nt,46:St,54:Ut,72:ye,74:le,77:Pe,89:oe,90:qe},{4:17,5:Se,7:50,8:X,9:Xe,11:z,13:dt,14:14,15:15,16:16,17:18,18:19,19:20,20:21,21:re,22:S,23:ee,24:Rt,25:23,33:25,41:qt,42:V,43:gt,44:Y,45:Nt,46:St,54:Ut,72:ye,74:le,77:Pe,89:oe,90:qe},{26:51,89:[1,52],90:[1,53]},{55:54,89:[1,55],90:[1,56]},{29:[1,59],61:[1,57],63:[1,58]},Be(We,[2,17]),Be(We,[2,18]),Be(We,[2,19]),Be(We,[2,20]),{30:60,33:62,75:Et,89:oe,90:qe},{30:63,33:62,75:Et,89:oe,90:qe},{30:64,33:62,75:Et,89:oe,90:qe},Be(Tt,[2,29]),Be(Tt,[2,30]),Be(Tt,[2,31]),Be(Tt,[2,32]),Be(Tt,[2,33]),Be(Tt,[2,34]),Be(B,[2,81]),Be(B,[2,82]),{1:[2,3]},{8:[2,8]},{8:[2,9]},{8:[2,10]},{8:[2,11]},{8:[2,12]},{8:[2,13]},{8:[2,14]},{8:[2,15]},{8:[2,16]},{27:[1,65],29:[1,66]},Be(N,[2,79]),Be(N,[2,80]),{27:[1,67],29:[1,68]},Be(N,[2,85]),Be(N,[2,86]),{62:69,65:et,66:yt,67:it,68:rt,69:_t,70:ht,71:Ot},{62:77,65:et,66:yt,67:it,68:rt,69:_t,70:ht,71:Ot},{30:78,33:62,75:Et,89:oe,90:qe},{73:79,75:H,76:ot,78:81,79:82,80:ke,81:Pt,82:Zt,83:pe,84:Re,85:Ze,86:de,87:yr,88:mr},Be(Wt,[2,60]),Be(Wt,[2,62]),{73:93,75:H,76:ot,78:81,79:82,80:ke,81:Pt,82:Zt,83:pe,84:Re,85:Ze,86:de,87:yr,88:mr},{30:94,33:62,75:Et,76:ot,89:oe,90:qe},{5:[1,95]},{30:96,33:62,75:Et,89:oe,90:qe},{5:[1,97]},{30:98,33:62,75:Et,89:oe,90:qe},{63:[1,99]},Be(we,[2,50]),Be(we,[2,51]),Be(we,[2,52]),Be(we,[2,53]),Be(we,[2,54]),Be(we,[2,55]),Be(we,[2,56]),{64:[1,100]},Be(We,[2,59],{76:ot}),Be(We,[2,64],{76:sr}),{33:103,75:[1,102],89:oe,90:qe},Be(ve,[2,65],{79:104,75:H,80:ke,81:Pt,82:Zt,83:pe,84:Re,85:Ze,86:de,87:yr,88:mr}),Be(ce,[2,67]),Be(ce,[2,69]),Be(ce,[2,70]),Be(ce,[2,71]),Be(ce,[2,72]),Be(ce,[2,73]),Be(ce,[2,74]),Be(ce,[2,75]),Be(ce,[2,76]),Be(ce,[2,77]),Be(ce,[2,78]),Be(We,[2,57],{76:sr}),Be(We,[2,58],{76:ot}),{5:Ee,28:105,31:Ae,34:er,36:Qe,38:Dr,40:_e},{27:[1,112],76:ot},{5:Yr,40:nr,56:113,57:te,59:ne},{27:[1,118],76:ot},{33:119,89:oe,90:qe},{33:120,89:oe,90:qe},{75:H,78:121,79:82,80:ke,81:Pt,82:Zt,83:pe,84:Re,85:Ze,86:de,87:yr,88:mr},Be(Wt,[2,61]),Be(Wt,[2,63]),Be(ce,[2,68]),Be(We,[2,21]),{32:[1,122]},{32:[1,123]},{32:[1,124]},{32:[1,125]},{5:Ee,28:126,31:Ae,34:er,36:Qe,38:Dr,40:_e},Be(We,[2,28]),{5:[1,127]},Be(We,[2,42]),{32:[1,128]},{32:[1,129]},{5:Yr,40:nr,56:130,57:te,59:ne},Be(We,[2,47]),{5:[1,131]},Be(We,[2,48]),Be(We,[2,49]),Be(ve,[2,66],{79:104,75:H,80:ke,81:Pt,82:Zt,83:pe,84:Re,85:Ze,86:de,87:yr,88:mr}),{33:132,89:oe,90:qe},{35:133,89:[1,134],90:[1,135]},{37:136,47:[1,137],48:[1,138],49:[1,139]},{39:140,50:[1,141],51:[1,142],52:[1,143],53:[1,144]},Be(We,[2,27]),{5:Ee,28:145,31:Ae,34:er,36:Qe,38:Dr,40:_e},{58:146,89:[1,147],90:[1,148]},{60:149,89:[1,150],90:[1,151]},Be(We,[2,46]),{5:Yr,40:nr,56:152,57:te,59:ne},{5:[1,153]},{5:[1,154]},{5:[2,83]},{5:[2,84]},{5:[1,155]},{5:[2,35]},{5:[2,36]},{5:[2,37]},{5:[1,156]},{5:[2,38]},{5:[2,39]},{5:[2,40]},{5:[2,41]},Be(We,[2,22]),{5:[1,157]},{5:[2,87]},{5:[2,88]},{5:[1,158]},{5:[2,89]},{5:[2,90]},Be(We,[2,43]),{5:Ee,28:159,31:Ae,34:er,36:Qe,38:Dr,40:_e},{5:Ee,28:160,31:Ae,34:er,36:Qe,38:Dr,40:_e},{5:Ee,28:161,31:Ae,34:er,36:Qe,38:Dr,40:_e},{5:Ee,28:162,31:Ae,34:er,36:Qe,38:Dr,40:_e},{5:Yr,40:nr,56:163,57:te,59:ne},{5:Yr,40:nr,56:164,57:te,59:ne},Be(We,[2,23]),Be(We,[2,24]),Be(We,[2,25]),Be(We,[2,26]),Be(We,[2,44]),Be(We,[2,45])],defaultActions:{8:[2,2],12:[2,1],41:[2,3],42:[2,8],43:[2,9],44:[2,10],45:[2,11],46:[2,12],47:[2,13],48:[2,14],49:[2,15],50:[2,16],134:[2,83],135:[2,84],137:[2,35],138:[2,36],139:[2,37],141:[2,38],142:[2,39],143:[2,40],144:[2,41],147:[2,87],148:[2,88],150:[2,89],151:[2,90]},parseError:(0,j.K2)(function(E,M){if(!M.recoverable){var m=new Error(E);throw m.hash=M,m}this.trace(E)},"parseError"),parse:(0,j.K2)(function(E){var M=this,m=[0],A=[],v=[null],b=[],C=this.table,R="",Q=0,mt=0,zt=0,Kt=b.slice.call(arguments,1),xe=Object.create(this.lexer),je={yy:{}};for(var Ke in this.yy)Object.prototype.hasOwnProperty.call(this.yy,Ke)&&(je.yy[Ke]=this.yy[Ke]);xe.setInput(E,je.yy),je.yy.lexer=xe,je.yy.parser=this,typeof xe.yylloc>"u"&&(xe.yylloc={});var fr=xe.yylloc;b.push(fr);var lr=xe.options&&xe.options.ranges;function $e(){var ur;return"number"!=typeof(ur=A.pop()||xe.lex()||1)&&(ur instanceof Array&&(ur=(A=ur).pop()),ur=M.symbols_[ur]||ur),ur}this.parseError="function"==typeof je.yy.parseError?je.yy.parseError:Object.getPrototypeOf(this).parseError,(0,j.K2)(function br(ur){m.length=m.length-2*ur,v.length=v.length-ur,b.length=b.length-ur},"popStack"),(0,j.K2)($e,"lex");for(var He,wr,kr,Kr,Jr,ha,ia,Qr,Lr={};;){if(this.defaultActions[kr=m[m.length-1]]?Kr=this.defaultActions[kr]:((null===He||typeof He>"u")&&(He=$e()),Kr=C[kr]&&C[kr][He]),typeof Kr>"u"||!Kr.length||!Kr[0]){var or;for(ha in Qr=[],C[kr])this.terminals_[ha]&&ha>2&&Qr.push("'"+this.terminals_[ha]+"'");or=xe.showPosition?"Parse error on line "+(Q+1)+":\n"+xe.showPosition()+"\nExpecting "+Qr.join(", ")+", got '"+(this.terminals_[He]||He)+"'":"Parse error on line "+(Q+1)+": Unexpected "+(1==He?"end of input":"'"+(this.terminals_[He]||He)+"'"),this.parseError(or,{text:xe.match,token:this.terminals_[He]||He,line:xe.yylineno,loc:fr,expected:Qr})}if(Kr[0]instanceof Array&&Kr.length>1)throw new Error("Parse Error: multiple actions possible at state: "+kr+", token: "+He);switch(Kr[0]){case 1:m.push(He),v.push(xe.yytext),b.push(xe.yylloc),m.push(Kr[1]),He=null,wr?(He=wr,wr=null):(mt=xe.yyleng,R=xe.yytext,Q=xe.yylineno,fr=xe.yylloc,zt>0&&zt--);break;case 2:if(Lr.$=v[v.length-(ia=this.productions_[Kr[1]][1])],Lr._$={first_line:b[b.length-(ia||1)].first_line,last_line:b[b.length-1].last_line,first_column:b[b.length-(ia||1)].first_column,last_column:b[b.length-1].last_column},lr&&(Lr._$.range=[b[b.length-(ia||1)].range[0],b[b.length-1].range[1]]),typeof(Jr=this.performAction.apply(Lr,[R,mt,Q,je.yy,Kr[1],v,b].concat(Kt)))<"u")return Jr;ia&&(m=m.slice(0,-1*ia*2),v=v.slice(0,-1*ia),b=b.slice(0,-1*ia)),m.push(this.productions_[Kr[1]][0]),v.push(Lr.$),b.push(Lr._$),m.push(C[m[m.length-2]][m[m.length-1]]);break;case 3:return!0}}return!0},"parse")};function g(){this.yy={}}return be.lexer=function(){return{EOF:1,parseError:(0,j.K2)(function(M,m){if(!this.yy.parser)throw new Error(M);this.yy.parser.parseError(M,m)},"parseError"),setInput:(0,j.K2)(function(E,M){return this.yy=M||this.yy||{},this._input=E,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},"setInput"),input:(0,j.K2)(function(){var E=this._input[0];return this.yytext+=E,this.yyleng++,this.offset++,this.match+=E,this.matched+=E,E.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),E},"input"),unput:(0,j.K2)(function(E){var M=E.length,m=E.split(/(?:\r\n?|\n)/g);this._input=E+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-M),this.offset-=M;var A=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),m.length-1&&(this.yylineno-=m.length-1);var v=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:m?(m.length===A.length?this.yylloc.first_column:0)+A[A.length-m.length].length-m[0].length:this.yylloc.first_column-M},this.options.ranges&&(this.yylloc.range=[v[0],v[0]+this.yyleng-M]),this.yyleng=this.yytext.length,this},"unput"),more:(0,j.K2)(function(){return this._more=!0,this},"more"),reject:(0,j.K2)(function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},"reject"),less:(0,j.K2)(function(E){this.unput(this.match.slice(E))},"less"),pastInput:(0,j.K2)(function(){var E=this.matched.substr(0,this.matched.length-this.match.length);return(E.length>20?"...":"")+E.substr(-20).replace(/\n/g,"")},"pastInput"),upcomingInput:(0,j.K2)(function(){var E=this.match;return E.length<20&&(E+=this._input.substr(0,20-E.length)),(E.substr(0,20)+(E.length>20?"...":"")).replace(/\n/g,"")},"upcomingInput"),showPosition:(0,j.K2)(function(){var E=this.pastInput(),M=new Array(E.length+1).join("-");return E+this.upcomingInput()+"\n"+M+"^"},"showPosition"),test_match:(0,j.K2)(function(E,M){var m,A,v;if(this.options.backtrack_lexer&&(v={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(v.yylloc.range=this.yylloc.range.slice(0))),(A=E[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=A.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:A?A[A.length-1].length-A[A.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+E[0].length},this.yytext+=E[0],this.match+=E[0],this.matches=E,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(E[0].length),this.matched+=E[0],m=this.performAction.call(this,this.yy,this,M,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),m)return m;if(this._backtrack){for(var b in v)this[b]=v[b];return!1}return!1},"test_match"),next:(0,j.K2)(function(){if(this.done)return this.EOF;var E,M,m,A;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var v=this._currentRules(),b=0;b<v.length;b++)if((m=this._input.match(this.rules[v[b]]))&&(!M||m[0].length>M[0].length)){if(M=m,A=b,this.options.backtrack_lexer){if(!1!==(E=this.test_match(m,v[b])))return E;if(this._backtrack){M=!1;continue}return!1}if(!this.options.flex)break}return M?!1!==(E=this.test_match(M,v[A]))&&E:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},"next"),lex:(0,j.K2)(function(){return this.next()||this.lex()},"lex"),begin:(0,j.K2)(function(M){this.conditionStack.push(M)},"begin"),popState:(0,j.K2)(function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},"popState"),_currentRules:(0,j.K2)(function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},"_currentRules"),topState:(0,j.K2)(function(M){return(M=this.conditionStack.length-1-Math.abs(M||0))>=0?this.conditionStack[M]:"INITIAL"},"topState"),pushState:(0,j.K2)(function(M){this.begin(M)},"pushState"),stateStackSize:(0,j.K2)(function(){return this.conditionStack.length},"stateStackSize"),options:{"case-insensitive":!0},performAction:(0,j.K2)(function(M,m,A,v){switch(A){case 0:return"title";case 1:return this.begin("acc_title"),9;case 2:return this.popState(),"acc_title_value";case 3:return this.begin("acc_descr"),11;case 4:return this.popState(),"acc_descr_value";case 5:this.begin("acc_descr_multiline");break;case 6:case 58:case 65:this.popState();break;case 7:return"acc_descr_multiline_value";case 8:return 21;case 9:return 22;case 10:return 23;case 11:return 24;case 12:return 5;case 13:case 14:case 15:case 56:break;case 16:return 8;case 17:return 6;case 18:return 27;case 19:return 40;case 20:return 29;case 21:return 32;case 22:return 31;case 23:return 34;case 24:return 36;case 25:return 38;case 26:return 41;case 27:return 42;case 28:return 43;case 29:return 44;case 30:return 45;case 31:return 46;case 32:return 47;case 33:return 48;case 34:return 49;case 35:return 50;case 36:return 51;case 37:return 52;case 38:return 53;case 39:return 54;case 40:return 65;case 41:return 66;case 42:return 67;case 43:return 68;case 44:return 69;case 45:return 70;case 46:return 71;case 47:return 57;case 48:return 59;case 49:return this.begin("style"),77;case 50:case 68:return 75;case 51:return 81;case 52:return 88;case 53:return"PERCENT";case 54:return 86;case 55:return 84;case 57:case 64:this.begin("string");break;case 59:return this.begin("style"),72;case 60:return this.begin("style"),74;case 61:return 61;case 62:return 64;case 63:return 63;case 66:return"qString";case 67:return m.yytext=m.yytext.trim(),89;case 69:return 80;case 70:return 76}},"anonymous"),rules:[/^(?:title\s[^#\n;]+)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:.*direction\s+TB[^\n]*)/i,/^(?:.*direction\s+BT[^\n]*)/i,/^(?:.*direction\s+RL[^\n]*)/i,/^(?:.*direction\s+LR[^\n]*)/i,/^(?:(\r?\n)+)/i,/^(?:\s+)/i,/^(?:#[^\n]*)/i,/^(?:%[^\n]*)/i,/^(?:$)/i,/^(?:requirementDiagram\b)/i,/^(?:\{)/i,/^(?:\})/i,/^(?::{3})/i,/^(?::)/i,/^(?:id\b)/i,/^(?:text\b)/i,/^(?:risk\b)/i,/^(?:verifyMethod\b)/i,/^(?:requirement\b)/i,/^(?:functionalRequirement\b)/i,/^(?:interfaceRequirement\b)/i,/^(?:performanceRequirement\b)/i,/^(?:physicalRequirement\b)/i,/^(?:designConstraint\b)/i,/^(?:low\b)/i,/^(?:medium\b)/i,/^(?:high\b)/i,/^(?:analysis\b)/i,/^(?:demonstration\b)/i,/^(?:inspection\b)/i,/^(?:test\b)/i,/^(?:element\b)/i,/^(?:contains\b)/i,/^(?:copies\b)/i,/^(?:derives\b)/i,/^(?:satisfies\b)/i,/^(?:verifies\b)/i,/^(?:refines\b)/i,/^(?:traces\b)/i,/^(?:type\b)/i,/^(?:docref\b)/i,/^(?:style\b)/i,/^(?:\w+)/i,/^(?::)/i,/^(?:;)/i,/^(?:%)/i,/^(?:-)/i,/^(?:#)/i,/^(?: )/i,/^(?:["])/i,/^(?:\n)/i,/^(?:classDef\b)/i,/^(?:class\b)/i,/^(?:<-)/i,/^(?:->)/i,/^(?:-)/i,/^(?:["])/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:[\w][^:,\r\n\{\<\>\-\=]*)/i,/^(?:\w+)/i,/^(?:[0-9]+)/i,/^(?:,)/i],conditions:{acc_descr_multiline:{rules:[6,7,68,69,70],inclusive:!1},acc_descr:{rules:[4,68,69,70],inclusive:!1},acc_title:{rules:[2,68,69,70],inclusive:!1},style:{rules:[50,51,52,53,54,55,56,57,58,68,69,70],inclusive:!1},unqString:{rules:[68,69,70],inclusive:!1},token:{rules:[68,69,70],inclusive:!1},string:{rules:[65,66,68,69,70],inclusive:!1},INITIAL:{rules:[0,1,3,5,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,59,60,61,62,63,64,67,68,69,70],inclusive:!0}}}}(),(0,j.K2)(g,"Parser"),g.prototype=be,be.Parser=g,new g}();ze.parser=ze;var vr=ze,Wr=(class{constructor(){this.relations=[],this.latestRequirement=this.getInitialRequirement(),this.requirements=new Map,this.latestElement=this.getInitialElement(),this.elements=new Map,this.classes=new Map,this.direction="TB",this.RequirementType={REQUIREMENT:"Requirement",FUNCTIONAL_REQUIREMENT:"Functional Requirement",INTERFACE_REQUIREMENT:"Interface Requirement",PERFORMANCE_REQUIREMENT:"Performance Requirement",PHYSICAL_REQUIREMENT:"Physical Requirement",DESIGN_CONSTRAINT:"Design Constraint"},this.RiskLevel={LOW_RISK:"Low",MED_RISK:"Medium",HIGH_RISK:"High"},this.VerifyType={VERIFY_ANALYSIS:"Analysis",VERIFY_DEMONSTRATION:"Demonstration",VERIFY_INSPECTION:"Inspection",VERIFY_TEST:"Test"},this.Relationships={CONTAINS:"contains",COPIES:"copies",DERIVES:"derives",SATISFIES:"satisfies",VERIFIES:"verifies",REFINES:"refines",TRACES:"traces"},this.setAccTitle=Gt.SV,this.getAccTitle=Gt.iN,this.setAccDescription=Gt.EI,this.getAccDescription=Gt.m7,this.setDiagramTitle=Gt.ke,this.getDiagramTitle=Gt.ab,this.getConfig=(0,j.K2)(()=>(0,Gt.D7)().requirement,"getConfig"),this.clear(),this.setDirection=this.setDirection.bind(this),this.addRequirement=this.addRequirement.bind(this),this.setNewReqId=this.setNewReqId.bind(this),this.setNewReqRisk=this.setNewReqRisk.bind(this),this.setNewReqText=this.setNewReqText.bind(this),this.setNewReqVerifyMethod=this.setNewReqVerifyMethod.bind(this),this.addElement=this.addElement.bind(this),this.setNewElementType=this.setNewElementType.bind(this),this.setNewElementDocRef=this.setNewElementDocRef.bind(this),this.addRelationship=this.addRelationship.bind(this),this.setCssStyle=this.setCssStyle.bind(this),this.setClass=this.setClass.bind(this),this.defineClass=this.defineClass.bind(this),this.setAccTitle=this.setAccTitle.bind(this),this.setAccDescription=this.setAccDescription.bind(this)}getDirection(){return this.direction}setDirection(Be){this.direction=Be}resetLatestRequirement(){this.latestRequirement=this.getInitialRequirement()}resetLatestElement(){this.latestElement=this.getInitialElement()}getInitialRequirement(){return{requirementId:"",text:"",risk:"",verifyMethod:"",name:"",type:"",cssStyles:[],classes:["default"]}}getInitialElement(){return{name:"",type:"",docRef:"",cssStyles:[],classes:["default"]}}addRequirement(Be,Ir){return this.requirements.has(Be)||this.requirements.set(Be,{name:Be,type:Ir,requirementId:this.latestRequirement.requirementId,text:this.latestRequirement.text,risk:this.latestRequirement.risk,verifyMethod:this.latestRequirement.verifyMethod,cssStyles:[],classes:["default"]}),this.resetLatestRequirement(),this.requirements.get(Be)}getRequirements(){return this.requirements}setNewReqId(Be){void 0!==this.latestRequirement&&(this.latestRequirement.requirementId=Be)}setNewReqText(Be){void 0!==this.latestRequirement&&(this.latestRequirement.text=Be)}setNewReqRisk(Be){void 0!==this.latestRequirement&&(this.latestRequirement.risk=Be)}setNewReqVerifyMethod(Be){void 0!==this.latestRequirement&&(this.latestRequirement.verifyMethod=Be)}addElement(Be){return this.elements.has(Be)||(this.elements.set(Be,{name:Be,type:this.latestElement.type,docRef:this.latestElement.docRef,cssStyles:[],classes:["default"]}),j.Rm.info("Added new element: ",Be)),this.resetLatestElement(),this.elements.get(Be)}getElements(){return this.elements}setNewElementType(Be){void 0!==this.latestElement&&(this.latestElement.type=Be)}setNewElementDocRef(Be){void 0!==this.latestElement&&(this.latestElement.docRef=Be)}addRelationship(Be,Ir,Xe){this.relations.push({type:Be,src:Ir,dst:Xe})}getRelationships(){return this.relations}clear(){this.relations=[],this.resetLatestRequirement(),this.requirements=new Map,this.resetLatestElement(),this.elements=new Map,this.classes=new Map,(0,Gt.IU)()}setCssStyle(Be,Ir){for(const Xe of Be){const z=this.requirements.get(Xe)??this.elements.get(Xe);if(!Ir||!z)return;for(const dt of Ir)dt.includes(",")?z.cssStyles.push(...dt.split(",")):z.cssStyles.push(dt)}}setClass(Be,Ir){for(const Xe of Be){const z=this.requirements.get(Xe)??this.elements.get(Xe);if(z)for(const dt of Ir){z.classes.push(dt);const Bt=this.classes.get(dt)?.styles;Bt&&z.cssStyles.push(...Bt)}}}defineClass(Be,Ir){for(const Xe of Be){let z=this.classes.get(Xe);void 0===z&&(z={id:Xe,styles:[],textStyles:[]},this.classes.set(Xe,z)),Ir&&Ir.forEach(function(dt){if(/color/.exec(dt)){const Bt=dt.replace("fill","bgFill");z.textStyles.push(Bt)}z.styles.push(dt)}),this.requirements.forEach(dt=>{dt.classes.includes(Xe)&&dt.cssStyles.push(...Ir.flatMap(Bt=>Bt.split(",")))}),this.elements.forEach(dt=>{dt.classes.includes(Xe)&&dt.cssStyles.push(...Ir.flatMap(Bt=>Bt.split(",")))})}}getClasses(){return this.classes}getData(){const Be=(0,Gt.D7)(),Ir=[],Xe=[];for(const z of this.requirements.values()){const dt=z;dt.id=z.name,dt.cssStyles=z.cssStyles,dt.cssClasses=z.classes.join(" "),dt.shape="requirementBox",dt.look=Be.look,Ir.push(dt)}for(const z of this.elements.values()){const dt=z;dt.shape="requirementBox",dt.look=Be.look,dt.id=z.name,dt.cssStyles=z.cssStyles,dt.cssClasses=z.classes.join(" "),Ir.push(dt)}for(const z of this.relations){let dt=0;const Bt=z.type===this.Relationships.CONTAINS,Se={id:`${z.src}-${z.dst}-${dt}`,start:this.requirements.get(z.src)?.name??this.elements.get(z.src)?.name,end:this.requirements.get(z.dst)?.name??this.elements.get(z.dst)?.name,label:`&lt;&lt;${z.type}&gt;&gt;`,classes:"relationshipLine",style:["fill:none",Bt?"":"stroke-dasharray: 10,7"],labelpos:"c",thickness:"normal",type:"normal",pattern:Bt?"normal":"dashed",arrowTypeStart:Bt?"requirement_contains":"",arrowTypeEnd:Bt?"":"requirement_arrow",look:Be.look};Xe.push(Se),dt++}return{nodes:Ir,edges:Xe,other:{},config:Be,direction:this.getDirection()}}static#t=hr=()=>((0,ie.A)(this,"RequirementDB"),(0,j.K2)(this,"RequirementDB"),this)},hr()),Gr=(0,j.K2)(Be=>`\n\n  marker {\n    fill: ${Be.relationColor};\n    stroke: ${Be.relationColor};\n  }\n\n  marker.cross {\n    stroke: ${Be.lineColor};\n  }\n\n  svg {\n    font-family: ${Be.fontFamily};\n    font-size: ${Be.fontSize};\n  }\n\n  .reqBox {\n    fill: ${Be.requirementBackground};\n    fill-opacity: 1.0;\n    stroke: ${Be.requirementBorderColor};\n    stroke-width: ${Be.requirementBorderSize};\n  }\n  \n  .reqTitle, .reqLabel{\n    fill:  ${Be.requirementTextColor};\n  }\n  .reqLabelBox {\n    fill: ${Be.relationLabelBackground};\n    fill-opacity: 1.0;\n  }\n\n  .req-title-line {\n    stroke: ${Be.requirementBorderColor};\n    stroke-width: ${Be.requirementBorderSize};\n  }\n  .relationshipLine {\n    stroke: ${Be.relationColor};\n    stroke-width: 1;\n  }\n  .relationshipLabel {\n    fill: ${Be.relationLabelColor};\n  }\n  .divider {\n    stroke: ${Be.nodeBorder};\n    stroke-width: 1;\n  }\n  .label {\n    font-family: ${Be.fontFamily};\n    color: ${Be.nodeTextColor||Be.textColor};\n  }\n  .label text,span {\n    fill: ${Be.nodeTextColor||Be.textColor};\n    color: ${Be.nodeTextColor||Be.textColor};\n  }\n  .labelBkg {\n    background-color: ${Be.edgeLabelBackground};\n  }\n\n`,"getStyles"),aa={};(0,j.VA)(aa,{draw:()=>zr});var zr=(0,j.K2)(function(){var Be=(0,lt.A)(function*(Ir,Xe,z,dt){j.Rm.info("REF0:"),j.Rm.info("Drawing requirement diagram (unified)",Xe);const{securityLevel:Bt,state:Se,layout:X}=(0,Gt.D7)(),re=dt.db.getData(),S=(0,L.A)(Xe,Bt);re.type=dt.type,re.layoutAlgorithm=(0,Mt.q7)(X),re.nodeSpacing=Se?.nodeSpacing??50,re.rankSpacing=Se?.rankSpacing??50,re.markers=["requirement_contains","requirement_arrow"],re.diagramId=Xe,yield(0,Mt.XX)(re,S),bt._K.insertTitle(S,"requirementDiagramTitleText",Se?.titleTopMargin??25,dt.db.getDiagramTitle()),(0,D.P)(S,8,"requirementDiagram",Se?.useMaxWidth??!0)});return function(Ir,Xe,z,dt){return Be.apply(this,arguments)}}(),"draw"),Or={parser:vr,get db(){return new Wr},renderer:aa,styles:Gr}},30001:function(ri){ri.exports=function(){"use strict";var Er={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},P=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|Q|YYYY|YY?|ww?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,lt=/\d/,ie=/\d\d/,L=/\d\d?/,D=/\d*[^-_:/,()\s\d]+/,Mt={},ut=function(Gt){return(Gt=+Gt)+(Gt>68?1900:2e3)},G=function(Gt){return function(j){this[Gt]=+j}},w=[/[+-]\d\d:?(\d\d)?|Z/,function(Gt){(this.zone||(this.zone={})).offset=function(j){if(!j||"Z"===j)return 0;var hr=j.match(/([+-]|\d\d)/g),ze=60*hr[1]+(+hr[2]||0);return 0===ze?0:"+"===hr[0]?-ze:ze}(Gt)}],Lt=function(Gt){var j=Mt[Gt];return j&&(j.indexOf?j:j.s.concat(j.f))},At=function(Gt,j){var hr,ze=Mt.meridiem;if(ze){for(var vr=1;vr<=24;vr+=1)if(Gt.indexOf(ze(vr,0,j))>-1){hr=vr>12;break}}else hr=Gt===(j?"pm":"PM");return hr},Ge={A:[D,function(Gt){this.afternoon=At(Gt,!1)}],a:[D,function(Gt){this.afternoon=At(Gt,!0)}],Q:[lt,function(Gt){this.month=3*(Gt-1)+1}],S:[lt,function(Gt){this.milliseconds=100*+Gt}],SS:[ie,function(Gt){this.milliseconds=10*+Gt}],SSS:[/\d{3}/,function(Gt){this.milliseconds=+Gt}],s:[L,G("seconds")],ss:[L,G("seconds")],m:[L,G("minutes")],mm:[L,G("minutes")],H:[L,G("hours")],h:[L,G("hours")],HH:[L,G("hours")],hh:[L,G("hours")],D:[L,G("day")],DD:[ie,G("day")],Do:[D,function(Gt){var j=Mt.ordinal,hr=Gt.match(/\d+/);if(this.day=hr[0],j)for(var ze=1;ze<=31;ze+=1)j(ze).replace(/\[|\]/g,"")===Gt&&(this.day=ze)}],w:[L,G("week")],ww:[ie,G("week")],M:[L,G("month")],MM:[ie,G("month")],MMM:[D,function(Gt){var j=Lt("months"),hr=(Lt("monthsShort")||j.map(function(ze){return ze.slice(0,3)})).indexOf(Gt)+1;if(hr<1)throw new Error;this.month=hr%12||hr}],MMMM:[D,function(Gt){var j=Lt("months").indexOf(Gt)+1;if(j<1)throw new Error;this.month=j%12||j}],Y:[/[+-]?\d+/,G("year")],YY:[ie,function(Gt){this.year=ut(Gt)}],YYYY:[/\d{4}/,G("year")],Z:w,ZZ:w};return function(Gt,j,hr){hr.p.customParseFormat=!0,Gt&&Gt.parseTwoDigitYear&&(ut=Gt.parseTwoDigitYear);var ze=j.prototype,vr=ze.parse;ze.parse=function(Wr){var Br=Wr.date,Gr=Wr.utc,aa=Wr.args;this.$u=Gr;var zr=aa[1];if("string"==typeof zr){var Or=!0===aa[2],Be=!0===aa[3],Ir=Or||Be,Xe=aa[2];Be&&(Xe=aa[2]),Mt=this.$locale(),!Or&&Xe&&(Mt=hr.Ls[Xe]),this.$d=function(Se,X,re,S){try{if(["x","X"].indexOf(X)>-1)return new Date(("X"===X?1e3:1)*Se);var ee=function bt(Gt){var hr;hr=Mt&&Mt.formats;for(var ze=(Gt=Gt.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(Or,Be,Ir){var Xe=Ir&&Ir.toUpperCase();return Be||hr[Ir]||Er[Ir]||hr[Xe].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(z,dt,Bt){return dt||Bt.slice(1)})})).match(P),vr=ze.length,Wr=0;Wr<vr;Wr+=1){var Br=ze[Wr],Gr=Ge[Br],zr=Gr&&Gr[1];ze[Wr]=zr?{regex:Gr&&Gr[0],parser:zr}:Br.replace(/^\[|\]$/g,"")}return function(Or){for(var Be={},Ir=0,Xe=0;Ir<vr;Ir+=1){var z=ze[Ir];if("string"==typeof z)Xe+=z.length;else{var dt=z.regex,Bt=z.parser,Se=Or.slice(Xe),X=dt.exec(Se)[0];Bt.call(Be,X),Or=Or.replace(X,"")}}return function(re){var S=re.afternoon;if(void 0!==S){var ee=re.hours;S?ee<12&&(re.hours+=12):12===ee&&(re.hours=0),delete re.afternoon}}(Be),Be}}(X)(Se),Rt=ee.year,qt=ee.month,V=ee.day,gt=ee.hours,Y=ee.minutes,Nt=ee.seconds,St=ee.milliseconds,Ut=ee.zone,ye=ee.week,le=new Date,Pe=V||(Rt||qt?1:le.getDate()),oe=Rt||le.getFullYear(),qe=0;Rt&&!qt||(qe=qt>0?qt-1:le.getMonth());var We,Et=gt||0,Tt=Y||0,B=Nt||0,N=St||0;return Ut?new Date(Date.UTC(oe,qe,Pe,Et,Tt,B,N+60*Ut.offset*1e3)):re?new Date(Date.UTC(oe,qe,Pe,Et,Tt,B,N)):(We=new Date(oe,qe,Pe,Et,Tt,B,N),ye&&(We=S(We).week(ye).toDate()),We)}catch{return new Date("")}}(Br,zr,Gr,hr),this.init(),Xe&&!0!==Xe&&(this.$L=this.locale(Xe).$L),Ir&&Br!=this.format(zr)&&(this.$d=new Date("")),Mt={}}else if(zr instanceof Array)for(var z=zr.length,dt=1;dt<=z;dt+=1){aa[1]=zr[dt-1];var Bt=hr.apply(this,aa);if(Bt.isValid()){this.$d=Bt.$d,this.$L=Bt.$L,this.init();break}dt===z&&(this.$d=new Date(""))}else vr.call(this,Wr)}}}()},30362:(ri,Er)=>{"use strict";let P;function lt(){if(void 0===P)throw new Error("No runtime abstraction layer installed");return P}Object.defineProperty(Er,"__esModule",{value:!0}),(lt||(lt={})).install=function L(D){if(void 0===D)throw new Error("No runtime abstraction layer provided");P=D},Er.default=lt},32239:(ri,Er,P)=>{"use strict";P.d(Er,{O:()=>ie});var ie=(0,P(32303).K2)(({flowchart:L})=>{const D=L?.subGraphTitleMargin?.top??0,Mt=L?.subGraphTitleMargin?.bottom??0;return{subGraphTitleTopMargin:D,subGraphTitleBottomMargin:Mt,subGraphTitleTotalMargin:D+Mt}},"getSubGraphTitleMargins")},32303:(ri,Er,P)=>{"use strict";P.d(Er,{He:()=>G,K2:()=>L,Rm:()=>ut,VA:()=>D});var lt=P(49645),ie=Object.defineProperty,L=(Lt,At)=>ie(Lt,"name",{value:At,configurable:!0}),D=(Lt,At)=>{for(var Ge in At)ie(Lt,Ge,{get:At[Ge],enumerable:!0})},Mt={trace:0,debug:1,info:2,warn:3,error:4,fatal:5},ut={trace:L((...Lt)=>{},"trace"),debug:L((...Lt)=>{},"debug"),info:L((...Lt)=>{},"info"),warn:L((...Lt)=>{},"warn"),error:L((...Lt)=>{},"error"),fatal:L((...Lt)=>{},"fatal")},G=L(function(Lt="fatal"){let At=Mt.fatal;"string"==typeof Lt?Lt.toLowerCase()in Mt&&(At=Mt[Lt]):"number"==typeof Lt&&(At=Lt),ut.trace=()=>{},ut.debug=()=>{},ut.info=()=>{},ut.warn=()=>{},ut.error=()=>{},ut.fatal=()=>{},At<=Mt.fatal&&(ut.fatal=console.error?console.error.bind(console,w("FATAL"),"color: orange"):console.log.bind(console,"\x1b[35m",w("FATAL"))),At<=Mt.error&&(ut.error=console.error?console.error.bind(console,w("ERROR"),"color: orange"):console.log.bind(console,"\x1b[31m",w("ERROR"))),At<=Mt.warn&&(ut.warn=console.warn?console.warn.bind(console,w("WARN"),"color: orange"):console.log.bind(console,"\x1b[33m",w("WARN"))),At<=Mt.info&&(ut.info=console.info?console.info.bind(console,w("INFO"),"color: lightblue"):console.log.bind(console,"\x1b[34m",w("INFO"))),At<=Mt.debug&&(ut.debug=console.debug?console.debug.bind(console,w("DEBUG"),"color: lightgreen"):console.log.bind(console,"\x1b[32m",w("DEBUG"))),At<=Mt.trace&&(ut.trace=console.debug?console.debug.bind(console,w("TRACE"),"color: lightgreen"):console.log.bind(console,"\x1b[32m",w("TRACE")))},"setLogLevel"),w=L(Lt=>`%c${lt().format("ss.SSS")} : ${Lt} : `,"format")},32699:(ri,Er,P)=>{"use strict";P.r(Er),P.d(Er,{diagram:()=>yt});var Gt,lt=P(89204),ie=P(45027),L=P(69664),D=P(59355),Mt=P(80525),ut=P(52052),G=P(79006),w=P(32303),Lt=P(62233),At=P(15363),Ge=P(10867),bt=P(40622),j={L:"left",R:"right",T:"top",B:"bottom"},hr={L:(0,w.K2)(it=>`${it},${it/2} 0,${it} 0,0`,"L"),R:(0,w.K2)(it=>`0,${it/2} ${it},0 ${it},${it}`,"R"),T:(0,w.K2)(it=>`0,0 ${it},0 ${it/2},${it}`,"T"),B:(0,w.K2)(it=>`${it/2},0 ${it},${it} 0,${it}`,"B")},ze={L:(0,w.K2)((it,rt)=>it-rt+2,"L"),R:(0,w.K2)((it,rt)=>it-2,"R"),T:(0,w.K2)((it,rt)=>it-rt+2,"T"),B:(0,w.K2)((it,rt)=>it-2,"B")},vr=(0,w.K2)(function(it){return Br(it)?"L"===it?"R":"L":"T"===it?"B":"T"},"getOppositeArchitectureDirection"),Wr=(0,w.K2)(function(it){return"L"===it||"R"===it||"T"===it||"B"===it},"isArchitectureDirection"),Br=(0,w.K2)(function(it){return"L"===it||"R"===it},"isArchitectureDirectionX"),Gr=(0,w.K2)(function(it){return"T"===it||"B"===it},"isArchitectureDirectionY"),aa=(0,w.K2)(function(it,rt){const _t=Br(it)&&Gr(rt),ht=Gr(it)&&Br(rt);return _t||ht},"isArchitectureDirectionXY"),zr=(0,w.K2)(function(it){const rt=it[0],_t=it[1],ht=Br(rt)&&Gr(_t),Ot=Gr(rt)&&Br(_t);return ht||Ot},"isArchitecturePairXY"),Or=(0,w.K2)(function(it){return"LL"!==it&&"RR"!==it&&"TT"!==it&&"BB"!==it},"isValidArchitectureDirectionPair"),Be=(0,w.K2)(function(it,rt){const _t=`${it}${rt}`;return Or(_t)?_t:void 0},"getArchitectureDirectionPair"),Ir=(0,w.K2)(function([it,rt],_t){const ht=_t[0],Ot=_t[1];return Br(ht)?Gr(Ot)?[it+("L"===ht?-1:1),rt+("T"===Ot?1:-1)]:[it+("L"===ht?-1:1),rt]:Br(Ot)?[it+("L"===Ot?1:-1),rt+("T"===ht?1:-1)]:[it,rt+("T"===ht?1:-1)]},"shiftPositionByArchitectureDirectionPair"),Xe=(0,w.K2)(function(it){return"LT"===it||"TL"===it?[1,1]:"BL"===it||"LB"===it?[1,-1]:"BR"===it||"RB"===it?[-1,-1]:[-1,1]},"getArchitectureDirectionXYFactors"),z=(0,w.K2)(function(it,rt){return aa(it,rt)?"bend":Br(it)?"horizontal":"vertical"},"getArchitectureDirectionAlignment"),dt=(0,w.K2)(function(it){return"service"===it.type},"isArchitectureService"),Bt=(0,w.K2)(function(it){return"junction"===it.type},"isArchitectureJunction"),Se=(0,w.K2)(it=>it.data(),"edgeData"),X=(0,w.K2)(it=>it.data(),"nodeData"),re=G.UI.architecture,S=(class{constructor(){this.nodes={},this.groups={},this.edges=[],this.registeredIds={},this.elements={},this.setAccTitle=G.SV,this.getAccTitle=G.iN,this.setDiagramTitle=G.ke,this.getDiagramTitle=G.ab,this.getAccDescription=G.m7,this.setAccDescription=G.EI,this.clear()}clear(){this.nodes={},this.groups={},this.edges=[],this.registeredIds={},this.dataStructures=void 0,this.elements={},(0,G.IU)()}addService({id:it,icon:rt,in:_t,title:ht,iconText:Ot}){if(void 0!==this.registeredIds[it])throw new Error(`The service id [${it}] is already in use by another ${this.registeredIds[it]}`);if(void 0!==_t){if(it===_t)throw new Error(`The service [${it}] cannot be placed within itself`);if(void 0===this.registeredIds[_t])throw new Error(`The service [${it}]'s parent does not exist. Please make sure the parent is created before this service`);if("node"===this.registeredIds[_t])throw new Error(`The service [${it}]'s parent is not a group`)}this.registeredIds[it]="node",this.nodes[it]={id:it,type:"service",icon:rt,iconText:Ot,title:ht,edges:[],in:_t}}getServices(){return Object.values(this.nodes).filter(dt)}addJunction({id:it,in:rt}){this.registeredIds[it]="node",this.nodes[it]={id:it,type:"junction",edges:[],in:rt}}getJunctions(){return Object.values(this.nodes).filter(Bt)}getNodes(){return Object.values(this.nodes)}getNode(it){return this.nodes[it]??null}addGroup({id:it,icon:rt,in:_t,title:ht}){if(void 0!==this.registeredIds?.[it])throw new Error(`The group id [${it}] is already in use by another ${this.registeredIds[it]}`);if(void 0!==_t){if(it===_t)throw new Error(`The group [${it}] cannot be placed within itself`);if(void 0===this.registeredIds?.[_t])throw new Error(`The group [${it}]'s parent does not exist. Please make sure the parent is created before this group`);if("node"===this.registeredIds?.[_t])throw new Error(`The group [${it}]'s parent is not a group`)}this.registeredIds[it]="group",this.groups[it]={id:it,icon:rt,title:ht,in:_t}}getGroups(){return Object.values(this.groups)}addEdge({lhsId:it,rhsId:rt,lhsDir:_t,rhsDir:ht,lhsInto:Ot,rhsInto:H,lhsGroup:ot,rhsGroup:ke,title:Pt}){if(!Wr(_t))throw new Error(`Invalid direction given for left hand side of edge ${it}--${rt}. Expected (L,R,T,B) got ${String(_t)}`);if(!Wr(ht))throw new Error(`Invalid direction given for right hand side of edge ${it}--${rt}. Expected (L,R,T,B) got ${String(ht)}`);if(void 0===this.nodes[it]&&void 0===this.groups[it])throw new Error(`The left-hand id [${it}] does not yet exist. Please create the service/group before declaring an edge to it.`);if(void 0===this.nodes[rt]&&void 0===this.groups[rt])throw new Error(`The right-hand id [${rt}] does not yet exist. Please create the service/group before declaring an edge to it.`);const Zt=this.nodes[it].in,pe=this.nodes[rt].in;if(ot&&Zt&&pe&&Zt==pe)throw new Error(`The left-hand id [${it}] is modified to traverse the group boundary, but the edge does not pass through two groups.`);if(ke&&Zt&&pe&&Zt==pe)throw new Error(`The right-hand id [${rt}] is modified to traverse the group boundary, but the edge does not pass through two groups.`);this.edges.push({lhsId:it,lhsDir:_t,lhsInto:Ot,lhsGroup:ot,rhsId:rt,rhsDir:ht,rhsInto:H,rhsGroup:ke,title:Pt}),this.nodes[it]&&this.nodes[rt]&&(this.nodes[it].edges.push(this.edges[this.edges.length-1]),this.nodes[rt].edges.push(this.edges[this.edges.length-1]))}getEdges(){return this.edges}getDataStructures(){if(void 0===this.dataStructures){const it={},rt=Object.entries(this.nodes).reduce((ke,[Pt,Zt])=>(ke[Pt]=Zt.edges.reduce((pe,Re)=>{const Ze=this.getNode(Re.lhsId)?.in,de=this.getNode(Re.rhsId)?.in;if(Ze&&de&&Ze!==de){const yr=z(Re.lhsDir,Re.rhsDir);"bend"!==yr&&(it[Ze]??={},it[Ze][de]=yr,it[de]??={},it[de][Ze]=yr)}if(Re.lhsId===Pt){const yr=Be(Re.lhsDir,Re.rhsDir);yr&&(pe[yr]=Re.rhsId)}else{const yr=Be(Re.rhsDir,Re.lhsDir);yr&&(pe[yr]=Re.lhsId)}return pe},{}),ke),{}),_t=Object.keys(rt)[0],ht={[_t]:1},Ot=Object.keys(rt).reduce((ke,Pt)=>Pt===_t?ke:{...ke,[Pt]:1},{}),H=(0,w.K2)(ke=>{const Pt={[ke]:[0,0]},Zt=[ke];for(;Zt.length>0;){const pe=Zt.shift();if(pe){ht[pe]=1,delete Ot[pe];const Re=rt[pe],[Ze,de]=Pt[pe];Object.entries(Re).forEach(([yr,mr])=>{ht[mr]||(Pt[mr]=Ir([Ze,de],yr),Zt.push(mr))})}}return Pt},"BFS"),ot=[H(_t)];for(;Object.keys(Ot).length>0;)ot.push(H(Object.keys(Ot)[0]));this.dataStructures={adjList:rt,spatialMaps:ot,groupAlignments:it}}return this.dataStructures}setElementForId(it,rt){this.elements[it]=rt}getElementById(it){return this.elements[it]}getConfig(){return(0,ut.$t)({...re,...(0,G.zj)().architecture})}getConfigField(it){return this.getConfig()[it]}static#t=Gt=()=>((0,ie.A)(this,"ArchitectureDB"),(0,w.K2)(this,"ArchitectureDB"),this)},Gt()),ee=(0,w.K2)((it,rt)=>{(0,Mt.S)(it,rt),it.groups.map(_t=>rt.addGroup(_t)),it.services.map(_t=>rt.addService({..._t,type:"service"})),it.junctions.map(_t=>rt.addJunction({..._t,type:"junction"})),it.edges.map(_t=>rt.addEdge(_t))},"populateDb"),Rt={parser:{yy:void 0},parse:(0,w.K2)(function(){var it=(0,lt.A)(function*(rt){const _t=yield(0,Lt.qg)("architecture",rt);w.Rm.debug(_t);const ht=Rt.parser?.yy;if(!(ht instanceof S))throw new Error("parser.parser?.yy was not a ArchitectureDB. This is due to a bug within Mermaid, please report this issue at https://github.com/mermaid-js/mermaid/issues.");ee(_t,ht)});return function(rt){return it.apply(this,arguments)}}(),"parse")},V=(0,w.K2)(it=>`\n  .edge {\n    stroke-width: ${it.archEdgeWidth};\n    stroke: ${it.archEdgeColor};\n    fill: none;\n  }\n\n  .arrow {\n    fill: ${it.archEdgeArrowColor};\n  }\n\n  .node-bkg {\n    fill: none;\n    stroke: ${it.archGroupBorderColor};\n    stroke-width: ${it.archGroupBorderWidth};\n    stroke-dasharray: 8;\n  }\n  .node-icon-text {\n    display: flex; \n    align-items: center;\n  }\n  \n  .node-icon-text > div {\n    color: #fff;\n    margin: 1px;\n    height: fit-content;\n    text-align: center;\n    overflow: hidden;\n    display: -webkit-box;\n    -webkit-box-orient: vertical;\n  }\n`,"getStyles"),gt=(0,w.K2)(it=>`<g><rect width="80" height="80" style="fill: #087ebf; stroke-width: 0px;"/>${it}</g>`,"wrapIcon"),Y={prefix:"mermaid-architecture",height:80,width:80,icons:{database:{body:gt('<path id="b" data-name="4" d="m20,57.86c0,3.94,8.95,7.14,20,7.14s20-3.2,20-7.14" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><path id="c" data-name="3" d="m20,45.95c0,3.94,8.95,7.14,20,7.14s20-3.2,20-7.14" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><path id="d" data-name="2" d="m20,34.05c0,3.94,8.95,7.14,20,7.14s20-3.2,20-7.14" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><ellipse id="e" data-name="1" cx="40" cy="22.14" rx="20" ry="7.14" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="20" y1="57.86" x2="20" y2="22.14" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="60" y1="57.86" x2="60" y2="22.14" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/>')},server:{body:gt('<rect x="17.5" y="17.5" width="45" height="45" rx="2" ry="2" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="17.5" y1="32.5" x2="62.5" y2="32.5" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="17.5" y1="47.5" x2="62.5" y2="47.5" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><g><path d="m56.25,25c0,.27-.45.5-1,.5h-10.5c-.55,0-1-.23-1-.5s.45-.5,1-.5h10.5c.55,0,1,.23,1,.5Z" style="fill: #fff; stroke-width: 0px;"/><path d="m56.25,25c0,.27-.45.5-1,.5h-10.5c-.55,0-1-.23-1-.5s.45-.5,1-.5h10.5c.55,0,1,.23,1,.5Z" style="fill: none; stroke: #fff; stroke-miterlimit: 10;"/></g><g><path d="m56.25,40c0,.27-.45.5-1,.5h-10.5c-.55,0-1-.23-1-.5s.45-.5,1-.5h10.5c.55,0,1,.23,1,.5Z" style="fill: #fff; stroke-width: 0px;"/><path d="m56.25,40c0,.27-.45.5-1,.5h-10.5c-.55,0-1-.23-1-.5s.45-.5,1-.5h10.5c.55,0,1,.23,1,.5Z" style="fill: none; stroke: #fff; stroke-miterlimit: 10;"/></g><g><path d="m56.25,55c0,.27-.45.5-1,.5h-10.5c-.55,0-1-.23-1-.5s.45-.5,1-.5h10.5c.55,0,1,.23,1,.5Z" style="fill: #fff; stroke-width: 0px;"/><path d="m56.25,55c0,.27-.45.5-1,.5h-10.5c-.55,0-1-.23-1-.5s.45-.5,1-.5h10.5c.55,0,1,.23,1,.5Z" style="fill: none; stroke: #fff; stroke-miterlimit: 10;"/></g><g><circle cx="32.5" cy="25" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/><circle cx="27.5" cy="25" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/><circle cx="22.5" cy="25" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/></g><g><circle cx="32.5" cy="40" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/><circle cx="27.5" cy="40" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/><circle cx="22.5" cy="40" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/></g><g><circle cx="32.5" cy="55" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/><circle cx="27.5" cy="55" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/><circle cx="22.5" cy="55" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/></g>')},disk:{body:gt('<rect x="20" y="15" width="40" height="50" rx="1" ry="1" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><ellipse cx="24" cy="19.17" rx=".8" ry=".83" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><ellipse cx="56" cy="19.17" rx=".8" ry=".83" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><ellipse cx="24" cy="60.83" rx=".8" ry=".83" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><ellipse cx="56" cy="60.83" rx=".8" ry=".83" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><ellipse cx="40" cy="33.75" rx="14" ry="14.58" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><ellipse cx="40" cy="33.75" rx="4" ry="4.17" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><path d="m37.51,42.52l-4.83,13.22c-.26.71-1.1,1.02-1.76.64l-4.18-2.42c-.66-.38-.81-1.26-.33-1.84l9.01-10.8c.88-1.05,2.56-.08,2.09,1.2Z" style="fill: #fff; stroke-width: 0px;"/>')},internet:{body:gt('<circle cx="40" cy="40" r="22.5" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="40" y1="17.5" x2="40" y2="62.5" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="17.5" y1="40" x2="62.5" y2="40" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><path d="m39.99,17.51c-15.28,11.1-15.28,33.88,0,44.98" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><path d="m40.01,17.51c15.28,11.1,15.28,33.88,0,44.98" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="19.75" y1="30.1" x2="60.25" y2="30.1" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="19.75" y1="49.9" x2="60.25" y2="49.9" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/>')},cloud:{body:gt('<path d="m65,47.5c0,2.76-2.24,5-5,5H20c-2.76,0-5-2.24-5-5,0-1.87,1.03-3.51,2.56-4.36-.04-.21-.06-.42-.06-.64,0-2.6,2.48-4.74,5.65-4.97,1.65-4.51,6.34-7.76,11.85-7.76.86,0,1.69.08,2.5.23,2.09-1.57,4.69-2.5,7.5-2.5,6.1,0,11.19,4.38,12.28,10.17,2.14.56,3.72,2.51,3.72,4.83,0,.03,0,.07-.01.1,2.29.46,4.01,2.48,4.01,4.9Z" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/>')},unknown:D.Gc,blank:{body:gt("")}}},Nt=(0,w.K2)(function(){var it=(0,lt.A)(function*(rt,_t,ht){const Ot=ht.getConfigField("padding"),H=ht.getConfigField("iconSize"),ot=H/2,ke=H/6,Pt=ke/2;yield Promise.all(_t.edges().map(function(){var Zt=(0,lt.A)(function*(pe){const{source:Re,sourceDir:Ze,sourceArrow:de,sourceGroup:yr,target:mr,targetDir:Wt,targetArrow:we,targetGroup:sr,label:ve}=Se(pe);let{x:ce,y:Ee}=pe[0].sourceEndpoint();const{x:Ae,y:er}=pe[0].midpoint();let{x:Qe,y:Dr}=pe[0].targetEndpoint();const _e=Ot+4;if(yr&&(Br(Ze)?ce+="L"===Ze?-_e:_e:Ee+="T"===Ze?-_e:_e+18),sr&&(Br(Wt)?Qe+="L"===Wt?-_e:_e:Dr+="T"===Wt?-_e:_e+18),!yr&&"junction"===ht.getNode(Re)?.type&&(Br(Ze)?ce+="L"===Ze?ot:-ot:Ee+="T"===Ze?ot:-ot),!sr&&"junction"===ht.getNode(mr)?.type&&(Br(Wt)?Qe+="L"===Wt?ot:-ot:Dr+="T"===Wt?ot:-ot),pe[0]._private.rscratch){const Yr=rt.insert("g");if(Yr.insert("path").attr("d",`M ${ce},${Ee} L ${Ae},${er} L${Qe},${Dr} `).attr("class","edge").attr("id",(0,ut.rY)(Re,mr,{prefix:"L"})),de){const nr=Br(Ze)?ze[Ze](ce,ke):ce-Pt,te=Gr(Ze)?ze[Ze](Ee,ke):Ee-Pt;Yr.insert("polygon").attr("points",hr[Ze](ke)).attr("transform",`translate(${nr},${te})`).attr("class","arrow")}if(we){const nr=Br(Wt)?ze[Wt](Qe,ke):Qe-Pt,te=Gr(Wt)?ze[Wt](Dr,ke):Dr-Pt;Yr.insert("polygon").attr("points",hr[Wt](ke)).attr("transform",`translate(${nr},${te})`).attr("class","arrow")}if(ve){const nr=aa(Ze,Wt)?"XY":Br(Ze)?"X":"Y";let te=0;te="X"===nr?Math.abs(ce-Qe):"Y"===nr?Math.abs(Ee-Dr)/1.5:Math.abs(ce-Qe)/2;const ne=Yr.append("g");if(yield(0,D.GZ)(ne,ve,{useHtmlLabels:!1,width:te,classes:"architecture-service-label"},(0,G.D7)()),ne.attr("dy","1em").attr("alignment-baseline","middle").attr("dominant-baseline","middle").attr("text-anchor","middle"),"X"===nr)ne.attr("transform","translate("+Ae+", "+er+")");else if("Y"===nr)ne.attr("transform","translate("+Ae+", "+er+") rotate(-90)");else if("XY"===nr){const be=Be(Ze,Wt);if(be&&zr(be)){const ar=ne.node().getBoundingClientRect(),[g,y]=Xe(be);ne.attr("dominant-baseline","auto").attr("transform",`rotate(${-1*g*y*45})`);const E=ne.node().getBoundingClientRect();ne.attr("transform",`\n                translate(${Ae}, ${er-ar.height/2})\n                translate(${g*E.width/2}, ${y*E.height/2})\n                rotate(${-1*g*y*45}, 0, ${ar.height/2})\n              `)}}}}});return function(pe){return Zt.apply(this,arguments)}}()))});return function(rt,_t,ht){return it.apply(this,arguments)}}(),"drawEdges"),St=(0,w.K2)(function(){var it=(0,lt.A)(function*(rt,_t,ht){const H=.75*ht.getConfigField("padding"),ot=ht.getConfigField("fontSize"),Pt=ht.getConfigField("iconSize")/2;yield Promise.all(_t.nodes().map(function(){var Zt=(0,lt.A)(function*(pe){const Re=X(pe);if("group"===Re.type){const{h:Ze,w:de,x1:yr,y1:mr}=pe.boundingBox(),Wt=rt.append("rect");Wt.attr("id",`group-${Re.id}`).attr("x",yr+Pt).attr("y",mr+Pt).attr("width",de).attr("height",Ze).attr("class","node-bkg");const we=rt.append("g");let sr=yr,ve=mr;if(Re.icon){const ce=we.append("g");ce.html(`<g>${yield(0,D.WY)(Re.icon,{height:H,width:H,fallbackPrefix:Y.prefix})}</g>`),ce.attr("transform","translate("+(sr+Pt+1)+", "+(ve+Pt+1)+")"),sr+=H,ve+=ot/2-1-2}if(Re.label){const ce=we.append("g");yield(0,D.GZ)(ce,Re.label,{useHtmlLabels:!1,width:de,classes:"architecture-service-label"},(0,G.D7)()),ce.attr("dy","1em").attr("alignment-baseline","middle").attr("dominant-baseline","start").attr("text-anchor","start"),ce.attr("transform","translate("+(sr+Pt+4)+", "+(ve+Pt+2)+")")}ht.setElementForId(Re.id,Wt)}});return function(pe){return Zt.apply(this,arguments)}}()))});return function(rt,_t,ht){return it.apply(this,arguments)}}(),"drawGroups"),Ut=(0,w.K2)(function(){var it=(0,lt.A)(function*(rt,_t,ht){const Ot=(0,G.D7)();for(const H of ht){const ot=_t.append("g"),ke=rt.getConfigField("iconSize");if(H.title){const Re=ot.append("g");yield(0,D.GZ)(Re,H.title,{useHtmlLabels:!1,width:1.5*ke,classes:"architecture-service-label"},Ot),Re.attr("dy","1em").attr("alignment-baseline","middle").attr("dominant-baseline","middle").attr("text-anchor","middle"),Re.attr("transform","translate("+ke/2+", "+ke+")")}const Pt=ot.append("g");if(H.icon)Pt.html(`<g>${yield(0,D.WY)(H.icon,{height:ke,width:ke,fallbackPrefix:Y.prefix})}</g>`);else if(H.iconText){Pt.html(`<g>${yield(0,D.WY)("blank",{height:ke,width:ke,fallbackPrefix:Y.prefix})}</g>`);const de=Pt.append("g").append("foreignObject").attr("width",ke).attr("height",ke).append("div").attr("class","node-icon-text").attr("style",`height: ${ke}px;`).append("div").html((0,G.jZ)(H.iconText,Ot)),yr=parseInt(window.getComputedStyle(de.node(),null).getPropertyValue("font-size").replace(/\D/g,""))??16;de.attr("style",`-webkit-line-clamp: ${Math.floor((ke-2)/yr)};`)}else Pt.append("path").attr("class","node-bkg").attr("id","node-"+H.id).attr("d",`M0 ${ke} v${-ke} q0,-5 5,-5 h${ke} q5,0 5,5 v${ke} H0 Z`);ot.attr("id",`service-${H.id}`).attr("class","architecture-service");const{width:Zt,height:pe}=ot.node().getBBox();H.width=Zt,H.height=pe,rt.setElementForId(H.id,ot)}return 0});return function(rt,_t,ht){return it.apply(this,arguments)}}(),"drawServices"),ye=(0,w.K2)(function(it,rt,_t){_t.forEach(ht=>{const Ot=rt.append("g"),H=it.getConfigField("iconSize");Ot.append("g").append("rect").attr("id","node-"+ht.id).attr("fill-opacity","0").attr("width",H).attr("height",H),Ot.attr("class","architecture-junction");const{width:ke,height:Pt}=Ot._groups[0][0].getBBox();Ot.width=ke,Ot.height=Pt,it.setElementForId(ht.id,Ot)})},"drawJunctions");function le(it,rt,_t){it.forEach(ht=>{rt.add({group:"nodes",data:{type:"service",id:ht.id,icon:ht.icon,label:ht.title,parent:ht.in,width:_t.getConfigField("iconSize"),height:_t.getConfigField("iconSize")},classes:"node-service"})})}function Pe(it,rt,_t){it.forEach(ht=>{rt.add({group:"nodes",data:{type:"junction",id:ht.id,parent:ht.in,width:_t.getConfigField("iconSize"),height:_t.getConfigField("iconSize")},classes:"node-junction"})})}function oe(it,rt){rt.nodes().map(_t=>{const ht=X(_t);"group"!==ht.type&&(ht.x=_t.position().x,ht.y=_t.position().y,it.getElementById(ht.id).attr("transform","translate("+(ht.x||0)+","+(ht.y||0)+")"))})}function qe(it,rt){it.forEach(_t=>{rt.add({group:"nodes",data:{type:"group",id:_t.id,icon:_t.icon,label:_t.title,parent:_t.in},classes:"node-group"})})}function We(it,rt){it.forEach(_t=>{const{lhsId:ht,rhsId:Ot,lhsInto:H,lhsGroup:ot,rhsInto:ke,lhsDir:Pt,rhsDir:Zt,rhsGroup:pe,title:Re}=_t,Ze=aa(_t.lhsDir,_t.rhsDir)?"segments":"straight";rt.add({group:"edges",data:{id:`${ht}-${Ot}`,label:Re,source:ht,sourceDir:Pt,sourceArrow:H,sourceGroup:ot,sourceEndpoint:"L"===Pt?"0 50%":"R"===Pt?"100% 50%":"T"===Pt?"50% 0":"50% 100%",target:Ot,targetDir:Zt,targetArrow:ke,targetGroup:pe,targetEndpoint:"L"===Zt?"0 50%":"R"===Zt?"100% 50%":"T"===Zt?"50% 0":"50% 100%"},classes:Ze})})}function Et(it,rt,_t){const ht=(0,w.K2)((ke,Pt)=>Object.entries(ke).reduce((Zt,[pe,Re])=>{let Ze=0;const de=Object.entries(Re);if(1===de.length)return Zt[pe]=de[0][1],Zt;for(let yr=0;yr<de.length-1;yr++)for(let mr=yr+1;mr<de.length;mr++){const[Wt,we]=de[yr],[sr,ve]=de[mr];_t[Wt]?.[sr]===Pt||"default"===Wt||"default"===sr?(Zt[pe]??=[],Zt[pe]=[...Zt[pe],...we,...ve]):(Zt[`${pe}-${Ze++}`]=we,Zt[`${pe}-${Ze++}`]=ve)}return Zt},{}),"flattenAlignments"),Ot=rt.map(ke=>{const Pt={},Zt={};return Object.entries(ke).forEach(([pe,[Re,Ze]])=>{const de=it.getNode(pe)?.in??"default";Pt[Ze]??={},Pt[Ze][de]??=[],Pt[Ze][de].push(pe),Zt[Re]??={},Zt[Re][de]??=[],Zt[Re][de].push(pe)}),{horiz:Object.values(ht(Pt,"horizontal")).filter(pe=>pe.length>1),vert:Object.values(ht(Zt,"vertical")).filter(pe=>pe.length>1)}}),[H,ot]=Ot.reduce(([ke,Pt],{horiz:Zt,vert:pe})=>[[...ke,...Zt],[...Pt,...pe]],[[],[]]);return{horizontal:H,vertical:ot}}function Tt(it,rt){const _t=[],ht=(0,w.K2)(H=>`${H[0]},${H[1]}`,"posToStr"),Ot=(0,w.K2)(H=>H.split(",").map(ot=>parseInt(ot)),"strToPos");return it.forEach(H=>{const ot=Object.fromEntries(Object.entries(H).map(([pe,Re])=>[ht(Re),pe])),ke=[ht([0,0])],Pt={},Zt={L:[-1,0],R:[1,0],T:[0,1],B:[0,-1]};for(;ke.length>0;){const pe=ke.shift();if(pe){Pt[pe]=1;const Re=ot[pe];if(Re){const Ze=Ot(pe);Object.entries(Zt).forEach(([de,yr])=>{const mr=ht([Ze[0]+yr[0],Ze[1]+yr[1]]),Wt=ot[mr];Wt&&!Pt[mr]&&(ke.push(mr),_t.push({[j[de]]:Wt,[j[vr(de)]]:Re,gap:1.5*rt.getConfigField("iconSize")}))})}}}}),_t}function B(it,rt,_t,ht,Ot,{spatialMaps:H,groupAlignments:ot}){return new Promise(ke=>{const Pt=(0,bt.Ltv)("body").append("div").attr("id","cy").attr("style","display:none"),Zt=(0,At.A)({container:document.getElementById("cy"),style:[{selector:"edge",style:{"curve-style":"straight",label:"data(label)","source-endpoint":"data(sourceEndpoint)","target-endpoint":"data(targetEndpoint)"}},{selector:"edge.segments",style:{"curve-style":"segments","segment-weights":"0","segment-distances":[.5],"edge-distances":"endpoints","source-endpoint":"data(sourceEndpoint)","target-endpoint":"data(targetEndpoint)"}},{selector:"node",style:{"compound-sizing-wrt-labels":"include"}},{selector:"node[label]",style:{"text-valign":"bottom","text-halign":"center","font-size":`${Ot.getConfigField("fontSize")}px`}},{selector:".node-service",style:{label:"data(label)",width:"data(width)",height:"data(height)"}},{selector:".node-junction",style:{width:"data(width)",height:"data(height)"}},{selector:".node-group",style:{padding:`${Ot.getConfigField("padding")}px`}}],layout:{name:"grid",boundingBox:{x1:0,x2:100,y1:0,y2:100}}});Pt.remove(),qe(_t,Zt),le(it,Zt,Ot),Pe(rt,Zt,Ot),We(ht,Zt);const pe=Et(Ot,H,ot),Re=Tt(H,Ot),Ze=Zt.layout({name:"fcose",quality:"proof",styleEnabled:!1,animate:!1,nodeDimensionsIncludeLabels:!1,idealEdgeLength(de){const[yr,mr]=de.connectedNodes(),{parent:Wt}=X(yr),{parent:we}=X(mr);return Wt===we?1.5*Ot.getConfigField("iconSize"):.5*Ot.getConfigField("iconSize")},edgeElasticity(de){const[yr,mr]=de.connectedNodes(),{parent:Wt}=X(yr),{parent:we}=X(mr);return Wt===we?.45:.001},alignmentConstraint:pe,relativePlacementConstraint:Re});Ze.one("layoutstop",()=>{function de(yr,mr,Wt,we){let sr,ve;const{x:ce,y:Ee}=yr,{x:Ae,y:er}=mr;ve=(we-Ee+(ce-Wt)*(Ee-er)/(ce-Ae))/Math.sqrt(1+Math.pow((Ee-er)/(ce-Ae),2)),sr=Math.sqrt(Math.pow(we-Ee,2)+Math.pow(Wt-ce,2)-Math.pow(ve,2)),sr/=Math.sqrt(Math.pow(Ae-ce,2)+Math.pow(er-Ee,2));let Dr=(Ae-ce)*(we-Ee)-(er-Ee)*(Wt-ce);switch(!0){case Dr>=0:Dr=1;break;case Dr<0:Dr=-1}let _e=(Ae-ce)*(Wt-ce)+(er-Ee)*(we-Ee);switch(!0){case _e>=0:_e=1;break;case _e<0:_e=-1}return ve=Math.abs(ve)*Dr,sr*=_e,{distances:ve,weights:sr}}(0,w.K2)(de,"getSegmentWeights"),Zt.startBatch();for(const yr of Object.values(Zt.edges()))if(yr.data?.()){const{x:mr,y:Wt}=yr.source().position(),{x:we,y:sr}=yr.target().position();if(mr!==we&&Wt!==sr){const ve=yr.sourceEndpoint(),ce=yr.targetEndpoint(),{sourceDir:Ee}=Se(yr),[Ae,er]=Gr(Ee)?[ve.x,ce.y]:[ce.x,ve.y],{weights:Qe,distances:Dr}=de(ve,ce,Ae,er);yr.style("segment-distances",Dr),yr.style("segment-weights",Qe)}}Zt.endBatch(),Ze.run()}),Ze.run(),Zt.ready(de=>{w.Rm.info("Ready",de),ke(Zt)})})}(0,D.pC)([{name:Y.prefix,icons:Y}]),At.A.use(Ge),(0,w.K2)(le,"addServices"),(0,w.K2)(Pe,"addJunctions"),(0,w.K2)(oe,"positionNodes"),(0,w.K2)(qe,"addGroups"),(0,w.K2)(We,"addEdges"),(0,w.K2)(Et,"getAlignments"),(0,w.K2)(Tt,"getRelativeConstraints"),(0,w.K2)(B,"layoutArchitecture");var et={draw:(0,w.K2)(function(){var it=(0,lt.A)(function*(rt,_t,ht,Ot){const H=Ot.db,ot=H.getServices(),ke=H.getJunctions(),Pt=H.getGroups(),Zt=H.getEdges(),pe=H.getDataStructures(),Re=(0,L.D)(_t),Ze=Re.append("g");Ze.attr("class","architecture-edges");const de=Re.append("g");de.attr("class","architecture-services");const yr=Re.append("g");yr.attr("class","architecture-groups"),yield Ut(H,de,ot),ye(H,de,ke);const mr=yield B(ot,ke,Pt,Zt,H,pe);yield Nt(Ze,mr,H),yield St(yr,mr,H),oe(H,mr),(0,G.ot)(void 0,Re,H.getConfigField("padding"),H.getConfigField("useMaxWidth"))});return function(rt,_t,ht,Ot){return it.apply(this,arguments)}}(),"draw")},yt={parser:Rt,get db(){return new S},renderer:et,styles:V}},32810:(ri,Er,P)=>{"use strict";P.r(Er),P.d(Er,{diagram:()=>qt});var lt=P(89204),ie=P(69664),L=P(80525),D=P(52052),Mt=P(79006),ut=P(32303),G=P(62233),w={showLegend:!0,ticks:5,max:null,min:0,graticule:"circle"},Lt={axes:[],curves:[],options:w},At=structuredClone(Lt),Ge=Mt.UI.radar,bt=(0,ut.K2)(()=>(0,D.$t)({...Ge,...(0,Mt.zj)().radar}),"getConfig"),Gt=(0,ut.K2)(()=>At.axes,"getAxes"),j=(0,ut.K2)(()=>At.curves,"getCurves"),hr=(0,ut.K2)(()=>At.options,"getOptions"),ze=(0,ut.K2)(V=>{At.axes=V.map(gt=>({name:gt.name,label:gt.label??gt.name}))},"setAxes"),vr=(0,ut.K2)(V=>{At.curves=V.map(gt=>({name:gt.name,label:gt.label??gt.name,entries:Wr(gt.entries)}))},"setCurves"),Wr=(0,ut.K2)(V=>{if(null==V[0].axis)return V.map(Y=>Y.value);const gt=Gt();if(0===gt.length)throw new Error("Axes must be populated before curves for reference entries");return gt.map(Y=>{const Nt=V.find(St=>St.axis?.$refText===Y.name);if(void 0===Nt)throw new Error("Missing entry for axis "+Y.label);return Nt.value})},"computeCurveEntries"),aa={getAxes:Gt,getCurves:j,getOptions:hr,setAxes:ze,setCurves:vr,setOptions:(0,ut.K2)(V=>{const gt=V.reduce((Y,Nt)=>(Y[Nt.name]=Nt,Y),{});At.options={showLegend:gt.showLegend?.value??w.showLegend,ticks:gt.ticks?.value??w.ticks,max:gt.max?.value??w.max,min:gt.min?.value??w.min,graticule:gt.graticule?.value??w.graticule}},"setOptions"),getConfig:bt,clear:(0,ut.K2)(()=>{(0,Mt.IU)(),At=structuredClone(Lt)},"clear"),setAccTitle:Mt.SV,getAccTitle:Mt.iN,setDiagramTitle:Mt.ke,getDiagramTitle:Mt.ab,getAccDescription:Mt.m7,setAccDescription:Mt.EI},zr=(0,ut.K2)(V=>{(0,L.S)(V,aa);const{axes:gt,curves:Y,options:Nt}=V;aa.setAxes(gt),aa.setCurves(Y),aa.setOptions(Nt)},"populate"),Or={parse:(0,ut.K2)(function(){var V=(0,lt.A)(function*(gt){const Y=yield(0,G.qg)("radar",gt);ut.Rm.debug(Y),zr(Y)});return function(gt){return V.apply(this,arguments)}}(),"parse")},Be=(0,ut.K2)((V,gt,Y,Nt)=>{const St=Nt.db,Ut=St.getAxes(),ye=St.getCurves(),le=St.getOptions(),Pe=St.getConfig(),oe=St.getDiagramTitle(),qe=(0,ie.D)(gt),We=Ir(qe,Pe),Et=le.max??Math.max(...ye.map(N=>Math.max(...N.entries))),Tt=le.min,B=Math.min(Pe.width,Pe.height)/2;Xe(We,Ut,B,le.ticks,le.graticule),z(We,Ut,B,Pe),dt(We,Ut,ye,Tt,Et,le.graticule,Pe),X(We,ye,le.showLegend,Pe),We.append("text").attr("class","radarTitle").text(oe).attr("x",0).attr("y",-Pe.height/2-Pe.marginTop)},"draw"),Ir=(0,ut.K2)((V,gt)=>{const Y=gt.width+gt.marginLeft+gt.marginRight,Nt=gt.height+gt.marginTop+gt.marginBottom,St_x=gt.marginLeft+gt.width/2,St_y=gt.marginTop+gt.height/2;return V.attr("viewbox",`0 0 ${Y} ${Nt}`).attr("width",Y).attr("height",Nt),V.append("g").attr("transform",`translate(${St_x}, ${St_y})`)},"drawFrame"),Xe=(0,ut.K2)((V,gt,Y,Nt,St)=>{if("circle"===St)for(let Ut=0;Ut<Nt;Ut++){const ye=Y*(Ut+1)/Nt;V.append("circle").attr("r",ye).attr("class","radarGraticule")}else if("polygon"===St){const Ut=gt.length;for(let ye=0;ye<Nt;ye++){const le=Y*(ye+1)/Nt,Pe=gt.map((oe,qe)=>{const We=2*qe*Math.PI/Ut-Math.PI/2;return`${le*Math.cos(We)},${le*Math.sin(We)}`}).join(" ");V.append("polygon").attr("points",Pe).attr("class","radarGraticule")}}},"drawGraticule"),z=(0,ut.K2)((V,gt,Y,Nt)=>{const St=gt.length;for(let Ut=0;Ut<St;Ut++){const ye=gt[Ut].label,le=2*Ut*Math.PI/St-Math.PI/2;V.append("line").attr("x1",0).attr("y1",0).attr("x2",Y*Nt.axisScaleFactor*Math.cos(le)).attr("y2",Y*Nt.axisScaleFactor*Math.sin(le)).attr("class","radarAxisLine"),V.append("text").text(ye).attr("x",Y*Nt.axisLabelFactor*Math.cos(le)).attr("y",Y*Nt.axisLabelFactor*Math.sin(le)).attr("class","radarAxisLabel")}},"drawAxes");function dt(V,gt,Y,Nt,St,Ut,ye){const le=gt.length,Pe=Math.min(ye.width,ye.height)/2;Y.forEach((oe,qe)=>{if(oe.entries.length!==le)return;const We=oe.entries.map((Et,Tt)=>{const B=2*Math.PI*Tt/le-Math.PI/2,N=Bt(Et,Nt,St,Pe);return{x:N*Math.cos(B),y:N*Math.sin(B)}});"circle"===Ut?V.append("path").attr("d",Se(We,ye.curveTension)).attr("class",`radarCurve-${qe}`):"polygon"===Ut&&V.append("polygon").attr("points",We.map(Et=>`${Et.x},${Et.y}`).join(" ")).attr("class",`radarCurve-${qe}`)})}function Bt(V,gt,Y,Nt){return Nt*(Math.min(Math.max(V,gt),Y)-gt)/(Y-gt)}function Se(V,gt){const Y=V.length;let Nt=`M${V[0].x},${V[0].y}`;for(let St=0;St<Y;St++){const Ut=V[(St-1+Y)%Y],ye=V[St],le=V[(St+1)%Y],Pe=V[(St+2)%Y],oe={x:ye.x+(le.x-Ut.x)*gt,y:ye.y+(le.y-Ut.y)*gt},qe={x:le.x-(Pe.x-ye.x)*gt,y:le.y-(Pe.y-ye.y)*gt};Nt+=` C${oe.x},${oe.y} ${qe.x},${qe.y} ${le.x},${le.y}`}return`${Nt} Z`}function X(V,gt,Y,Nt){if(!Y)return;const St=3*(Nt.width/2+Nt.marginRight)/4,Ut=3*-(Nt.height/2+Nt.marginTop)/4;gt.forEach((le,Pe)=>{const oe=V.append("g").attr("transform",`translate(${St}, ${Ut+20*Pe})`);oe.append("rect").attr("width",12).attr("height",12).attr("class",`radarLegendBox-${Pe}`),oe.append("text").attr("x",16).attr("y",0).attr("class","radarLegendText").text(le.label)})}(0,ut.K2)(dt,"drawCurves"),(0,ut.K2)(Bt,"relativeRadius"),(0,ut.K2)(Se,"closedRoundCurve"),(0,ut.K2)(X,"drawLegend");var re={draw:Be},S=(0,ut.K2)((V,gt)=>{let Y="";for(let Nt=0;Nt<V.THEME_COLOR_LIMIT;Nt++){const St=V[`cScale${Nt}`];Y+=`\n\t\t.radarCurve-${Nt} {\n\t\t\tcolor: ${St};\n\t\t\tfill: ${St};\n\t\t\tfill-opacity: ${gt.curveOpacity};\n\t\t\tstroke: ${St};\n\t\t\tstroke-width: ${gt.curveStrokeWidth};\n\t\t}\n\t\t.radarLegendBox-${Nt} {\n\t\t\tfill: ${St};\n\t\t\tfill-opacity: ${gt.curveOpacity};\n\t\t\tstroke: ${St};\n\t\t}\n\t\t`}return Y},"genIndexStyles"),ee=(0,ut.K2)(V=>{const gt=(0,Mt.P$)(),Y=(0,Mt.zj)(),Nt=(0,D.$t)(gt,Y.themeVariables);return{themeVariables:Nt,radarOptions:(0,D.$t)(Nt.radar,V)}},"buildRadarStyleOptions"),qt={parser:Or,db:aa,renderer:re,styles:(0,ut.K2)(({radar:V}={})=>{const{themeVariables:gt,radarOptions:Y}=ee(V);return`\n\t.radarTitle {\n\t\tfont-size: ${gt.fontSize};\n\t\tcolor: ${gt.titleColor};\n\t\tdominant-baseline: hanging;\n\t\ttext-anchor: middle;\n\t}\n\t.radarAxisLine {\n\t\tstroke: ${Y.axisColor};\n\t\tstroke-width: ${Y.axisStrokeWidth};\n\t}\n\t.radarAxisLabel {\n\t\tdominant-baseline: middle;\n\t\ttext-anchor: middle;\n\t\tfont-size: ${Y.axisLabelFontSize}px;\n\t\tcolor: ${Y.axisColor};\n\t}\n\t.radarGraticule {\n\t\tfill: ${Y.graticuleColor};\n\t\tfill-opacity: ${Y.graticuleOpacity};\n\t\tstroke: ${Y.graticuleColor};\n\t\tstroke-width: ${Y.graticuleStrokeWidth};\n\t}\n\t.radarLegendText {\n\t\ttext-anchor: start;\n\t\tfont-size: ${Y.legendFontSize}px;\n\t\tdominant-baseline: hanging;\n\t}\n\t${S(gt,Y)}\n\t`},"styles")}},33350:(ri,Er,P)=>{"use strict";P.r(Er),P.d(Er,{diagram:()=>We});var lt=P(62045),ie=P(97787),L=P(79006),D=P(32303),Mt=P(40622),ut=function(){var Et=(0,D.K2)(function(H,ot,ke,Pt){for(ke=ke||{},Pt=H.length;Pt--;ke[H[Pt]]=ot);return ke},"o"),Tt=[6,8,10,11,12,14,16,17,18],B=[1,9],N=[1,10],et=[1,11],yt=[1,12],it=[1,13],rt=[1,14],_t={trace:(0,D.K2)(function(){},"trace"),yy:{},symbols_:{error:2,start:3,journey:4,document:5,EOF:6,line:7,SPACE:8,statement:9,NEWLINE:10,title:11,acc_title:12,acc_title_value:13,acc_descr:14,acc_descr_value:15,acc_descr_multiline_value:16,section:17,taskName:18,taskData:19,$accept:0,$end:1},terminals_:{2:"error",4:"journey",6:"EOF",8:"SPACE",10:"NEWLINE",11:"title",12:"acc_title",13:"acc_title_value",14:"acc_descr",15:"acc_descr_value",16:"acc_descr_multiline_value",17:"section",18:"taskName",19:"taskData"},productions_:[0,[3,3],[5,0],[5,2],[7,2],[7,1],[7,1],[7,1],[9,1],[9,2],[9,2],[9,1],[9,1],[9,2]],performAction:(0,D.K2)(function(ot,ke,Pt,Zt,pe,Re,Ze){var de=Re.length-1;switch(pe){case 1:return Re[de-1];case 2:case 6:case 7:this.$=[];break;case 3:Re[de-1].push(Re[de]),this.$=Re[de-1];break;case 4:case 5:this.$=Re[de];break;case 8:Zt.setDiagramTitle(Re[de].substr(6)),this.$=Re[de].substr(6);break;case 9:this.$=Re[de].trim(),Zt.setAccTitle(this.$);break;case 10:case 11:this.$=Re[de].trim(),Zt.setAccDescription(this.$);break;case 12:Zt.addSection(Re[de].substr(8)),this.$=Re[de].substr(8);break;case 13:Zt.addTask(Re[de-1],Re[de]),this.$="task"}},"anonymous"),table:[{3:1,4:[1,2]},{1:[3]},Et(Tt,[2,2],{5:3}),{6:[1,4],7:5,8:[1,6],9:7,10:[1,8],11:B,12:N,14:et,16:yt,17:it,18:rt},Et(Tt,[2,7],{1:[2,1]}),Et(Tt,[2,3]),{9:15,11:B,12:N,14:et,16:yt,17:it,18:rt},Et(Tt,[2,5]),Et(Tt,[2,6]),Et(Tt,[2,8]),{13:[1,16]},{15:[1,17]},Et(Tt,[2,11]),Et(Tt,[2,12]),{19:[1,18]},Et(Tt,[2,4]),Et(Tt,[2,9]),Et(Tt,[2,10]),Et(Tt,[2,13])],defaultActions:{},parseError:(0,D.K2)(function(ot,ke){if(!ke.recoverable){var Pt=new Error(ot);throw Pt.hash=ke,Pt}this.trace(ot)},"parseError"),parse:(0,D.K2)(function(ot){var ke=this,Pt=[0],Zt=[],pe=[null],Re=[],Ze=this.table,de="",yr=0,mr=0,Wt=0,ve=Re.slice.call(arguments,1),ce=Object.create(this.lexer),Ee={yy:{}};for(var Ae in this.yy)Object.prototype.hasOwnProperty.call(this.yy,Ae)&&(Ee.yy[Ae]=this.yy[Ae]);ce.setInput(ot,Ee.yy),Ee.yy.lexer=ce,Ee.yy.parser=this,typeof ce.yylloc>"u"&&(ce.yylloc={});var er=ce.yylloc;Re.push(er);var Qe=ce.options&&ce.options.ranges;function _e(){var v;return"number"!=typeof(v=Zt.pop()||ce.lex()||1)&&(v instanceof Array&&(v=(Zt=v).pop()),v=ke.symbols_[v]||v),v}this.parseError="function"==typeof Ee.yy.parseError?Ee.yy.parseError:Object.getPrototypeOf(this).parseError,(0,D.K2)(function Dr(v){Pt.length=Pt.length-2*v,pe.length=pe.length-v,Re.length=Re.length-v},"popStack"),(0,D.K2)(_e,"lex");for(var Yr,nr,te,ne,ar,y,E,m,g={};;){if(this.defaultActions[te=Pt[Pt.length-1]]?ne=this.defaultActions[te]:((null===Yr||typeof Yr>"u")&&(Yr=_e()),ne=Ze[te]&&Ze[te][Yr]),typeof ne>"u"||!ne.length||!ne[0]){var A;for(y in m=[],Ze[te])this.terminals_[y]&&y>2&&m.push("'"+this.terminals_[y]+"'");A=ce.showPosition?"Parse error on line "+(yr+1)+":\n"+ce.showPosition()+"\nExpecting "+m.join(", ")+", got '"+(this.terminals_[Yr]||Yr)+"'":"Parse error on line "+(yr+1)+": Unexpected "+(1==Yr?"end of input":"'"+(this.terminals_[Yr]||Yr)+"'"),this.parseError(A,{text:ce.match,token:this.terminals_[Yr]||Yr,line:ce.yylineno,loc:er,expected:m})}if(ne[0]instanceof Array&&ne.length>1)throw new Error("Parse Error: multiple actions possible at state: "+te+", token: "+Yr);switch(ne[0]){case 1:Pt.push(Yr),pe.push(ce.yytext),Re.push(ce.yylloc),Pt.push(ne[1]),Yr=null,nr?(Yr=nr,nr=null):(mr=ce.yyleng,de=ce.yytext,yr=ce.yylineno,er=ce.yylloc,Wt>0&&Wt--);break;case 2:if(g.$=pe[pe.length-(E=this.productions_[ne[1]][1])],g._$={first_line:Re[Re.length-(E||1)].first_line,last_line:Re[Re.length-1].last_line,first_column:Re[Re.length-(E||1)].first_column,last_column:Re[Re.length-1].last_column},Qe&&(g._$.range=[Re[Re.length-(E||1)].range[0],Re[Re.length-1].range[1]]),typeof(ar=this.performAction.apply(g,[de,mr,yr,Ee.yy,ne[1],pe,Re].concat(ve)))<"u")return ar;E&&(Pt=Pt.slice(0,-1*E*2),pe=pe.slice(0,-1*E),Re=Re.slice(0,-1*E)),Pt.push(this.productions_[ne[1]][0]),pe.push(g.$),Re.push(g._$),Pt.push(Ze[Pt[Pt.length-2]][Pt[Pt.length-1]]);break;case 3:return!0}}return!0},"parse")};function Ot(){this.yy={}}return _t.lexer=function(){return{EOF:1,parseError:(0,D.K2)(function(ke,Pt){if(!this.yy.parser)throw new Error(ke);this.yy.parser.parseError(ke,Pt)},"parseError"),setInput:(0,D.K2)(function(ot,ke){return this.yy=ke||this.yy||{},this._input=ot,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},"setInput"),input:(0,D.K2)(function(){var ot=this._input[0];return this.yytext+=ot,this.yyleng++,this.offset++,this.match+=ot,this.matched+=ot,ot.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),ot},"input"),unput:(0,D.K2)(function(ot){var ke=ot.length,Pt=ot.split(/(?:\r\n?|\n)/g);this._input=ot+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-ke),this.offset-=ke;var Zt=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),Pt.length-1&&(this.yylineno-=Pt.length-1);var pe=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:Pt?(Pt.length===Zt.length?this.yylloc.first_column:0)+Zt[Zt.length-Pt.length].length-Pt[0].length:this.yylloc.first_column-ke},this.options.ranges&&(this.yylloc.range=[pe[0],pe[0]+this.yyleng-ke]),this.yyleng=this.yytext.length,this},"unput"),more:(0,D.K2)(function(){return this._more=!0,this},"more"),reject:(0,D.K2)(function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},"reject"),less:(0,D.K2)(function(ot){this.unput(this.match.slice(ot))},"less"),pastInput:(0,D.K2)(function(){var ot=this.matched.substr(0,this.matched.length-this.match.length);return(ot.length>20?"...":"")+ot.substr(-20).replace(/\n/g,"")},"pastInput"),upcomingInput:(0,D.K2)(function(){var ot=this.match;return ot.length<20&&(ot+=this._input.substr(0,20-ot.length)),(ot.substr(0,20)+(ot.length>20?"...":"")).replace(/\n/g,"")},"upcomingInput"),showPosition:(0,D.K2)(function(){var ot=this.pastInput(),ke=new Array(ot.length+1).join("-");return ot+this.upcomingInput()+"\n"+ke+"^"},"showPosition"),test_match:(0,D.K2)(function(ot,ke){var Pt,Zt,pe;if(this.options.backtrack_lexer&&(pe={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(pe.yylloc.range=this.yylloc.range.slice(0))),(Zt=ot[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=Zt.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:Zt?Zt[Zt.length-1].length-Zt[Zt.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+ot[0].length},this.yytext+=ot[0],this.match+=ot[0],this.matches=ot,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(ot[0].length),this.matched+=ot[0],Pt=this.performAction.call(this,this.yy,this,ke,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),Pt)return Pt;if(this._backtrack){for(var Re in pe)this[Re]=pe[Re];return!1}return!1},"test_match"),next:(0,D.K2)(function(){if(this.done)return this.EOF;var ot,ke,Pt,Zt;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var pe=this._currentRules(),Re=0;Re<pe.length;Re++)if((Pt=this._input.match(this.rules[pe[Re]]))&&(!ke||Pt[0].length>ke[0].length)){if(ke=Pt,Zt=Re,this.options.backtrack_lexer){if(!1!==(ot=this.test_match(Pt,pe[Re])))return ot;if(this._backtrack){ke=!1;continue}return!1}if(!this.options.flex)break}return ke?!1!==(ot=this.test_match(ke,pe[Zt]))&&ot:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},"next"),lex:(0,D.K2)(function(){return this.next()||this.lex()},"lex"),begin:(0,D.K2)(function(ke){this.conditionStack.push(ke)},"begin"),popState:(0,D.K2)(function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},"popState"),_currentRules:(0,D.K2)(function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},"_currentRules"),topState:(0,D.K2)(function(ke){return(ke=this.conditionStack.length-1-Math.abs(ke||0))>=0?this.conditionStack[ke]:"INITIAL"},"topState"),pushState:(0,D.K2)(function(ke){this.begin(ke)},"pushState"),stateStackSize:(0,D.K2)(function(){return this.conditionStack.length},"stateStackSize"),options:{"case-insensitive":!0},performAction:(0,D.K2)(function(ke,Pt,Zt,pe){switch(Zt){case 0:case 1:case 3:case 4:break;case 2:return 10;case 5:return 4;case 6:return 11;case 7:return this.begin("acc_title"),12;case 8:return this.popState(),"acc_title_value";case 9:return this.begin("acc_descr"),14;case 10:return this.popState(),"acc_descr_value";case 11:this.begin("acc_descr_multiline");break;case 12:this.popState();break;case 13:return"acc_descr_multiline_value";case 14:return 17;case 15:return 18;case 16:return 19;case 17:return":";case 18:return 6;case 19:return"INVALID"}},"anonymous"),rules:[/^(?:%(?!\{)[^\n]*)/i,/^(?:[^\}]%%[^\n]*)/i,/^(?:[\n]+)/i,/^(?:\s+)/i,/^(?:#[^\n]*)/i,/^(?:journey\b)/i,/^(?:title\s[^#\n;]+)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:section\s[^#:\n;]+)/i,/^(?:[^#:\n;]+)/i,/^(?::[^#\n;]+)/i,/^(?::)/i,/^(?:$)/i,/^(?:.)/i],conditions:{acc_descr_multiline:{rules:[12,13],inclusive:!1},acc_descr:{rules:[10],inclusive:!1},acc_title:{rules:[8],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,5,6,7,9,11,14,15,16,17,18,19],inclusive:!0}}}}(),(0,D.K2)(Ot,"Parser"),Ot.prototype=_t,_t.Parser=Ot,new Ot}();ut.parser=ut;var G=ut,w="",Lt=[],At=[],Ge=[],bt=(0,D.K2)(function(){Lt.length=0,At.length=0,w="",Ge.length=0,(0,L.IU)()},"clear"),Gt=(0,D.K2)(function(Et){w=Et,Lt.push(Et)},"addSection"),j=(0,D.K2)(function(){return Lt},"getSections"),hr=(0,D.K2)(function(){let Et=Br(),B=0;for(;!Et&&B<100;)Et=Br(),B++;return At.push(...Ge),At},"getTasks"),ze=(0,D.K2)(function(){const Et=[];return At.forEach(B=>{B.people&&Et.push(...B.people)}),[...new Set(Et)].sort()},"updateActors"),vr=(0,D.K2)(function(Et,Tt){const B=Tt.substr(1).split(":");let N=0,et=[];1===B.length?(N=Number(B[0]),et=[]):(N=Number(B[0]),et=B[1].split(","));const yt=et.map(rt=>rt.trim());Ge.push({section:w,type:w,people:yt,task:Et,score:N})},"addTask"),Wr=(0,D.K2)(function(Et){At.push({section:w,type:w,description:Et,task:Et,classes:[]})},"addTaskOrg"),Br=(0,D.K2)(function(){const Et=(0,D.K2)(function(B){return Ge[B].processed},"compileTask");let Tt=!0;for(const[B,N]of Ge.entries())Et(B),Tt=Tt&&N.processed;return Tt},"compileTasks"),Gr=(0,D.K2)(function(){return ze()},"getActors"),aa={getConfig:(0,D.K2)(()=>(0,L.D7)().journey,"getConfig"),clear:bt,setDiagramTitle:L.ke,getDiagramTitle:L.ab,setAccTitle:L.SV,getAccTitle:L.iN,setAccDescription:L.EI,getAccDescription:L.m7,addSection:Gt,getSections:j,getTasks:hr,addTask:vr,addTaskOrg:Wr,getActors:Gr},Or=(0,D.K2)(Et=>`.label {\n    font-family: ${Et.fontFamily};\n    color: ${Et.textColor};\n  }\n  .mouth {\n    stroke: #666;\n  }\n\n  line {\n    stroke: ${Et.textColor}\n  }\n\n  .legend {\n    fill: ${Et.textColor};\n    font-family: ${Et.fontFamily};\n  }\n\n  .label text {\n    fill: #333;\n  }\n  .label {\n    color: ${Et.textColor}\n  }\n\n  .face {\n    ${Et.faceColor?`fill: ${Et.faceColor}`:"fill: #FFF8DC"};\n    stroke: #999;\n  }\n\n  .node rect,\n  .node circle,\n  .node ellipse,\n  .node polygon,\n  .node path {\n    fill: ${Et.mainBkg};\n    stroke: ${Et.nodeBorder};\n    stroke-width: 1px;\n  }\n\n  .node .label {\n    text-align: center;\n  }\n  .node.clickable {\n    cursor: pointer;\n  }\n\n  .arrowheadPath {\n    fill: ${Et.arrowheadColor};\n  }\n\n  .edgePath .path {\n    stroke: ${Et.lineColor};\n    stroke-width: 1.5px;\n  }\n\n  .flowchart-link {\n    stroke: ${Et.lineColor};\n    fill: none;\n  }\n\n  .edgeLabel {\n    background-color: ${Et.edgeLabelBackground};\n    rect {\n      opacity: 0.5;\n    }\n    text-align: center;\n  }\n\n  .cluster rect {\n  }\n\n  .cluster text {\n    fill: ${Et.titleColor};\n  }\n\n  div.mermaidTooltip {\n    position: absolute;\n    text-align: center;\n    max-width: 200px;\n    padding: 2px;\n    font-family: ${Et.fontFamily};\n    font-size: 12px;\n    background: ${Et.tertiaryColor};\n    border: 1px solid ${Et.border2};\n    border-radius: 2px;\n    pointer-events: none;\n    z-index: 100;\n  }\n\n  .task-type-0, .section-type-0  {\n    ${Et.fillType0?`fill: ${Et.fillType0}`:""};\n  }\n  .task-type-1, .section-type-1  {\n    ${Et.fillType0?`fill: ${Et.fillType1}`:""};\n  }\n  .task-type-2, .section-type-2  {\n    ${Et.fillType0?`fill: ${Et.fillType2}`:""};\n  }\n  .task-type-3, .section-type-3  {\n    ${Et.fillType0?`fill: ${Et.fillType3}`:""};\n  }\n  .task-type-4, .section-type-4  {\n    ${Et.fillType0?`fill: ${Et.fillType4}`:""};\n  }\n  .task-type-5, .section-type-5  {\n    ${Et.fillType0?`fill: ${Et.fillType5}`:""};\n  }\n  .task-type-6, .section-type-6  {\n    ${Et.fillType0?`fill: ${Et.fillType6}`:""};\n  }\n  .task-type-7, .section-type-7  {\n    ${Et.fillType0?`fill: ${Et.fillType7}`:""};\n  }\n\n  .actor-0 {\n    ${Et.actor0?`fill: ${Et.actor0}`:""};\n  }\n  .actor-1 {\n    ${Et.actor1?`fill: ${Et.actor1}`:""};\n  }\n  .actor-2 {\n    ${Et.actor2?`fill: ${Et.actor2}`:""};\n  }\n  .actor-3 {\n    ${Et.actor3?`fill: ${Et.actor3}`:""};\n  }\n  .actor-4 {\n    ${Et.actor4?`fill: ${Et.actor4}`:""};\n  }\n  .actor-5 {\n    ${Et.actor5?`fill: ${Et.actor5}`:""};\n  }\n  ${(0,ie.o)()}\n`,"getStyles"),Be=(0,D.K2)(function(Et,Tt){return(0,lt.tk)(Et,Tt)},"drawRect"),Ir=(0,D.K2)(function(Et,Tt){const N=Et.append("circle").attr("cx",Tt.cx).attr("cy",Tt.cy).attr("class","face").attr("r",15).attr("stroke-width",2).attr("overflow","visible"),et=Et.append("g");function yt(_t){const ht=(0,Mt.JLW)().startAngle(Math.PI/2).endAngle(Math.PI/2*3).innerRadius(7.5).outerRadius(6.8181818181818175);_t.append("path").attr("class","mouth").attr("d",ht).attr("transform","translate("+Tt.cx+","+(Tt.cy+2)+")")}function it(_t){const ht=(0,Mt.JLW)().startAngle(3*Math.PI/2).endAngle(Math.PI/2*5).innerRadius(7.5).outerRadius(6.8181818181818175);_t.append("path").attr("class","mouth").attr("d",ht).attr("transform","translate("+Tt.cx+","+(Tt.cy+7)+")")}function rt(_t){_t.append("line").attr("class","mouth").attr("stroke",2).attr("x1",Tt.cx-5).attr("y1",Tt.cy+7).attr("x2",Tt.cx+5).attr("y2",Tt.cy+7).attr("class","mouth").attr("stroke-width","1px").attr("stroke","#666")}return et.append("circle").attr("cx",Tt.cx-5).attr("cy",Tt.cy-5).attr("r",1.5).attr("stroke-width",2).attr("fill","#666").attr("stroke","#666"),et.append("circle").attr("cx",Tt.cx+5).attr("cy",Tt.cy-5).attr("r",1.5).attr("stroke-width",2).attr("fill","#666").attr("stroke","#666"),(0,D.K2)(yt,"smile"),(0,D.K2)(it,"sad"),(0,D.K2)(rt,"ambivalent"),Tt.score>3?yt(et):Tt.score<3?it(et):rt(et),N},"drawFace"),Xe=(0,D.K2)(function(Et,Tt){const B=Et.append("circle");return B.attr("cx",Tt.cx),B.attr("cy",Tt.cy),B.attr("class","actor-"+Tt.pos),B.attr("fill",Tt.fill),B.attr("stroke",Tt.stroke),B.attr("r",Tt.r),void 0!==B.class&&B.attr("class",B.class),void 0!==Tt.title&&B.append("title").text(Tt.title),B},"drawCircle"),z=(0,D.K2)(function(Et,Tt){return(0,lt.m)(Et,Tt)},"drawText"),dt=(0,D.K2)(function(Et,Tt){function B(et,yt,it,rt,_t){return et+","+yt+" "+(et+it)+","+yt+" "+(et+it)+","+(yt+rt-_t)+" "+(et+it-1.2*_t)+","+(yt+rt)+" "+et+","+(yt+rt)}(0,D.K2)(B,"genPoints");const N=Et.append("polygon");N.attr("points",B(Tt.x,Tt.y,50,20,7)),N.attr("class","labelBox"),Tt.y=Tt.y+Tt.labelMargin,Tt.x=Tt.x+.5*Tt.labelMargin,z(Et,Tt)},"drawLabel"),Bt=(0,D.K2)(function(Et,Tt,B){const N=Et.append("g"),et=(0,lt.PB)();et.x=Tt.x,et.y=Tt.y,et.fill=Tt.fill,et.width=B.width*Tt.taskCount+B.diagramMarginX*(Tt.taskCount-1),et.height=B.height,et.class="journey-section section-type-"+Tt.num,et.rx=3,et.ry=3,Be(N,et),S(B)(Tt.text,N,et.x,et.y,et.width,et.height,{class:"journey-section section-type-"+Tt.num},B,Tt.colour)},"drawSection"),Se=-1,X=(0,D.K2)(function(Et,Tt,B){const N=Tt.x+B.width/2,et=Et.append("g");Se++,et.append("line").attr("id","task"+Se).attr("x1",N).attr("y1",Tt.y).attr("x2",N).attr("y2",450).attr("class","task-line").attr("stroke-width","1px").attr("stroke-dasharray","4 2").attr("stroke","#666"),Ir(et,{cx:N,cy:300+30*(5-Tt.score),score:Tt.score});const it=(0,lt.PB)();it.x=Tt.x,it.y=Tt.y,it.fill=Tt.fill,it.width=B.width,it.height=B.height,it.class="task task-type-"+Tt.num,it.rx=3,it.ry=3,Be(et,it);let rt=Tt.x+14;Tt.people.forEach(_t=>{Xe(et,{cx:rt,cy:Tt.y,r:7,fill:Tt.actors[_t].color,stroke:"#000",title:_t,pos:Tt.actors[_t].position}),rt+=10}),S(B)(Tt.task,et,it.x,it.y,it.width,it.height,{class:"task"},B,Tt.colour)},"drawTask"),re=(0,D.K2)(function(Et,Tt){(0,lt.lC)(Et,Tt)},"drawBackgroundRect"),S=function(){function Et(et,yt,it,rt,_t,ht,Ot,H){N(yt.append("text").attr("x",it+_t/2).attr("y",rt+ht/2+5).style("font-color",H).style("text-anchor","middle").text(et),Ot)}function Tt(et,yt,it,rt,_t,ht,Ot,H,ot){const{taskFontSize:ke,taskFontFamily:Pt}=H,Zt=et.split(/<br\s*\/?>/gi);for(let pe=0;pe<Zt.length;pe++){const Re=pe*ke-ke*(Zt.length-1)/2,Ze=yt.append("text").attr("x",it+_t/2).attr("y",rt).attr("fill",ot).style("text-anchor","middle").style("font-size",ke).style("font-family",Pt);Ze.append("tspan").attr("x",it+_t/2).attr("dy",Re).text(Zt[pe]),Ze.attr("y",rt+ht/2).attr("dominant-baseline","central").attr("alignment-baseline","central"),N(Ze,Ot)}}function B(et,yt,it,rt,_t,ht,Ot,H){const ot=yt.append("switch"),Pt=ot.append("foreignObject").attr("x",it).attr("y",rt).attr("width",_t).attr("height",ht).attr("position","fixed").append("xhtml:div").style("display","table").style("height","100%").style("width","100%");Pt.append("div").attr("class","label").style("display","table-cell").style("text-align","center").style("vertical-align","middle").text(et),Tt(et,ot,it,rt,_t,ht,Ot,H),N(Pt,Ot)}function N(et,yt){for(const it in yt)it in yt&&et.attr(it,yt[it])}return(0,D.K2)(Et,"byText"),(0,D.K2)(Tt,"byTspan"),(0,D.K2)(B,"byFo"),(0,D.K2)(N,"_setTextAttrs"),function(et){return"fo"===et.textPlacement?B:"old"===et.textPlacement?Et:Tt}}(),Rt={drawRect:Be,drawCircle:Xe,drawSection:Bt,drawText:z,drawLabel:dt,drawTask:X,drawBackgroundRect:re,initGraphics:(0,D.K2)(function(Et){Et.append("defs").append("marker").attr("id","arrowhead").attr("refX",5).attr("refY",2).attr("markerWidth",6).attr("markerHeight",4).attr("orient","auto").append("path").attr("d","M 0,0 V 4 L6,2 Z")},"initGraphics")},qt=(0,D.K2)(function(Et){Object.keys(Et).forEach(function(B){Nt[B]=Et[B]})},"setConf"),V={},gt=0;function Y(Et){const Tt=(0,L.D7)().journey,B=Tt.maxLabelWidth;gt=0;let N=60;Object.keys(V).forEach(et=>{Rt.drawCircle(Et,{cx:20,cy:N,r:7,fill:V[et].color,stroke:"#000",pos:V[et].position});let rt=Et.append("text").attr("visibility","hidden").text(et);const _t=rt.node().getBoundingClientRect().width;rt.remove();let ht=[];if(_t<=B)ht=[et];else{const Ot=et.split(" ");let H="";rt=Et.append("text").attr("visibility","hidden"),Ot.forEach(ot=>{const ke=H?`${H} ${ot}`:ot;if(rt.text(ke),rt.node().getBoundingClientRect().width>B){if(H&&ht.push(H),H=ot,rt.text(ot),rt.node().getBoundingClientRect().width>B){let Zt="";for(const pe of ot)Zt+=pe,rt.text(Zt+"-"),rt.node().getBoundingClientRect().width>B&&(ht.push(Zt.slice(0,-1)+"-"),Zt=pe);H=Zt}}else H=ke}),H&&ht.push(H),rt.remove()}ht.forEach((Ot,H)=>{const Pt=Rt.drawText(Et,{x:40,y:N+7+20*H,fill:"#666",text:Ot,textMargin:Tt.boxTextMargin??5}).node().getBoundingClientRect().width;Pt>gt&&Pt>Tt.leftMargin-Pt&&(gt=Pt)}),N+=Math.max(20,20*ht.length)})}(0,D.K2)(Y,"drawActorLegend");var Nt=(0,L.D7)().journey,St=0,Ut=(0,D.K2)(function(Et,Tt,B,N){const et=(0,L.D7)(),yt=et.journey.titleColor,it=et.journey.titleFontSize,rt=et.journey.titleFontFamily,_t=et.securityLevel;let ht;"sandbox"===_t&&(ht=(0,Mt.Ltv)("#i"+Tt));const Ot=(0,Mt.Ltv)("sandbox"===_t?ht.nodes()[0].contentDocument.body:"body");ye.init();const H=Ot.select("#"+Tt);Rt.initGraphics(H);const ot=N.db.getTasks(),ke=N.db.getDiagramTitle(),Pt=N.db.getActors();for(const yr in V)delete V[yr];let Zt=0;Pt.forEach(yr=>{V[yr]={color:Nt.actorColours[Zt%Nt.actorColours.length],position:Zt},Zt++}),Y(H),ye.insert(0,0,St=Nt.leftMargin+gt,50*Object.keys(V).length),oe(H,ot,0);const pe=ye.getBounds();ke&&H.append("text").text(ke).attr("x",St).attr("font-size",it).attr("font-weight","bold").attr("y",25).attr("fill",yt).attr("font-family",rt);const Re=pe.stopy-pe.starty+2*Nt.diagramMarginY,Ze=St+pe.stopx+2*Nt.diagramMarginX;(0,L.a$)(H,Re,Ze,Nt.useMaxWidth),H.append("line").attr("x1",St).attr("y1",4*Nt.height).attr("x2",Ze-St-4).attr("y2",4*Nt.height).attr("stroke-width",4).attr("stroke","black").attr("marker-end","url(#arrowhead)");const de=ke?70:0;H.attr("viewBox",`${pe.startx} -25 ${Ze} ${Re+de}`),H.attr("preserveAspectRatio","xMinYMin meet"),H.attr("height",Re+de+25)},"draw"),ye={data:{startx:void 0,stopx:void 0,starty:void 0,stopy:void 0},verticalPos:0,sequenceItems:[],init:(0,D.K2)(function(){this.sequenceItems=[],this.data={startx:void 0,stopx:void 0,starty:void 0,stopy:void 0},this.verticalPos=0},"init"),updateVal:(0,D.K2)(function(Et,Tt,B,N){Et[Tt]=void 0===Et[Tt]?B:N(B,Et[Tt])},"updateVal"),updateBounds:(0,D.K2)(function(Et,Tt,B,N){const et=(0,L.D7)().journey,yt=this;let it=0;function rt(_t){return(0,D.K2)(function(Ot){it++;const H=yt.sequenceItems.length-it+1;yt.updateVal(Ot,"starty",Tt-H*et.boxMargin,Math.min),yt.updateVal(Ot,"stopy",N+H*et.boxMargin,Math.max),yt.updateVal(ye.data,"startx",Et-H*et.boxMargin,Math.min),yt.updateVal(ye.data,"stopx",B+H*et.boxMargin,Math.max),"activation"!==_t&&(yt.updateVal(Ot,"startx",Et-H*et.boxMargin,Math.min),yt.updateVal(Ot,"stopx",B+H*et.boxMargin,Math.max),yt.updateVal(ye.data,"starty",Tt-H*et.boxMargin,Math.min),yt.updateVal(ye.data,"stopy",N+H*et.boxMargin,Math.max))},"updateItemBounds")}(0,D.K2)(rt,"updateFn"),this.sequenceItems.forEach(rt())},"updateBounds"),insert:(0,D.K2)(function(Et,Tt,B,N){const et=Math.min(Et,B),yt=Math.max(Et,B),it=Math.min(Tt,N),rt=Math.max(Tt,N);this.updateVal(ye.data,"startx",et,Math.min),this.updateVal(ye.data,"starty",it,Math.min),this.updateVal(ye.data,"stopx",yt,Math.max),this.updateVal(ye.data,"stopy",rt,Math.max),this.updateBounds(et,it,yt,rt)},"insert"),bumpVerticalPos:(0,D.K2)(function(Et){this.verticalPos=this.verticalPos+Et,this.data.stopy=this.verticalPos},"bumpVerticalPos"),getVerticalPos:(0,D.K2)(function(){return this.verticalPos},"getVerticalPos"),getBounds:(0,D.K2)(function(){return this.data},"getBounds")},le=Nt.sectionFills,Pe=Nt.sectionColours,oe=(0,D.K2)(function(Et,Tt,B){const N=(0,L.D7)().journey;let et="";const it=B+(2*N.height+N.diagramMarginY);let rt=0,_t="#CCC",ht="black",Ot=0;for(const[H,ot]of Tt.entries()){if(et!==ot.section){_t=le[rt%le.length],Ot=rt%le.length,ht=Pe[rt%Pe.length];let Pt=0;const Zt=ot.section;for(let Re=H;Re<Tt.length&&Tt[Re].section==Zt;Re++)Pt+=1;Rt.drawSection(Et,{x:H*N.taskMargin+H*N.width+St,y:50,text:ot.section,fill:_t,num:Ot,colour:ht,taskCount:Pt},N),et=ot.section,rt++}const ke=ot.people.reduce((Pt,Zt)=>(V[Zt]&&(Pt[Zt]=V[Zt]),Pt),{});ot.x=H*N.taskMargin+H*N.width+St,ot.y=it,ot.width=N.diagramMarginX,ot.height=N.diagramMarginY,ot.colour=ht,ot.fill=_t,ot.num=Ot,ot.actors=ke,Rt.drawTask(Et,ot,N),ye.insert(ot.x,ot.y,ot.x+ot.width+N.taskMargin,450)}},"drawTasks"),qe={setConf:qt,draw:Ut},We={parser:G,db:aa,renderer:qe,styles:Or,init:(0,D.K2)(Et=>{qe.setConf(Et.journey),aa.clear()},"init")}},36384:(ri,Er,P)=>{"use strict";P.d(Er,{Nq:()=>L,RI:()=>ut,hq:()=>ie});var lt=P(32303),ie={aggregation:17.25,extension:17.25,composition:17.25,dependency:6,lollipop:13.5,arrow_point:4},L={arrow_point:9,arrow_cross:12.5,arrow_circle:12.5};function D(G,w){if(void 0===G||void 0===w)return{angle:0,deltaX:0,deltaY:0};G=Mt(G),w=Mt(w);const[Lt,At]=[G.x,G.y],[Ge,bt]=[w.x,w.y],Gt=Ge-Lt,j=bt-At;return{angle:Math.atan(j/Gt),deltaX:Gt,deltaY:j}}(0,lt.K2)(D,"calculateDeltaAndAngle");var Mt=(0,lt.K2)(G=>Array.isArray(G)?{x:G[0],y:G[1]}:G,"pointTransformer"),ut=(0,lt.K2)(G=>({x:(0,lt.K2)(function(w,Lt,At){let Ge=0;const bt=Mt(At[0]).x<Mt(At[At.length-1]).x?"left":"right";if(0===Lt&&Object.hasOwn(ie,G.arrowTypeStart)){const{angle:Gr,deltaX:aa}=D(At[0],At[1]);Ge=ie[G.arrowTypeStart]*Math.cos(Gr)*(aa>=0?1:-1)}else if(Lt===At.length-1&&Object.hasOwn(ie,G.arrowTypeEnd)){const{angle:Gr,deltaX:aa}=D(At[At.length-1],At[At.length-2]);Ge=ie[G.arrowTypeEnd]*Math.cos(Gr)*(aa>=0?1:-1)}const Gt=Math.abs(Mt(w).x-Mt(At[At.length-1]).x),j=Math.abs(Mt(w).y-Mt(At[At.length-1]).y),hr=Math.abs(Mt(w).x-Mt(At[0]).x),ze=Math.abs(Mt(w).y-Mt(At[0]).y),vr=ie[G.arrowTypeStart],Wr=ie[G.arrowTypeEnd];if(Gt<Wr&&Gt>0&&j<Wr){let Gr=Wr+1-Gt;Gr*="right"===bt?-1:1,Ge-=Gr}if(hr<vr&&hr>0&&ze<vr){let Gr=vr+1-hr;Gr*="right"===bt?-1:1,Ge+=Gr}return Mt(w).x+Ge},"x"),y:(0,lt.K2)(function(w,Lt,At){let Ge=0;const bt=Mt(At[0]).y<Mt(At[At.length-1]).y?"down":"up";if(0===Lt&&Object.hasOwn(ie,G.arrowTypeStart)){const{angle:Gr,deltaY:aa}=D(At[0],At[1]);Ge=ie[G.arrowTypeStart]*Math.abs(Math.sin(Gr))*(aa>=0?1:-1)}else if(Lt===At.length-1&&Object.hasOwn(ie,G.arrowTypeEnd)){const{angle:Gr,deltaY:aa}=D(At[At.length-1],At[At.length-2]);Ge=ie[G.arrowTypeEnd]*Math.abs(Math.sin(Gr))*(aa>=0?1:-1)}const Gt=Math.abs(Mt(w).y-Mt(At[At.length-1]).y),j=Math.abs(Mt(w).x-Mt(At[At.length-1]).x),hr=Math.abs(Mt(w).y-Mt(At[0]).y),ze=Math.abs(Mt(w).x-Mt(At[0]).x),vr=ie[G.arrowTypeStart],Wr=ie[G.arrowTypeEnd];if(Gt<Wr&&Gt>0&&j<Wr){let Gr=Wr+1-Gt;Gr*="up"===bt?-1:1,Ge-=Gr}if(hr<vr&&hr>0&&ze<vr){let Gr=vr+1-hr;Gr*="up"===bt?-1:1,Ge+=Gr}return Mt(w).y+Ge},"y")}),"getLineFunctionsWithOffset")},37355:function(ri){ri.exports=function(){"use strict";return function(Er,P){var lt=P.prototype,ie=lt.format;lt.format=function(L){var D=this,Mt=this.$locale();if(!this.isValid())return ie.bind(this)(L);var ut=this.$utils(),G=(L||"YYYY-MM-DDTHH:mm:ssZ").replace(/\[([^\]]+)]|Q|wo|ww|w|WW|W|zzz|z|gggg|GGGG|Do|X|x|k{1,2}|S/g,function(w){switch(w){case"Q":return Math.ceil((D.$M+1)/3);case"Do":return Mt.ordinal(D.$D);case"gggg":return D.weekYear();case"GGGG":return D.isoWeekYear();case"wo":return Mt.ordinal(D.week(),"W");case"w":case"ww":return ut.s(D.week(),"w"===w?1:2,"0");case"W":case"WW":return ut.s(D.isoWeek(),"W"===w?1:2,"0");case"k":case"kk":return ut.s(String(0===D.$H?24:D.$H),"k"===w?1:2,"0");case"X":return Math.floor(D.$d.getTime()/1e3);case"x":return D.$d.getTime();case"z":return"["+D.offsetName()+"]";case"zzz":return"["+D.offsetName("long")+"]";default:return w}});return ie.bind(this)(G)}}}()},38676:(ri,Er,P)=>{"use strict";P.r(Er),P.d(Er,{diagram:()=>j});var lt=P(53102),Gt=(P(5675),P(8086),P(72271),P(98954),P(36384),P(87452),P(32239),P(19753),P(59355),P(52052),P(79006),P(32303)),j={parser:lt.Zk,get db(){return new lt.u4(2)},renderer:lt.q7,styles:lt.tM,init:(0,Gt.K2)(hr=>{hr.state||(hr.state={}),hr.state.arrowMarkerAbsolute=hr.arrowMarkerAbsolute},"init")}},38710:(ri,Er,P)=>{"use strict";P.r(Er),P.d(Er,{diagram:()=>ar});var lt=P(89204),ie=P(45027),L=P(5675),D=P(8086),Mt=P(72271),Gt=(P(98954),P(36384),P(87452),P(32239),P(19753),P(59355),P(52052),P(79006)),j=P(32303);const vr=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i,aa=function Gr(g){if(!function Wr(g){return"string"==typeof g&&vr.test(g)}(g))throw TypeError("Invalid UUID");let y;return Uint8Array.of((y=parseInt(g.slice(0,8),16))>>>24,y>>>16&255,y>>>8&255,255&y,(y=parseInt(g.slice(9,13),16))>>>8,255&y,(y=parseInt(g.slice(14,18),16))>>>8,255&y,(y=parseInt(g.slice(19,23),16))>>>8,255&y,(y=parseInt(g.slice(24,36),16))/1099511627776&255,y/4294967296&255,y>>>24&255,y>>>16&255,y>>>8&255,255&y)},zr=[];for(let g=0;g<256;++g)zr.push((g+256).toString(16).slice(1));function Or(g,y=0){return(zr[g[y+0]]+zr[g[y+1]]+zr[g[y+2]]+zr[g[y+3]]+"-"+zr[g[y+4]]+zr[g[y+5]]+"-"+zr[g[y+6]]+zr[g[y+7]]+"-"+zr[g[y+8]]+zr[g[y+9]]+"-"+zr[g[y+10]]+zr[g[y+11]]+zr[g[y+12]]+zr[g[y+13]]+zr[g[y+14]]+zr[g[y+15]]).toLowerCase()}let Xe;const z=new Uint8Array(16);function gt(g){return 14+(g+64>>>9<<4)+1}function St(g,y){const E=(65535&g)+(65535&y);return(g>>16)+(y>>16)+(E>>16)<<16|65535&E}function ye(g,y,E,M,m,A){return St(function Ut(g,y){return g<<y|g>>>32-y}(St(St(y,g),St(M,A)),m),E)}function le(g,y,E,M,m,A,v){return ye(y&E|~y&M,g,y,m,A,v)}function Pe(g,y,E,M,m,A,v){return ye(y&M|E&~M,g,y,m,A,v)}function oe(g,y,E,M,m,A,v){return ye(y^E^M,g,y,m,A,v)}function qe(g,y,E,M,m,A,v){return ye(E^(y|~M),g,y,m,A,v)}const We=function qt(g){const y=function Nt(g){if(0===g.length)return new Uint32Array;const y=new Uint32Array(gt(8*g.length)).fill(0);for(let E=0;E<g.length;E++)y[E>>2]|=(255&g[E])<<E%4*8;return y}(g);return function V(g){const y=new Uint8Array(4*g.length);for(let E=0;E<4*g.length;E++)y[E]=g[E>>2]>>>E%4*8&255;return y}(function Y(g,y){const E=new Uint32Array(gt(y)).fill(0);E.set(g),E[y>>5]|=128<<y%32,E[E.length-1]=y,g=E;let M=1732584193,m=-271733879,A=-1732584194,v=271733878;for(let b=0;b<g.length;b+=16){const C=M,R=m,Q=A,mt=v;M=le(M,m,A,v,g[b],7,-680876936),v=le(v,M,m,A,g[b+1],12,-389564586),A=le(A,v,M,m,g[b+2],17,606105819),m=le(m,A,v,M,g[b+3],22,-1044525330),M=le(M,m,A,v,g[b+4],7,-176418897),v=le(v,M,m,A,g[b+5],12,1200080426),A=le(A,v,M,m,g[b+6],17,-1473231341),m=le(m,A,v,M,g[b+7],22,-45705983),M=le(M,m,A,v,g[b+8],7,1770035416),v=le(v,M,m,A,g[b+9],12,-1958414417),A=le(A,v,M,m,g[b+10],17,-42063),m=le(m,A,v,M,g[b+11],22,-1990404162),M=le(M,m,A,v,g[b+12],7,1804603682),v=le(v,M,m,A,g[b+13],12,-40341101),A=le(A,v,M,m,g[b+14],17,-1502002290),m=le(m,A,v,M,g[b+15],22,1236535329),M=Pe(M,m,A,v,g[b+1],5,-165796510),v=Pe(v,M,m,A,g[b+6],9,-1069501632),A=Pe(A,v,M,m,g[b+11],14,643717713),m=Pe(m,A,v,M,g[b],20,-373897302),M=Pe(M,m,A,v,g[b+5],5,-701558691),v=Pe(v,M,m,A,g[b+10],9,38016083),A=Pe(A,v,M,m,g[b+15],14,-660478335),m=Pe(m,A,v,M,g[b+4],20,-405537848),M=Pe(M,m,A,v,g[b+9],5,568446438),v=Pe(v,M,m,A,g[b+14],9,-1019803690),A=Pe(A,v,M,m,g[b+3],14,-187363961),m=Pe(m,A,v,M,g[b+8],20,1163531501),M=Pe(M,m,A,v,g[b+13],5,-1444681467),v=Pe(v,M,m,A,g[b+2],9,-51403784),A=Pe(A,v,M,m,g[b+7],14,1735328473),m=Pe(m,A,v,M,g[b+12],20,-1926607734),M=oe(M,m,A,v,g[b+5],4,-378558),v=oe(v,M,m,A,g[b+8],11,-2022574463),A=oe(A,v,M,m,g[b+11],16,1839030562),m=oe(m,A,v,M,g[b+14],23,-35309556),M=oe(M,m,A,v,g[b+1],4,-1530992060),v=oe(v,M,m,A,g[b+4],11,1272893353),A=oe(A,v,M,m,g[b+7],16,-155497632),m=oe(m,A,v,M,g[b+10],23,-1094730640),M=oe(M,m,A,v,g[b+13],4,681279174),v=oe(v,M,m,A,g[b],11,-358537222),A=oe(A,v,M,m,g[b+3],16,-722521979),m=oe(m,A,v,M,g[b+6],23,76029189),M=oe(M,m,A,v,g[b+9],4,-640364487),v=oe(v,M,m,A,g[b+12],11,-421815835),A=oe(A,v,M,m,g[b+15],16,530742520),m=oe(m,A,v,M,g[b+2],23,-995338651),M=qe(M,m,A,v,g[b],6,-198630844),v=qe(v,M,m,A,g[b+7],10,1126891415),A=qe(A,v,M,m,g[b+14],15,-1416354905),m=qe(m,A,v,M,g[b+5],21,-57434055),M=qe(M,m,A,v,g[b+12],6,1700485571),v=qe(v,M,m,A,g[b+3],10,-1894986606),A=qe(A,v,M,m,g[b+10],15,-1051523),m=qe(m,A,v,M,g[b+1],21,-2054922799),M=qe(M,m,A,v,g[b+8],6,1873313359),v=qe(v,M,m,A,g[b+15],10,-30611744),A=qe(A,v,M,m,g[b+6],15,-1560198380),m=qe(m,A,v,M,g[b+13],21,1309151649),M=qe(M,m,A,v,g[b+4],6,-145523070),v=qe(v,M,m,A,g[b+11],10,-1120210379),A=qe(A,v,M,m,g[b+2],15,718787259),m=qe(m,A,v,M,g[b+9],21,-343485551),M=St(M,C),m=St(m,R),A=St(A,Q),v=St(v,mt)}return Uint32Array.of(M,m,A,v)}(y,8*g.length))},Tt="6ba7b810-9dad-11d1-80b4-00c04fd430c8",B="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function N(g,y,E,M,m,A){const v="string"==typeof E?function Et(g){g=unescape(encodeURIComponent(g));const y=new Uint8Array(g.length);for(let E=0;E<g.length;++E)y[E]=g.charCodeAt(E);return y}(E):E,b="string"==typeof M?aa(M):M;if("string"==typeof M&&(M=aa(M)),16!==M?.length)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let C=new Uint8Array(16+v.length);if(C.set(b),C.set(v,b.length),C=y(C),C[6]=15&C[6]|g,C[8]=63&C[8]|128,m){A=A||0;for(let R=0;R<16;++R)m[A+R]=C[R];return m}return Or(C)}function et(g,y,E,M){return N(48,We,g,y,E,M)}et.DNS=Tt,et.URL=B;const rt={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)},ht=function _t(g,y,E){if(rt.randomUUID&&!y&&!g)return rt.randomUUID();const M=(g=g||{}).random??g.rng?.()??function dt(){if(!Xe){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Xe=crypto.getRandomValues.bind(crypto)}return Xe(z)}();if(M.length<16)throw new Error("Random bytes length must be >= 16");if(M[6]=15&M[6]|64,M[8]=63&M[8]|128,y){if((E=E||0)<0||E+16>y.length)throw new RangeError(`UUID byte range ${E}:${E+15} is out of buffer bounds`);for(let m=0;m<16;++m)y[E+m]=M[m];return y}return Or(M)};function Ot(g,y,E,M){switch(g){case 0:return y&E^~y&M;case 1:case 3:return y^E^M;case 2:return y&E^y&M^E&M}}function H(g,y){return g<<y|g>>>32-y}const ke=function ot(g){const y=[1518500249,1859775393,2400959708,3395469782],E=[1732584193,4023233417,2562383102,271733878,3285377520],M=new Uint8Array(g.length+1);M.set(g),M[g.length]=128,g=M;const A=Math.ceil((g.length/4+2)/16),v=new Array(A);for(let b=0;b<A;++b){const C=new Uint32Array(16);for(let R=0;R<16;++R)C[R]=g[64*b+4*R]<<24|g[64*b+4*R+1]<<16|g[64*b+4*R+2]<<8|g[64*b+4*R+3];v[b]=C}v[A-1][14]=8*(g.length-1)/Math.pow(2,32),v[A-1][14]=Math.floor(v[A-1][14]),v[A-1][15]=8*(g.length-1)&4294967295;for(let b=0;b<A;++b){const C=new Uint32Array(80);for(let Vt=0;Vt<16;++Vt)C[Vt]=v[b][Vt];for(let Vt=16;Vt<80;++Vt)C[Vt]=H(C[Vt-3]^C[Vt-8]^C[Vt-14]^C[Vt-16],1);let R=E[0],Q=E[1],mt=E[2],zt=E[3],jt=E[4];for(let Vt=0;Vt<80;++Vt){const Kt=Math.floor(Vt/20),xe=H(R,5)+Ot(Kt,Q,mt,zt)+jt+y[Kt]+C[Vt]>>>0;jt=zt,zt=mt,mt=H(Q,30)>>>0,Q=R,R=xe}E[0]=E[0]+R>>>0,E[1]=E[1]+Q>>>0,E[2]=E[2]+mt>>>0,E[3]=E[3]+zt>>>0,E[4]=E[4]+jt>>>0}return Uint8Array.of(E[0]>>24,E[0]>>16,E[0]>>8,E[0],E[1]>>24,E[1]>>16,E[1]>>8,E[1],E[2]>>24,E[2]>>16,E[2]>>8,E[2],E[3]>>24,E[3]>>16,E[3]>>8,E[3],E[4]>>24,E[4]>>16,E[4]>>8,E[4])};function Pt(g,y,E,M){return N(80,ke,g,y,E,M)}Pt.DNS=Tt,Pt.URL=B;var Ae,Ee=P(79687),er=function(){var g=(0,j.K2)(function(lr,br,$e,He){for($e=$e||{},He=lr.length;He--;$e[lr[He]]=br);return $e},"o"),y=[1,4],E=[1,13],M=[1,12],m=[1,15],A=[1,16],v=[1,20],b=[1,19],C=[6,7,8],R=[1,26],Q=[1,24],mt=[1,25],zt=[6,7,11],jt=[1,6,13,15,16,19,22],Vt=[1,33],Kt=[1,34],xe=[1,6,7,11,13,15,16,19,22],je={trace:(0,j.K2)(function(){},"trace"),yy:{},symbols_:{error:2,start:3,mindMap:4,spaceLines:5,SPACELINE:6,NL:7,MINDMAP:8,document:9,stop:10,EOF:11,statement:12,SPACELIST:13,node:14,ICON:15,CLASS:16,nodeWithId:17,nodeWithoutId:18,NODE_DSTART:19,NODE_DESCR:20,NODE_DEND:21,NODE_ID:22,$accept:0,$end:1},terminals_:{2:"error",6:"SPACELINE",7:"NL",8:"MINDMAP",11:"EOF",13:"SPACELIST",15:"ICON",16:"CLASS",19:"NODE_DSTART",20:"NODE_DESCR",21:"NODE_DEND",22:"NODE_ID"},productions_:[0,[3,1],[3,2],[5,1],[5,2],[5,2],[4,2],[4,3],[10,1],[10,1],[10,1],[10,2],[10,2],[9,3],[9,2],[12,2],[12,2],[12,2],[12,1],[12,1],[12,1],[12,1],[12,1],[14,1],[14,1],[18,3],[17,1],[17,4]],performAction:(0,j.K2)(function(br,$e,He,wr,kr,Kr,_r){var Jr=Kr.length-1;switch(kr){case 6:case 7:return wr;case 8:wr.getLogger().trace("Stop NL ");break;case 9:wr.getLogger().trace("Stop EOF ");break;case 11:wr.getLogger().trace("Stop NL2 ");break;case 12:wr.getLogger().trace("Stop EOF2 ");break;case 15:wr.getLogger().info("Node: ",Kr[Jr].id),wr.addNode(Kr[Jr-1].length,Kr[Jr].id,Kr[Jr].descr,Kr[Jr].type);break;case 16:wr.getLogger().trace("Icon: ",Kr[Jr]),wr.decorateNode({icon:Kr[Jr]});break;case 17:case 21:wr.decorateNode({class:Kr[Jr]});break;case 18:wr.getLogger().trace("SPACELIST");break;case 19:wr.getLogger().trace("Node: ",Kr[Jr].id),wr.addNode(0,Kr[Jr].id,Kr[Jr].descr,Kr[Jr].type);break;case 20:wr.decorateNode({icon:Kr[Jr]});break;case 25:wr.getLogger().trace("node found ..",Kr[Jr-2]),this.$={id:Kr[Jr-1],descr:Kr[Jr-1],type:wr.getType(Kr[Jr-2],Kr[Jr])};break;case 26:this.$={id:Kr[Jr],descr:Kr[Jr],type:wr.nodeType.DEFAULT};break;case 27:wr.getLogger().trace("node found ..",Kr[Jr-3]),this.$={id:Kr[Jr-3],descr:Kr[Jr-1],type:wr.getType(Kr[Jr-2],Kr[Jr])}}},"anonymous"),table:[{3:1,4:2,5:3,6:[1,5],8:y},{1:[3]},{1:[2,1]},{4:6,6:[1,7],7:[1,8],8:y},{6:E,7:[1,10],9:9,12:11,13:M,14:14,15:m,16:A,17:17,18:18,19:v,22:b},g(C,[2,3]),{1:[2,2]},g(C,[2,4]),g(C,[2,5]),{1:[2,6],6:E,12:21,13:M,14:14,15:m,16:A,17:17,18:18,19:v,22:b},{6:E,9:22,12:11,13:M,14:14,15:m,16:A,17:17,18:18,19:v,22:b},{6:R,7:Q,10:23,11:mt},g(zt,[2,22],{17:17,18:18,14:27,15:[1,28],16:[1,29],19:v,22:b}),g(zt,[2,18]),g(zt,[2,19]),g(zt,[2,20]),g(zt,[2,21]),g(zt,[2,23]),g(zt,[2,24]),g(zt,[2,26],{19:[1,30]}),{20:[1,31]},{6:R,7:Q,10:32,11:mt},{1:[2,7],6:E,12:21,13:M,14:14,15:m,16:A,17:17,18:18,19:v,22:b},g(jt,[2,14],{7:Vt,11:Kt}),g(xe,[2,8]),g(xe,[2,9]),g(xe,[2,10]),g(zt,[2,15]),g(zt,[2,16]),g(zt,[2,17]),{20:[1,35]},{21:[1,36]},g(jt,[2,13],{7:Vt,11:Kt}),g(xe,[2,11]),g(xe,[2,12]),{21:[1,37]},g(zt,[2,25]),g(zt,[2,27])],defaultActions:{2:[2,1],6:[2,2]},parseError:(0,j.K2)(function(br,$e){if(!$e.recoverable){var He=new Error(br);throw He.hash=$e,He}this.trace(br)},"parseError"),parse:(0,j.K2)(function(br){var $e=this,He=[0],wr=[],kr=[null],Kr=[],_r=this.table,Jr="",Lr=0,ha=0,ia=0,or=Kr.slice.call(arguments,1),ur=Object.create(this.lexer),W={yy:{}};for(var $t in this.yy)Object.prototype.hasOwnProperty.call(this.yy,$t)&&(W.yy[$t]=this.yy[$t]);ur.setInput(br,W.yy),W.yy.lexer=ur,W.yy.parser=this,typeof ur.yylloc>"u"&&(ur.yylloc={});var Ye=ur.yylloc;Kr.push(Ye);var Fe=ur.options&&ur.options.ranges;function pr(){var ir;return"number"!=typeof(ir=wr.pop()||ur.lex()||1)&&(ir instanceof Array&&(ir=(wr=ir).pop()),ir=$e.symbols_[ir]||ir),ir}this.parseError="function"==typeof W.yy.parseError?W.yy.parseError:Object.getPrototypeOf(this).parseError,(0,j.K2)(function Tr(ir){He.length=He.length-2*ir,kr.length=kr.length-ir,Kr.length=Kr.length-ir},"popStack"),(0,j.K2)(pr,"lex");for(var da,Pa,Ma,Wa,ba,Sa,ea,gr,sa={};;){if(this.defaultActions[Ma=He[He.length-1]]?Wa=this.defaultActions[Ma]:((null===da||typeof da>"u")&&(da=pr()),Wa=_r[Ma]&&_r[Ma][da]),typeof Wa>"u"||!Wa.length||!Wa[0]){var Ua;for(Sa in gr=[],_r[Ma])this.terminals_[Sa]&&Sa>2&&gr.push("'"+this.terminals_[Sa]+"'");Ua=ur.showPosition?"Parse error on line "+(Lr+1)+":\n"+ur.showPosition()+"\nExpecting "+gr.join(", ")+", got '"+(this.terminals_[da]||da)+"'":"Parse error on line "+(Lr+1)+": Unexpected "+(1==da?"end of input":"'"+(this.terminals_[da]||da)+"'"),this.parseError(Ua,{text:ur.match,token:this.terminals_[da]||da,line:ur.yylineno,loc:Ye,expected:gr})}if(Wa[0]instanceof Array&&Wa.length>1)throw new Error("Parse Error: multiple actions possible at state: "+Ma+", token: "+da);switch(Wa[0]){case 1:He.push(da),kr.push(ur.yytext),Kr.push(ur.yylloc),He.push(Wa[1]),da=null,Pa?(da=Pa,Pa=null):(ha=ur.yyleng,Jr=ur.yytext,Lr=ur.yylineno,Ye=ur.yylloc,ia>0&&ia--);break;case 2:if(sa.$=kr[kr.length-(ea=this.productions_[Wa[1]][1])],sa._$={first_line:Kr[Kr.length-(ea||1)].first_line,last_line:Kr[Kr.length-1].last_line,first_column:Kr[Kr.length-(ea||1)].first_column,last_column:Kr[Kr.length-1].last_column},Fe&&(sa._$.range=[Kr[Kr.length-(ea||1)].range[0],Kr[Kr.length-1].range[1]]),typeof(ba=this.performAction.apply(sa,[Jr,ha,Lr,W.yy,Wa[1],kr,Kr].concat(or)))<"u")return ba;ea&&(He=He.slice(0,-1*ea*2),kr=kr.slice(0,-1*ea),Kr=Kr.slice(0,-1*ea)),He.push(this.productions_[Wa[1]][0]),kr.push(sa.$),Kr.push(sa._$),He.push(_r[He[He.length-2]][He[He.length-1]]);break;case 3:return!0}}return!0},"parse")};function fr(){this.yy={}}return je.lexer=function(){return{EOF:1,parseError:(0,j.K2)(function($e,He){if(!this.yy.parser)throw new Error($e);this.yy.parser.parseError($e,He)},"parseError"),setInput:(0,j.K2)(function(br,$e){return this.yy=$e||this.yy||{},this._input=br,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},"setInput"),input:(0,j.K2)(function(){var br=this._input[0];return this.yytext+=br,this.yyleng++,this.offset++,this.match+=br,this.matched+=br,br.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),br},"input"),unput:(0,j.K2)(function(br){var $e=br.length,He=br.split(/(?:\r\n?|\n)/g);this._input=br+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-$e),this.offset-=$e;var wr=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),He.length-1&&(this.yylineno-=He.length-1);var kr=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:He?(He.length===wr.length?this.yylloc.first_column:0)+wr[wr.length-He.length].length-He[0].length:this.yylloc.first_column-$e},this.options.ranges&&(this.yylloc.range=[kr[0],kr[0]+this.yyleng-$e]),this.yyleng=this.yytext.length,this},"unput"),more:(0,j.K2)(function(){return this._more=!0,this},"more"),reject:(0,j.K2)(function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},"reject"),less:(0,j.K2)(function(br){this.unput(this.match.slice(br))},"less"),pastInput:(0,j.K2)(function(){var br=this.matched.substr(0,this.matched.length-this.match.length);return(br.length>20?"...":"")+br.substr(-20).replace(/\n/g,"")},"pastInput"),upcomingInput:(0,j.K2)(function(){var br=this.match;return br.length<20&&(br+=this._input.substr(0,20-br.length)),(br.substr(0,20)+(br.length>20?"...":"")).replace(/\n/g,"")},"upcomingInput"),showPosition:(0,j.K2)(function(){var br=this.pastInput(),$e=new Array(br.length+1).join("-");return br+this.upcomingInput()+"\n"+$e+"^"},"showPosition"),test_match:(0,j.K2)(function(br,$e){var He,wr,kr;if(this.options.backtrack_lexer&&(kr={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(kr.yylloc.range=this.yylloc.range.slice(0))),(wr=br[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=wr.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:wr?wr[wr.length-1].length-wr[wr.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+br[0].length},this.yytext+=br[0],this.match+=br[0],this.matches=br,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(br[0].length),this.matched+=br[0],He=this.performAction.call(this,this.yy,this,$e,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),He)return He;if(this._backtrack){for(var Kr in kr)this[Kr]=kr[Kr];return!1}return!1},"test_match"),next:(0,j.K2)(function(){if(this.done)return this.EOF;var br,$e,He,wr;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var kr=this._currentRules(),Kr=0;Kr<kr.length;Kr++)if((He=this._input.match(this.rules[kr[Kr]]))&&(!$e||He[0].length>$e[0].length)){if($e=He,wr=Kr,this.options.backtrack_lexer){if(!1!==(br=this.test_match(He,kr[Kr])))return br;if(this._backtrack){$e=!1;continue}return!1}if(!this.options.flex)break}return $e?!1!==(br=this.test_match($e,kr[wr]))&&br:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},"next"),lex:(0,j.K2)(function(){return this.next()||this.lex()},"lex"),begin:(0,j.K2)(function($e){this.conditionStack.push($e)},"begin"),popState:(0,j.K2)(function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},"popState"),_currentRules:(0,j.K2)(function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},"_currentRules"),topState:(0,j.K2)(function($e){return($e=this.conditionStack.length-1-Math.abs($e||0))>=0?this.conditionStack[$e]:"INITIAL"},"topState"),pushState:(0,j.K2)(function($e){this.begin($e)},"pushState"),stateStackSize:(0,j.K2)(function(){return this.conditionStack.length},"stateStackSize"),options:{"case-insensitive":!0},performAction:(0,j.K2)(function($e,He,wr,kr){switch(wr){case 0:return $e.getLogger().trace("Found comment",He.yytext),6;case 1:return 8;case 2:this.begin("CLASS");break;case 3:return this.popState(),16;case 4:case 23:case 26:this.popState();break;case 5:$e.getLogger().trace("Begin icon"),this.begin("ICON");break;case 6:return $e.getLogger().trace("SPACELINE"),6;case 7:return 7;case 8:return 15;case 9:$e.getLogger().trace("end icon"),this.popState();break;case 10:return $e.getLogger().trace("Exploding node"),this.begin("NODE"),19;case 11:return $e.getLogger().trace("Cloud"),this.begin("NODE"),19;case 12:return $e.getLogger().trace("Explosion Bang"),this.begin("NODE"),19;case 13:return $e.getLogger().trace("Cloud Bang"),this.begin("NODE"),19;case 14:case 15:case 16:case 17:return this.begin("NODE"),19;case 18:return 13;case 19:return 22;case 20:return 11;case 21:this.begin("NSTR2");break;case 22:return"NODE_DESCR";case 24:$e.getLogger().trace("Starting NSTR"),this.begin("NSTR");break;case 25:return $e.getLogger().trace("description:",He.yytext),"NODE_DESCR";case 27:return this.popState(),$e.getLogger().trace("node end ))"),"NODE_DEND";case 28:return this.popState(),$e.getLogger().trace("node end )"),"NODE_DEND";case 29:return this.popState(),$e.getLogger().trace("node end ...",He.yytext),"NODE_DEND";case 30:case 33:case 34:return this.popState(),$e.getLogger().trace("node end (("),"NODE_DEND";case 31:case 32:return this.popState(),$e.getLogger().trace("node end (-"),"NODE_DEND";case 35:case 36:return $e.getLogger().trace("Long description:",He.yytext),20}},"anonymous"),rules:[/^(?:\s*%%.*)/i,/^(?:mindmap\b)/i,/^(?::::)/i,/^(?:.+)/i,/^(?:\n)/i,/^(?:::icon\()/i,/^(?:[\s]+[\n])/i,/^(?:[\n]+)/i,/^(?:[^\)]+)/i,/^(?:\))/i,/^(?:-\))/i,/^(?:\(-)/i,/^(?:\)\))/i,/^(?:\))/i,/^(?:\(\()/i,/^(?:\{\{)/i,/^(?:\()/i,/^(?:\[)/i,/^(?:[\s]+)/i,/^(?:[^\(\[\n\)\{\}]+)/i,/^(?:$)/i,/^(?:["][`])/i,/^(?:[^`"]+)/i,/^(?:[`]["])/i,/^(?:["])/i,/^(?:[^"]+)/i,/^(?:["])/i,/^(?:[\)]\))/i,/^(?:[\)])/i,/^(?:[\]])/i,/^(?:\}\})/i,/^(?:\(-)/i,/^(?:-\))/i,/^(?:\(\()/i,/^(?:\()/i,/^(?:[^\)\]\(\}]+)/i,/^(?:.+(?!\(\())/i],conditions:{CLASS:{rules:[3,4],inclusive:!1},ICON:{rules:[8,9],inclusive:!1},NSTR2:{rules:[22,23],inclusive:!1},NSTR:{rules:[25,26],inclusive:!1},NODE:{rules:[21,24,27,28,29,30,31,32,33,34,35,36],inclusive:!1},INITIAL:{rules:[0,1,2,5,6,7,10,11,12,13,14,15,16,17,18,19,20],inclusive:!0}}}}(),(0,j.K2)(fr,"Parser"),fr.prototype=je,je.Parser=fr,new fr}();er.parser=er;var Qe=er,Dr={DEFAULT:0,NO_BORDER:0,ROUNDED_RECT:1,RECT:2,CIRCLE:3,CLOUD:4,BANG:5,HEXAGON:6},_e=(class{constructor(){this.nodes=[],this.count=0,this.elements={},this.getLogger=this.getLogger.bind(this),this.nodeType=Dr,this.clear(),this.getType=this.getType.bind(this),this.getElementById=this.getElementById.bind(this),this.getParent=this.getParent.bind(this),this.getMindmap=this.getMindmap.bind(this),this.addNode=this.addNode.bind(this),this.decorateNode=this.decorateNode.bind(this)}clear(){this.nodes=[],this.count=0,this.elements={},this.baseLevel=void 0}getParent(g){for(let y=this.nodes.length-1;y>=0;y--)if(this.nodes[y].level<g)return this.nodes[y];return null}getMindmap(){return this.nodes.length>0?this.nodes[0]:null}addNode(g,y,E,M){j.Rm.info("addNode",g,y,E,M);let m=!1;0===this.nodes.length?(this.baseLevel=g,g=0,m=!0):void 0!==this.baseLevel&&(g-=this.baseLevel,m=!1);const A=(0,Gt.D7)();let v=A.mindmap?.padding??Gt.UI.mindmap.padding;switch(M){case this.nodeType.ROUNDED_RECT:case this.nodeType.RECT:case this.nodeType.HEXAGON:v*=2}const b={id:this.count++,nodeId:(0,Gt.jZ)(y,A),level:g,descr:(0,Gt.jZ)(E,A),type:M,children:[],width:A.mindmap?.maxNodeWidth??Gt.UI.mindmap.maxNodeWidth,padding:v,isRoot:m},C=this.getParent(g);if(C)C.children.push(b),this.nodes.push(b);else{if(!m)throw new Error(`There can be only one root. No parent could be found for ("${b.descr}")`);this.nodes.push(b)}}getType(g,y){switch(j.Rm.debug("In get type",g,y),g){case"[":return this.nodeType.RECT;case"(":return")"===y?this.nodeType.ROUNDED_RECT:this.nodeType.CLOUD;case"((":return this.nodeType.CIRCLE;case")":return this.nodeType.CLOUD;case"))":return this.nodeType.BANG;case"{{":return this.nodeType.HEXAGON;default:return this.nodeType.DEFAULT}}setElementForId(g,y){this.elements[g]=y}getElementById(g){return this.elements[g]}decorateNode(g){if(!g)return;const y=(0,Gt.D7)(),E=this.nodes[this.nodes.length-1];g.icon&&(E.icon=(0,Gt.jZ)(g.icon,y)),g.class&&(E.class=(0,Gt.jZ)(g.class,y))}type2Str(g){switch(g){case this.nodeType.DEFAULT:return"no-border";case this.nodeType.RECT:return"rect";case this.nodeType.ROUNDED_RECT:return"rounded-rect";case this.nodeType.CIRCLE:return"circle";case this.nodeType.CLOUD:return"cloud";case this.nodeType.BANG:return"bang";case this.nodeType.HEXAGON:return"hexgon";default:return"no-border"}}assignSections(g,y){if(g.section=0===g.level?void 0:y,g.children)for(const[E,M]of g.children.entries())this.assignSections(M,0===g.level?E:y)}flattenNodes(g,y){const E=["mindmap-node"];!0===g.isRoot?E.push("section-root","section--1"):void 0!==g.section&&E.push(`section-${g.section}`),g.class&&E.push(g.class);const M=E.join(" "),m=(0,j.K2)(v=>{switch(v){case Dr.CIRCLE:return"mindmapCircle";case Dr.RECT:return"rect";case Dr.ROUNDED_RECT:return"rounded";case Dr.CLOUD:return"cloud";case Dr.BANG:return"bang";case Dr.HEXAGON:return"hexagon";case Dr.DEFAULT:return"defaultMindmapNode";default:return"rect"}},"getShapeFromType"),A={id:g.id.toString(),domId:"node_"+g.id.toString(),label:g.descr,isGroup:!1,shape:m(g.type),width:g.width,height:g.height??0,padding:g.padding,cssClasses:M,cssStyles:[],look:"default",icon:g.icon,x:g.x,y:g.y,level:g.level,nodeId:g.nodeId,type:g.type,section:g.section};if(y.push(A),g.children)for(const v of g.children)this.flattenNodes(v,y)}generateEdges(g,y){if(g.children)for(const E of g.children){let M="edge";void 0!==E.section&&(M+=` section-edge-${E.section}`),M+=` edge-depth-${g.level+1}`;const A={id:`edge_${g.id}_${E.id}`,start:g.id.toString(),end:E.id.toString(),type:"normal",curve:"basis",thickness:"normal",look:"default",classes:M,depth:g.level,section:E.section};y.push(A),this.generateEdges(E,y)}}getData(){const g=this.getMindmap(),y=(0,Gt.D7)(),m=y;if(void 0!==(0,Gt.TM)().layout||(m.layout="cose-bilkent"),!g)return{nodes:[],edges:[],config:m};j.Rm.debug("getData: mindmapRoot",g,y),this.assignSections(g);const A=[],v=[];this.flattenNodes(g,A),this.generateEdges(g,v),j.Rm.debug(`getData: processed ${A.length} nodes and ${v.length} edges`);const b=new Map;for(const C of A)b.set(C.id,{shape:C.shape,width:C.width,height:C.height,padding:C.padding});return{nodes:A,edges:v,config:m,rootNode:g,markers:["point"],direction:"TB",nodeSpacing:50,rankSpacing:50,shapes:Object.fromEntries(b),type:"mindmap",diagramId:"mindmap-"+ht()}}getLogger(){return j.Rm}static#t=Ae=()=>((0,ie.A)(this,"MindmapDB"),(0,j.K2)(this,"MindmapDB"),this)},Ae()),nr={draw:(0,j.K2)(function(){var g=(0,lt.A)(function*(y,E,M,m){j.Rm.debug("Rendering mindmap diagram\n"+y);const A=m.db,v=A.getData(),b=(0,L.A)(E,v.config.securityLevel);v.type=m.type,v.layoutAlgorithm=(0,Mt.q7)(v.config.layout,{fallback:"cose-bilkent"}),v.diagramId=E,A.getMindmap()&&(v.nodes.forEach(R=>{"rounded"===R.shape?(R.radius=15,R.taper=15,R.stroke="none",R.width=0,R.padding=15):"circle"===R.shape?R.padding=10:"rect"===R.shape&&(R.width=0,R.padding=10)}),yield(0,Mt.XX)(v,b),(0,D.P)(b,v.config.mindmap?.padding??Gt.UI.mindmap.padding,"mindmapDiagram",v.config.mindmap?.useMaxWidth??Gt.UI.mindmap.useMaxWidth))});return function(y,E,M,m){return g.apply(this,arguments)}}(),"draw")},te=(0,j.K2)(g=>{let y="";for(let E=0;E<g.THEME_COLOR_LIMIT;E++)g["lineColor"+E]=g["lineColor"+E]||g["cScaleInv"+E],g["lineColor"+E]=(0,Ee.HD)(g["lineColor"+E])?(0,Ee.a)(g["lineColor"+E],20):(0,Ee.e$)(g["lineColor"+E],20);for(let E=0;E<g.THEME_COLOR_LIMIT;E++)y+=`\n    .section-${E-1} rect, .section-${E-1} path, .section-${E-1} circle, .section-${E-1} polygon, .section-${E-1} path  {\n      fill: ${g["cScale"+E]};\n    }\n    .section-${E-1} text {\n     fill: ${g["cScaleLabel"+E]};\n    }\n    .node-icon-${E-1} {\n      font-size: 40px;\n      color: ${g["cScaleLabel"+E]};\n    }\n    .section-edge-${E-1}{\n      stroke: ${g["cScale"+E]};\n    }\n    .edge-depth-${E-1}{\n      stroke-width: ${""+(17-3*E)};\n    }\n    .section-${E-1} line {\n      stroke: ${g["cScaleInv"+E]} ;\n      stroke-width: 3;\n    }\n\n    .disabled, .disabled circle, .disabled text {\n      fill: lightgray;\n    }\n    .disabled text {\n      fill: #efefef;\n    }\n    `;return y},"genSections"),be=(0,j.K2)(g=>`\n  .edge {\n    stroke-width: 3;\n  }\n  ${te(g)}\n  .section-root rect, .section-root path, .section-root circle, .section-root polygon  {\n    fill: ${g.git0};\n  }\n  .section-root text {\n    fill: ${g.gitBranchLabel0};\n  }\n  .section-root span {\n    color: ${g.gitBranchLabel0};\n  }\n  .section-2 span {\n    color: ${g.gitBranchLabel0};\n  }\n  .icon-container {\n    height:100%;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n  }\n  .edge {\n    fill: none;\n  }\n  .mindmap-node-label {\n    dy: 1em;\n    alignment-baseline: middle;\n    text-anchor: middle;\n    dominant-baseline: middle;\n    text-align: center;\n  }\n`,"getStyles"),ar={get db(){return new _e},renderer:nr,parser:Qe,styles:be}},40622:(ri,Er,P)=>{"use strict";P.d(Er,{ABi:()=>Xe.AB,Agd:()=>Xe.Ag,DCK:()=>z.DC,GPZ:()=>j.GP,GZz:()=>Ir.GZ,GuW:()=>Xe.Gu,IA3:()=>Ir.IA,IrU:()=>Ir.Ir,JLW:()=>Ir.JL,Ltv:()=>Be.Lt,Lx9:()=>Ir.Lx,Mol:()=>Xe.Mo,OEq:()=>Ir.OE,PGM:()=>Ir.PG,PGu:()=>Xe.PG,Q7f:()=>Ir.Q7,Sk5:()=>ze.Sk,T9B:()=>lt.T9,TUC:()=>Xe.TU,UAC:()=>Xe.UA,UMr:()=>zr.UM,UPb:()=>Ir.UP,Ui6:()=>Xe.Ui,WH:()=>zr.WH,Wi0:()=>Ir.Wi,Xf2:()=>Ir.Xf,YPH:()=>Xe.YP,Yu4:()=>Ir.Yu,bEH:()=>vr.bE,cVp:()=>Ir.cV,dyv:()=>Ir.dy,hkb:()=>ze.hk,jkA:()=>lt.jk,l78:()=>ie.l7,lUB:()=>Ir.lU,m4Y:()=>zr.m4,n8j:()=>Ir.n8,nVG:()=>Ir.nV,oDi:()=>Ir.oD,olC:()=>Ir.ol,qrM:()=>Ir.qr,rGn:()=>Xe.rG,rLf:()=>Ir.rL,t6C:()=>Xe.t6,tlR:()=>ie.tl,ucG:()=>Xe.uc,uxU:()=>Ir.ux,w7C:()=>zr.w7,wXd:()=>Xe.wX,y8u:()=>Ir.y8,zt:()=>Or.zt});var lt=P(56018),ie=P(11574),j=(P(73745),P(37752),P(79494),P(91209),P(41906),P(61800),P(85173),P(79139),P(95647),P(72057),P(82709),P(66272)),ze=(P(99848),P(87742)),vr=P(86805),zr=(P(56366),P(26670),P(68026),P(90260),P(49979)),Or=P(34708),Be=P(41479),Ir=P(88383),Xe=P(52925),z=P(74275);P(25248),P(63111),P(52740)},49645:function(ri){ri.exports=function(){"use strict";var P=6e4,ie="millisecond",L="second",D="minute",Mt="hour",ut="day",G="week",w="month",Lt="quarter",At="year",Ge="date",bt="Invalid Date",Gt=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,j=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,hr={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(z){var dt=["th","st","nd","rd"],Bt=z%100;return"["+z+(dt[(Bt-20)%10]||dt[Bt]||dt[0])+"]"}},ze=function(z,dt,Bt){var Se=String(z);return!Se||Se.length>=dt?z:""+Array(dt+1-Se.length).join(Bt)+z},vr={s:ze,z:function(z){var dt=-z.utcOffset(),Bt=Math.abs(dt),Se=Math.floor(Bt/60),X=Bt%60;return(dt<=0?"+":"-")+ze(Se,2,"0")+":"+ze(X,2,"0")},m:function z(dt,Bt){if(dt.date()<Bt.date())return-z(Bt,dt);var Se=12*(Bt.year()-dt.year())+(Bt.month()-dt.month()),X=dt.clone().add(Se,w),re=Bt-X<0,S=dt.clone().add(Se+(re?-1:1),w);return+(-(Se+(Bt-X)/(re?X-S:S-X))||0)},a:function(z){return z<0?Math.ceil(z)||0:Math.floor(z)},p:function(z){return{M:w,y:At,w:G,d:ut,D:Ge,h:Mt,m:D,s:L,ms:ie,Q:Lt}[z]||String(z||"").toLowerCase().replace(/s$/,"")},u:function(z){return void 0===z}},Wr="en",Br={};Br[Wr]=hr;var Gr="$isDayjsObject",aa=function(z){return z instanceof Ir||!(!z||!z[Gr])},zr=function z(dt,Bt,Se){var X;if(!dt)return Wr;if("string"==typeof dt){var re=dt.toLowerCase();Br[re]&&(X=re),Bt&&(Br[re]=Bt,X=re);var S=dt.split("-");if(!X&&S.length>1)return z(S[0])}else{var ee=dt.name;Br[ee]=dt,X=ee}return!Se&&X&&(Wr=X),X||!Se&&Wr},Or=function(z,dt){if(aa(z))return z.clone();var Bt="object"==typeof dt?dt:{};return Bt.date=z,Bt.args=arguments,new Ir(Bt)},Be=vr;Be.l=zr,Be.i=aa,Be.w=function(z,dt){return Or(z,{locale:dt.$L,utc:dt.$u,x:dt.$x,$offset:dt.$offset})};var Ir=function(){function z(Bt){this.$L=zr(Bt.locale,null,!0),this.parse(Bt),this.$x=this.$x||Bt.x||{},this[Gr]=!0}var dt=z.prototype;return dt.parse=function(Bt){this.$d=function(Se){var X=Se.date,re=Se.utc;if(null===X)return new Date(NaN);if(Be.u(X))return new Date;if(X instanceof Date)return new Date(X);if("string"==typeof X&&!/Z$/i.test(X)){var S=X.match(Gt);if(S){var ee=S[2]-1||0,Rt=(S[7]||"0").substring(0,3);return re?new Date(Date.UTC(S[1],ee,S[3]||1,S[4]||0,S[5]||0,S[6]||0,Rt)):new Date(S[1],ee,S[3]||1,S[4]||0,S[5]||0,S[6]||0,Rt)}}return new Date(X)}(Bt),this.init()},dt.init=function(){var Bt=this.$d;this.$y=Bt.getFullYear(),this.$M=Bt.getMonth(),this.$D=Bt.getDate(),this.$W=Bt.getDay(),this.$H=Bt.getHours(),this.$m=Bt.getMinutes(),this.$s=Bt.getSeconds(),this.$ms=Bt.getMilliseconds()},dt.$utils=function(){return Be},dt.isValid=function(){return this.$d.toString()!==bt},dt.isSame=function(Bt,Se){var X=Or(Bt);return this.startOf(Se)<=X&&X<=this.endOf(Se)},dt.isAfter=function(Bt,Se){return Or(Bt)<this.startOf(Se)},dt.isBefore=function(Bt,Se){return this.endOf(Se)<Or(Bt)},dt.$g=function(Bt,Se,X){return Be.u(Bt)?this[Se]:this.set(X,Bt)},dt.unix=function(){return Math.floor(this.valueOf()/1e3)},dt.valueOf=function(){return this.$d.getTime()},dt.startOf=function(Bt,Se){var X=this,re=!!Be.u(Se)||Se,S=Be.p(Bt),ee=function(Ut,ye){var le=Be.w(X.$u?Date.UTC(X.$y,ye,Ut):new Date(X.$y,ye,Ut),X);return re?le:le.endOf(ut)},Rt=function(Ut,ye){return Be.w(X.toDate()[Ut].apply(X.toDate("s"),(re?[0,0,0,0]:[23,59,59,999]).slice(ye)),X)},qt=this.$W,V=this.$M,gt=this.$D,Y="set"+(this.$u?"UTC":"");switch(S){case At:return re?ee(1,0):ee(31,11);case w:return re?ee(1,V):ee(0,V+1);case G:var Nt=this.$locale().weekStart||0,St=(qt<Nt?qt+7:qt)-Nt;return ee(re?gt-St:gt+(6-St),V);case ut:case Ge:return Rt(Y+"Hours",0);case Mt:return Rt(Y+"Minutes",1);case D:return Rt(Y+"Seconds",2);case L:return Rt(Y+"Milliseconds",3);default:return this.clone()}},dt.endOf=function(Bt){return this.startOf(Bt,!1)},dt.$set=function(Bt,Se){var X,re=Be.p(Bt),S="set"+(this.$u?"UTC":""),ee=(X={},X[ut]=S+"Date",X[Ge]=S+"Date",X[w]=S+"Month",X[At]=S+"FullYear",X[Mt]=S+"Hours",X[D]=S+"Minutes",X[L]=S+"Seconds",X[ie]=S+"Milliseconds",X)[re],Rt=re===ut?this.$D+(Se-this.$W):Se;if(re===w||re===At){var qt=this.clone().set(Ge,1);qt.$d[ee](Rt),qt.init(),this.$d=qt.set(Ge,Math.min(this.$D,qt.daysInMonth())).$d}else ee&&this.$d[ee](Rt);return this.init(),this},dt.set=function(Bt,Se){return this.clone().$set(Bt,Se)},dt.get=function(Bt){return this[Be.p(Bt)]()},dt.add=function(Bt,Se){var X,re=this;Bt=Number(Bt);var S=Be.p(Se),ee=function(V){var gt=Or(re);return Be.w(gt.date(gt.date()+Math.round(V*Bt)),re)};if(S===w)return this.set(w,this.$M+Bt);if(S===At)return this.set(At,this.$y+Bt);if(S===ut)return ee(1);if(S===G)return ee(7);var Rt=(X={},X[D]=P,X[Mt]=36e5,X[L]=1e3,X)[S]||1,qt=this.$d.getTime()+Bt*Rt;return Be.w(qt,this)},dt.subtract=function(Bt,Se){return this.add(-1*Bt,Se)},dt.format=function(Bt){var Se=this,X=this.$locale();if(!this.isValid())return X.invalidDate||bt;var re=Bt||"YYYY-MM-DDTHH:mm:ssZ",S=Be.z(this),ee=this.$H,Rt=this.$m,qt=this.$M,V=X.weekdays,gt=X.months,Nt=function(ye,le,Pe,oe){return ye&&(ye[le]||ye(Se,re))||Pe[le].slice(0,oe)},St=function(ye){return Be.s(ee%12||12,ye,"0")},Ut=X.meridiem||function(ye,le,Pe){var oe=ye<12?"AM":"PM";return Pe?oe.toLowerCase():oe};return re.replace(j,function(ye,le){return le||function(Pe){switch(Pe){case"YY":return String(Se.$y).slice(-2);case"YYYY":return Be.s(Se.$y,4,"0");case"M":return qt+1;case"MM":return Be.s(qt+1,2,"0");case"MMM":return Nt(X.monthsShort,qt,gt,3);case"MMMM":return Nt(gt,qt);case"D":return Se.$D;case"DD":return Be.s(Se.$D,2,"0");case"d":return String(Se.$W);case"dd":return Nt(X.weekdaysMin,Se.$W,V,2);case"ddd":return Nt(X.weekdaysShort,Se.$W,V,3);case"dddd":return V[Se.$W];case"H":return String(ee);case"HH":return Be.s(ee,2,"0");case"h":return St(1);case"hh":return St(2);case"a":return Ut(ee,Rt,!0);case"A":return Ut(ee,Rt,!1);case"m":return String(Rt);case"mm":return Be.s(Rt,2,"0");case"s":return String(Se.$s);case"ss":return Be.s(Se.$s,2,"0");case"SSS":return Be.s(Se.$ms,3,"0");case"Z":return S}return null}(ye)||S.replace(":","")})},dt.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},dt.diff=function(Bt,Se,X){var re,S=this,ee=Be.p(Se),Rt=Or(Bt),qt=(Rt.utcOffset()-this.utcOffset())*P,V=this-Rt,gt=function(){return Be.m(S,Rt)};switch(ee){case At:re=gt()/12;break;case w:re=gt();break;case Lt:re=gt()/3;break;case G:re=(V-qt)/6048e5;break;case ut:re=(V-qt)/864e5;break;case Mt:re=V/36e5;break;case D:re=V/P;break;case L:re=V/1e3;break;default:re=V}return X?re:Be.a(re)},dt.daysInMonth=function(){return this.endOf(w).$D},dt.$locale=function(){return Br[this.$L]},dt.locale=function(Bt,Se){if(!Bt)return this.$L;var X=this.clone(),re=zr(Bt,Se,!0);return re&&(X.$L=re),X},dt.clone=function(){return Be.w(this.$d,this)},dt.toDate=function(){return new Date(this.valueOf())},dt.toJSON=function(){return this.isValid()?this.toISOString():null},dt.toISOString=function(){return this.$d.toISOString()},dt.toString=function(){return this.$d.toUTCString()},z}(),Xe=Ir.prototype;return Or.prototype=Xe,[["$ms",ie],["$s",L],["$m",D],["$H",Mt],["$W",ut],["$M",w],["$y",At],["$D",Ge]].forEach(function(z){Xe[z[1]]=function(dt){return this.$g(dt,z[0],z[1])}}),Or.extend=function(z,dt){return z.$i||(z(dt,Ir,Or),z.$i=!0),Or},Or.locale=zr,Or.isDayjs=aa,Or.unix=function(z){return Or(1e3*z)},Or.en=Br[Wr],Or.Ls=Br,Or.p={},Or}()},52052:(ri,Er,P)=>{"use strict";P.d(Er,{$C:()=>dt,$t:()=>le,C4:()=>oe,I5:()=>ye,Ib:()=>ze,KL:()=>Et,Sm:()=>qe,Un:()=>qt,_K:()=>Pe,bH:()=>S,dq:()=>St,pe:()=>Lt,rY:()=>We,ru:()=>Rt,sM:()=>Xe,vU:()=>j,yT:()=>Se});var w,lt=P(45027),ie=P(79006),L=P(32303),D=P(73986),Mt=P(40622),ut=P(37674),G=P(23950),Lt="\u200b",At={curveBasis:Mt.qrM,curveBasisClosed:Mt.Yu4,curveBasisOpen:Mt.IA3,curveBumpX:Mt.Wi0,curveBumpY:Mt.PGM,curveBundle:Mt.OEq,curveCardinalClosed:Mt.olC,curveCardinalOpen:Mt.IrU,curveCardinal:Mt.y8u,curveCatmullRomClosed:Mt.Q7f,curveCatmullRomOpen:Mt.cVp,curveCatmullRom:Mt.oDi,curveLinear:Mt.lUB,curveLinearClosed:Mt.Lx9,curveMonotoneX:Mt.nVG,curveMonotoneY:Mt.uxU,curveNatural:Mt.Xf2,curveStep:Mt.GZz,curveStepAfter:Mt.UPb,curveStepBefore:Mt.dyv},Ge=/\s*(?:(\w+)(?=:):|(\w+))\s*(?:(\w+)|((?:(?!}%{2}).|\r?\n)*))?\s*(?:}%{2})?/gi,bt=(0,L.K2)(function(B,N){const et=Gt(B,/(?:init\b)|(?:initialize\b)/);let yt={};if(Array.isArray(et)){const _t=et.map(ht=>ht.args);(0,ie.$i)(_t),yt=(0,ie.hH)(yt,[..._t])}else yt=et.args;if(!yt)return;let it=(0,ie.Ch)(B,N);const rt="config";return void 0!==yt[rt]&&("flowchart-v2"===it&&(it="flowchart"),yt[it]=yt[rt],delete yt[rt]),yt},"detectInit"),Gt=(0,L.K2)(function(B,N=null){try{const et=new RegExp(`[%]{2}(?![{]${Ge.source})(?=[}][%]{2}).*\n`,"ig");let yt;B=B.trim().replace(et,"").replace(/'/gm,'"'),L.Rm.debug(`Detecting diagram directive${null!==N?" type:"+N:""} based on the text:${B}`);const it=[];for(;null!==(yt=ie.DB.exec(B));)if(yt.index===ie.DB.lastIndex&&ie.DB.lastIndex++,yt&&!N||N&&yt[1]?.match(N)||N&&yt[2]?.match(N)){const rt=yt[1]?yt[1]:yt[2],_t=yt[3]?yt[3].trim():yt[4]?JSON.parse(yt[4].trim()):null;it.push({type:rt,args:_t})}return 0===it.length?{type:B,args:null}:1===it.length?it[0]:it}catch(et){return L.Rm.error(`ERROR: ${et.message} - Unable to parse directive type: '${N}' based on the text: '${B}'`),{type:void 0,args:null}}},"detectDirective"),j=(0,L.K2)(function(B){return B.replace(ie.DB,"")},"removeDirectives"),hr=(0,L.K2)(function(B,N){for(const[et,yt]of N.entries())if(yt.match(B))return et;return-1},"isSubstringInArray");function ze(B,N){if(!B)return N;const et=`curve${B.charAt(0).toUpperCase()+B.slice(1)}`;return At[et]??N}function vr(B,N){const et=B.trim();if(et)return"loose"!==N.securityLevel?(0,D.J)(et):et}(0,L.K2)(ze,"interpolateToCurve"),(0,L.K2)(vr,"formatUrl");var Wr=(0,L.K2)((B,...N)=>{const et=B.split("."),yt=et.length-1,it=et[yt];let rt=window;for(let _t=0;_t<yt;_t++)if(rt=rt[et[_t]],!rt)return void L.Rm.error(`Function name: ${B} not found in window`);rt[it](...N)},"runFunc");function Br(B,N){return B&&N?Math.sqrt(Math.pow(N.x-B.x,2)+Math.pow(N.y-B.y,2)):0}function Gr(B){let N,et=0;return B.forEach(it=>{et+=Br(it,N),N=it}),Or(B,et/2)}function aa(B){return 1===B.length?B[0]:Gr(B)}(0,L.K2)(Br,"distance"),(0,L.K2)(Gr,"traverseEdge"),(0,L.K2)(aa,"calcLabelPosition");var zr=(0,L.K2)((B,N=2)=>{const et=Math.pow(10,N);return Math.round(B*et)/et},"roundNumber"),Or=(0,L.K2)((B,N)=>{let et,yt=N;for(const it of B){if(et){const rt=Br(it,et);if(0===rt)return et;if(rt<yt)yt-=rt;else{const _t=yt/rt;if(_t<=0)return et;if(_t>=1)return{x:it.x,y:it.y};if(_t>0&&_t<1)return{x:zr((1-_t)*et.x+_t*it.x,5),y:zr((1-_t)*et.y+_t*it.y,5)}}}et=it}throw new Error("Could not find a suitable point for the given distance")},"calculatePoint"),Be=(0,L.K2)((B,N,et)=>{L.Rm.info(`our points ${JSON.stringify(N)}`),N[0]!==et&&(N=N.reverse());const it=Or(N,25),rt=B?10:5,_t=Math.atan2(N[0].y-it.y,N[0].x-it.x),ht={x:0,y:0};return ht.x=Math.sin(_t)*rt+(N[0].x+it.x)/2,ht.y=-Math.cos(_t)*rt+(N[0].y+it.y)/2,ht},"calcCardinalityPosition");function Ir(B,N,et){const yt=structuredClone(et);L.Rm.info("our points",yt),"start_left"!==N&&"start_right"!==N&&yt.reverse();const rt=Or(yt,25+B),_t=10+.5*B,ht=Math.atan2(yt[0].y-rt.y,yt[0].x-rt.x),Ot={x:0,y:0};return"start_left"===N?(Ot.x=Math.sin(ht+Math.PI)*_t+(yt[0].x+rt.x)/2,Ot.y=-Math.cos(ht+Math.PI)*_t+(yt[0].y+rt.y)/2):"end_right"===N?(Ot.x=Math.sin(ht-Math.PI)*_t+(yt[0].x+rt.x)/2-5,Ot.y=-Math.cos(ht-Math.PI)*_t+(yt[0].y+rt.y)/2-5):"end_left"===N?(Ot.x=Math.sin(ht)*_t+(yt[0].x+rt.x)/2-5,Ot.y=-Math.cos(ht)*_t+(yt[0].y+rt.y)/2-5):(Ot.x=Math.sin(ht)*_t+(yt[0].x+rt.x)/2,Ot.y=-Math.cos(ht)*_t+(yt[0].y+rt.y)/2),Ot}function Xe(B){let N="",et="";for(const yt of B)void 0!==yt&&(yt.startsWith("color:")||yt.startsWith("text-align:")?et=et+yt+";":N=N+yt+";");return{style:N,labelStyle:et}}(0,L.K2)(Ir,"calcTerminalLabelPosition"),(0,L.K2)(Xe,"getStylesFromArray");var z=0,dt=(0,L.K2)(()=>(z++,"id-"+Math.random().toString(36).substr(2,12)+"-"+z),"generateId");function Bt(B){let N="";for(let it=0;it<B;it++)N+="0123456789abcdef".charAt(Math.floor(16*Math.random()));return N}(0,L.K2)(Bt,"makeRandomHex");var Se=(0,L.K2)(B=>Bt(B.length),"random"),X=(0,L.K2)(function(){return{x:0,y:0,fill:void 0,anchor:"start",style:"#666",width:100,height:100,textMargin:0,rx:0,ry:0,valign:void 0,text:""}},"getTextObj"),re=(0,L.K2)(function(B,N){const et=N.text.replace(ie.Y2.lineBreakRegex," "),[,yt]=ye(N.fontSize),it=B.append("text");it.attr("x",N.x),it.attr("y",N.y),it.style("text-anchor",N.anchor),it.style("font-family",N.fontFamily),it.style("font-size",yt),it.style("font-weight",N.fontWeight),it.attr("fill",N.fill),void 0!==N.class&&it.attr("class",N.class);const rt=it.append("tspan");return rt.attr("x",N.x+2*N.textMargin),rt.attr("fill",N.fill),rt.text(et),it},"drawSimpleText"),S=(0,ut.A)((B,N,et)=>{if(!B||(et=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial",joinWith:"<br/>"},et),ie.Y2.lineBreakRegex.test(B)))return B;const yt=B.split(" ").filter(Boolean),it=[];let rt="";return yt.forEach((_t,ht)=>{const Ot=qt(`${_t} `,et),H=qt(rt,et);if(Ot>N){const{hyphenatedStrings:Pt,remainingWord:Zt}=ee(_t,N,"-",et);it.push(rt,...Pt),rt=Zt}else H+Ot>=N?(it.push(rt),rt=_t):rt=[rt,_t].filter(Boolean).join(" ");ht+1===yt.length&&it.push(rt)}),it.filter(_t=>""!==_t).join(et.joinWith)},(B,N,et)=>`${B}${N}${et.fontSize}${et.fontWeight}${et.fontFamily}${et.joinWith}`),ee=(0,ut.A)((B,N,et="-",yt)=>{yt=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial",margin:0},yt);const it=[...B],rt=[];let _t="";return it.forEach((ht,Ot)=>{const H=`${_t}${ht}`;qt(H,yt)>=N?(rt.push(it.length===Ot+1?H:`${H}${et}`),_t=""):_t=H}),{hyphenatedStrings:rt,remainingWord:_t}},(B,N,et="-",yt)=>`${B}${N}${et}${yt.fontSize}${yt.fontWeight}${yt.fontFamily}`);function Rt(B,N){return V(B,N).height}function qt(B,N){return V(B,N).width}(0,L.K2)(Rt,"calculateTextHeight"),(0,L.K2)(qt,"calculateTextWidth");var Y,V=(0,ut.A)((B,N)=>{const{fontSize:et=12,fontFamily:yt="Arial",fontWeight:it=400}=N;if(!B)return{width:0,height:0};const[,rt]=ye(et),_t=["sans-serif",yt],ht=B.split(ie.Y2.lineBreakRegex),Ot=[],H=(0,Mt.Ltv)("body");if(!H.remove)return{width:0,height:0,lineHeight:0};const ot=H.append("svg");for(const Pt of _t){let Zt=0;const pe={width:0,height:0,lineHeight:0};for(const Re of ht){const Ze=X();Ze.text=Re||Lt;const de=re(ot,Ze).style("font-size",rt).style("font-weight",it).style("font-family",Pt),yr=(de._groups||de)[0][0].getBBox();if(0===yr.width&&0===yr.height)throw new Error("svg element not in render tree");pe.width=Math.round(Math.max(pe.width,yr.width)),Zt=Math.round(yr.height),pe.height+=Zt,pe.lineHeight=Math.round(Math.max(pe.lineHeight,Zt))}Ot.push(pe)}return ot.remove(),Ot[isNaN(Ot[1].height)||isNaN(Ot[1].width)||isNaN(Ot[1].lineHeight)||Ot[0].height>Ot[1].height&&Ot[0].width>Ot[1].width&&Ot[0].lineHeight>Ot[1].lineHeight?0:1]},(B,N)=>`${B}${N.fontSize}${N.fontWeight}${N.fontFamily}`),gt=(class{constructor(B=!1,N){this.count=0,this.count=N?N.length:0,this.next=B?()=>this.count++:()=>Date.now()}static#t=w=()=>((0,lt.A)(this,"InitIDGenerator"),(0,L.K2)(this,"InitIDGenerator"),this)},w()),Nt=(0,L.K2)(function(B){return Y=Y||document.createElement("div"),B=escape(B).replace(/%26/g,"&").replace(/%23/g,"#").replace(/%3B/g,";"),Y.innerHTML=B,unescape(Y.textContent)},"entityDecode");function St(B){return"str"in B}(0,L.K2)(St,"isDetailedError");var Ut=(0,L.K2)((B,N,et,yt)=>{if(!yt)return;const it=B.node()?.getBBox();it&&B.append("text").text(yt).attr("text-anchor","middle").attr("x",it.x+it.width/2).attr("y",-et).attr("class",N)},"insertTitle"),ye=(0,L.K2)(B=>{if("number"==typeof B)return[B,B+"px"];const N=parseInt(B??"",10);return Number.isNaN(N)?[void 0,void 0]:B===String(N)?[N,B+"px"]:[N,B]},"parseFontSize");function le(B,N){return(0,G.A)({},B,N)}(0,L.K2)(le,"cleanAndMerge");var Pe={assignWithDepth:ie.hH,wrapLabel:S,calculateTextHeight:Rt,calculateTextWidth:qt,calculateTextDimensions:V,cleanAndMerge:le,detectInit:bt,detectDirective:Gt,isSubstringInArray:hr,interpolateToCurve:ze,calcLabelPosition:aa,calcCardinalityPosition:Be,calcTerminalLabelPosition:Ir,formatUrl:vr,getStylesFromArray:Xe,generateId:dt,random:Se,runFunc:Wr,entityDecode:Nt,insertTitle:Ut,isLabelCoordinateInPath:Tt,parseFontSize:ye,InitIDGenerator:gt},oe=(0,L.K2)(function(B){let N=B;return N=N.replace(/style.*:\S*#.*;/g,function(et){return et.substring(0,et.length-1)}),N=N.replace(/classDef.*:\S*#.*;/g,function(et){return et.substring(0,et.length-1)}),N=N.replace(/#\w+;/g,function(et){const yt=et.substring(1,et.length-1);return/^\+?\d+$/.test(yt)?"\ufb02\xb0\xb0"+yt+"\xb6\xdf":"\ufb02\xb0"+yt+"\xb6\xdf"}),N},"encodeEntities"),qe=(0,L.K2)(function(B){return B.replace(/\ufb02\xb0\xb0/g,"&#").replace(/\ufb02\xb0/g,"&").replace(/\xb6\xdf/g,";")},"decodeEntities"),We=(0,L.K2)((B,N,{counter:et=0,prefix:yt,suffix:it},rt)=>rt||`${yt?`${yt}_`:""}${B}_${N}_${et}${it?`_${it}`:""}`,"getEdgeId");function Et(B){return B??null}function Tt(B,N){const et=Math.round(B.x),yt=Math.round(B.y),it=N.replace(/(\d+\.\d+)/g,rt=>Math.round(parseFloat(rt)).toString());return it.includes(et.toString())||it.includes(yt.toString())}(0,L.K2)(Et,"handleUndefinedAttr"),(0,L.K2)(Tt,"isLabelCoordinateInPath")},52240:(ri,Er,P)=>{"use strict";Object.defineProperty(Er,"__esModule",{value:!0}),Er.Emitter=Er.Event=void 0;const lt=P(30362);var ie;!function(Mt){const ut={dispose(){}};Mt.None=function(){return ut}}(ie||(Er.Event=ie={}));class L{add(ut,G=null,w){this._callbacks||(this._callbacks=[],this._contexts=[]),this._callbacks.push(ut),this._contexts.push(G),Array.isArray(w)&&w.push({dispose:()=>this.remove(ut,G)})}remove(ut,G=null){if(!this._callbacks)return;let w=!1;for(let Lt=0,At=this._callbacks.length;Lt<At;Lt++)if(this._callbacks[Lt]===ut){if(this._contexts[Lt]===G)return this._callbacks.splice(Lt,1),void this._contexts.splice(Lt,1);w=!0}if(w)throw new Error("When adding a listener with a context, you should remove it with the same context")}invoke(...ut){if(!this._callbacks)return[];const G=[],w=this._callbacks.slice(0),Lt=this._contexts.slice(0);for(let At=0,Ge=w.length;At<Ge;At++)try{G.push(w[At].apply(Lt[At],ut))}catch(bt){(0,lt.default)().console.error(bt)}return G}isEmpty(){return!this._callbacks||0===this._callbacks.length}dispose(){this._callbacks=void 0,this._contexts=void 0}}class D{constructor(ut){this._options=ut}get event(){return this._event||(this._event=(ut,G,w)=>{this._callbacks||(this._callbacks=new L),this._options&&this._options.onFirstListenerAdd&&this._callbacks.isEmpty()&&this._options.onFirstListenerAdd(this),this._callbacks.add(ut,G);const Lt={dispose:()=>{this._callbacks&&(this._callbacks.remove(ut,G),Lt.dispose=D._noop,this._options&&this._options.onLastListenerRemove&&this._callbacks.isEmpty()&&this._options.onLastListenerRemove(this))}};return Array.isArray(w)&&w.push(Lt),Lt}),this._event}fire(ut){this._callbacks&&this._callbacks.invoke.call(this._callbacks,ut)}dispose(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0)}}Er.Emitter=D,D._noop=function(){}},53102:(ri,Er,P)=>{"use strict";P.d(Er,{Zk:()=>At,q7:()=>rt,tM:()=>sr,u4:()=>Wt});var lt=P(45027),ie=P(89204),L=P(5675),D=P(8086),Mt=P(72271),ut=P(52052),G=P(79006),w=P(32303),Lt=function(){var ve=(0,w.K2)(function(br,$e,He,wr){for(He=He||{},wr=br.length;wr--;He[br[wr]]=$e);return He},"o"),ce=[1,2],Ee=[1,3],Ae=[1,4],er=[2,4],Qe=[1,9],Dr=[1,11],_e=[1,16],Yr=[1,17],nr=[1,18],te=[1,19],ne=[1,33],be=[1,20],ar=[1,21],g=[1,22],y=[1,23],E=[1,24],M=[1,26],m=[1,27],A=[1,28],v=[1,29],b=[1,30],C=[1,31],R=[1,32],Q=[1,35],mt=[1,36],zt=[1,37],jt=[1,38],Vt=[1,34],Kt=[1,4,5,16,17,19,21,22,24,25,26,27,28,29,33,35,37,38,41,45,48,51,52,53,54,57],xe=[1,4,5,14,15,16,17,19,21,22,24,25,26,27,28,29,33,35,37,38,39,40,41,45,48,51,52,53,54,57],je=[4,5,16,17,19,21,22,24,25,26,27,28,29,33,35,37,38,41,45,48,51,52,53,54,57],Ke={trace:(0,w.K2)(function(){},"trace"),yy:{},symbols_:{error:2,start:3,SPACE:4,NL:5,SD:6,document:7,line:8,statement:9,classDefStatement:10,styleStatement:11,cssClassStatement:12,idStatement:13,DESCR:14,"--\x3e":15,HIDE_EMPTY:16,scale:17,WIDTH:18,COMPOSIT_STATE:19,STRUCT_START:20,STRUCT_STOP:21,STATE_DESCR:22,AS:23,ID:24,FORK:25,JOIN:26,CHOICE:27,CONCURRENT:28,note:29,notePosition:30,NOTE_TEXT:31,direction:32,acc_title:33,acc_title_value:34,acc_descr:35,acc_descr_value:36,acc_descr_multiline_value:37,CLICK:38,STRING:39,HREF:40,classDef:41,CLASSDEF_ID:42,CLASSDEF_STYLEOPTS:43,DEFAULT:44,style:45,STYLE_IDS:46,STYLEDEF_STYLEOPTS:47,class:48,CLASSENTITY_IDS:49,STYLECLASS:50,direction_tb:51,direction_bt:52,direction_rl:53,direction_lr:54,eol:55,";":56,EDGE_STATE:57,STYLE_SEPARATOR:58,left_of:59,right_of:60,$accept:0,$end:1},terminals_:{2:"error",4:"SPACE",5:"NL",6:"SD",14:"DESCR",15:"--\x3e",16:"HIDE_EMPTY",17:"scale",18:"WIDTH",19:"COMPOSIT_STATE",20:"STRUCT_START",21:"STRUCT_STOP",22:"STATE_DESCR",23:"AS",24:"ID",25:"FORK",26:"JOIN",27:"CHOICE",28:"CONCURRENT",29:"note",31:"NOTE_TEXT",33:"acc_title",34:"acc_title_value",35:"acc_descr",36:"acc_descr_value",37:"acc_descr_multiline_value",38:"CLICK",39:"STRING",40:"HREF",41:"classDef",42:"CLASSDEF_ID",43:"CLASSDEF_STYLEOPTS",44:"DEFAULT",45:"style",46:"STYLE_IDS",47:"STYLEDEF_STYLEOPTS",48:"class",49:"CLASSENTITY_IDS",50:"STYLECLASS",51:"direction_tb",52:"direction_bt",53:"direction_rl",54:"direction_lr",56:";",57:"EDGE_STATE",58:"STYLE_SEPARATOR",59:"left_of",60:"right_of"},productions_:[0,[3,2],[3,2],[3,2],[7,0],[7,2],[8,2],[8,1],[8,1],[9,1],[9,1],[9,1],[9,1],[9,2],[9,3],[9,4],[9,1],[9,2],[9,1],[9,4],[9,3],[9,6],[9,1],[9,1],[9,1],[9,1],[9,4],[9,4],[9,1],[9,2],[9,2],[9,1],[9,5],[9,5],[10,3],[10,3],[11,3],[12,3],[32,1],[32,1],[32,1],[32,1],[55,1],[55,1],[13,1],[13,1],[13,3],[13,3],[30,1],[30,1]],performAction:(0,w.K2)(function($e,He,wr,kr,Kr,_r,Jr){var Lr=_r.length-1;switch(Kr){case 3:return kr.setRootDoc(_r[Lr]),_r[Lr];case 4:this.$=[];break;case 5:"nl"!=_r[Lr]&&(_r[Lr-1].push(_r[Lr]),this.$=_r[Lr-1]);break;case 6:case 7:case 12:this.$=_r[Lr];break;case 8:this.$="nl";break;case 13:const Qr=_r[Lr-1];Qr.description=kr.trimColon(_r[Lr]),this.$=Qr;break;case 14:this.$={stmt:"relation",state1:_r[Lr-2],state2:_r[Lr]};break;case 15:const or=kr.trimColon(_r[Lr]);this.$={stmt:"relation",state1:_r[Lr-3],state2:_r[Lr-1],description:or};break;case 19:this.$={stmt:"state",id:_r[Lr-3],type:"default",description:"",doc:_r[Lr-1]};break;case 20:var ha=_r[Lr],ia=_r[Lr-2].trim();if(_r[Lr].match(":")){var jr=_r[Lr].split(":");ha=jr[0],ia=[ia,jr[1]]}this.$={stmt:"state",id:ha,type:"default",description:ia};break;case 21:this.$={stmt:"state",id:_r[Lr-3],type:"default",description:_r[Lr-5],doc:_r[Lr-1]};break;case 22:this.$={stmt:"state",id:_r[Lr],type:"fork"};break;case 23:this.$={stmt:"state",id:_r[Lr],type:"join"};break;case 24:this.$={stmt:"state",id:_r[Lr],type:"choice"};break;case 25:this.$={stmt:"state",id:kr.getDividerId(),type:"divider"};break;case 26:this.$={stmt:"state",id:_r[Lr-1].trim(),note:{position:_r[Lr-2].trim(),text:_r[Lr].trim()}};break;case 29:this.$=_r[Lr].trim(),kr.setAccTitle(this.$);break;case 30:case 31:this.$=_r[Lr].trim(),kr.setAccDescription(this.$);break;case 32:this.$={stmt:"click",id:_r[Lr-3],url:_r[Lr-2],tooltip:_r[Lr-1]};break;case 33:this.$={stmt:"click",id:_r[Lr-3],url:_r[Lr-1],tooltip:""};break;case 34:case 35:this.$={stmt:"classDef",id:_r[Lr-1].trim(),classes:_r[Lr].trim()};break;case 36:this.$={stmt:"style",id:_r[Lr-1].trim(),styleClass:_r[Lr].trim()};break;case 37:this.$={stmt:"applyClass",id:_r[Lr-1].trim(),styleClass:_r[Lr].trim()};break;case 38:kr.setDirection("TB"),this.$={stmt:"dir",value:"TB"};break;case 39:kr.setDirection("BT"),this.$={stmt:"dir",value:"BT"};break;case 40:kr.setDirection("RL"),this.$={stmt:"dir",value:"RL"};break;case 41:kr.setDirection("LR"),this.$={stmt:"dir",value:"LR"};break;case 44:case 45:this.$={stmt:"state",id:_r[Lr].trim(),type:"default",description:""};break;case 46:case 47:this.$={stmt:"state",id:_r[Lr-2].trim(),classes:[_r[Lr].trim()],type:"default",description:""}}},"anonymous"),table:[{3:1,4:ce,5:Ee,6:Ae},{1:[3]},{3:5,4:ce,5:Ee,6:Ae},{3:6,4:ce,5:Ee,6:Ae},ve([1,4,5,16,17,19,22,24,25,26,27,28,29,33,35,37,38,41,45,48,51,52,53,54,57],er,{7:7}),{1:[2,1]},{1:[2,2]},{1:[2,3],4:Qe,5:Dr,8:8,9:10,10:12,11:13,12:14,13:15,16:_e,17:Yr,19:nr,22:te,24:ne,25:be,26:ar,27:g,28:y,29:E,32:25,33:M,35:m,37:A,38:v,41:b,45:C,48:R,51:Q,52:mt,53:zt,54:jt,57:Vt},ve(Kt,[2,5]),{9:39,10:12,11:13,12:14,13:15,16:_e,17:Yr,19:nr,22:te,24:ne,25:be,26:ar,27:g,28:y,29:E,32:25,33:M,35:m,37:A,38:v,41:b,45:C,48:R,51:Q,52:mt,53:zt,54:jt,57:Vt},ve(Kt,[2,7]),ve(Kt,[2,8]),ve(Kt,[2,9]),ve(Kt,[2,10]),ve(Kt,[2,11]),ve(Kt,[2,12],{14:[1,40],15:[1,41]}),ve(Kt,[2,16]),{18:[1,42]},ve(Kt,[2,18],{20:[1,43]}),{23:[1,44]},ve(Kt,[2,22]),ve(Kt,[2,23]),ve(Kt,[2,24]),ve(Kt,[2,25]),{30:45,31:[1,46],59:[1,47],60:[1,48]},ve(Kt,[2,28]),{34:[1,49]},{36:[1,50]},ve(Kt,[2,31]),{13:51,24:ne,57:Vt},{42:[1,52],44:[1,53]},{46:[1,54]},{49:[1,55]},ve(xe,[2,44],{58:[1,56]}),ve(xe,[2,45],{58:[1,57]}),ve(Kt,[2,38]),ve(Kt,[2,39]),ve(Kt,[2,40]),ve(Kt,[2,41]),ve(Kt,[2,6]),ve(Kt,[2,13]),{13:58,24:ne,57:Vt},ve(Kt,[2,17]),ve(je,er,{7:59}),{24:[1,60]},{24:[1,61]},{23:[1,62]},{24:[2,48]},{24:[2,49]},ve(Kt,[2,29]),ve(Kt,[2,30]),{39:[1,63],40:[1,64]},{43:[1,65]},{43:[1,66]},{47:[1,67]},{50:[1,68]},{24:[1,69]},{24:[1,70]},ve(Kt,[2,14],{14:[1,71]}),{4:Qe,5:Dr,8:8,9:10,10:12,11:13,12:14,13:15,16:_e,17:Yr,19:nr,21:[1,72],22:te,24:ne,25:be,26:ar,27:g,28:y,29:E,32:25,33:M,35:m,37:A,38:v,41:b,45:C,48:R,51:Q,52:mt,53:zt,54:jt,57:Vt},ve(Kt,[2,20],{20:[1,73]}),{31:[1,74]},{24:[1,75]},{39:[1,76]},{39:[1,77]},ve(Kt,[2,34]),ve(Kt,[2,35]),ve(Kt,[2,36]),ve(Kt,[2,37]),ve(xe,[2,46]),ve(xe,[2,47]),ve(Kt,[2,15]),ve(Kt,[2,19]),ve(je,er,{7:78}),ve(Kt,[2,26]),ve(Kt,[2,27]),{5:[1,79]},{5:[1,80]},{4:Qe,5:Dr,8:8,9:10,10:12,11:13,12:14,13:15,16:_e,17:Yr,19:nr,21:[1,81],22:te,24:ne,25:be,26:ar,27:g,28:y,29:E,32:25,33:M,35:m,37:A,38:v,41:b,45:C,48:R,51:Q,52:mt,53:zt,54:jt,57:Vt},ve(Kt,[2,32]),ve(Kt,[2,33]),ve(Kt,[2,21])],defaultActions:{5:[2,1],6:[2,2],47:[2,48],48:[2,49]},parseError:(0,w.K2)(function($e,He){if(!He.recoverable){var wr=new Error($e);throw wr.hash=He,wr}this.trace($e)},"parseError"),parse:(0,w.K2)(function($e){var He=this,wr=[0],kr=[],Kr=[null],_r=[],Jr=this.table,Lr="",ha=0,ia=0,jr=0,ur=_r.slice.call(arguments,1),W=Object.create(this.lexer),$t={yy:{}};for(var Ye in this.yy)Object.prototype.hasOwnProperty.call(this.yy,Ye)&&($t.yy[Ye]=this.yy[Ye]);W.setInput($e,$t.yy),$t.yy.lexer=W,$t.yy.parser=this,typeof W.yylloc>"u"&&(W.yylloc={});var Fe=W.yylloc;_r.push(Fe);var Tr=W.options&&W.options.ranges;function da(){var Oa;return"number"!=typeof(Oa=kr.pop()||W.lex()||1)&&(Oa instanceof Array&&(Oa=(kr=Oa).pop()),Oa=He.symbols_[Oa]||Oa),Oa}this.parseError="function"==typeof $t.yy.parseError?$t.yy.parseError:Object.getPrototypeOf(this).parseError,(0,w.K2)(function pr(Oa){wr.length=wr.length-2*Oa,Kr.length=Kr.length-Oa,_r.length=_r.length-Oa},"popStack"),(0,w.K2)(da,"lex");for(var Pa,Ma,Wa,Ia,sa,ea,Va,Ua,Sa={};;){if(this.defaultActions[Wa=wr[wr.length-1]]?Ia=this.defaultActions[Wa]:((null===Pa||typeof Pa>"u")&&(Pa=da()),Ia=Jr[Wa]&&Jr[Wa][Pa]),typeof Ia>"u"||!Ia.length||!Ia[0]){var ir;for(ea in Ua=[],Jr[Wa])this.terminals_[ea]&&ea>2&&Ua.push("'"+this.terminals_[ea]+"'");ir=W.showPosition?"Parse error on line "+(ha+1)+":\n"+W.showPosition()+"\nExpecting "+Ua.join(", ")+", got '"+(this.terminals_[Pa]||Pa)+"'":"Parse error on line "+(ha+1)+": Unexpected "+(1==Pa?"end of input":"'"+(this.terminals_[Pa]||Pa)+"'"),this.parseError(ir,{text:W.match,token:this.terminals_[Pa]||Pa,line:W.yylineno,loc:Fe,expected:Ua})}if(Ia[0]instanceof Array&&Ia.length>1)throw new Error("Parse Error: multiple actions possible at state: "+Wa+", token: "+Pa);switch(Ia[0]){case 1:wr.push(Pa),Kr.push(W.yytext),_r.push(W.yylloc),wr.push(Ia[1]),Pa=null,Ma?(Pa=Ma,Ma=null):(ia=W.yyleng,Lr=W.yytext,ha=W.yylineno,Fe=W.yylloc,jr>0&&jr--);break;case 2:if(Sa.$=Kr[Kr.length-(Va=this.productions_[Ia[1]][1])],Sa._$={first_line:_r[_r.length-(Va||1)].first_line,last_line:_r[_r.length-1].last_line,first_column:_r[_r.length-(Va||1)].first_column,last_column:_r[_r.length-1].last_column},Tr&&(Sa._$.range=[_r[_r.length-(Va||1)].range[0],_r[_r.length-1].range[1]]),typeof(sa=this.performAction.apply(Sa,[Lr,ia,ha,$t.yy,Ia[1],Kr,_r].concat(ur)))<"u")return sa;Va&&(wr=wr.slice(0,-1*Va*2),Kr=Kr.slice(0,-1*Va),_r=_r.slice(0,-1*Va)),wr.push(this.productions_[Ia[1]][0]),Kr.push(Sa.$),_r.push(Sa._$),wr.push(Jr[wr[wr.length-2]][wr[wr.length-1]]);break;case 3:return!0}}return!0},"parse")};function lr(){this.yy={}}return Ke.lexer=function(){return{EOF:1,parseError:(0,w.K2)(function(He,wr){if(!this.yy.parser)throw new Error(He);this.yy.parser.parseError(He,wr)},"parseError"),setInput:(0,w.K2)(function($e,He){return this.yy=He||this.yy||{},this._input=$e,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},"setInput"),input:(0,w.K2)(function(){var $e=this._input[0];return this.yytext+=$e,this.yyleng++,this.offset++,this.match+=$e,this.matched+=$e,$e.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),$e},"input"),unput:(0,w.K2)(function($e){var He=$e.length,wr=$e.split(/(?:\r\n?|\n)/g);this._input=$e+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-He),this.offset-=He;var kr=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),wr.length-1&&(this.yylineno-=wr.length-1);var Kr=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:wr?(wr.length===kr.length?this.yylloc.first_column:0)+kr[kr.length-wr.length].length-wr[0].length:this.yylloc.first_column-He},this.options.ranges&&(this.yylloc.range=[Kr[0],Kr[0]+this.yyleng-He]),this.yyleng=this.yytext.length,this},"unput"),more:(0,w.K2)(function(){return this._more=!0,this},"more"),reject:(0,w.K2)(function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},"reject"),less:(0,w.K2)(function($e){this.unput(this.match.slice($e))},"less"),pastInput:(0,w.K2)(function(){var $e=this.matched.substr(0,this.matched.length-this.match.length);return($e.length>20?"...":"")+$e.substr(-20).replace(/\n/g,"")},"pastInput"),upcomingInput:(0,w.K2)(function(){var $e=this.match;return $e.length<20&&($e+=this._input.substr(0,20-$e.length)),($e.substr(0,20)+($e.length>20?"...":"")).replace(/\n/g,"")},"upcomingInput"),showPosition:(0,w.K2)(function(){var $e=this.pastInput(),He=new Array($e.length+1).join("-");return $e+this.upcomingInput()+"\n"+He+"^"},"showPosition"),test_match:(0,w.K2)(function($e,He){var wr,kr,Kr;if(this.options.backtrack_lexer&&(Kr={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(Kr.yylloc.range=this.yylloc.range.slice(0))),(kr=$e[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=kr.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:kr?kr[kr.length-1].length-kr[kr.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+$e[0].length},this.yytext+=$e[0],this.match+=$e[0],this.matches=$e,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice($e[0].length),this.matched+=$e[0],wr=this.performAction.call(this,this.yy,this,He,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),wr)return wr;if(this._backtrack){for(var _r in Kr)this[_r]=Kr[_r];return!1}return!1},"test_match"),next:(0,w.K2)(function(){if(this.done)return this.EOF;var $e,He,wr,kr;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var Kr=this._currentRules(),_r=0;_r<Kr.length;_r++)if((wr=this._input.match(this.rules[Kr[_r]]))&&(!He||wr[0].length>He[0].length)){if(He=wr,kr=_r,this.options.backtrack_lexer){if(!1!==($e=this.test_match(wr,Kr[_r])))return $e;if(this._backtrack){He=!1;continue}return!1}if(!this.options.flex)break}return He?!1!==($e=this.test_match(He,Kr[kr]))&&$e:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},"next"),lex:(0,w.K2)(function(){return this.next()||this.lex()},"lex"),begin:(0,w.K2)(function(He){this.conditionStack.push(He)},"begin"),popState:(0,w.K2)(function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},"popState"),_currentRules:(0,w.K2)(function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},"_currentRules"),topState:(0,w.K2)(function(He){return(He=this.conditionStack.length-1-Math.abs(He||0))>=0?this.conditionStack[He]:"INITIAL"},"topState"),pushState:(0,w.K2)(function(He){this.begin(He)},"pushState"),stateStackSize:(0,w.K2)(function(){return this.conditionStack.length},"stateStackSize"),options:{"case-insensitive":!0},performAction:(0,w.K2)(function(He,wr,kr,Kr){switch(kr){case 0:return 38;case 1:return 40;case 2:return 39;case 3:return 44;case 4:case 45:return 51;case 5:case 46:return 52;case 6:case 47:return 53;case 7:case 48:return 54;case 8:case 9:case 11:case 12:case 13:case 14:case 57:case 59:case 65:break;case 10:case 80:return 5;case 15:case 35:return this.pushState("SCALE"),17;case 16:case 36:return 18;case 17:case 23:case 37:case 52:case 55:this.popState();break;case 18:return this.begin("acc_title"),33;case 19:return this.popState(),"acc_title_value";case 20:return this.begin("acc_descr"),35;case 21:return this.popState(),"acc_descr_value";case 22:this.begin("acc_descr_multiline");break;case 24:return"acc_descr_multiline_value";case 25:return this.pushState("CLASSDEF"),41;case 26:return this.popState(),this.pushState("CLASSDEFID"),"DEFAULT_CLASSDEF_ID";case 27:return this.popState(),this.pushState("CLASSDEFID"),42;case 28:return this.popState(),43;case 29:return this.pushState("CLASS"),48;case 30:return this.popState(),this.pushState("CLASS_STYLE"),49;case 31:return this.popState(),50;case 32:return this.pushState("STYLE"),45;case 33:return this.popState(),this.pushState("STYLEDEF_STYLES"),46;case 34:return this.popState(),47;case 38:this.pushState("STATE");break;case 39:case 42:return this.popState(),wr.yytext=wr.yytext.slice(0,-8).trim(),25;case 40:case 43:return this.popState(),wr.yytext=wr.yytext.slice(0,-8).trim(),26;case 41:case 44:return this.popState(),wr.yytext=wr.yytext.slice(0,-10).trim(),27;case 49:this.pushState("STATE_STRING");break;case 50:return this.pushState("STATE_ID"),"AS";case 51:case 67:return this.popState(),"ID";case 53:return"STATE_DESCR";case 54:return 19;case 56:return this.popState(),this.pushState("struct"),20;case 58:return this.popState(),21;case 60:return this.begin("NOTE"),29;case 61:return this.popState(),this.pushState("NOTE_ID"),59;case 62:return this.popState(),this.pushState("NOTE_ID"),60;case 63:this.popState(),this.pushState("FLOATING_NOTE");break;case 64:return this.popState(),this.pushState("FLOATING_NOTE_ID"),"AS";case 66:return"NOTE_TEXT";case 68:return this.popState(),this.pushState("NOTE_TEXT"),24;case 69:return this.popState(),wr.yytext=wr.yytext.substr(2).trim(),31;case 70:return this.popState(),wr.yytext=wr.yytext.slice(0,-8).trim(),31;case 71:case 72:return 6;case 73:return 16;case 74:return 57;case 75:return 24;case 76:return wr.yytext=wr.yytext.trim(),14;case 77:return 15;case 78:return 28;case 79:return 58;case 81:return"INVALID"}},"anonymous"),rules:[/^(?:click\b)/i,/^(?:href\b)/i,/^(?:"[^"]*")/i,/^(?:default\b)/i,/^(?:.*direction\s+TB[^\n]*)/i,/^(?:.*direction\s+BT[^\n]*)/i,/^(?:.*direction\s+RL[^\n]*)/i,/^(?:.*direction\s+LR[^\n]*)/i,/^(?:%%(?!\{)[^\n]*)/i,/^(?:[^\}]%%[^\n]*)/i,/^(?:[\n]+)/i,/^(?:[\s]+)/i,/^(?:((?!\n)\s)+)/i,/^(?:#[^\n]*)/i,/^(?:%[^\n]*)/i,/^(?:scale\s+)/i,/^(?:\d+)/i,/^(?:\s+width\b)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:classDef\s+)/i,/^(?:DEFAULT\s+)/i,/^(?:\w+\s+)/i,/^(?:[^\n]*)/i,/^(?:class\s+)/i,/^(?:(\w+)+((,\s*\w+)*))/i,/^(?:[^\n]*)/i,/^(?:style\s+)/i,/^(?:[\w,]+\s+)/i,/^(?:[^\n]*)/i,/^(?:scale\s+)/i,/^(?:\d+)/i,/^(?:\s+width\b)/i,/^(?:state\s+)/i,/^(?:.*<<fork>>)/i,/^(?:.*<<join>>)/i,/^(?:.*<<choice>>)/i,/^(?:.*\[\[fork\]\])/i,/^(?:.*\[\[join\]\])/i,/^(?:.*\[\[choice\]\])/i,/^(?:.*direction\s+TB[^\n]*)/i,/^(?:.*direction\s+BT[^\n]*)/i,/^(?:.*direction\s+RL[^\n]*)/i,/^(?:.*direction\s+LR[^\n]*)/i,/^(?:["])/i,/^(?:\s*as\s+)/i,/^(?:[^\n\{]*)/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:[^\n\s\{]+)/i,/^(?:\n)/i,/^(?:\{)/i,/^(?:%%(?!\{)[^\n]*)/i,/^(?:\})/i,/^(?:[\n])/i,/^(?:note\s+)/i,/^(?:left of\b)/i,/^(?:right of\b)/i,/^(?:")/i,/^(?:\s*as\s*)/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:[^\n]*)/i,/^(?:\s*[^:\n\s\-]+)/i,/^(?:\s*:[^:\n;]+)/i,/^(?:[\s\S]*?end note\b)/i,/^(?:stateDiagram\s+)/i,/^(?:stateDiagram-v2\s+)/i,/^(?:hide empty description\b)/i,/^(?:\[\*\])/i,/^(?:[^:\n\s\-\{]+)/i,/^(?:\s*:[^:\n;]+)/i,/^(?:-->)/i,/^(?:--)/i,/^(?::::)/i,/^(?:$)/i,/^(?:.)/i],conditions:{LINE:{rules:[12,13],inclusive:!1},struct:{rules:[12,13,25,29,32,38,45,46,47,48,57,58,59,60,74,75,76,77,78],inclusive:!1},FLOATING_NOTE_ID:{rules:[67],inclusive:!1},FLOATING_NOTE:{rules:[64,65,66],inclusive:!1},NOTE_TEXT:{rules:[69,70],inclusive:!1},NOTE_ID:{rules:[68],inclusive:!1},NOTE:{rules:[61,62,63],inclusive:!1},STYLEDEF_STYLEOPTS:{rules:[],inclusive:!1},STYLEDEF_STYLES:{rules:[34],inclusive:!1},STYLE_IDS:{rules:[],inclusive:!1},STYLE:{rules:[33],inclusive:!1},CLASS_STYLE:{rules:[31],inclusive:!1},CLASS:{rules:[30],inclusive:!1},CLASSDEFID:{rules:[28],inclusive:!1},CLASSDEF:{rules:[26,27],inclusive:!1},acc_descr_multiline:{rules:[23,24],inclusive:!1},acc_descr:{rules:[21],inclusive:!1},acc_title:{rules:[19],inclusive:!1},SCALE:{rules:[16,17,36,37],inclusive:!1},ALIAS:{rules:[],inclusive:!1},STATE_ID:{rules:[51],inclusive:!1},STATE_STRING:{rules:[52,53],inclusive:!1},FORK_STATE:{rules:[],inclusive:!1},STATE:{rules:[12,13,39,40,41,42,43,44,49,50,54,55,56],inclusive:!1},ID:{rules:[12,13],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,13,14,15,18,20,22,25,29,32,35,38,56,60,71,72,73,74,75,76,77,79,80,81],inclusive:!0}}}}(),(0,w.K2)(lr,"Parser"),lr.prototype=Ke,Ke.Parser=lr,new lr}();Lt.parser=Lt;var At=Lt,j="state",hr="root",ze="relation",Gr="default",aa="divider",zr="fill:none",Or="fill: #333",z="rect",dt="rectWithTitle",X="divider",re="roundedWithTitle",Rt="statediagram",V=`${Rt}-state`,gt="transition",St=`${gt} note-edge`,Ut=`${Rt}-note`,le=`${Rt}-cluster`,oe=`${Rt}-cluster-alt`,Tt="----",B=`${Tt}note`,N=`${Tt}parent`,et=(0,w.K2)((ve,ce="TB")=>{if(!ve.doc)return ce;let Ee=ce;for(const Ae of ve.doc)"dir"===Ae.stmt&&(Ee=Ae.value);return Ee},"getDir"),rt={getClasses:(0,w.K2)(function(ve,ce){return ce.db.getClasses()},"getClasses"),draw:(0,w.K2)(function(){var ve=(0,ie.A)(function*(ce,Ee,Ae,er){w.Rm.info("REF0:"),w.Rm.info("Drawing state diagram (v2)",Ee);const{securityLevel:Qe,state:Dr,layout:_e}=(0,G.D7)();er.db.extract(er.db.getRootDocV2());const Yr=er.db.getData(),nr=(0,L.A)(Ee,Qe);Yr.type=er.type,Yr.layoutAlgorithm=_e,Yr.nodeSpacing=Dr?.nodeSpacing||50,Yr.rankSpacing=Dr?.rankSpacing||50,Yr.markers=["barb"],Yr.diagramId=Ee,yield(0,Mt.XX)(Yr,nr);try{("function"==typeof er.db.getLinks?er.db.getLinks():new Map).forEach((be,ar)=>{const g="string"==typeof ar?ar:"string"==typeof ar?.id?ar.id:"";if(!g)return void w.Rm.warn("\u26a0\ufe0f Invalid or missing stateId from key:",JSON.stringify(ar));const y=nr.node()?.querySelectorAll("g");let E;if(y?.forEach(v=>{v.textContent?.trim()===g&&(E=v)}),!E)return void w.Rm.warn("\u26a0\ufe0f Could not find node matching text:",g);const M=E.parentNode;if(!M)return void w.Rm.warn("\u26a0\ufe0f Node has no parent, cannot wrap:",g);const m=document.createElementNS("http://www.w3.org/2000/svg","a"),A=be.url.replace(/^"+|"+$/g,"");if(m.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",A),m.setAttribute("target","_blank"),be.tooltip){const v=be.tooltip.replace(/^"+|"+$/g,"");m.setAttribute("title",v)}M.replaceChild(m,E),m.appendChild(E),w.Rm.info("\u{1f517} Wrapped node in <a> tag for:",g,be.url)})}catch(ne){w.Rm.error("\u274c Error injecting clickable links:",ne)}ut._K.insertTitle(nr,"statediagramTitleText",Dr?.titleTopMargin??25,er.db.getDiagramTitle()),(0,D.P)(nr,8,Rt,Dr?.useMaxWidth??!0)});return function(ce,Ee,Ae,er){return ve.apply(this,arguments)}}(),"draw"),getDir:et},_t=new Map,ht=0;function Ot(ve="",ce=0,Ee="",Ae=Tt){return`state-${ve}${null!==Ee&&Ee.length>0?`${Ae}${Ee}`:""}-${ce}`}(0,w.K2)(Ot,"stateDomId");var H=(0,w.K2)((ve,ce,Ee,Ae,er,Qe,Dr,_e)=>{w.Rm.trace("items",ce),ce.forEach(Yr=>{switch(Yr.stmt){case j:case Gr:pe(ve,Yr,Ee,Ae,er,Qe,Dr,_e);break;case ze:{pe(ve,Yr.state1,Ee,Ae,er,Qe,Dr,_e),pe(ve,Yr.state2,Ee,Ae,er,Qe,Dr,_e);const nr={id:"edge"+ht,start:Yr.state1.id,end:Yr.state2.id,arrowhead:"normal",arrowTypeEnd:"arrow_barb",style:zr,labelStyle:"",label:G.Y2.sanitizeText(Yr.description??"",(0,G.D7)()),arrowheadStyle:Or,labelpos:"c",labelType:"text",thickness:"normal",classes:gt,look:Dr};er.push(nr),ht++}}})},"setupDoc"),ot=(0,w.K2)((ve,ce="TB")=>{let Ee=ce;if(ve.doc)for(const Ae of ve.doc)"dir"===Ae.stmt&&(Ee=Ae.value);return Ee},"getDir");function ke(ve,ce,Ee){if(!ce.id||"</join></fork>"===ce.id||"</choice>"===ce.id)return;ce.cssClasses&&(Array.isArray(ce.cssCompiledStyles)||(ce.cssCompiledStyles=[]),ce.cssClasses.split(" ").forEach(er=>{const Qe=Ee.get(er);Qe&&(ce.cssCompiledStyles=[...ce.cssCompiledStyles??[],...Qe.styles])}));const Ae=ve.find(er=>er.id===ce.id);Ae?Object.assign(Ae,ce):ve.push(ce)}function Pt(ve){return ve?.classes?.join(" ")??""}function Zt(ve){return ve?.styles??[]}(0,w.K2)(ke,"insertOrUpdateNode"),(0,w.K2)(Pt,"getClassesFromDbInfo"),(0,w.K2)(Zt,"getStylesFromDbInfo");var pe=(0,w.K2)((ve,ce,Ee,Ae,er,Qe,Dr,_e)=>{const Yr=ce.id,nr=Ee.get(Yr),te=Pt(nr),ne=Zt(nr),be=(0,G.D7)();if(w.Rm.info("dataFetcher parsedItem",ce,nr,ne),"root"!==Yr){let ar=z;!0===ce.start?ar="stateStart":!1===ce.start&&(ar="stateEnd"),ce.type!==Gr&&(ar=ce.type),_t.get(Yr)||_t.set(Yr,{id:Yr,shape:ar,description:G.Y2.sanitizeText(Yr,be),cssClasses:`${te} ${V}`,cssStyles:ne});const g=_t.get(Yr);ce.description&&(Array.isArray(g.description)?(g.shape=dt,g.description.push(ce.description)):g.description?.length&&g.description.length>0?(g.shape=dt,g.description=g.description===Yr?[ce.description]:[g.description,ce.description]):(g.shape=z,g.description=ce.description),g.description=G.Y2.sanitizeTextOrArray(g.description,be)),1===g.description?.length&&g.shape===dt&&(g.shape="group"===g.type?re:z),!g.type&&ce.doc&&(w.Rm.info("Setting cluster for XCX",Yr,ot(ce)),g.type="group",g.isGroup=!0,g.dir=ot(ce),g.shape=ce.type===aa?X:re,g.cssClasses=`${g.cssClasses} ${le} ${Qe?oe:""}`);const y={labelStyle:"",shape:g.shape,label:g.description,cssClasses:g.cssClasses,cssCompiledStyles:[],cssStyles:g.cssStyles,id:Yr,dir:g.dir,domId:Ot(Yr,ht),type:g.type,isGroup:"group"===g.type,padding:8,rx:10,ry:10,look:Dr};if(y.shape===X&&(y.label=""),ve&&"root"!==ve.id&&(w.Rm.trace("Setting node ",Yr," to be child of its parent ",ve.id),y.parentId=ve.id),y.centerLabel=!0,ce.note){const E={labelStyle:"",shape:"note",label:ce.note.text,cssClasses:Ut,cssStyles:[],cssCompiledStyles:[],id:Yr+B+"-"+ht,domId:Ot(Yr,ht,"note"),type:g.type,isGroup:"group"===g.type,padding:be.flowchart?.padding,look:Dr,position:ce.note.position},M=Yr+N,m={labelStyle:"",shape:"noteGroup",label:ce.note.text,cssClasses:g.cssClasses,cssStyles:[],id:Yr+N,domId:Ot(Yr,ht,"parent"),type:"group",isGroup:!0,padding:16,look:Dr,position:ce.note.position};ht++,m.id=M,E.parentId=M,ke(Ae,m,_e),ke(Ae,E,_e),ke(Ae,y,_e);let A=Yr,v=E.id;"left of"===ce.note.position&&(A=E.id,v=Yr),er.push({id:A+"-"+v,start:A,end:v,arrowhead:"none",arrowTypeEnd:"",style:zr,labelStyle:"",classes:St,arrowheadStyle:Or,labelpos:"c",labelType:"text",thickness:"normal",look:Dr})}else ke(Ae,y,_e)}ce.doc&&(w.Rm.trace("Adding nodes children "),H(ce,ce.doc,Ee,Ae,er,!Qe,Dr,_e))},"dataFetcher"),Re=(0,w.K2)(()=>{_t.clear(),ht=0},"reset"),de=(0,w.K2)(()=>new Map,"newClassesList"),yr=(0,w.K2)(()=>({relations:[],states:new Map,documents:{}}),"newDoc"),mr=(0,w.K2)(ve=>JSON.parse(JSON.stringify(ve)),"clone"),Wt=(()=>{var ve;return class{constructor(Ee){this.version=Ee,this.nodes=[],this.edges=[],this.rootDoc=[],this.classes=de(),this.documents={root:yr()},this.currentDocument=this.documents.root,this.startEndCount=0,this.dividerCnt=0,this.links=new Map,this.getAccTitle=G.iN,this.setAccTitle=G.SV,this.getAccDescription=G.m7,this.setAccDescription=G.EI,this.setDiagramTitle=G.ke,this.getDiagramTitle=G.ab,this.clear(),this.setRootDoc=this.setRootDoc.bind(this),this.getDividerId=this.getDividerId.bind(this),this.setDirection=this.setDirection.bind(this),this.trimColon=this.trimColon.bind(this)}extract(Ee){this.clear(!0);for(const Qe of Array.isArray(Ee)?Ee:Ee.doc)switch(Qe.stmt){case j:this.addState(Qe.id.trim(),Qe.type,Qe.doc,Qe.description,Qe.note);break;case ze:this.addRelation(Qe.state1,Qe.state2,Qe.description);break;case"classDef":this.addStyleClass(Qe.id.trim(),Qe.classes);break;case"style":this.handleStyleDef(Qe);break;case"applyClass":this.setCssClass(Qe.id.trim(),Qe.styleClass);break;case"click":this.addLink(Qe.id,Qe.url,Qe.tooltip)}const Ae=this.getStates(),er=(0,G.D7)();Re(),pe(void 0,this.getRootDocV2(),Ae,this.nodes,this.edges,!0,er.look,this.classes);for(const Qe of this.nodes)if(Array.isArray(Qe.label)){if(Qe.description=Qe.label.slice(1),Qe.isGroup&&Qe.description.length>0)throw new Error(`Group nodes can only have label. Remove the additional description for node [${Qe.id}]`);Qe.label=Qe.label[0]}}handleStyleDef(Ee){const Ae=Ee.id.trim().split(","),er=Ee.styleClass.split(",");for(const Qe of Ae){let Dr=this.getState(Qe);if(!Dr){const _e=Qe.trim();this.addState(_e),Dr=this.getState(_e)}Dr&&(Dr.styles=er.map(_e=>_e.replace(/;/g,"")?.trim()))}}setRootDoc(Ee){w.Rm.info("Setting root doc",Ee),this.rootDoc=Ee,this.extract(1===this.version?Ee:this.getRootDocV2())}docTranslator(Ee,Ae,er){if(Ae.stmt===ze)return this.docTranslator(Ee,Ae.state1,!0),void this.docTranslator(Ee,Ae.state2,!1);if(Ae.stmt===j&&("[*]"===Ae.id?(Ae.id=Ee.id+(er?"_start":"_end"),Ae.start=er):Ae.id=Ae.id.trim()),Ae.stmt!==hr&&Ae.stmt!==j||!Ae.doc)return;const Qe=[];let Dr=[];for(const _e of Ae.doc)if(_e.type===aa){const Yr=mr(_e);Yr.doc=mr(Dr),Qe.push(Yr),Dr=[]}else Dr.push(_e);if(Qe.length>0&&Dr.length>0){const _e={stmt:j,id:(0,ut.$C)(),type:"divider",doc:mr(Dr)};Qe.push(mr(_e)),Ae.doc=Qe}Ae.doc.forEach(_e=>this.docTranslator(Ae,_e,!0))}getRootDocV2(){return this.docTranslator({id:hr,stmt:hr},{id:hr,stmt:hr,doc:this.rootDoc},!0),{id:hr,doc:this.rootDoc}}addState(Ee,Ae=Gr,er=void 0,Qe=void 0,Dr=void 0,_e=void 0,Yr=void 0,nr=void 0){const te=Ee?.trim();if(this.currentDocument.states.has(te)){const ne=this.currentDocument.states.get(te);if(!ne)throw new Error(`State not found: ${te}`);ne.doc||(ne.doc=er),ne.type||(ne.type=Ae)}else w.Rm.info("Adding state ",te,Qe),this.currentDocument.states.set(te,{stmt:j,id:te,descriptions:[],type:Ae,doc:er,note:Dr,classes:[],styles:[],textStyles:[]});if(Qe&&(w.Rm.info("Setting state description",te,Qe),(Array.isArray(Qe)?Qe:[Qe]).forEach(be=>this.addDescription(te,be.trim()))),Dr){const ne=this.currentDocument.states.get(te);if(!ne)throw new Error(`State not found: ${te}`);ne.note=Dr,ne.note.text=G.Y2.sanitizeText(ne.note.text,(0,G.D7)())}_e&&(w.Rm.info("Setting state classes",te,_e),(Array.isArray(_e)?_e:[_e]).forEach(be=>this.setCssClass(te,be.trim()))),Yr&&(w.Rm.info("Setting state styles",te,Yr),(Array.isArray(Yr)?Yr:[Yr]).forEach(be=>this.setStyle(te,be.trim()))),nr&&(w.Rm.info("Setting state styles",te,Yr),(Array.isArray(nr)?nr:[nr]).forEach(be=>this.setTextStyle(te,be.trim())))}clear(Ee){this.nodes=[],this.edges=[],this.documents={root:yr()},this.currentDocument=this.documents.root,this.startEndCount=0,this.classes=de(),Ee||(this.links=new Map,(0,G.IU)())}getState(Ee){return this.currentDocument.states.get(Ee)}getStates(){return this.currentDocument.states}logDocuments(){w.Rm.info("Documents = ",this.documents)}getRelations(){return this.currentDocument.relations}addLink(Ee,Ae,er){this.links.set(Ee,{url:Ae,tooltip:er}),w.Rm.warn("Adding link",Ee,Ae,er)}getLinks(){return this.links}startIdIfNeeded(Ee=""){return"[*]"===Ee?(this.startEndCount++,`start${this.startEndCount}`):Ee}startTypeIfNeeded(Ee="",Ae=Gr){return"[*]"===Ee?"start":Ae}endIdIfNeeded(Ee=""){return"[*]"===Ee?(this.startEndCount++,`end${this.startEndCount}`):Ee}endTypeIfNeeded(Ee="",Ae=Gr){return"[*]"===Ee?"end":Ae}addRelationObjs(Ee,Ae,er=""){const Qe=this.startIdIfNeeded(Ee.id.trim()),Dr=this.startTypeIfNeeded(Ee.id.trim(),Ee.type),_e=this.startIdIfNeeded(Ae.id.trim()),Yr=this.startTypeIfNeeded(Ae.id.trim(),Ae.type);this.addState(Qe,Dr,Ee.doc,Ee.description,Ee.note,Ee.classes,Ee.styles,Ee.textStyles),this.addState(_e,Yr,Ae.doc,Ae.description,Ae.note,Ae.classes,Ae.styles,Ae.textStyles),this.currentDocument.relations.push({id1:Qe,id2:_e,relationTitle:G.Y2.sanitizeText(er,(0,G.D7)())})}addRelation(Ee,Ae,er){if("object"==typeof Ee&&"object"==typeof Ae)this.addRelationObjs(Ee,Ae,er);else if("string"==typeof Ee&&"string"==typeof Ae){const Qe=this.startIdIfNeeded(Ee.trim()),Dr=this.startTypeIfNeeded(Ee),_e=this.endIdIfNeeded(Ae.trim()),Yr=this.endTypeIfNeeded(Ae);this.addState(Qe,Dr),this.addState(_e,Yr),this.currentDocument.relations.push({id1:Qe,id2:_e,relationTitle:er?G.Y2.sanitizeText(er,(0,G.D7)()):void 0})}}addDescription(Ee,Ae){const er=this.currentDocument.states.get(Ee),Qe=Ae.startsWith(":")?Ae.replace(":","").trim():Ae;er?.descriptions?.push(G.Y2.sanitizeText(Qe,(0,G.D7)()))}cleanupLabel(Ee){return Ee.startsWith(":")?Ee.slice(2).trim():Ee.trim()}getDividerId(){return this.dividerCnt++,`divider-id-${this.dividerCnt}`}addStyleClass(Ee,Ae=""){this.classes.has(Ee)||this.classes.set(Ee,{id:Ee,styles:[],textStyles:[]});const er=this.classes.get(Ee);Ae&&er&&Ae.split(",").forEach(Qe=>{const Dr=Qe.replace(/([^;]*);/,"$1").trim();if(RegExp("color").exec(Qe)){const Yr=Dr.replace("fill","bgFill").replace("color","fill");er.textStyles.push(Yr)}er.styles.push(Dr)})}getClasses(){return this.classes}setCssClass(Ee,Ae){Ee.split(",").forEach(er=>{let Qe=this.getState(er);if(!Qe){const Dr=er.trim();this.addState(Dr),Qe=this.getState(Dr)}Qe?.classes?.push(Ae)})}setStyle(Ee,Ae){this.getState(Ee)?.styles?.push(Ae)}setTextStyle(Ee,Ae){this.getState(Ee)?.textStyles?.push(Ae)}getDirectionStatement(){return this.rootDoc.find(Ee=>"dir"===Ee.stmt)}getDirection(){return this.getDirectionStatement()?.value??"TB"}setDirection(Ee){const Ae=this.getDirectionStatement();Ae?Ae.value=Ee:this.rootDoc.unshift({stmt:"dir",value:Ee})}trimColon(Ee){return Ee.startsWith(":")?Ee.slice(1).trim():Ee.trim()}getData(){const Ee=(0,G.D7)();return{nodes:this.nodes,edges:this.edges,other:{},config:Ee,direction:et(this.getRootDocV2())}}getConfig(){return(0,G.D7)().state}static#t=ve=()=>((0,lt.A)(this,"StateDB"),(0,w.K2)(this,"StateDB"),this.relationType={AGGREGATION:0,EXTENSION:1,COMPOSITION:2,DEPENDENCY:3},this)},ve()})(),sr=(0,w.K2)(ve=>`\ndefs #statediagram-barbEnd {\n    fill: ${ve.transitionColor};\n    stroke: ${ve.transitionColor};\n  }\ng.stateGroup text {\n  fill: ${ve.nodeBorder};\n  stroke: none;\n  font-size: 10px;\n}\ng.stateGroup text {\n  fill: ${ve.textColor};\n  stroke: none;\n  font-size: 10px;\n\n}\ng.stateGroup .state-title {\n  font-weight: bolder;\n  fill: ${ve.stateLabelColor};\n}\n\ng.stateGroup rect {\n  fill: ${ve.mainBkg};\n  stroke: ${ve.nodeBorder};\n}\n\ng.stateGroup line {\n  stroke: ${ve.lineColor};\n  stroke-width: 1;\n}\n\n.transition {\n  stroke: ${ve.transitionColor};\n  stroke-width: 1;\n  fill: none;\n}\n\n.stateGroup .composit {\n  fill: ${ve.background};\n  border-bottom: 1px\n}\n\n.stateGroup .alt-composit {\n  fill: #e0e0e0;\n  border-bottom: 1px\n}\n\n.state-note {\n  stroke: ${ve.noteBorderColor};\n  fill: ${ve.noteBkgColor};\n\n  text {\n    fill: ${ve.noteTextColor};\n    stroke: none;\n    font-size: 10px;\n  }\n}\n\n.stateLabel .box {\n  stroke: none;\n  stroke-width: 0;\n  fill: ${ve.mainBkg};\n  opacity: 0.5;\n}\n\n.edgeLabel .label rect {\n  fill: ${ve.labelBackgroundColor};\n  opacity: 0.5;\n}\n.edgeLabel {\n  background-color: ${ve.edgeLabelBackground};\n  p {\n    background-color: ${ve.edgeLabelBackground};\n  }\n  rect {\n    opacity: 0.5;\n    background-color: ${ve.edgeLabelBackground};\n    fill: ${ve.edgeLabelBackground};\n  }\n  text-align: center;\n}\n.edgeLabel .label text {\n  fill: ${ve.transitionLabelColor||ve.tertiaryTextColor};\n}\n.label div .edgeLabel {\n  color: ${ve.transitionLabelColor||ve.tertiaryTextColor};\n}\n\n.stateLabel text {\n  fill: ${ve.stateLabelColor};\n  font-size: 10px;\n  font-weight: bold;\n}\n\n.node circle.state-start {\n  fill: ${ve.specialStateColor};\n  stroke: ${ve.specialStateColor};\n}\n\n.node .fork-join {\n  fill: ${ve.specialStateColor};\n  stroke: ${ve.specialStateColor};\n}\n\n.node circle.state-end {\n  fill: ${ve.innerEndBackground};\n  stroke: ${ve.background};\n  stroke-width: 1.5\n}\n.end-state-inner {\n  fill: ${ve.compositeBackground||ve.background};\n  // stroke: ${ve.background};\n  stroke-width: 1.5\n}\n\n.node rect {\n  fill: ${ve.stateBkg||ve.mainBkg};\n  stroke: ${ve.stateBorder||ve.nodeBorder};\n  stroke-width: 1px;\n}\n.node polygon {\n  fill: ${ve.mainBkg};\n  stroke: ${ve.stateBorder||ve.nodeBorder};;\n  stroke-width: 1px;\n}\n#statediagram-barbEnd {\n  fill: ${ve.lineColor};\n}\n\n.statediagram-cluster rect {\n  fill: ${ve.compositeTitleBackground};\n  stroke: ${ve.stateBorder||ve.nodeBorder};\n  stroke-width: 1px;\n}\n\n.cluster-label, .nodeLabel {\n  color: ${ve.stateLabelColor};\n  // line-height: 1;\n}\n\n.statediagram-cluster rect.outer {\n  rx: 5px;\n  ry: 5px;\n}\n.statediagram-state .divider {\n  stroke: ${ve.stateBorder||ve.nodeBorder};\n}\n\n.statediagram-state .title-state {\n  rx: 5px;\n  ry: 5px;\n}\n.statediagram-cluster.statediagram-cluster .inner {\n  fill: ${ve.compositeBackground||ve.background};\n}\n.statediagram-cluster.statediagram-cluster-alt .inner {\n  fill: ${ve.altBackground?ve.altBackground:"#efefef"};\n}\n\n.statediagram-cluster .inner {\n  rx:0;\n  ry:0;\n}\n\n.statediagram-state rect.basic {\n  rx: 5px;\n  ry: 5px;\n}\n.statediagram-state rect.divider {\n  stroke-dasharray: 10,10;\n  fill: ${ve.altBackground?ve.altBackground:"#efefef"};\n}\n\n.note-edge {\n  stroke-dasharray: 5;\n}\n\n.statediagram-note rect {\n  fill: ${ve.noteBkgColor};\n  stroke: ${ve.noteBorderColor};\n  stroke-width: 1px;\n  rx: 0;\n  ry: 0;\n}\n.statediagram-note rect {\n  fill: ${ve.noteBkgColor};\n  stroke: ${ve.noteBorderColor};\n  stroke-width: 1px;\n  rx: 0;\n  ry: 0;\n}\n\n.statediagram-note text {\n  fill: ${ve.noteTextColor};\n}\n\n.statediagram-note .nodeLabel {\n  color: ${ve.noteTextColor};\n}\n.statediagram .edgeLabel {\n  color: red; // ${ve.noteTextColor};\n}\n\n#dependencyStart, #dependencyEnd {\n  fill: ${ve.lineColor};\n  stroke: ${ve.lineColor};\n  stroke-width: 1;\n}\n\n.statediagramTitleText {\n  text-anchor: middle;\n  font-size: 18px;\n  fill: ${ve.textColor};\n}\n`,"getStyles")},54256:(ri,Er,P)=>{"use strict";P.d(Er,{Lh:()=>Xe,NM:()=>Gr,_$:()=>j,tM:()=>zr});var Ge,bt,lt=P(89204),ie=P(45027),L=P(97787),D=P(5675),Mt=P(8086),ut=P(72271),G=P(52052),w=P(79006),Lt=P(32303),At=P(40622),Gt=function(){var z=(0,Lt.K2)(function(g,y,E,M){for(E=E||{},M=g.length;M--;E[g[M]]=y);return E},"o"),dt=[1,18],Bt=[1,19],Se=[1,20],X=[1,41],re=[1,42],S=[1,26],ee=[1,24],Rt=[1,25],qt=[1,32],V=[1,33],gt=[1,34],Y=[1,45],Nt=[1,35],St=[1,36],Ut=[1,37],ye=[1,38],le=[1,27],Pe=[1,28],oe=[1,29],qe=[1,30],We=[1,31],Et=[1,44],Tt=[1,46],B=[1,43],N=[1,47],et=[1,9],yt=[1,8,9],it=[1,58],rt=[1,59],_t=[1,60],ht=[1,61],Ot=[1,62],H=[1,63],ot=[1,64],ke=[1,8,9,41],Pt=[1,76],Zt=[1,8,9,12,13,22,39,41,44,68,69,70,71,72,73,74,79,81],pe=[1,8,9,12,13,18,20,22,39,41,44,50,60,68,69,70,71,72,73,74,79,81,86,100,102,103],Re=[13,60,86,100,102,103],Ze=[13,60,73,74,86,100,102,103],de=[13,60,68,69,70,71,72,86,100,102,103],yr=[1,100],mr=[1,117],Wt=[1,113],we=[1,109],sr=[1,115],ve=[1,110],ce=[1,111],Ee=[1,112],Ae=[1,114],er=[1,116],Qe=[22,48,60,61,82,86,87,88,89,90],Dr=[1,8,9,39,41,44],_e=[1,8,9,22],Yr=[1,145],nr=[1,8,9,61],te=[1,8,9,22,48,60,61,82,86,87,88,89,90],ne={trace:(0,Lt.K2)(function(){},"trace"),yy:{},symbols_:{error:2,start:3,mermaidDoc:4,statements:5,graphConfig:6,CLASS_DIAGRAM:7,NEWLINE:8,EOF:9,statement:10,classLabel:11,SQS:12,STR:13,SQE:14,namespaceName:15,alphaNumToken:16,classLiteralName:17,DOT:18,className:19,GENERICTYPE:20,relationStatement:21,LABEL:22,namespaceStatement:23,classStatement:24,memberStatement:25,annotationStatement:26,clickStatement:27,styleStatement:28,cssClassStatement:29,noteStatement:30,classDefStatement:31,direction:32,acc_title:33,acc_title_value:34,acc_descr:35,acc_descr_value:36,acc_descr_multiline_value:37,namespaceIdentifier:38,STRUCT_START:39,classStatements:40,STRUCT_STOP:41,NAMESPACE:42,classIdentifier:43,STYLE_SEPARATOR:44,members:45,CLASS:46,emptyBody:47,SPACE:48,ANNOTATION_START:49,ANNOTATION_END:50,MEMBER:51,SEPARATOR:52,relation:53,NOTE_FOR:54,noteText:55,NOTE:56,CLASSDEF:57,classList:58,stylesOpt:59,ALPHA:60,COMMA:61,direction_tb:62,direction_bt:63,direction_rl:64,direction_lr:65,relationType:66,lineType:67,AGGREGATION:68,EXTENSION:69,COMPOSITION:70,DEPENDENCY:71,LOLLIPOP:72,LINE:73,DOTTED_LINE:74,CALLBACK:75,LINK:76,LINK_TARGET:77,CLICK:78,CALLBACK_NAME:79,CALLBACK_ARGS:80,HREF:81,STYLE:82,CSSCLASS:83,style:84,styleComponent:85,NUM:86,COLON:87,UNIT:88,BRKT:89,PCT:90,commentToken:91,textToken:92,graphCodeTokens:93,textNoTagsToken:94,TAGSTART:95,TAGEND:96,"==":97,"--":98,DEFAULT:99,MINUS:100,keywords:101,UNICODE_TEXT:102,BQUOTE_STR:103,$accept:0,$end:1},terminals_:{2:"error",7:"CLASS_DIAGRAM",8:"NEWLINE",9:"EOF",12:"SQS",13:"STR",14:"SQE",18:"DOT",20:"GENERICTYPE",22:"LABEL",33:"acc_title",34:"acc_title_value",35:"acc_descr",36:"acc_descr_value",37:"acc_descr_multiline_value",39:"STRUCT_START",41:"STRUCT_STOP",42:"NAMESPACE",44:"STYLE_SEPARATOR",46:"CLASS",48:"SPACE",49:"ANNOTATION_START",50:"ANNOTATION_END",51:"MEMBER",52:"SEPARATOR",54:"NOTE_FOR",56:"NOTE",57:"CLASSDEF",60:"ALPHA",61:"COMMA",62:"direction_tb",63:"direction_bt",64:"direction_rl",65:"direction_lr",68:"AGGREGATION",69:"EXTENSION",70:"COMPOSITION",71:"DEPENDENCY",72:"LOLLIPOP",73:"LINE",74:"DOTTED_LINE",75:"CALLBACK",76:"LINK",77:"LINK_TARGET",78:"CLICK",79:"CALLBACK_NAME",80:"CALLBACK_ARGS",81:"HREF",82:"STYLE",83:"CSSCLASS",86:"NUM",87:"COLON",88:"UNIT",89:"BRKT",90:"PCT",93:"graphCodeTokens",95:"TAGSTART",96:"TAGEND",97:"==",98:"--",99:"DEFAULT",100:"MINUS",101:"keywords",102:"UNICODE_TEXT",103:"BQUOTE_STR"},productions_:[0,[3,1],[3,1],[4,1],[6,4],[5,1],[5,2],[5,3],[11,3],[15,1],[15,1],[15,3],[15,2],[19,1],[19,3],[19,1],[19,2],[19,2],[19,2],[10,1],[10,2],[10,1],[10,1],[10,1],[10,1],[10,1],[10,1],[10,1],[10,1],[10,1],[10,1],[10,2],[10,2],[10,1],[23,4],[23,5],[38,2],[40,1],[40,2],[40,3],[24,1],[24,3],[24,4],[24,3],[24,6],[43,2],[43,3],[47,0],[47,2],[47,2],[26,4],[45,1],[45,2],[25,1],[25,2],[25,1],[25,1],[21,3],[21,4],[21,4],[21,5],[30,3],[30,2],[31,3],[58,1],[58,3],[32,1],[32,1],[32,1],[32,1],[53,3],[53,2],[53,2],[53,1],[66,1],[66,1],[66,1],[66,1],[66,1],[67,1],[67,1],[27,3],[27,4],[27,3],[27,4],[27,4],[27,5],[27,3],[27,4],[27,4],[27,5],[27,4],[27,5],[27,5],[27,6],[28,3],[29,3],[59,1],[59,3],[84,1],[84,2],[85,1],[85,1],[85,1],[85,1],[85,1],[85,1],[85,1],[85,1],[85,1],[91,1],[91,1],[92,1],[92,1],[92,1],[92,1],[92,1],[92,1],[92,1],[94,1],[94,1],[94,1],[94,1],[16,1],[16,1],[16,1],[16,1],[17,1],[55,1]],performAction:(0,Lt.K2)(function(y,E,M,m,A,v,b){var C=v.length-1;switch(A){case 8:this.$=v[C-1];break;case 9:case 10:case 13:case 15:this.$=v[C];break;case 11:case 14:this.$=v[C-2]+"."+v[C];break;case 12:case 16:case 100:this.$=v[C-1]+v[C];break;case 17:case 18:this.$=v[C-1]+"~"+v[C]+"~";break;case 19:m.addRelation(v[C]);break;case 20:v[C-1].title=m.cleanupLabel(v[C]),m.addRelation(v[C-1]);break;case 31:this.$=v[C].trim(),m.setAccTitle(this.$);break;case 32:case 33:this.$=v[C].trim(),m.setAccDescription(this.$);break;case 34:m.addClassesToNamespace(v[C-3],v[C-1]);break;case 35:m.addClassesToNamespace(v[C-4],v[C-1]);break;case 36:this.$=v[C],m.addNamespace(v[C]);break;case 37:case 51:case 64:case 97:this.$=[v[C]];break;case 38:this.$=[v[C-1]];break;case 39:v[C].unshift(v[C-2]),this.$=v[C];break;case 41:m.setCssClass(v[C-2],v[C]);break;case 42:m.addMembers(v[C-3],v[C-1]);break;case 44:m.setCssClass(v[C-5],v[C-3]),m.addMembers(v[C-5],v[C-1]);break;case 45:this.$=v[C],m.addClass(v[C]);break;case 46:this.$=v[C-1],m.addClass(v[C-1]),m.setClassLabel(v[C-1],v[C]);break;case 50:m.addAnnotation(v[C],v[C-2]);break;case 52:v[C].push(v[C-1]),this.$=v[C];break;case 53:case 55:case 56:break;case 54:m.addMember(v[C-1],m.cleanupLabel(v[C]));break;case 57:this.$={id1:v[C-2],id2:v[C],relation:v[C-1],relationTitle1:"none",relationTitle2:"none"};break;case 58:this.$={id1:v[C-3],id2:v[C],relation:v[C-1],relationTitle1:v[C-2],relationTitle2:"none"};break;case 59:this.$={id1:v[C-3],id2:v[C],relation:v[C-2],relationTitle1:"none",relationTitle2:v[C-1]};break;case 60:this.$={id1:v[C-4],id2:v[C],relation:v[C-2],relationTitle1:v[C-3],relationTitle2:v[C-1]};break;case 61:m.addNote(v[C],v[C-1]);break;case 62:m.addNote(v[C]);break;case 63:this.$=v[C-2],m.defineClass(v[C-1],v[C]);break;case 65:this.$=v[C-2].concat([v[C]]);break;case 66:m.setDirection("TB");break;case 67:m.setDirection("BT");break;case 68:m.setDirection("RL");break;case 69:m.setDirection("LR");break;case 70:this.$={type1:v[C-2],type2:v[C],lineType:v[C-1]};break;case 71:this.$={type1:"none",type2:v[C],lineType:v[C-1]};break;case 72:this.$={type1:v[C-1],type2:"none",lineType:v[C]};break;case 73:this.$={type1:"none",type2:"none",lineType:v[C]};break;case 74:this.$=m.relationType.AGGREGATION;break;case 75:this.$=m.relationType.EXTENSION;break;case 76:this.$=m.relationType.COMPOSITION;break;case 77:this.$=m.relationType.DEPENDENCY;break;case 78:this.$=m.relationType.LOLLIPOP;break;case 79:this.$=m.lineType.LINE;break;case 80:this.$=m.lineType.DOTTED_LINE;break;case 81:case 87:this.$=v[C-2],m.setClickEvent(v[C-1],v[C]);break;case 82:case 88:this.$=v[C-3],m.setClickEvent(v[C-2],v[C-1]),m.setTooltip(v[C-2],v[C]);break;case 83:this.$=v[C-2],m.setLink(v[C-1],v[C]);break;case 84:this.$=v[C-3],m.setLink(v[C-2],v[C-1],v[C]);break;case 85:this.$=v[C-3],m.setLink(v[C-2],v[C-1]),m.setTooltip(v[C-2],v[C]);break;case 86:this.$=v[C-4],m.setLink(v[C-3],v[C-2],v[C]),m.setTooltip(v[C-3],v[C-1]);break;case 89:this.$=v[C-3],m.setClickEvent(v[C-2],v[C-1],v[C]);break;case 90:this.$=v[C-4],m.setClickEvent(v[C-3],v[C-2],v[C-1]),m.setTooltip(v[C-3],v[C]);break;case 91:this.$=v[C-3],m.setLink(v[C-2],v[C]);break;case 92:this.$=v[C-4],m.setLink(v[C-3],v[C-1],v[C]);break;case 93:this.$=v[C-4],m.setLink(v[C-3],v[C-1]),m.setTooltip(v[C-3],v[C]);break;case 94:this.$=v[C-5],m.setLink(v[C-4],v[C-2],v[C]),m.setTooltip(v[C-4],v[C-1]);break;case 95:this.$=v[C-2],m.setCssStyle(v[C-1],v[C]);break;case 96:m.setCssClass(v[C-1],v[C]);break;case 98:v[C-2].push(v[C]),this.$=v[C-2]}},"anonymous"),table:[{3:1,4:2,5:3,6:4,7:[1,6],10:5,16:39,17:40,19:21,21:7,23:8,24:9,25:10,26:11,27:12,28:13,29:14,30:15,31:16,32:17,33:dt,35:Bt,37:Se,38:22,42:X,43:23,46:re,49:S,51:ee,52:Rt,54:qt,56:V,57:gt,60:Y,62:Nt,63:St,64:Ut,65:ye,75:le,76:Pe,78:oe,82:qe,83:We,86:Et,100:Tt,102:B,103:N},{1:[3]},{1:[2,1]},{1:[2,2]},{1:[2,3]},z(et,[2,5],{8:[1,48]}),{8:[1,49]},z(yt,[2,19],{22:[1,50]}),z(yt,[2,21]),z(yt,[2,22]),z(yt,[2,23]),z(yt,[2,24]),z(yt,[2,25]),z(yt,[2,26]),z(yt,[2,27]),z(yt,[2,28]),z(yt,[2,29]),z(yt,[2,30]),{34:[1,51]},{36:[1,52]},z(yt,[2,33]),z(yt,[2,53],{53:53,66:56,67:57,13:[1,54],22:[1,55],68:it,69:rt,70:_t,71:ht,72:Ot,73:H,74:ot}),{39:[1,65]},z(ke,[2,40],{39:[1,67],44:[1,66]}),z(yt,[2,55]),z(yt,[2,56]),{16:68,60:Y,86:Et,100:Tt,102:B},{16:39,17:40,19:69,60:Y,86:Et,100:Tt,102:B,103:N},{16:39,17:40,19:70,60:Y,86:Et,100:Tt,102:B,103:N},{16:39,17:40,19:71,60:Y,86:Et,100:Tt,102:B,103:N},{60:[1,72]},{13:[1,73]},{16:39,17:40,19:74,60:Y,86:Et,100:Tt,102:B,103:N},{13:Pt,55:75},{58:77,60:[1,78]},z(yt,[2,66]),z(yt,[2,67]),z(yt,[2,68]),z(yt,[2,69]),z(Zt,[2,13],{16:39,17:40,19:80,18:[1,79],20:[1,81],60:Y,86:Et,100:Tt,102:B,103:N}),z(Zt,[2,15],{20:[1,82]}),{15:83,16:84,17:85,60:Y,86:Et,100:Tt,102:B,103:N},{16:39,17:40,19:86,60:Y,86:Et,100:Tt,102:B,103:N},z(pe,[2,123]),z(pe,[2,124]),z(pe,[2,125]),z(pe,[2,126]),z([1,8,9,12,13,20,22,39,41,44,68,69,70,71,72,73,74,79,81],[2,127]),z(et,[2,6],{10:5,21:7,23:8,24:9,25:10,26:11,27:12,28:13,29:14,30:15,31:16,32:17,19:21,38:22,43:23,16:39,17:40,5:87,33:dt,35:Bt,37:Se,42:X,46:re,49:S,51:ee,52:Rt,54:qt,56:V,57:gt,60:Y,62:Nt,63:St,64:Ut,65:ye,75:le,76:Pe,78:oe,82:qe,83:We,86:Et,100:Tt,102:B,103:N}),{5:88,10:5,16:39,17:40,19:21,21:7,23:8,24:9,25:10,26:11,27:12,28:13,29:14,30:15,31:16,32:17,33:dt,35:Bt,37:Se,38:22,42:X,43:23,46:re,49:S,51:ee,52:Rt,54:qt,56:V,57:gt,60:Y,62:Nt,63:St,64:Ut,65:ye,75:le,76:Pe,78:oe,82:qe,83:We,86:Et,100:Tt,102:B,103:N},z(yt,[2,20]),z(yt,[2,31]),z(yt,[2,32]),{13:[1,90],16:39,17:40,19:89,60:Y,86:Et,100:Tt,102:B,103:N},{53:91,66:56,67:57,68:it,69:rt,70:_t,71:ht,72:Ot,73:H,74:ot},z(yt,[2,54]),{67:92,73:H,74:ot},z(Re,[2,73],{66:93,68:it,69:rt,70:_t,71:ht,72:Ot}),z(Ze,[2,74]),z(Ze,[2,75]),z(Ze,[2,76]),z(Ze,[2,77]),z(Ze,[2,78]),z(de,[2,79]),z(de,[2,80]),{8:[1,95],24:96,40:94,43:23,46:re},{16:97,60:Y,86:Et,100:Tt,102:B},{41:[1,99],45:98,51:yr},{50:[1,101]},{13:[1,102]},{13:[1,103]},{79:[1,104],81:[1,105]},{22:mr,48:Wt,59:106,60:we,82:sr,84:107,85:108,86:ve,87:ce,88:Ee,89:Ae,90:er},{60:[1,118]},{13:Pt,55:119},z(yt,[2,62]),z(yt,[2,128]),{22:mr,48:Wt,59:120,60:we,61:[1,121],82:sr,84:107,85:108,86:ve,87:ce,88:Ee,89:Ae,90:er},z(Qe,[2,64]),{16:39,17:40,19:122,60:Y,86:Et,100:Tt,102:B,103:N},z(Zt,[2,16]),z(Zt,[2,17]),z(Zt,[2,18]),{39:[2,36]},{15:124,16:84,17:85,18:[1,123],39:[2,9],60:Y,86:Et,100:Tt,102:B,103:N},{39:[2,10]},z(Dr,[2,45],{11:125,12:[1,126]}),z(et,[2,7]),{9:[1,127]},z(_e,[2,57]),{16:39,17:40,19:128,60:Y,86:Et,100:Tt,102:B,103:N},{13:[1,130],16:39,17:40,19:129,60:Y,86:Et,100:Tt,102:B,103:N},z(Re,[2,72],{66:131,68:it,69:rt,70:_t,71:ht,72:Ot}),z(Re,[2,71]),{41:[1,132]},{24:96,40:133,43:23,46:re},{8:[1,134],41:[2,37]},z(ke,[2,41],{39:[1,135]}),{41:[1,136]},z(ke,[2,43]),{41:[2,51],45:137,51:yr},{16:39,17:40,19:138,60:Y,86:Et,100:Tt,102:B,103:N},z(yt,[2,81],{13:[1,139]}),z(yt,[2,83],{13:[1,141],77:[1,140]}),z(yt,[2,87],{13:[1,142],80:[1,143]}),{13:[1,144]},z(yt,[2,95],{61:Yr}),z(nr,[2,97],{85:146,22:mr,48:Wt,60:we,82:sr,86:ve,87:ce,88:Ee,89:Ae,90:er}),z(te,[2,99]),z(te,[2,101]),z(te,[2,102]),z(te,[2,103]),z(te,[2,104]),z(te,[2,105]),z(te,[2,106]),z(te,[2,107]),z(te,[2,108]),z(te,[2,109]),z(yt,[2,96]),z(yt,[2,61]),z(yt,[2,63],{61:Yr}),{60:[1,147]},z(Zt,[2,14]),{15:148,16:84,17:85,60:Y,86:Et,100:Tt,102:B,103:N},{39:[2,12]},z(Dr,[2,46]),{13:[1,149]},{1:[2,4]},z(_e,[2,59]),z(_e,[2,58]),{16:39,17:40,19:150,60:Y,86:Et,100:Tt,102:B,103:N},z(Re,[2,70]),z(yt,[2,34]),{41:[1,151]},{24:96,40:152,41:[2,38],43:23,46:re},{45:153,51:yr},z(ke,[2,42]),{41:[2,52]},z(yt,[2,50]),z(yt,[2,82]),z(yt,[2,84]),z(yt,[2,85],{77:[1,154]}),z(yt,[2,88]),z(yt,[2,89],{13:[1,155]}),z(yt,[2,91],{13:[1,157],77:[1,156]}),{22:mr,48:Wt,60:we,82:sr,84:158,85:108,86:ve,87:ce,88:Ee,89:Ae,90:er},z(te,[2,100]),z(Qe,[2,65]),{39:[2,11]},{14:[1,159]},z(_e,[2,60]),z(yt,[2,35]),{41:[2,39]},{41:[1,160]},z(yt,[2,86]),z(yt,[2,90]),z(yt,[2,92]),z(yt,[2,93],{77:[1,161]}),z(nr,[2,98],{85:146,22:mr,48:Wt,60:we,82:sr,86:ve,87:ce,88:Ee,89:Ae,90:er}),z(Dr,[2,8]),z(ke,[2,44]),z(yt,[2,94])],defaultActions:{2:[2,1],3:[2,2],4:[2,3],83:[2,36],85:[2,10],124:[2,12],127:[2,4],137:[2,52],148:[2,11],152:[2,39]},parseError:(0,Lt.K2)(function(y,E){if(!E.recoverable){var M=new Error(y);throw M.hash=E,M}this.trace(y)},"parseError"),parse:(0,Lt.K2)(function(y){var E=this,M=[0],m=[],A=[null],v=[],b=this.table,C="",R=0,Q=0,mt=0,Vt=v.slice.call(arguments,1),Kt=Object.create(this.lexer),xe={yy:{}};for(var je in this.yy)Object.prototype.hasOwnProperty.call(this.yy,je)&&(xe.yy[je]=this.yy[je]);Kt.setInput(y,xe.yy),xe.yy.lexer=Kt,xe.yy.parser=this,typeof Kt.yylloc>"u"&&(Kt.yylloc={});var Ke=Kt.yylloc;v.push(Ke);var fr=Kt.options&&Kt.options.ranges;function br(){var or;return"number"!=typeof(or=m.pop()||Kt.lex()||1)&&(or instanceof Array&&(or=(m=or).pop()),or=E.symbols_[or]||or),or}this.parseError="function"==typeof xe.yy.parseError?xe.yy.parseError:Object.getPrototypeOf(this).parseError,(0,Lt.K2)(function lr(or){M.length=M.length-2*or,A.length=A.length-or,v.length=v.length-or},"popStack"),(0,Lt.K2)(br,"lex");for(var $e,He,wr,kr,_r,Lr,ha,jr,Jr={};;){if(this.defaultActions[wr=M[M.length-1]]?kr=this.defaultActions[wr]:((null===$e||typeof $e>"u")&&($e=br()),kr=b[wr]&&b[wr][$e]),typeof kr>"u"||!kr.length||!kr[0]){var Qr;for(Lr in jr=[],b[wr])this.terminals_[Lr]&&Lr>2&&jr.push("'"+this.terminals_[Lr]+"'");Qr=Kt.showPosition?"Parse error on line "+(R+1)+":\n"+Kt.showPosition()+"\nExpecting "+jr.join(", ")+", got '"+(this.terminals_[$e]||$e)+"'":"Parse error on line "+(R+1)+": Unexpected "+(1==$e?"end of input":"'"+(this.terminals_[$e]||$e)+"'"),this.parseError(Qr,{text:Kt.match,token:this.terminals_[$e]||$e,line:Kt.yylineno,loc:Ke,expected:jr})}if(kr[0]instanceof Array&&kr.length>1)throw new Error("Parse Error: multiple actions possible at state: "+wr+", token: "+$e);switch(kr[0]){case 1:M.push($e),A.push(Kt.yytext),v.push(Kt.yylloc),M.push(kr[1]),$e=null,He?($e=He,He=null):(Q=Kt.yyleng,C=Kt.yytext,R=Kt.yylineno,Ke=Kt.yylloc,mt>0&&mt--);break;case 2:if(Jr.$=A[A.length-(ha=this.productions_[kr[1]][1])],Jr._$={first_line:v[v.length-(ha||1)].first_line,last_line:v[v.length-1].last_line,first_column:v[v.length-(ha||1)].first_column,last_column:v[v.length-1].last_column},fr&&(Jr._$.range=[v[v.length-(ha||1)].range[0],v[v.length-1].range[1]]),typeof(_r=this.performAction.apply(Jr,[C,Q,R,xe.yy,kr[1],A,v].concat(Vt)))<"u")return _r;ha&&(M=M.slice(0,-1*ha*2),A=A.slice(0,-1*ha),v=v.slice(0,-1*ha)),M.push(this.productions_[kr[1]][0]),A.push(Jr.$),v.push(Jr._$),M.push(b[M[M.length-2]][M[M.length-1]]);break;case 3:return!0}}return!0},"parse")};function ar(){this.yy={}}return ne.lexer=function(){return{EOF:1,parseError:(0,Lt.K2)(function(E,M){if(!this.yy.parser)throw new Error(E);this.yy.parser.parseError(E,M)},"parseError"),setInput:(0,Lt.K2)(function(y,E){return this.yy=E||this.yy||{},this._input=y,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},"setInput"),input:(0,Lt.K2)(function(){var y=this._input[0];return this.yytext+=y,this.yyleng++,this.offset++,this.match+=y,this.matched+=y,y.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),y},"input"),unput:(0,Lt.K2)(function(y){var E=y.length,M=y.split(/(?:\r\n?|\n)/g);this._input=y+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-E),this.offset-=E;var m=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),M.length-1&&(this.yylineno-=M.length-1);var A=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:M?(M.length===m.length?this.yylloc.first_column:0)+m[m.length-M.length].length-M[0].length:this.yylloc.first_column-E},this.options.ranges&&(this.yylloc.range=[A[0],A[0]+this.yyleng-E]),this.yyleng=this.yytext.length,this},"unput"),more:(0,Lt.K2)(function(){return this._more=!0,this},"more"),reject:(0,Lt.K2)(function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},"reject"),less:(0,Lt.K2)(function(y){this.unput(this.match.slice(y))},"less"),pastInput:(0,Lt.K2)(function(){var y=this.matched.substr(0,this.matched.length-this.match.length);return(y.length>20?"...":"")+y.substr(-20).replace(/\n/g,"")},"pastInput"),upcomingInput:(0,Lt.K2)(function(){var y=this.match;return y.length<20&&(y+=this._input.substr(0,20-y.length)),(y.substr(0,20)+(y.length>20?"...":"")).replace(/\n/g,"")},"upcomingInput"),showPosition:(0,Lt.K2)(function(){var y=this.pastInput(),E=new Array(y.length+1).join("-");return y+this.upcomingInput()+"\n"+E+"^"},"showPosition"),test_match:(0,Lt.K2)(function(y,E){var M,m,A;if(this.options.backtrack_lexer&&(A={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(A.yylloc.range=this.yylloc.range.slice(0))),(m=y[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=m.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:m?m[m.length-1].length-m[m.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+y[0].length},this.yytext+=y[0],this.match+=y[0],this.matches=y,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(y[0].length),this.matched+=y[0],M=this.performAction.call(this,this.yy,this,E,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),M)return M;if(this._backtrack){for(var v in A)this[v]=A[v];return!1}return!1},"test_match"),next:(0,Lt.K2)(function(){if(this.done)return this.EOF;var y,E,M,m;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var A=this._currentRules(),v=0;v<A.length;v++)if((M=this._input.match(this.rules[A[v]]))&&(!E||M[0].length>E[0].length)){if(E=M,m=v,this.options.backtrack_lexer){if(!1!==(y=this.test_match(M,A[v])))return y;if(this._backtrack){E=!1;continue}return!1}if(!this.options.flex)break}return E?!1!==(y=this.test_match(E,A[m]))&&y:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},"next"),lex:(0,Lt.K2)(function(){return this.next()||this.lex()},"lex"),begin:(0,Lt.K2)(function(E){this.conditionStack.push(E)},"begin"),popState:(0,Lt.K2)(function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},"popState"),_currentRules:(0,Lt.K2)(function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},"_currentRules"),topState:(0,Lt.K2)(function(E){return(E=this.conditionStack.length-1-Math.abs(E||0))>=0?this.conditionStack[E]:"INITIAL"},"topState"),pushState:(0,Lt.K2)(function(E){this.begin(E)},"pushState"),stateStackSize:(0,Lt.K2)(function(){return this.conditionStack.length},"stateStackSize"),options:{},performAction:(0,Lt.K2)(function(E,M,m,A){switch(m){case 0:return 62;case 1:return 63;case 2:return 64;case 3:return 65;case 4:case 5:case 14:case 31:case 36:case 40:case 47:break;case 6:return this.begin("acc_title"),33;case 7:return this.popState(),"acc_title_value";case 8:return this.begin("acc_descr"),35;case 9:return this.popState(),"acc_descr_value";case 10:this.begin("acc_descr_multiline");break;case 11:case 19:case 22:case 24:case 58:case 61:this.popState();break;case 12:return"acc_descr_multiline_value";case 13:case 35:return 8;case 15:case 16:return 7;case 17:case 37:case 45:return"EDGE_STATE";case 18:this.begin("callback_name");break;case 20:this.popState(),this.begin("callback_args");break;case 21:return 79;case 23:return 80;case 25:return"STR";case 26:this.begin("string");break;case 27:return 82;case 28:return 57;case 29:return this.begin("namespace"),42;case 30:case 39:return this.popState(),8;case 32:return this.begin("namespace-body"),39;case 33:case 43:return this.popState(),41;case 34:case 44:return"EOF_IN_STRUCT";case 38:return this.begin("class"),46;case 41:return this.popState(),this.popState(),41;case 42:return this.begin("class-body"),39;case 46:return"OPEN_IN_STRUCT";case 48:return"MEMBER";case 49:return 83;case 50:return 75;case 51:return 76;case 52:return 78;case 53:return 54;case 54:return 56;case 55:return 49;case 56:return 50;case 57:return 81;case 59:return"GENERICTYPE";case 60:this.begin("generic");break;case 62:return"BQUOTE_STR";case 63:this.begin("bqstring");break;case 64:case 65:case 66:case 67:return 77;case 68:case 69:return 69;case 70:case 71:return 71;case 72:return 70;case 73:return 68;case 74:return 72;case 75:return 73;case 76:return 74;case 77:return 22;case 78:return 44;case 79:return 100;case 80:return 18;case 81:return"PLUS";case 82:return 87;case 83:return 61;case 84:case 85:return 89;case 86:return 90;case 87:case 88:return"EQUALS";case 89:return 60;case 90:return 12;case 91:return 14;case 92:return"PUNCTUATION";case 93:return 86;case 94:return 102;case 95:case 96:return 48;case 97:return 9}},"anonymous"),rules:[/^(?:.*direction\s+TB[^\n]*)/,/^(?:.*direction\s+BT[^\n]*)/,/^(?:.*direction\s+RL[^\n]*)/,/^(?:.*direction\s+LR[^\n]*)/,/^(?:%%(?!\{)*[^\n]*(\r?\n?)+)/,/^(?:%%[^\n]*(\r?\n)*)/,/^(?:accTitle\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*\{\s*)/,/^(?:[\}])/,/^(?:[^\}]*)/,/^(?:\s*(\r?\n)+)/,/^(?:\s+)/,/^(?:classDiagram-v2\b)/,/^(?:classDiagram\b)/,/^(?:\[\*\])/,/^(?:call[\s]+)/,/^(?:\([\s]*\))/,/^(?:\()/,/^(?:[^(]*)/,/^(?:\))/,/^(?:[^)]*)/,/^(?:["])/,/^(?:[^"]*)/,/^(?:["])/,/^(?:style\b)/,/^(?:classDef\b)/,/^(?:namespace\b)/,/^(?:\s*(\r?\n)+)/,/^(?:\s+)/,/^(?:[{])/,/^(?:[}])/,/^(?:$)/,/^(?:\s*(\r?\n)+)/,/^(?:\s+)/,/^(?:\[\*\])/,/^(?:class\b)/,/^(?:\s*(\r?\n)+)/,/^(?:\s+)/,/^(?:[}])/,/^(?:[{])/,/^(?:[}])/,/^(?:$)/,/^(?:\[\*\])/,/^(?:[{])/,/^(?:[\n])/,/^(?:[^{}\n]*)/,/^(?:cssClass\b)/,/^(?:callback\b)/,/^(?:link\b)/,/^(?:click\b)/,/^(?:note for\b)/,/^(?:note\b)/,/^(?:<<)/,/^(?:>>)/,/^(?:href\b)/,/^(?:[~])/,/^(?:[^~]*)/,/^(?:~)/,/^(?:[`])/,/^(?:[^`]+)/,/^(?:[`])/,/^(?:_self\b)/,/^(?:_blank\b)/,/^(?:_parent\b)/,/^(?:_top\b)/,/^(?:\s*<\|)/,/^(?:\s*\|>)/,/^(?:\s*>)/,/^(?:\s*<)/,/^(?:\s*\*)/,/^(?:\s*o\b)/,/^(?:\s*\(\))/,/^(?:--)/,/^(?:\.\.)/,/^(?::{1}[^:\n;]+)/,/^(?::{3})/,/^(?:-)/,/^(?:\.)/,/^(?:\+)/,/^(?::)/,/^(?:,)/,/^(?:#)/,/^(?:#)/,/^(?:%)/,/^(?:=)/,/^(?:=)/,/^(?:\w+)/,/^(?:\[)/,/^(?:\])/,/^(?:[!"#$%&'*+,-.`?\\/])/,/^(?:[0-9]+)/,/^(?:[\u00AA\u00B5\u00BA\u00C0-\u00D6\u00D8-\u00F6]|[\u00F8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377]|[\u037A-\u037D\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5]|[\u03F7-\u0481\u048A-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA]|[\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE]|[\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA]|[\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0]|[\u08A2-\u08AC\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0977]|[\u0979-\u097F\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2]|[\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A]|[\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39]|[\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8]|[\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C]|[\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C]|[\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99]|[\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0]|[\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D]|[\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3]|[\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10]|[\u0D12-\u0D3A\u0D3D\u0D4E\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1]|[\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81]|[\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3]|[\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6]|[\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A]|[\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081]|[\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D]|[\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0]|[\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310]|[\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C]|[\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u1700-\u170C\u170E-\u1711]|[\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7]|[\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191C]|[\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16]|[\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF]|[\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC]|[\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D]|[\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D]|[\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3]|[\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F]|[\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128]|[\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184]|[\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3]|[\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6]|[\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE]|[\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C]|[\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D]|[\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC]|[\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B]|[\uA640-\uA66E\uA67F-\uA697\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788]|[\uA78B-\uA78E\uA790-\uA793\uA7A0-\uA7AA\uA7F8-\uA801\uA803-\uA805]|[\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB]|[\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uAA00-\uAA28]|[\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA80-\uAAAF\uAAB1\uAAB5]|[\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4]|[\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E]|[\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D]|[\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36]|[\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D]|[\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC]|[\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF]|[\uFFD2-\uFFD7\uFFDA-\uFFDC])/,/^(?:\s)/,/^(?:\s)/,/^(?:$)/],conditions:{"namespace-body":{rules:[26,33,34,35,36,37,38,49,50,51,52,53,54,55,56,57,60,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,86,87,88,89,90,91,92,93,94,95,97],inclusive:!1},namespace:{rules:[26,29,30,31,32,49,50,51,52,53,54,55,56,57,60,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,86,87,88,89,90,91,92,93,94,95,97],inclusive:!1},"class-body":{rules:[26,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,60,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,86,87,88,89,90,91,92,93,94,95,97],inclusive:!1},class:{rules:[26,39,40,41,42,49,50,51,52,53,54,55,56,57,60,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,86,87,88,89,90,91,92,93,94,95,97],inclusive:!1},acc_descr_multiline:{rules:[11,12,26,49,50,51,52,53,54,55,56,57,60,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,86,87,88,89,90,91,92,93,94,95,97],inclusive:!1},acc_descr:{rules:[9,26,49,50,51,52,53,54,55,56,57,60,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,86,87,88,89,90,91,92,93,94,95,97],inclusive:!1},acc_title:{rules:[7,26,49,50,51,52,53,54,55,56,57,60,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,86,87,88,89,90,91,92,93,94,95,97],inclusive:!1},callback_args:{rules:[22,23,26,49,50,51,52,53,54,55,56,57,60,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,86,87,88,89,90,91,92,93,94,95,97],inclusive:!1},callback_name:{rules:[19,20,21,26,49,50,51,52,53,54,55,56,57,60,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,86,87,88,89,90,91,92,93,94,95,97],inclusive:!1},href:{rules:[26,49,50,51,52,53,54,55,56,57,60,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,86,87,88,89,90,91,92,93,94,95,97],inclusive:!1},struct:{rules:[26,49,50,51,52,53,54,55,56,57,60,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,86,87,88,89,90,91,92,93,94,95,97],inclusive:!1},generic:{rules:[26,49,50,51,52,53,54,55,56,57,58,59,60,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,86,87,88,89,90,91,92,93,94,95,97],inclusive:!1},bqstring:{rules:[26,49,50,51,52,53,54,55,56,57,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,86,87,88,89,90,91,92,93,94,95,97],inclusive:!1},string:{rules:[24,25,26,49,50,51,52,53,54,55,56,57,60,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,86,87,88,89,90,91,92,93,94,95,97],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,5,6,8,10,13,14,15,16,17,18,26,27,28,29,38,49,50,51,52,53,54,55,56,57,60,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97],inclusive:!0}}}}(),(0,Lt.K2)(ar,"Parser"),ar.prototype=ne,ne.Parser=ar,new ar}();Gt.parser=Gt;var j=Gt,hr=["#","+","~","-",""],ze=(class{constructor(z,dt){this.memberType=dt,this.visibility="",this.classifier="",this.text="";const Bt=(0,w.jZ)(z,(0,w.D7)());this.parseMember(Bt)}getDisplayDetails(){let z=this.visibility+(0,w.QO)(this.id);return"method"===this.memberType&&(z+=`(${(0,w.QO)(this.parameters.trim())})`,this.returnType&&(z+=" : "+(0,w.QO)(this.returnType))),z=z.trim(),{displayText:z,cssStyle:this.parseClassifier()}}parseMember(z){let dt="";if("method"===this.memberType){const X=/([#+~-])?(.+)\((.*)\)([\s$*])?(.*)([$*])?/.exec(z);if(X){const re=X[1]?X[1].trim():"";if(hr.includes(re)&&(this.visibility=re),this.id=X[2],this.parameters=X[3]?X[3].trim():"",dt=X[4]?X[4].trim():"",this.returnType=X[5]?X[5].trim():"",""===dt){const S=this.returnType.substring(this.returnType.length-1);/[$*]/.exec(S)&&(dt=S,this.returnType=this.returnType.substring(0,this.returnType.length-1))}}}else{const Se=z.length,X=z.substring(0,1),re=z.substring(Se-1);hr.includes(X)&&(this.visibility=X),/[$*]/.exec(re)&&(dt=re),this.id=z.substring(""===this.visibility?0:1,""===dt?Se:Se-1)}this.classifier=dt,this.id=this.id.startsWith(" ")?" "+this.id.trim():this.id.trim();const Bt=`${this.visibility?"\\"+this.visibility:""}${(0,w.QO)(this.id)}${"method"===this.memberType?`(${(0,w.QO)(this.parameters)})${this.returnType?" : "+(0,w.QO)(this.returnType):""}`:""}`;this.text=Bt.replaceAll("<","&lt;").replaceAll(">","&gt;"),this.text.startsWith("\\&lt;")&&(this.text=this.text.replace("\\&lt;","~"))}parseClassifier(){switch(this.classifier){case"*":return"font-style:italic;";case"$":return"text-decoration:underline;";default:return""}}static#t=Ge=()=>((0,ie.A)(this,"ClassMember"),(0,Lt.K2)(this,"ClassMember"),this)},Ge()),vr="classId-",Wr=0,Br=(0,Lt.K2)(z=>w.Y2.sanitizeText(z,(0,w.D7)()),"sanitizeText"),Gr=(class{constructor(){this.relations=[],this.classes=new Map,this.styleClasses=new Map,this.notes=[],this.interfaces=[],this.namespaces=new Map,this.namespaceCounter=0,this.functions=[],this.lineType={LINE:0,DOTTED_LINE:1},this.relationType={AGGREGATION:0,EXTENSION:1,COMPOSITION:2,DEPENDENCY:3,LOLLIPOP:4},this.setupToolTips=(0,Lt.K2)(z=>{let dt=(0,At.Ltv)(".mermaidTooltip");null===(dt._groups||dt)[0][0]&&(dt=(0,At.Ltv)("body").append("div").attr("class","mermaidTooltip").style("opacity",0)),(0,At.Ltv)(z).select("svg").selectAll("g.node").on("mouseover",X=>{const re=(0,At.Ltv)(X.currentTarget);if(null===re.attr("title"))return;const ee=this.getBoundingClientRect();dt.transition().duration(200).style("opacity",".9"),dt.text(re.attr("title")).style("left",window.scrollX+ee.left+(ee.right-ee.left)/2+"px").style("top",window.scrollY+ee.top-14+document.body.scrollTop+"px"),dt.html(dt.html().replace(/&lt;br\/&gt;/g,"<br/>")),re.classed("hover",!0)}).on("mouseout",X=>{dt.transition().duration(500).style("opacity",0),(0,At.Ltv)(X.currentTarget).classed("hover",!1)})},"setupToolTips"),this.direction="TB",this.setAccTitle=w.SV,this.getAccTitle=w.iN,this.setAccDescription=w.EI,this.getAccDescription=w.m7,this.setDiagramTitle=w.ke,this.getDiagramTitle=w.ab,this.getConfig=(0,Lt.K2)(()=>(0,w.D7)().class,"getConfig"),this.functions.push(this.setupToolTips.bind(this)),this.clear(),this.addRelation=this.addRelation.bind(this),this.addClassesToNamespace=this.addClassesToNamespace.bind(this),this.addNamespace=this.addNamespace.bind(this),this.setCssClass=this.setCssClass.bind(this),this.addMembers=this.addMembers.bind(this),this.addClass=this.addClass.bind(this),this.setClassLabel=this.setClassLabel.bind(this),this.addAnnotation=this.addAnnotation.bind(this),this.addMember=this.addMember.bind(this),this.cleanupLabel=this.cleanupLabel.bind(this),this.addNote=this.addNote.bind(this),this.defineClass=this.defineClass.bind(this),this.setDirection=this.setDirection.bind(this),this.setLink=this.setLink.bind(this),this.bindFunctions=this.bindFunctions.bind(this),this.clear=this.clear.bind(this),this.setTooltip=this.setTooltip.bind(this),this.setClickEvent=this.setClickEvent.bind(this),this.setCssStyle=this.setCssStyle.bind(this)}splitClassNameAndType(z){const dt=w.Y2.sanitizeText(z,(0,w.D7)());let Bt="",Se=dt;if(dt.indexOf("~")>0){const X=dt.split("~");Se=Br(X[0]),Bt=Br(X[1])}return{className:Se,type:Bt}}setClassLabel(z,dt){const Bt=w.Y2.sanitizeText(z,(0,w.D7)());dt&&(dt=Br(dt));const{className:Se}=this.splitClassNameAndType(Bt);this.classes.get(Se).label=dt,this.classes.get(Se).text=`${dt}${this.classes.get(Se).type?`<${this.classes.get(Se).type}>`:""}`}addClass(z){const dt=w.Y2.sanitizeText(z,(0,w.D7)()),{className:Bt,type:Se}=this.splitClassNameAndType(dt);if(this.classes.has(Bt))return;const X=w.Y2.sanitizeText(Bt,(0,w.D7)());this.classes.set(X,{id:X,type:Se,label:X,text:`${X}${Se?`&lt;${Se}&gt;`:""}`,shape:"classBox",cssClasses:"default",methods:[],members:[],annotations:[],styles:[],domId:vr+X+"-"+Wr}),Wr++}addInterface(z,dt){this.interfaces.push({id:`interface${this.interfaces.length}`,label:z,classId:dt})}lookUpDomId(z){const dt=w.Y2.sanitizeText(z,(0,w.D7)());if(this.classes.has(dt))return this.classes.get(dt).domId;throw new Error("Class not found: "+dt)}clear(){this.relations=[],this.classes=new Map,this.notes=[],this.interfaces=[],this.functions=[],this.functions.push(this.setupToolTips.bind(this)),this.namespaces=new Map,this.namespaceCounter=0,this.direction="TB",(0,w.IU)()}getClass(z){return this.classes.get(z)}getClasses(){return this.classes}getRelations(){return this.relations}getNotes(){return this.notes}addRelation(z){Lt.Rm.debug("Adding relation: "+JSON.stringify(z));const dt=[this.relationType.LOLLIPOP,this.relationType.AGGREGATION,this.relationType.COMPOSITION,this.relationType.DEPENDENCY,this.relationType.EXTENSION];z.relation.type1!==this.relationType.LOLLIPOP||dt.includes(z.relation.type2)?z.relation.type2!==this.relationType.LOLLIPOP||dt.includes(z.relation.type1)?(this.addClass(z.id1),this.addClass(z.id2)):(this.addClass(z.id1),this.addInterface(z.id2,z.id1),z.id2="interface"+(this.interfaces.length-1)):(this.addClass(z.id2),this.addInterface(z.id1,z.id2),z.id1="interface"+(this.interfaces.length-1)),z.id1=this.splitClassNameAndType(z.id1).className,z.id2=this.splitClassNameAndType(z.id2).className,z.relationTitle1=w.Y2.sanitizeText(z.relationTitle1.trim(),(0,w.D7)()),z.relationTitle2=w.Y2.sanitizeText(z.relationTitle2.trim(),(0,w.D7)()),this.relations.push(z)}addAnnotation(z,dt){const Bt=this.splitClassNameAndType(z).className;this.classes.get(Bt).annotations.push(dt)}addMember(z,dt){this.addClass(z);const Bt=this.splitClassNameAndType(z).className,Se=this.classes.get(Bt);if("string"==typeof dt){const X=dt.trim();X.startsWith("<<")&&X.endsWith(">>")?Se.annotations.push(Br(X.substring(2,X.length-2))):X.indexOf(")")>0?Se.methods.push(new ze(X,"method")):X&&Se.members.push(new ze(X,"attribute"))}}addMembers(z,dt){Array.isArray(dt)&&(dt.reverse(),dt.forEach(Bt=>this.addMember(z,Bt)))}addNote(z,dt){this.notes.push({id:`note${this.notes.length}`,class:dt,text:z})}cleanupLabel(z){return z.startsWith(":")&&(z=z.substring(1)),Br(z.trim())}setCssClass(z,dt){z.split(",").forEach(Bt=>{let Se=Bt;/\d/.exec(Bt[0])&&(Se=vr+Se);const X=this.classes.get(Se);X&&(X.cssClasses+=" "+dt)})}defineClass(z,dt){for(const Bt of z){let Se=this.styleClasses.get(Bt);void 0===Se&&(Se={id:Bt,styles:[],textStyles:[]},this.styleClasses.set(Bt,Se)),dt&&dt.forEach(X=>{if(/color/.exec(X)){const re=X.replace("fill","bgFill");Se.textStyles.push(re)}Se.styles.push(X)}),this.classes.forEach(X=>{X.cssClasses.includes(Bt)&&X.styles.push(...dt.flatMap(re=>re.split(",")))})}}setTooltip(z,dt){z.split(",").forEach(Bt=>{void 0!==dt&&(this.classes.get(Bt).tooltip=Br(dt))})}getTooltip(z,dt){return dt&&this.namespaces.has(dt)?this.namespaces.get(dt).classes.get(z).tooltip:this.classes.get(z).tooltip}setLink(z,dt,Bt){const Se=(0,w.D7)();z.split(",").forEach(X=>{let re=X;/\d/.exec(X[0])&&(re=vr+re);const S=this.classes.get(re);S&&(S.link=G._K.formatUrl(dt,Se),S.linkTarget="sandbox"===Se.securityLevel?"_top":"string"==typeof Bt?Br(Bt):"_blank")}),this.setCssClass(z,"clickable")}setClickEvent(z,dt,Bt){z.split(",").forEach(Se=>{this.setClickFunc(Se,dt,Bt),this.classes.get(Se).haveCallback=!0}),this.setCssClass(z,"clickable")}setClickFunc(z,dt,Bt){const Se=w.Y2.sanitizeText(z,(0,w.D7)());if("loose"!==(0,w.D7)().securityLevel||void 0===dt)return;const re=Se;if(this.classes.has(re)){const S=this.lookUpDomId(re);let ee=[];if("string"==typeof Bt){ee=Bt.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/);for(let Rt=0;Rt<ee.length;Rt++){let qt=ee[Rt].trim();qt.startsWith('"')&&qt.endsWith('"')&&(qt=qt.substr(1,qt.length-2)),ee[Rt]=qt}}0===ee.length&&ee.push(S),this.functions.push(()=>{const Rt=document.querySelector(`[id="${S}"]`);null!==Rt&&Rt.addEventListener("click",()=>{G._K.runFunc(dt,...ee)},!1)})}}bindFunctions(z){this.functions.forEach(dt=>{dt(z)})}getDirection(){return this.direction}setDirection(z){this.direction=z}addNamespace(z){this.namespaces.has(z)||(this.namespaces.set(z,{id:z,classes:new Map,children:{},domId:vr+z+"-"+this.namespaceCounter}),this.namespaceCounter++)}getNamespace(z){return this.namespaces.get(z)}getNamespaces(){return this.namespaces}addClassesToNamespace(z,dt){if(this.namespaces.has(z))for(const Bt of dt){const{className:Se}=this.splitClassNameAndType(Bt);this.classes.get(Se).parent=z,this.namespaces.get(z).classes.set(Se,this.classes.get(Se))}}setCssStyle(z,dt){const Bt=this.classes.get(z);if(dt&&Bt)for(const Se of dt)Se.includes(",")?Bt.styles.push(...Se.split(",")):Bt.styles.push(Se)}getArrowMarker(z){let dt;switch(z){case 0:dt="aggregation";break;case 1:dt="extension";break;case 2:dt="composition";break;case 3:dt="dependency";break;case 4:dt="lollipop";break;default:dt="none"}return dt}getData(){const z=[],dt=[],Bt=(0,w.D7)();for(const X of this.namespaces.keys()){const re=this.namespaces.get(X);re&&z.push({id:re.id,label:re.id,isGroup:!0,padding:Bt.class.padding??16,shape:"rect",cssStyles:["fill: none","stroke: black"],look:Bt.look})}for(const X of this.classes.keys()){const re=this.classes.get(X);if(re){const S=re;S.parentId=re.parent,S.look=Bt.look,z.push(S)}}let Se=0;for(const X of this.notes){Se++,z.push({id:X.id,label:X.text,isGroup:!1,shape:"note",padding:Bt.class.padding??6,cssStyles:["text-align: left","white-space: nowrap",`fill: ${Bt.themeVariables.noteBkgColor}`,`stroke: ${Bt.themeVariables.noteBorderColor}`],look:Bt.look});const S=this.classes.get(X.class)?.id??"";S&&dt.push({id:`edgeNote${Se}`,start:X.id,end:S,type:"normal",thickness:"normal",classes:"relation",arrowTypeStart:"none",arrowTypeEnd:"none",arrowheadStyle:"",labelStyle:[""],style:["fill: none"],pattern:"dotted",look:Bt.look})}for(const X of this.interfaces)z.push({id:X.id,label:X.label,isGroup:!1,shape:"rect",cssStyles:["opacity: 0;"],look:Bt.look});Se=0;for(const X of this.relations){Se++;const re={id:(0,G.rY)(X.id1,X.id2,{prefix:"id",counter:Se}),start:X.id1,end:X.id2,type:"normal",label:X.title,labelpos:"c",thickness:"normal",classes:"relation",arrowTypeStart:this.getArrowMarker(X.relation.type1),arrowTypeEnd:this.getArrowMarker(X.relation.type2),startLabelRight:"none"===X.relationTitle1?"":X.relationTitle1,endLabelLeft:"none"===X.relationTitle2?"":X.relationTitle2,arrowheadStyle:"",labelStyle:["display: inline-block"],style:X.style||"",pattern:1==X.relation.lineType?"dashed":"solid",look:Bt.look};dt.push(re)}return{nodes:z,edges:dt,other:{},config:Bt,direction:this.getDirection()}}static#t=bt=()=>((0,ie.A)(this,"ClassDB"),(0,Lt.K2)(this,"ClassDB"),this)},bt()),zr=(0,Lt.K2)(z=>`g.classGroup text {\n  fill: ${z.nodeBorder||z.classText};\n  stroke: none;\n  font-family: ${z.fontFamily};\n  font-size: 10px;\n\n  .title {\n    font-weight: bolder;\n  }\n\n}\n\n.nodeLabel, .edgeLabel {\n  color: ${z.classText};\n}\n.edgeLabel .label rect {\n  fill: ${z.mainBkg};\n}\n.label text {\n  fill: ${z.classText};\n}\n\n.labelBkg {\n  background: ${z.mainBkg};\n}\n.edgeLabel .label span {\n  background: ${z.mainBkg};\n}\n\n.classTitle {\n  font-weight: bolder;\n}\n.node rect,\n  .node circle,\n  .node ellipse,\n  .node polygon,\n  .node path {\n    fill: ${z.mainBkg};\n    stroke: ${z.nodeBorder};\n    stroke-width: 1px;\n  }\n\n\n.divider {\n  stroke: ${z.nodeBorder};\n  stroke-width: 1;\n}\n\ng.clickable {\n  cursor: pointer;\n}\n\ng.classGroup rect {\n  fill: ${z.mainBkg};\n  stroke: ${z.nodeBorder};\n}\n\ng.classGroup line {\n  stroke: ${z.nodeBorder};\n  stroke-width: 1;\n}\n\n.classLabel .box {\n  stroke: none;\n  stroke-width: 0;\n  fill: ${z.mainBkg};\n  opacity: 0.5;\n}\n\n.classLabel .label {\n  fill: ${z.nodeBorder};\n  font-size: 10px;\n}\n\n.relation {\n  stroke: ${z.lineColor};\n  stroke-width: 1;\n  fill: none;\n}\n\n.dashed-line{\n  stroke-dasharray: 3;\n}\n\n.dotted-line{\n  stroke-dasharray: 1 2;\n}\n\n#compositionStart, .composition {\n  fill: ${z.lineColor} !important;\n  stroke: ${z.lineColor} !important;\n  stroke-width: 1;\n}\n\n#compositionEnd, .composition {\n  fill: ${z.lineColor} !important;\n  stroke: ${z.lineColor} !important;\n  stroke-width: 1;\n}\n\n#dependencyStart, .dependency {\n  fill: ${z.lineColor} !important;\n  stroke: ${z.lineColor} !important;\n  stroke-width: 1;\n}\n\n#dependencyStart, .dependency {\n  fill: ${z.lineColor} !important;\n  stroke: ${z.lineColor} !important;\n  stroke-width: 1;\n}\n\n#extensionStart, .extension {\n  fill: transparent !important;\n  stroke: ${z.lineColor} !important;\n  stroke-width: 1;\n}\n\n#extensionEnd, .extension {\n  fill: transparent !important;\n  stroke: ${z.lineColor} !important;\n  stroke-width: 1;\n}\n\n#aggregationStart, .aggregation {\n  fill: transparent !important;\n  stroke: ${z.lineColor} !important;\n  stroke-width: 1;\n}\n\n#aggregationEnd, .aggregation {\n  fill: transparent !important;\n  stroke: ${z.lineColor} !important;\n  stroke-width: 1;\n}\n\n#lollipopStart, .lollipop {\n  fill: ${z.mainBkg} !important;\n  stroke: ${z.lineColor} !important;\n  stroke-width: 1;\n}\n\n#lollipopEnd, .lollipop {\n  fill: ${z.mainBkg} !important;\n  stroke: ${z.lineColor} !important;\n  stroke-width: 1;\n}\n\n.edgeTerminals {\n  font-size: 11px;\n  line-height: initial;\n}\n\n.classTitleText {\n  text-anchor: middle;\n  font-size: 18px;\n  fill: ${z.textColor};\n}\n  ${(0,L.o)()}\n`,"getStyles"),Or=(0,Lt.K2)((z,dt="TB")=>{if(!z.doc)return dt;let Bt=dt;for(const Se of z.doc)"dir"===Se.stmt&&(Bt=Se.value);return Bt},"getDir"),Xe={getClasses:(0,Lt.K2)(function(z,dt){return dt.db.getClasses()},"getClasses"),draw:(0,Lt.K2)(function(){var z=(0,lt.A)(function*(dt,Bt,Se,X){Lt.Rm.info("REF0:"),Lt.Rm.info("Drawing class diagram (v3)",Bt);const{securityLevel:re,state:S,layout:ee}=(0,w.D7)(),Rt=X.db.getData(),qt=(0,D.A)(Bt,re);Rt.type=X.type,Rt.layoutAlgorithm=(0,ut.q7)(ee),Rt.nodeSpacing=S?.nodeSpacing||50,Rt.rankSpacing=S?.rankSpacing||50,Rt.markers=["aggregation","extension","composition","dependency","lollipop"],Rt.diagramId=Bt,yield(0,ut.XX)(Rt,qt),G._K.insertTitle(qt,"classDiagramTitleText",S?.titleTopMargin??25,X.db.getDiagramTitle()),(0,Mt.P)(qt,8,"classDiagram",S?.useMaxWidth??!0)});return function(dt,Bt,Se,X){return z.apply(this,arguments)}}(),"draw"),getDir:Or}},55041:(ri,Er,P)=>{"use strict";P.r(Er),P.d(Er,{diagram:()=>hr});var lt=P(54256),j=(P(97787),P(5675),P(8086),P(72271),P(98954),P(36384),P(87452),P(32239),P(19753),P(59355),P(52052),P(79006),P(32303)),hr={parser:lt._$,get db(){return new lt.NM},renderer:lt.Lh,styles:lt.tM,init:(0,j.K2)(ze=>{ze.class||(ze.class={}),ze.class.arrowMarkerAbsolute=ze.arrowMarkerAbsolute},"init")}},55559:(ri,Er,P)=>{"use strict";P.r(Er),P.d(Er,{diagram:()=>z});var bt,lt=P(89204),ie=P(45027),L=P(69664),D=P(8086),Mt=P(19753),ut=P(80525),G=P(52052),w=P(79006),Lt=P(32303),At=P(62233),Ge=P(40622),Gt=(class{constructor(){this.nodes=[],this.levels=new Map,this.outerNodes=[],this.classes=new Map,this.setAccTitle=w.SV,this.getAccTitle=w.iN,this.setDiagramTitle=w.ke,this.getDiagramTitle=w.ab,this.getAccDescription=w.m7,this.setAccDescription=w.EI}getNodes(){return this.nodes}getConfig(){const dt=w.UI,Bt=(0,w.zj)();return(0,G.$t)({...dt.treemap,...Bt.treemap??{}})}addNode(dt,Bt){this.nodes.push(dt),this.levels.set(dt,Bt),0===Bt&&(this.outerNodes.push(dt),this.root??=dt)}getRoot(){return{name:"",children:this.outerNodes}}addClass(dt,Bt){const Se=this.classes.get(dt)??{id:dt,styles:[],textStyles:[]},X=Bt.replace(/\\,/g,"\xa7\xa7\xa7").replace(/,/g,";").replace(/\xa7\xa7\xa7/g,",").split(";");X&&X.forEach(re=>{(0,Mt.KX)(re)&&(Se?.textStyles?Se.textStyles.push(re):Se.textStyles=[re]),Se?.styles?Se.styles.push(re):Se.styles=[re]}),this.classes.set(dt,Se)}getClasses(){return this.classes}getStylesForClass(dt){return this.classes.get(dt)?.styles??[]}clear(){(0,w.IU)(),this.nodes=[],this.levels=new Map,this.outerNodes=[],this.classes=new Map,this.root=void 0}static#t=bt=()=>((0,ie.A)(this,"TreeMapDB"),(0,Lt.K2)(this,"TreeMapDB"),this)},bt());function j(dt){if(!dt.length)return[];const Bt=[],Se=[];return dt.forEach(X=>{const re={name:X.name,children:"Leaf"===X.type?void 0:[]};for(re.classSelector=X?.classSelector,X?.cssCompiledStyles&&(re.cssCompiledStyles=[X.cssCompiledStyles]),"Leaf"===X.type&&void 0!==X.value&&(re.value=X.value);Se.length>0&&Se[Se.length-1].level>=X.level;)Se.pop();if(0===Se.length)Bt.push(re);else{const S=Se[Se.length-1].node;S.children?S.children.push(re):S.children=[re]}"Leaf"!==X.type&&Se.push({node:re,level:X.level})}),Bt}(0,Lt.K2)(j,"buildHierarchy");var hr=(0,Lt.K2)((dt,Bt)=>{(0,ut.S)(dt,Bt);const Se=[];for(const S of dt.TreemapRows??[])"ClassDefStatement"===S.$type&&Bt.addClass(S.className??"",S.styleText??"");for(const S of dt.TreemapRows??[]){const ee=S.item;if(!ee)continue;const Rt=S.indent?parseInt(S.indent):0,qt=ze(ee),V=ee.classSelector?Bt.getStylesForClass(ee.classSelector):[],gt=V.length>0?V.join(";"):void 0;Se.push({level:Rt,name:qt,type:ee.$type,value:ee.value,classSelector:ee.classSelector,cssCompiledStyles:gt})}const X=j(Se),re=(0,Lt.K2)((S,ee)=>{for(const Rt of S)Bt.addNode(Rt,ee),Rt.children&&Rt.children.length>0&&re(Rt.children,ee+1)},"addNodesRecursively");re(X,0)},"populate"),ze=(0,Lt.K2)(dt=>dt.name?String(dt.name):"","getItemName"),vr={parser:{yy:void 0},parse:(0,Lt.K2)(function(){var dt=(0,lt.A)(function*(Bt){try{const Se=At.qg,X=yield Se("treemap",Bt);Lt.Rm.debug("Treemap AST:",X);const re=vr.parser?.yy;if(!(re instanceof Gt))throw new Error("parser.parser?.yy was not a TreemapDB. This is due to a bug within Mermaid, please report this issue at https://github.com/mermaid-js/mermaid/issues.");hr(X,re)}catch(Se){throw Lt.Rm.error("Error parsing treemap:",Se),Se}});return function(Bt){return dt.apply(this,arguments)}}(),"parse")},Or={draw:(0,Lt.K2)((dt,Bt,Se,X)=>{const re=X.db,S=re.getConfig(),ee=S.padding??10,Rt=re.getDiagramTitle(),qt=re.getRoot(),{themeVariables:V}=(0,w.zj)();if(!qt)return;const gt=Rt?30:0,Y=(0,L.D)(Bt),Nt=S.nodeWidth?10*S.nodeWidth:960,St=S.nodeHeight?10*S.nodeHeight:500,Ut=Nt,ye=St+gt;let le;Y.attr("viewBox",`0 0 ${Ut} ${ye}`),(0,w.a$)(Y,ye,Ut,S.useMaxWidth);try{const ht=S.valueFormat||",";if("$0,0"===ht)le=(0,Lt.K2)(Ot=>"$"+(0,Ge.GPZ)(",")(Ot),"valueFormat");else if(ht.startsWith("$")&&ht.includes(",")){const Ot=/\.\d+/.exec(ht),H=Ot?Ot[0]:"";le=(0,Lt.K2)(ot=>"$"+(0,Ge.GPZ)(","+H)(ot),"valueFormat")}else if(ht.startsWith("$")){const Ot=ht.substring(1);le=(0,Lt.K2)(H=>"$"+(0,Ge.GPZ)(Ot||"")(H),"valueFormat")}else le=(0,Ge.GPZ)(ht)}catch(ht){Lt.Rm.error("Error creating format function:",ht),le=(0,Ge.GPZ)(",")}const Pe=(0,Ge.UMr)().range(["transparent",V.cScale0,V.cScale1,V.cScale2,V.cScale3,V.cScale4,V.cScale5,V.cScale6,V.cScale7,V.cScale8,V.cScale9,V.cScale10,V.cScale11]),oe=(0,Ge.UMr)().range(["transparent",V.cScalePeer0,V.cScalePeer1,V.cScalePeer2,V.cScalePeer3,V.cScalePeer4,V.cScalePeer5,V.cScalePeer6,V.cScalePeer7,V.cScalePeer8,V.cScalePeer9,V.cScalePeer10,V.cScalePeer11]),qe=(0,Ge.UMr)().range([V.cScaleLabel0,V.cScaleLabel1,V.cScaleLabel2,V.cScaleLabel3,V.cScaleLabel4,V.cScaleLabel5,V.cScaleLabel6,V.cScaleLabel7,V.cScaleLabel8,V.cScaleLabel9,V.cScaleLabel10,V.cScaleLabel11]);Rt&&Y.append("text").attr("x",Ut/2).attr("y",gt/2).attr("class","treemapTitle").attr("text-anchor","middle").attr("dominant-baseline","middle").text(Rt);const We=Y.append("g").attr("transform",`translate(0, ${gt})`).attr("class","treemapContainer"),Et=(0,Ge.Sk5)(qt).sum(ht=>ht.value??0).sort((ht,Ot)=>(Ot.value??0)-(ht.value??0)),B=(0,Ge.hkb)().size([Nt,St]).paddingTop(ht=>ht.children&&ht.children.length>0?35:0).paddingInner(ee).paddingLeft(ht=>ht.children&&ht.children.length>0?10:0).paddingRight(ht=>ht.children&&ht.children.length>0?10:0).paddingBottom(ht=>ht.children&&ht.children.length>0?10:0).round(!0)(Et),N=B.descendants().filter(ht=>ht.children&&ht.children.length>0),et=We.selectAll(".treemapSection").data(N).enter().append("g").attr("class","treemapSection").attr("transform",ht=>`translate(${ht.x0},${ht.y0})`);et.append("rect").attr("width",ht=>ht.x1-ht.x0).attr("height",25).attr("class","treemapSectionHeader").attr("fill","none").attr("fill-opacity",.6).attr("stroke-width",.6).attr("style",ht=>0===ht.depth?"display: none;":""),et.append("clipPath").attr("id",(ht,Ot)=>`clip-section-${Bt}-${Ot}`).append("rect").attr("width",ht=>Math.max(0,ht.x1-ht.x0-12)).attr("height",25),et.append("rect").attr("width",ht=>ht.x1-ht.x0).attr("height",ht=>ht.y1-ht.y0).attr("class",(ht,Ot)=>`treemapSection section${Ot}`).attr("fill",ht=>Pe(ht.data.name)).attr("fill-opacity",.6).attr("stroke",ht=>oe(ht.data.name)).attr("stroke-width",2).attr("stroke-opacity",.4).attr("style",ht=>{if(0===ht.depth)return"display: none;";const Ot=(0,Mt.GX)({cssCompiledStyles:ht.data.cssCompiledStyles});return Ot.nodeStyles+";"+Ot.borderStyles.join(";")}),et.append("text").attr("class","treemapSectionLabel").attr("x",6).attr("y",12.5).attr("dominant-baseline","middle").text(ht=>0===ht.depth?"":ht.data.name).attr("font-weight","bold").attr("style",ht=>0===ht.depth?"display: none;":"dominant-baseline: middle; font-size: 12px; fill:"+qe(ht.data.name)+"; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;"+(0,Mt.GX)({cssCompiledStyles:ht.data.cssCompiledStyles}).labelStyles.replace("color:","fill:")).each(function(ht){if(0===ht.depth)return;const Ot=(0,Ge.Ltv)(this),H=ht.data.name;Ot.text(H);const ot=ht.x1-ht.x0;let Pt;Pt=!1!==S.showValues&&ht.value?ot-10-30-10-6:ot-6-6;const pe=Math.max(15,Pt),Re=Ot.node();if(Re.getComputedTextLength()>pe){let yr=H;for(;yr.length>0;){if(yr=H.substring(0,yr.length-1),0===yr.length){Ot.text("..."),Re.getComputedTextLength()>pe&&Ot.text("");break}if(Ot.text(yr+"..."),Re.getComputedTextLength()<=pe)break}}}),!1!==S.showValues&&et.append("text").attr("class","treemapSectionValue").attr("x",ht=>ht.x1-ht.x0-10).attr("y",12.5).attr("text-anchor","end").attr("dominant-baseline","middle").text(ht=>ht.value?le(ht.value):"").attr("font-style","italic").attr("style",ht=>0===ht.depth?"display: none;":"text-anchor: end; dominant-baseline: middle; font-size: 10px; fill:"+qe(ht.data.name)+"; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;"+(0,Mt.GX)({cssCompiledStyles:ht.data.cssCompiledStyles}).labelStyles.replace("color:","fill:"));const yt=B.leaves(),it=We.selectAll(".treemapLeafGroup").data(yt).enter().append("g").attr("class",(ht,Ot)=>`treemapNode treemapLeafGroup leaf${Ot}${ht.data.classSelector?` ${ht.data.classSelector}`:""}x`).attr("transform",ht=>`translate(${ht.x0},${ht.y0})`);it.append("rect").attr("width",ht=>ht.x1-ht.x0).attr("height",ht=>ht.y1-ht.y0).attr("class","treemapLeaf").attr("fill",ht=>Pe(ht.parent?ht.parent.data.name:ht.data.name)).attr("style",ht=>(0,Mt.GX)({cssCompiledStyles:ht.data.cssCompiledStyles}).nodeStyles).attr("fill-opacity",.3).attr("stroke",ht=>Pe(ht.parent?ht.parent.data.name:ht.data.name)).attr("stroke-width",3),it.append("clipPath").attr("id",(ht,Ot)=>`clip-${Bt}-${Ot}`).append("rect").attr("width",ht=>Math.max(0,ht.x1-ht.x0-4)).attr("height",ht=>Math.max(0,ht.y1-ht.y0-4)),it.append("text").attr("class","treemapLabel").attr("x",ht=>(ht.x1-ht.x0)/2).attr("y",ht=>(ht.y1-ht.y0)/2).attr("style",ht=>"text-anchor: middle; dominant-baseline: middle; font-size: 38px;fill:"+qe(ht.data.name)+";"+(0,Mt.GX)({cssCompiledStyles:ht.data.cssCompiledStyles}).labelStyles.replace("color:","fill:")).attr("clip-path",(ht,Ot)=>`url(#clip-${Bt}-${Ot})`).text(ht=>ht.data.name).each(function(ht){const Ot=(0,Ge.Ltv)(this),H=ht.x1-ht.x0,ot=ht.y1-ht.y0,ke=Ot.node(),Zt=H-8,pe=ot-8;if(Zt<10||pe<10)return void Ot.style("display","none");let Re=parseInt(Ot.style("font-size"),10);for(;ke.getComputedTextLength()>Zt&&Re>8;)Re--,Ot.style("font-size",`${Re}px`);let we=Math.max(6,Math.min(28,Math.round(.6*Re))),sr=Re+2+we;for(;sr>pe&&Re>8&&(Re--,we=Math.max(6,Math.min(28,Math.round(.6*Re))),!(we<6&&8===Re));)Ot.style("font-size",`${Re}px`),sr=Re+2+we;Ot.style("font-size",`${Re}px`),(ke.getComputedTextLength()>Zt||Re<8||pe<Re)&&Ot.style("display","none")}),!1!==S.showValues&&it.append("text").attr("class","treemapValue").attr("x",Ot=>(Ot.x1-Ot.x0)/2).attr("y",function(Ot){return(Ot.y1-Ot.y0)/2}).attr("style",Ot=>"text-anchor: middle; dominant-baseline: hanging; font-size: 28px;fill:"+qe(Ot.data.name)+";"+(0,Mt.GX)({cssCompiledStyles:Ot.data.cssCompiledStyles}).labelStyles.replace("color:","fill:")).attr("clip-path",(Ot,H)=>`url(#clip-${Bt}-${H})`).text(Ot=>Ot.value?le(Ot.value):"").each(function(Ot){const H=(0,Ge.Ltv)(this),ot=this.parentNode;if(!ot)return void H.style("display","none");const ke=(0,Ge.Ltv)(ot).select(".treemapLabel");if(ke.empty()||"none"===ke.style("display"))return void H.style("display","none");const Pt=parseFloat(ke.style("font-size")),de=Math.max(6,Math.min(28,Math.round(.6*Pt)));H.style("font-size",`${de}px`);const mr=(Ot.y1-Ot.y0)/2+Pt/2+2;H.attr("y",mr);const ve=Ot.y1-Ot.y0-4,ce=Ot.x1-Ot.x0-8;H.node().getComputedTextLength()>ce||mr+de>ve||de<6?H.style("display","none"):H.style("display",null)}),(0,D.P)(Y,S.diagramPadding??8,"flowchart",S?.useMaxWidth||!1)},"draw"),getClasses:(0,Lt.K2)(function(dt,Bt){return Bt.db.getClasses()},"getClasses")},Be={sectionStrokeColor:"black",sectionStrokeWidth:"1",sectionFillColor:"#efefef",leafStrokeColor:"black",leafStrokeWidth:"1",leafFillColor:"#efefef",labelColor:"black",labelFontSize:"12px",valueFontSize:"10px",valueColor:"black",titleColor:"black",titleFontSize:"14px"},Xe=(0,Lt.K2)(({treemap:dt}={})=>{const Bt=(0,G.$t)(Be,dt);return`\n  .treemapNode.section {\n    stroke: ${Bt.sectionStrokeColor};\n    stroke-width: ${Bt.sectionStrokeWidth};\n    fill: ${Bt.sectionFillColor};\n  }\n  .treemapNode.leaf {\n    stroke: ${Bt.leafStrokeColor};\n    stroke-width: ${Bt.leafStrokeWidth};\n    fill: ${Bt.leafFillColor};\n  }\n  .treemapLabel {\n    fill: ${Bt.labelColor};\n    font-size: ${Bt.labelFontSize};\n  }\n  .treemapValue {\n    fill: ${Bt.valueColor};\n    font-size: ${Bt.valueFontSize};\n  }\n  .treemapTitle {\n    fill: ${Bt.titleColor};\n    font-size: ${Bt.titleFontSize};\n  }\n  `},"getStyles"),z={parser:vr,get db(){return new Gt},renderer:Or,styles:Xe}},57746:(ri,Er,P)=>{"use strict";P.r(Er),P.d(Er,{diagram:()=>Se});var ut,G,lt=P(45027),ie=P(79006),L=P(32303),D=P(40622),Mt=P(76051),w=function(){var X=(0,L.K2)(function(gt,Y,Nt,St){for(Nt=Nt||{},St=gt.length;St--;Nt[gt[St]]=Y);return Nt},"o"),re=[1,9],S=[1,10],ee=[1,5,10,12],Rt={trace:(0,L.K2)(function(){},"trace"),yy:{},symbols_:{error:2,start:3,SANKEY:4,NEWLINE:5,csv:6,opt_eof:7,record:8,csv_tail:9,EOF:10,"field[source]":11,COMMA:12,"field[target]":13,"field[value]":14,field:15,escaped:16,non_escaped:17,DQUOTE:18,ESCAPED_TEXT:19,NON_ESCAPED_TEXT:20,$accept:0,$end:1},terminals_:{2:"error",4:"SANKEY",5:"NEWLINE",10:"EOF",11:"field[source]",12:"COMMA",13:"field[target]",14:"field[value]",18:"DQUOTE",19:"ESCAPED_TEXT",20:"NON_ESCAPED_TEXT"},productions_:[0,[3,4],[6,2],[9,2],[9,0],[7,1],[7,0],[8,5],[15,1],[15,1],[16,3],[17,1]],performAction:(0,L.K2)(function(Y,Nt,St,Ut,ye,le,Pe){var oe=le.length-1;switch(ye){case 7:const qe=Ut.findOrCreateNode(le[oe-4].trim().replaceAll('""','"')),We=Ut.findOrCreateNode(le[oe-2].trim().replaceAll('""','"')),Et=parseFloat(le[oe].trim());Ut.addLink(qe,We,Et);break;case 8:case 9:case 11:this.$=le[oe];break;case 10:this.$=le[oe-1]}},"anonymous"),table:[{3:1,4:[1,2]},{1:[3]},{5:[1,3]},{6:4,8:5,15:6,16:7,17:8,18:re,20:S},{1:[2,6],7:11,10:[1,12]},X(S,[2,4],{9:13,5:[1,14]}),{12:[1,15]},X(ee,[2,8]),X(ee,[2,9]),{19:[1,16]},X(ee,[2,11]),{1:[2,1]},{1:[2,5]},X(S,[2,2]),{6:17,8:5,15:6,16:7,17:8,18:re,20:S},{15:18,16:7,17:8,18:re,20:S},{18:[1,19]},X(S,[2,3]),{12:[1,20]},X(ee,[2,10]),{15:21,16:7,17:8,18:re,20:S},X([1,5,10],[2,7])],defaultActions:{11:[2,1],12:[2,5]},parseError:(0,L.K2)(function(Y,Nt){if(!Nt.recoverable){var St=new Error(Y);throw St.hash=Nt,St}this.trace(Y)},"parseError"),parse:(0,L.K2)(function(Y){var Nt=this,St=[0],Ut=[],ye=[null],le=[],Pe=this.table,oe="",qe=0,We=0,Et=0,N=le.slice.call(arguments,1),et=Object.create(this.lexer),yt={yy:{}};for(var it in this.yy)Object.prototype.hasOwnProperty.call(this.yy,it)&&(yt.yy[it]=this.yy[it]);et.setInput(Y,yt.yy),yt.yy.lexer=et,yt.yy.parser=this,typeof et.yylloc>"u"&&(et.yylloc={});var rt=et.yylloc;le.push(rt);var _t=et.options&&et.options.ranges;function Ot(){var we;return"number"!=typeof(we=Ut.pop()||et.lex()||1)&&(we instanceof Array&&(we=(Ut=we).pop()),we=Nt.symbols_[we]||we),we}this.parseError="function"==typeof yt.yy.parseError?yt.yy.parseError:Object.getPrototypeOf(this).parseError,(0,L.K2)(function ht(we){St.length=St.length-2*we,ye.length=ye.length-we,le.length=le.length-we},"popStack"),(0,L.K2)(Ot,"lex");for(var H,ot,ke,Pt,pe,Ze,de,mr,Re={};;){if(this.defaultActions[ke=St[St.length-1]]?Pt=this.defaultActions[ke]:((null===H||typeof H>"u")&&(H=Ot()),Pt=Pe[ke]&&Pe[ke][H]),typeof Pt>"u"||!Pt.length||!Pt[0]){var Wt;for(Ze in mr=[],Pe[ke])this.terminals_[Ze]&&Ze>2&&mr.push("'"+this.terminals_[Ze]+"'");Wt=et.showPosition?"Parse error on line "+(qe+1)+":\n"+et.showPosition()+"\nExpecting "+mr.join(", ")+", got '"+(this.terminals_[H]||H)+"'":"Parse error on line "+(qe+1)+": Unexpected "+(1==H?"end of input":"'"+(this.terminals_[H]||H)+"'"),this.parseError(Wt,{text:et.match,token:this.terminals_[H]||H,line:et.yylineno,loc:rt,expected:mr})}if(Pt[0]instanceof Array&&Pt.length>1)throw new Error("Parse Error: multiple actions possible at state: "+ke+", token: "+H);switch(Pt[0]){case 1:St.push(H),ye.push(et.yytext),le.push(et.yylloc),St.push(Pt[1]),H=null,ot?(H=ot,ot=null):(We=et.yyleng,oe=et.yytext,qe=et.yylineno,rt=et.yylloc,Et>0&&Et--);break;case 2:if(Re.$=ye[ye.length-(de=this.productions_[Pt[1]][1])],Re._$={first_line:le[le.length-(de||1)].first_line,last_line:le[le.length-1].last_line,first_column:le[le.length-(de||1)].first_column,last_column:le[le.length-1].last_column},_t&&(Re._$.range=[le[le.length-(de||1)].range[0],le[le.length-1].range[1]]),typeof(pe=this.performAction.apply(Re,[oe,We,qe,yt.yy,Pt[1],ye,le].concat(N)))<"u")return pe;de&&(St=St.slice(0,-1*de*2),ye=ye.slice(0,-1*de),le=le.slice(0,-1*de)),St.push(this.productions_[Pt[1]][0]),ye.push(Re.$),le.push(Re._$),St.push(Pe[St[St.length-2]][St[St.length-1]]);break;case 3:return!0}}return!0},"parse")};function V(){this.yy={}}return Rt.lexer=function(){return{EOF:1,parseError:(0,L.K2)(function(Nt,St){if(!this.yy.parser)throw new Error(Nt);this.yy.parser.parseError(Nt,St)},"parseError"),setInput:(0,L.K2)(function(Y,Nt){return this.yy=Nt||this.yy||{},this._input=Y,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},"setInput"),input:(0,L.K2)(function(){var Y=this._input[0];return this.yytext+=Y,this.yyleng++,this.offset++,this.match+=Y,this.matched+=Y,Y.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),Y},"input"),unput:(0,L.K2)(function(Y){var Nt=Y.length,St=Y.split(/(?:\r\n?|\n)/g);this._input=Y+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-Nt),this.offset-=Nt;var Ut=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),St.length-1&&(this.yylineno-=St.length-1);var ye=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:St?(St.length===Ut.length?this.yylloc.first_column:0)+Ut[Ut.length-St.length].length-St[0].length:this.yylloc.first_column-Nt},this.options.ranges&&(this.yylloc.range=[ye[0],ye[0]+this.yyleng-Nt]),this.yyleng=this.yytext.length,this},"unput"),more:(0,L.K2)(function(){return this._more=!0,this},"more"),reject:(0,L.K2)(function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},"reject"),less:(0,L.K2)(function(Y){this.unput(this.match.slice(Y))},"less"),pastInput:(0,L.K2)(function(){var Y=this.matched.substr(0,this.matched.length-this.match.length);return(Y.length>20?"...":"")+Y.substr(-20).replace(/\n/g,"")},"pastInput"),upcomingInput:(0,L.K2)(function(){var Y=this.match;return Y.length<20&&(Y+=this._input.substr(0,20-Y.length)),(Y.substr(0,20)+(Y.length>20?"...":"")).replace(/\n/g,"")},"upcomingInput"),showPosition:(0,L.K2)(function(){var Y=this.pastInput(),Nt=new Array(Y.length+1).join("-");return Y+this.upcomingInput()+"\n"+Nt+"^"},"showPosition"),test_match:(0,L.K2)(function(Y,Nt){var St,Ut,ye;if(this.options.backtrack_lexer&&(ye={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(ye.yylloc.range=this.yylloc.range.slice(0))),(Ut=Y[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=Ut.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:Ut?Ut[Ut.length-1].length-Ut[Ut.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+Y[0].length},this.yytext+=Y[0],this.match+=Y[0],this.matches=Y,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(Y[0].length),this.matched+=Y[0],St=this.performAction.call(this,this.yy,this,Nt,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),St)return St;if(this._backtrack){for(var le in ye)this[le]=ye[le];return!1}return!1},"test_match"),next:(0,L.K2)(function(){if(this.done)return this.EOF;var Y,Nt,St,Ut;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var ye=this._currentRules(),le=0;le<ye.length;le++)if((St=this._input.match(this.rules[ye[le]]))&&(!Nt||St[0].length>Nt[0].length)){if(Nt=St,Ut=le,this.options.backtrack_lexer){if(!1!==(Y=this.test_match(St,ye[le])))return Y;if(this._backtrack){Nt=!1;continue}return!1}if(!this.options.flex)break}return Nt?!1!==(Y=this.test_match(Nt,ye[Ut]))&&Y:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},"next"),lex:(0,L.K2)(function(){return this.next()||this.lex()},"lex"),begin:(0,L.K2)(function(Nt){this.conditionStack.push(Nt)},"begin"),popState:(0,L.K2)(function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},"popState"),_currentRules:(0,L.K2)(function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},"_currentRules"),topState:(0,L.K2)(function(Nt){return(Nt=this.conditionStack.length-1-Math.abs(Nt||0))>=0?this.conditionStack[Nt]:"INITIAL"},"topState"),pushState:(0,L.K2)(function(Nt){this.begin(Nt)},"pushState"),stateStackSize:(0,L.K2)(function(){return this.conditionStack.length},"stateStackSize"),options:{"case-insensitive":!0},performAction:(0,L.K2)(function(Nt,St,Ut,ye){switch(Ut){case 0:case 1:return this.pushState("csv"),4;case 2:return 10;case 3:return 5;case 4:return 12;case 5:return this.pushState("escaped_text"),18;case 6:return 20;case 7:return this.popState("escaped_text"),18;case 8:return 19}},"anonymous"),rules:[/^(?:sankey-beta\b)/i,/^(?:sankey\b)/i,/^(?:$)/i,/^(?:((\u000D\u000A)|(\u000A)))/i,/^(?:(\u002C))/i,/^(?:(\u0022))/i,/^(?:([\u0020-\u0021\u0023-\u002B\u002D-\u007E])*)/i,/^(?:(\u0022)(?!(\u0022)))/i,/^(?:(([\u0020-\u0021\u0023-\u002B\u002D-\u007E])|(\u002C)|(\u000D)|(\u000A)|(\u0022)(\u0022))*)/i],conditions:{csv:{rules:[2,3,4,5,6,7,8],inclusive:!1},escaped_text:{rules:[7,8],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,5,6,7,8],inclusive:!0}}}}(),(0,L.K2)(V,"Parser"),V.prototype=Rt,Rt.Parser=V,new V}();w.parser=w;var Lt=w,At=[],Ge=[],bt=new Map,Gt=(0,L.K2)(()=>{At=[],Ge=[],bt=new Map,(0,ie.IU)()},"clear"),j=(class{constructor(X,re,S=0){this.source=X,this.target=re,this.value=S}static#t=ut=()=>((0,lt.A)(this,"SankeyLink"),(0,L.K2)(this,"SankeyLink"),this)},ut()),hr=(0,L.K2)((X,re,S)=>{At.push(new j(X,re,S))},"addLink"),ze=(class{constructor(X){this.ID=X}static#t=G=()=>((0,lt.A)(this,"SankeyNode"),(0,L.K2)(this,"SankeyNode"),this)},G()),vr=(0,L.K2)(X=>{X=ie.Y2.sanitizeText(X,(0,ie.D7)());let re=bt.get(X);return void 0===re&&(re=new ze(X),bt.set(X,re),Ge.push(re)),re},"findOrCreateNode"),Wr=(0,L.K2)(()=>Ge,"getNodes"),Br=(0,L.K2)(()=>At,"getLinks"),Gr=(0,L.K2)(()=>({nodes:Ge.map(X=>({id:X.ID})),links:At.map(X=>({source:X.source.ID,target:X.target.ID,value:X.value}))}),"getGraph"),aa={nodesMap:bt,getConfig:(0,L.K2)(()=>(0,ie.D7)().sankey,"getConfig"),getNodes:Wr,getLinks:Br,getGraph:Gr,addLink:hr,findOrCreateNode:vr,getAccTitle:ie.iN,setAccTitle:ie.SV,getAccDescription:ie.m7,setAccDescription:ie.EI,getDiagramTitle:ie.ab,setDiagramTitle:ie.ke,clear:Gt},zr=(()=>{var X;return class lh{static next(ee){return new lh(ee+ ++lh.count)}constructor(ee){this.id=ee,this.href=`#${ee}`}toString(){return"url("+this.href+")"}static#t=X=()=>((0,L.K2)(this,"Uid"),this.count=0,this)},X()})(),Or={left:Mt.P9,right:Mt.yp,center:Mt.jr,justify:Mt.oT},Ir={draw:(0,L.K2)(function(X,re,S,ee){const{securityLevel:Rt,sankey:qt}=(0,ie.D7)(),V=ie.ME.sankey;let gt;"sandbox"===Rt&&(gt=(0,D.Ltv)("#i"+re));const Y=(0,D.Ltv)("sandbox"===Rt?gt.nodes()[0].contentDocument.body:"body"),Nt="sandbox"===Rt?Y.select(`[id="${re}"]`):(0,D.Ltv)(`[id="${re}"]`),St=qt?.width??V.width,Ut=qt?.height??V.width,ye=qt?.useMaxWidth??V.useMaxWidth,le=qt?.nodeAlignment??V.nodeAlignment,Pe=qt?.prefix??V.prefix,oe=qt?.suffix??V.suffix,qe=qt?.showValues??V.showValues,We=ee.db.getGraph(),Et=Or[le];(0,Mt.IZ)().nodeId(_t=>_t.id).nodeWidth(10).nodePadding(10+(qe?15:0)).nodeAlign(Et).extent([[0,0],[St,Ut]])(We);const N=(0,D.UMr)(D.zt);Nt.append("g").attr("class","nodes").selectAll(".node").data(We.nodes).join("g").attr("class","node").attr("id",_t=>(_t.uid=zr.next("node-")).id).attr("transform",function(_t){return"translate("+_t.x0+","+_t.y0+")"}).attr("x",_t=>_t.x0).attr("y",_t=>_t.y0).append("rect").attr("height",_t=>_t.y1-_t.y0).attr("width",_t=>_t.x1-_t.x0).attr("fill",_t=>N(_t.id));const et=(0,L.K2)(({id:_t,value:ht})=>qe?`${_t}\n${Pe}${Math.round(100*ht)/100}${oe}`:_t,"getText");Nt.append("g").attr("class","node-labels").attr("font-size",14).selectAll("text").data(We.nodes).join("text").attr("x",_t=>_t.x0<St/2?_t.x1+6:_t.x0-6).attr("y",_t=>(_t.y1+_t.y0)/2).attr("dy",(qe?"0":"0.35")+"em").attr("text-anchor",_t=>_t.x0<St/2?"start":"end").text(et);const yt=Nt.append("g").attr("class","links").attr("fill","none").attr("stroke-opacity",.5).selectAll(".link").data(We.links).join("g").attr("class","link").style("mix-blend-mode","multiply"),it=qt?.linkColor??"gradient";if("gradient"===it){const _t=yt.append("linearGradient").attr("id",ht=>(ht.uid=zr.next("linearGradient-")).id).attr("gradientUnits","userSpaceOnUse").attr("x1",ht=>ht.source.x1).attr("x2",ht=>ht.target.x0);_t.append("stop").attr("offset","0%").attr("stop-color",ht=>N(ht.source.id)),_t.append("stop").attr("offset","100%").attr("stop-color",ht=>N(ht.target.id))}let rt;switch(it){case"gradient":rt=(0,L.K2)(_t=>_t.uid,"coloring");break;case"source":rt=(0,L.K2)(_t=>N(_t.source.id),"coloring");break;case"target":rt=(0,L.K2)(_t=>N(_t.target.id),"coloring");break;default:rt=it}yt.append("path").attr("d",(0,Mt.Ku)()).attr("stroke",rt).attr("stroke-width",_t=>Math.max(1,_t.width)),(0,ie.ot)(void 0,Nt,0,ye)},"draw")},Xe=(0,L.K2)(X=>X.replaceAll(/^[^\S\n\r]+|[^\S\n\r]+$/g,"").replaceAll(/([\n\r])+/g,"\n").trim(),"prepareTextForParsing"),dt=(0,L.K2)(X=>`.label {\n      font-family: ${X.fontFamily};\n    }`,"getStyles"),Bt=Lt.parse.bind(Lt);Lt.parse=X=>Bt(Xe(X));var Se={styles:dt,parser:Lt,db:aa,renderer:Ir}},59301:(ri,Er,P)=>{"use strict";P.r(Er),P.d(Er,{diagram:()=>qt});var Mt,ut,lt=P(45027),ie=P(79006),L=P(32303),D=P(40622),G=function(){var V=(0,L.K2)(function(je,Ke,fr,lr){for(fr=fr||{},lr=je.length;lr--;fr[je[lr]]=Ke);return fr},"o"),gt=[1,3],Y=[1,4],Nt=[1,5],St=[1,6],Ut=[1,7],ye=[1,4,5,10,12,13,14,18,25,35,37,39,41,42,48,50,51,52,53,54,55,56,57,60,61,63,64,65,66,67],le=[1,4,5,10,12,13,14,18,25,28,35,37,39,41,42,48,50,51,52,53,54,55,56,57,60,61,63,64,65,66,67],Pe=[55,56,57],oe=[2,36],qe=[1,37],We=[1,36],Et=[1,38],Tt=[1,35],B=[1,43],N=[1,41],et=[1,14],yt=[1,23],it=[1,18],rt=[1,19],_t=[1,20],ht=[1,21],Ot=[1,22],H=[1,24],ot=[1,25],ke=[1,26],Pt=[1,27],Zt=[1,28],pe=[1,29],Re=[1,32],Ze=[1,33],de=[1,34],yr=[1,39],mr=[1,40],Wt=[1,42],we=[1,44],sr=[1,62],ve=[1,61],ce=[4,5,8,10,12,13,14,18,44,47,49,55,56,57,63,64,65,66,67],Ee=[1,65],Ae=[1,66],er=[1,67],Qe=[1,68],Dr=[1,69],_e=[1,70],Yr=[1,71],nr=[1,72],te=[1,73],ne=[1,74],be=[1,75],ar=[1,76],g=[4,5,6,7,8,9,10,11,12,13,14,15,18],y=[1,90],E=[1,91],M=[1,92],m=[1,99],A=[1,93],v=[1,96],b=[1,94],C=[1,95],R=[1,97],Q=[1,98],mt=[1,102],zt=[10,55,56,57],jt=[4,5,6,8,10,11,13,17,18,19,20,55,56,57],Vt={trace:(0,L.K2)(function(){},"trace"),yy:{},symbols_:{error:2,idStringToken:3,ALPHA:4,NUM:5,NODE_STRING:6,DOWN:7,MINUS:8,DEFAULT:9,COMMA:10,COLON:11,AMP:12,BRKT:13,MULT:14,UNICODE_TEXT:15,styleComponent:16,UNIT:17,SPACE:18,STYLE:19,PCT:20,idString:21,style:22,stylesOpt:23,classDefStatement:24,CLASSDEF:25,start:26,eol:27,QUADRANT:28,document:29,line:30,statement:31,axisDetails:32,quadrantDetails:33,points:34,title:35,title_value:36,acc_title:37,acc_title_value:38,acc_descr:39,acc_descr_value:40,acc_descr_multiline_value:41,section:42,text:43,point_start:44,point_x:45,point_y:46,class_name:47,"X-AXIS":48,"AXIS-TEXT-DELIMITER":49,"Y-AXIS":50,QUADRANT_1:51,QUADRANT_2:52,QUADRANT_3:53,QUADRANT_4:54,NEWLINE:55,SEMI:56,EOF:57,alphaNumToken:58,textNoTagsToken:59,STR:60,MD_STR:61,alphaNum:62,PUNCTUATION:63,PLUS:64,EQUALS:65,DOT:66,UNDERSCORE:67,$accept:0,$end:1},terminals_:{2:"error",4:"ALPHA",5:"NUM",6:"NODE_STRING",7:"DOWN",8:"MINUS",9:"DEFAULT",10:"COMMA",11:"COLON",12:"AMP",13:"BRKT",14:"MULT",15:"UNICODE_TEXT",17:"UNIT",18:"SPACE",19:"STYLE",20:"PCT",25:"CLASSDEF",28:"QUADRANT",35:"title",36:"title_value",37:"acc_title",38:"acc_title_value",39:"acc_descr",40:"acc_descr_value",41:"acc_descr_multiline_value",42:"section",44:"point_start",45:"point_x",46:"point_y",47:"class_name",48:"X-AXIS",49:"AXIS-TEXT-DELIMITER",50:"Y-AXIS",51:"QUADRANT_1",52:"QUADRANT_2",53:"QUADRANT_3",54:"QUADRANT_4",55:"NEWLINE",56:"SEMI",57:"EOF",60:"STR",61:"MD_STR",63:"PUNCTUATION",64:"PLUS",65:"EQUALS",66:"DOT",67:"UNDERSCORE"},productions_:[0,[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[16,1],[16,1],[16,1],[16,1],[16,1],[16,1],[16,1],[16,1],[16,1],[16,1],[21,1],[21,2],[22,1],[22,2],[23,1],[23,3],[24,5],[26,2],[26,2],[26,2],[29,0],[29,2],[30,2],[31,0],[31,1],[31,2],[31,1],[31,1],[31,1],[31,2],[31,2],[31,2],[31,1],[31,1],[34,4],[34,5],[34,5],[34,6],[32,4],[32,3],[32,2],[32,4],[32,3],[32,2],[33,2],[33,2],[33,2],[33,2],[27,1],[27,1],[27,1],[43,1],[43,2],[43,1],[43,1],[62,1],[62,2],[58,1],[58,1],[58,1],[58,1],[58,1],[58,1],[58,1],[58,1],[58,1],[58,1],[58,1],[59,1],[59,1],[59,1]],performAction:(0,L.K2)(function(Ke,fr,lr,br,$e,He,wr){var kr=He.length-1;switch($e){case 23:case 68:this.$=He[kr];break;case 24:case 69:this.$=He[kr-1]+""+He[kr];break;case 26:this.$=He[kr-1]+He[kr];break;case 27:this.$=[He[kr].trim()];break;case 28:He[kr-2].push(He[kr].trim()),this.$=He[kr-2];break;case 29:this.$=He[kr-4],br.addClass(He[kr-2],He[kr]);break;case 37:this.$=[];break;case 42:this.$=He[kr].trim(),br.setDiagramTitle(this.$);break;case 43:this.$=He[kr].trim(),br.setAccTitle(this.$);break;case 44:case 45:this.$=He[kr].trim(),br.setAccDescription(this.$);break;case 46:br.addSection(He[kr].substr(8)),this.$=He[kr].substr(8);break;case 47:br.addPoint(He[kr-3],"",He[kr-1],He[kr],[]);break;case 48:br.addPoint(He[kr-4],He[kr-3],He[kr-1],He[kr],[]);break;case 49:br.addPoint(He[kr-4],"",He[kr-2],He[kr-1],He[kr]);break;case 50:br.addPoint(He[kr-5],He[kr-4],He[kr-2],He[kr-1],He[kr]);break;case 51:br.setXAxisLeftText(He[kr-2]),br.setXAxisRightText(He[kr]);break;case 52:He[kr-1].text+=" \u27f6 ",br.setXAxisLeftText(He[kr-1]);break;case 53:br.setXAxisLeftText(He[kr]);break;case 54:br.setYAxisBottomText(He[kr-2]),br.setYAxisTopText(He[kr]);break;case 55:He[kr-1].text+=" \u27f6 ",br.setYAxisBottomText(He[kr-1]);break;case 56:br.setYAxisBottomText(He[kr]);break;case 57:br.setQuadrant1Text(He[kr]);break;case 58:br.setQuadrant2Text(He[kr]);break;case 59:br.setQuadrant3Text(He[kr]);break;case 60:br.setQuadrant4Text(He[kr]);break;case 64:case 66:this.$={text:He[kr],type:"text"};break;case 65:this.$={text:He[kr-1].text+""+He[kr],type:He[kr-1].type};break;case 67:this.$={text:He[kr],type:"markdown"}}},"anonymous"),table:[{18:gt,26:1,27:2,28:Y,55:Nt,56:St,57:Ut},{1:[3]},{18:gt,26:8,27:2,28:Y,55:Nt,56:St,57:Ut},{18:gt,26:9,27:2,28:Y,55:Nt,56:St,57:Ut},V(ye,[2,33],{29:10}),V(le,[2,61]),V(le,[2,62]),V(le,[2,63]),{1:[2,30]},{1:[2,31]},V(Pe,oe,{30:11,31:12,24:13,32:15,33:16,34:17,43:30,58:31,1:[2,32],4:qe,5:We,10:Et,12:Tt,13:B,14:N,18:et,25:yt,35:it,37:rt,39:_t,41:ht,42:Ot,48:H,50:ot,51:ke,52:Pt,53:Zt,54:pe,60:Re,61:Ze,63:de,64:yr,65:mr,66:Wt,67:we}),V(ye,[2,34]),{27:45,55:Nt,56:St,57:Ut},V(Pe,[2,37]),V(Pe,oe,{24:13,32:15,33:16,34:17,43:30,58:31,31:46,4:qe,5:We,10:Et,12:Tt,13:B,14:N,18:et,25:yt,35:it,37:rt,39:_t,41:ht,42:Ot,48:H,50:ot,51:ke,52:Pt,53:Zt,54:pe,60:Re,61:Ze,63:de,64:yr,65:mr,66:Wt,67:we}),V(Pe,[2,39]),V(Pe,[2,40]),V(Pe,[2,41]),{36:[1,47]},{38:[1,48]},{40:[1,49]},V(Pe,[2,45]),V(Pe,[2,46]),{18:[1,50]},{4:qe,5:We,10:Et,12:Tt,13:B,14:N,43:51,58:31,60:Re,61:Ze,63:de,64:yr,65:mr,66:Wt,67:we},{4:qe,5:We,10:Et,12:Tt,13:B,14:N,43:52,58:31,60:Re,61:Ze,63:de,64:yr,65:mr,66:Wt,67:we},{4:qe,5:We,10:Et,12:Tt,13:B,14:N,43:53,58:31,60:Re,61:Ze,63:de,64:yr,65:mr,66:Wt,67:we},{4:qe,5:We,10:Et,12:Tt,13:B,14:N,43:54,58:31,60:Re,61:Ze,63:de,64:yr,65:mr,66:Wt,67:we},{4:qe,5:We,10:Et,12:Tt,13:B,14:N,43:55,58:31,60:Re,61:Ze,63:de,64:yr,65:mr,66:Wt,67:we},{4:qe,5:We,10:Et,12:Tt,13:B,14:N,43:56,58:31,60:Re,61:Ze,63:de,64:yr,65:mr,66:Wt,67:we},{4:qe,5:We,8:sr,10:Et,12:Tt,13:B,14:N,18:ve,44:[1,57],47:[1,58],58:60,59:59,63:de,64:yr,65:mr,66:Wt,67:we},V(ce,[2,64]),V(ce,[2,66]),V(ce,[2,67]),V(ce,[2,70]),V(ce,[2,71]),V(ce,[2,72]),V(ce,[2,73]),V(ce,[2,74]),V(ce,[2,75]),V(ce,[2,76]),V(ce,[2,77]),V(ce,[2,78]),V(ce,[2,79]),V(ce,[2,80]),V(ye,[2,35]),V(Pe,[2,38]),V(Pe,[2,42]),V(Pe,[2,43]),V(Pe,[2,44]),{3:64,4:Ee,5:Ae,6:er,7:Qe,8:Dr,9:_e,10:Yr,11:nr,12:te,13:ne,14:be,15:ar,21:63},V(Pe,[2,53],{59:59,58:60,4:qe,5:We,8:sr,10:Et,12:Tt,13:B,14:N,18:ve,49:[1,77],63:de,64:yr,65:mr,66:Wt,67:we}),V(Pe,[2,56],{59:59,58:60,4:qe,5:We,8:sr,10:Et,12:Tt,13:B,14:N,18:ve,49:[1,78],63:de,64:yr,65:mr,66:Wt,67:we}),V(Pe,[2,57],{59:59,58:60,4:qe,5:We,8:sr,10:Et,12:Tt,13:B,14:N,18:ve,63:de,64:yr,65:mr,66:Wt,67:we}),V(Pe,[2,58],{59:59,58:60,4:qe,5:We,8:sr,10:Et,12:Tt,13:B,14:N,18:ve,63:de,64:yr,65:mr,66:Wt,67:we}),V(Pe,[2,59],{59:59,58:60,4:qe,5:We,8:sr,10:Et,12:Tt,13:B,14:N,18:ve,63:de,64:yr,65:mr,66:Wt,67:we}),V(Pe,[2,60],{59:59,58:60,4:qe,5:We,8:sr,10:Et,12:Tt,13:B,14:N,18:ve,63:de,64:yr,65:mr,66:Wt,67:we}),{45:[1,79]},{44:[1,80]},V(ce,[2,65]),V(ce,[2,81]),V(ce,[2,82]),V(ce,[2,83]),{3:82,4:Ee,5:Ae,6:er,7:Qe,8:Dr,9:_e,10:Yr,11:nr,12:te,13:ne,14:be,15:ar,18:[1,81]},V(g,[2,23]),V(g,[2,1]),V(g,[2,2]),V(g,[2,3]),V(g,[2,4]),V(g,[2,5]),V(g,[2,6]),V(g,[2,7]),V(g,[2,8]),V(g,[2,9]),V(g,[2,10]),V(g,[2,11]),V(g,[2,12]),V(Pe,[2,52],{58:31,43:83,4:qe,5:We,10:Et,12:Tt,13:B,14:N,60:Re,61:Ze,63:de,64:yr,65:mr,66:Wt,67:we}),V(Pe,[2,55],{58:31,43:84,4:qe,5:We,10:Et,12:Tt,13:B,14:N,60:Re,61:Ze,63:de,64:yr,65:mr,66:Wt,67:we}),{46:[1,85]},{45:[1,86]},{4:y,5:E,6:M,8:m,11:A,13:v,16:89,17:b,18:C,19:R,20:Q,22:88,23:87},V(g,[2,24]),V(Pe,[2,51],{59:59,58:60,4:qe,5:We,8:sr,10:Et,12:Tt,13:B,14:N,18:ve,63:de,64:yr,65:mr,66:Wt,67:we}),V(Pe,[2,54],{59:59,58:60,4:qe,5:We,8:sr,10:Et,12:Tt,13:B,14:N,18:ve,63:de,64:yr,65:mr,66:Wt,67:we}),V(Pe,[2,47],{22:88,16:89,23:100,4:y,5:E,6:M,8:m,11:A,13:v,17:b,18:C,19:R,20:Q}),{46:[1,101]},V(Pe,[2,29],{10:mt}),V(zt,[2,27],{16:103,4:y,5:E,6:M,8:m,11:A,13:v,17:b,18:C,19:R,20:Q}),V(jt,[2,25]),V(jt,[2,13]),V(jt,[2,14]),V(jt,[2,15]),V(jt,[2,16]),V(jt,[2,17]),V(jt,[2,18]),V(jt,[2,19]),V(jt,[2,20]),V(jt,[2,21]),V(jt,[2,22]),V(Pe,[2,49],{10:mt}),V(Pe,[2,48],{22:88,16:89,23:104,4:y,5:E,6:M,8:m,11:A,13:v,17:b,18:C,19:R,20:Q}),{4:y,5:E,6:M,8:m,11:A,13:v,16:89,17:b,18:C,19:R,20:Q,22:105},V(jt,[2,26]),V(Pe,[2,50],{10:mt}),V(zt,[2,28],{16:103,4:y,5:E,6:M,8:m,11:A,13:v,17:b,18:C,19:R,20:Q})],defaultActions:{8:[2,30],9:[2,31]},parseError:(0,L.K2)(function(Ke,fr){if(!fr.recoverable){var lr=new Error(Ke);throw lr.hash=fr,lr}this.trace(Ke)},"parseError"),parse:(0,L.K2)(function(Ke){var fr=this,lr=[0],br=[],$e=[null],He=[],wr=this.table,kr="",Kr=0,_r=0,Jr=0,ia=He.slice.call(arguments,1),jr=Object.create(this.lexer),Qr={yy:{}};for(var or in this.yy)Object.prototype.hasOwnProperty.call(this.yy,or)&&(Qr.yy[or]=this.yy[or]);jr.setInput(Ke,Qr.yy),Qr.yy.lexer=jr,Qr.yy.parser=this,typeof jr.yylloc>"u"&&(jr.yylloc={});var ur=jr.yylloc;He.push(ur);var W=jr.options&&jr.options.ranges;function Ye(){var Va;return"number"!=typeof(Va=br.pop()||jr.lex()||1)&&(Va instanceof Array&&(Va=(br=Va).pop()),Va=fr.symbols_[Va]||Va),Va}this.parseError="function"==typeof Qr.yy.parseError?Qr.yy.parseError:Object.getPrototypeOf(this).parseError,(0,L.K2)(function $t(Va){lr.length=lr.length-2*Va,$e.length=$e.length-Va,He.length=He.length-Va},"popStack"),(0,L.K2)(Ye,"lex");for(var Fe,Tr,pr,da,Ma,Ia,ba,Sa,Wa={};;){if(this.defaultActions[pr=lr[lr.length-1]]?da=this.defaultActions[pr]:((null===Fe||typeof Fe>"u")&&(Fe=Ye()),da=wr[pr]&&wr[pr][Fe]),typeof da>"u"||!da.length||!da[0]){var ea;for(Ia in Sa=[],wr[pr])this.terminals_[Ia]&&Ia>2&&Sa.push("'"+this.terminals_[Ia]+"'");ea=jr.showPosition?"Parse error on line "+(Kr+1)+":\n"+jr.showPosition()+"\nExpecting "+Sa.join(", ")+", got '"+(this.terminals_[Fe]||Fe)+"'":"Parse error on line "+(Kr+1)+": Unexpected "+(1==Fe?"end of input":"'"+(this.terminals_[Fe]||Fe)+"'"),this.parseError(ea,{text:jr.match,token:this.terminals_[Fe]||Fe,line:jr.yylineno,loc:ur,expected:Sa})}if(da[0]instanceof Array&&da.length>1)throw new Error("Parse Error: multiple actions possible at state: "+pr+", token: "+Fe);switch(da[0]){case 1:lr.push(Fe),$e.push(jr.yytext),He.push(jr.yylloc),lr.push(da[1]),Fe=null,Tr?(Fe=Tr,Tr=null):(_r=jr.yyleng,kr=jr.yytext,Kr=jr.yylineno,ur=jr.yylloc,Jr>0&&Jr--);break;case 2:if(Wa.$=$e[$e.length-(ba=this.productions_[da[1]][1])],Wa._$={first_line:He[He.length-(ba||1)].first_line,last_line:He[He.length-1].last_line,first_column:He[He.length-(ba||1)].first_column,last_column:He[He.length-1].last_column},W&&(Wa._$.range=[He[He.length-(ba||1)].range[0],He[He.length-1].range[1]]),typeof(Ma=this.performAction.apply(Wa,[kr,_r,Kr,Qr.yy,da[1],$e,He].concat(ia)))<"u")return Ma;ba&&(lr=lr.slice(0,-1*ba*2),$e=$e.slice(0,-1*ba),He=He.slice(0,-1*ba)),lr.push(this.productions_[da[1]][0]),$e.push(Wa.$),He.push(Wa._$),lr.push(wr[lr[lr.length-2]][lr[lr.length-1]]);break;case 3:return!0}}return!0},"parse")};function xe(){this.yy={}}return Vt.lexer=function(){return{EOF:1,parseError:(0,L.K2)(function(fr,lr){if(!this.yy.parser)throw new Error(fr);this.yy.parser.parseError(fr,lr)},"parseError"),setInput:(0,L.K2)(function(Ke,fr){return this.yy=fr||this.yy||{},this._input=Ke,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},"setInput"),input:(0,L.K2)(function(){var Ke=this._input[0];return this.yytext+=Ke,this.yyleng++,this.offset++,this.match+=Ke,this.matched+=Ke,Ke.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),Ke},"input"),unput:(0,L.K2)(function(Ke){var fr=Ke.length,lr=Ke.split(/(?:\r\n?|\n)/g);this._input=Ke+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-fr),this.offset-=fr;var br=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),lr.length-1&&(this.yylineno-=lr.length-1);var $e=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:lr?(lr.length===br.length?this.yylloc.first_column:0)+br[br.length-lr.length].length-lr[0].length:this.yylloc.first_column-fr},this.options.ranges&&(this.yylloc.range=[$e[0],$e[0]+this.yyleng-fr]),this.yyleng=this.yytext.length,this},"unput"),more:(0,L.K2)(function(){return this._more=!0,this},"more"),reject:(0,L.K2)(function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},"reject"),less:(0,L.K2)(function(Ke){this.unput(this.match.slice(Ke))},"less"),pastInput:(0,L.K2)(function(){var Ke=this.matched.substr(0,this.matched.length-this.match.length);return(Ke.length>20?"...":"")+Ke.substr(-20).replace(/\n/g,"")},"pastInput"),upcomingInput:(0,L.K2)(function(){var Ke=this.match;return Ke.length<20&&(Ke+=this._input.substr(0,20-Ke.length)),(Ke.substr(0,20)+(Ke.length>20?"...":"")).replace(/\n/g,"")},"upcomingInput"),showPosition:(0,L.K2)(function(){var Ke=this.pastInput(),fr=new Array(Ke.length+1).join("-");return Ke+this.upcomingInput()+"\n"+fr+"^"},"showPosition"),test_match:(0,L.K2)(function(Ke,fr){var lr,br,$e;if(this.options.backtrack_lexer&&($e={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&($e.yylloc.range=this.yylloc.range.slice(0))),(br=Ke[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=br.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:br?br[br.length-1].length-br[br.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+Ke[0].length},this.yytext+=Ke[0],this.match+=Ke[0],this.matches=Ke,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(Ke[0].length),this.matched+=Ke[0],lr=this.performAction.call(this,this.yy,this,fr,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),lr)return lr;if(this._backtrack){for(var He in $e)this[He]=$e[He];return!1}return!1},"test_match"),next:(0,L.K2)(function(){if(this.done)return this.EOF;var Ke,fr,lr,br;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var $e=this._currentRules(),He=0;He<$e.length;He++)if((lr=this._input.match(this.rules[$e[He]]))&&(!fr||lr[0].length>fr[0].length)){if(fr=lr,br=He,this.options.backtrack_lexer){if(!1!==(Ke=this.test_match(lr,$e[He])))return Ke;if(this._backtrack){fr=!1;continue}return!1}if(!this.options.flex)break}return fr?!1!==(Ke=this.test_match(fr,$e[br]))&&Ke:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},"next"),lex:(0,L.K2)(function(){return this.next()||this.lex()},"lex"),begin:(0,L.K2)(function(fr){this.conditionStack.push(fr)},"begin"),popState:(0,L.K2)(function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},"popState"),_currentRules:(0,L.K2)(function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},"_currentRules"),topState:(0,L.K2)(function(fr){return(fr=this.conditionStack.length-1-Math.abs(fr||0))>=0?this.conditionStack[fr]:"INITIAL"},"topState"),pushState:(0,L.K2)(function(fr){this.begin(fr)},"pushState"),stateStackSize:(0,L.K2)(function(){return this.conditionStack.length},"stateStackSize"),options:{"case-insensitive":!0},performAction:(0,L.K2)(function(fr,lr,br,$e){switch(br){case 0:case 1:case 3:break;case 2:return 55;case 4:return this.begin("title"),35;case 5:return this.popState(),"title_value";case 6:return this.begin("acc_title"),37;case 7:return this.popState(),"acc_title_value";case 8:return this.begin("acc_descr"),39;case 9:return this.popState(),"acc_descr_value";case 10:this.begin("acc_descr_multiline");break;case 11:case 23:case 25:case 31:this.popState();break;case 12:return"acc_descr_multiline_value";case 13:return 48;case 14:return 50;case 15:return 49;case 16:return 51;case 17:return 52;case 18:return 53;case 19:return 54;case 20:return 25;case 21:this.begin("md_string");break;case 22:return"MD_STR";case 24:this.begin("string");break;case 26:return"STR";case 27:this.begin("class_name");break;case 28:return this.popState(),47;case 29:return this.begin("point_start"),44;case 30:return this.begin("point_x"),45;case 32:this.popState(),this.begin("point_y");break;case 33:return this.popState(),46;case 34:return 28;case 35:return 4;case 36:return 11;case 37:return 64;case 38:return 10;case 39:case 40:return 65;case 41:return 14;case 42:return 13;case 43:return 67;case 44:return 66;case 45:return 12;case 46:return 8;case 47:return 5;case 48:return 18;case 49:return 56;case 50:return 63;case 51:return 57}},"anonymous"),rules:[/^(?:%%(?!\{)[^\n]*)/i,/^(?:[^\}]%%[^\n]*)/i,/^(?:[\n\r]+)/i,/^(?:%%[^\n]*)/i,/^(?:title\b)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?: *x-axis *)/i,/^(?: *y-axis *)/i,/^(?: *--+> *)/i,/^(?: *quadrant-1 *)/i,/^(?: *quadrant-2 *)/i,/^(?: *quadrant-3 *)/i,/^(?: *quadrant-4 *)/i,/^(?:classDef\b)/i,/^(?:["][`])/i,/^(?:[^`"]+)/i,/^(?:[`]["])/i,/^(?:["])/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?::::)/i,/^(?:^\w+)/i,/^(?:\s*:\s*\[\s*)/i,/^(?:(1)|(0(.\d+)?))/i,/^(?:\s*\] *)/i,/^(?:\s*,\s*)/i,/^(?:(1)|(0(.\d+)?))/i,/^(?: *quadrantChart *)/i,/^(?:[A-Za-z]+)/i,/^(?::)/i,/^(?:\+)/i,/^(?:,)/i,/^(?:=)/i,/^(?:=)/i,/^(?:\*)/i,/^(?:#)/i,/^(?:[\_])/i,/^(?:\.)/i,/^(?:&)/i,/^(?:-)/i,/^(?:[0-9]+)/i,/^(?:\s)/i,/^(?:;)/i,/^(?:[!"#$%&'*+,-.`?\\_/])/i,/^(?:$)/i],conditions:{class_name:{rules:[28],inclusive:!1},point_y:{rules:[33],inclusive:!1},point_x:{rules:[32],inclusive:!1},point_start:{rules:[30,31],inclusive:!1},acc_descr_multiline:{rules:[11,12],inclusive:!1},acc_descr:{rules:[9],inclusive:!1},acc_title:{rules:[7],inclusive:!1},title:{rules:[5],inclusive:!1},md_string:{rules:[22,23],inclusive:!1},string:{rules:[25,26],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,6,8,10,13,14,15,16,17,18,19,20,21,24,27,29,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],inclusive:!0}}}}(),(0,L.K2)(xe,"Parser"),xe.prototype=Vt,Vt.Parser=xe,new xe}();G.parser=G;var w=G,Lt=(0,ie.P$)(),At=(class{constructor(){this.classes=new Map,this.config=this.getDefaultConfig(),this.themeConfig=this.getDefaultThemeConfig(),this.data=this.getDefaultData()}getDefaultData(){return{titleText:"",quadrant1Text:"",quadrant2Text:"",quadrant3Text:"",quadrant4Text:"",xAxisLeftText:"",xAxisRightText:"",yAxisBottomText:"",yAxisTopText:"",points:[]}}getDefaultConfig(){return{showXAxis:!0,showYAxis:!0,showTitle:!0,chartHeight:ie.UI.quadrantChart?.chartWidth||500,chartWidth:ie.UI.quadrantChart?.chartHeight||500,titlePadding:ie.UI.quadrantChart?.titlePadding||10,titleFontSize:ie.UI.quadrantChart?.titleFontSize||20,quadrantPadding:ie.UI.quadrantChart?.quadrantPadding||5,xAxisLabelPadding:ie.UI.quadrantChart?.xAxisLabelPadding||5,yAxisLabelPadding:ie.UI.quadrantChart?.yAxisLabelPadding||5,xAxisLabelFontSize:ie.UI.quadrantChart?.xAxisLabelFontSize||16,yAxisLabelFontSize:ie.UI.quadrantChart?.yAxisLabelFontSize||16,quadrantLabelFontSize:ie.UI.quadrantChart?.quadrantLabelFontSize||16,quadrantTextTopPadding:ie.UI.quadrantChart?.quadrantTextTopPadding||5,pointTextPadding:ie.UI.quadrantChart?.pointTextPadding||5,pointLabelFontSize:ie.UI.quadrantChart?.pointLabelFontSize||12,pointRadius:ie.UI.quadrantChart?.pointRadius||5,xAxisPosition:ie.UI.quadrantChart?.xAxisPosition||"top",yAxisPosition:ie.UI.quadrantChart?.yAxisPosition||"left",quadrantInternalBorderStrokeWidth:ie.UI.quadrantChart?.quadrantInternalBorderStrokeWidth||1,quadrantExternalBorderStrokeWidth:ie.UI.quadrantChart?.quadrantExternalBorderStrokeWidth||2}}getDefaultThemeConfig(){return{quadrant1Fill:Lt.quadrant1Fill,quadrant2Fill:Lt.quadrant2Fill,quadrant3Fill:Lt.quadrant3Fill,quadrant4Fill:Lt.quadrant4Fill,quadrant1TextFill:Lt.quadrant1TextFill,quadrant2TextFill:Lt.quadrant2TextFill,quadrant3TextFill:Lt.quadrant3TextFill,quadrant4TextFill:Lt.quadrant4TextFill,quadrantPointFill:Lt.quadrantPointFill,quadrantPointTextFill:Lt.quadrantPointTextFill,quadrantXAxisTextFill:Lt.quadrantXAxisTextFill,quadrantYAxisTextFill:Lt.quadrantYAxisTextFill,quadrantTitleFill:Lt.quadrantTitleFill,quadrantInternalBorderStrokeFill:Lt.quadrantInternalBorderStrokeFill,quadrantExternalBorderStrokeFill:Lt.quadrantExternalBorderStrokeFill}}clear(){this.config=this.getDefaultConfig(),this.themeConfig=this.getDefaultThemeConfig(),this.data=this.getDefaultData(),this.classes=new Map,L.Rm.info("clear called")}setData(V){this.data={...this.data,...V}}addPoints(V){this.data.points=[...V,...this.data.points]}addClass(V,gt){this.classes.set(V,gt)}setConfig(V){L.Rm.trace("setConfig called with: ",V),this.config={...this.config,...V}}setThemeConfig(V){L.Rm.trace("setThemeConfig called with: ",V),this.themeConfig={...this.themeConfig,...V}}calculateSpace(V,gt,Y,Nt){const St=2*this.config.xAxisLabelPadding+this.config.xAxisLabelFontSize,Ut={top:"top"===V&&gt?St:0,bottom:"bottom"===V&&gt?St:0},ye=2*this.config.yAxisLabelPadding+this.config.yAxisLabelFontSize,le={left:"left"===this.config.yAxisPosition&&Y?ye:0,right:"right"===this.config.yAxisPosition&&Y?ye:0},oe={top:Nt?this.config.titleFontSize+2*this.config.titlePadding:0},Et=this.config.chartWidth-2*this.config.quadrantPadding-le.left-le.right,Tt=this.config.chartHeight-2*this.config.quadrantPadding-Ut.top-Ut.bottom-oe.top;return{xAxisSpace:Ut,yAxisSpace:le,titleSpace:oe,quadrantSpace:{quadrantLeft:this.config.quadrantPadding+le.left,quadrantTop:this.config.quadrantPadding+Ut.top+oe.top,quadrantWidth:Et,quadrantHalfWidth:Et/2,quadrantHeight:Tt,quadrantHalfHeight:Tt/2}}}getAxisLabels(V,gt,Y,Nt){const{quadrantSpace:St,titleSpace:Ut}=Nt,{quadrantHalfHeight:ye,quadrantHeight:le,quadrantLeft:Pe,quadrantHalfWidth:oe,quadrantTop:qe,quadrantWidth:We}=St,Et=!!this.data.xAxisRightText,Tt=!!this.data.yAxisTopText,B=[];return this.data.xAxisLeftText&&gt&&B.push({text:this.data.xAxisLeftText,fill:this.themeConfig.quadrantXAxisTextFill,x:Pe+(Et?oe/2:0),y:"top"===V?this.config.xAxisLabelPadding+Ut.top:this.config.xAxisLabelPadding+qe+le+this.config.quadrantPadding,fontSize:this.config.xAxisLabelFontSize,verticalPos:Et?"center":"left",horizontalPos:"top",rotation:0}),this.data.xAxisRightText&&gt&&B.push({text:this.data.xAxisRightText,fill:this.themeConfig.quadrantXAxisTextFill,x:Pe+oe+(Et?oe/2:0),y:"top"===V?this.config.xAxisLabelPadding+Ut.top:this.config.xAxisLabelPadding+qe+le+this.config.quadrantPadding,fontSize:this.config.xAxisLabelFontSize,verticalPos:Et?"center":"left",horizontalPos:"top",rotation:0}),this.data.yAxisBottomText&&Y&&B.push({text:this.data.yAxisBottomText,fill:this.themeConfig.quadrantYAxisTextFill,x:"left"===this.config.yAxisPosition?this.config.yAxisLabelPadding:this.config.yAxisLabelPadding+Pe+We+this.config.quadrantPadding,y:qe+le-(Tt?ye/2:0),fontSize:this.config.yAxisLabelFontSize,verticalPos:Tt?"center":"left",horizontalPos:"top",rotation:-90}),this.data.yAxisTopText&&Y&&B.push({text:this.data.yAxisTopText,fill:this.themeConfig.quadrantYAxisTextFill,x:"left"===this.config.yAxisPosition?this.config.yAxisLabelPadding:this.config.yAxisLabelPadding+Pe+We+this.config.quadrantPadding,y:qe+ye-(Tt?ye/2:0),fontSize:this.config.yAxisLabelFontSize,verticalPos:Tt?"center":"left",horizontalPos:"top",rotation:-90}),B}getQuadrants(V){const{quadrantSpace:gt}=V,{quadrantHalfHeight:Y,quadrantLeft:Nt,quadrantHalfWidth:St,quadrantTop:Ut}=gt,ye=[{text:{text:this.data.quadrant1Text,fill:this.themeConfig.quadrant1TextFill,x:0,y:0,fontSize:this.config.quadrantLabelFontSize,verticalPos:"center",horizontalPos:"middle",rotation:0},x:Nt+St,y:Ut,width:St,height:Y,fill:this.themeConfig.quadrant1Fill},{text:{text:this.data.quadrant2Text,fill:this.themeConfig.quadrant2TextFill,x:0,y:0,fontSize:this.config.quadrantLabelFontSize,verticalPos:"center",horizontalPos:"middle",rotation:0},x:Nt,y:Ut,width:St,height:Y,fill:this.themeConfig.quadrant2Fill},{text:{text:this.data.quadrant3Text,fill:this.themeConfig.quadrant3TextFill,x:0,y:0,fontSize:this.config.quadrantLabelFontSize,verticalPos:"center",horizontalPos:"middle",rotation:0},x:Nt,y:Ut+Y,width:St,height:Y,fill:this.themeConfig.quadrant3Fill},{text:{text:this.data.quadrant4Text,fill:this.themeConfig.quadrant4TextFill,x:0,y:0,fontSize:this.config.quadrantLabelFontSize,verticalPos:"center",horizontalPos:"middle",rotation:0},x:Nt+St,y:Ut+Y,width:St,height:Y,fill:this.themeConfig.quadrant4Fill}];for(const le of ye)le.text.x=le.x+le.width/2,0===this.data.points.length?(le.text.y=le.y+le.height/2,le.text.horizontalPos="middle"):(le.text.y=le.y+this.config.quadrantTextTopPadding,le.text.horizontalPos="top");return ye}getQuadrantPoints(V){const{quadrantSpace:gt}=V,{quadrantHeight:Y,quadrantLeft:Nt,quadrantTop:St,quadrantWidth:Ut}=gt,ye=(0,D.m4Y)().domain([0,1]).range([Nt,Ut+Nt]),le=(0,D.m4Y)().domain([0,1]).range([Y+St,St]);return this.data.points.map(oe=>{const qe=this.classes.get(oe.className);return qe&&(oe={...qe,...oe}),{x:ye(oe.x),y:le(oe.y),fill:oe.color??this.themeConfig.quadrantPointFill,radius:oe.radius??this.config.pointRadius,text:{text:oe.text,fill:this.themeConfig.quadrantPointTextFill,x:ye(oe.x),y:le(oe.y)+this.config.pointTextPadding,verticalPos:"center",horizontalPos:"top",fontSize:this.config.pointLabelFontSize,rotation:0},strokeColor:oe.strokeColor??this.themeConfig.quadrantPointFill,strokeWidth:oe.strokeWidth??"0px"}})}getBorders(V){const gt=this.config.quadrantExternalBorderStrokeWidth/2,{quadrantSpace:Y}=V,{quadrantHalfHeight:Nt,quadrantHeight:St,quadrantLeft:Ut,quadrantHalfWidth:ye,quadrantTop:le,quadrantWidth:Pe}=Y;return[{strokeFill:this.themeConfig.quadrantExternalBorderStrokeFill,strokeWidth:this.config.quadrantExternalBorderStrokeWidth,x1:Ut-gt,y1:le,x2:Ut+Pe+gt,y2:le},{strokeFill:this.themeConfig.quadrantExternalBorderStrokeFill,strokeWidth:this.config.quadrantExternalBorderStrokeWidth,x1:Ut+Pe,y1:le+gt,x2:Ut+Pe,y2:le+St-gt},{strokeFill:this.themeConfig.quadrantExternalBorderStrokeFill,strokeWidth:this.config.quadrantExternalBorderStrokeWidth,x1:Ut-gt,y1:le+St,x2:Ut+Pe+gt,y2:le+St},{strokeFill:this.themeConfig.quadrantExternalBorderStrokeFill,strokeWidth:this.config.quadrantExternalBorderStrokeWidth,x1:Ut,y1:le+gt,x2:Ut,y2:le+St-gt},{strokeFill:this.themeConfig.quadrantInternalBorderStrokeFill,strokeWidth:this.config.quadrantInternalBorderStrokeWidth,x1:Ut+ye,y1:le+gt,x2:Ut+ye,y2:le+St-gt},{strokeFill:this.themeConfig.quadrantInternalBorderStrokeFill,strokeWidth:this.config.quadrantInternalBorderStrokeWidth,x1:Ut+gt,y1:le+Nt,x2:Ut+Pe-gt,y2:le+Nt}]}getTitle(V){if(V)return{text:this.data.titleText,fill:this.themeConfig.quadrantTitleFill,fontSize:this.config.titleFontSize,horizontalPos:"top",verticalPos:"center",rotation:0,y:this.config.titlePadding,x:this.config.chartWidth/2}}build(){const V=this.config.showXAxis&&!(!this.data.xAxisLeftText&&!this.data.xAxisRightText),gt=this.config.showYAxis&&!(!this.data.yAxisTopText&&!this.data.yAxisBottomText),Y=this.config.showTitle&&!!this.data.titleText,Nt=this.data.points.length>0?"bottom":this.config.xAxisPosition,St=this.calculateSpace(Nt,V,gt,Y);return{points:this.getQuadrantPoints(St),quadrants:this.getQuadrants(St),axisLabels:this.getAxisLabels(Nt,V,gt,St),borderLines:this.getBorders(St),title:this.getTitle(Y)}}static#t=Mt=()=>((0,lt.A)(this,"QuadrantBuilder"),(0,L.K2)(this,"QuadrantBuilder"),this)},Mt()),Ge=(class extends Error{constructor(V,gt,Y){super(`value for ${V} ${gt} is invalid, please use a valid ${Y}`),this.name="InvalidStyleError"}static#t=ut=()=>((0,lt.A)(this,"InvalidStyleError"),(0,L.K2)(this,"InvalidStyleError"),this)},ut());function bt(V){return!/^#?([\dA-Fa-f]{6}|[\dA-Fa-f]{3})$/.test(V)}function Gt(V){return!/^\d+$/.test(V)}function j(V){return!/^\d+px$/.test(V)}(0,L.K2)(bt,"validateHexCode"),(0,L.K2)(Gt,"validateNumber"),(0,L.K2)(j,"validateSizeInPixels");var hr=(0,ie.D7)();function ze(V){return(0,ie.jZ)(V.trim(),hr)}(0,L.K2)(ze,"textSanitizer");var vr=new At;function Wr(V){vr.setData({quadrant1Text:ze(V.text)})}function Br(V){vr.setData({quadrant2Text:ze(V.text)})}function Gr(V){vr.setData({quadrant3Text:ze(V.text)})}function aa(V){vr.setData({quadrant4Text:ze(V.text)})}function zr(V){vr.setData({xAxisLeftText:ze(V.text)})}function Or(V){vr.setData({xAxisRightText:ze(V.text)})}function Be(V){vr.setData({yAxisTopText:ze(V.text)})}function Ir(V){vr.setData({yAxisBottomText:ze(V.text)})}function Xe(V){const gt={};for(const Y of V){const[Nt,St]=Y.trim().split(/\s*:\s*/);if("radius"===Nt){if(Gt(St))throw new Ge(Nt,St,"number");gt.radius=parseInt(St)}else if("color"===Nt){if(bt(St))throw new Ge(Nt,St,"hex code");gt.color=St}else if("stroke-color"===Nt){if(bt(St))throw new Ge(Nt,St,"hex code");gt.strokeColor=St}else{if("stroke-width"!==Nt)throw new Error(`style named ${Nt} is not supported.`);if(j(St))throw new Ge(Nt,St,"number of pixels (eg. 10px)");gt.strokeWidth=St}}return gt}function z(V,gt,Y,Nt,St){const Ut=Xe(St);vr.addPoints([{x:Y,y:Nt,text:ze(V.text),className:gt,...Ut}])}function dt(V,gt){vr.addClass(V,Xe(gt))}function Bt(V){vr.setConfig({chartWidth:V})}function Se(V){vr.setConfig({chartHeight:V})}function X(){const V=(0,ie.D7)(),{themeVariables:gt,quadrantChart:Y}=V;return Y&&vr.setConfig(Y),vr.setThemeConfig({quadrant1Fill:gt.quadrant1Fill,quadrant2Fill:gt.quadrant2Fill,quadrant3Fill:gt.quadrant3Fill,quadrant4Fill:gt.quadrant4Fill,quadrant1TextFill:gt.quadrant1TextFill,quadrant2TextFill:gt.quadrant2TextFill,quadrant3TextFill:gt.quadrant3TextFill,quadrant4TextFill:gt.quadrant4TextFill,quadrantPointFill:gt.quadrantPointFill,quadrantPointTextFill:gt.quadrantPointTextFill,quadrantXAxisTextFill:gt.quadrantXAxisTextFill,quadrantYAxisTextFill:gt.quadrantYAxisTextFill,quadrantExternalBorderStrokeFill:gt.quadrantExternalBorderStrokeFill,quadrantInternalBorderStrokeFill:gt.quadrantInternalBorderStrokeFill,quadrantTitleFill:gt.quadrantTitleFill}),vr.setData({titleText:(0,ie.ab)()}),vr.build()}(0,L.K2)(Wr,"setQuadrant1Text"),(0,L.K2)(Br,"setQuadrant2Text"),(0,L.K2)(Gr,"setQuadrant3Text"),(0,L.K2)(aa,"setQuadrant4Text"),(0,L.K2)(zr,"setXAxisLeftText"),(0,L.K2)(Or,"setXAxisRightText"),(0,L.K2)(Be,"setYAxisTopText"),(0,L.K2)(Ir,"setYAxisBottomText"),(0,L.K2)(Xe,"parseStyles"),(0,L.K2)(z,"addPoint"),(0,L.K2)(dt,"addClass"),(0,L.K2)(Bt,"setWidth"),(0,L.K2)(Se,"setHeight"),(0,L.K2)(X,"getQuadrantData");var qt={parser:w,db:{setWidth:Bt,setHeight:Se,setQuadrant1Text:Wr,setQuadrant2Text:Br,setQuadrant3Text:Gr,setQuadrant4Text:aa,setXAxisLeftText:zr,setXAxisRightText:Or,setYAxisTopText:Be,setYAxisBottomText:Ir,parseStyles:Xe,addPoint:z,addClass:dt,getQuadrantData:X,clear:(0,L.K2)(function(){vr.clear(),(0,ie.IU)()},"clear"),setAccTitle:ie.SV,getAccTitle:ie.iN,setDiagramTitle:ie.ke,getDiagramTitle:ie.ab,getAccDescription:ie.m7,setAccDescription:ie.EI},renderer:{draw:(0,L.K2)((V,gt,Y,Nt)=>{function St(ot){return"top"===ot?"hanging":"middle"}function Ut(ot){return"left"===ot?"start":"middle"}function ye(ot){return`translate(${ot.x}, ${ot.y}) rotate(${ot.rotation||0})`}(0,L.K2)(St,"getDominantBaseLine"),(0,L.K2)(Ut,"getTextAnchor"),(0,L.K2)(ye,"getTransformation");const le=(0,ie.D7)();L.Rm.debug("Rendering quadrant chart\n"+V);const Pe=le.securityLevel;let oe;"sandbox"===Pe&&(oe=(0,D.Ltv)("#i"+gt));const We=(0,D.Ltv)("sandbox"===Pe?oe.nodes()[0].contentDocument.body:"body").select(`[id="${gt}"]`),Et=We.append("g").attr("class","main"),Tt=le.quadrantChart?.chartWidth??500,B=le.quadrantChart?.chartHeight??500;(0,ie.a$)(We,B,Tt,le.quadrantChart?.useMaxWidth??!0),We.attr("viewBox","0 0 "+Tt+" "+B),Nt.db.setHeight(B),Nt.db.setWidth(Tt);const N=Nt.db.getQuadrantData(),et=Et.append("g").attr("class","quadrants"),yt=Et.append("g").attr("class","border"),it=Et.append("g").attr("class","data-points"),rt=Et.append("g").attr("class","labels"),_t=Et.append("g").attr("class","title");N.title&&_t.append("text").attr("x",0).attr("y",0).attr("fill",N.title.fill).attr("font-size",N.title.fontSize).attr("dominant-baseline",St(N.title.horizontalPos)).attr("text-anchor",Ut(N.title.verticalPos)).attr("transform",ye(N.title)).text(N.title.text),N.borderLines&&yt.selectAll("line").data(N.borderLines).enter().append("line").attr("x1",ot=>ot.x1).attr("y1",ot=>ot.y1).attr("x2",ot=>ot.x2).attr("y2",ot=>ot.y2).style("stroke",ot=>ot.strokeFill).style("stroke-width",ot=>ot.strokeWidth);const ht=et.selectAll("g.quadrant").data(N.quadrants).enter().append("g").attr("class","quadrant");ht.append("rect").attr("x",ot=>ot.x).attr("y",ot=>ot.y).attr("width",ot=>ot.width).attr("height",ot=>ot.height).attr("fill",ot=>ot.fill),ht.append("text").attr("x",0).attr("y",0).attr("fill",ot=>ot.text.fill).attr("font-size",ot=>ot.text.fontSize).attr("dominant-baseline",ot=>St(ot.text.horizontalPos)).attr("text-anchor",ot=>Ut(ot.text.verticalPos)).attr("transform",ot=>ye(ot.text)).text(ot=>ot.text.text),rt.selectAll("g.label").data(N.axisLabels).enter().append("g").attr("class","label").append("text").attr("x",0).attr("y",0).text(ot=>ot.text).attr("fill",ot=>ot.fill).attr("font-size",ot=>ot.fontSize).attr("dominant-baseline",ot=>St(ot.horizontalPos)).attr("text-anchor",ot=>Ut(ot.verticalPos)).attr("transform",ot=>ye(ot));const H=it.selectAll("g.data-point").data(N.points).enter().append("g").attr("class","data-point");H.append("circle").attr("cx",ot=>ot.x).attr("cy",ot=>ot.y).attr("r",ot=>ot.radius).attr("fill",ot=>ot.fill).attr("stroke",ot=>ot.strokeColor).attr("stroke-width",ot=>ot.strokeWidth),H.append("text").attr("x",0).attr("y",0).text(ot=>ot.text.text).attr("fill",ot=>ot.text.fill).attr("font-size",ot=>ot.text.fontSize).attr("dominant-baseline",ot=>St(ot.text.horizontalPos)).attr("text-anchor",ot=>Ut(ot.text.verticalPos)).attr("transform",ot=>ye(ot.text))},"draw")},styles:(0,L.K2)(()=>"","styles")}},59355:(ri,Er,P)=>{"use strict";P.d(Er,{GZ:()=>ee,Gc:()=>Lt,W6:()=>Bt,WY:()=>hr,hE:()=>re,pC:()=>bt});var lt=P(89204),ie=P(52052),L=P(79006),D=P(32303),Mt=P(40932),ut=P(40622),G=P(60997),w=P(98245),Lt={body:'<g><rect width="80" height="80" style="fill: #087ebf; stroke-width: 0px;"/><text transform="translate(21.16 64.67)" style="fill: #fff; font-family: ArialMT, Arial; font-size: 67.75px;"><tspan x="0" y="0">?</tspan></text></g>',height:80,width:80},At=new Map,Ge=new Map,bt=(0,D.K2)(Rt=>{for(const qt of Rt){if(!qt.name)throw new Error('Invalid icon loader. Must have a "name" property with non-empty string value.');if(D.Rm.debug("Registering icon pack:",qt.name),"loader"in qt)Ge.set(qt.name,qt.loader);else{if(!("icons"in qt))throw D.Rm.error("Invalid icon loader:",qt),new Error('Invalid icon loader. Must have either "icons" or "loader" property.');At.set(qt.name,qt.icons)}}},"registerIconPacks"),Gt=(0,D.K2)(function(){var Rt=(0,lt.A)(function*(qt,V){const gt=(0,Mt.L7)(qt,!0,void 0!==V);if(!gt)throw new Error(`Invalid icon name: ${qt}`);const Y=gt.prefix||V;if(!Y)throw new Error(`Icon name must contain a prefix: ${qt}`);let Nt=At.get(Y);if(!Nt){const Ut=Ge.get(Y);if(!Ut)throw new Error(`Icon set not found: ${gt.prefix}`);try{Nt={...yield Ut(),prefix:Y},At.set(Y,Nt)}catch(ye){throw D.Rm.error(ye),new Error(`Failed to load icon set: ${gt.prefix}`)}}const St=(0,Mt.y3)(Nt,gt.name);if(!St)throw new Error(`Icon not found: ${qt}`);return St});return function(qt,V){return Rt.apply(this,arguments)}}(),"getRegisteredIconData"),j=(0,D.K2)(function(){var Rt=(0,lt.A)(function*(qt){try{return yield Gt(qt),!0}catch{return!1}});return function(qt){return Rt.apply(this,arguments)}}(),"isIconAvailable"),hr=(0,D.K2)(function(){var Rt=(0,lt.A)(function*(qt,V,gt){let Y;try{Y=yield Gt(qt,V?.fallbackPrefix)}catch(Ut){D.Rm.error(Ut),Y=Lt}const Nt=(0,Mt.pu)(Y,V),St=(0,Mt.U5)((0,Mt.$W)(Nt.body),{...Nt.attributes,...gt});return(0,L.jZ)(St,(0,L.zj)())});return function(qt,V,gt){return Rt.apply(this,arguments)}}(),"getIconSVG");function ze(Rt,{markdownAutoWrap:qt}){const gt=Rt.replace(/<br\/>/g,"\n").replace(/\n{2,}/g,"\n"),Y=(0,w.T)(gt);return!1===qt?Y.replace(/ /g,"&nbsp;"):Y}function vr(Rt,qt={}){const V=ze(Rt,qt),gt=G.xI.lexer(V),Y=[[]];let Nt=0;function St(Ut,ye="normal"){"text"===Ut.type?Ut.text.split("\n").forEach((Pe,oe)=>{0!==oe&&(Nt++,Y.push([])),Pe.split(" ").forEach(qe=>{(qe=qe.replace(/&#39;/g,"'"))&&Y[Nt].push({content:qe,type:ye})})}):"strong"===Ut.type||"em"===Ut.type?Ut.tokens.forEach(le=>{St(le,Ut.type)}):"html"===Ut.type&&Y[Nt].push({content:Ut.text,type:"normal"})}return(0,D.K2)(St,"processNode"),gt.forEach(Ut=>{"paragraph"===Ut.type?Ut.tokens?.forEach(ye=>{St(ye)}):Y[Nt].push("html"===Ut.type?{content:Ut.text,type:"normal"}:{content:Ut.raw,type:"normal"})}),Y}function Wr(Rt,{markdownAutoWrap:qt}={}){const V=G.xI.lexer(Rt);function gt(Y){return"text"===Y.type?!1===qt?Y.text.replace(/\n */g,"<br/>").replace(/ /g,"&nbsp;"):Y.text.replace(/\n */g,"<br/>"):"strong"===Y.type?`<strong>${Y.tokens?.map(gt).join("")}</strong>`:"em"===Y.type?`<em>${Y.tokens?.map(gt).join("")}</em>`:"paragraph"===Y.type?`<p>${Y.tokens?.map(gt).join("")}</p>`:"space"===Y.type?"":"html"===Y.type?`${Y.text}`:"escape"===Y.type?Y.text:(D.Rm.warn(`Unsupported markdown: ${Y.type}`),Y.raw)}return(0,D.K2)(gt,"output"),V.map(gt).join("")}function Br(Rt){return Intl.Segmenter?[...(new Intl.Segmenter).segment(Rt)].map(qt=>qt.segment):[...Rt]}function Gr(Rt,qt){return aa(Rt,[],Br(qt.content),qt.type)}function aa(Rt,qt,V,gt){if(0===V.length)return[{content:qt.join(""),type:gt},{content:"",type:gt}];const[Y,...Nt]=V,St=[...qt,Y];return Rt([{content:St.join(""),type:gt}])?aa(Rt,St,Nt,gt):(0===qt.length&&Y&&(qt.push(Y),V.shift()),[{content:qt.join(""),type:gt},{content:V.join(""),type:gt}])}function zr(Rt,qt){if(Rt.some(({content:V})=>V.includes("\n")))throw new Error("splitLineToFitWidth does not support newlines in the line");return Or(Rt,qt)}function Or(Rt,qt,V=[],gt=[]){if(0===Rt.length)return gt.length>0&&V.push(gt),V.length>0?V:[];let Y="";" "===Rt[0].content&&(Y=" ",Rt.shift());const Nt=Rt.shift()??{content:" ",type:"normal"},St=[...gt];if(""!==Y&&St.push({content:Y,type:"normal"}),St.push(Nt),qt(St))return Or(Rt,qt,V,St);if(gt.length>0)V.push(gt),Rt.unshift(Nt);else if(Nt.content){const[Ut,ye]=Gr(qt,Nt);V.push([Ut]),ye.content&&Rt.unshift(ye)}return Or(Rt,qt,V)}function Be(Rt,qt){qt&&Rt.attr("style",qt)}function Ir(Rt,qt,V,gt){return Xe.apply(this,arguments)}function Xe(){return(Xe=(0,lt.A)(function*(Rt,qt,V,gt,Y=!1,Nt=(0,L.zj)()){const St=Rt.append("foreignObject");St.attr("width",10*V+"px"),St.attr("height",10*V+"px");const Ut=St.append("xhtml:div"),ye=(0,L.Wi)(qt.label)?yield(0,L.dj)(qt.label.replace(L.Y2.lineBreakRegex,"\n"),Nt):(0,L.jZ)(qt.label,Nt),le=qt.isNode?"nodeLabel":"edgeLabel",Pe=Ut.append("span");Pe.html(ye),Be(Pe,qt.labelStyle),Pe.attr("class",`${le} ${gt}`),Be(Ut,qt.labelStyle),Ut.style("display","table-cell"),Ut.style("white-space","nowrap"),Ut.style("line-height","1.5"),Ut.style("max-width",V+"px"),Ut.style("text-align","center"),Ut.attr("xmlns","http://www.w3.org/1999/xhtml"),Y&&Ut.attr("class","labelBkg");let oe=Ut.node().getBoundingClientRect();return oe.width===V&&(Ut.style("display","table"),Ut.style("white-space","break-spaces"),Ut.style("width",V+"px"),oe=Ut.node().getBoundingClientRect()),St.node()})).apply(this,arguments)}function z(Rt,qt,V){return Rt.append("tspan").attr("class","text-outer-tspan").attr("x",0).attr("y",qt*V-.1+"em").attr("dy",V+"em")}function dt(Rt,qt,V){const gt=Rt.append("text"),Y=z(gt,1,qt);X(Y,V);const Nt=Y.node().getComputedTextLength();return gt.remove(),Nt}function Bt(Rt,qt,V){const gt=Rt.append("text"),Y=z(gt,1,qt);X(Y,[{content:V,type:"normal"}]);const Nt=Y.node()?.getBoundingClientRect();return Nt&&gt.remove(),Nt}function Se(Rt,qt,V,gt=!1){const Nt=qt.append("g"),St=Nt.insert("rect").attr("class","background").attr("style","stroke: none"),Ut=Nt.append("text").attr("y","-10.1");let ye=0;for(const le of V){const Pe=(0,D.K2)(qe=>dt(Nt,1.1,qe)<=Rt,"checkWidth"),oe=Pe(le)?[le]:zr(le,Pe);for(const qe of oe)X(z(Ut,ye,1.1),qe),ye++}if(gt){const le=Ut.node().getBBox(),Pe=2;return St.attr("x",le.x-Pe).attr("y",le.y-Pe).attr("width",le.width+2*Pe).attr("height",le.height+2*Pe),Nt.node()}return Ut.node()}function X(Rt,qt){Rt.text(""),qt.forEach((V,gt)=>{Rt.append("tspan").attr("font-style","em"===V.type?"italic":"normal").attr("class","text-inner-tspan").attr("font-weight","strong"===V.type?"bold":"normal").text(0===gt?V.content:" "+V.content)})}function re(Rt){return S.apply(this,arguments)}function S(){return(S=(0,lt.A)(function*(Rt,qt={}){const V=[];Rt.replace(/(fa[bklrs]?):fa-([\w-]+)/g,(Y,Nt,St)=>(V.push((0,lt.A)(function*(){const Ut=`${Nt}:${St}`;return(yield j(Ut))?yield hr(Ut,void 0,{class:"label-icon"}):`<i class='${(0,L.jZ)(Y,qt).replace(":"," ")}'></i>`})()),Y));const gt=yield Promise.all(V);return Rt.replace(/(fa[bklrs]?):fa-([\w-]+)/g,()=>gt.shift()??"")})).apply(this,arguments)}(0,D.K2)(ze,"preprocessMarkdown"),(0,D.K2)(vr,"markdownToLines"),(0,D.K2)(Wr,"markdownToHTML"),(0,D.K2)(Br,"splitTextToChars"),(0,D.K2)(Gr,"splitWordToFitWidth"),(0,D.K2)(aa,"splitWordToFitWidthRecursion"),(0,D.K2)(zr,"splitLineToFitWidth"),(0,D.K2)(Or,"splitLineToFitWidthRecursion"),(0,D.K2)(Be,"applyStyle"),(0,D.K2)(Ir,"addHtmlSpan"),(0,D.K2)(z,"createTspan"),(0,D.K2)(dt,"computeWidthOfText"),(0,D.K2)(Bt,"computeDimensionOfText"),(0,D.K2)(Se,"createFormattedText"),(0,D.K2)(X,"updateTextContentAndStyles"),(0,D.K2)(re,"replaceIconSubstring");var ee=(0,D.K2)(function(){var Rt=(0,lt.A)(function*(qt,V="",{style:gt="",isTitle:Y=!1,classes:Nt="",useHtmlLabels:St=!0,isNode:Ut=!0,width:ye=200,addSvgBackground:le=!1}={},Pe){if(D.Rm.debug("XYZ createText",V,gt,Y,Nt,St,Ut,"addSvgBackground: ",le),St){const oe=Wr(V,Pe),qe=yield re((0,ie.Sm)(oe),Pe),We=V.replace(/\\\\/g,"\\"),Et={isNode:Ut,label:(0,L.Wi)(V)?We:qe,labelStyle:gt.replace("fill:","color:")};return yield Ir(qt,Et,ye,Nt,le,Pe)}{const We=Se(ye,qt,vr(V.replace(/<br\s*\/?>/g,"<br/>").replace("<br>","<br/>"),Pe),!!V&&le);if(Ut){/stroke:/.exec(gt)&&(gt=gt.replace("stroke:","lineColor:"));const Et=gt.replace(/stroke:[^;]+;?/g,"").replace(/stroke-width:[^;]+;?/g,"").replace(/fill:[^;]+;?/g,"").replace(/color:/g,"fill:");(0,ut.Ltv)(We).attr("style",Et)}else{const Et=gt.replace(/stroke:[^;]+;?/g,"").replace(/stroke-width:[^;]+;?/g,"").replace(/fill:[^;]+;?/g,"").replace(/background:/g,"fill:");(0,ut.Ltv)(We).select("rect").attr("style",Et.replace(/background:/g,"fill:"));const Tt=gt.replace(/stroke:[^;]+;?/g,"").replace(/stroke-width:[^;]+;?/g,"").replace(/fill:[^;]+;?/g,"").replace(/color:/g,"fill:");(0,ut.Ltv)(We).select("text").attr("style",Tt)}return We}});return function(qt){return Rt.apply(this,arguments)}}(),"createText")},62033:(ri,Er,P)=>{"use strict";P.r(Er),P.d(Er,{diagram:()=>aa});var Lt,lt=P(89204),ie=P(45027),L=P(69664),D=P(80525),Mt=P(52052),ut=P(79006),G=P(32303),w=P(62233),At=ut.UI.packet,Ge=(class{constructor(){this.packet=[],this.setAccTitle=ut.SV,this.getAccTitle=ut.iN,this.setDiagramTitle=ut.ke,this.getDiagramTitle=ut.ab,this.getAccDescription=ut.m7,this.setAccDescription=ut.EI}getConfig(){const zr=(0,Mt.$t)({...At,...(0,ut.zj)().packet});return zr.showBits&&(zr.paddingY+=10),zr}getPacket(){return this.packet}pushWord(zr){zr.length>0&&this.packet.push(zr)}clear(){(0,ut.IU)(),this.packet=[]}static#t=Lt=()=>((0,ie.A)(this,"PacketDB"),(0,G.K2)(this,"PacketDB"),this)},Lt()),Gt=(0,G.K2)((zr,Or)=>{(0,D.S)(zr,Or);let Be=-1,Ir=[],Xe=1;const{bitsPerRow:z}=Or.getConfig();for(let{start:dt,end:Bt,bits:Se,label:X}of zr.blocks){if(void 0!==dt&&void 0!==Bt&&Bt<dt)throw new Error(`Packet block ${dt} - ${Bt} is invalid. End must be greater than start.`);if(dt??=Be+1,dt!==Be+1)throw new Error(`Packet block ${dt} - ${Bt??dt} is not contiguous. It should start from ${Be+1}.`);if(0===Se)throw new Error(`Packet block ${dt} is invalid. Cannot have a zero bit field.`);for(Bt??=dt+(Se??1)-1,Se??=Bt-dt+1,Be=Bt,G.Rm.debug(`Packet block ${dt} - ${Be} with label ${X}`);Ir.length<=z+1&&Or.getPacket().length<1e4;){const[re,S]=j({start:dt,end:Bt,bits:Se,label:X},Xe,z);if(Ir.push(re),re.end+1===Xe*z&&(Or.pushWord(Ir),Ir=[],Xe++),!S)break;({start:dt,end:Bt,bits:Se,label:X}=S)}}Or.pushWord(Ir)},"populate"),j=(0,G.K2)((zr,Or,Be)=>{if(void 0===zr.start)throw new Error("start should have been set during first phase");if(void 0===zr.end)throw new Error("end should have been set during first phase");if(zr.start>zr.end)throw new Error(`Block start ${zr.start} is greater than block end ${zr.end}.`);if(zr.end+1<=Or*Be)return[zr,void 0];const Ir=Or*Be-1,Xe=Or*Be;return[{start:zr.start,end:Ir,label:zr.label,bits:Ir-zr.start},{start:Xe,end:zr.end,label:zr.label,bits:zr.end-Xe}]},"getNextFittingBlock"),hr={parser:{yy:void 0},parse:(0,G.K2)(function(){var zr=(0,lt.A)(function*(Or){const Be=yield(0,w.qg)("packet",Or),Ir=hr.parser?.yy;if(!(Ir instanceof Ge))throw new Error("parser.parser?.yy was not a PacketDB. This is due to a bug within Mermaid, please report this issue at https://github.com/mermaid-js/mermaid/issues.");G.Rm.debug(Be),Gt(Be,Ir)});return function(Or){return zr.apply(this,arguments)}}(),"parse")},ze=(0,G.K2)((zr,Or,Be,Ir)=>{const Xe=Ir.db,z=Xe.getConfig(),{rowHeight:dt,paddingY:Bt,bitWidth:Se,bitsPerRow:X}=z,re=Xe.getPacket(),S=Xe.getDiagramTitle(),ee=dt+Bt,Rt=ee*(re.length+1)-(S?0:dt),qt=Se*X+2,V=(0,L.D)(Or);V.attr("viewbox",`0 0 ${qt} ${Rt}`),(0,ut.a$)(V,Rt,qt,z.useMaxWidth);for(const[gt,Y]of re.entries())vr(V,Y,gt,z);V.append("text").text(S).attr("x",qt/2).attr("y",Rt-ee/2).attr("dominant-baseline","middle").attr("text-anchor","middle").attr("class","packetTitle")},"draw"),vr=(0,G.K2)((zr,Or,Be,{rowHeight:Ir,paddingX:Xe,paddingY:z,bitWidth:dt,bitsPerRow:Bt,showBits:Se})=>{const X=zr.append("g"),re=Be*(Ir+z)+z;for(const S of Or){const ee=S.start%Bt*dt+1,Rt=(S.end-S.start+1)*dt-Xe;if(X.append("rect").attr("x",ee).attr("y",re).attr("width",Rt).attr("height",Ir).attr("class","packetBlock"),X.append("text").attr("x",ee+Rt/2).attr("y",re+Ir/2).attr("class","packetLabel").attr("dominant-baseline","middle").attr("text-anchor","middle").text(S.label),!Se)continue;const qt=S.end===S.start,V=re-2;X.append("text").attr("x",ee+(qt?Rt/2:0)).attr("y",V).attr("class","packetByte start").attr("dominant-baseline","auto").attr("text-anchor",qt?"middle":"start").text(S.start),qt||X.append("text").attr("x",ee+Rt).attr("y",V).attr("class","packetByte end").attr("dominant-baseline","auto").attr("text-anchor","end").text(S.end)}},"drawWord"),Wr={draw:ze},Br={byteFontSize:"10px",startByteColor:"black",endByteColor:"black",labelColor:"black",labelFontSize:"12px",titleColor:"black",titleFontSize:"14px",blockStrokeColor:"black",blockStrokeWidth:"1",blockFillColor:"#efefef"},Gr=(0,G.K2)(({packet:zr}={})=>{const Or=(0,Mt.$t)(Br,zr);return`\n\t.packetByte {\n\t\tfont-size: ${Or.byteFontSize};\n\t}\n\t.packetByte.start {\n\t\tfill: ${Or.startByteColor};\n\t}\n\t.packetByte.end {\n\t\tfill: ${Or.endByteColor};\n\t}\n\t.packetLabel {\n\t\tfill: ${Or.labelColor};\n\t\tfont-size: ${Or.labelFontSize};\n\t}\n\t.packetTitle {\n\t\tfill: ${Or.titleColor};\n\t\tfont-size: ${Or.titleFontSize};\n\t}\n\t.packetBlock {\n\t\tstroke: ${Or.blockStrokeColor};\n\t\tstroke-width: ${Or.blockStrokeWidth};\n\t\tfill: ${Or.blockFillColor};\n\t}\n\t`},"styles"),aa={parser:hr,get db(){return new Ge},renderer:Wr,styles:Gr}},62045:(ri,Er,P)=>{"use strict";P.d(Er,{CP:()=>w,HT:()=>At,PB:()=>Lt,aC:()=>G,lC:()=>Mt,m:()=>ut,tk:()=>D});var lt=P(79006),ie=P(32303),L=P(73986),D=(0,ie.K2)((Ge,bt)=>{const Gt=Ge.append("rect");if(Gt.attr("x",bt.x),Gt.attr("y",bt.y),Gt.attr("fill",bt.fill),Gt.attr("stroke",bt.stroke),Gt.attr("width",bt.width),Gt.attr("height",bt.height),bt.name&&Gt.attr("name",bt.name),bt.rx&&Gt.attr("rx",bt.rx),bt.ry&&Gt.attr("ry",bt.ry),void 0!==bt.attrs)for(const j in bt.attrs)Gt.attr(j,bt.attrs[j]);return bt.class&&Gt.attr("class",bt.class),Gt},"drawRect"),Mt=(0,ie.K2)((Ge,bt)=>{D(Ge,{x:bt.startx,y:bt.starty,width:bt.stopx-bt.startx,height:bt.stopy-bt.starty,fill:bt.fill,stroke:bt.stroke,class:"rect"}).lower()},"drawBackgroundRect"),ut=(0,ie.K2)((Ge,bt)=>{const Gt=bt.text.replace(lt.H1," "),j=Ge.append("text");j.attr("x",bt.x),j.attr("y",bt.y),j.attr("class","legend"),j.style("text-anchor",bt.anchor),bt.class&&j.attr("class",bt.class);const hr=j.append("tspan");return hr.attr("x",bt.x+2*bt.textMargin),hr.text(Gt),j},"drawText"),G=(0,ie.K2)((Ge,bt,Gt,j)=>{const hr=Ge.append("image");hr.attr("x",bt),hr.attr("y",Gt);const ze=(0,L.J)(j);hr.attr("xlink:href",ze)},"drawImage"),w=(0,ie.K2)((Ge,bt,Gt,j)=>{const hr=Ge.append("use");hr.attr("x",bt),hr.attr("y",Gt);const ze=(0,L.J)(j);hr.attr("xlink:href",`#${ze}`)},"drawEmbeddedImage"),Lt=(0,ie.K2)(()=>({x:0,y:0,width:100,height:100,fill:"#EDF2AE",stroke:"#666",anchor:"start",rx:0,ry:0}),"getNoteRect"),At=(0,ie.K2)(()=>({x:0,y:0,width:100,height:100,"text-anchor":"start",style:"#666",textMargin:0,rx:0,ry:0,tspan:!0}),"getTextObj")},63192:(ri,Er,P)=>{"use strict";P.r(Er),P.d(Er,{diagram:()=>V});var Bt,lt=P(53102),Ge=(P(5675),P(8086),P(72271),P(98954),P(36384),P(87452),P(32239),P(19753),P(59355),P(52052)),bt=P(79006),Gt=P(32303),j=P(40622),hr=P(42335),ze=P(61823),vr=(0,Gt.K2)(gt=>gt.append("circle").attr("class","start-state").attr("r",(0,bt.D7)().state.sizeUnit).attr("cx",(0,bt.D7)().state.padding+(0,bt.D7)().state.sizeUnit).attr("cy",(0,bt.D7)().state.padding+(0,bt.D7)().state.sizeUnit),"drawStartState"),Wr=(0,Gt.K2)(gt=>gt.append("line").style("stroke","grey").style("stroke-dasharray","3").attr("x1",(0,bt.D7)().state.textHeight).attr("class","divider").attr("x2",2*(0,bt.D7)().state.textHeight).attr("y1",0).attr("y2",0),"drawDivider"),Br=(0,Gt.K2)((gt,Y)=>{const Nt=gt.append("text").attr("x",2*(0,bt.D7)().state.padding).attr("y",(0,bt.D7)().state.textHeight+2*(0,bt.D7)().state.padding).attr("font-size",(0,bt.D7)().state.fontSize).attr("class","state-title").text(Y.id),St=Nt.node().getBBox();return gt.insert("rect",":first-child").attr("x",(0,bt.D7)().state.padding).attr("y",(0,bt.D7)().state.padding).attr("width",St.width+2*(0,bt.D7)().state.padding).attr("height",St.height+2*(0,bt.D7)().state.padding).attr("rx",(0,bt.D7)().state.radius),Nt},"drawSimpleState"),Gr=(0,Gt.K2)((gt,Y)=>{const Nt=(0,Gt.K2)(function(Tt,B,N){const et=Tt.append("tspan").attr("x",2*(0,bt.D7)().state.padding).text(B);N||et.attr("dy",(0,bt.D7)().state.textHeight)},"addTspan"),Ut=gt.append("text").attr("x",2*(0,bt.D7)().state.padding).attr("y",(0,bt.D7)().state.textHeight+1.3*(0,bt.D7)().state.padding).attr("font-size",(0,bt.D7)().state.fontSize).attr("class","state-title").text(Y.descriptions[0]).node().getBBox(),ye=Ut.height,le=gt.append("text").attr("x",(0,bt.D7)().state.padding).attr("y",ye+.4*(0,bt.D7)().state.padding+(0,bt.D7)().state.dividerMargin+(0,bt.D7)().state.textHeight).attr("class","state-description");let Pe=!0,oe=!0;Y.descriptions.forEach(function(Tt){Pe||(Nt(le,Tt,oe),oe=!1),Pe=!1});const qe=gt.append("line").attr("x1",(0,bt.D7)().state.padding).attr("y1",(0,bt.D7)().state.padding+ye+(0,bt.D7)().state.dividerMargin/2).attr("y2",(0,bt.D7)().state.padding+ye+(0,bt.D7)().state.dividerMargin/2).attr("class","descr-divider"),We=le.node().getBBox(),Et=Math.max(We.width,Ut.width);return qe.attr("x2",Et+3*(0,bt.D7)().state.padding),gt.insert("rect",":first-child").attr("x",(0,bt.D7)().state.padding).attr("y",(0,bt.D7)().state.padding).attr("width",Et+2*(0,bt.D7)().state.padding).attr("height",We.height+ye+2*(0,bt.D7)().state.padding).attr("rx",(0,bt.D7)().state.radius),gt},"drawDescrState"),aa=(0,Gt.K2)((gt,Y,Nt)=>{const St=(0,bt.D7)().state.padding,Ut=2*(0,bt.D7)().state.padding,ye=gt.node().getBBox(),le=ye.width,Pe=ye.x,oe=gt.append("text").attr("x",0).attr("y",(0,bt.D7)().state.titleShift).attr("font-size",(0,bt.D7)().state.fontSize).attr("class","state-title").text(Y.id),We=oe.node().getBBox().width+Ut;let Tt,Et=Math.max(We,le);Et===le&&(Et+=Ut);const B=gt.node().getBBox();Tt=Pe-St,We>le&&(Tt=(le-Et)/2+St),Math.abs(Pe-B.x)<St&&We>le&&(Tt=Pe-(We-le)/2);const N=1-(0,bt.D7)().state.textHeight;return gt.insert("rect",":first-child").attr("x",Tt).attr("y",N).attr("class",Nt?"alt-composit":"composit").attr("width",Et).attr("height",B.height+(0,bt.D7)().state.textHeight+(0,bt.D7)().state.titleShift+1).attr("rx","0"),oe.attr("x",Tt+St),We<=le&&oe.attr("x",Pe+(Et-Ut)/2-We/2+St),gt.insert("rect",":first-child").attr("x",Tt).attr("y",(0,bt.D7)().state.titleShift-(0,bt.D7)().state.textHeight-(0,bt.D7)().state.padding).attr("width",Et).attr("height",3*(0,bt.D7)().state.textHeight).attr("rx",(0,bt.D7)().state.radius),gt.insert("rect",":first-child").attr("x",Tt).attr("y",(0,bt.D7)().state.titleShift-(0,bt.D7)().state.textHeight-(0,bt.D7)().state.padding).attr("width",Et).attr("height",B.height+3+2*(0,bt.D7)().state.textHeight).attr("rx",(0,bt.D7)().state.radius),gt},"addTitleAndBox"),zr=(0,Gt.K2)(gt=>(gt.append("circle").attr("class","end-state-outer").attr("r",(0,bt.D7)().state.sizeUnit+(0,bt.D7)().state.miniPadding).attr("cx",(0,bt.D7)().state.padding+(0,bt.D7)().state.sizeUnit+(0,bt.D7)().state.miniPadding).attr("cy",(0,bt.D7)().state.padding+(0,bt.D7)().state.sizeUnit+(0,bt.D7)().state.miniPadding),gt.append("circle").attr("class","end-state-inner").attr("r",(0,bt.D7)().state.sizeUnit).attr("cx",(0,bt.D7)().state.padding+(0,bt.D7)().state.sizeUnit+2).attr("cy",(0,bt.D7)().state.padding+(0,bt.D7)().state.sizeUnit+2)),"drawEndState"),Or=(0,Gt.K2)((gt,Y)=>{let Nt=(0,bt.D7)().state.forkWidth,St=(0,bt.D7)().state.forkHeight;if(Y.parentId){let Ut=Nt;Nt=St,St=Ut}return gt.append("rect").style("stroke","black").style("fill","black").attr("width",Nt).attr("height",St).attr("x",(0,bt.D7)().state.padding).attr("y",(0,bt.D7)().state.padding)},"drawForkJoinState"),Be=(0,Gt.K2)((gt,Y,Nt,St)=>{let Ut=0;const ye=St.append("text");ye.style("text-anchor","start"),ye.attr("class","noteText");let le=gt.replace(/\r\n/g,"<br/>");le=le.replace(/\n/g,"<br/>");const Pe=le.split(bt.Y2.lineBreakRegex);let oe=1.25*(0,bt.D7)().state.noteMargin;for(const qe of Pe){const We=qe.trim();if(We.length>0){const Et=ye.append("tspan");Et.text(We),0===oe&&(oe+=Et.node().getBBox().height),Ut+=oe,Et.attr("x",Y+(0,bt.D7)().state.noteMargin),Et.attr("y",Nt+Ut+1.25*(0,bt.D7)().state.noteMargin)}}return{textWidth:ye.node().getBBox().width,textHeight:Ut}},"_drawLongText"),Ir=(0,Gt.K2)((gt,Y)=>{Y.attr("class","state-note");const Nt=Y.append("rect").attr("x",0).attr("y",(0,bt.D7)().state.padding),St=Y.append("g"),{textWidth:Ut,textHeight:ye}=Be(gt,0,0,St);return Nt.attr("height",ye+2*(0,bt.D7)().state.noteMargin),Nt.attr("width",Ut+2*(0,bt.D7)().state.noteMargin),Nt},"drawNote"),Xe=(0,Gt.K2)(function(gt,Y){const Nt=Y.id,St={id:Nt,label:Y.id,width:0,height:0},Ut=gt.append("g").attr("id",Nt).attr("class","stateGroup");"start"===Y.type&&vr(Ut),"end"===Y.type&&zr(Ut),("fork"===Y.type||"join"===Y.type)&&Or(Ut,Y),"note"===Y.type&&Ir(Y.note.text,Ut),"divider"===Y.type&&Wr(Ut),"default"===Y.type&&0===Y.descriptions.length&&Br(Ut,Y),"default"===Y.type&&Y.descriptions.length>0&&Gr(Ut,Y);const ye=Ut.node().getBBox();return St.width=ye.width+2*(0,bt.D7)().state.padding,St.height=ye.height+2*(0,bt.D7)().state.padding,St},"drawState"),z=0,dt=(0,Gt.K2)(function(gt,Y,Nt){const St=(0,Gt.K2)(function(oe){switch(oe){case lt.u4.relationType.AGGREGATION:return"aggregation";case lt.u4.relationType.EXTENSION:return"extension";case lt.u4.relationType.COMPOSITION:return"composition";case lt.u4.relationType.DEPENDENCY:return"dependency"}},"getRelationType");Y.points=Y.points.filter(oe=>!Number.isNaN(oe.y));const Ut=Y.points,ye=(0,j.n8j)().x(function(oe){return oe.x}).y(function(oe){return oe.y}).curve(j.qrM),le=gt.append("path").attr("d",ye(Ut)).attr("id","edge"+z).attr("class","transition");let Pe="";if((0,bt.D7)().state.arrowMarkerAbsolute&&(Pe=(0,bt.ID)(!0)),le.attr("marker-end","url("+Pe+"#"+St(lt.u4.relationType.DEPENDENCY)+"End)"),void 0!==Nt.title){const oe=gt.append("g").attr("class","stateLabel"),{x:qe,y:We}=Ge._K.calcLabelPosition(Y.points),Et=bt.Y2.getRows(Nt.title);let Tt=0;const B=[];let N=0,et=0;for(let rt=0;rt<=Et.length;rt++){const _t=oe.append("text").attr("text-anchor","middle").text(Et[rt]).attr("x",qe).attr("y",We+Tt),ht=_t.node().getBBox();N=Math.max(N,ht.width),et=Math.min(et,ht.x),Gt.Rm.info(ht.x,qe,We+Tt),0===Tt&&(Tt=_t.node().getBBox().height,Gt.Rm.info("Title height",Tt,We)),B.push(_t)}let yt=Tt*Et.length;if(Et.length>1){const rt=(Et.length-1)*Tt*.5;B.forEach((_t,ht)=>_t.attr("y",We+ht*Tt-rt)),yt=Tt*Et.length}const it=oe.node().getBBox();oe.insert("rect",":first-child").attr("class","box").attr("x",qe-N/2-(0,bt.D7)().state.padding/2).attr("y",We-yt/2-(0,bt.D7)().state.padding/2-3.5).attr("width",N+(0,bt.D7)().state.padding).attr("height",yt+(0,bt.D7)().state.padding),Gt.Rm.info(it)}z++},"drawEdge"),Se={},X=(0,Gt.K2)(function(){},"setConf"),re=(0,Gt.K2)(function(gt){gt.append("defs").append("marker").attr("id","dependencyEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 19,7 L9,13 L14,7 L9,1 Z")},"insertMarkers"),S=(0,Gt.K2)(function(gt,Y,Nt,St){Bt=(0,bt.D7)().state;const Ut=(0,bt.D7)().securityLevel;let ye;"sandbox"===Ut&&(ye=(0,j.Ltv)("#i"+Y));const le=(0,j.Ltv)("sandbox"===Ut?ye.nodes()[0].contentDocument.body:"body"),Pe="sandbox"===Ut?ye.nodes()[0].contentDocument:document;Gt.Rm.debug("Rendering diagram "+gt);const oe=le.select(`[id='${Y}']`);re(oe);const qe=St.db.getRootDoc();Rt(qe,oe,void 0,!1,le,Pe,St);const We=Bt.padding,Et=oe.node().getBBox(),Tt=Et.width+2*We,B=Et.height+2*We;(0,bt.a$)(oe,B,1.75*Tt,Bt.useMaxWidth),oe.attr("viewBox",`${Et.x-Bt.padding}  ${Et.y-Bt.padding} `+Tt+" "+B)},"draw"),ee=(0,Gt.K2)(gt=>gt?gt.length*Bt.fontSizeFactor:1,"getLabelWidth"),Rt=(0,Gt.K2)((gt,Y,Nt,St,Ut,ye,le)=>{const Pe=new ze.T({compound:!0,multigraph:!0});let oe,qe=!0;for(oe=0;oe<gt.length;oe++)if("relation"===gt[oe].stmt){qe=!1;break}Pe.setGraph(Nt?{rankdir:"LR",multigraph:!0,compound:!0,ranker:"tight-tree",ranksep:qe?1:Bt.edgeLengthFactor,nodeSep:qe?1:50,isMultiGraph:!0}:{rankdir:"TB",multigraph:!0,compound:!0,ranksep:qe?1:Bt.edgeLengthFactor,nodeSep:qe?1:50,ranker:"tight-tree",isMultiGraph:!0}),Pe.setDefaultEdgeLabel(function(){return{}});const We=le.db.getStates(),Et=le.db.getRelations(),Tt=Object.keys(We);for(const rt of Tt){const _t=We[rt];let ht;if(Nt&&(_t.parentId=Nt),_t.doc){let Ot=Y.append("g").attr("id",_t.id).attr("class","stateGroup");ht=Rt(_t.doc,Ot,_t.id,!St,Ut,ye,le);{Ot=aa(Ot,_t,St);let H=Ot.node().getBBox();ht.width=H.width,ht.height=H.height+Bt.padding/2,Se[_t.id]={y:Bt.compositTitleSize}}}else ht=Xe(Y,_t,Pe);if(_t.note){const H=Xe(Y,{descriptions:[],id:_t.id+"-note",note:_t.note,type:"note"},Pe);"left of"===_t.note.position?(Pe.setNode(ht.id+"-note",H),Pe.setNode(ht.id,ht)):(Pe.setNode(ht.id,ht),Pe.setNode(ht.id+"-note",H)),Pe.setParent(ht.id,ht.id+"-group"),Pe.setParent(ht.id+"-note",ht.id+"-group")}else Pe.setNode(ht.id,ht)}Gt.Rm.debug("Count=",Pe.nodeCount(),Pe);let N=0;Et.forEach(function(rt){N++,Gt.Rm.debug("Setting edge",rt),Pe.setEdge(rt.id1,rt.id2,{relation:rt,width:ee(rt.title),height:Bt.labelHeight*bt.Y2.getRows(rt.title).length,labelpos:"c"},"id"+N)}),(0,hr.Zp)(Pe),Gt.Rm.debug("Graph after layout",Pe.nodes());const et=Y.node();Pe.nodes().forEach(function(rt){void 0!==rt&&void 0!==Pe.node(rt)?(Gt.Rm.warn("Node "+rt+": "+JSON.stringify(Pe.node(rt))),Ut.select("#"+et.id+" #"+rt).attr("transform","translate("+(Pe.node(rt).x-Pe.node(rt).width/2)+","+(Pe.node(rt).y+(Se[rt]?Se[rt].y:0)-Pe.node(rt).height/2)+" )"),Ut.select("#"+et.id+" #"+rt).attr("data-x-shift",Pe.node(rt).x-Pe.node(rt).width/2),ye.querySelectorAll("#"+et.id+" #"+rt+" .divider").forEach(ht=>{const Ot=ht.parentElement;let H=0,ot=0;Ot&&(Ot.parentElement&&(H=Ot.parentElement.getBBox().width),ot=parseInt(Ot.getAttribute("data-x-shift"),10),Number.isNaN(ot)&&(ot=0)),ht.setAttribute("x1",0-ot+8),ht.setAttribute("x2",H-ot-8)})):Gt.Rm.debug("No Node "+rt+": "+JSON.stringify(Pe.node(rt)))});let yt=et.getBBox();Pe.edges().forEach(function(rt){void 0!==rt&&void 0!==Pe.edge(rt)&&(Gt.Rm.debug("Edge "+rt.v+" -> "+rt.w+": "+JSON.stringify(Pe.edge(rt))),dt(Y,Pe.edge(rt),Pe.edge(rt).relation))}),yt=et.getBBox();const it={id:Nt||"root",label:Nt||"root",width:0,height:0};return it.width=yt.width+2*Bt.padding,it.height=yt.height+2*Bt.padding,Gt.Rm.debug("Doc rendered",it,Pe),it},"renderDoc"),qt={setConf:X,draw:S},V={parser:lt.Zk,get db(){return new lt.u4(1)},renderer:qt,styles:lt.tM,init:(0,Gt.K2)(gt=>{gt.state||(gt.state={}),gt.state.arrowMarkerAbsolute=gt.arrowMarkerAbsolute},"init")}},64693:function(ri){ri.exports=function(){"use strict";return function(P,lt,ie){var L=function(ut){return ut.add(4-ut.isoWeekday(),"day")},D=lt.prototype;D.isoWeekYear=function(){return L(this).year()},D.isoWeek=function(ut){if(!this.$utils().u(ut))return this.add(7*(ut-this.isoWeek()),"day");var G,Lt,At,Ge=L(this),bt=(G=this.isoWeekYear(),At=4-(Lt=(this.$u?ie.utc:ie)().year(G).startOf("year")).isoWeekday(),Lt.isoWeekday()>4&&(At+=7),Lt.add(At,"day"));return Ge.diff(bt,"week")+1},D.isoWeekday=function(ut){return this.$utils().u(ut)?this.day()||7:this.day(this.day()%7?ut:ut-7)};var Mt=D.startOf;D.startOf=function(ut,G){var w=this.$utils(),Lt=!!w.u(G)||G;return"isoweek"===w.p(ut)?Lt?this.date(this.date()-(this.isoWeekday()-1)).startOf("day"):this.date(this.date()-1-(this.isoWeekday()-1)+7).endOf("day"):Mt.bind(this)(ut,G)}}}()},67040:(ri,Er,P)=>{"use strict";P.d(Er,{m:()=>D});var L,lt=P(45027),ie=P(32303),D=(class{constructor(Mt){this.init=Mt,this.records=this.init()}reset(){this.records=this.init()}static#t=L=()=>((0,lt.A)(this,"ImperativeState"),(0,ie.K2)(this,"ImperativeState"),this)},L())},67137:(ri,Er,P)=>{"use strict";P.r(Er),P.d(Er,{diagram:()=>mr});var w,Lt,At,Ge,bt,Gt,j,hr,ze,vr,lt=P(45027),ie=P(69664),L=P(59355),D=P(52052),Mt=P(79006),ut=P(32303),G=P(40622),Wr=function(){var Wt=(0,ut.K2)(function(Vt,Kt,xe,je){for(xe=xe||{},je=Vt.length;je--;xe[Vt[je]]=Kt);return xe},"o"),we=[1,10,12,14,16,18,19,21,23],sr=[2,6],ve=[1,3],ce=[1,5],Ee=[1,6],Ae=[1,7],er=[1,5,10,12,14,16,18,19,21,23,34,35,36],Qe=[1,25],Dr=[1,26],_e=[1,28],Yr=[1,29],nr=[1,30],te=[1,31],ne=[1,32],be=[1,33],ar=[1,34],g=[1,35],y=[1,36],E=[1,37],M=[1,43],m=[1,42],A=[1,47],v=[1,50],b=[1,10,12,14,16,18,19,21,23,34,35,36],C=[1,10,12,14,16,18,19,21,23,24,26,27,28,34,35,36],R=[1,10,12,14,16,18,19,21,23,24,26,27,28,34,35,36,41,42,43,44,45,46,47,48,49,50],Q=[1,64],mt={trace:(0,ut.K2)(function(){},"trace"),yy:{},symbols_:{error:2,start:3,eol:4,XYCHART:5,chartConfig:6,document:7,CHART_ORIENTATION:8,statement:9,title:10,text:11,X_AXIS:12,parseXAxis:13,Y_AXIS:14,parseYAxis:15,LINE:16,plotData:17,BAR:18,acc_title:19,acc_title_value:20,acc_descr:21,acc_descr_value:22,acc_descr_multiline_value:23,SQUARE_BRACES_START:24,commaSeparatedNumbers:25,SQUARE_BRACES_END:26,NUMBER_WITH_DECIMAL:27,COMMA:28,xAxisData:29,bandData:30,ARROW_DELIMITER:31,commaSeparatedTexts:32,yAxisData:33,NEWLINE:34,SEMI:35,EOF:36,alphaNum:37,STR:38,MD_STR:39,alphaNumToken:40,AMP:41,NUM:42,ALPHA:43,PLUS:44,EQUALS:45,MULT:46,DOT:47,BRKT:48,MINUS:49,UNDERSCORE:50,$accept:0,$end:1},terminals_:{2:"error",5:"XYCHART",8:"CHART_ORIENTATION",10:"title",12:"X_AXIS",14:"Y_AXIS",16:"LINE",18:"BAR",19:"acc_title",20:"acc_title_value",21:"acc_descr",22:"acc_descr_value",23:"acc_descr_multiline_value",24:"SQUARE_BRACES_START",26:"SQUARE_BRACES_END",27:"NUMBER_WITH_DECIMAL",28:"COMMA",31:"ARROW_DELIMITER",34:"NEWLINE",35:"SEMI",36:"EOF",38:"STR",39:"MD_STR",41:"AMP",42:"NUM",43:"ALPHA",44:"PLUS",45:"EQUALS",46:"MULT",47:"DOT",48:"BRKT",49:"MINUS",50:"UNDERSCORE"},productions_:[0,[3,2],[3,3],[3,2],[3,1],[6,1],[7,0],[7,2],[9,2],[9,2],[9,2],[9,2],[9,2],[9,3],[9,2],[9,3],[9,2],[9,2],[9,1],[17,3],[25,3],[25,1],[13,1],[13,2],[13,1],[29,1],[29,3],[30,3],[32,3],[32,1],[15,1],[15,2],[15,1],[33,3],[4,1],[4,1],[4,1],[11,1],[11,1],[11,1],[37,1],[37,2],[40,1],[40,1],[40,1],[40,1],[40,1],[40,1],[40,1],[40,1],[40,1],[40,1]],performAction:(0,ut.K2)(function(Kt,xe,je,Ke,fr,lr,br){var $e=lr.length-1;switch(fr){case 5:Ke.setOrientation(lr[$e]);break;case 9:Ke.setDiagramTitle(lr[$e].text.trim());break;case 12:Ke.setLineData({text:"",type:"text"},lr[$e]);break;case 13:Ke.setLineData(lr[$e-1],lr[$e]);break;case 14:Ke.setBarData({text:"",type:"text"},lr[$e]);break;case 15:Ke.setBarData(lr[$e-1],lr[$e]);break;case 16:this.$=lr[$e].trim(),Ke.setAccTitle(this.$);break;case 17:case 18:this.$=lr[$e].trim(),Ke.setAccDescription(this.$);break;case 19:case 27:this.$=lr[$e-1];break;case 20:this.$=[Number(lr[$e-2]),...lr[$e]];break;case 21:this.$=[Number(lr[$e])];break;case 22:Ke.setXAxisTitle(lr[$e]);break;case 23:Ke.setXAxisTitle(lr[$e-1]);break;case 24:Ke.setXAxisTitle({type:"text",text:""});break;case 25:Ke.setXAxisBand(lr[$e]);break;case 26:Ke.setXAxisRangeData(Number(lr[$e-2]),Number(lr[$e]));break;case 28:this.$=[lr[$e-2],...lr[$e]];break;case 29:this.$=[lr[$e]];break;case 30:Ke.setYAxisTitle(lr[$e]);break;case 31:Ke.setYAxisTitle(lr[$e-1]);break;case 32:Ke.setYAxisTitle({type:"text",text:""});break;case 33:Ke.setYAxisRangeData(Number(lr[$e-2]),Number(lr[$e]));break;case 37:case 38:this.$={text:lr[$e],type:"text"};break;case 39:this.$={text:lr[$e],type:"markdown"};break;case 40:this.$=lr[$e];break;case 41:this.$=lr[$e-1]+""+lr[$e]}},"anonymous"),table:[Wt(we,sr,{3:1,4:2,7:4,5:ve,34:ce,35:Ee,36:Ae}),{1:[3]},Wt(we,sr,{4:2,7:4,3:8,5:ve,34:ce,35:Ee,36:Ae}),Wt(we,sr,{4:2,7:4,6:9,3:10,5:ve,8:[1,11],34:ce,35:Ee,36:Ae}),{1:[2,4],9:12,10:[1,13],12:[1,14],14:[1,15],16:[1,16],18:[1,17],19:[1,18],21:[1,19],23:[1,20]},Wt(er,[2,34]),Wt(er,[2,35]),Wt(er,[2,36]),{1:[2,1]},Wt(we,sr,{4:2,7:4,3:21,5:ve,34:ce,35:Ee,36:Ae}),{1:[2,3]},Wt(er,[2,5]),Wt(we,[2,7],{4:22,34:ce,35:Ee,36:Ae}),{11:23,37:24,38:Qe,39:Dr,40:27,41:_e,42:Yr,43:nr,44:te,45:ne,46:be,47:ar,48:g,49:y,50:E},{11:39,13:38,24:M,27:m,29:40,30:41,37:24,38:Qe,39:Dr,40:27,41:_e,42:Yr,43:nr,44:te,45:ne,46:be,47:ar,48:g,49:y,50:E},{11:45,15:44,27:A,33:46,37:24,38:Qe,39:Dr,40:27,41:_e,42:Yr,43:nr,44:te,45:ne,46:be,47:ar,48:g,49:y,50:E},{11:49,17:48,24:v,37:24,38:Qe,39:Dr,40:27,41:_e,42:Yr,43:nr,44:te,45:ne,46:be,47:ar,48:g,49:y,50:E},{11:52,17:51,24:v,37:24,38:Qe,39:Dr,40:27,41:_e,42:Yr,43:nr,44:te,45:ne,46:be,47:ar,48:g,49:y,50:E},{20:[1,53]},{22:[1,54]},Wt(b,[2,18]),{1:[2,2]},Wt(b,[2,8]),Wt(b,[2,9]),Wt(C,[2,37],{40:55,41:_e,42:Yr,43:nr,44:te,45:ne,46:be,47:ar,48:g,49:y,50:E}),Wt(C,[2,38]),Wt(C,[2,39]),Wt(R,[2,40]),Wt(R,[2,42]),Wt(R,[2,43]),Wt(R,[2,44]),Wt(R,[2,45]),Wt(R,[2,46]),Wt(R,[2,47]),Wt(R,[2,48]),Wt(R,[2,49]),Wt(R,[2,50]),Wt(R,[2,51]),Wt(b,[2,10]),Wt(b,[2,22],{30:41,29:56,24:M,27:m}),Wt(b,[2,24]),Wt(b,[2,25]),{31:[1,57]},{11:59,32:58,37:24,38:Qe,39:Dr,40:27,41:_e,42:Yr,43:nr,44:te,45:ne,46:be,47:ar,48:g,49:y,50:E},Wt(b,[2,11]),Wt(b,[2,30],{33:60,27:A}),Wt(b,[2,32]),{31:[1,61]},Wt(b,[2,12]),{17:62,24:v},{25:63,27:Q},Wt(b,[2,14]),{17:65,24:v},Wt(b,[2,16]),Wt(b,[2,17]),Wt(R,[2,41]),Wt(b,[2,23]),{27:[1,66]},{26:[1,67]},{26:[2,29],28:[1,68]},Wt(b,[2,31]),{27:[1,69]},Wt(b,[2,13]),{26:[1,70]},{26:[2,21],28:[1,71]},Wt(b,[2,15]),Wt(b,[2,26]),Wt(b,[2,27]),{11:59,32:72,37:24,38:Qe,39:Dr,40:27,41:_e,42:Yr,43:nr,44:te,45:ne,46:be,47:ar,48:g,49:y,50:E},Wt(b,[2,33]),Wt(b,[2,19]),{25:73,27:Q},{26:[2,28]},{26:[2,20]}],defaultActions:{8:[2,1],10:[2,3],21:[2,2],72:[2,28],73:[2,20]},parseError:(0,ut.K2)(function(Kt,xe){if(!xe.recoverable){var je=new Error(Kt);throw je.hash=xe,je}this.trace(Kt)},"parseError"),parse:(0,ut.K2)(function(Kt){var xe=this,je=[0],Ke=[],fr=[null],lr=[],br=this.table,$e="",He=0,wr=0,kr=0,Jr=lr.slice.call(arguments,1),Lr=Object.create(this.lexer),ha={yy:{}};for(var ia in this.yy)Object.prototype.hasOwnProperty.call(this.yy,ia)&&(ha.yy[ia]=this.yy[ia]);Lr.setInput(Kt,ha.yy),ha.yy.lexer=Lr,ha.yy.parser=this,typeof Lr.yylloc>"u"&&(Lr.yylloc={});var jr=Lr.yylloc;lr.push(jr);var Qr=Lr.options&&Lr.options.ranges;function ur(){var sa;return"number"!=typeof(sa=Ke.pop()||Lr.lex()||1)&&(sa instanceof Array&&(sa=(Ke=sa).pop()),sa=xe.symbols_[sa]||sa),sa}this.parseError="function"==typeof ha.yy.parseError?ha.yy.parseError:Object.getPrototypeOf(this).parseError,(0,ut.K2)(function or(sa){je.length=je.length-2*sa,fr.length=fr.length-sa,lr.length=lr.length-sa},"popStack"),(0,ut.K2)(ur,"lex");for(var W,$t,Ye,Fe,pr,Pa,Ma,Ia,da={};;){if(this.defaultActions[Ye=je[je.length-1]]?Fe=this.defaultActions[Ye]:((null===W||typeof W>"u")&&(W=ur()),Fe=br[Ye]&&br[Ye][W]),typeof Fe>"u"||!Fe.length||!Fe[0]){var ba;for(Pa in Ia=[],br[Ye])this.terminals_[Pa]&&Pa>2&&Ia.push("'"+this.terminals_[Pa]+"'");ba=Lr.showPosition?"Parse error on line "+(He+1)+":\n"+Lr.showPosition()+"\nExpecting "+Ia.join(", ")+", got '"+(this.terminals_[W]||W)+"'":"Parse error on line "+(He+1)+": Unexpected "+(1==W?"end of input":"'"+(this.terminals_[W]||W)+"'"),this.parseError(ba,{text:Lr.match,token:this.terminals_[W]||W,line:Lr.yylineno,loc:jr,expected:Ia})}if(Fe[0]instanceof Array&&Fe.length>1)throw new Error("Parse Error: multiple actions possible at state: "+Ye+", token: "+W);switch(Fe[0]){case 1:je.push(W),fr.push(Lr.yytext),lr.push(Lr.yylloc),je.push(Fe[1]),W=null,$t?(W=$t,$t=null):(wr=Lr.yyleng,$e=Lr.yytext,He=Lr.yylineno,jr=Lr.yylloc,kr>0&&kr--);break;case 2:if(da.$=fr[fr.length-(Ma=this.productions_[Fe[1]][1])],da._$={first_line:lr[lr.length-(Ma||1)].first_line,last_line:lr[lr.length-1].last_line,first_column:lr[lr.length-(Ma||1)].first_column,last_column:lr[lr.length-1].last_column},Qr&&(da._$.range=[lr[lr.length-(Ma||1)].range[0],lr[lr.length-1].range[1]]),typeof(pr=this.performAction.apply(da,[$e,wr,He,ha.yy,Fe[1],fr,lr].concat(Jr)))<"u")return pr;Ma&&(je=je.slice(0,-1*Ma*2),fr=fr.slice(0,-1*Ma),lr=lr.slice(0,-1*Ma)),je.push(this.productions_[Fe[1]][0]),fr.push(da.$),lr.push(da._$),je.push(br[je[je.length-2]][je[je.length-1]]);break;case 3:return!0}}return!0},"parse")};function jt(){this.yy={}}return mt.lexer=function(){return{EOF:1,parseError:(0,ut.K2)(function(xe,je){if(!this.yy.parser)throw new Error(xe);this.yy.parser.parseError(xe,je)},"parseError"),setInput:(0,ut.K2)(function(Kt,xe){return this.yy=xe||this.yy||{},this._input=Kt,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},"setInput"),input:(0,ut.K2)(function(){var Kt=this._input[0];return this.yytext+=Kt,this.yyleng++,this.offset++,this.match+=Kt,this.matched+=Kt,Kt.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),Kt},"input"),unput:(0,ut.K2)(function(Kt){var xe=Kt.length,je=Kt.split(/(?:\r\n?|\n)/g);this._input=Kt+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-xe),this.offset-=xe;var Ke=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),je.length-1&&(this.yylineno-=je.length-1);var fr=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:je?(je.length===Ke.length?this.yylloc.first_column:0)+Ke[Ke.length-je.length].length-je[0].length:this.yylloc.first_column-xe},this.options.ranges&&(this.yylloc.range=[fr[0],fr[0]+this.yyleng-xe]),this.yyleng=this.yytext.length,this},"unput"),more:(0,ut.K2)(function(){return this._more=!0,this},"more"),reject:(0,ut.K2)(function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},"reject"),less:(0,ut.K2)(function(Kt){this.unput(this.match.slice(Kt))},"less"),pastInput:(0,ut.K2)(function(){var Kt=this.matched.substr(0,this.matched.length-this.match.length);return(Kt.length>20?"...":"")+Kt.substr(-20).replace(/\n/g,"")},"pastInput"),upcomingInput:(0,ut.K2)(function(){var Kt=this.match;return Kt.length<20&&(Kt+=this._input.substr(0,20-Kt.length)),(Kt.substr(0,20)+(Kt.length>20?"...":"")).replace(/\n/g,"")},"upcomingInput"),showPosition:(0,ut.K2)(function(){var Kt=this.pastInput(),xe=new Array(Kt.length+1).join("-");return Kt+this.upcomingInput()+"\n"+xe+"^"},"showPosition"),test_match:(0,ut.K2)(function(Kt,xe){var je,Ke,fr;if(this.options.backtrack_lexer&&(fr={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(fr.yylloc.range=this.yylloc.range.slice(0))),(Ke=Kt[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=Ke.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:Ke?Ke[Ke.length-1].length-Ke[Ke.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+Kt[0].length},this.yytext+=Kt[0],this.match+=Kt[0],this.matches=Kt,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(Kt[0].length),this.matched+=Kt[0],je=this.performAction.call(this,this.yy,this,xe,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),je)return je;if(this._backtrack){for(var lr in fr)this[lr]=fr[lr];return!1}return!1},"test_match"),next:(0,ut.K2)(function(){if(this.done)return this.EOF;var Kt,xe,je,Ke;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var fr=this._currentRules(),lr=0;lr<fr.length;lr++)if((je=this._input.match(this.rules[fr[lr]]))&&(!xe||je[0].length>xe[0].length)){if(xe=je,Ke=lr,this.options.backtrack_lexer){if(!1!==(Kt=this.test_match(je,fr[lr])))return Kt;if(this._backtrack){xe=!1;continue}return!1}if(!this.options.flex)break}return xe?!1!==(Kt=this.test_match(xe,fr[Ke]))&&Kt:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},"next"),lex:(0,ut.K2)(function(){return this.next()||this.lex()},"lex"),begin:(0,ut.K2)(function(xe){this.conditionStack.push(xe)},"begin"),popState:(0,ut.K2)(function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},"popState"),_currentRules:(0,ut.K2)(function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},"_currentRules"),topState:(0,ut.K2)(function(xe){return(xe=this.conditionStack.length-1-Math.abs(xe||0))>=0?this.conditionStack[xe]:"INITIAL"},"topState"),pushState:(0,ut.K2)(function(xe){this.begin(xe)},"pushState"),stateStackSize:(0,ut.K2)(function(){return this.conditionStack.length},"stateStackSize"),options:{"case-insensitive":!0},performAction:(0,ut.K2)(function(xe,je,Ke,fr){switch(Ke){case 0:case 1:case 5:case 44:break;case 2:case 3:return this.popState(),34;case 4:return 34;case 6:return 10;case 7:return this.pushState("acc_title"),19;case 8:return this.popState(),"acc_title_value";case 9:return this.pushState("acc_descr"),21;case 10:return this.popState(),"acc_descr_value";case 11:this.pushState("acc_descr_multiline");break;case 12:case 26:case 28:this.popState();break;case 13:return"acc_descr_multiline_value";case 14:case 15:return 5;case 16:return 8;case 17:return this.pushState("axis_data"),"X_AXIS";case 18:return this.pushState("axis_data"),"Y_AXIS";case 19:return this.pushState("axis_band_data"),24;case 20:return 31;case 21:return this.pushState("data"),16;case 22:return this.pushState("data"),18;case 23:return this.pushState("data_inner"),24;case 24:return 27;case 25:return this.popState(),26;case 27:this.pushState("string");break;case 29:return"STR";case 30:return 24;case 31:return 26;case 32:return 43;case 33:return"COLON";case 34:return 44;case 35:return 28;case 36:return 45;case 37:return 46;case 38:return 48;case 39:return 50;case 40:return 47;case 41:return 41;case 42:return 49;case 43:return 42;case 45:return 35;case 46:return 36}},"anonymous"),rules:[/^(?:%%(?!\{)[^\n]*)/i,/^(?:[^\}]%%[^\n]*)/i,/^(?:(\r?\n))/i,/^(?:(\r?\n))/i,/^(?:[\n\r]+)/i,/^(?:%%[^\n]*)/i,/^(?:title\b)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:\{)/i,/^(?:[^\}]*)/i,/^(?:xychart-beta\b)/i,/^(?:xychart\b)/i,/^(?:(?:vertical|horizontal))/i,/^(?:x-axis\b)/i,/^(?:y-axis\b)/i,/^(?:\[)/i,/^(?:-->)/i,/^(?:line\b)/i,/^(?:bar\b)/i,/^(?:\[)/i,/^(?:[+-]?(?:\d+(?:\.\d+)?|\.\d+))/i,/^(?:\])/i,/^(?:(?:`\)                                    \{ this\.pushState\(md_string\); \}\n<md_string>\(\?:\(\?!`"\)\.\)\+                  \{ return MD_STR; \}\n<md_string>\(\?:`))/i,/^(?:["])/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:\[)/i,/^(?:\])/i,/^(?:[A-Za-z]+)/i,/^(?::)/i,/^(?:\+)/i,/^(?:,)/i,/^(?:=)/i,/^(?:\*)/i,/^(?:#)/i,/^(?:[\_])/i,/^(?:\.)/i,/^(?:&)/i,/^(?:-)/i,/^(?:[0-9]+)/i,/^(?:\s+)/i,/^(?:;)/i,/^(?:$)/i],conditions:{data_inner:{rules:[0,1,4,5,6,7,9,11,14,15,16,17,18,21,22,24,25,26,27,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46],inclusive:!0},data:{rules:[0,1,3,4,5,6,7,9,11,14,15,16,17,18,21,22,23,26,27,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46],inclusive:!0},axis_band_data:{rules:[0,1,4,5,6,7,9,11,14,15,16,17,18,21,22,25,26,27,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46],inclusive:!0},axis_data:{rules:[0,1,2,4,5,6,7,9,11,14,15,16,17,18,19,20,21,22,24,26,27,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46],inclusive:!0},acc_descr_multiline:{rules:[12,13],inclusive:!1},acc_descr:{rules:[10],inclusive:!1},acc_title:{rules:[8],inclusive:!1},title:{rules:[],inclusive:!1},md_string:{rules:[],inclusive:!1},string:{rules:[28,29],inclusive:!1},INITIAL:{rules:[0,1,4,5,6,7,9,11,14,15,16,17,18,21,22,26,27,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46],inclusive:!0}}}}(),(0,ut.K2)(jt,"Parser"),jt.prototype=mt,mt.Parser=jt,new jt}();Wr.parser=Wr;var Br=Wr;function Gr(Wt){return"bar"===Wt.type}function aa(Wt){return"band"===Wt.type}function zr(Wt){return"linear"===Wt.type}(0,ut.K2)(Gr,"isBarPlot"),(0,ut.K2)(aa,"isBandAxisData"),(0,ut.K2)(zr,"isLinearAxisData");var Or=(class{constructor(Wt){this.parentGroup=Wt}getMaxDimension(Wt,we){if(!this.parentGroup)return{width:Wt.reduce((ce,Ee)=>Math.max(Ee.length,ce),0)*we,height:we};const sr={width:0,height:0},ve=this.parentGroup.append("g").attr("visibility","hidden").attr("font-size",we);for(const ce of Wt){const Ee=(0,L.W6)(ve,1,ce),er=Ee?Ee.height:we;sr.width=Math.max(sr.width,Ee?Ee.width:ce.length*we),sr.height=Math.max(sr.height,er)}return ve.remove(),sr}static#t=w=()=>((0,lt.A)(this,"TextDimensionCalculatorWithFont"),(0,ut.K2)(this,"TextDimensionCalculatorWithFont"),this)},w()),Xe=(class{constructor(Wt,we,sr,ve){this.axisConfig=Wt,this.title=we,this.textDimensionCalculator=sr,this.axisThemeConfig=ve,this.boundingRect={x:0,y:0,width:0,height:0},this.axisPosition="left",this.showTitle=!1,this.showLabel=!1,this.showTick=!1,this.showAxisLine=!1,this.outerPadding=0,this.titleTextHeight=0,this.labelTextHeight=0,this.range=[0,10],this.boundingRect={x:0,y:0,width:0,height:0},this.axisPosition="left"}setRange(Wt){this.range=Wt,"left"===this.axisPosition||"right"===this.axisPosition?this.boundingRect.height=Wt[1]-Wt[0]:this.boundingRect.width=Wt[1]-Wt[0],this.recalculateScale()}getRange(){return[this.range[0]+this.outerPadding,this.range[1]-this.outerPadding]}setAxisPosition(Wt){this.axisPosition=Wt,this.setRange(this.range)}getTickDistance(){const Wt=this.getRange();return Math.abs(Wt[0]-Wt[1])/this.getTickValues().length}getAxisOuterPadding(){return this.outerPadding}getLabelDimension(){return this.textDimensionCalculator.getMaxDimension(this.getTickValues().map(Wt=>Wt.toString()),this.axisConfig.labelFontSize)}recalculateOuterPaddingToDrawBar(){.7*this.getTickDistance()>2*this.outerPadding&&(this.outerPadding=Math.floor(.7*this.getTickDistance()/2)),this.recalculateScale()}calculateSpaceIfDrawnHorizontally(Wt){let we=Wt.height;if(this.axisConfig.showAxisLine&&we>this.axisConfig.axisLineWidth&&(we-=this.axisConfig.axisLineWidth,this.showAxisLine=!0),this.axisConfig.showLabel){const sr=this.getLabelDimension();this.outerPadding=Math.min(sr.width/2,.2*Wt.width);const ce=sr.height+2*this.axisConfig.labelPadding;this.labelTextHeight=sr.height,ce<=we&&(we-=ce,this.showLabel=!0)}if(this.axisConfig.showTick&&we>=this.axisConfig.tickLength&&(this.showTick=!0,we-=this.axisConfig.tickLength),this.axisConfig.showTitle&&this.title){const sr=this.textDimensionCalculator.getMaxDimension([this.title],this.axisConfig.titleFontSize),ve=sr.height+2*this.axisConfig.titlePadding;this.titleTextHeight=sr.height,ve<=we&&(we-=ve,this.showTitle=!0)}this.boundingRect.width=Wt.width,this.boundingRect.height=Wt.height-we}calculateSpaceIfDrawnVertical(Wt){let we=Wt.width;if(this.axisConfig.showAxisLine&&we>this.axisConfig.axisLineWidth&&(we-=this.axisConfig.axisLineWidth,this.showAxisLine=!0),this.axisConfig.showLabel){const sr=this.getLabelDimension();this.outerPadding=Math.min(sr.height/2,.2*Wt.height);const ce=sr.width+2*this.axisConfig.labelPadding;ce<=we&&(we-=ce,this.showLabel=!0)}if(this.axisConfig.showTick&&we>=this.axisConfig.tickLength&&(this.showTick=!0,we-=this.axisConfig.tickLength),this.axisConfig.showTitle&&this.title){const sr=this.textDimensionCalculator.getMaxDimension([this.title],this.axisConfig.titleFontSize),ve=sr.height+2*this.axisConfig.titlePadding;this.titleTextHeight=sr.height,ve<=we&&(we-=ve,this.showTitle=!0)}this.boundingRect.width=Wt.width-we,this.boundingRect.height=Wt.height}calculateSpace(Wt){return"left"===this.axisPosition||"right"===this.axisPosition?this.calculateSpaceIfDrawnVertical(Wt):this.calculateSpaceIfDrawnHorizontally(Wt),this.recalculateScale(),{width:this.boundingRect.width,height:this.boundingRect.height}}setBoundingBoxXY(Wt){this.boundingRect.x=Wt.x,this.boundingRect.y=Wt.y}getDrawableElementsForLeftAxis(){const Wt=[];if(this.showAxisLine){const we=this.boundingRect.x+this.boundingRect.width-this.axisConfig.axisLineWidth/2;Wt.push({type:"path",groupTexts:["left-axis","axisl-line"],data:[{path:`M ${we},${this.boundingRect.y} L ${we},${this.boundingRect.y+this.boundingRect.height} `,strokeFill:this.axisThemeConfig.axisLineColor,strokeWidth:this.axisConfig.axisLineWidth}]})}if(this.showLabel&&Wt.push({type:"text",groupTexts:["left-axis","label"],data:this.getTickValues().map(we=>({text:we.toString(),x:this.boundingRect.x+this.boundingRect.width-(this.showLabel?this.axisConfig.labelPadding:0)-(this.showTick?this.axisConfig.tickLength:0)-(this.showAxisLine?this.axisConfig.axisLineWidth:0),y:this.getScaleValue(we),fill:this.axisThemeConfig.labelColor,fontSize:this.axisConfig.labelFontSize,rotation:0,verticalPos:"middle",horizontalPos:"right"}))}),this.showTick){const we=this.boundingRect.x+this.boundingRect.width-(this.showAxisLine?this.axisConfig.axisLineWidth:0);Wt.push({type:"path",groupTexts:["left-axis","ticks"],data:this.getTickValues().map(sr=>({path:`M ${we},${this.getScaleValue(sr)} L ${we-this.axisConfig.tickLength},${this.getScaleValue(sr)}`,strokeFill:this.axisThemeConfig.tickColor,strokeWidth:this.axisConfig.tickWidth}))})}return this.showTitle&&Wt.push({type:"text",groupTexts:["left-axis","title"],data:[{text:this.title,x:this.boundingRect.x+this.axisConfig.titlePadding,y:this.boundingRect.y+this.boundingRect.height/2,fill:this.axisThemeConfig.titleColor,fontSize:this.axisConfig.titleFontSize,rotation:270,verticalPos:"top",horizontalPos:"center"}]}),Wt}getDrawableElementsForBottomAxis(){const Wt=[];if(this.showAxisLine){const we=this.boundingRect.y+this.axisConfig.axisLineWidth/2;Wt.push({type:"path",groupTexts:["bottom-axis","axis-line"],data:[{path:`M ${this.boundingRect.x},${we} L ${this.boundingRect.x+this.boundingRect.width},${we}`,strokeFill:this.axisThemeConfig.axisLineColor,strokeWidth:this.axisConfig.axisLineWidth}]})}if(this.showLabel&&Wt.push({type:"text",groupTexts:["bottom-axis","label"],data:this.getTickValues().map(we=>({text:we.toString(),x:this.getScaleValue(we),y:this.boundingRect.y+this.axisConfig.labelPadding+(this.showTick?this.axisConfig.tickLength:0)+(this.showAxisLine?this.axisConfig.axisLineWidth:0),fill:this.axisThemeConfig.labelColor,fontSize:this.axisConfig.labelFontSize,rotation:0,verticalPos:"top",horizontalPos:"center"}))}),this.showTick){const we=this.boundingRect.y+(this.showAxisLine?this.axisConfig.axisLineWidth:0);Wt.push({type:"path",groupTexts:["bottom-axis","ticks"],data:this.getTickValues().map(sr=>({path:`M ${this.getScaleValue(sr)},${we} L ${this.getScaleValue(sr)},${we+this.axisConfig.tickLength}`,strokeFill:this.axisThemeConfig.tickColor,strokeWidth:this.axisConfig.tickWidth}))})}return this.showTitle&&Wt.push({type:"text",groupTexts:["bottom-axis","title"],data:[{text:this.title,x:this.range[0]+(this.range[1]-this.range[0])/2,y:this.boundingRect.y+this.boundingRect.height-this.axisConfig.titlePadding-this.titleTextHeight,fill:this.axisThemeConfig.titleColor,fontSize:this.axisConfig.titleFontSize,rotation:0,verticalPos:"top",horizontalPos:"center"}]}),Wt}getDrawableElementsForTopAxis(){const Wt=[];if(this.showAxisLine){const we=this.boundingRect.y+this.boundingRect.height-this.axisConfig.axisLineWidth/2;Wt.push({type:"path",groupTexts:["top-axis","axis-line"],data:[{path:`M ${this.boundingRect.x},${we} L ${this.boundingRect.x+this.boundingRect.width},${we}`,strokeFill:this.axisThemeConfig.axisLineColor,strokeWidth:this.axisConfig.axisLineWidth}]})}if(this.showLabel&&Wt.push({type:"text",groupTexts:["top-axis","label"],data:this.getTickValues().map(we=>({text:we.toString(),x:this.getScaleValue(we),y:this.boundingRect.y+(this.showTitle?this.titleTextHeight+2*this.axisConfig.titlePadding:0)+this.axisConfig.labelPadding,fill:this.axisThemeConfig.labelColor,fontSize:this.axisConfig.labelFontSize,rotation:0,verticalPos:"top",horizontalPos:"center"}))}),this.showTick){const we=this.boundingRect.y;Wt.push({type:"path",groupTexts:["top-axis","ticks"],data:this.getTickValues().map(sr=>({path:`M ${this.getScaleValue(sr)},${we+this.boundingRect.height-(this.showAxisLine?this.axisConfig.axisLineWidth:0)} L ${this.getScaleValue(sr)},${we+this.boundingRect.height-this.axisConfig.tickLength-(this.showAxisLine?this.axisConfig.axisLineWidth:0)}`,strokeFill:this.axisThemeConfig.tickColor,strokeWidth:this.axisConfig.tickWidth}))})}return this.showTitle&&Wt.push({type:"text",groupTexts:["top-axis","title"],data:[{text:this.title,x:this.boundingRect.x+this.boundingRect.width/2,y:this.boundingRect.y+this.axisConfig.titlePadding,fill:this.axisThemeConfig.titleColor,fontSize:this.axisConfig.titleFontSize,rotation:0,verticalPos:"top",horizontalPos:"center"}]}),Wt}getDrawableElements(){if("left"===this.axisPosition)return this.getDrawableElementsForLeftAxis();if("right"===this.axisPosition)throw Error("Drawing of right axis is not implemented");return"bottom"===this.axisPosition?this.getDrawableElementsForBottomAxis():"top"===this.axisPosition?this.getDrawableElementsForTopAxis():[]}static#t=Lt=()=>((0,lt.A)(this,"BaseAxis"),(0,ut.K2)(this,"BaseAxis"),this)},Lt()),z=(class extends Xe{constructor(Wt,we,sr,ve,ce){super(Wt,ve,ce,we),this.categories=sr,this.scale=(0,G.WH)().domain(this.categories).range(this.getRange())}setRange(Wt){super.setRange(Wt)}recalculateScale(){this.scale=(0,G.WH)().domain(this.categories).range(this.getRange()).paddingInner(1).paddingOuter(0).align(.5),ut.Rm.trace("BandAxis axis final categories, range: ",this.categories,this.getRange())}getTickValues(){return this.categories}getScaleValue(Wt){return this.scale(Wt)??this.getRange()[0]}static#t=At=()=>((0,lt.A)(this,"BandAxis"),(0,ut.K2)(this,"BandAxis"),this)},At()),dt=(class extends Xe{constructor(Wt,we,sr,ve,ce){super(Wt,ve,ce,we),this.domain=sr,this.scale=(0,G.m4Y)().domain(this.domain).range(this.getRange())}getTickValues(){return this.scale.ticks()}recalculateScale(){const Wt=[...this.domain];"left"===this.axisPosition&&Wt.reverse(),this.scale=(0,G.m4Y)().domain(Wt).range(this.getRange())}getScaleValue(Wt){return this.scale(Wt)}static#t=Ge=()=>((0,lt.A)(this,"LinearAxis"),(0,ut.K2)(this,"LinearAxis"),this)},Ge());function Bt(Wt,we,sr,ve){const ce=new Or(ve);return aa(Wt)?new z(we,sr,Wt.categories,Wt.title,ce):new dt(we,sr,[Wt.min,Wt.max],Wt.title,ce)}(0,ut.K2)(Bt,"getAxis");var Se=(class{constructor(Wt,we,sr,ve){this.textDimensionCalculator=Wt,this.chartConfig=we,this.chartData=sr,this.chartThemeConfig=ve,this.boundingRect={x:0,y:0,width:0,height:0},this.showChartTitle=!1}setBoundingBoxXY(Wt){this.boundingRect.x=Wt.x,this.boundingRect.y=Wt.y}calculateSpace(Wt){const we=this.textDimensionCalculator.getMaxDimension([this.chartData.title],this.chartConfig.titleFontSize),sr=Math.max(we.width,Wt.width),ve=we.height+2*this.chartConfig.titlePadding;return we.width<=sr&&we.height<=ve&&this.chartConfig.showTitle&&this.chartData.title&&(this.boundingRect.width=sr,this.boundingRect.height=ve,this.showChartTitle=!0),{width:this.boundingRect.width,height:this.boundingRect.height}}getDrawableElements(){const Wt=[];return this.showChartTitle&&Wt.push({groupTexts:["chart-title"],type:"text",data:[{fontSize:this.chartConfig.titleFontSize,text:this.chartData.title,verticalPos:"middle",horizontalPos:"center",x:this.boundingRect.x+this.boundingRect.width/2,y:this.boundingRect.y+this.boundingRect.height/2,fill:this.chartThemeConfig.titleColor,rotation:0}]}),Wt}static#t=bt=()=>((0,lt.A)(this,"ChartTitle"),(0,ut.K2)(this,"ChartTitle"),this)},bt());function X(Wt,we,sr,ve){const ce=new Or(ve);return new Se(ce,Wt,we,sr)}(0,ut.K2)(X,"getChartTitleComponent");var re=(class{constructor(Wt,we,sr,ve,ce){this.plotData=Wt,this.xAxis=we,this.yAxis=sr,this.orientation=ve,this.plotIndex=ce}getDrawableElement(){const Wt=this.plotData.data.map(sr=>[this.xAxis.getScaleValue(sr[0]),this.yAxis.getScaleValue(sr[1])]);let we;return we="horizontal"===this.orientation?(0,G.n8j)().y(sr=>sr[0]).x(sr=>sr[1])(Wt):(0,G.n8j)().x(sr=>sr[0]).y(sr=>sr[1])(Wt),we?[{groupTexts:["plot",`line-plot-${this.plotIndex}`],type:"path",data:[{path:we,strokeFill:this.plotData.strokeFill,strokeWidth:this.plotData.strokeWidth}]}]:[]}static#t=Gt=()=>((0,lt.A)(this,"LinePlot"),(0,ut.K2)(this,"LinePlot"),this)},Gt()),S=(class{constructor(Wt,we,sr,ve,ce,Ee){this.barData=Wt,this.boundingRect=we,this.xAxis=sr,this.yAxis=ve,this.orientation=ce,this.plotIndex=Ee}getDrawableElement(){const Wt=this.barData.data.map(ce=>[this.xAxis.getScaleValue(ce[0]),this.yAxis.getScaleValue(ce[1])]),sr=.95*Math.min(2*this.xAxis.getAxisOuterPadding(),this.xAxis.getTickDistance()),ve=sr/2;return"horizontal"===this.orientation?[{groupTexts:["plot",`bar-plot-${this.plotIndex}`],type:"rect",data:Wt.map(ce=>({x:this.boundingRect.x,y:ce[0]-ve,height:sr,width:ce[1]-this.boundingRect.x,fill:this.barData.fill,strokeWidth:0,strokeFill:this.barData.fill}))}]:[{groupTexts:["plot",`bar-plot-${this.plotIndex}`],type:"rect",data:Wt.map(ce=>({x:ce[0]-ve,y:ce[1],width:sr,height:this.boundingRect.y+this.boundingRect.height-ce[1],fill:this.barData.fill,strokeWidth:0,strokeFill:this.barData.fill}))}]}static#t=j=()=>((0,lt.A)(this,"BarPlot"),(0,ut.K2)(this,"BarPlot"),this)},j()),ee=(class{constructor(Wt,we,sr){this.chartConfig=Wt,this.chartData=we,this.chartThemeConfig=sr,this.boundingRect={x:0,y:0,width:0,height:0}}setAxes(Wt,we){this.xAxis=Wt,this.yAxis=we}setBoundingBoxXY(Wt){this.boundingRect.x=Wt.x,this.boundingRect.y=Wt.y}calculateSpace(Wt){return this.boundingRect.width=Wt.width,this.boundingRect.height=Wt.height,{width:this.boundingRect.width,height:this.boundingRect.height}}getDrawableElements(){if(!this.xAxis||!this.yAxis)throw Error("Axes must be passed to render Plots");const Wt=[];for(const[we,sr]of this.chartData.plots.entries())switch(sr.type){case"line":{const ve=new re(sr,this.xAxis,this.yAxis,this.chartConfig.chartOrientation,we);Wt.push(...ve.getDrawableElement())}break;case"bar":{const ve=new S(sr,this.boundingRect,this.xAxis,this.yAxis,this.chartConfig.chartOrientation,we);Wt.push(...ve.getDrawableElement())}}return Wt}static#t=hr=()=>((0,lt.A)(this,"BasePlot"),(0,ut.K2)(this,"BasePlot"),this)},hr());function Rt(Wt,we,sr){return new ee(Wt,we,sr)}(0,ut.K2)(Rt,"getPlotComponent");var Y,qt=(class{constructor(Wt,we,sr,ve){this.chartConfig=Wt,this.chartData=we,this.componentStore={title:X(Wt,we,sr,ve),plot:Rt(Wt,we,sr),xAxis:Bt(we.xAxis,Wt.xAxis,{titleColor:sr.xAxisTitleColor,labelColor:sr.xAxisLabelColor,tickColor:sr.xAxisTickColor,axisLineColor:sr.xAxisLineColor},ve),yAxis:Bt(we.yAxis,Wt.yAxis,{titleColor:sr.yAxisTitleColor,labelColor:sr.yAxisLabelColor,tickColor:sr.yAxisTickColor,axisLineColor:sr.yAxisLineColor},ve)}}calculateVerticalSpace(){let Wt=this.chartConfig.width,we=this.chartConfig.height,sr=0,ve=0,ce=Math.floor(Wt*this.chartConfig.plotReservedSpacePercent/100),Ee=Math.floor(we*this.chartConfig.plotReservedSpacePercent/100),Ae=this.componentStore.plot.calculateSpace({width:ce,height:Ee});Wt-=Ae.width,we-=Ae.height,Ae=this.componentStore.title.calculateSpace({width:this.chartConfig.width,height:we}),ve=Ae.height,we-=Ae.height,this.componentStore.xAxis.setAxisPosition("bottom"),Ae=this.componentStore.xAxis.calculateSpace({width:Wt,height:we}),we-=Ae.height,this.componentStore.yAxis.setAxisPosition("left"),Ae=this.componentStore.yAxis.calculateSpace({width:Wt,height:we}),sr=Ae.width,Wt-=Ae.width,Wt>0&&(ce+=Wt,Wt=0),we>0&&(Ee+=we,we=0),this.componentStore.plot.calculateSpace({width:ce,height:Ee}),this.componentStore.plot.setBoundingBoxXY({x:sr,y:ve}),this.componentStore.xAxis.setRange([sr,sr+ce]),this.componentStore.xAxis.setBoundingBoxXY({x:sr,y:ve+Ee}),this.componentStore.yAxis.setRange([ve,ve+Ee]),this.componentStore.yAxis.setBoundingBoxXY({x:0,y:ve}),this.chartData.plots.some(er=>Gr(er))&&this.componentStore.xAxis.recalculateOuterPaddingToDrawBar()}calculateHorizontalSpace(){let Wt=this.chartConfig.width,we=this.chartConfig.height,sr=0,ve=0,ce=0,Ee=Math.floor(Wt*this.chartConfig.plotReservedSpacePercent/100),Ae=Math.floor(we*this.chartConfig.plotReservedSpacePercent/100),er=this.componentStore.plot.calculateSpace({width:Ee,height:Ae});Wt-=er.width,we-=er.height,er=this.componentStore.title.calculateSpace({width:this.chartConfig.width,height:we}),sr=er.height,we-=er.height,this.componentStore.xAxis.setAxisPosition("left"),er=this.componentStore.xAxis.calculateSpace({width:Wt,height:we}),Wt-=er.width,ve=er.width,this.componentStore.yAxis.setAxisPosition("top"),er=this.componentStore.yAxis.calculateSpace({width:Wt,height:we}),we-=er.height,ce=sr+er.height,Wt>0&&(Ee+=Wt,Wt=0),we>0&&(Ae+=we,we=0),this.componentStore.plot.calculateSpace({width:Ee,height:Ae}),this.componentStore.plot.setBoundingBoxXY({x:ve,y:ce}),this.componentStore.yAxis.setRange([ve,ve+Ee]),this.componentStore.yAxis.setBoundingBoxXY({x:ve,y:sr}),this.componentStore.xAxis.setRange([ce,ce+Ae]),this.componentStore.xAxis.setBoundingBoxXY({x:0,y:ce}),this.chartData.plots.some(Qe=>Gr(Qe))&&this.componentStore.xAxis.recalculateOuterPaddingToDrawBar()}calculateSpace(){"horizontal"===this.chartConfig.chartOrientation?this.calculateHorizontalSpace():this.calculateVerticalSpace()}getDrawableElement(){this.calculateSpace();const Wt=[];this.componentStore.plot.setAxes(this.componentStore.xAxis,this.componentStore.yAxis);for(const we of Object.values(this.componentStore))Wt.push(...we.getDrawableElements());return Wt}static#t=ze=()=>((0,lt.A)(this,"Orchestrator"),(0,ut.K2)(this,"Orchestrator"),this)},ze()),V=(class{static build(Wt,we,sr,ve){return new qt(Wt,we,sr,ve).getDrawableElement()}static#t=vr=()=>((0,lt.A)(this,"XYChartBuilder"),(0,ut.K2)(this,"XYChartBuilder"),this)},vr()),gt=0,Nt=qe(),St=oe(),Ut={yAxis:{type:"linear",title:"",min:1/0,max:-1/0},xAxis:{type:"band",title:"",categories:[]},title:"",plots:[]},ye=St.plotColorPalette.split(",").map(Wt=>Wt.trim()),le=!1,Pe=!1;function oe(){const Wt=(0,Mt.P$)(),we=(0,Mt.zj)();return(0,D.$t)(Wt.xyChart,we.themeVariables.xyChart)}function qe(){const Wt=(0,Mt.zj)();return(0,D.$t)(Mt.UI.xyChart,Wt.xyChart)}function Et(Wt){const we=(0,Mt.zj)();return(0,Mt.jZ)(Wt.trim(),we)}function Tt(Wt){Y=Wt}function B(Wt){Nt.chartOrientation="horizontal"===Wt?"horizontal":"vertical"}function N(Wt){Ut.xAxis.title=Et(Wt.text)}function et(Wt,we){Ut.xAxis={type:"linear",title:Ut.xAxis.title,min:Wt,max:we},le=!0}function yt(Wt){Ut.xAxis={type:"band",title:Ut.xAxis.title,categories:Wt.map(we=>Et(we.text))},le=!0}function it(Wt){Ut.yAxis.title=Et(Wt.text)}function rt(Wt,we){Ut.yAxis={type:"linear",title:Ut.yAxis.title,min:Wt,max:we},Pe=!0}function _t(Wt){const we=Math.min(...Wt),sr=Math.max(...Wt),ve=zr(Ut.yAxis)?Ut.yAxis.min:1/0,ce=zr(Ut.yAxis)?Ut.yAxis.max:-1/0;Ut.yAxis={type:"linear",title:Ut.yAxis.title,min:Math.min(ve,we),max:Math.max(ce,sr)}}function ht(Wt){let we=[];if(0===Wt.length)return we;if(!le){const sr=zr(Ut.xAxis)?Ut.xAxis.min:1/0,ve=zr(Ut.xAxis)?Ut.xAxis.max:-1/0;et(Math.min(sr,1),Math.max(ve,Wt.length))}if(Pe||_t(Wt),aa(Ut.xAxis)&&(we=Ut.xAxis.categories.map((sr,ve)=>[sr,Wt[ve]])),zr(Ut.xAxis)){const sr=Ut.xAxis.min,ve=Ut.xAxis.max,ce=(ve-sr)/(Wt.length-1),Ee=[];for(let Ae=sr;Ae<=ve;Ae+=ce)Ee.push(`${Ae}`);we=Ee.map((Ae,er)=>[Ae,Wt[er]])}return we}function Ot(Wt){return ye[0===Wt?0:Wt%ye.length]}function H(Wt,we){const sr=ht(we);Ut.plots.push({type:"line",strokeFill:Ot(gt),strokeWidth:2,data:sr}),gt++}function ot(Wt,we){const sr=ht(we);Ut.plots.push({type:"bar",fill:Ot(gt),data:sr}),gt++}function ke(){if(0===Ut.plots.length)throw Error("No Plot to render, please provide a plot with some data");return Ut.title=(0,Mt.ab)(),V.build(Nt,Ut,St,Y)}function Pt(){return St}function Zt(){return Nt}function pe(){return Ut}(0,ut.K2)(oe,"getChartDefaultThemeConfig"),(0,ut.K2)(qe,"getChartDefaultConfig"),(0,ut.K2)(function We(){return{yAxis:{type:"linear",title:"",min:1/0,max:-1/0},xAxis:{type:"band",title:"",categories:[]},title:"",plots:[]}},"getChartDefaultData"),(0,ut.K2)(Et,"textSanitizer"),(0,ut.K2)(Tt,"setTmpSVGG"),(0,ut.K2)(B,"setOrientation"),(0,ut.K2)(N,"setXAxisTitle"),(0,ut.K2)(et,"setXAxisRangeData"),(0,ut.K2)(yt,"setXAxisBand"),(0,ut.K2)(it,"setYAxisTitle"),(0,ut.K2)(rt,"setYAxisRangeData"),(0,ut.K2)(_t,"setYAxisRangeFromPlotData"),(0,ut.K2)(ht,"transformDataWithoutCategory"),(0,ut.K2)(Ot,"getPlotColorFromPalette"),(0,ut.K2)(H,"setLineData"),(0,ut.K2)(ot,"setBarData"),(0,ut.K2)(ke,"getDrawableElem"),(0,ut.K2)(Pt,"getChartThemeConfig"),(0,ut.K2)(Zt,"getChartConfig"),(0,ut.K2)(pe,"getXYChartData");var mr={parser:Br,db:{getDrawableElem:ke,clear:(0,ut.K2)(function(){(0,Mt.IU)(),gt=0,Nt=qe(),Ut={yAxis:{type:"linear",title:"",min:1/0,max:-1/0},xAxis:{type:"band",title:"",categories:[]},title:"",plots:[]},St=oe(),ye=St.plotColorPalette.split(",").map(Wt=>Wt.trim()),le=!1,Pe=!1},"clear"),setAccTitle:Mt.SV,getAccTitle:Mt.iN,setDiagramTitle:Mt.ke,getDiagramTitle:Mt.ab,getAccDescription:Mt.m7,setAccDescription:Mt.EI,setOrientation:B,setXAxisTitle:N,setXAxisRangeData:et,setXAxisBand:yt,setYAxisTitle:it,setYAxisRangeData:rt,setLineData:H,setBarData:ot,setTmpSVGG:Tt,getChartThemeConfig:Pt,getChartConfig:Zt,getXYChartData:pe},renderer:{draw:(0,ut.K2)((Wt,we,sr,ve)=>{const ce=ve.db,Ee=ce.getChartThemeConfig(),Ae=ce.getChartConfig(),er=ce.getXYChartData().plots[0].data.map(E=>E[1]);function Qe(E){return"top"===E?"text-before-edge":"middle"}function Dr(E){return"left"===E?"start":"right"===E?"end":"middle"}function _e(E){return`translate(${E.x}, ${E.y}) rotate(${E.rotation||0})`}(0,ut.K2)(Qe,"getDominantBaseLine"),(0,ut.K2)(Dr,"getTextAnchor"),(0,ut.K2)(_e,"getTextTransformation"),ut.Rm.debug("Rendering xychart chart\n"+Wt);const Yr=(0,ie.D)(we),nr=Yr.append("g").attr("class","main"),te=nr.append("rect").attr("width",Ae.width).attr("height",Ae.height).attr("class","background");(0,Mt.a$)(Yr,Ae.height,Ae.width,!0),Yr.attr("viewBox",`0 0 ${Ae.width} ${Ae.height}`),te.attr("fill",Ee.backgroundColor),ce.setTmpSVGG(Yr.append("g").attr("class","mermaid-tmp-group"));const ne=ce.getDrawableElem(),be={};function ar(E){let M=nr,m="";for(const[A]of E.entries()){let v=nr;A>0&&be[m]&&(v=be[m]),m+=E[A],M=be[m],M||(M=be[m]=v.append("g").attr("class",E[A]))}return M}(0,ut.K2)(ar,"getGroup");for(const E of ne){if(0===E.data.length)continue;const M=ar(E.groupTexts);switch(E.type){case"rect":if(M.selectAll("rect").data(E.data).enter().append("rect").attr("x",m=>m.x).attr("y",m=>m.y).attr("width",m=>m.width).attr("height",m=>m.height).attr("fill",m=>m.fill).attr("stroke",m=>m.strokeFill).attr("stroke-width",m=>m.strokeWidth),Ae.showDataLabel)if("horizontal"===Ae.chartOrientation){let m=function(R,Q){const{data:mt,label:zt}=R;return Q*zt.length*A<=mt.width-10};(0,ut.K2)(m,"fitsHorizontally");const A=.7,v=E.data.map((R,Q)=>({data:R,label:er[Q].toString()})).filter(R=>R.data.width>0&&R.data.height>0),b=v.map(R=>{const{data:Q}=R;let mt=.7*Q.height;for(;!m(R,mt)&&mt>0;)mt-=1;return mt}),C=Math.floor(Math.min(...b));M.selectAll("text").data(v).enter().append("text").attr("x",R=>R.data.x+R.data.width-10).attr("y",R=>R.data.y+R.data.height/2).attr("text-anchor","end").attr("dominant-baseline","middle").attr("fill","black").attr("font-size",`${C}px`).text(R=>R.label)}else{let m=function(R,Q,mt){const{data:zt,label:jt}=R,Kt=Q*jt.length*.7,xe=zt.x+zt.width/2;return xe-Kt/2>=zt.x&&xe+Kt/2<=zt.x+zt.width&&zt.y+mt+Q<=zt.y+zt.height};(0,ut.K2)(m,"fitsInBar");const A=10,v=E.data.map((R,Q)=>({data:R,label:er[Q].toString()})).filter(R=>R.data.width>0&&R.data.height>0),b=v.map(R=>{const{data:Q,label:mt}=R;let zt=Q.width/(.7*mt.length);for(;!m(R,zt,A)&&zt>0;)zt-=1;return zt}),C=Math.floor(Math.min(...b));M.selectAll("text").data(v).enter().append("text").attr("x",R=>R.data.x+R.data.width/2).attr("y",R=>R.data.y+A).attr("text-anchor","middle").attr("dominant-baseline","hanging").attr("fill","black").attr("font-size",`${C}px`).text(R=>R.label)}break;case"text":M.selectAll("text").data(E.data).enter().append("text").attr("x",0).attr("y",0).attr("fill",m=>m.fill).attr("font-size",m=>m.fontSize).attr("dominant-baseline",m=>Qe(m.verticalPos)).attr("text-anchor",m=>Dr(m.horizontalPos)).attr("transform",m=>_e(m)).text(m=>m.text);break;case"path":M.selectAll("path").data(E.data).enter().append("path").attr("d",m=>m.path).attr("fill",m=>m.fill?m.fill:"none").attr("stroke",m=>m.strokeFill).attr("stroke-width",m=>m.strokeWidth)}}},"draw")}}},69664:(ri,Er,P)=>{"use strict";P.d(Er,{D:()=>D});var lt=P(79006),ie=P(32303),L=P(40622),D=(0,ie.K2)(Mt=>{const{securityLevel:ut}=(0,lt.D7)();let G=(0,L.Ltv)("body");if("sandbox"===ut){const At=(0,L.Ltv)(`#i${Mt}`).node()?.contentDocument??document;G=(0,L.Ltv)(At.body)}return G.select(`#${Mt}`)},"selectSvgElement")},72271:(ri,Er,P)=>{"use strict";P.d(Er,{XX:()=>Ge,q7:()=>bt,sO:()=>Lt});var lt=P(89204),ie=P(98954),L=P(87452),D=P(52052),Mt=P(79006),ut=P(32303),G={common:Mt.Y2,getConfig:Mt.zj,insertCluster:L.U,insertEdge:ie.Jo,insertEdgeLabel:ie.jP,insertMarkers:ie.g0,insertNode:L.on,interpolateToCurve:D.Ib,labelHelper:L.Zk,log:ut.Rm,positionEdgeLabel:ie.T_},w={},Lt=(0,ut.K2)(Gt=>{for(const j of Gt)w[j.name]=j},"registerLayoutLoaders");(0,ut.K2)(()=>{Lt([{name:"dagre",loader:(0,ut.K2)((0,lt.A)(function*(){return yield Promise.all([P.e(911),P.e(335),P.e(865)]).then(P.bind(P,72876))}),"loader")},{name:"cose-bilkent",loader:(0,ut.K2)((0,lt.A)(function*(){return yield Promise.all([P.e(911),P.e(805)]).then(P.bind(P,8026))}),"loader")}])},"registerDefaultLayoutLoaders")();var Ge=(0,ut.K2)(function(){var Gt=(0,lt.A)(function*(j,hr){if(!(j.layoutAlgorithm in w))throw new Error(`Unknown layout algorithm: ${j.layoutAlgorithm}`);const ze=w[j.layoutAlgorithm];return(yield ze.loader()).render(j,hr,G,{algorithm:ze.algorithm})});return function(j,hr){return Gt.apply(this,arguments)}}(),"render"),bt=(0,ut.K2)((Gt="",{fallback:j="dagre"}={})=>{if(Gt in w)return Gt;if(j in w)return ut.Rm.warn(`Layout algorithm ${Gt} is not registered. Using ${j} as fallback.`),j;throw new Error(`Both layout algorithms ${Gt} and ${j} are not registered.`)},"getRegisteredLayoutAlgorithm")},72635:(ri,Er,P)=>{"use strict";P.r(Er),P.d(Er,{diagram:()=>A});var w,Lt,lt=P(45027),ie=P(62045),L=P(52052),D=P(79006),Mt=P(32303),ut=P(40622),G=P(73986),At=function(){var v=(0,Mt.K2)(function(Ne,at,Ct,I){for(Ct=Ct||{},I=Ne.length;I--;Ct[Ne[I]]=at);return Ct},"o"),b=[1,24],C=[1,25],R=[1,26],Q=[1,27],mt=[1,28],zt=[1,63],jt=[1,64],Vt=[1,65],Kt=[1,66],xe=[1,67],je=[1,68],Ke=[1,69],fr=[1,29],lr=[1,30],br=[1,31],$e=[1,32],He=[1,33],wr=[1,34],kr=[1,35],Kr=[1,36],_r=[1,37],Jr=[1,38],Lr=[1,39],ha=[1,40],ia=[1,41],jr=[1,42],Qr=[1,43],or=[1,44],ur=[1,45],W=[1,46],$t=[1,47],Ye=[1,48],Fe=[1,50],Tr=[1,51],pr=[1,52],da=[1,53],Pa=[1,54],Ma=[1,55],Wa=[1,56],Ia=[1,57],ba=[1,58],sa=[1,59],Sa=[1,60],ea=[14,42],Va=[14,34,36,37,38,39,40,41,42,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74],gr=[12,14,34,36,37,38,39,40,41,42,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74],Ua=[1,82],ir=[1,83],Oa=[1,84],Ka=[1,85],Ja=[12,14,42],_a=[12,14,33,42],qa=[12,14,33,42,76,77,79,80],Ha=[12,33],oa=[34,36,37,38,39,40,41,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74],hi={trace:(0,Mt.K2)(function(){},"trace"),yy:{},symbols_:{error:2,start:3,mermaidDoc:4,direction:5,direction_tb:6,direction_bt:7,direction_rl:8,direction_lr:9,graphConfig:10,C4_CONTEXT:11,NEWLINE:12,statements:13,EOF:14,C4_CONTAINER:15,C4_COMPONENT:16,C4_DYNAMIC:17,C4_DEPLOYMENT:18,otherStatements:19,diagramStatements:20,otherStatement:21,title:22,accDescription:23,acc_title:24,acc_title_value:25,acc_descr:26,acc_descr_value:27,acc_descr_multiline_value:28,boundaryStatement:29,boundaryStartStatement:30,boundaryStopStatement:31,boundaryStart:32,LBRACE:33,ENTERPRISE_BOUNDARY:34,attributes:35,SYSTEM_BOUNDARY:36,BOUNDARY:37,CONTAINER_BOUNDARY:38,NODE:39,NODE_L:40,NODE_R:41,RBRACE:42,diagramStatement:43,PERSON:44,PERSON_EXT:45,SYSTEM:46,SYSTEM_DB:47,SYSTEM_QUEUE:48,SYSTEM_EXT:49,SYSTEM_EXT_DB:50,SYSTEM_EXT_QUEUE:51,CONTAINER:52,CONTAINER_DB:53,CONTAINER_QUEUE:54,CONTAINER_EXT:55,CONTAINER_EXT_DB:56,CONTAINER_EXT_QUEUE:57,COMPONENT:58,COMPONENT_DB:59,COMPONENT_QUEUE:60,COMPONENT_EXT:61,COMPONENT_EXT_DB:62,COMPONENT_EXT_QUEUE:63,REL:64,BIREL:65,REL_U:66,REL_D:67,REL_L:68,REL_R:69,REL_B:70,REL_INDEX:71,UPDATE_EL_STYLE:72,UPDATE_REL_STYLE:73,UPDATE_LAYOUT_CONFIG:74,attribute:75,STR:76,STR_KEY:77,STR_VALUE:78,ATTRIBUTE:79,ATTRIBUTE_EMPTY:80,$accept:0,$end:1},terminals_:{2:"error",6:"direction_tb",7:"direction_bt",8:"direction_rl",9:"direction_lr",11:"C4_CONTEXT",12:"NEWLINE",14:"EOF",15:"C4_CONTAINER",16:"C4_COMPONENT",17:"C4_DYNAMIC",18:"C4_DEPLOYMENT",22:"title",23:"accDescription",24:"acc_title",25:"acc_title_value",26:"acc_descr",27:"acc_descr_value",28:"acc_descr_multiline_value",33:"LBRACE",34:"ENTERPRISE_BOUNDARY",36:"SYSTEM_BOUNDARY",37:"BOUNDARY",38:"CONTAINER_BOUNDARY",39:"NODE",40:"NODE_L",41:"NODE_R",42:"RBRACE",44:"PERSON",45:"PERSON_EXT",46:"SYSTEM",47:"SYSTEM_DB",48:"SYSTEM_QUEUE",49:"SYSTEM_EXT",50:"SYSTEM_EXT_DB",51:"SYSTEM_EXT_QUEUE",52:"CONTAINER",53:"CONTAINER_DB",54:"CONTAINER_QUEUE",55:"CONTAINER_EXT",56:"CONTAINER_EXT_DB",57:"CONTAINER_EXT_QUEUE",58:"COMPONENT",59:"COMPONENT_DB",60:"COMPONENT_QUEUE",61:"COMPONENT_EXT",62:"COMPONENT_EXT_DB",63:"COMPONENT_EXT_QUEUE",64:"REL",65:"BIREL",66:"REL_U",67:"REL_D",68:"REL_L",69:"REL_R",70:"REL_B",71:"REL_INDEX",72:"UPDATE_EL_STYLE",73:"UPDATE_REL_STYLE",74:"UPDATE_LAYOUT_CONFIG",76:"STR",77:"STR_KEY",78:"STR_VALUE",79:"ATTRIBUTE",80:"ATTRIBUTE_EMPTY"},productions_:[0,[3,1],[3,1],[5,1],[5,1],[5,1],[5,1],[4,1],[10,4],[10,4],[10,4],[10,4],[10,4],[13,1],[13,1],[13,2],[19,1],[19,2],[19,3],[21,1],[21,1],[21,2],[21,2],[21,1],[29,3],[30,3],[30,3],[30,4],[32,2],[32,2],[32,2],[32,2],[32,2],[32,2],[32,2],[31,1],[20,1],[20,2],[20,3],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,1],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[35,1],[35,2],[75,1],[75,2],[75,1],[75,1]],performAction:(0,Mt.K2)(function(at,Ct,I,Jt,Ve,ft,Dt){var Ft=ft.length-1;switch(Ve){case 3:Jt.setDirection("TB");break;case 4:Jt.setDirection("BT");break;case 5:Jt.setDirection("RL");break;case 6:Jt.setDirection("LR");break;case 8:case 9:case 10:case 11:case 12:Jt.setC4Type(ft[Ft-3]);break;case 19:Jt.setTitle(ft[Ft].substring(6)),this.$=ft[Ft].substring(6);break;case 20:Jt.setAccDescription(ft[Ft].substring(15)),this.$=ft[Ft].substring(15);break;case 21:this.$=ft[Ft].trim(),Jt.setTitle(this.$);break;case 22:case 23:this.$=ft[Ft].trim(),Jt.setAccDescription(this.$);break;case 28:ft[Ft].splice(2,0,"ENTERPRISE"),Jt.addPersonOrSystemBoundary(...ft[Ft]),this.$=ft[Ft];break;case 29:ft[Ft].splice(2,0,"SYSTEM"),Jt.addPersonOrSystemBoundary(...ft[Ft]),this.$=ft[Ft];break;case 30:Jt.addPersonOrSystemBoundary(...ft[Ft]),this.$=ft[Ft];break;case 31:ft[Ft].splice(2,0,"CONTAINER"),Jt.addContainerBoundary(...ft[Ft]),this.$=ft[Ft];break;case 32:Jt.addDeploymentNode("node",...ft[Ft]),this.$=ft[Ft];break;case 33:Jt.addDeploymentNode("nodeL",...ft[Ft]),this.$=ft[Ft];break;case 34:Jt.addDeploymentNode("nodeR",...ft[Ft]),this.$=ft[Ft];break;case 35:Jt.popBoundaryParseStack();break;case 39:Jt.addPersonOrSystem("person",...ft[Ft]),this.$=ft[Ft];break;case 40:Jt.addPersonOrSystem("external_person",...ft[Ft]),this.$=ft[Ft];break;case 41:Jt.addPersonOrSystem("system",...ft[Ft]),this.$=ft[Ft];break;case 42:Jt.addPersonOrSystem("system_db",...ft[Ft]),this.$=ft[Ft];break;case 43:Jt.addPersonOrSystem("system_queue",...ft[Ft]),this.$=ft[Ft];break;case 44:Jt.addPersonOrSystem("external_system",...ft[Ft]),this.$=ft[Ft];break;case 45:Jt.addPersonOrSystem("external_system_db",...ft[Ft]),this.$=ft[Ft];break;case 46:Jt.addPersonOrSystem("external_system_queue",...ft[Ft]),this.$=ft[Ft];break;case 47:Jt.addContainer("container",...ft[Ft]),this.$=ft[Ft];break;case 48:Jt.addContainer("container_db",...ft[Ft]),this.$=ft[Ft];break;case 49:Jt.addContainer("container_queue",...ft[Ft]),this.$=ft[Ft];break;case 50:Jt.addContainer("external_container",...ft[Ft]),this.$=ft[Ft];break;case 51:Jt.addContainer("external_container_db",...ft[Ft]),this.$=ft[Ft];break;case 52:Jt.addContainer("external_container_queue",...ft[Ft]),this.$=ft[Ft];break;case 53:Jt.addComponent("component",...ft[Ft]),this.$=ft[Ft];break;case 54:Jt.addComponent("component_db",...ft[Ft]),this.$=ft[Ft];break;case 55:Jt.addComponent("component_queue",...ft[Ft]),this.$=ft[Ft];break;case 56:Jt.addComponent("external_component",...ft[Ft]),this.$=ft[Ft];break;case 57:Jt.addComponent("external_component_db",...ft[Ft]),this.$=ft[Ft];break;case 58:Jt.addComponent("external_component_queue",...ft[Ft]),this.$=ft[Ft];break;case 60:Jt.addRel("rel",...ft[Ft]),this.$=ft[Ft];break;case 61:Jt.addRel("birel",...ft[Ft]),this.$=ft[Ft];break;case 62:Jt.addRel("rel_u",...ft[Ft]),this.$=ft[Ft];break;case 63:Jt.addRel("rel_d",...ft[Ft]),this.$=ft[Ft];break;case 64:Jt.addRel("rel_l",...ft[Ft]),this.$=ft[Ft];break;case 65:Jt.addRel("rel_r",...ft[Ft]),this.$=ft[Ft];break;case 66:Jt.addRel("rel_b",...ft[Ft]),this.$=ft[Ft];break;case 67:ft[Ft].splice(0,1),Jt.addRel("rel",...ft[Ft]),this.$=ft[Ft];break;case 68:Jt.updateElStyle("update_el_style",...ft[Ft]),this.$=ft[Ft];break;case 69:Jt.updateRelStyle("update_rel_style",...ft[Ft]),this.$=ft[Ft];break;case 70:Jt.updateLayoutConfig("update_layout_config",...ft[Ft]),this.$=ft[Ft];break;case 71:this.$=[ft[Ft]];break;case 72:ft[Ft].unshift(ft[Ft-1]),this.$=ft[Ft];break;case 73:case 75:this.$=ft[Ft].trim();break;case 74:let Je={};Je[ft[Ft-1].trim()]=ft[Ft].trim(),this.$=Je;break;case 76:this.$=""}},"anonymous"),table:[{3:1,4:2,5:3,6:[1,5],7:[1,6],8:[1,7],9:[1,8],10:4,11:[1,9],15:[1,10],16:[1,11],17:[1,12],18:[1,13]},{1:[3]},{1:[2,1]},{1:[2,2]},{1:[2,7]},{1:[2,3]},{1:[2,4]},{1:[2,5]},{1:[2,6]},{12:[1,14]},{12:[1,15]},{12:[1,16]},{12:[1,17]},{12:[1,18]},{13:19,19:20,20:21,21:22,22:b,23:C,24:R,26:Q,28:mt,29:49,30:61,32:62,34:zt,36:jt,37:Vt,38:Kt,39:xe,40:je,41:Ke,43:23,44:fr,45:lr,46:br,47:$e,48:He,49:wr,50:kr,51:Kr,52:_r,53:Jr,54:Lr,55:ha,56:ia,57:jr,58:Qr,59:or,60:ur,61:W,62:$t,63:Ye,64:Fe,65:Tr,66:pr,67:da,68:Pa,69:Ma,70:Wa,71:Ia,72:ba,73:sa,74:Sa},{13:70,19:20,20:21,21:22,22:b,23:C,24:R,26:Q,28:mt,29:49,30:61,32:62,34:zt,36:jt,37:Vt,38:Kt,39:xe,40:je,41:Ke,43:23,44:fr,45:lr,46:br,47:$e,48:He,49:wr,50:kr,51:Kr,52:_r,53:Jr,54:Lr,55:ha,56:ia,57:jr,58:Qr,59:or,60:ur,61:W,62:$t,63:Ye,64:Fe,65:Tr,66:pr,67:da,68:Pa,69:Ma,70:Wa,71:Ia,72:ba,73:sa,74:Sa},{13:71,19:20,20:21,21:22,22:b,23:C,24:R,26:Q,28:mt,29:49,30:61,32:62,34:zt,36:jt,37:Vt,38:Kt,39:xe,40:je,41:Ke,43:23,44:fr,45:lr,46:br,47:$e,48:He,49:wr,50:kr,51:Kr,52:_r,53:Jr,54:Lr,55:ha,56:ia,57:jr,58:Qr,59:or,60:ur,61:W,62:$t,63:Ye,64:Fe,65:Tr,66:pr,67:da,68:Pa,69:Ma,70:Wa,71:Ia,72:ba,73:sa,74:Sa},{13:72,19:20,20:21,21:22,22:b,23:C,24:R,26:Q,28:mt,29:49,30:61,32:62,34:zt,36:jt,37:Vt,38:Kt,39:xe,40:je,41:Ke,43:23,44:fr,45:lr,46:br,47:$e,48:He,49:wr,50:kr,51:Kr,52:_r,53:Jr,54:Lr,55:ha,56:ia,57:jr,58:Qr,59:or,60:ur,61:W,62:$t,63:Ye,64:Fe,65:Tr,66:pr,67:da,68:Pa,69:Ma,70:Wa,71:Ia,72:ba,73:sa,74:Sa},{13:73,19:20,20:21,21:22,22:b,23:C,24:R,26:Q,28:mt,29:49,30:61,32:62,34:zt,36:jt,37:Vt,38:Kt,39:xe,40:je,41:Ke,43:23,44:fr,45:lr,46:br,47:$e,48:He,49:wr,50:kr,51:Kr,52:_r,53:Jr,54:Lr,55:ha,56:ia,57:jr,58:Qr,59:or,60:ur,61:W,62:$t,63:Ye,64:Fe,65:Tr,66:pr,67:da,68:Pa,69:Ma,70:Wa,71:Ia,72:ba,73:sa,74:Sa},{14:[1,74]},v(ea,[2,13],{43:23,29:49,30:61,32:62,20:75,34:zt,36:jt,37:Vt,38:Kt,39:xe,40:je,41:Ke,44:fr,45:lr,46:br,47:$e,48:He,49:wr,50:kr,51:Kr,52:_r,53:Jr,54:Lr,55:ha,56:ia,57:jr,58:Qr,59:or,60:ur,61:W,62:$t,63:Ye,64:Fe,65:Tr,66:pr,67:da,68:Pa,69:Ma,70:Wa,71:Ia,72:ba,73:sa,74:Sa}),v(ea,[2,14]),v(Va,[2,16],{12:[1,76]}),v(ea,[2,36],{12:[1,77]}),v(gr,[2,19]),v(gr,[2,20]),{25:[1,78]},{27:[1,79]},v(gr,[2,23]),{35:80,75:81,76:Ua,77:ir,79:Oa,80:Ka},{35:86,75:81,76:Ua,77:ir,79:Oa,80:Ka},{35:87,75:81,76:Ua,77:ir,79:Oa,80:Ka},{35:88,75:81,76:Ua,77:ir,79:Oa,80:Ka},{35:89,75:81,76:Ua,77:ir,79:Oa,80:Ka},{35:90,75:81,76:Ua,77:ir,79:Oa,80:Ka},{35:91,75:81,76:Ua,77:ir,79:Oa,80:Ka},{35:92,75:81,76:Ua,77:ir,79:Oa,80:Ka},{35:93,75:81,76:Ua,77:ir,79:Oa,80:Ka},{35:94,75:81,76:Ua,77:ir,79:Oa,80:Ka},{35:95,75:81,76:Ua,77:ir,79:Oa,80:Ka},{35:96,75:81,76:Ua,77:ir,79:Oa,80:Ka},{35:97,75:81,76:Ua,77:ir,79:Oa,80:Ka},{35:98,75:81,76:Ua,77:ir,79:Oa,80:Ka},{35:99,75:81,76:Ua,77:ir,79:Oa,80:Ka},{35:100,75:81,76:Ua,77:ir,79:Oa,80:Ka},{35:101,75:81,76:Ua,77:ir,79:Oa,80:Ka},{35:102,75:81,76:Ua,77:ir,79:Oa,80:Ka},{35:103,75:81,76:Ua,77:ir,79:Oa,80:Ka},{35:104,75:81,76:Ua,77:ir,79:Oa,80:Ka},v(Ja,[2,59]),{35:105,75:81,76:Ua,77:ir,79:Oa,80:Ka},{35:106,75:81,76:Ua,77:ir,79:Oa,80:Ka},{35:107,75:81,76:Ua,77:ir,79:Oa,80:Ka},{35:108,75:81,76:Ua,77:ir,79:Oa,80:Ka},{35:109,75:81,76:Ua,77:ir,79:Oa,80:Ka},{35:110,75:81,76:Ua,77:ir,79:Oa,80:Ka},{35:111,75:81,76:Ua,77:ir,79:Oa,80:Ka},{35:112,75:81,76:Ua,77:ir,79:Oa,80:Ka},{35:113,75:81,76:Ua,77:ir,79:Oa,80:Ka},{35:114,75:81,76:Ua,77:ir,79:Oa,80:Ka},{35:115,75:81,76:Ua,77:ir,79:Oa,80:Ka},{20:116,29:49,30:61,32:62,34:zt,36:jt,37:Vt,38:Kt,39:xe,40:je,41:Ke,43:23,44:fr,45:lr,46:br,47:$e,48:He,49:wr,50:kr,51:Kr,52:_r,53:Jr,54:Lr,55:ha,56:ia,57:jr,58:Qr,59:or,60:ur,61:W,62:$t,63:Ye,64:Fe,65:Tr,66:pr,67:da,68:Pa,69:Ma,70:Wa,71:Ia,72:ba,73:sa,74:Sa},{12:[1,118],33:[1,117]},{35:119,75:81,76:Ua,77:ir,79:Oa,80:Ka},{35:120,75:81,76:Ua,77:ir,79:Oa,80:Ka},{35:121,75:81,76:Ua,77:ir,79:Oa,80:Ka},{35:122,75:81,76:Ua,77:ir,79:Oa,80:Ka},{35:123,75:81,76:Ua,77:ir,79:Oa,80:Ka},{35:124,75:81,76:Ua,77:ir,79:Oa,80:Ka},{35:125,75:81,76:Ua,77:ir,79:Oa,80:Ka},{14:[1,126]},{14:[1,127]},{14:[1,128]},{14:[1,129]},{1:[2,8]},v(ea,[2,15]),v(Va,[2,17],{21:22,19:130,22:b,23:C,24:R,26:Q,28:mt}),v(ea,[2,37],{19:20,20:21,21:22,43:23,29:49,30:61,32:62,13:131,22:b,23:C,24:R,26:Q,28:mt,34:zt,36:jt,37:Vt,38:Kt,39:xe,40:je,41:Ke,44:fr,45:lr,46:br,47:$e,48:He,49:wr,50:kr,51:Kr,52:_r,53:Jr,54:Lr,55:ha,56:ia,57:jr,58:Qr,59:or,60:ur,61:W,62:$t,63:Ye,64:Fe,65:Tr,66:pr,67:da,68:Pa,69:Ma,70:Wa,71:Ia,72:ba,73:sa,74:Sa}),v(gr,[2,21]),v(gr,[2,22]),v(Ja,[2,39]),v(_a,[2,71],{75:81,35:132,76:Ua,77:ir,79:Oa,80:Ka}),v(qa,[2,73]),{78:[1,133]},v(qa,[2,75]),v(qa,[2,76]),v(Ja,[2,40]),v(Ja,[2,41]),v(Ja,[2,42]),v(Ja,[2,43]),v(Ja,[2,44]),v(Ja,[2,45]),v(Ja,[2,46]),v(Ja,[2,47]),v(Ja,[2,48]),v(Ja,[2,49]),v(Ja,[2,50]),v(Ja,[2,51]),v(Ja,[2,52]),v(Ja,[2,53]),v(Ja,[2,54]),v(Ja,[2,55]),v(Ja,[2,56]),v(Ja,[2,57]),v(Ja,[2,58]),v(Ja,[2,60]),v(Ja,[2,61]),v(Ja,[2,62]),v(Ja,[2,63]),v(Ja,[2,64]),v(Ja,[2,65]),v(Ja,[2,66]),v(Ja,[2,67]),v(Ja,[2,68]),v(Ja,[2,69]),v(Ja,[2,70]),{31:134,42:[1,135]},{12:[1,136]},{33:[1,137]},v(Ha,[2,28]),v(Ha,[2,29]),v(Ha,[2,30]),v(Ha,[2,31]),v(Ha,[2,32]),v(Ha,[2,33]),v(Ha,[2,34]),{1:[2,9]},{1:[2,10]},{1:[2,11]},{1:[2,12]},v(Va,[2,18]),v(ea,[2,38]),v(_a,[2,72]),v(qa,[2,74]),v(Ja,[2,24]),v(Ja,[2,35]),v(oa,[2,25]),v(oa,[2,26],{12:[1,138]}),v(oa,[2,27])],defaultActions:{2:[2,1],3:[2,2],4:[2,7],5:[2,3],6:[2,4],7:[2,5],8:[2,6],74:[2,8],126:[2,9],127:[2,10],128:[2,11],129:[2,12]},parseError:(0,Mt.K2)(function(at,Ct){if(!Ct.recoverable){var I=new Error(at);throw I.hash=Ct,I}this.trace(at)},"parseError"),parse:(0,Mt.K2)(function(at){var Ct=this,I=[0],Jt=[],Ve=[null],ft=[],Dt=this.table,Ft="",Je=0,Xr=0,Hr=0,fa=ft.slice.call(arguments,1),wa=Object.create(this.lexer),ja={yy:{}};for(var $a in this.yy)Object.prototype.hasOwnProperty.call(this.yy,$a)&&(ja.yy[$a]=this.yy[$a]);wa.setInput(at,ja.yy),ja.yy.lexer=wa,ja.yy.parser=this,typeof wa.yylloc>"u"&&(wa.yylloc={});var yi=wa.yylloc;ft.push(yi);var Ei=wa.options&&wa.options.ranges;function Na(){var Oi;return"number"!=typeof(Oi=Jt.pop()||wa.lex()||1)&&(Oi instanceof Array&&(Oi=(Jt=Oi).pop()),Oi=Ct.symbols_[Oi]||Oi),Oi}this.parseError="function"==typeof ja.yy.parseError?ja.yy.parseError:Object.getPrototypeOf(this).parseError,(0,Mt.K2)(function mi(Oi){I.length=I.length-2*Oi,Ve.length=Ve.length-Oi,ft.length=ft.length-Oi},"popStack"),(0,Mt.K2)(Na,"lex");for(var Rr,ya,Ya,ni,Pi,ki,Bi,ln,ua={};;){if(this.defaultActions[Ya=I[I.length-1]]?ni=this.defaultActions[Ya]:((null===Rr||typeof Rr>"u")&&(Rr=Na()),ni=Dt[Ya]&&Dt[Ya][Rr]),typeof ni>"u"||!ni.length||!ni[0]){var Ji;for(ki in ln=[],Dt[Ya])this.terminals_[ki]&&ki>2&&ln.push("'"+this.terminals_[ki]+"'");Ji=wa.showPosition?"Parse error on line "+(Je+1)+":\n"+wa.showPosition()+"\nExpecting "+ln.join(", ")+", got '"+(this.terminals_[Rr]||Rr)+"'":"Parse error on line "+(Je+1)+": Unexpected "+(1==Rr?"end of input":"'"+(this.terminals_[Rr]||Rr)+"'"),this.parseError(Ji,{text:wa.match,token:this.terminals_[Rr]||Rr,line:wa.yylineno,loc:yi,expected:ln})}if(ni[0]instanceof Array&&ni.length>1)throw new Error("Parse Error: multiple actions possible at state: "+Ya+", token: "+Rr);switch(ni[0]){case 1:I.push(Rr),Ve.push(wa.yytext),ft.push(wa.yylloc),I.push(ni[1]),Rr=null,ya?(Rr=ya,ya=null):(Xr=wa.yyleng,Ft=wa.yytext,Je=wa.yylineno,yi=wa.yylloc,Hr>0&&Hr--);break;case 2:if(ua.$=Ve[Ve.length-(Bi=this.productions_[ni[1]][1])],ua._$={first_line:ft[ft.length-(Bi||1)].first_line,last_line:ft[ft.length-1].last_line,first_column:ft[ft.length-(Bi||1)].first_column,last_column:ft[ft.length-1].last_column},Ei&&(ua._$.range=[ft[ft.length-(Bi||1)].range[0],ft[ft.length-1].range[1]]),typeof(Pi=this.performAction.apply(ua,[Ft,Xr,Je,ja.yy,ni[1],Ve,ft].concat(fa)))<"u")return Pi;Bi&&(I=I.slice(0,-1*Bi*2),Ve=Ve.slice(0,-1*Bi),ft=ft.slice(0,-1*Bi)),I.push(this.productions_[ni[1]][0]),Ve.push(ua.$),ft.push(ua._$),I.push(Dt[I[I.length-2]][I[I.length-1]]);break;case 3:return!0}}return!0},"parse")};function Ri(){this.yy={}}return hi.lexer=function(){return{EOF:1,parseError:(0,Mt.K2)(function(Ct,I){if(!this.yy.parser)throw new Error(Ct);this.yy.parser.parseError(Ct,I)},"parseError"),setInput:(0,Mt.K2)(function(at,Ct){return this.yy=Ct||this.yy||{},this._input=at,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},"setInput"),input:(0,Mt.K2)(function(){var at=this._input[0];return this.yytext+=at,this.yyleng++,this.offset++,this.match+=at,this.matched+=at,at.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),at},"input"),unput:(0,Mt.K2)(function(at){var Ct=at.length,I=at.split(/(?:\r\n?|\n)/g);this._input=at+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-Ct),this.offset-=Ct;var Jt=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),I.length-1&&(this.yylineno-=I.length-1);var Ve=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:I?(I.length===Jt.length?this.yylloc.first_column:0)+Jt[Jt.length-I.length].length-I[0].length:this.yylloc.first_column-Ct},this.options.ranges&&(this.yylloc.range=[Ve[0],Ve[0]+this.yyleng-Ct]),this.yyleng=this.yytext.length,this},"unput"),more:(0,Mt.K2)(function(){return this._more=!0,this},"more"),reject:(0,Mt.K2)(function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},"reject"),less:(0,Mt.K2)(function(at){this.unput(this.match.slice(at))},"less"),pastInput:(0,Mt.K2)(function(){var at=this.matched.substr(0,this.matched.length-this.match.length);return(at.length>20?"...":"")+at.substr(-20).replace(/\n/g,"")},"pastInput"),upcomingInput:(0,Mt.K2)(function(){var at=this.match;return at.length<20&&(at+=this._input.substr(0,20-at.length)),(at.substr(0,20)+(at.length>20?"...":"")).replace(/\n/g,"")},"upcomingInput"),showPosition:(0,Mt.K2)(function(){var at=this.pastInput(),Ct=new Array(at.length+1).join("-");return at+this.upcomingInput()+"\n"+Ct+"^"},"showPosition"),test_match:(0,Mt.K2)(function(at,Ct){var I,Jt,Ve;if(this.options.backtrack_lexer&&(Ve={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(Ve.yylloc.range=this.yylloc.range.slice(0))),(Jt=at[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=Jt.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:Jt?Jt[Jt.length-1].length-Jt[Jt.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+at[0].length},this.yytext+=at[0],this.match+=at[0],this.matches=at,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(at[0].length),this.matched+=at[0],I=this.performAction.call(this,this.yy,this,Ct,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),I)return I;if(this._backtrack){for(var ft in Ve)this[ft]=Ve[ft];return!1}return!1},"test_match"),next:(0,Mt.K2)(function(){if(this.done)return this.EOF;var at,Ct,I,Jt;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var Ve=this._currentRules(),ft=0;ft<Ve.length;ft++)if((I=this._input.match(this.rules[Ve[ft]]))&&(!Ct||I[0].length>Ct[0].length)){if(Ct=I,Jt=ft,this.options.backtrack_lexer){if(!1!==(at=this.test_match(I,Ve[ft])))return at;if(this._backtrack){Ct=!1;continue}return!1}if(!this.options.flex)break}return Ct?!1!==(at=this.test_match(Ct,Ve[Jt]))&&at:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},"next"),lex:(0,Mt.K2)(function(){return this.next()||this.lex()},"lex"),begin:(0,Mt.K2)(function(Ct){this.conditionStack.push(Ct)},"begin"),popState:(0,Mt.K2)(function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},"popState"),_currentRules:(0,Mt.K2)(function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},"_currentRules"),topState:(0,Mt.K2)(function(Ct){return(Ct=this.conditionStack.length-1-Math.abs(Ct||0))>=0?this.conditionStack[Ct]:"INITIAL"},"topState"),pushState:(0,Mt.K2)(function(Ct){this.begin(Ct)},"pushState"),stateStackSize:(0,Mt.K2)(function(){return this.conditionStack.length},"stateStackSize"),options:{},performAction:(0,Mt.K2)(function(Ct,I,Jt,Ve){switch(Jt){case 0:return 6;case 1:return 7;case 2:return 8;case 3:return 9;case 4:return 22;case 5:return 23;case 6:return this.begin("acc_title"),24;case 7:return this.popState(),"acc_title_value";case 8:return this.begin("acc_descr"),26;case 9:return this.popState(),"acc_descr_value";case 10:this.begin("acc_descr_multiline");break;case 11:case 73:this.popState();break;case 12:return"acc_descr_multiline_value";case 13:case 16:case 70:break;case 14:c;break;case 15:return 12;case 17:return 11;case 18:return 15;case 19:return 16;case 20:return 17;case 21:return 18;case 22:return this.begin("person_ext"),45;case 23:return this.begin("person"),44;case 24:return this.begin("system_ext_queue"),51;case 25:return this.begin("system_ext_db"),50;case 26:return this.begin("system_ext"),49;case 27:return this.begin("system_queue"),48;case 28:return this.begin("system_db"),47;case 29:return this.begin("system"),46;case 30:return this.begin("boundary"),37;case 31:return this.begin("enterprise_boundary"),34;case 32:return this.begin("system_boundary"),36;case 33:return this.begin("container_ext_queue"),57;case 34:return this.begin("container_ext_db"),56;case 35:return this.begin("container_ext"),55;case 36:return this.begin("container_queue"),54;case 37:return this.begin("container_db"),53;case 38:return this.begin("container"),52;case 39:return this.begin("container_boundary"),38;case 40:return this.begin("component_ext_queue"),63;case 41:return this.begin("component_ext_db"),62;case 42:return this.begin("component_ext"),61;case 43:return this.begin("component_queue"),60;case 44:return this.begin("component_db"),59;case 45:return this.begin("component"),58;case 46:case 47:return this.begin("node"),39;case 48:return this.begin("node_l"),40;case 49:return this.begin("node_r"),41;case 50:return this.begin("rel"),64;case 51:return this.begin("birel"),65;case 52:case 53:return this.begin("rel_u"),66;case 54:case 55:return this.begin("rel_d"),67;case 56:case 57:return this.begin("rel_l"),68;case 58:case 59:return this.begin("rel_r"),69;case 60:return this.begin("rel_b"),70;case 61:return this.begin("rel_index"),71;case 62:return this.begin("update_el_style"),72;case 63:return this.begin("update_rel_style"),73;case 64:return this.begin("update_layout_config"),74;case 65:return"EOF_IN_STRUCT";case 66:return this.begin("attribute"),"ATTRIBUTE_EMPTY";case 67:this.begin("attribute");break;case 68:case 79:this.popState(),this.popState();break;case 69:case 71:return 80;case 72:this.begin("string");break;case 74:case 80:return"STR";case 75:this.begin("string_kv");break;case 76:return this.begin("string_kv_key"),"STR_KEY";case 77:this.popState(),this.begin("string_kv_value");break;case 78:return"STR_VALUE";case 81:return"LBRACE";case 82:return"RBRACE";case 83:return"SPACE";case 84:return"EOL";case 85:return 14}},"anonymous"),rules:[/^(?:.*direction\s+TB[^\n]*)/,/^(?:.*direction\s+BT[^\n]*)/,/^(?:.*direction\s+RL[^\n]*)/,/^(?:.*direction\s+LR[^\n]*)/,/^(?:title\s[^#\n;]+)/,/^(?:accDescription\s[^#\n;]+)/,/^(?:accTitle\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*\{\s*)/,/^(?:[\}])/,/^(?:[^\}]*)/,/^(?:%%(?!\{)*[^\n]*(\r?\n?)+)/,/^(?:%%[^\n]*(\r?\n)*)/,/^(?:\s*(\r?\n)+)/,/^(?:\s+)/,/^(?:C4Context\b)/,/^(?:C4Container\b)/,/^(?:C4Component\b)/,/^(?:C4Dynamic\b)/,/^(?:C4Deployment\b)/,/^(?:Person_Ext\b)/,/^(?:Person\b)/,/^(?:SystemQueue_Ext\b)/,/^(?:SystemDb_Ext\b)/,/^(?:System_Ext\b)/,/^(?:SystemQueue\b)/,/^(?:SystemDb\b)/,/^(?:System\b)/,/^(?:Boundary\b)/,/^(?:Enterprise_Boundary\b)/,/^(?:System_Boundary\b)/,/^(?:ContainerQueue_Ext\b)/,/^(?:ContainerDb_Ext\b)/,/^(?:Container_Ext\b)/,/^(?:ContainerQueue\b)/,/^(?:ContainerDb\b)/,/^(?:Container\b)/,/^(?:Container_Boundary\b)/,/^(?:ComponentQueue_Ext\b)/,/^(?:ComponentDb_Ext\b)/,/^(?:Component_Ext\b)/,/^(?:ComponentQueue\b)/,/^(?:ComponentDb\b)/,/^(?:Component\b)/,/^(?:Deployment_Node\b)/,/^(?:Node\b)/,/^(?:Node_L\b)/,/^(?:Node_R\b)/,/^(?:Rel\b)/,/^(?:BiRel\b)/,/^(?:Rel_Up\b)/,/^(?:Rel_U\b)/,/^(?:Rel_Down\b)/,/^(?:Rel_D\b)/,/^(?:Rel_Left\b)/,/^(?:Rel_L\b)/,/^(?:Rel_Right\b)/,/^(?:Rel_R\b)/,/^(?:Rel_Back\b)/,/^(?:RelIndex\b)/,/^(?:UpdateElementStyle\b)/,/^(?:UpdateRelStyle\b)/,/^(?:UpdateLayoutConfig\b)/,/^(?:$)/,/^(?:[(][ ]*[,])/,/^(?:[(])/,/^(?:[)])/,/^(?:,,)/,/^(?:,)/,/^(?:[ ]*["]["])/,/^(?:[ ]*["])/,/^(?:["])/,/^(?:[^"]*)/,/^(?:[ ]*[\$])/,/^(?:[^=]*)/,/^(?:[=][ ]*["])/,/^(?:[^"]+)/,/^(?:["])/,/^(?:[^,]+)/,/^(?:\{)/,/^(?:\})/,/^(?:[\s]+)/,/^(?:[\n\r]+)/,/^(?:$)/],conditions:{acc_descr_multiline:{rules:[11,12],inclusive:!1},acc_descr:{rules:[9],inclusive:!1},acc_title:{rules:[7],inclusive:!1},string_kv_value:{rules:[78,79],inclusive:!1},string_kv_key:{rules:[77],inclusive:!1},string_kv:{rules:[76],inclusive:!1},string:{rules:[73,74],inclusive:!1},attribute:{rules:[68,69,70,71,72,75,80],inclusive:!1},update_layout_config:{rules:[65,66,67,68],inclusive:!1},update_rel_style:{rules:[65,66,67,68],inclusive:!1},update_el_style:{rules:[65,66,67,68],inclusive:!1},rel_b:{rules:[65,66,67,68],inclusive:!1},rel_r:{rules:[65,66,67,68],inclusive:!1},rel_l:{rules:[65,66,67,68],inclusive:!1},rel_d:{rules:[65,66,67,68],inclusive:!1},rel_u:{rules:[65,66,67,68],inclusive:!1},rel_bi:{rules:[],inclusive:!1},rel:{rules:[65,66,67,68],inclusive:!1},node_r:{rules:[65,66,67,68],inclusive:!1},node_l:{rules:[65,66,67,68],inclusive:!1},node:{rules:[65,66,67,68],inclusive:!1},index:{rules:[],inclusive:!1},rel_index:{rules:[65,66,67,68],inclusive:!1},component_ext_queue:{rules:[],inclusive:!1},component_ext_db:{rules:[65,66,67,68],inclusive:!1},component_ext:{rules:[65,66,67,68],inclusive:!1},component_queue:{rules:[65,66,67,68],inclusive:!1},component_db:{rules:[65,66,67,68],inclusive:!1},component:{rules:[65,66,67,68],inclusive:!1},container_boundary:{rules:[65,66,67,68],inclusive:!1},container_ext_queue:{rules:[65,66,67,68],inclusive:!1},container_ext_db:{rules:[65,66,67,68],inclusive:!1},container_ext:{rules:[65,66,67,68],inclusive:!1},container_queue:{rules:[65,66,67,68],inclusive:!1},container_db:{rules:[65,66,67,68],inclusive:!1},container:{rules:[65,66,67,68],inclusive:!1},birel:{rules:[65,66,67,68],inclusive:!1},system_boundary:{rules:[65,66,67,68],inclusive:!1},enterprise_boundary:{rules:[65,66,67,68],inclusive:!1},boundary:{rules:[65,66,67,68],inclusive:!1},system_ext_queue:{rules:[65,66,67,68],inclusive:!1},system_ext_db:{rules:[65,66,67,68],inclusive:!1},system_ext:{rules:[65,66,67,68],inclusive:!1},system_queue:{rules:[65,66,67,68],inclusive:!1},system_db:{rules:[65,66,67,68],inclusive:!1},system:{rules:[65,66,67,68],inclusive:!1},person_ext:{rules:[65,66,67,68],inclusive:!1},person:{rules:[65,66,67,68],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,5,6,8,10,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,81,82,83,84,85],inclusive:!0}}}}(),(0,Mt.K2)(Ri,"Parser"),Ri.prototype=hi,hi.Parser=Ri,new Ri}();At.parser=At;var zr,Ge=At,bt=[],Gt=[""],j="global",hr="",ze=[{alias:"global",label:{text:"global"},type:{text:"global"},tags:null,link:null,parentBoundary:""}],vr=[],Wr="",Br=!1,Gr=4,aa=2,Or=(0,Mt.K2)(function(){return zr},"getC4Type"),Be=(0,Mt.K2)(function(v){zr=(0,D.jZ)(v,(0,D.D7)())},"setC4Type"),Ir=(0,Mt.K2)(function(v,b,C,R,Q,mt,zt,jt,Vt){if(null==v||null==b||null==C||null==R)return;let Kt={};const xe=vr.find(je=>je.from===b&&je.to===C);if(xe?Kt=xe:vr.push(Kt),Kt.type=v,Kt.from=b,Kt.to=C,Kt.label={text:R},null==Q)Kt.techn={text:""};else if("object"==typeof Q){let[je,Ke]=Object.entries(Q)[0];Kt[je]={text:Ke}}else Kt.techn={text:Q};if(null==mt)Kt.descr={text:""};else if("object"==typeof mt){let[je,Ke]=Object.entries(mt)[0];Kt[je]={text:Ke}}else Kt.descr={text:mt};if("object"==typeof zt){let[je,Ke]=Object.entries(zt)[0];Kt[je]=Ke}else Kt.sprite=zt;if("object"==typeof jt){let[je,Ke]=Object.entries(jt)[0];Kt[je]=Ke}else Kt.tags=jt;if("object"==typeof Vt){let[je,Ke]=Object.entries(Vt)[0];Kt[je]=Ke}else Kt.link=Vt;Kt.wrap=We()},"addRel"),Xe=(0,Mt.K2)(function(v,b,C,R,Q,mt,zt){if(null===b||null===C)return;let jt={};const Vt=bt.find(Kt=>Kt.alias===b);if(Vt&&b===Vt.alias?jt=Vt:(jt.alias=b,bt.push(jt)),jt.label=null==C?{text:""}:{text:C},null==R)jt.descr={text:""};else if("object"==typeof R){let[Kt,xe]=Object.entries(R)[0];jt[Kt]={text:xe}}else jt.descr={text:R};if("object"==typeof Q){let[Kt,xe]=Object.entries(Q)[0];jt[Kt]=xe}else jt.sprite=Q;if("object"==typeof mt){let[Kt,xe]=Object.entries(mt)[0];jt[Kt]=xe}else jt.tags=mt;if("object"==typeof zt){let[Kt,xe]=Object.entries(zt)[0];jt[Kt]=xe}else jt.link=zt;jt.typeC4Shape={text:v},jt.parentBoundary=j,jt.wrap=We()},"addPersonOrSystem"),z=(0,Mt.K2)(function(v,b,C,R,Q,mt,zt,jt){if(null===b||null===C)return;let Vt={};const Kt=bt.find(xe=>xe.alias===b);if(Kt&&b===Kt.alias?Vt=Kt:(Vt.alias=b,bt.push(Vt)),Vt.label=null==C?{text:""}:{text:C},null==R)Vt.techn={text:""};else if("object"==typeof R){let[xe,je]=Object.entries(R)[0];Vt[xe]={text:je}}else Vt.techn={text:R};if(null==Q)Vt.descr={text:""};else if("object"==typeof Q){let[xe,je]=Object.entries(Q)[0];Vt[xe]={text:je}}else Vt.descr={text:Q};if("object"==typeof mt){let[xe,je]=Object.entries(mt)[0];Vt[xe]=je}else Vt.sprite=mt;if("object"==typeof zt){let[xe,je]=Object.entries(zt)[0];Vt[xe]=je}else Vt.tags=zt;if("object"==typeof jt){let[xe,je]=Object.entries(jt)[0];Vt[xe]=je}else Vt.link=jt;Vt.wrap=We(),Vt.typeC4Shape={text:v},Vt.parentBoundary=j},"addContainer"),dt=(0,Mt.K2)(function(v,b,C,R,Q,mt,zt,jt){if(null===b||null===C)return;let Vt={};const Kt=bt.find(xe=>xe.alias===b);if(Kt&&b===Kt.alias?Vt=Kt:(Vt.alias=b,bt.push(Vt)),Vt.label=null==C?{text:""}:{text:C},null==R)Vt.techn={text:""};else if("object"==typeof R){let[xe,je]=Object.entries(R)[0];Vt[xe]={text:je}}else Vt.techn={text:R};if(null==Q)Vt.descr={text:""};else if("object"==typeof Q){let[xe,je]=Object.entries(Q)[0];Vt[xe]={text:je}}else Vt.descr={text:Q};if("object"==typeof mt){let[xe,je]=Object.entries(mt)[0];Vt[xe]=je}else Vt.sprite=mt;if("object"==typeof zt){let[xe,je]=Object.entries(zt)[0];Vt[xe]=je}else Vt.tags=zt;if("object"==typeof jt){let[xe,je]=Object.entries(jt)[0];Vt[xe]=je}else Vt.link=jt;Vt.wrap=We(),Vt.typeC4Shape={text:v},Vt.parentBoundary=j},"addComponent"),Bt=(0,Mt.K2)(function(v,b,C,R,Q){if(null===v||null===b)return;let mt={};const zt=ze.find(jt=>jt.alias===v);if(zt&&v===zt.alias?mt=zt:(mt.alias=v,ze.push(mt)),mt.label=null==b?{text:""}:{text:b},null==C)mt.type={text:"system"};else if("object"==typeof C){let[jt,Vt]=Object.entries(C)[0];mt[jt]={text:Vt}}else mt.type={text:C};if("object"==typeof R){let[jt,Vt]=Object.entries(R)[0];mt[jt]=Vt}else mt.tags=R;if("object"==typeof Q){let[jt,Vt]=Object.entries(Q)[0];mt[jt]=Vt}else mt.link=Q;mt.parentBoundary=j,mt.wrap=We(),hr=j,j=v,Gt.push(hr)},"addPersonOrSystemBoundary"),Se=(0,Mt.K2)(function(v,b,C,R,Q){if(null===v||null===b)return;let mt={};const zt=ze.find(jt=>jt.alias===v);if(zt&&v===zt.alias?mt=zt:(mt.alias=v,ze.push(mt)),mt.label=null==b?{text:""}:{text:b},null==C)mt.type={text:"container"};else if("object"==typeof C){let[jt,Vt]=Object.entries(C)[0];mt[jt]={text:Vt}}else mt.type={text:C};if("object"==typeof R){let[jt,Vt]=Object.entries(R)[0];mt[jt]=Vt}else mt.tags=R;if("object"==typeof Q){let[jt,Vt]=Object.entries(Q)[0];mt[jt]=Vt}else mt.link=Q;mt.parentBoundary=j,mt.wrap=We(),hr=j,j=v,Gt.push(hr)},"addContainerBoundary"),X=(0,Mt.K2)(function(v,b,C,R,Q,mt,zt,jt){if(null===b||null===C)return;let Vt={};const Kt=ze.find(xe=>xe.alias===b);if(Kt&&b===Kt.alias?Vt=Kt:(Vt.alias=b,ze.push(Vt)),Vt.label=null==C?{text:""}:{text:C},null==R)Vt.type={text:"node"};else if("object"==typeof R){let[xe,je]=Object.entries(R)[0];Vt[xe]={text:je}}else Vt.type={text:R};if(null==Q)Vt.descr={text:""};else if("object"==typeof Q){let[xe,je]=Object.entries(Q)[0];Vt[xe]={text:je}}else Vt.descr={text:Q};if("object"==typeof zt){let[xe,je]=Object.entries(zt)[0];Vt[xe]=je}else Vt.tags=zt;if("object"==typeof jt){let[xe,je]=Object.entries(jt)[0];Vt[xe]=je}else Vt.link=jt;Vt.nodeType=v,Vt.parentBoundary=j,Vt.wrap=We(),hr=j,j=b,Gt.push(hr)},"addDeploymentNode"),re=(0,Mt.K2)(function(){j=hr,Gt.pop(),hr=Gt.pop(),Gt.push(hr)},"popBoundaryParseStack"),S=(0,Mt.K2)(function(v,b,C,R,Q,mt,zt,jt,Vt,Kt,xe){let je=bt.find(Ke=>Ke.alias===b);if(void 0!==je||(je=ze.find(Ke=>Ke.alias===b),void 0!==je)){if(null!=C)if("object"==typeof C){let[Ke,fr]=Object.entries(C)[0];je[Ke]=fr}else je.bgColor=C;if(null!=R)if("object"==typeof R){let[Ke,fr]=Object.entries(R)[0];je[Ke]=fr}else je.fontColor=R;if(null!=Q)if("object"==typeof Q){let[Ke,fr]=Object.entries(Q)[0];je[Ke]=fr}else je.borderColor=Q;if(null!=mt)if("object"==typeof mt){let[Ke,fr]=Object.entries(mt)[0];je[Ke]=fr}else je.shadowing=mt;if(null!=zt)if("object"==typeof zt){let[Ke,fr]=Object.entries(zt)[0];je[Ke]=fr}else je.shape=zt;if(null!=jt)if("object"==typeof jt){let[Ke,fr]=Object.entries(jt)[0];je[Ke]=fr}else je.sprite=jt;if(null!=Vt)if("object"==typeof Vt){let[Ke,fr]=Object.entries(Vt)[0];je[Ke]=fr}else je.techn=Vt;if(null!=Kt)if("object"==typeof Kt){let[Ke,fr]=Object.entries(Kt)[0];je[Ke]=fr}else je.legendText=Kt;if(null!=xe)if("object"==typeof xe){let[Ke,fr]=Object.entries(xe)[0];je[Ke]=fr}else je.legendSprite=xe}},"updateElStyle"),ee=(0,Mt.K2)(function(v,b,C,R,Q,mt,zt){const jt=vr.find(Vt=>Vt.from===b&&Vt.to===C);if(void 0!==jt){if(null!=R)if("object"==typeof R){let[Vt,Kt]=Object.entries(R)[0];jt[Vt]=Kt}else jt.textColor=R;if(null!=Q)if("object"==typeof Q){let[Vt,Kt]=Object.entries(Q)[0];jt[Vt]=Kt}else jt.lineColor=Q;if(null!=mt)if("object"==typeof mt){let[Vt,Kt]=Object.entries(mt)[0];jt[Vt]=parseInt(Kt)}else jt.offsetX=parseInt(mt);if(null!=zt)if("object"==typeof zt){let[Vt,Kt]=Object.entries(zt)[0];jt[Vt]=parseInt(Kt)}else jt.offsetY=parseInt(zt)}},"updateRelStyle"),Rt=(0,Mt.K2)(function(v,b,C){let R=Gr,Q=aa;if("object"==typeof b){const mt=Object.values(b)[0];R=parseInt(mt)}else R=parseInt(b);if("object"==typeof C){const mt=Object.values(C)[0];Q=parseInt(mt)}else Q=parseInt(C);R>=1&&(Gr=R),Q>=1&&(aa=Q)},"updateLayoutConfig"),qt=(0,Mt.K2)(function(){return Gr},"getC4ShapeInRow"),V=(0,Mt.K2)(function(){return aa},"getC4BoundaryInRow"),gt=(0,Mt.K2)(function(){return j},"getCurrentBoundaryParse"),Y=(0,Mt.K2)(function(){return hr},"getParentBoundaryParse"),Nt=(0,Mt.K2)(function(v){return null==v?bt:bt.filter(b=>b.parentBoundary===v)},"getC4ShapeArray"),St=(0,Mt.K2)(function(v){return bt.find(b=>b.alias===v)},"getC4Shape"),Ut=(0,Mt.K2)(function(v){return Object.keys(Nt(v))},"getC4ShapeKeys"),ye=(0,Mt.K2)(function(v){return null==v?ze:ze.filter(b=>b.parentBoundary===v)},"getBoundaries"),le=ye,Pe=(0,Mt.K2)(function(){return vr},"getRels"),oe=(0,Mt.K2)(function(){return Wr},"getTitle"),qe=(0,Mt.K2)(function(v){Br=v},"setWrap"),We=(0,Mt.K2)(function(){return Br},"autoWrap"),Et=(0,Mt.K2)(function(){bt=[],ze=[{alias:"global",label:{text:"global"},type:{text:"global"},tags:null,link:null,parentBoundary:""}],hr="",j="global",Gt=[""],vr=[],Gt=[""],Wr="",Br=!1,Gr=4,aa=2},"clear"),et=(0,Mt.K2)(function(v){Wr=(0,D.jZ)(v,(0,D.D7)())},"setTitle"),yt={addPersonOrSystem:Xe,addPersonOrSystemBoundary:Bt,addContainer:z,addContainerBoundary:Se,addComponent:dt,addDeploymentNode:X,popBoundaryParseStack:re,addRel:Ir,updateElStyle:S,updateRelStyle:ee,updateLayoutConfig:Rt,autoWrap:We,setWrap:qe,getC4ShapeArray:Nt,getC4Shape:St,getC4ShapeKeys:Ut,getBoundaries:ye,getBoundarys:le,getCurrentBoundaryParse:gt,getParentBoundaryParse:Y,getRels:Pe,getTitle:oe,getC4Type:Or,getC4ShapeInRow:qt,getC4BoundaryInRow:V,setAccTitle:D.SV,getAccTitle:D.iN,getAccDescription:D.m7,setAccDescription:D.EI,getConfig:(0,Mt.K2)(()=>(0,D.D7)().c4,"getConfig"),clear:Et,LINETYPE:{SOLID:0,DOTTED:1,NOTE:2,SOLID_CROSS:3,DOTTED_CROSS:4,SOLID_OPEN:5,DOTTED_OPEN:6,LOOP_START:10,LOOP_END:11,ALT_START:12,ALT_ELSE:13,ALT_END:14,OPT_START:15,OPT_END:16,ACTIVE_START:17,ACTIVE_END:18,PAR_START:19,PAR_AND:20,PAR_END:21,RECT_START:22,RECT_END:23,SOLID_POINT:24,DOTTED_POINT:25},ARROWTYPE:{FILLED:0,OPEN:1},PLACEMENT:{LEFTOF:0,RIGHTOF:1,OVER:2},setTitle:et,setC4Type:Be},it=(0,Mt.K2)(function(v,b){return(0,ie.tk)(v,b)},"drawRect"),rt=(0,Mt.K2)(function(v,b,C,R,Q,mt){const zt=v.append("image");zt.attr("width",b),zt.attr("height",C),zt.attr("x",R),zt.attr("y",Q);let jt=mt.startsWith("data:image/png;base64")?mt:(0,G.J)(mt);zt.attr("xlink:href",jt)},"drawImage"),_t=(0,Mt.K2)((v,b,C)=>{const R=v.append("g");let Q=0;for(let mt of b){let zt=mt.textColor?mt.textColor:"#444444",jt=mt.lineColor?mt.lineColor:"#444444",Vt=mt.offsetX?parseInt(mt.offsetX):0,Kt=mt.offsetY?parseInt(mt.offsetY):0,xe="";if(0===Q){let Ke=R.append("line");Ke.attr("x1",mt.startPoint.x),Ke.attr("y1",mt.startPoint.y),Ke.attr("x2",mt.endPoint.x),Ke.attr("y2",mt.endPoint.y),Ke.attr("stroke-width","1"),Ke.attr("stroke",jt),Ke.style("fill","none"),"rel_b"!==mt.type&&Ke.attr("marker-end","url("+xe+"#arrowhead)"),("birel"===mt.type||"rel_b"===mt.type)&&Ke.attr("marker-start","url("+xe+"#arrowend)"),Q=-1}else{let Ke=R.append("path");Ke.attr("fill","none").attr("stroke-width","1").attr("stroke",jt).attr("d","Mstartx,starty Qcontrolx,controly stopx,stopy ".replaceAll("startx",mt.startPoint.x).replaceAll("starty",mt.startPoint.y).replaceAll("controlx",mt.startPoint.x+(mt.endPoint.x-mt.startPoint.x)/2-(mt.endPoint.x-mt.startPoint.x)/4).replaceAll("controly",mt.startPoint.y+(mt.endPoint.y-mt.startPoint.y)/2).replaceAll("stopx",mt.endPoint.x).replaceAll("stopy",mt.endPoint.y)),"rel_b"!==mt.type&&Ke.attr("marker-end","url("+xe+"#arrowhead)"),("birel"===mt.type||"rel_b"===mt.type)&&Ke.attr("marker-start","url("+xe+"#arrowend)")}let je=C.messageFont();yr(C)(mt.label.text,R,Math.min(mt.startPoint.x,mt.endPoint.x)+Math.abs(mt.endPoint.x-mt.startPoint.x)/2+Vt,Math.min(mt.startPoint.y,mt.endPoint.y)+Math.abs(mt.endPoint.y-mt.startPoint.y)/2+Kt,mt.label.width,mt.label.height,{fill:zt},je),mt.techn&&""!==mt.techn.text&&(je=C.messageFont(),yr(C)("["+mt.techn.text+"]",R,Math.min(mt.startPoint.x,mt.endPoint.x)+Math.abs(mt.endPoint.x-mt.startPoint.x)/2+Vt,Math.min(mt.startPoint.y,mt.endPoint.y)+Math.abs(mt.endPoint.y-mt.startPoint.y)/2+C.messageFontSize+5+Kt,Math.max(mt.label.width,mt.techn.width),mt.techn.height,{fill:zt,"font-style":"italic"},je))}},"drawRels"),ht=(0,Mt.K2)(function(v,b,C){const R=v.append("g");let zt=b.fontColor?b.fontColor:"black",jt={"stroke-width":1,"stroke-dasharray":"7.0,7.0"};b.nodeType&&(jt={"stroke-width":1}),it(R,{x:b.x,y:b.y,fill:b.bgColor?b.bgColor:"none",stroke:b.borderColor?b.borderColor:"#444444",width:b.width,height:b.height,rx:2.5,ry:2.5,attrs:jt});let Kt=C.boundaryFont();Kt.fontWeight="bold",Kt.fontSize=Kt.fontSize+2,Kt.fontColor=zt,yr(C)(b.label.text,R,b.x,b.y+b.label.Y,b.width,b.height,{fill:"#444444"},Kt),b.type&&""!==b.type.text&&(Kt=C.boundaryFont(),Kt.fontColor=zt,yr(C)(b.type.text,R,b.x,b.y+b.type.Y,b.width,b.height,{fill:"#444444"},Kt)),b.descr&&""!==b.descr.text&&(Kt=C.boundaryFont(),Kt.fontSize=Kt.fontSize-2,Kt.fontColor=zt,yr(C)(b.descr.text,R,b.x,b.y+b.descr.Y,b.width,b.height,{fill:"#444444"},Kt))},"drawBoundary"),Ot=(0,Mt.K2)(function(v,b,C){let R=b.bgColor?b.bgColor:C[b.typeC4Shape.text+"_bg_color"],Q=b.borderColor?b.borderColor:C[b.typeC4Shape.text+"_border_color"],mt=b.fontColor?b.fontColor:"#FFFFFF",zt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAIAAADYYG7QAAACD0lEQVR4Xu2YoU4EMRCGT+4j8Ai8AhaH4QHgAUjQuFMECUgMIUgwJAgMhgQsAYUiJCiQIBBY+EITsjfTdme6V24v4c8vyGbb+ZjOtN0bNcvjQXmkH83WvYBWto6PLm6v7p7uH1/w2fXD+PBycX1Pv2l3IdDm/vn7x+dXQiAubRzoURa7gRZWd0iGRIiJbOnhnfYBQZNJjNbuyY2eJG8fkDE3bbG4ep6MHUAsgYxmE3nVs6VsBWJSGccsOlFPmLIViMzLOB7pCVO2AtHJMohH7Fh6zqitQK7m0rJvAVYgGcEpe//PLdDz65sM4pF9N7ICcXDKIB5Nv6j7tD0NoSdM2QrU9Gg0ewE1LqBhHR3BBdvj2vapnidjHxD/q6vd7Pvhr31AwcY8eXMTXAKECZZJFXuEq27aLgQK5uLMohCenGGuGewOxSjBvYBqeG6B+Nqiblggdjnc+ZXDy+FNFpFzw76O3UBAROuXh6FoiAcf5g9eTvUgzy0nWg6I8cXHRUpg5bOVBCo+KDpFajOf23GgPme7RSQ+lacIENUgJ6gg1k6HjgOlqnLqip4tEuhv0hNEMXUD0clyXE3p6pZA0S2nnvTlXwLJEZWlb7cTQH1+USgTN4VhAenm/wea1OCAOmqo6fE1WCb9WSKBah+rbUWPWAmE2Rvk0ApiB45eOyNAzU8xcTvj8KvkKEoOaIYeHNA3ZuygAvFMUO0AAAAASUVORK5CYII=";switch(b.typeC4Shape.text){case"person":zt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAIAAADYYG7QAAACD0lEQVR4Xu2YoU4EMRCGT+4j8Ai8AhaH4QHgAUjQuFMECUgMIUgwJAgMhgQsAYUiJCiQIBBY+EITsjfTdme6V24v4c8vyGbb+ZjOtN0bNcvjQXmkH83WvYBWto6PLm6v7p7uH1/w2fXD+PBycX1Pv2l3IdDm/vn7x+dXQiAubRzoURa7gRZWd0iGRIiJbOnhnfYBQZNJjNbuyY2eJG8fkDE3bbG4ep6MHUAsgYxmE3nVs6VsBWJSGccsOlFPmLIViMzLOB7pCVO2AtHJMohH7Fh6zqitQK7m0rJvAVYgGcEpe//PLdDz65sM4pF9N7ICcXDKIB5Nv6j7tD0NoSdM2QrU9Gg0ewE1LqBhHR3BBdvj2vapnidjHxD/q6vd7Pvhr31AwcY8eXMTXAKECZZJFXuEq27aLgQK5uLMohCenGGuGewOxSjBvYBqeG6B+Nqiblggdjnc+ZXDy+FNFpFzw76O3UBAROuXh6FoiAcf5g9eTvUgzy0nWg6I8cXHRUpg5bOVBCo+KDpFajOf23GgPme7RSQ+lacIENUgJ6gg1k6HjgOlqnLqip4tEuhv0hNEMXUD0clyXE3p6pZA0S2nnvTlXwLJEZWlb7cTQH1+USgTN4VhAenm/wea1OCAOmqo6fE1WCb9WSKBah+rbUWPWAmE2Rvk0ApiB45eOyNAzU8xcTvj8KvkKEoOaIYeHNA3ZuygAvFMUO0AAAAASUVORK5CYII=";break;case"external_person":zt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAIAAADYYG7QAAAB6ElEQVR4Xu2YLY+EMBCG9+dWr0aj0Wg0Go1Go0+j8Xdv2uTCvv1gpt0ebHKPuhDaeW4605Z9mJvx4AdXUyTUdd08z+u6flmWZRnHsWkafk9DptAwDPu+f0eAYtu2PEaGWuj5fCIZrBAC2eLBAnRCsEkkxmeaJp7iDJ2QMDdHsLg8SxKFEJaAo8lAXnmuOFIhTMpxxKATebo4UiFknuNo4OniSIXQyRxEA3YsnjGCVEjVXD7yLUAqxBGUyPv/Y4W2beMgGuS7kVQIBycH0fD+oi5pezQETxdHKmQKGk1eQEYldK+jw5GxPfZ9z7Mk0Qnhf1W1m3w//EUn5BDmSZsbR44QQLBEqrBHqOrmSKaQAxdnLArCrxZcM7A7ZKs4ioRq8LFC+NpC3WCBJsvpVw5edm9iEXFuyNfxXAgSwfrFQ1c0iNda8AdejvUgnktOtJQQxmcfFzGglc5WVCj7oDgFqU18boeFSs52CUh8LE8BIVQDT1ABrB0HtgSEYlX5doJnCwv9TXocKCaKbnwhdDKPq4lf3SwU3HLq4V/+WYhHVMa/3b4IlfyikAduCkcBc7mQ3/z/Qq/cTuikhkzB12Ae/mcJC9U+Vo8Ej1gWAtgbeGgFsAMHr50BIWOLCbezvhpBFUdY6EJuJ/QDW0XoMX60zZ0AAAAASUVORK5CYII="}const jt=v.append("g");jt.attr("class","person-man");const Vt=(0,ie.PB)();switch(b.typeC4Shape.text){case"person":case"external_person":case"system":case"external_system":case"container":case"external_container":case"component":case"external_component":Vt.x=b.x,Vt.y=b.y,Vt.fill=R,Vt.width=b.width,Vt.height=b.height,Vt.stroke=Q,Vt.rx=2.5,Vt.ry=2.5,Vt.attrs={"stroke-width":.5},it(jt,Vt);break;case"system_db":case"external_system_db":case"container_db":case"external_container_db":case"component_db":case"external_component_db":jt.append("path").attr("fill",R).attr("stroke-width","0.5").attr("stroke",Q).attr("d","Mstartx,startyc0,-10 half,-10 half,-10c0,0 half,0 half,10l0,heightc0,10 -half,10 -half,10c0,0 -half,0 -half,-10l0,-height".replaceAll("startx",b.x).replaceAll("starty",b.y).replaceAll("half",b.width/2).replaceAll("height",b.height)),jt.append("path").attr("fill","none").attr("stroke-width","0.5").attr("stroke",Q).attr("d","Mstartx,startyc0,10 half,10 half,10c0,0 half,0 half,-10".replaceAll("startx",b.x).replaceAll("starty",b.y).replaceAll("half",b.width/2));break;case"system_queue":case"external_system_queue":case"container_queue":case"external_container_queue":case"component_queue":case"external_component_queue":jt.append("path").attr("fill",R).attr("stroke-width","0.5").attr("stroke",Q).attr("d","Mstartx,startylwidth,0c5,0 5,half 5,halfc0,0 0,half -5,halfl-width,0c-5,0 -5,-half -5,-halfc0,0 0,-half 5,-half".replaceAll("startx",b.x).replaceAll("starty",b.y).replaceAll("width",b.width).replaceAll("half",b.height/2)),jt.append("path").attr("fill","none").attr("stroke-width","0.5").attr("stroke",Q).attr("d","Mstartx,startyc-5,0 -5,half -5,halfc0,half 5,half 5,half".replaceAll("startx",b.x+b.width).replaceAll("starty",b.y).replaceAll("half",b.height/2))}let Kt=de(C,b.typeC4Shape.text);switch(jt.append("text").attr("fill",mt).attr("font-family",Kt.fontFamily).attr("font-size",Kt.fontSize-2).attr("font-style","italic").attr("lengthAdjust","spacing").attr("textLength",b.typeC4Shape.width).attr("x",b.x+b.width/2-b.typeC4Shape.width/2).attr("y",b.y+b.typeC4Shape.Y).text("<<"+b.typeC4Shape.text+">>"),b.typeC4Shape.text){case"person":case"external_person":rt(jt,48,48,b.x+b.width/2-24,b.y+b.image.Y,zt)}let xe=C[b.typeC4Shape.text+"Font"]();return xe.fontWeight="bold",xe.fontSize=xe.fontSize+2,xe.fontColor=mt,yr(C)(b.label.text,jt,b.x,b.y+b.label.Y,b.width,b.height,{fill:mt},xe),xe=C[b.typeC4Shape.text+"Font"](),xe.fontColor=mt,b.techn&&""!==b.techn?.text?yr(C)(b.techn.text,jt,b.x,b.y+b.techn.Y,b.width,b.height,{fill:mt,"font-style":"italic"},xe):b.type&&""!==b.type.text&&yr(C)(b.type.text,jt,b.x,b.y+b.type.Y,b.width,b.height,{fill:mt,"font-style":"italic"},xe),b.descr&&""!==b.descr.text&&(xe=C.personFont(),xe.fontColor=mt,yr(C)(b.descr.text,jt,b.x,b.y+b.descr.Y,b.width,b.height,{fill:mt},xe)),b.height},"drawC4Shape"),H=(0,Mt.K2)(function(v){v.append("defs").append("symbol").attr("id","database").attr("fill-rule","evenodd").attr("clip-rule","evenodd").append("path").attr("transform","scale(.5)").attr("d","M12.258.001l.256.004.255.005.253.008.251.01.249.012.247.015.246.016.242.019.241.02.239.023.236.024.233.027.231.028.229.031.225.032.223.034.22.036.217.038.214.04.211.041.208.043.205.045.201.046.198.048.194.05.191.051.187.053.183.054.18.056.175.057.172.059.168.06.163.061.16.063.155.064.15.066.074.033.073.033.071.034.07.034.069.035.068.035.067.035.066.035.064.036.064.036.062.036.06.036.06.037.058.037.058.037.055.038.055.038.053.038.052.038.051.039.05.039.048.039.047.039.045.04.044.04.043.04.041.04.04.041.039.041.037.041.036.041.034.041.033.042.032.042.03.042.029.042.027.042.026.043.024.043.023.043.021.043.02.043.018.044.017.043.015.044.013.044.012.044.011.045.009.044.007.045.006.045.004.045.002.045.001.045v17l-.001.045-.002.045-.004.045-.006.045-.007.045-.009.044-.011.045-.012.044-.013.044-.015.044-.017.043-.018.044-.02.043-.021.043-.023.043-.024.043-.026.043-.027.042-.029.042-.03.042-.032.042-.033.042-.034.041-.036.041-.037.041-.039.041-.04.041-.041.04-.043.04-.044.04-.045.04-.047.039-.048.039-.05.039-.051.039-.052.038-.053.038-.055.038-.055.038-.058.037-.058.037-.06.037-.06.036-.062.036-.064.036-.064.036-.066.035-.067.035-.068.035-.069.035-.07.034-.071.034-.073.033-.074.033-.15.066-.155.064-.16.063-.163.061-.168.06-.172.059-.175.057-.18.056-.183.054-.187.053-.191.051-.194.05-.198.048-.201.046-.205.045-.208.043-.211.041-.214.04-.217.038-.22.036-.223.034-.225.032-.229.031-.231.028-.233.027-.236.024-.239.023-.241.02-.242.019-.246.016-.247.015-.249.012-.251.01-.253.008-.255.005-.256.004-.258.001-.258-.001-.256-.004-.255-.005-.253-.008-.251-.01-.249-.012-.247-.015-.245-.016-.243-.019-.241-.02-.238-.023-.236-.024-.234-.027-.231-.028-.228-.031-.226-.032-.223-.034-.22-.036-.217-.038-.214-.04-.211-.041-.208-.043-.204-.045-.201-.046-.198-.048-.195-.05-.19-.051-.187-.053-.184-.054-.179-.056-.176-.057-.172-.059-.167-.06-.164-.061-.159-.063-.155-.064-.151-.066-.074-.033-.072-.033-.072-.034-.07-.034-.069-.035-.068-.035-.067-.035-.066-.035-.064-.036-.063-.036-.062-.036-.061-.036-.06-.037-.058-.037-.057-.037-.056-.038-.055-.038-.053-.038-.052-.038-.051-.039-.049-.039-.049-.039-.046-.039-.046-.04-.044-.04-.043-.04-.041-.04-.04-.041-.039-.041-.037-.041-.036-.041-.034-.041-.033-.042-.032-.042-.03-.042-.029-.042-.027-.042-.026-.043-.024-.043-.023-.043-.021-.043-.02-.043-.018-.044-.017-.043-.015-.044-.013-.044-.012-.044-.011-.045-.009-.044-.007-.045-.006-.045-.004-.045-.002-.045-.001-.045v-17l.001-.045.002-.045.004-.045.006-.045.007-.045.009-.044.011-.045.012-.044.013-.044.015-.044.017-.043.018-.044.02-.043.021-.043.023-.043.024-.043.026-.043.027-.042.029-.042.03-.042.032-.042.033-.042.034-.041.036-.041.037-.041.039-.041.04-.041.041-.04.043-.04.044-.04.046-.04.046-.039.049-.039.049-.039.051-.039.052-.038.053-.038.055-.038.056-.038.057-.037.058-.037.06-.037.061-.036.062-.036.063-.036.064-.036.066-.035.067-.035.068-.035.069-.035.07-.034.072-.034.072-.033.074-.033.151-.066.155-.064.159-.063.164-.061.167-.06.172-.059.176-.057.179-.056.184-.054.187-.053.19-.051.195-.05.198-.048.201-.046.204-.045.208-.043.211-.041.214-.04.217-.038.22-.036.223-.034.226-.032.228-.031.231-.028.234-.027.236-.024.238-.023.241-.02.243-.019.245-.016.247-.015.249-.012.251-.01.253-.008.255-.005.256-.004.258-.001.258.001zm-9.258 20.499v.01l.001.021.003.021.004.022.005.021.006.022.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.023.018.024.019.024.021.024.022.025.023.024.024.025.052.049.056.05.061.051.066.051.07.051.075.051.079.052.084.052.088.052.092.052.097.052.102.051.105.052.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.048.144.049.147.047.152.047.155.047.16.045.163.045.167.043.171.043.176.041.178.041.183.039.187.039.19.037.194.035.197.035.202.033.204.031.209.03.212.029.216.027.219.025.222.024.226.021.23.02.233.018.236.016.24.015.243.012.246.01.249.008.253.005.256.004.259.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.021.224-.024.22-.026.216-.027.212-.028.21-.031.205-.031.202-.034.198-.034.194-.036.191-.037.187-.039.183-.04.179-.04.175-.042.172-.043.168-.044.163-.045.16-.046.155-.046.152-.047.148-.048.143-.049.139-.049.136-.05.131-.05.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.053.083-.051.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.05.023-.024.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.023.01-.022.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.127l-.077.055-.08.053-.083.054-.085.053-.087.052-.09.052-.093.051-.095.05-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.045-.118.044-.12.043-.122.042-.124.042-.126.041-.128.04-.13.04-.132.038-.134.038-.135.037-.138.037-.139.035-.142.035-.143.034-.144.033-.147.032-.148.031-.15.03-.151.03-.153.029-.154.027-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.01-.179.008-.179.008-.181.006-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.006-.179-.008-.179-.008-.178-.01-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.027-.153-.029-.151-.03-.15-.03-.148-.031-.146-.032-.145-.033-.143-.034-.141-.035-.14-.035-.137-.037-.136-.037-.134-.038-.132-.038-.13-.04-.128-.04-.126-.041-.124-.042-.122-.042-.12-.044-.117-.043-.116-.045-.113-.045-.112-.046-.109-.047-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.05-.093-.052-.09-.051-.087-.052-.085-.053-.083-.054-.08-.054-.077-.054v4.127zm0-5.654v.011l.001.021.003.021.004.021.005.022.006.022.007.022.009.022.01.022.011.023.012.023.013.023.015.024.016.023.017.024.018.024.019.024.021.024.022.024.023.025.024.024.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.052.11.051.114.051.119.052.123.05.127.051.131.05.135.049.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.044.171.042.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.022.23.02.233.018.236.016.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.012.241-.015.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.048.139-.05.136-.049.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.051.051-.049.023-.025.023-.024.021-.025.02-.024.019-.024.018-.024.017-.024.015-.023.014-.023.013-.024.012-.022.01-.023.01-.023.008-.022.006-.022.006-.022.004-.021.004-.022.001-.021.001-.021v-4.139l-.077.054-.08.054-.083.054-.085.052-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.044-.118.044-.12.044-.122.042-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.035-.143.033-.144.033-.147.033-.148.031-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.009-.179.009-.179.007-.181.007-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.007-.179-.007-.179-.009-.178-.009-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.031-.146-.033-.145-.033-.143-.033-.141-.035-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.04-.126-.041-.124-.042-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.051-.093-.051-.09-.051-.087-.053-.085-.052-.083-.054-.08-.054-.077-.054v4.139zm0-5.666v.011l.001.02.003.022.004.021.005.022.006.021.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.024.018.023.019.024.021.025.022.024.023.024.024.025.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.051.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.043.171.043.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.021.23.02.233.018.236.017.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.013.241-.014.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.049.139-.049.136-.049.131-.051.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.049.023-.025.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.022.01-.023.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.153l-.077.054-.08.054-.083.053-.085.053-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.048-.105.048-.106.048-.109.046-.111.046-.114.046-.115.044-.118.044-.12.043-.122.043-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.034-.143.034-.144.033-.147.032-.148.032-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.024-.161.024-.162.023-.163.023-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.01-.178.01-.179.009-.179.007-.181.006-.182.006-.182.004-.184.003-.184.001-.185.001-.185-.001-.184-.001-.184-.003-.182-.004-.182-.006-.181-.006-.179-.007-.179-.009-.178-.01-.176-.01-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.023-.162-.023-.161-.024-.159-.024-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.032-.146-.032-.145-.033-.143-.034-.141-.034-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.041-.126-.041-.124-.041-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.048-.105-.048-.102-.048-.1-.05-.097-.049-.095-.051-.093-.051-.09-.052-.087-.052-.085-.053-.083-.053-.08-.054-.077-.054v4.153zm8.74-8.179l-.257.004-.254.005-.25.008-.247.011-.244.012-.241.014-.237.016-.233.018-.231.021-.226.022-.224.023-.22.026-.216.027-.212.028-.21.031-.205.032-.202.033-.198.034-.194.036-.191.038-.187.038-.183.04-.179.041-.175.042-.172.043-.168.043-.163.045-.16.046-.155.046-.152.048-.148.048-.143.048-.139.049-.136.05-.131.05-.126.051-.123.051-.118.051-.114.052-.11.052-.106.052-.101.052-.096.052-.092.052-.088.052-.083.052-.079.052-.074.051-.07.052-.065.051-.06.05-.056.05-.051.05-.023.025-.023.024-.021.024-.02.025-.019.024-.018.024-.017.023-.015.024-.014.023-.013.023-.012.023-.01.023-.01.022-.008.022-.006.023-.006.021-.004.022-.004.021-.001.021-.001.021.001.021.001.021.004.021.004.022.006.021.006.023.008.022.01.022.01.023.012.023.013.023.014.023.015.024.017.023.018.024.019.024.02.025.021.024.023.024.023.025.051.05.056.05.06.05.065.051.07.052.074.051.079.052.083.052.088.052.092.052.096.052.101.052.106.052.11.052.114.052.118.051.123.051.126.051.131.05.136.05.139.049.143.048.148.048.152.048.155.046.16.046.163.045.168.043.172.043.175.042.179.041.183.04.187.038.191.038.194.036.198.034.202.033.205.032.21.031.212.028.216.027.22.026.224.023.226.022.231.021.233.018.237.016.241.014.244.012.247.011.25.008.254.005.257.004.26.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.022.224-.023.22-.026.216-.027.212-.028.21-.031.205-.032.202-.033.198-.034.194-.036.191-.038.187-.038.183-.04.179-.041.175-.042.172-.043.168-.043.163-.045.16-.046.155-.046.152-.048.148-.048.143-.048.139-.049.136-.05.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.05.051-.05.023-.025.023-.024.021-.024.02-.025.019-.024.018-.024.017-.023.015-.024.014-.023.013-.023.012-.023.01-.023.01-.022.008-.022.006-.023.006-.021.004-.022.004-.021.001-.021.001-.021-.001-.021-.001-.021-.004-.021-.004-.022-.006-.021-.006-.023-.008-.022-.01-.022-.01-.023-.012-.023-.013-.023-.014-.023-.015-.024-.017-.023-.018-.024-.019-.024-.02-.025-.021-.024-.023-.024-.023-.025-.051-.05-.056-.05-.06-.05-.065-.051-.07-.052-.074-.051-.079-.052-.083-.052-.088-.052-.092-.052-.096-.052-.101-.052-.106-.052-.11-.052-.114-.052-.118-.051-.123-.051-.126-.051-.131-.05-.136-.05-.139-.049-.143-.048-.148-.048-.152-.048-.155-.046-.16-.046-.163-.045-.168-.043-.172-.043-.175-.042-.179-.041-.183-.04-.187-.038-.191-.038-.194-.036-.198-.034-.202-.033-.205-.032-.21-.031-.212-.028-.216-.027-.22-.026-.224-.023-.226-.022-.231-.021-.233-.018-.237-.016-.241-.014-.244-.012-.247-.011-.25-.008-.254-.005-.257-.004-.26-.001-.26.001z")},"insertDatabaseIcon"),ot=(0,Mt.K2)(function(v){v.append("defs").append("symbol").attr("id","computer").attr("width","24").attr("height","24").append("path").attr("transform","scale(.5)").attr("d","M2 2v13h20v-13h-20zm18 11h-16v-9h16v9zm-10.228 6l.466-1h3.524l.467 1h-4.457zm14.228 3h-24l2-6h2.104l-1.33 4h18.45l-1.297-4h2.073l2 6zm-5-10h-14v-7h14v7z")},"insertComputerIcon"),ke=(0,Mt.K2)(function(v){v.append("defs").append("symbol").attr("id","clock").attr("width","24").attr("height","24").append("path").attr("transform","scale(.5)").attr("d","M12 2c5.514 0 10 4.486 10 10s-4.486 10-10 10-10-4.486-10-10 4.486-10 10-10zm0-2c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm5.848 12.459c.202.038.202.333.001.372-1.907.361-6.045 1.111-6.547 1.111-.719 0-1.301-.582-1.301-1.301 0-.512.77-5.447 1.125-7.445.034-.192.312-.181.343.014l.985 6.238 5.394 1.011z")},"insertClockIcon"),Pt=(0,Mt.K2)(function(v){v.append("defs").append("marker").attr("id","arrowhead").attr("refX",9).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z")},"insertArrowHead"),Zt=(0,Mt.K2)(function(v){v.append("defs").append("marker").attr("id","arrowend").attr("refX",1).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 10 0 L 0 5 L 10 10 z")},"insertArrowEnd"),pe=(0,Mt.K2)(function(v){v.append("defs").append("marker").attr("id","filled-head").attr("refX",18).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")},"insertArrowFilledHead"),Re=(0,Mt.K2)(function(v){v.append("defs").append("marker").attr("id","sequencenumber").attr("refX",15).attr("refY",15).attr("markerWidth",60).attr("markerHeight",40).attr("orient","auto").append("circle").attr("cx",15).attr("cy",15).attr("r",6)},"insertDynamicNumber"),Ze=(0,Mt.K2)(function(v){const C=v.append("defs").append("marker").attr("id","crosshead").attr("markerWidth",15).attr("markerHeight",8).attr("orient","auto").attr("refX",16).attr("refY",4);C.append("path").attr("fill","black").attr("stroke","#000000").style("stroke-dasharray","0, 0").attr("stroke-width","1px").attr("d","M 9,2 V 6 L16,4 Z"),C.append("path").attr("fill","none").attr("stroke","#000000").style("stroke-dasharray","0, 0").attr("stroke-width","1px").attr("d","M 0,1 L 6,7 M 6,1 L 0,7")},"insertArrowCrossHead"),de=(0,Mt.K2)((v,b)=>({fontFamily:v[b+"FontFamily"],fontSize:v[b+"FontSize"],fontWeight:v[b+"FontWeight"]}),"getC4ShapeFont"),yr=function(){function v(Q,mt,zt,jt,Vt,Kt,xe){R(mt.append("text").attr("x",zt+Vt/2).attr("y",jt+Kt/2+5).style("text-anchor","middle").text(Q),xe)}function b(Q,mt,zt,jt,Vt,Kt,xe,je){const{fontSize:Ke,fontFamily:fr,fontWeight:lr}=je,br=Q.split(D.Y2.lineBreakRegex);for(let $e=0;$e<br.length;$e++){const He=$e*Ke-Ke*(br.length-1)/2,wr=mt.append("text").attr("x",zt+Vt/2).attr("y",jt).style("text-anchor","middle").attr("dominant-baseline","middle").style("font-size",Ke).style("font-weight",lr).style("font-family",fr);wr.append("tspan").attr("dy",He).text(br[$e]).attr("alignment-baseline","mathematical"),R(wr,xe)}}function C(Q,mt,zt,jt,Vt,Kt,xe,je){const Ke=mt.append("switch"),lr=Ke.append("foreignObject").attr("x",zt).attr("y",jt).attr("width",Vt).attr("height",Kt).append("xhtml:div").style("display","table").style("height","100%").style("width","100%");lr.append("div").style("display","table-cell").style("text-align","center").style("vertical-align","middle").text(Q),b(Q,Ke,zt,jt,Vt,0,xe,je),R(lr,xe)}function R(Q,mt){for(const zt in mt)mt.hasOwnProperty(zt)&&Q.attr(zt,mt[zt])}return(0,Mt.K2)(v,"byText"),(0,Mt.K2)(b,"byTspan"),(0,Mt.K2)(C,"byFo"),(0,Mt.K2)(R,"_setTextAttrs"),function(Q){return"fo"===Q.textPlacement?C:"old"===Q.textPlacement?v:b}}(),mr={drawRect:it,drawBoundary:ht,drawC4Shape:Ot,drawRels:_t,drawImage:rt,insertArrowHead:Pt,insertArrowEnd:Zt,insertArrowFilledHead:pe,insertDynamicNumber:Re,insertArrowCrossHead:Ze,insertDatabaseIcon:H,insertComputerIcon:ot,insertClockIcon:ke},Wt=0,we=0,sr=4,ve=2;At.yy=yt;var ce={},Ee=(class{constructor(v){this.name="",this.data={},this.data.startx=void 0,this.data.stopx=void 0,this.data.starty=void 0,this.data.stopy=void 0,this.data.widthLimit=void 0,this.nextData={},this.nextData.startx=void 0,this.nextData.stopx=void 0,this.nextData.starty=void 0,this.nextData.stopy=void 0,this.nextData.cnt=0,Ae(v.db.getConfig())}setData(v,b,C,R){this.nextData.startx=this.data.startx=v,this.nextData.stopx=this.data.stopx=b,this.nextData.starty=this.data.starty=C,this.nextData.stopy=this.data.stopy=R}updateVal(v,b,C,R){v[b]=void 0===v[b]?C:R(C,v[b])}insert(v){this.nextData.cnt=this.nextData.cnt+1;let b=this.nextData.startx===this.nextData.stopx?this.nextData.stopx+v.margin:this.nextData.stopx+2*v.margin,C=b+v.width,R=this.nextData.starty+2*v.margin,Q=R+v.height;(b>=this.data.widthLimit||C>=this.data.widthLimit||this.nextData.cnt>sr)&&(b=this.nextData.startx+v.margin+ce.nextLinePaddingX,R=this.nextData.stopy+2*v.margin,this.nextData.stopx=C=b+v.width,this.nextData.starty=this.nextData.stopy,this.nextData.stopy=Q=R+v.height,this.nextData.cnt=1),v.x=b,v.y=R,this.updateVal(this.data,"startx",b,Math.min),this.updateVal(this.data,"starty",R,Math.min),this.updateVal(this.data,"stopx",C,Math.max),this.updateVal(this.data,"stopy",Q,Math.max),this.updateVal(this.nextData,"startx",b,Math.min),this.updateVal(this.nextData,"starty",R,Math.min),this.updateVal(this.nextData,"stopx",C,Math.max),this.updateVal(this.nextData,"stopy",Q,Math.max)}init(v){this.name="",this.data={startx:void 0,stopx:void 0,starty:void 0,stopy:void 0,widthLimit:void 0},this.nextData={startx:void 0,stopx:void 0,starty:void 0,stopy:void 0,cnt:0},Ae(v.db.getConfig())}bumpLastMargin(v){this.data.stopx+=v,this.data.stopy+=v}static#t=w=()=>((0,lt.A)(this,"Bounds"),(0,Mt.K2)(this,"Bounds"),this)},w()),Ae=(0,Mt.K2)(function(v){(0,D.hH)(ce,v),v.fontFamily&&(ce.personFontFamily=ce.systemFontFamily=ce.messageFontFamily=v.fontFamily),v.fontSize&&(ce.personFontSize=ce.systemFontSize=ce.messageFontSize=v.fontSize),v.fontWeight&&(ce.personFontWeight=ce.systemFontWeight=ce.messageFontWeight=v.fontWeight)},"setConf"),er=(0,Mt.K2)((v,b)=>({fontFamily:v[b+"FontFamily"],fontSize:v[b+"FontSize"],fontWeight:v[b+"FontWeight"]}),"c4ShapeFont"),Qe=(0,Mt.K2)(v=>({fontFamily:v.boundaryFontFamily,fontSize:v.boundaryFontSize,fontWeight:v.boundaryFontWeight}),"boundaryFont"),Dr=(0,Mt.K2)(v=>({fontFamily:v.messageFontFamily,fontSize:v.messageFontSize,fontWeight:v.messageFontWeight}),"messageFont");function _e(v,b,C,R,Q){if(!b[v].width)if(C)b[v].text=(0,L.bH)(b[v].text,Q,R),b[v].textLines=b[v].text.split(D.Y2.lineBreakRegex).length,b[v].width=Q,b[v].height=(0,L.ru)(b[v].text,R);else{let mt=b[v].text.split(D.Y2.lineBreakRegex);b[v].textLines=mt.length;let zt=0;b[v].height=0,b[v].width=0;for(const jt of mt)b[v].width=Math.max((0,L.Un)(jt,R),b[v].width),zt=(0,L.ru)(jt,R),b[v].height=b[v].height+zt}}(0,Mt.K2)(_e,"calcC4ShapeTextWH");var Yr=(0,Mt.K2)(function(v,b,C){b.x=C.data.startx,b.y=C.data.starty,b.width=C.data.stopx-C.data.startx,b.height=C.data.stopy-C.data.starty,b.label.y=ce.c4ShapeMargin-35;let R=b.wrap&&ce.wrap,Q=Qe(ce);Q.fontSize=Q.fontSize+2,Q.fontWeight="bold",_e("label",b,R,Q,(0,L.Un)(b.label.text,Q)),mr.drawBoundary(v,b,ce)},"drawBoundary"),nr=(0,Mt.K2)(function(v,b,C,R){let Q=0;for(const mt of R){Q=0;const zt=C[mt];let jt=er(ce,zt.typeC4Shape.text);switch(jt.fontSize=jt.fontSize-2,zt.typeC4Shape.width=(0,L.Un)("\xab"+zt.typeC4Shape.text+"\xbb",jt),zt.typeC4Shape.height=jt.fontSize+2,zt.typeC4Shape.Y=ce.c4ShapePadding,Q=zt.typeC4Shape.Y+zt.typeC4Shape.height-4,zt.image={width:0,height:0,Y:0},zt.typeC4Shape.text){case"person":case"external_person":zt.image.width=48,zt.image.height=48,zt.image.Y=Q,Q=zt.image.Y+zt.image.height}zt.sprite&&(zt.image.width=48,zt.image.height=48,zt.image.Y=Q,Q=zt.image.Y+zt.image.height);let Vt=zt.wrap&&ce.wrap,Kt=ce.width-2*ce.c4ShapePadding,xe=er(ce,zt.typeC4Shape.text);xe.fontSize=xe.fontSize+2,xe.fontWeight="bold",_e("label",zt,Vt,xe,Kt),zt.label.Y=Q+8,Q=zt.label.Y+zt.label.height,zt.type&&""!==zt.type.text?(zt.type.text="["+zt.type.text+"]",_e("type",zt,Vt,er(ce,zt.typeC4Shape.text),Kt),zt.type.Y=Q+5,Q=zt.type.Y+zt.type.height):zt.techn&&""!==zt.techn.text&&(zt.techn.text="["+zt.techn.text+"]",_e("techn",zt,Vt,er(ce,zt.techn.text),Kt),zt.techn.Y=Q+5,Q=zt.techn.Y+zt.techn.height);let je=Q,Ke=zt.label.width;zt.descr&&""!==zt.descr.text&&(_e("descr",zt,Vt,er(ce,zt.typeC4Shape.text),Kt),zt.descr.Y=Q+20,Q=zt.descr.Y+zt.descr.height,Ke=Math.max(zt.label.width,zt.descr.width),je=Q-5*zt.descr.textLines),Ke+=ce.c4ShapePadding,zt.width=Math.max(zt.width||ce.width,Ke,ce.width),zt.height=Math.max(zt.height||ce.height,je,ce.height),zt.margin=zt.margin||ce.c4ShapeMargin,v.insert(zt),mr.drawC4Shape(b,zt,ce)}v.bumpLastMargin(ce.c4ShapeMargin)},"drawC4ShapeArray"),te=(class{constructor(v,b){this.x=v,this.y=b}static#t=Lt=()=>((0,lt.A)(this,"Point"),(0,Mt.K2)(this,"Point"),this)},Lt()),ne=(0,Mt.K2)(function(v,b){let C=v.x,R=v.y,Q=b.x,mt=b.y,zt=C+v.width/2,jt=R+v.height/2,Vt=Math.abs(C-Q),Kt=Math.abs(R-mt),xe=Kt/Vt,je=v.height/v.width,Ke=null;return R==mt&&C<Q?Ke=new te(C+v.width,jt):R==mt&&C>Q?Ke=new te(C,jt):C==Q&&R<mt?Ke=new te(zt,R+v.height):C==Q&&R>mt&&(Ke=new te(zt,R)),C>Q&&R<mt?Ke=je>=xe?new te(C,jt+xe*v.width/2):new te(zt-Vt/Kt*v.height/2,R+v.height):C<Q&&R<mt?Ke=je>=xe?new te(C+v.width,jt+xe*v.width/2):new te(zt+Vt/Kt*v.height/2,R+v.height):C<Q&&R>mt?Ke=je>=xe?new te(C+v.width,jt-xe*v.width/2):new te(zt+v.height/2*Vt/Kt,R):C>Q&&R>mt&&(Ke=je>=xe?new te(C,jt-v.width/2*xe):new te(zt-v.height/2*Vt/Kt,R)),Ke},"getIntersectPoint"),be=(0,Mt.K2)(function(v,b){let C={x:0,y:0};C.x=b.x+b.width/2,C.y=b.y+b.height/2;let R=ne(v,C);return C.x=v.x+v.width/2,C.y=v.y+v.height/2,{startPoint:R,endPoint:ne(b,C)}},"getIntersectPoints"),ar=(0,Mt.K2)(function(v,b,C,R){let Q=0;for(let mt of b){Q+=1;let zt=mt.wrap&&ce.wrap,jt=Dr(ce);"C4Dynamic"===R.db.getC4Type()&&(mt.label.text=Q+": "+mt.label.text);let Kt=(0,L.Un)(mt.label.text,jt);_e("label",mt,zt,jt,Kt),mt.techn&&""!==mt.techn.text&&(Kt=(0,L.Un)(mt.techn.text,jt),_e("techn",mt,zt,jt,Kt)),mt.descr&&""!==mt.descr.text&&(Kt=(0,L.Un)(mt.descr.text,jt),_e("descr",mt,zt,jt,Kt));let xe=C(mt.from),je=C(mt.to),Ke=be(xe,je);mt.startPoint=Ke.startPoint,mt.endPoint=Ke.endPoint}mr.drawRels(v,b,ce)},"drawRels");function g(v,b,C,R,Q){let mt=new Ee(Q);mt.data.widthLimit=C.data.widthLimit/Math.min(ve,R.length);for(let[zt,jt]of R.entries()){let Vt=0;jt.image={width:0,height:0,Y:0},jt.sprite&&(jt.image.width=48,jt.image.height=48,jt.image.Y=Vt,Vt=jt.image.Y+jt.image.height);let Kt=jt.wrap&&ce.wrap,xe=Qe(ce);if(xe.fontSize=xe.fontSize+2,xe.fontWeight="bold",_e("label",jt,Kt,xe,mt.data.widthLimit),jt.label.Y=Vt+8,Vt=jt.label.Y+jt.label.height,jt.type&&""!==jt.type.text&&(jt.type.text="["+jt.type.text+"]",_e("type",jt,Kt,Qe(ce),mt.data.widthLimit),jt.type.Y=Vt+5,Vt=jt.type.Y+jt.type.height),jt.descr&&""!==jt.descr.text){let lr=Qe(ce);lr.fontSize=lr.fontSize-2,_e("descr",jt,Kt,lr,mt.data.widthLimit),jt.descr.Y=Vt+20,Vt=jt.descr.Y+jt.descr.height}if(0==zt||zt%ve===0){let lr=C.data.startx+ce.diagramMarginX,br=C.data.stopy+ce.diagramMarginY+Vt;mt.setData(lr,lr,br,br)}else{let lr=mt.data.stopx!==mt.data.startx?mt.data.stopx+ce.diagramMarginX:mt.data.startx,br=mt.data.starty;mt.setData(lr,lr,br,br)}mt.name=jt.alias;let je=Q.db.getC4ShapeArray(jt.alias),Ke=Q.db.getC4ShapeKeys(jt.alias);Ke.length>0&&nr(mt,v,je,Ke);let fr=Q.db.getBoundaries(b=jt.alias);fr.length>0&&g(v,b,mt,fr,Q),"global"!==jt.alias&&Yr(v,jt,mt),C.data.stopy=Math.max(mt.data.stopy+ce.c4ShapeMargin,C.data.stopy),C.data.stopx=Math.max(mt.data.stopx+ce.c4ShapeMargin,C.data.stopx),Wt=Math.max(Wt,C.data.stopx),we=Math.max(we,C.data.stopy)}}(0,Mt.K2)(g,"drawInsideBoundary");var E={drawPersonOrSystemArray:nr,drawBoundary:Yr,setConf:Ae,draw:(0,Mt.K2)(function(v,b,C,R){ce=(0,D.D7)().c4;const Q=(0,D.D7)().securityLevel;let mt;"sandbox"===Q&&(mt=(0,ut.Ltv)("#i"+b));const zt=(0,ut.Ltv)("sandbox"===Q?mt.nodes()[0].contentDocument.body:"body");let jt=R.db;R.db.setWrap(ce.wrap),sr=jt.getC4ShapeInRow(),ve=jt.getC4BoundaryInRow(),Mt.Rm.debug(`C:${JSON.stringify(ce,null,2)}`);const Vt="sandbox"===Q?zt.select(`[id="${b}"]`):(0,ut.Ltv)(`[id="${b}"]`);mr.insertComputerIcon(Vt),mr.insertDatabaseIcon(Vt),mr.insertClockIcon(Vt);let Kt=new Ee(R);Kt.setData(ce.diagramMarginX,ce.diagramMarginX,ce.diagramMarginY,ce.diagramMarginY),Kt.data.widthLimit=screen.availWidth,Wt=ce.diagramMarginX,we=ce.diagramMarginY;const xe=R.db.getTitle();g(Vt,"",Kt,R.db.getBoundaries(""),R),mr.insertArrowHead(Vt),mr.insertArrowEnd(Vt),mr.insertArrowCrossHead(Vt),mr.insertArrowFilledHead(Vt),ar(Vt,R.db.getRels(),R.db.getC4Shape,R),Kt.data.stopx=Wt,Kt.data.stopy=we;const Ke=Kt.data;let lr=Ke.stopy-Ke.starty+2*ce.diagramMarginY;const $e=Ke.stopx-Ke.startx+2*ce.diagramMarginX;xe&&Vt.append("text").text(xe).attr("x",(Ke.stopx-Ke.startx)/2-4*ce.diagramMarginX).attr("y",Ke.starty+ce.diagramMarginY),(0,D.a$)(Vt,lr,$e,ce.useMaxWidth);const He=xe?60:0;Vt.attr("viewBox",Ke.startx-ce.diagramMarginX+" -"+(ce.diagramMarginY+He)+" "+$e+" "+(lr+He)),Mt.Rm.debug("models:",Ke)},"draw")},A={parser:Ge,db:yt,renderer:E,styles:(0,Mt.K2)(v=>`.person {\n    stroke: ${v.personBorder};\n    fill: ${v.personBkg};\n  }\n`,"getStyles"),init:(0,Mt.K2)(({c4:v,wrap:b})=>{E.setConf(v),yt.setWrap(b)},"init")}},72876:(ri,Er,P)=>{"use strict";P.r(Er),P.d(Er,{render:()=>Se});var lt=P(89204),ie=P(98954),D=(P(36384),P(87452)),Mt=P(32239),Lt=(P(19753),P(59355),P(52052),P(79006)),At=P(32303),Ge=P(42335),bt=P(46865),Gt=P(61823),j=new Map,hr=new Map,ze=new Map,vr=(0,At.K2)(()=>{hr.clear(),ze.clear(),j.clear()},"clear"),Wr=(0,At.K2)((X,re)=>{const S=hr.get(re)||[];return At.Rm.trace("In isDescendant",re," ",X," = ",S.includes(X)),S.includes(X)},"isDescendant"),Br=(0,At.K2)((X,re)=>{const S=hr.get(re)||[];return At.Rm.info("Descendants of ",re," is ",S),At.Rm.info("Edge is ",X),X.v!==re&&X.w!==re&&(S?S.includes(X.v)||Wr(X.v,re)||Wr(X.w,re)||S.includes(X.w):(At.Rm.debug("Tilt, ",re,",not in descendants"),!1))},"edgeInCluster"),Gr=(0,At.K2)((X,re,S,ee)=>{At.Rm.warn("Copying children of ",X,"root",ee,"data",re.node(X),ee);const Rt=re.children(X)||[];X!==ee&&Rt.push(X),At.Rm.warn("Copying (nodes) clusterId",X,"nodes",Rt),Rt.forEach(qt=>{if(re.children(qt).length>0)Gr(qt,re,S,ee);else{const V=re.node(qt);At.Rm.info("cp ",qt," to ",ee," with parent ",X),S.setNode(qt,V),ee!==re.parent(qt)&&(At.Rm.warn("Setting parent",qt,re.parent(qt)),S.setParent(qt,re.parent(qt))),X!==ee&&qt!==X?(At.Rm.debug("Setting parent",qt,X),S.setParent(qt,X)):(At.Rm.info("In copy ",X,"root",ee,"data",re.node(X),ee),At.Rm.debug("Not Setting parent for node=",qt,"cluster!==rootId",X!==ee,"node!==clusterId",qt!==X));const gt=re.edges(qt);At.Rm.debug("Copying Edges",gt),gt.forEach(Y=>{At.Rm.info("Edge",Y);const Nt=re.edge(Y.v,Y.w,Y.name);At.Rm.info("Edge data",Nt,ee);try{Br(Y,ee)?(At.Rm.info("Copying as ",Y.v,Y.w,Nt,Y.name),S.setEdge(Y.v,Y.w,Nt,Y.name),At.Rm.info("newGraph edges ",S.edges(),S.edge(S.edges()[0]))):At.Rm.info("Skipping copy of edge ",Y.v,"--\x3e",Y.w," rootId: ",ee," clusterId:",X)}catch(St){At.Rm.error(St)}})}At.Rm.debug("Removing node",qt),re.removeNode(qt)})},"copy"),aa=(0,At.K2)((X,re)=>{const S=re.children(X);let ee=[...S];for(const Rt of S)ze.set(Rt,X),ee=[...ee,...aa(Rt,re)];return ee},"extractDescendants"),zr=(0,At.K2)((X,re,S)=>{const ee=X.edges().filter(Y=>Y.v===re||Y.w===re),Rt=X.edges().filter(Y=>Y.v===S||Y.w===S),qt=ee.map(Y=>({v:Y.v===re?S:Y.v,w:Y.w===re?re:Y.w})),V=Rt.map(Y=>({v:Y.v,w:Y.w}));return qt.filter(Y=>V.some(Nt=>Y.v===Nt.v&&Y.w===Nt.w))},"findCommonEdges"),Or=(0,At.K2)((X,re,S)=>{const ee=re.children(X);if(At.Rm.trace("Searching children of id ",X,ee),ee.length<1)return X;let Rt;for(const qt of ee){const V=Or(qt,re,S),gt=zr(re,S,V);if(V){if(!(gt.length>0))return V;Rt=V}}return Rt},"findNonClusterChild"),Be=(0,At.K2)(X=>j.has(X)&&j.get(X).externalConnections&&j.has(X)?j.get(X).id:X,"getAnchorId"),Ir=(0,At.K2)((X,re)=>{if(!X||re>10)At.Rm.debug("Opting out, no graph ");else{At.Rm.debug("Opting in, graph "),X.nodes().forEach(function(S){X.children(S).length>0&&(At.Rm.warn("Cluster identified",S," Replacement id in edges: ",Or(S,X,S)),hr.set(S,aa(S,X)),j.set(S,{id:Or(S,X,S),clusterData:X.node(S)}))}),X.nodes().forEach(function(S){const ee=X.children(S),Rt=X.edges();ee.length>0?(At.Rm.debug("Cluster identified",S,hr),Rt.forEach(qt=>{Wr(qt.v,S)^Wr(qt.w,S)&&(At.Rm.warn("Edge: ",qt," leaves cluster ",S),At.Rm.warn("Descendants of XXX ",S,": ",hr.get(S)),j.get(S).externalConnections=!0)})):At.Rm.debug("Not a cluster ",S,hr)});for(let S of j.keys()){const ee=j.get(S).id,Rt=X.parent(ee);Rt!==S&&j.has(Rt)&&!j.get(Rt).externalConnections&&(j.get(S).id=Rt)}X.edges().forEach(function(S){const ee=X.edge(S);At.Rm.warn("Edge "+S.v+" -> "+S.w+": "+JSON.stringify(S)),At.Rm.warn("Edge "+S.v+" -> "+S.w+": "+JSON.stringify(X.edge(S)));let Rt=S.v,qt=S.w;if(At.Rm.warn("Fix XXX",j,"ids:",S.v,S.w,"Translating: ",j.get(S.v)," --- ",j.get(S.w)),j.get(S.v)||j.get(S.w)){if(At.Rm.warn("Fixing and trying - removing XXX",S.v,S.w,S.name),Rt=Be(S.v),qt=Be(S.w),X.removeEdge(S.v,S.w,S.name),Rt!==S.v){const V=X.parent(Rt);j.get(V).externalConnections=!0,ee.fromCluster=S.v}if(qt!==S.w){const V=X.parent(qt);j.get(V).externalConnections=!0,ee.toCluster=S.w}At.Rm.warn("Fix Replacing with XXX",Rt,qt,S.name),X.setEdge(Rt,qt,ee,S.name)}}),At.Rm.warn("Adjusted Graph",bt.M(X)),Xe(X,0),At.Rm.trace(j)}},"adjustClustersAndEdges"),Xe=(0,At.K2)((X,re)=>{if(At.Rm.warn("extractor - ",re,bt.M(X),X.children("D")),re>10)return void At.Rm.error("Bailing out");let S=X.nodes(),ee=!1;for(const Rt of S){const qt=X.children(Rt);ee=ee||qt.length>0}if(ee){At.Rm.debug("Nodes = ",S,re);for(const Rt of S)if(At.Rm.debug("Extracting node",Rt,j,j.has(Rt)&&!j.get(Rt).externalConnections,!X.parent(Rt),X.node(Rt),X.children("D")," Depth ",re),j.has(Rt))if(!j.get(Rt).externalConnections&&X.children(Rt)&&X.children(Rt).length>0){At.Rm.warn("Cluster without external connections, without a parent and with children",Rt,re);let V="TB"===X.graph().rankdir?"LR":"TB";j.get(Rt)?.clusterData?.dir&&(V=j.get(Rt).clusterData.dir,At.Rm.warn("Fixing dir",j.get(Rt).clusterData.dir,V));const gt=new Gt.T({multigraph:!0,compound:!0}).setGraph({rankdir:V,nodesep:50,ranksep:50,marginx:8,marginy:8}).setDefaultEdgeLabel(function(){return{}});At.Rm.warn("Old graph before copy",bt.M(X)),Gr(Rt,X,gt,Rt),X.setNode(Rt,{clusterNode:!0,id:Rt,clusterData:j.get(Rt).clusterData,label:j.get(Rt).label,graph:gt}),At.Rm.warn("New graph after copy node: (",Rt,")",bt.M(gt)),At.Rm.debug("Old graph after copy",bt.M(X))}else At.Rm.warn("Cluster ** ",Rt," **not meeting the criteria !externalConnections:",!j.get(Rt).externalConnections," no parent: ",!X.parent(Rt)," children ",X.children(Rt)&&X.children(Rt).length>0,X.children("D"),re),At.Rm.debug(j);else At.Rm.debug("Not a cluster",Rt,re);S=X.nodes(),At.Rm.warn("New list of nodes",S);for(const Rt of S){const qt=X.node(Rt);At.Rm.warn(" Now next level",Rt,qt),qt?.clusterNode&&Xe(qt.graph,re+1)}}else At.Rm.debug("Done, no node has children",X.nodes())},"extractor"),z=(0,At.K2)((X,re)=>{if(0===re.length)return[];let S=Object.assign([],re);return re.forEach(ee=>{const Rt=X.children(ee),qt=z(X,Rt);S=[...S,...qt]}),S},"sorter"),dt=(0,At.K2)(X=>z(X,X.children()),"sortNodesByHierarchy"),Bt=(0,At.K2)(function(){var X=(0,lt.A)(function*(re,S,ee,Rt,qt,V){At.Rm.warn("Graph in recursive render:XAX",bt.M(S),qt);const gt=S.graph().rankdir;At.Rm.trace("Dir in recursive render - dir:",gt);const Y=re.insert("g").attr("class","root");S.nodes()?At.Rm.info("Recursive render XXX",S.nodes()):At.Rm.info("No nodes found for",S),S.edges().length>0&&At.Rm.info("Recursive edges",S.edge(S.edges()[0]));const Nt=Y.insert("g").attr("class","clusters"),St=Y.insert("g").attr("class","edgePaths"),Ut=Y.insert("g").attr("class","edgeLabels"),ye=Y.insert("g").attr("class","nodes");yield Promise.all(S.nodes().map(function(){var qe=(0,lt.A)(function*(We){const Et=S.node(We);if(void 0!==qt){const Tt=JSON.parse(JSON.stringify(qt.clusterData));At.Rm.trace("Setting data for parent cluster XXX\n Node.id = ",We,"\n data=",Tt.height,"\nParent cluster",qt.height),S.setNode(qt.id,Tt),S.parent(We)||(At.Rm.trace("Setting parent",We,qt.id),S.setParent(We,qt.id,Tt))}if(At.Rm.info("(Insert) Node XXX"+We+": "+JSON.stringify(S.node(We))),Et?.clusterNode){At.Rm.info("Cluster identified XBX",We,Et.width,S.node(We));const{ranksep:Tt,nodesep:B}=S.graph();Et.graph.setGraph({...Et.graph.graph(),ranksep:Tt+25,nodesep:B});const N=yield Bt(ye,Et.graph,ee,Rt,S.node(We),V),et=N.elem;(0,D.lC)(Et,et),Et.diff=N.diff||0,At.Rm.info("New compound node after recursive render XAX",We,"width",Et.width,"height",Et.height),(0,D.U7)(et,Et)}else S.children(We).length>0?(At.Rm.trace("Cluster - the non recursive path XBX",We,Et.id,Et,Et.width,"Graph:",S),At.Rm.trace(Or(Et.id,S)),j.set(Et.id,{id:Or(Et.id,S),node:Et})):(At.Rm.trace("Node - the non recursive path XAX",We,ye,S.node(We),gt),yield(0,D.on)(ye,S.node(We),{config:V,dir:gt}))});return function(We){return qe.apply(this,arguments)}}())),yield(0,At.K2)((0,lt.A)(function*(){const qe=S.edges().map(function(){var We=(0,lt.A)(function*(Et){const Tt=S.edge(Et.v,Et.w,Et.name);At.Rm.info("Edge "+Et.v+" -> "+Et.w+": "+JSON.stringify(Et)),At.Rm.info("Edge "+Et.v+" -> "+Et.w+": ",Et," ",JSON.stringify(S.edge(Et))),At.Rm.info("Fix",j,"ids:",Et.v,Et.w,"Translating: ",j.get(Et.v),j.get(Et.w)),yield(0,ie.jP)(Ut,Tt)});return function(Et){return We.apply(this,arguments)}}());yield Promise.all(qe)}),"processEdges")(),At.Rm.info("Graph before layout:",JSON.stringify(bt.M(S))),At.Rm.info("############################################# XXX"),At.Rm.info("###                Layout                 ### XXX"),At.Rm.info("############################################# XXX"),(0,Ge.Zp)(S),At.Rm.info("Graph after layout:",JSON.stringify(bt.M(S)));let Pe=0,{subGraphTitleTotalMargin:oe}=(0,Mt.O)(V);return yield Promise.all(dt(S).map(function(){var qe=(0,lt.A)(function*(We){const Et=S.node(We);if(At.Rm.info("Position XBX => "+We+": ("+Et.x,","+Et.y,") width: ",Et.width," height: ",Et.height),Et?.clusterNode)Et.y+=oe,At.Rm.info("A tainted cluster node XBX1",We,Et.id,Et.width,Et.height,Et.x,Et.y,S.parent(We)),j.get(Et.id).node=Et,(0,D.U_)(Et);else if(S.children(We).length>0){At.Rm.info("A pure cluster node XBX1",We,Et.id,Et.x,Et.y,Et.width,Et.height,S.parent(We)),Et.height+=oe,S.node(Et.parentId);const Tt=Et?.padding/2||0,B=Et?.labelBBox?.height||0;At.Rm.debug("OffsetY",B-Tt||0,"labelHeight",B,"halfPadding",Tt),yield(0,D.U)(Nt,Et),j.get(Et.id).node=Et}else{const Tt=S.node(Et.parentId);Et.y+=oe/2,At.Rm.info("A regular node XBX1 - using the padding",Et.id,"parent",Et.parentId,Et.width,Et.height,Et.x,Et.y,"offsetY",Et.offsetY,"parent",Tt,Tt?.offsetY,Et),(0,D.U_)(Et)}});return function(We){return qe.apply(this,arguments)}}())),S.edges().forEach(function(qe){const We=S.edge(qe);At.Rm.info("Edge "+qe.v+" -> "+qe.w+": "+JSON.stringify(We),We),We.points.forEach(N=>N.y+=oe/2);const Et=S.node(qe.v);var Tt=S.node(qe.w);const B=(0,ie.Jo)(St,We,j,ee,Et,Tt,Rt);(0,ie.T_)(We,B)}),S.nodes().forEach(function(qe){const We=S.node(qe);At.Rm.info(qe,We.type,We.diff),We.isGroup&&(Pe=We.diff)}),At.Rm.warn("Returning from recursive render XAX",Y,Pe),{elem:Y,diff:Pe}});return function(re,S,ee,Rt,qt,V){return X.apply(this,arguments)}}(),"recursiveRender"),Se=(0,At.K2)(function(){var X=(0,lt.A)(function*(re,S){const ee=new Gt.T({multigraph:!0,compound:!0}).setGraph({rankdir:re.direction,nodesep:re.config?.nodeSpacing||re.config?.flowchart?.nodeSpacing||re.nodeSpacing,ranksep:re.config?.rankSpacing||re.config?.flowchart?.rankSpacing||re.rankSpacing,marginx:8,marginy:8}).setDefaultEdgeLabel(function(){return{}}),Rt=S.select("g");(0,ie.g0)(Rt,re.markers,re.type,re.diagramId),(0,D.gh)(),(0,ie.IU)(),(0,D.IU)(),vr(),re.nodes.forEach(V=>{ee.setNode(V.id,{...V}),V.parentId&&ee.setParent(V.id,V.parentId)}),At.Rm.debug("Edges:",re.edges),re.edges.forEach(V=>{if(V.start===V.end){const gt=V.start,Y=gt+"---"+gt+"---1",Nt=gt+"---"+gt+"---2",St=ee.node(gt);ee.setNode(Y,{domId:Y,id:Y,parentId:St.parentId,labelStyle:"",label:"",padding:0,shape:"labelRect",style:"",width:10,height:10}),ee.setParent(Y,St.parentId),ee.setNode(Nt,{domId:Nt,id:Nt,parentId:St.parentId,labelStyle:"",padding:0,shape:"labelRect",label:"",style:"",width:10,height:10}),ee.setParent(Nt,St.parentId);const Ut=structuredClone(V),ye=structuredClone(V),le=structuredClone(V);Ut.label="",Ut.arrowTypeEnd="none",Ut.id=gt+"-cyclic-special-1",ye.arrowTypeStart="none",ye.arrowTypeEnd="none",ye.id=gt+"-cyclic-special-mid",le.label="",St.isGroup&&(Ut.fromCluster=gt,le.toCluster=gt),le.id=gt+"-cyclic-special-2",le.arrowTypeStart="none",ee.setEdge(gt,Y,Ut,gt+"-cyclic-special-0"),ee.setEdge(Y,Nt,ye,gt+"-cyclic-special-1"),ee.setEdge(Nt,gt,le,gt+"-cyc<lic-special-2")}else ee.setEdge(V.start,V.end,{...V},V.id)}),At.Rm.warn("Graph at first:",JSON.stringify(bt.M(ee))),Ir(ee),At.Rm.warn("Graph after XAX:",JSON.stringify(bt.M(ee)));const qt=(0,Lt.D7)();yield Bt(Rt,ee,re.type,re.diagramId,void 0,qt)});return function(re,S){return X.apply(this,arguments)}}(),"render")},73302:(ri,Er,P)=>{"use strict";Er.Qi=Er.XO=void 0;const ie=P(30362),L=P(94221),D=P(52240);var Mt,Lt;(Lt=Mt||(Er.XO=Mt={})).None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:D.Event.None}),Lt.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:D.Event.None}),Lt.is=function At(Ge){const bt=Ge;return bt&&(bt===Lt.None||bt===Lt.Cancelled||L.boolean(bt.isCancellationRequested)&&!!bt.onCancellationRequested)};const ut=Object.freeze(function(Lt,At){const Ge=(0,ie.default)().timer.setTimeout(Lt.bind(At),0);return{dispose(){Ge.dispose()}}});class G{constructor(){this._isCancelled=!1}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?ut:(this._emitter||(this._emitter=new D.Emitter),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=void 0)}}Er.Qi=class w{get token(){return this._token||(this._token=new G),this._token}cancel(){this._token?this._token.cancel():this._token=Mt.Cancelled}dispose(){this._token?this._token instanceof G&&this._token.dispose():this._token=Mt.None}}},73986:(ri,Er,P)=>{"use strict";Er.J=void 0;var ie=P(4787);function D(w){return w.replace(ie.ctrlCharactersRegex,"").replace(ie.htmlEntitiesRegex,function(At,Ge){return String.fromCharCode(Ge)})}function ut(w){try{return decodeURIComponent(w)}catch{return w}}Er.J=function G(w){if(!w)return ie.BLANK_URL;var Lt,At=ut(w.trim());do{Lt=(At=ut(At=D(At).replace(ie.htmlCtrlEntityRegex,"").replace(ie.ctrlCharactersRegex,"").replace(ie.whitespaceEscapeCharsRegex,"").trim())).match(ie.ctrlCharactersRegex)||At.match(ie.htmlEntitiesRegex)||At.match(ie.htmlCtrlEntityRegex)||At.match(ie.whitespaceEscapeCharsRegex)}while(Lt&&Lt.length>0);var Ge=At;if(!Ge)return ie.BLANK_URL;if(function L(w){return ie.relativeFirstCharacters.indexOf(w[0])>-1}(Ge))return Ge;var bt=Ge.trimStart(),Gt=bt.match(ie.urlSchemeRegex);if(!Gt)return Ge;var j=Gt[0].toLowerCase().trim();if(ie.invalidProtocolRegex.test(j))return ie.BLANK_URL;var hr=bt.replace(/\\/g,"/");if("mailto:"===j||j.includes("://"))return hr;if("http:"===j||"https:"===j){if(!function Mt(w){return URL.canParse(w)}(hr))return ie.BLANK_URL;var ze=new URL(hr);return ze.protocol=ze.protocol.toLowerCase(),ze.hostname=ze.hostname.toLowerCase(),ze.toString()}return hr}},76765:(ri,Er,P)=>{"use strict";P.r(Er),P.d(Er,{diagram:()=>M});var lt=P(52052),ie=P(79006),L=P(32303),D=P(73986),Mt=P(49645),ut=P(64693),G=P(30001),w=P(37355),Lt=P(40622),At=function(){var m=(0,L.K2)(function(Qr,or,ur,W){for(ur=ur||{},W=Qr.length;W--;ur[Qr[W]]=or);return ur},"o"),A=[6,8,10,12,13,14,15,16,17,18,20,21,22,23,24,25,26,27,28,29,30,31,33,35,36,38,40],v=[1,26],b=[1,27],C=[1,28],R=[1,29],Q=[1,30],mt=[1,31],zt=[1,32],jt=[1,33],Vt=[1,34],Kt=[1,9],xe=[1,10],je=[1,11],Ke=[1,12],fr=[1,13],lr=[1,14],br=[1,15],$e=[1,16],He=[1,19],wr=[1,20],kr=[1,21],Kr=[1,22],_r=[1,23],Jr=[1,25],Lr=[1,35],ha={trace:(0,L.K2)(function(){},"trace"),yy:{},symbols_:{error:2,start:3,gantt:4,document:5,EOF:6,line:7,SPACE:8,statement:9,NL:10,weekday:11,weekday_monday:12,weekday_tuesday:13,weekday_wednesday:14,weekday_thursday:15,weekday_friday:16,weekday_saturday:17,weekday_sunday:18,weekend:19,weekend_friday:20,weekend_saturday:21,dateFormat:22,inclusiveEndDates:23,topAxis:24,axisFormat:25,tickInterval:26,excludes:27,includes:28,todayMarker:29,title:30,acc_title:31,acc_title_value:32,acc_descr:33,acc_descr_value:34,acc_descr_multiline_value:35,section:36,clickStatement:37,taskTxt:38,taskData:39,click:40,callbackname:41,callbackargs:42,href:43,clickStatementDebug:44,$accept:0,$end:1},terminals_:{2:"error",4:"gantt",6:"EOF",8:"SPACE",10:"NL",12:"weekday_monday",13:"weekday_tuesday",14:"weekday_wednesday",15:"weekday_thursday",16:"weekday_friday",17:"weekday_saturday",18:"weekday_sunday",20:"weekend_friday",21:"weekend_saturday",22:"dateFormat",23:"inclusiveEndDates",24:"topAxis",25:"axisFormat",26:"tickInterval",27:"excludes",28:"includes",29:"todayMarker",30:"title",31:"acc_title",32:"acc_title_value",33:"acc_descr",34:"acc_descr_value",35:"acc_descr_multiline_value",36:"section",38:"taskTxt",39:"taskData",40:"click",41:"callbackname",42:"callbackargs",43:"href"},productions_:[0,[3,3],[5,0],[5,2],[7,2],[7,1],[7,1],[7,1],[11,1],[11,1],[11,1],[11,1],[11,1],[11,1],[11,1],[19,1],[19,1],[9,1],[9,1],[9,1],[9,1],[9,1],[9,1],[9,1],[9,1],[9,1],[9,1],[9,1],[9,2],[9,2],[9,1],[9,1],[9,1],[9,2],[37,2],[37,3],[37,3],[37,4],[37,3],[37,4],[37,2],[44,2],[44,3],[44,3],[44,4],[44,3],[44,4],[44,2]],performAction:(0,L.K2)(function(or,ur,W,$t,Ye,Fe,Tr){var pr=Fe.length-1;switch(Ye){case 1:return Fe[pr-1];case 2:case 6:case 7:this.$=[];break;case 3:Fe[pr-1].push(Fe[pr]),this.$=Fe[pr-1];break;case 4:case 5:this.$=Fe[pr];break;case 8:$t.setWeekday("monday");break;case 9:$t.setWeekday("tuesday");break;case 10:$t.setWeekday("wednesday");break;case 11:$t.setWeekday("thursday");break;case 12:$t.setWeekday("friday");break;case 13:$t.setWeekday("saturday");break;case 14:$t.setWeekday("sunday");break;case 15:$t.setWeekend("friday");break;case 16:$t.setWeekend("saturday");break;case 17:$t.setDateFormat(Fe[pr].substr(11)),this.$=Fe[pr].substr(11);break;case 18:$t.enableInclusiveEndDates(),this.$=Fe[pr].substr(18);break;case 19:$t.TopAxis(),this.$=Fe[pr].substr(8);break;case 20:$t.setAxisFormat(Fe[pr].substr(11)),this.$=Fe[pr].substr(11);break;case 21:$t.setTickInterval(Fe[pr].substr(13)),this.$=Fe[pr].substr(13);break;case 22:$t.setExcludes(Fe[pr].substr(9)),this.$=Fe[pr].substr(9);break;case 23:$t.setIncludes(Fe[pr].substr(9)),this.$=Fe[pr].substr(9);break;case 24:$t.setTodayMarker(Fe[pr].substr(12)),this.$=Fe[pr].substr(12);break;case 27:$t.setDiagramTitle(Fe[pr].substr(6)),this.$=Fe[pr].substr(6);break;case 28:this.$=Fe[pr].trim(),$t.setAccTitle(this.$);break;case 29:case 30:this.$=Fe[pr].trim(),$t.setAccDescription(this.$);break;case 31:$t.addSection(Fe[pr].substr(8)),this.$=Fe[pr].substr(8);break;case 33:$t.addTask(Fe[pr-1],Fe[pr]),this.$="task";break;case 34:this.$=Fe[pr-1],$t.setClickEvent(Fe[pr-1],Fe[pr],null);break;case 35:this.$=Fe[pr-2],$t.setClickEvent(Fe[pr-2],Fe[pr-1],Fe[pr]);break;case 36:this.$=Fe[pr-2],$t.setClickEvent(Fe[pr-2],Fe[pr-1],null),$t.setLink(Fe[pr-2],Fe[pr]);break;case 37:this.$=Fe[pr-3],$t.setClickEvent(Fe[pr-3],Fe[pr-2],Fe[pr-1]),$t.setLink(Fe[pr-3],Fe[pr]);break;case 38:this.$=Fe[pr-2],$t.setClickEvent(Fe[pr-2],Fe[pr],null),$t.setLink(Fe[pr-2],Fe[pr-1]);break;case 39:this.$=Fe[pr-3],$t.setClickEvent(Fe[pr-3],Fe[pr-1],Fe[pr]),$t.setLink(Fe[pr-3],Fe[pr-2]);break;case 40:this.$=Fe[pr-1],$t.setLink(Fe[pr-1],Fe[pr]);break;case 41:case 47:this.$=Fe[pr-1]+" "+Fe[pr];break;case 42:case 43:case 45:this.$=Fe[pr-2]+" "+Fe[pr-1]+" "+Fe[pr];break;case 44:case 46:this.$=Fe[pr-3]+" "+Fe[pr-2]+" "+Fe[pr-1]+" "+Fe[pr]}},"anonymous"),table:[{3:1,4:[1,2]},{1:[3]},m(A,[2,2],{5:3}),{6:[1,4],7:5,8:[1,6],9:7,10:[1,8],11:17,12:v,13:b,14:C,15:R,16:Q,17:mt,18:zt,19:18,20:jt,21:Vt,22:Kt,23:xe,24:je,25:Ke,26:fr,27:lr,28:br,29:$e,30:He,31:wr,33:kr,35:Kr,36:_r,37:24,38:Jr,40:Lr},m(A,[2,7],{1:[2,1]}),m(A,[2,3]),{9:36,11:17,12:v,13:b,14:C,15:R,16:Q,17:mt,18:zt,19:18,20:jt,21:Vt,22:Kt,23:xe,24:je,25:Ke,26:fr,27:lr,28:br,29:$e,30:He,31:wr,33:kr,35:Kr,36:_r,37:24,38:Jr,40:Lr},m(A,[2,5]),m(A,[2,6]),m(A,[2,17]),m(A,[2,18]),m(A,[2,19]),m(A,[2,20]),m(A,[2,21]),m(A,[2,22]),m(A,[2,23]),m(A,[2,24]),m(A,[2,25]),m(A,[2,26]),m(A,[2,27]),{32:[1,37]},{34:[1,38]},m(A,[2,30]),m(A,[2,31]),m(A,[2,32]),{39:[1,39]},m(A,[2,8]),m(A,[2,9]),m(A,[2,10]),m(A,[2,11]),m(A,[2,12]),m(A,[2,13]),m(A,[2,14]),m(A,[2,15]),m(A,[2,16]),{41:[1,40],43:[1,41]},m(A,[2,4]),m(A,[2,28]),m(A,[2,29]),m(A,[2,33]),m(A,[2,34],{42:[1,42],43:[1,43]}),m(A,[2,40],{41:[1,44]}),m(A,[2,35],{43:[1,45]}),m(A,[2,36]),m(A,[2,38],{42:[1,46]}),m(A,[2,37]),m(A,[2,39])],defaultActions:{},parseError:(0,L.K2)(function(or,ur){if(!ur.recoverable){var W=new Error(or);throw W.hash=ur,W}this.trace(or)},"parseError"),parse:(0,L.K2)(function(or){var ur=this,W=[0],$t=[],Ye=[null],Fe=[],Tr=this.table,pr="",da=0,Pa=0,Ma=0,ba=Fe.slice.call(arguments,1),sa=Object.create(this.lexer),Sa={yy:{}};for(var ea in this.yy)Object.prototype.hasOwnProperty.call(this.yy,ea)&&(Sa.yy[ea]=this.yy[ea]);sa.setInput(or,Sa.yy),Sa.yy.lexer=sa,Sa.yy.parser=this,typeof sa.yylloc>"u"&&(sa.yylloc={});var Va=sa.yylloc;Fe.push(Va);var gr=sa.options&&sa.options.ranges;function ir(){var Ct;return"number"!=typeof(Ct=$t.pop()||sa.lex()||1)&&(Ct instanceof Array&&(Ct=($t=Ct).pop()),Ct=ur.symbols_[Ct]||Ct),Ct}this.parseError="function"==typeof Sa.yy.parseError?Sa.yy.parseError:Object.getPrototypeOf(this).parseError,(0,L.K2)(function Ua(Ct){W.length=W.length-2*Ct,Ye.length=Ye.length-Ct,Fe.length=Fe.length-Ct},"popStack"),(0,L.K2)(ir,"lex");for(var Oa,Ka,Ja,_a,Ha,hi,Ce,Ne,oa={};;){if(this.defaultActions[Ja=W[W.length-1]]?_a=this.defaultActions[Ja]:((null===Oa||typeof Oa>"u")&&(Oa=ir()),_a=Tr[Ja]&&Tr[Ja][Oa]),typeof _a>"u"||!_a.length||!_a[0]){var at;for(hi in Ne=[],Tr[Ja])this.terminals_[hi]&&hi>2&&Ne.push("'"+this.terminals_[hi]+"'");at=sa.showPosition?"Parse error on line "+(da+1)+":\n"+sa.showPosition()+"\nExpecting "+Ne.join(", ")+", got '"+(this.terminals_[Oa]||Oa)+"'":"Parse error on line "+(da+1)+": Unexpected "+(1==Oa?"end of input":"'"+(this.terminals_[Oa]||Oa)+"'"),this.parseError(at,{text:sa.match,token:this.terminals_[Oa]||Oa,line:sa.yylineno,loc:Va,expected:Ne})}if(_a[0]instanceof Array&&_a.length>1)throw new Error("Parse Error: multiple actions possible at state: "+Ja+", token: "+Oa);switch(_a[0]){case 1:W.push(Oa),Ye.push(sa.yytext),Fe.push(sa.yylloc),W.push(_a[1]),Oa=null,Ka?(Oa=Ka,Ka=null):(Pa=sa.yyleng,pr=sa.yytext,da=sa.yylineno,Va=sa.yylloc,Ma>0&&Ma--);break;case 2:if(oa.$=Ye[Ye.length-(Ce=this.productions_[_a[1]][1])],oa._$={first_line:Fe[Fe.length-(Ce||1)].first_line,last_line:Fe[Fe.length-1].last_line,first_column:Fe[Fe.length-(Ce||1)].first_column,last_column:Fe[Fe.length-1].last_column},gr&&(oa._$.range=[Fe[Fe.length-(Ce||1)].range[0],Fe[Fe.length-1].range[1]]),typeof(Ha=this.performAction.apply(oa,[pr,Pa,da,Sa.yy,_a[1],Ye,Fe].concat(ba)))<"u")return Ha;Ce&&(W=W.slice(0,-1*Ce*2),Ye=Ye.slice(0,-1*Ce),Fe=Fe.slice(0,-1*Ce)),W.push(this.productions_[_a[1]][0]),Ye.push(oa.$),Fe.push(oa._$),W.push(Tr[W[W.length-2]][W[W.length-1]]);break;case 3:return!0}}return!0},"parse")};function jr(){this.yy={}}return ha.lexer=function(){return{EOF:1,parseError:(0,L.K2)(function(ur,W){if(!this.yy.parser)throw new Error(ur);this.yy.parser.parseError(ur,W)},"parseError"),setInput:(0,L.K2)(function(or,ur){return this.yy=ur||this.yy||{},this._input=or,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},"setInput"),input:(0,L.K2)(function(){var or=this._input[0];return this.yytext+=or,this.yyleng++,this.offset++,this.match+=or,this.matched+=or,or.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),or},"input"),unput:(0,L.K2)(function(or){var ur=or.length,W=or.split(/(?:\r\n?|\n)/g);this._input=or+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-ur),this.offset-=ur;var $t=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),W.length-1&&(this.yylineno-=W.length-1);var Ye=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:W?(W.length===$t.length?this.yylloc.first_column:0)+$t[$t.length-W.length].length-W[0].length:this.yylloc.first_column-ur},this.options.ranges&&(this.yylloc.range=[Ye[0],Ye[0]+this.yyleng-ur]),this.yyleng=this.yytext.length,this},"unput"),more:(0,L.K2)(function(){return this._more=!0,this},"more"),reject:(0,L.K2)(function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},"reject"),less:(0,L.K2)(function(or){this.unput(this.match.slice(or))},"less"),pastInput:(0,L.K2)(function(){var or=this.matched.substr(0,this.matched.length-this.match.length);return(or.length>20?"...":"")+or.substr(-20).replace(/\n/g,"")},"pastInput"),upcomingInput:(0,L.K2)(function(){var or=this.match;return or.length<20&&(or+=this._input.substr(0,20-or.length)),(or.substr(0,20)+(or.length>20?"...":"")).replace(/\n/g,"")},"upcomingInput"),showPosition:(0,L.K2)(function(){var or=this.pastInput(),ur=new Array(or.length+1).join("-");return or+this.upcomingInput()+"\n"+ur+"^"},"showPosition"),test_match:(0,L.K2)(function(or,ur){var W,$t,Ye;if(this.options.backtrack_lexer&&(Ye={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(Ye.yylloc.range=this.yylloc.range.slice(0))),($t=or[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=$t.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:$t?$t[$t.length-1].length-$t[$t.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+or[0].length},this.yytext+=or[0],this.match+=or[0],this.matches=or,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(or[0].length),this.matched+=or[0],W=this.performAction.call(this,this.yy,this,ur,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),W)return W;if(this._backtrack){for(var Fe in Ye)this[Fe]=Ye[Fe];return!1}return!1},"test_match"),next:(0,L.K2)(function(){if(this.done)return this.EOF;var or,ur,W,$t;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var Ye=this._currentRules(),Fe=0;Fe<Ye.length;Fe++)if((W=this._input.match(this.rules[Ye[Fe]]))&&(!ur||W[0].length>ur[0].length)){if(ur=W,$t=Fe,this.options.backtrack_lexer){if(!1!==(or=this.test_match(W,Ye[Fe])))return or;if(this._backtrack){ur=!1;continue}return!1}if(!this.options.flex)break}return ur?!1!==(or=this.test_match(ur,Ye[$t]))&&or:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},"next"),lex:(0,L.K2)(function(){return this.next()||this.lex()},"lex"),begin:(0,L.K2)(function(ur){this.conditionStack.push(ur)},"begin"),popState:(0,L.K2)(function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},"popState"),_currentRules:(0,L.K2)(function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},"_currentRules"),topState:(0,L.K2)(function(ur){return(ur=this.conditionStack.length-1-Math.abs(ur||0))>=0?this.conditionStack[ur]:"INITIAL"},"topState"),pushState:(0,L.K2)(function(ur){this.begin(ur)},"pushState"),stateStackSize:(0,L.K2)(function(){return this.conditionStack.length},"stateStackSize"),options:{"case-insensitive":!0},performAction:(0,L.K2)(function(ur,W,$t,Ye){switch($t){case 0:return this.begin("open_directive"),"open_directive";case 1:return this.begin("acc_title"),31;case 2:return this.popState(),"acc_title_value";case 3:return this.begin("acc_descr"),33;case 4:return this.popState(),"acc_descr_value";case 5:this.begin("acc_descr_multiline");break;case 6:case 15:case 18:case 21:case 24:this.popState();break;case 7:return"acc_descr_multiline_value";case 8:case 9:case 10:case 12:case 13:break;case 11:return 10;case 14:this.begin("href");break;case 16:return 43;case 17:this.begin("callbackname");break;case 19:this.popState(),this.begin("callbackargs");break;case 20:return 41;case 22:return 42;case 23:this.begin("click");break;case 25:return 40;case 26:return 4;case 27:return 22;case 28:return 23;case 29:return 24;case 30:return 25;case 31:return 26;case 32:return 28;case 33:return 27;case 34:return 29;case 35:return 12;case 36:return 13;case 37:return 14;case 38:return 15;case 39:return 16;case 40:return 17;case 41:return 18;case 42:return 20;case 43:return 21;case 44:return"date";case 45:return 30;case 46:return"accDescription";case 47:return 36;case 48:return 38;case 49:return 39;case 50:return":";case 51:return 6;case 52:return"INVALID"}},"anonymous"),rules:[/^(?:%%\{)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:%%(?!\{)*[^\n]*)/i,/^(?:[^\}]%%*[^\n]*)/i,/^(?:%%*[^\n]*[\n]*)/i,/^(?:[\n]+)/i,/^(?:\s+)/i,/^(?:%[^\n]*)/i,/^(?:href[\s]+["])/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:call[\s]+)/i,/^(?:\([\s]*\))/i,/^(?:\()/i,/^(?:[^(]*)/i,/^(?:\))/i,/^(?:[^)]*)/i,/^(?:click[\s]+)/i,/^(?:[\s\n])/i,/^(?:[^\s\n]*)/i,/^(?:gantt\b)/i,/^(?:dateFormat\s[^#\n;]+)/i,/^(?:inclusiveEndDates\b)/i,/^(?:topAxis\b)/i,/^(?:axisFormat\s[^#\n;]+)/i,/^(?:tickInterval\s[^#\n;]+)/i,/^(?:includes\s[^#\n;]+)/i,/^(?:excludes\s[^#\n;]+)/i,/^(?:todayMarker\s[^\n;]+)/i,/^(?:weekday\s+monday\b)/i,/^(?:weekday\s+tuesday\b)/i,/^(?:weekday\s+wednesday\b)/i,/^(?:weekday\s+thursday\b)/i,/^(?:weekday\s+friday\b)/i,/^(?:weekday\s+saturday\b)/i,/^(?:weekday\s+sunday\b)/i,/^(?:weekend\s+friday\b)/i,/^(?:weekend\s+saturday\b)/i,/^(?:\d\d\d\d-\d\d-\d\d\b)/i,/^(?:title\s[^\n]+)/i,/^(?:accDescription\s[^#\n;]+)/i,/^(?:section\s[^\n]+)/i,/^(?:[^:\n]+)/i,/^(?::[^#\n;]+)/i,/^(?::)/i,/^(?:$)/i,/^(?:.)/i],conditions:{acc_descr_multiline:{rules:[6,7],inclusive:!1},acc_descr:{rules:[4],inclusive:!1},acc_title:{rules:[2],inclusive:!1},callbackargs:{rules:[21,22],inclusive:!1},callbackname:{rules:[18,19,20],inclusive:!1},href:{rules:[15,16],inclusive:!1},click:{rules:[24,25],inclusive:!1},INITIAL:{rules:[0,1,3,5,8,9,10,11,12,13,14,17,23,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52],inclusive:!0}}}}(),(0,L.K2)(jr,"Parser"),jr.prototype=ha,ha.Parser=jr,new jr}();At.parser=At;var Ge=At;Mt.extend(ut),Mt.extend(G),Mt.extend(w);var Ze,de,bt={friday:5,saturday:6},Gt="",j="",hr=void 0,ze="",vr=[],Wr=[],Br=new Map,Gr=[],aa=[],zr="",Or="",Be=["active","done","crit","milestone","vert"],Ir=[],Xe=!1,z=!1,dt="sunday",Bt="saturday",Se=0,X=(0,L.K2)(function(){Gr=[],aa=[],zr="",Ir=[],Pt=0,Ze=void 0,de=void 0,yr=[],Gt="",j="",Or="",hr=void 0,ze="",vr=[],Wr=[],Xe=!1,z=!1,Se=0,Br=new Map,(0,ie.IU)(),dt="sunday",Bt="saturday"},"clear"),re=(0,L.K2)(function(m){j=m},"setAxisFormat"),S=(0,L.K2)(function(){return j},"getAxisFormat"),ee=(0,L.K2)(function(m){hr=m},"setTickInterval"),Rt=(0,L.K2)(function(){return hr},"getTickInterval"),qt=(0,L.K2)(function(m){ze=m},"setTodayMarker"),V=(0,L.K2)(function(){return ze},"getTodayMarker"),gt=(0,L.K2)(function(m){Gt=m},"setDateFormat"),Y=(0,L.K2)(function(){Xe=!0},"enableInclusiveEndDates"),Nt=(0,L.K2)(function(){return Xe},"endDatesAreInclusive"),St=(0,L.K2)(function(){z=!0},"enableTopAxis"),Ut=(0,L.K2)(function(){return z},"topAxisEnabled"),ye=(0,L.K2)(function(m){Or=m},"setDisplayMode"),le=(0,L.K2)(function(){return Or},"getDisplayMode"),Pe=(0,L.K2)(function(){return Gt},"getDateFormat"),oe=(0,L.K2)(function(m){vr=m.toLowerCase().split(/[\s,]+/)},"setIncludes"),qe=(0,L.K2)(function(){return vr},"getIncludes"),We=(0,L.K2)(function(m){Wr=m.toLowerCase().split(/[\s,]+/)},"setExcludes"),Et=(0,L.K2)(function(){return Wr},"getExcludes"),Tt=(0,L.K2)(function(){return Br},"getLinks"),B=(0,L.K2)(function(m){zr=m,Gr.push(m)},"addSection"),N=(0,L.K2)(function(){return Gr},"getSections"),et=(0,L.K2)(function(){let m=ve(),v=0;for(;!m&&v<10;)m=ve(),v++;return aa=yr},"getTasks"),yt=(0,L.K2)(function(m,A,v,b){const C=m.format(A.trim()),R=m.format("YYYY-MM-DD");return!b.includes(C)&&!b.includes(R)&&(!((!v.includes("weekends")||m.isoWeekday()!==bt[Bt]&&m.isoWeekday()!==bt[Bt]+1)&&!v.includes(m.format("dddd").toLowerCase()))||v.includes(C)||v.includes(R))},"isInvalidDate"),it=(0,L.K2)(function(m){dt=m},"setWeekday"),rt=(0,L.K2)(function(){return dt},"getWeekday"),_t=(0,L.K2)(function(m){Bt=m},"setWeekend"),ht=(0,L.K2)(function(m,A,v,b){if(!v.length||m.manualEndTime)return;let C,R;C=m.startTime instanceof Date?Mt(m.startTime):Mt(m.startTime,A,!0),C=C.add(1,"d"),R=m.endTime instanceof Date?Mt(m.endTime):Mt(m.endTime,A,!0);const[Q,mt]=Ot(C,R,A,v,b);m.endTime=Q.toDate(),m.renderEndTime=mt},"checkTaskDates"),Ot=(0,L.K2)(function(m,A,v,b,C){let R=!1,Q=null;for(;m<=A;)R||(Q=A.toDate()),R=yt(m,v,b,C),R&&(A=A.add(1,"d")),m=m.add(1,"d");return[A,Q]},"fixTaskDates"),H=(0,L.K2)(function(m,A,v){if(v=v.trim(),("x"===A.trim()||"X"===A.trim())&&/^\d+$/.test(v))return new Date(Number(v));const C=/^after\s+(?<ids>[\d\w- ]+)/.exec(v);if(null!==C){let Q=null;for(const zt of C.groups.ids.split(" ")){let jt=we(zt);void 0!==jt&&(!Q||jt.endTime>Q.endTime)&&(Q=jt)}if(Q)return Q.endTime;const mt=new Date;return mt.setHours(0,0,0,0),mt}let R=Mt(v,A.trim(),!0);if(R.isValid())return R.toDate();{L.Rm.debug("Invalid date:"+v),L.Rm.debug("With date format:"+A.trim());const Q=new Date(v);if(void 0===Q||isNaN(Q.getTime())||Q.getFullYear()<-1e4||Q.getFullYear()>1e4)throw new Error("Invalid date:"+v);return Q}},"getStartDate"),ot=(0,L.K2)(function(m){const A=/^(\d+(?:\.\d+)?)([Mdhmswy]|ms)$/.exec(m.trim());return null!==A?[Number.parseFloat(A[1]),A[2]]:[NaN,"ms"]},"parseDuration"),ke=(0,L.K2)(function(m,A,v,b=!1){v=v.trim();const R=/^until\s+(?<ids>[\d\w- ]+)/.exec(v);if(null!==R){let Vt=null;for(const xe of R.groups.ids.split(" ")){let je=we(xe);void 0!==je&&(!Vt||je.startTime<Vt.startTime)&&(Vt=je)}if(Vt)return Vt.startTime;const Kt=new Date;return Kt.setHours(0,0,0,0),Kt}let Q=Mt(v,A.trim(),!0);if(Q.isValid())return b&&(Q=Q.add(1,"d")),Q.toDate();let mt=Mt(m);const[zt,jt]=ot(v);if(!Number.isNaN(zt)){const Vt=mt.add(zt,jt);Vt.isValid()&&(mt=Vt)}return mt.toDate()},"getEndDate"),Pt=0,Zt=(0,L.K2)(function(m){return void 0===m?"task"+(Pt+=1):m},"parseId"),pe=(0,L.K2)(function(m,A){let v;v=":"===A.substr(0,1)?A.substr(1,A.length):A;const b=v.split(","),C={};Yr(b,C,Be);for(let Q=0;Q<b.length;Q++)b[Q]=b[Q].trim();let R="";switch(b.length){case 1:C.id=Zt(),C.startTime=m.endTime,R=b[0];break;case 2:C.id=Zt(),C.startTime=H(void 0,Gt,b[0]),R=b[1];break;case 3:C.id=Zt(b[0]),C.startTime=H(void 0,Gt,b[1]),R=b[2]}return R&&(C.endTime=ke(C.startTime,Gt,R,Xe),C.manualEndTime=Mt(R,"YYYY-MM-DD",!0).isValid(),ht(C,Gt,Wr,vr)),C},"compileData"),Re=(0,L.K2)(function(m,A){let v;v=":"===A.substr(0,1)?A.substr(1,A.length):A;const b=v.split(","),C={};Yr(b,C,Be);for(let R=0;R<b.length;R++)b[R]=b[R].trim();switch(b.length){case 1:C.id=Zt(),C.startTime={type:"prevTaskEnd",id:m},C.endTime={data:b[0]};break;case 2:C.id=Zt(),C.startTime={type:"getStartDate",startData:b[0]},C.endTime={data:b[1]};break;case 3:C.id=Zt(b[0]),C.startTime={type:"getStartDate",startData:b[1]},C.endTime={data:b[2]}}return C},"parseData"),yr=[],mr={},Wt=(0,L.K2)(function(m,A){const v={section:zr,type:zr,processed:!1,manualEndTime:!1,renderEndTime:null,raw:{data:A},task:m,classes:[]},b=Re(de,A);v.raw.startTime=b.startTime,v.raw.endTime=b.endTime,v.id=b.id,v.prevTaskId=de,v.active=b.active,v.done=b.done,v.crit=b.crit,v.milestone=b.milestone,v.vert=b.vert,v.order=Se,Se++;const C=yr.push(v);de=v.id,mr[v.id]=C-1},"addTask"),we=(0,L.K2)(function(m){return yr[mr[m]]},"findTaskById"),sr=(0,L.K2)(function(m,A){const v={section:zr,type:zr,description:m,task:m,classes:[]},b=pe(Ze,A);v.startTime=b.startTime,v.endTime=b.endTime,v.id=b.id,v.active=b.active,v.done=b.done,v.crit=b.crit,v.milestone=b.milestone,v.vert=b.vert,Ze=v,aa.push(v)},"addTaskOrg"),ve=(0,L.K2)(function(){const m=(0,L.K2)(function(v){const b=yr[v];let C="";switch(yr[v].raw.startTime.type){case"prevTaskEnd":{const R=we(b.prevTaskId);b.startTime=R.endTime;break}case"getStartDate":C=H(void 0,Gt,yr[v].raw.startTime.startData),C&&(yr[v].startTime=C)}return yr[v].startTime&&(yr[v].endTime=ke(yr[v].startTime,Gt,yr[v].raw.endTime.data,Xe),yr[v].endTime&&(yr[v].processed=!0,yr[v].manualEndTime=Mt(yr[v].raw.endTime.data,"YYYY-MM-DD",!0).isValid(),ht(yr[v],Gt,Wr,vr))),yr[v].processed},"compileTask");let A=!0;for(const[v,b]of yr.entries())m(v),A=A&&b.processed;return A},"compileTasks"),ce=(0,L.K2)(function(m,A){let v=A;"loose"!==(0,ie.D7)().securityLevel&&(v=(0,D.J)(A)),m.split(",").forEach(function(b){void 0!==we(b)&&(er(b,()=>{window.open(v,"_self")}),Br.set(b,v))}),Ee(m,"clickable")},"setLink"),Ee=(0,L.K2)(function(m,A){m.split(",").forEach(function(v){let b=we(v);void 0!==b&&b.classes.push(A)})},"setClass"),Ae=(0,L.K2)(function(m,A,v){if("loose"!==(0,ie.D7)().securityLevel||void 0===A)return;let b=[];if("string"==typeof v){b=v.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/);for(let R=0;R<b.length;R++){let Q=b[R].trim();Q.startsWith('"')&&Q.endsWith('"')&&(Q=Q.substr(1,Q.length-2)),b[R]=Q}}0===b.length&&b.push(m),void 0!==we(m)&&er(m,()=>{lt._K.runFunc(A,...b)})},"setClickFun"),er=(0,L.K2)(function(m,A){Ir.push(function(){const v=document.querySelector(`[id="${m}"]`);null!==v&&v.addEventListener("click",function(){A()})},function(){const v=document.querySelector(`[id="${m}-text"]`);null!==v&&v.addEventListener("click",function(){A()})})},"pushFun"),Qe=(0,L.K2)(function(m,A,v){m.split(",").forEach(function(b){Ae(b,A,v)}),Ee(m,"clickable")},"setClickEvent"),Dr=(0,L.K2)(function(m){Ir.forEach(function(A){A(m)})},"bindFunctions"),_e={getConfig:(0,L.K2)(()=>(0,ie.D7)().gantt,"getConfig"),clear:X,setDateFormat:gt,getDateFormat:Pe,enableInclusiveEndDates:Y,endDatesAreInclusive:Nt,enableTopAxis:St,topAxisEnabled:Ut,setAxisFormat:re,getAxisFormat:S,setTickInterval:ee,getTickInterval:Rt,setTodayMarker:qt,getTodayMarker:V,setAccTitle:ie.SV,getAccTitle:ie.iN,setDiagramTitle:ie.ke,getDiagramTitle:ie.ab,setDisplayMode:ye,getDisplayMode:le,setAccDescription:ie.EI,getAccDescription:ie.m7,addSection:B,getSections:N,getTasks:et,addTask:Wt,findTaskById:we,addTaskOrg:sr,setIncludes:oe,getIncludes:qe,setExcludes:We,getExcludes:Et,setClickEvent:Qe,setLink:ce,getLinks:Tt,bindFunctions:Dr,parseDuration:ot,isInvalidDate:yt,setWeekday:it,getWeekday:rt,setWeekend:_t};function Yr(m,A,v){let b=!0;for(;b;)b=!1,v.forEach(function(C){const Q=new RegExp("^\\s*"+C+"\\s*$");m[0].match(Q)&&(A[C]=!0,m.shift(1),b=!0)})}(0,L.K2)(Yr,"getTaskTags");var be,nr=(0,L.K2)(function(){L.Rm.debug("Something is calling, setConf, remove the call")},"setConf"),te={monday:Lt.ABi,tuesday:Lt.PGu,wednesday:Lt.GuW,thursday:Lt.Mol,friday:Lt.TUC,saturday:Lt.rGn,sunday:Lt.YPH},ne=(0,L.K2)((m,A)=>{let v=[...m].map(()=>-1/0),b=[...m].sort((R,Q)=>R.startTime-Q.startTime||R.order-Q.order),C=0;for(const R of b)for(let Q=0;Q<v.length;Q++)if(R.startTime>=v[Q]){v[Q]=R.endTime,R.order=Q+A,Q>C&&(C=Q);break}return C},"getMaxIntersections"),M={parser:Ge,db:_e,renderer:{setConf:nr,draw:(0,L.K2)(function(m,A,v,b){const C=(0,ie.D7)().gantt,R=(0,ie.D7)().securityLevel;let Q;"sandbox"===R&&(Q=(0,Lt.Ltv)("#i"+A));const mt=(0,Lt.Ltv)("sandbox"===R?Q.nodes()[0].contentDocument.body:"body"),zt="sandbox"===R?Q.nodes()[0].contentDocument:document,jt=zt.getElementById(A);void 0===(be=jt.parentElement.offsetWidth)&&(be=1200),void 0!==C.useWidth&&(be=C.useWidth);const Vt=b.db.getTasks();let Kt=[];for(const Jr of Vt)Kt.push(Jr.type);Kt=_r(Kt);const xe={};let je=2*C.topPadding;if("compact"===b.db.getDisplayMode()||"compact"===C.displayMode){const Jr={};for(const ha of Vt)void 0===Jr[ha.section]?Jr[ha.section]=[ha]:Jr[ha.section].push(ha);let Lr=0;for(const ha of Object.keys(Jr)){const ia=ne(Jr[ha],Lr)+1;Lr+=ia,je+=ia*(C.barHeight+C.barGap),xe[ha]=ia}}else{je+=Vt.length*(C.barHeight+C.barGap);for(const Jr of Kt)xe[Jr]=Vt.filter(Lr=>Lr.type===Jr).length}jt.setAttribute("viewBox","0 0 "+be+" "+je);const Ke=mt.select(`[id="${A}"]`),fr=(0,Lt.w7C)().domain([(0,Lt.jkA)(Vt,function(Jr){return Jr.startTime}),(0,Lt.T9B)(Vt,function(Jr){return Jr.endTime})]).rangeRound([0,be-C.leftPadding-C.rightPadding]);function lr(Jr,Lr){const ha=Jr.startTime,ia=Lr.startTime;let jr=0;return ha>ia?jr=1:ha<ia&&(jr=-1),jr}function br(Jr,Lr,ha){const ia=C.barHeight,jr=ia+C.barGap,Qr=C.topPadding,or=C.leftPadding;(0,Lt.m4Y)().domain([0,Kt.length]).range(["#00B9FA","#F95002"]).interpolate(Lt.bEH);He(jr,Qr,or,0,ha,Jr,b.db.getExcludes(),b.db.getIncludes()),wr(or,Qr,0,ha),$e(Jr,jr,Qr,or,ia,0,Lr),kr(jr,Qr),Kr(or,0,0,ha)}function $e(Jr,Lr,ha,ia,jr,Qr,or){Jr.sort((Tr,pr)=>Tr.vert===pr.vert?0:Tr.vert?1:-1);const W=[...new Set(Jr.map(Tr=>Tr.order))].map(Tr=>Jr.find(pr=>pr.order===Tr));Ke.append("g").selectAll("rect").data(W).enter().append("rect").attr("x",0).attr("y",function(Tr,pr){return Tr.order*Lr+ha-2}).attr("width",function(){return or-C.rightPadding/2}).attr("height",Lr).attr("class",function(Tr){for(const[pr,da]of Kt.entries())if(Tr.type===da)return"section section"+pr%C.numberSectionStyles;return"section section0"}).enter();const $t=Ke.append("g").selectAll("rect").data(Jr).enter(),Ye=b.db.getLinks();if($t.append("rect").attr("id",function(Tr){return Tr.id}).attr("rx",3).attr("ry",3).attr("x",function(Tr){return Tr.milestone?fr(Tr.startTime)+ia+.5*(fr(Tr.endTime)-fr(Tr.startTime))-.5*jr:fr(Tr.startTime)+ia}).attr("y",function(Tr,pr){return Tr.vert?C.gridLineStartPadding:Tr.order*Lr+ha}).attr("width",function(Tr){return Tr.milestone?jr:Tr.vert?.08*jr:fr(Tr.renderEndTime||Tr.endTime)-fr(Tr.startTime)}).attr("height",function(Tr){return Tr.vert?Vt.length*(C.barHeight+C.barGap)+2*C.barHeight:jr}).attr("transform-origin",function(Tr,pr){return pr=Tr.order,(fr(Tr.startTime)+ia+.5*(fr(Tr.endTime)-fr(Tr.startTime))).toString()+"px "+(pr*Lr+ha+.5*jr).toString()+"px"}).attr("class",function(Tr){let da="";Tr.classes.length>0&&(da=Tr.classes.join(" "));let Pa=0;for(const[Wa,Ia]of Kt.entries())Tr.type===Ia&&(Pa=Wa%C.numberSectionStyles);let Ma="";return Tr.active?Tr.crit?Ma+=" activeCrit":Ma=" active":Tr.done?Ma=Tr.crit?" doneCrit":" done":Tr.crit&&(Ma+=" crit"),0===Ma.length&&(Ma=" task"),Tr.milestone&&(Ma=" milestone "+Ma),Tr.vert&&(Ma=" vert "+Ma),Ma+=Pa,Ma+=" "+da,"task"+Ma}),$t.append("text").attr("id",function(Tr){return Tr.id+"-text"}).text(function(Tr){return Tr.task}).attr("font-size",C.fontSize).attr("x",function(Tr){let pr=fr(Tr.startTime),da=fr(Tr.renderEndTime||Tr.endTime);if(Tr.milestone&&(pr+=.5*(fr(Tr.endTime)-fr(Tr.startTime))-.5*jr,da=pr+jr),Tr.vert)return fr(Tr.startTime)+ia;const Pa=this.getBBox().width;return Pa>da-pr?da+Pa+1.5*C.leftPadding>or?pr+ia-5:da+ia+5:(da-pr)/2+pr+ia}).attr("y",function(Tr,pr){return Tr.vert?C.gridLineStartPadding+Vt.length*(C.barHeight+C.barGap)+60:Tr.order*Lr+C.barHeight/2+(C.fontSize/2-2)+ha}).attr("text-height",jr).attr("class",function(Tr){const pr=fr(Tr.startTime);let da=fr(Tr.endTime);Tr.milestone&&(da=pr+jr);const Pa=this.getBBox().width;let Ma="";Tr.classes.length>0&&(Ma=Tr.classes.join(" "));let Wa=0;for(const[ba,sa]of Kt.entries())Tr.type===sa&&(Wa=ba%C.numberSectionStyles);let Ia="";return Tr.active&&(Ia=Tr.crit?"activeCritText"+Wa:"activeText"+Wa),Tr.done?Ia=Tr.crit?Ia+" doneCritText"+Wa:Ia+" doneText"+Wa:Tr.crit&&(Ia=Ia+" critText"+Wa),Tr.milestone&&(Ia+=" milestoneText"),Tr.vert&&(Ia+=" vertText"),Pa>da-pr?da+Pa+1.5*C.leftPadding>or?Ma+" taskTextOutsideLeft taskTextOutside"+Wa+" "+Ia:Ma+" taskTextOutsideRight taskTextOutside"+Wa+" "+Ia+" width-"+Pa:Ma+" taskText taskText"+Wa+" "+Ia+" width-"+Pa}),"sandbox"===(0,ie.D7)().securityLevel){let Tr;Tr=(0,Lt.Ltv)("#i"+A);const pr=Tr.nodes()[0].contentDocument;$t.filter(function(da){return Ye.has(da.id)}).each(function(da){var Pa=pr.querySelector("#"+da.id),Ma=pr.querySelector("#"+da.id+"-text");const Wa=Pa.parentNode;var Ia=pr.createElement("a");Ia.setAttribute("xlink:href",Ye.get(da.id)),Ia.setAttribute("target","_top"),Wa.appendChild(Ia),Ia.appendChild(Pa),Ia.appendChild(Ma)})}}function He(Jr,Lr,ha,ia,jr,Qr,or,ur){if(0===or.length&&0===ur.length)return;let W,$t;for(const{startTime:Pa,endTime:Ma}of Qr)(void 0===W||Pa<W)&&(W=Pa),(void 0===$t||Ma>$t)&&($t=Ma);if(!W||!$t)return;if(Mt($t).diff(Mt(W),"year")>5)return void L.Rm.warn("The difference between the min and max time is more than 5 years. This will cause performance issues. Skipping drawing exclude days.");const Ye=b.db.getDateFormat(),Fe=[];let Tr=null,pr=Mt(W);for(;pr.valueOf()<=$t;)b.db.isInvalidDate(pr,Ye,or,ur)?Tr?Tr.end=pr:Tr={start:pr,end:pr}:Tr&&(Fe.push(Tr),Tr=null),pr=pr.add(1,"d");Ke.append("g").selectAll("rect").data(Fe).enter().append("rect").attr("id",Pa=>"exclude-"+Pa.start.format("YYYY-MM-DD")).attr("x",Pa=>fr(Pa.start.startOf("day"))+ha).attr("y",C.gridLineStartPadding).attr("width",Pa=>fr(Pa.end.endOf("day"))-fr(Pa.start.startOf("day"))).attr("height",jr-Lr-C.gridLineStartPadding).attr("transform-origin",function(Pa,Ma){return(fr(Pa.start)+ha+.5*(fr(Pa.end)-fr(Pa.start))).toString()+"px "+(Ma*Jr+.5*jr).toString()+"px"}).attr("class","exclude-range")}function wr(Jr,Lr,ha,ia){const jr=b.db.getDateFormat();let or;or=b.db.getAxisFormat()||("D"===jr?"%d":C.axisFormat??"%Y-%m-%d");let ur=(0,Lt.l78)(fr).tickSize(-ia+Lr+C.gridLineStartPadding).tickFormat((0,Lt.DCK)(or));const $t=/^([1-9]\d*)(millisecond|second|minute|hour|day|week|month)$/.exec(b.db.getTickInterval()||C.tickInterval);if(null!==$t){const Ye=$t[1],Fe=$t[2],Tr=b.db.getWeekday()||C.weekday;switch(Fe){case"millisecond":ur.ticks(Lt.t6C.every(Ye));break;case"second":ur.ticks(Lt.ucG.every(Ye));break;case"minute":ur.ticks(Lt.wXd.every(Ye));break;case"hour":ur.ticks(Lt.Agd.every(Ye));break;case"day":ur.ticks(Lt.UAC.every(Ye));break;case"week":ur.ticks(te[Tr].every(Ye));break;case"month":ur.ticks(Lt.Ui6.every(Ye))}}if(Ke.append("g").attr("class","grid").attr("transform","translate("+Jr+", "+(ia-50)+")").call(ur).selectAll("text").style("text-anchor","middle").attr("fill","#000").attr("stroke","none").attr("font-size",10).attr("dy","1em"),b.db.topAxisEnabled()||C.topAxis){let Ye=(0,Lt.tlR)(fr).tickSize(-ia+Lr+C.gridLineStartPadding).tickFormat((0,Lt.DCK)(or));if(null!==$t){const Fe=$t[1],Tr=$t[2],pr=b.db.getWeekday()||C.weekday;switch(Tr){case"millisecond":Ye.ticks(Lt.t6C.every(Fe));break;case"second":Ye.ticks(Lt.ucG.every(Fe));break;case"minute":Ye.ticks(Lt.wXd.every(Fe));break;case"hour":Ye.ticks(Lt.Agd.every(Fe));break;case"day":Ye.ticks(Lt.UAC.every(Fe));break;case"week":Ye.ticks(te[pr].every(Fe));break;case"month":Ye.ticks(Lt.Ui6.every(Fe))}}Ke.append("g").attr("class","grid").attr("transform","translate("+Jr+", "+Lr+")").call(Ye).selectAll("text").style("text-anchor","middle").attr("fill","#000").attr("stroke","none").attr("font-size",10)}}function kr(Jr,Lr){let ha=0;const ia=Object.keys(xe).map(jr=>[jr,xe[jr]]);Ke.append("g").selectAll("text").data(ia).enter().append(function(jr){const Qr=jr[0].split(ie.Y2.lineBreakRegex),or=-(Qr.length-1)/2,ur=zt.createElementNS("http://www.w3.org/2000/svg","text");ur.setAttribute("dy",or+"em");for(const[W,$t]of Qr.entries()){const Ye=zt.createElementNS("http://www.w3.org/2000/svg","tspan");Ye.setAttribute("alignment-baseline","central"),Ye.setAttribute("x","10"),W>0&&Ye.setAttribute("dy","1em"),Ye.textContent=$t,ur.appendChild(Ye)}return ur}).attr("x",10).attr("y",function(jr,Qr){if(!(Qr>0))return jr[1]*Jr/2+Lr;for(let or=0;or<Qr;or++)return ha+=ia[Qr-1][1],jr[1]*Jr/2+ha*Jr+Lr}).attr("font-size",C.sectionFontSize).attr("class",function(jr){for(const[Qr,or]of Kt.entries())if(jr[0]===or)return"sectionTitle sectionTitle"+Qr%C.numberSectionStyles;return"sectionTitle"})}function Kr(Jr,Lr,ha,ia){const jr=b.db.getTodayMarker();if("off"===jr)return;const Qr=Ke.append("g").attr("class","today"),or=new Date,ur=Qr.append("line");ur.attr("x1",fr(or)+Jr).attr("x2",fr(or)+Jr).attr("y1",C.titleTopMargin).attr("y2",ia-C.titleTopMargin).attr("class","today"),""!==jr&&ur.attr("style",jr.replace(/,/g,";"))}function _r(Jr){const Lr={},ha=[];for(let ia=0,jr=Jr.length;ia<jr;++ia)Object.prototype.hasOwnProperty.call(Lr,Jr[ia])||(Lr[Jr[ia]]=!0,ha.push(Jr[ia]));return ha}(0,L.K2)(lr,"taskCompare"),Vt.sort(lr),br(Vt,be,je),(0,ie.a$)(Ke,je,be,C.useMaxWidth),Ke.append("text").text(b.db.getDiagramTitle()).attr("x",be/2).attr("y",C.titleTopMargin).attr("class","titleText"),(0,L.K2)(br,"makeGantt"),(0,L.K2)($e,"drawRects"),(0,L.K2)(He,"drawExcludeDays"),(0,L.K2)(wr,"makeGrid"),(0,L.K2)(kr,"vertLabels"),(0,L.K2)(Kr,"drawToday"),(0,L.K2)(_r,"checkUnique")},"draw")},styles:(0,L.K2)(m=>`\n  .mermaid-main-font {\n        font-family: ${m.fontFamily};\n  }\n\n  .exclude-range {\n    fill: ${m.excludeBkgColor};\n  }\n\n  .section {\n    stroke: none;\n    opacity: 0.2;\n  }\n\n  .section0 {\n    fill: ${m.sectionBkgColor};\n  }\n\n  .section2 {\n    fill: ${m.sectionBkgColor2};\n  }\n\n  .section1,\n  .section3 {\n    fill: ${m.altSectionBkgColor};\n    opacity: 0.2;\n  }\n\n  .sectionTitle0 {\n    fill: ${m.titleColor};\n  }\n\n  .sectionTitle1 {\n    fill: ${m.titleColor};\n  }\n\n  .sectionTitle2 {\n    fill: ${m.titleColor};\n  }\n\n  .sectionTitle3 {\n    fill: ${m.titleColor};\n  }\n\n  .sectionTitle {\n    text-anchor: start;\n    font-family: ${m.fontFamily};\n  }\n\n\n  /* Grid and axis */\n\n  .grid .tick {\n    stroke: ${m.gridColor};\n    opacity: 0.8;\n    shape-rendering: crispEdges;\n  }\n\n  .grid .tick text {\n    font-family: ${m.fontFamily};\n    fill: ${m.textColor};\n  }\n\n  .grid path {\n    stroke-width: 0;\n  }\n\n\n  /* Today line */\n\n  .today {\n    fill: none;\n    stroke: ${m.todayLineColor};\n    stroke-width: 2px;\n  }\n\n\n  /* Task styling */\n\n  /* Default task */\n\n  .task {\n    stroke-width: 2;\n  }\n\n  .taskText {\n    text-anchor: middle;\n    font-family: ${m.fontFamily};\n  }\n\n  .taskTextOutsideRight {\n    fill: ${m.taskTextDarkColor};\n    text-anchor: start;\n    font-family: ${m.fontFamily};\n  }\n\n  .taskTextOutsideLeft {\n    fill: ${m.taskTextDarkColor};\n    text-anchor: end;\n  }\n\n\n  /* Special case clickable */\n\n  .task.clickable {\n    cursor: pointer;\n  }\n\n  .taskText.clickable {\n    cursor: pointer;\n    fill: ${m.taskTextClickableColor} !important;\n    font-weight: bold;\n  }\n\n  .taskTextOutsideLeft.clickable {\n    cursor: pointer;\n    fill: ${m.taskTextClickableColor} !important;\n    font-weight: bold;\n  }\n\n  .taskTextOutsideRight.clickable {\n    cursor: pointer;\n    fill: ${m.taskTextClickableColor} !important;\n    font-weight: bold;\n  }\n\n\n  /* Specific task settings for the sections*/\n\n  .taskText0,\n  .taskText1,\n  .taskText2,\n  .taskText3 {\n    fill: ${m.taskTextColor};\n  }\n\n  .task0,\n  .task1,\n  .task2,\n  .task3 {\n    fill: ${m.taskBkgColor};\n    stroke: ${m.taskBorderColor};\n  }\n\n  .taskTextOutside0,\n  .taskTextOutside2\n  {\n    fill: ${m.taskTextOutsideColor};\n  }\n\n  .taskTextOutside1,\n  .taskTextOutside3 {\n    fill: ${m.taskTextOutsideColor};\n  }\n\n\n  /* Active task */\n\n  .active0,\n  .active1,\n  .active2,\n  .active3 {\n    fill: ${m.activeTaskBkgColor};\n    stroke: ${m.activeTaskBorderColor};\n  }\n\n  .activeText0,\n  .activeText1,\n  .activeText2,\n  .activeText3 {\n    fill: ${m.taskTextDarkColor} !important;\n  }\n\n\n  /* Completed task */\n\n  .done0,\n  .done1,\n  .done2,\n  .done3 {\n    stroke: ${m.doneTaskBorderColor};\n    fill: ${m.doneTaskBkgColor};\n    stroke-width: 2;\n  }\n\n  .doneText0,\n  .doneText1,\n  .doneText2,\n  .doneText3 {\n    fill: ${m.taskTextDarkColor} !important;\n  }\n\n\n  /* Tasks on the critical line */\n\n  .crit0,\n  .crit1,\n  .crit2,\n  .crit3 {\n    stroke: ${m.critBorderColor};\n    fill: ${m.critBkgColor};\n    stroke-width: 2;\n  }\n\n  .activeCrit0,\n  .activeCrit1,\n  .activeCrit2,\n  .activeCrit3 {\n    stroke: ${m.critBorderColor};\n    fill: ${m.activeTaskBkgColor};\n    stroke-width: 2;\n  }\n\n  .doneCrit0,\n  .doneCrit1,\n  .doneCrit2,\n  .doneCrit3 {\n    stroke: ${m.critBorderColor};\n    fill: ${m.doneTaskBkgColor};\n    stroke-width: 2;\n    cursor: pointer;\n    shape-rendering: crispEdges;\n  }\n\n  .milestone {\n    transform: rotate(45deg) scale(0.8,0.8);\n  }\n\n  .milestoneText {\n    font-style: italic;\n  }\n  .doneCritText0,\n  .doneCritText1,\n  .doneCritText2,\n  .doneCritText3 {\n    fill: ${m.taskTextDarkColor} !important;\n  }\n\n  .vert {\n    stroke: ${m.vertLineColor};\n  }\n\n  .vertText {\n    font-size: 15px;\n    text-anchor: middle;\n    fill: ${m.vertLineColor} !important;\n  }\n\n  .activeCritText0,\n  .activeCritText1,\n  .activeCritText2,\n  .activeCritText3 {\n    fill: ${m.taskTextDarkColor} !important;\n  }\n\n  .titleText {\n    text-anchor: middle;\n    font-size: 18px;\n    fill: ${m.titleColor||m.textColor};\n    font-family: ${m.fontFamily};\n  }\n`,"getStyles")}},79006:(ri,Er,P)=>{"use strict";P.d(Er,{$i:()=>ye,B6:()=>et,C0:()=>ze,Ch:()=>Wr,D7:()=>Kr,DB:()=>j,Dl:()=>g,EI:()=>lr,EJ:()=>Gt,Gs:()=>or,H$:()=>V,H1:()=>pe,ID:()=>Ae,IU:()=>je,J$:()=>aa,Js:()=>Qr,ME:()=>Jr,Nk:()=>it,P$:()=>re,Q2:()=>yt,QO:()=>_e,SV:()=>Ke,TM:()=>Zt,UI:()=>Ut,UU:()=>B,Wi:()=>ar,Wt:()=>zt,XV:()=>_r,Xd:()=>Br,Y2:()=>M,_3:()=>er,a$:()=>v,ab:()=>He,cL:()=>Ot,dj:()=>E,hH:()=>Or,iN:()=>fr,jZ:()=>Wt,ke:()=>$e,m7:()=>br,mW:()=>vr,mj:()=>ha,oB:()=>Lr,ot:()=>b,sb:()=>Pe,tM:()=>mt,wZ:()=>N,xA:()=>ht,zj:()=>rt});var ut,G,w,Lt,At,Ge,bt,qe,lt=P(89204),ie=P(45027),L=P(32303),D=P(79687),Mt=P(99708),Gt=/^-{3}\s*[\n\r](.*?)[\n\r]-{3}\s*[\n\r]+/s,j=/%{2}{\s*(?:(\w+)\s*:|(\w+))\s*(?:(\w+)|((?:(?!}%{2}).|\r?\n)*))?\s*(?:}%{2})?/gi,hr=/\s*%%.*\n/gm,ze=(class extends Error{constructor(W){super(W),this.name="UnknownDiagramError"}static#t=ut=()=>((0,ie.A)(this,"UnknownDiagramError"),(0,L.K2)(this,"UnknownDiagramError"),this)},ut()),vr={},Wr=(0,L.K2)(function(W,$t){W=W.replace(Gt,"").replace(j,"").replace(hr,"\n");for(const[Ye,{detector:Fe}]of Object.entries(vr))if(Fe(W,$t))return Ye;throw new ze(`No diagram type detected matching given configuration for text: ${W}`)},"detectType"),Br=(0,L.K2)((...W)=>{for(const{id:$t,detector:Ye,loader:Fe}of W)Gr($t,Ye,Fe)},"registerLazyLoadedDiagrams"),Gr=(0,L.K2)((W,$t,Ye)=>{vr[W]&&L.Rm.warn(`Detector with key ${W} already exists. Overwriting.`),vr[W]={detector:$t,loader:Ye},L.Rm.debug(`Detector with key ${W} added${Ye?" with loader":""}`)},"addDetector"),aa=(0,L.K2)(W=>vr[W].loader,"getDiagramLoader"),zr=(0,L.K2)((W,$t,{depth:Ye=2,clobber:Fe=!1}={})=>{const Tr={depth:Ye,clobber:Fe};return Array.isArray($t)&&!Array.isArray(W)?($t.forEach(pr=>zr(W,pr,Tr)),W):Array.isArray($t)&&Array.isArray(W)?($t.forEach(pr=>{W.includes(pr)||W.push(pr)}),W):void 0===W||Ye<=0?null!=W&&"object"==typeof W&&"object"==typeof $t?Object.assign(W,$t):$t:(void 0!==$t&&"object"==typeof W&&"object"==typeof $t&&Object.keys($t).forEach(pr=>{"object"!=typeof $t[pr]||void 0!==W[pr]&&"object"!=typeof W[pr]?(Fe||"object"!=typeof W[pr]&&"object"!=typeof $t[pr])&&(W[pr]=$t[pr]):(void 0===W[pr]&&(W[pr]=Array.isArray($t[pr])?[]:{}),W[pr]=zr(W[pr],$t[pr],{depth:Ye-1,clobber:Fe}))}),W)},"assignWithDepth"),Or=zr,Be="#ffffff",Ir="#f2f2f2",Xe=(0,L.K2)((W,$t)=>(0,D.Ai)(W,$t?{s:-40,l:10}:{s:-40,l:-10}),"mkBorder"),z=(class{constructor(){this.background="#f4f4f4",this.primaryColor="#fff4dd",this.noteBkgColor="#fff5ad",this.noteTextColor="#333",this.THEME_COLOR_LIMIT=12,this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px"}updateColors(){if(this.primaryTextColor=this.primaryTextColor||(this.darkMode?"#eee":"#333"),this.secondaryColor=this.secondaryColor||(0,D.Ai)(this.primaryColor,{h:-120}),this.tertiaryColor=this.tertiaryColor||(0,D.Ai)(this.primaryColor,{h:180,l:5}),this.primaryBorderColor=this.primaryBorderColor||Xe(this.primaryColor,this.darkMode),this.secondaryBorderColor=this.secondaryBorderColor||Xe(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=this.tertiaryBorderColor||Xe(this.tertiaryColor,this.darkMode),this.noteBorderColor=this.noteBorderColor||Xe(this.noteBkgColor,this.darkMode),this.noteBkgColor=this.noteBkgColor||"#fff5ad",this.noteTextColor=this.noteTextColor||"#333",this.secondaryTextColor=this.secondaryTextColor||(0,D.B8)(this.secondaryColor),this.tertiaryTextColor=this.tertiaryTextColor||(0,D.B8)(this.tertiaryColor),this.lineColor=this.lineColor||(0,D.B8)(this.background),this.arrowheadColor=this.arrowheadColor||(0,D.B8)(this.background),this.textColor=this.textColor||this.primaryTextColor,this.border2=this.border2||this.tertiaryBorderColor,this.nodeBkg=this.nodeBkg||this.primaryColor,this.mainBkg=this.mainBkg||this.primaryColor,this.nodeBorder=this.nodeBorder||this.primaryBorderColor,this.clusterBkg=this.clusterBkg||this.tertiaryColor,this.clusterBorder=this.clusterBorder||this.tertiaryBorderColor,this.defaultLinkColor=this.defaultLinkColor||this.lineColor,this.titleColor=this.titleColor||this.tertiaryTextColor,this.edgeLabelBackground=this.edgeLabelBackground||(this.darkMode?(0,D.e$)(this.secondaryColor,30):this.secondaryColor),this.nodeTextColor=this.nodeTextColor||this.primaryTextColor,this.actorBorder=this.actorBorder||this.primaryBorderColor,this.actorBkg=this.actorBkg||this.mainBkg,this.actorTextColor=this.actorTextColor||this.primaryTextColor,this.actorLineColor=this.actorLineColor||this.actorBorder,this.labelBoxBkgColor=this.labelBoxBkgColor||this.actorBkg,this.signalColor=this.signalColor||this.textColor,this.signalTextColor=this.signalTextColor||this.textColor,this.labelBoxBorderColor=this.labelBoxBorderColor||this.actorBorder,this.labelTextColor=this.labelTextColor||this.actorTextColor,this.loopTextColor=this.loopTextColor||this.actorTextColor,this.activationBorderColor=this.activationBorderColor||(0,D.e$)(this.secondaryColor,10),this.activationBkgColor=this.activationBkgColor||this.secondaryColor,this.sequenceNumberColor=this.sequenceNumberColor||(0,D.B8)(this.lineColor),this.sectionBkgColor=this.sectionBkgColor||this.tertiaryColor,this.altSectionBkgColor=this.altSectionBkgColor||"white",this.sectionBkgColor=this.sectionBkgColor||this.secondaryColor,this.sectionBkgColor2=this.sectionBkgColor2||this.primaryColor,this.excludeBkgColor=this.excludeBkgColor||"#eeeeee",this.taskBorderColor=this.taskBorderColor||this.primaryBorderColor,this.taskBkgColor=this.taskBkgColor||this.primaryColor,this.activeTaskBorderColor=this.activeTaskBorderColor||this.primaryColor,this.activeTaskBkgColor=this.activeTaskBkgColor||(0,D.a)(this.primaryColor,23),this.gridColor=this.gridColor||"lightgrey",this.doneTaskBkgColor=this.doneTaskBkgColor||"lightgrey",this.doneTaskBorderColor=this.doneTaskBorderColor||"grey",this.critBorderColor=this.critBorderColor||"#ff8888",this.critBkgColor=this.critBkgColor||"red",this.todayLineColor=this.todayLineColor||"red",this.vertLineColor=this.vertLineColor||"navy",this.taskTextColor=this.taskTextColor||this.textColor,this.taskTextOutsideColor=this.taskTextOutsideColor||this.textColor,this.taskTextLightColor=this.taskTextLightColor||this.textColor,this.taskTextColor=this.taskTextColor||this.primaryTextColor,this.taskTextDarkColor=this.taskTextDarkColor||this.textColor,this.taskTextClickableColor=this.taskTextClickableColor||"#003163",this.personBorder=this.personBorder||this.primaryBorderColor,this.personBkg=this.personBkg||this.mainBkg,this.darkMode?(this.rowOdd=this.rowOdd||(0,D.e$)(this.mainBkg,5)||"#ffffff",this.rowEven=this.rowEven||(0,D.e$)(this.mainBkg,10)):(this.rowOdd=this.rowOdd||(0,D.a)(this.mainBkg,75)||"#ffffff",this.rowEven=this.rowEven||(0,D.a)(this.mainBkg,5)),this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||this.tertiaryColor,this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.nodeBorder,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.specialStateColor=this.lineColor,this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||(0,D.Ai)(this.primaryColor,{h:30}),this.cScale4=this.cScale4||(0,D.Ai)(this.primaryColor,{h:60}),this.cScale5=this.cScale5||(0,D.Ai)(this.primaryColor,{h:90}),this.cScale6=this.cScale6||(0,D.Ai)(this.primaryColor,{h:120}),this.cScale7=this.cScale7||(0,D.Ai)(this.primaryColor,{h:150}),this.cScale8=this.cScale8||(0,D.Ai)(this.primaryColor,{h:210,l:150}),this.cScale9=this.cScale9||(0,D.Ai)(this.primaryColor,{h:270}),this.cScale10=this.cScale10||(0,D.Ai)(this.primaryColor,{h:300}),this.cScale11=this.cScale11||(0,D.Ai)(this.primaryColor,{h:330}),this.darkMode)for(let $t=0;$t<this.THEME_COLOR_LIMIT;$t++)this["cScale"+$t]=(0,D.e$)(this["cScale"+$t],75);else for(let $t=0;$t<this.THEME_COLOR_LIMIT;$t++)this["cScale"+$t]=(0,D.e$)(this["cScale"+$t],25);for(let $t=0;$t<this.THEME_COLOR_LIMIT;$t++)this["cScaleInv"+$t]=this["cScaleInv"+$t]||(0,D.B8)(this["cScale"+$t]);for(let $t=0;$t<this.THEME_COLOR_LIMIT;$t++)this["cScalePeer"+$t]=this.darkMode?this["cScalePeer"+$t]||(0,D.a)(this["cScale"+$t],10):this["cScalePeer"+$t]||(0,D.e$)(this["cScale"+$t],10);this.scaleLabelColor=this.scaleLabelColor||this.labelTextColor;for(let $t=0;$t<this.THEME_COLOR_LIMIT;$t++)this["cScaleLabel"+$t]=this["cScaleLabel"+$t]||this.scaleLabelColor;const W=this.darkMode?-4:-1;for(let $t=0;$t<5;$t++)this["surface"+$t]=this["surface"+$t]||(0,D.Ai)(this.mainBkg,{h:180,s:-15,l:W*(5+3*$t)}),this["surfacePeer"+$t]=this["surfacePeer"+$t]||(0,D.Ai)(this.mainBkg,{h:180,s:-15,l:W*(8+3*$t)});this.classText=this.classText||this.textColor,this.fillType0=this.fillType0||this.primaryColor,this.fillType1=this.fillType1||this.secondaryColor,this.fillType2=this.fillType2||(0,D.Ai)(this.primaryColor,{h:64}),this.fillType3=this.fillType3||(0,D.Ai)(this.secondaryColor,{h:64}),this.fillType4=this.fillType4||(0,D.Ai)(this.primaryColor,{h:-64}),this.fillType5=this.fillType5||(0,D.Ai)(this.secondaryColor,{h:-64}),this.fillType6=this.fillType6||(0,D.Ai)(this.primaryColor,{h:128}),this.fillType7=this.fillType7||(0,D.Ai)(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||this.tertiaryColor,this.pie4=this.pie4||(0,D.Ai)(this.primaryColor,{l:-10}),this.pie5=this.pie5||(0,D.Ai)(this.secondaryColor,{l:-10}),this.pie6=this.pie6||(0,D.Ai)(this.tertiaryColor,{l:-10}),this.pie7=this.pie7||(0,D.Ai)(this.primaryColor,{h:60,l:-10}),this.pie8=this.pie8||(0,D.Ai)(this.primaryColor,{h:-60,l:-10}),this.pie9=this.pie9||(0,D.Ai)(this.primaryColor,{h:120,l:0}),this.pie10=this.pie10||(0,D.Ai)(this.primaryColor,{h:60,l:-20}),this.pie11=this.pie11||(0,D.Ai)(this.primaryColor,{h:-60,l:-20}),this.pie12=this.pie12||(0,D.Ai)(this.primaryColor,{h:120,l:-10}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.radar={axisColor:this.radar?.axisColor||this.lineColor,axisStrokeWidth:this.radar?.axisStrokeWidth||2,axisLabelFontSize:this.radar?.axisLabelFontSize||12,curveOpacity:this.radar?.curveOpacity||.5,curveStrokeWidth:this.radar?.curveStrokeWidth||2,graticuleColor:this.radar?.graticuleColor||"#DEDEDE",graticuleStrokeWidth:this.radar?.graticuleStrokeWidth||1,graticuleOpacity:this.radar?.graticuleOpacity||.3,legendBoxSize:this.radar?.legendBoxSize||12,legendFontSize:this.radar?.legendFontSize||12},this.archEdgeColor=this.archEdgeColor||"#777",this.archEdgeArrowColor=this.archEdgeArrowColor||"#777",this.archEdgeWidth=this.archEdgeWidth||"3",this.archGroupBorderColor=this.archGroupBorderColor||"#000",this.archGroupBorderWidth=this.archGroupBorderWidth||"2px",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||(0,D.Ai)(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||(0,D.Ai)(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||(0,D.Ai)(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||(0,D.Ai)(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||(0,D.Ai)(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||(0,D.Ai)(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||(0,D.HD)(this.quadrant1Fill)?(0,D.a)(this.quadrant1Fill):(0,D.e$)(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:this.xyChart?.backgroundColor||this.background,titleColor:this.xyChart?.titleColor||this.primaryTextColor,xAxisTitleColor:this.xyChart?.xAxisTitleColor||this.primaryTextColor,xAxisLabelColor:this.xyChart?.xAxisLabelColor||this.primaryTextColor,xAxisTickColor:this.xyChart?.xAxisTickColor||this.primaryTextColor,xAxisLineColor:this.xyChart?.xAxisLineColor||this.primaryTextColor,yAxisTitleColor:this.xyChart?.yAxisTitleColor||this.primaryTextColor,yAxisLabelColor:this.xyChart?.yAxisLabelColor||this.primaryTextColor,yAxisTickColor:this.xyChart?.yAxisTickColor||this.primaryTextColor,yAxisLineColor:this.xyChart?.yAxisLineColor||this.primaryTextColor,plotColorPalette:this.xyChart?.plotColorPalette||"#FFF4DD,#FFD8B1,#FFA07A,#ECEFF1,#D6DBDF,#C3E0A8,#FFB6A4,#FFD74D,#738FA7,#FFFFF0"},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||(this.darkMode?(0,D.e$)(this.secondaryColor,30):this.secondaryColor),this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||(0,D.Ai)(this.primaryColor,{h:-30}),this.git4=this.git4||(0,D.Ai)(this.primaryColor,{h:-60}),this.git5=this.git5||(0,D.Ai)(this.primaryColor,{h:-90}),this.git6=this.git6||(0,D.Ai)(this.primaryColor,{h:60}),this.git7=this.git7||(0,D.Ai)(this.primaryColor,{h:120}),this.darkMode?(this.git0=(0,D.a)(this.git0,25),this.git1=(0,D.a)(this.git1,25),this.git2=(0,D.a)(this.git2,25),this.git3=(0,D.a)(this.git3,25),this.git4=(0,D.a)(this.git4,25),this.git5=(0,D.a)(this.git5,25),this.git6=(0,D.a)(this.git6,25),this.git7=(0,D.a)(this.git7,25)):(this.git0=(0,D.e$)(this.git0,25),this.git1=(0,D.e$)(this.git1,25),this.git2=(0,D.e$)(this.git2,25),this.git3=(0,D.e$)(this.git3,25),this.git4=(0,D.e$)(this.git4,25),this.git5=(0,D.e$)(this.git5,25),this.git6=(0,D.e$)(this.git6,25),this.git7=(0,D.e$)(this.git7,25)),this.gitInv0=this.gitInv0||(0,D.B8)(this.git0),this.gitInv1=this.gitInv1||(0,D.B8)(this.git1),this.gitInv2=this.gitInv2||(0,D.B8)(this.git2),this.gitInv3=this.gitInv3||(0,D.B8)(this.git3),this.gitInv4=this.gitInv4||(0,D.B8)(this.git4),this.gitInv5=this.gitInv5||(0,D.B8)(this.git5),this.gitInv6=this.gitInv6||(0,D.B8)(this.git6),this.gitInv7=this.gitInv7||(0,D.B8)(this.git7),this.branchLabelColor=this.branchLabelColor||(this.darkMode?"black":this.labelTextColor),this.gitBranchLabel0=this.gitBranchLabel0||this.branchLabelColor,this.gitBranchLabel1=this.gitBranchLabel1||this.branchLabelColor,this.gitBranchLabel2=this.gitBranchLabel2||this.branchLabelColor,this.gitBranchLabel3=this.gitBranchLabel3||this.branchLabelColor,this.gitBranchLabel4=this.gitBranchLabel4||this.branchLabelColor,this.gitBranchLabel5=this.gitBranchLabel5||this.branchLabelColor,this.gitBranchLabel6=this.gitBranchLabel6||this.branchLabelColor,this.gitBranchLabel7=this.gitBranchLabel7||this.branchLabelColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||Be,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||Ir}calculate(W){if("object"!=typeof W)return void this.updateColors();const $t=Object.keys(W);$t.forEach(Ye=>{this[Ye]=W[Ye]}),this.updateColors(),$t.forEach(Ye=>{this[Ye]=W[Ye]})}static#t=G=()=>((0,ie.A)(this,"Theme"),(0,L.K2)(this,"Theme"),this)},G()),dt=(0,L.K2)(W=>{const $t=new z;return $t.calculate(W),$t},"getThemeVariables"),Bt=(class{constructor(){this.background="#333",this.primaryColor="#1f2020",this.secondaryColor=(0,D.a)(this.primaryColor,16),this.tertiaryColor=(0,D.Ai)(this.primaryColor,{h:-160}),this.primaryBorderColor=(0,D.B8)(this.background),this.secondaryBorderColor=Xe(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=Xe(this.tertiaryColor,this.darkMode),this.primaryTextColor=(0,D.B8)(this.primaryColor),this.secondaryTextColor=(0,D.B8)(this.secondaryColor),this.tertiaryTextColor=(0,D.B8)(this.tertiaryColor),this.lineColor=(0,D.B8)(this.background),this.textColor=(0,D.B8)(this.background),this.mainBkg="#1f2020",this.secondBkg="calculated",this.mainContrastColor="lightgrey",this.darkTextColor=(0,D.a)((0,D.B8)("#323D47"),10),this.lineColor="calculated",this.border1="#ccc",this.border2=(0,D.B3)(255,255,255,.25),this.arrowheadColor="calculated",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.labelBackground="#181818",this.textColor="#ccc",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="#F9FFFE",this.edgeLabelBackground="calculated",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="calculated",this.actorLineColor="calculated",this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="calculated",this.activationBkgColor="calculated",this.sequenceNumberColor="black",this.sectionBkgColor=(0,D.e$)("#EAE8D9",30),this.altSectionBkgColor="calculated",this.sectionBkgColor2="#EAE8D9",this.excludeBkgColor=(0,D.e$)(this.sectionBkgColor,10),this.taskBorderColor=(0,D.B3)(255,255,255,70),this.taskBkgColor="calculated",this.taskTextColor="calculated",this.taskTextLightColor="calculated",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor=(0,D.B3)(255,255,255,50),this.activeTaskBkgColor="#81B1DB",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="grey",this.critBorderColor="#E83737",this.critBkgColor="#E83737",this.taskTextDarkColor="calculated",this.todayLineColor="#DB5757",this.vertLineColor="#00BFFF",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.archEdgeColor="calculated",this.archEdgeArrowColor="calculated",this.archEdgeWidth="3",this.archGroupBorderColor=this.primaryBorderColor,this.archGroupBorderWidth="2px",this.rowOdd=this.rowOdd||(0,D.a)(this.mainBkg,5)||"#ffffff",this.rowEven=this.rowEven||(0,D.e$)(this.mainBkg,10),this.labelColor="calculated",this.errorBkgColor="#a44141",this.errorTextColor="#ddd"}updateColors(){this.secondBkg=(0,D.a)(this.mainBkg,16),this.lineColor=this.mainContrastColor,this.arrowheadColor=this.mainContrastColor,this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.edgeLabelBackground=(0,D.a)(this.labelBackground,25),this.actorBorder=this.border1,this.actorBkg=this.mainBkg,this.actorTextColor=this.mainContrastColor,this.actorLineColor=this.actorBorder,this.signalColor=this.mainContrastColor,this.signalTextColor=this.mainContrastColor,this.labelBoxBkgColor=this.actorBkg,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.mainContrastColor,this.loopTextColor=this.mainContrastColor,this.noteBorderColor=this.secondaryBorderColor,this.noteBkgColor=this.secondBkg,this.noteTextColor=this.secondaryTextColor,this.activationBorderColor=this.border1,this.activationBkgColor=this.secondBkg,this.altSectionBkgColor=this.background,this.taskBkgColor=(0,D.a)(this.mainBkg,23),this.taskTextColor=this.darkTextColor,this.taskTextLightColor=this.mainContrastColor,this.taskTextOutsideColor=this.taskTextLightColor,this.gridColor=this.mainContrastColor,this.doneTaskBkgColor=this.mainContrastColor,this.taskTextDarkColor=this.darkTextColor,this.archEdgeColor=this.lineColor,this.archEdgeArrowColor=this.lineColor,this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#555",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.primaryBorderColor,this.specialStateColor="#f4f4f4",this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=(0,D.Ai)(this.primaryColor,{h:64}),this.fillType3=(0,D.Ai)(this.secondaryColor,{h:64}),this.fillType4=(0,D.Ai)(this.primaryColor,{h:-64}),this.fillType5=(0,D.Ai)(this.secondaryColor,{h:-64}),this.fillType6=(0,D.Ai)(this.primaryColor,{h:128}),this.fillType7=(0,D.Ai)(this.secondaryColor,{h:128}),this.cScale1=this.cScale1||"#0b0000",this.cScale2=this.cScale2||"#4d1037",this.cScale3=this.cScale3||"#3f5258",this.cScale4=this.cScale4||"#4f2f1b",this.cScale5=this.cScale5||"#6e0a0a",this.cScale6=this.cScale6||"#3b0048",this.cScale7=this.cScale7||"#995a01",this.cScale8=this.cScale8||"#154706",this.cScale9=this.cScale9||"#161722",this.cScale10=this.cScale10||"#00296f",this.cScale11=this.cScale11||"#01629c",this.cScale12=this.cScale12||"#010029",this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||(0,D.Ai)(this.primaryColor,{h:30}),this.cScale4=this.cScale4||(0,D.Ai)(this.primaryColor,{h:60}),this.cScale5=this.cScale5||(0,D.Ai)(this.primaryColor,{h:90}),this.cScale6=this.cScale6||(0,D.Ai)(this.primaryColor,{h:120}),this.cScale7=this.cScale7||(0,D.Ai)(this.primaryColor,{h:150}),this.cScale8=this.cScale8||(0,D.Ai)(this.primaryColor,{h:210}),this.cScale9=this.cScale9||(0,D.Ai)(this.primaryColor,{h:270}),this.cScale10=this.cScale10||(0,D.Ai)(this.primaryColor,{h:300}),this.cScale11=this.cScale11||(0,D.Ai)(this.primaryColor,{h:330});for(let W=0;W<this.THEME_COLOR_LIMIT;W++)this["cScaleInv"+W]=this["cScaleInv"+W]||(0,D.B8)(this["cScale"+W]);for(let W=0;W<this.THEME_COLOR_LIMIT;W++)this["cScalePeer"+W]=this["cScalePeer"+W]||(0,D.a)(this["cScale"+W],10);for(let W=0;W<5;W++)this["surface"+W]=this["surface"+W]||(0,D.Ai)(this.mainBkg,{h:30,s:-30,l:-(4*W-10)}),this["surfacePeer"+W]=this["surfacePeer"+W]||(0,D.Ai)(this.mainBkg,{h:30,s:-30,l:-(4*W-7)});this.scaleLabelColor=this.scaleLabelColor||(this.darkMode?"black":this.labelTextColor);for(let W=0;W<this.THEME_COLOR_LIMIT;W++)this["cScaleLabel"+W]=this["cScaleLabel"+W]||this.scaleLabelColor;for(let W=0;W<this.THEME_COLOR_LIMIT;W++)this["pie"+W]=this["cScale"+W];this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||(0,D.Ai)(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||(0,D.Ai)(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||(0,D.Ai)(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||(0,D.Ai)(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||(0,D.Ai)(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||(0,D.Ai)(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||(0,D.HD)(this.quadrant1Fill)?(0,D.a)(this.quadrant1Fill):(0,D.e$)(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:this.xyChart?.backgroundColor||this.background,titleColor:this.xyChart?.titleColor||this.primaryTextColor,xAxisTitleColor:this.xyChart?.xAxisTitleColor||this.primaryTextColor,xAxisLabelColor:this.xyChart?.xAxisLabelColor||this.primaryTextColor,xAxisTickColor:this.xyChart?.xAxisTickColor||this.primaryTextColor,xAxisLineColor:this.xyChart?.xAxisLineColor||this.primaryTextColor,yAxisTitleColor:this.xyChart?.yAxisTitleColor||this.primaryTextColor,yAxisLabelColor:this.xyChart?.yAxisLabelColor||this.primaryTextColor,yAxisTickColor:this.xyChart?.yAxisTickColor||this.primaryTextColor,yAxisLineColor:this.xyChart?.yAxisLineColor||this.primaryTextColor,plotColorPalette:this.xyChart?.plotColorPalette||"#3498db,#2ecc71,#e74c3c,#f1c40f,#bdc3c7,#ffffff,#34495e,#9b59b6,#1abc9c,#e67e22"},this.packet={startByteColor:this.primaryTextColor,endByteColor:this.primaryTextColor,labelColor:this.primaryTextColor,titleColor:this.primaryTextColor,blockStrokeColor:this.primaryTextColor,blockFillColor:this.background},this.radar={axisColor:this.radar?.axisColor||this.lineColor,axisStrokeWidth:this.radar?.axisStrokeWidth||2,axisLabelFontSize:this.radar?.axisLabelFontSize||12,curveOpacity:this.radar?.curveOpacity||.5,curveStrokeWidth:this.radar?.curveStrokeWidth||2,graticuleColor:this.radar?.graticuleColor||"#DEDEDE",graticuleStrokeWidth:this.radar?.graticuleStrokeWidth||1,graticuleOpacity:this.radar?.graticuleOpacity||.3,legendBoxSize:this.radar?.legendBoxSize||12,legendFontSize:this.radar?.legendFontSize||12},this.classText=this.primaryTextColor,this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||(this.darkMode?(0,D.e$)(this.secondaryColor,30):this.secondaryColor),this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=(0,D.a)(this.secondaryColor,20),this.git1=(0,D.a)(this.pie2||this.secondaryColor,20),this.git2=(0,D.a)(this.pie3||this.tertiaryColor,20),this.git3=(0,D.a)(this.pie4||(0,D.Ai)(this.primaryColor,{h:-30}),20),this.git4=(0,D.a)(this.pie5||(0,D.Ai)(this.primaryColor,{h:-60}),20),this.git5=(0,D.a)(this.pie6||(0,D.Ai)(this.primaryColor,{h:-90}),10),this.git6=(0,D.a)(this.pie7||(0,D.Ai)(this.primaryColor,{h:60}),10),this.git7=(0,D.a)(this.pie8||(0,D.Ai)(this.primaryColor,{h:120}),20),this.gitInv0=this.gitInv0||(0,D.B8)(this.git0),this.gitInv1=this.gitInv1||(0,D.B8)(this.git1),this.gitInv2=this.gitInv2||(0,D.B8)(this.git2),this.gitInv3=this.gitInv3||(0,D.B8)(this.git3),this.gitInv4=this.gitInv4||(0,D.B8)(this.git4),this.gitInv5=this.gitInv5||(0,D.B8)(this.git5),this.gitInv6=this.gitInv6||(0,D.B8)(this.git6),this.gitInv7=this.gitInv7||(0,D.B8)(this.git7),this.gitBranchLabel0=this.gitBranchLabel0||(0,D.B8)(this.labelTextColor),this.gitBranchLabel1=this.gitBranchLabel1||this.labelTextColor,this.gitBranchLabel2=this.gitBranchLabel2||this.labelTextColor,this.gitBranchLabel3=this.gitBranchLabel3||(0,D.B8)(this.labelTextColor),this.gitBranchLabel4=this.gitBranchLabel4||this.labelTextColor,this.gitBranchLabel5=this.gitBranchLabel5||this.labelTextColor,this.gitBranchLabel6=this.gitBranchLabel6||this.labelTextColor,this.gitBranchLabel7=this.gitBranchLabel7||this.labelTextColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||(0,D.a)(this.background,12),this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||(0,D.a)(this.background,2),this.nodeBorder=this.nodeBorder||"#999"}calculate(W){if("object"!=typeof W)return void this.updateColors();const $t=Object.keys(W);$t.forEach(Ye=>{this[Ye]=W[Ye]}),this.updateColors(),$t.forEach(Ye=>{this[Ye]=W[Ye]})}static#t=w=()=>((0,ie.A)(this,"Theme2"),(0,L.K2)(this,"Theme"),this)},w()),Se=(0,L.K2)(W=>{const $t=new Bt;return $t.calculate(W),$t},"getThemeVariables"),X=(class{constructor(){this.background="#f4f4f4",this.primaryColor="#ECECFF",this.secondaryColor=(0,D.Ai)(this.primaryColor,{h:120}),this.secondaryColor="#ffffde",this.tertiaryColor=(0,D.Ai)(this.primaryColor,{h:-160}),this.primaryBorderColor=Xe(this.primaryColor,this.darkMode),this.secondaryBorderColor=Xe(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=Xe(this.tertiaryColor,this.darkMode),this.primaryTextColor=(0,D.B8)(this.primaryColor),this.secondaryTextColor=(0,D.B8)(this.secondaryColor),this.tertiaryTextColor=(0,D.B8)(this.tertiaryColor),this.lineColor=(0,D.B8)(this.background),this.textColor=(0,D.B8)(this.background),this.background="white",this.mainBkg="#ECECFF",this.secondBkg="#ffffde",this.lineColor="#333333",this.border1="#9370DB",this.border2="#aaaa33",this.arrowheadColor="#333333",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.labelBackground="rgba(232,232,232, 0.8)",this.textColor="#333",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="calculated",this.edgeLabelBackground="calculated",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="black",this.actorLineColor="calculated",this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="calculated",this.altSectionBkgColor="calculated",this.sectionBkgColor2="calculated",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="calculated",this.taskTextLightColor="calculated",this.taskTextColor=this.taskTextLightColor,this.taskTextDarkColor="calculated",this.taskTextOutsideColor=this.taskTextDarkColor,this.taskTextClickableColor="calculated",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="calculated",this.critBorderColor="calculated",this.critBkgColor="calculated",this.todayLineColor="calculated",this.vertLineColor="calculated",this.sectionBkgColor=(0,D.B3)(102,102,255,.49),this.altSectionBkgColor="white",this.sectionBkgColor2="#fff400",this.taskBorderColor="#534fbc",this.taskBkgColor="#8a90dd",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="black",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="#534fbc",this.activeTaskBkgColor="#bfc7ff",this.gridColor="lightgrey",this.doneTaskBkgColor="lightgrey",this.doneTaskBorderColor="grey",this.critBorderColor="#ff8888",this.critBkgColor="red",this.todayLineColor="red",this.vertLineColor="navy",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.archEdgeColor="calculated",this.archEdgeArrowColor="calculated",this.archEdgeWidth="3",this.archGroupBorderColor=this.primaryBorderColor,this.archGroupBorderWidth="2px",this.rowOdd="calculated",this.rowEven="calculated",this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222",this.updateColors()}updateColors(){this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||(0,D.Ai)(this.primaryColor,{h:30}),this.cScale4=this.cScale4||(0,D.Ai)(this.primaryColor,{h:60}),this.cScale5=this.cScale5||(0,D.Ai)(this.primaryColor,{h:90}),this.cScale6=this.cScale6||(0,D.Ai)(this.primaryColor,{h:120}),this.cScale7=this.cScale7||(0,D.Ai)(this.primaryColor,{h:150}),this.cScale8=this.cScale8||(0,D.Ai)(this.primaryColor,{h:210}),this.cScale9=this.cScale9||(0,D.Ai)(this.primaryColor,{h:270}),this.cScale10=this.cScale10||(0,D.Ai)(this.primaryColor,{h:300}),this.cScale11=this.cScale11||(0,D.Ai)(this.primaryColor,{h:330}),this.cScalePeer1=this.cScalePeer1||(0,D.e$)(this.secondaryColor,45),this.cScalePeer2=this.cScalePeer2||(0,D.e$)(this.tertiaryColor,40);for(let W=0;W<this.THEME_COLOR_LIMIT;W++)this["cScale"+W]=(0,D.e$)(this["cScale"+W],10),this["cScalePeer"+W]=this["cScalePeer"+W]||(0,D.e$)(this["cScale"+W],25);for(let W=0;W<this.THEME_COLOR_LIMIT;W++)this["cScaleInv"+W]=this["cScaleInv"+W]||(0,D.Ai)(this["cScale"+W],{h:180});for(let W=0;W<5;W++)this["surface"+W]=this["surface"+W]||(0,D.Ai)(this.mainBkg,{h:30,l:-(5+5*W)}),this["surfacePeer"+W]=this["surfacePeer"+W]||(0,D.Ai)(this.mainBkg,{h:30,l:-(7+5*W)});if(this.scaleLabelColor="calculated"!==this.scaleLabelColor&&this.scaleLabelColor?this.scaleLabelColor:this.labelTextColor,"calculated"!==this.labelTextColor){this.cScaleLabel0=this.cScaleLabel0||(0,D.B8)(this.labelTextColor),this.cScaleLabel3=this.cScaleLabel3||(0,D.B8)(this.labelTextColor);for(let W=0;W<this.THEME_COLOR_LIMIT;W++)this["cScaleLabel"+W]=this["cScaleLabel"+W]||this.labelTextColor}this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.titleColor=this.textColor,this.edgeLabelBackground=this.labelBackground,this.actorBorder=(0,D.a)(this.border1,23),this.actorBkg=this.mainBkg,this.labelBoxBkgColor=this.actorBkg,this.signalColor=this.textColor,this.signalTextColor=this.textColor,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.actorTextColor,this.loopTextColor=this.actorTextColor,this.noteBorderColor=this.border2,this.noteTextColor=this.actorTextColor,this.actorLineColor=this.actorBorder,this.taskTextColor=this.taskTextLightColor,this.taskTextOutsideColor=this.taskTextDarkColor,this.archEdgeColor=this.lineColor,this.archEdgeArrowColor=this.lineColor,this.rowOdd=this.rowOdd||(0,D.a)(this.primaryColor,75)||"#ffffff",this.rowEven=this.rowEven||(0,D.a)(this.primaryColor,1),this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f0f0f0",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.nodeBorder,this.specialStateColor=this.lineColor,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=(0,D.Ai)(this.primaryColor,{h:64}),this.fillType3=(0,D.Ai)(this.secondaryColor,{h:64}),this.fillType4=(0,D.Ai)(this.primaryColor,{h:-64}),this.fillType5=(0,D.Ai)(this.secondaryColor,{h:-64}),this.fillType6=(0,D.Ai)(this.primaryColor,{h:128}),this.fillType7=(0,D.Ai)(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||(0,D.Ai)(this.tertiaryColor,{l:-40}),this.pie4=this.pie4||(0,D.Ai)(this.primaryColor,{l:-10}),this.pie5=this.pie5||(0,D.Ai)(this.secondaryColor,{l:-30}),this.pie6=this.pie6||(0,D.Ai)(this.tertiaryColor,{l:-20}),this.pie7=this.pie7||(0,D.Ai)(this.primaryColor,{h:60,l:-20}),this.pie8=this.pie8||(0,D.Ai)(this.primaryColor,{h:-60,l:-40}),this.pie9=this.pie9||(0,D.Ai)(this.primaryColor,{h:120,l:-40}),this.pie10=this.pie10||(0,D.Ai)(this.primaryColor,{h:60,l:-40}),this.pie11=this.pie11||(0,D.Ai)(this.primaryColor,{h:-90,l:-40}),this.pie12=this.pie12||(0,D.Ai)(this.primaryColor,{h:120,l:-30}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||(0,D.Ai)(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||(0,D.Ai)(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||(0,D.Ai)(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||(0,D.Ai)(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||(0,D.Ai)(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||(0,D.Ai)(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||(0,D.HD)(this.quadrant1Fill)?(0,D.a)(this.quadrant1Fill):(0,D.e$)(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.radar={axisColor:this.radar?.axisColor||this.lineColor,axisStrokeWidth:this.radar?.axisStrokeWidth||2,axisLabelFontSize:this.radar?.axisLabelFontSize||12,curveOpacity:this.radar?.curveOpacity||.5,curveStrokeWidth:this.radar?.curveStrokeWidth||2,graticuleColor:this.radar?.graticuleColor||"#DEDEDE",graticuleStrokeWidth:this.radar?.graticuleStrokeWidth||1,graticuleOpacity:this.radar?.graticuleOpacity||.3,legendBoxSize:this.radar?.legendBoxSize||12,legendFontSize:this.radar?.legendFontSize||12},this.xyChart={backgroundColor:this.xyChart?.backgroundColor||this.background,titleColor:this.xyChart?.titleColor||this.primaryTextColor,xAxisTitleColor:this.xyChart?.xAxisTitleColor||this.primaryTextColor,xAxisLabelColor:this.xyChart?.xAxisLabelColor||this.primaryTextColor,xAxisTickColor:this.xyChart?.xAxisTickColor||this.primaryTextColor,xAxisLineColor:this.xyChart?.xAxisLineColor||this.primaryTextColor,yAxisTitleColor:this.xyChart?.yAxisTitleColor||this.primaryTextColor,yAxisLabelColor:this.xyChart?.yAxisLabelColor||this.primaryTextColor,yAxisTickColor:this.xyChart?.yAxisTickColor||this.primaryTextColor,yAxisLineColor:this.xyChart?.yAxisLineColor||this.primaryTextColor,plotColorPalette:this.xyChart?.plotColorPalette||"#ECECFF,#8493A6,#FFC3A0,#DCDDE1,#B8E994,#D1A36F,#C3CDE6,#FFB6C1,#496078,#F8F3E3"},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.labelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||(0,D.Ai)(this.primaryColor,{h:-30}),this.git4=this.git4||(0,D.Ai)(this.primaryColor,{h:-60}),this.git5=this.git5||(0,D.Ai)(this.primaryColor,{h:-90}),this.git6=this.git6||(0,D.Ai)(this.primaryColor,{h:60}),this.git7=this.git7||(0,D.Ai)(this.primaryColor,{h:120}),this.darkMode?(this.git0=(0,D.a)(this.git0,25),this.git1=(0,D.a)(this.git1,25),this.git2=(0,D.a)(this.git2,25),this.git3=(0,D.a)(this.git3,25),this.git4=(0,D.a)(this.git4,25),this.git5=(0,D.a)(this.git5,25),this.git6=(0,D.a)(this.git6,25),this.git7=(0,D.a)(this.git7,25)):(this.git0=(0,D.e$)(this.git0,25),this.git1=(0,D.e$)(this.git1,25),this.git2=(0,D.e$)(this.git2,25),this.git3=(0,D.e$)(this.git3,25),this.git4=(0,D.e$)(this.git4,25),this.git5=(0,D.e$)(this.git5,25),this.git6=(0,D.e$)(this.git6,25),this.git7=(0,D.e$)(this.git7,25)),this.gitInv0=this.gitInv0||(0,D.e$)((0,D.B8)(this.git0),25),this.gitInv1=this.gitInv1||(0,D.B8)(this.git1),this.gitInv2=this.gitInv2||(0,D.B8)(this.git2),this.gitInv3=this.gitInv3||(0,D.B8)(this.git3),this.gitInv4=this.gitInv4||(0,D.B8)(this.git4),this.gitInv5=this.gitInv5||(0,D.B8)(this.git5),this.gitInv6=this.gitInv6||(0,D.B8)(this.git6),this.gitInv7=this.gitInv7||(0,D.B8)(this.git7),this.gitBranchLabel0=this.gitBranchLabel0||(0,D.B8)(this.labelTextColor),this.gitBranchLabel1=this.gitBranchLabel1||this.labelTextColor,this.gitBranchLabel2=this.gitBranchLabel2||this.labelTextColor,this.gitBranchLabel3=this.gitBranchLabel3||(0,D.B8)(this.labelTextColor),this.gitBranchLabel4=this.gitBranchLabel4||this.labelTextColor,this.gitBranchLabel5=this.gitBranchLabel5||this.labelTextColor,this.gitBranchLabel6=this.gitBranchLabel6||this.labelTextColor,this.gitBranchLabel7=this.gitBranchLabel7||this.labelTextColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||Be,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||Ir}calculate(W){if(Object.keys(this).forEach(Ye=>{"calculated"===this[Ye]&&(this[Ye]=void 0)}),"object"!=typeof W)return void this.updateColors();const $t=Object.keys(W);$t.forEach(Ye=>{this[Ye]=W[Ye]}),this.updateColors(),$t.forEach(Ye=>{this[Ye]=W[Ye]})}static#t=Lt=()=>((0,ie.A)(this,"Theme3"),(0,L.K2)(this,"Theme"),this)},Lt()),re=(0,L.K2)(W=>{const $t=new X;return $t.calculate(W),$t},"getThemeVariables"),S=(class{constructor(){this.background="#f4f4f4",this.primaryColor="#cde498",this.secondaryColor="#cdffb2",this.background="white",this.mainBkg="#cde498",this.secondBkg="#cdffb2",this.lineColor="green",this.border1="#13540c",this.border2="#6eaa49",this.arrowheadColor="green",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.tertiaryColor=(0,D.a)("#cde498",10),this.primaryBorderColor=Xe(this.primaryColor,this.darkMode),this.secondaryBorderColor=Xe(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=Xe(this.tertiaryColor,this.darkMode),this.primaryTextColor=(0,D.B8)(this.primaryColor),this.secondaryTextColor=(0,D.B8)(this.secondaryColor),this.tertiaryTextColor=(0,D.B8)(this.primaryColor),this.lineColor=(0,D.B8)(this.background),this.textColor=(0,D.B8)(this.background),this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="#333",this.edgeLabelBackground="#e8e8e8",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="black",this.actorLineColor="calculated",this.signalColor="#333",this.signalTextColor="#333",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="#326932",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="#6eaa49",this.altSectionBkgColor="white",this.sectionBkgColor2="#6eaa49",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="#487e3a",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="black",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="lightgrey",this.doneTaskBkgColor="lightgrey",this.doneTaskBorderColor="grey",this.critBorderColor="#ff8888",this.critBkgColor="red",this.todayLineColor="red",this.vertLineColor="#00BFFF",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.archEdgeColor="calculated",this.archEdgeArrowColor="calculated",this.archEdgeWidth="3",this.archGroupBorderColor=this.primaryBorderColor,this.archGroupBorderWidth="2px",this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222"}updateColors(){this.actorBorder=(0,D.e$)(this.mainBkg,20),this.actorBkg=this.mainBkg,this.labelBoxBkgColor=this.actorBkg,this.labelTextColor=this.actorTextColor,this.loopTextColor=this.actorTextColor,this.noteBorderColor=this.border2,this.noteTextColor=this.actorTextColor,this.actorLineColor=this.actorBorder,this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||(0,D.Ai)(this.primaryColor,{h:30}),this.cScale4=this.cScale4||(0,D.Ai)(this.primaryColor,{h:60}),this.cScale5=this.cScale5||(0,D.Ai)(this.primaryColor,{h:90}),this.cScale6=this.cScale6||(0,D.Ai)(this.primaryColor,{h:120}),this.cScale7=this.cScale7||(0,D.Ai)(this.primaryColor,{h:150}),this.cScale8=this.cScale8||(0,D.Ai)(this.primaryColor,{h:210}),this.cScale9=this.cScale9||(0,D.Ai)(this.primaryColor,{h:270}),this.cScale10=this.cScale10||(0,D.Ai)(this.primaryColor,{h:300}),this.cScale11=this.cScale11||(0,D.Ai)(this.primaryColor,{h:330}),this.cScalePeer1=this.cScalePeer1||(0,D.e$)(this.secondaryColor,45),this.cScalePeer2=this.cScalePeer2||(0,D.e$)(this.tertiaryColor,40);for(let W=0;W<this.THEME_COLOR_LIMIT;W++)this["cScale"+W]=(0,D.e$)(this["cScale"+W],10),this["cScalePeer"+W]=this["cScalePeer"+W]||(0,D.e$)(this["cScale"+W],25);for(let W=0;W<this.THEME_COLOR_LIMIT;W++)this["cScaleInv"+W]=this["cScaleInv"+W]||(0,D.Ai)(this["cScale"+W],{h:180});this.scaleLabelColor="calculated"!==this.scaleLabelColor&&this.scaleLabelColor?this.scaleLabelColor:this.labelTextColor;for(let W=0;W<this.THEME_COLOR_LIMIT;W++)this["cScaleLabel"+W]=this["cScaleLabel"+W]||this.scaleLabelColor;for(let W=0;W<5;W++)this["surface"+W]=this["surface"+W]||(0,D.Ai)(this.mainBkg,{h:30,s:-30,l:-(5+5*W)}),this["surfacePeer"+W]=this["surfacePeer"+W]||(0,D.Ai)(this.mainBkg,{h:30,s:-30,l:-(8+5*W)});this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.taskBorderColor=this.border1,this.taskTextColor=this.taskTextLightColor,this.taskTextOutsideColor=this.taskTextDarkColor,this.activeTaskBorderColor=this.taskBorderColor,this.activeTaskBkgColor=this.mainBkg,this.archEdgeColor=this.lineColor,this.archEdgeArrowColor=this.lineColor,this.rowOdd=this.rowOdd||(0,D.a)(this.mainBkg,75)||"#ffffff",this.rowEven=this.rowEven||(0,D.a)(this.mainBkg,20),this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f0f0f0",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.primaryBorderColor,this.specialStateColor=this.lineColor,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=(0,D.Ai)(this.primaryColor,{h:64}),this.fillType3=(0,D.Ai)(this.secondaryColor,{h:64}),this.fillType4=(0,D.Ai)(this.primaryColor,{h:-64}),this.fillType5=(0,D.Ai)(this.secondaryColor,{h:-64}),this.fillType6=(0,D.Ai)(this.primaryColor,{h:128}),this.fillType7=(0,D.Ai)(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||this.tertiaryColor,this.pie4=this.pie4||(0,D.Ai)(this.primaryColor,{l:-30}),this.pie5=this.pie5||(0,D.Ai)(this.secondaryColor,{l:-30}),this.pie6=this.pie6||(0,D.Ai)(this.tertiaryColor,{h:40,l:-40}),this.pie7=this.pie7||(0,D.Ai)(this.primaryColor,{h:60,l:-10}),this.pie8=this.pie8||(0,D.Ai)(this.primaryColor,{h:-60,l:-10}),this.pie9=this.pie9||(0,D.Ai)(this.primaryColor,{h:120,l:0}),this.pie10=this.pie10||(0,D.Ai)(this.primaryColor,{h:60,l:-50}),this.pie11=this.pie11||(0,D.Ai)(this.primaryColor,{h:-60,l:-50}),this.pie12=this.pie12||(0,D.Ai)(this.primaryColor,{h:120,l:-50}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||(0,D.Ai)(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||(0,D.Ai)(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||(0,D.Ai)(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||(0,D.Ai)(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||(0,D.Ai)(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||(0,D.Ai)(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||(0,D.HD)(this.quadrant1Fill)?(0,D.a)(this.quadrant1Fill):(0,D.e$)(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.packet={startByteColor:this.primaryTextColor,endByteColor:this.primaryTextColor,labelColor:this.primaryTextColor,titleColor:this.primaryTextColor,blockStrokeColor:this.primaryTextColor,blockFillColor:this.mainBkg},this.radar={axisColor:this.radar?.axisColor||this.lineColor,axisStrokeWidth:this.radar?.axisStrokeWidth||2,axisLabelFontSize:this.radar?.axisLabelFontSize||12,curveOpacity:this.radar?.curveOpacity||.5,curveStrokeWidth:this.radar?.curveStrokeWidth||2,graticuleColor:this.radar?.graticuleColor||"#DEDEDE",graticuleStrokeWidth:this.radar?.graticuleStrokeWidth||1,graticuleOpacity:this.radar?.graticuleOpacity||.3,legendBoxSize:this.radar?.legendBoxSize||12,legendFontSize:this.radar?.legendFontSize||12},this.xyChart={backgroundColor:this.xyChart?.backgroundColor||this.background,titleColor:this.xyChart?.titleColor||this.primaryTextColor,xAxisTitleColor:this.xyChart?.xAxisTitleColor||this.primaryTextColor,xAxisLabelColor:this.xyChart?.xAxisLabelColor||this.primaryTextColor,xAxisTickColor:this.xyChart?.xAxisTickColor||this.primaryTextColor,xAxisLineColor:this.xyChart?.xAxisLineColor||this.primaryTextColor,yAxisTitleColor:this.xyChart?.yAxisTitleColor||this.primaryTextColor,yAxisLabelColor:this.xyChart?.yAxisLabelColor||this.primaryTextColor,yAxisTickColor:this.xyChart?.yAxisTickColor||this.primaryTextColor,yAxisLineColor:this.xyChart?.yAxisLineColor||this.primaryTextColor,plotColorPalette:this.xyChart?.plotColorPalette||"#CDE498,#FF6B6B,#A0D2DB,#D7BDE2,#F0F0F0,#FFC3A0,#7FD8BE,#FF9A8B,#FAF3E0,#FFF176"},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.edgeLabelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||(0,D.Ai)(this.primaryColor,{h:-30}),this.git4=this.git4||(0,D.Ai)(this.primaryColor,{h:-60}),this.git5=this.git5||(0,D.Ai)(this.primaryColor,{h:-90}),this.git6=this.git6||(0,D.Ai)(this.primaryColor,{h:60}),this.git7=this.git7||(0,D.Ai)(this.primaryColor,{h:120}),this.darkMode?(this.git0=(0,D.a)(this.git0,25),this.git1=(0,D.a)(this.git1,25),this.git2=(0,D.a)(this.git2,25),this.git3=(0,D.a)(this.git3,25),this.git4=(0,D.a)(this.git4,25),this.git5=(0,D.a)(this.git5,25),this.git6=(0,D.a)(this.git6,25),this.git7=(0,D.a)(this.git7,25)):(this.git0=(0,D.e$)(this.git0,25),this.git1=(0,D.e$)(this.git1,25),this.git2=(0,D.e$)(this.git2,25),this.git3=(0,D.e$)(this.git3,25),this.git4=(0,D.e$)(this.git4,25),this.git5=(0,D.e$)(this.git5,25),this.git6=(0,D.e$)(this.git6,25),this.git7=(0,D.e$)(this.git7,25)),this.gitInv0=this.gitInv0||(0,D.B8)(this.git0),this.gitInv1=this.gitInv1||(0,D.B8)(this.git1),this.gitInv2=this.gitInv2||(0,D.B8)(this.git2),this.gitInv3=this.gitInv3||(0,D.B8)(this.git3),this.gitInv4=this.gitInv4||(0,D.B8)(this.git4),this.gitInv5=this.gitInv5||(0,D.B8)(this.git5),this.gitInv6=this.gitInv6||(0,D.B8)(this.git6),this.gitInv7=this.gitInv7||(0,D.B8)(this.git7),this.gitBranchLabel0=this.gitBranchLabel0||(0,D.B8)(this.labelTextColor),this.gitBranchLabel1=this.gitBranchLabel1||this.labelTextColor,this.gitBranchLabel2=this.gitBranchLabel2||this.labelTextColor,this.gitBranchLabel3=this.gitBranchLabel3||(0,D.B8)(this.labelTextColor),this.gitBranchLabel4=this.gitBranchLabel4||this.labelTextColor,this.gitBranchLabel5=this.gitBranchLabel5||this.labelTextColor,this.gitBranchLabel6=this.gitBranchLabel6||this.labelTextColor,this.gitBranchLabel7=this.gitBranchLabel7||this.labelTextColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||Be,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||Ir}calculate(W){if("object"!=typeof W)return void this.updateColors();const $t=Object.keys(W);$t.forEach(Ye=>{this[Ye]=W[Ye]}),this.updateColors(),$t.forEach(Ye=>{this[Ye]=W[Ye]})}static#t=At=()=>((0,ie.A)(this,"Theme4"),(0,L.K2)(this,"Theme"),this)},At()),ee=(0,L.K2)(W=>{const $t=new S;return $t.calculate(W),$t},"getThemeVariables"),Rt=(class{constructor(){this.primaryColor="#eee",this.contrast="#707070",this.secondaryColor=(0,D.a)(this.contrast,55),this.background="#ffffff",this.tertiaryColor=(0,D.Ai)(this.primaryColor,{h:-160}),this.primaryBorderColor=Xe(this.primaryColor,this.darkMode),this.secondaryBorderColor=Xe(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=Xe(this.tertiaryColor,this.darkMode),this.primaryTextColor=(0,D.B8)(this.primaryColor),this.secondaryTextColor=(0,D.B8)(this.secondaryColor),this.tertiaryTextColor=(0,D.B8)(this.tertiaryColor),this.lineColor=(0,D.B8)(this.background),this.textColor=(0,D.B8)(this.background),this.mainBkg="#eee",this.secondBkg="calculated",this.lineColor="#666",this.border1="#999",this.border2="calculated",this.note="#ffa",this.text="#333",this.critical="#d42",this.done="#bbb",this.arrowheadColor="#333333",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="calculated",this.edgeLabelBackground="white",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="calculated",this.actorLineColor=this.actorBorder,this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="calculated",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="calculated",this.altSectionBkgColor="white",this.sectionBkgColor2="calculated",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="calculated",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="calculated",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="calculated",this.critBkgColor="calculated",this.critBorderColor="calculated",this.todayLineColor="calculated",this.vertLineColor="calculated",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.archEdgeColor="calculated",this.archEdgeArrowColor="calculated",this.archEdgeWidth="3",this.archGroupBorderColor=this.primaryBorderColor,this.archGroupBorderWidth="2px",this.rowOdd=this.rowOdd||(0,D.a)(this.mainBkg,75)||"#ffffff",this.rowEven=this.rowEven||"#f4f4f4",this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222"}updateColors(){this.secondBkg=(0,D.a)(this.contrast,55),this.border2=this.contrast,this.actorBorder=(0,D.a)(this.border1,23),this.actorBkg=this.mainBkg,this.actorTextColor=this.text,this.actorLineColor=this.actorBorder,this.signalColor=this.text,this.signalTextColor=this.text,this.labelBoxBkgColor=this.actorBkg,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.text,this.loopTextColor=this.text,this.noteBorderColor="#999",this.noteBkgColor="#666",this.noteTextColor="#fff",this.cScale0=this.cScale0||"#555",this.cScale1=this.cScale1||"#F4F4F4",this.cScale2=this.cScale2||"#555",this.cScale3=this.cScale3||"#BBB",this.cScale4=this.cScale4||"#777",this.cScale5=this.cScale5||"#999",this.cScale6=this.cScale6||"#DDD",this.cScale7=this.cScale7||"#FFF",this.cScale8=this.cScale8||"#DDD",this.cScale9=this.cScale9||"#BBB",this.cScale10=this.cScale10||"#999",this.cScale11=this.cScale11||"#777";for(let W=0;W<this.THEME_COLOR_LIMIT;W++)this["cScaleInv"+W]=this["cScaleInv"+W]||(0,D.B8)(this["cScale"+W]);for(let W=0;W<this.THEME_COLOR_LIMIT;W++)this["cScalePeer"+W]=this.darkMode?this["cScalePeer"+W]||(0,D.a)(this["cScale"+W],10):this["cScalePeer"+W]||(0,D.e$)(this["cScale"+W],10);this.scaleLabelColor=this.scaleLabelColor||(this.darkMode?"black":this.labelTextColor),this.cScaleLabel0=this.cScaleLabel0||this.cScale1,this.cScaleLabel2=this.cScaleLabel2||this.cScale1;for(let W=0;W<this.THEME_COLOR_LIMIT;W++)this["cScaleLabel"+W]=this["cScaleLabel"+W]||this.scaleLabelColor;for(let W=0;W<5;W++)this["surface"+W]=this["surface"+W]||(0,D.Ai)(this.mainBkg,{l:-(5+5*W)}),this["surfacePeer"+W]=this["surfacePeer"+W]||(0,D.Ai)(this.mainBkg,{l:-(8+5*W)});this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.titleColor=this.text,this.sectionBkgColor=(0,D.a)(this.contrast,30),this.sectionBkgColor2=(0,D.a)(this.contrast,30),this.taskBorderColor=(0,D.e$)(this.contrast,10),this.taskBkgColor=this.contrast,this.taskTextColor=this.taskTextLightColor,this.taskTextDarkColor=this.text,this.taskTextOutsideColor=this.taskTextDarkColor,this.activeTaskBorderColor=this.taskBorderColor,this.activeTaskBkgColor=this.mainBkg,this.gridColor=(0,D.a)(this.border1,30),this.doneTaskBkgColor=this.done,this.doneTaskBorderColor=this.lineColor,this.critBkgColor=this.critical,this.critBorderColor=(0,D.e$)(this.critBkgColor,10),this.todayLineColor=this.critBkgColor,this.vertLineColor=this.critBkgColor,this.archEdgeColor=this.lineColor,this.archEdgeArrowColor=this.lineColor,this.transitionColor=this.transitionColor||"#000",this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f4f4f4",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.stateBorder=this.stateBorder||"#000",this.innerEndBackground=this.primaryBorderColor,this.specialStateColor="#222",this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=(0,D.Ai)(this.primaryColor,{h:64}),this.fillType3=(0,D.Ai)(this.secondaryColor,{h:64}),this.fillType4=(0,D.Ai)(this.primaryColor,{h:-64}),this.fillType5=(0,D.Ai)(this.secondaryColor,{h:-64}),this.fillType6=(0,D.Ai)(this.primaryColor,{h:128}),this.fillType7=(0,D.Ai)(this.secondaryColor,{h:128});for(let W=0;W<this.THEME_COLOR_LIMIT;W++)this["pie"+W]=this["cScale"+W];this.pie12=this.pie0,this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||(0,D.Ai)(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||(0,D.Ai)(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||(0,D.Ai)(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||(0,D.Ai)(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||(0,D.Ai)(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||(0,D.Ai)(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||(0,D.HD)(this.quadrant1Fill)?(0,D.a)(this.quadrant1Fill):(0,D.e$)(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:this.xyChart?.backgroundColor||this.background,titleColor:this.xyChart?.titleColor||this.primaryTextColor,xAxisTitleColor:this.xyChart?.xAxisTitleColor||this.primaryTextColor,xAxisLabelColor:this.xyChart?.xAxisLabelColor||this.primaryTextColor,xAxisTickColor:this.xyChart?.xAxisTickColor||this.primaryTextColor,xAxisLineColor:this.xyChart?.xAxisLineColor||this.primaryTextColor,yAxisTitleColor:this.xyChart?.yAxisTitleColor||this.primaryTextColor,yAxisLabelColor:this.xyChart?.yAxisLabelColor||this.primaryTextColor,yAxisTickColor:this.xyChart?.yAxisTickColor||this.primaryTextColor,yAxisLineColor:this.xyChart?.yAxisLineColor||this.primaryTextColor,plotColorPalette:this.xyChart?.plotColorPalette||"#EEE,#6BB8E4,#8ACB88,#C7ACD6,#E8DCC2,#FFB2A8,#FFF380,#7E8D91,#FFD8B1,#FAF3E0"},this.radar={axisColor:this.radar?.axisColor||this.lineColor,axisStrokeWidth:this.radar?.axisStrokeWidth||2,axisLabelFontSize:this.radar?.axisLabelFontSize||12,curveOpacity:this.radar?.curveOpacity||.5,curveStrokeWidth:this.radar?.curveStrokeWidth||2,graticuleColor:this.radar?.graticuleColor||"#DEDEDE",graticuleStrokeWidth:this.radar?.graticuleStrokeWidth||1,graticuleOpacity:this.radar?.graticuleOpacity||.3,legendBoxSize:this.radar?.legendBoxSize||12,legendFontSize:this.radar?.legendFontSize||12},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.edgeLabelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=(0,D.e$)(this.pie1,25)||this.primaryColor,this.git1=this.pie2||this.secondaryColor,this.git2=this.pie3||this.tertiaryColor,this.git3=this.pie4||(0,D.Ai)(this.primaryColor,{h:-30}),this.git4=this.pie5||(0,D.Ai)(this.primaryColor,{h:-60}),this.git5=this.pie6||(0,D.Ai)(this.primaryColor,{h:-90}),this.git6=this.pie7||(0,D.Ai)(this.primaryColor,{h:60}),this.git7=this.pie8||(0,D.Ai)(this.primaryColor,{h:120}),this.gitInv0=this.gitInv0||(0,D.B8)(this.git0),this.gitInv1=this.gitInv1||(0,D.B8)(this.git1),this.gitInv2=this.gitInv2||(0,D.B8)(this.git2),this.gitInv3=this.gitInv3||(0,D.B8)(this.git3),this.gitInv4=this.gitInv4||(0,D.B8)(this.git4),this.gitInv5=this.gitInv5||(0,D.B8)(this.git5),this.gitInv6=this.gitInv6||(0,D.B8)(this.git6),this.gitInv7=this.gitInv7||(0,D.B8)(this.git7),this.branchLabelColor=this.branchLabelColor||this.labelTextColor,this.gitBranchLabel0=this.branchLabelColor,this.gitBranchLabel1="white",this.gitBranchLabel2=this.branchLabelColor,this.gitBranchLabel3="white",this.gitBranchLabel4=this.branchLabelColor,this.gitBranchLabel5=this.branchLabelColor,this.gitBranchLabel6=this.branchLabelColor,this.gitBranchLabel7=this.branchLabelColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||Be,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||Ir}calculate(W){if("object"!=typeof W)return void this.updateColors();const $t=Object.keys(W);$t.forEach(Ye=>{this[Ye]=W[Ye]}),this.updateColors(),$t.forEach(Ye=>{this[Ye]=W[Ye]})}static#t=Ge=()=>((0,ie.A)(this,"Theme5"),(0,L.K2)(this,"Theme"),this)},Ge()),V={base:{getThemeVariables:dt},dark:{getThemeVariables:Se},default:{getThemeVariables:re},forest:{getThemeVariables:ee},neutral:{getThemeVariables:(0,L.K2)(W=>{const $t=new Rt;return $t.calculate(W),$t},"getThemeVariables")}},gt={flowchart:{useMaxWidth:!0,titleTopMargin:25,subGraphTitleMargin:{top:0,bottom:0},diagramPadding:8,htmlLabels:!0,nodeSpacing:50,rankSpacing:50,curve:"basis",padding:15,defaultRenderer:"dagre-wrapper",wrappingWidth:200,inheritDir:!1},sequence:{useMaxWidth:!0,hideUnusedParticipants:!1,activationWidth:10,diagramMarginX:50,diagramMarginY:10,actorMargin:50,width:150,height:65,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",mirrorActors:!0,forceMenus:!1,bottomMarginAdj:1,rightAngles:!1,showSequenceNumbers:!1,actorFontSize:14,actorFontFamily:'"Open Sans", sans-serif',actorFontWeight:400,noteFontSize:14,noteFontFamily:'"trebuchet ms", verdana, arial, sans-serif',noteFontWeight:400,noteAlign:"center",messageFontSize:16,messageFontFamily:'"trebuchet ms", verdana, arial, sans-serif',messageFontWeight:400,wrap:!1,wrapPadding:10,labelBoxWidth:50,labelBoxHeight:20},gantt:{useMaxWidth:!0,titleTopMargin:25,barHeight:20,barGap:4,topPadding:50,rightPadding:75,leftPadding:75,gridLineStartPadding:35,fontSize:11,sectionFontSize:11,numberSectionStyles:4,axisFormat:"%Y-%m-%d",topAxis:!1,displayMode:"",weekday:"sunday"},journey:{useMaxWidth:!0,diagramMarginX:50,diagramMarginY:10,leftMargin:150,maxLabelWidth:360,width:150,height:50,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",bottomMarginAdj:1,rightAngles:!1,taskFontSize:14,taskFontFamily:'"Open Sans", sans-serif',taskMargin:50,activationWidth:10,textPlacement:"fo",actorColours:["#8FBC8F","#7CFC00","#00FFFF","#20B2AA","#B0E0E6","#FFFFE0"],sectionFills:["#191970","#8B008B","#4B0082","#2F4F4F","#800000","#8B4513","#00008B"],sectionColours:["#fff"],titleColor:"",titleFontFamily:'"trebuchet ms", verdana, arial, sans-serif',titleFontSize:"4ex"},class:{useMaxWidth:!0,titleTopMargin:25,arrowMarkerAbsolute:!1,dividerMargin:10,padding:5,textHeight:10,defaultRenderer:"dagre-wrapper",htmlLabels:!1,hideEmptyMembersBox:!1},state:{useMaxWidth:!0,titleTopMargin:25,dividerMargin:10,sizeUnit:5,padding:8,textHeight:10,titleShift:-15,noteMargin:10,forkWidth:70,forkHeight:7,miniPadding:2,fontSizeFactor:5.02,fontSize:24,labelHeight:16,edgeLengthFactor:"20",compositTitleSize:35,radius:5,defaultRenderer:"dagre-wrapper"},er:{useMaxWidth:!0,titleTopMargin:25,diagramPadding:20,layoutDirection:"TB",minEntityWidth:100,minEntityHeight:75,entityPadding:15,nodeSpacing:140,rankSpacing:80,stroke:"gray",fill:"honeydew",fontSize:12},pie:{useMaxWidth:!0,textPosition:.75},quadrantChart:{useMaxWidth:!0,chartWidth:500,chartHeight:500,titleFontSize:20,titlePadding:10,quadrantPadding:5,xAxisLabelPadding:5,yAxisLabelPadding:5,xAxisLabelFontSize:16,yAxisLabelFontSize:16,quadrantLabelFontSize:16,quadrantTextTopPadding:5,pointTextPadding:5,pointLabelFontSize:12,pointRadius:5,xAxisPosition:"top",yAxisPosition:"left",quadrantInternalBorderStrokeWidth:1,quadrantExternalBorderStrokeWidth:2},xyChart:{useMaxWidth:!0,width:700,height:500,titleFontSize:20,titlePadding:10,showDataLabel:!1,showTitle:!0,xAxis:{$ref:"#/$defs/XYChartAxisConfig",showLabel:!0,labelFontSize:14,labelPadding:5,showTitle:!0,titleFontSize:16,titlePadding:5,showTick:!0,tickLength:5,tickWidth:2,showAxisLine:!0,axisLineWidth:2},yAxis:{$ref:"#/$defs/XYChartAxisConfig",showLabel:!0,labelFontSize:14,labelPadding:5,showTitle:!0,titleFontSize:16,titlePadding:5,showTick:!0,tickLength:5,tickWidth:2,showAxisLine:!0,axisLineWidth:2},chartOrientation:"vertical",plotReservedSpacePercent:50},requirement:{useMaxWidth:!0,rect_fill:"#f9f9f9",text_color:"#333",rect_border_size:"0.5px",rect_border_color:"#bbb",rect_min_width:200,rect_min_height:200,fontSize:14,rect_padding:10,line_height:20},mindmap:{useMaxWidth:!0,padding:10,maxNodeWidth:200,layoutAlgorithm:"cose-bilkent"},kanban:{useMaxWidth:!0,padding:8,sectionWidth:200,ticketBaseUrl:""},timeline:{useMaxWidth:!0,diagramMarginX:50,diagramMarginY:10,leftMargin:150,width:150,height:50,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",bottomMarginAdj:1,rightAngles:!1,taskFontSize:14,taskFontFamily:'"Open Sans", sans-serif',taskMargin:50,activationWidth:10,textPlacement:"fo",actorColours:["#8FBC8F","#7CFC00","#00FFFF","#20B2AA","#B0E0E6","#FFFFE0"],sectionFills:["#191970","#8B008B","#4B0082","#2F4F4F","#800000","#8B4513","#00008B"],sectionColours:["#fff"],disableMulticolor:!1},gitGraph:{useMaxWidth:!0,titleTopMargin:25,diagramPadding:8,nodeLabel:{width:75,height:100,x:-25,y:0},mainBranchName:"main",mainBranchOrder:0,showCommitLabel:!0,showBranches:!0,rotateCommitLabel:!0,parallelCommits:!1,arrowMarkerAbsolute:!1},c4:{useMaxWidth:!0,diagramMarginX:50,diagramMarginY:10,c4ShapeMargin:50,c4ShapePadding:20,width:216,height:60,boxMargin:10,c4ShapeInRow:4,nextLinePaddingX:0,c4BoundaryInRow:2,personFontSize:14,personFontFamily:'"Open Sans", sans-serif',personFontWeight:"normal",external_personFontSize:14,external_personFontFamily:'"Open Sans", sans-serif',external_personFontWeight:"normal",systemFontSize:14,systemFontFamily:'"Open Sans", sans-serif',systemFontWeight:"normal",external_systemFontSize:14,external_systemFontFamily:'"Open Sans", sans-serif',external_systemFontWeight:"normal",system_dbFontSize:14,system_dbFontFamily:'"Open Sans", sans-serif',system_dbFontWeight:"normal",external_system_dbFontSize:14,external_system_dbFontFamily:'"Open Sans", sans-serif',external_system_dbFontWeight:"normal",system_queueFontSize:14,system_queueFontFamily:'"Open Sans", sans-serif',system_queueFontWeight:"normal",external_system_queueFontSize:14,external_system_queueFontFamily:'"Open Sans", sans-serif',external_system_queueFontWeight:"normal",boundaryFontSize:14,boundaryFontFamily:'"Open Sans", sans-serif',boundaryFontWeight:"normal",messageFontSize:12,messageFontFamily:'"Open Sans", sans-serif',messageFontWeight:"normal",containerFontSize:14,containerFontFamily:'"Open Sans", sans-serif',containerFontWeight:"normal",external_containerFontSize:14,external_containerFontFamily:'"Open Sans", sans-serif',external_containerFontWeight:"normal",container_dbFontSize:14,container_dbFontFamily:'"Open Sans", sans-serif',container_dbFontWeight:"normal",external_container_dbFontSize:14,external_container_dbFontFamily:'"Open Sans", sans-serif',external_container_dbFontWeight:"normal",container_queueFontSize:14,container_queueFontFamily:'"Open Sans", sans-serif',container_queueFontWeight:"normal",external_container_queueFontSize:14,external_container_queueFontFamily:'"Open Sans", sans-serif',external_container_queueFontWeight:"normal",componentFontSize:14,componentFontFamily:'"Open Sans", sans-serif',componentFontWeight:"normal",external_componentFontSize:14,external_componentFontFamily:'"Open Sans", sans-serif',external_componentFontWeight:"normal",component_dbFontSize:14,component_dbFontFamily:'"Open Sans", sans-serif',component_dbFontWeight:"normal",external_component_dbFontSize:14,external_component_dbFontFamily:'"Open Sans", sans-serif',external_component_dbFontWeight:"normal",component_queueFontSize:14,component_queueFontFamily:'"Open Sans", sans-serif',component_queueFontWeight:"normal",external_component_queueFontSize:14,external_component_queueFontFamily:'"Open Sans", sans-serif',external_component_queueFontWeight:"normal",wrap:!0,wrapPadding:10,person_bg_color:"#08427B",person_border_color:"#073B6F",external_person_bg_color:"#686868",external_person_border_color:"#8A8A8A",system_bg_color:"#1168BD",system_border_color:"#3C7FC0",system_db_bg_color:"#1168BD",system_db_border_color:"#3C7FC0",system_queue_bg_color:"#1168BD",system_queue_border_color:"#3C7FC0",external_system_bg_color:"#999999",external_system_border_color:"#8A8A8A",external_system_db_bg_color:"#999999",external_system_db_border_color:"#8A8A8A",external_system_queue_bg_color:"#999999",external_system_queue_border_color:"#8A8A8A",container_bg_color:"#438DD5",container_border_color:"#3C7FC0",container_db_bg_color:"#438DD5",container_db_border_color:"#3C7FC0",container_queue_bg_color:"#438DD5",container_queue_border_color:"#3C7FC0",external_container_bg_color:"#B3B3B3",external_container_border_color:"#A6A6A6",external_container_db_bg_color:"#B3B3B3",external_container_db_border_color:"#A6A6A6",external_container_queue_bg_color:"#B3B3B3",external_container_queue_border_color:"#A6A6A6",component_bg_color:"#85BBF0",component_border_color:"#78A8D8",component_db_bg_color:"#85BBF0",component_db_border_color:"#78A8D8",component_queue_bg_color:"#85BBF0",component_queue_border_color:"#78A8D8",external_component_bg_color:"#CCCCCC",external_component_border_color:"#BFBFBF",external_component_db_bg_color:"#CCCCCC",external_component_db_border_color:"#BFBFBF",external_component_queue_bg_color:"#CCCCCC",external_component_queue_border_color:"#BFBFBF"},sankey:{useMaxWidth:!0,width:600,height:400,linkColor:"gradient",nodeAlignment:"justify",showValues:!0,prefix:"",suffix:""},block:{useMaxWidth:!0,padding:8},packet:{useMaxWidth:!0,rowHeight:32,bitWidth:32,bitsPerRow:32,showBits:!0,paddingX:5,paddingY:5},architecture:{useMaxWidth:!0,padding:40,iconSize:80,fontSize:16},radar:{useMaxWidth:!0,width:600,height:600,marginTop:50,marginRight:50,marginBottom:50,marginLeft:50,axisScaleFactor:1,axisLabelFactor:1.05,curveTension:.17},theme:"default",look:"classic",handDrawnSeed:0,layout:"dagre",maxTextSize:5e4,maxEdges:500,darkMode:!1,fontFamily:'"trebuchet ms", verdana, arial, sans-serif;',logLevel:5,securityLevel:"strict",startOnLoad:!0,arrowMarkerAbsolute:!1,secure:["secure","securityLevel","startOnLoad","maxTextSize","suppressErrorRendering","maxEdges"],legacyMathML:!1,forceLegacyMathML:!1,deterministicIds:!1,fontSize:16,markdownAutoWrap:!0,suppressErrorRendering:!1},Y={...gt,deterministicIDSeed:void 0,elk:{mergeEdges:!1,nodePlacementStrategy:"BRANDES_KOEPF",forceNodeModelOrder:!1,considerModelOrder:"NODES_AND_EDGES"},themeCSS:void 0,themeVariables:V.default.getThemeVariables(),sequence:{...gt.sequence,messageFont:(0,L.K2)(function(){return{fontFamily:this.messageFontFamily,fontSize:this.messageFontSize,fontWeight:this.messageFontWeight}},"messageFont"),noteFont:(0,L.K2)(function(){return{fontFamily:this.noteFontFamily,fontSize:this.noteFontSize,fontWeight:this.noteFontWeight}},"noteFont"),actorFont:(0,L.K2)(function(){return{fontFamily:this.actorFontFamily,fontSize:this.actorFontSize,fontWeight:this.actorFontWeight}},"actorFont")},class:{hideEmptyMembersBox:!1},gantt:{...gt.gantt,tickInterval:void 0,useWidth:void 0},c4:{...gt.c4,useWidth:void 0,personFont:(0,L.K2)(function(){return{fontFamily:this.personFontFamily,fontSize:this.personFontSize,fontWeight:this.personFontWeight}},"personFont"),flowchart:{...gt.flowchart,inheritDir:!1},external_personFont:(0,L.K2)(function(){return{fontFamily:this.external_personFontFamily,fontSize:this.external_personFontSize,fontWeight:this.external_personFontWeight}},"external_personFont"),systemFont:(0,L.K2)(function(){return{fontFamily:this.systemFontFamily,fontSize:this.systemFontSize,fontWeight:this.systemFontWeight}},"systemFont"),external_systemFont:(0,L.K2)(function(){return{fontFamily:this.external_systemFontFamily,fontSize:this.external_systemFontSize,fontWeight:this.external_systemFontWeight}},"external_systemFont"),system_dbFont:(0,L.K2)(function(){return{fontFamily:this.system_dbFontFamily,fontSize:this.system_dbFontSize,fontWeight:this.system_dbFontWeight}},"system_dbFont"),external_system_dbFont:(0,L.K2)(function(){return{fontFamily:this.external_system_dbFontFamily,fontSize:this.external_system_dbFontSize,fontWeight:this.external_system_dbFontWeight}},"external_system_dbFont"),system_queueFont:(0,L.K2)(function(){return{fontFamily:this.system_queueFontFamily,fontSize:this.system_queueFontSize,fontWeight:this.system_queueFontWeight}},"system_queueFont"),external_system_queueFont:(0,L.K2)(function(){return{fontFamily:this.external_system_queueFontFamily,fontSize:this.external_system_queueFontSize,fontWeight:this.external_system_queueFontWeight}},"external_system_queueFont"),containerFont:(0,L.K2)(function(){return{fontFamily:this.containerFontFamily,fontSize:this.containerFontSize,fontWeight:this.containerFontWeight}},"containerFont"),external_containerFont:(0,L.K2)(function(){return{fontFamily:this.external_containerFontFamily,fontSize:this.external_containerFontSize,fontWeight:this.external_containerFontWeight}},"external_containerFont"),container_dbFont:(0,L.K2)(function(){return{fontFamily:this.container_dbFontFamily,fontSize:this.container_dbFontSize,fontWeight:this.container_dbFontWeight}},"container_dbFont"),external_container_dbFont:(0,L.K2)(function(){return{fontFamily:this.external_container_dbFontFamily,fontSize:this.external_container_dbFontSize,fontWeight:this.external_container_dbFontWeight}},"external_container_dbFont"),container_queueFont:(0,L.K2)(function(){return{fontFamily:this.container_queueFontFamily,fontSize:this.container_queueFontSize,fontWeight:this.container_queueFontWeight}},"container_queueFont"),external_container_queueFont:(0,L.K2)(function(){return{fontFamily:this.external_container_queueFontFamily,fontSize:this.external_container_queueFontSize,fontWeight:this.external_container_queueFontWeight}},"external_container_queueFont"),componentFont:(0,L.K2)(function(){return{fontFamily:this.componentFontFamily,fontSize:this.componentFontSize,fontWeight:this.componentFontWeight}},"componentFont"),external_componentFont:(0,L.K2)(function(){return{fontFamily:this.external_componentFontFamily,fontSize:this.external_componentFontSize,fontWeight:this.external_componentFontWeight}},"external_componentFont"),component_dbFont:(0,L.K2)(function(){return{fontFamily:this.component_dbFontFamily,fontSize:this.component_dbFontSize,fontWeight:this.component_dbFontWeight}},"component_dbFont"),external_component_dbFont:(0,L.K2)(function(){return{fontFamily:this.external_component_dbFontFamily,fontSize:this.external_component_dbFontSize,fontWeight:this.external_component_dbFontWeight}},"external_component_dbFont"),component_queueFont:(0,L.K2)(function(){return{fontFamily:this.component_queueFontFamily,fontSize:this.component_queueFontSize,fontWeight:this.component_queueFontWeight}},"component_queueFont"),external_component_queueFont:(0,L.K2)(function(){return{fontFamily:this.external_component_queueFontFamily,fontSize:this.external_component_queueFontSize,fontWeight:this.external_component_queueFontWeight}},"external_component_queueFont"),boundaryFont:(0,L.K2)(function(){return{fontFamily:this.boundaryFontFamily,fontSize:this.boundaryFontSize,fontWeight:this.boundaryFontWeight}},"boundaryFont"),messageFont:(0,L.K2)(function(){return{fontFamily:this.messageFontFamily,fontSize:this.messageFontSize,fontWeight:this.messageFontWeight}},"messageFont")},pie:{...gt.pie,useWidth:984},xyChart:{...gt.xyChart,useWidth:void 0},requirement:{...gt.requirement,useWidth:void 0},packet:{...gt.packet},radar:{...gt.radar},treemap:{useMaxWidth:!0,padding:10,diagramPadding:8,showValues:!0,nodeWidth:100,nodeHeight:40,borderWidth:1,valueFontSize:12,labelFontSize:14,valueFormat:","}},Nt=(0,L.K2)((W,$t="")=>Object.keys(W).reduce((Ye,Fe)=>Array.isArray(W[Fe])?Ye:"object"==typeof W[Fe]&&null!==W[Fe]?[...Ye,$t+Fe,...Nt(W[Fe],"")]:[...Ye,$t+Fe],[]),"keyify"),St=new Set(Nt(Y,"")),Ut=Y,ye=(0,L.K2)(W=>{if(L.Rm.debug("sanitizeDirective called with",W),"object"==typeof W&&null!=W){if(Array.isArray(W))return void W.forEach($t=>ye($t));for(const $t of Object.keys(W)){if(L.Rm.debug("Checking key",$t),$t.startsWith("__")||$t.includes("proto")||$t.includes("constr")||!St.has($t)||null==W[$t]){L.Rm.debug("sanitize deleting key: ",$t),delete W[$t];continue}if("object"==typeof W[$t]){L.Rm.debug("sanitizing object",$t),ye(W[$t]);continue}const Ye=["themeCSS","fontFamily","altFontFamily"];for(const Fe of Ye)$t.includes(Fe)&&(L.Rm.debug("sanitizing css option",$t),W[$t]=le(W[$t]))}if(W.themeVariables)for(const $t of Object.keys(W.themeVariables)){const Ye=W.themeVariables[$t];Ye?.match&&!Ye.match(/^[\d "#%(),.;A-Za-z]+$/)&&(W.themeVariables[$t]="")}L.Rm.debug("After sanitization",W)}},"sanitizeDirective"),le=(0,L.K2)(W=>{let $t=0,Ye=0;for(const Fe of W){if($t<Ye)return"{ /* ERROR: Unbalanced CSS */ }";"{"===Fe?$t++:"}"===Fe&&Ye++}return $t!==Ye?"{ /* ERROR: Unbalanced CSS */ }":W},"sanitizeCss"),Pe=Object.freeze(Ut),oe=Or({},Pe),We=[],Et=Or({},Pe),Tt=(0,L.K2)((W,$t)=>{let Ye=Or({},W),Fe={};for(const Tr of $t)_t(Tr),Fe=Or(Fe,Tr);if(Ye=Or(Ye,Fe),Fe.theme&&Fe.theme in V){const Tr=Or({},qe),pr=Or(Tr.themeVariables||{},Fe.themeVariables);Ye.theme&&Ye.theme in V&&(Ye.themeVariables=V[Ye.theme].getThemeVariables(pr))}return Pt(Et=Ye),Et},"updateCurrentConfig"),B=(0,L.K2)(W=>(oe=Or({},Pe),oe=Or(oe,W),W.theme&&V[W.theme]&&(oe.themeVariables=V[W.theme].getThemeVariables(W.themeVariables)),Tt(oe,We),oe),"setSiteConfig"),N=(0,L.K2)(W=>{qe=Or({},W)},"saveConfigFromInitialize"),et=(0,L.K2)(W=>(oe=Or(oe,W),Tt(oe,We),oe),"updateSiteConfig"),yt=(0,L.K2)(()=>Or({},oe),"getSiteConfig"),it=(0,L.K2)(W=>(Pt(W),Or(Et,W),rt()),"setConfig"),rt=(0,L.K2)(()=>Or({},Et),"getConfig"),_t=(0,L.K2)(W=>{W&&(["secure",...oe.secure??[]].forEach($t=>{Object.hasOwn(W,$t)&&(L.Rm.debug(`Denied attempt to modify a secure key ${$t}`,W[$t]),delete W[$t])}),Object.keys(W).forEach($t=>{$t.startsWith("__")&&delete W[$t]}),Object.keys(W).forEach($t=>{"string"==typeof W[$t]&&(W[$t].includes("<")||W[$t].includes(">")||W[$t].includes("url(data:"))&&delete W[$t],"object"==typeof W[$t]&&_t(W[$t])}))},"sanitize"),ht=(0,L.K2)(W=>{ye(W),W.fontFamily&&!W.themeVariables?.fontFamily&&(W.themeVariables={...W.themeVariables,fontFamily:W.fontFamily}),We.push(W),Tt(oe,We)},"addDirective"),Ot=(0,L.K2)((W=oe)=>{Tt(W,We=[])},"reset"),H={LAZY_LOAD_DEPRECATED:"The configuration options lazyLoadedDiagrams and loadExternalDiagramsAtStartup are deprecated. Please use registerExternalDiagrams instead."},ot={},ke=(0,L.K2)(W=>{ot[W]||(L.Rm.warn(H[W]),ot[W]=!0)},"issueWarning"),Pt=(0,L.K2)(W=>{W&&(W.lazyLoadedDiagrams||W.loadExternalDiagramsAtStartup)&&ke("LAZY_LOAD_DEPRECATED")},"checkConfig"),Zt=(0,L.K2)(()=>{let W={};qe&&(W=Or(W,qe));for(const $t of We)W=Or(W,$t);return W},"getUserDefinedConfig"),pe=/<br\s*\/?>/gi,Re=(0,L.K2)(W=>W?Ee(W).replace(/\\n/g,"#br#").split("#br#"):[""],"getRows"),Ze=(()=>{let W=!1;return()=>{W||(de(),W=!0)}})();function de(){const W="data-temp-href-target";Mt.A.addHook("beforeSanitizeAttributes",$t=>{"A"===$t.tagName&&$t.hasAttribute("target")&&$t.setAttribute(W,$t.getAttribute("target")??"")}),Mt.A.addHook("afterSanitizeAttributes",$t=>{"A"===$t.tagName&&$t.hasAttribute(W)&&($t.setAttribute("target",$t.getAttribute(W)??""),$t.removeAttribute(W),"_blank"===$t.getAttribute("target")&&$t.setAttribute("rel","noopener"))})}(0,L.K2)(de,"setupDompurifyHooks");var yr=(0,L.K2)(W=>(Ze(),Mt.A.sanitize(W)),"removeScript"),mr=(0,L.K2)((W,$t)=>{if(!1!==$t.flowchart?.htmlLabels){const Ye=$t.securityLevel;"antiscript"===Ye||"strict"===Ye?W=yr(W):"loose"!==Ye&&(W=(W=(W=Ee(W)).replace(/</g,"&lt;").replace(/>/g,"&gt;")).replace(/=/g,"&equals;"),W=ce(W))}return W},"sanitizeMore"),Wt=(0,L.K2)((W,$t)=>W&&($t.dompurifyConfig?Mt.A.sanitize(mr(W,$t),$t.dompurifyConfig).toString():Mt.A.sanitize(mr(W,$t),{FORBID_TAGS:["style"]}).toString()),"sanitizeText"),we=(0,L.K2)((W,$t)=>"string"==typeof W?Wt(W,$t):W.flat().map(Ye=>Wt(Ye,$t)),"sanitizeTextOrArray"),sr=(0,L.K2)(W=>pe.test(W),"hasBreaks"),ve=(0,L.K2)(W=>W.split(pe),"splitBreaks"),ce=(0,L.K2)(W=>W.replace(/#br#/g,"<br/>"),"placeholderToBreak"),Ee=(0,L.K2)(W=>W.replace(pe,"#br#"),"breakToPlaceholder"),Ae=(0,L.K2)(W=>{let $t="";return W&&($t=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,$t=CSS.escape($t)),$t},"getUrl"),er=(0,L.K2)(W=>!(!1===W||["false","null","0"].includes(String(W).trim().toLowerCase())),"evaluate"),Qe=(0,L.K2)(function(...W){const $t=W.filter(Ye=>!isNaN(Ye));return Math.max(...$t)},"getMax"),Dr=(0,L.K2)(function(...W){const $t=W.filter(Ye=>!isNaN(Ye));return Math.min(...$t)},"getMin"),_e=(0,L.K2)(function(W){const $t=W.split(/(,)/),Ye=[];for(let Fe=0;Fe<$t.length;Fe++){let Tr=$t[Fe];if(","===Tr&&Fe>0&&Fe+1<$t.length){const pr=$t[Fe-1],da=$t[Fe+1];nr(pr,da)&&(Tr=pr+","+da,Fe++,Ye.pop())}Ye.push(te(Tr))}return Ye.join("")},"parseGenericTypes"),Yr=(0,L.K2)((W,$t)=>Math.max(0,W.split($t).length-1),"countOccurrence"),nr=(0,L.K2)((W,$t)=>{const Ye=Yr(W,"~"),Fe=Yr($t,"~");return 1===Ye&&1===Fe},"shouldCombineSets"),te=(0,L.K2)(W=>{const $t=Yr(W,"~");let Ye=!1;if($t<=1)return W;$t%2!=0&&W.startsWith("~")&&(W=W.substring(1),Ye=!0);const Fe=[...W];let Tr=Fe.indexOf("~"),pr=Fe.lastIndexOf("~");for(;-1!==Tr&&-1!==pr&&Tr!==pr;)Fe[Tr]="<",Fe[pr]=">",Tr=Fe.indexOf("~"),pr=Fe.lastIndexOf("~");return Ye&&Fe.unshift("~"),Fe.join("")},"processSet"),ne=(0,L.K2)(()=>void 0!==window.MathMLElement,"isMathMLSupported"),be=/\$\$(.*)\$\$/g,ar=(0,L.K2)(W=>(W.match(be)?.length??0)>0,"hasKatex"),g=(0,L.K2)(function(){var W=(0,lt.A)(function*($t,Ye){const Fe=document.createElement("div");Fe.innerHTML=yield E($t,Ye),Fe.id="katex-temp",Fe.style.visibility="hidden",Fe.style.position="absolute",Fe.style.top="0",document.querySelector("body")?.insertAdjacentElement("beforeend",Fe);const pr={width:Fe.clientWidth,height:Fe.clientHeight};return Fe.remove(),pr});return function($t,Ye){return W.apply(this,arguments)}}(),"calculateMathMLDimensions"),y=(0,L.K2)(function(){var W=(0,lt.A)(function*($t,Ye){if(!ar($t))return $t;if(!(ne()||Ye.legacyMathML||Ye.forceLegacyMathML))return $t.replace(be,"MathML is unsupported in this environment.");{const{default:Fe}=yield P.e(256).then(P.bind(P,97256)),Tr=Ye.forceLegacyMathML||!ne()&&Ye.legacyMathML?"htmlAndMathml":"mathml";return $t.split(pe).map(pr=>ar(pr)?`<div style="display: flex; align-items: center; justify-content: center; white-space: nowrap;">${pr}</div>`:`<div>${pr}</div>`).join("").replace(be,(pr,da)=>Fe.renderToString(da,{throwOnError:!0,displayMode:!0,output:Tr}).replace(/\n/g," ").replace(/<annotation.*<\/annotation>/g,""))}});return function($t,Ye){return W.apply(this,arguments)}}(),"renderKatexUnsanitized"),E=(0,L.K2)(function(){var W=(0,lt.A)(function*($t,Ye){return Wt(yield y($t,Ye),Ye)});return function($t,Ye){return W.apply(this,arguments)}}(),"renderKatexSanitized"),M={getRows:Re,sanitizeText:Wt,sanitizeTextOrArray:we,hasBreaks:sr,splitBreaks:ve,lineBreakRegex:pe,removeScript:yr,getUrl:Ae,evaluate:er,getMax:Qe,getMin:Dr},m=(0,L.K2)(function(W,$t){for(let Ye of $t)W.attr(Ye[0],Ye[1])},"d3Attrs"),A=(0,L.K2)(function(W,$t,Ye){let Fe=new Map;return Ye?(Fe.set("width","100%"),Fe.set("style",`max-width: ${$t}px;`)):(Fe.set("height",W),Fe.set("width",$t)),Fe},"calculateSvgSizeAttrs"),v=(0,L.K2)(function(W,$t,Ye,Fe){const Tr=A($t,Ye,Fe);m(W,Tr)},"configureSvgSize"),b=(0,L.K2)(function(W,$t,Ye,Fe){const Tr=$t.node().getBBox(),pr=Tr.width,da=Tr.height;L.Rm.info(`SVG bounds: ${pr}x${da}`,Tr);let Pa=0,Ma=0;L.Rm.info(`Graph bounds: ${Pa}x${Ma}`,W),Pa=pr+2*Ye,Ma=da+2*Ye,L.Rm.info(`Calculated bounds: ${Pa}x${Ma}`),v($t,Ma,Pa,Fe),$t.attr("viewBox",`${Tr.x-Ye} ${Tr.y-Ye} ${Tr.width+2*Ye} ${Tr.height+2*Ye}`)},"setupGraphViewbox"),C={},R=(0,L.K2)((W,$t,Ye)=>{let Fe="";return W in C&&C[W]?Fe=C[W](Ye):L.Rm.warn(`No theme found for ${W}`),` & {\n    font-family: ${Ye.fontFamily};\n    font-size: ${Ye.fontSize};\n    fill: ${Ye.textColor}\n  }\n  @keyframes edge-animation-frame {\n    from {\n      stroke-dashoffset: 0;\n    }\n  }\n  @keyframes dash {\n    to {\n      stroke-dashoffset: 0;\n    }\n  }\n  & .edge-animation-slow {\n    stroke-dasharray: 9,5 !important;\n    stroke-dashoffset: 900;\n    animation: dash 50s linear infinite;\n    stroke-linecap: round;\n  }\n  & .edge-animation-fast {\n    stroke-dasharray: 9,5 !important;\n    stroke-dashoffset: 900;\n    animation: dash 20s linear infinite;\n    stroke-linecap: round;\n  }\n  /* Classes common for multiple diagrams */\n\n  & .error-icon {\n    fill: ${Ye.errorBkgColor};\n  }\n  & .error-text {\n    fill: ${Ye.errorTextColor};\n    stroke: ${Ye.errorTextColor};\n  }\n\n  & .edge-thickness-normal {\n    stroke-width: 1px;\n  }\n  & .edge-thickness-thick {\n    stroke-width: 3.5px\n  }\n  & .edge-pattern-solid {\n    stroke-dasharray: 0;\n  }\n  & .edge-thickness-invisible {\n    stroke-width: 0;\n    fill: none;\n  }\n  & .edge-pattern-dashed{\n    stroke-dasharray: 3;\n  }\n  .edge-pattern-dotted {\n    stroke-dasharray: 2;\n  }\n\n  & .marker {\n    fill: ${Ye.lineColor};\n    stroke: ${Ye.lineColor};\n  }\n  & .marker.cross {\n    stroke: ${Ye.lineColor};\n  }\n\n  & svg {\n    font-family: ${Ye.fontFamily};\n    font-size: ${Ye.fontSize};\n  }\n   & p {\n    margin: 0\n   }\n\n  ${Fe}\n\n  ${$t}\n`},"getStyles"),Q=(0,L.K2)((W,$t)=>{void 0!==$t&&(C[W]=$t)},"addStylesForDiagram"),mt=R,zt={};(0,L.VA)(zt,{clear:()=>je,getAccDescription:()=>br,getAccTitle:()=>fr,getDiagramTitle:()=>He,setAccDescription:()=>lr,setAccTitle:()=>Ke,setDiagramTitle:()=>$e});var jt="",Vt="",Kt="",xe=(0,L.K2)(W=>Wt(W,rt()),"sanitizeText"),je=(0,L.K2)(()=>{jt="",Kt="",Vt=""},"clear"),Ke=(0,L.K2)(W=>{jt=xe(W).replace(/^\s+/g,"")},"setAccTitle"),fr=(0,L.K2)(()=>jt,"getAccTitle"),lr=(0,L.K2)(W=>{Kt=xe(W).replace(/\n\s+/g,"\n")},"setAccDescription"),br=(0,L.K2)(()=>Kt,"getAccDescription"),$e=(0,L.K2)(W=>{Vt=xe(W)},"setDiagramTitle"),He=(0,L.K2)(()=>Vt,"getDiagramTitle"),wr=L.Rm,kr=L.He,Kr=rt,_r=it,Jr=Pe,Lr=(0,L.K2)(W=>Wt(W,Kr()),"sanitizeText"),ha=b,ia=(0,L.K2)(()=>zt,"getCommonDb"),jr={},Qr=(0,L.K2)((W,$t,Ye)=>{jr[W]&&wr.warn(`Diagram with id ${W} already registered. Overwriting.`),jr[W]=$t,Ye&&Gr(W,Ye),Q(W,$t.styles),$t.injectUtils?.(wr,kr,Kr,Lr,ha,ia(),()=>{})},"registerDiagram"),or=(0,L.K2)(W=>{if(W in jr)return jr[W];throw new ur(W)},"getDiagram"),ur=(class extends Error{constructor(W){super(`Diagram ${W} not found.`)}static#t=bt=()=>((0,ie.A)(this,"DiagramNotFoundError"),(0,L.K2)(this,"DiagramNotFoundError"),this)},bt())},79158:(ri,Er,P)=>{"use strict";P.r(Er),P.d(Er,{diagram:()=>Xe});var vr,lt=P(89204),ie=P(45027),L=P(5675),D=P(8086),Mt=P(72271),bt=(P(98954),P(36384),P(87452),P(32239),P(19753),P(59355),P(52052)),Gt=P(79006),j=P(32303),hr=P(40622),ze=P(79687),Wr=function(){var z=(0,j.K2)(function(ce,Ee,Ae,er){for(Ae=Ae||{},er=ce.length;er--;Ae[ce[er]]=Ee);return Ae},"o"),dt=[6,8,10,22,24,26,28,33,34,35,36,37,40,43,44,50],Bt=[1,10],Se=[1,11],X=[1,12],re=[1,13],S=[1,20],ee=[1,21],Rt=[1,22],qt=[1,23],V=[1,24],gt=[1,19],Y=[1,25],Nt=[1,26],St=[1,18],Ut=[1,33],ye=[1,34],le=[1,35],Pe=[1,36],oe=[1,37],qe=[6,8,10,13,15,17,20,21,22,24,26,28,33,34,35,36,37,40,43,44,50,63,64,65,66,67],We=[1,42],Et=[1,43],Tt=[1,52],B=[40,50,68,69],N=[1,63],et=[1,61],yt=[1,58],it=[1,62],rt=[1,64],_t=[6,8,10,13,17,22,24,26,28,33,34,35,36,37,40,41,42,43,44,48,49,50,63,64,65,66,67],ht=[63,64,65,66,67],Ot=[1,81],H=[1,80],ot=[1,78],ke=[1,79],Pt=[6,10,42,47],Zt=[6,10,13,41,42,47,48,49],pe=[1,89],Re=[1,88],Ze=[1,87],de=[19,56],yr=[1,98],mr=[1,97],Wt=[19,56,58,60],we={trace:(0,j.K2)(function(){},"trace"),yy:{},symbols_:{error:2,start:3,ER_DIAGRAM:4,document:5,EOF:6,line:7,SPACE:8,statement:9,NEWLINE:10,entityName:11,relSpec:12,COLON:13,role:14,STYLE_SEPARATOR:15,idList:16,BLOCK_START:17,attributes:18,BLOCK_STOP:19,SQS:20,SQE:21,title:22,title_value:23,acc_title:24,acc_title_value:25,acc_descr:26,acc_descr_value:27,acc_descr_multiline_value:28,direction:29,classDefStatement:30,classStatement:31,styleStatement:32,direction_tb:33,direction_bt:34,direction_rl:35,direction_lr:36,CLASSDEF:37,stylesOpt:38,separator:39,UNICODE_TEXT:40,STYLE_TEXT:41,COMMA:42,CLASS:43,STYLE:44,style:45,styleComponent:46,SEMI:47,NUM:48,BRKT:49,ENTITY_NAME:50,attribute:51,attributeType:52,attributeName:53,attributeKeyTypeList:54,attributeComment:55,ATTRIBUTE_WORD:56,attributeKeyType:57,",":58,ATTRIBUTE_KEY:59,COMMENT:60,cardinality:61,relType:62,ZERO_OR_ONE:63,ZERO_OR_MORE:64,ONE_OR_MORE:65,ONLY_ONE:66,MD_PARENT:67,NON_IDENTIFYING:68,IDENTIFYING:69,WORD:70,$accept:0,$end:1},terminals_:{2:"error",4:"ER_DIAGRAM",6:"EOF",8:"SPACE",10:"NEWLINE",13:"COLON",15:"STYLE_SEPARATOR",17:"BLOCK_START",19:"BLOCK_STOP",20:"SQS",21:"SQE",22:"title",23:"title_value",24:"acc_title",25:"acc_title_value",26:"acc_descr",27:"acc_descr_value",28:"acc_descr_multiline_value",33:"direction_tb",34:"direction_bt",35:"direction_rl",36:"direction_lr",37:"CLASSDEF",40:"UNICODE_TEXT",41:"STYLE_TEXT",42:"COMMA",43:"CLASS",44:"STYLE",47:"SEMI",48:"NUM",49:"BRKT",50:"ENTITY_NAME",56:"ATTRIBUTE_WORD",58:",",59:"ATTRIBUTE_KEY",60:"COMMENT",63:"ZERO_OR_ONE",64:"ZERO_OR_MORE",65:"ONE_OR_MORE",66:"ONLY_ONE",67:"MD_PARENT",68:"NON_IDENTIFYING",69:"IDENTIFYING",70:"WORD"},productions_:[0,[3,3],[5,0],[5,2],[7,2],[7,1],[7,1],[7,1],[9,5],[9,9],[9,7],[9,7],[9,4],[9,6],[9,3],[9,5],[9,1],[9,3],[9,7],[9,9],[9,6],[9,8],[9,4],[9,6],[9,2],[9,2],[9,2],[9,1],[9,1],[9,1],[9,1],[9,1],[29,1],[29,1],[29,1],[29,1],[30,4],[16,1],[16,1],[16,3],[16,3],[31,3],[32,4],[38,1],[38,3],[45,1],[45,2],[39,1],[39,1],[39,1],[46,1],[46,1],[46,1],[46,1],[11,1],[11,1],[18,1],[18,2],[51,2],[51,3],[51,3],[51,4],[52,1],[53,1],[54,1],[54,3],[57,1],[55,1],[12,3],[61,1],[61,1],[61,1],[61,1],[61,1],[62,1],[62,1],[14,1],[14,1],[14,1]],performAction:(0,j.K2)(function(Ee,Ae,er,Qe,Dr,_e,Yr){var nr=_e.length-1;switch(Dr){case 1:break;case 2:case 6:case 7:this.$=[];break;case 3:_e[nr-1].push(_e[nr]),this.$=_e[nr-1];break;case 4:case 5:case 55:case 78:case 62:case 63:case 66:this.$=_e[nr];break;case 8:Qe.addEntity(_e[nr-4]),Qe.addEntity(_e[nr-2]),Qe.addRelationship(_e[nr-4],_e[nr],_e[nr-2],_e[nr-3]);break;case 9:Qe.addEntity(_e[nr-8]),Qe.addEntity(_e[nr-4]),Qe.addRelationship(_e[nr-8],_e[nr],_e[nr-4],_e[nr-5]),Qe.setClass([_e[nr-8]],_e[nr-6]),Qe.setClass([_e[nr-4]],_e[nr-2]);break;case 10:Qe.addEntity(_e[nr-6]),Qe.addEntity(_e[nr-2]),Qe.addRelationship(_e[nr-6],_e[nr],_e[nr-2],_e[nr-3]),Qe.setClass([_e[nr-6]],_e[nr-4]);break;case 11:Qe.addEntity(_e[nr-6]),Qe.addEntity(_e[nr-4]),Qe.addRelationship(_e[nr-6],_e[nr],_e[nr-4],_e[nr-5]),Qe.setClass([_e[nr-4]],_e[nr-2]);break;case 12:Qe.addEntity(_e[nr-3]),Qe.addAttributes(_e[nr-3],_e[nr-1]);break;case 13:Qe.addEntity(_e[nr-5]),Qe.addAttributes(_e[nr-5],_e[nr-1]),Qe.setClass([_e[nr-5]],_e[nr-3]);break;case 14:Qe.addEntity(_e[nr-2]);break;case 15:Qe.addEntity(_e[nr-4]),Qe.setClass([_e[nr-4]],_e[nr-2]);break;case 16:Qe.addEntity(_e[nr]);break;case 17:Qe.addEntity(_e[nr-2]),Qe.setClass([_e[nr-2]],_e[nr]);break;case 18:Qe.addEntity(_e[nr-6],_e[nr-4]),Qe.addAttributes(_e[nr-6],_e[nr-1]);break;case 19:Qe.addEntity(_e[nr-8],_e[nr-6]),Qe.addAttributes(_e[nr-8],_e[nr-1]),Qe.setClass([_e[nr-8]],_e[nr-3]);break;case 20:Qe.addEntity(_e[nr-5],_e[nr-3]);break;case 21:Qe.addEntity(_e[nr-7],_e[nr-5]),Qe.setClass([_e[nr-7]],_e[nr-2]);break;case 22:Qe.addEntity(_e[nr-3],_e[nr-1]);break;case 23:Qe.addEntity(_e[nr-5],_e[nr-3]),Qe.setClass([_e[nr-5]],_e[nr]);break;case 24:case 25:this.$=_e[nr].trim(),Qe.setAccTitle(this.$);break;case 26:case 27:this.$=_e[nr].trim(),Qe.setAccDescription(this.$);break;case 32:Qe.setDirection("TB");break;case 33:Qe.setDirection("BT");break;case 34:Qe.setDirection("RL");break;case 35:Qe.setDirection("LR");break;case 36:this.$=_e[nr-3],Qe.addClass(_e[nr-2],_e[nr-1]);break;case 37:case 38:case 56:case 64:case 43:this.$=[_e[nr]];break;case 39:case 40:this.$=_e[nr-2].concat([_e[nr]]);break;case 41:this.$=_e[nr-2],Qe.setClass(_e[nr-1],_e[nr]);break;case 42:this.$=_e[nr-3],Qe.addCssStyles(_e[nr-2],_e[nr-1]);break;case 44:case 65:_e[nr-2].push(_e[nr]),this.$=_e[nr-2];break;case 46:this.$=_e[nr-1]+_e[nr];break;case 54:case 76:case 77:case 67:this.$=_e[nr].replace(/"/g,"");break;case 57:_e[nr].push(_e[nr-1]),this.$=_e[nr];break;case 58:this.$={type:_e[nr-1],name:_e[nr]};break;case 59:this.$={type:_e[nr-2],name:_e[nr-1],keys:_e[nr]};break;case 60:this.$={type:_e[nr-2],name:_e[nr-1],comment:_e[nr]};break;case 61:this.$={type:_e[nr-3],name:_e[nr-2],keys:_e[nr-1],comment:_e[nr]};break;case 68:this.$={cardA:_e[nr],relType:_e[nr-1],cardB:_e[nr-2]};break;case 69:this.$=Qe.Cardinality.ZERO_OR_ONE;break;case 70:this.$=Qe.Cardinality.ZERO_OR_MORE;break;case 71:this.$=Qe.Cardinality.ONE_OR_MORE;break;case 72:this.$=Qe.Cardinality.ONLY_ONE;break;case 73:this.$=Qe.Cardinality.MD_PARENT;break;case 74:this.$=Qe.Identification.NON_IDENTIFYING;break;case 75:this.$=Qe.Identification.IDENTIFYING}},"anonymous"),table:[{3:1,4:[1,2]},{1:[3]},z(dt,[2,2],{5:3}),{6:[1,4],7:5,8:[1,6],9:7,10:[1,8],11:9,22:Bt,24:Se,26:X,28:re,29:14,30:15,31:16,32:17,33:S,34:ee,35:Rt,36:qt,37:V,40:gt,43:Y,44:Nt,50:St},z(dt,[2,7],{1:[2,1]}),z(dt,[2,3]),{9:27,11:9,22:Bt,24:Se,26:X,28:re,29:14,30:15,31:16,32:17,33:S,34:ee,35:Rt,36:qt,37:V,40:gt,43:Y,44:Nt,50:St},z(dt,[2,5]),z(dt,[2,6]),z(dt,[2,16],{12:28,61:32,15:[1,29],17:[1,30],20:[1,31],63:Ut,64:ye,65:le,66:Pe,67:oe}),{23:[1,38]},{25:[1,39]},{27:[1,40]},z(dt,[2,27]),z(dt,[2,28]),z(dt,[2,29]),z(dt,[2,30]),z(dt,[2,31]),z(qe,[2,54]),z(qe,[2,55]),z(dt,[2,32]),z(dt,[2,33]),z(dt,[2,34]),z(dt,[2,35]),{16:41,40:We,41:Et},{16:44,40:We,41:Et},{16:45,40:We,41:Et},z(dt,[2,4]),{11:46,40:gt,50:St},{16:47,40:We,41:Et},{18:48,19:[1,49],51:50,52:51,56:Tt},{11:53,40:gt,50:St},{62:54,68:[1,55],69:[1,56]},z(B,[2,69]),z(B,[2,70]),z(B,[2,71]),z(B,[2,72]),z(B,[2,73]),z(dt,[2,24]),z(dt,[2,25]),z(dt,[2,26]),{13:N,38:57,41:et,42:yt,45:59,46:60,48:it,49:rt},z(_t,[2,37]),z(_t,[2,38]),{16:65,40:We,41:Et,42:yt},{13:N,38:66,41:et,42:yt,45:59,46:60,48:it,49:rt},{13:[1,67],15:[1,68]},z(dt,[2,17],{61:32,12:69,17:[1,70],42:yt,63:Ut,64:ye,65:le,66:Pe,67:oe}),{19:[1,71]},z(dt,[2,14]),{18:72,19:[2,56],51:50,52:51,56:Tt},{53:73,56:[1,74]},{56:[2,62]},{21:[1,75]},{61:76,63:Ut,64:ye,65:le,66:Pe,67:oe},z(ht,[2,74]),z(ht,[2,75]),{6:Ot,10:H,39:77,42:ot,47:ke},{40:[1,82],41:[1,83]},z(Pt,[2,43],{46:84,13:N,41:et,48:it,49:rt}),z(Zt,[2,45]),z(Zt,[2,50]),z(Zt,[2,51]),z(Zt,[2,52]),z(Zt,[2,53]),z(dt,[2,41],{42:yt}),{6:Ot,10:H,39:85,42:ot,47:ke},{14:86,40:pe,50:Re,70:Ze},{16:90,40:We,41:Et},{11:91,40:gt,50:St},{18:92,19:[1,93],51:50,52:51,56:Tt},z(dt,[2,12]),{19:[2,57]},z(de,[2,58],{54:94,55:95,57:96,59:yr,60:mr}),z([19,56,59,60],[2,63]),z(dt,[2,22],{15:[1,100],17:[1,99]}),z([40,50],[2,68]),z(dt,[2,36]),{13:N,41:et,45:101,46:60,48:it,49:rt},z(dt,[2,47]),z(dt,[2,48]),z(dt,[2,49]),z(_t,[2,39]),z(_t,[2,40]),z(Zt,[2,46]),z(dt,[2,42]),z(dt,[2,8]),z(dt,[2,76]),z(dt,[2,77]),z(dt,[2,78]),{13:[1,102],42:yt},{13:[1,104],15:[1,103]},{19:[1,105]},z(dt,[2,15]),z(de,[2,59],{55:106,58:[1,107],60:mr}),z(de,[2,60]),z(Wt,[2,64]),z(de,[2,67]),z(Wt,[2,66]),{18:108,19:[1,109],51:50,52:51,56:Tt},{16:110,40:We,41:Et},z(Pt,[2,44],{46:84,13:N,41:et,48:it,49:rt}),{14:111,40:pe,50:Re,70:Ze},{16:112,40:We,41:Et},{14:113,40:pe,50:Re,70:Ze},z(dt,[2,13]),z(de,[2,61]),{57:114,59:yr},{19:[1,115]},z(dt,[2,20]),z(dt,[2,23],{17:[1,116],42:yt}),z(dt,[2,11]),{13:[1,117],42:yt},z(dt,[2,10]),z(Wt,[2,65]),z(dt,[2,18]),{18:118,19:[1,119],51:50,52:51,56:Tt},{14:120,40:pe,50:Re,70:Ze},{19:[1,121]},z(dt,[2,21]),z(dt,[2,9]),z(dt,[2,19])],defaultActions:{52:[2,62],72:[2,57]},parseError:(0,j.K2)(function(Ee,Ae){if(!Ae.recoverable){var er=new Error(Ee);throw er.hash=Ae,er}this.trace(Ee)},"parseError"),parse:(0,j.K2)(function(Ee){var Ae=this,er=[0],Qe=[],Dr=[null],_e=[],Yr=this.table,nr="",te=0,ne=0,be=0,y=_e.slice.call(arguments,1),E=Object.create(this.lexer),M={yy:{}};for(var m in this.yy)Object.prototype.hasOwnProperty.call(this.yy,m)&&(M.yy[m]=this.yy[m]);E.setInput(Ee,M.yy),M.yy.lexer=E,M.yy.parser=this,typeof E.yylloc>"u"&&(E.yylloc={});var A=E.yylloc;_e.push(A);var v=E.options&&E.options.ranges;function C(){var br;return"number"!=typeof(br=Qe.pop()||E.lex()||1)&&(br instanceof Array&&(br=(Qe=br).pop()),br=Ae.symbols_[br]||br),br}this.parseError="function"==typeof M.yy.parseError?M.yy.parseError:Object.getPrototypeOf(this).parseError,(0,j.K2)(function b(br){er.length=er.length-2*br,Dr.length=Dr.length-br,_e.length=_e.length-br},"popStack"),(0,j.K2)(C,"lex");for(var R,Q,mt,zt,Vt,xe,je,fr,Kt={};;){if(this.defaultActions[mt=er[er.length-1]]?zt=this.defaultActions[mt]:((null===R||typeof R>"u")&&(R=C()),zt=Yr[mt]&&Yr[mt][R]),typeof zt>"u"||!zt.length||!zt[0]){var lr;for(xe in fr=[],Yr[mt])this.terminals_[xe]&&xe>2&&fr.push("'"+this.terminals_[xe]+"'");lr=E.showPosition?"Parse error on line "+(te+1)+":\n"+E.showPosition()+"\nExpecting "+fr.join(", ")+", got '"+(this.terminals_[R]||R)+"'":"Parse error on line "+(te+1)+": Unexpected "+(1==R?"end of input":"'"+(this.terminals_[R]||R)+"'"),this.parseError(lr,{text:E.match,token:this.terminals_[R]||R,line:E.yylineno,loc:A,expected:fr})}if(zt[0]instanceof Array&&zt.length>1)throw new Error("Parse Error: multiple actions possible at state: "+mt+", token: "+R);switch(zt[0]){case 1:er.push(R),Dr.push(E.yytext),_e.push(E.yylloc),er.push(zt[1]),R=null,Q?(R=Q,Q=null):(ne=E.yyleng,nr=E.yytext,te=E.yylineno,A=E.yylloc,be>0&&be--);break;case 2:if(Kt.$=Dr[Dr.length-(je=this.productions_[zt[1]][1])],Kt._$={first_line:_e[_e.length-(je||1)].first_line,last_line:_e[_e.length-1].last_line,first_column:_e[_e.length-(je||1)].first_column,last_column:_e[_e.length-1].last_column},v&&(Kt._$.range=[_e[_e.length-(je||1)].range[0],_e[_e.length-1].range[1]]),typeof(Vt=this.performAction.apply(Kt,[nr,ne,te,M.yy,zt[1],Dr,_e].concat(y)))<"u")return Vt;je&&(er=er.slice(0,-1*je*2),Dr=Dr.slice(0,-1*je),_e=_e.slice(0,-1*je)),er.push(this.productions_[zt[1]][0]),Dr.push(Kt.$),_e.push(Kt._$),er.push(Yr[er[er.length-2]][er[er.length-1]]);break;case 3:return!0}}return!0},"parse")};function ve(){this.yy={}}return we.lexer=function(){return{EOF:1,parseError:(0,j.K2)(function(Ae,er){if(!this.yy.parser)throw new Error(Ae);this.yy.parser.parseError(Ae,er)},"parseError"),setInput:(0,j.K2)(function(Ee,Ae){return this.yy=Ae||this.yy||{},this._input=Ee,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},"setInput"),input:(0,j.K2)(function(){var Ee=this._input[0];return this.yytext+=Ee,this.yyleng++,this.offset++,this.match+=Ee,this.matched+=Ee,Ee.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),Ee},"input"),unput:(0,j.K2)(function(Ee){var Ae=Ee.length,er=Ee.split(/(?:\r\n?|\n)/g);this._input=Ee+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-Ae),this.offset-=Ae;var Qe=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),er.length-1&&(this.yylineno-=er.length-1);var Dr=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:er?(er.length===Qe.length?this.yylloc.first_column:0)+Qe[Qe.length-er.length].length-er[0].length:this.yylloc.first_column-Ae},this.options.ranges&&(this.yylloc.range=[Dr[0],Dr[0]+this.yyleng-Ae]),this.yyleng=this.yytext.length,this},"unput"),more:(0,j.K2)(function(){return this._more=!0,this},"more"),reject:(0,j.K2)(function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},"reject"),less:(0,j.K2)(function(Ee){this.unput(this.match.slice(Ee))},"less"),pastInput:(0,j.K2)(function(){var Ee=this.matched.substr(0,this.matched.length-this.match.length);return(Ee.length>20?"...":"")+Ee.substr(-20).replace(/\n/g,"")},"pastInput"),upcomingInput:(0,j.K2)(function(){var Ee=this.match;return Ee.length<20&&(Ee+=this._input.substr(0,20-Ee.length)),(Ee.substr(0,20)+(Ee.length>20?"...":"")).replace(/\n/g,"")},"upcomingInput"),showPosition:(0,j.K2)(function(){var Ee=this.pastInput(),Ae=new Array(Ee.length+1).join("-");return Ee+this.upcomingInput()+"\n"+Ae+"^"},"showPosition"),test_match:(0,j.K2)(function(Ee,Ae){var er,Qe,Dr;if(this.options.backtrack_lexer&&(Dr={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(Dr.yylloc.range=this.yylloc.range.slice(0))),(Qe=Ee[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=Qe.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:Qe?Qe[Qe.length-1].length-Qe[Qe.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+Ee[0].length},this.yytext+=Ee[0],this.match+=Ee[0],this.matches=Ee,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(Ee[0].length),this.matched+=Ee[0],er=this.performAction.call(this,this.yy,this,Ae,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),er)return er;if(this._backtrack){for(var _e in Dr)this[_e]=Dr[_e];return!1}return!1},"test_match"),next:(0,j.K2)(function(){if(this.done)return this.EOF;var Ee,Ae,er,Qe;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var Dr=this._currentRules(),_e=0;_e<Dr.length;_e++)if((er=this._input.match(this.rules[Dr[_e]]))&&(!Ae||er[0].length>Ae[0].length)){if(Ae=er,Qe=_e,this.options.backtrack_lexer){if(!1!==(Ee=this.test_match(er,Dr[_e])))return Ee;if(this._backtrack){Ae=!1;continue}return!1}if(!this.options.flex)break}return Ae?!1!==(Ee=this.test_match(Ae,Dr[Qe]))&&Ee:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},"next"),lex:(0,j.K2)(function(){return this.next()||this.lex()},"lex"),begin:(0,j.K2)(function(Ae){this.conditionStack.push(Ae)},"begin"),popState:(0,j.K2)(function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},"popState"),_currentRules:(0,j.K2)(function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},"_currentRules"),topState:(0,j.K2)(function(Ae){return(Ae=this.conditionStack.length-1-Math.abs(Ae||0))>=0?this.conditionStack[Ae]:"INITIAL"},"topState"),pushState:(0,j.K2)(function(Ae){this.begin(Ae)},"pushState"),stateStackSize:(0,j.K2)(function(){return this.conditionStack.length},"stateStackSize"),options:{"case-insensitive":!0},performAction:(0,j.K2)(function(Ae,er,Qe,Dr){switch(Qe){case 0:return this.begin("acc_title"),24;case 1:return this.popState(),"acc_title_value";case 2:return this.begin("acc_descr"),26;case 3:return this.popState(),"acc_descr_value";case 4:this.begin("acc_descr_multiline");break;case 5:this.popState();break;case 6:return"acc_descr_multiline_value";case 7:return 33;case 8:return 34;case 9:return 35;case 10:return 36;case 11:return 10;case 12:case 23:case 28:case 35:break;case 13:return 8;case 14:return 50;case 15:return 70;case 16:return 4;case 17:return this.begin("block"),17;case 18:case 19:case 38:return 49;case 20:case 37:return 42;case 21:return 15;case 22:case 36:return 13;case 24:return 59;case 25:case 26:return 56;case 27:return 60;case 29:return this.popState(),19;case 30:case 73:return er.yytext[0];case 31:return 20;case 32:return 21;case 33:return this.begin("style"),44;case 34:return this.popState(),10;case 39:return this.begin("style"),37;case 40:return 43;case 41:case 45:case 46:case 59:return 63;case 42:case 43:case 44:case 52:case 54:case 61:return 65;case 47:case 48:case 49:case 50:case 51:case 53:case 60:return 64;case 55:case 56:case 57:case 58:return 66;case 62:return 67;case 63:case 66:case 67:case 68:return 68;case 64:case 65:return 69;case 69:return 41;case 70:return 47;case 71:return 40;case 72:return 48;case 74:return 6}},"anonymous"),rules:[/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:.*direction\s+TB[^\n]*)/i,/^(?:.*direction\s+BT[^\n]*)/i,/^(?:.*direction\s+RL[^\n]*)/i,/^(?:.*direction\s+LR[^\n]*)/i,/^(?:[\n]+)/i,/^(?:\s+)/i,/^(?:[\s]+)/i,/^(?:"[^"%\r\n\v\b\\]+")/i,/^(?:"[^"]*")/i,/^(?:erDiagram\b)/i,/^(?:\{)/i,/^(?:#)/i,/^(?:#)/i,/^(?:,)/i,/^(?::::)/i,/^(?::)/i,/^(?:\s+)/i,/^(?:\b((?:PK)|(?:FK)|(?:UK))\b)/i,/^(?:([^\s]*)[~].*[~]([^\s]*))/i,/^(?:([\*A-Za-z_\u00C0-\uFFFF][A-Za-z0-9\-\_\[\]\(\)\u00C0-\uFFFF\*]*))/i,/^(?:"[^"]*")/i,/^(?:[\n]+)/i,/^(?:\})/i,/^(?:.)/i,/^(?:\[)/i,/^(?:\])/i,/^(?:style\b)/i,/^(?:[\n]+)/i,/^(?:\s+)/i,/^(?::)/i,/^(?:,)/i,/^(?:#)/i,/^(?:classDef\b)/i,/^(?:class\b)/i,/^(?:one or zero\b)/i,/^(?:one or more\b)/i,/^(?:one or many\b)/i,/^(?:1\+)/i,/^(?:\|o\b)/i,/^(?:zero or one\b)/i,/^(?:zero or more\b)/i,/^(?:zero or many\b)/i,/^(?:0\+)/i,/^(?:\}o\b)/i,/^(?:many\(0\))/i,/^(?:many\(1\))/i,/^(?:many\b)/i,/^(?:\}\|)/i,/^(?:one\b)/i,/^(?:only one\b)/i,/^(?:1\b)/i,/^(?:\|\|)/i,/^(?:o\|)/i,/^(?:o\{)/i,/^(?:\|\{)/i,/^(?:\s*u\b)/i,/^(?:\.\.)/i,/^(?:--)/i,/^(?:to\b)/i,/^(?:optionally to\b)/i,/^(?:\.-)/i,/^(?:-\.)/i,/^(?:([^\x00-\x7F]|\w|-|\*)+)/i,/^(?:;)/i,/^(?:([^\x00-\x7F]|\w|-|\*)+)/i,/^(?:[0-9])/i,/^(?:.)/i,/^(?:$)/i],conditions:{style:{rules:[34,35,36,37,38,69,70],inclusive:!1},acc_descr_multiline:{rules:[5,6],inclusive:!1},acc_descr:{rules:[3],inclusive:!1},acc_title:{rules:[1],inclusive:!1},block:{rules:[23,24,25,26,27,28,29,30],inclusive:!1},INITIAL:{rules:[0,2,4,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,31,32,33,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,71,72,73,74],inclusive:!0}}}}(),(0,j.K2)(ve,"Parser"),ve.prototype=we,we.Parser=ve,new ve}();Wr.parser=Wr;var Br=Wr,Gr=(class{constructor(){this.entities=new Map,this.relationships=[],this.classes=new Map,this.direction="TB",this.Cardinality={ZERO_OR_ONE:"ZERO_OR_ONE",ZERO_OR_MORE:"ZERO_OR_MORE",ONE_OR_MORE:"ONE_OR_MORE",ONLY_ONE:"ONLY_ONE",MD_PARENT:"MD_PARENT"},this.Identification={NON_IDENTIFYING:"NON_IDENTIFYING",IDENTIFYING:"IDENTIFYING"},this.setAccTitle=Gt.SV,this.getAccTitle=Gt.iN,this.setAccDescription=Gt.EI,this.getAccDescription=Gt.m7,this.setDiagramTitle=Gt.ke,this.getDiagramTitle=Gt.ab,this.getConfig=(0,j.K2)(()=>(0,Gt.D7)().er,"getConfig"),this.clear(),this.addEntity=this.addEntity.bind(this),this.addAttributes=this.addAttributes.bind(this),this.addRelationship=this.addRelationship.bind(this),this.setDirection=this.setDirection.bind(this),this.addCssStyles=this.addCssStyles.bind(this),this.addClass=this.addClass.bind(this),this.setClass=this.setClass.bind(this),this.setAccTitle=this.setAccTitle.bind(this),this.setAccDescription=this.setAccDescription.bind(this)}addEntity(z,dt=""){return this.entities.has(z)?!this.entities.get(z)?.alias&&dt&&(this.entities.get(z).alias=dt,j.Rm.info(`Add alias '${dt}' to entity '${z}'`)):(this.entities.set(z,{id:`entity-${z}-${this.entities.size}`,label:z,attributes:[],alias:dt,shape:"erBox",look:(0,Gt.D7)().look??"default",cssClasses:"default",cssStyles:[]}),j.Rm.info("Added new entity :",z)),this.entities.get(z)}getEntity(z){return this.entities.get(z)}getEntities(){return this.entities}getClasses(){return this.classes}addAttributes(z,dt){const Bt=this.addEntity(z);let Se;for(Se=dt.length-1;Se>=0;Se--)dt[Se].keys||(dt[Se].keys=[]),dt[Se].comment||(dt[Se].comment=""),Bt.attributes.push(dt[Se]),j.Rm.debug("Added attribute ",dt[Se].name)}addRelationship(z,dt,Bt,Se){const X=this.entities.get(z),re=this.entities.get(Bt);if(!X||!re)return;const S={entityA:X.id,roleA:dt,entityB:re.id,relSpec:Se};this.relationships.push(S),j.Rm.debug("Added new relationship :",S)}getRelationships(){return this.relationships}getDirection(){return this.direction}setDirection(z){this.direction=z}getCompiledStyles(z){let dt=[];for(const Bt of z){const Se=this.classes.get(Bt);Se?.styles&&(dt=[...dt,...Se.styles??[]].map(X=>X.trim())),Se?.textStyles&&(dt=[...dt,...Se.textStyles??[]].map(X=>X.trim()))}return dt}addCssStyles(z,dt){for(const Bt of z){const Se=this.entities.get(Bt);if(!dt||!Se)return;for(const X of dt)Se.cssStyles.push(X)}}addClass(z,dt){z.forEach(Bt=>{let Se=this.classes.get(Bt);void 0===Se&&(Se={id:Bt,styles:[],textStyles:[]},this.classes.set(Bt,Se)),dt&&dt.forEach(function(X){if(/color/.exec(X)){const re=X.replace("fill","bgFill");Se.textStyles.push(re)}Se.styles.push(X)})})}setClass(z,dt){for(const Bt of z){const Se=this.entities.get(Bt);if(Se)for(const X of dt)Se.cssClasses+=" "+X}}clear(){this.entities=new Map,this.classes=new Map,this.relationships=[],(0,Gt.IU)()}getData(){const z=[],dt=[],Bt=(0,Gt.D7)();for(const X of this.entities.keys()){const re=this.entities.get(X);re&&(re.cssCompiledStyles=this.getCompiledStyles(re.cssClasses.split(" ")),z.push(re))}let Se=0;for(const X of this.relationships){const re={id:(0,bt.rY)(X.entityA,X.entityB,{prefix:"id",counter:Se++}),type:"normal",curve:"basis",start:X.entityA,end:X.entityB,label:X.roleA,labelpos:"c",thickness:"normal",classes:"relationshipLine",arrowTypeStart:X.relSpec.cardB.toLowerCase(),arrowTypeEnd:X.relSpec.cardA.toLowerCase(),pattern:"IDENTIFYING"==X.relSpec.relType?"solid":"dashed",look:Bt.look};dt.push(re)}return{nodes:z,edges:dt,other:{},config:Bt,direction:"TB"}}static#t=vr=()=>((0,ie.A)(this,"ErDB"),(0,j.K2)(this,"ErDB"),this)},vr()),aa={};(0,j.VA)(aa,{draw:()=>zr});var zr=(0,j.K2)(function(){var z=(0,lt.A)(function*(dt,Bt,Se,X){j.Rm.info("REF0:"),j.Rm.info("Drawing er diagram (unified)",Bt);const{securityLevel:re,er:S,layout:ee}=(0,Gt.D7)(),Rt=X.db.getData(),qt=(0,L.A)(Bt,re);Rt.type=X.type,Rt.layoutAlgorithm=(0,Mt.q7)(ee),Rt.config.flowchart.nodeSpacing=S?.nodeSpacing||140,Rt.config.flowchart.rankSpacing=S?.rankSpacing||80,Rt.direction=X.db.getDirection(),Rt.markers=["only_one","zero_or_one","one_or_more","zero_or_more"],Rt.diagramId=Bt,yield(0,Mt.XX)(Rt,qt),"elk"===Rt.layoutAlgorithm&&qt.select(".edges").lower();const V=qt.selectAll('[id*="-background"]');Array.from(V).length>0&&V.each(function(){const Y=(0,hr.Ltv)(this),St=Y.attr("id").replace("-background",""),Ut=qt.select(`#${CSS.escape(St)}`);if(!Ut.empty()){const ye=Ut.attr("transform");Y.attr("transform",ye)}}),bt._K.insertTitle(qt,"erDiagramTitleText",S?.titleTopMargin??25,X.db.getDiagramTitle()),(0,D.P)(qt,8,"erDiagram",S?.useMaxWidth??!0)});return function(dt,Bt,Se,X){return z.apply(this,arguments)}}(),"draw"),Or=(0,j.K2)((z,dt)=>{const Bt=ze.Ix,Se=Bt(z,"r"),X=Bt(z,"g"),re=Bt(z,"b");return ze.B3(Se,X,re,dt)},"fade"),Ir=(0,j.K2)(z=>`\n  .entityBox {\n    fill: ${z.mainBkg};\n    stroke: ${z.nodeBorder};\n  }\n\n  .relationshipLabelBox {\n    fill: ${z.tertiaryColor};\n    opacity: 0.7;\n    background-color: ${z.tertiaryColor};\n      rect {\n        opacity: 0.5;\n      }\n  }\n\n  .labelBkg {\n    background-color: ${Or(z.tertiaryColor,.5)};\n  }\n\n  .edgeLabel .label {\n    fill: ${z.nodeBorder};\n    font-size: 14px;\n  }\n\n  .label {\n    font-family: ${z.fontFamily};\n    color: ${z.nodeTextColor||z.textColor};\n  }\n\n  .edge-pattern-dashed {\n    stroke-dasharray: 8,8;\n  }\n\n  .node rect,\n  .node circle,\n  .node ellipse,\n  .node polygon\n  {\n    fill: ${z.mainBkg};\n    stroke: ${z.nodeBorder};\n    stroke-width: 1px;\n  }\n\n  .relationshipLine {\n    stroke: ${z.lineColor};\n    stroke-width: 1;\n    fill: none;\n  }\n\n  .marker {\n    fill: none !important;\n    stroke: ${z.lineColor} !important;\n    stroke-width: 1;\n  }\n`,"getStyles"),Xe={parser:Br,get db(){return new Gr},renderer:aa,styles:Ir}},80525:(ri,Er,P)=>{"use strict";function ie(L,D){L.accDescr&&D.setAccDescription?.(L.accDescr),L.accTitle&&D.setAccTitle?.(L.accTitle),L.title&&D.setDiagramTitle?.(L.title)}P.d(Er,{S:()=>ie}),(0,P(32303).K2)(ie,"populateCommonDb")},84545:(ri,Er,P)=>{"use strict";P.r(Er),P.d(Er,{diagram:()=>re});var Br,lt=P(89204),ie=P(45027),L=P(97787),D=P(24715),Mt=P(5675),ut=P(8086),G=P(72271),At=(P(98954),P(36384),P(87452)),j=(P(32239),P(19753),P(59355),P(52052)),hr=P(79006),ze=P(32303),vr=P(40622),Wr=P(79687),aa=(class{constructor(){this.vertexCounter=0,this.config=(0,hr.D7)(),this.vertices=new Map,this.edges=[],this.classes=new Map,this.subGraphs=[],this.subGraphLookup=new Map,this.tooltips=new Map,this.subCount=0,this.firstGraphFlag=!0,this.secCount=-1,this.posCrossRef=[],this.funs=[],this.setAccTitle=hr.SV,this.setAccDescription=hr.EI,this.setDiagramTitle=hr.ke,this.getAccTitle=hr.iN,this.getAccDescription=hr.m7,this.getDiagramTitle=hr.ab,this.funs.push(this.setupToolTips.bind(this)),this.addVertex=this.addVertex.bind(this),this.firstGraph=this.firstGraph.bind(this),this.setDirection=this.setDirection.bind(this),this.addSubGraph=this.addSubGraph.bind(this),this.addLink=this.addLink.bind(this),this.setLink=this.setLink.bind(this),this.updateLink=this.updateLink.bind(this),this.addClass=this.addClass.bind(this),this.setClass=this.setClass.bind(this),this.destructLink=this.destructLink.bind(this),this.setClickEvent=this.setClickEvent.bind(this),this.setTooltip=this.setTooltip.bind(this),this.updateLinkInterpolate=this.updateLinkInterpolate.bind(this),this.setClickFun=this.setClickFun.bind(this),this.bindFunctions=this.bindFunctions.bind(this),this.lex={firstGraph:this.firstGraph.bind(this)},this.clear(),this.setGen("gen-2")}sanitizeText(S){return hr.Y2.sanitizeText(S,this.config)}lookUpDomId(S){for(const ee of this.vertices.values())if(ee.id===S)return ee.domId;return S}addVertex(S,ee,Rt,qt,V,gt,Y={},Nt){if(!S||0===S.trim().length)return;let St;if(void 0!==Nt){let Pe;Pe=Nt.includes("\n")?Nt+"\n":"{\n"+Nt+"\n}",St=(0,D.H)(Pe,{schema:D.r})}const Ut=this.edges.find(Pe=>Pe.id===S);if(Ut){const Pe=St;return void 0!==Pe?.animate&&(Ut.animate=Pe.animate),void 0!==Pe?.animation&&(Ut.animation=Pe.animation),void(void 0!==Pe?.curve&&(Ut.interpolate=Pe.curve))}let ye,le=this.vertices.get(S);if(void 0===le&&(le={id:S,labelType:"text",domId:"flowchart-"+S+"-"+this.vertexCounter,styles:[],classes:[]},this.vertices.set(S,le)),this.vertexCounter++,void 0!==ee?(this.config=(0,hr.D7)(),ye=this.sanitizeText(ee.text.trim()),le.labelType=ee.type,ye.startsWith('"')&&ye.endsWith('"')&&(ye=ye.substring(1,ye.length-1)),le.text=ye):void 0===le.text&&(le.text=S),void 0!==Rt&&(le.type=Rt),qt?.forEach(Pe=>{le.styles.push(Pe)}),V?.forEach(Pe=>{le.classes.push(Pe)}),void 0!==gt&&(le.dir=gt),void 0===le.props?le.props=Y:void 0!==Y&&Object.assign(le.props,Y),void 0!==St){if(St.shape){if(St.shape!==St.shape.toLowerCase()||St.shape.includes("_"))throw new Error(`No such shape: ${St.shape}. Shape names should be lowercase.`);if(!(0,At.aP)(St.shape))throw new Error(`No such shape: ${St.shape}.`);le.type=St?.shape}St?.label&&(le.text=St?.label),St?.icon&&(le.icon=St?.icon,!St.label?.trim()&&le.text===S&&(le.text="")),St?.form&&(le.form=St?.form),St?.pos&&(le.pos=St?.pos),St?.img&&(le.img=St?.img,!St.label?.trim()&&le.text===S&&(le.text="")),St?.constraint&&(le.constraint=St.constraint),St.w&&(le.assetWidth=Number(St.w)),St.h&&(le.assetHeight=Number(St.h))}}addSingleLink(S,ee,Rt,qt){const Y={start:S,end:ee,type:void 0,text:"",labelType:"text",classes:[],isUserDefinedId:!1,interpolate:this.edges.defaultInterpolate};ze.Rm.info("abc78 Got edge...",Y);const Nt=Rt.text;if(void 0!==Nt&&(Y.text=this.sanitizeText(Nt.text.trim()),Y.text.startsWith('"')&&Y.text.endsWith('"')&&(Y.text=Y.text.substring(1,Y.text.length-1)),Y.labelType=Nt.type),void 0!==Rt&&(Y.type=Rt.type,Y.stroke=Rt.stroke,Y.length=Rt.length>10?10:Rt.length),qt&&!this.edges.some(St=>St.id===qt))Y.id=qt,Y.isUserDefinedId=!0;else{const St=this.edges.filter(Ut=>Ut.start===Y.start&&Ut.end===Y.end);Y.id=(0,j.rY)(Y.start,Y.end,0===St.length?{counter:0,prefix:"L"}:{counter:St.length+1,prefix:"L"})}if(!(this.edges.length<(this.config.maxEdges??500)))throw new Error(`Edge limit exceeded. ${this.edges.length} edges found, but the limit is ${this.config.maxEdges}.\n\nInitialize mermaid with maxEdges set to a higher number to allow more edges.\nYou cannot set this config via configuration inside the diagram as it is a secure config.\nYou have to call mermaid.initialize.`);ze.Rm.info("Pushing edge..."),this.edges.push(Y)}isLinkData(S){return null!==S&&"object"==typeof S&&"id"in S&&"string"==typeof S.id}addLink(S,ee,Rt){const qt=this.isLinkData(Rt)?Rt.id.replace("@",""):void 0;ze.Rm.info("addLink",S,ee,qt);for(const V of S)for(const gt of ee)this.addSingleLink(V,gt,Rt,V===S[S.length-1]&&gt===ee[0]?qt:void 0)}updateLinkInterpolate(S,ee){S.forEach(Rt=>{"default"===Rt?this.edges.defaultInterpolate=ee:this.edges[Rt].interpolate=ee})}updateLink(S,ee){S.forEach(Rt=>{if("number"==typeof Rt&&Rt>=this.edges.length)throw new Error(`The index ${Rt} for linkStyle is out of bounds. Valid indices for linkStyle are between 0 and ${this.edges.length-1}. (Help: Ensure that the index is within the range of existing edges.)`);"default"===Rt?this.edges.defaultStyle=ee:(this.edges[Rt].style=ee,(this.edges[Rt]?.style?.length??0)>0&&!this.edges[Rt]?.style?.some(qt=>qt?.startsWith("fill"))&&this.edges[Rt]?.style?.push("fill:none"))})}addClass(S,ee){const Rt=ee.join().replace(/\\,/g,"\xa7\xa7\xa7").replace(/,/g,";").replace(/\xa7\xa7\xa7/g,",").split(";");S.split(",").forEach(qt=>{let V=this.classes.get(qt);void 0===V&&(V={id:qt,styles:[],textStyles:[]},this.classes.set(qt,V)),Rt?.forEach(gt=>{if(/color/.exec(gt)){const Y=gt.replace("fill","bgFill");V.textStyles.push(Y)}V.styles.push(gt)})})}setDirection(S){this.direction=S.trim(),/.*</.exec(this.direction)&&(this.direction="RL"),/.*\^/.exec(this.direction)&&(this.direction="BT"),/.*>/.exec(this.direction)&&(this.direction="LR"),/.*v/.exec(this.direction)&&(this.direction="TB"),"TD"===this.direction&&(this.direction="TB")}setClass(S,ee){for(const Rt of S.split(",")){const qt=this.vertices.get(Rt);qt&&qt.classes.push(ee);const V=this.edges.find(Y=>Y.id===Rt);V&&V.classes.push(ee);const gt=this.subGraphLookup.get(Rt);gt&&gt.classes.push(ee)}}setTooltip(S,ee){if(void 0!==ee){ee=this.sanitizeText(ee);for(const Rt of S.split(","))this.tooltips.set("gen-1"===this.version?this.lookUpDomId(Rt):Rt,ee)}}setClickFun(S,ee,Rt){const qt=this.lookUpDomId(S);if("loose"!==(0,hr.D7)().securityLevel||void 0===ee)return;let V=[];if("string"==typeof Rt){V=Rt.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/);for(let Y=0;Y<V.length;Y++){let Nt=V[Y].trim();Nt.startsWith('"')&&Nt.endsWith('"')&&(Nt=Nt.substr(1,Nt.length-2)),V[Y]=Nt}}0===V.length&&V.push(S);const gt=this.vertices.get(S);gt&&(gt.haveCallback=!0,this.funs.push(()=>{const Y=document.querySelector(`[id="${qt}"]`);null!==Y&&Y.addEventListener("click",()=>{j._K.runFunc(ee,...V)},!1)}))}setLink(S,ee,Rt){S.split(",").forEach(qt=>{const V=this.vertices.get(qt);void 0!==V&&(V.link=j._K.formatUrl(ee,this.config),V.linkTarget=Rt)}),this.setClass(S,"clickable")}getTooltip(S){return this.tooltips.get(S)}setClickEvent(S,ee,Rt){S.split(",").forEach(qt=>{this.setClickFun(qt,ee,Rt)}),this.setClass(S,"clickable")}bindFunctions(S){this.funs.forEach(ee=>{ee(S)})}getDirection(){return this.direction?.trim()}getVertices(){return this.vertices}getEdges(){return this.edges}getClasses(){return this.classes}setupToolTips(S){let ee=(0,vr.Ltv)(".mermaidTooltip");null===(ee._groups||ee)[0][0]&&(ee=(0,vr.Ltv)("body").append("div").attr("class","mermaidTooltip").style("opacity",0)),(0,vr.Ltv)(S).select("svg").selectAll("g.node").on("mouseover",V=>{const gt=(0,vr.Ltv)(V.currentTarget);if(null===gt.attr("title"))return;const Nt=V.currentTarget?.getBoundingClientRect();ee.transition().duration(200).style("opacity",".9"),ee.text(gt.attr("title")).style("left",window.scrollX+Nt.left+(Nt.right-Nt.left)/2+"px").style("top",window.scrollY+Nt.bottom+"px"),ee.html(ee.html().replace(/&lt;br\/&gt;/g,"<br/>")),gt.classed("hover",!0)}).on("mouseout",V=>{ee.transition().duration(500).style("opacity",0),(0,vr.Ltv)(V.currentTarget).classed("hover",!1)})}clear(S="gen-2"){this.vertices=new Map,this.classes=new Map,this.edges=[],this.funs=[this.setupToolTips.bind(this)],this.subGraphs=[],this.subGraphLookup=new Map,this.subCount=0,this.tooltips=new Map,this.firstGraphFlag=!0,this.version=S,this.config=(0,hr.D7)(),(0,hr.IU)()}setGen(S){this.version=S||"gen-2"}defaultStyle(){return"fill:#ffa;stroke: #f66; stroke-width: 3px; stroke-dasharray: 5, 5;fill:#ffa;stroke: #666;"}addSubGraph(S,ee,Rt){let qt=S.text.trim(),V=Rt.text;S===Rt&&/\s/.exec(Rt.text)&&(qt=void 0);const Y=(0,ze.K2)(le=>{const Pe={boolean:{},number:{},string:{}},oe=[];let qe;return{nodeList:le.filter(function(Et){const Tt=typeof Et;return Et.stmt&&"dir"===Et.stmt?(qe=Et.value,!1):""!==Et.trim()&&(Tt in Pe?!Pe[Tt].hasOwnProperty(Et)&&(Pe[Tt][Et]=!0):!oe.includes(Et)&&oe.push(Et))}),dir:qe}},"uniq")(ee.flat()),Nt=Y.nodeList;let St=Y.dir;const Ut=(0,hr.D7)().flowchart??{};if(St=St??(Ut.inheritDir?this.getDirection()??(0,hr.D7)().direction??void 0:void 0),"gen-1"===this.version)for(let le=0;le<Nt.length;le++)Nt[le]=this.lookUpDomId(Nt[le]);qt=qt??"subGraph"+this.subCount,V=V||"",V=this.sanitizeText(V),this.subCount=this.subCount+1;const ye={id:qt,nodes:Nt,title:V.trim(),classes:[],dir:St,labelType:Rt.type};return ze.Rm.info("Adding",ye.id,ye.nodes,ye.dir),ye.nodes=this.makeUniq(ye,this.subGraphs).nodes,this.subGraphs.push(ye),this.subGraphLookup.set(qt,ye),qt}getPosForId(S){for(const[ee,Rt]of this.subGraphs.entries())if(Rt.id===S)return ee;return-1}indexNodes2(S,ee){const Rt=this.subGraphs[ee].nodes;if(this.secCount=this.secCount+1,this.secCount>2e3)return{result:!1,count:0};if(this.posCrossRef[this.secCount]=ee,this.subGraphs[ee].id===S)return{result:!0,count:0};let qt=0,V=1;for(;qt<Rt.length;){const gt=this.getPosForId(Rt[qt]);if(gt>=0){const Y=this.indexNodes2(S,gt);if(Y.result)return{result:!0,count:V+Y.count};V+=Y.count}qt+=1}return{result:!1,count:V}}getDepthFirstPos(S){return this.posCrossRef[S]}indexNodes(){this.secCount=-1,this.subGraphs.length>0&&this.indexNodes2("none",this.subGraphs.length-1)}getSubGraphs(){return this.subGraphs}firstGraph(){return!!this.firstGraphFlag&&(this.firstGraphFlag=!1,!0)}destructStartLink(S){let ee=S.trim(),Rt="arrow_open";switch(ee[0]){case"<":Rt="arrow_point",ee=ee.slice(1);break;case"x":Rt="arrow_cross",ee=ee.slice(1);break;case"o":Rt="arrow_circle",ee=ee.slice(1)}let qt="normal";return ee.includes("=")&&(qt="thick"),ee.includes(".")&&(qt="dotted"),{type:Rt,stroke:qt}}countChar(S,ee){const Rt=ee.length;let qt=0;for(let V=0;V<Rt;++V)ee[V]===S&&++qt;return qt}destructEndLink(S){const ee=S.trim();let Rt=ee.slice(0,-1),qt="arrow_open";switch(ee.slice(-1)){case"x":qt="arrow_cross",ee.startsWith("x")&&(qt="double_"+qt,Rt=Rt.slice(1));break;case">":qt="arrow_point",ee.startsWith("<")&&(qt="double_"+qt,Rt=Rt.slice(1));break;case"o":qt="arrow_circle",ee.startsWith("o")&&(qt="double_"+qt,Rt=Rt.slice(1))}let V="normal",gt=Rt.length-1;Rt.startsWith("=")&&(V="thick"),Rt.startsWith("~")&&(V="invisible");const Y=this.countChar(".",Rt);return Y&&(V="dotted",gt=Y),{type:qt,stroke:V,length:gt}}destructLink(S,ee){const Rt=this.destructEndLink(S);let qt;if(ee){if(qt=this.destructStartLink(ee),qt.stroke!==Rt.stroke)return{type:"INVALID",stroke:"INVALID"};if("arrow_open"===qt.type)qt.type=Rt.type;else{if(qt.type!==Rt.type)return{type:"INVALID",stroke:"INVALID"};qt.type="double_"+qt.type}return"double_arrow"===qt.type&&(qt.type="double_arrow_point"),qt.length=Rt.length,qt}return Rt}exists(S,ee){for(const Rt of S)if(Rt.nodes.includes(ee))return!0;return!1}makeUniq(S,ee){const Rt=[];return S.nodes.forEach((qt,V)=>{this.exists(ee,qt)||Rt.push(S.nodes[V])}),{nodes:Rt}}getTypeFromVertex(S){if(S.img)return"imageSquare";if(S.icon)return"circle"===S.form?"iconCircle":"square"===S.form?"iconSquare":"rounded"===S.form?"iconRounded":"icon";switch(S.type){case"square":case void 0:return"squareRect";case"round":return"roundedRect";case"ellipse":return"ellipse";default:return S.type}}findNode(S,ee){return S.find(Rt=>Rt.id===ee)}destructEdgeType(S){let ee="none",Rt="arrow_point";switch(S){case"arrow_point":case"arrow_circle":case"arrow_cross":Rt=S;break;case"double_arrow_point":case"double_arrow_circle":case"double_arrow_cross":ee=S.replace("double_",""),Rt=ee}return{arrowTypeStart:ee,arrowTypeEnd:Rt}}addNodeFromVertex(S,ee,Rt,qt,V,gt){const Y=Rt.get(S.id),Nt=qt.get(S.id)??!1,St=this.findNode(ee,S.id);if(St)St.cssStyles=S.styles,St.cssCompiledStyles=this.getCompiledStyles(S.classes),St.cssClasses=S.classes.join(" ");else{const Ut={id:S.id,label:S.text,labelStyle:"",parentId:Y,padding:V.flowchart?.padding||8,cssStyles:S.styles,cssCompiledStyles:this.getCompiledStyles(["default","node",...S.classes]),cssClasses:"default "+S.classes.join(" "),dir:S.dir,domId:S.domId,look:gt,link:S.link,linkTarget:S.linkTarget,tooltip:this.getTooltip(S.id),icon:S.icon,pos:S.pos,img:S.img,assetWidth:S.assetWidth,assetHeight:S.assetHeight,constraint:S.constraint};ee.push(Nt?{...Ut,isGroup:!0,shape:"rect"}:{...Ut,isGroup:!1,shape:this.getTypeFromVertex(S)})}}getCompiledStyles(S){let ee=[];for(const Rt of S){const qt=this.classes.get(Rt);qt?.styles&&(ee=[...ee,...qt.styles??[]].map(V=>V.trim())),qt?.textStyles&&(ee=[...ee,...qt.textStyles??[]].map(V=>V.trim()))}return ee}getData(){const S=(0,hr.D7)(),ee=[],Rt=[],qt=this.getSubGraphs(),V=new Map,gt=new Map;for(let St=qt.length-1;St>=0;St--){const Ut=qt[St];Ut.nodes.length>0&&gt.set(Ut.id,!0);for(const ye of Ut.nodes)V.set(ye,Ut.id)}for(let St=qt.length-1;St>=0;St--){const Ut=qt[St];ee.push({id:Ut.id,label:Ut.title,labelStyle:"",parentId:V.get(Ut.id),padding:8,cssCompiledStyles:this.getCompiledStyles(Ut.classes),cssClasses:Ut.classes.join(" "),shape:"rect",dir:Ut.dir,isGroup:!0,look:S.look})}this.getVertices().forEach(St=>{this.addNodeFromVertex(St,ee,V,gt,S,S.look||"classic")});const Nt=this.getEdges();return Nt.forEach((St,Ut)=>{const{arrowTypeStart:ye,arrowTypeEnd:le}=this.destructEdgeType(St.type),Pe=[...Nt.defaultStyle??[]];St.style&&Pe.push(...St.style);const oe={id:(0,j.rY)(St.start,St.end,{counter:Ut,prefix:"L"},St.id),isUserDefinedId:St.isUserDefinedId,start:St.start,end:St.end,type:St.type??"normal",label:St.text,labelpos:"c",thickness:St.stroke,minlen:St.length,classes:"invisible"===St?.stroke?"":"edge-thickness-normal edge-pattern-solid flowchart-link",arrowTypeStart:"invisible"===St?.stroke||"arrow_open"===St?.type?"none":ye,arrowTypeEnd:"invisible"===St?.stroke||"arrow_open"===St?.type?"none":le,arrowheadStyle:"fill: #333",cssCompiledStyles:this.getCompiledStyles(St.classes),labelStyle:Pe,style:Pe,pattern:St.stroke,look:S.look,animate:St.animate,animation:St.animation,curve:St.interpolate||this.edges.defaultInterpolate||S.flowchart?.curve};Rt.push(oe)}),{nodes:ee,edges:Rt,other:{},config:S}}defaultConfig(){return hr.ME.flowchart}static#t=Br=()=>((0,ie.A)(this,"FlowDB"),(0,ze.K2)(this,"FlowDB"),this)},Br()),Be={getClasses:(0,ze.K2)(function(S,ee){return ee.db.getClasses()},"getClasses"),draw:(0,ze.K2)(function(){var S=(0,lt.A)(function*(ee,Rt,qt,V){ze.Rm.info("REF0:"),ze.Rm.info("Drawing state diagram (v2)",Rt);const{securityLevel:gt,flowchart:Y,layout:Nt}=(0,hr.D7)();let St;"sandbox"===gt&&(St=(0,vr.Ltv)("#i"+Rt));const Ut="sandbox"===gt?St.nodes()[0].contentDocument:document;ze.Rm.debug("Before getData: ");const ye=V.db.getData();ze.Rm.debug("Data: ",ye);const le=(0,Mt.A)(Rt,gt),Pe=V.db.getDirection();ye.type=V.type,ye.layoutAlgorithm=(0,G.q7)(Nt),"dagre"===ye.layoutAlgorithm&&"elk"===Nt&&ze.Rm.warn("flowchart-elk was moved to an external package in Mermaid v11. Please refer [release notes](https://github.com/mermaid-js/mermaid/releases/tag/v11.0.0) for more details. This diagram will be rendered using `dagre` layout as a fallback."),ye.direction=Pe,ye.nodeSpacing=Y?.nodeSpacing||50,ye.rankSpacing=Y?.rankSpacing||50,ye.markers=["point","circle","cross"],ye.diagramId=Rt,ze.Rm.debug("REF1:",ye),yield(0,G.XX)(ye,le);const oe=ye.config.flowchart?.diagramPadding??8;j._K.insertTitle(le,"flowchartTitleText",Y?.titleTopMargin||0,V.db.getDiagramTitle()),(0,ut.P)(le,oe,"flowchart",Y?.useMaxWidth||!1);for(const qe of ye.nodes){const We=(0,vr.Ltv)(`#${Rt} [id="${qe.id}"]`);if(!We||!qe.link)continue;const Et=Ut.createElementNS("http://www.w3.org/2000/svg","a");Et.setAttributeNS("http://www.w3.org/2000/svg","class",qe.cssClasses),Et.setAttributeNS("http://www.w3.org/2000/svg","rel","noopener"),"sandbox"===gt?Et.setAttributeNS("http://www.w3.org/2000/svg","target","_top"):qe.linkTarget&&Et.setAttributeNS("http://www.w3.org/2000/svg","target",qe.linkTarget);const Tt=We.insert(function(){return Et},":first-child"),B=We.select(".label-container");B&&Tt.append(function(){return B.node()});const N=We.select(".label");N&&Tt.append(function(){return N.node()})}});return function(ee,Rt,qt,V){return S.apply(this,arguments)}}(),"draw")},Ir=function(){var S=(0,ze.K2)(function(Ja,_a,qa,Ha){for(qa=qa||{},Ha=Ja.length;Ha--;qa[Ja[Ha]]=_a);return qa},"o"),ee=[1,4],Rt=[1,3],qt=[1,5],V=[1,8,9,10,11,27,34,36,38,44,60,84,85,86,87,88,89,102,105,106,109,111,114,115,116,121,122,123,124],gt=[2,2],Y=[1,13],Nt=[1,14],St=[1,15],Ut=[1,16],ye=[1,23],le=[1,25],Pe=[1,26],oe=[1,27],qe=[1,49],We=[1,48],Et=[1,29],Tt=[1,30],B=[1,31],N=[1,32],et=[1,33],yt=[1,44],it=[1,46],rt=[1,42],_t=[1,47],ht=[1,43],Ot=[1,50],H=[1,45],ot=[1,51],ke=[1,52],Pt=[1,34],Zt=[1,35],pe=[1,36],Re=[1,37],Ze=[1,57],de=[1,8,9,10,11,27,32,34,36,38,44,60,84,85,86,87,88,89,102,105,106,109,111,114,115,116,121,122,123,124],yr=[1,61],mr=[1,60],Wt=[1,62],we=[8,9,11,75,77,78],sr=[1,78],ve=[1,91],ce=[1,96],Ee=[1,95],Ae=[1,92],er=[1,88],Qe=[1,94],Dr=[1,90],_e=[1,97],Yr=[1,93],nr=[1,98],te=[1,89],ne=[8,9,10,11,40,75,77,78],be=[8,9,10,11,40,46,75,77,78],ar=[8,9,10,11,29,40,44,46,48,50,52,54,56,58,60,63,65,67,68,70,75,77,78,89,102,105,106,109,111,114,115,116],g=[8,9,11,44,60,75,77,78,89,102,105,106,109,111,114,115,116],y=[44,60,89,102,105,106,109,111,114,115,116],E=[1,121],M=[1,122],m=[1,124],A=[1,123],v=[44,60,62,74,89,102,105,106,109,111,114,115,116],b=[1,133],C=[1,147],R=[1,148],Q=[1,149],mt=[1,150],zt=[1,135],jt=[1,137],Vt=[1,141],Kt=[1,142],xe=[1,143],je=[1,144],Ke=[1,145],fr=[1,146],lr=[1,151],br=[1,152],$e=[1,131],He=[1,132],wr=[1,139],kr=[1,134],Kr=[1,138],_r=[1,136],Jr=[8,9,10,11,27,32,34,36,38,44,60,84,85,86,87,88,89,102,105,106,109,111,114,115,116,121,122,123,124],Lr=[1,154],ha=[1,156],ia=[8,9,11],jr=[8,9,10,11,14,44,60,89,105,106,109,111,114,115,116],Qr=[1,176],or=[1,172],ur=[1,173],W=[1,177],$t=[1,174],Ye=[1,175],Fe=[77,116,119],Tr=[8,9,10,11,12,14,27,29,32,44,60,75,84,85,86,87,88,89,90,105,109,111,114,115,116],pr=[10,106],da=[31,49,51,53,55,57,62,64,66,67,69,71,116,117,118],Pa=[1,247],Ma=[1,245],Wa=[1,249],Ia=[1,243],ba=[1,244],sa=[1,246],Sa=[1,248],ea=[1,250],Va=[1,268],gr=[8,9,11,106],Ua=[8,9,10,11,60,84,105,106,109,110,111,112],ir={trace:(0,ze.K2)(function(){},"trace"),yy:{},symbols_:{error:2,start:3,graphConfig:4,document:5,line:6,statement:7,SEMI:8,NEWLINE:9,SPACE:10,EOF:11,GRAPH:12,NODIR:13,DIR:14,FirstStmtSeparator:15,ending:16,endToken:17,spaceList:18,spaceListNewline:19,vertexStatement:20,separator:21,styleStatement:22,linkStyleStatement:23,classDefStatement:24,classStatement:25,clickStatement:26,subgraph:27,textNoTags:28,SQS:29,text:30,SQE:31,end:32,direction:33,acc_title:34,acc_title_value:35,acc_descr:36,acc_descr_value:37,acc_descr_multiline_value:38,shapeData:39,SHAPE_DATA:40,link:41,node:42,styledVertex:43,AMP:44,vertex:45,STYLE_SEPARATOR:46,idString:47,DOUBLECIRCLESTART:48,DOUBLECIRCLEEND:49,PS:50,PE:51,"(-":52,"-)":53,STADIUMSTART:54,STADIUMEND:55,SUBROUTINESTART:56,SUBROUTINEEND:57,VERTEX_WITH_PROPS_START:58,"NODE_STRING[field]":59,COLON:60,"NODE_STRING[value]":61,PIPE:62,CYLINDERSTART:63,CYLINDEREND:64,DIAMOND_START:65,DIAMOND_STOP:66,TAGEND:67,TRAPSTART:68,TRAPEND:69,INVTRAPSTART:70,INVTRAPEND:71,linkStatement:72,arrowText:73,TESTSTR:74,START_LINK:75,edgeText:76,LINK:77,LINK_ID:78,edgeTextToken:79,STR:80,MD_STR:81,textToken:82,keywords:83,STYLE:84,LINKSTYLE:85,CLASSDEF:86,CLASS:87,CLICK:88,DOWN:89,UP:90,textNoTagsToken:91,stylesOpt:92,"idString[vertex]":93,"idString[class]":94,CALLBACKNAME:95,CALLBACKARGS:96,HREF:97,LINK_TARGET:98,"STR[link]":99,"STR[tooltip]":100,alphaNum:101,DEFAULT:102,numList:103,INTERPOLATE:104,NUM:105,COMMA:106,style:107,styleComponent:108,NODE_STRING:109,UNIT:110,BRKT:111,PCT:112,idStringToken:113,MINUS:114,MULT:115,UNICODE_TEXT:116,TEXT:117,TAGSTART:118,EDGE_TEXT:119,alphaNumToken:120,direction_tb:121,direction_bt:122,direction_rl:123,direction_lr:124,$accept:0,$end:1},terminals_:{2:"error",8:"SEMI",9:"NEWLINE",10:"SPACE",11:"EOF",12:"GRAPH",13:"NODIR",14:"DIR",27:"subgraph",29:"SQS",31:"SQE",32:"end",34:"acc_title",35:"acc_title_value",36:"acc_descr",37:"acc_descr_value",38:"acc_descr_multiline_value",40:"SHAPE_DATA",44:"AMP",46:"STYLE_SEPARATOR",48:"DOUBLECIRCLESTART",49:"DOUBLECIRCLEEND",50:"PS",51:"PE",52:"(-",53:"-)",54:"STADIUMSTART",55:"STADIUMEND",56:"SUBROUTINESTART",57:"SUBROUTINEEND",58:"VERTEX_WITH_PROPS_START",59:"NODE_STRING[field]",60:"COLON",61:"NODE_STRING[value]",62:"PIPE",63:"CYLINDERSTART",64:"CYLINDEREND",65:"DIAMOND_START",66:"DIAMOND_STOP",67:"TAGEND",68:"TRAPSTART",69:"TRAPEND",70:"INVTRAPSTART",71:"INVTRAPEND",74:"TESTSTR",75:"START_LINK",77:"LINK",78:"LINK_ID",80:"STR",81:"MD_STR",84:"STYLE",85:"LINKSTYLE",86:"CLASSDEF",87:"CLASS",88:"CLICK",89:"DOWN",90:"UP",93:"idString[vertex]",94:"idString[class]",95:"CALLBACKNAME",96:"CALLBACKARGS",97:"HREF",98:"LINK_TARGET",99:"STR[link]",100:"STR[tooltip]",102:"DEFAULT",104:"INTERPOLATE",105:"NUM",106:"COMMA",109:"NODE_STRING",110:"UNIT",111:"BRKT",112:"PCT",114:"MINUS",115:"MULT",116:"UNICODE_TEXT",117:"TEXT",118:"TAGSTART",119:"EDGE_TEXT",121:"direction_tb",122:"direction_bt",123:"direction_rl",124:"direction_lr"},productions_:[0,[3,2],[5,0],[5,2],[6,1],[6,1],[6,1],[6,1],[6,1],[4,2],[4,2],[4,2],[4,3],[16,2],[16,1],[17,1],[17,1],[17,1],[15,1],[15,1],[15,2],[19,2],[19,2],[19,1],[19,1],[18,2],[18,1],[7,2],[7,2],[7,2],[7,2],[7,2],[7,2],[7,9],[7,6],[7,4],[7,1],[7,2],[7,2],[7,1],[21,1],[21,1],[21,1],[39,2],[39,1],[20,4],[20,3],[20,4],[20,2],[20,2],[20,1],[42,1],[42,6],[42,5],[43,1],[43,3],[45,4],[45,4],[45,6],[45,4],[45,4],[45,4],[45,8],[45,4],[45,4],[45,4],[45,6],[45,4],[45,4],[45,4],[45,4],[45,4],[45,1],[41,2],[41,3],[41,3],[41,1],[41,3],[41,4],[76,1],[76,2],[76,1],[76,1],[72,1],[72,2],[73,3],[30,1],[30,2],[30,1],[30,1],[83,1],[83,1],[83,1],[83,1],[83,1],[83,1],[83,1],[83,1],[83,1],[83,1],[83,1],[28,1],[28,2],[28,1],[28,1],[24,5],[25,5],[26,2],[26,4],[26,3],[26,5],[26,3],[26,5],[26,5],[26,7],[26,2],[26,4],[26,2],[26,4],[26,4],[26,6],[22,5],[23,5],[23,5],[23,9],[23,9],[23,7],[23,7],[103,1],[103,3],[92,1],[92,3],[107,1],[107,2],[108,1],[108,1],[108,1],[108,1],[108,1],[108,1],[108,1],[108,1],[113,1],[113,1],[113,1],[113,1],[113,1],[113,1],[113,1],[113,1],[113,1],[113,1],[113,1],[82,1],[82,1],[82,1],[82,1],[91,1],[91,1],[91,1],[91,1],[91,1],[91,1],[91,1],[91,1],[91,1],[91,1],[91,1],[79,1],[79,1],[120,1],[120,1],[120,1],[120,1],[120,1],[120,1],[120,1],[120,1],[120,1],[120,1],[120,1],[47,1],[47,2],[101,1],[101,2],[33,1],[33,1],[33,1],[33,1]],performAction:(0,ze.K2)(function(_a,qa,Ha,oa,hi,Ce,Ri){var Ne=Ce.length-1;switch(hi){case 2:case 28:case 29:case 30:case 31:case 32:this.$=[];break;case 3:(!Array.isArray(Ce[Ne])||Ce[Ne].length>0)&&Ce[Ne-1].push(Ce[Ne]),this.$=Ce[Ne-1];break;case 4:case 183:case 44:case 54:case 76:case 181:this.$=Ce[Ne];break;case 11:oa.setDirection("TB"),this.$="TB";break;case 12:oa.setDirection(Ce[Ne-1]),this.$=Ce[Ne-1];break;case 27:this.$=Ce[Ne-1].nodes;break;case 33:this.$=oa.addSubGraph(Ce[Ne-6],Ce[Ne-1],Ce[Ne-4]);break;case 34:this.$=oa.addSubGraph(Ce[Ne-3],Ce[Ne-1],Ce[Ne-3]);break;case 35:this.$=oa.addSubGraph(void 0,Ce[Ne-1],void 0);break;case 37:this.$=Ce[Ne].trim(),oa.setAccTitle(this.$);break;case 38:case 39:this.$=Ce[Ne].trim(),oa.setAccDescription(this.$);break;case 43:case 133:this.$=Ce[Ne-1]+Ce[Ne];break;case 45:oa.addVertex(Ce[Ne-1][Ce[Ne-1].length-1],void 0,void 0,void 0,void 0,void 0,void 0,Ce[Ne]),oa.addLink(Ce[Ne-3].stmt,Ce[Ne-1],Ce[Ne-2]),this.$={stmt:Ce[Ne-1],nodes:Ce[Ne-1].concat(Ce[Ne-3].nodes)};break;case 46:oa.addLink(Ce[Ne-2].stmt,Ce[Ne],Ce[Ne-1]),this.$={stmt:Ce[Ne],nodes:Ce[Ne].concat(Ce[Ne-2].nodes)};break;case 47:oa.addLink(Ce[Ne-3].stmt,Ce[Ne-1],Ce[Ne-2]),this.$={stmt:Ce[Ne-1],nodes:Ce[Ne-1].concat(Ce[Ne-3].nodes)};break;case 48:this.$={stmt:Ce[Ne-1],nodes:Ce[Ne-1]};break;case 49:oa.addVertex(Ce[Ne-1][Ce[Ne-1].length-1],void 0,void 0,void 0,void 0,void 0,void 0,Ce[Ne]),this.$={stmt:Ce[Ne-1],nodes:Ce[Ne-1],shapeData:Ce[Ne]};break;case 50:this.$={stmt:Ce[Ne],nodes:Ce[Ne]};break;case 51:case 128:case 130:this.$=[Ce[Ne]];break;case 52:oa.addVertex(Ce[Ne-5][Ce[Ne-5].length-1],void 0,void 0,void 0,void 0,void 0,void 0,Ce[Ne-4]),this.$=Ce[Ne-5].concat(Ce[Ne]);break;case 53:this.$=Ce[Ne-4].concat(Ce[Ne]);break;case 55:this.$=Ce[Ne-2],oa.setClass(Ce[Ne-2],Ce[Ne]);break;case 56:this.$=Ce[Ne-3],oa.addVertex(Ce[Ne-3],Ce[Ne-1],"square");break;case 57:this.$=Ce[Ne-3],oa.addVertex(Ce[Ne-3],Ce[Ne-1],"doublecircle");break;case 58:this.$=Ce[Ne-5],oa.addVertex(Ce[Ne-5],Ce[Ne-2],"circle");break;case 59:this.$=Ce[Ne-3],oa.addVertex(Ce[Ne-3],Ce[Ne-1],"ellipse");break;case 60:this.$=Ce[Ne-3],oa.addVertex(Ce[Ne-3],Ce[Ne-1],"stadium");break;case 61:this.$=Ce[Ne-3],oa.addVertex(Ce[Ne-3],Ce[Ne-1],"subroutine");break;case 62:this.$=Ce[Ne-7],oa.addVertex(Ce[Ne-7],Ce[Ne-1],"rect",void 0,void 0,void 0,Object.fromEntries([[Ce[Ne-5],Ce[Ne-3]]]));break;case 63:this.$=Ce[Ne-3],oa.addVertex(Ce[Ne-3],Ce[Ne-1],"cylinder");break;case 64:this.$=Ce[Ne-3],oa.addVertex(Ce[Ne-3],Ce[Ne-1],"round");break;case 65:this.$=Ce[Ne-3],oa.addVertex(Ce[Ne-3],Ce[Ne-1],"diamond");break;case 66:this.$=Ce[Ne-5],oa.addVertex(Ce[Ne-5],Ce[Ne-2],"hexagon");break;case 67:this.$=Ce[Ne-3],oa.addVertex(Ce[Ne-3],Ce[Ne-1],"odd");break;case 68:this.$=Ce[Ne-3],oa.addVertex(Ce[Ne-3],Ce[Ne-1],"trapezoid");break;case 69:this.$=Ce[Ne-3],oa.addVertex(Ce[Ne-3],Ce[Ne-1],"inv_trapezoid");break;case 70:this.$=Ce[Ne-3],oa.addVertex(Ce[Ne-3],Ce[Ne-1],"lean_right");break;case 71:this.$=Ce[Ne-3],oa.addVertex(Ce[Ne-3],Ce[Ne-1],"lean_left");break;case 72:this.$=Ce[Ne],oa.addVertex(Ce[Ne]);break;case 73:Ce[Ne-1].text=Ce[Ne],this.$=Ce[Ne-1];break;case 74:case 75:Ce[Ne-2].text=Ce[Ne-1],this.$=Ce[Ne-2];break;case 77:var at=oa.destructLink(Ce[Ne],Ce[Ne-2]);this.$={type:at.type,stroke:at.stroke,length:at.length,text:Ce[Ne-1]};break;case 78:at=oa.destructLink(Ce[Ne],Ce[Ne-2]),this.$={type:at.type,stroke:at.stroke,length:at.length,text:Ce[Ne-1],id:Ce[Ne-3]};break;case 79:case 86:case 101:case 103:this.$={text:Ce[Ne],type:"text"};break;case 80:case 87:case 102:this.$={text:Ce[Ne-1].text+""+Ce[Ne],type:Ce[Ne-1].type};break;case 81:case 88:this.$={text:Ce[Ne],type:"string"};break;case 82:case 89:case 104:this.$={text:Ce[Ne],type:"markdown"};break;case 83:at=oa.destructLink(Ce[Ne]),this.$={type:at.type,stroke:at.stroke,length:at.length};break;case 84:at=oa.destructLink(Ce[Ne]),this.$={type:at.type,stroke:at.stroke,length:at.length,id:Ce[Ne-1]};break;case 85:this.$=Ce[Ne-1];break;case 105:this.$=Ce[Ne-4],oa.addClass(Ce[Ne-2],Ce[Ne]);break;case 106:this.$=Ce[Ne-4],oa.setClass(Ce[Ne-2],Ce[Ne]);break;case 107:case 115:this.$=Ce[Ne-1],oa.setClickEvent(Ce[Ne-1],Ce[Ne]);break;case 108:case 116:this.$=Ce[Ne-3],oa.setClickEvent(Ce[Ne-3],Ce[Ne-2]),oa.setTooltip(Ce[Ne-3],Ce[Ne]);break;case 109:this.$=Ce[Ne-2],oa.setClickEvent(Ce[Ne-2],Ce[Ne-1],Ce[Ne]);break;case 110:this.$=Ce[Ne-4],oa.setClickEvent(Ce[Ne-4],Ce[Ne-3],Ce[Ne-2]),oa.setTooltip(Ce[Ne-4],Ce[Ne]);break;case 111:this.$=Ce[Ne-2],oa.setLink(Ce[Ne-2],Ce[Ne]);break;case 112:this.$=Ce[Ne-4],oa.setLink(Ce[Ne-4],Ce[Ne-2]),oa.setTooltip(Ce[Ne-4],Ce[Ne]);break;case 113:this.$=Ce[Ne-4],oa.setLink(Ce[Ne-4],Ce[Ne-2],Ce[Ne]);break;case 114:this.$=Ce[Ne-6],oa.setLink(Ce[Ne-6],Ce[Ne-4],Ce[Ne]),oa.setTooltip(Ce[Ne-6],Ce[Ne-2]);break;case 117:this.$=Ce[Ne-1],oa.setLink(Ce[Ne-1],Ce[Ne]);break;case 118:this.$=Ce[Ne-3],oa.setLink(Ce[Ne-3],Ce[Ne-2]),oa.setTooltip(Ce[Ne-3],Ce[Ne]);break;case 119:this.$=Ce[Ne-3],oa.setLink(Ce[Ne-3],Ce[Ne-2],Ce[Ne]);break;case 120:this.$=Ce[Ne-5],oa.setLink(Ce[Ne-5],Ce[Ne-4],Ce[Ne]),oa.setTooltip(Ce[Ne-5],Ce[Ne-2]);break;case 121:this.$=Ce[Ne-4],oa.addVertex(Ce[Ne-2],void 0,void 0,Ce[Ne]);break;case 122:this.$=Ce[Ne-4],oa.updateLink([Ce[Ne-2]],Ce[Ne]);break;case 123:this.$=Ce[Ne-4],oa.updateLink(Ce[Ne-2],Ce[Ne]);break;case 124:this.$=Ce[Ne-8],oa.updateLinkInterpolate([Ce[Ne-6]],Ce[Ne-2]),oa.updateLink([Ce[Ne-6]],Ce[Ne]);break;case 125:this.$=Ce[Ne-8],oa.updateLinkInterpolate(Ce[Ne-6],Ce[Ne-2]),oa.updateLink(Ce[Ne-6],Ce[Ne]);break;case 126:this.$=Ce[Ne-6],oa.updateLinkInterpolate([Ce[Ne-4]],Ce[Ne]);break;case 127:this.$=Ce[Ne-6],oa.updateLinkInterpolate(Ce[Ne-4],Ce[Ne]);break;case 129:case 131:Ce[Ne-2].push(Ce[Ne]),this.$=Ce[Ne-2];break;case 182:case 184:this.$=Ce[Ne-1]+""+Ce[Ne];break;case 185:this.$={stmt:"dir",value:"TB"};break;case 186:this.$={stmt:"dir",value:"BT"};break;case 187:this.$={stmt:"dir",value:"RL"};break;case 188:this.$={stmt:"dir",value:"LR"}}},"anonymous"),table:[{3:1,4:2,9:ee,10:Rt,12:qt},{1:[3]},S(V,gt,{5:6}),{4:7,9:ee,10:Rt,12:qt},{4:8,9:ee,10:Rt,12:qt},{13:[1,9],14:[1,10]},{1:[2,1],6:11,7:12,8:Y,9:Nt,10:St,11:Ut,20:17,22:18,23:19,24:20,25:21,26:22,27:ye,33:24,34:le,36:Pe,38:oe,42:28,43:38,44:qe,45:39,47:40,60:We,84:Et,85:Tt,86:B,87:N,88:et,89:yt,102:it,105:rt,106:_t,109:ht,111:Ot,113:41,114:H,115:ot,116:ke,121:Pt,122:Zt,123:pe,124:Re},S(V,[2,9]),S(V,[2,10]),S(V,[2,11]),{8:[1,54],9:[1,55],10:Ze,15:53,18:56},S(de,[2,3]),S(de,[2,4]),S(de,[2,5]),S(de,[2,6]),S(de,[2,7]),S(de,[2,8]),{8:yr,9:mr,11:Wt,21:58,41:59,72:63,75:[1,64],77:[1,66],78:[1,65]},{8:yr,9:mr,11:Wt,21:67},{8:yr,9:mr,11:Wt,21:68},{8:yr,9:mr,11:Wt,21:69},{8:yr,9:mr,11:Wt,21:70},{8:yr,9:mr,11:Wt,21:71},{8:yr,9:mr,10:[1,72],11:Wt,21:73},S(de,[2,36]),{35:[1,74]},{37:[1,75]},S(de,[2,39]),S(we,[2,50],{18:76,39:77,10:Ze,40:sr}),{10:[1,79]},{10:[1,80]},{10:[1,81]},{10:[1,82]},{14:ve,44:ce,60:Ee,80:[1,86],89:Ae,95:[1,83],97:[1,84],101:85,105:er,106:Qe,109:Dr,111:_e,114:Yr,115:nr,116:te,120:87},S(de,[2,185]),S(de,[2,186]),S(de,[2,187]),S(de,[2,188]),S(ne,[2,51]),S(ne,[2,54],{46:[1,99]}),S(be,[2,72],{113:112,29:[1,100],44:qe,48:[1,101],50:[1,102],52:[1,103],54:[1,104],56:[1,105],58:[1,106],60:We,63:[1,107],65:[1,108],67:[1,109],68:[1,110],70:[1,111],89:yt,102:it,105:rt,106:_t,109:ht,111:Ot,114:H,115:ot,116:ke}),S(ar,[2,181]),S(ar,[2,142]),S(ar,[2,143]),S(ar,[2,144]),S(ar,[2,145]),S(ar,[2,146]),S(ar,[2,147]),S(ar,[2,148]),S(ar,[2,149]),S(ar,[2,150]),S(ar,[2,151]),S(ar,[2,152]),S(V,[2,12]),S(V,[2,18]),S(V,[2,19]),{9:[1,113]},S(g,[2,26],{18:114,10:Ze}),S(de,[2,27]),{42:115,43:38,44:qe,45:39,47:40,60:We,89:yt,102:it,105:rt,106:_t,109:ht,111:Ot,113:41,114:H,115:ot,116:ke},S(de,[2,40]),S(de,[2,41]),S(de,[2,42]),S(y,[2,76],{73:116,62:[1,118],74:[1,117]}),{76:119,79:120,80:E,81:M,116:m,119:A},{75:[1,125],77:[1,126]},S(v,[2,83]),S(de,[2,28]),S(de,[2,29]),S(de,[2,30]),S(de,[2,31]),S(de,[2,32]),{10:b,12:C,14:R,27:Q,28:127,32:mt,44:zt,60:jt,75:Vt,80:[1,129],81:[1,130],83:140,84:Kt,85:xe,86:je,87:Ke,88:fr,89:lr,90:br,91:128,105:$e,109:He,111:wr,114:kr,115:Kr,116:_r},S(Jr,gt,{5:153}),S(de,[2,37]),S(de,[2,38]),S(we,[2,48],{44:Lr}),S(we,[2,49],{18:155,10:Ze,40:ha}),S(ne,[2,44]),{44:qe,47:157,60:We,89:yt,102:it,105:rt,106:_t,109:ht,111:Ot,113:41,114:H,115:ot,116:ke},{102:[1,158],103:159,105:[1,160]},{44:qe,47:161,60:We,89:yt,102:it,105:rt,106:_t,109:ht,111:Ot,113:41,114:H,115:ot,116:ke},{44:qe,47:162,60:We,89:yt,102:it,105:rt,106:_t,109:ht,111:Ot,113:41,114:H,115:ot,116:ke},S(ia,[2,107],{10:[1,163],96:[1,164]}),{80:[1,165]},S(ia,[2,115],{120:167,10:[1,166],14:ve,44:ce,60:Ee,89:Ae,105:er,106:Qe,109:Dr,111:_e,114:Yr,115:nr,116:te}),S(ia,[2,117],{10:[1,168]}),S(jr,[2,183]),S(jr,[2,170]),S(jr,[2,171]),S(jr,[2,172]),S(jr,[2,173]),S(jr,[2,174]),S(jr,[2,175]),S(jr,[2,176]),S(jr,[2,177]),S(jr,[2,178]),S(jr,[2,179]),S(jr,[2,180]),{44:qe,47:169,60:We,89:yt,102:it,105:rt,106:_t,109:ht,111:Ot,113:41,114:H,115:ot,116:ke},{30:170,67:Qr,80:or,81:ur,82:171,116:W,117:$t,118:Ye},{30:178,67:Qr,80:or,81:ur,82:171,116:W,117:$t,118:Ye},{30:180,50:[1,179],67:Qr,80:or,81:ur,82:171,116:W,117:$t,118:Ye},{30:181,67:Qr,80:or,81:ur,82:171,116:W,117:$t,118:Ye},{30:182,67:Qr,80:or,81:ur,82:171,116:W,117:$t,118:Ye},{30:183,67:Qr,80:or,81:ur,82:171,116:W,117:$t,118:Ye},{109:[1,184]},{30:185,67:Qr,80:or,81:ur,82:171,116:W,117:$t,118:Ye},{30:186,65:[1,187],67:Qr,80:or,81:ur,82:171,116:W,117:$t,118:Ye},{30:188,67:Qr,80:or,81:ur,82:171,116:W,117:$t,118:Ye},{30:189,67:Qr,80:or,81:ur,82:171,116:W,117:$t,118:Ye},{30:190,67:Qr,80:or,81:ur,82:171,116:W,117:$t,118:Ye},S(ar,[2,182]),S(V,[2,20]),S(g,[2,25]),S(we,[2,46],{39:191,18:192,10:Ze,40:sr}),S(y,[2,73],{10:[1,193]}),{10:[1,194]},{30:195,67:Qr,80:or,81:ur,82:171,116:W,117:$t,118:Ye},{77:[1,196],79:197,116:m,119:A},S(Fe,[2,79]),S(Fe,[2,81]),S(Fe,[2,82]),S(Fe,[2,168]),S(Fe,[2,169]),{76:198,79:120,80:E,81:M,116:m,119:A},S(v,[2,84]),{8:yr,9:mr,10:b,11:Wt,12:C,14:R,21:200,27:Q,29:[1,199],32:mt,44:zt,60:jt,75:Vt,83:140,84:Kt,85:xe,86:je,87:Ke,88:fr,89:lr,90:br,91:201,105:$e,109:He,111:wr,114:kr,115:Kr,116:_r},S(Tr,[2,101]),S(Tr,[2,103]),S(Tr,[2,104]),S(Tr,[2,157]),S(Tr,[2,158]),S(Tr,[2,159]),S(Tr,[2,160]),S(Tr,[2,161]),S(Tr,[2,162]),S(Tr,[2,163]),S(Tr,[2,164]),S(Tr,[2,165]),S(Tr,[2,166]),S(Tr,[2,167]),S(Tr,[2,90]),S(Tr,[2,91]),S(Tr,[2,92]),S(Tr,[2,93]),S(Tr,[2,94]),S(Tr,[2,95]),S(Tr,[2,96]),S(Tr,[2,97]),S(Tr,[2,98]),S(Tr,[2,99]),S(Tr,[2,100]),{6:11,7:12,8:Y,9:Nt,10:St,11:Ut,20:17,22:18,23:19,24:20,25:21,26:22,27:ye,32:[1,202],33:24,34:le,36:Pe,38:oe,42:28,43:38,44:qe,45:39,47:40,60:We,84:Et,85:Tt,86:B,87:N,88:et,89:yt,102:it,105:rt,106:_t,109:ht,111:Ot,113:41,114:H,115:ot,116:ke,121:Pt,122:Zt,123:pe,124:Re},{10:Ze,18:203},{44:[1,204]},S(ne,[2,43]),{10:[1,205],44:qe,60:We,89:yt,102:it,105:rt,106:_t,109:ht,111:Ot,113:112,114:H,115:ot,116:ke},{10:[1,206]},{10:[1,207],106:[1,208]},S(pr,[2,128]),{10:[1,209],44:qe,60:We,89:yt,102:it,105:rt,106:_t,109:ht,111:Ot,113:112,114:H,115:ot,116:ke},{10:[1,210],44:qe,60:We,89:yt,102:it,105:rt,106:_t,109:ht,111:Ot,113:112,114:H,115:ot,116:ke},{80:[1,211]},S(ia,[2,109],{10:[1,212]}),S(ia,[2,111],{10:[1,213]}),{80:[1,214]},S(jr,[2,184]),{80:[1,215],98:[1,216]},S(ne,[2,55],{113:112,44:qe,60:We,89:yt,102:it,105:rt,106:_t,109:ht,111:Ot,114:H,115:ot,116:ke}),{31:[1,217],67:Qr,82:218,116:W,117:$t,118:Ye},S(da,[2,86]),S(da,[2,88]),S(da,[2,89]),S(da,[2,153]),S(da,[2,154]),S(da,[2,155]),S(da,[2,156]),{49:[1,219],67:Qr,82:218,116:W,117:$t,118:Ye},{30:220,67:Qr,80:or,81:ur,82:171,116:W,117:$t,118:Ye},{51:[1,221],67:Qr,82:218,116:W,117:$t,118:Ye},{53:[1,222],67:Qr,82:218,116:W,117:$t,118:Ye},{55:[1,223],67:Qr,82:218,116:W,117:$t,118:Ye},{57:[1,224],67:Qr,82:218,116:W,117:$t,118:Ye},{60:[1,225]},{64:[1,226],67:Qr,82:218,116:W,117:$t,118:Ye},{66:[1,227],67:Qr,82:218,116:W,117:$t,118:Ye},{30:228,67:Qr,80:or,81:ur,82:171,116:W,117:$t,118:Ye},{31:[1,229],67:Qr,82:218,116:W,117:$t,118:Ye},{67:Qr,69:[1,230],71:[1,231],82:218,116:W,117:$t,118:Ye},{67:Qr,69:[1,233],71:[1,232],82:218,116:W,117:$t,118:Ye},S(we,[2,45],{18:155,10:Ze,40:ha}),S(we,[2,47],{44:Lr}),S(y,[2,75]),S(y,[2,74]),{62:[1,234],67:Qr,82:218,116:W,117:$t,118:Ye},S(y,[2,77]),S(Fe,[2,80]),{77:[1,235],79:197,116:m,119:A},{30:236,67:Qr,80:or,81:ur,82:171,116:W,117:$t,118:Ye},S(Jr,gt,{5:237}),S(Tr,[2,102]),S(de,[2,35]),{43:238,44:qe,45:39,47:40,60:We,89:yt,102:it,105:rt,106:_t,109:ht,111:Ot,113:41,114:H,115:ot,116:ke},{10:Ze,18:239},{10:Pa,60:Ma,84:Wa,92:240,105:Ia,107:241,108:242,109:ba,110:sa,111:Sa,112:ea},{10:Pa,60:Ma,84:Wa,92:251,104:[1,252],105:Ia,107:241,108:242,109:ba,110:sa,111:Sa,112:ea},{10:Pa,60:Ma,84:Wa,92:253,104:[1,254],105:Ia,107:241,108:242,109:ba,110:sa,111:Sa,112:ea},{105:[1,255]},{10:Pa,60:Ma,84:Wa,92:256,105:Ia,107:241,108:242,109:ba,110:sa,111:Sa,112:ea},{44:qe,47:257,60:We,89:yt,102:it,105:rt,106:_t,109:ht,111:Ot,113:41,114:H,115:ot,116:ke},S(ia,[2,108]),{80:[1,258]},{80:[1,259],98:[1,260]},S(ia,[2,116]),S(ia,[2,118],{10:[1,261]}),S(ia,[2,119]),S(be,[2,56]),S(da,[2,87]),S(be,[2,57]),{51:[1,262],67:Qr,82:218,116:W,117:$t,118:Ye},S(be,[2,64]),S(be,[2,59]),S(be,[2,60]),S(be,[2,61]),{109:[1,263]},S(be,[2,63]),S(be,[2,65]),{66:[1,264],67:Qr,82:218,116:W,117:$t,118:Ye},S(be,[2,67]),S(be,[2,68]),S(be,[2,70]),S(be,[2,69]),S(be,[2,71]),S([10,44,60,89,102,105,106,109,111,114,115,116],[2,85]),S(y,[2,78]),{31:[1,265],67:Qr,82:218,116:W,117:$t,118:Ye},{6:11,7:12,8:Y,9:Nt,10:St,11:Ut,20:17,22:18,23:19,24:20,25:21,26:22,27:ye,32:[1,266],33:24,34:le,36:Pe,38:oe,42:28,43:38,44:qe,45:39,47:40,60:We,84:Et,85:Tt,86:B,87:N,88:et,89:yt,102:it,105:rt,106:_t,109:ht,111:Ot,113:41,114:H,115:ot,116:ke,121:Pt,122:Zt,123:pe,124:Re},S(ne,[2,53]),{43:267,44:qe,45:39,47:40,60:We,89:yt,102:it,105:rt,106:_t,109:ht,111:Ot,113:41,114:H,115:ot,116:ke},S(ia,[2,121],{106:Va}),S(gr,[2,130],{108:269,10:Pa,60:Ma,84:Wa,105:Ia,109:ba,110:sa,111:Sa,112:ea}),S(Ua,[2,132]),S(Ua,[2,134]),S(Ua,[2,135]),S(Ua,[2,136]),S(Ua,[2,137]),S(Ua,[2,138]),S(Ua,[2,139]),S(Ua,[2,140]),S(Ua,[2,141]),S(ia,[2,122],{106:Va}),{10:[1,270]},S(ia,[2,123],{106:Va}),{10:[1,271]},S(pr,[2,129]),S(ia,[2,105],{106:Va}),S(ia,[2,106],{113:112,44:qe,60:We,89:yt,102:it,105:rt,106:_t,109:ht,111:Ot,114:H,115:ot,116:ke}),S(ia,[2,110]),S(ia,[2,112],{10:[1,272]}),S(ia,[2,113]),{98:[1,273]},{51:[1,274]},{62:[1,275]},{66:[1,276]},{8:yr,9:mr,11:Wt,21:277},S(de,[2,34]),S(ne,[2,52]),{10:Pa,60:Ma,84:Wa,105:Ia,107:278,108:242,109:ba,110:sa,111:Sa,112:ea},S(Ua,[2,133]),{14:ve,44:ce,60:Ee,89:Ae,101:279,105:er,106:Qe,109:Dr,111:_e,114:Yr,115:nr,116:te,120:87},{14:ve,44:ce,60:Ee,89:Ae,101:280,105:er,106:Qe,109:Dr,111:_e,114:Yr,115:nr,116:te,120:87},{98:[1,281]},S(ia,[2,120]),S(be,[2,58]),{30:282,67:Qr,80:or,81:ur,82:171,116:W,117:$t,118:Ye},S(be,[2,66]),S(Jr,gt,{5:283}),S(gr,[2,131],{108:269,10:Pa,60:Ma,84:Wa,105:Ia,109:ba,110:sa,111:Sa,112:ea}),S(ia,[2,126],{120:167,10:[1,284],14:ve,44:ce,60:Ee,89:Ae,105:er,106:Qe,109:Dr,111:_e,114:Yr,115:nr,116:te}),S(ia,[2,127],{120:167,10:[1,285],14:ve,44:ce,60:Ee,89:Ae,105:er,106:Qe,109:Dr,111:_e,114:Yr,115:nr,116:te}),S(ia,[2,114]),{31:[1,286],67:Qr,82:218,116:W,117:$t,118:Ye},{6:11,7:12,8:Y,9:Nt,10:St,11:Ut,20:17,22:18,23:19,24:20,25:21,26:22,27:ye,32:[1,287],33:24,34:le,36:Pe,38:oe,42:28,43:38,44:qe,45:39,47:40,60:We,84:Et,85:Tt,86:B,87:N,88:et,89:yt,102:it,105:rt,106:_t,109:ht,111:Ot,113:41,114:H,115:ot,116:ke,121:Pt,122:Zt,123:pe,124:Re},{10:Pa,60:Ma,84:Wa,92:288,105:Ia,107:241,108:242,109:ba,110:sa,111:Sa,112:ea},{10:Pa,60:Ma,84:Wa,92:289,105:Ia,107:241,108:242,109:ba,110:sa,111:Sa,112:ea},S(be,[2,62]),S(de,[2,33]),S(ia,[2,124],{106:Va}),S(ia,[2,125],{106:Va})],defaultActions:{},parseError:(0,ze.K2)(function(_a,qa){if(!qa.recoverable){var Ha=new Error(_a);throw Ha.hash=qa,Ha}this.trace(_a)},"parseError"),parse:(0,ze.K2)(function(_a){var qa=this,Ha=[0],oa=[],hi=[null],Ce=[],Ri=this.table,Ne="",at=0,Ct=0,I=0,ft=Ce.slice.call(arguments,1),Dt=Object.create(this.lexer),Ft={yy:{}};for(var Je in this.yy)Object.prototype.hasOwnProperty.call(this.yy,Je)&&(Ft.yy[Je]=this.yy[Je]);Dt.setInput(_a,Ft.yy),Ft.yy.lexer=Dt,Ft.yy.parser=this,typeof Dt.yylloc>"u"&&(Dt.yylloc={});var Xr=Dt.yylloc;Ce.push(Xr);var Hr=Dt.options&&Dt.options.ranges;function La(){var Mr;return"number"!=typeof(Mr=oa.pop()||Dt.lex()||1)&&(Mr instanceof Array&&(Mr=(oa=Mr).pop()),Mr=qa.symbols_[Mr]||Mr),Mr}this.parseError="function"==typeof Ft.yy.parseError?Ft.yy.parseError:Object.getPrototypeOf(this).parseError,(0,ze.K2)(function ra(Mr){Ha.length=Ha.length-2*Mr,hi.length=hi.length-Mr,Ce.length=Ce.length-Mr},"popStack"),(0,ze.K2)(La,"lex");for(var fa,wa,ja,$a,Ei,Na,Rr,Ya,mi={};;){if(this.defaultActions[ja=Ha[Ha.length-1]]?$a=this.defaultActions[ja]:((null===fa||typeof fa>"u")&&(fa=La()),$a=Ri[ja]&&Ri[ja][fa]),typeof $a>"u"||!$a.length||!$a[0]){var ni;for(Na in Ya=[],Ri[ja])this.terminals_[Na]&&Na>2&&Ya.push("'"+this.terminals_[Na]+"'");ni=Dt.showPosition?"Parse error on line "+(at+1)+":\n"+Dt.showPosition()+"\nExpecting "+Ya.join(", ")+", got '"+(this.terminals_[fa]||fa)+"'":"Parse error on line "+(at+1)+": Unexpected "+(1==fa?"end of input":"'"+(this.terminals_[fa]||fa)+"'"),this.parseError(ni,{text:Dt.match,token:this.terminals_[fa]||fa,line:Dt.yylineno,loc:Xr,expected:Ya})}if($a[0]instanceof Array&&$a.length>1)throw new Error("Parse Error: multiple actions possible at state: "+ja+", token: "+fa);switch($a[0]){case 1:Ha.push(fa),hi.push(Dt.yytext),Ce.push(Dt.yylloc),Ha.push($a[1]),fa=null,wa?(fa=wa,wa=null):(Ct=Dt.yyleng,Ne=Dt.yytext,at=Dt.yylineno,Xr=Dt.yylloc,I>0&&I--);break;case 2:if(mi.$=hi[hi.length-(Rr=this.productions_[$a[1]][1])],mi._$={first_line:Ce[Ce.length-(Rr||1)].first_line,last_line:Ce[Ce.length-1].last_line,first_column:Ce[Ce.length-(Rr||1)].first_column,last_column:Ce[Ce.length-1].last_column},Hr&&(mi._$.range=[Ce[Ce.length-(Rr||1)].range[0],Ce[Ce.length-1].range[1]]),typeof(Ei=this.performAction.apply(mi,[Ne,Ct,at,Ft.yy,$a[1],hi,Ce].concat(ft)))<"u")return Ei;Rr&&(Ha=Ha.slice(0,-1*Rr*2),hi=hi.slice(0,-1*Rr),Ce=Ce.slice(0,-1*Rr)),Ha.push(this.productions_[$a[1]][0]),hi.push(mi.$),Ce.push(mi._$),Ha.push(Ri[Ha[Ha.length-2]][Ha[Ha.length-1]]);break;case 3:return!0}}return!0},"parse")};function Ka(){this.yy={}}return ir.lexer=function(){return{EOF:1,parseError:(0,ze.K2)(function(qa,Ha){if(!this.yy.parser)throw new Error(qa);this.yy.parser.parseError(qa,Ha)},"parseError"),setInput:(0,ze.K2)(function(_a,qa){return this.yy=qa||this.yy||{},this._input=_a,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},"setInput"),input:(0,ze.K2)(function(){var _a=this._input[0];return this.yytext+=_a,this.yyleng++,this.offset++,this.match+=_a,this.matched+=_a,_a.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),_a},"input"),unput:(0,ze.K2)(function(_a){var qa=_a.length,Ha=_a.split(/(?:\r\n?|\n)/g);this._input=_a+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-qa),this.offset-=qa;var oa=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),Ha.length-1&&(this.yylineno-=Ha.length-1);var hi=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:Ha?(Ha.length===oa.length?this.yylloc.first_column:0)+oa[oa.length-Ha.length].length-Ha[0].length:this.yylloc.first_column-qa},this.options.ranges&&(this.yylloc.range=[hi[0],hi[0]+this.yyleng-qa]),this.yyleng=this.yytext.length,this},"unput"),more:(0,ze.K2)(function(){return this._more=!0,this},"more"),reject:(0,ze.K2)(function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},"reject"),less:(0,ze.K2)(function(_a){this.unput(this.match.slice(_a))},"less"),pastInput:(0,ze.K2)(function(){var _a=this.matched.substr(0,this.matched.length-this.match.length);return(_a.length>20?"...":"")+_a.substr(-20).replace(/\n/g,"")},"pastInput"),upcomingInput:(0,ze.K2)(function(){var _a=this.match;return _a.length<20&&(_a+=this._input.substr(0,20-_a.length)),(_a.substr(0,20)+(_a.length>20?"...":"")).replace(/\n/g,"")},"upcomingInput"),showPosition:(0,ze.K2)(function(){var _a=this.pastInput(),qa=new Array(_a.length+1).join("-");return _a+this.upcomingInput()+"\n"+qa+"^"},"showPosition"),test_match:(0,ze.K2)(function(_a,qa){var Ha,oa,hi;if(this.options.backtrack_lexer&&(hi={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(hi.yylloc.range=this.yylloc.range.slice(0))),(oa=_a[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=oa.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:oa?oa[oa.length-1].length-oa[oa.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+_a[0].length},this.yytext+=_a[0],this.match+=_a[0],this.matches=_a,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(_a[0].length),this.matched+=_a[0],Ha=this.performAction.call(this,this.yy,this,qa,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),Ha)return Ha;if(this._backtrack){for(var Ce in hi)this[Ce]=hi[Ce];return!1}return!1},"test_match"),next:(0,ze.K2)(function(){if(this.done)return this.EOF;var _a,qa,Ha,oa;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var hi=this._currentRules(),Ce=0;Ce<hi.length;Ce++)if((Ha=this._input.match(this.rules[hi[Ce]]))&&(!qa||Ha[0].length>qa[0].length)){if(qa=Ha,oa=Ce,this.options.backtrack_lexer){if(!1!==(_a=this.test_match(Ha,hi[Ce])))return _a;if(this._backtrack){qa=!1;continue}return!1}if(!this.options.flex)break}return qa?!1!==(_a=this.test_match(qa,hi[oa]))&&_a:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},"next"),lex:(0,ze.K2)(function(){return this.next()||this.lex()},"lex"),begin:(0,ze.K2)(function(qa){this.conditionStack.push(qa)},"begin"),popState:(0,ze.K2)(function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},"popState"),_currentRules:(0,ze.K2)(function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},"_currentRules"),topState:(0,ze.K2)(function(qa){return(qa=this.conditionStack.length-1-Math.abs(qa||0))>=0?this.conditionStack[qa]:"INITIAL"},"topState"),pushState:(0,ze.K2)(function(qa){this.begin(qa)},"pushState"),stateStackSize:(0,ze.K2)(function(){return this.conditionStack.length},"stateStackSize"),options:{},performAction:(0,ze.K2)(function(qa,Ha,oa,hi){switch(oa){case 0:return this.begin("acc_title"),34;case 1:return this.popState(),"acc_title_value";case 2:return this.begin("acc_descr"),36;case 3:return this.popState(),"acc_descr_value";case 4:this.begin("acc_descr_multiline");break;case 5:case 12:case 14:case 17:case 20:case 23:case 33:this.popState();break;case 6:return"acc_descr_multiline_value";case 7:return this.pushState("shapeData"),Ha.yytext="",40;case 8:return this.pushState("shapeDataStr"),40;case 9:return this.popState(),40;case 10:return Ha.yytext=Ha.yytext.replace(/\n\s*/g,"<br/>"),40;case 11:return 40;case 13:this.begin("callbackname");break;case 15:this.popState(),this.begin("callbackargs");break;case 16:return 95;case 18:return 96;case 19:return"MD_STR";case 21:this.begin("md_string");break;case 22:return"STR";case 24:this.pushState("string");break;case 25:return 84;case 26:return 102;case 27:return 85;case 28:return 104;case 29:return 86;case 30:return 87;case 31:return 97;case 32:this.begin("click");break;case 34:return 88;case 35:case 36:case 37:return qa.lex.firstGraph()&&this.begin("dir"),12;case 38:return 27;case 39:return 32;case 40:case 41:case 42:case 43:return 98;case 44:return this.popState(),13;case 45:case 46:case 47:case 48:case 49:case 50:case 51:case 52:case 53:case 54:return this.popState(),14;case 55:return 121;case 56:return 122;case 57:return 123;case 58:return 124;case 59:return 78;case 60:return 105;case 61:case 102:return 111;case 62:return 46;case 63:return 60;case 64:case 103:return 44;case 65:return 8;case 66:return 106;case 67:case 101:return 115;case 68:case 71:case 74:return this.popState(),77;case 69:return this.pushState("edgeText"),75;case 70:case 73:case 76:return 119;case 72:return this.pushState("thickEdgeText"),75;case 75:return this.pushState("dottedEdgeText"),75;case 77:return 77;case 78:return this.popState(),53;case 79:case 115:return"TEXT";case 80:return this.pushState("ellipseText"),52;case 81:return this.popState(),55;case 82:return this.pushState("text"),54;case 83:return this.popState(),57;case 84:return this.pushState("text"),56;case 85:return 58;case 86:return this.pushState("text"),67;case 87:return this.popState(),64;case 88:return this.pushState("text"),63;case 89:return this.popState(),49;case 90:return this.pushState("text"),48;case 91:return this.popState(),69;case 92:return this.popState(),71;case 93:return 117;case 94:return this.pushState("trapText"),68;case 95:return this.pushState("trapText"),70;case 96:return 118;case 97:return 67;case 98:return 90;case 99:return"SEP";case 100:return 89;case 104:return 109;case 105:return 114;case 106:return 116;case 107:return this.popState(),62;case 108:return this.pushState("text"),62;case 109:return this.popState(),51;case 110:return this.pushState("text"),50;case 111:return this.popState(),31;case 112:return this.pushState("text"),29;case 113:return this.popState(),66;case 114:return this.pushState("text"),65;case 116:return"QUOTE";case 117:return 9;case 118:return 10;case 119:return 11}},"anonymous"),rules:[/^(?:accTitle\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*\{\s*)/,/^(?:[\}])/,/^(?:[^\}]*)/,/^(?:@\{)/,/^(?:["])/,/^(?:["])/,/^(?:[^\"]+)/,/^(?:[^}^"]+)/,/^(?:\})/,/^(?:call[\s]+)/,/^(?:\([\s]*\))/,/^(?:\()/,/^(?:[^(]*)/,/^(?:\))/,/^(?:[^)]*)/,/^(?:[^`"]+)/,/^(?:[`]["])/,/^(?:["][`])/,/^(?:[^"]+)/,/^(?:["])/,/^(?:["])/,/^(?:style\b)/,/^(?:default\b)/,/^(?:linkStyle\b)/,/^(?:interpolate\b)/,/^(?:classDef\b)/,/^(?:class\b)/,/^(?:href[\s])/,/^(?:click[\s]+)/,/^(?:[\s\n])/,/^(?:[^\s\n]*)/,/^(?:flowchart-elk\b)/,/^(?:graph\b)/,/^(?:flowchart\b)/,/^(?:subgraph\b)/,/^(?:end\b\s*)/,/^(?:_self\b)/,/^(?:_blank\b)/,/^(?:_parent\b)/,/^(?:_top\b)/,/^(?:(\r?\n)*\s*\n)/,/^(?:\s*LR\b)/,/^(?:\s*RL\b)/,/^(?:\s*TB\b)/,/^(?:\s*BT\b)/,/^(?:\s*TD\b)/,/^(?:\s*BR\b)/,/^(?:\s*<)/,/^(?:\s*>)/,/^(?:\s*\^)/,/^(?:\s*v\b)/,/^(?:.*direction\s+TB[^\n]*)/,/^(?:.*direction\s+BT[^\n]*)/,/^(?:.*direction\s+RL[^\n]*)/,/^(?:.*direction\s+LR[^\n]*)/,/^(?:[^\s\"]+@(?=[^\{\"]))/,/^(?:[0-9]+)/,/^(?:#)/,/^(?::::)/,/^(?::)/,/^(?:&)/,/^(?:;)/,/^(?:,)/,/^(?:\*)/,/^(?:\s*[xo<]?--+[-xo>]\s*)/,/^(?:\s*[xo<]?--\s*)/,/^(?:[^-]|-(?!-)+)/,/^(?:\s*[xo<]?==+[=xo>]\s*)/,/^(?:\s*[xo<]?==\s*)/,/^(?:[^=]|=(?!))/,/^(?:\s*[xo<]?-?\.+-[xo>]?\s*)/,/^(?:\s*[xo<]?-\.\s*)/,/^(?:[^\.]|\.(?!))/,/^(?:\s*~~[\~]+\s*)/,/^(?:[-/\)][\)])/,/^(?:[^\(\)\[\]\{\}]|!\)+)/,/^(?:\(-)/,/^(?:\]\))/,/^(?:\(\[)/,/^(?:\]\])/,/^(?:\[\[)/,/^(?:\[\|)/,/^(?:>)/,/^(?:\)\])/,/^(?:\[\()/,/^(?:\)\)\))/,/^(?:\(\(\()/,/^(?:[\\(?=\])][\]])/,/^(?:\/(?=\])\])/,/^(?:\/(?!\])|\\(?!\])|[^\\\[\]\(\)\{\}\/]+)/,/^(?:\[\/)/,/^(?:\[\\)/,/^(?:<)/,/^(?:>)/,/^(?:\^)/,/^(?:\\\|)/,/^(?:v\b)/,/^(?:\*)/,/^(?:#)/,/^(?:&)/,/^(?:([A-Za-z0-9!"\#$%&'*+\.`?\\_\/]|-(?=[^\>\-\.])|(?!))+)/,/^(?:-)/,/^(?:[\u00AA\u00B5\u00BA\u00C0-\u00D6\u00D8-\u00F6]|[\u00F8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377]|[\u037A-\u037D\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5]|[\u03F7-\u0481\u048A-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA]|[\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE]|[\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA]|[\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0]|[\u08A2-\u08AC\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0977]|[\u0979-\u097F\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2]|[\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A]|[\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39]|[\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8]|[\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C]|[\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C]|[\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99]|[\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0]|[\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D]|[\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3]|[\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10]|[\u0D12-\u0D3A\u0D3D\u0D4E\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1]|[\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81]|[\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3]|[\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6]|[\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A]|[\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081]|[\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D]|[\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0]|[\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310]|[\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C]|[\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u1700-\u170C\u170E-\u1711]|[\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7]|[\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191C]|[\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16]|[\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF]|[\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC]|[\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D]|[\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D]|[\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3]|[\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F]|[\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128]|[\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184]|[\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3]|[\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6]|[\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE]|[\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C]|[\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D]|[\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC]|[\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B]|[\uA640-\uA66E\uA67F-\uA697\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788]|[\uA78B-\uA78E\uA790-\uA793\uA7A0-\uA7AA\uA7F8-\uA801\uA803-\uA805]|[\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB]|[\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uAA00-\uAA28]|[\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA80-\uAAAF\uAAB1\uAAB5]|[\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4]|[\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E]|[\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D]|[\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36]|[\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D]|[\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC]|[\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF]|[\uFFD2-\uFFD7\uFFDA-\uFFDC])/,/^(?:\|)/,/^(?:\|)/,/^(?:\))/,/^(?:\()/,/^(?:\])/,/^(?:\[)/,/^(?:(\}))/,/^(?:\{)/,/^(?:[^\[\]\(\)\{\}\|\"]+)/,/^(?:")/,/^(?:(\r?\n)+)/,/^(?:\s)/,/^(?:$)/],conditions:{shapeDataEndBracket:{rules:[21,24,77,80,82,84,88,90,94,95,108,110,112,114],inclusive:!1},shapeDataStr:{rules:[9,10,21,24,77,80,82,84,88,90,94,95,108,110,112,114],inclusive:!1},shapeData:{rules:[8,11,12,21,24,77,80,82,84,88,90,94,95,108,110,112,114],inclusive:!1},callbackargs:{rules:[17,18,21,24,77,80,82,84,88,90,94,95,108,110,112,114],inclusive:!1},callbackname:{rules:[14,15,16,21,24,77,80,82,84,88,90,94,95,108,110,112,114],inclusive:!1},href:{rules:[21,24,77,80,82,84,88,90,94,95,108,110,112,114],inclusive:!1},click:{rules:[21,24,33,34,77,80,82,84,88,90,94,95,108,110,112,114],inclusive:!1},dottedEdgeText:{rules:[21,24,74,76,77,80,82,84,88,90,94,95,108,110,112,114],inclusive:!1},thickEdgeText:{rules:[21,24,71,73,77,80,82,84,88,90,94,95,108,110,112,114],inclusive:!1},edgeText:{rules:[21,24,68,70,77,80,82,84,88,90,94,95,108,110,112,114],inclusive:!1},trapText:{rules:[21,24,77,80,82,84,88,90,91,92,93,94,95,108,110,112,114],inclusive:!1},ellipseText:{rules:[21,24,77,78,79,80,82,84,88,90,94,95,108,110,112,114],inclusive:!1},text:{rules:[21,24,77,80,81,82,83,84,87,88,89,90,94,95,107,108,109,110,111,112,113,114,115],inclusive:!1},vertex:{rules:[21,24,77,80,82,84,88,90,94,95,108,110,112,114],inclusive:!1},dir:{rules:[21,24,44,45,46,47,48,49,50,51,52,53,54,77,80,82,84,88,90,94,95,108,110,112,114],inclusive:!1},acc_descr_multiline:{rules:[5,6,21,24,77,80,82,84,88,90,94,95,108,110,112,114],inclusive:!1},acc_descr:{rules:[3,21,24,77,80,82,84,88,90,94,95,108,110,112,114],inclusive:!1},acc_title:{rules:[1,21,24,77,80,82,84,88,90,94,95,108,110,112,114],inclusive:!1},md_string:{rules:[19,20,21,24,77,80,82,84,88,90,94,95,108,110,112,114],inclusive:!1},string:{rules:[21,22,23,24,77,80,82,84,88,90,94,95,108,110,112,114],inclusive:!1},INITIAL:{rules:[0,2,4,7,13,21,24,25,26,27,28,29,30,31,32,35,36,37,38,39,40,41,42,43,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,71,72,74,75,77,80,82,84,85,86,88,90,94,95,96,97,98,99,100,101,102,103,104,105,106,108,110,112,114,116,117,118,119],inclusive:!0}}}}(),(0,ze.K2)(Ka,"Parser"),Ka.prototype=ir,ir.Parser=Ka,new Ka}();Ir.parser=Ir;var Xe=Ir,z=Object.assign({},Xe);z.parse=S=>{const ee=S.replace(/}\s*\n/g,"}\n");return Xe.parse(ee)};var dt=z,Bt=(0,ze.K2)((S,ee)=>{const Rt=Wr.Ix,qt=Rt(S,"r"),V=Rt(S,"g"),gt=Rt(S,"b");return Wr.B3(qt,V,gt,ee)},"fade"),X=(0,ze.K2)(S=>`.label {\n    font-family: ${S.fontFamily};\n    color: ${S.nodeTextColor||S.textColor};\n  }\n  .cluster-label text {\n    fill: ${S.titleColor};\n  }\n  .cluster-label span {\n    color: ${S.titleColor};\n  }\n  .cluster-label span p {\n    background-color: transparent;\n  }\n\n  .label text,span {\n    fill: ${S.nodeTextColor||S.textColor};\n    color: ${S.nodeTextColor||S.textColor};\n  }\n\n  .node rect,\n  .node circle,\n  .node ellipse,\n  .node polygon,\n  .node path {\n    fill: ${S.mainBkg};\n    stroke: ${S.nodeBorder};\n    stroke-width: 1px;\n  }\n  .rough-node .label text , .node .label text, .image-shape .label, .icon-shape .label {\n    text-anchor: middle;\n  }\n  // .flowchart-label .text-outer-tspan {\n  //   text-anchor: middle;\n  // }\n  // .flowchart-label .text-inner-tspan {\n  //   text-anchor: start;\n  // }\n\n  .node .katex path {\n    fill: #000;\n    stroke: #000;\n    stroke-width: 1px;\n  }\n\n  .rough-node .label,.node .label, .image-shape .label, .icon-shape .label {\n    text-align: center;\n  }\n  .node.clickable {\n    cursor: pointer;\n  }\n\n\n  .root .anchor path {\n    fill: ${S.lineColor} !important;\n    stroke-width: 0;\n    stroke: ${S.lineColor};\n  }\n\n  .arrowheadPath {\n    fill: ${S.arrowheadColor};\n  }\n\n  .edgePath .path {\n    stroke: ${S.lineColor};\n    stroke-width: 2.0px;\n  }\n\n  .flowchart-link {\n    stroke: ${S.lineColor};\n    fill: none;\n  }\n\n  .edgeLabel {\n    background-color: ${S.edgeLabelBackground};\n    p {\n      background-color: ${S.edgeLabelBackground};\n    }\n    rect {\n      opacity: 0.5;\n      background-color: ${S.edgeLabelBackground};\n      fill: ${S.edgeLabelBackground};\n    }\n    text-align: center;\n  }\n\n  /* For html labels only */\n  .labelBkg {\n    background-color: ${Bt(S.edgeLabelBackground,.5)};\n    // background-color:\n  }\n\n  .cluster rect {\n    fill: ${S.clusterBkg};\n    stroke: ${S.clusterBorder};\n    stroke-width: 1px;\n  }\n\n  .cluster text {\n    fill: ${S.titleColor};\n  }\n\n  .cluster span {\n    color: ${S.titleColor};\n  }\n  /* .cluster div {\n    color: ${S.titleColor};\n  } */\n\n  div.mermaidTooltip {\n    position: absolute;\n    text-align: center;\n    max-width: 200px;\n    padding: 2px;\n    font-family: ${S.fontFamily};\n    font-size: 12px;\n    background: ${S.tertiaryColor};\n    border: 1px solid ${S.border2};\n    border-radius: 2px;\n    pointer-events: none;\n    z-index: 100;\n  }\n\n  .flowchartTitleText {\n    text-anchor: middle;\n    font-size: 18px;\n    fill: ${S.textColor};\n  }\n\n  rect.text {\n    fill: none;\n    stroke-width: 0;\n  }\n\n  .icon-shape, .image-shape {\n    background-color: ${S.edgeLabelBackground};\n    p {\n      background-color: ${S.edgeLabelBackground};\n      padding: 2px;\n    }\n    rect {\n      opacity: 0.5;\n      background-color: ${S.edgeLabelBackground};\n      fill: ${S.edgeLabelBackground};\n    }\n    text-align: center;\n  }\n  ${(0,L.o)()}\n`,"getStyles"),re={parser:dt,get db(){return new aa},renderer:Be,styles:X,init:(0,ze.K2)(S=>{S.flowchart||(S.flowchart={}),S.layout&&(0,hr.XV)({layout:S.layout}),S.flowchart.arrowMarkerAbsolute=S.arrowMarkerAbsolute,(0,hr.XV)({flowchart:{arrowMarkerAbsolute:S.arrowMarkerAbsolute}})},"init")}},86976:(ri,Er,P)=>{"use strict";P.r(Er),P.d(Er,{diagram:()=>hr});var lt=P(54256),j=(P(97787),P(5675),P(8086),P(72271),P(98954),P(36384),P(87452),P(32239),P(19753),P(59355),P(52052),P(79006),P(32303)),hr={parser:lt._$,get db(){return new lt.NM},renderer:lt.Lh,styles:lt.tM,init:(0,j.K2)(ze=>{ze.class||(ze.class={}),ze.class.arrowMarkerAbsolute=ze.arrowMarkerAbsolute},"init")}},87452:(ri,Er,P)=>{"use strict";P.d(Er,{DA:()=>Or,IU:()=>ee,U:()=>S,U7:()=>Xi,U_:()=>Yn,Zk:()=>At,aP:()=>nn,gh:()=>rn,lC:()=>bt,on:()=>Rn});var lt=P(89204),ie=P(32239),L=P(19753),D=P(59355),Mt=P(52052),ut=P(79006),G=P(32303),w=P(40622),Lt=P(93654),At=(0,G.K2)(function(){var Ht=(0,lt.A)(function*(d,ct,Xt){let kt;const pt=ct.useHtmlLabels||(0,ut._3)((0,ut.D7)()?.htmlLabels);kt=Xt||"node default";const ue=d.insert("g").attr("class",kt).attr("id",ct.domId||ct.id),nt=ue.insert("g").attr("class","label").attr("style",(0,Mt.KL)(ct.labelStyle));let wt;wt=void 0===ct.label?"":"string"==typeof ct.label?ct.label:ct.label[0];const J=yield(0,D.GZ)(nt,(0,ut.jZ)((0,Mt.Sm)(wt),(0,ut.D7)()),{useHtmlLabels:pt,width:ct.width||(0,ut.D7)().flowchart?.wrappingWidth,cssClasses:"markdown-node-label",style:ct.labelStyle,addSvgBackground:!!ct.icon||!!ct.img});let Z=J.getBBox();const It=(ct?.padding??0)/2;if(pt){const fe=J.children[0],De=(0,w.Ltv)(J),tt=fe.getElementsByTagName("img");if(tt){const l=""===wt.replace(/<img[^>]*>/g,"").trim();yield Promise.all([...tt].map(T=>new Promise(F=>{function st(){if(T.style.display="flex",T.style.flexDirection="column",l){const xt=(0,ut.D7)().fontSize?(0,ut.D7)().fontSize:window.getComputedStyle(document.body).fontSize,Me=5,[Qt=ut.UI.fontSize]=(0,Mt.I5)(xt),Ue=Qt*Me+"px";T.style.minWidth=Ue,T.style.maxWidth=Ue}else T.style.width="100%";F(T)}(0,G.K2)(st,"setupImage"),setTimeout(()=>{T.complete&&st()}),T.addEventListener("error",st),T.addEventListener("load",st)})))}Z=fe.getBoundingClientRect(),De.attr("width",Z.width),De.attr("height",Z.height)}return nt.attr("transform",pt?"translate("+-Z.width/2+", "+-Z.height/2+")":"translate(0, "+-Z.height/2+")"),ct.centerLabel&&nt.attr("transform","translate("+-Z.width/2+", "+-Z.height/2+")"),nt.insert("rect",":first-child"),{shapeSvg:ue,bbox:Z,halfPadding:It,label:nt}});return function(d,ct,Xt){return Ht.apply(this,arguments)}}(),"labelHelper"),Ge=(0,G.K2)(function(){var Ht=(0,lt.A)(function*(d,ct,Xt){const kt=Xt.useHtmlLabels||(0,ut._3)((0,ut.D7)()?.flowchart?.htmlLabels),pt=d.insert("g").attr("class","label").attr("style",Xt.labelStyle||""),ue=yield(0,D.GZ)(pt,(0,ut.jZ)((0,Mt.Sm)(ct),(0,ut.D7)()),{useHtmlLabels:kt,width:Xt.width||(0,ut.D7)()?.flowchart?.wrappingWidth,style:Xt.labelStyle,addSvgBackground:!!Xt.icon||!!Xt.img});let nt=ue.getBBox();const wt=Xt.padding/2;if((0,ut._3)((0,ut.D7)()?.flowchart?.htmlLabels)){const J=ue.children[0],Z=(0,w.Ltv)(ue);nt=J.getBoundingClientRect(),Z.attr("width",nt.width),Z.attr("height",nt.height)}return pt.attr("transform",kt?"translate("+-nt.width/2+", "+-nt.height/2+")":"translate(0, "+-nt.height/2+")"),Xt.centerLabel&&pt.attr("transform","translate("+-nt.width/2+", "+-nt.height/2+")"),pt.insert("rect",":first-child"),{shapeSvg:d,bbox:nt,halfPadding:wt,label:pt}});return function(d,ct,Xt){return Ht.apply(this,arguments)}}(),"insertLabel"),bt=(0,G.K2)((Ht,d)=>{const ct=d.node().getBBox();Ht.width=ct.width,Ht.height=ct.height},"updateNodeBounds"),Gt=(0,G.K2)((Ht,d)=>("handDrawn"===Ht.look?"rough-node":"node")+" "+Ht.cssClasses+" "+(d||""),"getNodeClasses");function j(Ht){const d=Ht.map((ct,Xt)=>`${0===Xt?"M":"L"}${ct.x},${ct.y}`);return d.push("Z"),d.join(" ")}function hr(Ht,d,ct,Xt,kt,pt){const ue=[],wt=ct-Ht,It=2*Math.PI/(wt/pt),fe=d+(Xt-d)/2;for(let De=0;De<=50;De++){const l=Ht+De/50*wt,T=fe+kt*Math.sin(It*(l-Ht));ue.push({x:l,y:T})}return ue}function ze(Ht,d,ct,Xt,kt,pt){const ue=[],nt=kt*Math.PI/180,Z=(pt*Math.PI/180-nt)/(Xt-1);for(let It=0;It<Xt;It++){const fe=nt+It*Z,De=Ht+ct*Math.cos(fe),tt=d+ct*Math.sin(fe);ue.push({x:-De,y:-tt})}return ue}(0,G.K2)(j,"createPathFromPoints"),(0,G.K2)(hr,"generateFullSineWavePoints"),(0,G.K2)(ze,"generateCirclePoints");var Wr=(0,G.K2)((Ht,d)=>{var wt,J,ct=Ht.x,Xt=Ht.y,kt=d.x-ct,pt=d.y-Xt,ue=Ht.width/2,nt=Ht.height/2;return Math.abs(pt)*ue>Math.abs(kt)*nt?(pt<0&&(nt=-nt),wt=0===pt?0:nt*kt/pt,J=nt):(kt<0&&(ue=-ue),wt=ue,J=0===kt?0:ue*pt/kt),{x:ct+wt,y:Xt+J}},"intersectRect");function Br(Ht,d){d&&Ht.attr("style",d)}function Gr(Ht){return aa.apply(this,arguments)}function aa(){return(aa=(0,lt.A)(function*(Ht){const d=(0,w.Ltv)(document.createElementNS("http://www.w3.org/2000/svg","foreignObject")),ct=d.append("xhtml:div"),Xt=(0,ut.D7)();let kt=Ht.label;return Ht.label&&(0,ut.Wi)(Ht.label)&&(kt=yield(0,ut.dj)(Ht.label.replace(ut.Y2.lineBreakRegex,"\n"),Xt)),ct.html((0,ut.jZ)('<span class="'+(Ht.isNode?"nodeLabel":"edgeLabel")+'" '+(Ht.labelStyle?'style="'+Ht.labelStyle+'"':"")+">"+kt+"</span>",Xt)),Br(ct,Ht.labelStyle),ct.style("display","inline-block"),ct.style("padding-right","1px"),ct.style("white-space","nowrap"),ct.attr("xmlns","http://www.w3.org/1999/xhtml"),d.node()})).apply(this,arguments)}(0,G.K2)(Br,"applyStyle"),(0,G.K2)(Gr,"addHtmlLabel");var Or=(0,G.K2)(function(){var Ht=(0,lt.A)(function*(d,ct,Xt,kt){let pt=d||"";if("object"==typeof pt&&(pt=pt[0]),(0,ut._3)((0,ut.D7)().flowchart.htmlLabels)){pt=pt.replace(/\\n|\n/g,"<br />"),G.Rm.info("vertexText"+pt);const ue={isNode:kt,label:(0,Mt.Sm)(pt).replace(/fa[blrs]?:fa-[\w-]+/g,wt=>`<i class='${wt.replace(":"," ")}'></i>`),labelStyle:ct&&ct.replace("fill:","color:")};return yield Gr(ue)}{const ue=document.createElementNS("http://www.w3.org/2000/svg","text");ue.setAttribute("style",ct.replace("color:","fill:"));let nt=[];nt="string"==typeof pt?pt.split(/\\n|\n|<br\s*\/?>/gi):Array.isArray(pt)?pt:[];for(const wt of nt){const J=document.createElementNS("http://www.w3.org/2000/svg","tspan");J.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),J.setAttribute("dy","1em"),J.setAttribute("x","0"),J.setAttribute("class",Xt?"title-row":"row"),J.textContent=wt.trim(),ue.appendChild(J)}return ue}});return function(d,ct,Xt,kt){return Ht.apply(this,arguments)}}(),"createLabel"),Be=(0,G.K2)((Ht,d,ct,Xt,kt)=>["M",Ht+kt,d,"H",Ht+ct-kt,"A",kt,kt,0,0,1,Ht+ct,d+kt,"V",d+Xt-kt,"A",kt,kt,0,0,1,Ht+ct-kt,d+Xt,"H",Ht+kt,"A",kt,kt,0,0,1,Ht,d+Xt-kt,"V",d+kt,"A",kt,kt,0,0,1,Ht+kt,d,"Z"].join(" "),"createRoundedRectPathD"),Ir=(0,G.K2)(function(){var Ht=(0,lt.A)(function*(d,ct){G.Rm.info("Creating subgraph rect for ",ct.id,ct);const Xt=(0,ut.D7)(),{themeVariables:kt,handDrawnSeed:pt}=Xt,{clusterBkg:ue,clusterBorder:nt}=kt,{labelStyles:wt,nodeStyles:J,borderStyles:Z,backgroundStyles:It}=(0,L.GX)(ct),fe=d.insert("g").attr("class","cluster "+ct.cssClasses).attr("id",ct.id).attr("data-look",ct.look),De=(0,ut._3)(Xt.flowchart.htmlLabels),tt=fe.insert("g").attr("class","cluster-label "),l=yield(0,D.GZ)(tt,ct.label,{style:ct.labelStyle,useHtmlLabels:De,isNode:!0});let T=l.getBBox();if((0,ut._3)(Xt.flowchart.htmlLabels)){const Sr=l.children[0],ta=(0,w.Ltv)(l);T=Sr.getBoundingClientRect(),ta.attr("width",T.width),ta.attr("height",T.height)}const F=ct.width<=T.width+ct.padding?T.width+ct.padding:ct.width;ct.diff=ct.width<=T.width+ct.padding?(F-ct.width)/2-ct.padding:-ct.padding;const st=ct.height,xt=ct.x-F/2,Me=ct.y-st/2;let Qt;if(G.Rm.trace("Data ",ct,JSON.stringify(ct)),"handDrawn"===ct.look){const Sr=Lt.A.svg(fe),ta=(0,L.Fr)(ct,{roughness:.7,fill:ue,stroke:nt,fillWeight:3,seed:pt}),Pr=Sr.path(Be(xt,Me,F,st,0),ta);Qt=fe.insert(()=>(G.Rm.debug("Rough node insert CXC",Pr),Pr),":first-child"),Qt.select("path:nth-child(2)").attr("style",Z.join(";")),Qt.select("path").attr("style",It.join(";").replace("fill","stroke"))}else Qt=fe.insert("rect",":first-child"),Qt.attr("style",J).attr("rx",ct.rx).attr("ry",ct.ry).attr("x",xt).attr("y",Me).attr("width",F).attr("height",st);const{subGraphTitleTopMargin:Ue}=(0,ie.O)(Xt);if(tt.attr("transform",`translate(${ct.x-T.width/2}, ${ct.y-ct.height/2+Ue})`),wt){const Sr=tt.select("span");Sr&&Sr.attr("style",wt)}const xr=Qt.node().getBBox();return ct.offsetX=0,ct.width=xr.width,ct.height=xr.height,ct.offsetY=T.height-ct.padding/2,ct.intersect=function(Sr){return Wr(ct,Sr)},{cluster:fe,labelBBox:T}});return function(d,ct){return Ht.apply(this,arguments)}}(),"rect"),Xe=(0,G.K2)((Ht,d)=>{const ct=Ht.insert("g").attr("class","note-cluster").attr("id",d.id),Xt=ct.insert("rect",":first-child"),kt=0*d.padding,pt=kt/2;Xt.attr("rx",d.rx).attr("ry",d.ry).attr("x",d.x-d.width/2-pt).attr("y",d.y-d.height/2-pt).attr("width",d.width+kt).attr("height",d.height+kt).attr("fill","none");const ue=Xt.node().getBBox();return d.width=ue.width,d.height=ue.height,d.intersect=function(nt){return Wr(d,nt)},{cluster:ct,labelBBox:{width:0,height:0}}},"noteGroup"),z=(0,G.K2)(function(){var Ht=(0,lt.A)(function*(d,ct){const Xt=(0,ut.D7)(),{themeVariables:kt,handDrawnSeed:pt}=Xt,{altBackground:ue,compositeBackground:nt,compositeTitleBackground:wt,nodeBorder:J}=kt,Z=d.insert("g").attr("class",ct.cssClasses).attr("id",ct.id).attr("data-id",ct.id).attr("data-look",ct.look),It=Z.insert("g",":first-child"),fe=Z.insert("g").attr("class","cluster-label");let De=Z.append("rect");const tt=fe.node().appendChild(yield Or(ct.label,ct.labelStyle,void 0,!0));let l=tt.getBBox();if((0,ut._3)(Xt.flowchart.htmlLabels)){const Pr=tt.children[0],la=(0,w.Ltv)(tt);l=Pr.getBoundingClientRect(),la.attr("width",l.width),la.attr("height",l.height)}const T=0*ct.padding,F=T/2,st=(ct.width<=l.width+ct.padding?l.width+ct.padding:ct.width)+T;ct.diff=ct.width<=l.width+ct.padding?(st-ct.width)/2-ct.padding:-ct.padding;const xt=ct.height+T,Me=ct.height+T-l.height-6,Qt=ct.x-st/2,Ue=ct.y-xt/2;ct.width=st;const xr=ct.y-ct.height/2-F+l.height+2;let Sr;if("handDrawn"===ct.look){const Pr=ct.cssClasses.includes("statediagram-cluster-alt"),la=Lt.A.svg(Z),Ca=ct.rx||ct.ry?la.path(Be(Qt,Ue,st,xt,10),{roughness:.7,fill:wt,fillStyle:"solid",stroke:J,seed:pt}):la.rectangle(Qt,Ue,st,xt,{seed:pt});Sr=Z.insert(()=>Ca,":first-child");const ka=la.rectangle(Qt,xr,st,Me,{fill:Pr?ue:nt,fillStyle:Pr?"hachure":"solid",stroke:J,seed:pt});Sr=Z.insert(()=>Ca,":first-child"),De=Z.insert(()=>ka)}else Sr=It.insert("rect",":first-child"),Sr.attr("class","outer").attr("x",Qt).attr("y",Ue).attr("width",st).attr("height",xt).attr("data-look",ct.look),De.attr("class","inner").attr("x",Qt).attr("y",xr).attr("width",st).attr("height",Me);fe.attr("transform",`translate(${ct.x-l.width/2}, ${Ue+1-((0,ut._3)(Xt.flowchart.htmlLabels)?0:3)})`);const ta=Sr.node().getBBox();return ct.height=ta.height,ct.offsetX=0,ct.offsetY=l.height-ct.padding/2,ct.labelBBox=l,ct.intersect=function(Pr){return Wr(ct,Pr)},{cluster:Z,labelBBox:l}});return function(d,ct){return Ht.apply(this,arguments)}}(),"roundedWithTitle"),dt=(0,G.K2)(function(){var Ht=(0,lt.A)(function*(d,ct){G.Rm.info("Creating subgraph rect for ",ct.id,ct);const Xt=(0,ut.D7)(),{themeVariables:kt,handDrawnSeed:pt}=Xt,{clusterBkg:ue,clusterBorder:nt}=kt,{labelStyles:wt,nodeStyles:J,borderStyles:Z,backgroundStyles:It}=(0,L.GX)(ct),fe=d.insert("g").attr("class","cluster "+ct.cssClasses).attr("id",ct.id).attr("data-look",ct.look),De=(0,ut._3)(Xt.flowchart.htmlLabels),tt=fe.insert("g").attr("class","cluster-label "),l=yield(0,D.GZ)(tt,ct.label,{style:ct.labelStyle,useHtmlLabels:De,isNode:!0,width:ct.width});let T=l.getBBox();if((0,ut._3)(Xt.flowchart.htmlLabels)){const Sr=l.children[0],ta=(0,w.Ltv)(l);T=Sr.getBoundingClientRect(),ta.attr("width",T.width),ta.attr("height",T.height)}const F=ct.width<=T.width+ct.padding?T.width+ct.padding:ct.width;ct.diff=ct.width<=T.width+ct.padding?(F-ct.width)/2-ct.padding:-ct.padding;const st=ct.height,xt=ct.x-F/2,Me=ct.y-st/2;let Qt;if(G.Rm.trace("Data ",ct,JSON.stringify(ct)),"handDrawn"===ct.look){const Sr=Lt.A.svg(fe),ta=(0,L.Fr)(ct,{roughness:.7,fill:ue,stroke:nt,fillWeight:4,seed:pt}),Pr=Sr.path(Be(xt,Me,F,st,ct.rx),ta);Qt=fe.insert(()=>(G.Rm.debug("Rough node insert CXC",Pr),Pr),":first-child"),Qt.select("path:nth-child(2)").attr("style",Z.join(";")),Qt.select("path").attr("style",It.join(";").replace("fill","stroke"))}else Qt=fe.insert("rect",":first-child"),Qt.attr("style",J).attr("rx",ct.rx).attr("ry",ct.ry).attr("x",xt).attr("y",Me).attr("width",F).attr("height",st);const{subGraphTitleTopMargin:Ue}=(0,ie.O)(Xt);if(tt.attr("transform",`translate(${ct.x-T.width/2}, ${ct.y-ct.height/2+Ue})`),wt){const Sr=tt.select("span");Sr&&Sr.attr("style",wt)}const xr=Qt.node().getBBox();return ct.offsetX=0,ct.width=xr.width,ct.height=xr.height,ct.offsetY=T.height-ct.padding/2,ct.intersect=function(Sr){return Wr(ct,Sr)},{cluster:fe,labelBBox:T}});return function(d,ct){return Ht.apply(this,arguments)}}(),"kanbanSection"),X={rect:Ir,squareRect:Ir,roundedWithTitle:z,noteGroup:Xe,divider:(0,G.K2)((Ht,d)=>{const ct=(0,ut.D7)(),{themeVariables:Xt,handDrawnSeed:kt}=ct,{nodeBorder:pt}=Xt,ue=Ht.insert("g").attr("class",d.cssClasses).attr("id",d.id).attr("data-look",d.look),nt=ue.insert("g",":first-child"),wt=0*d.padding,J=d.width+wt;d.diff=-d.padding;const Z=d.height+wt,It=d.x-J/2,fe=d.y-Z/2;let De;if(d.width=J,"handDrawn"===d.look){const T=Lt.A.svg(ue).rectangle(It,fe,J,Z,{fill:"lightgrey",roughness:.5,strokeLineDash:[5],stroke:pt,seed:kt});De=ue.insert(()=>T,":first-child")}else De=nt.insert("rect",":first-child"),De.attr("class","divider").attr("x",It).attr("y",fe).attr("width",J).attr("height",Z).attr("data-look",d.look);const tt=De.node().getBBox();return d.height=tt.height,d.offsetX=0,d.offsetY=0,d.intersect=function(l){return Wr(d,l)},{cluster:ue,labelBBox:{}}},"divider"),kanbanSection:dt},re=new Map,S=(0,G.K2)(function(){var Ht=(0,lt.A)(function*(d,ct){const Xt=ct.shape||"rect",kt=yield X[Xt](d,ct);return re.set(ct.id,kt),kt});return function(d,ct){return Ht.apply(this,arguments)}}(),"insertCluster"),ee=(0,G.K2)(()=>{re=new Map},"clear");function Rt(Ht,d){return Ht.intersect(d)}(0,G.K2)(Rt,"intersectNode");var qt=Rt;function V(Ht,d,ct,Xt){var kt=Ht.x,pt=Ht.y,ue=kt-Xt.x,nt=pt-Xt.y,wt=Math.sqrt(d*d*nt*nt+ct*ct*ue*ue),J=Math.abs(d*ct*ue/wt);Xt.x<kt&&(J=-J);var Z=Math.abs(d*ct*nt/wt);return Xt.y<pt&&(Z=-Z),{x:kt+J,y:pt+Z}}(0,G.K2)(V,"intersectEllipse");var gt=V;function Y(Ht,d,ct){return gt(Ht,d,d,ct)}(0,G.K2)(Y,"intersectCircle");var Nt=Y;function St(Ht,d,ct,Xt){{const kt=d.y-Ht.y,pt=Ht.x-d.x,ue=d.x*Ht.y-Ht.x*d.y,nt=kt*ct.x+pt*ct.y+ue,wt=kt*Xt.x+pt*Xt.y+ue,J=1e-6;if(0!==nt&&0!==wt&&Ut(nt,wt))return;const Z=Xt.y-ct.y,It=ct.x-Xt.x,fe=Xt.x*ct.y-ct.x*Xt.y,De=Z*Ht.x+It*Ht.y+fe,tt=Z*d.x+It*d.y+fe;if(Math.abs(De)<J&&Math.abs(tt)<J&&Ut(De,tt))return;const l=kt*It-Z*pt;if(0===l)return;const T=Math.abs(l/2);let F=pt*fe-It*ue;const st=F<0?(F-T)/l:(F+T)/l;return F=Z*ue-kt*fe,{x:st,y:F<0?(F-T)/l:(F+T)/l}}}function Ut(Ht,d){return Ht*d>0}(0,G.K2)(St,"intersectLine"),(0,G.K2)(Ut,"sameSign");var ye=St;function le(Ht,d,ct){let Xt=Ht.x,kt=Ht.y,pt=[],ue=Number.POSITIVE_INFINITY,nt=Number.POSITIVE_INFINITY;"function"==typeof d.forEach?d.forEach(function(Z){ue=Math.min(ue,Z.x),nt=Math.min(nt,Z.y)}):(ue=Math.min(ue,d.x),nt=Math.min(nt,d.y));let wt=Xt-Ht.width/2-ue,J=kt-Ht.height/2-nt;for(let Z=0;Z<d.length;Z++){let It=d[Z],fe=d[Z<d.length-1?Z+1:0],De=ye(Ht,ct,{x:wt+It.x,y:J+It.y},{x:wt+fe.x,y:J+fe.y});De&&pt.push(De)}return pt.length?(pt.length>1&&pt.sort(function(Z,It){let fe=Z.x-ct.x,De=Z.y-ct.y,tt=Math.sqrt(fe*fe+De*De),l=It.x-ct.x,T=It.y-ct.y,F=Math.sqrt(l*l+T*T);return tt<F?-1:tt===F?0:1}),pt[0]):Ht}(0,G.K2)(le,"intersectPolygon");var oe={node:qt,circle:Nt,ellipse:gt,polygon:le,rect:Wr};function qe(Ht,d){const{labelStyles:ct}=(0,L.GX)(d);d.labelStyle=ct;const Xt=Gt(d);let kt=Xt;Xt||(kt="anchor");const pt=Ht.insert("g").attr("class",kt).attr("id",d.domId||d.id),{cssStyles:nt}=d,wt=Lt.A.svg(pt),J=(0,L.Fr)(d,{fill:"black",stroke:"none",fillStyle:"solid"});"handDrawn"!==d.look&&(J.roughness=0);const Z=wt.circle(0,0,2,J),It=pt.insert(()=>Z,":first-child");return It.attr("class","anchor").attr("style",(0,Mt.KL)(nt)),bt(d,It),d.intersect=function(fe){return G.Rm.info("Circle intersect",d,1,fe),oe.circle(d,1,fe)},pt}function We(Ht,d,ct,Xt,kt,pt,ue){const wt=(Ht+ct)/2,J=(d+Xt)/2,Z=Math.atan2(Xt-d,ct-Ht),l=Math.sqrt(((ct-Ht)/2/kt)**2+((Xt-d)/2/pt)**2);if(l>1)throw new Error("The given radii are too small to create an arc between the points.");const T=Math.sqrt(1-l**2),F=wt+T*pt*Math.sin(Z)*(ue?-1:1),st=J-T*kt*Math.cos(Z)*(ue?-1:1),xt=Math.atan2((d-st)/pt,(Ht-F)/kt);let Qt=Math.atan2((Xt-st)/pt,(ct-F)/kt)-xt;ue&&Qt<0&&(Qt+=2*Math.PI),!ue&&Qt>0&&(Qt-=2*Math.PI);const Ue=[];for(let xr=0;xr<20;xr++){const ta=xt+xr/19*Qt,Pr=F+kt*Math.cos(ta),la=st+pt*Math.sin(ta);Ue.push({x:Pr,y:la})}return Ue}function Et(Ht,d){return Tt.apply(this,arguments)}function Tt(){return(Tt=(0,lt.A)(function*(Ht,d){const{labelStyles:ct,nodeStyles:Xt}=(0,L.GX)(d);d.labelStyle=ct;const{shapeSvg:kt,bbox:pt}=yield At(Ht,d,Gt(d)),ue=pt.width+d.padding+20,nt=pt.height+d.padding,wt=nt/2,J=wt/(2.5+nt/50),{cssStyles:Z}=d,It=[{x:ue/2,y:-nt/2},{x:-ue/2,y:-nt/2},...We(-ue/2,-nt/2,-ue/2,nt/2,J,wt,!1),{x:ue/2,y:nt/2},...We(ue/2,nt/2,ue/2,-nt/2,J,wt,!0)],fe=Lt.A.svg(kt),De=(0,L.Fr)(d,{});"handDrawn"!==d.look&&(De.roughness=0,De.fillStyle="solid");const tt=j(It),l=fe.path(tt,De),T=kt.insert(()=>l,":first-child");return T.attr("class","basic label-container"),Z&&"handDrawn"!==d.look&&T.selectAll("path").attr("style",Z),Xt&&"handDrawn"!==d.look&&T.selectAll("path").attr("style",Xt),T.attr("transform",`translate(${J/2}, 0)`),bt(d,T),d.intersect=function(F){return oe.polygon(d,It,F)},kt})).apply(this,arguments)}function B(Ht,d,ct,Xt){return Ht.insert("polygon",":first-child").attr("points",Xt.map(function(kt){return kt.x+","+kt.y}).join(" ")).attr("class","label-container").attr("transform","translate("+-d/2+","+ct/2+")")}function N(Ht,d){return et.apply(this,arguments)}function et(){return(et=(0,lt.A)(function*(Ht,d){const{labelStyles:ct,nodeStyles:Xt}=(0,L.GX)(d);d.labelStyle=ct;const{shapeSvg:kt,bbox:pt}=yield At(Ht,d,Gt(d)),ue=pt.height+d.padding,wt=pt.width+d.padding+12,It=-ue,De=[{x:12,y:It},{x:wt,y:It},{x:wt,y:0},{x:0,y:0},{x:0,y:It+12},{x:12,y:It}];let tt;const{cssStyles:l}=d;if("handDrawn"===d.look){const T=Lt.A.svg(kt),F=(0,L.Fr)(d,{}),st=j(De),xt=T.path(st,F);tt=kt.insert(()=>xt,":first-child").attr("transform",`translate(${-wt/2}, ${ue/2})`),l&&tt.attr("style",l)}else tt=B(kt,wt,ue,De);return Xt&&tt.attr("style",Xt),bt(d,tt),d.intersect=function(T){return oe.polygon(d,De,T)},kt})).apply(this,arguments)}function yt(Ht,d){const{nodeStyles:ct}=(0,L.GX)(d);d.label="";const Xt=Ht.insert("g").attr("class",Gt(d)).attr("id",d.domId??d.id),{cssStyles:kt}=d,pt=Math.max(28,d.width??0),ue=[{x:0,y:pt/2},{x:pt/2,y:0},{x:0,y:-pt/2},{x:-pt/2,y:0}],nt=Lt.A.svg(Xt),wt=(0,L.Fr)(d,{});"handDrawn"!==d.look&&(wt.roughness=0,wt.fillStyle="solid");const J=j(ue),Z=nt.path(J,wt),It=Xt.insert(()=>Z,":first-child");return kt&&"handDrawn"!==d.look&&It.selectAll("path").attr("style",kt),ct&&"handDrawn"!==d.look&&It.selectAll("path").attr("style",ct),d.width=28,d.height=28,d.intersect=function(fe){return oe.polygon(d,ue,fe)},Xt}function it(Ht,d,ct){return rt.apply(this,arguments)}function rt(){return(rt=(0,lt.A)(function*(Ht,d,ct){const{labelStyles:Xt,nodeStyles:kt}=(0,L.GX)(d);d.labelStyle=Xt;const{shapeSvg:pt,bbox:ue,halfPadding:nt}=yield At(Ht,d,Gt(d)),J=ue.width/2+(ct?.padding??nt);let Z;const{cssStyles:It}=d;if("handDrawn"===d.look){const fe=Lt.A.svg(pt),De=(0,L.Fr)(d,{}),tt=fe.circle(0,0,2*J,De);Z=pt.insert(()=>tt,":first-child"),Z.attr("class","basic label-container").attr("style",(0,Mt.KL)(It))}else Z=pt.insert("circle",":first-child").attr("class","basic label-container").attr("style",kt).attr("r",J).attr("cx",0).attr("cy",0);return bt(d,Z),d.calcIntersect=function(fe,De){return oe.circle(fe,fe.width/2,De)},d.intersect=function(fe){return G.Rm.info("Circle intersect",d,J,fe),oe.circle(d,J,fe)},pt})).apply(this,arguments)}function _t(Ht){const d=Math.cos(Math.PI/4),ct=Math.sin(Math.PI/4),Xt=2*Ht;return`M ${-Xt/2*d},${Xt/2*ct} L ${Xt/2*d},${-Xt/2*ct}\n                   M ${Xt/2*d},${Xt/2*ct} L ${-Xt/2*d},${-Xt/2*ct}`}function ht(Ht,d){const{labelStyles:ct,nodeStyles:Xt}=(0,L.GX)(d);d.labelStyle=ct,d.label="";const kt=Ht.insert("g").attr("class",Gt(d)).attr("id",d.domId??d.id),pt=Math.max(30,d?.width??0),{cssStyles:ue}=d,nt=Lt.A.svg(kt),wt=(0,L.Fr)(d,{});"handDrawn"!==d.look&&(wt.roughness=0,wt.fillStyle="solid");const J=nt.circle(0,0,2*pt,wt),Z=_t(pt),It=nt.path(Z,wt),fe=kt.insert(()=>J,":first-child");return fe.insert(()=>It),ue&&"handDrawn"!==d.look&&fe.selectAll("path").attr("style",ue),Xt&&"handDrawn"!==d.look&&fe.selectAll("path").attr("style",Xt),bt(d,fe),d.intersect=function(De){return G.Rm.info("crossedCircle intersect",d,{radius:pt,point:De}),oe.circle(d,pt,De)},kt}function Ot(Ht,d,ct,Xt=100,kt=0,pt=180){const ue=[],nt=kt*Math.PI/180,Z=(pt*Math.PI/180-nt)/(Xt-1);for(let It=0;It<Xt;It++){const fe=nt+It*Z,De=Ht+ct*Math.cos(fe),tt=d+ct*Math.sin(fe);ue.push({x:-De,y:-tt})}return ue}function H(Ht,d){return ot.apply(this,arguments)}function ot(){return(ot=(0,lt.A)(function*(Ht,d){const{labelStyles:ct,nodeStyles:Xt}=(0,L.GX)(d);d.labelStyle=ct;const{shapeSvg:kt,bbox:pt,label:ue}=yield At(Ht,d,Gt(d)),nt=pt.width+(d.padding??0),wt=pt.height+(d.padding??0),J=Math.max(5,.1*wt),{cssStyles:Z}=d,It=[...Ot(nt/2,-wt/2,J,30,-90,0),{x:-nt/2-J,y:J},...Ot(nt/2+2*J,-J,J,20,-180,-270),...Ot(nt/2+2*J,J,J,20,-90,-180),{x:-nt/2-J,y:-wt/2},...Ot(nt/2,wt/2,J,20,0,90)],fe=[{x:nt/2,y:-wt/2-J},{x:-nt/2,y:-wt/2-J},...Ot(nt/2,-wt/2,J,20,-90,0),{x:-nt/2-J,y:-J},...Ot(nt/2+.1*nt,-J,J,20,-180,-270),...Ot(nt/2+.1*nt,J,J,20,-90,-180),{x:-nt/2-J,y:wt/2},...Ot(nt/2,wt/2,J,20,0,90),{x:-nt/2,y:wt/2+J},{x:nt/2,y:wt/2+J}],De=Lt.A.svg(kt),tt=(0,L.Fr)(d,{fill:"none"});"handDrawn"!==d.look&&(tt.roughness=0,tt.fillStyle="solid");const T=j(It).replace("Z",""),F=De.path(T,tt),st=j(fe),xt=De.path(st,{...tt}),Me=kt.insert("g",":first-child");return Me.insert(()=>xt,":first-child").attr("stroke-opacity",0),Me.insert(()=>F,":first-child"),Me.attr("class","text"),Z&&"handDrawn"!==d.look&&Me.selectAll("path").attr("style",Z),Xt&&"handDrawn"!==d.look&&Me.selectAll("path").attr("style",Xt),Me.attr("transform",`translate(${J}, 0)`),ue.attr("transform",`translate(${-nt/2+J-(pt.x-(pt.left??0))},${-wt/2+(d.padding??0)/2-(pt.y-(pt.top??0))})`),bt(d,Me),d.intersect=function(Qt){return oe.polygon(d,fe,Qt)},kt})).apply(this,arguments)}function ke(Ht,d,ct,Xt=100,kt=0,pt=180){const ue=[],nt=kt*Math.PI/180,Z=(pt*Math.PI/180-nt)/(Xt-1);for(let It=0;It<Xt;It++){const fe=nt+It*Z,De=Ht+ct*Math.cos(fe),tt=d+ct*Math.sin(fe);ue.push({x:De,y:tt})}return ue}function Pt(Ht,d){return Zt.apply(this,arguments)}function Zt(){return(Zt=(0,lt.A)(function*(Ht,d){const{labelStyles:ct,nodeStyles:Xt}=(0,L.GX)(d);d.labelStyle=ct;const{shapeSvg:kt,bbox:pt,label:ue}=yield At(Ht,d,Gt(d)),nt=pt.width+(d.padding??0),wt=pt.height+(d.padding??0),J=Math.max(5,.1*wt),{cssStyles:Z}=d,It=[...ke(nt/2,-wt/2,J,20,-90,0),{x:nt/2+J,y:-J},...ke(nt/2+2*J,-J,J,20,-180,-270),...ke(nt/2+2*J,J,J,20,-90,-180),{x:nt/2+J,y:wt/2},...ke(nt/2,wt/2,J,20,0,90)],fe=[{x:-nt/2,y:-wt/2-J},{x:nt/2,y:-wt/2-J},...ke(nt/2,-wt/2,J,20,-90,0),{x:nt/2+J,y:-J},...ke(nt/2+2*J,-J,J,20,-180,-270),...ke(nt/2+2*J,J,J,20,-90,-180),{x:nt/2+J,y:wt/2},...ke(nt/2,wt/2,J,20,0,90),{x:nt/2,y:wt/2+J},{x:-nt/2,y:wt/2+J}],De=Lt.A.svg(kt),tt=(0,L.Fr)(d,{fill:"none"});"handDrawn"!==d.look&&(tt.roughness=0,tt.fillStyle="solid");const T=j(It).replace("Z",""),F=De.path(T,tt),st=j(fe),xt=De.path(st,{...tt}),Me=kt.insert("g",":first-child");return Me.insert(()=>xt,":first-child").attr("stroke-opacity",0),Me.insert(()=>F,":first-child"),Me.attr("class","text"),Z&&"handDrawn"!==d.look&&Me.selectAll("path").attr("style",Z),Xt&&"handDrawn"!==d.look&&Me.selectAll("path").attr("style",Xt),Me.attr("transform",`translate(${-J}, 0)`),ue.attr("transform",`translate(${-nt/2+(d.padding??0)/2-(pt.x-(pt.left??0))},${-wt/2+(d.padding??0)/2-(pt.y-(pt.top??0))})`),bt(d,Me),d.intersect=function(Qt){return oe.polygon(d,fe,Qt)},kt})).apply(this,arguments)}function pe(Ht,d,ct,Xt=100,kt=0,pt=180){const ue=[],nt=kt*Math.PI/180,Z=(pt*Math.PI/180-nt)/(Xt-1);for(let It=0;It<Xt;It++){const fe=nt+It*Z,De=Ht+ct*Math.cos(fe),tt=d+ct*Math.sin(fe);ue.push({x:-De,y:-tt})}return ue}function Re(Ht,d){return Ze.apply(this,arguments)}function Ze(){return(Ze=(0,lt.A)(function*(Ht,d){const{labelStyles:ct,nodeStyles:Xt}=(0,L.GX)(d);d.labelStyle=ct;const{shapeSvg:kt,bbox:pt,label:ue}=yield At(Ht,d,Gt(d)),nt=pt.width+(d.padding??0),wt=pt.height+(d.padding??0),J=Math.max(5,.1*wt),{cssStyles:Z}=d,It=[...pe(nt/2,-wt/2,J,30,-90,0),{x:-nt/2-J,y:J},...pe(nt/2+2*J,-J,J,20,-180,-270),...pe(nt/2+2*J,J,J,20,-90,-180),{x:-nt/2-J,y:-wt/2},...pe(nt/2,wt/2,J,20,0,90)],fe=[...pe(-nt/2+J+J/2,-wt/2,J,20,-90,-180),{x:nt/2-J/2,y:J},...pe(-nt/2-J/2,-J,J,20,0,90),...pe(-nt/2-J/2,J,J,20,-90,0),{x:nt/2-J/2,y:-J},...pe(-nt/2+J+J/2,wt/2,J,30,-180,-270)],De=[{x:nt/2,y:-wt/2-J},{x:-nt/2,y:-wt/2-J},...pe(nt/2,-wt/2,J,20,-90,0),{x:-nt/2-J,y:-J},...pe(nt/2+2*J,-J,J,20,-180,-270),...pe(nt/2+2*J,J,J,20,-90,-180),{x:-nt/2-J,y:wt/2},...pe(nt/2,wt/2,J,20,0,90),{x:-nt/2,y:wt/2+J},{x:nt/2-J-J/2,y:wt/2+J},...pe(-nt/2+J+J/2,-wt/2,J,20,-90,-180),{x:nt/2-J/2,y:J},...pe(-nt/2-J/2,-J,J,20,0,90),...pe(-nt/2-J/2,J,J,20,-90,0),{x:nt/2-J/2,y:-J},...pe(-nt/2+J+J/2,wt/2,J,30,-180,-270)],tt=Lt.A.svg(kt),l=(0,L.Fr)(d,{fill:"none"});"handDrawn"!==d.look&&(l.roughness=0,l.fillStyle="solid");const F=j(It).replace("Z",""),st=tt.path(F,l),Me=j(fe).replace("Z",""),Qt=tt.path(Me,l),Ue=j(De),xr=tt.path(Ue,{...l}),Sr=kt.insert("g",":first-child");return Sr.insert(()=>xr,":first-child").attr("stroke-opacity",0),Sr.insert(()=>st,":first-child"),Sr.insert(()=>Qt,":first-child"),Sr.attr("class","text"),Z&&"handDrawn"!==d.look&&Sr.selectAll("path").attr("style",Z),Xt&&"handDrawn"!==d.look&&Sr.selectAll("path").attr("style",Xt),Sr.attr("transform",`translate(${J-J/4}, 0)`),ue.attr("transform",`translate(${-nt/2+(d.padding??0)/2-(pt.x-(pt.left??0))},${-wt/2+(d.padding??0)/2-(pt.y-(pt.top??0))})`),bt(d,Sr),d.intersect=function(ta){return oe.polygon(d,De,ta)},kt})).apply(this,arguments)}function de(Ht,d){return yr.apply(this,arguments)}function yr(){return(yr=(0,lt.A)(function*(Ht,d){const{labelStyles:ct,nodeStyles:Xt}=(0,L.GX)(d);d.labelStyle=ct;const{shapeSvg:kt,bbox:pt}=yield At(Ht,d,Gt(d)),wt=Math.max(80,1.25*(pt.width+2*(d.padding??0)),d?.width??0),J=Math.max(20,pt.height+2*(d.padding??0),d?.height??0),Z=J/2,{cssStyles:It}=d,fe=Lt.A.svg(kt),De=(0,L.Fr)(d,{});"handDrawn"!==d.look&&(De.roughness=0,De.fillStyle="solid");const T=wt-Z,F=J/4,st=[{x:T,y:0},{x:F,y:0},{x:0,y:J/2},{x:F,y:J},{x:T,y:J},...ze(-T,-J/2,Z,50,270,90)],xt=j(st),Me=fe.path(xt,De),Qt=kt.insert(()=>Me,":first-child");return Qt.attr("class","basic label-container"),It&&"handDrawn"!==d.look&&Qt.selectChildren("path").attr("style",It),Xt&&"handDrawn"!==d.look&&Qt.selectChildren("path").attr("style",Xt),Qt.attr("transform",`translate(${-wt/2}, ${-J/2})`),bt(d,Qt),d.intersect=function(Ue){return oe.polygon(d,st,Ue)},kt})).apply(this,arguments)}(0,G.K2)(qe,"anchor"),(0,G.K2)(We,"generateArcPoints"),(0,G.K2)(Et,"bowTieRect"),(0,G.K2)(B,"insertPolygonShape"),(0,G.K2)(N,"card"),(0,G.K2)(yt,"choice"),(0,G.K2)(it,"circle"),(0,G.K2)(_t,"createLine"),(0,G.K2)(ht,"crossedCircle"),(0,G.K2)(Ot,"generateCirclePoints"),(0,G.K2)(H,"curlyBraceLeft"),(0,G.K2)(ke,"generateCirclePoints"),(0,G.K2)(Pt,"curlyBraceRight"),(0,G.K2)(pe,"generateCirclePoints"),(0,G.K2)(Re,"curlyBraces"),(0,G.K2)(de,"curvedTrapezoid");var mr=(0,G.K2)((Ht,d,ct,Xt,kt,pt)=>[`M${Ht},${d+pt}`,`a${kt},${pt} 0,0,0 ${ct},0`,`a${kt},${pt} 0,0,0 ${-ct},0`,`l0,${Xt}`,`a${kt},${pt} 0,0,0 ${ct},0`,"l0,"+-Xt].join(" "),"createCylinderPathD"),Wt=(0,G.K2)((Ht,d,ct,Xt,kt,pt)=>[`M${Ht},${d+pt}`,`M${Ht+ct},${d+pt}`,`a${kt},${pt} 0,0,0 ${-ct},0`,`l0,${Xt}`,`a${kt},${pt} 0,0,0 ${ct},0`,"l0,"+-Xt].join(" "),"createOuterCylinderPathD"),we=(0,G.K2)((Ht,d,ct,Xt,kt,pt)=>[`M${Ht-ct/2},${-Xt/2}`,`a${kt},${pt} 0,0,0 ${ct},0`].join(" "),"createInnerCylinderPathD");function sr(Ht,d){return ve.apply(this,arguments)}function ve(){return(ve=(0,lt.A)(function*(Ht,d){const{labelStyles:ct,nodeStyles:Xt}=(0,L.GX)(d);d.labelStyle=ct;const{shapeSvg:kt,bbox:pt,label:ue}=yield At(Ht,d,Gt(d)),nt=Math.max(pt.width+d.padding,d.width??0),wt=nt/2,J=wt/(2.5+nt/50),Z=Math.max(pt.height+J+d.padding,d.height??0);let It;const{cssStyles:fe}=d;if("handDrawn"===d.look){const De=Lt.A.svg(kt),tt=Wt(0,0,nt,Z,wt,J),l=we(0,J,nt,Z,wt,J),T=De.path(tt,(0,L.Fr)(d,{})),F=De.path(l,(0,L.Fr)(d,{fill:"none"}));It=kt.insert(()=>F,":first-child"),It=kt.insert(()=>T,":first-child"),It.attr("class","basic label-container"),fe&&It.attr("style",fe)}else{const De=mr(0,0,nt,Z,wt,J);It=kt.insert("path",":first-child").attr("d",De).attr("class","basic label-container").attr("style",(0,Mt.KL)(fe)).attr("style",Xt)}return It.attr("label-offset-y",J),It.attr("transform",`translate(${-nt/2}, ${-(Z/2+J)})`),bt(d,It),ue.attr("transform",`translate(${-pt.width/2-(pt.x-(pt.left??0))}, ${-pt.height/2+(d.padding??0)/1.5-(pt.y-(pt.top??0))})`),d.intersect=function(De){const tt=oe.rect(d,De),l=tt.x-(d.x??0);if(0!=wt&&(Math.abs(l)<(d.width??0)/2||Math.abs(l)==(d.width??0)/2&&Math.abs(tt.y-(d.y??0))>(d.height??0)/2-J)){let T=J*J*(1-l*l/(wt*wt));T>0&&(T=Math.sqrt(T)),T=J-T,De.y-(d.y??0)>0&&(T=-T),tt.y+=T}return tt},kt})).apply(this,arguments)}function ce(Ht,d){return Ee.apply(this,arguments)}function Ee(){return(Ee=(0,lt.A)(function*(Ht,d){const{labelStyles:ct,nodeStyles:Xt}=(0,L.GX)(d);d.labelStyle=ct;const{shapeSvg:kt,bbox:pt,label:ue}=yield At(Ht,d,Gt(d)),wt=pt.height+d.padding,J=.2*wt,Z=-(pt.width+d.padding)/2,It=-wt/2-J/2,{cssStyles:fe}=d,De=Lt.A.svg(kt),tt=(0,L.Fr)(d,{});"handDrawn"!==d.look&&(tt.roughness=0,tt.fillStyle="solid");const T=De.polygon([{x:Z,y:It+J},{x:-Z,y:It+J},{x:-Z,y:-It},{x:Z,y:-It},{x:Z,y:It},{x:-Z,y:It},{x:-Z,y:It+J}].map(st=>[st.x,st.y]),tt),F=kt.insert(()=>T,":first-child");return F.attr("class","basic label-container"),fe&&"handDrawn"!==d.look&&F.selectAll("path").attr("style",fe),Xt&&"handDrawn"!==d.look&&F.selectAll("path").attr("style",Xt),ue.attr("transform",`translate(${Z+(d.padding??0)/2-(pt.x-(pt.left??0))}, ${It+J+(d.padding??0)/2-(pt.y-(pt.top??0))})`),bt(d,F),d.intersect=function(st){return oe.rect(d,st)},kt})).apply(this,arguments)}function Ae(Ht,d){return er.apply(this,arguments)}function er(){return(er=(0,lt.A)(function*(Ht,d){const{labelStyles:ct,nodeStyles:Xt}=(0,L.GX)(d);d.labelStyle=ct;const{shapeSvg:kt,bbox:pt,halfPadding:ue}=yield At(Ht,d,Gt(d)),wt=pt.width/2+ue+5,J=pt.width/2+ue;let Z;const{cssStyles:It}=d;if("handDrawn"===d.look){const fe=Lt.A.svg(kt),De=(0,L.Fr)(d,{roughness:.2,strokeWidth:2.5}),tt=(0,L.Fr)(d,{roughness:.2,strokeWidth:1.5}),l=fe.circle(0,0,2*wt,De),T=fe.circle(0,0,2*J,tt);Z=kt.insert("g",":first-child"),Z.attr("class",(0,Mt.KL)(d.cssClasses)).attr("style",(0,Mt.KL)(It)),Z.node()?.appendChild(l),Z.node()?.appendChild(T)}else{Z=kt.insert("g",":first-child");const fe=Z.insert("circle",":first-child"),De=Z.insert("circle");Z.attr("class","basic label-container").attr("style",Xt),fe.attr("class","outer-circle").attr("style",Xt).attr("r",wt).attr("cx",0).attr("cy",0),De.attr("class","inner-circle").attr("style",Xt).attr("r",J).attr("cx",0).attr("cy",0)}return bt(d,Z),d.intersect=function(fe){return G.Rm.info("DoubleCircle intersect",d,wt,fe),oe.circle(d,wt,fe)},kt})).apply(this,arguments)}function Qe(Ht,d,{config:{themeVariables:ct}}){const{labelStyles:Xt,nodeStyles:kt}=(0,L.GX)(d);d.label="",d.labelStyle=Xt;const pt=Ht.insert("g").attr("class",Gt(d)).attr("id",d.domId??d.id),{cssStyles:nt}=d,wt=Lt.A.svg(pt),{nodeBorder:J}=ct,Z=(0,L.Fr)(d,{fillStyle:"solid"});"handDrawn"!==d.look&&(Z.roughness=0);const It=wt.circle(0,0,14,Z),fe=pt.insert(()=>It,":first-child");return fe.selectAll("path").attr("style",`fill: ${J} !important;`),nt&&nt.length>0&&"handDrawn"!==d.look&&fe.selectAll("path").attr("style",nt),kt&&"handDrawn"!==d.look&&fe.selectAll("path").attr("style",kt),bt(d,fe),d.intersect=function(De){return G.Rm.info("filledCircle intersect",d,{radius:7,point:De}),oe.circle(d,7,De)},pt}function Dr(Ht,d){return _e.apply(this,arguments)}function _e(){return(_e=(0,lt.A)(function*(Ht,d){const{labelStyles:ct,nodeStyles:Xt}=(0,L.GX)(d);d.labelStyle=ct;const{shapeSvg:kt,bbox:pt,label:ue}=yield At(Ht,d,Gt(d)),nt=pt.width+(d.padding??0),wt=nt+pt.height,J=nt+pt.height,Z=[{x:0,y:-wt},{x:J,y:-wt},{x:J/2,y:0}],{cssStyles:It}=d,fe=Lt.A.svg(kt),De=(0,L.Fr)(d,{});"handDrawn"!==d.look&&(De.roughness=0,De.fillStyle="solid");const tt=j(Z),l=fe.path(tt,De),T=kt.insert(()=>l,":first-child").attr("transform",`translate(${-wt/2}, ${wt/2})`);return It&&"handDrawn"!==d.look&&T.selectChildren("path").attr("style",It),Xt&&"handDrawn"!==d.look&&T.selectChildren("path").attr("style",Xt),d.width=nt,d.height=wt,bt(d,T),ue.attr("transform",`translate(${-pt.width/2-(pt.x-(pt.left??0))}, ${-wt/2+(d.padding??0)/2+(pt.y-(pt.top??0))})`),d.intersect=function(F){return G.Rm.info("Triangle intersect",d,Z,F),oe.polygon(d,Z,F)},kt})).apply(this,arguments)}function Yr(Ht,d,{dir:ct,config:{state:Xt,themeVariables:kt}}){const{nodeStyles:pt}=(0,L.GX)(d);d.label="";const ue=Ht.insert("g").attr("class",Gt(d)).attr("id",d.domId??d.id),{cssStyles:nt}=d;let wt=Math.max(70,d?.width??0),J=Math.max(10,d?.height??0);"LR"===ct&&(wt=Math.max(10,d?.width??0),J=Math.max(70,d?.height??0));const Z=-1*wt/2,It=-1*J/2,fe=Lt.A.svg(ue),De=(0,L.Fr)(d,{stroke:kt.lineColor,fill:kt.lineColor});"handDrawn"!==d.look&&(De.roughness=0,De.fillStyle="solid");const tt=fe.rectangle(Z,It,wt,J,De),l=ue.insert(()=>tt,":first-child");nt&&"handDrawn"!==d.look&&l.selectAll("path").attr("style",nt),pt&&"handDrawn"!==d.look&&l.selectAll("path").attr("style",pt),bt(d,l);const T=Xt?.padding??0;return d.width&&d.height&&(d.width+=T/2||0,d.height+=T/2||0),d.intersect=function(F){return oe.rect(d,F)},ue}function nr(Ht,d){return te.apply(this,arguments)}function te(){return(te=(0,lt.A)(function*(Ht,d){const{labelStyles:ct,nodeStyles:Xt}=(0,L.GX)(d);d.labelStyle=ct;const{shapeSvg:ue,bbox:nt}=yield At(Ht,d,Gt(d)),wt=Math.max(80,nt.width+2*(d.padding??0),d?.width??0),J=Math.max(50,nt.height+2*(d.padding??0),d?.height??0),Z=J/2,{cssStyles:It}=d,fe=Lt.A.svg(ue),De=(0,L.Fr)(d,{});"handDrawn"!==d.look&&(De.roughness=0,De.fillStyle="solid");const tt=[{x:-wt/2,y:-J/2},{x:wt/2-Z,y:-J/2},...ze(-wt/2+Z,0,Z,50,90,270),{x:wt/2-Z,y:J/2},{x:-wt/2,y:J/2}],l=j(tt),T=fe.path(l,De),F=ue.insert(()=>T,":first-child");return F.attr("class","basic label-container"),It&&"handDrawn"!==d.look&&F.selectChildren("path").attr("style",It),Xt&&"handDrawn"!==d.look&&F.selectChildren("path").attr("style",Xt),bt(d,F),d.intersect=function(st){return G.Rm.info("Pill intersect",d,{radius:Z,point:st}),oe.polygon(d,tt,st)},ue})).apply(this,arguments)}function ne(Ht,d){return be.apply(this,arguments)}function be(){return(be=(0,lt.A)(function*(Ht,d){const{labelStyles:ct,nodeStyles:Xt}=(0,L.GX)(d);d.labelStyle=ct;const{shapeSvg:kt,bbox:pt}=yield At(Ht,d,Gt(d)),ue=pt.height+(d.padding??0),nt=pt.width+2.5*(d.padding??0),{cssStyles:wt}=d,J=Lt.A.svg(kt),Z=(0,L.Fr)(d,{});"handDrawn"!==d.look&&(Z.roughness=0,Z.fillStyle="solid");let It=nt/2;It+=It/6;const De=ue/2,l=It-De/2,T=[{x:-l,y:-De},{x:0,y:-De},{x:l,y:-De},{x:It,y:0},{x:l,y:De},{x:0,y:De},{x:-l,y:De},{x:-It,y:0}],F=j(T),st=J.path(F,Z),xt=kt.insert(()=>st,":first-child");return xt.attr("class","basic label-container"),wt&&"handDrawn"!==d.look&&xt.selectChildren("path").attr("style",wt),Xt&&"handDrawn"!==d.look&&xt.selectChildren("path").attr("style",Xt),d.width=nt,d.height=ue,bt(d,xt),d.intersect=function(Me){return oe.polygon(d,T,Me)},kt})).apply(this,arguments)}function ar(Ht,d){return g.apply(this,arguments)}function g(){return(g=(0,lt.A)(function*(Ht,d){const{labelStyles:ct,nodeStyles:Xt}=(0,L.GX)(d);d.label="",d.labelStyle=ct;const{shapeSvg:kt}=yield At(Ht,d,Gt(d)),pt=Math.max(30,d?.width??0),ue=Math.max(30,d?.height??0),{cssStyles:nt}=d,wt=Lt.A.svg(kt),J=(0,L.Fr)(d,{});"handDrawn"!==d.look&&(J.roughness=0,J.fillStyle="solid");const Z=[{x:0,y:0},{x:pt,y:0},{x:0,y:ue},{x:pt,y:ue}],It=j(Z),fe=wt.path(It,J),De=kt.insert(()=>fe,":first-child");return De.attr("class","basic label-container"),nt&&"handDrawn"!==d.look&&De.selectChildren("path").attr("style",nt),Xt&&"handDrawn"!==d.look&&De.selectChildren("path").attr("style",Xt),De.attr("transform",`translate(${-pt/2}, ${-ue/2})`),bt(d,De),d.intersect=function(tt){return G.Rm.info("Pill intersect",d,{points:Z}),oe.polygon(d,Z,tt)},kt})).apply(this,arguments)}function y(Ht,d,ct){return E.apply(this,arguments)}function E(){return(E=(0,lt.A)(function*(Ht,d,{config:{themeVariables:ct,flowchart:Xt}}){const{labelStyles:kt}=(0,L.GX)(d);d.labelStyle=kt;const nt=Math.max(d.assetHeight??48,d.assetWidth??48),wt=Xt?.wrappingWidth;d.width=Math.max(nt,wt??0);const{shapeSvg:J,bbox:Z,label:It}=yield At(Ht,d,"icon-shape default"),fe="t"===d.pos,De=nt,tt=nt,{nodeBorder:l}=ct,{stylesMap:T}=(0,L.WW)(d),F=-tt/2,st=-De/2,xt=d.label?8:0,Me=Lt.A.svg(J),Qt=(0,L.Fr)(d,{stroke:"none",fill:"none"});"handDrawn"!==d.look&&(Qt.roughness=0,Qt.fillStyle="solid");const Ue=Me.rectangle(F,st,tt,De,Qt),xr=Math.max(tt,Z.width),Sr=De+Z.height+xt,ta=Me.rectangle(-xr/2,-Sr/2,xr,Sr,{...Qt,fill:"transparent",stroke:"none"}),Pr=J.insert(()=>Ue,":first-child"),la=J.insert(()=>ta);if(d.icon){const Ca=J.append("g");Ca.html(`<g>${yield(0,D.WY)(d.icon,{height:nt,width:nt,fallbackPrefix:""})}</g>`);const ka=Ca.node().getBBox(),Xa=ka.height,Fa=ka.y;Ca.attr("transform",`translate(${-ka.width/2-ka.x},${fe?Z.height/2+xt/2-Xa/2-Fa:-Z.height/2-xt/2-Xa/2-Fa})`),Ca.attr("style",`color: ${T.get("stroke")??l};`)}return It.attr("transform",`translate(${-Z.width/2-(Z.x-(Z.left??0))},${fe?-Sr/2:Sr/2-Z.height})`),Pr.attr("transform",`translate(0,${fe?Z.height/2+xt/2:-Z.height/2-xt/2})`),bt(d,la),d.intersect=function(Ca){if(G.Rm.info("iconSquare intersect",d,Ca),!d.label)return oe.rect(d,Ca);const ka=d.x??0,Ba=d.y??0,Xa=d.height??0;let za=[];return za=fe?[{x:ka-Z.width/2,y:Ba-Xa/2},{x:ka+Z.width/2,y:Ba-Xa/2},{x:ka+Z.width/2,y:Ba-Xa/2+Z.height+xt},{x:ka+tt/2,y:Ba-Xa/2+Z.height+xt},{x:ka+tt/2,y:Ba+Xa/2},{x:ka-tt/2,y:Ba+Xa/2},{x:ka-tt/2,y:Ba-Xa/2+Z.height+xt},{x:ka-Z.width/2,y:Ba-Xa/2+Z.height+xt}]:[{x:ka-tt/2,y:Ba-Xa/2},{x:ka+tt/2,y:Ba-Xa/2},{x:ka+tt/2,y:Ba-Xa/2+De},{x:ka+Z.width/2,y:Ba-Xa/2+De},{x:ka+Z.width/2/2,y:Ba+Xa/2},{x:ka-Z.width/2,y:Ba+Xa/2},{x:ka-Z.width/2,y:Ba-Xa/2+De},{x:ka-tt/2,y:Ba-Xa/2+De}],oe.polygon(d,za,Ca)},J})).apply(this,arguments)}function M(Ht,d,ct){return m.apply(this,arguments)}function m(){return(m=(0,lt.A)(function*(Ht,d,{config:{themeVariables:ct,flowchart:Xt}}){const{labelStyles:kt}=(0,L.GX)(d);d.labelStyle=kt;const nt=Math.max(d.assetHeight??48,d.assetWidth??48),wt=Xt?.wrappingWidth;d.width=Math.max(nt,wt??0);const{shapeSvg:J,bbox:Z,label:It}=yield At(Ht,d,"icon-shape default"),De=d.label?8:0,tt="t"===d.pos,{nodeBorder:l,mainBkg:T}=ct,{stylesMap:F}=(0,L.WW)(d),st=Lt.A.svg(J),xt=(0,L.Fr)(d,{});"handDrawn"!==d.look&&(xt.roughness=0,xt.fillStyle="solid");const Me=F.get("fill");xt.stroke=Me??T;const Qt=J.append("g");d.icon&&Qt.html(`<g>${yield(0,D.WY)(d.icon,{height:nt,width:nt,fallbackPrefix:""})}</g>`);const Ue=Qt.node().getBBox(),xr=Ue.width,Sr=Ue.height,ta=Ue.x,Pr=Ue.y,la=Math.max(xr,Sr)*Math.SQRT2+40,Ca=st.circle(0,0,la,xt),ka=Math.max(la,Z.width),Ba=la+Z.height+De,Xa=st.rectangle(-ka/2,-Ba/2,ka,Ba,{...xt,fill:"transparent",stroke:"none"}),za=J.insert(()=>Ca,":first-child"),Fa=J.insert(()=>Xa);return Qt.attr("transform",`translate(${-xr/2-ta},${tt?Z.height/2+De/2-Sr/2-Pr:-Z.height/2-De/2-Sr/2-Pr})`),Qt.attr("style",`color: ${F.get("stroke")??l};`),It.attr("transform",`translate(${-Z.width/2-(Z.x-(Z.left??0))},${tt?-Ba/2:Ba/2-Z.height})`),za.attr("transform",`translate(0,${tt?Z.height/2+De/2:-Z.height/2-De/2})`),bt(d,Fa),d.intersect=function(ui){return G.Rm.info("iconSquare intersect",d,ui),oe.rect(d,ui)},J})).apply(this,arguments)}function A(Ht,d,ct){return v.apply(this,arguments)}function v(){return(v=(0,lt.A)(function*(Ht,d,{config:{themeVariables:ct,flowchart:Xt}}){const{labelStyles:kt}=(0,L.GX)(d);d.labelStyle=kt;const nt=Math.max(d.assetHeight??48,d.assetWidth??48),wt=Xt?.wrappingWidth;d.width=Math.max(nt,wt??0);const{shapeSvg:J,bbox:Z,halfPadding:It,label:fe}=yield At(Ht,d,"icon-shape default"),De="t"===d.pos,tt=nt+2*It,l=nt+2*It,{nodeBorder:T,mainBkg:F}=ct,{stylesMap:st}=(0,L.WW)(d),xt=-l/2,Me=-tt/2,Qt=d.label?8:0,Ue=Lt.A.svg(J),xr=(0,L.Fr)(d,{});"handDrawn"!==d.look&&(xr.roughness=0,xr.fillStyle="solid");const Sr=st.get("fill");xr.stroke=Sr??F;const ta=Ue.path(Be(xt,Me,l,tt,5),xr),Pr=Math.max(l,Z.width),la=tt+Z.height+Qt,Ca=Ue.rectangle(-Pr/2,-la/2,Pr,la,{...xr,fill:"transparent",stroke:"none"}),ka=J.insert(()=>ta,":first-child").attr("class","icon-shape2"),Ba=J.insert(()=>Ca);if(d.icon){const Xa=J.append("g");Xa.html(`<g>${yield(0,D.WY)(d.icon,{height:nt,width:nt,fallbackPrefix:""})}</g>`);const za=Xa.node().getBBox(),ui=za.height,$n=za.y;Xa.attr("transform",`translate(${-za.width/2-za.x},${De?Z.height/2+Qt/2-ui/2-$n:-Z.height/2-Qt/2-ui/2-$n})`),Xa.attr("style",`color: ${st.get("stroke")??T};`)}return fe.attr("transform",`translate(${-Z.width/2-(Z.x-(Z.left??0))},${De?-la/2:la/2-Z.height})`),ka.attr("transform",`translate(0,${De?Z.height/2+Qt/2:-Z.height/2-Qt/2})`),bt(d,Ba),d.intersect=function(Xa){if(G.Rm.info("iconSquare intersect",d,Xa),!d.label)return oe.rect(d,Xa);const za=d.x??0,Fa=d.y??0,ui=d.height??0;let ji=[];return ji=De?[{x:za-Z.width/2,y:Fa-ui/2},{x:za+Z.width/2,y:Fa-ui/2},{x:za+Z.width/2,y:Fa-ui/2+Z.height+Qt},{x:za+l/2,y:Fa-ui/2+Z.height+Qt},{x:za+l/2,y:Fa+ui/2},{x:za-l/2,y:Fa+ui/2},{x:za-l/2,y:Fa-ui/2+Z.height+Qt},{x:za-Z.width/2,y:Fa-ui/2+Z.height+Qt}]:[{x:za-l/2,y:Fa-ui/2},{x:za+l/2,y:Fa-ui/2},{x:za+l/2,y:Fa-ui/2+tt},{x:za+Z.width/2,y:Fa-ui/2+tt},{x:za+Z.width/2/2,y:Fa+ui/2},{x:za-Z.width/2,y:Fa+ui/2},{x:za-Z.width/2,y:Fa-ui/2+tt},{x:za-l/2,y:Fa-ui/2+tt}],oe.polygon(d,ji,Xa)},J})).apply(this,arguments)}function b(Ht,d,ct){return C.apply(this,arguments)}function C(){return(C=(0,lt.A)(function*(Ht,d,{config:{themeVariables:ct,flowchart:Xt}}){const{labelStyles:kt}=(0,L.GX)(d);d.labelStyle=kt;const nt=Math.max(d.assetHeight??48,d.assetWidth??48),wt=Xt?.wrappingWidth;d.width=Math.max(nt,wt??0);const{shapeSvg:J,bbox:Z,halfPadding:It,label:fe}=yield At(Ht,d,"icon-shape default"),De="t"===d.pos,tt=nt+2*It,l=nt+2*It,{nodeBorder:T,mainBkg:F}=ct,{stylesMap:st}=(0,L.WW)(d),xt=-l/2,Me=-tt/2,Qt=d.label?8:0,Ue=Lt.A.svg(J),xr=(0,L.Fr)(d,{});"handDrawn"!==d.look&&(xr.roughness=0,xr.fillStyle="solid");const Sr=st.get("fill");xr.stroke=Sr??F;const ta=Ue.path(Be(xt,Me,l,tt,.1),xr),Pr=Math.max(l,Z.width),la=tt+Z.height+Qt,Ca=Ue.rectangle(-Pr/2,-la/2,Pr,la,{...xr,fill:"transparent",stroke:"none"}),ka=J.insert(()=>ta,":first-child"),Ba=J.insert(()=>Ca);if(d.icon){const Xa=J.append("g");Xa.html(`<g>${yield(0,D.WY)(d.icon,{height:nt,width:nt,fallbackPrefix:""})}</g>`);const za=Xa.node().getBBox(),ui=za.height,$n=za.y;Xa.attr("transform",`translate(${-za.width/2-za.x},${De?Z.height/2+Qt/2-ui/2-$n:-Z.height/2-Qt/2-ui/2-$n})`),Xa.attr("style",`color: ${st.get("stroke")??T};`)}return fe.attr("transform",`translate(${-Z.width/2-(Z.x-(Z.left??0))},${De?-la/2:la/2-Z.height})`),ka.attr("transform",`translate(0,${De?Z.height/2+Qt/2:-Z.height/2-Qt/2})`),bt(d,Ba),d.intersect=function(Xa){if(G.Rm.info("iconSquare intersect",d,Xa),!d.label)return oe.rect(d,Xa);const za=d.x??0,Fa=d.y??0,ui=d.height??0;let ji=[];return ji=De?[{x:za-Z.width/2,y:Fa-ui/2},{x:za+Z.width/2,y:Fa-ui/2},{x:za+Z.width/2,y:Fa-ui/2+Z.height+Qt},{x:za+l/2,y:Fa-ui/2+Z.height+Qt},{x:za+l/2,y:Fa+ui/2},{x:za-l/2,y:Fa+ui/2},{x:za-l/2,y:Fa-ui/2+Z.height+Qt},{x:za-Z.width/2,y:Fa-ui/2+Z.height+Qt}]:[{x:za-l/2,y:Fa-ui/2},{x:za+l/2,y:Fa-ui/2},{x:za+l/2,y:Fa-ui/2+tt},{x:za+Z.width/2,y:Fa-ui/2+tt},{x:za+Z.width/2/2,y:Fa+ui/2},{x:za-Z.width/2,y:Fa+ui/2},{x:za-Z.width/2,y:Fa-ui/2+tt},{x:za-l/2,y:Fa-ui/2+tt}],oe.polygon(d,ji,Xa)},J})).apply(this,arguments)}function R(Ht,d,ct){return Q.apply(this,arguments)}function Q(){return(Q=(0,lt.A)(function*(Ht,d,{config:{flowchart:ct}}){const Xt=new Image;Xt.src=d?.img??"",yield Xt.decode();const kt=Number(Xt.naturalWidth.toString().replace("px","")),pt=Number(Xt.naturalHeight.toString().replace("px",""));d.imageAspectRatio=kt/pt;const{labelStyles:ue}=(0,L.GX)(d);d.labelStyle=ue;const nt=ct?.wrappingWidth;d.defaultWidth=ct?.wrappingWidth;const wt=Math.max(d.label?nt??0:0,d?.assetWidth??kt),J="on"===d.constraint&&d?.assetHeight?d.assetHeight*d.imageAspectRatio:wt,Z="on"===d.constraint?J/d.imageAspectRatio:d?.assetHeight??pt;d.width=Math.max(J,nt??0);const{shapeSvg:It,bbox:fe,label:De}=yield At(Ht,d,"image-shape default"),tt="t"===d.pos,l=-J/2,T=-Z/2,F=d.label?8:0,st=Lt.A.svg(It),xt=(0,L.Fr)(d,{});"handDrawn"!==d.look&&(xt.roughness=0,xt.fillStyle="solid");const Me=st.rectangle(l,T,J,Z,xt),Qt=Math.max(J,fe.width),Ue=Z+fe.height+F,xr=st.rectangle(-Qt/2,-Ue/2,Qt,Ue,{...xt,fill:"none",stroke:"none"}),Sr=It.insert(()=>Me,":first-child"),ta=It.insert(()=>xr);if(d.img){const Pr=It.append("image");Pr.attr("href",d.img),Pr.attr("width",J),Pr.attr("height",Z),Pr.attr("preserveAspectRatio","none"),Pr.attr("transform",`translate(${-J/2},${tt?Ue/2-Z:-Ue/2})`)}return De.attr("transform",`translate(${-fe.width/2-(fe.x-(fe.left??0))},${tt?-Z/2-fe.height/2-F/2:Z/2-fe.height/2+F/2})`),Sr.attr("transform",`translate(0,${tt?fe.height/2+F/2:-fe.height/2-F/2})`),bt(d,ta),d.intersect=function(Pr){if(G.Rm.info("iconSquare intersect",d,Pr),!d.label)return oe.rect(d,Pr);const la=d.x??0,Ca=d.y??0,ka=d.height??0;let Ba=[];return Ba=tt?[{x:la-fe.width/2,y:Ca-ka/2},{x:la+fe.width/2,y:Ca-ka/2},{x:la+fe.width/2,y:Ca-ka/2+fe.height+F},{x:la+J/2,y:Ca-ka/2+fe.height+F},{x:la+J/2,y:Ca+ka/2},{x:la-J/2,y:Ca+ka/2},{x:la-J/2,y:Ca-ka/2+fe.height+F},{x:la-fe.width/2,y:Ca-ka/2+fe.height+F}]:[{x:la-J/2,y:Ca-ka/2},{x:la+J/2,y:Ca-ka/2},{x:la+J/2,y:Ca-ka/2+Z},{x:la+fe.width/2,y:Ca-ka/2+Z},{x:la+fe.width/2/2,y:Ca+ka/2},{x:la-fe.width/2,y:Ca+ka/2},{x:la-fe.width/2,y:Ca-ka/2+Z},{x:la-J/2,y:Ca-ka/2+Z}],oe.polygon(d,Ba,Pr)},It})).apply(this,arguments)}function mt(Ht,d){return zt.apply(this,arguments)}function zt(){return(zt=(0,lt.A)(function*(Ht,d){const{labelStyles:ct,nodeStyles:Xt}=(0,L.GX)(d);d.labelStyle=ct;const{shapeSvg:kt,bbox:pt}=yield At(Ht,d,Gt(d)),ue=Math.max(pt.width+2*(d.padding??0),d?.width??0),nt=Math.max(pt.height+2*(d.padding??0),d?.height??0),wt=[{x:0,y:0},{x:ue,y:0},{x:ue+3*nt/6,y:-nt},{x:-3*nt/6,y:-nt}];let J;const{cssStyles:Z}=d;if("handDrawn"===d.look){const It=Lt.A.svg(kt),fe=(0,L.Fr)(d,{}),De=j(wt),tt=It.path(De,fe);J=kt.insert(()=>tt,":first-child").attr("transform",`translate(${-ue/2}, ${nt/2})`),Z&&J.attr("style",Z)}else J=B(kt,ue,nt,wt);return Xt&&J.attr("style",Xt),d.width=ue,d.height=nt,bt(d,J),d.intersect=function(It){return oe.polygon(d,wt,It)},kt})).apply(this,arguments)}function jt(Ht,d,ct){return Vt.apply(this,arguments)}function Vt(){return(Vt=(0,lt.A)(function*(Ht,d,ct){const{labelStyles:Xt,nodeStyles:kt}=(0,L.GX)(d);d.labelStyle=Xt;const{shapeSvg:pt,bbox:ue}=yield At(Ht,d,Gt(d)),nt=Math.max(ue.width+2*ct.labelPaddingX,d?.width||0),wt=Math.max(ue.height+2*ct.labelPaddingY,d?.height||0),J=-nt/2,Z=-wt/2;let It,{rx:fe,ry:De}=d;const{cssStyles:tt}=d;if(ct?.rx&&ct.ry&&(fe=ct.rx,De=ct.ry),"handDrawn"===d.look){const l=Lt.A.svg(pt),T=(0,L.Fr)(d,{}),F=fe||De?l.path(Be(J,Z,nt,wt,fe||0),T):l.rectangle(J,Z,nt,wt,T);It=pt.insert(()=>F,":first-child"),It.attr("class","basic label-container").attr("style",(0,Mt.KL)(tt))}else It=pt.insert("rect",":first-child"),It.attr("class","basic label-container").attr("style",kt).attr("rx",(0,Mt.KL)(fe)).attr("ry",(0,Mt.KL)(De)).attr("x",J).attr("y",Z).attr("width",nt).attr("height",wt);return bt(d,It),d.calcIntersect=function(l,T){return oe.rect(l,T)},d.intersect=function(l){return oe.rect(d,l)},pt})).apply(this,arguments)}function Kt(Ht,d){return xe.apply(this,arguments)}function xe(){return(xe=(0,lt.A)(function*(Ht,d){const{shapeSvg:ct,bbox:Xt,label:kt}=yield At(Ht,d,"label"),pt=ct.insert("rect",":first-child");return pt.attr("width",.1).attr("height",.1),ct.attr("class","label edgeLabel"),kt.attr("transform",`translate(${-Xt.width/2-(Xt.x-(Xt.left??0))}, ${-Xt.height/2-(Xt.y-(Xt.top??0))})`),bt(d,pt),d.intersect=function(wt){return oe.rect(d,wt)},ct})).apply(this,arguments)}function je(Ht,d){return Ke.apply(this,arguments)}function Ke(){return(Ke=(0,lt.A)(function*(Ht,d){const{labelStyles:ct,nodeStyles:Xt}=(0,L.GX)(d);d.labelStyle=ct;const{shapeSvg:kt,bbox:pt}=yield At(Ht,d,Gt(d)),ue=Math.max(pt.width+(d.padding??0),d?.width??0),nt=Math.max(pt.height+(d.padding??0),d?.height??0),wt=[{x:0,y:0},{x:ue+3*nt/6,y:0},{x:ue,y:-nt},{x:-3*nt/6,y:-nt}];let J;const{cssStyles:Z}=d;if("handDrawn"===d.look){const It=Lt.A.svg(kt),fe=(0,L.Fr)(d,{}),De=j(wt),tt=It.path(De,fe);J=kt.insert(()=>tt,":first-child").attr("transform",`translate(${-ue/2}, ${nt/2})`),Z&&J.attr("style",Z)}else J=B(kt,ue,nt,wt);return Xt&&J.attr("style",Xt),d.width=ue,d.height=nt,bt(d,J),d.intersect=function(It){return oe.polygon(d,wt,It)},kt})).apply(this,arguments)}function fr(Ht,d){return lr.apply(this,arguments)}function lr(){return(lr=(0,lt.A)(function*(Ht,d){const{labelStyles:ct,nodeStyles:Xt}=(0,L.GX)(d);d.labelStyle=ct;const{shapeSvg:kt,bbox:pt}=yield At(Ht,d,Gt(d)),ue=Math.max(pt.width+(d.padding??0),d?.width??0),nt=Math.max(pt.height+(d.padding??0),d?.height??0),wt=[{x:-3*nt/6,y:0},{x:ue,y:0},{x:ue+3*nt/6,y:-nt},{x:0,y:-nt}];let J;const{cssStyles:Z}=d;if("handDrawn"===d.look){const It=Lt.A.svg(kt),fe=(0,L.Fr)(d,{}),De=j(wt),tt=It.path(De,fe);J=kt.insert(()=>tt,":first-child").attr("transform",`translate(${-ue/2}, ${nt/2})`),Z&&J.attr("style",Z)}else J=B(kt,ue,nt,wt);return Xt&&J.attr("style",Xt),d.width=ue,d.height=nt,bt(d,J),d.intersect=function(It){return oe.polygon(d,wt,It)},kt})).apply(this,arguments)}function br(Ht,d){const{labelStyles:ct,nodeStyles:Xt}=(0,L.GX)(d);d.label="",d.labelStyle=ct;const kt=Ht.insert("g").attr("class",Gt(d)).attr("id",d.domId??d.id),{cssStyles:pt}=d,ue=Math.max(35,d?.width??0),nt=Math.max(35,d?.height??0),J=[{x:ue,y:0},{x:0,y:nt+3.5},{x:ue-14,y:nt+3.5},{x:0,y:2*nt},{x:ue,y:nt-3.5},{x:14,y:nt-3.5}],Z=Lt.A.svg(kt),It=(0,L.Fr)(d,{});"handDrawn"!==d.look&&(It.roughness=0,It.fillStyle="solid");const fe=j(J),De=Z.path(fe,It),tt=kt.insert(()=>De,":first-child");return pt&&"handDrawn"!==d.look&&tt.selectAll("path").attr("style",pt),Xt&&"handDrawn"!==d.look&&tt.selectAll("path").attr("style",Xt),tt.attr("transform",`translate(-${ue/2},${-nt})`),bt(d,tt),d.intersect=function(l){return G.Rm.info("lightningBolt intersect",d,l),oe.polygon(d,J,l)},kt}(0,G.K2)(sr,"cylinder"),(0,G.K2)(ce,"dividedRectangle"),(0,G.K2)(Ae,"doublecircle"),(0,G.K2)(Qe,"filledCircle"),(0,G.K2)(Dr,"flippedTriangle"),(0,G.K2)(Yr,"forkJoin"),(0,G.K2)(nr,"halfRoundedRectangle"),(0,G.K2)(ne,"hexagon"),(0,G.K2)(ar,"hourglass"),(0,G.K2)(y,"icon"),(0,G.K2)(M,"iconCircle"),(0,G.K2)(A,"iconRounded"),(0,G.K2)(b,"iconSquare"),(0,G.K2)(R,"imageSquare"),(0,G.K2)(mt,"inv_trapezoid"),(0,G.K2)(jt,"drawRect"),(0,G.K2)(Kt,"labelRect"),(0,G.K2)(je,"lean_left"),(0,G.K2)(fr,"lean_right"),(0,G.K2)(br,"lightningBolt");var $e=(0,G.K2)((Ht,d,ct,Xt,kt,pt,ue)=>[`M${Ht},${d+pt}`,`a${kt},${pt} 0,0,0 ${ct},0`,`a${kt},${pt} 0,0,0 ${-ct},0`,`l0,${Xt}`,`a${kt},${pt} 0,0,0 ${ct},0`,"l0,"+-Xt,`M${Ht},${d+pt+ue}`,`a${kt},${pt} 0,0,0 ${ct},0`].join(" "),"createCylinderPathD"),He=(0,G.K2)((Ht,d,ct,Xt,kt,pt,ue)=>[`M${Ht},${d+pt}`,`M${Ht+ct},${d+pt}`,`a${kt},${pt} 0,0,0 ${-ct},0`,`l0,${Xt}`,`a${kt},${pt} 0,0,0 ${ct},0`,"l0,"+-Xt,`M${Ht},${d+pt+ue}`,`a${kt},${pt} 0,0,0 ${ct},0`].join(" "),"createOuterCylinderPathD"),wr=(0,G.K2)((Ht,d,ct,Xt,kt,pt)=>[`M${Ht-ct/2},${-Xt/2}`,`a${kt},${pt} 0,0,0 ${ct},0`].join(" "),"createInnerCylinderPathD");function kr(Ht,d){return Kr.apply(this,arguments)}function Kr(){return(Kr=(0,lt.A)(function*(Ht,d){const{labelStyles:ct,nodeStyles:Xt}=(0,L.GX)(d);d.labelStyle=ct;const{shapeSvg:kt,bbox:pt,label:ue}=yield At(Ht,d,Gt(d)),nt=Math.max(pt.width+(d.padding??0),d.width??0),wt=nt/2,J=wt/(2.5+nt/50),Z=Math.max(pt.height+J+(d.padding??0),d.height??0),It=.1*Z;let fe;const{cssStyles:De}=d;if("handDrawn"===d.look){const tt=Lt.A.svg(kt),l=He(0,0,nt,Z,wt,J,It),T=wr(0,J,nt,Z,wt,J),F=(0,L.Fr)(d,{}),st=tt.path(l,F),xt=tt.path(T,F);kt.insert(()=>xt,":first-child").attr("class","line"),fe=kt.insert(()=>st,":first-child"),fe.attr("class","basic label-container"),De&&fe.attr("style",De)}else{const tt=$e(0,0,nt,Z,wt,J,It);fe=kt.insert("path",":first-child").attr("d",tt).attr("class","basic label-container").attr("style",(0,Mt.KL)(De)).attr("style",Xt)}return fe.attr("label-offset-y",J),fe.attr("transform",`translate(${-nt/2}, ${-(Z/2+J)})`),bt(d,fe),ue.attr("transform",`translate(${-pt.width/2-(pt.x-(pt.left??0))}, ${-pt.height/2+J-(pt.y-(pt.top??0))})`),d.intersect=function(tt){const l=oe.rect(d,tt),T=l.x-(d.x??0);if(0!=wt&&(Math.abs(T)<(d.width??0)/2||Math.abs(T)==(d.width??0)/2&&Math.abs(l.y-(d.y??0))>(d.height??0)/2-J)){let F=J*J*(1-T*T/(wt*wt));F>0&&(F=Math.sqrt(F)),F=J-F,tt.y-(d.y??0)>0&&(F=-F),l.y+=F}return l},kt})).apply(this,arguments)}function _r(Ht,d){return Jr.apply(this,arguments)}function Jr(){return(Jr=(0,lt.A)(function*(Ht,d){const{labelStyles:ct,nodeStyles:Xt}=(0,L.GX)(d);d.labelStyle=ct;const{shapeSvg:kt,bbox:pt,label:ue}=yield At(Ht,d,Gt(d)),nt=Math.max(pt.width+2*(d.padding??0),d?.width??0),wt=Math.max(pt.height+2*(d.padding??0),d?.height??0),J=wt/4,Z=wt+J,{cssStyles:It}=d,fe=Lt.A.svg(kt),De=(0,L.Fr)(d,{});"handDrawn"!==d.look&&(De.roughness=0,De.fillStyle="solid");const tt=[{x:-nt/2-nt/2*.1,y:-Z/2},{x:-nt/2-nt/2*.1,y:Z/2},...hr(-nt/2-nt/2*.1,Z/2,nt/2+nt/2*.1,Z/2,J,.8),{x:nt/2+nt/2*.1,y:-Z/2},{x:-nt/2-nt/2*.1,y:-Z/2},{x:-nt/2,y:-Z/2},{x:-nt/2,y:Z/2*1.1},{x:-nt/2,y:-Z/2}],l=fe.polygon(tt.map(F=>[F.x,F.y]),De),T=kt.insert(()=>l,":first-child");return T.attr("class","basic label-container"),It&&"handDrawn"!==d.look&&T.selectAll("path").attr("style",It),Xt&&"handDrawn"!==d.look&&T.selectAll("path").attr("style",Xt),T.attr("transform",`translate(0,${-J/2})`),ue.attr("transform",`translate(${-nt/2+(d.padding??0)+nt/2*.1/2-(pt.x-(pt.left??0))},${-wt/2+(d.padding??0)-J/2-(pt.y-(pt.top??0))})`),bt(d,T),d.intersect=function(F){return oe.polygon(d,tt,F)},kt})).apply(this,arguments)}function Lr(Ht,d){return ha.apply(this,arguments)}function ha(){return(ha=(0,lt.A)(function*(Ht,d){const{labelStyles:ct,nodeStyles:Xt}=(0,L.GX)(d);d.labelStyle=ct;const{shapeSvg:kt,bbox:pt,label:ue}=yield At(Ht,d,Gt(d)),nt=Math.max(pt.width+2*(d.padding??0),d?.width??0),wt=Math.max(pt.height+2*(d.padding??0),d?.height??0),Z=-nt/2,It=-wt/2,{cssStyles:fe}=d,De=Lt.A.svg(kt),tt=(0,L.Fr)(d,{}),l=[{x:Z-5,y:It+5},{x:Z-5,y:It+wt+5},{x:Z+nt-5,y:It+wt+5},{x:Z+nt-5,y:It+wt},{x:Z+nt,y:It+wt},{x:Z+nt,y:It+wt-5},{x:Z+nt+5,y:It+wt-5},{x:Z+nt+5,y:It-5},{x:Z+5,y:It-5},{x:Z+5,y:It},{x:Z,y:It},{x:Z,y:It+5}],T=[{x:Z,y:It+5},{x:Z+nt-5,y:It+5},{x:Z+nt-5,y:It+wt},{x:Z+nt,y:It+wt},{x:Z+nt,y:It},{x:Z,y:It}];"handDrawn"!==d.look&&(tt.roughness=0,tt.fillStyle="solid");const F=j(l),st=De.path(F,tt),xt=j(T),Me=De.path(xt,{...tt,fill:"none"}),Qt=kt.insert(()=>Me,":first-child");return Qt.insert(()=>st,":first-child"),Qt.attr("class","basic label-container"),fe&&"handDrawn"!==d.look&&Qt.selectAll("path").attr("style",fe),Xt&&"handDrawn"!==d.look&&Qt.selectAll("path").attr("style",Xt),ue.attr("transform",`translate(${-pt.width/2-5-(pt.x-(pt.left??0))}, ${-pt.height/2+5-(pt.y-(pt.top??0))})`),bt(d,Qt),d.intersect=function(Ue){return oe.polygon(d,l,Ue)},kt})).apply(this,arguments)}function ia(Ht,d){return jr.apply(this,arguments)}function jr(){return(jr=(0,lt.A)(function*(Ht,d){const{labelStyles:ct,nodeStyles:Xt}=(0,L.GX)(d);d.labelStyle=ct;const{shapeSvg:kt,bbox:pt,label:ue}=yield At(Ht,d,Gt(d)),nt=Math.max(pt.width+2*(d.padding??0),d?.width??0),wt=Math.max(pt.height+2*(d.padding??0),d?.height??0),J=wt/4,Z=wt+J,It=-nt/2,fe=-Z/2,{cssStyles:tt}=d,l=hr(It-5,fe+Z+5,It+nt-5,fe+Z+5,J,.8),T=l?.[l.length-1],F=[{x:It-5,y:fe+5},{x:It-5,y:fe+Z+5},...l,{x:It+nt-5,y:T.y-5},{x:It+nt,y:T.y-5},{x:It+nt,y:T.y-10},{x:It+nt+5,y:T.y-10},{x:It+nt+5,y:fe-5},{x:It+5,y:fe-5},{x:It+5,y:fe},{x:It,y:fe},{x:It,y:fe+5}],st=[{x:It,y:fe+5},{x:It+nt-5,y:fe+5},{x:It+nt-5,y:T.y-5},{x:It+nt,y:T.y-5},{x:It+nt,y:fe},{x:It,y:fe}],xt=Lt.A.svg(kt),Me=(0,L.Fr)(d,{});"handDrawn"!==d.look&&(Me.roughness=0,Me.fillStyle="solid");const Qt=j(F),Ue=xt.path(Qt,Me),xr=j(st),Sr=xt.path(xr,Me),ta=kt.insert(()=>Ue,":first-child");return ta.insert(()=>Sr),ta.attr("class","basic label-container"),tt&&"handDrawn"!==d.look&&ta.selectAll("path").attr("style",tt),Xt&&"handDrawn"!==d.look&&ta.selectAll("path").attr("style",Xt),ta.attr("transform",`translate(0,${-J/2})`),ue.attr("transform",`translate(${-pt.width/2-5-(pt.x-(pt.left??0))}, ${-pt.height/2+5-J/2-(pt.y-(pt.top??0))})`),bt(d,ta),d.intersect=function(Pr){return oe.polygon(d,F,Pr)},kt})).apply(this,arguments)}function Qr(Ht,d,ct){return or.apply(this,arguments)}function or(){return(or=(0,lt.A)(function*(Ht,d,{config:{themeVariables:ct}}){const{labelStyles:Xt,nodeStyles:kt}=(0,L.GX)(d);d.labelStyle=Xt,d.useHtmlLabels||!1!==(0,ut.zj)().flowchart?.htmlLabels||(d.centerLabel=!0);const{shapeSvg:ue,bbox:nt,label:wt}=yield At(Ht,d,Gt(d)),J=Math.max(nt.width+2*(d.padding??0),d?.width??0),Z=Math.max(nt.height+2*(d.padding??0),d?.height??0),It=-J/2,fe=-Z/2,{cssStyles:De}=d,tt=Lt.A.svg(ue),l=(0,L.Fr)(d,{fill:ct.noteBkgColor,stroke:ct.noteBorderColor});"handDrawn"!==d.look&&(l.roughness=0,l.fillStyle="solid");const T=tt.rectangle(It,fe,J,Z,l),F=ue.insert(()=>T,":first-child");return F.attr("class","basic label-container"),De&&"handDrawn"!==d.look&&F.selectAll("path").attr("style",De),kt&&"handDrawn"!==d.look&&F.selectAll("path").attr("style",kt),wt.attr("transform",`translate(${-nt.width/2-(nt.x-(nt.left??0))}, ${-nt.height/2-(nt.y-(nt.top??0))})`),bt(d,F),d.intersect=function(st){return oe.rect(d,st)},ue})).apply(this,arguments)}(0,G.K2)(kr,"linedCylinder"),(0,G.K2)(_r,"linedWaveEdgedRect"),(0,G.K2)(Lr,"multiRect"),(0,G.K2)(ia,"multiWaveEdgedRectangle"),(0,G.K2)(Qr,"note");var ur=(0,G.K2)((Ht,d,ct)=>[`M${Ht+ct/2},${d}`,`L${Ht+ct},${d-ct/2}`,`L${Ht+ct/2},${d-ct}`,`L${Ht},${d-ct/2}`,"Z"].join(" "),"createDecisionBoxPathD");function W(Ht,d){return $t.apply(this,arguments)}function $t(){return($t=(0,lt.A)(function*(Ht,d){const{labelStyles:ct,nodeStyles:Xt}=(0,L.GX)(d);d.labelStyle=ct;const{shapeSvg:kt,bbox:pt}=yield At(Ht,d,Gt(d)),wt=pt.width+d.padding+(pt.height+d.padding),Z=[{x:wt/2,y:0},{x:wt,y:-wt/2},{x:wt/2,y:-wt},{x:0,y:-wt/2}];let It;const{cssStyles:fe}=d;if("handDrawn"===d.look){const De=Lt.A.svg(kt),tt=(0,L.Fr)(d,{}),l=ur(0,0,wt),T=De.path(l,tt);It=kt.insert(()=>T,":first-child").attr("transform",`translate(${-wt/2+.5}, ${wt/2})`),fe&&It.attr("style",fe)}else It=B(kt,wt,wt,Z),It.attr("transform",`translate(${-wt/2+.5}, ${wt/2})`);return Xt&&It.attr("style",Xt),bt(d,It),d.calcIntersect=function(De,tt){const l=De.width,F=oe.polygon(De,[{x:l/2,y:0},{x:l,y:-l/2},{x:l/2,y:-l},{x:0,y:-l/2}],tt);return{x:F.x-.5,y:F.y-.5}},d.intersect=function(De){return this.calcIntersect(d,De)},kt})).apply(this,arguments)}function Ye(Ht,d){return Fe.apply(this,arguments)}function Fe(){return(Fe=(0,lt.A)(function*(Ht,d){const{labelStyles:ct,nodeStyles:Xt}=(0,L.GX)(d);d.labelStyle=ct;const{shapeSvg:kt,bbox:pt,label:ue}=yield At(Ht,d,Gt(d)),J=-Math.max(pt.width+(d.padding??0),d?.width??0)/2,Z=-Math.max(pt.height+(d.padding??0),d?.height??0)/2,It=Z/2,fe=[{x:J+It,y:Z},{x:J,y:0},{x:J+It,y:-Z},{x:-J,y:-Z},{x:-J,y:Z}],{cssStyles:De}=d,tt=Lt.A.svg(kt),l=(0,L.Fr)(d,{});"handDrawn"!==d.look&&(l.roughness=0,l.fillStyle="solid");const T=j(fe),F=tt.path(T,l),st=kt.insert(()=>F,":first-child");return st.attr("class","basic label-container"),De&&"handDrawn"!==d.look&&st.selectAll("path").attr("style",De),Xt&&"handDrawn"!==d.look&&st.selectAll("path").attr("style",Xt),st.attr("transform",`translate(${-It/2},0)`),ue.attr("transform",`translate(${-It/2-pt.width/2-(pt.x-(pt.left??0))}, ${-pt.height/2-(pt.y-(pt.top??0))})`),bt(d,st),d.intersect=function(xt){return oe.polygon(d,fe,xt)},kt})).apply(this,arguments)}function Tr(Ht,d){return pr.apply(this,arguments)}function pr(){return(pr=(0,lt.A)(function*(Ht,d){const{labelStyles:ct,nodeStyles:Xt}=(0,L.GX)(d);let kt;d.labelStyle=ct,kt=d.cssClasses?"node "+d.cssClasses:"node default";const pt=Ht.insert("g").attr("class",kt).attr("id",d.domId||d.id),ue=pt.insert("g"),nt=pt.insert("g").attr("class","label").attr("style",Xt),wt=d.description,J=d.label,Z=nt.node().appendChild(yield Or(J,d.labelStyle,!0,!0));let It={width:0,height:0};if((0,ut._3)((0,ut.D7)()?.flowchart?.htmlLabels)){const Sr=Z.children[0],ta=(0,w.Ltv)(Z);It=Sr.getBoundingClientRect(),ta.attr("width",It.width),ta.attr("height",It.height)}G.Rm.info("Text 2",wt);const fe=wt||[],De=Z.getBBox(),tt=nt.node().appendChild(yield Or(fe.join?fe.join("<br/>"):fe,d.labelStyle,!0,!0)),l=tt.children[0],T=(0,w.Ltv)(tt);It=l.getBoundingClientRect(),T.attr("width",It.width),T.attr("height",It.height);const F=(d.padding||0)/2;(0,w.Ltv)(tt).attr("transform","translate( "+(It.width>De.width?0:(De.width-It.width)/2)+", "+(De.height+F+5)+")"),(0,w.Ltv)(Z).attr("transform","translate( "+(It.width<De.width?0:-(De.width-It.width)/2)+", 0)"),It=nt.node().getBBox(),nt.attr("transform","translate("+-It.width/2+", "+(-It.height/2-F+3)+")");const st=It.width+(d.padding||0),xt=It.height+(d.padding||0),Me=-It.width/2-F,Qt=-It.height/2-F;let Ue,xr;if("handDrawn"===d.look){const Sr=Lt.A.svg(pt),ta=(0,L.Fr)(d,{}),Pr=Sr.path(Be(Me,Qt,st,xt,d.rx||0),ta),la=Sr.line(-It.width/2-F,-It.height/2-F+De.height+F,It.width/2+F,-It.height/2-F+De.height+F,ta);xr=pt.insert(()=>(G.Rm.debug("Rough node insert CXC",Pr),la),":first-child"),Ue=pt.insert(()=>(G.Rm.debug("Rough node insert CXC",Pr),Pr),":first-child")}else Ue=ue.insert("rect",":first-child"),xr=ue.insert("line"),Ue.attr("class","outer title-state").attr("style",Xt).attr("x",-It.width/2-F).attr("y",-It.height/2-F).attr("width",It.width+(d.padding||0)).attr("height",It.height+(d.padding||0)),xr.attr("class","divider").attr("x1",-It.width/2-F).attr("x2",It.width/2+F).attr("y1",-It.height/2-F+De.height+F).attr("y2",-It.height/2-F+De.height+F);return bt(d,Ue),d.intersect=function(Sr){return oe.rect(d,Sr)},pt})).apply(this,arguments)}function da(Ht,d,ct,Xt,kt,pt,ue){const wt=(Ht+ct)/2,J=(d+Xt)/2,Z=Math.atan2(Xt-d,ct-Ht),l=Math.sqrt(((ct-Ht)/2/kt)**2+((Xt-d)/2/pt)**2);if(l>1)throw new Error("The given radii are too small to create an arc between the points.");const T=Math.sqrt(1-l**2),F=wt+T*pt*Math.sin(Z)*(ue?-1:1),st=J-T*kt*Math.cos(Z)*(ue?-1:1),xt=Math.atan2((d-st)/pt,(Ht-F)/kt);let Qt=Math.atan2((Xt-st)/pt,(ct-F)/kt)-xt;ue&&Qt<0&&(Qt+=2*Math.PI),!ue&&Qt>0&&(Qt-=2*Math.PI);const Ue=[];for(let xr=0;xr<20;xr++){const ta=xt+xr/19*Qt,Pr=F+kt*Math.cos(ta),la=st+pt*Math.sin(ta);Ue.push({x:Pr,y:la})}return Ue}function Pa(Ht,d){return Ma.apply(this,arguments)}function Ma(){return(Ma=(0,lt.A)(function*(Ht,d){const{labelStyles:ct,nodeStyles:Xt}=(0,L.GX)(d);d.labelStyle=ct;const{shapeSvg:kt,bbox:pt}=yield At(Ht,d,Gt(d)),ue=d?.padding??0,nt=d?.padding??0,wt=(d?.width?d?.width:pt.width)+2*ue,J=(d?.height?d?.height:pt.height)+2*nt,Z=d.radius||5,It=d.taper||5,{cssStyles:fe}=d,De=Lt.A.svg(kt),tt=(0,L.Fr)(d,{});d.stroke&&(tt.stroke=d.stroke),"handDrawn"!==d.look&&(tt.roughness=0,tt.fillStyle="solid");const l=[{x:-wt/2+It,y:-J/2},{x:wt/2-It,y:-J/2},...da(wt/2-It,-J/2,wt/2,-J/2+It,Z,Z,!0),{x:wt/2,y:-J/2+It},{x:wt/2,y:J/2-It},...da(wt/2,J/2-It,wt/2-It,J/2,Z,Z,!0),{x:wt/2-It,y:J/2},{x:-wt/2+It,y:J/2},...da(-wt/2+It,J/2,-wt/2,J/2-It,Z,Z,!0),{x:-wt/2,y:J/2-It},{x:-wt/2,y:-J/2+It},...da(-wt/2,-J/2+It,-wt/2+It,-J/2,Z,Z,!0)],T=j(l),F=De.path(T,tt),st=kt.insert(()=>F,":first-child");return st.attr("class","basic label-container outer-path"),fe&&"handDrawn"!==d.look&&st.selectChildren("path").attr("style",fe),Xt&&"handDrawn"!==d.look&&st.selectChildren("path").attr("style",Xt),bt(d,st),d.intersect=function(xt){return oe.polygon(d,l,xt)},kt})).apply(this,arguments)}function Wa(Ht,d){return Ia.apply(this,arguments)}function Ia(){return(Ia=(0,lt.A)(function*(Ht,d){const{labelStyles:ct,nodeStyles:Xt}=(0,L.GX)(d);d.labelStyle=ct;const{shapeSvg:kt,bbox:pt,label:ue}=yield At(Ht,d,Gt(d)),nt=d?.padding??0,wt=Math.max(pt.width+2*(d.padding??0),d?.width??0),J=Math.max(pt.height+2*(d.padding??0),d?.height??0),Z=-pt.width/2-nt,It=-pt.height/2-nt,{cssStyles:fe}=d,De=Lt.A.svg(kt),tt=(0,L.Fr)(d,{});"handDrawn"!==d.look&&(tt.roughness=0,tt.fillStyle="solid");const T=De.polygon([{x:Z,y:It},{x:Z+wt+8,y:It},{x:Z+wt+8,y:It+J},{x:Z-8,y:It+J},{x:Z-8,y:It},{x:Z,y:It},{x:Z,y:It+J}].map(st=>[st.x,st.y]),tt),F=kt.insert(()=>T,":first-child");return F.attr("class","basic label-container").attr("style",(0,Mt.KL)(fe)),Xt&&"handDrawn"!==d.look&&F.selectAll("path").attr("style",Xt),fe&&"handDrawn"!==d.look&&F.selectAll("path").attr("style",Xt),ue.attr("transform",`translate(${-wt/2+4+(d.padding??0)-(pt.x-(pt.left??0))},${-J/2+(d.padding??0)-(pt.y-(pt.top??0))})`),bt(d,F),d.intersect=function(st){return oe.rect(d,st)},kt})).apply(this,arguments)}function ba(Ht,d){return sa.apply(this,arguments)}function sa(){return(sa=(0,lt.A)(function*(Ht,d){const{labelStyles:ct,nodeStyles:Xt}=(0,L.GX)(d);d.labelStyle=ct;const{shapeSvg:kt,bbox:pt,label:ue}=yield At(Ht,d,Gt(d)),nt=Math.max(pt.width+2*(d.padding??0),d?.width??0),wt=Math.max(pt.height+2*(d.padding??0),d?.height??0),J=-nt/2,Z=-wt/2,{cssStyles:It}=d,fe=Lt.A.svg(kt),De=(0,L.Fr)(d,{});"handDrawn"!==d.look&&(De.roughness=0,De.fillStyle="solid");const tt=[{x:J,y:Z},{x:J,y:Z+wt},{x:J+nt,y:Z+wt},{x:J+nt,y:Z-wt/2}],l=j(tt),T=fe.path(l,De),F=kt.insert(()=>T,":first-child");return F.attr("class","basic label-container"),It&&"handDrawn"!==d.look&&F.selectChildren("path").attr("style",It),Xt&&"handDrawn"!==d.look&&F.selectChildren("path").attr("style",Xt),F.attr("transform",`translate(0, ${wt/4})`),ue.attr("transform",`translate(${-nt/2+(d.padding??0)-(pt.x-(pt.left??0))}, ${-wt/4+(d.padding??0)-(pt.y-(pt.top??0))})`),bt(d,F),d.intersect=function(st){return oe.polygon(d,tt,st)},kt})).apply(this,arguments)}function Sa(Ht,d){return ea.apply(this,arguments)}function ea(){return(ea=(0,lt.A)(function*(Ht,d){return jt(Ht,d,{rx:0,ry:0,classes:"",labelPaddingX:d.labelPaddingX??2*(d?.padding||0),labelPaddingY:1*(d?.padding||0)})})).apply(this,arguments)}function Va(Ht,d){return gr.apply(this,arguments)}function gr(){return(gr=(0,lt.A)(function*(Ht,d){const{labelStyles:ct,nodeStyles:Xt}=(0,L.GX)(d);d.labelStyle=ct;const{shapeSvg:kt,bbox:pt}=yield At(Ht,d,Gt(d)),ue=pt.height+d.padding,nt=pt.width+ue/4+d.padding,wt=ue/2,{cssStyles:J}=d,Z=Lt.A.svg(kt),It=(0,L.Fr)(d,{});"handDrawn"!==d.look&&(It.roughness=0,It.fillStyle="solid");const fe=[{x:-nt/2+wt,y:-ue/2},{x:nt/2-wt,y:-ue/2},...ze(-nt/2+wt,0,wt,50,90,270),{x:nt/2-wt,y:ue/2},...ze(nt/2-wt,0,wt,50,270,450)],De=j(fe),tt=Z.path(De,It),l=kt.insert(()=>tt,":first-child");return l.attr("class","basic label-container outer-path"),J&&"handDrawn"!==d.look&&l.selectChildren("path").attr("style",J),Xt&&"handDrawn"!==d.look&&l.selectChildren("path").attr("style",Xt),bt(d,l),d.intersect=function(T){return oe.polygon(d,fe,T)},kt})).apply(this,arguments)}function Ua(Ht,d){return ir.apply(this,arguments)}function ir(){return(ir=(0,lt.A)(function*(Ht,d){return jt(Ht,d,{rx:5,ry:5,classes:"flowchart-node"})})).apply(this,arguments)}function Oa(Ht,d,{config:{themeVariables:ct}}){const{labelStyles:Xt,nodeStyles:kt}=(0,L.GX)(d);d.labelStyle=Xt;const{cssStyles:pt}=d,{lineColor:ue,stateBorder:nt,nodeBorder:wt}=ct,J=Ht.insert("g").attr("class","node default").attr("id",d.domId||d.id),Z=Lt.A.svg(J),It=(0,L.Fr)(d,{});"handDrawn"!==d.look&&(It.roughness=0,It.fillStyle="solid");const fe=Z.circle(0,0,14,{...It,stroke:ue,strokeWidth:2}),De=nt??wt,tt=Z.circle(0,0,5,{...It,fill:De,stroke:De,strokeWidth:2,fillStyle:"solid"}),l=J.insert(()=>fe,":first-child");return l.insert(()=>tt),pt&&l.selectAll("path").attr("style",pt),kt&&l.selectAll("path").attr("style",kt),bt(d,l),d.intersect=function(T){return oe.circle(d,7,T)},J}function Ka(Ht,d,{config:{themeVariables:ct}}){const{lineColor:Xt}=ct,kt=Ht.insert("g").attr("class","node default").attr("id",d.domId||d.id);let pt;if("handDrawn"===d.look){const nt=Lt.A.svg(kt).circle(0,0,14,(0,L.ue)(Xt));pt=kt.insert(()=>nt),pt.attr("class","state-start").attr("r",7).attr("width",14).attr("height",14)}else pt=kt.insert("circle",":first-child"),pt.attr("class","state-start").attr("r",7).attr("width",14).attr("height",14);return bt(d,pt),d.intersect=function(ue){return oe.circle(d,7,ue)},kt}function Ja(Ht,d){return _a.apply(this,arguments)}function _a(){return(_a=(0,lt.A)(function*(Ht,d){const{labelStyles:ct,nodeStyles:Xt}=(0,L.GX)(d);d.labelStyle=ct;const{shapeSvg:kt,bbox:pt}=yield At(Ht,d,Gt(d)),ue=(d?.padding||0)/2,nt=pt.width+d.padding,wt=pt.height+d.padding,J=-pt.width/2-ue,Z=-pt.height/2-ue,It=[{x:0,y:0},{x:nt,y:0},{x:nt,y:-wt},{x:0,y:-wt},{x:0,y:0},{x:-8,y:0},{x:nt+8,y:0},{x:nt+8,y:-wt},{x:-8,y:-wt},{x:-8,y:0}];if("handDrawn"===d.look){const fe=Lt.A.svg(kt),De=(0,L.Fr)(d,{}),tt=fe.rectangle(J-8,Z,nt+16,wt,De),l=fe.line(J,Z,J,Z+wt,De),T=fe.line(J+nt,Z,J+nt,Z+wt,De);kt.insert(()=>l,":first-child"),kt.insert(()=>T,":first-child");const F=kt.insert(()=>tt,":first-child"),{cssStyles:st}=d;F.attr("class","basic label-container").attr("style",(0,Mt.KL)(st)),bt(d,F)}else{const fe=B(kt,nt,wt,It);Xt&&fe.attr("style",Xt),bt(d,fe)}return d.intersect=function(fe){return oe.polygon(d,It,fe)},kt})).apply(this,arguments)}function qa(Ht,d){return Ha.apply(this,arguments)}function Ha(){return(Ha=(0,lt.A)(function*(Ht,d){const{labelStyles:ct,nodeStyles:Xt}=(0,L.GX)(d);d.labelStyle=ct;const{shapeSvg:kt,bbox:pt}=yield At(Ht,d,Gt(d)),ue=Math.max(pt.width+2*(d.padding??0),d?.width??0),nt=Math.max(pt.height+2*(d.padding??0),d?.height??0),wt=-ue/2,J=-nt/2,Z=.2*nt,It=.2*nt,{cssStyles:fe}=d,De=Lt.A.svg(kt),tt=(0,L.Fr)(d,{}),l=[{x:wt-Z/2,y:J},{x:wt+ue+Z/2,y:J},{x:wt+ue+Z/2,y:J+nt},{x:wt-Z/2,y:J+nt}],T=[{x:wt+ue-Z/2,y:J+nt},{x:wt+ue+Z/2,y:J+nt},{x:wt+ue+Z/2,y:J+nt-It}];"handDrawn"!==d.look&&(tt.roughness=0,tt.fillStyle="solid");const F=j(l),st=De.path(F,tt),xt=j(T),Me=De.path(xt,{...tt,fillStyle:"solid"}),Qt=kt.insert(()=>Me,":first-child");return Qt.insert(()=>st,":first-child"),Qt.attr("class","basic label-container"),fe&&"handDrawn"!==d.look&&Qt.selectAll("path").attr("style",fe),Xt&&"handDrawn"!==d.look&&Qt.selectAll("path").attr("style",Xt),bt(d,Qt),d.intersect=function(Ue){return oe.polygon(d,l,Ue)},kt})).apply(this,arguments)}function oa(Ht,d){return hi.apply(this,arguments)}function hi(){return(hi=(0,lt.A)(function*(Ht,d){const{labelStyles:ct,nodeStyles:Xt}=(0,L.GX)(d);d.labelStyle=ct;const{shapeSvg:kt,bbox:pt,label:ue}=yield At(Ht,d,Gt(d)),nt=Math.max(pt.width+2*(d.padding??0),d?.width??0),wt=Math.max(pt.height+2*(d.padding??0),d?.height??0),J=wt/4,Z=.2*nt,It=.2*wt,fe=wt+J,{cssStyles:De}=d,tt=Lt.A.svg(kt),l=(0,L.Fr)(d,{});"handDrawn"!==d.look&&(l.roughness=0,l.fillStyle="solid");const T=[{x:-nt/2-nt/2*.1,y:fe/2},...hr(-nt/2-nt/2*.1,fe/2,nt/2+nt/2*.1,fe/2,J,.8),{x:nt/2+nt/2*.1,y:-fe/2},{x:-nt/2-nt/2*.1,y:-fe/2}],F=-nt/2+nt/2*.1,st=-fe/2-.4*It,xt=[{x:F+nt-Z,y:1.4*(st+wt)},{x:F+nt,y:st+wt-It},{x:F+nt,y:.9*(st+wt)},...hr(F+nt,1.3*(st+wt),F+nt-Z,1.5*(st+wt),.03*-wt,.5)],Me=j(T),Qt=tt.path(Me,l),Ue=j(xt),xr=tt.path(Ue,{...l,fillStyle:"solid"}),Sr=kt.insert(()=>xr,":first-child");return Sr.insert(()=>Qt,":first-child"),Sr.attr("class","basic label-container"),De&&"handDrawn"!==d.look&&Sr.selectAll("path").attr("style",De),Xt&&"handDrawn"!==d.look&&Sr.selectAll("path").attr("style",Xt),Sr.attr("transform",`translate(0,${-J/2})`),ue.attr("transform",`translate(${-nt/2+(d.padding??0)-(pt.x-(pt.left??0))},${-wt/2+(d.padding??0)-J/2-(pt.y-(pt.top??0))})`),bt(d,Sr),d.intersect=function(ta){return oe.polygon(d,T,ta)},kt})).apply(this,arguments)}function Ce(Ht,d){return Ri.apply(this,arguments)}function Ri(){return(Ri=(0,lt.A)(function*(Ht,d){const{labelStyles:ct,nodeStyles:Xt}=(0,L.GX)(d);d.labelStyle=ct;const{shapeSvg:kt,bbox:pt}=yield At(Ht,d,Gt(d)),ue=Math.max(pt.width+d.padding,d?.width||0),nt=Math.max(pt.height+d.padding,d?.height||0),wt=-ue/2,J=-nt/2,Z=kt.insert("rect",":first-child");return Z.attr("class","text").attr("style",Xt).attr("rx",0).attr("ry",0).attr("x",wt).attr("y",J).attr("width",ue).attr("height",nt),bt(d,Z),d.intersect=function(It){return oe.rect(d,It)},kt})).apply(this,arguments)}(0,G.K2)(W,"question"),(0,G.K2)(Ye,"rect_left_inv_arrow"),(0,G.K2)(Tr,"rectWithTitle"),(0,G.K2)(da,"generateArcPoints"),(0,G.K2)(Pa,"roundedRect"),(0,G.K2)(Wa,"shadedProcess"),(0,G.K2)(ba,"slopedRect"),(0,G.K2)(Sa,"squareRect"),(0,G.K2)(Va,"stadium"),(0,G.K2)(Ua,"state"),(0,G.K2)(Oa,"stateEnd"),(0,G.K2)(Ka,"stateStart"),(0,G.K2)(Ja,"subroutine"),(0,G.K2)(qa,"taggedRect"),(0,G.K2)(oa,"taggedWaveEdgedRectangle"),(0,G.K2)(Ce,"text");var Ne=(0,G.K2)((Ht,d,ct,Xt,kt,pt)=>`M${Ht},${d}\n    a${kt},${pt} 0,0,1 0,${-Xt}\n    l${ct},0\n    a${kt},${pt} 0,0,1 0,${Xt}\n    M${ct},${-Xt}\n    a${kt},${pt} 0,0,0 0,${Xt}\n    l${-ct},0`,"createCylinderPathD"),at=(0,G.K2)((Ht,d,ct,Xt,kt,pt)=>[`M${Ht},${d}`,`M${Ht+ct},${d}`,`a${kt},${pt} 0,0,0 0,${-Xt}`,`l${-ct},0`,`a${kt},${pt} 0,0,0 0,${Xt}`,`l${ct},0`].join(" "),"createOuterCylinderPathD"),Ct=(0,G.K2)((Ht,d,ct,Xt,kt,pt)=>[`M${Ht+ct/2},${-Xt/2}`,`a${kt},${pt} 0,0,0 0,${Xt}`].join(" "),"createInnerCylinderPathD");function I(Ht,d){return Jt.apply(this,arguments)}function Jt(){return(Jt=(0,lt.A)(function*(Ht,d){const{labelStyles:ct,nodeStyles:Xt}=(0,L.GX)(d);d.labelStyle=ct;const{shapeSvg:kt,bbox:pt,label:ue,halfPadding:nt}=yield At(Ht,d,Gt(d)),wt="neo"===d.look?2*nt:nt,J=pt.height+wt,Z=J/2,It=Z/(2.5+J/50),fe=pt.width+It+wt,{cssStyles:De}=d;let tt;if("handDrawn"===d.look){const l=Lt.A.svg(kt),T=at(0,0,fe,J,It,Z),F=Ct(0,0,fe,J,It,Z),st=l.path(T,(0,L.Fr)(d,{})),xt=l.path(F,(0,L.Fr)(d,{fill:"none"}));tt=kt.insert(()=>xt,":first-child"),tt=kt.insert(()=>st,":first-child"),tt.attr("class","basic label-container"),De&&tt.attr("style",De)}else{const l=Ne(0,0,fe,J,It,Z);tt=kt.insert("path",":first-child").attr("d",l).attr("class","basic label-container").attr("style",(0,Mt.KL)(De)).attr("style",Xt),tt.attr("class","basic label-container"),De&&tt.selectAll("path").attr("style",De),Xt&&tt.selectAll("path").attr("style",Xt)}return tt.attr("label-offset-x",It),tt.attr("transform",`translate(${-fe/2}, ${J/2} )`),ue.attr("transform",`translate(${-pt.width/2-It-(pt.x-(pt.left??0))}, ${-pt.height/2-(pt.y-(pt.top??0))})`),bt(d,tt),d.intersect=function(l){const T=oe.rect(d,l),F=T.y-(d.y??0);if(0!=Z&&(Math.abs(F)<(d.height??0)/2||Math.abs(F)==(d.height??0)/2&&Math.abs(T.x-(d.x??0))>(d.width??0)/2-It)){let st=It*It*(1-F*F/(Z*Z));0!=st&&(st=Math.sqrt(Math.abs(st))),st=It-st,l.x-(d.x??0)>0&&(st=-st),T.x+=st}return T},kt})).apply(this,arguments)}function Ve(Ht,d){return ft.apply(this,arguments)}function ft(){return(ft=(0,lt.A)(function*(Ht,d){const{labelStyles:ct,nodeStyles:Xt}=(0,L.GX)(d);d.labelStyle=ct;const{shapeSvg:kt,bbox:pt}=yield At(Ht,d,Gt(d)),ue=pt.width+d.padding,nt=pt.height+d.padding,wt=[{x:-3*nt/6,y:0},{x:ue+3*nt/6,y:0},{x:ue,y:-nt},{x:0,y:-nt}];let J;const{cssStyles:Z}=d;if("handDrawn"===d.look){const It=Lt.A.svg(kt),fe=(0,L.Fr)(d,{}),De=j(wt),tt=It.path(De,fe);J=kt.insert(()=>tt,":first-child").attr("transform",`translate(${-ue/2}, ${nt/2})`),Z&&J.attr("style",Z)}else J=B(kt,ue,nt,wt);return Xt&&J.attr("style",Xt),d.width=ue,d.height=nt,bt(d,J),d.intersect=function(It){return oe.polygon(d,wt,It)},kt})).apply(this,arguments)}function Dt(Ht,d){return Ft.apply(this,arguments)}function Ft(){return(Ft=(0,lt.A)(function*(Ht,d){const{labelStyles:ct,nodeStyles:Xt}=(0,L.GX)(d);d.labelStyle=ct;const{shapeSvg:kt,bbox:pt}=yield At(Ht,d,Gt(d)),wt=Math.max(60,pt.width+2*(d.padding??0),d?.width??0),J=Math.max(20,pt.height+2*(d.padding??0),d?.height??0),{cssStyles:Z}=d,It=Lt.A.svg(kt),fe=(0,L.Fr)(d,{});"handDrawn"!==d.look&&(fe.roughness=0,fe.fillStyle="solid");const De=[{x:-wt/2*.8,y:-J/2},{x:wt/2*.8,y:-J/2},{x:wt/2,y:-J/2*.6},{x:wt/2,y:J/2},{x:-wt/2,y:J/2},{x:-wt/2,y:-J/2*.6}],tt=j(De),l=It.path(tt,fe),T=kt.insert(()=>l,":first-child");return T.attr("class","basic label-container"),Z&&"handDrawn"!==d.look&&T.selectChildren("path").attr("style",Z),Xt&&"handDrawn"!==d.look&&T.selectChildren("path").attr("style",Xt),bt(d,T),d.intersect=function(F){return oe.polygon(d,De,F)},kt})).apply(this,arguments)}function Je(Ht,d){return Xr.apply(this,arguments)}function Xr(){return(Xr=(0,lt.A)(function*(Ht,d){const{labelStyles:ct,nodeStyles:Xt}=(0,L.GX)(d);d.labelStyle=ct;const{shapeSvg:kt,bbox:pt,label:ue}=yield At(Ht,d,Gt(d)),nt=(0,ut._3)((0,ut.D7)().flowchart?.htmlLabels),wt=pt.width+(d.padding??0),J=wt+pt.height,Z=wt+pt.height,It=[{x:0,y:0},{x:Z,y:0},{x:Z/2,y:-J}],{cssStyles:fe}=d,De=Lt.A.svg(kt),tt=(0,L.Fr)(d,{});"handDrawn"!==d.look&&(tt.roughness=0,tt.fillStyle="solid");const l=j(It),T=De.path(l,tt),F=kt.insert(()=>T,":first-child").attr("transform",`translate(${-J/2}, ${J/2})`);return fe&&"handDrawn"!==d.look&&F.selectChildren("path").attr("style",fe),Xt&&"handDrawn"!==d.look&&F.selectChildren("path").attr("style",Xt),d.width=wt,d.height=J,bt(d,F),ue.attr("transform",`translate(${-pt.width/2-(pt.x-(pt.left??0))}, ${J/2-(pt.height+(d.padding??0)/(nt?2:1)-(pt.y-(pt.top??0)))})`),d.intersect=function(st){return G.Rm.info("Triangle intersect",d,It,st),oe.polygon(d,It,st)},kt})).apply(this,arguments)}function Hr(Ht,d){return ra.apply(this,arguments)}function ra(){return(ra=(0,lt.A)(function*(Ht,d){const{labelStyles:ct,nodeStyles:Xt}=(0,L.GX)(d);d.labelStyle=ct;const{shapeSvg:kt,bbox:pt,label:ue}=yield At(Ht,d,Gt(d)),nt=Math.max(pt.width+2*(d.padding??0),d?.width??0),wt=Math.max(pt.height+2*(d.padding??0),d?.height??0),J=wt/8,Z=wt+J,{cssStyles:It}=d,De=70-nt,tt=De>0?De/2:0,l=Lt.A.svg(kt),T=(0,L.Fr)(d,{});"handDrawn"!==d.look&&(T.roughness=0,T.fillStyle="solid");const F=[{x:-nt/2-tt,y:Z/2},...hr(-nt/2-tt,Z/2,nt/2+tt,Z/2,J,.8),{x:nt/2+tt,y:-Z/2},{x:-nt/2-tt,y:-Z/2}],st=j(F),xt=l.path(st,T),Me=kt.insert(()=>xt,":first-child");return Me.attr("class","basic label-container"),It&&"handDrawn"!==d.look&&Me.selectAll("path").attr("style",It),Xt&&"handDrawn"!==d.look&&Me.selectAll("path").attr("style",Xt),Me.attr("transform",`translate(0,${-J/2})`),ue.attr("transform",`translate(${-nt/2+(d.padding??0)-(pt.x-(pt.left??0))},${-wt/2+(d.padding??0)-J-(pt.y-(pt.top??0))})`),bt(d,Me),d.intersect=function(Qt){return oe.polygon(d,F,Qt)},kt})).apply(this,arguments)}function La(Ht,d){return fa.apply(this,arguments)}function fa(){return(fa=(0,lt.A)(function*(Ht,d){const{labelStyles:ct,nodeStyles:Xt}=(0,L.GX)(d);d.labelStyle=ct;const{shapeSvg:kt,bbox:pt}=yield At(Ht,d,Gt(d)),wt=Math.max(pt.width+2*(d.padding??0),d?.width??0),J=Math.max(pt.height+2*(d.padding??0),d?.height??0),Z=wt/J;let It=wt,fe=J;It>fe*Z?fe=It/Z:It=fe*Z,It=Math.max(It,100),fe=Math.max(fe,50);const De=Math.min(.2*fe,fe/4),tt=fe+2*De,{cssStyles:l}=d,T=Lt.A.svg(kt),F=(0,L.Fr)(d,{});"handDrawn"!==d.look&&(F.roughness=0,F.fillStyle="solid");const st=[{x:-It/2,y:tt/2},...hr(-It/2,tt/2,It/2,tt/2,De,1),{x:It/2,y:-tt/2},...hr(It/2,-tt/2,-It/2,-tt/2,De,-1)],xt=j(st),Me=T.path(xt,F),Qt=kt.insert(()=>Me,":first-child");return Qt.attr("class","basic label-container"),l&&"handDrawn"!==d.look&&Qt.selectAll("path").attr("style",l),Xt&&"handDrawn"!==d.look&&Qt.selectAll("path").attr("style",Xt),bt(d,Qt),d.intersect=function(Ue){return oe.polygon(d,st,Ue)},kt})).apply(this,arguments)}function wa(Ht,d){return ja.apply(this,arguments)}function ja(){return(ja=(0,lt.A)(function*(Ht,d){const{labelStyles:ct,nodeStyles:Xt}=(0,L.GX)(d);d.labelStyle=ct;const{shapeSvg:kt,bbox:pt,label:ue}=yield At(Ht,d,Gt(d)),nt=Math.max(pt.width+2*(d.padding??0),d?.width??0),wt=Math.max(pt.height+2*(d.padding??0),d?.height??0),Z=-nt/2,It=-wt/2,{cssStyles:fe}=d,De=Lt.A.svg(kt),tt=(0,L.Fr)(d,{}),l=[{x:Z-5,y:It-5},{x:Z-5,y:It+wt},{x:Z+nt,y:It+wt},{x:Z+nt,y:It-5}],T=`M${Z-5},${It-5} L${Z+nt},${It-5} L${Z+nt},${It+wt} L${Z-5},${It+wt} L${Z-5},${It-5}\n                M${Z-5},${It} L${Z+nt},${It}\n                M${Z},${It-5} L${Z},${It+wt}`;"handDrawn"!==d.look&&(tt.roughness=0,tt.fillStyle="solid");const F=De.path(T,tt),st=kt.insert(()=>F,":first-child");return st.attr("transform","translate(2.5, 2.5)"),st.attr("class","basic label-container"),fe&&"handDrawn"!==d.look&&st.selectAll("path").attr("style",fe),Xt&&"handDrawn"!==d.look&&st.selectAll("path").attr("style",Xt),ue.attr("transform",`translate(${-pt.width/2+2.5-(pt.x-(pt.left??0))}, ${-pt.height/2+2.5-(pt.y-(pt.top??0))})`),bt(d,st),d.intersect=function(xt){return oe.polygon(d,l,xt)},kt})).apply(this,arguments)}function $a(Ht,d){return yi.apply(this,arguments)}function yi(){return(yi=(0,lt.A)(function*(Ht,d){const ct=d;if(ct.alias&&(d.label=ct.alias),"handDrawn"===d.look){const{themeVariables:Vi}=(0,ut.zj)(),{background:an}=Vi,Fi={...d,id:d.id+"-background",look:"default",cssStyles:["stroke: none",`fill: ${an}`]};yield $a(Ht,Fi)}const Xt=(0,ut.zj)();d.useHtmlLabels=Xt.htmlLabels;let kt=Xt.er?.diagramPadding??10,pt=Xt.er?.entityPadding??6;const{cssStyles:ue}=d,{labelStyles:nt,nodeStyles:wt}=(0,L.GX)(d);if(0===ct.attributes.length&&d.label){const Vi={rx:0,ry:0,labelPaddingX:kt,labelPaddingY:1.5*kt,classes:""};(0,Mt.Un)(d.label,Xt)+2*Vi.labelPaddingX<Xt.er.minEntityWidth&&(d.width=Xt.er.minEntityWidth);const an=yield jt(Ht,d,Vi);if(!(0,ut._3)(Xt.htmlLabels)){const Fi=an.select("text"),bn=Fi.node()?.getBBox();Fi.attr("transform",`translate(${-bn.width/2}, 0)`)}return an}Xt.htmlLabels||(kt*=1.25,pt*=1.25);let J=Gt(d);J||(J="node default");const Z=Ht.insert("g").attr("class",J).attr("id",d.domId||d.id),It=yield Ei(Z,d.label??"",Xt,0,0,["name"],nt);It.height+=pt;let fe=0;const De=[],tt=[];let l=0,T=0,F=0,st=0,xt=!0,Me=!0;for(const Vi of ct.attributes){const an=yield Ei(Z,Vi.type,Xt,0,fe,["attribute-type"],nt);l=Math.max(l,an.width+kt);const Fi=yield Ei(Z,Vi.name,Xt,0,fe,["attribute-name"],nt);T=Math.max(T,Fi.width+kt);const bn=yield Ei(Z,Vi.keys.join(),Xt,0,fe,["attribute-keys"],nt);F=Math.max(F,bn.width+kt);const pn=yield Ei(Z,Vi.comment,Xt,0,fe,["attribute-comment"],nt);st=Math.max(st,pn.width+kt);const Ui=Math.max(an.height,Fi.height,bn.height,pn.height)+pt;tt.push({yOffset:fe,rowHeight:Ui}),fe+=Ui}let Qt=4;F<=kt&&(xt=!1,F=0,Qt--),st<=kt&&(Me=!1,st=0,Qt--);const Ue=Z.node().getBBox();if(It.width+2*kt-(l+T+F+st)>0){const Vi=It.width+2*kt-(l+T+F+st);l+=Vi/Qt,T+=Vi/Qt,F>0&&(F+=Vi/Qt),st>0&&(st+=Vi/Qt)}const xr=l+T+F+st,Sr=Lt.A.svg(Z),ta=(0,L.Fr)(d,{});"handDrawn"!==d.look&&(ta.roughness=0,ta.fillStyle="solid");let Pr=0;tt.length>0&&(Pr=tt.reduce((Vi,an)=>Vi+(an?.rowHeight??0),0));const la=Math.max(Ue.width+2*kt,d?.width||0,xr),Ca=Math.max((Pr??0)+It.height,d?.height||0),ka=-la/2,Ba=-Ca/2;Z.selectAll("g:not(:first-child)").each((Vi,an,Fi)=>{const bn=(0,w.Ltv)(Fi[an]),pn=bn.attr("transform");let Ui=0,os=0;if(pn){const ro=RegExp(/translate\(([^,]+),([^)]+)\)/).exec(pn);ro&&(Ui=parseFloat(ro[1]),os=parseFloat(ro[2]),bn.attr("class").includes("attribute-name")?Ui+=l:bn.attr("class").includes("attribute-keys")?Ui+=l+T:bn.attr("class").includes("attribute-comment")&&(Ui+=l+T+F))}bn.attr("transform",`translate(${ka+kt/2+Ui}, ${os+Ba+It.height+pt/2})`)}),Z.select(".name").attr("transform","translate("+-It.width/2+", "+(Ba+pt/2)+")");const Xa=Sr.rectangle(ka,Ba,la,Ca,ta),za=Z.insert(()=>Xa,":first-child").attr("style",ue.join("")),{themeVariables:Fa}=(0,ut.zj)(),{rowEven:ui,rowOdd:ji,nodeBorder:$n}=Fa;De.push(0);for(const[Vi,an]of tt.entries()){const bn=(Vi+1)%2==0&&0!==an.yOffset,pn=Sr.rectangle(ka,It.height+Ba+an?.yOffset,la,an?.rowHeight,{...ta,fill:bn?ui:ji,stroke:$n});Z.insert(()=>pn,"g.label").attr("style",ue.join("")).attr("class","row-rect-"+(bn?"even":"odd"))}let Tn=Sr.line(ka,It.height+Ba,la+ka,It.height+Ba,ta);Z.insert(()=>Tn).attr("class","divider"),Tn=Sr.line(l+ka,It.height+Ba,l+ka,Ca+Ba,ta),Z.insert(()=>Tn).attr("class","divider"),xt&&(Tn=Sr.line(l+T+ka,It.height+Ba,l+T+ka,Ca+Ba,ta),Z.insert(()=>Tn).attr("class","divider")),Me&&(Tn=Sr.line(l+T+F+ka,It.height+Ba,l+T+F+ka,Ca+Ba,ta),Z.insert(()=>Tn).attr("class","divider"));for(const Vi of De)Tn=Sr.line(ka,It.height+Ba+Vi,la+ka,It.height+Ba+Vi,ta),Z.insert(()=>Tn).attr("class","divider");if(bt(d,za),wt&&"handDrawn"!==d.look){const an=wt.split(";")?.filter(Fi=>Fi.includes("stroke"))?.map(Fi=>`${Fi}`).join("; ");Z.selectAll("path").attr("style",an??""),Z.selectAll(".row-rect-even path").attr("style",wt)}return d.intersect=function(Vi){return oe.rect(d,Vi)},Z})).apply(this,arguments)}function Ei(Ht,d,ct){return mi.apply(this,arguments)}function mi(){return(mi=(0,lt.A)(function*(Ht,d,ct,Xt=0,kt=0,pt=[],ue=""){const nt=Ht.insert("g").attr("class",`label ${pt.join(" ")}`).attr("transform",`translate(${Xt}, ${kt})`).attr("style",ue);d!==(0,ut.QO)(d)&&(d=(d=(0,ut.QO)(d)).replaceAll("<","&lt;").replaceAll(">","&gt;"));const wt=nt.node().appendChild(yield(0,D.GZ)(nt,d,{width:(0,Mt.Un)(d,ct)+100,style:ue,useHtmlLabels:ct.htmlLabels},ct));if(d.includes("&lt;")||d.includes("&gt;")){let Z=wt.children[0];for(Z.textContent=Z.textContent.replaceAll("&lt;","<").replaceAll("&gt;",">");Z.childNodes[0];)Z=Z.childNodes[0],Z.textContent=Z.textContent.replaceAll("&lt;","<").replaceAll("&gt;",">")}let J=wt.getBBox();if((0,ut._3)(ct.htmlLabels)){const Z=wt.children[0];Z.style.textAlign="start";const It=(0,w.Ltv)(wt);J=Z.getBoundingClientRect(),It.attr("width",J.width),It.attr("height",J.height)}return J})).apply(this,arguments)}function Na(Ht,d,ct,Xt){return Rr.apply(this,arguments)}function Rr(){return(Rr=(0,lt.A)(function*(Ht,d,ct,Xt,kt=ct.class.padding??12){const pt=Xt?0:3,ue=Ht.insert("g").attr("class",Gt(d)).attr("id",d.domId||d.id);let nt=null,wt=null,J=null,Z=null,It=0,fe=0,De=0;if(nt=ue.insert("g").attr("class","annotation-group text"),d.annotations.length>0){const st=d.annotations[0];yield ya(nt,{text:`\xab${st}\xbb`},0),It=nt.node().getBBox().height}wt=ue.insert("g").attr("class","label-group text"),yield ya(wt,d,0,["font-weight: bolder"]);const tt=wt.node().getBBox();fe=tt.height,J=ue.insert("g").attr("class","members-group text");let l=0;for(const st of d.members)l+=(yield ya(J,st,l,[st.parseClassifier()]))+pt;De=J.node().getBBox().height,De<=0&&(De=kt/2),Z=ue.insert("g").attr("class","methods-group text");let T=0;for(const st of d.methods)T+=(yield ya(Z,st,T,[st.parseClassifier()]))+pt;let F=ue.node().getBBox();if(null!==nt){const st=nt.node().getBBox();nt.attr("transform",`translate(${-st.width/2})`)}return wt.attr("transform",`translate(${-tt.width/2}, ${It})`),F=ue.node().getBBox(),J.attr("transform",`translate(0, ${It+fe+2*kt})`),F=ue.node().getBBox(),Z.attr("transform",`translate(0, ${It+fe+(De?De+4*kt:2*kt)})`),F=ue.node().getBBox(),{shapeSvg:ue,bbox:F}})).apply(this,arguments)}function ya(Ht,d,ct){return Ya.apply(this,arguments)}function Ya(){return(Ya=(0,lt.A)(function*(Ht,d,ct,Xt=[]){const kt=Ht.insert("g").attr("class","label").attr("style",Xt.join("; ")),pt=(0,ut.zj)();let ue="useHtmlLabels"in d?d.useHtmlLabels:(0,ut._3)(pt.htmlLabels)??!0,nt="";nt="text"in d?d.text:d.label,!ue&&nt.startsWith("\\")&&(nt=nt.substring(1)),(0,ut.Wi)(nt)&&(ue=!0);const wt=yield(0,D.GZ)(kt,(0,ut.oB)((0,Mt.Sm)(nt)),{width:(0,Mt.Un)(nt,pt)+50,classes:"markdown-node-label",useHtmlLabels:ue},pt);let J,Z=1;if(ue){const It=wt.children[0],fe=(0,w.Ltv)(wt);Z=It.innerHTML.split("<br>").length,It.innerHTML.includes("</math>")&&(Z+=It.innerHTML.split("<mrow>").length-1);const De=It.getElementsByTagName("img");if(De){const tt=""===nt.replace(/<img[^>]*>/g,"").trim();yield Promise.all([...De].map(l=>new Promise(T=>{function F(){if(l.style.display="flex",l.style.flexDirection="column",tt){const st=pt.fontSize?.toString()??window.getComputedStyle(document.body).fontSize,Me=5*parseInt(st,10)+"px";l.style.minWidth=Me,l.style.maxWidth=Me}else l.style.width="100%";T(l)}(0,G.K2)(F,"setupImage"),setTimeout(()=>{l.complete&&F()}),l.addEventListener("error",F),l.addEventListener("load",F)})))}J=It.getBoundingClientRect(),fe.attr("width",J.width),fe.attr("height",J.height)}else{Xt.includes("font-weight: bolder")&&(0,w.Ltv)(wt).selectAll("tspan").attr("font-weight",""),Z=wt.children.length;const It=wt.children[0];(""===wt.textContent||wt.textContent.includes("&gt"))&&(It.textContent=nt[0]+nt.substring(1).replaceAll("&gt;",">").replaceAll("&lt;","<").trim()," "===nt[1]&&(It.textContent=It.textContent[0]+" "+It.textContent.substring(1))),"undefined"===It.textContent&&(It.textContent=""),J=wt.getBBox()}return kt.attr("transform","translate(0,"+(-J.height/(2*Z)+ct)+")"),J.height})).apply(this,arguments)}function ni(Ht,d){return Mr.apply(this,arguments)}function Mr(){return(Mr=(0,lt.A)(function*(Ht,d){const ct=(0,ut.D7)(),Xt=ct.class.padding??12,kt=Xt,pt=d.useHtmlLabels??(0,ut._3)(ct.htmlLabels)??!0,ue=d;ue.annotations=ue.annotations??[],ue.members=ue.members??[],ue.methods=ue.methods??[];const{shapeSvg:nt,bbox:wt}=yield Na(Ht,d,ct,pt,kt),{labelStyles:J,nodeStyles:Z}=(0,L.GX)(d);d.labelStyle=J,d.cssStyles=ue.styles||"";const It=ue.styles?.join(";")||Z||"";d.cssStyles||(d.cssStyles=It.replaceAll("!important","").split(";"));const fe=0===ue.members.length&&0===ue.methods.length&&!ct.class?.hideEmptyMembersBox,De=Lt.A.svg(nt),tt=(0,L.Fr)(d,{});"handDrawn"!==d.look&&(tt.roughness=0,tt.fillStyle="solid");const l=wt.width;let T=wt.height;0===ue.members.length&&0===ue.methods.length?T+=kt:ue.members.length>0&&0===ue.methods.length&&(T+=2*kt);const F=-l/2,st=-T/2,xt=De.rectangle(F-Xt,st-Xt-(fe?Xt:0===ue.members.length&&0===ue.methods.length?-Xt/2:0),l+2*Xt,T+2*Xt+(fe?2*Xt:0===ue.members.length&&0===ue.methods.length?-Xt:0),tt),Me=nt.insert(()=>xt,":first-child");Me.attr("class","basic label-container");const Qt=Me.node().getBBox();nt.selectAll(".text").each((ta,Pr,la)=>{const Ca=(0,w.Ltv)(la[Pr]),ka=Ca.attr("transform");let Ba=0;if(ka){const ui=RegExp(/translate\(([^,]+),([^)]+)\)/).exec(ka);ui&&(Ba=parseFloat(ui[2]))}let Xa=Ba+st+Xt-(fe?Xt:0===ue.members.length&&0===ue.methods.length?-Xt/2:0);pt||(Xa-=4);let za=F;(Ca.attr("class").includes("label-group")||Ca.attr("class").includes("annotation-group"))&&(za=-Ca.node()?.getBBox().width/2||0,nt.selectAll("text").each(function(Fa,ui,ji){"middle"===window.getComputedStyle(ji[ui]).textAnchor&&(za=0)})),Ca.attr("transform",`translate(${za}, ${Xa})`)});const Ue=nt.select(".annotation-group").node().getBBox().height-(fe?Xt/2:0)||0,xr=nt.select(".label-group").node().getBBox().height-(fe?Xt/2:0)||0,Sr=nt.select(".members-group").node().getBBox().height-(fe?Xt/2:0)||0;if(ue.members.length>0||ue.methods.length>0||fe){const ta=De.line(Qt.x,Ue+xr+st+Xt,Qt.x+Qt.width,Ue+xr+st+Xt,tt);nt.insert(()=>ta).attr("class","divider").attr("style",It)}if(fe||ue.members.length>0||ue.methods.length>0){const ta=De.line(Qt.x,Ue+xr+Sr+st+2*kt+Xt,Qt.x+Qt.width,Ue+xr+Sr+st+Xt+2*kt,tt);nt.insert(()=>ta).attr("class","divider").attr("style",It)}if("handDrawn"!==ue.look&&nt.selectAll("path").attr("style",It),Me.select(":nth-child(2)").attr("style",It),nt.selectAll(".divider").select("path").attr("style",It),d.labelStyle?nt.selectAll("span").attr("style",d.labelStyle):nt.selectAll("span").attr("style",It),!pt){const ta=RegExp(/color\s*:\s*([^;]*)/),Pr=ta.exec(It);if(Pr){const la=Pr[0].replace("color","fill");nt.selectAll("tspan").attr("style",la)}else if(J){const la=ta.exec(J);if(la){const Ca=la[0].replace("color","fill");nt.selectAll("tspan").attr("style",Ca)}}}return bt(d,Me),d.intersect=function(ta){return oe.rect(d,ta)},nt})).apply(this,arguments)}function Pi(Ht,d){return ua.apply(this,arguments)}function ua(){return(ua=(0,lt.A)(function*(Ht,d){const{labelStyles:ct,nodeStyles:Xt}=(0,L.GX)(d);d.labelStyle=ct;const kt=d,pt=d,wt="verifyMethod"in d,J=Gt(d),Z=Ht.insert("g").attr("class",J).attr("id",d.domId??d.id);let It;It=wt?yield ki(Z,`&lt;&lt;${kt.type}&gt;&gt;`,0,d.labelStyle):yield ki(Z,"&lt;&lt;Element&gt;&gt;",0,d.labelStyle);let fe=It;const De=yield ki(Z,kt.name,fe,d.labelStyle+"; font-weight: bold;");fe+=De+20,wt?(fe+=(yield ki(Z,kt.requirementId?`ID: ${kt.requirementId}`:"",fe,d.labelStyle)),fe+=(yield ki(Z,kt.text?`Text: ${kt.text}`:"",fe,d.labelStyle)),fe+=(yield ki(Z,kt.risk?`Risk: ${kt.risk}`:"",fe,d.labelStyle)),yield ki(Z,kt.verifyMethod?`Verification: ${kt.verifyMethod}`:"",fe,d.labelStyle)):(fe+=(yield ki(Z,pt.type?`Type: ${pt.type}`:"",fe,d.labelStyle)),yield ki(Z,pt.docRef?`Doc Ref: ${pt.docRef}`:"",fe,d.labelStyle));const tt=(Z.node()?.getBBox().width??200)+20,l=(Z.node()?.getBBox().height??200)+20,T=-tt/2,F=-l/2,st=Lt.A.svg(Z),xt=(0,L.Fr)(d,{});"handDrawn"!==d.look&&(xt.roughness=0,xt.fillStyle="solid");const Me=st.rectangle(T,F,tt,l,xt),Qt=Z.insert(()=>Me,":first-child");if(Qt.attr("class","basic label-container").attr("style",Xt),Z.selectAll(".label").each((Ue,xr,Sr)=>{const ta=(0,w.Ltv)(Sr[xr]),Pr=ta.attr("transform");let la=0,Ca=0;if(Pr){const za=RegExp(/translate\(([^,]+),([^)]+)\)/).exec(Pr);za&&(la=parseFloat(za[1]),Ca=parseFloat(za[2]))}let Ba=T+10;(0===xr||1===xr)&&(Ba=la),ta.attr("transform",`translate(${Ba}, ${Ca-l/2+20})`)}),fe>It+De+20){const Ue=st.line(T,F+It+De+20,T+tt,F+It+De+20,xt);Z.insert(()=>Ue).attr("style",Xt)}return bt(d,Qt),d.intersect=function(Ue){return oe.rect(d,Ue)},Z})).apply(this,arguments)}function ki(Ht,d,ct){return Bi.apply(this,arguments)}function Bi(){return(Bi=(0,lt.A)(function*(Ht,d,ct,Xt=""){if(""===d)return 0;const kt=Ht.insert("g").attr("class","label").attr("style",Xt),pt=(0,ut.D7)(),ue=pt.htmlLabels??!0,nt=yield(0,D.GZ)(kt,(0,ut.oB)((0,Mt.Sm)(d)),{width:(0,Mt.Un)(d,pt)+50,classes:"markdown-node-label",useHtmlLabels:ue,style:Xt},pt);let wt;if(ue){const J=nt.children[0],Z=(0,w.Ltv)(nt);wt=J.getBoundingClientRect(),Z.attr("width",wt.width),Z.attr("height",wt.height)}else{const J=nt.children[0];for(const Z of J.children)Z.textContent=Z.textContent.replaceAll("&gt;",">").replaceAll("&lt;","<"),Xt&&Z.setAttribute("style",Xt);wt=nt.getBBox(),wt.height+=6}return kt.attr("transform",`translate(${-wt.width/2},${-wt.height/2+ct})`),wt.height})).apply(this,arguments)}(0,G.K2)(I,"tiltedCylinder"),(0,G.K2)(Ve,"trapezoid"),(0,G.K2)(Dt,"trapezoidalPentagon"),(0,G.K2)(Je,"triangle"),(0,G.K2)(Hr,"waveEdgedRectangle"),(0,G.K2)(La,"waveRectangle"),(0,G.K2)(wa,"windowPane"),(0,G.K2)($a,"erBox"),(0,G.K2)(Ei,"addText"),(0,G.K2)(Na,"textHelper"),(0,G.K2)(ya,"addText"),(0,G.K2)(ni,"classBox"),(0,G.K2)(Pi,"requirementBox"),(0,G.K2)(ki,"addText");var Wi=(0,G.K2)(Ht=>{switch(Ht){case"Very High":return"red";case"High":return"orange";case"Medium":return null;case"Low":return"blue";case"Very Low":return"lightblue"}},"colorFromPriority");function ln(Ht,d,ct){return Ji.apply(this,arguments)}function Ji(){return(Ji=(0,lt.A)(function*(Ht,d,{config:ct}){const{labelStyles:Xt,nodeStyles:kt}=(0,L.GX)(d);d.labelStyle=Xt||"";const ue=d.width;d.width=(d.width??200)-10;const{shapeSvg:nt,bbox:wt,label:J}=yield At(Ht,d,Gt(d)),Z=d.padding||10;let fe,It="";"ticket"in d&&d.ticket&&ct?.kanban?.ticketBaseUrl&&(It=ct?.kanban?.ticketBaseUrl.replace("#TICKET#",d.ticket),fe=nt.insert("svg:a",":first-child").attr("class","kanban-ticket-link").attr("xlink:href",It).attr("target","_blank"));const De={useHtmlLabels:d.useHtmlLabels,labelStyle:d.labelStyle||"",width:d.width,img:d.img,padding:d.padding||8,centerLabel:!1};let tt,l;({label:tt,bbox:l}=fe?yield Ge(fe,"ticket"in d&&d.ticket||"",De):yield Ge(nt,"ticket"in d&&d.ticket||"",De));const{label:T,bbox:F}=yield Ge(nt,"assigned"in d&&d.assigned||"",De);d.width=ue;const xt=d?.width||0,Me=Math.max(l.height,F.height)/2,Qt=Math.max(wt.height+20,d?.height||0)+Me,Ue=-xt/2,xr=-Qt/2;let Sr;J.attr("transform","translate("+(Z-xt/2)+", "+(-Me-wt.height/2)+")"),tt.attr("transform","translate("+(Z-xt/2)+", "+(wt.height/2-Me)+")"),T.attr("transform","translate("+(Z+xt/2-F.width-20)+", "+(wt.height/2-Me)+")");const{rx:ta,ry:Pr}=d,{cssStyles:la}=d;if("handDrawn"===d.look){const Ca=Lt.A.svg(nt),ka=(0,L.Fr)(d,{}),Ba=ta||Pr?Ca.path(Be(Ue,xr,xt,Qt,ta||0),ka):Ca.rectangle(Ue,xr,xt,Qt,ka);Sr=nt.insert(()=>Ba,":first-child"),Sr.attr("class","basic label-container").attr("style",la||null)}else{Sr=nt.insert("rect",":first-child"),Sr.attr("class","basic label-container __APA__").attr("style",kt).attr("rx",ta??5).attr("ry",Pr??5).attr("x",Ue).attr("y",xr).attr("width",xt).attr("height",Qt);const Ca="priority"in d&&d.priority;if(Ca){const ka=nt.append("line"),Ba=Ue+2,Xa=xr+Math.floor((ta??0)/2),za=xr+Qt-Math.floor((ta??0)/2);ka.attr("x1",Ba).attr("y1",Xa).attr("x2",Ba).attr("y2",za).attr("stroke-width","4").attr("stroke",Wi(Ca))}}return bt(d,Sr),d.height=Qt,d.intersect=function(Ca){return oe.rect(d,Ca)},nt})).apply(this,arguments)}function Oi(Ht,d){return zi.apply(this,arguments)}function zi(){return(zi=(0,lt.A)(function*(Ht,d){const{labelStyles:ct,nodeStyles:Xt}=(0,L.GX)(d);d.labelStyle=ct;const{shapeSvg:kt,bbox:pt,halfPadding:ue,label:nt}=yield At(Ht,d,Gt(d)),wt=pt.width+10*ue,J=pt.height+8*ue,Z=.15*wt,{cssStyles:It}=d,De=pt.height+20,tt=Math.max(wt,pt.width+20),l=Math.max(J,De);let T;nt.attr("transform",`translate(${-pt.width/2}, ${-pt.height/2})`);const F=`M0 0 \n    a${Z},${Z} 1 0,0 ${.25*tt},${-1*l*.1}\n    a${Z},${Z} 1 0,0 ${.25*tt},0\n    a${Z},${Z} 1 0,0 ${.25*tt},0\n    a${Z},${Z} 1 0,0 ${.25*tt},${.1*l}\n\n    a${Z},${Z} 1 0,0 ${.15*tt},${.33*l}\n    a${.8*Z},${.8*Z} 1 0,0 0,${.34*l}\n    a${Z},${Z} 1 0,0 ${-1*tt*.15},${.33*l}\n\n    a${Z},${Z} 1 0,0 ${-1*tt*.25},${.15*l}\n    a${Z},${Z} 1 0,0 ${-1*tt*.25},0\n    a${Z},${Z} 1 0,0 ${-1*tt*.25},0\n    a${Z},${Z} 1 0,0 ${-1*tt*.25},${-1*l*.15}\n\n    a${Z},${Z} 1 0,0 ${-1*tt*.1},${-1*l*.33}\n    a${.8*Z},${.8*Z} 1 0,0 0,${-1*l*.34}\n    a${Z},${Z} 1 0,0 ${.1*tt},${-1*l*.33}\n  H0 V0 Z`;if("handDrawn"===d.look){const st=Lt.A.svg(kt),xt=(0,L.Fr)(d,{}),Me=st.path(F,xt);T=kt.insert(()=>Me,":first-child"),T.attr("class","basic label-container").attr("style",(0,Mt.KL)(It))}else T=kt.insert("path",":first-child").attr("class","basic label-container").attr("style",Xt).attr("d",F);return T.attr("transform",`translate(${-tt/2}, ${-l/2})`),bt(d,T),d.calcIntersect=function(st,xt){return oe.rect(st,xt)},d.intersect=function(st){return G.Rm.info("Bang intersect",d,st),oe.rect(d,st)},kt})).apply(this,arguments)}function cn(Ht,d){return Ln.apply(this,arguments)}function Ln(){return(Ln=(0,lt.A)(function*(Ht,d){const{labelStyles:ct,nodeStyles:Xt}=(0,L.GX)(d);d.labelStyle=ct;const{shapeSvg:kt,bbox:pt,halfPadding:ue,label:nt}=yield At(Ht,d,Gt(d)),wt=pt.width+2*ue,J=pt.height+2*ue,Z=.15*wt,It=.25*wt,fe=.35*wt,De=.2*wt,{cssStyles:tt}=d;let l;const T=`M0 0 \n    a${Z},${Z} 0 0,1 ${.25*wt},${-1*wt*.1}\n    a${fe},${fe} 1 0,1 ${.4*wt},${-1*wt*.1}\n    a${It},${It} 1 0,1 ${.35*wt},${.2*wt}\n\n    a${Z},${Z} 1 0,1 ${.15*wt},${.35*J}\n    a${De},${De} 1 0,1 ${-1*wt*.15},${.65*J}\n\n    a${It},${Z} 1 0,1 ${-1*wt*.25},${.15*wt}\n    a${fe},${fe} 1 0,1 ${-1*wt*.5},0\n    a${Z},${Z} 1 0,1 ${-1*wt*.25},${-1*wt*.15}\n\n    a${Z},${Z} 1 0,1 ${-1*wt*.1},${-1*J*.35}\n    a${De},${De} 1 0,1 ${.1*wt},${-1*J*.65}\n  H0 V0 Z`;if("handDrawn"===d.look){const F=Lt.A.svg(kt),st=(0,L.Fr)(d,{}),xt=F.path(T,st);l=kt.insert(()=>xt,":first-child"),l.attr("class","basic label-container").attr("style",(0,Mt.KL)(tt))}else l=kt.insert("path",":first-child").attr("class","basic label-container").attr("style",Xt).attr("d",T);return nt.attr("transform",`translate(${-pt.width/2}, ${-pt.height/2})`),l.attr("transform",`translate(${-wt/2}, ${-J/2})`),bt(d,l),d.calcIntersect=function(F,st){return oe.rect(F,st)},d.intersect=function(F){return G.Rm.info("Cloud intersect",d,F),oe.rect(d,F)},kt})).apply(this,arguments)}function Bn(Ht,d){return Vn.apply(this,arguments)}function Vn(){return(Vn=(0,lt.A)(function*(Ht,d){const{labelStyles:ct,nodeStyles:Xt}=(0,L.GX)(d);d.labelStyle=ct;const{shapeSvg:kt,bbox:pt,halfPadding:ue,label:nt}=yield At(Ht,d,Gt(d)),wt=pt.width+8*ue,J=pt.height+2*ue,It=`\n    M${-wt/2} ${J/2-5}\n    v${10-J}\n    q0,-5 5,-5\n    h${wt-10}\n    q5,0 5,5\n    v${J-10}\n    q0,5 -5,5\n    h${10-wt}\n    q-5,0 -5,-5\n    Z\n  `,fe=kt.append("path").attr("id","node-"+d.id).attr("class","node-bkg node-"+d.type).attr("style",Xt).attr("d",It);return kt.append("line").attr("class","node-line-").attr("x1",-wt/2).attr("y1",J/2).attr("x2",wt/2).attr("y2",J/2),nt.attr("transform",`translate(${-pt.width/2}, ${-pt.height/2})`),kt.append(()=>nt.node()),bt(d,fe),d.calcIntersect=function(De,tt){return oe.rect(De,tt)},d.intersect=function(De){return oe.rect(d,De)},kt})).apply(this,arguments)}function hn(Ht,d){return Un.apply(this,arguments)}function Un(){return(Un=(0,lt.A)(function*(Ht,d){return it(Ht,d,{padding:d.padding??0})})).apply(this,arguments)}(0,G.K2)(ln,"kanbanItem"),(0,G.K2)(Oi,"bang"),(0,G.K2)(cn,"cloud"),(0,G.K2)(Bn,"defaultMindmapNode"),(0,G.K2)(hn,"mindmapCircle");var tn=[{semanticName:"Process",name:"Rectangle",shortName:"rect",description:"Standard process shape",aliases:["proc","process","rectangle"],internalAliases:["squareRect"],handler:Sa},{semanticName:"Event",name:"Rounded Rectangle",shortName:"rounded",description:"Represents an event",aliases:["event"],internalAliases:["roundedRect"],handler:Pa},{semanticName:"Terminal Point",name:"Stadium",shortName:"stadium",description:"Terminal point",aliases:["terminal","pill"],handler:Va},{semanticName:"Subprocess",name:"Framed Rectangle",shortName:"fr-rect",description:"Subprocess",aliases:["subprocess","subproc","framed-rectangle","subroutine"],handler:Ja},{semanticName:"Database",name:"Cylinder",shortName:"cyl",description:"Database storage",aliases:["db","database","cylinder"],handler:sr},{semanticName:"Start",name:"Circle",shortName:"circle",description:"Starting point",aliases:["circ"],handler:it},{semanticName:"Bang",name:"Bang",shortName:"bang",description:"Bang",aliases:["bang"],handler:Oi},{semanticName:"Cloud",name:"Cloud",shortName:"cloud",description:"cloud",aliases:["cloud"],handler:cn},{semanticName:"Decision",name:"Diamond",shortName:"diam",description:"Decision-making step",aliases:["decision","diamond","question"],handler:W},{semanticName:"Prepare Conditional",name:"Hexagon",shortName:"hex",description:"Preparation or condition step",aliases:["hexagon","prepare"],handler:ne},{semanticName:"Data Input/Output",name:"Lean Right",shortName:"lean-r",description:"Represents input or output",aliases:["lean-right","in-out"],internalAliases:["lean_right"],handler:fr},{semanticName:"Data Input/Output",name:"Lean Left",shortName:"lean-l",description:"Represents output or input",aliases:["lean-left","out-in"],internalAliases:["lean_left"],handler:je},{semanticName:"Priority Action",name:"Trapezoid Base Bottom",shortName:"trap-b",description:"Priority action",aliases:["priority","trapezoid-bottom","trapezoid"],handler:Ve},{semanticName:"Manual Operation",name:"Trapezoid Base Top",shortName:"trap-t",description:"Represents a manual task",aliases:["manual","trapezoid-top","inv-trapezoid"],internalAliases:["inv_trapezoid"],handler:mt},{semanticName:"Stop",name:"Double Circle",shortName:"dbl-circ",description:"Represents a stop point",aliases:["double-circle"],internalAliases:["doublecircle"],handler:Ae},{semanticName:"Text Block",name:"Text Block",shortName:"text",description:"Text block",handler:Ce},{semanticName:"Card",name:"Notched Rectangle",shortName:"notch-rect",description:"Represents a card",aliases:["card","notched-rectangle"],handler:N},{semanticName:"Lined/Shaded Process",name:"Lined Rectangle",shortName:"lin-rect",description:"Lined process shape",aliases:["lined-rectangle","lined-process","lin-proc","shaded-process"],handler:Wa},{semanticName:"Start",name:"Small Circle",shortName:"sm-circ",description:"Small starting point",aliases:["start","small-circle"],internalAliases:["stateStart"],handler:Ka},{semanticName:"Stop",name:"Framed Circle",shortName:"fr-circ",description:"Stop point",aliases:["stop","framed-circle"],internalAliases:["stateEnd"],handler:Oa},{semanticName:"Fork/Join",name:"Filled Rectangle",shortName:"fork",description:"Fork or join in process flow",aliases:["join"],internalAliases:["forkJoin"],handler:Yr},{semanticName:"Collate",name:"Hourglass",shortName:"hourglass",description:"Represents a collate operation",aliases:["hourglass","collate"],handler:ar},{semanticName:"Comment",name:"Curly Brace",shortName:"brace",description:"Adds a comment",aliases:["comment","brace-l"],handler:H},{semanticName:"Comment Right",name:"Curly Brace",shortName:"brace-r",description:"Adds a comment",handler:Pt},{semanticName:"Comment with braces on both sides",name:"Curly Braces",shortName:"braces",description:"Adds a comment",handler:Re},{semanticName:"Com Link",name:"Lightning Bolt",shortName:"bolt",description:"Communication link",aliases:["com-link","lightning-bolt"],handler:br},{semanticName:"Document",name:"Document",shortName:"doc",description:"Represents a document",aliases:["doc","document"],handler:Hr},{semanticName:"Delay",name:"Half-Rounded Rectangle",shortName:"delay",description:"Represents a delay",aliases:["half-rounded-rectangle"],handler:nr},{semanticName:"Direct Access Storage",name:"Horizontal Cylinder",shortName:"h-cyl",description:"Direct access storage",aliases:["das","horizontal-cylinder"],handler:I},{semanticName:"Disk Storage",name:"Lined Cylinder",shortName:"lin-cyl",description:"Disk storage",aliases:["disk","lined-cylinder"],handler:kr},{semanticName:"Display",name:"Curved Trapezoid",shortName:"curv-trap",description:"Represents a display",aliases:["curved-trapezoid","display"],handler:de},{semanticName:"Divided Process",name:"Divided Rectangle",shortName:"div-rect",description:"Divided process shape",aliases:["div-proc","divided-rectangle","divided-process"],handler:ce},{semanticName:"Extract",name:"Triangle",shortName:"tri",description:"Extraction process",aliases:["extract","triangle"],handler:Je},{semanticName:"Internal Storage",name:"Window Pane",shortName:"win-pane",description:"Internal storage",aliases:["internal-storage","window-pane"],handler:wa},{semanticName:"Junction",name:"Filled Circle",shortName:"f-circ",description:"Junction point",aliases:["junction","filled-circle"],handler:Qe},{semanticName:"Loop Limit",name:"Trapezoidal Pentagon",shortName:"notch-pent",description:"Loop limit step",aliases:["loop-limit","notched-pentagon"],handler:Dt},{semanticName:"Manual File",name:"Flipped Triangle",shortName:"flip-tri",description:"Manual file operation",aliases:["manual-file","flipped-triangle"],handler:Dr},{semanticName:"Manual Input",name:"Sloped Rectangle",shortName:"sl-rect",description:"Manual input step",aliases:["manual-input","sloped-rectangle"],handler:ba},{semanticName:"Multi-Document",name:"Stacked Document",shortName:"docs",description:"Multiple documents",aliases:["documents","st-doc","stacked-document"],handler:ia},{semanticName:"Multi-Process",name:"Stacked Rectangle",shortName:"st-rect",description:"Multiple processes",aliases:["procs","processes","stacked-rectangle"],handler:Lr},{semanticName:"Stored Data",name:"Bow Tie Rectangle",shortName:"bow-rect",description:"Stored data",aliases:["stored-data","bow-tie-rectangle"],handler:Et},{semanticName:"Summary",name:"Crossed Circle",shortName:"cross-circ",description:"Summary",aliases:["summary","crossed-circle"],handler:ht},{semanticName:"Tagged Document",name:"Tagged Document",shortName:"tag-doc",description:"Tagged document",aliases:["tag-doc","tagged-document"],handler:oa},{semanticName:"Tagged Process",name:"Tagged Rectangle",shortName:"tag-rect",description:"Tagged process",aliases:["tagged-rectangle","tag-proc","tagged-process"],handler:qa},{semanticName:"Paper Tape",name:"Flag",shortName:"flag",description:"Paper tape",aliases:["paper-tape"],handler:La},{semanticName:"Odd",name:"Odd",shortName:"odd",description:"Odd shape",internalAliases:["rect_left_inv_arrow"],handler:Ye},{semanticName:"Lined Document",name:"Lined Document",shortName:"lin-doc",description:"Lined document",aliases:["lined-document"],handler:_r}],xn=(0,G.K2)(()=>{const d=[...Object.entries({state:Ua,choice:yt,note:Qr,rectWithTitle:Tr,labelRect:Kt,iconSquare:b,iconCircle:M,icon:y,iconRounded:A,imageSquare:R,anchor:qe,kanbanItem:ln,mindmapCircle:hn,defaultMindmapNode:Bn,classBox:ni,erBox:$a,requirementBox:Pi}),...tn.flatMap(ct=>[ct.shortName,..."aliases"in ct?ct.aliases:[],..."internalAliases"in ct?ct.internalAliases:[]].map(kt=>[kt,ct.handler]))];return Object.fromEntries(d)},"generateShapeMap")();function nn(Ht){return Ht in xn}(0,G.K2)(nn,"isValidShape");var kn=new Map;function Rn(Ht,d,ct){return un.apply(this,arguments)}function un(){return(un=(0,lt.A)(function*(Ht,d,ct){let Xt,kt;"rect"===d.shape&&(d.shape=d.rx&&d.ry?"roundedRect":"squareRect");const pt=d.shape?xn[d.shape]:void 0;if(!pt)throw new Error(`No such shape: ${d.shape}. Please check your syntax.`);if(d.link){let ue;"sandbox"===ct.config.securityLevel?ue="_top":d.linkTarget&&(ue=d.linkTarget||"_blank"),Xt=Ht.insert("svg:a").attr("xlink:href",d.link).attr("target",ue??null),kt=yield pt(Xt,d,ct)}else kt=yield pt(Ht,d,ct),Xt=kt;return d.tooltip&&kt.attr("title",d.tooltip),kn.set(d.id,Xt),d.haveCallback&&Xt.attr("class",Xt.attr("class")+" clickable"),Xt})).apply(this,arguments)}(0,G.K2)(Rn,"insertNode");var Xi=(0,G.K2)((Ht,d)=>{kn.set(d.id,Ht)},"setNodeElem"),rn=(0,G.K2)(()=>{kn.clear()},"clear"),Yn=(0,G.K2)(Ht=>{const d=kn.get(Ht.id);G.Rm.trace("Transforming node",Ht.diff,Ht,"translate("+(Ht.x-Ht.width/2-5)+", "+Ht.width/2+")");const Xt=Ht.diff||0;return d.attr("transform",Ht.clusterNode?"translate("+(Ht.x+Xt-Ht.width/2)+", "+(Ht.y-Ht.height/2-8)+")":"translate("+Ht.x+", "+Ht.y+")"),Xt},"positionNode")},87788:(ri,Er,P)=>{"use strict";P.r(Er),P.d(Er,{diagram:()=>Gt});var lt=P(89204),ie=P(1031),L=P(69664),D=P(79006),Mt=P(32303),ut=P(62233),w={version:ie.n.version+""},Gt={parser:{parse:(0,Mt.K2)(function(){var j=(0,lt.A)(function*(hr){const ze=yield(0,ut.qg)("info",hr);Mt.Rm.debug(ze)});return function(hr){return j.apply(this,arguments)}}(),"parse")},db:{getVersion:(0,Mt.K2)(()=>w.version,"getVersion")},renderer:{draw:(0,Mt.K2)((j,hr,ze)=>{Mt.Rm.debug("rendering info diagram\n"+j);const vr=(0,L.D)(hr);(0,D.a$)(vr,100,400,!0),vr.append("g").append("text").attr("x",100).attr("y",40).attr("class","version").attr("font-size",32).style("text-anchor","middle").text(`v${ze}`)},"draw")}}},90543:(ri,Er,P)=>{"use strict";P.r(Er),P.d(Er,{diagram:()=>gt});var lt=P(89204),ie=P(69664),L=P(97787),D=P(24715),Mt=P(87452),At=(P(32239),P(19753),P(59355),P(52052),P(79006)),Ge=P(32303),bt=P(79687),Gt=function(){var Y=(0,Ge.K2)(function(ke,Pt,Zt,pe){for(Zt=Zt||{},pe=ke.length;pe--;Zt[ke[pe]]=Pt);return Zt},"o"),Nt=[1,4],St=[1,13],Ut=[1,12],ye=[1,15],le=[1,16],Pe=[1,20],oe=[1,19],qe=[6,7,8],We=[1,26],Et=[1,24],Tt=[1,25],B=[6,7,11],N=[1,31],et=[6,7,11,24],yt=[1,6,13,16,17,20,23],it=[1,35],rt=[1,36],_t=[1,6,7,11,13,16,17,20,23],ht=[1,38],Ot={trace:(0,Ge.K2)(function(){},"trace"),yy:{},symbols_:{error:2,start:3,mindMap:4,spaceLines:5,SPACELINE:6,NL:7,KANBAN:8,document:9,stop:10,EOF:11,statement:12,SPACELIST:13,node:14,shapeData:15,ICON:16,CLASS:17,nodeWithId:18,nodeWithoutId:19,NODE_DSTART:20,NODE_DESCR:21,NODE_DEND:22,NODE_ID:23,SHAPE_DATA:24,$accept:0,$end:1},terminals_:{2:"error",6:"SPACELINE",7:"NL",8:"KANBAN",11:"EOF",13:"SPACELIST",16:"ICON",17:"CLASS",20:"NODE_DSTART",21:"NODE_DESCR",22:"NODE_DEND",23:"NODE_ID",24:"SHAPE_DATA"},productions_:[0,[3,1],[3,2],[5,1],[5,2],[5,2],[4,2],[4,3],[10,1],[10,1],[10,1],[10,2],[10,2],[9,3],[9,2],[12,3],[12,2],[12,2],[12,2],[12,1],[12,2],[12,1],[12,1],[12,1],[12,1],[14,1],[14,1],[19,3],[18,1],[18,4],[15,2],[15,1]],performAction:(0,Ge.K2)(function(Pt,Zt,pe,Re,Ze,de,yr){var mr=de.length-1;switch(Ze){case 6:case 7:return Re;case 8:Re.getLogger().trace("Stop NL ");break;case 9:Re.getLogger().trace("Stop EOF ");break;case 11:Re.getLogger().trace("Stop NL2 ");break;case 12:Re.getLogger().trace("Stop EOF2 ");break;case 15:Re.getLogger().info("Node: ",de[mr-1].id),Re.addNode(de[mr-2].length,de[mr-1].id,de[mr-1].descr,de[mr-1].type,de[mr]);break;case 16:Re.getLogger().info("Node: ",de[mr].id),Re.addNode(de[mr-1].length,de[mr].id,de[mr].descr,de[mr].type);break;case 17:Re.getLogger().trace("Icon: ",de[mr]),Re.decorateNode({icon:de[mr]});break;case 18:case 23:Re.decorateNode({class:de[mr]});break;case 19:Re.getLogger().trace("SPACELIST");break;case 20:Re.getLogger().trace("Node: ",de[mr-1].id),Re.addNode(0,de[mr-1].id,de[mr-1].descr,de[mr-1].type,de[mr]);break;case 21:Re.getLogger().trace("Node: ",de[mr].id),Re.addNode(0,de[mr].id,de[mr].descr,de[mr].type);break;case 22:Re.decorateNode({icon:de[mr]});break;case 27:Re.getLogger().trace("node found ..",de[mr-2]),this.$={id:de[mr-1],descr:de[mr-1],type:Re.getType(de[mr-2],de[mr])};break;case 28:this.$={id:de[mr],descr:de[mr],type:0};break;case 29:Re.getLogger().trace("node found ..",de[mr-3]),this.$={id:de[mr-3],descr:de[mr-1],type:Re.getType(de[mr-2],de[mr])};break;case 30:this.$=de[mr-1]+de[mr];break;case 31:this.$=de[mr]}},"anonymous"),table:[{3:1,4:2,5:3,6:[1,5],8:Nt},{1:[3]},{1:[2,1]},{4:6,6:[1,7],7:[1,8],8:Nt},{6:St,7:[1,10],9:9,12:11,13:Ut,14:14,16:ye,17:le,18:17,19:18,20:Pe,23:oe},Y(qe,[2,3]),{1:[2,2]},Y(qe,[2,4]),Y(qe,[2,5]),{1:[2,6],6:St,12:21,13:Ut,14:14,16:ye,17:le,18:17,19:18,20:Pe,23:oe},{6:St,9:22,12:11,13:Ut,14:14,16:ye,17:le,18:17,19:18,20:Pe,23:oe},{6:We,7:Et,10:23,11:Tt},Y(B,[2,24],{18:17,19:18,14:27,16:[1,28],17:[1,29],20:Pe,23:oe}),Y(B,[2,19]),Y(B,[2,21],{15:30,24:N}),Y(B,[2,22]),Y(B,[2,23]),Y(et,[2,25]),Y(et,[2,26]),Y(et,[2,28],{20:[1,32]}),{21:[1,33]},{6:We,7:Et,10:34,11:Tt},{1:[2,7],6:St,12:21,13:Ut,14:14,16:ye,17:le,18:17,19:18,20:Pe,23:oe},Y(yt,[2,14],{7:it,11:rt}),Y(_t,[2,8]),Y(_t,[2,9]),Y(_t,[2,10]),Y(B,[2,16],{15:37,24:N}),Y(B,[2,17]),Y(B,[2,18]),Y(B,[2,20],{24:ht}),Y(et,[2,31]),{21:[1,39]},{22:[1,40]},Y(yt,[2,13],{7:it,11:rt}),Y(_t,[2,11]),Y(_t,[2,12]),Y(B,[2,15],{24:ht}),Y(et,[2,30]),{22:[1,41]},Y(et,[2,27]),Y(et,[2,29])],defaultActions:{2:[2,1],6:[2,2]},parseError:(0,Ge.K2)(function(Pt,Zt){if(!Zt.recoverable){var pe=new Error(Pt);throw pe.hash=Zt,pe}this.trace(Pt)},"parseError"),parse:(0,Ge.K2)(function(Pt){var Zt=this,pe=[0],Re=[],Ze=[null],de=[],yr=this.table,mr="",Wt=0,we=0,sr=0,Ee=de.slice.call(arguments,1),Ae=Object.create(this.lexer),er={yy:{}};for(var Qe in this.yy)Object.prototype.hasOwnProperty.call(this.yy,Qe)&&(er.yy[Qe]=this.yy[Qe]);Ae.setInput(Pt,er.yy),er.yy.lexer=Ae,er.yy.parser=this,typeof Ae.yylloc>"u"&&(Ae.yylloc={});var Dr=Ae.yylloc;de.push(Dr);var _e=Ae.options&&Ae.options.ranges;function nr(){var C;return"number"!=typeof(C=Re.pop()||Ae.lex()||1)&&(C instanceof Array&&(C=(Re=C).pop()),C=Zt.symbols_[C]||C),C}this.parseError="function"==typeof er.yy.parseError?er.yy.parseError:Object.getPrototypeOf(this).parseError,(0,Ge.K2)(function Yr(C){pe.length=pe.length-2*C,Ze.length=Ze.length-C,de.length=de.length-C},"popStack"),(0,Ge.K2)(nr,"lex");for(var te,ne,be,ar,y,M,m,v,E={};;){if(this.defaultActions[be=pe[pe.length-1]]?ar=this.defaultActions[be]:((null===te||typeof te>"u")&&(te=nr()),ar=yr[be]&&yr[be][te]),typeof ar>"u"||!ar.length||!ar[0]){var b;for(M in v=[],yr[be])this.terminals_[M]&&M>2&&v.push("'"+this.terminals_[M]+"'");b=Ae.showPosition?"Parse error on line "+(Wt+1)+":\n"+Ae.showPosition()+"\nExpecting "+v.join(", ")+", got '"+(this.terminals_[te]||te)+"'":"Parse error on line "+(Wt+1)+": Unexpected "+(1==te?"end of input":"'"+(this.terminals_[te]||te)+"'"),this.parseError(b,{text:Ae.match,token:this.terminals_[te]||te,line:Ae.yylineno,loc:Dr,expected:v})}if(ar[0]instanceof Array&&ar.length>1)throw new Error("Parse Error: multiple actions possible at state: "+be+", token: "+te);switch(ar[0]){case 1:pe.push(te),Ze.push(Ae.yytext),de.push(Ae.yylloc),pe.push(ar[1]),te=null,ne?(te=ne,ne=null):(we=Ae.yyleng,mr=Ae.yytext,Wt=Ae.yylineno,Dr=Ae.yylloc,sr>0&&sr--);break;case 2:if(E.$=Ze[Ze.length-(m=this.productions_[ar[1]][1])],E._$={first_line:de[de.length-(m||1)].first_line,last_line:de[de.length-1].last_line,first_column:de[de.length-(m||1)].first_column,last_column:de[de.length-1].last_column},_e&&(E._$.range=[de[de.length-(m||1)].range[0],de[de.length-1].range[1]]),typeof(y=this.performAction.apply(E,[mr,we,Wt,er.yy,ar[1],Ze,de].concat(Ee)))<"u")return y;m&&(pe=pe.slice(0,-1*m*2),Ze=Ze.slice(0,-1*m),de=de.slice(0,-1*m)),pe.push(this.productions_[ar[1]][0]),Ze.push(E.$),de.push(E._$),pe.push(yr[pe[pe.length-2]][pe[pe.length-1]]);break;case 3:return!0}}return!0},"parse")};function ot(){this.yy={}}return Ot.lexer=function(){return{EOF:1,parseError:(0,Ge.K2)(function(Zt,pe){if(!this.yy.parser)throw new Error(Zt);this.yy.parser.parseError(Zt,pe)},"parseError"),setInput:(0,Ge.K2)(function(Pt,Zt){return this.yy=Zt||this.yy||{},this._input=Pt,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},"setInput"),input:(0,Ge.K2)(function(){var Pt=this._input[0];return this.yytext+=Pt,this.yyleng++,this.offset++,this.match+=Pt,this.matched+=Pt,Pt.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),Pt},"input"),unput:(0,Ge.K2)(function(Pt){var Zt=Pt.length,pe=Pt.split(/(?:\r\n?|\n)/g);this._input=Pt+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-Zt),this.offset-=Zt;var Re=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),pe.length-1&&(this.yylineno-=pe.length-1);var Ze=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:pe?(pe.length===Re.length?this.yylloc.first_column:0)+Re[Re.length-pe.length].length-pe[0].length:this.yylloc.first_column-Zt},this.options.ranges&&(this.yylloc.range=[Ze[0],Ze[0]+this.yyleng-Zt]),this.yyleng=this.yytext.length,this},"unput"),more:(0,Ge.K2)(function(){return this._more=!0,this},"more"),reject:(0,Ge.K2)(function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},"reject"),less:(0,Ge.K2)(function(Pt){this.unput(this.match.slice(Pt))},"less"),pastInput:(0,Ge.K2)(function(){var Pt=this.matched.substr(0,this.matched.length-this.match.length);return(Pt.length>20?"...":"")+Pt.substr(-20).replace(/\n/g,"")},"pastInput"),upcomingInput:(0,Ge.K2)(function(){var Pt=this.match;return Pt.length<20&&(Pt+=this._input.substr(0,20-Pt.length)),(Pt.substr(0,20)+(Pt.length>20?"...":"")).replace(/\n/g,"")},"upcomingInput"),showPosition:(0,Ge.K2)(function(){var Pt=this.pastInput(),Zt=new Array(Pt.length+1).join("-");return Pt+this.upcomingInput()+"\n"+Zt+"^"},"showPosition"),test_match:(0,Ge.K2)(function(Pt,Zt){var pe,Re,Ze;if(this.options.backtrack_lexer&&(Ze={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(Ze.yylloc.range=this.yylloc.range.slice(0))),(Re=Pt[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=Re.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:Re?Re[Re.length-1].length-Re[Re.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+Pt[0].length},this.yytext+=Pt[0],this.match+=Pt[0],this.matches=Pt,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(Pt[0].length),this.matched+=Pt[0],pe=this.performAction.call(this,this.yy,this,Zt,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),pe)return pe;if(this._backtrack){for(var de in Ze)this[de]=Ze[de];return!1}return!1},"test_match"),next:(0,Ge.K2)(function(){if(this.done)return this.EOF;var Pt,Zt,pe,Re;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var Ze=this._currentRules(),de=0;de<Ze.length;de++)if((pe=this._input.match(this.rules[Ze[de]]))&&(!Zt||pe[0].length>Zt[0].length)){if(Zt=pe,Re=de,this.options.backtrack_lexer){if(!1!==(Pt=this.test_match(pe,Ze[de])))return Pt;if(this._backtrack){Zt=!1;continue}return!1}if(!this.options.flex)break}return Zt?!1!==(Pt=this.test_match(Zt,Ze[Re]))&&Pt:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},"next"),lex:(0,Ge.K2)(function(){return this.next()||this.lex()},"lex"),begin:(0,Ge.K2)(function(Zt){this.conditionStack.push(Zt)},"begin"),popState:(0,Ge.K2)(function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},"popState"),_currentRules:(0,Ge.K2)(function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},"_currentRules"),topState:(0,Ge.K2)(function(Zt){return(Zt=this.conditionStack.length-1-Math.abs(Zt||0))>=0?this.conditionStack[Zt]:"INITIAL"},"topState"),pushState:(0,Ge.K2)(function(Zt){this.begin(Zt)},"pushState"),stateStackSize:(0,Ge.K2)(function(){return this.conditionStack.length},"stateStackSize"),options:{"case-insensitive":!0},performAction:(0,Ge.K2)(function(Zt,pe,Re,Ze){switch(Re){case 0:return this.pushState("shapeData"),pe.yytext="",24;case 1:return this.pushState("shapeDataStr"),24;case 2:return this.popState(),24;case 3:return pe.yytext=pe.yytext.replace(/\n\s*/g,"<br/>"),24;case 4:return 24;case 5:case 10:case 29:case 32:this.popState();break;case 6:return Zt.getLogger().trace("Found comment",pe.yytext),6;case 7:return 8;case 8:this.begin("CLASS");break;case 9:return this.popState(),17;case 11:Zt.getLogger().trace("Begin icon"),this.begin("ICON");break;case 12:return Zt.getLogger().trace("SPACELINE"),6;case 13:return 7;case 14:return 16;case 15:Zt.getLogger().trace("end icon"),this.popState();break;case 16:return Zt.getLogger().trace("Exploding node"),this.begin("NODE"),20;case 17:return Zt.getLogger().trace("Cloud"),this.begin("NODE"),20;case 18:return Zt.getLogger().trace("Explosion Bang"),this.begin("NODE"),20;case 19:return Zt.getLogger().trace("Cloud Bang"),this.begin("NODE"),20;case 20:case 21:case 22:case 23:return this.begin("NODE"),20;case 24:return 13;case 25:return 23;case 26:return 11;case 27:this.begin("NSTR2");break;case 28:return"NODE_DESCR";case 30:Zt.getLogger().trace("Starting NSTR"),this.begin("NSTR");break;case 31:return Zt.getLogger().trace("description:",pe.yytext),"NODE_DESCR";case 33:return this.popState(),Zt.getLogger().trace("node end ))"),"NODE_DEND";case 34:return this.popState(),Zt.getLogger().trace("node end )"),"NODE_DEND";case 35:return this.popState(),Zt.getLogger().trace("node end ...",pe.yytext),"NODE_DEND";case 36:case 39:case 40:return this.popState(),Zt.getLogger().trace("node end (("),"NODE_DEND";case 37:case 38:return this.popState(),Zt.getLogger().trace("node end (-"),"NODE_DEND";case 41:case 42:return Zt.getLogger().trace("Long description:",pe.yytext),21}},"anonymous"),rules:[/^(?:@\{)/i,/^(?:["])/i,/^(?:["])/i,/^(?:[^\"]+)/i,/^(?:[^}^"]+)/i,/^(?:\})/i,/^(?:\s*%%.*)/i,/^(?:kanban\b)/i,/^(?::::)/i,/^(?:.+)/i,/^(?:\n)/i,/^(?:::icon\()/i,/^(?:[\s]+[\n])/i,/^(?:[\n]+)/i,/^(?:[^\)]+)/i,/^(?:\))/i,/^(?:-\))/i,/^(?:\(-)/i,/^(?:\)\))/i,/^(?:\))/i,/^(?:\(\()/i,/^(?:\{\{)/i,/^(?:\()/i,/^(?:\[)/i,/^(?:[\s]+)/i,/^(?:[^\(\[\n\)\{\}@]+)/i,/^(?:$)/i,/^(?:["][`])/i,/^(?:[^`"]+)/i,/^(?:[`]["])/i,/^(?:["])/i,/^(?:[^"]+)/i,/^(?:["])/i,/^(?:[\)]\))/i,/^(?:[\)])/i,/^(?:[\]])/i,/^(?:\}\})/i,/^(?:\(-)/i,/^(?:-\))/i,/^(?:\(\()/i,/^(?:\()/i,/^(?:[^\)\]\(\}]+)/i,/^(?:.+(?!\(\())/i],conditions:{shapeDataEndBracket:{rules:[],inclusive:!1},shapeDataStr:{rules:[2,3],inclusive:!1},shapeData:{rules:[1,4,5],inclusive:!1},CLASS:{rules:[9,10],inclusive:!1},ICON:{rules:[14,15],inclusive:!1},NSTR2:{rules:[28,29],inclusive:!1},NSTR:{rules:[31,32],inclusive:!1},NODE:{rules:[27,30,33,34,35,36,37,38,39,40,41,42],inclusive:!1},INITIAL:{rules:[0,6,7,8,11,12,13,16,17,18,19,20,21,22,23,24,25,26],inclusive:!0}}}}(),(0,Ge.K2)(ot,"Parser"),ot.prototype=Ot,Ot.Parser=ot,new ot}();Gt.parser=Gt;var j=Gt,hr=[],ze=[],vr=0,Wr={},Br=(0,Ge.K2)(()=>{hr=[],ze=[],vr=0,Wr={}},"clear"),Gr=(0,Ge.K2)(Y=>{if(0===hr.length)return null;const Nt=hr[0].level;let St=null;for(let Ut=hr.length-1;Ut>=0;Ut--)if(hr[Ut].level===Nt&&!St&&(St=hr[Ut]),hr[Ut].level<Nt)throw new Error('Items without section detected, found section ("'+hr[Ut].label+'")');return Y===St?.level?null:St},"getSection"),aa=(0,Ge.K2)(function(){return ze},"getSections"),zr=(0,Ge.K2)(function(){const Nt=[],St=aa(),Ut=(0,At.D7)();for(const ye of St){const le={id:ye.id,label:(0,At.jZ)(ye.label??"",Ut),isGroup:!0,ticket:ye.ticket,shape:"kanbanSection",level:ye.level,look:Ut.look};Nt.push(le);const Pe=hr.filter(oe=>oe.parentId===ye.id);for(const oe of Pe){const qe={id:oe.id,parentId:ye.id,label:(0,At.jZ)(oe.label??"",Ut),isGroup:!1,ticket:oe?.ticket,priority:oe?.priority,assigned:oe?.assigned,icon:oe?.icon,shape:"kanbanItem",level:oe.level,rx:5,ry:5,cssStyles:["text-align: left"]};Nt.push(qe)}}return{nodes:Nt,edges:[],other:{},config:(0,At.D7)()}},"getData"),Or=(0,Ge.K2)((Y,Nt,St,Ut,ye)=>{const le=(0,At.D7)();let Pe=le.mindmap?.padding??At.UI.mindmap.padding;switch(Ut){case Be.ROUNDED_RECT:case Be.RECT:case Be.HEXAGON:Pe*=2}const oe={id:(0,At.jZ)(Nt,le)||"kbn"+vr++,level:Y,label:(0,At.jZ)(St,le),width:le.mindmap?.maxNodeWidth??At.UI.mindmap.maxNodeWidth,padding:Pe,isGroup:!1};if(void 0!==ye){let We;We=ye.includes("\n")?ye+"\n":"{\n"+ye+"\n}";const Et=(0,D.H)(We,{schema:D.r});if(Et.shape&&(Et.shape!==Et.shape.toLowerCase()||Et.shape.includes("_")))throw new Error(`No such shape: ${Et.shape}. Shape names should be lowercase.`);Et?.shape&&"kanbanItem"===Et.shape&&(oe.shape=Et?.shape),Et?.label&&(oe.label=Et?.label),Et?.icon&&(oe.icon=Et?.icon.toString()),Et?.assigned&&(oe.assigned=Et?.assigned.toString()),Et?.ticket&&(oe.ticket=Et?.ticket.toString()),Et?.priority&&(oe.priority=Et?.priority)}const qe=Gr(Y);qe?oe.parentId=qe.id||"kbn"+vr++:ze.push(oe),hr.push(oe)},"addNode"),Be={DEFAULT:0,NO_BORDER:0,ROUNDED_RECT:1,RECT:2,CIRCLE:3,CLOUD:4,BANG:5,HEXAGON:6},re={clear:Br,addNode:Or,getSections:aa,getData:zr,nodeType:Be,getType:(0,Ge.K2)((Y,Nt)=>{switch(Ge.Rm.debug("In get type",Y,Nt),Y){case"[":return Be.RECT;case"(":return")"===Nt?Be.ROUNDED_RECT:Be.CLOUD;case"((":return Be.CIRCLE;case")":return Be.CLOUD;case"))":return Be.BANG;case"{{":return Be.HEXAGON;default:return Be.DEFAULT}},"getType"),setElementForId:(0,Ge.K2)((Y,Nt)=>{Wr[Y]=Nt},"setElementForId"),decorateNode:(0,Ge.K2)(Y=>{if(!Y)return;const Nt=(0,At.D7)(),St=hr[hr.length-1];Y.icon&&(St.icon=(0,At.jZ)(Y.icon,Nt)),Y.class&&(St.cssClasses=(0,At.jZ)(Y.class,Nt))},"decorateNode"),type2Str:(0,Ge.K2)(Y=>{switch(Y){case Be.DEFAULT:return"no-border";case Be.RECT:return"rect";case Be.ROUNDED_RECT:return"rounded-rect";case Be.CIRCLE:return"circle";case Be.CLOUD:return"cloud";case Be.BANG:return"bang";case Be.HEXAGON:return"hexgon";default:return"no-border"}},"type2Str"),getLogger:(0,Ge.K2)(()=>Ge.Rm,"getLogger"),getElementById:(0,Ge.K2)(Y=>Wr[Y],"getElementById")},ee={draw:(0,Ge.K2)(function(){var Y=(0,lt.A)(function*(Nt,St,Ut,ye){Ge.Rm.debug("Rendering kanban diagram\n"+Nt);const Pe=ye.db.getData(),oe=(0,At.D7)();oe.htmlLabels=!1;const qe=(0,ie.D)(St),We=qe.append("g");We.attr("class","sections");const Et=qe.append("g");Et.attr("class","items");const Tt=Pe.nodes.filter(rt=>rt.isGroup);let B=0;const et=[];let yt=25;for(const rt of Tt){const _t=oe?.kanban?.sectionWidth||200;B+=1,rt.x=_t*B+10*(B-1)/2,rt.width=_t,rt.y=0,rt.height=3*_t,rt.rx=5,rt.ry=5,rt.cssClasses=rt.cssClasses+" section-"+B;const ht=yield(0,Mt.U)(We,rt);yt=Math.max(yt,ht?.labelBBox?.height),et.push(ht)}let it=0;for(const rt of Tt){const _t=et[it];it+=1;const ht=oe?.kanban?.sectionWidth||200,Ot=3*-ht/2+yt;let H=Ot;const ot=Pe.nodes.filter(Zt=>Zt.parentId===rt.id);for(const Zt of ot){if(Zt.isGroup)throw new Error("Groups within groups are not allowed in Kanban diagrams");Zt.x=rt.x,Zt.width=ht-15;const Re=(yield(0,Mt.on)(Et,Zt,{config:oe})).node().getBBox();Zt.y=H+Re.height/2,yield(0,Mt.U_)(Zt),H=Zt.y+Re.height/2+5}const ke=_t.cluster.select("rect"),Pt=Math.max(H-Ot+30,50)+(yt-25);ke.attr("height",Pt)}(0,At.ot)(void 0,qe,oe.mindmap?.padding??At.UI.kanban.padding,oe.mindmap?.useMaxWidth??At.UI.kanban.useMaxWidth)});return function(Nt,St,Ut,ye){return Y.apply(this,arguments)}}(),"draw")},Rt=(0,Ge.K2)(Y=>{let Nt="";for(let Ut=0;Ut<Y.THEME_COLOR_LIMIT;Ut++)Y["lineColor"+Ut]=Y["lineColor"+Ut]||Y["cScaleInv"+Ut],Y["lineColor"+Ut]=(0,bt.HD)(Y["lineColor"+Ut])?(0,bt.a)(Y["lineColor"+Ut],20):(0,bt.e$)(Y["lineColor"+Ut],20);const St=(0,Ge.K2)((Ut,ye)=>Y.darkMode?(0,bt.e$)(Ut,ye):(0,bt.a)(Ut,ye),"adjuster");for(let Ut=0;Ut<Y.THEME_COLOR_LIMIT;Ut++){const ye=""+(17-3*Ut);Nt+=`\n    .section-${Ut-1} rect, .section-${Ut-1} path, .section-${Ut-1} circle, .section-${Ut-1} polygon, .section-${Ut-1} path  {\n      fill: ${St(Y["cScale"+Ut],10)};\n      stroke: ${St(Y["cScale"+Ut],10)};\n\n    }\n    .section-${Ut-1} text {\n     fill: ${Y["cScaleLabel"+Ut]};\n    }\n    .node-icon-${Ut-1} {\n      font-size: 40px;\n      color: ${Y["cScaleLabel"+Ut]};\n    }\n    .section-edge-${Ut-1}{\n      stroke: ${Y["cScale"+Ut]};\n    }\n    .edge-depth-${Ut-1}{\n      stroke-width: ${ye};\n    }\n    .section-${Ut-1} line {\n      stroke: ${Y["cScaleInv"+Ut]} ;\n      stroke-width: 3;\n    }\n\n    .disabled, .disabled circle, .disabled text {\n      fill: lightgray;\n    }\n    .disabled text {\n      fill: #efefef;\n    }\n\n  .node rect,\n  .node circle,\n  .node ellipse,\n  .node polygon,\n  .node path {\n    fill: ${Y.background};\n    stroke: ${Y.nodeBorder};\n    stroke-width: 1px;\n  }\n\n  .kanban-ticket-link {\n    fill: ${Y.background};\n    stroke: ${Y.nodeBorder};\n    text-decoration: underline;\n  }\n    `}return Nt},"genSections"),gt={db:re,renderer:ee,parser:j,styles:(0,Ge.K2)(Y=>`\n  .edge {\n    stroke-width: 3;\n  }\n  ${Rt(Y)}\n  .section-root rect, .section-root path, .section-root circle, .section-root polygon  {\n    fill: ${Y.git0};\n  }\n  .section-root text {\n    fill: ${Y.gitBranchLabel0};\n  }\n  .icon-container {\n    height:100%;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n  }\n  .edge {\n    fill: none;\n  }\n  .cluster-label, .label {\n    color: ${Y.textColor};\n    fill: ${Y.textColor};\n    }\n  .kanban-label {\n    dy: 1em;\n    alignment-baseline: middle;\n    text-anchor: middle;\n    dominant-baseline: middle;\n    text-align: center;\n  }\n    ${(0,L.o)()}\n`,"getStyles")}},91634:(ri,Er,P)=>{"use strict";P.r(Er),P.d(Er,{diagram:()=>dt});var lt=P(89204),ie=P(69664),L=P(80525),D=P(52052),Mt=P(79006),ut=P(32303),G=P(62233),w=P(40622),Lt=Mt.UI.pie,At={sections:new Map,showData:!1,config:Lt},Ge=At.sections,bt=At.showData,Gt=structuredClone(Lt),Gr={getConfig:(0,ut.K2)(()=>structuredClone(Gt),"getConfig"),clear:(0,ut.K2)(()=>{Ge=new Map,bt=At.showData,(0,Mt.IU)()},"clear"),setDiagramTitle:Mt.ke,getDiagramTitle:Mt.ab,setAccTitle:Mt.SV,getAccTitle:Mt.iN,setAccDescription:Mt.EI,getAccDescription:Mt.m7,addSection:(0,ut.K2)(({label:Bt,value:Se})=>{if(Se<0)throw new Error(`"${Bt}" has invalid value: ${Se}. Negative values are not allowed in pie charts. All slice values must be >= 0.`);Ge.has(Bt)||(Ge.set(Bt,Se),ut.Rm.debug(`added new section: ${Bt}, with value: ${Se}`))},"addSection"),getSections:(0,ut.K2)(()=>Ge,"getSections"),setShowData:(0,ut.K2)(Bt=>{bt=Bt},"setShowData"),getShowData:(0,ut.K2)(()=>bt,"getShowData")},aa=(0,ut.K2)((Bt,Se)=>{(0,L.S)(Bt,Se),Se.setShowData(Bt.showData),Bt.sections.map(Se.addSection)},"populateDb"),zr={parse:(0,ut.K2)(function(){var Bt=(0,lt.A)(function*(Se){const X=yield(0,G.qg)("pie",Se);ut.Rm.debug(X),aa(X,Gr)});return function(Se){return Bt.apply(this,arguments)}}(),"parse")},Be=(0,ut.K2)(Bt=>`\n  .pieCircle{\n    stroke: ${Bt.pieStrokeColor};\n    stroke-width : ${Bt.pieStrokeWidth};\n    opacity : ${Bt.pieOpacity};\n  }\n  .pieOuterCircle{\n    stroke: ${Bt.pieOuterStrokeColor};\n    stroke-width: ${Bt.pieOuterStrokeWidth};\n    fill: none;\n  }\n  .pieTitleText {\n    text-anchor: middle;\n    font-size: ${Bt.pieTitleTextSize};\n    fill: ${Bt.pieTitleTextColor};\n    font-family: ${Bt.fontFamily};\n  }\n  .slice {\n    font-family: ${Bt.fontFamily};\n    fill: ${Bt.pieSectionTextColor};\n    font-size:${Bt.pieSectionTextSize};\n    // fill: white;\n  }\n  .legend text {\n    fill: ${Bt.pieLegendTextColor};\n    font-family: ${Bt.fontFamily};\n    font-size: ${Bt.pieLegendTextSize};\n  }\n`,"getStyles"),Ir=(0,ut.K2)(Bt=>{const Se=[...Bt.values()].reduce((S,ee)=>S+ee,0),X=[...Bt.entries()].map(([S,ee])=>({label:S,value:ee})).filter(S=>S.value/Se*100>=1).sort((S,ee)=>ee.value-S.value);return(0,w.rLf)().value(S=>S.value)(X)},"createPieArcs"),dt={parser:zr,db:Gr,renderer:{draw:(0,ut.K2)((Bt,Se,X,re)=>{ut.Rm.debug("rendering pie chart\n"+Bt);const S=re.db,ee=(0,Mt.D7)(),Rt=(0,D.$t)(S.getConfig(),ee.pie),St=(0,ie.D)(Se),Ut=St.append("g");Ut.attr("transform","translate(225,225)");const{themeVariables:ye}=ee;let[le]=(0,D.I5)(ye.pieOuterStrokeWidth);le??=2;const Pe=Rt.textPosition,oe=Math.min(450,450)/2-40,qe=(0,w.JLW)().innerRadius(0).outerRadius(oe),We=(0,w.JLW)().innerRadius(oe*Pe).outerRadius(oe*Pe);Ut.append("circle").attr("cx",0).attr("cy",0).attr("r",oe+le/2).attr("class","pieOuterCircle");const Et=S.getSections(),Tt=Ir(Et),B=[ye.pie1,ye.pie2,ye.pie3,ye.pie4,ye.pie5,ye.pie6,ye.pie7,ye.pie8,ye.pie9,ye.pie10,ye.pie11,ye.pie12];let N=0;Et.forEach(Ot=>{N+=Ot});const et=Tt.filter(Ot=>"0"!==(Ot.data.value/N*100).toFixed(0)),yt=(0,w.UMr)(B);Ut.selectAll("mySlices").data(et).enter().append("path").attr("d",qe).attr("fill",Ot=>yt(Ot.data.label)).attr("class","pieCircle"),Ut.selectAll("mySlices").data(et).enter().append("text").text(Ot=>(Ot.data.value/N*100).toFixed(0)+"%").attr("transform",Ot=>"translate("+We.centroid(Ot)+")").style("text-anchor","middle").attr("class","slice"),Ut.append("text").text(S.getDiagramTitle()).attr("x",0).attr("y",-200).attr("class","pieTitleText");const it=[...Et.entries()].map(([Ot,H])=>({label:Ot,value:H})),rt=Ut.selectAll(".legend").data(it).enter().append("g").attr("class","legend").attr("transform",(Ot,H)=>"translate(216,"+(22*H-22*it.length/2)+")");rt.append("rect").attr("width",18).attr("height",18).style("fill",Ot=>yt(Ot.label)).style("stroke",Ot=>yt(Ot.label)),rt.append("text").attr("x",22).attr("y",14).text(Ot=>S.getShowData()?`${Ot.label} [${Ot.value}]`:Ot.label);const ht=512+Math.max(...rt.selectAll("text").nodes().map(Ot=>Ot?.getBoundingClientRect().width??0));St.attr("viewBox",`0 0 ${ht} 450`),(0,Mt.a$)(St,450,ht,Rt.useMaxWidth)},"draw")},styles:Be}},94221:(ri,Er)=>{"use strict";function lt(G){return"string"==typeof G||G instanceof String}function Mt(G){return Array.isArray(G)}Object.defineProperty(Er,"__esModule",{value:!0}),Er.stringArray=Er.array=Er.func=Er.error=Er.number=Er.string=Er.boolean=void 0,Er.boolean=function P(G){return!0===G||!1===G},Er.string=lt,Er.number=function ie(G){return"number"==typeof G||G instanceof Number},Er.error=function L(G){return G instanceof Error},Er.func=function D(G){return"function"==typeof G},Er.array=Mt,Er.stringArray=function ut(G){return Mt(G)&&G.every(w=>lt(w))}},96434:(ri,Er,P)=>{"use strict";P.r(Er),P.d(Er,{diagram:()=>ar});var Ge,lt=P(89204),ie=P(45027),L=P(62045),D=P(24715),Mt=P(67040),ut=P(52052),G=P(79006),w=P(32303),Lt=P(40622),At=P(73986),bt=function(){var g=(0,w.K2)(function(Ia,ba,sa,Sa){for(sa=sa||{},Sa=Ia.length;Sa--;sa[Ia[Sa]]=ba);return sa},"o"),y=[1,2],E=[1,3],M=[1,4],m=[2,4],A=[1,9],v=[1,11],b=[1,13],C=[1,14],R=[1,16],Q=[1,17],mt=[1,18],zt=[1,24],jt=[1,25],Vt=[1,26],Kt=[1,27],xe=[1,28],je=[1,29],Ke=[1,30],fr=[1,31],lr=[1,32],br=[1,33],$e=[1,34],He=[1,35],wr=[1,36],kr=[1,37],Kr=[1,38],_r=[1,39],Jr=[1,41],Lr=[1,42],ha=[1,43],ia=[1,44],jr=[1,45],Qr=[1,46],or=[1,4,5,13,14,16,18,21,23,29,30,31,33,35,36,37,38,39,41,43,44,46,47,48,49,50,52,53,55,60,61,62,63,71],ur=[2,71],W=[4,5,16,50,52,53],$t=[4,5,13,14,16,18,21,23,29,30,31,33,35,36,37,38,39,41,43,44,46,50,52,53,55,60,61,62,63,71],Ye=[4,5,13,14,16,18,21,23,29,30,31,33,35,36,37,38,39,41,43,44,46,49,50,52,53,55,60,61,62,63,71],Fe=[4,5,13,14,16,18,21,23,29,30,31,33,35,36,37,38,39,41,43,44,46,48,50,52,53,55,60,61,62,63,71],Tr=[4,5,13,14,16,18,21,23,29,30,31,33,35,36,37,38,39,41,43,44,46,47,50,52,53,55,60,61,62,63,71],pr=[69,70,71],da=[1,127],Pa={trace:(0,w.K2)(function(){},"trace"),yy:{},symbols_:{error:2,start:3,SPACE:4,NEWLINE:5,SD:6,document:7,line:8,statement:9,box_section:10,box_line:11,participant_statement:12,create:13,box:14,restOfLine:15,end:16,signal:17,autonumber:18,NUM:19,off:20,activate:21,actor:22,deactivate:23,note_statement:24,links_statement:25,link_statement:26,properties_statement:27,details_statement:28,title:29,legacy_title:30,acc_title:31,acc_title_value:32,acc_descr:33,acc_descr_value:34,acc_descr_multiline_value:35,loop:36,rect:37,opt:38,alt:39,else_sections:40,par:41,par_sections:42,par_over:43,critical:44,option_sections:45,break:46,option:47,and:48,else:49,participant:50,AS:51,participant_actor:52,destroy:53,actor_with_config:54,note:55,placement:56,text2:57,over:58,actor_pair:59,links:60,link:61,properties:62,details:63,spaceList:64,",":65,left_of:66,right_of:67,signaltype:68,"+":69,"-":70,ACTOR:71,config_object:72,CONFIG_START:73,CONFIG_CONTENT:74,CONFIG_END:75,SOLID_OPEN_ARROW:76,DOTTED_OPEN_ARROW:77,SOLID_ARROW:78,BIDIRECTIONAL_SOLID_ARROW:79,DOTTED_ARROW:80,BIDIRECTIONAL_DOTTED_ARROW:81,SOLID_CROSS:82,DOTTED_CROSS:83,SOLID_POINT:84,DOTTED_POINT:85,TXT:86,$accept:0,$end:1},terminals_:{2:"error",4:"SPACE",5:"NEWLINE",6:"SD",13:"create",14:"box",15:"restOfLine",16:"end",18:"autonumber",19:"NUM",20:"off",21:"activate",23:"deactivate",29:"title",30:"legacy_title",31:"acc_title",32:"acc_title_value",33:"acc_descr",34:"acc_descr_value",35:"acc_descr_multiline_value",36:"loop",37:"rect",38:"opt",39:"alt",41:"par",43:"par_over",44:"critical",46:"break",47:"option",48:"and",49:"else",50:"participant",51:"AS",52:"participant_actor",53:"destroy",55:"note",58:"over",60:"links",61:"link",62:"properties",63:"details",65:",",66:"left_of",67:"right_of",69:"+",70:"-",71:"ACTOR",73:"CONFIG_START",74:"CONFIG_CONTENT",75:"CONFIG_END",76:"SOLID_OPEN_ARROW",77:"DOTTED_OPEN_ARROW",78:"SOLID_ARROW",79:"BIDIRECTIONAL_SOLID_ARROW",80:"DOTTED_ARROW",81:"BIDIRECTIONAL_DOTTED_ARROW",82:"SOLID_CROSS",83:"DOTTED_CROSS",84:"SOLID_POINT",85:"DOTTED_POINT",86:"TXT"},productions_:[0,[3,2],[3,2],[3,2],[7,0],[7,2],[8,2],[8,1],[8,1],[10,0],[10,2],[11,2],[11,1],[11,1],[9,1],[9,2],[9,4],[9,2],[9,4],[9,3],[9,3],[9,2],[9,3],[9,3],[9,2],[9,2],[9,2],[9,2],[9,2],[9,1],[9,1],[9,2],[9,2],[9,1],[9,4],[9,4],[9,4],[9,4],[9,4],[9,4],[9,4],[9,4],[45,1],[45,4],[42,1],[42,4],[40,1],[40,4],[12,5],[12,3],[12,5],[12,3],[12,3],[12,3],[24,4],[24,4],[25,3],[26,3],[27,3],[28,3],[64,2],[64,1],[59,3],[59,1],[56,1],[56,1],[17,5],[17,5],[17,4],[54,2],[72,3],[22,1],[68,1],[68,1],[68,1],[68,1],[68,1],[68,1],[68,1],[68,1],[68,1],[68,1],[57,1]],performAction:(0,w.K2)(function(ba,sa,Sa,ea,Va,gr,Ua){var ir=gr.length-1;switch(Va){case 3:return ea.apply(gr[ir]),gr[ir];case 4:case 9:case 8:case 13:this.$=[];break;case 5:case 10:gr[ir-1].push(gr[ir]),this.$=gr[ir-1];break;case 6:case 7:case 11:case 12:case 63:this.$=gr[ir];break;case 15:gr[ir].type="createParticipant",this.$=gr[ir];break;case 16:gr[ir-1].unshift({type:"boxStart",boxData:ea.parseBoxData(gr[ir-2])}),gr[ir-1].push({type:"boxEnd",boxText:gr[ir-2]}),this.$=gr[ir-1];break;case 18:this.$={type:"sequenceIndex",sequenceIndex:Number(gr[ir-2]),sequenceIndexStep:Number(gr[ir-1]),sequenceVisible:!0,signalType:ea.LINETYPE.AUTONUMBER};break;case 19:this.$={type:"sequenceIndex",sequenceIndex:Number(gr[ir-1]),sequenceIndexStep:1,sequenceVisible:!0,signalType:ea.LINETYPE.AUTONUMBER};break;case 20:this.$={type:"sequenceIndex",sequenceVisible:!1,signalType:ea.LINETYPE.AUTONUMBER};break;case 21:this.$={type:"sequenceIndex",sequenceVisible:!0,signalType:ea.LINETYPE.AUTONUMBER};break;case 22:this.$={type:"activeStart",signalType:ea.LINETYPE.ACTIVE_START,actor:gr[ir-1].actor};break;case 23:this.$={type:"activeEnd",signalType:ea.LINETYPE.ACTIVE_END,actor:gr[ir-1].actor};break;case 29:ea.setDiagramTitle(gr[ir].substring(6)),this.$=gr[ir].substring(6);break;case 30:ea.setDiagramTitle(gr[ir].substring(7)),this.$=gr[ir].substring(7);break;case 31:this.$=gr[ir].trim(),ea.setAccTitle(this.$);break;case 32:case 33:this.$=gr[ir].trim(),ea.setAccDescription(this.$);break;case 34:gr[ir-1].unshift({type:"loopStart",loopText:ea.parseMessage(gr[ir-2]),signalType:ea.LINETYPE.LOOP_START}),gr[ir-1].push({type:"loopEnd",loopText:gr[ir-2],signalType:ea.LINETYPE.LOOP_END}),this.$=gr[ir-1];break;case 35:gr[ir-1].unshift({type:"rectStart",color:ea.parseMessage(gr[ir-2]),signalType:ea.LINETYPE.RECT_START}),gr[ir-1].push({type:"rectEnd",color:ea.parseMessage(gr[ir-2]),signalType:ea.LINETYPE.RECT_END}),this.$=gr[ir-1];break;case 36:gr[ir-1].unshift({type:"optStart",optText:ea.parseMessage(gr[ir-2]),signalType:ea.LINETYPE.OPT_START}),gr[ir-1].push({type:"optEnd",optText:ea.parseMessage(gr[ir-2]),signalType:ea.LINETYPE.OPT_END}),this.$=gr[ir-1];break;case 37:gr[ir-1].unshift({type:"altStart",altText:ea.parseMessage(gr[ir-2]),signalType:ea.LINETYPE.ALT_START}),gr[ir-1].push({type:"altEnd",signalType:ea.LINETYPE.ALT_END}),this.$=gr[ir-1];break;case 38:gr[ir-1].unshift({type:"parStart",parText:ea.parseMessage(gr[ir-2]),signalType:ea.LINETYPE.PAR_START}),gr[ir-1].push({type:"parEnd",signalType:ea.LINETYPE.PAR_END}),this.$=gr[ir-1];break;case 39:gr[ir-1].unshift({type:"parStart",parText:ea.parseMessage(gr[ir-2]),signalType:ea.LINETYPE.PAR_OVER_START}),gr[ir-1].push({type:"parEnd",signalType:ea.LINETYPE.PAR_END}),this.$=gr[ir-1];break;case 40:gr[ir-1].unshift({type:"criticalStart",criticalText:ea.parseMessage(gr[ir-2]),signalType:ea.LINETYPE.CRITICAL_START}),gr[ir-1].push({type:"criticalEnd",signalType:ea.LINETYPE.CRITICAL_END}),this.$=gr[ir-1];break;case 41:gr[ir-1].unshift({type:"breakStart",breakText:ea.parseMessage(gr[ir-2]),signalType:ea.LINETYPE.BREAK_START}),gr[ir-1].push({type:"breakEnd",optText:ea.parseMessage(gr[ir-2]),signalType:ea.LINETYPE.BREAK_END}),this.$=gr[ir-1];break;case 43:this.$=gr[ir-3].concat([{type:"option",optionText:ea.parseMessage(gr[ir-1]),signalType:ea.LINETYPE.CRITICAL_OPTION},gr[ir]]);break;case 45:this.$=gr[ir-3].concat([{type:"and",parText:ea.parseMessage(gr[ir-1]),signalType:ea.LINETYPE.PAR_AND},gr[ir]]);break;case 47:this.$=gr[ir-3].concat([{type:"else",altText:ea.parseMessage(gr[ir-1]),signalType:ea.LINETYPE.ALT_ELSE},gr[ir]]);break;case 48:gr[ir-3].draw="participant",gr[ir-3].type="addParticipant",gr[ir-3].description=ea.parseMessage(gr[ir-1]),this.$=gr[ir-3];break;case 49:case 53:gr[ir-1].draw="participant",gr[ir-1].type="addParticipant",this.$=gr[ir-1];break;case 50:gr[ir-3].draw="actor",gr[ir-3].type="addParticipant",gr[ir-3].description=ea.parseMessage(gr[ir-1]),this.$=gr[ir-3];break;case 51:gr[ir-1].draw="actor",gr[ir-1].type="addParticipant",this.$=gr[ir-1];break;case 52:gr[ir-1].type="destroyParticipant",this.$=gr[ir-1];break;case 54:this.$=[gr[ir-1],{type:"addNote",placement:gr[ir-2],actor:gr[ir-1].actor,text:gr[ir]}];break;case 55:gr[ir-2]=[].concat(gr[ir-1],gr[ir-1]).slice(0,2),gr[ir-2][0]=gr[ir-2][0].actor,gr[ir-2][1]=gr[ir-2][1].actor,this.$=[gr[ir-1],{type:"addNote",placement:ea.PLACEMENT.OVER,actor:gr[ir-2].slice(0,2),text:gr[ir]}];break;case 56:this.$=[gr[ir-1],{type:"addLinks",actor:gr[ir-1].actor,text:gr[ir]}];break;case 57:this.$=[gr[ir-1],{type:"addALink",actor:gr[ir-1].actor,text:gr[ir]}];break;case 58:this.$=[gr[ir-1],{type:"addProperties",actor:gr[ir-1].actor,text:gr[ir]}];break;case 59:this.$=[gr[ir-1],{type:"addDetails",actor:gr[ir-1].actor,text:gr[ir]}];break;case 62:this.$=[gr[ir-2],gr[ir]];break;case 64:this.$=ea.PLACEMENT.LEFTOF;break;case 65:this.$=ea.PLACEMENT.RIGHTOF;break;case 66:this.$=[gr[ir-4],gr[ir-1],{type:"addMessage",from:gr[ir-4].actor,to:gr[ir-1].actor,signalType:gr[ir-3],msg:gr[ir],activate:!0},{type:"activeStart",signalType:ea.LINETYPE.ACTIVE_START,actor:gr[ir-1].actor}];break;case 67:this.$=[gr[ir-4],gr[ir-1],{type:"addMessage",from:gr[ir-4].actor,to:gr[ir-1].actor,signalType:gr[ir-3],msg:gr[ir]},{type:"activeEnd",signalType:ea.LINETYPE.ACTIVE_END,actor:gr[ir-4].actor}];break;case 68:this.$=[gr[ir-3],gr[ir-1],{type:"addMessage",from:gr[ir-3].actor,to:gr[ir-1].actor,signalType:gr[ir-2],msg:gr[ir]}];break;case 69:this.$={type:"addParticipant",actor:gr[ir-1],config:gr[ir]};break;case 70:this.$=gr[ir-1].trim();break;case 71:this.$={type:"addParticipant",actor:gr[ir]};break;case 72:this.$=ea.LINETYPE.SOLID_OPEN;break;case 73:this.$=ea.LINETYPE.DOTTED_OPEN;break;case 74:this.$=ea.LINETYPE.SOLID;break;case 75:this.$=ea.LINETYPE.BIDIRECTIONAL_SOLID;break;case 76:this.$=ea.LINETYPE.DOTTED;break;case 77:this.$=ea.LINETYPE.BIDIRECTIONAL_DOTTED;break;case 78:this.$=ea.LINETYPE.SOLID_CROSS;break;case 79:this.$=ea.LINETYPE.DOTTED_CROSS;break;case 80:this.$=ea.LINETYPE.SOLID_POINT;break;case 81:this.$=ea.LINETYPE.DOTTED_POINT;break;case 82:this.$=ea.parseMessage(gr[ir].trim().substring(1))}},"anonymous"),table:[{3:1,4:y,5:E,6:M},{1:[3]},{3:5,4:y,5:E,6:M},{3:6,4:y,5:E,6:M},g([1,4,5,13,14,18,21,23,29,30,31,33,35,36,37,38,39,41,43,44,46,50,52,53,55,60,61,62,63,71],m,{7:7}),{1:[2,1]},{1:[2,2]},{1:[2,3],4:A,5:v,8:8,9:10,12:12,13:b,14:C,17:15,18:R,21:Q,22:40,23:mt,24:19,25:20,26:21,27:22,28:23,29:zt,30:jt,31:Vt,33:Kt,35:xe,36:je,37:Ke,38:fr,39:lr,41:br,43:$e,44:He,46:wr,50:kr,52:Kr,53:_r,55:Jr,60:Lr,61:ha,62:ia,63:jr,71:Qr},g(or,[2,5]),{9:47,12:12,13:b,14:C,17:15,18:R,21:Q,22:40,23:mt,24:19,25:20,26:21,27:22,28:23,29:zt,30:jt,31:Vt,33:Kt,35:xe,36:je,37:Ke,38:fr,39:lr,41:br,43:$e,44:He,46:wr,50:kr,52:Kr,53:_r,55:Jr,60:Lr,61:ha,62:ia,63:jr,71:Qr},g(or,[2,7]),g(or,[2,8]),g(or,[2,14]),{12:48,50:kr,52:Kr,53:_r},{15:[1,49]},{5:[1,50]},{5:[1,53],19:[1,51],20:[1,52]},{22:54,71:Qr},{22:55,71:Qr},{5:[1,56]},{5:[1,57]},{5:[1,58]},{5:[1,59]},{5:[1,60]},g(or,[2,29]),g(or,[2,30]),{32:[1,61]},{34:[1,62]},g(or,[2,33]),{15:[1,63]},{15:[1,64]},{15:[1,65]},{15:[1,66]},{15:[1,67]},{15:[1,68]},{15:[1,69]},{15:[1,70]},{22:71,54:72,71:[1,73]},{22:74,71:Qr},{22:75,71:Qr},{68:76,76:[1,77],77:[1,78],78:[1,79],79:[1,80],80:[1,81],81:[1,82],82:[1,83],83:[1,84],84:[1,85],85:[1,86]},{56:87,58:[1,88],66:[1,89],67:[1,90]},{22:91,71:Qr},{22:92,71:Qr},{22:93,71:Qr},{22:94,71:Qr},g([5,51,65,76,77,78,79,80,81,82,83,84,85,86],ur),g(or,[2,6]),g(or,[2,15]),g(W,[2,9],{10:95}),g(or,[2,17]),{5:[1,97],19:[1,96]},{5:[1,98]},g(or,[2,21]),{5:[1,99]},{5:[1,100]},g(or,[2,24]),g(or,[2,25]),g(or,[2,26]),g(or,[2,27]),g(or,[2,28]),g(or,[2,31]),g(or,[2,32]),g($t,m,{7:101}),g($t,m,{7:102}),g($t,m,{7:103}),g(Ye,m,{40:104,7:105}),g(Fe,m,{42:106,7:107}),g(Fe,m,{7:107,42:108}),g(Tr,m,{45:109,7:110}),g($t,m,{7:111}),{5:[1,113],51:[1,112]},{5:[1,114]},g([5,51],ur,{72:115,73:[1,116]}),{5:[1,118],51:[1,117]},{5:[1,119]},{22:122,69:[1,120],70:[1,121],71:Qr},g(pr,[2,72]),g(pr,[2,73]),g(pr,[2,74]),g(pr,[2,75]),g(pr,[2,76]),g(pr,[2,77]),g(pr,[2,78]),g(pr,[2,79]),g(pr,[2,80]),g(pr,[2,81]),{22:123,71:Qr},{22:125,59:124,71:Qr},{71:[2,64]},{71:[2,65]},{57:126,86:da},{57:128,86:da},{57:129,86:da},{57:130,86:da},{4:[1,133],5:[1,135],11:132,12:134,16:[1,131],50:kr,52:Kr,53:_r},{5:[1,136]},g(or,[2,19]),g(or,[2,20]),g(or,[2,22]),g(or,[2,23]),{4:A,5:v,8:8,9:10,12:12,13:b,14:C,16:[1,137],17:15,18:R,21:Q,22:40,23:mt,24:19,25:20,26:21,27:22,28:23,29:zt,30:jt,31:Vt,33:Kt,35:xe,36:je,37:Ke,38:fr,39:lr,41:br,43:$e,44:He,46:wr,50:kr,52:Kr,53:_r,55:Jr,60:Lr,61:ha,62:ia,63:jr,71:Qr},{4:A,5:v,8:8,9:10,12:12,13:b,14:C,16:[1,138],17:15,18:R,21:Q,22:40,23:mt,24:19,25:20,26:21,27:22,28:23,29:zt,30:jt,31:Vt,33:Kt,35:xe,36:je,37:Ke,38:fr,39:lr,41:br,43:$e,44:He,46:wr,50:kr,52:Kr,53:_r,55:Jr,60:Lr,61:ha,62:ia,63:jr,71:Qr},{4:A,5:v,8:8,9:10,12:12,13:b,14:C,16:[1,139],17:15,18:R,21:Q,22:40,23:mt,24:19,25:20,26:21,27:22,28:23,29:zt,30:jt,31:Vt,33:Kt,35:xe,36:je,37:Ke,38:fr,39:lr,41:br,43:$e,44:He,46:wr,50:kr,52:Kr,53:_r,55:Jr,60:Lr,61:ha,62:ia,63:jr,71:Qr},{16:[1,140]},{4:A,5:v,8:8,9:10,12:12,13:b,14:C,16:[2,46],17:15,18:R,21:Q,22:40,23:mt,24:19,25:20,26:21,27:22,28:23,29:zt,30:jt,31:Vt,33:Kt,35:xe,36:je,37:Ke,38:fr,39:lr,41:br,43:$e,44:He,46:wr,49:[1,141],50:kr,52:Kr,53:_r,55:Jr,60:Lr,61:ha,62:ia,63:jr,71:Qr},{16:[1,142]},{4:A,5:v,8:8,9:10,12:12,13:b,14:C,16:[2,44],17:15,18:R,21:Q,22:40,23:mt,24:19,25:20,26:21,27:22,28:23,29:zt,30:jt,31:Vt,33:Kt,35:xe,36:je,37:Ke,38:fr,39:lr,41:br,43:$e,44:He,46:wr,48:[1,143],50:kr,52:Kr,53:_r,55:Jr,60:Lr,61:ha,62:ia,63:jr,71:Qr},{16:[1,144]},{16:[1,145]},{4:A,5:v,8:8,9:10,12:12,13:b,14:C,16:[2,42],17:15,18:R,21:Q,22:40,23:mt,24:19,25:20,26:21,27:22,28:23,29:zt,30:jt,31:Vt,33:Kt,35:xe,36:je,37:Ke,38:fr,39:lr,41:br,43:$e,44:He,46:wr,47:[1,146],50:kr,52:Kr,53:_r,55:Jr,60:Lr,61:ha,62:ia,63:jr,71:Qr},{4:A,5:v,8:8,9:10,12:12,13:b,14:C,16:[1,147],17:15,18:R,21:Q,22:40,23:mt,24:19,25:20,26:21,27:22,28:23,29:zt,30:jt,31:Vt,33:Kt,35:xe,36:je,37:Ke,38:fr,39:lr,41:br,43:$e,44:He,46:wr,50:kr,52:Kr,53:_r,55:Jr,60:Lr,61:ha,62:ia,63:jr,71:Qr},{15:[1,148]},g(or,[2,49]),g(or,[2,53]),{5:[2,69]},{74:[1,149]},{15:[1,150]},g(or,[2,51]),g(or,[2,52]),{22:151,71:Qr},{22:152,71:Qr},{57:153,86:da},{57:154,86:da},{57:155,86:da},{65:[1,156],86:[2,63]},{5:[2,56]},{5:[2,82]},{5:[2,57]},{5:[2,58]},{5:[2,59]},g(or,[2,16]),g(W,[2,10]),{12:157,50:kr,52:Kr,53:_r},g(W,[2,12]),g(W,[2,13]),g(or,[2,18]),g(or,[2,34]),g(or,[2,35]),g(or,[2,36]),g(or,[2,37]),{15:[1,158]},g(or,[2,38]),{15:[1,159]},g(or,[2,39]),g(or,[2,40]),{15:[1,160]},g(or,[2,41]),{5:[1,161]},{75:[1,162]},{5:[1,163]},{57:164,86:da},{57:165,86:da},{5:[2,68]},{5:[2,54]},{5:[2,55]},{22:166,71:Qr},g(W,[2,11]),g(Ye,m,{7:105,40:167}),g(Fe,m,{7:107,42:168}),g(Tr,m,{7:110,45:169}),g(or,[2,48]),{5:[2,70]},g(or,[2,50]),{5:[2,66]},{5:[2,67]},{86:[2,62]},{16:[2,47]},{16:[2,45]},{16:[2,43]}],defaultActions:{5:[2,1],6:[2,2],89:[2,64],90:[2,65],115:[2,69],126:[2,56],127:[2,82],128:[2,57],129:[2,58],130:[2,59],153:[2,68],154:[2,54],155:[2,55],162:[2,70],164:[2,66],165:[2,67],166:[2,62],167:[2,47],168:[2,45],169:[2,43]},parseError:(0,w.K2)(function(ba,sa){if(!sa.recoverable){var Sa=new Error(ba);throw Sa.hash=sa,Sa}this.trace(ba)},"parseError"),parse:(0,w.K2)(function(ba){var sa=this,Sa=[0],ea=[],Va=[null],gr=[],Ua=this.table,ir="",Oa=0,Ka=0,Ja=0,Ha=gr.slice.call(arguments,1),oa=Object.create(this.lexer),hi={yy:{}};for(var Ce in this.yy)Object.prototype.hasOwnProperty.call(this.yy,Ce)&&(hi.yy[Ce]=this.yy[Ce]);oa.setInput(ba,hi.yy),hi.yy.lexer=oa,hi.yy.parser=this,typeof oa.yylloc>"u"&&(oa.yylloc={});var Ri=oa.yylloc;gr.push(Ri);var Ne=oa.options&&oa.options.ranges;function Ct(){var wa;return"number"!=typeof(wa=ea.pop()||oa.lex()||1)&&(wa instanceof Array&&(wa=(ea=wa).pop()),wa=sa.symbols_[wa]||wa),wa}this.parseError="function"==typeof hi.yy.parseError?hi.yy.parseError:Object.getPrototypeOf(this).parseError,(0,w.K2)(function at(wa){Sa.length=Sa.length-2*wa,Va.length=Va.length-wa,gr.length=gr.length-wa},"popStack"),(0,w.K2)(Ct,"lex");for(var I,Jt,Ve,ft,Ft,Xr,Hr,La,Je={};;){if(this.defaultActions[Ve=Sa[Sa.length-1]]?ft=this.defaultActions[Ve]:((null===I||typeof I>"u")&&(I=Ct()),ft=Ua[Ve]&&Ua[Ve][I]),typeof ft>"u"||!ft.length||!ft[0]){var fa;for(Xr in La=[],Ua[Ve])this.terminals_[Xr]&&Xr>2&&La.push("'"+this.terminals_[Xr]+"'");fa=oa.showPosition?"Parse error on line "+(Oa+1)+":\n"+oa.showPosition()+"\nExpecting "+La.join(", ")+", got '"+(this.terminals_[I]||I)+"'":"Parse error on line "+(Oa+1)+": Unexpected "+(1==I?"end of input":"'"+(this.terminals_[I]||I)+"'"),this.parseError(fa,{text:oa.match,token:this.terminals_[I]||I,line:oa.yylineno,loc:Ri,expected:La})}if(ft[0]instanceof Array&&ft.length>1)throw new Error("Parse Error: multiple actions possible at state: "+Ve+", token: "+I);switch(ft[0]){case 1:Sa.push(I),Va.push(oa.yytext),gr.push(oa.yylloc),Sa.push(ft[1]),I=null,Jt?(I=Jt,Jt=null):(Ka=oa.yyleng,ir=oa.yytext,Oa=oa.yylineno,Ri=oa.yylloc,Ja>0&&Ja--);break;case 2:if(Je.$=Va[Va.length-(Hr=this.productions_[ft[1]][1])],Je._$={first_line:gr[gr.length-(Hr||1)].first_line,last_line:gr[gr.length-1].last_line,first_column:gr[gr.length-(Hr||1)].first_column,last_column:gr[gr.length-1].last_column},Ne&&(Je._$.range=[gr[gr.length-(Hr||1)].range[0],gr[gr.length-1].range[1]]),typeof(Ft=this.performAction.apply(Je,[ir,Ka,Oa,hi.yy,ft[1],Va,gr].concat(Ha)))<"u")return Ft;Hr&&(Sa=Sa.slice(0,-1*Hr*2),Va=Va.slice(0,-1*Hr),gr=gr.slice(0,-1*Hr)),Sa.push(this.productions_[ft[1]][0]),Va.push(Je.$),gr.push(Je._$),Sa.push(Ua[Sa[Sa.length-2]][Sa[Sa.length-1]]);break;case 3:return!0}}return!0},"parse")};function Wa(){this.yy={}}return Pa.lexer=function(){return{EOF:1,parseError:(0,w.K2)(function(sa,Sa){if(!this.yy.parser)throw new Error(sa);this.yy.parser.parseError(sa,Sa)},"parseError"),setInput:(0,w.K2)(function(ba,sa){return this.yy=sa||this.yy||{},this._input=ba,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},"setInput"),input:(0,w.K2)(function(){var ba=this._input[0];return this.yytext+=ba,this.yyleng++,this.offset++,this.match+=ba,this.matched+=ba,ba.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),ba},"input"),unput:(0,w.K2)(function(ba){var sa=ba.length,Sa=ba.split(/(?:\r\n?|\n)/g);this._input=ba+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-sa),this.offset-=sa;var ea=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),Sa.length-1&&(this.yylineno-=Sa.length-1);var Va=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:Sa?(Sa.length===ea.length?this.yylloc.first_column:0)+ea[ea.length-Sa.length].length-Sa[0].length:this.yylloc.first_column-sa},this.options.ranges&&(this.yylloc.range=[Va[0],Va[0]+this.yyleng-sa]),this.yyleng=this.yytext.length,this},"unput"),more:(0,w.K2)(function(){return this._more=!0,this},"more"),reject:(0,w.K2)(function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},"reject"),less:(0,w.K2)(function(ba){this.unput(this.match.slice(ba))},"less"),pastInput:(0,w.K2)(function(){var ba=this.matched.substr(0,this.matched.length-this.match.length);return(ba.length>20?"...":"")+ba.substr(-20).replace(/\n/g,"")},"pastInput"),upcomingInput:(0,w.K2)(function(){var ba=this.match;return ba.length<20&&(ba+=this._input.substr(0,20-ba.length)),(ba.substr(0,20)+(ba.length>20?"...":"")).replace(/\n/g,"")},"upcomingInput"),showPosition:(0,w.K2)(function(){var ba=this.pastInput(),sa=new Array(ba.length+1).join("-");return ba+this.upcomingInput()+"\n"+sa+"^"},"showPosition"),test_match:(0,w.K2)(function(ba,sa){var Sa,ea,Va;if(this.options.backtrack_lexer&&(Va={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(Va.yylloc.range=this.yylloc.range.slice(0))),(ea=ba[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=ea.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:ea?ea[ea.length-1].length-ea[ea.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+ba[0].length},this.yytext+=ba[0],this.match+=ba[0],this.matches=ba,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(ba[0].length),this.matched+=ba[0],Sa=this.performAction.call(this,this.yy,this,sa,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),Sa)return Sa;if(this._backtrack){for(var gr in Va)this[gr]=Va[gr];return!1}return!1},"test_match"),next:(0,w.K2)(function(){if(this.done)return this.EOF;var ba,sa,Sa,ea;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var Va=this._currentRules(),gr=0;gr<Va.length;gr++)if((Sa=this._input.match(this.rules[Va[gr]]))&&(!sa||Sa[0].length>sa[0].length)){if(sa=Sa,ea=gr,this.options.backtrack_lexer){if(!1!==(ba=this.test_match(Sa,Va[gr])))return ba;if(this._backtrack){sa=!1;continue}return!1}if(!this.options.flex)break}return sa?!1!==(ba=this.test_match(sa,Va[ea]))&&ba:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},"next"),lex:(0,w.K2)(function(){return this.next()||this.lex()},"lex"),begin:(0,w.K2)(function(sa){this.conditionStack.push(sa)},"begin"),popState:(0,w.K2)(function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},"popState"),_currentRules:(0,w.K2)(function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},"_currentRules"),topState:(0,w.K2)(function(sa){return(sa=this.conditionStack.length-1-Math.abs(sa||0))>=0?this.conditionStack[sa]:"INITIAL"},"topState"),pushState:(0,w.K2)(function(sa){this.begin(sa)},"pushState"),stateStackSize:(0,w.K2)(function(){return this.conditionStack.length},"stateStackSize"),options:{"case-insensitive":!0},performAction:(0,w.K2)(function(sa,Sa,ea,Va){switch(ea){case 0:case 56:case 72:return 5;case 1:case 2:case 3:case 4:case 5:break;case 6:return 19;case 7:return this.begin("CONFIG"),73;case 8:return 74;case 9:return this.popState(),this.popState(),75;case 10:case 57:return Sa.yytext=Sa.yytext.trim(),71;case 11:case 17:return Sa.yytext=Sa.yytext.trim(),this.begin("ALIAS"),71;case 12:return this.begin("LINE"),14;case 13:return this.begin("ID"),50;case 14:return this.begin("ID"),52;case 15:return 13;case 16:return this.begin("ID"),53;case 18:return this.popState(),this.popState(),this.begin("LINE"),51;case 19:return this.popState(),this.popState(),5;case 20:return this.begin("LINE"),36;case 21:return this.begin("LINE"),37;case 22:return this.begin("LINE"),38;case 23:return this.begin("LINE"),39;case 24:return this.begin("LINE"),49;case 25:return this.begin("LINE"),41;case 26:return this.begin("LINE"),43;case 27:return this.begin("LINE"),48;case 28:return this.begin("LINE"),44;case 29:return this.begin("LINE"),47;case 30:return this.begin("LINE"),46;case 31:return this.popState(),15;case 32:return 16;case 33:return 66;case 34:return 67;case 35:return 60;case 36:return 61;case 37:return 62;case 38:return 63;case 39:return 58;case 40:return 55;case 41:return this.begin("ID"),21;case 42:return this.begin("ID"),23;case 43:return 29;case 44:return 30;case 45:return this.begin("acc_title"),31;case 46:return this.popState(),"acc_title_value";case 47:return this.begin("acc_descr"),33;case 48:return this.popState(),"acc_descr_value";case 49:this.begin("acc_descr_multiline");break;case 50:this.popState();break;case 51:return"acc_descr_multiline_value";case 52:return 6;case 53:return 18;case 54:return 20;case 55:return 65;case 58:return 78;case 59:return 79;case 60:return 80;case 61:return 81;case 62:return 76;case 63:return 77;case 64:return 82;case 65:return 83;case 66:return 84;case 67:return 85;case 68:case 69:return 86;case 70:return 69;case 71:return 70;case 73:return"INVALID"}},"anonymous"),rules:[/^(?:[\n]+)/i,/^(?:\s+)/i,/^(?:((?!\n)\s)+)/i,/^(?:#[^\n]*)/i,/^(?:%(?!\{)[^\n]*)/i,/^(?:[^\}]%%[^\n]*)/i,/^(?:[0-9]+(?=[ \n]+))/i,/^(?:@\{)/i,/^(?:[^\}]+)/i,/^(?:\})/i,/^(?:[^\<->\->:\n,;@\s]+(?=@\{))/i,/^(?:[^\<->\->:\n,;@]+?([\-]*[^\<->\->:\n,;@]+?)*?(?=((?!\n)\s)+as(?!\n)\s|[#\n;]|$))/i,/^(?:box\b)/i,/^(?:participant\b)/i,/^(?:actor\b)/i,/^(?:create\b)/i,/^(?:destroy\b)/i,/^(?:[^<\->\->:\n,;]+?([\-]*[^<\->\->:\n,;]+?)*?(?=((?!\n)\s)+as(?!\n)\s|[#\n;]|$))/i,/^(?:as\b)/i,/^(?:(?:))/i,/^(?:loop\b)/i,/^(?:rect\b)/i,/^(?:opt\b)/i,/^(?:alt\b)/i,/^(?:else\b)/i,/^(?:par\b)/i,/^(?:par_over\b)/i,/^(?:and\b)/i,/^(?:critical\b)/i,/^(?:option\b)/i,/^(?:break\b)/i,/^(?:(?:[:]?(?:no)?wrap)?[^#\n;]*)/i,/^(?:end\b)/i,/^(?:left of\b)/i,/^(?:right of\b)/i,/^(?:links\b)/i,/^(?:link\b)/i,/^(?:properties\b)/i,/^(?:details\b)/i,/^(?:over\b)/i,/^(?:note\b)/i,/^(?:activate\b)/i,/^(?:deactivate\b)/i,/^(?:title\s[^#\n;]+)/i,/^(?:title:\s[^#\n;]+)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:sequenceDiagram\b)/i,/^(?:autonumber\b)/i,/^(?:off\b)/i,/^(?:,)/i,/^(?:;)/i,/^(?:[^+<\->\->:\n,;]+((?!(-x|--x|-\)|--\)))[\-]*[^\+<\->\->:\n,;]+)*)/i,/^(?:->>)/i,/^(?:<<->>)/i,/^(?:-->>)/i,/^(?:<<-->>)/i,/^(?:->)/i,/^(?:-->)/i,/^(?:-[x])/i,/^(?:--[x])/i,/^(?:-[\)])/i,/^(?:--[\)])/i,/^(?::(?:(?:no)?wrap)?[^#\n;]*)/i,/^(?::)/i,/^(?:\+)/i,/^(?:-)/i,/^(?:$)/i,/^(?:.)/i],conditions:{acc_descr_multiline:{rules:[50,51],inclusive:!1},acc_descr:{rules:[48],inclusive:!1},acc_title:{rules:[46],inclusive:!1},ID:{rules:[2,3,7,10,11,17],inclusive:!1},ALIAS:{rules:[2,3,18,19],inclusive:!1},LINE:{rules:[2,3,31],inclusive:!1},CONFIG:{rules:[8,9],inclusive:!1},CONFIG_DATA:{rules:[],inclusive:!1},INITIAL:{rules:[0,1,3,4,5,6,12,13,14,15,16,20,21,22,23,24,25,26,27,28,29,30,32,33,34,35,36,37,38,39,40,41,42,43,44,45,47,49,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73],inclusive:!0}}}}(),(0,w.K2)(Wa,"Parser"),Wa.prototype=Pa,Pa.Parser=Wa,new Wa}();bt.parser=bt;var Gt=bt,j={SOLID:0,DOTTED:1,NOTE:2,SOLID_CROSS:3,DOTTED_CROSS:4,SOLID_OPEN:5,DOTTED_OPEN:6,LOOP_START:10,LOOP_END:11,ALT_START:12,ALT_ELSE:13,ALT_END:14,OPT_START:15,OPT_END:16,ACTIVE_START:17,ACTIVE_END:18,PAR_START:19,PAR_AND:20,PAR_END:21,RECT_START:22,RECT_END:23,SOLID_POINT:24,DOTTED_POINT:25,AUTONUMBER:26,CRITICAL_START:27,CRITICAL_OPTION:28,CRITICAL_END:29,BREAK_START:30,BREAK_END:31,PAR_OVER_START:32,BIDIRECTIONAL_SOLID:33,BIDIRECTIONAL_DOTTED:34},hr={FILLED:0,OPEN:1},ze={LEFTOF:0,RIGHTOF:1,OVER:2},Wr=(class{constructor(){this.state=new Mt.m(()=>({prevActor:void 0,actors:new Map,createdActors:new Map,destroyedActors:new Map,boxes:[],messages:[],notes:[],sequenceNumbersEnabled:!1,wrapEnabled:void 0,currentBox:void 0,lastCreated:void 0,lastDestroyed:void 0})),this.setAccTitle=G.SV,this.setAccDescription=G.EI,this.setDiagramTitle=G.ke,this.getAccTitle=G.iN,this.getAccDescription=G.m7,this.getDiagramTitle=G.ab,this.apply=this.apply.bind(this),this.parseBoxData=this.parseBoxData.bind(this),this.parseMessage=this.parseMessage.bind(this),this.clear(),this.setWrap((0,G.D7)().wrap),this.LINETYPE=j,this.ARROWTYPE=hr,this.PLACEMENT=ze}addBox(g){this.state.records.boxes.push({name:g.text,wrap:g.wrap??this.autoWrap(),fill:g.color,actorKeys:[]}),this.state.records.currentBox=this.state.records.boxes.slice(-1)[0]}addActor(g,y,E,M,m){let v,A=this.state.records.currentBox;if(void 0!==m){let C;C=m.includes("\n")?m+"\n":"{\n"+m+"\n}",v=(0,D.H)(C,{schema:D.r})}M=v?.type??M;const b=this.state.records.actors.get(g);if(b){if(this.state.records.currentBox&&b.box&&this.state.records.currentBox!==b.box)throw new Error(`A same participant should only be defined in one Box: ${b.name} can't be in '${b.box.name}' and in '${this.state.records.currentBox.name}' at the same time.`);if(A=b.box?b.box:this.state.records.currentBox,b.box=A,b&&y===b.name&&null==E)return}if(null==E?.text&&(E={text:y,type:M}),(null==M||null==E.text)&&(E={text:y,type:M}),this.state.records.actors.set(g,{box:A,name:y,description:E.text,wrap:E.wrap??this.autoWrap(),prevActor:this.state.records.prevActor,links:{},properties:{},actorCnt:null,rectData:null,type:M??"participant"}),this.state.records.prevActor){const C=this.state.records.actors.get(this.state.records.prevActor);C&&(C.nextActor=g)}this.state.records.currentBox&&this.state.records.currentBox.actorKeys.push(g),this.state.records.prevActor=g}activationCount(g){let y,E=0;if(!g)return 0;for(y=0;y<this.state.records.messages.length;y++)this.state.records.messages[y].type===this.LINETYPE.ACTIVE_START&&this.state.records.messages[y].from===g&&E++,this.state.records.messages[y].type===this.LINETYPE.ACTIVE_END&&this.state.records.messages[y].from===g&&E--;return E}addMessage(g,y,E,M){this.state.records.messages.push({id:this.state.records.messages.length.toString(),from:g,to:y,message:E.text,wrap:E.wrap??this.autoWrap(),answer:M})}addSignal(g,y,E,M,m=!1){if(M===this.LINETYPE.ACTIVE_END&&this.activationCount(g??"")<1){const v=new Error("Trying to inactivate an inactive participant ("+g+")");throw v.hash={text:"->>-",token:"->>-",line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["'ACTIVE_PARTICIPANT'"]},v}return this.state.records.messages.push({id:this.state.records.messages.length.toString(),from:g,to:y,message:E?.text??"",wrap:E?.wrap??this.autoWrap(),type:M,activate:m}),!0}hasAtLeastOneBox(){return this.state.records.boxes.length>0}hasAtLeastOneBoxWithTitle(){return this.state.records.boxes.some(g=>g.name)}getMessages(){return this.state.records.messages}getBoxes(){return this.state.records.boxes}getActors(){return this.state.records.actors}getCreatedActors(){return this.state.records.createdActors}getDestroyedActors(){return this.state.records.destroyedActors}getActor(g){return this.state.records.actors.get(g)}getActorKeys(){return[...this.state.records.actors.keys()]}enableSequenceNumbers(){this.state.records.sequenceNumbersEnabled=!0}disableSequenceNumbers(){this.state.records.sequenceNumbersEnabled=!1}showSequenceNumbers(){return this.state.records.sequenceNumbersEnabled}setWrap(g){this.state.records.wrapEnabled=g}extractWrap(g){if(void 0===g)return{};g=g.trim();const y=null!==/^:?wrap:/.exec(g)||null===/^:?nowrap:/.exec(g)&&void 0;return{cleanedText:(void 0===y?g:g.replace(/^:?(?:no)?wrap:/,"")).trim(),wrap:y}}autoWrap(){return void 0!==this.state.records.wrapEnabled?this.state.records.wrapEnabled:(0,G.D7)().sequence?.wrap??!1}clear(){this.state.reset(),(0,G.IU)()}parseMessage(g){const y=g.trim(),{wrap:E,cleanedText:M}=this.extractWrap(y),m={text:M,wrap:E};return w.Rm.debug(`parseMessage: ${JSON.stringify(m)}`),m}parseBoxData(g){const y=/^((?:rgba?|hsla?)\s*\(.*\)|\w*)(.*)$/.exec(g);let E=y?.[1]?y[1].trim():"transparent",M=y?.[2]?y[2].trim():void 0;if(window?.CSS)window.CSS.supports("color",E)||(E="transparent",M=g.trim());else{const v=(new Option).style;v.color=E,v.color!==E&&(E="transparent",M=g.trim())}const{wrap:m,cleanedText:A}=this.extractWrap(M);return{text:A?(0,G.jZ)(A,(0,G.D7)()):void 0,color:E,wrap:m}}addNote(g,y,E){const M={actor:g,placement:y,message:E.text,wrap:E.wrap??this.autoWrap()},m=[].concat(g,g);this.state.records.notes.push(M),this.state.records.messages.push({id:this.state.records.messages.length.toString(),from:m[0],to:m[1],message:E.text,wrap:E.wrap??this.autoWrap(),type:this.LINETYPE.NOTE,placement:y})}addLinks(g,y){const E=this.getActor(g);try{let M=(0,G.jZ)(y.text,(0,G.D7)());M=M.replace(/&equals;/g,"="),M=M.replace(/&amp;/g,"&");const m=JSON.parse(M);this.insertLinks(E,m)}catch(M){w.Rm.error("error while parsing actor link text",M)}}addALink(g,y){const E=this.getActor(g);try{const M={};let m=(0,G.jZ)(y.text,(0,G.D7)());const A=m.indexOf("@");m=m.replace(/&equals;/g,"="),m=m.replace(/&amp;/g,"&");const v=m.slice(0,A-1).trim(),b=m.slice(A+1).trim();M[v]=b,this.insertLinks(E,M)}catch(M){w.Rm.error("error while parsing actor link text",M)}}insertLinks(g,y){if(null==g.links)g.links=y;else for(const E in y)g.links[E]=y[E]}addProperties(g,y){const E=this.getActor(g);try{const M=(0,G.jZ)(y.text,(0,G.D7)()),m=JSON.parse(M);this.insertProperties(E,m)}catch(M){w.Rm.error("error while parsing actor properties text",M)}}insertProperties(g,y){if(null==g.properties)g.properties=y;else for(const E in y)g.properties[E]=y[E]}boxEnd(){this.state.records.currentBox=void 0}addDetails(g,y){const E=this.getActor(g),M=document.getElementById(y.text);try{const A=JSON.parse(M.innerHTML);A.properties&&this.insertProperties(E,A.properties),A.links&&this.insertLinks(E,A.links)}catch(m){w.Rm.error("error while parsing actor details text",m)}}getActorProperty(g,y){if(void 0!==g?.properties)return g.properties[y]}apply(g){if(Array.isArray(g))g.forEach(y=>{this.apply(y)});else switch(g.type){case"sequenceIndex":this.state.records.messages.push({id:this.state.records.messages.length.toString(),from:void 0,to:void 0,message:{start:g.sequenceIndex,step:g.sequenceIndexStep,visible:g.sequenceVisible},wrap:!1,type:g.signalType});break;case"addParticipant":this.addActor(g.actor,g.actor,g.description,g.draw,g.config);break;case"createParticipant":if(this.state.records.actors.has(g.actor))throw new Error("It is not possible to have actors with the same id, even if one is destroyed before the next is created. Use 'AS' aliases to simulate the behavior");this.state.records.lastCreated=g.actor,this.addActor(g.actor,g.actor,g.description,g.draw,g.config),this.state.records.createdActors.set(g.actor,this.state.records.messages.length);break;case"destroyParticipant":this.state.records.lastDestroyed=g.actor,this.state.records.destroyedActors.set(g.actor,this.state.records.messages.length);break;case"activeStart":case"activeEnd":this.addSignal(g.actor,void 0,void 0,g.signalType);break;case"addNote":this.addNote(g.actor,g.placement,g.text);break;case"addLinks":this.addLinks(g.actor,g.text);break;case"addALink":this.addALink(g.actor,g.text);break;case"addProperties":this.addProperties(g.actor,g.text);break;case"addDetails":this.addDetails(g.actor,g.text);break;case"addMessage":if(this.state.records.lastCreated){if(g.to!==this.state.records.lastCreated)throw new Error("The created participant "+this.state.records.lastCreated.name+" does not have an associated creating message after its declaration. Please check the sequence diagram.");this.state.records.lastCreated=void 0}else if(this.state.records.lastDestroyed){if(g.to!==this.state.records.lastDestroyed&&g.from!==this.state.records.lastDestroyed)throw new Error("The destroyed participant "+this.state.records.lastDestroyed.name+" does not have an associated destroying message after its declaration. Please check the sequence diagram.");this.state.records.lastDestroyed=void 0}this.addSignal(g.from,g.to,g.msg,g.signalType,g.activate);break;case"boxStart":this.addBox(g.boxData);break;case"boxEnd":this.boxEnd();break;case"loopStart":this.addSignal(void 0,void 0,g.loopText,g.signalType);break;case"loopEnd":case"rectEnd":case"optEnd":case"altEnd":case"parEnd":case"criticalEnd":case"breakEnd":this.addSignal(void 0,void 0,void 0,g.signalType);break;case"rectStart":this.addSignal(void 0,void 0,g.color,g.signalType);break;case"optStart":this.addSignal(void 0,void 0,g.optText,g.signalType);break;case"altStart":case"else":this.addSignal(void 0,void 0,g.altText,g.signalType);break;case"setAccTitle":(0,G.SV)(g.text);break;case"parStart":case"and":this.addSignal(void 0,void 0,g.parText,g.signalType);break;case"criticalStart":this.addSignal(void 0,void 0,g.criticalText,g.signalType);break;case"option":this.addSignal(void 0,void 0,g.optionText,g.signalType);break;case"breakStart":this.addSignal(void 0,void 0,g.breakText,g.signalType)}}getConfig(){return(0,G.D7)().sequence}static#t=Ge=()=>((0,ie.A)(this,"SequenceDB"),(0,w.K2)(this,"SequenceDB"),this)},Ge()),Gr=(0,w.K2)(g=>`.actor {\n    stroke: ${g.actorBorder};\n    fill: ${g.actorBkg};\n  }\n\n  text.actor > tspan {\n    fill: ${g.actorTextColor};\n    stroke: none;\n  }\n\n  .actor-line {\n    stroke: ${g.actorLineColor};\n  }\n  \n  .innerArc {\n    stroke-width: 1.5;\n    stroke-dasharray: none;\n  }\n\n  .messageLine0 {\n    stroke-width: 1.5;\n    stroke-dasharray: none;\n    stroke: ${g.signalColor};\n  }\n\n  .messageLine1 {\n    stroke-width: 1.5;\n    stroke-dasharray: 2, 2;\n    stroke: ${g.signalColor};\n  }\n\n  #arrowhead path {\n    fill: ${g.signalColor};\n    stroke: ${g.signalColor};\n  }\n\n  .sequenceNumber {\n    fill: ${g.sequenceNumberColor};\n  }\n\n  #sequencenumber {\n    fill: ${g.signalColor};\n  }\n\n  #crosshead path {\n    fill: ${g.signalColor};\n    stroke: ${g.signalColor};\n  }\n\n  .messageText {\n    fill: ${g.signalTextColor};\n    stroke: none;\n  }\n\n  .labelBox {\n    stroke: ${g.labelBoxBorderColor};\n    fill: ${g.labelBoxBkgColor};\n  }\n\n  .labelText, .labelText > tspan {\n    fill: ${g.labelTextColor};\n    stroke: none;\n  }\n\n  .loopText, .loopText > tspan {\n    fill: ${g.loopTextColor};\n    stroke: none;\n  }\n\n  .loopLine {\n    stroke-width: 2px;\n    stroke-dasharray: 2, 2;\n    stroke: ${g.labelBoxBorderColor};\n    fill: ${g.labelBoxBorderColor};\n  }\n\n  .note {\n    //stroke: #decc93;\n    stroke: ${g.noteBorderColor};\n    fill: ${g.noteBkgColor};\n  }\n\n  .noteText, .noteText > tspan {\n    fill: ${g.noteTextColor};\n    stroke: none;\n  }\n\n  .activation0 {\n    fill: ${g.activationBkgColor};\n    stroke: ${g.activationBorderColor};\n  }\n\n  .activation1 {\n    fill: ${g.activationBkgColor};\n    stroke: ${g.activationBorderColor};\n  }\n\n  .activation2 {\n    fill: ${g.activationBkgColor};\n    stroke: ${g.activationBorderColor};\n  }\n\n  .actorPopupMenu {\n    position: absolute;\n  }\n\n  .actorPopupMenuPanel {\n    position: absolute;\n    fill: ${g.actorBkg};\n    box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);\n    filter: drop-shadow(3px 5px 2px rgb(0 0 0 / 0.4));\n}\n  .actor-man line {\n    stroke: ${g.actorBorder};\n    fill: ${g.actorBkg};\n  }\n  .actor-man circle, line {\n    stroke: ${g.actorBorder};\n    fill: ${g.actorBkg};\n    stroke-width: 2px;\n  }\n\n`,"getStyles"),zr="actor-top",Or="actor-bottom",Be="actor-box",Ir="actor-man",Xe=(0,w.K2)(function(g,y){return(0,L.tk)(g,y)},"drawRect"),z=(0,w.K2)(function(g,y,E,M,m){if(null==y.links||0===Object.keys(y.links).length)return{height:0,width:0};const A=y.links,v=y.actorCnt,b=y.rectData;var C="none";m&&(C="block !important");const R=g.append("g");R.attr("id","actor"+v+"_popup"),R.attr("class","actorPopupMenu"),R.attr("display",C);var Q="";void 0!==b.class&&(Q=" "+b.class);let mt=b.width>E?b.width:E;const zt=R.append("rect");if(zt.attr("class","actorPopupMenuPanel"+Q),zt.attr("x",b.x),zt.attr("y",b.height),zt.attr("fill",b.fill),zt.attr("stroke",b.stroke),zt.attr("width",mt),zt.attr("height",b.height),zt.attr("rx",b.rx),zt.attr("ry",b.ry),null!=A){var jt=20;for(let xe in A){var Vt=R.append("a"),Kt=(0,At.J)(A[xe]);Vt.attr("xlink:href",Kt),Vt.attr("target","_blank"),ht(M)(xe,Vt,b.x+10,b.height+jt,mt,20,{class:"actor"},M),jt+=30}}return zt.attr("height",jt),{height:b.height+jt,width:mt}},"drawPopup"),dt=(0,w.K2)(function(g){return"var pu = document.getElementById('"+g+"'); if (pu != null) { pu.style.display = pu.style.display == 'block' ? 'none' : 'block'; }"},"popupMenuToggle"),Bt=(0,w.K2)(function(){var g=(0,lt.A)(function*(y,E,M=null){let m=y.append("foreignObject");const A=yield(0,G.dj)(E.text,(0,G.zj)()),b=m.append("xhtml:div").attr("style","width: fit-content;").attr("xmlns","http://www.w3.org/1999/xhtml").html(A).node().getBoundingClientRect();if(m.attr("height",Math.round(b.height)).attr("width",Math.round(b.width)),"noteText"===E.class){const C=y.node().firstChild;C.setAttribute("height",b.height+2*E.textMargin);const R=C.getBBox();m.attr("x",Math.round(R.x+R.width/2-b.width/2)).attr("y",Math.round(R.y+R.height/2-b.height/2))}else if(M){let{startx:C,stopx:R,starty:Q}=M;if(C>R){const mt=C;C=R,R=mt}m.attr("x",Math.round(C+Math.abs(C-R)/2-b.width/2)),m.attr("y","loopText"===E.class?Math.round(Q):Math.round(Q-b.height))}return[m]});return function(y,E){return g.apply(this,arguments)}}(),"drawKatex"),Se=(0,w.K2)(function(g,y){let E=0,M=0;const m=y.text.split(G.Y2.lineBreakRegex),[A,v]=(0,ut.I5)(y.fontSize);let b=[],C=0,R=(0,w.K2)(()=>y.y,"yfunc");if(void 0!==y.valign&&void 0!==y.textMargin&&y.textMargin>0)switch(y.valign){case"top":case"start":R=(0,w.K2)(()=>Math.round(y.y+y.textMargin),"yfunc");break;case"middle":case"center":R=(0,w.K2)(()=>Math.round(y.y+(E+M+y.textMargin)/2),"yfunc");break;case"bottom":case"end":R=(0,w.K2)(()=>Math.round(y.y+(E+M+2*y.textMargin)-y.textMargin),"yfunc")}if(void 0!==y.anchor&&void 0!==y.textMargin&&void 0!==y.width)switch(y.anchor){case"left":case"start":y.x=Math.round(y.x+y.textMargin),y.anchor="start",y.dominantBaseline="middle",y.alignmentBaseline="middle";break;case"middle":case"center":y.x=Math.round(y.x+y.width/2),y.anchor="middle",y.dominantBaseline="middle",y.alignmentBaseline="middle";break;case"right":case"end":y.x=Math.round(y.x+y.width-y.textMargin),y.anchor="end",y.dominantBaseline="middle",y.alignmentBaseline="middle"}for(let[Q,mt]of m.entries()){void 0!==y.textMargin&&0===y.textMargin&&void 0!==A&&(C=Q*A);const zt=g.append("text");zt.attr("x",y.x),zt.attr("y",R()),void 0!==y.anchor&&zt.attr("text-anchor",y.anchor).attr("dominant-baseline",y.dominantBaseline).attr("alignment-baseline",y.alignmentBaseline),void 0!==y.fontFamily&&zt.style("font-family",y.fontFamily),void 0!==v&&zt.style("font-size",v),void 0!==y.fontWeight&&zt.style("font-weight",y.fontWeight),void 0!==y.fill&&zt.attr("fill",y.fill),void 0!==y.class&&zt.attr("class",y.class),void 0!==y.dy?zt.attr("dy",y.dy):0!==C&&zt.attr("dy",C);const jt=mt||ut.pe;if(y.tspan){const Vt=zt.append("tspan");Vt.attr("x",y.x),void 0!==y.fill&&Vt.attr("fill",y.fill),Vt.text(jt)}else zt.text(jt);void 0!==y.valign&&void 0!==y.textMargin&&y.textMargin>0&&(M+=(zt._groups||zt)[0][0].getBBox().height,E=M),b.push(zt)}return b},"drawText"),X=(0,w.K2)(function(g,y){function E(m,A,v,b,C){return m+","+A+" "+(m+v)+","+A+" "+(m+v)+","+(A+b-C)+" "+(m+v-1.2*C)+","+(A+b)+" "+m+","+(A+b)}(0,w.K2)(E,"genPoints");const M=g.append("polygon");return M.attr("points",E(y.x,y.y,y.width,y.height,7)),M.attr("class","labelBox"),y.y=y.y+y.height/2,Se(g,y),M},"drawLabel"),re=-1,S=(0,w.K2)((g,y,E,M)=>{g.select&&E.forEach(m=>{const A=y.get(m),v=g.select("#actor"+A.actorCnt);!M.mirrorActors&&A.stopy?v.attr("y2",A.stopy+A.height/2):M.mirrorActors&&v.attr("y2",A.stopy)})},"fixLifeLineHeights"),ee=(0,w.K2)(function(g,y,E,M){const m=M?y.stopy:y.starty,A=y.x+y.width/2,v=m+y.height,b=g.append("g").lower();var C=b;M||(re++,Object.keys(y.links||{}).length&&!E.forceMenus&&C.attr("onclick",dt(`actor${re}_popup`)).attr("cursor","pointer"),C.append("line").attr("id","actor"+re).attr("x1",A).attr("y1",v).attr("x2",A).attr("y2",2e3).attr("class","actor-line 200").attr("stroke-width","0.5px").attr("stroke","#999").attr("name",y.name),C=b.append("g"),y.actorCnt=re,null!=y.links&&C.attr("id","root-"+re));const R=(0,L.PB)();var Q="actor";y.properties?.class?Q=y.properties.class:R.fill="#eaeaea",Q+=M?` ${Or}`:` ${zr}`,R.x=y.x,R.y=m,R.width=y.width,R.height=y.height,R.class=Q,R.rx=3,R.ry=3,R.name=y.name;const mt=Xe(C,R);if(y.rectData=R,y.properties?.icon){const jt=y.properties.icon.trim();"@"===jt.charAt(0)?(0,L.CP)(C,R.x+R.width-20,R.y+10,jt.substr(1)):(0,L.aC)(C,R.x+R.width-20,R.y+10,jt)}_t(E,(0,G.Wi)(y.description))(y.description,C,R.x,R.y,R.width,R.height,{class:`actor ${Be}`},E);let zt=y.height;if(mt.node){const jt=mt.node().getBBox();y.height=jt.height,zt=jt.height}return zt},"drawActorTypeParticipant"),Rt=(0,w.K2)(function(g,y,E,M){const m=M?y.stopy:y.starty,A=y.x+y.width/2,v=m+y.height,b=g.append("g").lower();var C=b;M||(re++,Object.keys(y.links||{}).length&&!E.forceMenus&&C.attr("onclick",dt(`actor${re}_popup`)).attr("cursor","pointer"),C.append("line").attr("id","actor"+re).attr("x1",A).attr("y1",v).attr("x2",A).attr("y2",2e3).attr("class","actor-line 200").attr("stroke-width","0.5px").attr("stroke","#999").attr("name",y.name),C=b.append("g"),y.actorCnt=re,null!=y.links&&C.attr("id","root-"+re));const R=(0,L.PB)();var Q="actor";y.properties?.class?Q=y.properties.class:R.fill="#eaeaea",Q+=M?` ${Or}`:` ${zr}`,R.x=y.x,R.y=m,R.width=y.width,R.height=y.height,R.class=Q,R.name=y.name;const zt={...R,x:R.x+-6,y:R.y+6,class:"actor"},jt=Xe(C,R);if(Xe(C,zt),y.rectData=R,y.properties?.icon){const Kt=y.properties.icon.trim();"@"===Kt.charAt(0)?(0,L.CP)(C,R.x+R.width-20,R.y+10,Kt.substr(1)):(0,L.aC)(C,R.x+R.width-20,R.y+10,Kt)}_t(E,(0,G.Wi)(y.description))(y.description,C,R.x-6,R.y+6,R.width,R.height,{class:`actor ${Be}`},E);let Vt=y.height;if(jt.node){const Kt=jt.node().getBBox();y.height=Kt.height,Vt=Kt.height}return Vt},"drawActorTypeCollections"),qt=(0,w.K2)(function(g,y,E,M){const m=M?y.stopy:y.starty,A=y.x+y.width/2,v=m+y.height,b=g.append("g").lower();let C=b;M||(re++,Object.keys(y.links||{}).length&&!E.forceMenus&&C.attr("onclick",dt(`actor${re}_popup`)).attr("cursor","pointer"),C.append("line").attr("id","actor"+re).attr("x1",A).attr("y1",v).attr("x2",A).attr("y2",2e3).attr("class","actor-line 200").attr("stroke-width","0.5px").attr("stroke","#999").attr("name",y.name),C=b.append("g"),y.actorCnt=re,null!=y.links&&C.attr("id","root-"+re));const R=(0,L.PB)();let Q="actor";y.properties?.class?Q=y.properties.class:R.fill="#eaeaea",Q+=M?` ${Or}`:` ${zr}`,R.x=y.x,R.y=m,R.width=y.width,R.height=y.height,R.class=Q,R.name=y.name;const mt=R.height/2,zt=mt/(2.5+R.height/50),jt=C.append("g"),Vt=C.append("g");if(jt.append("path").attr("d",`M ${R.x},${R.y+mt}\n    a ${zt},${mt} 0 0 0 0,${R.height}\n    h ${R.width-2*zt}\n    a ${zt},${mt} 0 0 0 0,-${R.height}\n    Z\n  `).attr("class",Q),Vt.append("path").attr("d",`M ${R.x},${R.y+mt}\n      a ${zt},${mt} 0 0 0 0,${R.height}`).attr("stroke","#666").attr("stroke-width","1px").attr("class",Q),jt.attr("transform",`translate(${zt}, ${-R.height/2})`),Vt.attr("transform",`translate(${R.width-zt}, ${-R.height/2})`),y.rectData=R,y.properties?.icon){const je=y.properties.icon.trim(),Ke=R.x+R.width-20,fr=R.y+10;"@"===je.charAt(0)?(0,L.CP)(C,Ke,fr,je.substr(1)):(0,L.aC)(C,Ke,fr,je)}_t(E,(0,G.Wi)(y.description))(y.description,C,R.x,R.y,R.width,R.height,{class:`actor ${Be}`},E);let Kt=y.height;const xe=jt.select("path:last-child");if(xe.node()){const je=xe.node().getBBox();y.height=je.height,Kt=je.height}return Kt},"drawActorTypeQueue"),V=(0,w.K2)(function(g,y,E,M){const m=M?y.stopy:y.starty,A=y.x+y.width/2,v=m+75,b=g.append("g").lower();M||(re++,b.append("line").attr("id","actor"+re).attr("x1",A).attr("y1",v).attr("x2",A).attr("y2",2e3).attr("class","actor-line 200").attr("stroke-width","0.5px").attr("stroke","#999").attr("name",y.name),y.actorCnt=re);const C=g.append("g");let R=Ir;R+=M?` ${Or}`:` ${zr}`,C.attr("class",R),C.attr("name",y.name);const Q=(0,L.PB)();Q.x=y.x,Q.y=m,Q.fill="#eaeaea",Q.width=y.width,Q.height=y.height,Q.class="actor";const mt=y.x+y.width/2,zt=m+30;C.append("defs").append("marker").attr("id","filled-head-control").attr("refX",11).attr("refY",5.8).attr("markerWidth",20).attr("markerHeight",28).attr("orient","172.5").append("path").attr("d","M 14.4 5.6 L 7.2 10.4 L 8.8 5.6 L 7.2 0.8 Z"),C.append("circle").attr("cx",mt).attr("cy",zt).attr("r",18).attr("fill","#eaeaf7").attr("stroke","#666").attr("stroke-width",1.2),C.append("line").attr("marker-end","url(#filled-head-control)").attr("transform",`translate(${mt}, ${zt-18})`);const Vt=C.node().getBBox();return y.height=Vt.height+2*(E?.sequence?.labelBoxHeight??0),_t(E,(0,G.Wi)(y.description))(y.description,C,Q.x,Q.y+18+(M?5:10),Q.width,Q.height,{class:`actor ${Ir}`},E),y.height},"drawActorTypeControl"),gt=(0,w.K2)(function(g,y,E,M){const m=M?y.stopy:y.starty,A=y.x+y.width/2,v=m+75,b=g.append("g").lower(),C=g.append("g");let R=Ir;R+=M?` ${Or}`:` ${zr}`,C.attr("class",R),C.attr("name",y.name);const Q=(0,L.PB)();Q.x=y.x,Q.y=m,Q.fill="#eaeaea",Q.width=y.width,Q.height=y.height,Q.class="actor";const mt=y.x+y.width/2,zt=m+(M?10:25);C.append("circle").attr("cx",mt).attr("cy",zt).attr("r",18).attr("width",y.width).attr("height",y.height),C.append("line").attr("x1",mt-18).attr("x2",mt+18).attr("y1",zt+18).attr("y2",zt+18).attr("stroke","#333").attr("stroke-width",2);const Vt=C.node().getBBox();return y.height=Vt.height+(E?.sequence?.labelBoxHeight??0),M||(re++,b.append("line").attr("id","actor"+re).attr("x1",A).attr("y1",v).attr("x2",A).attr("y2",2e3).attr("class","actor-line 200").attr("stroke-width","0.5px").attr("stroke","#999").attr("name",y.name),y.actorCnt=re),_t(E,(0,G.Wi)(y.description))(y.description,C,Q.x,Q.y+(M?(zt-m+18-5)/2:(zt+18-m)/2),Q.width,Q.height,{class:`actor ${Ir}`},E),C.attr("transform","translate(0, 9)"),y.height},"drawActorTypeEntity"),Y=(0,w.K2)(function(g,y,E,M){const m=M?y.stopy:y.starty,A=y.x+y.width/2,v=m+y.height+2*E.boxTextMargin,b=g.append("g").lower();let C=b;M||(re++,Object.keys(y.links||{}).length&&!E.forceMenus&&C.attr("onclick",dt(`actor${re}_popup`)).attr("cursor","pointer"),C.append("line").attr("id","actor"+re).attr("x1",A).attr("y1",v).attr("x2",A).attr("y2",2e3).attr("class","actor-line 200").attr("stroke-width","0.5px").attr("stroke","#999").attr("name",y.name),C=b.append("g"),y.actorCnt=re,null!=y.links&&C.attr("id","root-"+re));const R=(0,L.PB)();let Q="actor";y.properties?.class?Q=y.properties.class:R.fill="#eaeaea",Q+=M?` ${Or}`:` ${zr}`,R.x=y.x,R.y=m,R.width=y.width,R.height=y.height,R.class=Q,R.name=y.name,R.x=y.x,R.y=m;const mt=R.width/4,zt=R.width/4,jt=mt/2,Vt=jt/(2.5+mt/50),Kt=C.append("g"),xe=`\n  M ${R.x},${R.y+Vt}\n  a ${jt},${Vt} 0 0 0 ${mt},0\n  a ${jt},${Vt} 0 0 0 -${mt},0\n  l 0,${zt-2*Vt}\n  a ${jt},${Vt} 0 0 0 ${mt},0\n  l 0,-${zt-2*Vt}\n`;Kt.append("path").attr("d",xe).attr("fill","#eaeaea").attr("stroke","#000").attr("stroke-width",1).attr("class",Q),Kt.attr("transform",M?`translate(${1.5*mt}, ${R.height/4-2*Vt})`:`translate(${1.5*mt}, ${(R.height+Vt)/4})`),y.rectData=R,_t(E,(0,G.Wi)(y.description))(y.description,C,R.x,R.y+(M?(R.height+zt)/4:(R.height+Vt)/2),R.width,R.height,{class:`actor ${Be}`},E);const je=Kt.select("path:last-child");if(je.node()){const Ke=je.node().getBBox();y.height=Ke.height+(E.sequence.labelBoxHeight??0)}return y.height},"drawActorTypeDatabase"),Nt=(0,w.K2)(function(g,y,E,M){const m=M?y.stopy:y.starty,A=y.x+y.width/2,v=m+80,C=g.append("g").lower();M||(re++,C.append("line").attr("id","actor"+re).attr("x1",A).attr("y1",v).attr("x2",A).attr("y2",2e3).attr("class","actor-line 200").attr("stroke-width","0.5px").attr("stroke","#999").attr("name",y.name),y.actorCnt=re);const R=g.append("g");let Q=Ir;Q+=M?` ${Or}`:` ${zr}`,R.attr("class",Q),R.attr("name",y.name);const mt=(0,L.PB)();mt.x=y.x,mt.y=m,mt.fill="#eaeaea",mt.width=y.width,mt.height=y.height,mt.class="actor",R.append("line").attr("id","actor-man-torso"+re).attr("x1",y.x+y.width/2-75).attr("y1",m+10).attr("x2",y.x+y.width/2-15).attr("y2",m+10),R.append("line").attr("id","actor-man-arms"+re).attr("x1",y.x+y.width/2-75).attr("y1",m+0).attr("x2",y.x+y.width/2-75).attr("y2",m+20),R.append("circle").attr("cx",y.x+y.width/2).attr("cy",m+10).attr("r",30);const zt=R.node().getBBox();return y.height=zt.height+(E.sequence.labelBoxHeight??0),_t(E,(0,G.Wi)(y.description))(y.description,R,mt.x,mt.y+(M?11:18),mt.width,mt.height,{class:`actor ${Ir}`},E),R.attr("transform","translate(0,22)"),y.height},"drawActorTypeBoundary"),St=(0,w.K2)(function(g,y,E,M){const m=M?y.stopy:y.starty,A=y.x+y.width/2,v=m+80,b=g.append("g").lower();M||(re++,b.append("line").attr("id","actor"+re).attr("x1",A).attr("y1",v).attr("x2",A).attr("y2",2e3).attr("class","actor-line 200").attr("stroke-width","0.5px").attr("stroke","#999").attr("name",y.name),y.actorCnt=re);const C=g.append("g");let R=Ir;R+=M?` ${Or}`:` ${zr}`,C.attr("class",R),C.attr("name",y.name);const Q=(0,L.PB)();Q.x=y.x,Q.y=m,Q.fill="#eaeaea",Q.width=y.width,Q.height=y.height,Q.class="actor",Q.rx=3,Q.ry=3,C.append("line").attr("id","actor-man-torso"+re).attr("x1",A).attr("y1",m+25).attr("x2",A).attr("y2",m+45),C.append("line").attr("id","actor-man-arms"+re).attr("x1",A-18).attr("y1",m+33).attr("x2",A+18).attr("y2",m+33),C.append("line").attr("x1",A-18).attr("y1",m+60).attr("x2",A).attr("y2",m+45),C.append("line").attr("x1",A).attr("y1",m+45).attr("x2",A+18-2).attr("y2",m+60);const mt=C.append("circle");mt.attr("cx",y.x+y.width/2),mt.attr("cy",m+10),mt.attr("r",15),mt.attr("width",y.width),mt.attr("height",y.height);const zt=C.node().getBBox();return y.height=zt.height,_t(E,(0,G.Wi)(y.description))(y.description,C,Q.x,Q.y+35,Q.width,Q.height,{class:`actor ${Ir}`},E),y.height},"drawActorTypeActor"),Ut=(0,w.K2)(function(){var g=(0,lt.A)(function*(y,E,M,m){switch(E.type){case"actor":return yield St(y,E,M,m);case"participant":return yield ee(y,E,M,m);case"boundary":return yield Nt(y,E,M,m);case"control":return yield V(y,E,M,m);case"entity":return yield gt(y,E,M,m);case"database":return yield Y(y,E,M,m);case"collections":return yield Rt(y,E,M,m);case"queue":return yield qt(y,E,M,m)}});return function(y,E,M,m){return g.apply(this,arguments)}}(),"drawActor"),ye=(0,w.K2)(function(g,y,E){const m=g.append("g");qe(m,y),y.name&&_t(E)(y.name,m,y.x,y.y+E.boxTextMargin+(y.textMaxHeight||0)/2,y.width,0,{class:"text"},E),m.lower()},"drawBox"),le=(0,w.K2)(function(g){return g.append("g")},"anchorElement"),Pe=(0,w.K2)(function(g,y,E,M,m){const A=(0,L.PB)(),v=y.anchored;A.x=y.startx,A.y=y.starty,A.class="activation"+m%3,A.width=y.stopx-y.startx,A.height=E-y.starty,Xe(v,A)},"drawActivation"),oe=(0,w.K2)(function(){var g=(0,lt.A)(function*(y,E,M,m){const{boxMargin:A,boxTextMargin:v,labelBoxHeight:b,labelBoxWidth:C,messageFontFamily:R,messageFontSize:Q,messageFontWeight:mt}=m,zt=y.append("g"),jt=(0,w.K2)(function(xe,je,Ke,fr){return zt.append("line").attr("x1",xe).attr("y1",je).attr("x2",Ke).attr("y2",fr).attr("class","loopLine")},"drawLoopLine");jt(E.startx,E.starty,E.stopx,E.starty),jt(E.stopx,E.starty,E.stopx,E.stopy),jt(E.startx,E.stopy,E.stopx,E.stopy),jt(E.startx,E.starty,E.startx,E.stopy),void 0!==E.sections&&E.sections.forEach(function(xe){jt(E.startx,xe.y,E.stopx,xe.y).style("stroke-dasharray","3, 3")});let Vt=(0,L.HT)();Vt.text=M,Vt.x=E.startx,Vt.y=E.starty,Vt.fontFamily=R,Vt.fontSize=Q,Vt.fontWeight=mt,Vt.anchor="middle",Vt.valign="middle",Vt.tspan=!1,Vt.width=C||50,Vt.height=b||20,Vt.textMargin=v,Vt.class="labelText",X(zt,Vt),Vt=it(),Vt.text=E.title,Vt.x=E.startx+C/2+(E.stopx-E.startx)/2,Vt.y=E.starty+A+v,Vt.anchor="middle",Vt.valign="middle",Vt.textMargin=v,Vt.class="loopText",Vt.fontFamily=R,Vt.fontSize=Q,Vt.fontWeight=mt,Vt.wrap=!0;let Kt=(0,G.Wi)(Vt.text)?yield Bt(zt,Vt,E):Se(zt,Vt);if(void 0!==E.sectionTitles)for(const[xe,je]of Object.entries(E.sectionTitles))if(je.message){Vt.text=je.message,Vt.x=E.startx+(E.stopx-E.startx)/2,Vt.y=E.sections[xe].y+A+v,Vt.class="loopText",Vt.anchor="middle",Vt.valign="middle",Vt.tspan=!1,Vt.fontFamily=R,Vt.fontSize=Q,Vt.fontWeight=mt,Vt.wrap=E.wrap,(0,G.Wi)(Vt.text)?(E.starty=E.sections[xe].y,yield Bt(zt,Vt,E)):Se(zt,Vt);let Ke=Math.round(Kt.map(fr=>(fr._groups||fr)[0][0].getBBox().height).reduce((fr,lr)=>fr+lr));E.sections[xe].height+=Ke-(A+v)}return E.height=Math.round(E.stopy-E.starty),zt});return function(y,E,M,m){return g.apply(this,arguments)}}(),"drawLoop"),qe=(0,w.K2)(function(g,y){(0,L.lC)(g,y)},"drawBackgroundRect"),We=(0,w.K2)(function(g){g.append("defs").append("symbol").attr("id","database").attr("fill-rule","evenodd").attr("clip-rule","evenodd").append("path").attr("transform","scale(.5)").attr("d","M12.258.001l.256.004.255.005.253.008.251.01.249.012.247.015.246.016.242.019.241.02.239.023.236.024.233.027.231.028.229.031.225.032.223.034.22.036.217.038.214.04.211.041.208.043.205.045.201.046.198.048.194.05.191.051.187.053.183.054.18.056.175.057.172.059.168.06.163.061.16.063.155.064.15.066.074.033.073.033.071.034.07.034.069.035.068.035.067.035.066.035.064.036.064.036.062.036.06.036.06.037.058.037.058.037.055.038.055.038.053.038.052.038.051.039.05.039.048.039.047.039.045.04.044.04.043.04.041.04.04.041.039.041.037.041.036.041.034.041.033.042.032.042.03.042.029.042.027.042.026.043.024.043.023.043.021.043.02.043.018.044.017.043.015.044.013.044.012.044.011.045.009.044.007.045.006.045.004.045.002.045.001.045v17l-.001.045-.002.045-.004.045-.006.045-.007.045-.009.044-.011.045-.012.044-.013.044-.015.044-.017.043-.018.044-.02.043-.021.043-.023.043-.024.043-.026.043-.027.042-.029.042-.03.042-.032.042-.033.042-.034.041-.036.041-.037.041-.039.041-.04.041-.041.04-.043.04-.044.04-.045.04-.047.039-.048.039-.05.039-.051.039-.052.038-.053.038-.055.038-.055.038-.058.037-.058.037-.06.037-.06.036-.062.036-.064.036-.064.036-.066.035-.067.035-.068.035-.069.035-.07.034-.071.034-.073.033-.074.033-.15.066-.155.064-.16.063-.163.061-.168.06-.172.059-.175.057-.18.056-.183.054-.187.053-.191.051-.194.05-.198.048-.201.046-.205.045-.208.043-.211.041-.214.04-.217.038-.22.036-.223.034-.225.032-.229.031-.231.028-.233.027-.236.024-.239.023-.241.02-.242.019-.246.016-.247.015-.249.012-.251.01-.253.008-.255.005-.256.004-.258.001-.258-.001-.256-.004-.255-.005-.253-.008-.251-.01-.249-.012-.247-.015-.245-.016-.243-.019-.241-.02-.238-.023-.236-.024-.234-.027-.231-.028-.228-.031-.226-.032-.223-.034-.22-.036-.217-.038-.214-.04-.211-.041-.208-.043-.204-.045-.201-.046-.198-.048-.195-.05-.19-.051-.187-.053-.184-.054-.179-.056-.176-.057-.172-.059-.167-.06-.164-.061-.159-.063-.155-.064-.151-.066-.074-.033-.072-.033-.072-.034-.07-.034-.069-.035-.068-.035-.067-.035-.066-.035-.064-.036-.063-.036-.062-.036-.061-.036-.06-.037-.058-.037-.057-.037-.056-.038-.055-.038-.053-.038-.052-.038-.051-.039-.049-.039-.049-.039-.046-.039-.046-.04-.044-.04-.043-.04-.041-.04-.04-.041-.039-.041-.037-.041-.036-.041-.034-.041-.033-.042-.032-.042-.03-.042-.029-.042-.027-.042-.026-.043-.024-.043-.023-.043-.021-.043-.02-.043-.018-.044-.017-.043-.015-.044-.013-.044-.012-.044-.011-.045-.009-.044-.007-.045-.006-.045-.004-.045-.002-.045-.001-.045v-17l.001-.045.002-.045.004-.045.006-.045.007-.045.009-.044.011-.045.012-.044.013-.044.015-.044.017-.043.018-.044.02-.043.021-.043.023-.043.024-.043.026-.043.027-.042.029-.042.03-.042.032-.042.033-.042.034-.041.036-.041.037-.041.039-.041.04-.041.041-.04.043-.04.044-.04.046-.04.046-.039.049-.039.049-.039.051-.039.052-.038.053-.038.055-.038.056-.038.057-.037.058-.037.06-.037.061-.036.062-.036.063-.036.064-.036.066-.035.067-.035.068-.035.069-.035.07-.034.072-.034.072-.033.074-.033.151-.066.155-.064.159-.063.164-.061.167-.06.172-.059.176-.057.179-.056.184-.054.187-.053.19-.051.195-.05.198-.048.201-.046.204-.045.208-.043.211-.041.214-.04.217-.038.22-.036.223-.034.226-.032.228-.031.231-.028.234-.027.236-.024.238-.023.241-.02.243-.019.245-.016.247-.015.249-.012.251-.01.253-.008.255-.005.256-.004.258-.001.258.001zm-9.258 20.499v.01l.001.021.003.021.004.022.005.021.006.022.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.023.018.024.019.024.021.024.022.025.023.024.024.025.052.049.056.05.061.051.066.051.07.051.075.051.079.052.084.052.088.052.092.052.097.052.102.051.105.052.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.048.144.049.147.047.152.047.155.047.16.045.163.045.167.043.171.043.176.041.178.041.183.039.187.039.19.037.194.035.197.035.202.033.204.031.209.03.212.029.216.027.219.025.222.024.226.021.23.02.233.018.236.016.24.015.243.012.246.01.249.008.253.005.256.004.259.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.021.224-.024.22-.026.216-.027.212-.028.21-.031.205-.031.202-.034.198-.034.194-.036.191-.037.187-.039.183-.04.179-.04.175-.042.172-.043.168-.044.163-.045.16-.046.155-.046.152-.047.148-.048.143-.049.139-.049.136-.05.131-.05.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.053.083-.051.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.05.023-.024.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.023.01-.022.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.127l-.077.055-.08.053-.083.054-.085.053-.087.052-.09.052-.093.051-.095.05-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.045-.118.044-.12.043-.122.042-.124.042-.126.041-.128.04-.13.04-.132.038-.134.038-.135.037-.138.037-.139.035-.142.035-.143.034-.144.033-.147.032-.148.031-.15.03-.151.03-.153.029-.154.027-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.01-.179.008-.179.008-.181.006-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.006-.179-.008-.179-.008-.178-.01-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.027-.153-.029-.151-.03-.15-.03-.148-.031-.146-.032-.145-.033-.143-.034-.141-.035-.14-.035-.137-.037-.136-.037-.134-.038-.132-.038-.13-.04-.128-.04-.126-.041-.124-.042-.122-.042-.12-.044-.117-.043-.116-.045-.113-.045-.112-.046-.109-.047-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.05-.093-.052-.09-.051-.087-.052-.085-.053-.083-.054-.08-.054-.077-.054v4.127zm0-5.654v.011l.001.021.003.021.004.021.005.022.006.022.007.022.009.022.01.022.011.023.012.023.013.023.015.024.016.023.017.024.018.024.019.024.021.024.022.024.023.025.024.024.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.052.11.051.114.051.119.052.123.05.127.051.131.05.135.049.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.044.171.042.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.022.23.02.233.018.236.016.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.012.241-.015.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.048.139-.05.136-.049.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.051.051-.049.023-.025.023-.024.021-.025.02-.024.019-.024.018-.024.017-.024.015-.023.014-.023.013-.024.012-.022.01-.023.01-.023.008-.022.006-.022.006-.022.004-.021.004-.022.001-.021.001-.021v-4.139l-.077.054-.08.054-.083.054-.085.052-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.044-.118.044-.12.044-.122.042-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.035-.143.033-.144.033-.147.033-.148.031-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.009-.179.009-.179.007-.181.007-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.007-.179-.007-.179-.009-.178-.009-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.031-.146-.033-.145-.033-.143-.033-.141-.035-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.04-.126-.041-.124-.042-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.051-.093-.051-.09-.051-.087-.053-.085-.052-.083-.054-.08-.054-.077-.054v4.139zm0-5.666v.011l.001.02.003.022.004.021.005.022.006.021.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.024.018.023.019.024.021.025.022.024.023.024.024.025.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.051.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.043.171.043.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.021.23.02.233.018.236.017.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.013.241-.014.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.049.139-.049.136-.049.131-.051.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.049.023-.025.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.022.01-.023.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.153l-.077.054-.08.054-.083.053-.085.053-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.048-.105.048-.106.048-.109.046-.111.046-.114.046-.115.044-.118.044-.12.043-.122.043-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.034-.143.034-.144.033-.147.032-.148.032-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.024-.161.024-.162.023-.163.023-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.01-.178.01-.179.009-.179.007-.181.006-.182.006-.182.004-.184.003-.184.001-.185.001-.185-.001-.184-.001-.184-.003-.182-.004-.182-.006-.181-.006-.179-.007-.179-.009-.178-.01-.176-.01-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.023-.162-.023-.161-.024-.159-.024-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.032-.146-.032-.145-.033-.143-.034-.141-.034-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.041-.126-.041-.124-.041-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.048-.105-.048-.102-.048-.1-.05-.097-.049-.095-.051-.093-.051-.09-.052-.087-.052-.085-.053-.083-.053-.08-.054-.077-.054v4.153zm8.74-8.179l-.257.004-.254.005-.25.008-.247.011-.244.012-.241.014-.237.016-.233.018-.231.021-.226.022-.224.023-.22.026-.216.027-.212.028-.21.031-.205.032-.202.033-.198.034-.194.036-.191.038-.187.038-.183.04-.179.041-.175.042-.172.043-.168.043-.163.045-.16.046-.155.046-.152.048-.148.048-.143.048-.139.049-.136.05-.131.05-.126.051-.123.051-.118.051-.114.052-.11.052-.106.052-.101.052-.096.052-.092.052-.088.052-.083.052-.079.052-.074.051-.07.052-.065.051-.06.05-.056.05-.051.05-.023.025-.023.024-.021.024-.02.025-.019.024-.018.024-.017.023-.015.024-.014.023-.013.023-.012.023-.01.023-.01.022-.008.022-.006.023-.006.021-.004.022-.004.021-.001.021-.001.021.001.021.001.021.004.021.004.022.006.021.006.023.008.022.01.022.01.023.012.023.013.023.014.023.015.024.017.023.018.024.019.024.02.025.021.024.023.024.023.025.051.05.056.05.06.05.065.051.07.052.074.051.079.052.083.052.088.052.092.052.096.052.101.052.106.052.11.052.114.052.118.051.123.051.126.051.131.05.136.05.139.049.143.048.148.048.152.048.155.046.16.046.163.045.168.043.172.043.175.042.179.041.183.04.187.038.191.038.194.036.198.034.202.033.205.032.21.031.212.028.216.027.22.026.224.023.226.022.231.021.233.018.237.016.241.014.244.012.247.011.25.008.254.005.257.004.26.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.022.224-.023.22-.026.216-.027.212-.028.21-.031.205-.032.202-.033.198-.034.194-.036.191-.038.187-.038.183-.04.179-.041.175-.042.172-.043.168-.043.163-.045.16-.046.155-.046.152-.048.148-.048.143-.048.139-.049.136-.05.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.05.051-.05.023-.025.023-.024.021-.024.02-.025.019-.024.018-.024.017-.023.015-.024.014-.023.013-.023.012-.023.01-.023.01-.022.008-.022.006-.023.006-.021.004-.022.004-.021.001-.021.001-.021-.001-.021-.001-.021-.004-.021-.004-.022-.006-.021-.006-.023-.008-.022-.01-.022-.01-.023-.012-.023-.013-.023-.014-.023-.015-.024-.017-.023-.018-.024-.019-.024-.02-.025-.021-.024-.023-.024-.023-.025-.051-.05-.056-.05-.06-.05-.065-.051-.07-.052-.074-.051-.079-.052-.083-.052-.088-.052-.092-.052-.096-.052-.101-.052-.106-.052-.11-.052-.114-.052-.118-.051-.123-.051-.126-.051-.131-.05-.136-.05-.139-.049-.143-.048-.148-.048-.152-.048-.155-.046-.16-.046-.163-.045-.168-.043-.172-.043-.175-.042-.179-.041-.183-.04-.187-.038-.191-.038-.194-.036-.198-.034-.202-.033-.205-.032-.21-.031-.212-.028-.216-.027-.22-.026-.224-.023-.226-.022-.231-.021-.233-.018-.237-.016-.241-.014-.244-.012-.247-.011-.25-.008-.254-.005-.257-.004-.26-.001-.26.001z")},"insertDatabaseIcon"),Et=(0,w.K2)(function(g){g.append("defs").append("symbol").attr("id","computer").attr("width","24").attr("height","24").append("path").attr("transform","scale(.5)").attr("d","M2 2v13h20v-13h-20zm18 11h-16v-9h16v9zm-10.228 6l.466-1h3.524l.467 1h-4.457zm14.228 3h-24l2-6h2.104l-1.33 4h18.45l-1.297-4h2.073l2 6zm-5-10h-14v-7h14v7z")},"insertComputerIcon"),Tt=(0,w.K2)(function(g){g.append("defs").append("symbol").attr("id","clock").attr("width","24").attr("height","24").append("path").attr("transform","scale(.5)").attr("d","M12 2c5.514 0 10 4.486 10 10s-4.486 10-10 10-10-4.486-10-10 4.486-10 10-10zm0-2c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm5.848 12.459c.202.038.202.333.001.372-1.907.361-6.045 1.111-6.547 1.111-.719 0-1.301-.582-1.301-1.301 0-.512.77-5.447 1.125-7.445.034-.192.312-.181.343.014l.985 6.238 5.394 1.011z")},"insertClockIcon"),B=(0,w.K2)(function(g){g.append("defs").append("marker").attr("id","arrowhead").attr("refX",7.9).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto-start-reverse").append("path").attr("d","M -1 0 L 10 5 L 0 10 z")},"insertArrowHead"),N=(0,w.K2)(function(g){g.append("defs").append("marker").attr("id","filled-head").attr("refX",15.5).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")},"insertArrowFilledHead"),et=(0,w.K2)(function(g){g.append("defs").append("marker").attr("id","sequencenumber").attr("refX",15).attr("refY",15).attr("markerWidth",60).attr("markerHeight",40).attr("orient","auto").append("circle").attr("cx",15).attr("cy",15).attr("r",6)},"insertSequenceNumber"),yt=(0,w.K2)(function(g){g.append("defs").append("marker").attr("id","crosshead").attr("markerWidth",15).attr("markerHeight",8).attr("orient","auto").attr("refX",4).attr("refY",4.5).append("path").attr("fill","none").attr("stroke","#000000").style("stroke-dasharray","0, 0").attr("stroke-width","1pt").attr("d","M 1,2 L 6,7 M 6,2 L 1,7")},"insertArrowCrossHead"),it=(0,w.K2)(function(){return{x:0,y:0,fill:void 0,anchor:void 0,style:"#666",width:void 0,height:void 0,textMargin:0,rx:0,ry:0,tspan:!0,valign:void 0}},"getTextObj"),rt=(0,w.K2)(function(){return{x:0,y:0,fill:"#EDF2AE",stroke:"#666",width:100,anchor:"start",height:100,rx:0,ry:0}},"getNoteRect"),_t=function(){function g(v,b,C,R,Q,mt,zt){A(b.append("text").attr("x",C+Q/2).attr("y",R+mt/2+5).style("text-anchor","middle").text(v),zt)}function y(v,b,C,R,Q,mt,zt,jt){const{actorFontSize:Vt,actorFontFamily:Kt,actorFontWeight:xe}=jt,[je,Ke]=(0,ut.I5)(Vt),fr=v.split(G.Y2.lineBreakRegex);for(let lr=0;lr<fr.length;lr++){const br=lr*je-je*(fr.length-1)/2,$e=b.append("text").attr("x",C+Q/2).attr("y",R).style("text-anchor","middle").style("font-size",Ke).style("font-weight",xe).style("font-family",Kt);$e.append("tspan").attr("x",C+Q/2).attr("dy",br).text(fr[lr]),$e.attr("y",R+mt/2).attr("dominant-baseline","central").attr("alignment-baseline","central"),A($e,zt)}}function E(v,b,C,R,Q,mt,zt,jt){const Vt=b.append("switch"),xe=Vt.append("foreignObject").attr("x",C).attr("y",R).attr("width",Q).attr("height",mt).append("xhtml:div").style("display","table").style("height","100%").style("width","100%");xe.append("div").style("display","table-cell").style("text-align","center").style("vertical-align","middle").text(v),y(v,Vt,C,R,Q,mt,zt,jt),A(xe,zt)}function M(v,b,C,R,Q,mt,zt,jt){return m.apply(this,arguments)}function m(){return(m=(0,lt.A)(function*(v,b,C,R,Q,mt,zt,jt){const Vt=yield(0,G.Dl)(v,(0,G.zj)()),Kt=b.append("switch"),je=Kt.append("foreignObject").attr("x",C+Q/2-Vt.width/2).attr("y",R+mt/2-Vt.height/2).attr("width",Vt.width).attr("height",Vt.height).append("xhtml:div").style("height","100%").style("width","100%");je.append("div").style("text-align","center").style("vertical-align","middle").html(yield(0,G.dj)(v,(0,G.zj)())),y(v,Kt,C,R,Q,mt,zt,jt),A(je,zt)})).apply(this,arguments)}function A(v,b){for(const C in b)b.hasOwnProperty(C)&&v.attr(C,b[C])}return(0,w.K2)(g,"byText"),(0,w.K2)(y,"byTspan"),(0,w.K2)(E,"byFo"),(0,w.K2)(M,"byKatex"),(0,w.K2)(A,"_setTextAttrs"),function(v,b=!1){return b?M:"fo"===v.textPlacement?E:"old"===v.textPlacement?g:y}}(),ht=function(){function g(m,A,v,b,C,R,Q){M(A.append("text").attr("x",v).attr("y",b).style("text-anchor","start").text(m),Q)}function y(m,A,v,b,C,R,Q,mt){const{actorFontSize:zt,actorFontFamily:jt,actorFontWeight:Vt}=mt,Kt=m.split(G.Y2.lineBreakRegex);for(let xe=0;xe<Kt.length;xe++){const je=xe*zt-zt*(Kt.length-1)/2,Ke=A.append("text").attr("x",v).attr("y",b).style("text-anchor","start").style("font-size",zt).style("font-weight",Vt).style("font-family",jt);Ke.append("tspan").attr("x",v).attr("dy",je).text(Kt[xe]),Ke.attr("y",b+R/2).attr("dominant-baseline","central").attr("alignment-baseline","central"),M(Ke,Q)}}function E(m,A,v,b,C,R,Q,mt){const zt=A.append("switch"),Vt=zt.append("foreignObject").attr("x",v).attr("y",b).attr("width",C).attr("height",R).append("xhtml:div").style("display","table").style("height","100%").style("width","100%");Vt.append("div").style("display","table-cell").style("text-align","center").style("vertical-align","middle").text(m),y(m,zt,v,b,0,R,Q,mt),M(Vt,Q)}function M(m,A){for(const v in A)A.hasOwnProperty(v)&&m.attr(v,A[v])}return(0,w.K2)(g,"byText"),(0,w.K2)(y,"byTspan"),(0,w.K2)(E,"byFo"),(0,w.K2)(M,"_setTextAttrs"),function(m){return"fo"===m.textPlacement?E:"old"===m.textPlacement?g:y}}(),Ot={drawRect:Xe,drawText:Se,drawLabel:X,drawActor:Ut,drawBox:ye,drawPopup:z,anchorElement:le,drawActivation:Pe,drawLoop:oe,drawBackgroundRect:qe,insertArrowHead:B,insertArrowFilledHead:N,insertSequenceNumber:et,insertArrowCrossHead:yt,insertDatabaseIcon:We,insertComputerIcon:Et,insertClockIcon:Tt,getTextObj:it,getNoteRect:rt,fixLifeLineHeights:S,sanitizeUrl:At.J},H={},ot={data:{startx:void 0,stopx:void 0,starty:void 0,stopy:void 0},verticalPos:0,sequenceItems:[],activations:[],models:{getHeight:(0,w.K2)(function(){return Math.max.apply(null,0===this.actors.length?[0]:this.actors.map(g=>g.height||0))+(0===this.loops.length?0:this.loops.map(g=>g.height||0).reduce((g,y)=>g+y))+(0===this.messages.length?0:this.messages.map(g=>g.height||0).reduce((g,y)=>g+y))+(0===this.notes.length?0:this.notes.map(g=>g.height||0).reduce((g,y)=>g+y))},"getHeight"),clear:(0,w.K2)(function(){this.actors=[],this.boxes=[],this.loops=[],this.messages=[],this.notes=[]},"clear"),addBox:(0,w.K2)(function(g){this.boxes.push(g)},"addBox"),addActor:(0,w.K2)(function(g){this.actors.push(g)},"addActor"),addLoop:(0,w.K2)(function(g){this.loops.push(g)},"addLoop"),addMessage:(0,w.K2)(function(g){this.messages.push(g)},"addMessage"),addNote:(0,w.K2)(function(g){this.notes.push(g)},"addNote"),lastActor:(0,w.K2)(function(){return this.actors[this.actors.length-1]},"lastActor"),lastLoop:(0,w.K2)(function(){return this.loops[this.loops.length-1]},"lastLoop"),lastMessage:(0,w.K2)(function(){return this.messages[this.messages.length-1]},"lastMessage"),lastNote:(0,w.K2)(function(){return this.notes[this.notes.length-1]},"lastNote"),actors:[],boxes:[],loops:[],messages:[],notes:[]},init:(0,w.K2)(function(){this.sequenceItems=[],this.activations=[],this.models.clear(),this.data={startx:void 0,stopx:void 0,starty:void 0,stopy:void 0},this.verticalPos=0,we((0,G.D7)())},"init"),updateVal:(0,w.K2)(function(g,y,E,M){g[y]=void 0===g[y]?E:M(E,g[y])},"updateVal"),updateBounds:(0,w.K2)(function(g,y,E,M){const m=this;let A=0;function v(b){return(0,w.K2)(function(R){A++;const Q=m.sequenceItems.length-A+1;m.updateVal(R,"starty",y-Q*H.boxMargin,Math.min),m.updateVal(R,"stopy",M+Q*H.boxMargin,Math.max),m.updateVal(ot.data,"startx",g-Q*H.boxMargin,Math.min),m.updateVal(ot.data,"stopx",E+Q*H.boxMargin,Math.max),"activation"!==b&&(m.updateVal(R,"startx",g-Q*H.boxMargin,Math.min),m.updateVal(R,"stopx",E+Q*H.boxMargin,Math.max),m.updateVal(ot.data,"starty",y-Q*H.boxMargin,Math.min),m.updateVal(ot.data,"stopy",M+Q*H.boxMargin,Math.max))},"updateItemBounds")}(0,w.K2)(v,"updateFn"),this.sequenceItems.forEach(v()),this.activations.forEach(v("activation"))},"updateBounds"),insert:(0,w.K2)(function(g,y,E,M){const m=G.Y2.getMin(g,E),A=G.Y2.getMax(g,E),v=G.Y2.getMin(y,M),b=G.Y2.getMax(y,M);this.updateVal(ot.data,"startx",m,Math.min),this.updateVal(ot.data,"starty",v,Math.min),this.updateVal(ot.data,"stopx",A,Math.max),this.updateVal(ot.data,"stopy",b,Math.max),this.updateBounds(m,v,A,b)},"insert"),newActivation:(0,w.K2)(function(g,y,E){const M=E.get(g.from),m=sr(g.from).length||0,A=M.x+M.width/2+(m-1)*H.activationWidth/2;this.activations.push({startx:A,starty:this.verticalPos+2,stopx:A+H.activationWidth,stopy:void 0,actor:g.from,anchored:Ot.anchorElement(y)})},"newActivation"),endActivation:(0,w.K2)(function(g){const y=this.activations.map(function(E){return E.actor}).lastIndexOf(g.from);return this.activations.splice(y,1)[0]},"endActivation"),createLoop:(0,w.K2)(function(g={message:void 0,wrap:!1,width:void 0},y){return{startx:void 0,starty:this.verticalPos,stopx:void 0,stopy:void 0,title:g.message,wrap:g.wrap,width:g.width,height:0,fill:y}},"createLoop"),newLoop:(0,w.K2)(function(g={message:void 0,wrap:!1,width:void 0},y){this.sequenceItems.push(this.createLoop(g,y))},"newLoop"),endLoop:(0,w.K2)(function(){return this.sequenceItems.pop()},"endLoop"),isLoopOverlap:(0,w.K2)(function(){return!!this.sequenceItems.length&&this.sequenceItems[this.sequenceItems.length-1].overlap},"isLoopOverlap"),addSectionToLoop:(0,w.K2)(function(g){const y=this.sequenceItems.pop();y.sections=y.sections||[],y.sectionTitles=y.sectionTitles||[],y.sections.push({y:ot.getVerticalPos(),height:0}),y.sectionTitles.push(g),this.sequenceItems.push(y)},"addSectionToLoop"),saveVerticalPos:(0,w.K2)(function(){this.isLoopOverlap()&&(this.savedVerticalPos=this.verticalPos)},"saveVerticalPos"),resetVerticalPos:(0,w.K2)(function(){this.isLoopOverlap()&&(this.verticalPos=this.savedVerticalPos)},"resetVerticalPos"),bumpVerticalPos:(0,w.K2)(function(g){this.verticalPos=this.verticalPos+g,this.data.stopy=G.Y2.getMax(this.data.stopy,this.verticalPos)},"bumpVerticalPos"),getVerticalPos:(0,w.K2)(function(){return this.verticalPos},"getVerticalPos"),getBounds:(0,w.K2)(function(){return{bounds:this.data,models:this.models}},"getBounds")},ke=(0,w.K2)(function(){var g=(0,lt.A)(function*(y,E){ot.bumpVerticalPos(H.boxMargin),E.height=H.boxMargin,E.starty=ot.getVerticalPos();const M=(0,L.PB)();M.x=E.startx,M.y=E.starty,M.width=E.width||H.width,M.class="note";const m=y.append("g"),A=Ot.drawRect(m,M),v=(0,L.HT)();v.x=E.startx,v.y=E.starty,v.width=M.width,v.dy="1em",v.text=E.message,v.class="noteText",v.fontFamily=H.noteFontFamily,v.fontSize=H.noteFontSize,v.fontWeight=H.noteFontWeight,v.anchor=H.noteAlign,v.textMargin=H.noteMargin,v.valign="center";const b=(0,G.Wi)(v.text)?yield Bt(m,v):Se(m,v),C=Math.round(b.map(R=>(R._groups||R)[0][0].getBBox().height).reduce((R,Q)=>R+Q));A.attr("height",C+2*H.noteMargin),E.height+=C+2*H.noteMargin,ot.bumpVerticalPos(C+2*H.noteMargin),E.stopy=E.starty+C+2*H.noteMargin,E.stopx=E.startx+M.width,ot.insert(E.startx,E.starty,E.stopx,E.stopy),ot.models.addNote(E)});return function(y,E){return g.apply(this,arguments)}}(),"drawNote"),Pt=(0,w.K2)(g=>({fontFamily:g.messageFontFamily,fontSize:g.messageFontSize,fontWeight:g.messageFontWeight}),"messageFont"),Zt=(0,w.K2)(g=>({fontFamily:g.noteFontFamily,fontSize:g.noteFontSize,fontWeight:g.noteFontWeight}),"noteFont"),pe=(0,w.K2)(g=>({fontFamily:g.actorFontFamily,fontSize:g.actorFontSize,fontWeight:g.actorFontWeight}),"actorFont");function Re(g,y){return Ze.apply(this,arguments)}function Ze(){return(Ze=(0,lt.A)(function*(g,y){ot.bumpVerticalPos(10);const{startx:E,stopx:M,message:m}=y,A=G.Y2.splitBreaks(m).length,v=(0,G.Wi)(m),b=v?yield(0,G.Dl)(m,(0,G.D7)()):ut._K.calculateTextDimensions(m,Pt(H));if(!v){const mt=b.height/A;y.height+=mt,ot.bumpVerticalPos(mt)}let C,R=b.height-10;const Q=b.width;if(E===M){C=ot.getVerticalPos()+R,H.rightAngles||(R+=H.boxMargin,C=ot.getVerticalPos()+R),R+=30;const mt=G.Y2.getMax(Q/2,H.width/2);ot.insert(E-mt,ot.getVerticalPos()-10+R,M+mt,ot.getVerticalPos()+30+R)}else R+=H.boxMargin,C=ot.getVerticalPos()+R,ot.insert(E,C-10,M,C);return ot.bumpVerticalPos(R),y.height+=R,y.stopy=y.starty+y.height,ot.insert(y.fromBounds,y.starty,y.toBounds,y.stopy),C})).apply(this,arguments)}(0,w.K2)(Re,"boundMessage");var de=(0,w.K2)(function(){var g=(0,lt.A)(function*(y,E,M,m){const{startx:A,stopx:v,starty:b,message:C,type:R,sequenceIndex:Q,sequenceVisible:mt}=E,zt=ut._K.calculateTextDimensions(C,Pt(H)),jt=(0,L.HT)();jt.x=A,jt.y=b+10,jt.width=v-A,jt.class="messageText",jt.dy="1em",jt.text=C,jt.fontFamily=H.messageFontFamily,jt.fontSize=H.messageFontSize,jt.fontWeight=H.messageFontWeight,jt.anchor=H.messageAlign,jt.valign="center",jt.textMargin=H.wrapPadding,jt.tspan=!1,(0,G.Wi)(jt.text)?yield Bt(y,jt,{startx:A,stopx:v,starty:M}):Se(y,jt);const Vt=zt.width;let Kt;A===v?Kt=H.rightAngles?y.append("path").attr("d",`M  ${A},${M} H ${A+G.Y2.getMax(H.width/2,Vt/2)} V ${M+25} H ${A}`):y.append("path").attr("d","M "+A+","+M+" C "+(A+60)+","+(M-10)+" "+(A+60)+","+(M+30)+" "+A+","+(M+20)):(Kt=y.append("line"),Kt.attr("x1",A),Kt.attr("y1",M),Kt.attr("x2",v),Kt.attr("y2",M)),R===m.db.LINETYPE.DOTTED||R===m.db.LINETYPE.DOTTED_CROSS||R===m.db.LINETYPE.DOTTED_POINT||R===m.db.LINETYPE.DOTTED_OPEN||R===m.db.LINETYPE.BIDIRECTIONAL_DOTTED?(Kt.style("stroke-dasharray","3, 3"),Kt.attr("class","messageLine1")):Kt.attr("class","messageLine0");let xe="";H.arrowMarkerAbsolute&&(xe=(0,G.ID)(!0)),Kt.attr("stroke-width",2),Kt.attr("stroke","none"),Kt.style("fill","none"),(R===m.db.LINETYPE.SOLID||R===m.db.LINETYPE.DOTTED)&&Kt.attr("marker-end","url("+xe+"#arrowhead)"),(R===m.db.LINETYPE.BIDIRECTIONAL_SOLID||R===m.db.LINETYPE.BIDIRECTIONAL_DOTTED)&&(Kt.attr("marker-start","url("+xe+"#arrowhead)"),Kt.attr("marker-end","url("+xe+"#arrowhead)")),(R===m.db.LINETYPE.SOLID_POINT||R===m.db.LINETYPE.DOTTED_POINT)&&Kt.attr("marker-end","url("+xe+"#filled-head)"),(R===m.db.LINETYPE.SOLID_CROSS||R===m.db.LINETYPE.DOTTED_CROSS)&&Kt.attr("marker-end","url("+xe+"#crosshead)"),(mt||H.showSequenceNumbers)&&((R===m.db.LINETYPE.BIDIRECTIONAL_SOLID||R===m.db.LINETYPE.BIDIRECTIONAL_DOTTED)&&Kt.attr("x1",A<v?A+12:A+6),y.append("line").attr("x1",A).attr("y1",M).attr("x2",A).attr("y2",M).attr("stroke-width",0).attr("marker-start","url("+xe+"#sequencenumber)"),y.append("text").attr("x",A).attr("y",M+4).attr("font-family","sans-serif").attr("font-size","12px").attr("text-anchor","middle").attr("class","sequenceNumber").text(Q))});return function(y,E,M,m){return g.apply(this,arguments)}}(),"drawMessage"),yr=(0,w.K2)(function(g,y,E,M,m,A,v){let R,b=0,C=0,Q=0;for(const mt of M){const zt=y.get(mt),jt=zt.box;R&&R!=jt&&(v||ot.models.addBox(R),C+=H.boxMargin+R.margin),jt&&jt!=R&&(v||(jt.x=b+C,jt.y=m),C+=jt.margin),zt.width=zt.width||H.width,zt.height=G.Y2.getMax(zt.height||H.height,H.height),zt.margin=zt.margin||H.actorMargin,Q=G.Y2.getMax(Q,zt.height),E.get(zt.name)&&(C+=zt.width/2),zt.x=b+C,zt.starty=ot.getVerticalPos(),ot.insert(zt.x,m,zt.x+zt.width,zt.height),b+=zt.width+C,zt.box&&(zt.box.width=b+jt.margin-zt.box.x),C=zt.margin,R=zt.box,ot.models.addActor(zt)}R&&!v&&ot.models.addBox(R),ot.bumpVerticalPos(Q)},"addActorRenderingData"),mr=(0,w.K2)(function(){var g=(0,lt.A)(function*(y,E,M,m){if(m){let A=0;ot.bumpVerticalPos(2*H.boxMargin);for(const v of M){const b=E.get(v);b.stopy||(b.stopy=ot.getVerticalPos());const C=yield Ot.drawActor(y,b,H,!0);A=G.Y2.getMax(A,C)}ot.bumpVerticalPos(A+H.boxMargin)}else for(const A of M){const v=E.get(A);yield Ot.drawActor(y,v,H,!1)}});return function(y,E,M,m){return g.apply(this,arguments)}}(),"drawActors"),Wt=(0,w.K2)(function(g,y,E,M){let m=0,A=0;for(const v of E){const b=y.get(v),C=Dr(b),R=Ot.drawPopup(g,b,C,H,H.forceMenus,M);R.height>m&&(m=R.height),R.width+b.x>A&&(A=R.width+b.x)}return{maxHeight:m,maxWidth:A}},"drawActorsPopup"),we=(0,w.K2)(function(g){(0,G.hH)(H,g),g.fontFamily&&(H.actorFontFamily=H.noteFontFamily=H.messageFontFamily=g.fontFamily),g.fontSize&&(H.actorFontSize=H.noteFontSize=H.messageFontSize=g.fontSize),g.fontWeight&&(H.actorFontWeight=H.noteFontWeight=H.messageFontWeight=g.fontWeight)},"setConf"),sr=(0,w.K2)(function(g){return ot.activations.filter(function(y){return y.actor===g})},"actorActivations"),ve=(0,w.K2)(function(g,y){const E=y.get(g),M=sr(g);return[M.reduce(function(v,b){return G.Y2.getMin(v,b.startx)},E.x+E.width/2-1),M.reduce(function(v,b){return G.Y2.getMax(v,b.stopx)},E.x+E.width/2+1)]},"activationBounds");function ce(g,y,E,M,m){ot.bumpVerticalPos(E);let A=M;if(y.id&&y.message&&g[y.id]){const v=g[y.id].width,b=Pt(H);y.message=ut._K.wrapLabel(`[${y.message}]`,v-2*H.wrapPadding,b),y.width=v,y.wrap=!0;const C=ut._K.calculateTextDimensions(y.message,b),R=G.Y2.getMax(C.height,H.labelBoxHeight);A=M+R,w.Rm.debug(`${R} - ${y.message}`)}m(y),ot.bumpVerticalPos(A)}function Ee(g,y,E,M,m,A,v){function b(Q,mt){Q.x<m.get(g.from).x?(ot.insert(y.stopx-mt,y.starty,y.startx,y.stopy+Q.height/2+H.noteMargin),y.stopx=y.stopx+mt):(ot.insert(y.startx,y.starty,y.stopx+mt,y.stopy+Q.height/2+H.noteMargin),y.stopx=y.stopx-mt)}function C(Q,mt){Q.x<m.get(g.to).x?(ot.insert(y.startx-mt,y.starty,y.stopx,y.stopy+Q.height/2+H.noteMargin),y.startx=y.startx+mt):(ot.insert(y.stopx,y.starty,y.startx+mt,y.stopy+Q.height/2+H.noteMargin),y.startx=y.startx-mt)}(0,w.K2)(b,"receiverAdjustment"),(0,w.K2)(C,"senderAdjustment");const R=["actor","control","entity","database"];if(A.get(g.to)==M){const Q=m.get(g.to);b(Q,R.includes(Q.type)?21:Q.width/2+3),Q.starty=E-Q.height/2,ot.bumpVerticalPos(Q.height/2)}else if(v.get(g.from)==M){const Q=m.get(g.from);H.mirrorActors&&C(Q,R.includes(Q.type)?18:Q.width/2),Q.stopy=E-Q.height/2,ot.bumpVerticalPos(Q.height/2)}else if(v.get(g.to)==M){const Q=m.get(g.to);H.mirrorActors&&b(Q,R.includes(Q.type)?21:Q.width/2+3),Q.stopy=E-Q.height/2,ot.bumpVerticalPos(Q.height/2)}}(0,w.K2)(ce,"adjustLoopHeightForWrap"),(0,w.K2)(Ee,"adjustCreatedDestroyedData");var Ae=(0,w.K2)(function(){var g=(0,lt.A)(function*(y,E,M,m){const{securityLevel:A,sequence:v}=(0,G.D7)();let b;H=v,"sandbox"===A&&(b=(0,Lt.Ltv)("#i"+E));const C=(0,Lt.Ltv)("sandbox"===A?b.nodes()[0].contentDocument.body:"body"),R="sandbox"===A?b.nodes()[0].contentDocument:document;ot.init(),w.Rm.debug(m.db);const Q="sandbox"===A?C.select(`[id="${E}"]`):(0,Lt.Ltv)(`[id="${E}"]`),mt=m.db.getActors(),zt=m.db.getCreatedActors(),jt=m.db.getDestroyedActors(),Vt=m.db.getBoxes();let Kt=m.db.getActorKeys();const xe=m.db.getMessages(),je=m.db.getDiagramTitle(),Ke=m.db.hasAtLeastOneBox(),fr=m.db.hasAtLeastOneBoxWithTitle(),lr=yield er(mt,xe,m);if(H.height=yield _e(mt,lr,Vt),Ot.insertComputerIcon(Q),Ot.insertDatabaseIcon(Q),Ot.insertClockIcon(Q),Ke&&(ot.bumpVerticalPos(H.boxMargin),fr&&ot.bumpVerticalPos(Vt[0].textMaxHeight)),!0===H.hideUnusedParticipants){const ur=new Set;xe.forEach(W=>{ur.add(W.from),ur.add(W.to)}),Kt=Kt.filter(W=>ur.has(W))}yr(Q,mt,zt,Kt,0,xe,!1);const br=yield ne(xe,mt,lr,m);function $e(ur,W){const $t=ot.endActivation(ur);$t.starty+18>W&&($t.starty=W-6,W+=12),Ot.drawActivation(Q,$t,W,H,sr(ur.from).length),ot.insert($t.startx,W-10,$t.stopx,W)}Ot.insertArrowHead(Q),Ot.insertArrowCrossHead(Q),Ot.insertArrowFilledHead(Q),Ot.insertSequenceNumber(Q),(0,w.K2)($e,"activeEnd");let He=1,wr=1;const kr=[],Kr=[];let _r=0;for(const ur of xe){let W,$t,Ye;switch(ur.type){case m.db.LINETYPE.NOTE:ot.resetVerticalPos(),$t=ur.noteModel,yield ke(Q,$t);break;case m.db.LINETYPE.ACTIVE_START:ot.newActivation(ur,Q,mt);break;case m.db.LINETYPE.ACTIVE_END:$e(ur,ot.getVerticalPos());break;case m.db.LINETYPE.LOOP_START:ce(br,ur,H.boxMargin,H.boxMargin+H.boxTextMargin,Fe=>ot.newLoop(Fe));break;case m.db.LINETYPE.LOOP_END:W=ot.endLoop(),yield Ot.drawLoop(Q,W,"loop",H),ot.bumpVerticalPos(W.stopy-ot.getVerticalPos()),ot.models.addLoop(W);break;case m.db.LINETYPE.RECT_START:ce(br,ur,H.boxMargin,H.boxMargin,Fe=>ot.newLoop(void 0,Fe.message));break;case m.db.LINETYPE.RECT_END:W=ot.endLoop(),Kr.push(W),ot.models.addLoop(W),ot.bumpVerticalPos(W.stopy-ot.getVerticalPos());break;case m.db.LINETYPE.OPT_START:ce(br,ur,H.boxMargin,H.boxMargin+H.boxTextMargin,Fe=>ot.newLoop(Fe));break;case m.db.LINETYPE.OPT_END:W=ot.endLoop(),yield Ot.drawLoop(Q,W,"opt",H),ot.bumpVerticalPos(W.stopy-ot.getVerticalPos()),ot.models.addLoop(W);break;case m.db.LINETYPE.ALT_START:ce(br,ur,H.boxMargin,H.boxMargin+H.boxTextMargin,Fe=>ot.newLoop(Fe));break;case m.db.LINETYPE.ALT_ELSE:ce(br,ur,H.boxMargin+H.boxTextMargin,H.boxMargin,Fe=>ot.addSectionToLoop(Fe));break;case m.db.LINETYPE.ALT_END:W=ot.endLoop(),yield Ot.drawLoop(Q,W,"alt",H),ot.bumpVerticalPos(W.stopy-ot.getVerticalPos()),ot.models.addLoop(W);break;case m.db.LINETYPE.PAR_START:case m.db.LINETYPE.PAR_OVER_START:ce(br,ur,H.boxMargin,H.boxMargin+H.boxTextMargin,Fe=>ot.newLoop(Fe)),ot.saveVerticalPos();break;case m.db.LINETYPE.PAR_AND:ce(br,ur,H.boxMargin+H.boxTextMargin,H.boxMargin,Fe=>ot.addSectionToLoop(Fe));break;case m.db.LINETYPE.PAR_END:W=ot.endLoop(),yield Ot.drawLoop(Q,W,"par",H),ot.bumpVerticalPos(W.stopy-ot.getVerticalPos()),ot.models.addLoop(W);break;case m.db.LINETYPE.AUTONUMBER:He=ur.message.start||He,wr=ur.message.step||wr,ur.message.visible?m.db.enableSequenceNumbers():m.db.disableSequenceNumbers();break;case m.db.LINETYPE.CRITICAL_START:ce(br,ur,H.boxMargin,H.boxMargin+H.boxTextMargin,Fe=>ot.newLoop(Fe));break;case m.db.LINETYPE.CRITICAL_OPTION:ce(br,ur,H.boxMargin+H.boxTextMargin,H.boxMargin,Fe=>ot.addSectionToLoop(Fe));break;case m.db.LINETYPE.CRITICAL_END:W=ot.endLoop(),yield Ot.drawLoop(Q,W,"critical",H),ot.bumpVerticalPos(W.stopy-ot.getVerticalPos()),ot.models.addLoop(W);break;case m.db.LINETYPE.BREAK_START:ce(br,ur,H.boxMargin,H.boxMargin+H.boxTextMargin,Fe=>ot.newLoop(Fe));break;case m.db.LINETYPE.BREAK_END:W=ot.endLoop(),yield Ot.drawLoop(Q,W,"break",H),ot.bumpVerticalPos(W.stopy-ot.getVerticalPos()),ot.models.addLoop(W);break;default:try{Ye=ur.msgModel,Ye.starty=ot.getVerticalPos(),Ye.sequenceIndex=He,Ye.sequenceVisible=m.db.showSequenceNumbers();const Fe=yield Re(Q,Ye);Ee(ur,Ye,Fe,_r,mt,zt,jt),kr.push({messageModel:Ye,lineStartY:Fe}),ot.models.addMessage(Ye)}catch(Fe){w.Rm.error("error while drawing message",Fe)}}[m.db.LINETYPE.SOLID_OPEN,m.db.LINETYPE.DOTTED_OPEN,m.db.LINETYPE.SOLID,m.db.LINETYPE.DOTTED,m.db.LINETYPE.SOLID_CROSS,m.db.LINETYPE.DOTTED_CROSS,m.db.LINETYPE.SOLID_POINT,m.db.LINETYPE.DOTTED_POINT,m.db.LINETYPE.BIDIRECTIONAL_SOLID,m.db.LINETYPE.BIDIRECTIONAL_DOTTED].includes(ur.type)&&(He+=wr),_r++}w.Rm.debug("createdActors",zt),w.Rm.debug("destroyedActors",jt),yield mr(Q,mt,Kt,!1);for(const ur of kr)yield de(Q,ur.messageModel,ur.lineStartY,m);H.mirrorActors&&(yield mr(Q,mt,Kt,!0)),Kr.forEach(ur=>Ot.drawBackgroundRect(Q,ur)),S(Q,mt,Kt,H);for(const ur of ot.models.boxes){ur.height=ot.getVerticalPos()-ur.y,ot.insert(ur.x,ur.y,ur.x+ur.width,ur.height);const W=2*H.boxMargin;ur.startx=ur.x-W,ur.starty=ur.y-.25*W,ur.stopx=ur.startx+ur.width+2*W,ur.stopy=ur.starty+ur.height+.75*W,ur.stroke="rgb(0,0,0, 0.5)",Ot.drawBox(Q,ur,H)}Ke&&ot.bumpVerticalPos(H.boxMargin);const Jr=Wt(Q,mt,Kt,R),{bounds:Lr}=ot.getBounds();void 0===Lr.startx&&(Lr.startx=0),void 0===Lr.starty&&(Lr.starty=0),void 0===Lr.stopx&&(Lr.stopx=0),void 0===Lr.stopy&&(Lr.stopy=0);let ha=Lr.stopy-Lr.starty;ha<Jr.maxHeight&&(ha=Jr.maxHeight);let ia=ha+2*H.diagramMarginY;H.mirrorActors&&(ia=ia-H.boxMargin+H.bottomMarginAdj);let jr=Lr.stopx-Lr.startx;jr<Jr.maxWidth&&(jr=Jr.maxWidth);const Qr=jr+2*H.diagramMarginX;je&&Q.append("text").text(je).attr("x",(Lr.stopx-Lr.startx)/2-2*H.diagramMarginX).attr("y",-25),(0,G.a$)(Q,ia,Qr,H.useMaxWidth);const or=je?40:0;Q.attr("viewBox",Lr.startx-H.diagramMarginX+" -"+(H.diagramMarginY+or)+" "+Qr+" "+(ia+or)),w.Rm.debug("models:",ot.models)});return function(y,E,M,m){return g.apply(this,arguments)}}(),"draw");function er(g,y,E){return Qe.apply(this,arguments)}function Qe(){return(Qe=(0,lt.A)(function*(g,y,E){const M={};for(const m of y)if(g.get(m.to)&&g.get(m.from)){const A=g.get(m.to);if(m.placement===E.db.PLACEMENT.LEFTOF&&!A.prevActor||m.placement===E.db.PLACEMENT.RIGHTOF&&!A.nextActor)continue;const v=void 0!==m.placement,b=!v,C=v?Zt(H):Pt(H),R=m.wrap?ut._K.wrapLabel(m.message,H.width-2*H.wrapPadding,C):m.message,mt=((0,G.Wi)(R)?yield(0,G.Dl)(m.message,(0,G.D7)()):ut._K.calculateTextDimensions(R,C)).width+2*H.wrapPadding;b&&m.from===A.nextActor?M[m.to]=G.Y2.getMax(M[m.to]||0,mt):b&&m.from===A.prevActor?M[m.from]=G.Y2.getMax(M[m.from]||0,mt):b&&m.from===m.to?(M[m.from]=G.Y2.getMax(M[m.from]||0,mt/2),M[m.to]=G.Y2.getMax(M[m.to]||0,mt/2)):m.placement===E.db.PLACEMENT.RIGHTOF?M[m.from]=G.Y2.getMax(M[m.from]||0,mt):m.placement===E.db.PLACEMENT.LEFTOF?M[A.prevActor]=G.Y2.getMax(M[A.prevActor]||0,mt):m.placement===E.db.PLACEMENT.OVER&&(A.prevActor&&(M[A.prevActor]=G.Y2.getMax(M[A.prevActor]||0,mt/2)),A.nextActor&&(M[m.from]=G.Y2.getMax(M[m.from]||0,mt/2)))}return w.Rm.debug("maxMessageWidthPerActor:",M),M})).apply(this,arguments)}(0,w.K2)(er,"getMaxMessageWidthPerActor");var Dr=(0,w.K2)(function(g){let y=0;const E=pe(H);for(const M in g.links){const A=ut._K.calculateTextDimensions(M,E).width+2*H.wrapPadding+2*H.boxMargin;y<A&&(y=A)}return y},"getRequiredPopupWidth");function _e(g,y,E){return Yr.apply(this,arguments)}function Yr(){return(Yr=(0,lt.A)(function*(g,y,E){let M=0;for(const A of g.keys()){const v=g.get(A);v.wrap&&(v.description=ut._K.wrapLabel(v.description,H.width-2*H.wrapPadding,pe(H)));const b=(0,G.Wi)(v.description)?yield(0,G.Dl)(v.description,(0,G.D7)()):ut._K.calculateTextDimensions(v.description,pe(H));v.width=v.wrap?H.width:G.Y2.getMax(H.width,b.width+2*H.wrapPadding),v.height=v.wrap?G.Y2.getMax(b.height,H.height):H.height,M=G.Y2.getMax(M,v.height)}for(const A in y){const v=g.get(A);if(!v)continue;const b=g.get(v.nextActor);b?v.margin=G.Y2.getMax(y[A]+H.actorMargin-v.width/2-b.width/2,H.actorMargin):v.margin=G.Y2.getMax(y[A]+H.actorMargin-v.width/2,H.actorMargin)}let m=0;return E.forEach(A=>{const v=Pt(H);let b=A.actorKeys.reduce((mt,zt)=>mt+(g.get(zt).width+(g.get(zt).margin||0)),0);b+=8*H.boxMargin,b-=2*H.boxTextMargin,A.wrap&&(A.name=ut._K.wrapLabel(A.name,b-2*H.wrapPadding,v));const R=ut._K.calculateTextDimensions(A.name,v);m=G.Y2.getMax(R.height,m);const Q=G.Y2.getMax(b,R.width+2*H.wrapPadding);A.margin=H.boxTextMargin,b<Q&&(A.margin+=(Q-b)/2)}),E.forEach(A=>A.textMaxHeight=m),G.Y2.getMax(M,H.height)})).apply(this,arguments)}(0,w.K2)(_e,"calculateActorMargins");var nr=(0,w.K2)(function(){var g=(0,lt.A)(function*(y,E,M){const m=E.get(y.from),A=E.get(y.to),v=m.x,b=A.x,C=y.wrap&&y.message;let R=(0,G.Wi)(y.message)?yield(0,G.Dl)(y.message,(0,G.D7)()):ut._K.calculateTextDimensions(C?ut._K.wrapLabel(y.message,H.width,Zt(H)):y.message,Zt(H));const Q={width:C?H.width:G.Y2.getMax(H.width,R.width+2*H.noteMargin),height:0,startx:m.x,stopx:0,starty:0,stopy:0,message:y.message};return y.placement===M.db.PLACEMENT.RIGHTOF?(Q.width=C?G.Y2.getMax(H.width,R.width):G.Y2.getMax(m.width/2+A.width/2,R.width+2*H.noteMargin),Q.startx=v+(m.width+H.actorMargin)/2):y.placement===M.db.PLACEMENT.LEFTOF?(Q.width=G.Y2.getMax(C?H.width:m.width/2+A.width/2,R.width+2*H.noteMargin),Q.startx=v-Q.width+(m.width-H.actorMargin)/2):y.to===y.from?(R=ut._K.calculateTextDimensions(C?ut._K.wrapLabel(y.message,G.Y2.getMax(H.width,m.width),Zt(H)):y.message,Zt(H)),Q.width=C?G.Y2.getMax(H.width,m.width):G.Y2.getMax(m.width,H.width,R.width+2*H.noteMargin),Q.startx=v+(m.width-Q.width)/2):(Q.width=Math.abs(v+m.width/2-(b+A.width/2))+H.actorMargin,Q.startx=v<b?v+m.width/2-H.actorMargin/2:b+A.width/2-H.actorMargin/2),C&&(Q.message=ut._K.wrapLabel(y.message,Q.width-2*H.wrapPadding,Zt(H))),w.Rm.debug(`NM:[${Q.startx},${Q.stopx},${Q.starty},${Q.stopy}:${Q.width},${Q.height}=${y.message}]`),Q});return function(y,E,M){return g.apply(this,arguments)}}(),"buildNoteModel"),te=(0,w.K2)(function(g,y,E){if(![E.db.LINETYPE.SOLID_OPEN,E.db.LINETYPE.DOTTED_OPEN,E.db.LINETYPE.SOLID,E.db.LINETYPE.DOTTED,E.db.LINETYPE.SOLID_CROSS,E.db.LINETYPE.DOTTED_CROSS,E.db.LINETYPE.SOLID_POINT,E.db.LINETYPE.DOTTED_POINT,E.db.LINETYPE.BIDIRECTIONAL_SOLID,E.db.LINETYPE.BIDIRECTIONAL_DOTTED].includes(g.type))return{};const[M,m]=ve(g.from,y),[A,v]=ve(g.to,y),b=M<=A;let C=b?m:M,R=b?A:v;const Q=Math.abs(A-v)>2,mt=(0,w.K2)(Kt=>b?-Kt:Kt,"adjustValue");g.from===g.to?R=C:(g.activate&&!Q&&(R+=mt(H.activationWidth/2-1)),[E.db.LINETYPE.SOLID_OPEN,E.db.LINETYPE.DOTTED_OPEN].includes(g.type)||(R+=mt(3)),[E.db.LINETYPE.BIDIRECTIONAL_SOLID,E.db.LINETYPE.BIDIRECTIONAL_DOTTED].includes(g.type)&&(C-=mt(3)));const zt=[M,m,A,v],jt=Math.abs(C-R);g.wrap&&g.message&&(g.message=ut._K.wrapLabel(g.message,G.Y2.getMax(jt+2*H.wrapPadding,H.width),Pt(H)));const Vt=ut._K.calculateTextDimensions(g.message,Pt(H));return{width:G.Y2.getMax(g.wrap?0:Vt.width+2*H.wrapPadding,jt+2*H.wrapPadding,H.width),height:0,startx:C,stopx:R,starty:0,stopy:0,message:g.message,type:g.type,wrap:g.wrap,fromBounds:Math.min.apply(null,zt),toBounds:Math.max.apply(null,zt)}},"buildMessageModel"),ne=(0,w.K2)(function(){var g=(0,lt.A)(function*(y,E,M,m){const A={},v=[];let b,C,R;for(const Q of y){switch(Q.type){case m.db.LINETYPE.LOOP_START:case m.db.LINETYPE.ALT_START:case m.db.LINETYPE.OPT_START:case m.db.LINETYPE.PAR_START:case m.db.LINETYPE.PAR_OVER_START:case m.db.LINETYPE.CRITICAL_START:case m.db.LINETYPE.BREAK_START:v.push({id:Q.id,msg:Q.message,from:Number.MAX_SAFE_INTEGER,to:Number.MIN_SAFE_INTEGER,width:0});break;case m.db.LINETYPE.ALT_ELSE:case m.db.LINETYPE.PAR_AND:case m.db.LINETYPE.CRITICAL_OPTION:Q.message&&(b=v.pop(),A[b.id]=b,A[Q.id]=b,v.push(b));break;case m.db.LINETYPE.LOOP_END:case m.db.LINETYPE.ALT_END:case m.db.LINETYPE.OPT_END:case m.db.LINETYPE.PAR_END:case m.db.LINETYPE.CRITICAL_END:case m.db.LINETYPE.BREAK_END:b=v.pop(),A[b.id]=b;break;case m.db.LINETYPE.ACTIVE_START:{const zt=E.get(Q.from?Q.from:Q.to.actor),jt=sr(Q.from?Q.from:Q.to.actor).length,Vt=zt.x+zt.width/2+(jt-1)*H.activationWidth/2;ot.activations.push({startx:Vt,stopx:Vt+H.activationWidth,actor:Q.from,enabled:!0})}break;case m.db.LINETYPE.ACTIVE_END:{const zt=ot.activations.map(jt=>jt.actor).lastIndexOf(Q.from);ot.activations.splice(zt,1).splice(0,1)}}void 0!==Q.placement?(C=yield nr(Q,E,m),Q.noteModel=C,v.forEach(zt=>{b=zt,b.from=G.Y2.getMin(b.from,C.startx),b.to=G.Y2.getMax(b.to,C.startx+C.width),b.width=G.Y2.getMax(b.width,Math.abs(b.from-b.to))-H.labelBoxWidth})):(R=te(Q,E,m),Q.msgModel=R,R.startx&&R.stopx&&v.length>0&&v.forEach(zt=>{if(b=zt,R.startx===R.stopx){const jt=E.get(Q.from),Vt=E.get(Q.to);b.from=G.Y2.getMin(jt.x-R.width/2,jt.x-jt.width/2,b.from),b.to=G.Y2.getMax(Vt.x+R.width/2,Vt.x+jt.width/2,b.to),b.width=G.Y2.getMax(b.width,Math.abs(b.to-b.from))-H.labelBoxWidth}else b.from=G.Y2.getMin(R.startx,b.from),b.to=G.Y2.getMax(R.stopx,b.to),b.width=G.Y2.getMax(b.width,R.width)-H.labelBoxWidth}))}return ot.activations=[],w.Rm.debug("Loop type widths:",A),A});return function(y,E,M,m){return g.apply(this,arguments)}}(),"calculateLoopBounds"),be={bounds:ot,drawActors:mr,drawActorsPopup:Wt,setConf:we,draw:Ae},ar={parser:Gt,get db(){return new Wr},renderer:be,styles:Gr,init:(0,w.K2)(g=>{g.sequence||(g.sequence={}),g.wrap&&(g.sequence.wrap=g.wrap,(0,G.XV)({sequence:{wrap:g.wrap}}))},"init")}},97787:(ri,Er,P)=>{"use strict";P.d(Er,{o:()=>ie});var ie=(0,P(32303).K2)(()=>"\n  /* Font Awesome icon styling - consolidated */\n  .label-icon {\n    display: inline-block;\n    height: 1em;\n    overflow: visible;\n    vertical-align: -0.125em;\n  }\n  \n  .node .label-icon path {\n    fill: currentColor;\n    stroke: revert;\n    stroke-width: revert;\n  }\n","getIconStyles")},98954:(ri,Er,P)=>{"use strict";P.d(Er,{IU:()=>vr,Jo:()=>Bt,T_:()=>aa,g0:()=>Tt,jP:()=>Br});var lt=P(89204),ie=P(36384),L=P(87452),D=P(32239),Mt=P(19753),ut=P(59355),G=P(52052),w=P(79006),Lt=P(32303),At=P(40622),Ge=P(93654),bt=(0,Lt.K2)((B,N,et,yt,it,rt)=>{N.arrowTypeStart&&j(B,"start",N.arrowTypeStart,et,yt,it,rt),N.arrowTypeEnd&&j(B,"end",N.arrowTypeEnd,et,yt,it,rt)},"addEdgeMarkers"),Gt={arrow_cross:{type:"cross",fill:!1},arrow_point:{type:"point",fill:!0},arrow_barb:{type:"barb",fill:!0},arrow_circle:{type:"circle",fill:!1},aggregation:{type:"aggregation",fill:!1},extension:{type:"extension",fill:!1},composition:{type:"composition",fill:!0},dependency:{type:"dependency",fill:!0},lollipop:{type:"lollipop",fill:!1},only_one:{type:"onlyOne",fill:!1},zero_or_one:{type:"zeroOrOne",fill:!1},one_or_more:{type:"oneOrMore",fill:!1},zero_or_more:{type:"zeroOrMore",fill:!1},requirement_arrow:{type:"requirement_arrow",fill:!1},requirement_contains:{type:"requirement_contains",fill:!1}},j=(0,Lt.K2)((B,N,et,yt,it,rt,_t)=>{const ht=Gt[et];if(!ht)return void Lt.Rm.warn(`Unknown arrow type: ${et}`);const ot=`${it}_${rt}-${ht.type}${"start"===N?"Start":"End"}`;if(_t&&""!==_t.trim()){const Pt=`${ot}_${_t.replace(/[^\dA-Za-z]/g,"_")}`;if(!document.getElementById(Pt)){const Zt=document.getElementById(ot);if(Zt){const pe=Zt.cloneNode(!0);pe.id=Pt,pe.querySelectorAll("path, circle, line").forEach(Ze=>{Ze.setAttribute("stroke",_t),ht.fill&&Ze.setAttribute("fill",_t)}),Zt.parentNode?.appendChild(pe)}}B.attr(`marker-${N}`,`url(${yt}#${Pt})`)}else B.attr(`marker-${N}`,`url(${yt}#${ot})`)},"addEdgeMarker"),hr=new Map,ze=new Map,vr=(0,Lt.K2)(()=>{hr.clear(),ze.clear()},"clear"),Wr=(0,Lt.K2)(B=>B?B.reduce((et,yt)=>et+";"+yt,""):"","getLabelStyles"),Br=(0,Lt.K2)(function(){var B=(0,lt.A)(function*(N,et){let yt=(0,w._3)((0,w.D7)().flowchart.htmlLabels);const{labelStyles:it}=(0,Mt.GX)(et);et.labelStyle=it;const rt=yield(0,ut.GZ)(N,et.label,{style:et.labelStyle,useHtmlLabels:yt,addSvgBackground:!0,isNode:!1});Lt.Rm.info("abc82",et,et.labelType);const _t=N.insert("g").attr("class","edgeLabel"),ht=_t.insert("g").attr("class","label").attr("data-id",et.id);ht.node().appendChild(rt);let H,Ot=rt.getBBox();if(yt){const ot=rt.children[0],ke=(0,At.Ltv)(rt);Ot=ot.getBoundingClientRect(),ke.attr("width",Ot.width),ke.attr("height",Ot.height)}if(ht.attr("transform","translate("+-Ot.width/2+", "+-Ot.height/2+")"),hr.set(et.id,_t),et.width=Ot.width,et.height=Ot.height,et.startLabelLeft){const ot=yield(0,L.DA)(et.startLabelLeft,Wr(et.labelStyle)),ke=N.insert("g").attr("class","edgeTerminals"),Pt=ke.insert("g").attr("class","inner");H=Pt.node().appendChild(ot);const Zt=ot.getBBox();Pt.attr("transform","translate("+-Zt.width/2+", "+-Zt.height/2+")"),ze.get(et.id)||ze.set(et.id,{}),ze.get(et.id).startLeft=ke,Gr(H,et.startLabelLeft)}if(et.startLabelRight){const ot=yield(0,L.DA)(et.startLabelRight,Wr(et.labelStyle)),ke=N.insert("g").attr("class","edgeTerminals"),Pt=ke.insert("g").attr("class","inner");H=ke.node().appendChild(ot),Pt.node().appendChild(ot);const Zt=ot.getBBox();Pt.attr("transform","translate("+-Zt.width/2+", "+-Zt.height/2+")"),ze.get(et.id)||ze.set(et.id,{}),ze.get(et.id).startRight=ke,Gr(H,et.startLabelRight)}if(et.endLabelLeft){const ot=yield(0,L.DA)(et.endLabelLeft,Wr(et.labelStyle)),ke=N.insert("g").attr("class","edgeTerminals"),Pt=ke.insert("g").attr("class","inner");H=Pt.node().appendChild(ot);const Zt=ot.getBBox();Pt.attr("transform","translate("+-Zt.width/2+", "+-Zt.height/2+")"),ke.node().appendChild(ot),ze.get(et.id)||ze.set(et.id,{}),ze.get(et.id).endLeft=ke,Gr(H,et.endLabelLeft)}if(et.endLabelRight){const ot=yield(0,L.DA)(et.endLabelRight,Wr(et.labelStyle)),ke=N.insert("g").attr("class","edgeTerminals"),Pt=ke.insert("g").attr("class","inner");H=Pt.node().appendChild(ot);const Zt=ot.getBBox();Pt.attr("transform","translate("+-Zt.width/2+", "+-Zt.height/2+")"),ke.node().appendChild(ot),ze.get(et.id)||ze.set(et.id,{}),ze.get(et.id).endRight=ke,Gr(H,et.endLabelRight)}return rt});return function(N,et){return B.apply(this,arguments)}}(),"insertEdgeLabel");function Gr(B,N){(0,w.D7)().flowchart.htmlLabels&&B&&(B.style.width=9*N.length+"px",B.style.height="12px")}(0,Lt.K2)(Gr,"setTerminalWidth");var aa=(0,Lt.K2)((B,N)=>{Lt.Rm.debug("Moving label abc88 ",B.id,B.label,hr.get(B.id),N);let et=N.updatedPath?N.updatedPath:N.originalPath;const yt=(0,w.D7)(),{subGraphTitleTotalMargin:it}=(0,D.O)(yt);if(B.label){const rt=hr.get(B.id);let _t=B.x,ht=B.y;if(et){const Ot=G._K.calcLabelPosition(et);Lt.Rm.debug("Moving label "+B.label+" from (",_t,",",ht,") to (",Ot.x,",",Ot.y,") abc88"),N.updatedPath&&(_t=Ot.x,ht=Ot.y)}rt.attr("transform",`translate(${_t}, ${ht+it/2})`)}if(B.startLabelLeft){const rt=ze.get(B.id).startLeft;let _t=B.x,ht=B.y;if(et){const Ot=G._K.calcTerminalLabelPosition(B.arrowTypeStart?10:0,"start_left",et);_t=Ot.x,ht=Ot.y}rt.attr("transform",`translate(${_t}, ${ht})`)}if(B.startLabelRight){const rt=ze.get(B.id).startRight;let _t=B.x,ht=B.y;if(et){const Ot=G._K.calcTerminalLabelPosition(B.arrowTypeStart?10:0,"start_right",et);_t=Ot.x,ht=Ot.y}rt.attr("transform",`translate(${_t}, ${ht})`)}if(B.endLabelLeft){const rt=ze.get(B.id).endLeft;let _t=B.x,ht=B.y;if(et){const Ot=G._K.calcTerminalLabelPosition(B.arrowTypeEnd?10:0,"end_left",et);_t=Ot.x,ht=Ot.y}rt.attr("transform",`translate(${_t}, ${ht})`)}if(B.endLabelRight){const rt=ze.get(B.id).endRight;let _t=B.x,ht=B.y;if(et){const Ot=G._K.calcTerminalLabelPosition(B.arrowTypeEnd?10:0,"end_right",et);_t=Ot.x,ht=Ot.y}rt.attr("transform",`translate(${_t}, ${ht})`)}},"positionEdgeLabel"),zr=(0,Lt.K2)((B,N)=>{const yt=B.y,it=Math.abs(N.x-B.x),rt=Math.abs(N.y-yt);return it>=B.width/2||rt>=B.height/2},"outsideNode"),Or=(0,Lt.K2)((B,N,et)=>{Lt.Rm.debug(`intersection calc abc89:\n  outsidePoint: ${JSON.stringify(N)}\n  insidePoint : ${JSON.stringify(et)}\n  node        : x:${B.x} y:${B.y} w:${B.width} h:${B.height}`);const yt=B.x,it=B.y,rt=Math.abs(yt-et.x),_t=B.width/2;let ht=et.x<N.x?_t-rt:_t+rt;const Ot=B.height/2,H=Math.abs(N.y-et.y),ot=Math.abs(N.x-et.x);if(Math.abs(it-N.y)*_t>Math.abs(yt-N.x)*Ot){let ke=et.y<N.y?N.y-Ot-it:it-Ot-N.y;ht=ot*ke/H;const Pt={x:et.x<N.x?et.x+ht:et.x-ot+ht,y:et.y<N.y?et.y+H-ke:et.y-H+ke};return 0===ht&&(Pt.x=N.x,Pt.y=N.y),0===ot&&(Pt.x=N.x),0===H&&(Pt.y=N.y),Lt.Rm.debug(`abc89 top/bottom calc, Q ${H}, q ${ke}, R ${ot}, r ${ht}`,Pt),Pt}{ht=et.x<N.x?N.x-_t-yt:yt-_t-N.x;let ke=H*ht/ot,Pt=et.x<N.x?et.x+ot-ht:et.x-ot+ht,Zt=et.y<N.y?et.y+ke:et.y-ke;return Lt.Rm.debug(`sides calc abc89, Q ${H}, q ${ke}, R ${ot}, r ${ht}`,{_x:Pt,_y:Zt}),0===ht&&(Pt=N.x,Zt=N.y),0===ot&&(Pt=N.x),0===H&&(Zt=N.y),{x:Pt,y:Zt}}},"intersection"),Be=(0,Lt.K2)((B,N)=>{Lt.Rm.warn("abc88 cutPathAtIntersect",B,N);let et=[],yt=B[0],it=!1;return B.forEach(rt=>{if(Lt.Rm.info("abc88 checking point",rt,N),zr(N,rt)||it)Lt.Rm.warn("abc88 outside",rt,yt),yt=rt,it||et.push(rt);else{const _t=Or(N,yt,rt);Lt.Rm.debug("abc88 inside",rt,yt,_t),Lt.Rm.debug("abc88 intersection",_t,N);let ht=!1;et.forEach(Ot=>{ht=ht||Ot.x===_t.x&&Ot.y===_t.y}),et.some(Ot=>Ot.x===_t.x&&Ot.y===_t.y)?Lt.Rm.warn("abc88 no intersect",_t,et):et.push(_t),it=!0}}),Lt.Rm.debug("returning points",et),et},"cutPathAtIntersect");function Ir(B){const N=[],et=[];for(let yt=1;yt<B.length-1;yt++){const it=B[yt-1],rt=B[yt],_t=B[yt+1];(it.x===rt.x&&rt.y===_t.y&&Math.abs(rt.x-_t.x)>5&&Math.abs(rt.y-it.y)>5||it.y===rt.y&&rt.x===_t.x&&Math.abs(rt.x-it.x)>5&&Math.abs(rt.y-_t.y)>5)&&(N.push(rt),et.push(yt))}return{cornerPoints:N,cornerPointPositions:et}}(0,Lt.K2)(Ir,"extractCornerPoints");var Xe=(0,Lt.K2)(function(B,N,et){const yt=N.x-B.x,it=N.y-B.y,_t=et/Math.sqrt(yt*yt+it*it);return{x:N.x-_t*yt,y:N.y-_t*it}},"findAdjacentPoint"),z=(0,Lt.K2)(function(B){const{cornerPointPositions:N}=Ir(B),et=[];for(let yt=0;yt<B.length;yt++)if(N.includes(yt)){const it=B[yt-1],rt=B[yt+1],_t=B[yt],ht=Xe(it,_t,5),Ot=Xe(rt,_t,5),H=Ot.x-ht.x,ot=Ot.y-ht.y;et.push(ht);const ke=2*Math.sqrt(2);let Pt={x:_t.x,y:_t.y};if(Math.abs(rt.x-it.x)>10&&Math.abs(rt.y-it.y)>=10){Lt.Rm.debug("Corner point fixing",Math.abs(rt.x-it.x),Math.abs(rt.y-it.y));const Zt=5;Pt=_t.x===ht.x?{x:H<0?ht.x-Zt+ke:ht.x+Zt-ke,y:ot<0?ht.y-ke:ht.y+ke}:{x:H<0?ht.x-ke:ht.x+ke,y:ot<0?ht.y-Zt+ke:ht.y+Zt-ke}}else Lt.Rm.debug("Corner point skipping fixing",Math.abs(rt.x-it.x),Math.abs(rt.y-it.y));et.push(Pt,Ot)}else et.push(B[yt]);return et},"fixCorners"),dt=(0,Lt.K2)((B,N,et)=>{const ht=Math.floor((B-N-et)/4);return`0 ${N} ${Array(ht).fill("2 2").join(" ")} ${et}`},"generateDashArray"),Bt=(0,Lt.K2)(function(B,N,et,yt,it,rt,_t,ht=!1){const{handDrawnSeed:Ot}=(0,w.D7)();let H=N.points,ot=!1;const ke=it;var Pt=rt;const Zt=[];for(const _e in N.cssCompiledStyles)(0,Mt.KX)(_e)||Zt.push(N.cssCompiledStyles[_e]);Lt.Rm.debug("UIO intersect check",N.points,Pt.x,ke.x),Pt.intersect&&ke.intersect&&!ht&&(H=H.slice(1,N.points.length-1),H.unshift(ke.intersect(H[0])),Lt.Rm.debug("Last point UIO",N.start,"--\x3e",N.end,H[H.length-1],Pt,Pt.intersect(H[H.length-1])),H.push(Pt.intersect(H[H.length-1])));const pe=btoa(JSON.stringify(H));N.toCluster&&(Lt.Rm.info("to cluster abc88",et.get(N.toCluster)),H=Be(N.points,et.get(N.toCluster).node),ot=!0),N.fromCluster&&(Lt.Rm.debug("from cluster abc88",et.get(N.fromCluster),JSON.stringify(H,null,2)),H=Be(H.reverse(),et.get(N.fromCluster).node).reverse(),ot=!0);let Re=H.filter(_e=>!Number.isNaN(_e.y));Re=z(Re);let Ze=At.qrM;switch(Ze=At.lUB,N.curve){case"linear":Ze=At.lUB;break;case"basis":default:Ze=At.qrM;break;case"cardinal":Ze=At.y8u;break;case"bumpX":Ze=At.Wi0;break;case"bumpY":Ze=At.PGM;break;case"catmullRom":Ze=At.oDi;break;case"monotoneX":Ze=At.nVG;break;case"monotoneY":Ze=At.uxU;break;case"natural":Ze=At.Xf2;break;case"step":Ze=At.GZz;break;case"stepAfter":Ze=At.UPb;break;case"stepBefore":Ze=At.dyv}const{x:de,y:yr}=(0,ie.RI)(N),mr=(0,At.n8j)().x(de).y(yr).curve(Ze);let Wt;switch(N.thickness){case"normal":default:Wt="edge-thickness-normal";break;case"thick":Wt="edge-thickness-thick";break;case"invisible":Wt="edge-thickness-invisible"}switch(N.pattern){case"solid":default:Wt+=" edge-pattern-solid";break;case"dotted":Wt+=" edge-pattern-dotted";break;case"dashed":Wt+=" edge-pattern-dashed"}let we,sr="rounded"===N.curve?Se(re(Re,N),5):mr(Re);const ve=Array.isArray(N.style)?N.style:[N.style];let ce=ve.find(_e=>_e?.startsWith("stroke:")),Ee=!1;if("handDrawn"===N.look){const _e=Ge.A.svg(B);Object.assign([],Re);const Yr=_e.path(sr,{roughness:.3,seed:Ot});Wt+=" transition",we=(0,At.Ltv)(Yr).select("path").attr("id",N.id).attr("class"," "+Wt+(N.classes?" "+N.classes:"")).attr("style",ve?ve.reduce((te,ne)=>te+";"+ne,""):"");let nr=we.attr("d");we.attr("d",nr),B.node().appendChild(we.node())}else{const _e=Zt.join(";"),Yr=ve?ve.reduce((y,E)=>y+E+";",""):"";let nr="";N.animate&&(nr=" edge-animation-fast"),N.animation&&(nr=" edge-animation-"+N.animation);const te=(_e?_e+";"+Yr+";":Yr)+";"+(ve?ve.reduce((y,E)=>y+";"+E,""):"");we=B.append("path").attr("d",sr).attr("id",N.id).attr("class"," "+Wt+(N.classes?" "+N.classes:"")+(nr??"")).attr("style",te),ce=te.match(/stroke:([^;]+)/)?.[1],Ee=!0===N.animate||!!N.animation||_e.includes("animation");const ne=we.node(),be="function"==typeof ne.getTotalLength?ne.getTotalLength():0,ar=ie.Nq[N.arrowTypeStart]||0,g=ie.Nq[N.arrowTypeEnd]||0;if("neo"===N.look&&!Ee){const E=`stroke-dasharray: ${"dotted"===N.pattern||"dashed"===N.pattern?dt(be,ar,g):`0 ${ar} ${be-ar-g} ${g}`}; stroke-dashoffset: 0;`;we.attr("style",E+we.attr("style"))}}we.attr("data-edge",!0),we.attr("data-et","edge"),we.attr("data-id",N.id),we.attr("data-points",pe),N.showPoints&&Re.forEach(_e=>{B.append("circle").style("stroke","red").style("fill","red").attr("r",1).attr("cx",_e.x).attr("cy",_e.y)});let Ae="";((0,w.D7)().flowchart.arrowMarkerAbsolute||(0,w.D7)().state.arrowMarkerAbsolute)&&(Ae=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,Ae=Ae.replace(/\(/g,"\\(").replace(/\)/g,"\\)")),Lt.Rm.info("arrowTypeStart",N.arrowTypeStart),Lt.Rm.info("arrowTypeEnd",N.arrowTypeEnd),bt(we,N,Ae,_t,yt,ce);const er=Math.floor(H.length/2);G._K.isLabelCoordinateInPath(H[er],we.attr("d"))||(ot=!0);let Dr={};return ot&&(Dr.updatedPath=H),Dr.originalPath=N.points,Dr},"insertEdge");function Se(B,N){if(B.length<2)return"";let et="";const yt=B.length,it=1e-5;for(let rt=0;rt<yt;rt++){const _t=B[rt],ht=B[rt-1],Ot=B[rt+1];if(0===rt)et+=`M${_t.x},${_t.y}`;else if(rt===yt-1)et+=`L${_t.x},${_t.y}`;else{const H=_t.x-ht.x,ot=_t.y-ht.y,ke=Ot.x-_t.x,Pt=Ot.y-_t.y,Zt=Math.hypot(H,ot),pe=Math.hypot(ke,Pt);if(Zt<it||pe<it){et+=`L${_t.x},${_t.y}`;continue}const Re=H/Zt,Ze=ot/Zt,de=ke/pe,yr=Pt/pe,Wt=Math.max(-1,Math.min(1,Re*de+Ze*yr)),we=Math.acos(Wt);if(we<it||Math.abs(Math.PI-we)<it){et+=`L${_t.x},${_t.y}`;continue}const sr=Math.min(N/Math.sin(we/2),Zt/2,pe/2);et+=`L${_t.x-Re*sr},${_t.y-Ze*sr}`,et+=`Q${_t.x},${_t.y} ${_t.x+de*sr},${_t.y+yr*sr}`}}return et}function X(B,N){if(!B||!N)return{angle:0,deltaX:0,deltaY:0};const et=N.x-B.x,yt=N.y-B.y;return{angle:Math.atan2(yt,et),deltaX:et,deltaY:yt}}function re(B,N){const et=B.map(it=>({...it}));if(B.length>=2&&ie.hq[N.arrowTypeStart]){const it=ie.hq[N.arrowTypeStart],rt=B[0],_t=B[1],{angle:ht}=X(rt,_t),Ot=it*Math.cos(ht),H=it*Math.sin(ht);et[0].x=rt.x+Ot,et[0].y=rt.y+H}const yt=B.length;if(yt>=2&&ie.hq[N.arrowTypeEnd]){const it=ie.hq[N.arrowTypeEnd],rt=B[yt-1],_t=B[yt-2],{angle:ht}=X(_t,rt),Ot=it*Math.cos(ht),H=it*Math.sin(ht);et[yt-1].x=rt.x-Ot,et[yt-1].y=rt.y-H}return et}(0,Lt.K2)(Se,"generateRoundedPath"),(0,Lt.K2)(X,"calculateDeltaAndAngle"),(0,Lt.K2)(re,"applyMarkerOffsetsToPoints");var S=(0,Lt.K2)((B,N,et,yt)=>{N.forEach(it=>{Et[it](B,et,yt)})},"insertMarkers"),Et={extension:(0,Lt.K2)((B,N,et)=>{Lt.Rm.trace("Making markers for ",et),B.append("defs").append("marker").attr("id",et+"_"+N+"-extensionStart").attr("class","marker extension "+N).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 1,7 L18,13 V 1 Z"),B.append("defs").append("marker").attr("id",et+"_"+N+"-extensionEnd").attr("class","marker extension "+N).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 1,1 V 13 L18,7 Z")},"extension"),composition:(0,Lt.K2)((B,N,et)=>{B.append("defs").append("marker").attr("id",et+"_"+N+"-compositionStart").attr("class","marker composition "+N).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),B.append("defs").append("marker").attr("id",et+"_"+N+"-compositionEnd").attr("class","marker composition "+N).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")},"composition"),aggregation:(0,Lt.K2)((B,N,et)=>{B.append("defs").append("marker").attr("id",et+"_"+N+"-aggregationStart").attr("class","marker aggregation "+N).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),B.append("defs").append("marker").attr("id",et+"_"+N+"-aggregationEnd").attr("class","marker aggregation "+N).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")},"aggregation"),dependency:(0,Lt.K2)((B,N,et)=>{B.append("defs").append("marker").attr("id",et+"_"+N+"-dependencyStart").attr("class","marker dependency "+N).attr("refX",6).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 5,7 L9,13 L1,7 L9,1 Z"),B.append("defs").append("marker").attr("id",et+"_"+N+"-dependencyEnd").attr("class","marker dependency "+N).attr("refX",13).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")},"dependency"),lollipop:(0,Lt.K2)((B,N,et)=>{B.append("defs").append("marker").attr("id",et+"_"+N+"-lollipopStart").attr("class","marker lollipop "+N).attr("refX",13).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("circle").attr("stroke","black").attr("fill","transparent").attr("cx",7).attr("cy",7).attr("r",6),B.append("defs").append("marker").attr("id",et+"_"+N+"-lollipopEnd").attr("class","marker lollipop "+N).attr("refX",1).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("circle").attr("stroke","black").attr("fill","transparent").attr("cx",7).attr("cy",7).attr("r",6)},"lollipop"),point:(0,Lt.K2)((B,N,et)=>{B.append("marker").attr("id",et+"_"+N+"-pointEnd").attr("class","marker "+N).attr("viewBox","0 0 10 10").attr("refX",5).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",8).attr("markerHeight",8).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),B.append("marker").attr("id",et+"_"+N+"-pointStart").attr("class","marker "+N).attr("viewBox","0 0 10 10").attr("refX",4.5).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",8).attr("markerHeight",8).attr("orient","auto").append("path").attr("d","M 0 5 L 10 10 L 10 0 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")},"point"),circle:(0,Lt.K2)((B,N,et)=>{B.append("marker").attr("id",et+"_"+N+"-circleEnd").attr("class","marker "+N).attr("viewBox","0 0 10 10").attr("refX",11).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),B.append("marker").attr("id",et+"_"+N+"-circleStart").attr("class","marker "+N).attr("viewBox","0 0 10 10").attr("refX",-1).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")},"circle"),cross:(0,Lt.K2)((B,N,et)=>{B.append("marker").attr("id",et+"_"+N+"-crossEnd").attr("class","marker cross "+N).attr("viewBox","0 0 11 11").attr("refX",12).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0"),B.append("marker").attr("id",et+"_"+N+"-crossStart").attr("class","marker cross "+N).attr("viewBox","0 0 11 11").attr("refX",-1).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0")},"cross"),barb:(0,Lt.K2)((B,N,et)=>{B.append("defs").append("marker").attr("id",et+"_"+N+"-barbEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",14).attr("markerUnits","userSpaceOnUse").attr("orient","auto").append("path").attr("d","M 19,7 L9,13 L14,7 L9,1 Z")},"barb"),only_one:(0,Lt.K2)((B,N,et)=>{B.append("defs").append("marker").attr("id",et+"_"+N+"-onlyOneStart").attr("class","marker onlyOne "+N).attr("refX",0).attr("refY",9).attr("markerWidth",18).attr("markerHeight",18).attr("orient","auto").append("path").attr("d","M9,0 L9,18 M15,0 L15,18"),B.append("defs").append("marker").attr("id",et+"_"+N+"-onlyOneEnd").attr("class","marker onlyOne "+N).attr("refX",18).attr("refY",9).attr("markerWidth",18).attr("markerHeight",18).attr("orient","auto").append("path").attr("d","M3,0 L3,18 M9,0 L9,18")},"only_one"),zero_or_one:(0,Lt.K2)((B,N,et)=>{const yt=B.append("defs").append("marker").attr("id",et+"_"+N+"-zeroOrOneStart").attr("class","marker zeroOrOne "+N).attr("refX",0).attr("refY",9).attr("markerWidth",30).attr("markerHeight",18).attr("orient","auto");yt.append("circle").attr("fill","white").attr("cx",21).attr("cy",9).attr("r",6),yt.append("path").attr("d","M9,0 L9,18");const it=B.append("defs").append("marker").attr("id",et+"_"+N+"-zeroOrOneEnd").attr("class","marker zeroOrOne "+N).attr("refX",30).attr("refY",9).attr("markerWidth",30).attr("markerHeight",18).attr("orient","auto");it.append("circle").attr("fill","white").attr("cx",9).attr("cy",9).attr("r",6),it.append("path").attr("d","M21,0 L21,18")},"zero_or_one"),one_or_more:(0,Lt.K2)((B,N,et)=>{B.append("defs").append("marker").attr("id",et+"_"+N+"-oneOrMoreStart").attr("class","marker oneOrMore "+N).attr("refX",18).attr("refY",18).attr("markerWidth",45).attr("markerHeight",36).attr("orient","auto").append("path").attr("d","M0,18 Q 18,0 36,18 Q 18,36 0,18 M42,9 L42,27"),B.append("defs").append("marker").attr("id",et+"_"+N+"-oneOrMoreEnd").attr("class","marker oneOrMore "+N).attr("refX",27).attr("refY",18).attr("markerWidth",45).attr("markerHeight",36).attr("orient","auto").append("path").attr("d","M3,9 L3,27 M9,18 Q27,0 45,18 Q27,36 9,18")},"one_or_more"),zero_or_more:(0,Lt.K2)((B,N,et)=>{const yt=B.append("defs").append("marker").attr("id",et+"_"+N+"-zeroOrMoreStart").attr("class","marker zeroOrMore "+N).attr("refX",18).attr("refY",18).attr("markerWidth",57).attr("markerHeight",36).attr("orient","auto");yt.append("circle").attr("fill","white").attr("cx",48).attr("cy",18).attr("r",6),yt.append("path").attr("d","M0,18 Q18,0 36,18 Q18,36 0,18");const it=B.append("defs").append("marker").attr("id",et+"_"+N+"-zeroOrMoreEnd").attr("class","marker zeroOrMore "+N).attr("refX",39).attr("refY",18).attr("markerWidth",57).attr("markerHeight",36).attr("orient","auto");it.append("circle").attr("fill","white").attr("cx",9).attr("cy",18).attr("r",6),it.append("path").attr("d","M21,18 Q39,0 57,18 Q39,36 21,18")},"zero_or_more"),requirement_arrow:(0,Lt.K2)((B,N,et)=>{B.append("defs").append("marker").attr("id",et+"_"+N+"-requirement_arrowEnd").attr("refX",20).attr("refY",10).attr("markerWidth",20).attr("markerHeight",20).attr("orient","auto").append("path").attr("d","M0,0\n      L20,10\n      M20,10\n      L0,20")},"requirement_arrow"),requirement_contains:(0,Lt.K2)((B,N,et)=>{const yt=B.append("defs").append("marker").attr("id",et+"_"+N+"-requirement_containsStart").attr("refX",0).attr("refY",10).attr("markerWidth",20).attr("markerHeight",20).attr("orient","auto").append("g");yt.append("circle").attr("cx",10).attr("cy",10).attr("r",9).attr("fill","none"),yt.append("line").attr("x1",1).attr("x2",19).attr("y1",10).attr("y2",10),yt.append("line").attr("y1",1).attr("y2",19).attr("x1",10).attr("x2",10)},"requirement_contains")},Tt=S}}]);
//# sourceMappingURL=mermaid-vendor.6d53263957be8150.js.map