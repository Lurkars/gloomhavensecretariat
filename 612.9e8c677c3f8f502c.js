"use strict";(self.webpackChunkgloomhavensecretariat=self.webpackChunkgloomhavensecretariat||[]).push([[612],{7612:(L,f,h)=>{h.r(f),h.d(f,{diagram:()=>F});var b,w=h(9204),P=h(5027),y=h(5767),v=h(5595),C=h(1113),a=h(4110),x=h(2233),$=a.UI.packet,E=(class{constructor(){this.packet=[],this.setAccTitle=a.SV,this.getAccTitle=a.iN,this.setDiagramTitle=a.ke,this.getDiagramTitle=a.ab,this.getAccDescription=a.m7,this.setAccDescription=a.EI}getConfig(){const t=(0,v.$t)({...$,...(0,a.zj)().packet});return t.showBits&&(t.paddingY+=10),t}getPacket(){return this.packet}pushWord(t){t.length>0&&this.packet.push(t)}clear(){(0,a.IU)(),this.packet=[]}static#t=b=()=>((0,P.A)(this,"PacketDB"),(0,a.K2)(this,"PacketDB"),this)},b()),T=(0,a.K2)((t,e)=>{(0,y.S)(t,e);let s=-1,o=[],l=1;const{bitsPerRow:c}=e.getConfig();for(let{start:r,end:i,bits:_,label:d}of t.blocks){if(void 0!==r&&void 0!==i&&i<r)throw new Error(`Packet block ${r} - ${i} is invalid. End must be greater than start.`);if(r??=s+1,r!==s+1)throw new Error(`Packet block ${r} - ${i??r} is not contiguous. It should start from ${s+1}.`);if(0===_)throw new Error(`Packet block ${r} is invalid. Cannot have a zero bit field.`);for(i??=r+(_??1)-1,_??=i-r+1,s=i,a.Rm.debug(`Packet block ${r} - ${s} with label ${d}`);o.length<=c+1&&e.getPacket().length<1e4;){const[p,n]=A({start:r,end:i,bits:_,label:d},l,c);if(o.push(p),p.end+1===l*c&&(e.pushWord(o),o=[],l++),!n)break;({start:r,end:i,bits:_,label:d}=n)}}e.pushWord(o)},"populate"),A=(0,a.K2)((t,e,s)=>{if(void 0===t.start)throw new Error("start should have been set during first phase");if(void 0===t.end)throw new Error("end should have been set during first phase");if(t.start>t.end)throw new Error(`Block start ${t.start} is greater than block end ${t.end}.`);if(t.end+1<=e*s)return[t,void 0];const o=e*s-1,l=e*s;return[{start:t.start,end:o,label:t.label,bits:o-t.start},{start:l,end:t.end,label:t.label,bits:t.end-l}]},"getNextFittingBlock"),B={parser:{yy:void 0},parse:(0,a.K2)(function(){var t=(0,w.A)(function*(e){const s=yield(0,x.qg)("packet",e),o=B.parser?.yy;if(!(o instanceof E))throw new Error("parser.parser?.yy was not a PacketDB. This is due to a bug within Mermaid, please report this issue at https://github.com/mermaid-js/mermaid/issues.");a.Rm.debug(s),T(s,o)});return function(e){return t.apply(this,arguments)}}(),"parse")},M=(0,a.K2)((t,e,s,o)=>{const l=o.db,c=l.getConfig(),{rowHeight:r,paddingY:i,bitWidth:_,bitsPerRow:d}=c,p=l.getPacket(),n=l.getDiagramTitle(),g=r+i,k=g*(p.length+1)-(n?0:r),u=_*d+2,m=(0,C.D)(e);m.attr("viewbox",`0 0 ${u} ${k}`),(0,a.a$)(m,k,u,c.useMaxWidth);for(const[I,z]of p.entries())W(m,z,I,c);m.append("text").text(n).attr("x",u/2).attr("y",k-g/2).attr("dominant-baseline","middle").attr("text-anchor","middle").attr("class","packetTitle")},"draw"),W=(0,a.K2)((t,e,s,{rowHeight:o,paddingX:l,paddingY:c,bitWidth:r,bitsPerRow:i,showBits:_})=>{const d=t.append("g"),p=s*(o+c)+c;for(const n of e){const g=n.start%i*r+1,k=(n.end-n.start+1)*r-l;if(d.append("rect").attr("x",g).attr("y",p).attr("width",k).attr("height",o).attr("class","packetBlock"),d.append("text").attr("x",g+k/2).attr("y",p+o/2).attr("class","packetLabel").attr("dominant-baseline","middle").attr("text-anchor","middle").text(n.label),!_)continue;const u=n.end===n.start,m=p-2;d.append("text").attr("x",g+(u?k/2:0)).attr("y",m).attr("class","packetByte start").attr("dominant-baseline","auto").attr("text-anchor",u?"middle":"start").text(n.start),u||d.append("text").attr("x",g+k).attr("y",m).attr("class","packetByte end").attr("dominant-baseline","auto").attr("text-anchor","end").text(n.end)}},"drawWord"),O={draw:M},S={byteFontSize:"10px",startByteColor:"black",endByteColor:"black",labelColor:"black",labelFontSize:"12px",titleColor:"black",titleFontSize:"14px",blockStrokeColor:"black",blockStrokeWidth:"1",blockFillColor:"#efefef"},K=(0,a.K2)(({packet:t}={})=>{const e=(0,v.$t)(S,t);return`\n\t.packetByte {\n\t\tfont-size: ${e.byteFontSize};\n\t}\n\t.packetByte.start {\n\t\tfill: ${e.startByteColor};\n\t}\n\t.packetByte.end {\n\t\tfill: ${e.endByteColor};\n\t}\n\t.packetLabel {\n\t\tfill: ${e.labelColor};\n\t\tfont-size: ${e.labelFontSize};\n\t}\n\t.packetTitle {\n\t\tfill: ${e.titleColor};\n\t\tfont-size: ${e.titleFontSize};\n\t}\n\t.packetBlock {\n\t\tstroke: ${e.blockStrokeColor};\n\t\tstroke-width: ${e.blockStrokeWidth};\n\t\tfill: ${e.blockFillColor};\n\t}\n\t`},"styles"),F={parser:B,get db(){return new E},renderer:O,styles:K}}}]);
//# sourceMappingURL=612.9e8c677c3f8f502c.js.map