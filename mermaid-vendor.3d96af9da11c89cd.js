(self.webpackChunkgloomhavensecretariat=self.webpackChunkgloomhavensecretariat||[]).push([[911],{3939:(Ja,vr,R)=>{"use strict";R.r(vr),R.d(vr,{default:()=>Le});var Vr,ot=R(89204),ee=R(95721),L=R(69664),S=R(24715),Pt=R(72271),Ge=(R(98954),R(36384),R(87452),R(32239),R(19753),R(59355)),dt=R(52052),Rt=R(79006),q=R(32303),ar=R(98245),Ke=R(40622),cr=R(52323),Rr=R(99708),wr=R(93551),Or={id:"c4",detector:(0,q.K2)(tt=>/^\s*C4Context|C4Container|C4Component|C4Dynamic|C4Deployment/.test(tt),"detector"),loader:(0,q.K2)((0,ot.A)(function*(){const{diagram:tt}=yield R.e(911).then(R.bind(R,72635));return{id:"c4",diagram:tt}}),"loader")},je="flowchart",we={id:je,detector:(0,q.K2)((tt,l)=>"dagre-wrapper"!==l?.flowchart?.defaultRenderer&&"elk"!==l?.flowchart?.defaultRenderer&&/^\s*graph/.test(tt),"detector"),loader:(0,q.K2)((0,ot.A)(function*(){const{diagram:tt}=yield R.e(911).then(R.bind(R,84545));return{id:je,diagram:tt}}),"loader")},X="flowchart-v2",It={id:X,detector:(0,q.K2)((tt,l)=>"dagre-d3"!==l?.flowchart?.defaultRenderer&&("elk"===l?.flowchart?.defaultRenderer&&(l.layout="elk"),!(!/^\s*graph/.test(tt)||"dagre-wrapper"!==l?.flowchart?.defaultRenderer)||/^\s*flowchart/.test(tt)),"detector"),loader:(0,q.K2)((0,ot.A)(function*(){const{diagram:tt}=yield R.e(911).then(R.bind(R,84545));return{id:X,diagram:tt}}),"loader")},Nt={id:"er",detector:(0,q.K2)(tt=>/^\s*erDiagram/.test(tt),"detector"),loader:(0,q.K2)((0,ot.A)(function*(){const{diagram:tt}=yield R.e(911).then(R.bind(R,79158));return{id:"er",diagram:tt}}),"loader")},St="gitGraph",Pe={id:St,detector:(0,q.K2)(tt=>/^\s*gitGraph/.test(tt),"detector"),loader:(0,q.K2)((0,ot.A)(function*(){const{diagram:tt}=yield Promise.all([R.e(911),R.e(233)]).then(R.bind(R,18617));return{id:St,diagram:tt}}),"loader")},Tt={id:"gantt",detector:(0,q.K2)(tt=>/^\s*gantt/.test(tt),"detector"),loader:(0,q.K2)((0,ot.A)(function*(){const{diagram:tt}=yield R.e(911).then(R.bind(R,76765));return{id:"gantt",diagram:tt}}),"loader")},B="info",mt={id:B,detector:(0,q.K2)(tt=>/^\s*info/.test(tt),"detector"),loader:(0,q.K2)((0,ot.A)(function*(){const{diagram:tt}=yield Promise.all([R.e(911),R.e(233)]).then(R.bind(R,73362));return{id:B,diagram:tt}}),"loader")},ht={id:"pie",detector:(0,q.K2)(tt=>/^\s*pie/.test(tt),"detector"),loader:(0,q.K2)((0,ot.A)(function*(){const{diagram:tt}=yield Promise.all([R.e(911),R.e(233)]).then(R.bind(R,91634));return{id:"pie",diagram:tt}}),"loader")},Ft="quadrantChart",Mt={id:Ft,detector:(0,q.K2)(tt=>/^\s*quadrantChart/.test(tt),"detector"),loader:(0,q.K2)((0,ot.A)(function*(){const{diagram:tt}=yield R.e(911).then(R.bind(R,59301));return{id:Ft,diagram:tt}}),"loader")},Zt="xychart",de={id:Zt,detector:(0,q.K2)(tt=>/^\s*xychart(-beta)?/.test(tt),"detector"),loader:(0,q.K2)((0,ot.A)(function*(){const{diagram:tt}=yield R.e(911).then(R.bind(R,67137));return{id:Zt,diagram:tt}}),"loader")},mr="requirement",or={id:mr,detector:(0,q.K2)(tt=>/^\s*requirement(Diagram)?/.test(tt),"detector"),loader:(0,q.K2)((0,ot.A)(function*(){const{diagram:tt}=yield R.e(911).then(R.bind(R,29062));return{id:mr,diagram:tt}}),"loader")},ve="sequence",er={id:ve,detector:(0,q.K2)(tt=>/^\s*sequenceDiagram/.test(tt),"detector"),loader:(0,q.K2)((0,ot.A)(function*(){const{diagram:tt}=yield R.e(911).then(R.bind(R,96434));return{id:ve,diagram:tt}}),"loader")},sr={id:"class",detector:(0,q.K2)((tt,l)=>"dagre-wrapper"!==l?.class?.defaultRenderer&&/^\s*classDiagram/.test(tt),"detector"),loader:(0,q.K2)((0,ot.A)(function*(){const{diagram:tt}=yield R.e(911).then(R.bind(R,86976));return{id:"class",diagram:tt}}),"loader")},te="classDiagram",g={id:te,detector:(0,q.K2)((tt,l)=>!(!/^\s*classDiagram/.test(tt)||"dagre-wrapper"!==l?.class?.defaultRenderer)||/^\s*classDiagram-v2/.test(tt),"detector"),loader:(0,q.K2)((0,ot.A)(function*(){const{diagram:tt}=yield R.e(911).then(R.bind(R,55041));return{id:te,diagram:tt}}),"loader")},y="state",D={id:y,detector:(0,q.K2)((tt,l)=>"dagre-wrapper"!==l?.state?.defaultRenderer&&/^\s*stateDiagram/.test(tt),"detector"),loader:(0,q.K2)((0,ot.A)(function*(){const{diagram:tt}=yield Promise.all([R.e(911),R.e(335)]).then(R.bind(R,63192));return{id:y,diagram:tt}}),"loader")},v="stateDiagram",Q={id:v,detector:(0,q.K2)((tt,l)=>!!(/^\s*stateDiagram-v2/.test(tt)||/^\s*stateDiagram/.test(tt)&&"dagre-wrapper"===l?.state?.defaultRenderer),"detector"),loader:(0,q.K2)((0,ot.A)(function*(){const{diagram:tt}=yield R.e(911).then(R.bind(R,38676));return{id:v,diagram:tt}}),"loader")},xt="journey",Wt={id:xt,detector:(0,q.K2)(tt=>/^\s*journey/.test(tt),"detector"),loader:(0,q.K2)((0,ot.A)(function*(){const{diagram:tt}=yield R.e(911).then(R.bind(R,33350));return{id:xt,diagram:tt}}),"loader")},Xe={draw:(0,q.K2)((tt,l,T)=>{q.Rm.debug("rendering svg for syntax error\n");const N=(0,L.D)(l),st=N.append("g");N.attr("viewBox","0 0 2412 512"),(0,Rt.a$)(N,100,512,!0),st.append("path").attr("class","error-icon").attr("d","m411.313,123.313c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32-9.375,9.375-20.688-20.688c-12.484-12.5-32.766-12.5-45.25,0l-16,16c-1.261,1.261-2.304,2.648-3.31,4.051-21.739-8.561-45.324-13.426-70.065-13.426-105.867,0-192,86.133-192,192s86.133,192 192,192 192-86.133 192-192c0-24.741-4.864-48.327-13.426-70.065 1.402-1.007 2.79-2.049 4.051-3.31l16-16c12.5-12.492 12.5-32.758 0-45.25l-20.688-20.688 9.375-9.375 32.001-31.999zm-219.313,100.687c-52.938,0-96,43.063-96,96 0,8.836-7.164,16-16,16s-16-7.164-16-16c0-70.578 57.422-128 128-128 8.836,0 16,7.164 16,16s-7.164,16-16,16z"),st.append("path").attr("class","error-icon").attr("d","m459.02,148.98c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l16,16c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16.001-16z"),st.append("path").attr("class","error-icon").attr("d","m340.395,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16-16c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l15.999,16z"),st.append("path").attr("class","error-icon").attr("d","m400,64c8.844,0 16-7.164 16-16v-32c0-8.836-7.156-16-16-16-8.844,0-16,7.164-16,16v32c0,8.836 7.156,16 16,16z"),st.append("path").attr("class","error-icon").attr("d","m496,96.586h-32c-8.844,0-16,7.164-16,16 0,8.836 7.156,16 16,16h32c8.844,0 16-7.164 16-16 0-8.836-7.156-16-16-16z"),st.append("path").attr("class","error-icon").attr("d","m436.98,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688l32-32c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32c-6.251,6.25-6.251,16.375-0.001,22.625z"),st.append("text").attr("class","error-text").attr("x",1440).attr("y",250).attr("font-size","150px").style("text-anchor","middle").text("Syntax error in text"),st.append("text").attr("class","error-text").attr("x",1250).attr("y",400).attr("font-size","100px").style("text-anchor","middle").text(`mermaid version ${T}`)},"draw")},We=Xe,hr={db:{},renderer:Xe,parser:{parse:(0,q.K2)(()=>{},"parse")}},_r="flowchart-elk",kr={id:_r,detector:(0,q.K2)((tt,l={})=>!!(/^\s*flowchart-elk/.test(tt)||/^\s*(flowchart|graph)/.test(tt)&&"elk"===l?.flowchart?.defaultRenderer)&&(l.layout="elk",!0),"detector"),loader:(0,q.K2)((0,ot.A)(function*(){const{diagram:tt}=yield R.e(911).then(R.bind(R,84545));return{id:_r,diagram:tt}}),"loader")},zr="timeline",ha={id:zr,detector:(0,q.K2)(tt=>/^\s*timeline/.test(tt),"detector"),loader:(0,q.K2)((0,ot.A)(function*(){const{diagram:tt}=yield R.e(911).then(R.bind(R,28957));return{id:zr,diagram:tt}}),"loader")},ia="mindmap",dr={id:ia,detector:(0,q.K2)(tt=>/^\s*mindmap/.test(tt),"detector"),loader:(0,q.K2)((0,ot.A)(function*(){const{diagram:tt}=yield R.e(911).then(R.bind(R,38710));return{id:ia,diagram:tt}}),"loader")},W="kanban",Tr={id:W,detector:(0,q.K2)(tt=>/^\s*kanban/.test(tt),"detector"),loader:(0,q.K2)((0,ot.A)(function*(){const{diagram:tt}=yield R.e(911).then(R.bind(R,90543));return{id:W,diagram:tt}}),"loader")},Wa={id:"sankey",detector:(0,q.K2)(tt=>/^\s*sankey(-beta)?/.test(tt),"detector"),loader:(0,q.K2)((0,ot.A)(function*(){const{diagram:tt}=yield Promise.all([R.e(911),R.e(51)]).then(R.bind(R,57746));return{id:"sankey",diagram:tt}}),"loader")},Sa={id:"packet",detector:(0,q.K2)(tt=>/^\s*packet(-beta)?/.test(tt),"detector"),loader:(0,q.K2)((0,ot.A)(function*(){const{diagram:tt}=yield Promise.all([R.e(911),R.e(233)]).then(R.bind(R,62033));return{id:"packet",diagram:tt}}),"loader")},Ua={id:"radar",detector:(0,q.K2)(tt=>/^\s*radar-beta/.test(tt),"detector"),loader:(0,q.K2)((0,ot.A)(function*(){const{diagram:tt}=yield Promise.all([R.e(911),R.e(233)]).then(R.bind(R,32810));return{id:"radar",diagram:tt}}),"loader")},_a={id:"block",detector:(0,q.K2)(tt=>/^\s*block(-beta)?/.test(tt),"detector"),loader:(0,q.K2)((0,ot.A)(function*(){const{diagram:tt}=yield Promise.all([R.e(911),R.e(823)]).then(R.bind(R,28642));return{id:"block",diagram:tt}}),"loader")},qa="architecture",Ce={id:qa,detector:(0,q.K2)(tt=>/^\s*architecture/.test(tt),"detector"),loader:(0,q.K2)((0,ot.A)(function*(){const{diagram:tt}=yield Promise.all([R.e(911),R.e(233),R.e(867)]).then(R.bind(R,32699));return{id:qa,diagram:tt}}),"loader")},Ri="treemap",Ct={id:Ri,detector:(0,q.K2)(tt=>/^\s*treemap/.test(tt),"detector"),loader:(0,q.K2)((0,ot.A)(function*(){const{diagram:tt}=yield Promise.all([R.e(911),R.e(233)]).then(R.bind(R,55559));return{id:Ri,diagram:tt}}),"loader")},M=!1,Jt=(0,q.K2)(()=>{M||(M=!0,(0,Rt.Js)("error",hr,tt=>"error"===tt.toLowerCase().trim()),(0,Rt.Js)("---",{db:{clear:(0,q.K2)(()=>{},"clear")},styles:{},renderer:{draw:(0,q.K2)(()=>{},"draw")},parser:{parse:(0,q.K2)(()=>{throw new Error("Diagrams beginning with --- are not valid. If you were trying to use a YAML front-matter, please ensure that you've correctly opened and closed the YAML front-matter with un-indented `---` blocks")},"parse")},init:(0,q.K2)(()=>null,"init")},tt=>tt.toLowerCase().trimStart().startsWith("---")),(0,Rt.Xd)(kr,dr,Ce),(0,Rt.Xd)(Or,Tr,g,sr,Nt,Tt,mt,ht,or,er,It,we,ha,Pe,Q,D,Wt,Mt,Wa,Sa,de,_a,Ua,Ct))},"addDiagrams"),Ve=(0,q.K2)((0,ot.A)(function*(){q.Rm.debug("Loading registered diagrams");const l=(yield Promise.allSettled(Object.entries(Rt.mW).map(function(){var T=(0,ot.A)(function*([N,{detector:st,loader:bt}]){if(bt)try{(0,Rt.Gs)(N)}catch{try{const{diagram:Ie,id:Qt}=yield bt();(0,Rt.Js)(Qt,Ie,st)}catch(Ie){throw q.Rm.error(`Failed to load external diagram with key ${N}. Removing from detectors.`),delete Rt.mW[N],Ie}}});return function(N){return T.apply(this,arguments)}}()))).filter(T=>"rejected"===T.status);if(l.length>0){q.Rm.error(`Failed to load ${l.length} external diagrams`);for(const T of l)q.Rm.error(T);throw new Error(`Failed to load ${l.length} external diagrams`)}}),"loadRegisteredDiagrams");function Lt(tt,l){tt.attr("role","graphics-document document"),""!==l&&tt.attr("aria-roledescription",l)}function Kt(tt,l,T,N){if(void 0!==tt.insert){if(T){const st=`chart-desc-${N}`;tt.attr("aria-describedby",st),tt.insert("desc",":first-child").attr("id",st).text(T)}if(l){const st=`chart-title-${N}`;tt.attr("aria-labelledby",st),tt.insert("title",":first-child").attr("id",st).text(l)}}}(0,q.K2)(Lt,"setA11yDiagramInfo"),(0,q.K2)(Kt,"addSVGa11yTitleDescription");var Je=(class F0{constructor(l,T,N,st,bt){this.type=l,this.text=T,this.db=N,this.parser=st,this.renderer=bt}static fromText(l){return(0,ot.A)(function*(T,N={}){const st=(0,Rt.zj)(),bt=(0,Rt.Ch)(T,st);T=(0,dt.C4)(T)+"\n";try{(0,Rt.Gs)(bt)}catch{const Sr=(0,Rt.J$)(bt);if(!Sr)throw new Rt.C0(`Diagram ${bt} not found.`);const{id:ta,diagram:Ir}=yield Sr();(0,Rt.Js)(ta,Ir)}const{db:Ie,parser:Qt,renderer:Ue,init:br}=(0,Rt.Gs)(bt);return Qt.parser&&(Qt.parser.yy=Ie),Ie.clear?.(),br?.(st),N.title&&Ie.setDiagramTitle?.(N.title),yield Qt.parse(T),new F0(bt,T,Ie,Qt,Ue)}).apply(this,arguments)}render(l,T){var N=this;return(0,ot.A)(function*(){yield N.renderer.draw(N.text,l,T,N)})()}getParser(){return this.parser}getType(){return this.type}static#t=Vr=()=>((0,q.K2)(this,"Diagram"),this)},Vr()),Xr=[],Gr=(0,q.K2)(()=>{Xr.forEach(tt=>{tt()}),Xr=[]},"attachFunctions"),aa=(0,q.K2)(tt=>tt.replace(/^\s*%%(?!{)[^\n]+\n?/gm,"").trimStart(),"cleanupComments");function La(tt){const l=tt.match(Rt.EJ);if(!l)return{text:tt,metadata:{}};let T=(0,S.H)(l[1],{schema:S.r})??{};T="object"!=typeof T||Array.isArray(T)?{}:T;const N={};return T.displayMode&&(N.displayMode=T.displayMode.toString()),T.title&&(N.title=T.title.toString()),T.config&&(N.config=T.config),{text:tt.slice(l[0].length),metadata:N}}(0,q.K2)(La,"extractFrontMatter");var fa=(0,q.K2)(tt=>tt.replace(/\r\n?/g,"\n").replace(/<(\w+)([^>]*)>/g,(l,T,N)=>"<"+T+N.replace(/="([^"]*)"/g,"='$1'")+">"),"cleanupText"),wa=(0,q.K2)(tt=>{const{text:l,metadata:T}=La(tt),{displayMode:N,title:st,config:bt={}}=T;return N&&(bt.gantt||(bt.gantt={}),bt.gantt.displayMode=N),{title:st,config:bt,text:l}},"processFrontmatter"),ja=(0,q.K2)(tt=>{const l=dt._K.detectInit(tt)??{},T=dt._K.detectDirective(tt,"wrap");return Array.isArray(T)?l.wrap=T.some(({type:N})=>"wrap"===N):"wrap"===T?.type&&(l.wrap=!0),{text:(0,dt.vU)(tt),directive:l}},"processDirectives");function $a(tt){const l=fa(tt),T=wa(l),N=ja(T.text),st=(0,dt.$t)(T.config,N.directive);return{code:tt=aa(N.text),title:T.title,config:st}}function yi(tt){const l=(new TextEncoder).encode(tt),T=Array.from(l,N=>String.fromCodePoint(N)).join("");return btoa(T)}(0,q.K2)($a,"preprocessDiagram"),(0,q.K2)(yi,"toBase64");var ln=["foreignobject"],Ji=["dominant-baseline"];function Oi(tt){const l=$a(tt);return(0,Rt.cL)(),(0,Rt.xA)(l.config??{}),l}function zi(tt,l){return cn.apply(this,arguments)}function cn(){return(cn=(0,ot.A)(function*(tt,l){Jt();try{const{code:T,config:N}=Oi(tt);return{diagramType:(yield Rn(T)).type,config:N}}catch(T){if(l?.suppressErrors)return!1;throw T}})).apply(this,arguments)}(0,q.K2)(Oi,"processAndSetConfigs"),(0,q.K2)(zi,"parse");var Ln=(0,q.K2)((tt,l,T=[])=>`\n.${tt} ${l} { ${T.join(" !important; ")} !important; }`,"cssImportantStyles"),Bn=(0,q.K2)((tt,l=new Map)=>{let T="";if(void 0!==tt.themeCSS&&(T+=`\n${tt.themeCSS}`),void 0!==tt.fontFamily&&(T+=`\n:root { --mermaid-font-family: ${tt.fontFamily}}`),void 0!==tt.altFontFamily&&(T+=`\n:root { --mermaid-alt-font-family: ${tt.altFontFamily}}`),l instanceof Map){const Ie=tt.htmlLabels??tt.flowchart?.htmlLabels?["> *","span"]:["rect","polygon","ellipse","circle","path"];l.forEach(Qt=>{(0,wr.A)(Qt.styles)||Ie.forEach(Ue=>{T+=Ln(Qt.id,Ue,Qt.styles)}),(0,wr.A)(Qt.textStyles)||(T+=Ln(Qt.id,"tspan",(Qt?.textStyles||[]).map(Ue=>Ue.replace("color","fill"))))})}return T},"createCssStyles"),Vn=(0,q.K2)((tt,l,T,N)=>{const st=Bn(tt,T),bt=(0,Rt.tM)(l,st,tt.themeVariables);return(0,cr.lK)((0,cr.wE)(`${N}{${bt}}`),cr.As)},"createUserStyles"),hn=(0,q.K2)((tt="",l,T)=>{let N=tt;return!T&&!l&&(N=N.replace(/marker-end="url\([\d+./:=?A-Za-z-]*?#/g,'marker-end="url(#')),N=(0,dt.Sm)(N),N=N.replace(/<br>/g,"<br/>"),N},"cleanUpSvgCode"),Un=(0,q.K2)((tt="",l)=>`<iframe style="width:100%;height:${l?.viewBox?.baseVal?.height?l.viewBox.baseVal.height+"px":"100%"};border:0;margin:0;" src="data:text/html;charset=UTF-8;base64,${yi(`<body style="margin:0">${tt}</body>`)}" sandbox="allow-top-navigation-by-user-activation allow-popups">\n  The "iframe" tag is not supported by your browser.\n</iframe>`,"putIntoIFrame"),tn=(0,q.K2)((tt,l,T,N,st)=>{const bt=tt.append("div");bt.attr("id",T),N&&bt.attr("style",N);const Ie=bt.append("svg").attr("id",l).attr("width","100%").attr("xmlns","http://www.w3.org/2000/svg");return st&&Ie.attr("xmlns:xlink",st),Ie.append("g"),tt},"appendDivSvgG");function Fn(tt,l){return tt.append("iframe").attr("id",l).attr("style","width: 100%; height: 100%;").attr("sandbox","")}(0,q.K2)(Fn,"sandboxedIframe");var xn=(0,q.K2)((tt,l,T,N)=>{tt.getElementById(l)?.remove(),tt.getElementById(T)?.remove(),tt.getElementById(N)?.remove()},"removeExistingElements"),nn=(0,q.K2)(function(){var tt=(0,ot.A)(function*(l,T,N){Jt();const st=Oi(T);T=st.code;const bt=(0,Rt.zj)();q.Rm.debug(bt),T.length>(bt?.maxTextSize??5e4)&&(T="graph TB;a[Maximum text size in diagram exceeded];style a fill:#faa");const Ie="#"+l,Qt="i"+l,Ue="#"+Qt,br="d"+l,Sr="#"+br,ta=(0,q.K2)(()=>{const os=(0,Ke.Ltv)(la?Ue:Sr).node();os&&"remove"in os&&os.remove()},"removeTempElements");let Ir=(0,Ke.Ltv)("body");const la="sandbox"===bt.securityLevel,Ca="loose"===bt.securityLevel,ka=bt.fontFamily;if(void 0!==N){if(N&&(N.innerHTML=""),la){const Ui=Fn((0,Ke.Ltv)(N),Qt);Ir=(0,Ke.Ltv)(Ui.nodes()[0].contentDocument.body),Ir.node().style.margin=0}else Ir=(0,Ke.Ltv)(N);tn(Ir,l,br,`font-family: ${ka}`,"http://www.w3.org/1999/xlink")}else{if(xn(document,l,br,Qt),la){const Ui=Fn((0,Ke.Ltv)("body"),Qt);Ir=(0,Ke.Ltv)(Ui.nodes()[0].contentDocument.body),Ir.node().style.margin=0}else Ir=(0,Ke.Ltv)("body");tn(Ir,l,br)}let Ba,Xa;try{Ba=yield Je.fromText(T,{title:st.title})}catch(Ui){if(bt.suppressErrorRendering)throw ta(),Ui;Ba=yield Je.fromText("error"),Xa=Ui}const za=Ir.select(Sr).node(),Na=Ba.type,ui=za.firstChild,ji=ui.firstChild,$n=Ba.renderer.getClasses?.(T,Ba),Tn=Vn(bt,Na,$n,Ie),Vi=document.createElement("style");Vi.innerHTML=Tn,ui.insertBefore(Vi,ji);try{yield Ba.renderer.draw(T,l,ee.n.version,Ba)}catch(Ui){throw bt.suppressErrorRendering?ta():We.draw(T,l,ee.n.version),Ui}const an=Ir.select(`${Sr} svg`),Ni=Ba.db.getAccTitle?.(),bn=Ba.db.getAccDescription?.();un(Na,an,Ni,bn),Ir.select(`[id="${l}"]`).selectAll("foreignobject > *").attr("xmlns","http://www.w3.org/1999/xhtml");let pn=Ir.select(Sr).node().innerHTML;if(q.Rm.debug("config.arrowMarkerAbsolute",bt.arrowMarkerAbsolute),pn=hn(pn,la,(0,Rt._3)(bt.arrowMarkerAbsolute)),la){const Ui=Ir.select(Sr+" svg").node();pn=Un(pn,Ui)}else Ca||(pn=Rr.A.sanitize(pn,{ADD_TAGS:ln,ADD_ATTR:Ji,HTML_INTEGRATION_POINTS:{foreignobject:!0}}));if(Gr(),Xa)throw Xa;return ta(),{diagramType:Na,svg:pn,bindFunctions:Ba.db.bindFunctions}});return function(l,T,N){return tt.apply(this,arguments)}}(),"render");function kn(tt={}){const l=(0,Rt.hH)({},tt);l?.fontFamily&&!l.themeVariables?.fontFamily&&(l.themeVariables||(l.themeVariables={}),l.themeVariables.fontFamily=l.fontFamily),(0,Rt.wZ)(l),l?.theme&&l.theme in Rt.H$?l.themeVariables=Rt.H$[l.theme].getThemeVariables(l.themeVariables):l&&(l.themeVariables=Rt.H$.default.getThemeVariables(l.themeVariables));const T="object"==typeof l?(0,Rt.UU)(l):(0,Rt.Q2)();(0,q.He)(T.logLevel),Jt()}(0,q.K2)(kn,"initialize");var Rn=(0,q.K2)((tt,l={})=>{const{code:T}=$a(tt);return Je.fromText(T,l)},"getDiagramFromText");function un(tt,l,T,N){Lt(l,tt),Kt(l,T,N,l.attr("id"))}(0,q.K2)(un,"addA11yInfo");var Xi=Object.freeze({render:nn,parse:zi,getDiagramFromText:Rn,initialize:kn,getConfig:Rt.zj,setConfig:Rt.Nk,getSiteConfig:Rt.Q2,updateSiteConfig:Rt.B6,reset:(0,q.K2)(()=>{(0,Rt.cL)()},"reset"),globalReset:(0,q.K2)(()=>{(0,Rt.cL)(Rt.sb)},"globalReset"),defaultConfig:Rt.sb});(0,q.He)((0,Rt.zj)().logLevel),(0,Rt.cL)((0,Rt.zj)());var rn=(0,q.K2)((tt,l,T)=>{q.Rm.warn(tt),(0,dt.dq)(tt)?(T&&T(tt.str,tt.hash),l.push({...tt,message:tt.str,error:tt})):(T&&T(tt),tt instanceof Error&&l.push({str:tt.message,message:tt.message,hash:tt.name,error:tt}))},"handleError"),Yn=(0,q.K2)((0,ot.A)(function*(tt={querySelector:".mermaid"}){try{yield Gt(tt)}catch(l){if((0,dt.dq)(l)&&q.Rm.error(l.str),fe.parseError&&fe.parseError(l),!tt.suppressErrors)throw q.Rm.error("Use the suppressErrors option to suppress these errors"),l}}),"run"),Gt=(0,q.K2)((0,ot.A)(function*({postRenderCallback:tt,querySelector:l,nodes:T}={querySelector:".mermaid"}){const N=Xi.getConfig();let st;if(q.Rm.debug((tt?"":"No ")+"Callback function found"),T)st=T;else{if(!l)throw new Error("Nodes and querySelector are both undefined");st=document.querySelectorAll(l)}q.Rm.debug(`Found ${st.length} diagrams`),void 0!==N?.startOnLoad&&(q.Rm.debug("Start On Load: "+N?.startOnLoad),Xi.updateSiteConfig({startOnLoad:N?.startOnLoad}));const bt=new dt._K.InitIDGenerator(N.deterministicIds,N.deterministicIDSeed);let Ie;const Qt=[];for(const Ue of Array.from(st)){if(q.Rm.info("Rendering diagram: "+Ue.id),Ue.getAttribute("data-processed"))continue;Ue.setAttribute("data-processed","true");const br=`mermaid-${bt.next()}`;Ie=Ue.innerHTML,Ie=(0,ar.T)(dt._K.entityDecode(Ie)).trim().replace(/<br\s*\/?>/gi,"<br/>");const Sr=dt._K.detectInit(Ie);Sr&&q.Rm.debug("Detected early reinit: ",Sr);try{const{svg:ta,bindFunctions:Ir}=yield Z(br,Ie,Ue);Ue.innerHTML=ta,tt&&(yield tt(br)),Ir&&Ir(Ue)}catch(ta){rn(ta,Qt,fe.parseError)}}if(Qt.length>0)throw Qt[0]}),"runThrowsErrors"),d=(0,q.K2)(function(tt){Xi.initialize(tt)},"initialize"),ct=(0,q.K2)(function(){var tt=(0,ot.A)(function*(l,T,N){q.Rm.warn("mermaid.init is deprecated. Please use run instead."),l&&d(l);const st={postRenderCallback:N,querySelector:".mermaid"};"string"==typeof T?st.querySelector=T:T&&(st.nodes=T instanceof HTMLElement?[T]:T),yield Yn(st)});return function(l,T,N){return tt.apply(this,arguments)}}(),"init"),Xt=(0,q.K2)(function(){var tt=(0,ot.A)(function*(l,{lazyLoad:T=!0}={}){Jt(),(0,Rt.Xd)(...l),!1===T&&(yield Ve())});return function(l){return tt.apply(this,arguments)}}(),"registerExternalDiagrams"),kt=(0,q.K2)(function(){if(fe.startOnLoad){const{startOnLoad:tt}=Xi.getConfig();tt&&fe.run().catch(l=>q.Rm.error("Mermaid failed to initialize",l))}},"contentLoaded");typeof document<"u"&&window.addEventListener("load",kt,!1);var vt=(0,q.K2)(function(tt){fe.parseError=tt},"setParseErrorHandler"),ue=[],nt=!1,Dt=(0,q.K2)((0,ot.A)(function*(){if(!nt){for(nt=!0;ue.length>0;){const tt=ue.shift();if(tt)try{yield tt()}catch(l){q.Rm.error("Error executing queue",l)}}nt=!1}}),"executeQueue"),J=(0,q.K2)(function(){var tt=(0,ot.A)(function*(l,T){return new Promise((N,st)=>{ue.push((0,q.K2)(()=>new Promise((Ie,Qt)=>{Xi.parse(l,T).then(Ue=>{Ie(Ue),N(Ue)},Ue=>{q.Rm.error("Error parsing",Ue),fe.parseError?.(Ue),Qt(Ue),st(Ue)})}),"performCall")),Dt().catch(st)})});return function(l,T){return tt.apply(this,arguments)}}(),"parse"),Z=(0,q.K2)((tt,l,T)=>new Promise((N,st)=>{ue.push((0,q.K2)(()=>new Promise((Ie,Qt)=>{Xi.render(tt,l,T).then(Ue=>{Ie(Ue),N(Ue)},Ue=>{q.Rm.error("Error parsing",Ue),fe.parseError?.(Ue),Qt(Ue),st(Ue)})}),"performCall")),Dt().catch(st)}),"render"),fe={startOnLoad:!0,mermaidAPI:Xi,parse:J,render:Z,init:ct,run:Yn,registerExternalDiagrams:Xt,registerLayoutLoaders:Pt.sO,initialize:d,parseError:void 0,contentLoaded:kt,setParseErrorHandler:vt,detectType:Rt.Ch,registerIconPacks:Ge.pC,getRegisteredDiagramsMetadata:(0,q.K2)(()=>Object.keys(Rt.mW).map(tt=>({id:tt})),"getRegisteredDiagramsMetadata")},Le=fe;
/*! Check if previously processed */
/*!
       * Wait for document loaded before starting the execution
       */},4787:(Ja,vr)=>{"use strict";Object.defineProperty(vr,"__esModule",{value:!0}),vr.BLANK_URL=vr.relativeFirstCharacters=vr.whitespaceEscapeCharsRegex=vr.urlSchemeRegex=vr.ctrlCharactersRegex=vr.htmlCtrlEntityRegex=vr.htmlEntitiesRegex=vr.invalidProtocolRegex=void 0,vr.invalidProtocolRegex=/^([^\w]*)(javascript|data|vbscript)/im,vr.htmlEntitiesRegex=/&#(\w+)(^\w|;)?/g,vr.htmlCtrlEntityRegex=/&(newline|tab);/gi,vr.ctrlCharactersRegex=/[\u0000-\u001F\u007F-\u009F\u2000-\u200D\uFEFF]/gim,vr.urlSchemeRegex=/^.+(:|&colon;)/gim,vr.whitespaceEscapeCharsRegex=/(\\|%5[cC])((%(6[eE]|72|74))|[nrt])/g,vr.relativeFirstCharacters=[".","/"],vr.BLANK_URL="about:blank"},4877:(Ja,vr,R)=>{vr.formatArgs=function ee($){if($[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+$[0]+(this.useColors?"%c ":" ")+"+"+Ja.exports.humanize(this.diff),!this.useColors)return;const A="color: "+this.color;$.splice(1,0,A,"color: inherit");let At=0,wt=0;$[0].replace(/%[a-zA-Z%]/g,Ge=>{"%%"!==Ge&&(At++,"%c"===Ge&&(wt=At))}),$.splice(wt,0,A)},vr.save=function L($){try{$?vr.storage.setItem("debug",$):vr.storage.removeItem("debug")}catch{}},vr.load=function S(){let $;try{$=vr.storage.getItem("debug")||vr.storage.getItem("DEBUG")}catch{}return!$&&typeof process<"u"&&"env"in process&&($=process.env.DEBUG),$},vr.useColors=function ot(){if(typeof window<"u"&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let $;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&($=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt($[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},vr.storage=function Pt(){try{return localStorage}catch{}}(),vr.destroy=(()=>{let $=!1;return()=>{$||($=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),vr.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],vr.log=console.debug||console.log||(()=>{}),Ja.exports=R(91820)(vr);const{formatters:ut}=Ja.exports;ut.j=function($){try{return JSON.stringify($)}catch(A){return"[UnexpectedJSONParseError]: "+A.message}}},5675:(Ja,vr,R)=>{"use strict";R.d(vr,{A:()=>L});var ot=R(32303),ee=R(40622),L=(0,ot.K2)((S,Pt)=>{let ut;return"sandbox"===Pt&&(ut=(0,ee.Ltv)("#i"+S)),(0,ee.Ltv)("sandbox"===Pt?ut.nodes()[0].contentDocument.body:"body").select(`[id="${S}"]`)},"getDiagramElement")},8026:(Ja,vr,R)=>{"use strict";R.r(vr),R.d(vr,{render:()=>ar});var ot=R(89204),ee=R(32303),L=R(15363),S=R(76805),Pt=R(40622);function ut(Ke,cr){Ke.forEach(Rr=>{const wr={id:Rr.id,labelText:Rr.label,height:Rr.height,width:Rr.width,padding:Rr.padding??0};Object.keys(Rr).forEach(Vr=>{["id","label","height","width","padding","x","y"].includes(Vr)||(wr[Vr]=Rr[Vr])}),cr.add({group:"nodes",data:wr,position:{x:Rr.x??0,y:Rr.y??0}})})}function $(Ke,cr){Ke.forEach(Rr=>{const wr={id:Rr.id,source:Rr.start,target:Rr.end};Object.keys(Rr).forEach(Vr=>{["id","start","end"].includes(Vr)||(wr[Vr]=Rr[Vr])}),cr.add({group:"edges",data:wr})})}function A(Ke){return new Promise(cr=>{const Rr=(0,Pt.Ltv)("body").append("div").attr("id","cy").attr("style","display:none"),wr=(0,L.A)({container:document.getElementById("cy"),style:[{selector:"edge",style:{"curve-style":"bezier"}}]});Rr.remove(),ut(Ke.nodes,wr),$(Ke.edges,wr),wr.nodes().forEach(function(ra){ra.layoutDimensions=()=>{const Nr=ra.data();return{w:Nr.width,h:Nr.height}}}),wr.layout({name:"cose-bilkent",quality:"proof",styleEnabled:!1,animate:!1}).run(),wr.ready(ra=>{ee.Rm.info("Cytoscape ready",ra),cr(wr)})})}function At(Ke){return Ke.nodes().map(cr=>{const Rr=cr.data(),wr=cr.position(),Vr={id:Rr.id,x:wr.x,y:wr.y};return Object.keys(Rr).forEach(ra=>{"id"!==ra&&(Vr[ra]=Rr[ra])}),Vr})}function wt(Ke){return Ke.edges().map(cr=>{const Rr=cr.data(),wr=cr._private.rscratch,Vr={id:Rr.id,source:Rr.source,target:Rr.target,startX:wr.startX,startY:wr.startY,midX:wr.midX,midY:wr.midY,endX:wr.endX,endY:wr.endY};return Object.keys(Rr).forEach(ra=>{["id","source","target"].includes(ra)||(Vr[ra]=Rr[ra])}),Vr})}function Ge(Ke,cr){return dt.apply(this,arguments)}function dt(){return(dt=(0,ot.A)(function*(Ke,cr){ee.Rm.debug("Starting cose-bilkent layout algorithm");try{Rt(Ke);const Rr=yield A(Ke),wr=At(Rr),Vr=wt(Rr);return ee.Rm.debug(`Layout completed: ${wr.length} nodes, ${Vr.length} edges`),{nodes:wr,edges:Vr}}catch(Rr){throw ee.Rm.error("Error in cose-bilkent layout algorithm:",Rr),Rr}})).apply(this,arguments)}function Rt(Ke){if(!Ke)throw new Error("Layout data is required");if(!Ke.config)throw new Error("Configuration is required in layout data");if(!Ke.rootNode)throw new Error("Root node is required");if(!Ke.nodes||!Array.isArray(Ke.nodes))throw new Error("No nodes found in layout data");if(!Array.isArray(Ke.edges))throw new Error("Edges array is required in layout data");return!0}L.A.use(S),(0,ee.K2)(ut,"addNodes"),(0,ee.K2)($,"addEdges"),(0,ee.K2)(A,"createCytoscapeInstance"),(0,ee.K2)(At,"extractPositionedNodes"),(0,ee.K2)(wt,"extractPositionedEdges"),(0,ee.K2)(Ge,"executeCoseBilkentLayout"),(0,ee.K2)(Rt,"validateLayoutData");var ar=(0,ee.K2)(function(){var Ke=(0,ot.A)(function*(cr,Rr,{insertCluster:wr,insertEdge:Vr,insertEdgeLabel:ra,insertMarkers:Nr,insertNode:Fr,log:Se,positionEdgeLabel:Or},{}){const z={},ft={},Bt=Rr.select("g");Nr(Bt,cr.markers,cr.type,cr.diagramId);const we=Bt.insert("g").attr("class","subgraphs"),X=Bt.insert("g").attr("class","edgePaths"),ae=Bt.insert("g").attr("class","edgeLabels"),w=Bt.insert("g").attr("class","nodes");Se.debug("Inserting nodes into DOM for dimension calculation"),yield Promise.all(cr.nodes.map(function(){var qt=(0,ot.A)(function*(V){if(V.isGroup){const pt={...V};ft[V.id]=pt,z[V.id]=pt,yield wr(we,V)}else{const pt={...V};z[V.id]=pt;const H=yield Fr(w,V,{config:cr.config,dir:cr.direction||"TB"}),Nt=H.node().getBBox();pt.width=Nt.width,pt.height=Nt.height,pt.domId=H,Se.debug(`Node ${V.id} dimensions: ${Nt.width}x${Nt.height}`)}});return function(V){return qt.apply(this,arguments)}}())),Se.debug("Running cose-bilkent layout algorithm");const re={...cr,nodes:cr.nodes.map(qt=>{const V=z[qt.id];return{...qt,width:V.width,height:V.height}})},It=yield Ge(re,cr.config);Se.debug("Positioning nodes based on layout results"),It.nodes.forEach(qt=>{const V=z[qt.id];V?.domId&&(V.domId.attr("transform",`translate(${qt.x}, ${qt.y})`),V.x=qt.x,V.y=qt.y,Se.debug(`Positioned node ${V.id} at center (${qt.x}, ${qt.y})`))}),It.edges.forEach(qt=>{const V=cr.edges.find(pt=>pt.id===qt.id);V&&(V.points=[{x:qt.startX,y:qt.startY},{x:qt.midX,y:qt.midY},{x:qt.endX,y:qt.endY}])}),Se.debug("Inserting and positioning edges"),yield Promise.all(cr.edges.map(function(){var qt=(0,ot.A)(function*(V){yield ra(ae,V);const H=z[V.start??""],Nt=z[V.end??""];if(H&&Nt){const St=It.edges.find($t=>$t.id===V.id);if(St){Se.debug("APA01 positionedEdge",St);const $t={...V},ye=Vr(X,$t,ft,cr.type,H,Nt,cr.diagramId);Or($t,ye)}else{const $t={...V,points:[{x:H.x||0,y:H.y||0},{x:Nt.x||0,y:Nt.y||0}]},ye=Vr(X,$t,ft,cr.type,H,Nt,cr.diagramId);Or($t,ye)}}});return function(V){return qt.apply(this,arguments)}}())),Se.debug("Cose-bilkent rendering completed")});return function(cr,Rr,wr,Vr){return Ke.apply(this,arguments)}}(),"render")},8086:(Ja,vr,R)=>{"use strict";R.d(vr,{P:()=>L});var ot=R(79006),ee=R(32303),L=(0,ee.K2)((ut,$,A,At)=>{ut.attr("class",A);const{width:wt,height:Ge,x:dt,y:Rt}=S(ut,$);(0,ot.a$)(ut,Ge,wt,At);const q=Pt(dt,Rt,wt,Ge,$);ut.attr("viewBox",q),ee.Rm.debug(`viewBox configured: ${q} with padding: ${$}`)},"setupViewPortForSVG"),S=(0,ee.K2)((ut,$)=>{const A=ut.node()?.getBBox()||{width:0,height:0,x:0,y:0};return{width:A.width+2*$,height:A.height+2*$,x:A.x,y:A.y}},"calculateDimensionsWithPadding"),Pt=(0,ee.K2)((ut,$,A,At,wt)=>`${ut-wt} ${$-wt} ${A} ${At}`,"createViewBox")},15363:(Ja,vr,R)=>{"use strict";function ot(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=Array(t);r<t;r++)a[r]=e[r];return a}function S(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ut(e,t,r){return t&&function Pt(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,Ke(a.key),a)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function $(e,t){var r=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=Rr(e))||t){r&&(e=r);var a=0,i=function(){};return{s:i,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(u){throw u},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,s=!0,o=!1;return{s:function(){r=r.call(e)},n:function(){var u=r.next();return s=u.done,u},e:function(u){o=!0,n=u},f:function(){try{s||null==r.return||r.return()}finally{if(o)throw n}}}}function A(e,t,r){return(t=Ke(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Rt(e,t){return function ee(e){if(Array.isArray(e))return e}(e)||function wt(e,t){var r=null==e?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var a,i,n,s,o=[],u=!0,h=!1;try{if(n=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(a=n.call(r)).done)&&(o.push(a.value),o.length!==t);u=!0);}catch(f){h=!0,i=f}finally{try{if(!u&&null!=r.return&&(s=r.return(),Object(s)!==s))return}finally{if(h)throw i}}return o}}(e,t)||Rr(e,t)||function Ge(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function q(e){return function L(e){if(Array.isArray(e))return ot(e)}(e)||function At(e){if(typeof Symbol<"u"&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Rr(e)||function dt(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ke(e){var t=function ar(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t);if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}function cr(e){return(cr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function Rr(e,t){if(e){if("string"==typeof e)return ot(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ot(e,t):void 0}}R.d(vr,{A:()=>Ps});var zt,Ae,ve,ce,De,er,Lr,_e,sr,te,be,ir,y,E,m,D,b,C,Q,xt,jt,Ut,xe,Xe,gr,hr,$e,He,wr=typeof window>"u"?null:window,Vr=wr?wr.navigator:null,ra=cr(""),Nr=cr({}),Fr=cr(function(){}),Se=typeof HTMLElement>"u"?"undefined":cr(HTMLElement),Or=function(t){return t&&t.instanceString&&z(t.instanceString)?t.instanceString():null},je=function(t){return null!=t&&cr(t)==ra},z=function(t){return null!=t&&cr(t)===Fr},ft=function(t){return!re(t)&&(Array.isArray?Array.isArray(t):null!=t&&t instanceof Array)},Bt=function(t){return null!=t&&cr(t)===Nr&&!ft(t)&&t.constructor===Object},X=function(t){return null!=t&&cr(t)===cr(1)&&!isNaN(t)},w=function(t){if("undefined"!==Se)return null!=t&&t instanceof HTMLElement},re=function(t){return It(t)||qt(t)},It=function(t){return"collection"===Or(t)&&t._private.single},qt=function(t){return"collection"===Or(t)&&!t._private.single},V=function(t){return"core"===Or(t)},pt=function(t){return"stylesheet"===Or(t)},Nt=function(t){return null==t||!(""!==t&&!t.match(/^\s+$/))},ye=function(t){return function(t){return null!=t&&cr(t)===Nr}(t)&&z(t.then)},Pe=function(t,r){r||(r=function(){if(1===arguments.length)return arguments[0];if(0===arguments.length)return"undefined";for(var n=[],s=0;s<arguments.length;s++)n.push(arguments[s]);return n.join("$")});var a=function(){var o,s=arguments,u=r.apply(this,s),h=a.cache;return(o=h[u])||(o=h[u]=t.apply(this,s)),o};return a.cache={},a},oe=Pe(function(e){return e.replace(/([A-Z])/g,function(t){return"-"+t.toLowerCase()})}),qe=Pe(function(e){return e.replace(/(-\w)/g,function(t){return t[1].toUpperCase()})}),ze=Pe(function(e,t){return e+t[0].toUpperCase()+t.substring(1)},function(e,t){return e+"$"+t}),Et=function(t){return Nt(t)?t:t.charAt(0).toUpperCase()+t.substring(1)},Tt=function(t,r){return t.slice(-1*r.length)===r},B="(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))",F="rgb[a]?\\(("+B+"[%]?)\\s*,\\s*("+B+"[%]?)\\s*,\\s*("+B+"[%]?)(?:\\s*,\\s*("+B+"))?\\)",et="rgb[a]?\\((?:"+B+"[%]?)\\s*,\\s*(?:"+B+"[%]?)\\s*,\\s*(?:"+B+"[%]?)(?:\\s*,\\s*(?:"+B+"))?\\)",mt="hsl[a]?\\(("+B+")\\s*,\\s*("+B+"[%])\\s*,\\s*("+B+"[%])(?:\\s*,\\s*("+B+"))?\\)",it="hsl[a]?\\((?:"+B+")\\s*,\\s*(?:"+B+"[%])\\s*,\\s*(?:"+B+"[%])(?:\\s*,\\s*(?:"+B+"))?\\)",ht=function(t,r){return t<r?-1:t>r?1:0},G=null!=Object.assign?Object.assign.bind(Object):function(e){for(var t=arguments,r=1;r<t.length;r++){var a=t[r];if(null!=a)for(var i=Object.keys(a),n=0;n<i.length;n++){var s=i[n];e[s]=a[s]}}return e},pe=function(t){return(ft(t)?t:null)||function(t){return Re[t.toLowerCase()]}(t)||function(t){if((4===t.length||7===t.length)&&"#"===t[0]){var a,i,n,s=16;return 4===t.length?(a=parseInt(t[1]+t[1],s),i=parseInt(t[2]+t[2],s),n=parseInt(t[3]+t[3],s)):(a=parseInt(t[1]+t[2],s),i=parseInt(t[3]+t[4],s),n=parseInt(t[5]+t[6],s)),[a,i,n]}}(t)||function(t){var r,a=new RegExp("^"+F+"$").exec(t);if(a){r=[];for(var i=[],n=1;n<=3;n++){var s=a[n];if("%"===s[s.length-1]&&(i[n]=!0),s=parseFloat(s),i[n]&&(s=s/100*255),s<0||s>255)return;r.push(Math.floor(s))}if((i[1]||i[2]||i[3])&&!(i[1]&&i[2]&&i[3]))return;var h=a[4];if(void 0!==h){if((h=parseFloat(h))<0||h>1)return;r.push(h)}}return r}(t)||function(t){var r,a,i,n,s,o,u,h;function f(_,U,O){return O<0&&(O+=1),O>1&&(O-=1),O<1/6?_+6*(U-_)*O:O<.5?U:O<2/3?_+(U-_)*(2/3-O)*6:_}var p=new RegExp("^"+mt+"$").exec(t);if(p){if((a=parseInt(p[1]))<0?a=(360- -1*a%360)%360:a>360&&(a%=360),a/=360,(i=parseFloat(p[2]))<0||i>100||(i/=100,(n=parseFloat(p[3]))<0||n>100)||(n/=100,void 0!==(s=p[4])&&((s=parseFloat(s))<0||s>1)))return;if(0===i)o=u=h=Math.round(255*n);else{var x=n<.5?n*(1+i):n+i-n*i,k=2*n-x;o=Math.round(255*f(k,x,a+1/3)),u=Math.round(255*f(k,x,a)),h=Math.round(255*f(k,x,a-1/3))}r=[o,u,h,s]}return r}(t)},Re={transparent:[0,0,0,0],aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},Ze=function(t){for(var r=t.map,a=t.keys,i=a.length,n=0;n<i;n++){var s=a[n];if(Bt(s))throw Error("Tried to set map with object key");n<a.length-1?(null==r[s]&&(r[s]={}),r=r[s]):r[s]=t.value}},de=function(t){for(var r=t.map,a=t.keys,i=a.length,n=0;n<i;n++){var s=a[n];if(Bt(s))throw Error("Tried to get map with object key");if(null==(r=r[s]))return r}return r},mr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function xr(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function or(){return Ae?zt:(Ae=1,zt=function e(t){var r=typeof t;return null!=t&&("object"==r||"function"==r)})}function Qe(){if(er)return De;er=1;var e=function Ee(){return ce?ve:(ce=1,ve="object"==typeof mr&&mr&&mr.Object===Object&&mr)}(),t="object"==typeof self&&self&&self.Object===Object&&self,r=e||t||Function("return this")();return De=r}function I(){if(E)return y;E=1;var e=Qe();return y=e.Symbol}function Vt(){if(xt)return Q;xt=1;var e=I(),t=function v(){if(D)return m;D=1;var e=I(),t=Object.prototype,r=t.hasOwnProperty,a=t.toString,i=e?e.toStringTag:void 0;return m=function n(s){var o=r.call(s,i),u=s[i];try{s[i]=void 0;var h=!0}catch{}var f=a.call(s);return h&&(o?s[i]=u:delete s[i]),f}}(),r=function P(){if(C)return b;C=1;var t=Object.prototype.toString;return b=function r(a){return t.call(a)}}(),n=e?e.toStringTag:void 0;return Q=function s(o){return null==o?void 0===o?"[object Undefined]":"[object Null]":n&&n in Object(o)?t(o):r(o)}}function We(){if(Xe)return xe;Xe=1;var e=Vt(),t=function Wt(){return Ut?jt:(Ut=1,jt=function e(t){return null!=t&&"object"==typeof t})}();return xe=function a(i){return"symbol"==typeof i||t(i)&&"[object Symbol]"==e(i)}}var kr=function Ar(){if(He)return $e;He=1;var e=or(),t=function Hr(){if(_e)return Lr;_e=1;var e=Qe();return Lr=function(){return e.Date.now()}}(),r=function _r(){if(hr)return gr;hr=1;var e=function g(){if(ir)return be;ir=1;var e=function ne(){if(te)return sr;te=1;var e=/\s/;return sr=function t(r){for(var a=r.length;a--&&e.test(r.charAt(a)););return a}}(),t=/^\s+/;return be=function r(a){return a&&a.slice(0,e(a)+1).replace(t,"")}}(),t=or(),r=We(),i=/^[-+]0x[0-9a-f]+$/i,n=/^0b[01]+$/i,s=/^0o[0-7]+$/i,o=parseInt;return gr=function u(h){if("number"==typeof h)return h;if(r(h))return NaN;if(t(h)){var f="function"==typeof h.valueOf?h.valueOf():h;h=t(f)?f+"":f}if("string"!=typeof h)return 0===h?h:+h;h=e(h);var p=n.test(h);return p||s.test(h)?o(h.slice(2),p?2:8):i.test(h)?NaN:+h}}(),i=Math.max,n=Math.min;return $e=function s(o,u,h){var f,p,x,k,_,U,O=0,K=!1,Y=!1,j=!0;if("function"!=typeof o)throw new TypeError("Expected a function");function yt(Oe){var tr=f,ur=p;return f=p=void 0,O=Oe,k=o.apply(ur,tr)}function Ht(Oe){var tr=Oe-U;return void 0===U||tr>=u||tr<0||Y&&Oe-O>=x}function he(){var Oe=t();if(Ht(Oe))return me(Oe);_=setTimeout(he,function se(Oe){var fr=u-(Oe-U);return Y?n(fr,x-(Oe-O)):fr}(Oe))}function me(Oe){return _=void 0,j&&f?yt(Oe):(f=p=void 0,k)}function Me(){var Oe=t(),tr=Ht(Oe);if(f=arguments,p=this,U=Oe,tr){if(void 0===_)return function ie(Oe){return O=Oe,_=setTimeout(he,u),K?yt(Oe):k}(U);if(Y)return clearTimeout(_),_=setTimeout(he,u),yt(U)}return void 0===_&&(_=setTimeout(he,u)),k}return u=r(u)||0,e(h)&&(K=!!h.leading,x=(Y="maxWait"in h)?i(r(h.maxWait)||0,u):x,j="trailing"in h?!!h.trailing:j),Me.cancel=function Te(){void 0!==_&&clearTimeout(_),O=0,f=U=p=_=void 0},Me.flush=function Be(){return void 0===_?k:me(t())},Me}}(),zr=xr(kr),Er=wr?wr.performance:null,Jr=Er&&Er.now?function(){return Er.now()}:function(){return Date.now()},Br=function(){if(wr){if(wr.requestAnimationFrame)return function(e){wr.requestAnimationFrame(e)};if(wr.mozRequestAnimationFrame)return function(e){wr.mozRequestAnimationFrame(e)};if(wr.webkitRequestAnimationFrame)return function(e){wr.webkitRequestAnimationFrame(e)};if(wr.msRequestAnimationFrame)return function(e){wr.msRequestAnimationFrame(e)}}return function(e){e&&setTimeout(function(){e(Jr())},1e3/60)}}(),ha=function(t){return Br(t)},ia=Jr,jr=9261,lr=5381,dr=function(t){for(var i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:jr;!(i=t.next()).done;)a=65599*a+i.value|0;return a},W=function(t){return 65599*(arguments.length>1&&void 0!==arguments[1]?arguments[1]:jr)+t|0},Yt=function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:lr;return(r<<5)+r+t|0},Ne=function(t){return 2097152*t[0]+t[1]},Tr=function(t,r){return[W(t[0],r[0]),Yt(t[1],r[1])]},yr=function(t,r){var a={value:0,done:!1},i=0,n=t.length;return dr({next:function(){return i<n?a.value=t[i++]:a.done=!0,a}},r)},da=function(t,r){var a={value:0,done:!1},i=0,n=t.length;return dr({next:function(){return i<n?a.value=t.charCodeAt(i++):a.done=!0,a}},r)},Pa=function(){return Ia(arguments)},Ia=function(t){for(var r,a=0;a<t.length;a++){var i=t[a];r=0===a?da(i):da(i,r)}return r};var sa=!0,Sa=null!=console.warn,ea=null!=console.trace,Va=Number.MAX_SAFE_INTEGER||9007199254740991,pr=function(){return!0},Ua=function(){return!1},nr=function(){return 0},Oa=function(){},Ka=function(t){throw new Error(t)},ti=function(t){if(void 0===t)return sa;sa=!!t},_a=function(t){ti()&&(Sa?console.warn(t):(console.log(t),ea&&console.trace()))},Ha=function(t){return null==t?t:ft(t)?t.slice():Bt(t)?function(t){return G({},t)}(t):t},hi=function(t,r){for(r=t="";t++<36;r+=51*t&52?(15^t?8^Math.random()*(20^t?16:4):4).toString(16):"-");return r},Ce={},Ri=function(){return Ce},Fe=function(t){var r=Object.keys(t);return function(a){for(var i={},n=0;n<r.length;n++){var s=r[n],o=a?.[s];i[s]=void 0===o?t[s]:o}return i}},at=function(t,r,a){for(var i=t.length-1;i>=0;i--)t[i]===r&&t.splice(i,1)},Ct=function(t){t.splice(0,t.length)},Jt=function(t,r,a){return a&&(r=ze(a,r)),t[r]},Ve=function(t,r,a,i){a&&(r=ze(a,r)),t[r]=i},Lt=typeof Map<"u"?Map:function(){return ut(function e(){S(this,e),this._obj={}},[{key:"set",value:function(r,a){return this._obj[r]=a,this}},{key:"delete",value:function(r){return this._obj[r]=void 0,this}},{key:"clear",value:function(){this._obj={}}},{key:"has",value:function(r){return void 0!==this._obj[r]}},{key:"get",value:function(r){return this._obj[r]}}])}(),Je=function(){return ut(function e(t){if(S(this,e),this._obj=Object.create(null),this.size=0,null!=t){var r;r=null!=t.instanceString&&t.instanceString()===this.instanceString()?t.toArray():t;for(var a=0;a<r.length;a++)this.add(r[a])}},[{key:"instanceString",value:function(){return"set"}},{key:"add",value:function(r){var a=this._obj;1!==a[r]&&(a[r]=1,this.size++)}},{key:"delete",value:function(r){var a=this._obj;1===a[r]&&(a[r]=0,this.size--)}},{key:"clear",value:function(){this._obj=Object.create(null)}},{key:"has",value:function(r){return 1===this._obj[r]}},{key:"toArray",value:function(){var r=this;return Object.keys(this._obj).filter(function(a){return r.has(a)})}},{key:"forEach",value:function(r,a){return this.toArray().forEach(r,a)}}])}(),Xr="undefined"!==(typeof Set>"u"?"undefined":cr(Set))?Set:Je,Gr=function(t,r){var a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(void 0!==t&&void 0!==r&&V(t)){var i=r.group;if(null==i&&(i=r.data&&null!=r.data.source&&null!=r.data.target?"edges":"nodes"),"nodes"===i||"edges"===i){this.length=1,this[0]=this;var n=this._private={cy:t,single:!0,data:r.data||{},position:r.position||{x:0,y:0},autoWidth:void 0,autoHeight:void 0,autoPadding:void 0,compoundBoundsClean:!1,listeners:[],group:i,style:{},rstyle:{},styleCxts:[],styleKeys:{},removed:!0,selected:!!r.selected,selectable:void 0===r.selectable||!!r.selectable,locked:!!r.locked,grabbed:!1,grabbable:void 0===r.grabbable||!!r.grabbable,pannable:void 0===r.pannable?"edges"===i:!!r.pannable,active:!1,classes:new Xr,animation:{current:[],queue:[]},rscratch:{},scratch:r.scratch||{},edges:[],children:[],parent:r.parent&&r.parent.isNode()?r.parent:null,traversalCache:{},backgrounding:!1,bbCache:null,bbCacheShift:{x:0,y:0},bodyBounds:null,overlayBounds:null,labelBounds:{all:null,source:null,target:null,main:null},arrowBounds:{source:null,target:null,"mid-source":null,"mid-target":null}};if(null==n.position.x&&(n.position.x=0),null==n.position.y&&(n.position.y=0),r.renderedPosition){var s=r.renderedPosition,o=t.pan(),u=t.zoom();n.position={x:(s.x-o.x)/u,y:(s.y-o.y)/u}}var h=[];ft(r.classes)?h=r.classes:je(r.classes)&&(h=r.classes.split(/\s+/));for(var f=0,p=h.length;f<p;f++){var x=h[f];!x||""===x||n.classes.add(x)}this.createEmitter(),(void 0===a||a)&&this.restore();var k=r.style||r.css;k&&(_a("Setting a `style` bypass at element creation should be done only when absolutely necessary.  Try to use the stylesheet instead."),this.style(k))}else Ka("An element must be of type `nodes` or `edges`; you specified `"+i+"`")}else Ka("An element must have a core reference and parameters set")},aa=function(t){return t={bfs:t.bfs||!t.dfs,dfs:t.dfs||!t.bfs},function(a,i,n){var s;Bt(a)&&!re(a)&&(a=(s=a).roots||s.root,i=s.visit,n=s.directed),n=2!==arguments.length||z(i)?n:i,i=z(i)?i:function(){};for(var U,o=this._private.cy,u=a=je(a)?this.filter(a):a,h=[],f=[],p={},x={},k={},_=0,O=this.byGroup(),K=O.nodes,Y=O.edges,j=0;j<u.length;j++){var yt=u[j],ie=yt.id();yt.isNode()&&(h.unshift(yt),t.bfs&&(k[ie]=!0,f.push(yt)),x[ie]=0)}for(var Ht,se=function(){var Oe=t.bfs?h.shift():h.pop(),tr=Oe.id();if(t.dfs){if(k[tr])return 0;k[tr]=!0,f.push(Oe)}var qr,ur=x[tr],fr=p[tr],rr=null!=fr?fr.source():null,Cr=null!=fr?fr.target():null,Ur=null==fr?void 0:Oe.same(rr)?Cr[0]:rr[0];if(!0===(qr=i(Oe,fr,Ur,_++,ur)))return U=Oe,1;if(!1===qr)return 1;for(var Dr=Oe.connectedEdges().filter(function(Aa){return(!n||Aa.source().same(Oe))&&Y.has(Aa)}),Wr=0;Wr<Dr.length;Wr++){var ga=Dr[Wr],Ea=ga.connectedNodes().filter(function(Aa){return!Aa.same(Oe)&&K.has(Aa)}),pa=Ea.id();0!==Ea.length&&!k[pa]&&(h.push(Ea=Ea[0]),t.bfs&&(k[pa]=!0,f.push(Ea)),p[pa]=ga,x[pa]=x[tr]+1)}};0!==h.length&&(0===(Ht=se())||1!==Ht););for(var he=o.collection(),me=0;me<f.length;me++){var Te=f[me],Be=p[Te.id()];null!=Be&&he.push(Be),he.push(Te)}return{path:o.collection(he),found:o.collection(U)}}},La={breadthFirstSearch:aa({bfs:!0}),depthFirstSearch:aa({dfs:!0})};La.bfs=La.breadthFirstSearch,La.dfs=La.depthFirstSearch;var ja,yi,Ei,fa={exports:{}},wa=fa.exports;var cn,Pr=xr(function mi(){return Ei||(Ei=1,yi=function $a(){return ja||(ja=1,e=fa,function(){var r,a,i,n,s,o,u,h,f,p,x,k,_,U,O;i=Math.floor,p=Math.min,a=function(K,Y){return K<Y?-1:K>Y?1:0},f=function(K,Y,j,yt,ie){var se;if(null==j&&(j=0),null==ie&&(ie=a),j<0)throw new Error("lo must be non-negative");for(null==yt&&(yt=K.length);j<yt;)ie(Y,K[se=i((j+yt)/2)])<0?yt=se:j=se+1;return[].splice.apply(K,[j,j-j].concat(Y)),Y},o=function(K,Y,j){return null==j&&(j=a),K.push(Y),U(K,0,K.length-1,j)},s=function(K,Y){var j,yt;return null==Y&&(Y=a),j=K.pop(),K.length?(yt=K[0],K[0]=j,O(K,0,Y)):yt=j,yt},h=function(K,Y,j){var yt;return null==j&&(j=a),yt=K[0],K[0]=Y,O(K,0,j),yt},u=function(K,Y,j){var yt;return null==j&&(j=a),K.length&&j(K[0],Y)<0&&(Y=(yt=[K[0],Y])[0],K[0]=yt[1],O(K,0,j)),Y},n=function(K,Y){var yt,ie,se,Ht,he;for(null==Y&&(Y=a),Ht=[],yt=0,ie=(se=function(){he=[];for(var me=0,Te=i(K.length/2);0<=Te?me<Te:me>Te;0<=Te?me++:me--)he.push(me);return he}.apply(this).reverse()).length;yt<ie;yt++)Ht.push(O(K,se[yt],Y));return Ht},_=function(K,Y,j){var yt;if(null==j&&(j=a),-1!==(yt=K.indexOf(Y)))return U(K,0,yt,j),O(K,yt,j)},x=function(K,Y,j){var ie,se,Ht,he;if(null==j&&(j=a),!(ie=K.slice(0,Y)).length)return ie;for(n(ie,j),se=0,Ht=(he=K.slice(Y)).length;se<Ht;se++)u(ie,he[se],j);return ie.sort(j).reverse()},k=function(K,Y,j){var yt,ie,se,Ht,he,me,Te,Be,Me;if(null==j&&(j=a),10*Y<=K.length){if(!(se=K.slice(0,Y).sort(j)).length)return se;for(ie=se[se.length-1],Ht=0,me=(Te=K.slice(Y)).length;Ht<me;Ht++)j(yt=Te[Ht],ie)<0&&(f(se,yt,0,null,j),se.pop(),ie=se[se.length-1]);return se}for(n(K,j),Me=[],he=0,Be=p(Y,K.length);0<=Be?he<Be:he>Be;0<=Be?++he:--he)Me.push(s(K,j));return Me},U=function(K,Y,j,yt){var ie,se,Ht;for(null==yt&&(yt=a),ie=K[j];j>Y&&yt(ie,se=K[Ht=j-1>>1])<0;)K[j]=se,j=Ht;return K[j]=ie},O=function(K,Y,j){var yt,ie,se,Ht,he;for(null==j&&(j=a),ie=K.length,he=Y,se=K[Y],yt=2*Y+1;yt<ie;)(Ht=yt+1)<ie&&!(j(K[yt],K[Ht])<0)&&(yt=Ht),K[Y]=K[yt],yt=2*(Y=yt)+1;return K[Y]=se,U(K,he,Y,j)},r=function(){function K(Y){this.cmp=Y??a,this.nodes=[]}return K.push=o,K.pop=s,K.replace=h,K.pushpop=u,K.heapify=n,K.updateItem=_,K.nlargest=x,K.nsmallest=k,K.prototype.push=function(Y){return o(this.nodes,Y,this.cmp)},K.prototype.pop=function(){return s(this.nodes,this.cmp)},K.prototype.peek=function(){return this.nodes[0]},K.prototype.contains=function(Y){return-1!==this.nodes.indexOf(Y)},K.prototype.replace=function(Y){return h(this.nodes,Y,this.cmp)},K.prototype.pushpop=function(Y){return u(this.nodes,Y,this.cmp)},K.prototype.heapify=function(){return n(this.nodes,this.cmp)},K.prototype.updateItem=function(Y){return _(this.nodes,Y,this.cmp)},K.prototype.clear=function(){return this.nodes=[]},K.prototype.empty=function(){return 0===this.nodes.length},K.prototype.size=function(){return this.nodes.length},K.prototype.clone=function(){var Y;return(Y=new K).nodes=this.nodes.slice(0),Y},K.prototype.toArray=function(){return this.nodes.slice(0)},K.prototype.insert=K.prototype.push,K.prototype.top=K.prototype.peek,K.prototype.front=K.prototype.peek,K.prototype.has=K.prototype.contains,K.prototype.copy=K.prototype.clone,K}(),e.exports=r}.call(wa)),fa.exports;var e}()),yi}()),ya=Fe({root:null,weight:function(t){return 1},directed:!1}),Ya={dijkstra:function(t){if(!Bt(t)){var r=arguments;t={root:r[0],weight:r[1],directed:r[2]}}var a=ya(t),i=a.root,s=a.directed,o=this,u=a.weight,h=je(i)?this.filter(i)[0]:i[0],f={},p={},x={},k=this.byGroup(),_=k.nodes,U=k.edges;U.unmergeBy(function(ur){return ur.isLoop()});for(var O=function(fr){return f[fr.id()]},K=function(fr,rr){f[fr.id()]=rr,Y.updateItem(fr)},Y=new Pr(function(ur,fr){return O(ur)-O(fr)}),j=0;j<_.length;j++){var yt=_[j];f[yt.id()]=yt.same(h)?0:1/0,Y.push(yt)}for(var ie=function(fr,rr){for(var qr,Cr=(s?fr.edgesTo(rr):fr.edgesWith(rr)).intersect(U),Ur=1/0,Dr=0;Dr<Cr.length;Dr++){var Wr=Cr[Dr],ga=u(Wr);(ga<Ur||!qr)&&(Ur=ga,qr=Wr)}return{edge:qr,dist:Ur}};Y.size()>0;){var se=Y.pop(),Ht=O(se),he=se.id();if(x[he]=Ht,Ht!==1/0)for(var me=se.neighborhood().intersect(_),Te=0;Te<me.length;Te++){var Be=me[Te],Me=Be.id(),Oe=ie(se,Be),tr=Ht+Oe.dist;tr<O(Be)&&(K(Be,tr),p[Me]={node:se,edge:Oe.edge})}}return{distanceTo:function(fr){var rr=je(fr)?_.filter(fr)[0]:fr[0];return x[rr.id()]},pathTo:function(fr){var rr=je(fr)?_.filter(fr)[0]:fr[0],Cr=[],Ur=rr,qr=Ur.id();if(rr.length>0)for(Cr.unshift(rr);p[qr];){var Dr=p[qr];Cr.unshift(Dr.edge),Cr.unshift(Dr.node),qr=(Ur=Dr.node).id()}return o.spawn(Cr)}}}},ni={kruskal:function(t){t=t||function(j){return 1};for(var r=this.byGroup(),a=r.nodes,i=r.edges,n=a.length,s=new Array(n),o=a,u=function(yt){for(var ie=0;ie<s.length;ie++)if(s[ie].has(yt))return ie},h=0;h<n;h++)s[h]=this.spawn(a[h]);for(var f=i.sort(function(j,yt){return t(j)-t(yt)}),p=0;p<f.length;p++){var x=f[p],k=x.source()[0],_=x.target()[0],U=u(k),O=u(_),K=s[U],Y=s[O];U!==O&&(o.merge(x),K.merge(Y),s.splice(O,1))}return o}},Mr=Fe({root:null,goal:null,weight:function(t){return 1},heuristic:function(t){return 0},directed:!1}),Pi={aStar:function(t){var r=this.cy(),a=Mr(t),i=a.root,n=a.goal,s=a.heuristic,o=a.directed,u=a.weight;i=r.collection(i)[0],n=r.collection(n)[0];var j,yt,h=i.id(),f=n.id(),p={},x={},k={},_=new Pr(function(qr,Dr){return x[qr.id()]-x[Dr.id()]}),U=new Xr,O={},K={},Y=function(Dr,Wr){_.push(Dr),U.add(Wr)},ie=function(){j=_.pop(),yt=j.id(),U.delete(yt)},se=function(Dr){return U.has(Dr)};Y(i,h),p[h]=0,x[h]=s(i);for(var Ht=0;_.size()>0;){if(ie(),Ht++,yt===f){for(var he=[],me=n,Te=f,Be=K[Te];he.unshift(me),null!=Be&&he.unshift(Be),null!=(me=O[Te]);)Be=K[Te=me.id()];return{found:!0,distance:p[yt],path:this.spawn(he),steps:Ht}}k[yt]=!0;for(var Me=j._private.edges,Oe=0;Oe<Me.length;Oe++){var tr=Me[Oe];if(this.hasElementWithId(tr.id())&&(!o||tr.data("source")===yt)){var ur=tr.source(),fr=tr.target(),rr=ur.id()!==yt?ur:fr,Cr=rr.id();if(this.hasElementWithId(Cr)&&!k[Cr]){var Ur=p[yt]+u(tr);if(!se(Cr)){p[Cr]=Ur,x[Cr]=Ur+s(rr),Y(rr,Cr),O[Cr]=j,K[Cr]=tr;continue}Ur<p[Cr]&&(p[Cr]=Ur,x[Cr]=Ur+s(rr),O[Cr]=j,K[Cr]=tr)}}}}return{found:!1,distance:void 0,path:void 0,steps:Ht}}},ua=Fe({weight:function(t){return 1},directed:!1}),ki={floydWarshall:function(t){for(var r=this.cy(),a=ua(t),n=a.directed,s=a.weight,o=this.byGroup(),u=o.nodes,h=o.edges,f=u.length,p=f*f,x=function(ga){return u.indexOf(ga)},k=function(ga){return u[ga]},_=new Array(p),U=0;U<p;U++){var O=U%f;_[U]=(U-O)/f===O?0:1/0}for(var Y=new Array(p),j=new Array(p),yt=0;yt<h.length;yt++){var ie=h[yt],se=ie.source()[0],Ht=ie.target()[0];if(se!==Ht){var he=x(se),me=x(Ht),Te=he*f+me,Be=s(ie);if(_[Te]>Be&&(_[Te]=Be,Y[Te]=me,j[Te]=ie),!n){var Me=me*f+he;!n&&_[Me]>Be&&(_[Me]=Be,Y[Me]=he,j[Me]=ie)}}}for(var Oe=0;Oe<f;Oe++)for(var tr=0;tr<f;tr++)for(var ur=tr*f+Oe,fr=0;fr<f;fr++){var rr=tr*f+fr,Cr=Oe*f+fr;_[ur]+_[Cr]<_[rr]&&(_[rr]=_[ur]+_[Cr],Y[rr]=Y[ur])}var qr=function(ga){return x(function(ga){return(je(ga)?r.filter(ga):ga)[0]}(ga))};return{distance:function(ga,Ea){var pa=qr(ga),Aa=qr(Ea);return _[pa*f+Aa]},path:function(ga,Ea){var pa=qr(ga),Aa=qr(Ea),Ra=k(pa);if(pa===Aa)return Ra.collection();if(null==Y[pa*f+Aa])return r.collection();var Za=r.collection();for(Za.merge(Ra);pa!==Aa;)Za.merge(j[pa*f+(pa=Y[pa*f+Aa])]),Za.merge(k(pa));return Za}}}},Bi=Fe({weight:function(t){return 1},directed:!1,root:null}),Wi={bellmanFord:function(t){var r=this,a=Bi(t),n=a.directed,s=a.root,o=a.weight,u=this,h=this.cy(),f=this.byGroup(),p=f.edges,x=f.nodes,k=x.length,_=new Lt,U=!1,O=[];s=h.collection(s)[0],p.unmergeBy(function(Ci){return Ci.isLoop()});for(var K=p.length,Y=function(xi){var gi=_.get(xi.id());return gi||(gi={},_.set(xi.id(),gi)),gi},j=function(xi){return(je(xi)?h.$(xi):xi)[0]},se=0;se<k;se++){var Ht=x[se],he=Y(Ht);he.dist=Ht.same(s)?0:1/0,he.pred=null,he.edge=null}for(var me=!1,Te=function(xi,gi,Qa,ci,di,_i){var fi=ci.dist+_i;fi<di.dist&&!Qa.same(ci.edge)&&(di.dist=fi,di.pred=xi,di.edge=Qa,me=!0)},Be=1;Be<k;Be++){me=!1;for(var Me=0;Me<K;Me++){var Oe=p[Me],tr=Oe.source(),ur=Oe.target(),fr=o(Oe),rr=Y(tr),Cr=Y(ur);Te(tr,0,Oe,rr,Cr,fr),n||Te(ur,0,Oe,Cr,rr,fr)}if(!me)break}if(me)for(var Ur=[],qr=0;qr<K;qr++){var Dr=p[qr],Wr=Dr.source(),ga=Dr.target(),Ea=o(Dr),pa=Y(Wr).dist,Aa=Y(ga).dist;if(pa+Ea<Aa||!n&&Aa+Ea<pa){if(U||(_a("Graph contains a negative weight cycle for Bellman-Ford"),U=!0),!1===t.findNegativeWeightCycles)break;var Ra=[];pa+Ea<Aa&&Ra.push(Wr),!n&&Aa+Ea<pa&&Ra.push(ga);for(var Za=Ra.length,Ta=0;Ta<Za;Ta++){var Kr=Ra[Ta],$r=[Kr];$r.push(Y(Kr).edge);for(var Zr=Y(Kr).pred;-1===$r.indexOf(Zr);)$r.push(Zr),$r.push(Y(Zr).edge),Zr=Y(Zr).pred;for(var ma=($r=$r.slice($r.indexOf(Zr)))[0].id(),Ga=0,li=2;li<$r.length;li+=2)$r[li].id()<ma&&(ma=$r[li].id(),Ga=li);($r=$r.slice(Ga).concat($r.slice(0,Ga))).push($r[0]);var Ii=$r.map(function(Ci){return Ci.id()}).join(",");-1===Ur.indexOf(Ii)&&(O.push(u.spawn($r)),Ur.push(Ii))}}}return{distanceTo:function(xi){return Y(j(xi)).dist},pathTo:function(xi){for(var gi=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s,ci=[],di=j(xi);;){if(null==di)return r.spawn();var _i=Y(di),fi=_i.edge,wi=_i.pred;if(ci.unshift(di[0]),di.same(gi)&&ci.length>0)break;null!=fi&&ci.unshift(fi),di=wi}return u.spawn(ci)},hasNegativeWeightCycle:U,negativeWeightCycles:O}}},ln=Math.sqrt(2),Ji=function(t,r,a){0===a.length&&Ka("Karger-Stein must be run on a connected (sub)graph");for(var i=a[t],o=r[i[1]],u=r[i[2]],h=a,f=h.length-1;f>=0;f--){var p=h[f],x=p[1],k=p[2];(r[x]===o&&r[k]===u||r[x]===u&&r[k]===o)&&h.splice(f,1)}for(var _=0;_<h.length;_++){var U=h[_];U[1]===u?(h[_]=U.slice(),h[_][1]=o):U[2]===u&&(h[_]=U.slice(),h[_][2]=o)}for(var O=0;O<r.length;O++)r[O]===u&&(r[O]=o);return h},Oi=function(t,r,a,i){for(;a>i;){var n=Math.floor(Math.random()*r.length);r=Ji(n,t,r),a--}return r},zi={kargerStein:function(){var t=this,r=this.byGroup(),a=r.nodes,i=r.edges;i.unmergeBy(function(Cr){return Cr.isLoop()});var n=a.length,s=i.length,o=Math.ceil(Math.pow(Math.log(n)/Math.LN2,2)),u=Math.floor(n/ln);if(!(n<2)){for(var h=[],f=0;f<s;f++){var p=i[f];h.push([f,a.indexOf(p.source()),a.indexOf(p.target())])}for(var x=1/0,k=[],_=new Array(n),U=new Array(n),O=new Array(n),K=function(Ur,qr){for(var Dr=0;Dr<n;Dr++)qr[Dr]=Ur[Dr]},Y=0;Y<=o;Y++){for(var j=0;j<n;j++)U[j]=j;var yt=Oi(U,h.slice(),n,u),ie=yt.slice();K(U,O);var se=Oi(U,yt,u,2),Ht=Oi(O,ie,u,2);se.length<=Ht.length&&se.length<x?(x=se.length,k=se,K(U,_)):Ht.length<=se.length&&Ht.length<x&&(x=Ht.length,k=Ht,K(O,_))}for(var he=this.spawn(k.map(function(Cr){return i[Cr[0]]})),me=this.spawn(),Te=this.spawn(),Be=_[0],Me=0;Me<_.length;Me++){var tr=a[Me];_[Me]===Be?me.merge(tr):Te.merge(tr)}var ur=function(Ur){var qr=t.spawn();return Ur.forEach(function(Dr){qr.merge(Dr),Dr.connectedEdges().forEach(function(Wr){t.contains(Wr)&&!he.contains(Wr)&&qr.merge(Wr)})}),qr},fr=[ur(me),ur(Te)];return{cut:he,components:fr,partition1:me,partition2:Te}}Ka("At least 2 nodes are required for Karger-Stein algorithm")}},Bn=function(t,r,a){return{x:t.x*r+a.x,y:t.y*r+a.y}},Vn=function(t,r,a){return{x:(t.x-a.x)/r,y:(t.y-a.y)/r}},hn=function(t){return{x:t[0],y:t[1]}},kn=function(t,r){return Math.atan2(r,t)-Math.PI/2},Rn=Math.log2||function(e){return Math.log(e)/Math.log(2)},un=function(t){return t>0?1:t<0?-1:0},Xi=function(t,r){return Math.sqrt(rn(t,r))},rn=function(t,r){var a=r.x-t.x,i=r.y-t.y;return a*a+i*i},Yn=function(t){for(var r=t.length,a=0,i=0;i<r;i++)a+=t[i];for(var n=0;n<r;n++)t[n]=t[n]/a;return t},Gt=function(t,r,a,i){return(1-i)*(1-i)*t+2*(1-i)*i*r+i*i*a},d=function(t,r,a,i){return{x:Gt(t.x,r.x,a.x,i),y:Gt(t.y,r.y,a.y,i)}},Xt=function(t,r,a){return Math.max(t,Math.min(a,r))},kt=function(t){if(null==t)return{x1:1/0,y1:1/0,x2:-1/0,y2:-1/0,w:0,h:0};if(null!=t.x1&&null!=t.y1){if(null!=t.x2&&null!=t.y2&&t.x2>=t.x1&&t.y2>=t.y1)return{x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2,w:t.x2-t.x1,h:t.y2-t.y1};if(null!=t.w&&null!=t.h&&t.w>=0&&t.h>=0)return{x1:t.x1,y1:t.y1,x2:t.x1+t.w,y2:t.y1+t.h,w:t.w,h:t.h}}},nt=function(t,r){t.x1=Math.min(t.x1,r.x1),t.x2=Math.max(t.x2,r.x2),t.w=t.x2-t.x1,t.y1=Math.min(t.y1,r.y1),t.y2=Math.max(t.y2,r.y2),t.h=t.y2-t.y1},Dt=function(t,r,a){t.x1=Math.min(t.x1,r),t.x2=Math.max(t.x2,r),t.w=t.x2-t.x1,t.y1=Math.min(t.y1,a),t.y2=Math.max(t.y2,a),t.h=t.y2-t.y1},J=function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t.x1-=r,t.x2+=r,t.y1-=r,t.y2+=r,t.w=t.x2-t.x1,t.h=t.y2-t.y1,t},Z=function(t){var a,i,n,s,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0];if(1===r.length)a=i=n=s=r[0];else if(2===r.length)a=n=r[0],s=i=r[1];else if(4===r.length){var o=Rt(r,4);a=o[0],i=o[1],n=o[2],s=o[3]}return t.x1-=s,t.x2+=i,t.y1-=a,t.y2+=n,t.w=t.x2-t.x1,t.h=t.y2-t.y1,t},Ot=function(t,r){t.x1=r.x1,t.y1=r.y1,t.x2=r.x2,t.y2=r.y2,t.w=t.x2-t.x1,t.h=t.y2-t.y1},fe=function(t,r){return!(t.x1>r.x2||r.x1>t.x2||t.x2<r.x1||r.x2<t.x1||t.y2<r.y1||r.y2<t.y1||t.y1>r.y2||r.y1>t.y2)},Le=function(t,r,a){return t.x1<=r&&r<=t.x2&&t.y1<=a&&a<=t.y2},tt=function(t,r){return Le(t,r.x,r.y)},l=function(t,r){return Le(t,r.x1,r.y1)&&Le(t,r.x2,r.y2)},T=null!==(cn=Math.hypot)&&void 0!==cn?cn:function(e,t){return Math.sqrt(e*e+t*t)};var bt=function(t,r,a,i,n,s,o){var _,ur,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"auto",h="auto"===u?Ui(n,s):u,f=n/2,p=s/2,x=(h=Math.min(h,f,p))!==f,k=h!==p;if(x){var O=i-p-o;if((_=ji(t,r,a,i,a-f+h-o,O,a+f-h+o,O,!1)).length>0)return _}if(k){var j=a+f+o;if((_=ji(t,r,a,i,j,i-p+h-o,j,i+p-h+o,!1)).length>0)return _}if(x){var he=i+p+o;if((_=ji(t,r,a,i,a-f+h-o,he,a+f-h+o,he,!1)).length>0)return _}if(k){var Be=a-f-o;if((_=ji(t,r,a,i,Be,i-p+h-o,Be,i+p-h+o,!1)).length>0)return _}var fr=a-f+h,rr=i-p+h;if((ur=Na(t,r,a,i,fr,rr,h+o)).length>0&&ur[0]<=fr&&ur[1]<=rr)return[ur[0],ur[1]];var Cr=a+f-h,Ur=i-p+h;if((ur=Na(t,r,a,i,Cr,Ur,h+o)).length>0&&ur[0]>=Cr&&ur[1]<=Ur)return[ur[0],ur[1]];var qr=a+f-h,Dr=i+p-h;if((ur=Na(t,r,a,i,qr,Dr,h+o)).length>0&&ur[0]>=qr&&ur[1]>=Dr)return[ur[0],ur[1]];var Wr=a-f+h,ga=i+p-h;return(ur=Na(t,r,a,i,Wr,ga,h+o)).length>0&&ur[0]<=Wr&&ur[1]>=ga?[ur[0],ur[1]]:[]},Ie=function(t,r,a,i,n,s,o){var u=o,h=Math.min(a,n),f=Math.max(a,n),p=Math.min(i,s),x=Math.max(i,s);return h-u<=t&&t<=f+u&&p-u<=r&&r<=x+u},Qt=function(t,r,a,i,n,s,o,u,h){var f_x1=Math.min(a,o,n)-h,f_x2=Math.max(a,o,n)+h,f_y1=Math.min(i,u,s)-h,f_y2=Math.max(i,u,s)+h;return!(t<f_x1||t>f_x2||r<f_y1||r>f_y2)},Sr=function(t,r,a,i,n,s,o,u){var k=[];!function(t,r,a,i,n){var o,u,h,f,p,x,k,_;0===t&&(t=1e-5),h=-27*(i/=t)+(r/=t)*(9*(a/=t)-r*r*2),o=(u=(3*a-r*r)/9)*u*u+(h/=54)*h,n[1]=0,k=r/3,o>0?(p=(p=h+Math.sqrt(o))<0?-Math.pow(-p,1/3):Math.pow(p,1/3),x=(x=h-Math.sqrt(o))<0?-Math.pow(-x,1/3):Math.pow(x,1/3),n[0]=-k+p+x,n[4]=n[2]=-(k+=(p+x)/2),k=Math.sqrt(3)*(-x+p)/2,n[3]=k,n[5]=-k):(n[5]=n[3]=0,0===o?(_=h<0?-Math.pow(-h,1/3):Math.pow(h,1/3),n[0]=2*_-k,n[4]=n[2]=-(_+k)):(f=(u=-u)*u*u,f=Math.acos(h/Math.sqrt(f)),_=2*Math.sqrt(u),n[0]=-k+_*Math.cos(f/3),n[2]=-k+_*Math.cos((f+2*Math.PI)/3),n[4]=-k+_*Math.cos((f+4*Math.PI)/3)))}(1*a*a-4*a*n+2*a*o+4*n*n-4*n*o+o*o+i*i-4*i*s+2*i*u+4*s*s-4*s*u+u*u,9*a*n-3*a*a-3*a*o-6*n*n+3*n*o+9*i*s-3*i*i-3*i*u-6*s*s+3*s*u,3*a*a-6*a*n+a*o-a*t+2*n*n+2*n*t-o*t+3*i*i-6*i*s+i*u-i*r+2*s*s+2*s*r-u*r,1*a*n-a*a+a*t-n*t+i*s-i*i+i*r-s*r,k);for(var U=[],O=0;O<6;O+=2)Math.abs(k[O+1])<1e-7&&k[O]>=0&&k[O]<=1&&U.push(k[O]);U.push(1),U.push(0);for(var Y,j,yt,K=-1,ie=0;ie<U.length;ie++)Y=Math.pow(1-U[ie],2)*a+2*(1-U[ie])*U[ie]*n+U[ie]*U[ie]*o,j=Math.pow(1-U[ie],2)*i+2*(1-U[ie])*U[ie]*s+U[ie]*U[ie]*u,yt=Math.pow(Y-t,2)+Math.pow(j-r,2),K>=0?yt<K&&(K=yt):K=yt;return K},ta=function(t,r,a,i,n,s){var o=[t-a,r-i],u=[n-a,s-i],h=u[0]*u[0]+u[1]*u[1],f=o[0]*o[0]+o[1]*o[1],p=o[0]*u[0]+o[1]*u[1],x=p*p/h;return p<0?f:x>h?(t-n)*(t-n)+(r-s)*(r-s):f-x},Ir=function(t,r,a){for(var i,n,s,o,h=0,f=0;f<a.length/2;f++)if(n=a[2*f+1],f+1<a.length/2?(s=a[2*(f+1)],o=a[2*(f+1)+1]):(s=a[2*(f+1-a.length/2)],o=a[2*(f+1-a.length/2)+1]),(i=a[2*f])!=t||s!=t){if(!(i>=t&&t>=s||i<=t&&t<=s))continue;(t-i)/(s-i)*(o-n)+n>r&&h++}return h%2!=0},la=function(t,r,a,i,n,s,o,u,h){var p,U,f=new Array(a.length);null!=u[0]?(p=Math.atan(u[1]/u[0]),u[0]<0?p+=Math.PI/2:p=-p-Math.PI/2):p=u;for(var x=Math.cos(-p),k=Math.sin(-p),_=0;_<f.length/2;_++)f[2*_]=s/2*(a[2*_]*x-a[2*_+1]*k),f[2*_+1]=o/2*(a[2*_+1]*x+a[2*_]*k),f[2*_]+=i,f[2*_+1]+=n;if(h>0){var O=Ba(f,-h);U=ka(O)}else U=f;return Ir(t,r,U)},ka=function(t){for(var o,u,h,f,r=new Array(t.length/2),p=0;p<t.length/4;p++){p<t.length/4-1?(o=t[4*(p+1)],u=t[4*(p+1)+1],h=t[4*(p+1)+2],f=t[4*(p+1)+3]):(o=t[0],u=t[1],h=t[2],f=t[3]);var x=ji(t[4*p],t[4*p+1],t[4*p+2],t[4*p+3],o,u,h,f,!0);r[2*p]=x[0],r[2*p+1]=x[1]}return r},Ba=function(t,r){for(var i,n,s,o,a=new Array(2*t.length),u=0;u<t.length/2;u++){u<t.length/2-1?(s=t[2*(u+1)],o=t[2*(u+1)+1]):(s=t[0],o=t[1]);var h=o-(n=t[2*u+1]),f=-(s-(i=t[2*u])),p=Math.sqrt(h*h+f*f),x=h/p,k=f/p;a[4*u]=i+x*r,a[4*u+1]=n+k*r,a[4*u+2]=s+x*r,a[4*u+3]=o+k*r}return a},za=function(t,r,a,i,n,s,o){return t-=n,r-=s,(t/=a/2+o)*t+(r/=i/2+o)*r<=1},Na=function(t,r,a,i,n,s,o){var u=[a-t,i-r],h=[t-n,r-s],f=u[0]*u[0]+u[1]*u[1],p=2*(h[0]*u[0]+h[1]*u[1]),k=p*p-4*f*(h[0]*h[0]+h[1]*h[1]-o*o);if(k<0)return[];var _=(-p+Math.sqrt(k))/(2*f),U=(-p-Math.sqrt(k))/(2*f),O=Math.min(_,U),K=Math.max(_,U),Y=[];if(O>=0&&O<=1&&Y.push(O),K>=0&&K<=1&&Y.push(K),0===Y.length)return[];var j=Y[0]*u[0]+t,yt=Y[0]*u[1]+r;return Y.length>1?Y[0]==Y[1]?[j,yt]:[j,yt,Y[1]*u[0]+t,Y[1]*u[1]+r]:[j,yt]},ui=function(t,r,a){return r<=t&&t<=a||a<=t&&t<=r?t:t<=r&&r<=a||a<=r&&r<=t?r:a},ji=function(t,r,a,i,n,s,o,u,h){var f=t-n,p=a-t,x=o-n,k=r-s,_=i-r,U=u-s,O=x*k-U*f,K=p*k-_*f,Y=U*p-x*_;if(0!==Y){var j=O/Y,yt=K/Y;return-.001<=j&&j<=1.001&&-.001<=yt&&yt<=1.001||h?[t+j*p,r+j*_]:[]}return 0===O||0===K?ui(t,a,o)===o?[o,u]:ui(t,a,n)===n?[n,s]:ui(n,o,a)===a?[a,i]:[]:[]},$n=function(t,r,a,i,n){var s=[],o=i/2,u=n/2,h=r,f=a;s.push({x:h+o*t[0],y:f+u*t[1]});for(var p=1;p<t.length/2;p++)s.push({x:h+o*t[2*p],y:f+u*t[2*p+1]});return s},Tn=function(t,r,a,i,n,s,o,u){var f,k,h=[],p=new Array(a.length),x=!0;if(null==s&&(x=!1),x){for(var _=0;_<p.length/2;_++)p[2*_]=a[2*_]*s+i,p[2*_+1]=a[2*_+1]*o+n;if(u>0){var U=Ba(p,-u);k=ka(U)}else k=p}else k=a;for(var Y,j,yt=0;yt<k.length/2;yt++)yt<k.length/2-1?(Y=k[2*(yt+1)],j=k[2*(yt+1)+1]):(Y=k[0],j=k[1]),0!==(f=ji(t,r,i,n,k[2*yt],k[2*yt+1],Y,j)).length&&h.push(f[0],f[1]);return h},an=function(t,r,a){var i=[t[0]-r[0],t[1]-r[1]],n=Math.sqrt(i[0]*i[0]+i[1]*i[1]),s=(n-a)/n;return s<0&&(s=1e-5),[r[0]+s*i[0],r[1]+s*i[1]]},Ni=function(t,r){var a=pn(t,r);return bn(a)},bn=function(t){for(var r,a,i=t.length/2,n=1/0,s=1/0,o=-1/0,u=-1/0,h=0;h<i;h++)r=t[2*h],a=t[2*h+1],n=Math.min(n,r),o=Math.max(o,r),s=Math.min(s,a),u=Math.max(u,a);for(var f=2/(o-n),p=2/(u-s),x=0;x<i;x++)r=t[2*x]=t[2*x]*f,a=t[2*x+1]=t[2*x+1]*p,n=Math.min(n,r),o=Math.max(o,r),s=Math.min(s,a),u=Math.max(u,a);if(s<-1)for(var k=0;k<i;k++)a=t[2*k+1]=t[2*k+1]+(-1-s);return t},pn=function(t,r){var a=1/t*2*Math.PI,i=t%2==0?Math.PI/2+a/2:Math.PI/2;i+=r;for(var s,n=new Array(2*t),o=0;o<t;o++)s=o*a+i,n[2*o]=Math.cos(s),n[2*o+1]=Math.sin(-s);return n},Ui=function(t,r){return Math.min(t/4,r/4,8)},os=function(t,r){return Math.min(t/10,r/10,8)},yl=function(t,r){return{heightOffset:Math.min(15,.05*r),widthOffset:Math.min(100,.25*t),ctrlPtOffsetPct:.05}};function ml(e,t){function r(p){for(var x=[],k=0;k<p.length;k++){var _=p[k],U=p[(k+1)%p.length],O={x:U.x-_.x,y:U.y-_.y},K={x:-O.y,y:O.x},Y=Math.sqrt(K.x*K.x+K.y*K.y);x.push({x:K.x/Y,y:K.y/Y})}return x}function a(p,x){var O,k=1/0,_=-1/0,U=$(p);try{for(U.s();!(O=U.n()).done;){var K=O.value,Y=K.x*x.x+K.y*x.y;k=Math.min(k,Y),_=Math.max(_,Y)}}catch(j){U.e(j)}finally{U.f()}return{min:k,max:_}}function i(p,x){return!(p.max<x.min||x.max<p.min)}var o,s=$([].concat(q(r(e)),q(r(t))));try{for(s.s();!(o=s.n()).done;){var u=o.value;if(!i(a(e,u),a(t,u)))return!1}}catch(p){s.e(p)}finally{s.f()}return!0}var N0=Fe({dampingFactor:.8,precision:1e-6,iterations:200,weight:function(t){return 1}}),K0={pageRank:function(t){for(var r=N0(t),a=r.dampingFactor,i=r.precision,n=r.iterations,s=r.weight,o=this._private.cy,u=this.byGroup(),h=u.nodes,f=u.edges,p=h.length,k=f.length,_=new Array(p*p),U=new Array(p),O=(1-a)/p,K=0;K<p;K++){for(var Y=0;Y<p;Y++)_[K*p+Y]=0;U[K]=0}for(var yt=0;yt<k;yt++){var ie=f[yt],se=ie.data("source"),Ht=ie.data("target");if(se!==Ht){var he=h.indexOfId(se),me=h.indexOfId(Ht),Te=s(ie);_[me*p+he]+=Te,U[he]+=Te}}for(var Me=1/p+O,Oe=0;Oe<p;Oe++)if(0===U[Oe])for(var tr=0;tr<p;tr++)_[tr*p+Oe]=Me;else for(var fr=0;fr<p;fr++){var rr=fr*p+Oe;_[rr]=_[rr]/U[Oe]+O}for(var qr,Cr=new Array(p),Ur=new Array(p),Dr=0;Dr<p;Dr++)Cr[Dr]=1;for(var Wr=0;Wr<n;Wr++){for(var ga=0;ga<p;ga++)Ur[ga]=0;for(var Ea=0;Ea<p;Ea++)for(var pa=0;pa<p;pa++)Ur[Ea]+=_[Ea*p+pa]*Cr[pa];Yn(Ur),qr=Cr,Cr=Ur,Ur=qr;for(var Ra=0,Za=0;Za<p;Za++){var Ta=qr[Za]-Cr[Za];Ra+=Ta*Ta}if(Ra<i)break}return{rank:function(Zr){return Zr=o.collection(Zr)[0],Cr[h.indexOf(Zr)]}}}},ch=Fe({root:null,weight:function(t){return 1},directed:!1,alpha:0}),Ms={degreeCentralityNormalized:function(t){t=ch(t);var r=this.cy(),a=this.nodes(),i=a.length;if(t.directed){for(var f={},p={},x=0,k=0,_=0;_<i;_++){var U=a[_],O=U.id();t.root=U;var K=this.degreeCentrality(t);x<K.indegree&&(x=K.indegree),k<K.outdegree&&(k=K.outdegree),f[O]=K.indegree,p[O]=K.outdegree}return{indegree:function(j){return 0==x?0:(je(j)&&(j=r.filter(j)),f[j.id()]/x)},outdegree:function(j){return 0===k?0:(je(j)&&(j=r.filter(j)),p[j.id()]/k)}}}for(var n={},s=0,o=0;o<i;o++){var u=a[o];t.root=u;var h=this.degreeCentrality(t);s<h.degree&&(s=h.degree),n[u.id()]=h.degree}return{degree:function(j){return 0===s?0:(je(j)&&(j=r.filter(j)),n[j.id()]/s)}}},degreeCentrality:function(t){t=ch(t);var r=this.cy(),a=this,n=t.root,s=t.weight,o=t.directed,u=t.alpha;if(n=r.collection(n)[0],o){for(var k=n.connectedEdges(),_=k.filter(function(se){return se.target().same(n)&&a.has(se)}),U=k.filter(function(se){return se.source().same(n)&&a.has(se)}),O=_.length,K=U.length,Y=0,j=0,yt=0;yt<_.length;yt++)Y+=s(_[yt]);for(var ie=0;ie<U.length;ie++)j+=s(U[ie]);return{indegree:Math.pow(O,1-u)*Math.pow(Y,u),outdegree:Math.pow(K,1-u)*Math.pow(j,u)}}for(var h=n.connectedEdges().intersection(a),f=h.length,p=0,x=0;x<h.length;x++)p+=s(h[x]);return{degree:Math.pow(f,1-u)*Math.pow(p,u)}}};Ms.dc=Ms.degreeCentrality,Ms.dcn=Ms.degreeCentralityNormalised=Ms.degreeCentralityNormalized;var hh=Fe({harmonic:!0,weight:function(){return 1},directed:!1,root:null}),Os={closenessCentralityNormalized:function(t){for(var r=hh(t),a=r.harmonic,i=r.weight,n=r.directed,s=this.cy(),o={},u=0,h=this.nodes(),f=this.floydWarshall({weight:i,directed:n}),p=0;p<h.length;p++){for(var x=0,k=h[p],_=0;_<h.length;_++)if(p!==_){var U=f.distance(k,h[_]);x+=a?1/U:U}a||(x=1/x),u<x&&(u=x),o[k.id()]=x}return{closeness:function(K){return 0==u?0:(K=je(K)?s.filter(K)[0].id():K.id(),o[K]/u)}}},closenessCentrality:function(t){var r=hh(t),a=r.root,i=r.weight,n=r.directed,s=r.harmonic;a=this.filter(a)[0];for(var o=this.dijkstra({root:a,weight:i,directed:n}),u=0,h=this.nodes(),f=0;f<h.length;f++){var p=h[f];if(!p.same(a)){var x=o.distanceTo(p);u+=s?1/x:x}}return s?u:1/u}};Os.cc=Os.closenessCentrality,Os.ccn=Os.closenessCentralityNormalised=Os.closenessCentralityNormalized;var W0=Fe({weight:null,directed:!1}),xl={betweennessCentrality:function(t){for(var r=W0(t),a=r.directed,i=r.weight,n=null!=i,s=this.cy(),o=this.nodes(),u={},h={},f=0,p={set:function(j,yt){h[j]=yt,yt>f&&(f=yt)},get:function(j){return h[j]}},x=0;x<o.length;x++){var k=o[x],_=k.id();u[_]=a?k.outgoers().nodes():k.openNeighborhood().nodes(),p.set(_,0)}for(var U=function(){for(var j=o[O].id(),yt=[],ie={},se={},Ht={},he=new Pr(function(Ea,pa){return Ht[Ea]-Ht[pa]}),me=0;me<o.length;me++){var Te=o[me].id();ie[Te]=[],se[Te]=0,Ht[Te]=1/0}for(se[j]=1,Ht[j]=0,he.push(j);!he.empty();){var Be=he.pop();if(yt.push(Be),n)for(var Me=0;Me<u[Be].length;Me++){var ur,Oe=u[Be][Me],tr=s.getElementById(Be);ur=tr.edgesTo(Oe).length>0?tr.edgesTo(Oe)[0]:Oe.edgesTo(tr)[0];var fr=i(ur);Oe=Oe.id(),Ht[Oe]>Ht[Be]+fr&&(Ht[Oe]=Ht[Be]+fr,he.nodes.indexOf(Oe)<0?he.push(Oe):he.updateItem(Oe),se[Oe]=0,ie[Oe]=[]),Ht[Oe]==Ht[Be]+fr&&(se[Oe]=se[Oe]+se[Be],ie[Oe].push(Be))}else for(var rr=0;rr<u[Be].length;rr++){var Cr=u[Be][rr].id();Ht[Cr]==1/0&&(he.push(Cr),Ht[Cr]=Ht[Be]+1),Ht[Cr]==Ht[Be]+1&&(se[Cr]=se[Cr]+se[Be],ie[Cr].push(Be))}}for(var Ur={},qr=0;qr<o.length;qr++)Ur[o[qr].id()]=0;for(;yt.length>0;){for(var Dr=yt.pop(),Wr=0;Wr<ie[Dr].length;Wr++){var ga=ie[Dr][Wr];Ur[ga]=Ur[ga]+se[ga]/se[Dr]*(1+Ur[Dr])}Dr!=o[O].id()&&p.set(Dr,p.get(Dr)+Ur[Dr])}},O=0;O<o.length;O++)U();var K={betweenness:function(j){var yt=s.collection(j).id();return p.get(yt)},betweennessNormalized:function(j){if(0==f)return 0;var yt=s.collection(j).id();return p.get(yt)/f}};return K.betweennessNormalised=K.betweennessNormalized,K}};xl.bc=xl.betweennessCentrality;var z0=Fe({expandFactor:2,inflateFactor:2,multFactor:1,maxIterations:20,attributes:[function(e){return 1}]}),U0=function(t,r){for(var a=0,i=0;i<r.length;i++)a+=r[i](t);return a},uh=function(t,r){for(var a,i=0;i<r;i++){a=0;for(var n=0;n<r;n++)a+=t[n*r+i];for(var s=0;s<r;s++)t[s*r+i]=t[s*r+i]/a}},Y0=function(t,r,a){for(var i=new Array(a*a),n=0;n<a;n++){for(var s=0;s<a;s++)i[n*a+s]=0;for(var o=0;o<a;o++)for(var u=0;u<a;u++)i[n*a+u]+=t[n*a+o]*r[o*a+u]}return i},H0=function(t,r,a){for(var i=t.slice(0),n=1;n<a;n++)t=Y0(t,i,r);return t},G0=function(t,r,a){for(var i=new Array(r*r),n=0;n<r*r;n++)i[n]=Math.pow(t[n],a);return uh(i,r),i},q0=function(t,r,a,i){for(var n=0;n<a;n++)if(Math.round(t[n]*Math.pow(10,i))/Math.pow(10,i)!==Math.round(r[n]*Math.pow(10,i))/Math.pow(10,i))return!1;return!0},X0=function(t,r){for(var a=0;a<t.length;a++)if(!r[a]||t[a].id()!==r[a].id())return!1;return!0},dh=function(t){for(var r=this.nodes(),a=this.edges(),i=this.cy(),n=function(t){return z0(t)}(t),s={},o=0;o<r.length;o++)s[r[o].id()]=o;for(var p,u=r.length,h=u*u,f=new Array(h),x=0;x<h;x++)f[x]=0;for(var k=0;k<a.length;k++){var _=a[k],U=s[_.source().id()],O=s[_.target().id()],K=U0(_,n.attributes);f[U*u+O]+=K,f[O*u+U]+=K}(function(t,r,a){for(var i=0;i<r;i++)t[i*r+i]=a})(f,u,n.multFactor),uh(f,u);for(var Y=!0,j=0;Y&&j<n.maxIterations;)Y=!1,p=H0(f,u,n.expandFactor),f=G0(p,u,n.inflateFactor),q0(f,p,h,4)||(Y=!0),j++;var yt=function(t,r,a,i){for(var n=[],s=0;s<r;s++){for(var o=[],u=0;u<r;u++)Math.round(1e3*t[s*r+u])/1e3>0&&o.push(a[u]);0!==o.length&&n.push(i.collection(o))}return n}(f,u,r,i);return yt=function(t){for(var r=0;r<t.length;r++)for(var a=0;a<t.length;a++)r!=a&&X0(t[r],t[a])&&t.splice(a,1);return t}(yt),yt},Q0={markovClustering:dh,mcl:dh},J0=function(t){return t},fh=function(t,r){return Math.abs(r-t)},gh=function(t,r,a){return t+fh(r,a)},ph=function(t,r,a){return t+Math.pow(a-r,2)},tf=function(t){return Math.sqrt(t)},ef=function(t,r,a){return Math.max(t,fh(r,a))},ao=function(t,r,a,i,n){for(var s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:J0,o=i,f=0;f<t;f++)o=n(o,r(f),a(f));return s(o)},Fs={euclidean:function(t,r,a){return t>=2?ao(t,r,a,0,ph,tf):ao(t,r,a,0,gh)},squaredEuclidean:function(t,r,a){return ao(t,r,a,0,ph)},manhattan:function(t,r,a){return ao(t,r,a,0,gh)},max:function(t,r,a){return ao(t,r,a,-1/0,ef)}};function Lo(e,t,r,a,i,n){var s;return s=z(e)?e:Fs[e]||Fs.euclidean,0===t&&z(e)?s(i,n):s(t,r,a,i,n)}Fs["squared-euclidean"]=Fs.squaredEuclidean,Fs.squaredeuclidean=Fs.squaredEuclidean;var rf=Fe({k:2,m:2,sensitivityThreshold:1e-4,distance:"euclidean",maxIterations:10,attributes:[],testMode:!1,testCentroids:null}),bl=function(t){return rf(t)},Bo=function(t,r,a,i,n){var o="kMedoids"!==n?function(p){return a[p]}:function(p){return i[p](a)};return Lo(t,i.length,o,function(x){return i[x](r)},a,r)},_l=function(t,r,a){for(var i=a.length,n=new Array(i),s=new Array(i),o=new Array(r),u=null,h=0;h<i;h++)n[h]=t.min(a[h]).value,s[h]=t.max(a[h]).value;for(var f=0;f<r;f++){u=[];for(var p=0;p<i;p++)u[p]=Math.random()*(s[p]-n[p])+n[p];o[f]=u}return o},vh=function(t,r,a,i,n){for(var s=1/0,o=0,u=0;u<r.length;u++){var h=Bo(a,t,r[u],i,n);h<s&&(s=h,o=u)}return o},yh=function(t,r,a){for(var i=[],n=null,s=0;s<r.length;s++)a[(n=r[s]).id()]===t&&i.push(n);return i},af=function(t,r,a){return Math.abs(r-t)<=a},nf=function(t,r,a){for(var i=0;i<t.length;i++)for(var n=0;n<t[i].length;n++)if(Math.abs(t[i][n]-r[i][n])>a)return!1;return!0},sf=function(t,r,a){for(var i=0;i<a;i++)if(t===r[i])return!0;return!1},mh=function(t,r){var a=new Array(r);if(t.length<50)for(var i=0;i<r;i++){for(var n=t[Math.floor(Math.random()*t.length)];sf(n,a,i);)n=t[Math.floor(Math.random()*t.length)];a[i]=n}else for(var s=0;s<r;s++)a[s]=t[Math.floor(Math.random()*t.length)];return a},xh=function(t,r,a){for(var i=0,n=0;n<r.length;n++)i+=Bo("manhattan",r[n],t,a,"kMedoids");return i},cf=function(t,r,a,i,n){for(var s,o,u=0;u<r.length;u++)for(var h=0;h<t.length;h++)i[u][h]=Math.pow(a[u][h],n.m);for(var f=0;f<t.length;f++)for(var p=0;p<n.attributes.length;p++){s=0,o=0;for(var x=0;x<r.length;x++)s+=i[x][f]*n.attributes[p](r[x]),o+=i[x][f];t[f][p]=s/o}},hf=function(t,r,a,i,n){for(var s=0;s<t.length;s++)r[s]=t[s].slice();for(var o,u,h,f=2/(n.m-1),p=0;p<a.length;p++)for(var x=0;x<i.length;x++){o=0;for(var k=0;k<a.length;k++)u=Bo(n.distance,i[x],a[p],n.attributes,"cmeans"),h=Bo(n.distance,i[x],a[k],n.attributes,"cmeans"),o+=Math.pow(u/h,f);t[x][p]=1/o}},bh=function(t){var n,s,o,u,h,r=this.cy(),a=this.nodes(),i=bl(t);u=new Array(a.length);for(var f=0;f<a.length;f++)u[f]=new Array(i.k);o=new Array(a.length);for(var p=0;p<a.length;p++)o[p]=new Array(i.k);for(var x=0;x<a.length;x++){for(var k=0,_=0;_<i.k;_++)o[x][_]=Math.random(),k+=o[x][_];for(var U=0;U<i.k;U++)o[x][U]=o[x][U]/k}s=new Array(i.k);for(var O=0;O<i.k;O++)s[O]=new Array(i.attributes.length);h=new Array(a.length);for(var K=0;K<a.length;K++)h[K]=new Array(i.k);for(var Y=!0,j=0;Y&&j<i.maxIterations;)Y=!1,cf(s,a,o,h,i),hf(o,u,s,a,i),nf(o,u,i.sensitivityThreshold)||(Y=!0),j++;return n=function(t,r,a,i){for(var n=new Array(a.k),s=0;s<n.length;s++)n[s]=[];for(var o,u,h=0;h<r.length;h++){o=-1/0,u=-1;for(var f=0;f<r[0].length;f++)r[h][f]>o&&(o=r[h][f],u=f);n[u].push(t[h])}for(var p=0;p<n.length;p++)n[p]=i.collection(n[p]);return n}(a,o,i,r),{clusters:n,degreeOfMembership:o}},df={kMeans:function(t){var u,r=this.cy(),a=this.nodes(),i=null,n=bl(t),s=new Array(n.k),o={};u=n.testMode?"number"==typeof n.testCentroids?_l(a,n.k,n.attributes):"object"===cr(n.testCentroids)?n.testCentroids:_l(a,n.k,n.attributes):_l(a,n.k,n.attributes);for(var h=!0,f=0;h&&f<n.maxIterations;){for(var p=0;p<a.length;p++)o[(i=a[p]).id()]=vh(i,u,n.distance,n.attributes,"kMeans");h=!1;for(var x=0;x<n.k;x++){var k=yh(x,a,o);if(0!==k.length){for(var _=n.attributes.length,U=u[x],O=new Array(_),K=new Array(_),Y=0;Y<_;Y++){K[Y]=0;for(var j=0;j<k.length;j++)K[Y]+=n.attributes[Y](i=k[j]);O[Y]=K[Y]/k.length,af(O[Y],U[Y],n.sensitivityThreshold)||(h=!0)}u[x]=O,s[x]=r.collection(k)}}f++}return s},kMedoids:function(t){var o,h,r=this.cy(),a=this.nodes(),i=null,n=bl(t),s=new Array(n.k),u={},f=new Array(n.k);n.testMode?"number"==typeof n.testCentroids||(o="object"===cr(n.testCentroids)?n.testCentroids:mh(a,n.k)):o=mh(a,n.k);for(var p=!0,x=0;p&&x<n.maxIterations;){for(var k=0;k<a.length;k++)u[(i=a[k]).id()]=vh(i,o,n.distance,n.attributes,"kMedoids");p=!1;for(var _=0;_<o.length;_++){var U=yh(_,a,u);if(0!==U.length){f[_]=xh(o[_],U,n.attributes);for(var O=0;O<U.length;O++)(h=xh(U[O],U,n.attributes))<f[_]&&(f[_]=h,o[_]=U[O],p=!0);s[_]=r.collection(U)}}x++}return s},fuzzyCMeans:bh,fcm:bh},ff=Fe({distance:"euclidean",linkage:"min",mode:"threshold",threshold:1/0,addDendrogram:!1,dendrogramDepth:0,attributes:[]}),gf={single:"min",complete:"max"},_h=function(t,r,a,i,n){for(var u,s=0,o=1/0,h=n.attributes,f=function(me,Te){return Lo(n.distance,h.length,function(Be){return h[Be](me)},function(Be){return h[Be](Te)},me,Te)},p=0;p<t.length;p++){var x=t[p].key,k=a[x][i[x]];k<o&&(s=x,o=k)}if("threshold"===n.mode&&o>=n.threshold||"dendrogram"===n.mode&&1===t.length)return!1;var O,_=r[s],U=r[i[s]];O="dendrogram"===n.mode?{left:_,right:U,key:_.key}:{value:_.value.concat(U.value),key:_.key},t[_.index]=O,t.splice(U.index,1),r[_.key]=O;for(var K=0;K<t.length;K++){var Y=t[K];_.key===Y.key?u=1/0:"min"===n.linkage?(u=a[_.key][Y.key],a[_.key][Y.key]>a[U.key][Y.key]&&(u=a[U.key][Y.key])):"max"===n.linkage?(u=a[_.key][Y.key],a[_.key][Y.key]<a[U.key][Y.key]&&(u=a[U.key][Y.key])):u="mean"===n.linkage?(a[_.key][Y.key]*_.size+a[U.key][Y.key]*U.size)/(_.size+U.size):"dendrogram"===n.mode?f(Y.value,_.value):f(Y.value[0],_.value[0]),a[_.key][Y.key]=a[Y.key][_.key]=u}for(var j=0;j<t.length;j++){var yt=t[j].key;if(i[yt]===_.key||i[yt]===U.key){for(var ie=yt,se=0;se<t.length;se++){var Ht=t[se].key;a[yt][Ht]<a[yt][ie]&&(ie=Ht)}i[yt]=ie}t[j].index=j}return _.key=U.key=_.index=U.index=null,!0},Ns=function(t,r,a){t&&(t.value?r.push(t.value):(t.left&&Ns(t.left,r),t.right&&Ns(t.right,r)))},El=function(t,r){if(!t)return"";if(t.left&&t.right){var a=El(t.left,r),i=El(t.right,r),n=r.add({group:"nodes",data:{id:a+","+i}});return r.add({group:"edges",data:{source:a,target:n.id()}}),r.add({group:"edges",data:{source:i,target:n.id()}}),n.id()}return t.value?t.value.id():void 0},Cl=function(t,r,a){if(!t)return[];var i=[],n=[],s=[];return 0===r?(t.left&&Ns(t.left,i),t.right&&Ns(t.right,n),s=i.concat(n),[a.collection(s)]):1===r?t.value?[a.collection(t.value)]:(t.left&&Ns(t.left,i),t.right&&Ns(t.right,n),[a.collection(i),a.collection(n)]):t.value?[a.collection(t.value)]:(t.left&&(i=Cl(t.left,r-1,a)),t.right&&(n=Cl(t.right,r-1,a)),i.concat(n))},Eh=function(t){for(var r=this.cy(),a=this.nodes(),i=function(t){var r=ff(t),a=gf[r.linkage];return null!=a&&(r.linkage=a),r}(t),n=i.attributes,s=function(j,yt){return Lo(i.distance,n.length,function(ie){return n[ie](j)},function(ie){return n[ie](yt)},j,yt)},o=[],u=[],h=[],f=[],p=0;p<a.length;p++){var x={value:"dendrogram"===i.mode?a[p]:[a[p]],key:p,index:p};o[p]=x,f[p]=x,u[p]=[],h[p]=0}for(var k=0;k<o.length;k++)for(var _=0;_<=k;_++){var U;U="dendrogram"===i.mode?k===_?1/0:s(o[k].value,o[_].value):k===_?1/0:s(o[k].value[0],o[_].value[0]),u[k][_]=U,u[_][k]=U,U<u[k][h[k]]&&(h[k]=_)}for(var O=_h(o,f,u,h,i);O;)O=_h(o,f,u,h,i);var K;return"dendrogram"===i.mode?(K=Cl(o[0],i.dendrogramDepth,r),i.addDendrogram&&El(o[0],r)):(K=new Array(o.length),o.forEach(function(Y,j){Y.key=Y.index=null,K[j]=r.collection(Y.value)})),K},vf={hierarchicalClustering:Eh,hca:Eh},yf=Fe({distance:"euclidean",preference:"median",damping:.8,maxIterations:1e3,minIterations:100,attributes:[]}),xf=function(t,r,a,i){var n=function(o,u){return i[u](o)};return-Lo(t,i.length,function(s){return n(r,s)},function(s){return n(a,s)},r,a)},Ch=function(t,r,a){for(var i=[],n=0;n<t;n++){for(var s=-1,o=-1/0,u=0;u<a.length;u++){var h=a[u];r[n*t+h]>o&&(s=h,o=r[n*t+h])}s>0&&i.push(s)}for(var f=0;f<a.length;f++)i[a[f]]=a[f];return i},kh=function(t){for(var r=this.cy(),a=this.nodes(),i=function(t){var r=t.damping,a=t.preference;.5<=r&&r<1||Ka("Damping must range on [0.5, 1).  Got: ".concat(r));var i=["median","mean","min","max"];return i.some(function(n){return n===a})||X(a)||Ka("Preference must be one of [".concat(i.map(function(n){return"'".concat(n,"'")}).join(", "),"] or a number.  Got: ").concat(a)),yf(t)}(t),n={},s=0;s<a.length;s++)n[a[s].id()]=s;var o,u,h,f,p,x,me;u=(o=a.length)*o,h=new Array(u);for(var k=0;k<u;k++)h[k]=-1/0;for(var _=0;_<o;_++)for(var U=0;U<o;U++)_!==U&&(h[_*o+U]=xf(i.distance,a[_],a[U],i.attributes));f=function(t,r){var a;return a="median"===r?function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.length,n=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],s=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];arguments.length>3&&void 0!==arguments[3]&&!arguments[3]?(a<t.length&&t.splice(a,t.length-a),r>0&&t.splice(0,r)):t=t.slice(r,a);for(var o=0,u=t.length-1;u>=0;u--)s?isFinite(t[u])||(t[u]=-1/0,o++):t.splice(u,1);n&&t.sort(function(x,k){return x-k});var f=t.length,p=Math.floor(f/2);return f%2!=0?t[p+1+o]:(t[p-1+o]+t[p+o])/2}(t):"mean"===r?function(t){for(var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.length,i=0,n=0,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;s<a;s++){var o=t[s];isFinite(o)&&(i+=o,n++)}return i/n}(t):"min"===r?function(t){for(var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.length,i=1/0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;n<a;n++){var s=t[n];isFinite(s)&&(i=Math.min(s,i))}return i}(t):"max"===r?function(t){for(var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.length,i=-1/0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;n<a;n++){var s=t[n];isFinite(s)&&(i=Math.max(s,i))}return i}(t):r,a}(h,i.preference);for(var O=0;O<o;O++)h[O*o+O]=f;p=new Array(u);for(var K=0;K<u;K++)p[K]=0;x=new Array(u);for(var Y=0;Y<u;Y++)x[Y]=0;for(var j=new Array(o),yt=new Array(o),ie=new Array(o),se=0;se<o;se++)j[se]=0,yt[se]=0,ie[se]=0;for(var Ht=new Array(o*i.minIterations),he=0;he<Ht.length;he++)Ht[he]=0;for(me=0;me<i.maxIterations;me++){for(var Te=0;Te<o;Te++){for(var Be=-1/0,Me=-1/0,Oe=-1,tr=0,ur=0;ur<o;ur++)j[ur]=p[Te*o+ur],(tr=x[Te*o+ur]+h[Te*o+ur])>=Be?(Me=Be,Be=tr,Oe=ur):tr>Me&&(Me=tr);for(var fr=0;fr<o;fr++)p[Te*o+fr]=(1-i.damping)*(h[Te*o+fr]-Be)+i.damping*j[fr];p[Te*o+Oe]=(1-i.damping)*(h[Te*o+Oe]-Me)+i.damping*j[Oe]}for(var rr=0;rr<o;rr++){for(var Cr=0,Ur=0;Ur<o;Ur++)j[Ur]=x[Ur*o+rr],yt[Ur]=Math.max(0,p[Ur*o+rr]),Cr+=yt[Ur];Cr-=yt[rr],yt[rr]=p[rr*o+rr],Cr+=yt[rr];for(var qr=0;qr<o;qr++)x[qr*o+rr]=(1-i.damping)*Math.min(0,Cr-yt[qr])+i.damping*j[qr];x[rr*o+rr]=(1-i.damping)*(Cr-yt[rr])+i.damping*j[rr]}for(var Dr=0,Wr=0;Wr<o;Wr++){var ga=x[Wr*o+Wr]+p[Wr*o+Wr]>0?1:0;Ht[me%i.minIterations*o+Wr]=ga,Dr+=ga}if(Dr>0&&(me>=i.minIterations-1||me==i.maxIterations-1)){for(var Ea=0,pa=0;pa<o;pa++){ie[pa]=0;for(var Aa=0;Aa<i.minIterations;Aa++)ie[pa]+=Ht[Aa*o+pa];(0===ie[pa]||ie[pa]===i.minIterations)&&Ea++}if(Ea===o)break}}for(var Ra=function(t,r,a){for(var i=[],n=0;n<t;n++)r[n*t+n]+a[n*t+n]>0&&i.push(n);return i}(o,p,x),Za=function(t,r,a){for(var i=Ch(t,r,a),n=0;n<a.length;n++){for(var s=[],o=0;o<i.length;o++)i[o]===a[n]&&s.push(o);for(var u=-1,h=-1/0,f=0;f<s.length;f++){for(var p=0,x=0;x<s.length;x++)p+=r[s[x]*t+s[f]];p>h&&(u=f,h=p)}a[n]=s[u]}return Ch(t,r,a)}(o,h,Ra),Ta={},Kr=0;Kr<Ra.length;Kr++)Ta[Ra[Kr]]=[];for(var $r=0;$r<a.length;$r++){var ma=Za[n[a[$r].id()]];null!=ma&&Ta[ma].push(a[$r])}for(var Ga=new Array(Ra.length),li=0;li<Ra.length;li++)Ga[li]=r.collection(Ta[Ra[li]]);return Ga},Cf={affinityPropagation:kh,ap:kh},kf=Fe({root:void 0,directed:!1}),Tf={hierholzer:function(t){if(!Bt(t)){var r=arguments;t={root:r[0],directed:r[1]}}var u,h,f,a=kf(t),i=a.root,n=a.directed,s=this,o=!1;i&&(f=je(i)?this.filter(i)[0].id():i[0].id());var p={},x={};s.forEach(n?function(Y){var j=Y.id();if(Y.isNode()){var yt=Y.indegree(!0),ie=Y.outdegree(!0),se=yt-ie,Ht=ie-yt;1==se?u?o=!0:u=j:1==Ht?h?o=!0:h=j:(Ht>1||se>1)&&(o=!0),p[j]=[],Y.outgoers().forEach(function(he){he.isEdge()&&p[j].push(he.id())})}else x[j]=[void 0,Y.target().id()]}:function(Y){var j=Y.id();Y.isNode()?(Y.degree(!0)%2&&(u?h?o=!0:h=j:u=j),p[j]=[],Y.connectedEdges().forEach(function(ie){return p[j].push(ie.id())})):x[j]=[Y.source().id(),Y.target().id()]});var k={found:!1,trail:void 0};if(o)return k;if(h&&u)if(n){if(f&&h!=f)return k;f=h}else{if(f&&h!=f&&u!=f)return k;f||(f=h)}else f||(f=s[0].id());var _=function(j){for(var se,Ht,he,yt=j,ie=[j];p[yt].length;)se=p[yt].shift(),Ht=x[se][0],yt!=(he=x[se][1])?(p[he]=p[he].filter(function(me){return me!=se}),yt=he):!n&&yt!=Ht&&(p[Ht]=p[Ht].filter(function(me){return me!=se}),yt=Ht),ie.unshift(se),ie.unshift(yt);return ie},U=[],O=[];for(O=_(f);1!=O.length;)0==p[O[0]].length?(U.unshift(s.getElementById(O.shift())),U.unshift(s.getElementById(O.shift()))):O=_(O.shift()).concat(O);for(var K in U.unshift(s.getElementById(O.shift())),p)if(p[K].length)return k;return k.found=!0,k.trail=this.spawn(U,!0),k}},Ro=function(){var t=this,r={},a=0,i=0,n=[],s=[],o={},h=function(x,k,_){x===_&&(i+=1),r[k]={id:a,low:a++,cutVertex:!1};var O,K,Y,j,U=t.getElementById(k).connectedEdges().intersection(t);0===U.size()?n.push(t.spawn(t.getElementById(k))):U.forEach(function(yt){O=yt.source().id(),K=yt.target().id(),(Y=O===k?K:O)!==_&&(j=yt.id(),o[j]||(o[j]=!0,s.push({x:k,y:Y,edge:yt})),Y in r?r[k].low=Math.min(r[k].low,r[Y].id):(h(x,Y,k),r[k].low=Math.min(r[k].low,r[Y].low),r[k].id<=r[Y].low&&(r[k].cutVertex=!0,function(x,k){for(var _=s.length-1,U=[],O=t.spawn();s[_].x!=x||s[_].y!=k;)U.push(s.pop().edge),_--;U.push(s.pop().edge),U.forEach(function(K){var Y=K.connectedNodes().intersection(t);O.merge(K),Y.forEach(function(j){var yt=j.id(),ie=j.connectedEdges().intersection(t);O.merge(j),O.merge(r[yt].cutVertex?ie.filter(function(se){return se.isLoop()}):ie)})}),n.push(O)}(k,Y))))})};t.forEach(function(p){if(p.isNode()){var x=p.id();x in r||(i=0,h(x,x),r[x].cutVertex=i>1)}});var f=Object.keys(r).filter(function(p){return r[p].cutVertex}).map(function(p){return t.getElementById(p)});return{cut:t.spawn(f),components:n}},Po=function(){var t=this,r={},a=0,i=[],n=[],s=t.spawn(t),o=function(h){if(n.push(h),r[h]={index:a,low:a++,explored:!1},t.getElementById(h).connectedEdges().intersection(t).forEach(function(U){var O=U.target().id();O!==h&&(O in r||o(O),r[O].explored||(r[h].low=Math.min(r[h].low,r[O].low)))}),r[h].index===r[h].low){for(var p=t.spawn();;){var x=n.pop();if(p.merge(t.getElementById(x)),r[x].low=r[h].index,r[x].explored=!0,x===h)break}var k=p.edgesWith(p),_=p.merge(k);i.push(_),s=s.difference(_)}};return t.forEach(function(u){if(u.isNode()){var h=u.id();h in r||o(h)}}),{cut:s,components:i}},Th={};[La,Ya,ni,Pi,ki,Wi,zi,K0,Ms,Os,xl,Q0,df,vf,Cf,Tf,{hopcroftTarjanBiconnected:Ro,htbc:Ro,htb:Ro,hopcroftTarjanBiconnectedComponents:Ro},{tarjanStronglyConnected:Po,tsc:Po,tscc:Po,tarjanStronglyConnectedComponents:Po}].forEach(function(e){G(Th,e)});
/*!
      Embeddable Minimum Strictly-Compliant Promises/A+ 1.1.1 Thenable
      Copyright (c) 2013-2014 Ralf S. Engelschall (http://engelschall.com)
      Licensed under The MIT License (http://opensource.org/licenses/MIT)
      */
var Xn=function(t){if(!(this instanceof Xn))return new Xn(t);this.id="Thenable/1.0.7",this.state=0,this.fulfillValue=void 0,this.rejectReason=void 0,this.onFulfilled=[],this.onRejected=[],this.proxy={then:this.then.bind(this)},"function"==typeof t&&t.call(this,this.fulfill.bind(this),this.reject.bind(this))};Xn.prototype={fulfill:function(t){return Dh(this,1,"fulfillValue",t)},reject:function(t){return Dh(this,2,"rejectReason",t)},then:function(t,r){var a=this,i=new Xn;return a.onFulfilled.push(Rh(t,i,"fulfill")),a.onRejected.push(Rh(r,i,"reject")),Lh(a),i.proxy}};var Dh=function(t,r,a,i){return 0===t.state&&(t.state=r,t[a]=i,Lh(t)),t},Lh=function(t){1===t.state?Bh(t,"onFulfilled",t.fulfillValue):2===t.state&&Bh(t,"onRejected",t.rejectReason)},Bh=function(t,r,a){if(0!==t[r].length){var i=t[r];t[r]=[];var n=function(){for(var o=0;o<i.length;o++)i[o](a)};"function"==typeof setImmediate?setImmediate(n):setTimeout(n,0)}},Rh=function(t,r,a){return function(i){if("function"!=typeof t)r[a].call(r,i);else{var n;try{n=t(i)}catch(s){return void r.reject(s)}Ph(r,n)}}},Ph=function(t,r){if(t!==r&&t.proxy!==r){var a;if("object"===cr(r)&&null!==r||"function"==typeof r)try{a=r.then}catch(n){return void t.reject(n)}if("function"!=typeof a)t.fulfill(r);else{var i=!1;try{a.call(r,function(n){i||(i=!0,n===r?t.reject(new TypeError("circular thenable chain")):Ph(t,n))},function(n){i||(i=!0,t.reject(n))})}catch(n){i||t.reject(n)}}}else t.reject(new TypeError("cannot resolve promise with itself"))};Xn.all=function(e){return new Xn(function(t,r){for(var a=new Array(e.length),i=0,n=function(u,h){a[u]=h,++i===e.length&&t(a)},s=0;s<e.length;s++)(function(o){var u=e[o];null!=u&&null!=u.then?u.then(function(p){n(o,p)},function(p){r(p)}):n(o,u)})(s)})},Xn.resolve=function(e){return new Xn(function(t,r){t(e)})},Xn.reject=function(e){return new Xn(function(t,r){r(e)})};var Ks=typeof Promise<"u"?Promise:Xn,kl=function(t,r,a){var i=V(t),n=!i,s=this._private=G({duration:1e3},r,a);if(s.target=t,s.style=s.style||s.css,s.started=!1,s.playing=!1,s.hooked=!1,s.applying=!1,s.progress=0,s.completes=[],s.frames=[],s.complete&&z(s.complete)&&s.completes.push(s.complete),n){var o=t.position();s.startPosition=s.startPosition||{x:o.x,y:o.y},s.startStyle=s.startStyle||t.cy().style().getAnimationStartStyle(t,s.style)}if(i){var u=t.pan();s.startPan={x:u.x,y:u.y},s.startZoom=t.zoom()}this.length=1,this[0]=this},ks=kl.prototype;G(ks,{instanceString:function(){return"animation"},hook:function(){var t=this._private;if(!t.hooked){var a=t.target._private.animation;(t.queue?a.queue:a.current).push(this),re(t.target)&&t.target.cy().addToAnimationPool(t.target),t.hooked=!0}return this},play:function(){var t=this._private;return 1===t.progress&&(t.progress=0),t.playing=!0,t.started=!1,t.stopped=!1,this.hook(),this},playing:function(){return this._private.playing},apply:function(){var t=this._private;return t.applying=!0,t.started=!1,t.stopped=!1,this.hook(),this},applying:function(){return this._private.applying},pause:function(){var t=this._private;return t.playing=!1,t.started=!1,this},stop:function(){var t=this._private;return t.playing=!1,t.started=!1,t.stopped=!0,this},rewind:function(){return this.progress(0)},fastforward:function(){return this.progress(1)},time:function(t){var r=this._private;return void 0===t?r.progress*r.duration:this.progress(t/r.duration)},progress:function(t){var r=this._private,a=r.playing;return void 0===t?r.progress:(a&&this.pause(),r.progress=t,r.started=!1,a&&this.play(),this)},completed:function(){return 1===this._private.progress},reverse:function(){var t=this._private,r=t.playing;r&&this.pause(),t.progress=1-t.progress,t.started=!1;var a=function(h,f){var p=t[h];null!=p&&(t[h]=t[f],t[f]=p)};if(a("zoom","startZoom"),a("pan","startPan"),a("position","startPosition"),t.style)for(var i=0;i<t.style.length;i++){var n=t.style[i],s=n.name,o=t.startStyle[s];t.startStyle[s]=n,t.style[i]=o}return r&&this.play(),this},promise:function(t){var a,r=this._private;return a="frame"===t?r.frames:r.completes,new Ks(function(i,n){a.push(function(){i()})})}}),ks.complete=ks.completed,ks.run=ks.play,ks.running=ks.playing;var Tl,Ih,Sl,Mh,wl,Oh,Al,Fh,Dl,Nh,Ll,Kh,Bl,Wh,Rl,zh,Pl,Vh,Ml,Uh,Ol,$h,Fl,Yh,Nl,Hh,Kl,Gh,Wl,qh,zl,jh,Vl,Xh,Ul,Zh,$l,Jh,Yl,tu,Hl,eu,Gl,ru,ql,au,jl,iu,Xl,nu,Zl,su,Ql,ou,Jl,lu,tc,cu,ec,hu,rc,uu,ac,du,ic,fu,nc,gu,sc,pu,oc,vu,lc,mu,cc,bu,hc,_u,uc,Cu,dc,Tu,gc,Su,pc,wu,Af={animated:function(){return function(){var r=this,i=void 0!==r.length?r:[r];if(!(this._private.cy||this).styleEnabled())return!1;var s=i[0];return s?s._private.animation.current.length>0:void 0}},clearQueue:function(){return function(){var r=this,i=void 0!==r.length?r:[r];if(!(this._private.cy||this).styleEnabled())return this;for(var s=0;s<i.length;s++)i[s]._private.animation.queue=[];return this}},delay:function(){return function(r,a){return(this._private.cy||this).styleEnabled()?this.animate({delay:r,duration:r,complete:a}):this}},delayAnimation:function(){return function(r,a){return(this._private.cy||this).styleEnabled()?this.animation({delay:r,duration:r,complete:a}):this}},animation:function(){return function(r,a){var i=this,n=void 0!==i.length,s=n?i:[i],o=this._private.cy||this,u=!n,h=!u;if(!o.styleEnabled())return this;var f=o.style();if(r=G({},r,a),0===Object.keys(r).length)return new kl(s[0],r);switch(void 0===r.duration&&(r.duration=400),r.duration){case"slow":r.duration=600;break;case"fast":r.duration=200}if(h&&(r.style=f.getPropsList(r.style||r.css),r.css=void 0),h&&null!=r.renderedPosition){var x=r.renderedPosition,k=o.pan(),_=o.zoom();r.position=Vn(x,_,k)}if(u&&null!=r.panBy){var U=r.panBy,O=o.pan();r.pan={x:O.x+U.x,y:O.y+U.y}}var K=r.center||r.centre;if(u&&null!=K){var Y=o.getCenterPan(K.eles,r.zoom);null!=Y&&(r.pan=Y)}if(u&&null!=r.fit){var j=r.fit,yt=o.getFitViewport(j.eles||j.boundingBox,j.padding);null!=yt&&(r.pan=yt.pan,r.zoom=yt.zoom)}if(u&&Bt(r.zoom)){var ie=o.getZoomedViewport(r.zoom);null!=ie?(ie.zoomed&&(r.zoom=ie.zoom),ie.panned&&(r.pan=ie.pan)):r.zoom=null}return new kl(s[0],r)}},animate:function(){return function(r,a){var i=this,s=void 0!==i.length?i:[i];if(!(this._private.cy||this).styleEnabled())return this;a&&(r=G({},r,a));for(var u=0;u<s.length;u++){var h=s[u],f=h.animated()&&(void 0===r.queue||r.queue);h.animation(r,f?{queue:!0}:void 0).play()}return this}},stop:function(){return function(r,a){var i=this,s=void 0!==i.length?i:[i],o=this._private.cy||this;if(!o.styleEnabled())return this;for(var u=0;u<s.length;u++){for(var f=s[u]._private,p=f.animation.current,x=0;x<p.length;x++)a&&(p[x]._private.duration=0);r&&(f.animation.queue=[]),a||(f.animation.current=[])}return o.notify("draw"),this}}};function Io(){return Ih?Tl:(Ih=1,Tl=Array.isArray)}function If(){if(Wh)return Bl;Wh=1;var e=function Lf(){if(Oh)return wl;Oh=1;var e=Vt(),t=or();return wl=function s(o){if(!t(o))return!1;var u=e(o);return"[object Function]"==u||"[object GeneratorFunction]"==u||"[object AsyncFunction]"==u||"[object Proxy]"==u}}(),t=function Rf(){if(Nh)return Dl;Nh=1;var a,e=function Bf(){if(Fh)return Al;Fh=1;var e=Qe();return Al=e["__core-js_shared__"]}(),t=(a=/[^.]+$/.exec(e&&e.keys&&e.keys.IE_PROTO||""))?"Symbol(src)_1."+a:"";return Dl=function r(a){return!!t&&t in a},Dl}(),r=or(),a=function Pf(){if(Kh)return Ll;Kh=1;var t=Function.prototype.toString;return Ll=function r(a){if(null!=a){try{return t.call(a)}catch{}try{return a+""}catch{}}return""}}(),n=/^\[object .+?Constructor\]$/,f=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");return Bl=function p(x){return!(!r(x)||t(x))&&(e(x)?f:n).test(a(x))}}function Il(){if(Vh)return Pl;Vh=1;var e=If(),t=function Mf(){return zh?Rl:(zh=1,Rl=function e(t,r){return t?.[r]})}();return Pl=function r(a,i){var n=t(a,i);return e(n)?n:void 0}}function Mo(){if(Uh)return Ml;Uh=1;var t=Il()(Object,"create");return Ml=t}function Qh(){return Zh?Ul:(Zh=1,Ul=function e(t,r){return t===r||t!=t&&r!=r})}function Oo(){if(Jh)return $l;Jh=1;var e=Qh();return $l=function t(r,a){for(var i=r.length;i--;)if(e(r[i][0],a))return i;return-1}}function jf(){if(su)return Zl;su=1;var e=function zf(){if(jh)return zl;jh=1;var e=function Of(){if($h)return Ol;$h=1;var e=Mo();return Ol=function t(){this.__data__=e?e(null):{},this.size=0}}(),t=function Ff(){return Yh?Fl:(Yh=1,Fl=function e(t){var r=this.has(t)&&delete this.__data__[t];return this.size-=r?1:0,r})}(),r=function Nf(){if(Hh)return Nl;Hh=1;var e=Mo(),a=Object.prototype.hasOwnProperty;return Nl=function i(n){var s=this.__data__;if(e){var o=s[n];return"__lodash_hash_undefined__"===o?void 0:o}return a.call(s,n)?s[n]:void 0}}(),a=function Kf(){if(Gh)return Kl;Gh=1;var e=Mo(),r=Object.prototype.hasOwnProperty;return Kl=function a(i){var n=this.__data__;return e?void 0!==n[i]:r.call(n,i)}}(),i=function Wf(){if(qh)return Wl;qh=1;var e=Mo();return Wl=function r(a,i){var n=this.__data__;return this.size+=this.has(a)?0:1,n[a]=e&&void 0===i?"__lodash_hash_undefined__":i,this}}();function n(s){var o=-1,u=null==s?0:s.length;for(this.clear();++o<u;){var h=s[o];this.set(h[0],h[1])}}return n.prototype.clear=e,n.prototype.delete=t,n.prototype.get=r,n.prototype.has=a,n.prototype.set=i,zl=n}(),t=function Gf(){if(iu)return jl;iu=1;var e=function Vf(){return Xh?Vl:(Xh=1,Vl=function e(){this.__data__=[],this.size=0})}(),t=function Uf(){if(tu)return Yl;tu=1;var e=Oo(),r=Array.prototype.splice;return Yl=function a(i){var n=this.__data__,s=e(n,i);return!(s<0||(s==n.length-1?n.pop():r.call(n,s,1),--this.size,0))}}(),r=function $f(){if(eu)return Hl;eu=1;var e=Oo();return Hl=function t(r){var a=this.__data__,i=e(a,r);return i<0?void 0:a[i][1]}}(),a=function Yf(){if(ru)return Gl;ru=1;var e=Oo();return Gl=function t(r){return e(this.__data__,r)>-1}}(),i=function Hf(){if(au)return ql;au=1;var e=Oo();return ql=function t(r,a){var i=this.__data__,n=e(i,r);return n<0?(++this.size,i.push([r,a])):i[n][1]=a,this}}();function n(s){var o=-1,u=null==s?0:s.length;for(this.clear();++o<u;){var h=s[o];this.set(h[0],h[1])}}return n.prototype.clear=e,n.prototype.delete=t,n.prototype.get=r,n.prototype.has=a,n.prototype.set=i,jl=n}(),r=function qf(){if(nu)return Xl;nu=1;var r=Il()(Qe(),"Map");return Xl=r}();return Zl=function a(){this.size=0,this.__data__={hash:new e,map:new(r||t),string:new e}}}function Fo(){if(lu)return Jl;lu=1;var e=function Xf(){return ou?Ql:(ou=1,Ql=function e(t){var r=typeof t;return"string"==r||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==t:null===t})}();return Jl=function t(r,a){var i=r.__data__;return e(a)?i["string"==typeof a?"string":"hash"]:i.map}}function ag(){if(pu)return sc;pu=1;var e=function rg(){if(gu)return nc;gu=1;var e=function eg(){if(fu)return ic;fu=1;var e=jf(),t=function Zf(){if(cu)return tc;cu=1;var e=Fo();return tc=function t(r){var a=e(this,r).delete(r);return this.size-=a?1:0,a}}(),r=function Qf(){if(hu)return ec;hu=1;var e=Fo();return ec=function t(r){return e(this,r).get(r)}}(),a=function Jf(){if(uu)return rc;uu=1;var e=Fo();return rc=function t(r){return e(this,r).has(r)}}(),i=function tg(){if(du)return ac;du=1;var e=Fo();return ac=function t(r,a){var i=e(this,r),n=i.size;return i.set(r,a),this.size+=i.size==n?0:1,this}}();function n(s){var o=-1,u=null==s?0:s.length;for(this.clear();++o<u;){var h=s[o];this.set(h[0],h[1])}}return n.prototype.clear=e,n.prototype.delete=t,n.prototype.get=r,n.prototype.has=a,n.prototype.set=i,ic=n}();function r(a,i){if("function"!=typeof a||null!=i&&"function"!=typeof i)throw new TypeError("Expected a function");var n=function(){var s=arguments,o=i?i.apply(this,s):s[0],u=n.cache;if(u.has(o))return u.get(o);var h=a.apply(this,s);return n.cache=u.set(o,h)||u,h};return n.cache=new(r.Cache||e),n}return r.Cache=e,nc=r}();return sc=function r(a){var i=e(a,function(s){return 500===n.size&&n.clear(),s}),n=i.cache;return i}}function yu(){if(vu)return oc;vu=1;var e=ag(),t=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,r=/\\(\\)?/g,a=e(function(i){var n=[];return 46===i.charCodeAt(0)&&n.push(""),i.replace(t,function(s,o,u,h){n.push(u?h.replace(r,"$1"):o||s)}),n});return oc=a}function xu(){return mu?lc:(mu=1,lc=function e(t,r){for(var a=-1,i=null==t?0:t.length,n=Array(i);++a<i;)n[a]=r(t[a],a,t);return n})}function Eu(){if(_u)return hc;_u=1;var e=function ig(){if(bu)return cc;bu=1;var e=I(),t=xu(),r=Io(),a=We(),i=e?e.prototype:void 0,n=i?i.toString:void 0;return cc=function s(o){if("string"==typeof o)return o;if(r(o))return t(o,s)+"";if(a(o))return n?n.call(o):"";var u=o+"";return"0"==u&&1/o==-1/0?"-0":u}}();return hc=function t(r){return null==r?"":e(r)}}function ku(){if(Cu)return uc;Cu=1;var e=Io(),t=function Df(){if(Mh)return Sl;Mh=1;var e=Io(),t=We(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;return Sl=function i(n,s){if(e(n))return!1;var o=typeof n;return!("number"!=o&&"symbol"!=o&&"boolean"!=o&&null!=n&&!t(n))||a.test(n)||!r.test(n)||null!=s&&n in Object(s)}}(),r=yu(),a=Eu();return uc=function i(n,s){return e(n)?n:t(n,s)?[n]:r(a(n))}}function fc(){if(Tu)return dc;Tu=1;var e=We();return dc=function t(r){if("string"==typeof r||e(r))return r;var a=r+"";return"0"==a&&1/r==-1/0?"-0":a}}var vc,Au,yc,Du,mc,Lu,xc,Bu,bc,Ru,_c,Pu,og=function sg(){if(wu)return pc;wu=1;var e=function ng(){if(Su)return gc;Su=1;var e=ku(),t=fc();return gc=function r(a,i){for(var n=0,s=(i=e(i,a)).length;null!=a&&n<s;)a=a[t(i[n++])];return n&&n==s?a:void 0}}();return pc=function t(r,a,i){var n=null==r?void 0:e(r,a);return void 0===n?i:n}}(),lg=xr(og);function fg(){if(Ru)return bc;Ru=1;var e=function ug(){if(Lu)return mc;Lu=1;var e=function hg(){if(Du)return yc;Du=1;var e=function cg(){if(Au)return vc;Au=1;var e=Il(),t=function(){try{var r=e(Object,"defineProperty");return r({},"",{}),r}catch{}}();return vc=t}();return yc=function t(r,a,i){"__proto__"==a&&e?e(r,a,{configurable:!0,enumerable:!0,value:i,writable:!0}):r[a]=i}}(),t=Qh(),a=Object.prototype.hasOwnProperty;return mc=function i(n,s,o){var u=n[s];(!a.call(n,s)||!t(u,o)||void 0===o&&!(s in n))&&e(n,s,o)}}(),t=ku(),r=function dg(){if(Bu)return xc;Bu=1;var t=/^(?:0|[1-9]\d*)$/;return xc=function r(a,i){var n=typeof a;return!!(i=i??9007199254740991)&&("number"==n||"symbol"!=n&&t.test(a))&&a>-1&&a%1==0&&a<i}}(),a=or(),i=fc();return bc=function n(s,o,u,h){if(!a(s))return s;for(var f=-1,p=(o=t(o,s)).length,x=p-1,k=s;null!=k&&++f<p;){var _=i(o[f]),U=u;if("__proto__"===_||"constructor"===_||"prototype"===_)return s;if(f!=x){var O=k[_];void 0===(U=h?h(O,_,k):void 0)&&(U=a(O)?O:r(o[f+1])?[]:{})}e(k,_,U),k=k[_]}return s}}var Ec,Iu,Cc,Mu,vg=xr(function gg(){if(Pu)return _c;Pu=1;var e=fg();return _c=function t(r,a,i){return null==r?r:e(r,a,i)}}()),xg=function mg(){if(Mu)return Cc;Mu=1;var e=xu(),t=function yg(){return Iu?Ec:(Iu=1,Ec=function e(t,r){var a=-1,i=t.length;for(r||(r=Array(i));++a<i;)r[a]=t[a];return r})}(),r=Io(),a=We(),i=yu(),n=fc(),s=Eu();return Cc=function o(u){return r(u)?e(u,n):a(u)?[u]:t(i(s(u)))}}(),bg=xr(xg),_g={data:function(t){return t=G({},{field:"data",bindingEvent:"data",allowBinding:!1,allowSetting:!1,allowGetting:!1,settingEvent:"data",settingTriggersEvent:!1,triggerFnName:"trigger",immutableKeys:{},updateStyle:!1,beforeGet:function(i){},beforeSet:function(i,n){},onSet:function(i){},canSet:function(i){return!0}},t),function(i,n){var s=t,o=this,u=void 0!==o.length,h=u?o:[o],f=u?o[0]:o;if(je(i)){var k,x=-1!==i.indexOf(".")&&bg(i);if(s.allowGetting&&void 0===n)return f&&(s.beforeGet(f),k=x&&void 0===f._private[s.field][i]?lg(f._private[s.field],x):f._private[s.field][i]),k;if(s.allowSetting&&void 0!==n&&!s.immutableKeys[i]){var U=A({},i,n);s.beforeSet(o,U);for(var O=0,K=h.length;O<K;O++){var Y=h[O];s.canSet(Y)&&(x&&void 0===f._private[s.field][i]?vg(Y._private[s.field],x,n):Y._private[s.field][i]=n)}s.updateStyle&&o.updateStyle(),s.onSet(o),s.settingTriggersEvent&&o[s.triggerFnName](s.settingEvent)}}else if(s.allowSetting&&Bt(i)){var yt,ie,j=i,se=Object.keys(j);s.beforeSet(o,j);for(var Ht=0;Ht<se.length;Ht++)if(ie=j[yt=se[Ht]],!s.immutableKeys[yt])for(var me=0;me<h.length;me++){var Te=h[me];s.canSet(Te)&&(Te._private[s.field][yt]=ie)}s.updateStyle&&o.updateStyle(),s.onSet(o),s.settingTriggersEvent&&o[s.triggerFnName](s.settingEvent)}else if(s.allowBinding&&z(i))o.on(s.bindingEvent,i);else if(s.allowGetting&&void 0===i){var Me;return f&&(s.beforeGet(f),Me=f._private[s.field]),Me}return o}},removeData:function(t){return t=G({},{field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!1,immutableKeys:{}},t),function(i){var n=t,s=this,u=void 0!==s.length?s:[s];if(je(i)){for(var h=i.split(/\s+/),f=h.length,p=0;p<f;p++){var x=h[p];if(!Nt(x)&&!n.immutableKeys[x])for(var _=0,U=u.length;_<U;_++)u[_]._private[n.field][x]=void 0}n.triggerEvent&&s[n.triggerFnName](n.event)}else if(void 0===i){for(var O=0,K=u.length;O<K;O++)for(var Y=u[O]._private[n.field],j=Object.keys(Y),yt=0;yt<j.length;yt++){var ie=j[yt];!n.immutableKeys[ie]&&(Y[ie]=void 0)}n.triggerEvent&&s[n.triggerFnName](n.event)}return s}}},Eg={eventAliasesOn:function(t){var r=t;r.addListener=r.listen=r.bind=r.on,r.unlisten=r.unbind=r.off=r.removeListener,r.trigger=r.emit,r.pon=r.promiseOn=function(a,i){var n=this,s=Array.prototype.slice.call(arguments,0);return new Ks(function(o,u){var f=s.concat([function(k){n.off.apply(n,p),o(k)}]),p=f.concat([]);n.on.apply(n,f)})}}},$i={};[Af,_g,Eg].forEach(function(e){G($i,e)});var Cg={animate:$i.animate(),animation:$i.animation(),animated:$i.animated(),clearQueue:$i.clearQueue(),delay:$i.delay(),delayAnimation:$i.delayAnimation(),stop:$i.stop()},No={classes:function(t){var r=this;if(void 0===t){var a=[];return r[0]._private.classes.forEach(function(_){return a.push(_)}),a}ft(t)||(t=(t||"").match(/\S+/g)||[]);for(var i=[],n=new Xr(t),s=0;s<r.length;s++){for(var o=r[s],u=o._private,h=u.classes,f=!1,p=0;p<t.length;p++)if(!h.has(t[p])){f=!0;break}f||(f=h.size!==t.length),f&&(u.classes=n,i.push(o))}return i.length>0&&this.spawn(i).updateStyle().emit("class"),r},addClass:function(t){return this.toggleClass(t,!0)},hasClass:function(t){var r=this[0];return null!=r&&r._private.classes.has(t)},toggleClass:function(t,r){ft(t)||(t=t.match(/\S+/g)||[]);for(var a=this,i=void 0===r,n=[],s=0,o=a.length;s<o;s++)for(var u=a[s],h=u._private.classes,f=!1,p=0;p<t.length;p++){var x=t[p],k=h.has(x),_=!1;r||i&&!k?(h.add(x),_=!0):(!r||i&&k)&&(h.delete(x),_=!0),!f&&_&&(n.push(u),f=!0)}return n.length>0&&this.spawn(n).updateStyle().emit("class"),a},removeClass:function(t){return this.toggleClass(t,!1)},flashClass:function(t,r){var a=this;if(null==r)r=250;else if(0===r)return a;return a.addClass(t),setTimeout(function(){a.removeClass(t)},r),a}};No.className=No.classNames=No.classes;var Fi={metaChar:"[\\!\\\"\\#\\$\\%\\&\\'\\(\\)\\*\\+\\,\\.\\/\\:\\;\\<\\=\\>\\?\\@\\[\\]\\^\\`\\{\\|\\}\\~]",comparatorOp:"=|\\!=|>|>=|<|<=|\\$=|\\^=|\\*=",boolOp:"\\?|\\!|\\^",string:"\"(?:\\\\\"|[^\"])*\"|'(?:\\\\'|[^'])*'",number:B,meta:"degree|indegree|outdegree",separator:"\\s*,\\s*",descendant:"\\s+",child:"\\s+>\\s+",subject:"\\$",group:"node|edge|\\*",directedEdge:"\\s+->\\s+",undirectedEdge:"\\s+<->\\s+"};Fi.variable="(?:[\\w-.]|(?:\\\\"+Fi.metaChar+"))+",Fi.className="(?:[\\w-]|(?:\\\\"+Fi.metaChar+"))+",Fi.value=Fi.string+"|"+Fi.number,Fi.id=Fi.variable,function(){var e,t,r;for(e=Fi.comparatorOp.split("|"),r=0;r<e.length;r++)Fi.comparatorOp+="|@"+(t=e[r]);for(e=Fi.comparatorOp.split("|"),r=0;r<e.length;r++)!((t=e[r]).indexOf("!")>=0)&&"="!==t&&(Fi.comparatorOp+="|\\!"+t)}();var kc=[{selector:":selected",matches:function(t){return t.selected()}},{selector:":unselected",matches:function(t){return!t.selected()}},{selector:":selectable",matches:function(t){return t.selectable()}},{selector:":unselectable",matches:function(t){return!t.selectable()}},{selector:":locked",matches:function(t){return t.locked()}},{selector:":unlocked",matches:function(t){return!t.locked()}},{selector:":visible",matches:function(t){return t.visible()}},{selector:":hidden",matches:function(t){return!t.visible()}},{selector:":transparent",matches:function(t){return t.transparent()}},{selector:":grabbed",matches:function(t){return t.grabbed()}},{selector:":free",matches:function(t){return!t.grabbed()}},{selector:":removed",matches:function(t){return t.removed()}},{selector:":inside",matches:function(t){return!t.removed()}},{selector:":grabbable",matches:function(t){return t.grabbable()}},{selector:":ungrabbable",matches:function(t){return!t.grabbable()}},{selector:":animated",matches:function(t){return t.animated()}},{selector:":unanimated",matches:function(t){return!t.animated()}},{selector:":parent",matches:function(t){return t.isParent()}},{selector:":childless",matches:function(t){return t.isChildless()}},{selector:":child",matches:function(t){return t.isChild()}},{selector:":orphan",matches:function(t){return t.isOrphan()}},{selector:":nonorphan",matches:function(t){return t.isChild()}},{selector:":compound",matches:function(t){return t.isNode()?t.isParent():t.source().isParent()||t.target().isParent()}},{selector:":loop",matches:function(t){return t.isLoop()}},{selector:":simple",matches:function(t){return t.isSimple()}},{selector:":active",matches:function(t){return t.active()}},{selector:":inactive",matches:function(t){return!t.active()}},{selector:":backgrounding",matches:function(t){return t.backgrounding()}},{selector:":nonbackgrounding",matches:function(t){return!t.backgrounding()}}].sort(function(e,t){return function(t,r){return-1*ht(t,r)}(e.selector,t.selector)}),kg=function(){for(var t,e={},r=0;r<kc.length;r++)e[(t=kc[r]).selector]=t.matches;return e}(),Sg="("+kc.map(function(e){return e.selector}).join("|")+")",Ws=function(t){return t.replace(new RegExp("\\\\("+Fi.metaChar+")","g"),function(r,a){return a})},fs=function(t,r,a){t[t.length-1]=a},Tc=[{name:"group",query:!0,regex:"("+Fi.group+")",populate:function(t,r,a){var n=Rt(a,1)[0];r.checks.push({type:0,value:"*"===n?n:n+"s"})}},{name:"state",query:!0,regex:Sg,populate:function(t,r,a){var i=Rt(a,1);r.checks.push({type:7,value:i[0]})}},{name:"id",query:!0,regex:"\\#("+Fi.id+")",populate:function(t,r,a){var i=Rt(a,1);r.checks.push({type:8,value:Ws(i[0])})}},{name:"className",query:!0,regex:"\\.("+Fi.className+")",populate:function(t,r,a){var i=Rt(a,1);r.checks.push({type:9,value:Ws(i[0])})}},{name:"dataExists",query:!0,regex:"\\[\\s*("+Fi.variable+")\\s*\\]",populate:function(t,r,a){var i=Rt(a,1);r.checks.push({type:4,field:Ws(i[0])})}},{name:"dataCompare",query:!0,regex:"\\[\\s*("+Fi.variable+")\\s*("+Fi.comparatorOp+")\\s*("+Fi.value+")\\s*\\]",populate:function(t,r,a){var i=Rt(a,3),n=i[0],s=i[1],o=i[2];o=null!=new RegExp("^"+Fi.string+"$").exec(o)?o.substring(1,o.length-1):parseFloat(o),r.checks.push({type:3,field:Ws(n),operator:s,value:o})}},{name:"dataBool",query:!0,regex:"\\[\\s*("+Fi.boolOp+")\\s*("+Fi.variable+")\\s*\\]",populate:function(t,r,a){var i=Rt(a,2),n=i[0];r.checks.push({type:5,field:Ws(i[1]),operator:n})}},{name:"metaCompare",query:!0,regex:"\\[\\[\\s*("+Fi.meta+")\\s*("+Fi.comparatorOp+")\\s*("+Fi.number+")\\s*\\]\\]",populate:function(t,r,a){var i=Rt(a,3),s=i[1],o=i[2];r.checks.push({type:6,field:Ws(i[0]),operator:s,value:parseFloat(o)})}},{name:"nextQuery",separator:!0,regex:Fi.separator,populate:function(t,r){var a=t.currentSubject,i=t.edgeCount,n=t.compoundCount,s=t[t.length-1];return null!=a&&(s.subject=a,t.currentSubject=null),s.edgeCount=i,s.compoundCount=n,t.edgeCount=0,t.compoundCount=0,t[t.length++]={checks:[]}}},{name:"directedEdge",separator:!0,regex:Fi.directedEdge,populate:function(t,r){if(null==t.currentSubject){var a={checks:[]},n={checks:[]};return a.checks.push({type:11,source:r,target:n}),fs(t,0,a),t.edgeCount++,n}var s={checks:[]},u={checks:[]};return s.checks.push({type:12,source:r,target:u}),fs(t,0,s),t.edgeCount++,u}},{name:"undirectedEdge",separator:!0,regex:Fi.undirectedEdge,populate:function(t,r){if(null==t.currentSubject){var a={checks:[]},n={checks:[]};return a.checks.push({type:10,nodes:[r,n]}),fs(t,0,a),t.edgeCount++,n}var s={checks:[]},u={checks:[]};return s.checks.push({type:14,node:r,neighbor:u}),fs(t,0,s),u}},{name:"child",separator:!0,regex:Fi.child,populate:function(t,r){if(null==t.currentSubject){var a={checks:[]},i={checks:[]};return a.checks.push({type:15,parent:t[t.length-1],child:i}),fs(t,0,a),t.compoundCount++,i}if(t.currentSubject===r){var s={checks:[]},u={checks:[]},h={checks:[]},f={checks:[]},p={checks:[]};return s.checks.push({type:19,left:t[t.length-1],right:u,subject:h}),h.checks=r.checks,r.checks=[{type:20}],p.checks.push({type:20}),u.checks.push({type:17,parent:p,child:f}),fs(t,0,s),t.currentSubject=h,t.compoundCount++,f}var x={checks:[]},k={checks:[]},_=[{type:17,parent:x,child:k}];return x.checks=r.checks,r.checks=_,t.compoundCount++,k}},{name:"descendant",separator:!0,regex:Fi.descendant,populate:function(t,r){if(null==t.currentSubject){var a={checks:[]},i={checks:[]};return a.checks.push({type:16,ancestor:t[t.length-1],descendant:i}),fs(t,0,a),t.compoundCount++,i}if(t.currentSubject===r){var s={checks:[]},u={checks:[]},h={checks:[]},f={checks:[]},p={checks:[]};return s.checks.push({type:19,left:t[t.length-1],right:u,subject:h}),h.checks=r.checks,r.checks=[{type:20}],p.checks.push({type:20}),u.checks.push({type:18,ancestor:p,descendant:f}),fs(t,0,s),t.currentSubject=h,t.compoundCount++,f}var x={checks:[]},k={checks:[]},_=[{type:18,ancestor:x,descendant:k}];return x.checks=r.checks,r.checks=_,t.compoundCount++,k}},{name:"subject",modifier:!0,regex:Fi.subject,populate:function(t,r){if(null!=t.currentSubject&&t.currentSubject!==r)return _a("Redefinition of subject in selector `"+t.toString()+"`"),!1;t.currentSubject=r;var i=t[t.length-1].checks[0],n=null==i?null:i.type;11===n?i.type=13:10===n&&(i.type=14,i.node=i.nodes[1],i.neighbor=i.nodes[0],i.nodes=null)}}];Tc.forEach(function(e){return e.regexObj=new RegExp("^"+e.regex)});var wg=function(t){for(var r,a,i,n=0;n<Tc.length;n++){var s=Tc[n],o=s.name,u=t.match(s.regexObj);if(null!=u){a=u,r=s,i=o,t=t.substring(u[0].length);break}}return{expr:r,match:a,name:i,remaining:t}},Bg={parse:function(t){var r=this,a=r.inputText=t,i=r[0]={checks:[]};for(r.length=1,a=function(t){var r=t.match(/^\s+/);return r&&(t=t.substring(r[0].length)),t}(a);;){var n=wg(a);if(null==n.expr)return _a("The selector `"+t+"`is invalid"),!1;var s=n.match.slice(1),o=n.expr.populate(r,i,s);if(!1===o)return!1;if(null!=o&&(i=o),(a=n.remaining).match(/^\s*$/))break}var u=r[r.length-1];null!=r.currentSubject&&(u.subject=r.currentSubject),u.edgeCount=r.edgeCount,u.compoundCount=r.compoundCount;for(var h=0;h<r.length;h++){var f=r[h];if(f.compoundCount>0&&f.edgeCount>0)return _a("The selector `"+t+"` is invalid because it uses both a compound selector and an edge selector"),!1;if(f.edgeCount>1)return _a("The selector `"+t+"` is invalid because it uses multiple edge selectors"),!1;1===f.edgeCount&&_a("The selector `"+t+"` is deprecated.  Edge selectors do not take effect on changes to source and target nodes after an edge is added, for performance reasons.  Use a class or data selector on edges instead, updating the class or data of an edge when your app detects a change in source or target nodes.")}return!0},toString:function(){if(null!=this.toStringCache)return this.toStringCache;for(var t=function(f){return f??""},r=function(f){return je(f)?'"'+f+'"':t(f)},a=function(f){return" "+f+" "},n=function(f,p){return f.checks.reduce(function(x,k,_){return x+(p===f&&0===_?"$":"")+function(f,p){var k=f.value;switch(f.type){case 0:var _=t(k);return _.substring(0,_.length-1);case 3:return"["+f.field+a(t(f.operator))+r(k)+"]";case 5:var Y=f.field;return"["+t(f.operator)+Y+"]";case 4:return"["+f.field+"]";case 6:return"[["+f.field+a(t(f.operator))+r(k)+"]]";case 7:return k;case 8:return"#"+k;case 9:return"."+k;case 17:case 15:return n(f.parent,p)+a(">")+n(f.child,p);case 18:case 16:return n(f.ancestor,p)+" "+n(f.descendant,p);case 19:var se=n(f.left,p),Ht=n(f.subject,p),he=n(f.right,p);return se+(se.length>0?" ":"")+Ht+he;case 20:return""}}(k,p)},"")},s="",o=0;o<this.length;o++){var u=this[o];s+=n(u,u.subject),this.length>1&&o<this.length-1&&(s+=", ")}return this.toStringCache=s,s}},Ou=function(t,r,a){var i,u,h,n=je(t),s=X(t),o=je(a),f=!1,p=!1,x=!1;switch(r.indexOf("!")>=0&&(r=r.replace("!",""),p=!0),r.indexOf("@")>=0&&(r=r.replace("@",""),f=!0),(n||o||f)&&(u=n||s?""+t:"",h=""+a),f&&(t=u=u.toLowerCase(),a=h=h.toLowerCase()),r){case"*=":i=u.indexOf(h)>=0;break;case"$=":i=u.indexOf(h,u.length-h.length)>=0;break;case"^=":i=0===u.indexOf(h);break;case"=":i=t===a;break;case">":x=!0,i=t>a;break;case">=":x=!0,i=t>=a;break;case"<":x=!0,i=t<a;break;case"<=":x=!0,i=t<=a;break;default:i=!1}return p&&(null!=t||!x)&&(i=!i),i},Sc=function(t,r){return t.data(r)},sn=[],en=function(t,r){return t.checks.every(function(a){return sn[a.type](a,r)})};sn[0]=function(e,t){var r=e.value;return"*"===r||r===t.group()},sn[7]=function(e,t){return function(t,r){return kg[t](r)}(e.value,t)},sn[8]=function(e,t){var r=e.value;return t.id()===r},sn[9]=function(e,t){return t.hasClass(e.value)},sn[6]=function(e,t){var a=e.operator,i=e.value;return Ou(function(t,r){return t[r]()}(t,e.field),a,i)},sn[3]=function(e,t){var a=e.operator,i=e.value;return Ou(Sc(t,e.field),a,i)},sn[5]=function(e,t){var a=e.operator;return function(t,r){switch(r){case"?":return!!t;case"!":return!t;case"^":return void 0===t}}(Sc(t,e.field),a)},sn[4]=function(e,t){return function(t){return void 0!==t}(Sc(t,e.field))},sn[10]=function(e,t){var r=e.nodes[0],a=e.nodes[1],i=t.source(),n=t.target();return en(r,i)&&en(a,n)||en(a,i)&&en(r,n)},sn[14]=function(e,t){return en(e.node,t)&&t.neighborhood().some(function(r){return r.isNode()&&en(e.neighbor,r)})},sn[11]=function(e,t){return en(e.source,t.source())&&en(e.target,t.target())},sn[12]=function(e,t){return en(e.source,t)&&t.outgoers().some(function(r){return r.isNode()&&en(e.target,r)})},sn[13]=function(e,t){return en(e.target,t)&&t.incomers().some(function(r){return r.isNode()&&en(e.source,r)})},sn[15]=function(e,t){return en(e.child,t)&&en(e.parent,t.parent())},sn[17]=function(e,t){return en(e.parent,t)&&t.children().some(function(r){return en(e.child,r)})},sn[16]=function(e,t){return en(e.descendant,t)&&t.ancestors().some(function(r){return en(e.ancestor,r)})},sn[18]=function(e,t){return en(e.ancestor,t)&&t.descendants().some(function(r){return en(e.descendant,r)})},sn[19]=function(e,t){return en(e.subject,t)&&en(e.left,t)&&en(e.right,t)},sn[20]=function(){return!0},sn[1]=function(e,t){return e.value.has(t)},sn[2]=function(e,t){return(0,e.value)(t)};var Fg={matches:function(t){for(var a=0;a<this.length;a++)if(en(this[a],t))return!0;return!1},filter:function(t){var r=this;if(1===r.length&&1===r[0].checks.length&&8===r[0].checks[0].type)return t.getElementById(r[0].checks[0].value).collection();var a=function(n){for(var s=0;s<r.length;s++)if(en(r[s],n))return!0;return!1};return null==r.text()&&(a=function(){return!0}),t.filter(a)}},gs=function(t){this.inputText=t,this.currentSubject=null,this.compoundCount=0,this.edgeCount=0,this.length=0,null==t||je(t)&&t.match(/^\s*$/)||(re(t)?this.addQuery({checks:[{type:1,value:t.collection()}]}):z(t)?this.addQuery({checks:[{type:2,value:t}]}):je(t)?this.parse(t)||(this.invalid=!0):Ka("A selector must be created from a string; found "))},ps=gs.prototype;[Bg,Fg].forEach(function(e){return G(ps,e)}),ps.text=function(){return this.inputText},ps.size=function(){return this.length},ps.eq=function(e){return this[e]},ps.sameText=function(e){return!this.invalid&&!e.invalid&&this.text()===e.text()},ps.addQuery=function(e){this[this.length++]=e},ps.selector=ps.toString;var vs={allAre:function(t){var r=new gs(t);return this.every(function(a){return r.matches(a)})},is:function(t){var r=new gs(t);return this.some(function(a){return r.matches(a)})},some:function(t,r){for(var a=0;a<this.length;a++)if(r?t.apply(r,[this[a],a,this]):t(this[a],a,this))return!0;return!1},every:function(t,r){for(var a=0;a<this.length;a++)if(!(r?t.apply(r,[this[a],a,this]):t(this[a],a,this)))return!1;return!0},same:function(t){if(this===t)return!0;t=this.cy().collection(t);var r=this.length;return r===t.length&&(1===r?this[0]===t[0]:this.every(function(i){return t.hasElementWithId(i.id())}))},anySame:function(t){return t=this.cy().collection(t),this.some(function(r){return t.hasElementWithId(r.id())})},allAreNeighbors:function(t){t=this.cy().collection(t);var r=this.neighborhood();return t.every(function(a){return r.hasElementWithId(a.id())})},contains:function(t){t=this.cy().collection(t);var r=this;return t.every(function(a){return r.hasElementWithId(a.id())})}};vs.allAreNeighbours=vs.allAreNeighbors,vs.has=vs.contains,vs.equal=vs.equals=vs.same;var io,Ku,Hn=function(t,r){return function(i,n,s,o){var f,u=i,h=this;if(null==u?f="":re(u)&&1===u.length&&(f=u.id()),1===h.length&&f){var p=h[0]._private,x=p.traversalCache=p.traversalCache||{},k=x[r]=x[r]||[],_=da(f);return k[_]||(k[_]=t.call(h,i,n,s,o))}return t.call(h,i,n,s,o)}},zs={parent:function(t){var r=[];if(1===this.length){var a=this[0]._private.parent;if(a)return a}for(var i=0;i<this.length;i++){var s=this[i]._private.parent;s&&r.push(s)}return this.spawn(r,!0).filter(t)},parents:function(t){for(var r=[],a=this.parent();a.nonempty();){for(var i=0;i<a.length;i++)r.push(a[i]);a=a.parent()}return this.spawn(r,!0).filter(t)},commonAncestors:function(t){for(var r,a=0;a<this.length;a++){var n=this[a].parents();r=(r=r||n).intersect(n)}return r.filter(t)},orphans:function(t){return this.stdFilter(function(r){return r.isOrphan()}).filter(t)},nonorphans:function(t){return this.stdFilter(function(r){return r.isChild()}).filter(t)},children:Hn(function(e){for(var t=[],r=0;r<this.length;r++)for(var i=this[r]._private.children,n=0;n<i.length;n++)t.push(i[n]);return this.spawn(t,!0).filter(e)},"children"),siblings:function(t){return this.parent().children().not(this).filter(t)},isParent:function(){var t=this[0];if(t)return t.isNode()&&0!==t._private.children.length},isChildless:function(){var t=this[0];if(t)return t.isNode()&&0===t._private.children.length},isChild:function(){var t=this[0];if(t)return t.isNode()&&null!=t._private.parent},isOrphan:function(){var t=this[0];if(t)return t.isNode()&&null==t._private.parent},descendants:function(t){var r=[];return function a(i){for(var n=0;n<i.length;n++){var s=i[n];r.push(s),s.children().nonempty()&&a(s.children())}}(this.children()),this.spawn(r,!0).filter(t)}};function wc(e,t,r,a){for(var i=[],n=new Xr,o=e.cy().hasCompoundNodes(),u=0;u<e.length;u++){var h=e[u];r?i.push(h):o&&a(i,n,h)}for(;i.length>0;){var f=i.shift();t(f),n.add(f.id()),o&&a(i,n,f)}return e}function Fu(e,t,r){if(r.isParent())for(var a=r._private.children,i=0;i<a.length;i++){var n=a[i];t.has(n.id())||e.push(n)}}function Nu(e,t,r){if(r.isChild()){var a=r._private.parent;t.has(a.id())||e.push(a)}}function Ng(e,t,r){Nu(e,t,r),Fu(e,t,r)}zs.forEachDown=function(e){return wc(this,e,!(arguments.length>1&&void 0!==arguments[1])||arguments[1],Fu)},zs.forEachUp=function(e){return wc(this,e,!(arguments.length>1&&void 0!==arguments[1])||arguments[1],Nu)},zs.forEachUpAndDown=function(e){return wc(this,e,!(arguments.length>1&&void 0!==arguments[1])||arguments[1],Ng)},zs.ancestors=zs.parents,io=Ku={data:$i.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),removeData:$i.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),scratch:$i.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:$i.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),rscratch:$i.data({field:"rscratch",allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!0}),removeRscratch:$i.removeData({field:"rscratch",triggerEvent:!1}),id:function(){var t=this[0];if(t)return t._private.data.id}},io.attr=io.data,io.removeAttr=io.removeData;var Kg=Ku,Ko={};function Ac(e){return function(t){var r=this;if(void 0===t&&(t=!0),0===r.length);else if(r.isNode()&&!r.removed()){for(var a=0,i=r[0],n=i._private.edges,s=0;s<n.length;s++){var o=n[s];!t&&o.isLoop()||(a+=e(i,o))}return a}}}function Vs(e,t){return function(r){for(var a,i=this.nodes(),n=0;n<i.length;n++){var o=i[n][e](r);void 0!==o&&(void 0===a||t(o,a))&&(a=o)}return a}}G(Ko,{degree:Ac(function(e,t){return t.source().same(t.target())?2:1}),indegree:Ac(function(e,t){return t.target().same(e)?1:0}),outdegree:Ac(function(e,t){return t.source().same(e)?1:0})}),G(Ko,{minDegree:Vs("degree",function(e,t){return e<t}),maxDegree:Vs("degree",function(e,t){return e>t}),minIndegree:Vs("indegree",function(e,t){return e<t}),maxIndegree:Vs("indegree",function(e,t){return e>t}),minOutdegree:Vs("outdegree",function(e,t){return e<t}),maxOutdegree:Vs("outdegree",function(e,t){return e>t})}),G(Ko,{totalDegree:function(t){for(var r=0,a=this.nodes(),i=0;i<a.length;i++)r+=a[i].degree(t);return r}});var Zn,Wu,zu=function(t,r,a){for(var i=0;i<t.length;i++){var n=t[i];if(!n.locked()){var s=n._private.position,o={x:null!=r.x?r.x-s.x:0,y:null!=r.y?r.y-s.y:0};n.isParent()&&!(0===o.x&&0===o.y)&&n.children().shift(o,a),n.dirtyBoundingBoxCache()}}},Vu={field:"position",bindingEvent:"position",allowBinding:!0,allowSetting:!0,settingEvent:"position",settingTriggersEvent:!0,triggerFnName:"emitAndNotify",allowGetting:!0,validKeys:["x","y"],beforeGet:function(t){t.updateCompoundBounds()},beforeSet:function(t,r){zu(t,r,!1)},onSet:function(t){t.dirtyCompoundBoundsCache()},canSet:function(t){return!t.locked()}};Zn=Wu={position:$i.data(Vu),silentPosition:$i.data(G({},Vu,{allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!1,beforeSet:function(t,r){zu(t,r,!0)},onSet:function(t){t.dirtyCompoundBoundsCache()}})),positions:function(t,r){if(Bt(t))r?this.silentPosition(t):this.position(t);else if(z(t)){var a=t,i=this.cy();i.startBatch();for(var n=0;n<this.length;n++){var o,s=this[n];(o=a(s,n))&&(r?s.silentPosition(o):s.position(o))}i.endBatch()}return this},silentPositions:function(t){return this.positions(t,!0)},shift:function(t,r,a){var i;if(Bt(t)?(i={x:X(t.x)?t.x:0,y:X(t.y)?t.y:0},a=r):je(t)&&X(r)&&((i={x:0,y:0})[t]=r),null!=i){var n=this.cy();n.startBatch();for(var s=0;s<this.length;s++){var o=this[s];if(!(n.hasCompoundNodes()&&o.isChild()&&o.ancestors().anySame(this))){var u=o.position(),h={x:u.x+i.x,y:u.y+i.y};a?o.silentPosition(h):o.position(h)}}n.endBatch()}return this},silentShift:function(t,r){return Bt(t)?this.shift(t,!0):je(t)&&X(r)&&this.shift(t,r,!0),this},renderedPosition:function(t,r){var a=this[0],i=this.cy(),n=i.zoom(),s=i.pan(),o=Bt(t)?t:void 0,u=void 0!==o||void 0!==r&&je(t);if(a&&a.isNode()){if(!u){var p=a.position();return o=Bn(p,n,s),void 0===t?o:o[t]}for(var h=0;h<this.length;h++){var f=this[h];void 0!==r?f.position(t,(r-s[t])/n):void 0!==o&&f.position(Vn(o,n,s))}}else if(!u)return;return this},relativePosition:function(t,r){var a=this[0],i=this.cy(),n=Bt(t)?t:void 0,s=void 0!==n||void 0!==r&&je(t),o=i.hasCompoundNodes();if(a&&a.isNode()){if(!s){var _=a.position(),U=o?a.parent():null,O=U&&U.length>0;O&&(U=U[0]);var Y=O?U.position():{x:0,y:0};return n={x:_.x-Y.x,y:_.y-Y.y},void 0===t?n:n[t]}for(var u=0;u<this.length;u++){var h=this[u],f=o?h.parent():null,p=f&&f.length>0;p&&(f=f[0]);var k=p?f.position():{x:0,y:0};void 0!==r?h.position(t,r+k[t]):void 0!==n&&h.position({x:n.x+k.x,y:n.y+k.y})}}else if(!s)return;return this}},Zn.modelPosition=Zn.point=Zn.position,Zn.modelPositions=Zn.points=Zn.positions,Zn.renderedPoint=Zn.renderedPosition,Zn.relativePoint=Zn.relativePosition;var Us,ys,Wg=Wu;Us=ys={},ys.renderedBoundingBox=function(e){var t=this.boundingBox(e),r=this.cy(),a=r.zoom(),i=r.pan(),n=t.x1*a+i.x,s=t.x2*a+i.x,o=t.y1*a+i.y,u=t.y2*a+i.y;return{x1:n,x2:s,y1:o,y2:u,w:s-n,h:u-o}},ys.dirtyCompoundBoundsCache=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.cy();return t.styleEnabled()&&t.hasCompoundNodes()?(this.forEachUp(function(r){if(r.isParent()){var a=r._private;a.compoundBoundsClean=!1,a.bbCache=null,e||r.emitAndNotify("bounds")}}),this):this},ys.updateCompoundBounds=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.cy();if(!t.styleEnabled()||!t.hasCompoundNodes())return this;if(!e&&t.batching())return this;function r(s){if(s.isParent()){var o=s._private,u=s.children(),h="include"===s.pstyle("compound-sizing-wrt-labels").value,f={width:{val:s.pstyle("min-width").pfValue,left:s.pstyle("min-width-bias-left"),right:s.pstyle("min-width-bias-right")},height:{val:s.pstyle("min-height").pfValue,top:s.pstyle("min-height-bias-top"),bottom:s.pstyle("min-height-bias-bottom")}},p=u.boundingBox({includeLabels:h,includeOverlays:!1,useCache:!1}),x=o.position;(0===p.w||0===p.h)&&((p={w:s.pstyle("width").pfValue,h:s.pstyle("height").pfValue}).x1=x.x-p.w/2,p.x2=x.x+p.w/2,p.y1=x.y-p.h/2,p.y2=x.y+p.h/2);var U=f.width.left.value;"px"===f.width.left.units&&f.width.val>0&&(U=100*U/f.width.val);var O=f.width.right.value;"px"===f.width.right.units&&f.width.val>0&&(O=100*O/f.width.val);var K=f.height.top.value;"px"===f.height.top.units&&f.height.val>0&&(K=100*K/f.height.val);var Y=f.height.bottom.value;"px"===f.height.bottom.units&&f.height.val>0&&(Y=100*Y/f.height.val);var j=k(f.width.val-p.w,U,O),yt=j.biasDiff,ie=j.biasComplementDiff,se=k(f.height.val-p.h,K,Y),Ht=se.biasDiff,he=se.biasComplementDiff;o.autoPadding=function _(me,Te,Be,Me){if("%"!==Be.units)return"px"===Be.units?Be.pfValue:0;switch(Me){case"width":return me>0?Be.pfValue*me:0;case"height":return Te>0?Be.pfValue*Te:0;case"average":return me>0&&Te>0?Be.pfValue*(me+Te)/2:0;case"min":return me>0&&Te>0?me>Te?Be.pfValue*Te:Be.pfValue*me:0;case"max":return me>0&&Te>0?me>Te?Be.pfValue*me:Be.pfValue*Te:0;default:return 0}}(p.w,p.h,s.pstyle("padding"),s.pstyle("padding-relative-to").value),o.autoWidth=Math.max(p.w,f.width.val),x.x=(-yt+p.x1+p.x2+ie)/2,o.autoHeight=Math.max(p.h,f.height.val),x.y=(-Ht+p.y1+p.y2+he)/2}function k(me,Te,Be){var Me=0,Oe=0,tr=Te+Be;return me>0&&tr>0&&(Me=Te/tr*me,Oe=Be/tr*me),{biasDiff:Me,biasComplementDiff:Oe}}}for(var a=0;a<this.length;a++){var i=this[a],n=i._private;(!n.compoundBoundsClean||e)&&(r(i),t.batching()||(n.compoundBoundsClean=!0))}return this};var Gn=function(t){return t===1/0||t===-1/0?0:t},Qn=function(t,r,a,i,n){i-r===0||n-a===0||null==r||null==a||null==i||null==n||(t.x1=r<t.x1?r:t.x1,t.x2=i>t.x2?i:t.x2,t.y1=a<t.y1?a:t.y1,t.y2=n>t.y2?n:t.y2,t.w=t.x2-t.x1,t.h=t.y2-t.y1)},ms=function(t,r){return null==r?t:Qn(t,r.x1,r.y1,r.x2,r.y2)},no=function(t,r,a){return Jt(t,r,a)},Wo=function(t,r,a){if(!r.cy().headless()){var u,h,i=r._private,n=i.rstyle,s=n.arrowWidth/2;if("none"!==r.pstyle(a+"-arrow-shape").value){"source"===a?(u=n.srcX,h=n.srcY):"target"===a?(u=n.tgtX,h=n.tgtY):(u=n.midX,h=n.midY);var f=i.arrowBounds=i.arrowBounds||{},p=f[a]=f[a]||{};p.x1=u-s,p.y1=h-s,p.x2=u+s,p.y2=h+s,p.w=p.x2-p.x1,p.h=p.y2-p.y1,J(p,1),Qn(t,p.x1,p.y1,p.x2,p.y2)}}},Dc=function(t,r,a){if(!r.cy().headless()){var i,n=r._private,s=n.rstyle;if(r.pstyle((i=a?a+"-":"")+"label").strValue){var Be,Me,Oe,tr,u=r.pstyle("text-halign"),h=r.pstyle("text-valign"),f=no(s,"labelWidth",a),p=no(s,"labelHeight",a),x=no(s,"labelX",a),k=no(s,"labelY",a),_=r.pstyle(i+"text-margin-x").pfValue,U=r.pstyle(i+"text-margin-y").pfValue,O=r.isEdge(),K=r.pstyle(i+"text-rotation"),Y=r.pstyle("text-outline-width").pfValue,yt=r.pstyle("text-border-width").pfValue/2,ie=r.pstyle("text-background-padding").pfValue,Ht=p,he=f,me=he/2,Te=Ht/2;if(O)Be=x-me,Me=x+me,Oe=k-Te,tr=k+Te;else{switch(u.value){case"left":Be=x-he,Me=x;break;case"center":Be=x-me,Me=x+me;break;case"right":Be=x,Me=x+he}switch(h.value){case"top":Oe=k-Ht,tr=k;break;case"center":Oe=k-Te,tr=k+Te;break;case"bottom":Oe=k,tr=k+Ht}}var ur=_-Math.max(Y,yt)-ie-2,fr=_+Math.max(Y,yt)+ie+2,rr=U-Math.max(Y,yt)-ie-2,Cr=U+Math.max(Y,yt)+ie+2;Be+=ur,Me+=fr,Oe+=rr,tr+=Cr;var Ur=a||"main",qr=n.labelBounds,Dr=qr[Ur]=qr[Ur]||{};Dr.x1=Be,Dr.y1=Oe,Dr.x2=Me,Dr.y2=tr,Dr.w=Me-Be,Dr.h=tr-Oe,Dr.leftPad=ur,Dr.rightPad=fr,Dr.topPad=rr,Dr.botPad=Cr;var Wr=O&&"autorotate"===K.strValue;if(Wr||null!=K.pfValue&&0!==K.pfValue){var Ea=Wr?no(n.rstyle,"labelAngle",a):K.pfValue,pa=Math.cos(Ea),Aa=Math.sin(Ea),Ra=(Be+Me)/2,Za=(Oe+tr)/2;if(!O){switch(u.value){case"left":Ra=Me;break;case"right":Ra=Be}switch(h.value){case"top":Za=tr;break;case"bottom":Za=Oe}}var Ta=function(Ci,xi){return{x:(Ci-=Ra)*pa-(xi-=Za)*Aa+Ra,y:Ci*Aa+xi*pa+Za}},Kr=Ta(Be,Oe),$r=Ta(Be,tr),Zr=Ta(Me,Oe),ma=Ta(Me,tr);Be=Math.min(Kr.x,$r.x,Zr.x,ma.x),Me=Math.max(Kr.x,$r.x,Zr.x,ma.x),Oe=Math.min(Kr.y,$r.y,Zr.y,ma.y),tr=Math.max(Kr.y,$r.y,Zr.y,ma.y)}var Ga=Ur+"Rot",li=qr[Ga]=qr[Ga]||{};li.x1=Be,li.y1=Oe,li.x2=Me,li.y2=tr,li.w=Me-Be,li.h=tr-Oe,Qn(t,Be,Oe,Me,tr),Qn(n.labelBounds.all,Be,Oe,Me,tr)}return t}},Uu=function(t,r){if(!r.cy().headless()){var a=r.pstyle("outline-opacity").value,s=r.pstyle("outline-width").value+r.pstyle("outline-offset").value;$u(t,r,a,s,"outside",s/2)}},$u=function(t,r,a,i,n,s){if(!(0===a||i<=0||"inside"===n)){var o=r.cy(),u=r.pstyle("shape").value,h=o.renderer().nodeShapes[u],f=r.position(),p=f.x,x=f.y,k=r.width(),_=r.height();if(h.hasMiterBounds){"center"===n&&(i/=2);var U=h.miterBounds(p,x,k,_,i);ms(t,U)}else null!=s&&s>0&&Z(t,[s,s,s,s])}},Yu=function(t){var r=0,a=function(s){return(s?1:0)<<r++},i=0;return i+=a(t.incudeNodes),i+=a(t.includeEdges),i+=a(t.includeLabels),i+=a(t.includeMainLabels),i+=a(t.includeSourceLabels),i+=a(t.includeTargetLabels),(i+=a(t.includeOverlays))+a(t.includeOutlines)},Hu=function(t){var r=function(o){return Math.round(o)};if(t.isEdge()){var a=t.source().position(),i=t.target().position();return yr([r(a.x),r(a.y),r(i.x),r(i.y)])}var n=t.position();return yr([r(n.x),r(n.y)])},Gu=function(t,r){var i,a=t._private,n=t.isEdge(),o=(null==r?qu:Yu(r))===qu;if(null==a.bbCache?(i=function(t,r){var f,p,x,k,_,U,a=t._private.cy,i=a.styleEnabled(),n=a.headless(),s=kt(),o=t._private,u=t.isNode(),h=t.isEdge(),O=o.rstyle,K=u&&i?t.pstyle("bounds-expansion").pfValue:[0],Y=function(Ii){return"none"!==Ii.pstyle("display").value},j=!i||Y(t)&&(!h||Y(t.source())&&Y(t.target()));if(j){var ie=0;i&&r.includeOverlays&&0!==t.pstyle("overlay-opacity").value&&(ie=t.pstyle("overlay-padding").value);var Ht=0;i&&r.includeUnderlays&&0!==t.pstyle("underlay-opacity").value&&(Ht=t.pstyle("underlay-padding").value);var he=Math.max(ie,Ht),Te=0;if(i&&(Te=t.pstyle("width").pfValue/2),u&&r.includeNodes){var Be=t.position();_=Be.x,U=Be.y;var Oe=t.outerWidth()/2,ur=t.outerHeight()/2;Qn(s,f=_-Oe,x=U-ur,p=_+Oe,k=U+ur),i&&Uu(s,t),i&&r.includeOutlines&&!n&&Uu(s,t),i&&function(t,r){if(!r.cy().headless()){var a=r.pstyle("border-opacity").value,i=r.pstyle("border-width").pfValue,n=r.pstyle("border-position").value;$u(t,r,a,i,n)}}(s,t)}else if(h&&r.includeEdges)if(i&&!n){var fr=t.pstyle("curve-style").strValue;if(f=Math.min(O.srcX,O.midX,O.tgtX),p=Math.max(O.srcX,O.midX,O.tgtX),x=Math.min(O.srcY,O.midY,O.tgtY),k=Math.max(O.srcY,O.midY,O.tgtY),Qn(s,f-=Te,x-=Te,p+=Te,k+=Te),"haystack"===fr){var rr=O.haystackPts;if(rr&&2===rr.length){if((f=rr[0].x)>(p=rr[1].x)){var Cr=f;f=p,p=Cr}if((x=rr[0].y)>(k=rr[1].y)){var Ur=x;x=k,k=Ur}Qn(s,f-Te,x-Te,p+Te,k+Te)}}else if("bezier"===fr||"unbundled-bezier"===fr||Tt(fr,"segments")||Tt(fr,"taxi")){var qr;switch(fr){case"bezier":case"unbundled-bezier":qr=O.bezierPts;break;case"segments":case"taxi":case"round-segments":case"round-taxi":qr=O.linePts}if(null!=qr)for(var Dr=0;Dr<qr.length;Dr++){var Wr=qr[Dr];Qn(s,f=Wr.x-Te,x=Wr.y-Te,p=Wr.x+Te,k=Wr.y+Te)}}}else{var Ea=t.source().position(),Aa=t.target().position();if((f=Ea.x)>(p=Aa.x)){var Ra=f;f=p,p=Ra}if((x=Ea.y)>(k=Aa.y)){var Za=x;x=k,k=Za}Qn(s,f-=Te,x-=Te,p+=Te,k+=Te)}if(i&&r.includeEdges&&h&&(Wo(s,t,"mid-source"),Wo(s,t,"mid-target"),Wo(s,t,"source"),Wo(s,t,"target")),i&&"yes"===t.pstyle("ghost").value){var Kr=t.pstyle("ghost-offset-x").pfValue,$r=t.pstyle("ghost-offset-y").pfValue;Qn(s,s.x1+Kr,s.y1+$r,s.x2+Kr,s.y2+$r)}var Zr=o.bodyBounds=o.bodyBounds||{};Ot(Zr,s),Z(Zr,K),J(Zr,1),i&&Qn(s,(f=s.x1)-he,(x=s.y1)-he,(p=s.x2)+he,(k=s.y2)+he);var ma=o.overlayBounds=o.overlayBounds||{};Ot(ma,s),Z(ma,K),J(ma,1);var Ga=o.labelBounds=o.labelBounds||{};null!=Ga.all?function(t){t.x1=1/0,t.y1=1/0,t.x2=-1/0,t.y2=-1/0,t.w=0,t.h=0}(Ga.all):Ga.all=kt(),i&&r.includeLabels&&(r.includeMainLabels&&Dc(s,t,null),h&&(r.includeSourceLabels&&Dc(s,t,"source"),r.includeTargetLabels&&Dc(s,t,"target")))}return s.x1=Gn(s.x1),s.y1=Gn(s.y1),s.x2=Gn(s.x2),s.y2=Gn(s.y2),s.w=Gn(s.x2-s.x1),s.h=Gn(s.y2-s.y1),s.w>0&&s.h>0&&j&&(Z(s,K),J(s,1)),s}(t,so),a.bbCache=i,a.bbCachePosKey=Hu(t)):i=a.bbCache,!o){var u=t.isNode();i=kt(),(r.includeNodes&&u||r.includeEdges&&!u)&&ms(i,r.includeOverlays?a.overlayBounds:a.bodyBounds),r.includeLabels&&(r.includeMainLabels&&(!n||r.includeSourceLabels&&r.includeTargetLabels)?ms(i,a.labelBounds.all):(r.includeMainLabels&&ms(i,a.labelBounds.mainRot),r.includeSourceLabels&&ms(i,a.labelBounds.sourceRot),r.includeTargetLabels&&ms(i,a.labelBounds.targetRot))),i.w=i.x2-i.x1,i.h=i.y2-i.y1}return i},so={includeNodes:!0,includeEdges:!0,includeLabels:!0,includeMainLabels:!0,includeSourceLabels:!0,includeTargetLabels:!0,includeOverlays:!0,includeUnderlays:!0,includeOutlines:!0,useCache:!0},qu=Yu(so),ju=Fe(so);ys.boundingBox=function(e){var t,r=void 0===e||void 0===e.useCache||!0===e.useCache,a=Pe(function(f){var p=f._private;return null==p.bbCache||p.styleDirty||p.bbCachePosKey!==Hu(f)},function(f){return f.id()});if(r&&1===this.length&&!a(this[0]))e=void 0===e?so:ju(e),t=Gu(this[0],e);else{t=kt();var i=ju(e=e||so),n=this,o=n.cy().styleEnabled();this.edges().forEach(a),this.nodes().forEach(a),o&&this.recalculateRenderedStyle(r),this.updateCompoundBounds(!r);for(var u=0;u<n.length;u++){var h=n[u];a(h)&&h.dirtyBoundingBoxCache(),ms(t,Gu(h,i))}}return t.x1=Gn(t.x1),t.y1=Gn(t.y1),t.x2=Gn(t.x2),t.y2=Gn(t.y2),t.w=Gn(t.x2-t.x1),t.h=Gn(t.y2-t.y1),t},ys.dirtyBoundingBoxCache=function(){for(var e=0;e<this.length;e++){var t=this[e]._private;t.bbCache=null,t.bbCachePosKey=null,t.bodyBounds=null,t.overlayBounds=null,t.labelBounds.all=null,t.labelBounds.source=null,t.labelBounds.target=null,t.labelBounds.main=null,t.labelBounds.sourceRot=null,t.labelBounds.targetRot=null,t.labelBounds.mainRot=null,t.arrowBounds.source=null,t.arrowBounds.target=null,t.arrowBounds["mid-source"]=null,t.arrowBounds["mid-target"]=null}return this.emitAndNotify("bounds"),this},ys.boundingBoxAt=function(e){var t=this.nodes(),r=this.cy(),a=r.hasCompoundNodes(),i=r.collection();if(a&&(i=t.filter(function(h){return h.isParent()}),t=t.not(i)),Bt(e)){var n=e;e=function(){return n}}r.startBatch(),t.forEach(function(f,p){return f._private.bbAtOldPos=e(f,p)}).silentPositions(e),a&&(i.dirtyCompoundBoundsCache(),i.dirtyBoundingBoxCache(),i.updateCompoundBounds(!0));var u=function(t){return{x1:t.x1,x2:t.x2,w:t.w,y1:t.y1,y2:t.y2,h:t.h}}(this.boundingBox({useCache:!1}));return t.silentPositions(function(f){return f._private.bbAtOldPos}),a&&(i.dirtyCompoundBoundsCache(),i.dirtyBoundingBoxCache(),i.updateCompoundBounds(!0)),r.endBatch(),u},Us.boundingbox=Us.bb=Us.boundingBox,Us.renderedBoundingbox=Us.renderedBoundingBox;var oo,lo,Ug=ys;oo=lo={};var Xu=function(t){t.uppercaseName=Et(t.name),t.autoName="auto"+t.uppercaseName,t.labelName="label"+t.uppercaseName,t.outerName="outer"+t.uppercaseName,t.uppercaseOuterName=Et(t.outerName),oo[t.name]=function(){var a=this[0],i=a._private;if(a){if(i.cy._private.styleEnabled){if(a.isParent())return a.updateCompoundBounds(),i[t.autoName]||0;var o=a.pstyle(t.name);return"label"===o.strValue?(a.recalculateRenderedStyle(),i.rstyle[t.labelName]||0):o.pfValue}return 1}},oo["outer"+t.uppercaseName]=function(){var a=this[0];if(a){if(a._private.cy._private.styleEnabled){var o=a[t.name](),u=a.pstyle("border-position").value;return o+("center"===u?a.pstyle("border-width").pfValue:"outside"===u?2*a.pstyle("border-width").pfValue:0)+2*a.padding()}return 1}},oo["rendered"+t.uppercaseName]=function(){var a=this[0];if(a)return a[t.name]()*this.cy().zoom()},oo["rendered"+t.uppercaseOuterName]=function(){var a=this[0];if(a)return a[t.outerName]()*this.cy().zoom()}};Xu({name:"width"}),Xu({name:"height"}),lo.padding=function(){var e=this[0],t=e._private;return e.isParent()?(e.updateCompoundBounds(),void 0!==t.autoPadding?t.autoPadding:e.pstyle("padding").pfValue):e.pstyle("padding").pfValue},lo.paddedHeight=function(){var e=this[0];return e.height()+2*e.padding()},lo.paddedWidth=function(){var e=this[0];return e.width()+2*e.padding()};var $g=lo,Zu={controlPoints:{get:function(t){return t.renderer().getControlPoints(t)},mult:!0},segmentPoints:{get:function(t){return t.renderer().getSegmentPoints(t)},mult:!0},sourceEndpoint:{get:function(t){return t.renderer().getSourceEndpoint(t)}},targetEndpoint:{get:function(t){return t.renderer().getTargetEndpoint(t)}},midpoint:{get:function(t){return t.renderer().getEdgeMidpoint(t)}}},t1=Object.keys(Zu).reduce(function(e,t){var r=Zu[t],a=function(t){return"rendered"+t[0].toUpperCase()+t.substr(1)}(t);return e[t]=function(){return function(t,r){if(t.isEdge()&&t.takesUpSpace())return r(t)}(this,r.get)},e[a]=r.mult?function(){return function(t,r){if(t.isEdge()&&t.takesUpSpace()){var a=t.cy(),i=a.pan(),n=a.zoom();return r(t).map(function(s){return Bn(s,n,i)})}}(this,r.get)}:function(){return function(t,r){if(t.isEdge()&&t.takesUpSpace()){var a=t.cy();return Bn(r(t),a.zoom(),a.pan())}}(this,r.get)},e},{}),e1=G({},Wg,Ug,$g,t1),Qu=function(t,r){this.recycle(t,r)};
/*!
      Event object based on jQuery events, MIT license
      
      https://jquery.org/license/
      https://tldrlegal.com/license/mit-license
      https://github.com/jquery/jquery/blob/master/src/event.js
      */function co(){return!1}function zo(){return!0}Qu.prototype={instanceString:function(){return"event"},recycle:function(t,r){if(this.isImmediatePropagationStopped=this.isPropagationStopped=this.isDefaultPrevented=co,null!=t&&t.preventDefault?(this.type=t.type,this.isDefaultPrevented=t.defaultPrevented?zo:co):null!=t&&t.type?r=t:this.type=t,null!=r&&(this.originalEvent=r.originalEvent,this.type=null!=r.type?r.type:this.type,this.cy=r.cy,this.target=r.target,this.position=r.position,this.renderedPosition=r.renderedPosition,this.namespace=r.namespace,this.layout=r.layout),null!=this.cy&&null!=this.position&&null==this.renderedPosition){var a=this.position,i=this.cy.zoom(),n=this.cy.pan();this.renderedPosition={x:a.x*i+n.x,y:a.y*i+n.y}}this.timeStamp=t&&t.timeStamp||Date.now()},preventDefault:function(){this.isDefaultPrevented=zo;var t=this.originalEvent;t&&t.preventDefault&&t.preventDefault()},stopPropagation:function(){this.isPropagationStopped=zo;var t=this.originalEvent;t&&t.stopPropagation&&t.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=zo,this.stopPropagation()},isDefaultPrevented:co,isPropagationStopped:co,isImmediatePropagationStopped:co};var Ju=/^([^.]+)(\.(?:[^.]+))?$/,td={qualifierCompare:function(t,r){return t===r},eventMatches:function(){return!0},addEventFields:function(){},callbackContext:function(t){return t},beforeEmit:function(){},afterEmit:function(){},bubble:function(){return!1},parent:function(){return null},context:null},ed=Object.keys(td),a1={};function Vo(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a1,t=arguments.length>1?arguments[1]:void 0,r=0;r<ed.length;r++){var a=ed[r];this[a]=e[a]||td[a]}this.context=t||this.context,this.listeners=[],this.emitting=0}var xs=Vo.prototype,rd=function(t,r,a,i,n,s,o){z(i)&&(n=i,i=null),o&&(s=null==s?o:G({},s,o));for(var u=ft(a)?a:a.split(/\s+/),h=0;h<u.length;h++){var f=u[h];if(!Nt(f)){var p=f.match(Ju);if(p&&!1===r(t,f,p[1],p[2]?p[2]:null,i,n,s))break}}},ad=function(t,r){return t.addEventFields(t.context,r),new Qu(r.type,r)};xs.on=xs.addListener=function(e,t,r,a,i){return rd(this,function(n,s,o,u,h,f,p){z(f)&&n.listeners.push({event:s,callback:f,type:o,namespace:u,qualifier:h,conf:p})},e,t,r,a,i),this},xs.one=function(e,t,r,a){return this.on(e,t,r,a,{one:!0})},xs.removeListener=xs.off=function(e,t,r,a){var i=this;0!==this.emitting&&(this.listeners=function(t){return t.slice()}(this.listeners));for(var n=this.listeners,s=function(h){var f=n[h];rd(i,function(p,x,k,_,U,O){if((f.type===k||"*"===e)&&(!_&&".*"!==f.namespace||f.namespace===_)&&(!U||p.qualifierCompare(f.qualifier,U))&&(!O||f.callback===O))return n.splice(h,1),!1},e,t,r,a)},o=n.length-1;o>=0;o--)s(o);return this},xs.removeAllListeners=function(){return this.removeListener("*")},xs.emit=xs.trigger=function(e,t,r){var a=this.listeners,i=a.length;return this.emitting++,ft(t)||(t=[t]),function(t,r,a){if(function(t){return"event"===Or(t)}(a))r(t,a);else if(Bt(a))r(t,ad(t,a));else for(var i=ft(a)?a:a.split(/\s+/),n=0;n<i.length;n++){var s=i[n];if(!Nt(s)){var o=s.match(Ju);o&&r(t,ad(t,{type:o[1],namespace:o[2]?o[2]:null,target:t.context}))}}}(this,function(n,s){null!=r&&(i=(a=[{event:s.event,type:s.type,namespace:s.namespace,callback:r}]).length);for(var o=function(){var f=a[u];if(f.type===s.type&&(!f.namespace||f.namespace===s.namespace||".*"===f.namespace)&&n.eventMatches(n.context,f,s)){var p=[s];null!=t&&function(t,r){for(var a=0;a<r.length;a++)t.push(r[a])}(p,t),n.beforeEmit(n.context,f,s),f.conf&&f.conf.one&&(n.listeners=n.listeners.filter(function(_){return _!==f}));var x=n.callbackContext(n.context,f,s),k=f.callback.apply(x,p);n.afterEmit(n.context,f,s),!1===k&&(s.stopPropagation(),s.preventDefault())}},u=0;u<i;u++)o();n.bubble(n.context)&&!s.isPropagationStopped()&&n.parent(n.context).emit(s,t)},e),this.emitting--,this};var n1={qualifierCompare:function(t,r){return null==t||null==r?null==t&&null==r:t.sameText(r)},eventMatches:function(t,r,a){var i=r.qualifier;return null==i||t!==a.target&&It(a.target)&&i.matches(a.target)},addEventFields:function(t,r){r.cy=t.cy(),r.target=t},callbackContext:function(t,r,a){return null!=r.qualifier?a.target:t},beforeEmit:function(t,r){r.conf&&r.conf.once&&r.conf.onceCollection.removeListener(r.event,r.qualifier,r.callback)},bubble:function(){return!0},parent:function(t){return t.isChild()?t.parent():t.cy()}},Uo=function(t){return je(t)?new gs(t):t},id={createEmitter:function(){for(var t=0;t<this.length;t++){var r=this[t],a=r._private;a.emitter||(a.emitter=new Vo(n1,r))}return this},emitter:function(){return this._private.emitter},on:function(t,r,a){for(var i=Uo(r),n=0;n<this.length;n++)this[n].emitter().on(t,i,a);return this},removeListener:function(t,r,a){for(var i=Uo(r),n=0;n<this.length;n++)this[n].emitter().removeListener(t,i,a);return this},removeAllListeners:function(){for(var t=0;t<this.length;t++)this[t].emitter().removeAllListeners();return this},one:function(t,r,a){for(var i=Uo(r),n=0;n<this.length;n++)this[n].emitter().one(t,i,a);return this},once:function(t,r,a){for(var i=Uo(r),n=0;n<this.length;n++)this[n].emitter().on(t,i,a,{once:!0,onceCollection:this})},emit:function(t,r){for(var a=0;a<this.length;a++)this[a].emitter().emit(t,r);return this},emitAndNotify:function(t,r){if(0!==this.length)return this.cy().notify(t,this),this.emit(t,r),this}};$i.eventAliasesOn(id);var nd={nodes:function(t){return this.filter(function(r){return r.isNode()}).filter(t)},edges:function(t){return this.filter(function(r){return r.isEdge()}).filter(t)},byGroup:function(){for(var t=this.spawn(),r=this.spawn(),a=0;a<this.length;a++){var i=this[a];i.isNode()?t.push(i):r.push(i)}return{nodes:t,edges:r}},filter:function(t,r){if(void 0===t)return this;if(je(t)||re(t))return new gs(t).filter(this);if(z(t)){for(var a=this.spawn(),i=this,n=0;n<i.length;n++){var s=i[n];(r?t.apply(r,[s,n,i]):t(s,n,i))&&a.push(s)}return a}return this.spawn()},not:function(t){if(t){je(t)&&(t=this.filter(t));for(var r=this.spawn(),a=0;a<this.length;a++){var i=this[a];t.has(i)||r.push(i)}return r}return this},absoluteComplement:function(){return this.cy().mutableElements().not(this)},intersect:function(t){if(je(t))return this.filter(t);for(var a=this.spawn(),s=this.length<t.length,o=s?this:t,u=s?t:this,h=0;h<o.length;h++){var f=o[h];u.has(f)&&a.push(f)}return a},xor:function(t){var r=this._private.cy;je(t)&&(t=r.$(t));var a=this.spawn(),n=t,s=function(u,h){for(var f=0;f<u.length;f++){var p=u[f];h.hasElementWithId(p._private.data.id)||a.push(p)}};return s(this,n),s(n,this),a},diff:function(t){var r=this._private.cy;je(t)&&(t=r.$(t));var a=this.spawn(),i=this.spawn(),n=this.spawn(),o=t,u=function(f,p,x){for(var k=0;k<f.length;k++){var _=f[k];p.hasElementWithId(_._private.data.id)?n.merge(_):x.push(_)}};return u(this,o,a),u(o,this,i),{left:a,right:i,both:n}},add:function(t){var r=this._private.cy;if(!t)return this;if(je(t)){var a=t;t=r.mutableElements().filter(a)}for(var i=this.spawnSelf(),n=0;n<t.length;n++){var s=t[n];!this.has(s)&&i.push(s)}return i},merge:function(t){var r=this._private,a=r.cy;if(!t)return this;if(t&&je(t)){var i=t;t=a.mutableElements().filter(i)}for(var n=r.map,s=0;s<t.length;s++){var o=t[s],u=o._private.data.id;if(!n.has(u)){var f=this.length++;this[f]=o,n.set(u,{ele:o,index:f})}}return this},unmergeAt:function(t){var a=this[t].id(),n=this._private.map;if(this[t]=void 0,n.delete(a),this.length>1&&t!==this.length-1){var o=this.length-1,u=this[o],h=u._private.data.id;this[o]=void 0,this[t]=u,n.set(h,{ele:u,index:t})}return this.length--,this},unmergeOne:function(t){var n=this._private.map.get((t=t[0])._private.data.id);return n?(this.unmergeAt(n.index),this):this},unmerge:function(t){var r=this._private.cy;if(!t)return this;if(t&&je(t)){var a=t;t=r.mutableElements().filter(a)}for(var i=0;i<t.length;i++)this.unmergeOne(t[i]);return this},unmergeBy:function(t){for(var r=this.length-1;r>=0;r--)t(this[r])&&this.unmergeAt(r);return this},map:function(t,r){for(var a=[],i=this,n=0;n<i.length;n++){var s=i[n],o=r?t.apply(r,[s,n,i]):t(s,n,i);a.push(o)}return a},reduce:function(t,r){for(var a=r,i=this,n=0;n<i.length;n++)a=t(a,i[n],n,i);return a},max:function(t,r){for(var i,a=-1/0,n=this,s=0;s<n.length;s++){var o=n[s],u=r?t.apply(r,[o,s,n]):t(o,s,n);u>a&&(a=u,i=o)}return{value:a,ele:i}},min:function(t,r){for(var i,a=1/0,n=this,s=0;s<n.length;s++){var o=n[s],u=r?t.apply(r,[o,s,n]):t(o,s,n);u<a&&(a=u,i=o)}return{value:a,ele:i}}},Ki=nd;Ki.u=Ki["|"]=Ki["+"]=Ki.union=Ki.or=Ki.add,Ki["\\"]=Ki["!"]=Ki["-"]=Ki.difference=Ki.relativeComplement=Ki.subtract=Ki.not,Ki.n=Ki["&"]=Ki["."]=Ki.and=Ki.intersection=Ki.intersect,Ki["^"]=Ki["(+)"]=Ki["(-)"]=Ki.symmetricDifference=Ki.symdiff=Ki.xor,Ki.fnFilter=Ki.filterFn=Ki.stdFilter=Ki.filter,Ki.complement=Ki.abscomp=Ki.absoluteComplement;var t,sd=function(t,r){var i=t.cy().hasCompoundNodes();function n(f){var p=f.pstyle("z-compound-depth");return"auto"===p.value?i?f.zDepth():0:"bottom"===p.value?-1:"top"===p.value?Va:0}var s=n(t)-n(r);if(0!==s)return s;function o(f){return"auto"===f.pstyle("z-index-compare").value&&f.isNode()?1:0}var u=o(t)-o(r);if(0!==u)return u;var h=t.pstyle("z-index").value-r.pstyle("z-index").value;return 0!==h?h:t.poolIndex()-r.poolIndex()},$o={forEach:function(t,r){if(z(t))for(var a=this.length,i=0;i<a;i++){var n=this[i];if(!1===(r?t.apply(r,[n,i,this]):t(n,i,this)))break}return this},toArray:function(){for(var t=[],r=0;r<this.length;r++)t.push(this[r]);return t},slice:function(t,r){var a=[],i=this.length;null==r&&(r=i),null==t&&(t=0),t<0&&(t=i+t),r<0&&(r=i+r);for(var n=t;n>=0&&n<r&&n<i;n++)a.push(this[n]);return this.spawn(a)},size:function(){return this.length},eq:function(t){return this[t]||this.spawn()},first:function(){return this[0]||this.spawn()},last:function(){return this[this.length-1]||this.spawn()},empty:function(){return 0===this.length},nonempty:function(){return!this.empty()},sort:function(t){if(!z(t))return this;var r=this.toArray().sort(t);return this.spawn(r)},sortByZIndex:function(){return this.sort(sd)},zDepth:function(){var t=this[0];if(t){var r=t._private;if("nodes"===r.group){var i=r.data.parent?t.parents().size():0;return t.isParent()?i:Va-1}var s=r.target,o=r.source.zDepth(),u=s.zDepth();return Math.max(o,u,0)}}};$o.each=$o.forEach,t="undefined",(typeof Symbol>"u"?"undefined":cr(Symbol))!=t&&cr(Symbol.iterator)!=t&&($o[Symbol.iterator]=function(){var a=this,i={value:void 0,done:!1},n=0,s=this.length;return A({next:function(){return n<s?i.value=a[n++]:(i.value=void 0,i.done=!0),i}},Symbol.iterator,function(){return this})});var l1=Fe({nodeDimensionsIncludeLabels:!1}),Yo={layoutDimensions:function(t){var r;if(t=l1(t),this.takesUpSpace())if(t.nodeDimensionsIncludeLabels){var a=this.boundingBox();r={w:a.w,h:a.h}}else r={w:this.outerWidth(),h:this.outerHeight()};else r={w:0,h:0};return(0===r.w||0===r.h)&&(r.w=r.h=1),r},layoutPositions:function(t,r,a){var i=this.nodes().filter(function(ie){return!ie.isParent()}),n=this.cy(),s=r.eles,o=function(se){return se.id()},u=Pe(a,o);t.emit({type:"layoutstart",layout:t}),t.animations=[];var f=r.spacingFactor&&1!==r.spacingFactor,x=function(){if(!f)return null;for(var se=kt(),Ht=0;Ht<i.length;Ht++){var me=u(i[Ht],Ht);Dt(se,me.x,me.y)}return se}(),k=Pe(function(ie,se){var Ht=u(ie,se);return f&&(Ht=function(se,Ht,he){var me_x=Ht.x1+Ht.w/2,me_y=Ht.y1+Ht.h/2;return{x:me_x+(he.x-me_x)*se,y:me_y+(he.y-me_y)*se}}(Math.abs(r.spacingFactor),x,Ht)),null!=r.transform&&(Ht=r.transform(ie,Ht)),Ht},o);if(r.animate){for(var _=0;_<i.length;_++){var U=i[_],O=k(U,_);if(null==r.animateFilter||r.animateFilter(U,_)){var Y=U.animation({position:O,duration:r.animationDuration,easing:r.animationEasing});t.animations.push(Y)}else U.position(O)}if(r.fit){var j=n.animation({fit:{boundingBox:s.boundingBoxAt(k),padding:r.padding},duration:r.animationDuration,easing:r.animationEasing});t.animations.push(j)}else if(void 0!==r.zoom&&void 0!==r.pan){var yt=n.animation({zoom:r.zoom,pan:r.pan,duration:r.animationDuration,easing:r.animationEasing});t.animations.push(yt)}t.animations.forEach(function(ie){return ie.play()}),t.one("layoutready",r.ready),t.emit({type:"layoutready",layout:t}),Ks.all(t.animations.map(function(ie){return ie.promise()})).then(function(){t.one("layoutstop",r.stop),t.emit({type:"layoutstop",layout:t})})}else i.positions(k),r.fit&&n.fit(r.eles,r.padding),null!=r.zoom&&n.zoom(r.zoom),r.pan&&n.pan(r.pan),t.one("layoutready",r.ready),t.emit({type:"layoutready",layout:t}),t.one("layoutstop",r.stop),t.emit({type:"layoutstop",layout:t});return this},layout:function(t){return this.cy().makeLayout(G({},t,{eles:this}))}};function od(e,t,r){var n,a=r._private,i=a.styleCache=a.styleCache||[];return null!=(n=i[e])||(n=i[e]=t(r)),n}function Ho(e,t){return e=da(e),function(a){return od(e,t,a)}}function Go(e,t){e=da(e);var r=function(i){return t.call(i)};return function(){var i=this[0];if(i)return od(e,r,i)}}Yo.createLayout=Yo.makeLayout=Yo.layout;var Sn={recalculateRenderedStyle:function(t){var r=this.cy(),a=r.renderer(),i=r.styleEnabled();return a&&i&&a.recalculateRenderedStyle(this,t),this},dirtyStyleCache:function(){var a,t=this.cy(),r=function(n){return n._private.styleCache=null};return t.hasCompoundNodes()?((a=this.spawnSelf().merge(this.descendants()).merge(this.parents())).merge(a.connectedEdges()),a.forEach(r)):this.forEach(function(i){r(i),i.connectedEdges().forEach(r)}),this},updateStyle:function(t){var r=this._private.cy;if(!r.styleEnabled())return this;if(r.batching())return r._private.batchStyleEles.merge(this),this;var n=this;t=!(!t&&void 0!==t),r.hasCompoundNodes()&&(n=this.spawnSelf().merge(this.descendants()).merge(this.parents()));var s=n;return t?s.emitAndNotify("style"):s.emit("style"),n.forEach(function(o){return o._private.styleDirty=!0}),this},cleanStyle:function(){var t=this.cy();if(t.styleEnabled())for(var r=0;r<this.length;r++){var a=this[r];a._private.styleDirty&&(a._private.styleDirty=!1,t.style().apply(a))}},parsedStyle:function(t){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=this[0],i=a.cy();if(i.styleEnabled()&&a)return a._private.styleDirty&&(a._private.styleDirty=!1,i.style().apply(a)),a._private.style[t]??(r?i.style().getDefaultProperty(t):null)},numericStyle:function(t){var r=this[0];if(r.cy().styleEnabled()&&r){var a=r.pstyle(t);return void 0!==a.pfValue?a.pfValue:a.value}},numericStyleUnits:function(t){var r=this[0];if(r.cy().styleEnabled()&&r)return r.pstyle(t).units},renderedStyle:function(t){var r=this.cy();if(!r.styleEnabled())return this;var a=this[0];return a?r.style().getRenderedStyle(a,t):void 0},style:function(t,r){var a=this.cy();if(!a.styleEnabled())return this;var i=!1,n=a.style();if(Bt(t))n.applyBypass(this,t,i),this.emitAndNotify("style");else if(je(t)){if(void 0===r){var o=this[0];return o?n.getStylePropertyValue(o,t):void 0}n.applyBypass(this,t,r,i),this.emitAndNotify("style")}else if(void 0===t){var u=this[0];return u?n.getRawStyle(u):void 0}return this},removeStyle:function(t){var r=this.cy();if(!r.styleEnabled())return this;var a=!1,i=r.style(),n=this;if(void 0===t)for(var s=0;s<n.length;s++)i.removeAllBypasses(n[s],a);else{t=t.split(/\s+/);for(var u=0;u<n.length;u++)i.removeBypasses(n[u],t,a)}return this.emitAndNotify("style"),this},show:function(){return this.css("display","element"),this},hide:function(){return this.css("display","none"),this},effectiveOpacity:function(){var t=this.cy();if(!t.styleEnabled())return 1;var r=t.hasCompoundNodes(),a=this[0];if(a){var i=a._private,n=a.pstyle("opacity").value;if(!r)return n;var s=i.data.parent?a.parents():null;if(s)for(var o=0;o<s.length;o++)n*=s[o].pstyle("opacity").value;return n}},transparent:function(){if(!this.cy().styleEnabled())return!1;var r=this[0],a=r.cy().hasCompoundNodes();return r?a?0===r.effectiveOpacity():0===r.pstyle("opacity").value:void 0},backgrounding:function(){return!!this.cy().styleEnabled()&&!!this[0]._private.backgrounding}};function Lc(e,t){var a=e._private.data.parent?e.parents():null;if(a)for(var i=0;i<a.length;i++)if(!t(a[i]))return!1;return!0}function Bc(e){var t=e.ok,r=e.edgeOkViaNode||e.ok,a=e.parentOk||e.ok;return function(){var i=this.cy();if(!i.styleEnabled())return!0;var n=this[0],s=i.hasCompoundNodes();if(n){var o=n._private;if(!t(n))return!1;if(n.isNode())return!s||Lc(n,a);var u=o.source,h=o.target;return r(u)&&(!s||Lc(u,r))&&(u===h||r(h)&&(!s||Lc(h,r)))}}}var $s=Ho("eleTakesUpSpace",function(e){return"element"===e.pstyle("display").value&&0!==e.width()&&(!e.isNode()||0!==e.height())});Sn.takesUpSpace=Go("takesUpSpace",Bc({ok:$s}));var c1=Ho("eleInteractive",function(e){return"yes"===e.pstyle("events").value&&"visible"===e.pstyle("visibility").value&&$s(e)}),h1=Ho("parentInteractive",function(e){return"visible"===e.pstyle("visibility").value&&$s(e)});Sn.interactive=Go("interactive",Bc({ok:c1,parentOk:h1,edgeOkViaNode:$s})),Sn.noninteractive=function(){var e=this[0];if(e)return!e.interactive()};var u1=Ho("eleVisible",function(e){return"visible"===e.pstyle("visibility").value&&0!==e.pstyle("opacity").pfValue&&$s(e)});Sn.visible=Go("visible",Bc({ok:u1,edgeOkViaNode:$s})),Sn.hidden=function(){var e=this[0];if(e)return!e.visible()},Sn.isBundledBezier=Go("isBundledBezier",function(){return!!this.cy().styleEnabled()&&!this.removed()&&"bezier"===this.pstyle("curve-style").value&&this.takesUpSpace()}),Sn.bypass=Sn.css=Sn.style,Sn.renderedCss=Sn.renderedStyle,Sn.removeBypass=Sn.removeCss=Sn.removeStyle,Sn.pstyle=Sn.parsedStyle;var bs={};function ld(e){return function(){var t=arguments,r=[];if(2===t.length)this.on(e.event,t[0],t[1]);else if(1===t.length&&z(t[0]))this.on(e.event,t[0]);else if(0===t.length||1===t.length&&ft(t[0])){for(var s=1===t.length?t[0]:null,o=0;o<this.length;o++){var u=this[o],h=!e.ableField||u._private[e.ableField],f=u._private[e.field]!=e.value;if(e.overrideAble){var p=e.overrideAble(u);if(void 0!==p&&(h=p,!p))return this}h&&(u._private[e.field]=e.value,f&&r.push(u))}var x=this.spawn(r);x.updateStyle(),x.emit(e.event),s&&x.emit(s)}return this}}function Ys(e){bs[e.field]=function(){var t=this[0];if(t){if(e.overrideField){var r=e.overrideField(t);if(void 0!==r)return r}return t._private[e.field]}},bs[e.on]=ld({event:e.on,field:e.field,ableField:e.ableField,overrideAble:e.overrideAble,value:!0}),bs[e.off]=ld({event:e.off,field:e.field,ableField:e.ableField,overrideAble:e.overrideAble,value:!1})}Ys({field:"locked",overrideField:function(t){return!!t.cy().autolock()||void 0},on:"lock",off:"unlock"}),Ys({field:"grabbable",overrideField:function(t){return!t.cy().autoungrabify()&&!t.pannable()&&void 0},on:"grabify",off:"ungrabify"}),Ys({field:"selected",ableField:"selectable",overrideAble:function(t){return!t.cy().autounselectify()&&void 0},on:"select",off:"unselect"}),Ys({field:"selectable",overrideField:function(t){return!t.cy().autounselectify()&&void 0},on:"selectify",off:"unselectify"}),bs.deselect=bs.unselect,bs.grabbed=function(){var e=this[0];if(e)return e._private.grabbed},Ys({field:"active",on:"activate",off:"unactivate"}),Ys({field:"pannable",on:"panify",off:"unpanify"}),bs.inactive=function(){var e=this[0];if(e)return!e._private.active};var Pn={},cd=function(t){return function(a){for(var n=[],s=0;s<this.length;s++){var o=this[s];if(o.isNode()){for(var u=!1,h=o.connectedEdges(),f=0;f<h.length;f++){var p=h[f],x=p.source(),k=p.target();if(t.noIncomingEdges&&k===o&&x!==o||t.noOutgoingEdges&&x===o&&k!==o){u=!0;break}}u||n.push(o)}}return this.spawn(n,!0).filter(a)}},hd=function(t){return function(r){for(var i=[],n=0;n<this.length;n++){var s=this[n];if(s.isNode())for(var o=s.connectedEdges(),u=0;u<o.length;u++){var h=o[u],f=h.source(),p=h.target();t.outgoing&&f===s?(i.push(h),i.push(p)):t.incoming&&p===s&&(i.push(h),i.push(f))}}return this.spawn(i,!0).filter(r)}},ud=function(t){return function(r){for(var a=this,i=[],n={};;){var s=t.outgoing?a.outgoers():a.incomers();if(0===s.length)break;for(var o=!1,u=0;u<s.length;u++){var h=s[u],f=h.id();n[f]||(n[f]=!0,i.push(h),o=!0)}if(!o)break;a=s}return this.spawn(i,!0).filter(r)}};function dd(e){return function(r){for(var a=[],i=0;i<this.length;i++){var s=this[i]._private[e.attr];s&&a.push(s)}return this.spawn(a,!0).filter(r)}}function fd(e){return function(r){var a=[],i=this._private.cy,n=e||{};je(r)&&(r=i.$(r));for(var s=0;s<r.length;s++)for(var o=r[s]._private.edges,u=0;u<o.length;u++){var h=o[u],f=h._private.data,p=this.hasElementWithId(f.source)&&r.hasElementWithId(f.target),x=r.hasElementWithId(f.source)&&this.hasElementWithId(f.target);(p||x)&&((n.thisIsSrc||n.thisIsTgt)&&(n.thisIsSrc&&!p||n.thisIsTgt&&!x)||a.push(h))}return this.spawn(a,!0)}}function gd(e){return e=G({},{codirected:!1},e),function(a){for(var i=[],n=this.edges(),s=e,o=0;o<n.length;o++)for(var h=n[o]._private,f=h.source,p=f._private.data.id,x=h.data.target,k=f._private.edges,_=0;_<k.length;_++){var U=k[_],O=U._private.data,K=O.target,Y=O.source,j=K===x&&Y===p;(s.codirected&&j||!s.codirected&&(j||p===K&&x===Y))&&i.push(U)}return this.spawn(i,!0).filter(a)}}Pn.clearTraversalCache=function(){for(var e=0;e<this.length;e++)this[e]._private.traversalCache=null},G(Pn,{roots:cd({noIncomingEdges:!0}),leaves:cd({noOutgoingEdges:!0}),outgoers:Hn(hd({outgoing:!0}),"outgoers"),successors:ud({outgoing:!0}),incomers:Hn(hd({incoming:!0}),"incomers"),predecessors:ud({})}),G(Pn,{neighborhood:Hn(function(e){for(var t=[],r=this.nodes(),a=0;a<r.length;a++)for(var i=r[a],n=i.connectedEdges(),s=0;s<n.length;s++){var o=n[s],u=o.source(),h=o.target(),f=i===u?h:u;f.length>0&&t.push(f[0]),t.push(o[0])}return this.spawn(t,!0).filter(e)},"neighborhood"),closedNeighborhood:function(t){return this.neighborhood().add(this).filter(t)},openNeighborhood:function(t){return this.neighborhood(t)}}),Pn.neighbourhood=Pn.neighborhood,Pn.closedNeighbourhood=Pn.closedNeighborhood,Pn.openNeighbourhood=Pn.openNeighborhood,G(Pn,{source:Hn(function(t){var a,r=this[0];return r&&(a=r._private.source||r.cy().collection()),a&&t?a.filter(t):a},"source"),target:Hn(function(t){var a,r=this[0];return r&&(a=r._private.target||r.cy().collection()),a&&t?a.filter(t):a},"target"),sources:dd({attr:"source"}),targets:dd({attr:"target"})}),G(Pn,{edgesWith:Hn(fd(),"edgesWith"),edgesTo:Hn(fd({thisIsSrc:!0}),"edgesTo")}),G(Pn,{connectedEdges:Hn(function(e){for(var t=[],a=0;a<this.length;a++){var i=this[a];if(i.isNode())for(var n=i._private.edges,s=0;s<n.length;s++)t.push(n[s])}return this.spawn(t,!0).filter(e)},"connectedEdges"),connectedNodes:Hn(function(e){for(var t=[],a=0;a<this.length;a++){var i=this[a];i.isEdge()&&(t.push(i.source()[0]),t.push(i.target()[0]))}return this.spawn(t,!0).filter(e)},"connectedNodes"),parallelEdges:Hn(gd(),"parallelEdges"),codirectedEdges:Hn(gd({codirected:!0}),"codirectedEdges")}),G(Pn,{components:function(t){var r=this,a=r.cy(),i=a.collection(),n=null==t?r.nodes():t.nodes(),s=[];null!=t&&n.empty()&&(n=t.sources());var o=function(f,p){i.merge(f),n.unmerge(f),p.merge(f)};if(n.empty())return r.spawn();var u=function(){var f=a.collection();s.push(f);var p=n[0];o(p,f),r.bfs({directed:!1,roots:p,visit:function(k){return o(k,f)}}),f.forEach(function(x){x.connectedEdges().forEach(function(k){r.has(k)&&f.has(k.source())&&f.has(k.target())&&f.merge(k)})})};do{u()}while(n.length>0);return s},component:function(){var t=this[0];return t.cy().mutableElements().components(t)[0]}}),Pn.componentsOf=Pn.components;var wn=function(t,r){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(void 0!==t){var n=new Lt,s=!1;if(r){if(r.length>0&&Bt(r[0])&&!It(r[0])){s=!0;for(var o=[],u=new Xr,h=0,f=r.length;h<f;h++){var p=r[h];null==p.data&&(p.data={});var x=p.data;if(null==x.id)x.id=hi();else if(t.hasElementWithId(x.id)||u.has(x.id))continue;var k=new Gr(t,p,!1);o.push(k),u.add(x.id)}r=o}}else r=[];this.length=0;for(var _=0,U=r.length;_<U;_++){var O=r[_][0];if(null!=O){var K=O._private.data.id;(!a||!n.has(K))&&(a&&n.set(K,{index:this.length,ele:O}),this[this.length]=O,this.length++)}}this._private={eles:this,cy:t,get map(){return null==this.lazyMap&&this.rebuildMap(),this.lazyMap},set map(Y){this.lazyMap=Y},rebuildMap:function(){for(var j=this.lazyMap=new Lt,yt=this.eles,ie=0;ie<yt.length;ie++){var se=yt[ie];j.set(se.id(),{index:ie,ele:se})}}},a&&(this._private.map=n),s&&!i&&this.restore()}else Ka("A collection must have a reference to the core")},Zi=Gr.prototype=wn.prototype=Object.create(Array.prototype);Zi.instanceString=function(){return"collection"},Zi.spawn=function(e,t){return new wn(this.cy(),e,t)},Zi.spawnSelf=function(){return this.spawn(this)},Zi.cy=function(){return this._private.cy},Zi.renderer=function(){return this._private.cy.renderer()},Zi.element=function(){return this[0]},Zi.collection=function(){return qt(this)?this:new wn(this._private.cy,[this])},Zi.unique=function(){return new wn(this._private.cy,this,!0)},Zi.hasElementWithId=function(e){return this._private.map.has(e=""+e)},Zi.getElementById=function(e){var t=this._private.cy,r=this._private.map.get(e=""+e);return r?r.ele:new wn(t)},Zi.$id=Zi.getElementById,Zi.poolIndex=function(){return this._private.cy._private.elements._private.map.get(this[0]._private.data.id).index},Zi.indexOf=function(e){return this._private.map.get(e[0]._private.data.id).index},Zi.indexOfId=function(e){return this._private.map.get(e=""+e).index},Zi.json=function(e){var t=this.element(),r=this.cy();if(null==t&&e)return this;if(null!=t){var a=t._private;if(Bt(e)){if(r.startBatch(),e.data){t.data(e.data);var i=a.data;if(t.isEdge()){var n=!1,s={},o=e.data.source,u=e.data.target;null!=o&&o!=i.source&&(s.source=""+o,n=!0),null!=u&&u!=i.target&&(s.target=""+u,n=!0),n&&(t=t.move(s))}else{var f=e.data.parent;"parent"in e.data&&(null!=f||null!=i.parent)&&f!=i.parent&&(void 0===f&&(f=null),null!=f&&(f=""+f),t=t.move({parent:f}))}}e.position&&t.position(e.position);var p=function(U,O,K){var Y=e[U];null!=Y&&Y!==a[U]&&(Y?t[O]():t[K]())};return p("removed","remove","restore"),p("selected","select","unselect"),p("selectable","selectify","unselectify"),p("locked","lock","unlock"),p("grabbable","grabify","ungrabify"),p("pannable","panify","unpanify"),null!=e.classes&&t.classes(e.classes),r.endBatch(),this}if(void 0===e){var x={data:Ha(a.data),position:Ha(a.position),group:a.group,removed:a.removed,selected:a.selected,selectable:a.selectable,locked:a.locked,grabbable:a.grabbable,pannable:a.pannable,classes:""},k=0;return a.classes.forEach(function(_){return x.classes+=0===k++?_:" "+_}),x}}},Zi.jsons=function(){for(var e=[],t=0;t<this.length;t++){var a=this[t].json();e.push(a)}return e},Zi.clone=function(){for(var e=this.cy(),t=[],r=0;r<this.length;r++){var i=this[r].json(),n=new Gr(e,i,!1);t.push(n)}return new wn(e,t)},Zi.copy=Zi.clone,Zi.restore=function(){for(var o,e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=this,a=r.cy(),i=a._private,n=[],s=[],u=0,h=r.length;u<h;u++){var f=r[u];t&&!f.removed()||(f.isNode()?n.push(f):s.push(f))}o=n.concat(s);var p,x=function(){o.splice(p,1),p--};for(p=0;p<o.length;p++){var k=o[p],_=k._private,U=_.data;if(k.clearTraversalCache(),t||_.removed)if(void 0===U.id)U.id=hi();else if(X(U.id))U.id=""+U.id;else{if(Nt(U.id)||!je(U.id)){Ka("Can not create element with invalid string ID `"+U.id+"`"),x();continue}if(a.hasElementWithId(U.id)){Ka("Can not create second element with ID `"+U.id+"`"),x();continue}}var O=U.id;if(k.isNode()){var K=_.position;null==K.x&&(K.x=0),null==K.y&&(K.y=0)}if(k.isEdge()){for(var Y=k,j=["source","target"],yt=j.length,ie=!1,se=0;se<yt;se++){var Ht=j[se],he=U[Ht];X(he)&&(he=U[Ht]=""+U[Ht]),null==he||""===he?(Ka("Can not create edge `"+O+"` with unspecified "+Ht),ie=!0):a.hasElementWithId(he)||(Ka("Can not create edge `"+O+"` with nonexistant "+Ht+" `"+he+"`"),ie=!0)}if(ie){x();continue}var me=a.getElementById(U.source),Te=a.getElementById(U.target);me.same(Te)?me._private.edges.push(Y):(me._private.edges.push(Y),Te._private.edges.push(Y)),Y._private.source=me,Y._private.target=Te}_.map=new Lt,_.map.set(O,{ele:k,index:0}),_.removed=!1,t&&a.addToPool(k)}for(var Be=0;Be<n.length;Be++){var Me=n[Be],Oe=Me._private.data;X(Oe.parent)&&(Oe.parent=""+Oe.parent);var tr=Oe.parent;if(null!=tr||Me._private.parent){var fr=Me._private.parent?a.collection().merge(Me._private.parent):a.getElementById(tr);if(fr.empty())Oe.parent=void 0;else if(fr[0].removed())_a("Node added with missing parent, reference to parent removed"),Oe.parent=void 0,Me._private.parent=null;else{for(var rr=!1,Cr=fr;!Cr.empty();){if(Me.same(Cr)){rr=!0,Oe.parent=void 0;break}Cr=Cr.parent()}rr||(fr[0]._private.children.push(Me),Me._private.parent=fr[0],i.hasCompoundNodes=!0)}}}if(o.length>0){for(var Ur=o.length===r.length?r:new wn(a,o),qr=0;qr<Ur.length;qr++){var Dr=Ur[qr];Dr.isNode()||(Dr.parallelEdges().clearTraversalCache(),Dr.source().clearTraversalCache(),Dr.target().clearTraversalCache())}(i.hasCompoundNodes?a.collection().merge(Ur).merge(Ur.connectedNodes()).merge(Ur.parent()):Ur).dirtyCompoundBoundsCache().dirtyBoundingBoxCache().updateStyle(e),e?Ur.emitAndNotify("add"):t&&Ur.emit("add")}return r},Zi.removed=function(){var e=this[0];return e&&e._private.removed},Zi.inside=function(){var e=this[0];return e&&!e._private.removed},Zi.remove=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=this,a=[],i={},n=r._private.cy;function u(tr){var ur=i[tr.id()];t&&tr.removed()||ur||(i[tr.id()]=!0,tr.isNode()?(a.push(tr),function s(tr){for(var ur=tr._private.edges,fr=0;fr<ur.length;fr++)u(ur[fr])}(tr),function o(tr){for(var ur=tr._private.children,fr=0;fr<ur.length;fr++)u(ur[fr])}(tr)):a.unshift(tr))}for(var h=0,f=r.length;h<f;h++)u(r[h]);function x(tr,ur){at(tr._private.edges,ur),tr.clearTraversalCache()}function k(tr){tr.clearTraversalCache()}var _=[];function U(tr,ur){ur=ur[0];var fr=(tr=tr[0])._private.children,rr=tr.id();at(fr,ur),ur._private.parent=null,_.ids[rr]||(_.ids[rr]=!0,_.push(tr))}_.ids={},r.dirtyCompoundBoundsCache(),t&&n.removeFromPool(a);for(var O=0;O<a.length;O++){var K=a[O];if(K.isEdge()){var Y=K.source()[0],j=K.target()[0];x(Y,K),x(j,K);for(var yt=K.parallelEdges(),ie=0;ie<yt.length;ie++){var se=yt[ie];k(se),se.isBundledBezier()&&se.dirtyBoundingBoxCache()}}else{var Ht=K.parent();0!==Ht.length&&U(Ht,K)}t&&(K._private.removed=!0)}var he=n._private.elements;n._private.hasCompoundNodes=!1;for(var me=0;me<he.length;me++)if(he[me].isParent()){n._private.hasCompoundNodes=!0;break}var Be=new wn(this.cy(),a);Be.size()>0&&(e?Be.emitAndNotify("remove"):t&&Be.emit("remove"));for(var Me=0;Me<_.length;Me++){var Oe=_[Me];(!t||!Oe.removed())&&Oe.updateStyle()}return Be},Zi.move=function(e){var t=this._private.cy,r=this,a=!1,i=!1,n=function(_){return null==_?_:""+_};if(void 0!==e.source||void 0!==e.target){var s=n(e.source),o=n(e.target),u=null!=s&&t.hasElementWithId(s),h=null!=o&&t.hasElementWithId(o);(u||h)&&(t.batch(function(){r.remove(a,i),r.emitAndNotify("moveout");for(var k=0;k<r.length;k++){var _=r[k],U=_._private.data;_.isEdge()&&(u&&(U.source=s),h&&(U.target=o))}r.restore(a,i)}),r.emitAndNotify("move"))}else if(void 0!==e.parent){var f=n(e.parent);if(null===f||t.hasElementWithId(f)){var x=null===f?void 0:f;t.batch(function(){var k=r.remove(a,i);k.emitAndNotify("moveout");for(var _=0;_<r.length;_++){var U=r[_],O=U._private.data;U.isNode()&&(O.parent=x)}k.restore(a,i)}),r.emitAndNotify("move")}}return this},[Th,Cg,No,vs,zs,Kg,Ko,e1,id,nd,{isNode:function(){return"nodes"===this.group()},isEdge:function(){return"edges"===this.group()},isLoop:function(){return this.isEdge()&&this.source()[0]===this.target()[0]},isSimple:function(){return this.isEdge()&&this.source()[0]!==this.target()[0]},group:function(){var t=this[0];if(t)return t._private.group}},$o,Yo,Sn,bs,Pn].forEach(function(e){G(Zi,e)});var f1={add:function(t){var r,a=this;if(re(t)){var i=t;if(i._private.cy===a)r=i.restore();else{for(var n=[],s=0;s<i.length;s++)n.push(i[s].json());r=new wn(a,n)}}else if(ft(t))r=new wn(a,t);else if(Bt(t)&&(ft(t.nodes)||ft(t.edges))){for(var h=t,f=[],p=["nodes","edges"],x=0,k=p.length;x<k;x++){var _=p[x],U=h[_];if(ft(U))for(var O=0,K=U.length;O<K;O++){var Y=G({group:_},U[O]);f.push(Y)}}r=new wn(a,f)}else r=new Gr(a,t).collection();return r},remove:function(t){return re(t)||je(t)&&(t=this.$(t)),t.remove()}};
/*! Bezier curve function generator. Copyright Gaetan Renaudeau. MIT License: http://en.wikipedia.org/wiki/MIT_License */function g1(e,t,r,a){var h=.1,f=typeof Float32Array<"u";if(4!==arguments.length)return!1;for(var p=0;p<4;++p)if("number"!=typeof arguments[p]||isNaN(arguments[p])||!isFinite(arguments[p]))return!1;e=Math.min(e,1),r=Math.min(r,1),e=Math.max(e,0),r=Math.max(r,0);var x=f?new Float32Array(11):new Array(11);function k(Te,Be){return 1-3*Be+3*Te}function _(Te,Be){return 3*Be-6*Te}function U(Te){return 3*Te}function O(Te,Be,Me){return((k(Be,Me)*Te+_(Be,Me))*Te+U(Be))*Te}function K(Te,Be,Me){return 3*k(Be,Me)*Te*Te+2*_(Be,Me)*Te+U(Be)}var se=!1;var he=function(Be){return se||function Ht(){se=!0,(e!==t||r!==a)&&function j(){for(var Te=0;Te<11;++Te)x[Te]=O(Te*h,e,r)}()}(),e===t&&r===a?Be:0===Be?0:1===Be?1:O(function ie(Te){for(var Be=0,Me=1;10!==Me&&x[Me]<=Te;++Me)Be+=h;--Me;var ur=Be+(Te-x[Me])/(x[Me+1]-x[Me])*h,fr=K(ur,e,r);return fr>=.001?function Y(Te,Be){for(var Me=0;Me<4;++Me){var Oe=K(Be,e,r);if(0===Oe)return Be;Be-=(O(Be,e,r)-Te)/Oe}return Be}(Te,ur):0===fr?ur:function yt(Te,Be,Me){var Oe,tr,ur=0;do{(Oe=O(tr=Be+(Me-Be)/2,e,r)-Te)>0?Me=tr:Be=tr}while(Math.abs(Oe)>1e-7&&++ur<10);return tr}(Te,Be,Be+h)}(Be),t,a)};he.getControlPoints=function(){return[{x:e,y:t},{x:r,y:a}]};var me="generateBezier("+[e,t,r,a]+")";return he.toString=function(){return me},he
/*! Runge-Kutta spring physics function generator. Adapted from Framer.js, copyright Koen Bok. MIT License: http://en.wikipedia.org/wiki/MIT_License */}var p1=function(){function e(a){return-a.tension*a.x-a.friction*a.v}function t(a,i,n){var s={x:a.x+n.dx*i,v:a.v+n.dv*i,tension:a.tension,friction:a.friction};return{dx:s.v,dv:e(s)}}function r(a,i){var n={dx:a.v,dv:e(a)},s=t(a,.5*i,n),o=t(a,.5*i,s),u=t(a,i,o),f=1/6*(n.dv+2*(s.dv+o.dv)+u.dv);return a.x=a.x+1/6*(n.dx+2*(s.dx+o.dx)+u.dx)*i,a.v=a.v+f*i,a}return function a(i,n,s){var x,k,_,o={x:-1,v:0,tension:null,friction:null},u=[0],h=0,f=1e-4;for(i=parseFloat(i)||500,n=parseFloat(n)||20,s=s||null,o.tension=i,o.friction=n,k=(x=null!==s)?(h=a(i,n))/s*.016:.016;_=r(_||o,k),u.push(1+_.x),h+=16,Math.abs(_.x)>f&&Math.abs(_.v)>f;);return x?function(U){return u[U*(u.length-1)|0]}:h}}(),Qi=function(t,r,a,i){var n=g1(t,r,a,i);return function(s,o,u){return s+(o-s)*n(u)}},qo={linear:function(t,r,a){return t+(r-t)*a},ease:Qi(.25,.1,.25,1),"ease-in":Qi(.42,0,1,1),"ease-out":Qi(0,0,.58,1),"ease-in-out":Qi(.42,0,.58,1),"ease-in-sine":Qi(.47,0,.745,.715),"ease-out-sine":Qi(.39,.575,.565,1),"ease-in-out-sine":Qi(.445,.05,.55,.95),"ease-in-quad":Qi(.55,.085,.68,.53),"ease-out-quad":Qi(.25,.46,.45,.94),"ease-in-out-quad":Qi(.455,.03,.515,.955),"ease-in-cubic":Qi(.55,.055,.675,.19),"ease-out-cubic":Qi(.215,.61,.355,1),"ease-in-out-cubic":Qi(.645,.045,.355,1),"ease-in-quart":Qi(.895,.03,.685,.22),"ease-out-quart":Qi(.165,.84,.44,1),"ease-in-out-quart":Qi(.77,0,.175,1),"ease-in-quint":Qi(.755,.05,.855,.06),"ease-out-quint":Qi(.23,1,.32,1),"ease-in-out-quint":Qi(.86,0,.07,1),"ease-in-expo":Qi(.95,.05,.795,.035),"ease-out-expo":Qi(.19,1,.22,1),"ease-in-out-expo":Qi(1,0,0,1),"ease-in-circ":Qi(.6,.04,.98,.335),"ease-out-circ":Qi(.075,.82,.165,1),"ease-in-out-circ":Qi(.785,.135,.15,.86),spring:function(t,r,a){if(0===a)return qo.linear;var i=p1(t,r,a);return function(n,s,o){return n+(s-n)*i(o)}},"cubic-bezier":Qi};function pd(e,t,r,a,i){if(1===a||t===r)return r;var n=i(t,r,a);return null==e||((e.roundValue||e.color)&&(n=Math.round(n)),void 0!==e.min&&(n=Math.max(n,e.min)),void 0!==e.max&&(n=Math.min(n,e.max))),n}function vd(e,t){return null!=e.pfValue||null!=e.value?null==e.pfValue||null!=t&&"%"===t.type.units?e.value:e.pfValue:e}function Hs(e,t,r,a,i){var n=null!=i?i.type:null;r<0?r=0:r>1&&(r=1);var s=vd(e,i),o=vd(t,i);if(X(s)&&X(o))return pd(n,s,o,r,a);if(ft(s)&&ft(o)){for(var u=[],h=0;h<o.length;h++){var f=s[h],p=o[h];if(null!=f&&null!=p){var x=pd(n,f,p,r,a);u.push(x)}else u.push(p)}return u}}function y1(e,t,r,a){var i=!a,n=e._private,s=t._private,o=s.easing,u=s.startTime,f=(a?e:e.cy()).style();if(!s.easingImpl)if(null==o)s.easingImpl=qo.linear;else{var p,k,_;p=je(o)?f.parse("transition-timing-function",o).value:o,je(p)?(k=p,_=[]):(k=p[1],_=p.slice(2).map(function(Ur){return+Ur})),_.length>0?("spring"===k&&_.push(s.duration),s.easingImpl=qo[k].apply(null,_)):s.easingImpl=qo[k]}var O,U=s.easingImpl;if(O=0===s.duration?1:(r-u)/s.duration,s.applying&&(O=s.progress),O<0?O=0:O>1&&(O=1),null==s.delay){var K=s.startPosition,Y=s.position;if(Y&&i&&!e.locked()){var j={};ho(K.x,Y.x)&&(j.x=Hs(K.x,Y.x,O,U)),ho(K.y,Y.y)&&(j.y=Hs(K.y,Y.y,O,U)),e.position(j)}var yt=s.startPan,ie=s.pan,se=n.pan,Ht=null!=ie&&a;Ht&&(ho(yt.x,ie.x)&&(se.x=Hs(yt.x,ie.x,O,U)),ho(yt.y,ie.y)&&(se.y=Hs(yt.y,ie.y,O,U)),e.emit("pan"));var he=s.startZoom,me=s.zoom,Te=null!=me&&a;Te&&(ho(he,me)&&(n.zoom=Xt(n.minZoom,Hs(he,me,O,U),n.maxZoom)),e.emit("zoom")),(Ht||Te)&&e.emit("viewport");var Be=s.style;if(Be&&Be.length>0&&i){for(var Me=0;Me<Be.length;Me++){var Oe=Be[Me],tr=Oe.name,fr=s.startStyle[tr],Cr=Hs(fr,Oe,O,U,f.properties[fr.name]);f.overrideBypass(e,tr,Cr)}e.emit("style")}}return s.progress=O,O}function ho(e,t){return!!(null!=e&&null!=t&&(X(e)&&X(t)||e&&t))}function m1(e,t,r,a){var i=t._private;i.started=!0,i.startTime=r-i.progress*i.duration}function yd(e,t){var r=t._private.aniEles,a=[];function i(f,p){var x=f._private,k=x.animation.current,_=x.animation.queue,U=!1;if(0===k.length){var O=_.shift();O&&k.push(O)}for(var K=function(se){for(var Ht=se.length-1;Ht>=0;Ht--)(0,se[Ht])();se.splice(0,se.length)},Y=k.length-1;Y>=0;Y--){var j=k[Y],yt=j._private;yt.stopped?(k.splice(Y,1),yt.hooked=!1,yt.playing=!1,yt.started=!1,K(yt.frames)):!yt.playing&&!yt.applying||(yt.playing&&yt.applying&&(yt.applying=!1),yt.started||m1(0,j,e),y1(f,j,e,p),yt.applying&&(yt.applying=!1),K(yt.frames),null!=yt.step&&yt.step(e),j.completed()&&(k.splice(Y,1),yt.hooked=!1,yt.playing=!1,yt.started=!1,K(yt.completes)),U=!0)}return!p&&0===k.length&&0===_.length&&a.push(f),U}for(var n=!1,s=0;s<r.length;s++){var u=i(r[s]);n=n||u}var h=i(t,!0);(n||h)&&(r.length>0?t.notify("draw",r):t.notify("draw")),r.unmerge(a),t.emit("step")}var x1={animate:$i.animate(),animation:$i.animation(),animated:$i.animated(),clearQueue:$i.clearQueue(),delay:$i.delay(),delayAnimation:$i.delayAnimation(),stop:$i.stop(),addToAnimationPool:function(t){this.styleEnabled()&&this._private.aniEles.merge(t)},stopAnimationLoop:function(){this._private.animationsRunning=!1},startAnimationLoop:function(){var t=this;if(t._private.animationsRunning=!0,t.styleEnabled()){var a=t.renderer();a&&a.beforeRender?a.beforeRender(function(n,s){yd(s,t)},a.beforeRenderPriorities.animations):function r(){t._private.animationsRunning&&ha(function(n){yd(n,t),r()})}()}}},b1={qualifierCompare:function(t,r){return null==t||null==r?null==t&&null==r:t.sameText(r)},eventMatches:function(t,r,a){var i=r.qualifier;return null==i||t!==a.target&&It(a.target)&&i.matches(a.target)},addEventFields:function(t,r){r.cy=t,r.target=t},callbackContext:function(t,r,a){return null!=r.qualifier?a.target:t}},jo=function(t){return je(t)?new gs(t):t},md={createEmitter:function(){var t=this._private;return t.emitter||(t.emitter=new Vo(b1,this)),this},emitter:function(){return this._private.emitter},on:function(t,r,a){return this.emitter().on(t,jo(r),a),this},removeListener:function(t,r,a){return this.emitter().removeListener(t,jo(r),a),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},one:function(t,r,a){return this.emitter().one(t,jo(r),a),this},once:function(t,r,a){return this.emitter().one(t,jo(r),a),this},emit:function(t,r){return this.emitter().emit(t,r),this},emitAndNotify:function(t,r){return this.emit(t),this.notify(t,r),this}};$i.eventAliasesOn(md);var Rc={png:function(t){return this._private.renderer.png(t=t||{})},jpg:function(t){var r=this._private.renderer;return(t=t||{}).bg=t.bg||"#fff",r.jpg(t)}};Rc.jpeg=Rc.jpg;var Xo={layout:function(t){var r=this;if(null!=t)if(null!=t.name){var n,a=t.name,i=r.extension("layout",a);if(null!=i)return n=je(t.eles)?r.$(t.eles):null!=t.eles?t.eles:r.$(),new i(G({},t,{cy:r,eles:n}));Ka("No such layout `"+a+"` found.  Did you forget to import it and `cytoscape.use()` it?")}else Ka("A `name` must be specified to make a layout");else Ka("Layout options must be specified to make a layout")}};Xo.createLayout=Xo.makeLayout=Xo.layout;var _1={notify:function(t,r){var a=this._private;if(this.batching()){a.batchNotifications=a.batchNotifications||{};var i=a.batchNotifications[t]=a.batchNotifications[t]||this.collection();null!=r&&i.merge(r)}else if(a.notificationsEnabled){var n=this.renderer();this.destroyed()||!n||n.notify(t,r)}},notifications:function(t){var r=this._private;return void 0===t?r.notificationsEnabled:(r.notificationsEnabled=!!t,this)},noNotifications:function(t){this.notifications(!1),t(),this.notifications(!0)},batching:function(){return this._private.batchCount>0},startBatch:function(){var t=this._private;return null==t.batchCount&&(t.batchCount=0),0===t.batchCount&&(t.batchStyleEles=this.collection(),t.batchNotifications={}),t.batchCount++,this},endBatch:function(){var t=this._private;if(0===t.batchCount)return this;if(t.batchCount--,0===t.batchCount){t.batchStyleEles.updateStyle();var r=this.renderer();Object.keys(t.batchNotifications).forEach(function(a){var i=t.batchNotifications[a];i.empty()?r.notify(a):r.notify(a,i)})}return this},batch:function(t){return this.startBatch(),t(),this.endBatch(),this},batchData:function(t){var r=this;return this.batch(function(){for(var a=Object.keys(t),i=0;i<a.length;i++){var n=a[i],s=t[n];r.getElementById(n).data(s)}})}},E1=Fe({hideEdgesOnViewport:!1,textureOnViewport:!1,motionBlur:!1,motionBlurOpacity:.05,pixelRatio:void 0,desktopTapThreshold:4,touchTapThreshold:8,wheelSensitivity:1,debug:!1,showFps:!1,webgl:!1,webglDebug:!1,webglDebugShowAtlases:!1,webglTexSize:2048,webglTexRows:36,webglTexRowsNodes:18,webglBatchSize:2048,webglTexPerBatch:14,webglBgColor:[255,255,255]}),Pc={renderTo:function(t,r,a,i){return this._private.renderer.renderTo(t,r,a,i),this},renderer:function(){return this._private.renderer},forceRender:function(){return this.notify("draw"),this},resize:function(){return this.invalidateSize(),this.emitAndNotify("resize"),this},initRenderer:function(t){var r=this,a=r.extension("renderer",t.name);if(null!=a){void 0!==t.wheelSensitivity&&_a("You have set a custom wheel sensitivity.  This will make your app zoom unnaturally when using mainstream mice.  You should change this value from the default only if you can guarantee that all your users will use the same hardware and OS configuration as your current machine.");var i=E1(t);i.cy=r,r._private.renderer=new a(i),this.notify("init")}else Ka("Can not initialise: No such renderer `".concat(t.name,"` found. Did you forget to import it and `cytoscape.use()` it?"))},destroyRenderer:function(){var t=this;t.notify("destroy");var r=t.container();if(r)for(r._cyreg=null;r.childNodes.length>0;)r.removeChild(r.childNodes[0]);t._private.renderer=null,t.mutableElements().forEach(function(a){var i=a._private;i.rscratch={},i.rstyle={},i.animation.current=[],i.animation.queue=[]})},onRender:function(t){return this.on("render",t)},offRender:function(t){return this.off("render",t)}};Pc.invalidateDimensions=Pc.resize;var Zo={collection:function(t,r){return je(t)?this.$(t):re(t)?t.collection():ft(t)?(r||(r={}),new wn(this,t,r.unique,r.removed)):new wn(this)},nodes:function(t){var r=this.$(function(a){return a.isNode()});return t?r.filter(t):r},edges:function(t){var r=this.$(function(a){return a.isEdge()});return t?r.filter(t):r},$:function(t){var r=this._private.elements;return t?r.filter(t):r.spawnSelf()},mutableElements:function(){return this._private.elements}};Zo.elements=Zo.filter=Zo.$;var _n={apply:function(e){for(var t=this,i=t._private.cy.collection(),n=0;n<e.length;n++){var s=e[n],o=t.getContextMeta(s);if(!o.empty){var u=t.getContextStyle(o),h=t.applyContextStyle(o,u,s);s._private.appliedInitStyle?t.updateTransitions(s,h.diffProps):s._private.appliedInitStyle=!0,t.updateStyleHints(s)&&i.push(s)}}return i},getPropertiesDiff:function(e,t){var r=this,a=r._private.propDiffs=r._private.propDiffs||{},i=e+"-"+t,n=a[i];if(n)return n;for(var s=[],o={},u=0;u<r.length;u++){var h=r[u],p="t"===t[u],x="t"===e[u]!==p,k=h.mappedProperties.length>0;if(x||p&&k){var _=void 0;x&&k||x?_=h.properties:k&&(_=h.mappedProperties);for(var U=0;U<_.length;U++){for(var O=_[U],K=O.name,Y=!1,j=u+1;j<r.length&&("t"!==t[j]||!(Y=null!=r[j].properties[O.name]));j++);!o[K]&&!Y&&(o[K]=!0,s.push(K))}}}return a[i]=s,s},getContextMeta:function(e){for(var a,t=this,r="",i=e._private.styleCxtKey||"",n=0;n<t.length;n++){var s=t[n];r+=s.selector&&s.selector.matches(e)?"t":"f"}return a=t.getPropertiesDiff(i,r),e._private.styleCxtKey=r,{key:r,diffPropNames:a,empty:0===a.length}},getContextStyle:function(e){var t=e.key,a=this._private.contextStyles=this._private.contextStyles||{};if(a[t])return a[t];for(var i={_private:{key:t}},n=0;n<this.length;n++){var s=this[n];if("t"===t[n])for(var u=0;u<s.properties.length;u++){var h=s.properties[u];i[h.name]=h}}return a[t]=i,i},applyContextStyle:function(e,t,r){for(var i=e.diffPropNames,n={},s=this.types,o=0;o<i.length;o++){var u=i[o],h=t[u],f=r.pstyle(u);if(!h){if(!f)continue;h=f.bypass?{name:u,deleteBypassed:!0}:{name:u,delete:!0}}if(f!==h){if(h.mapped===s.fn&&null!=f&&null!=f.mapping&&f.mapping.value===h.value){var p=f.mapping;if((p.fnValue=h.value(r))===p.prevFnValue)continue}var k=n[u]={prev:f};this.applyParsedProperty(r,h),k.next=r.pstyle(u),k.next&&k.next.bypass&&(k.next=k.next.bypassed)}}return{diffProps:n}},updateStyleHints:function(e){var a,t=e._private,r=this,i=r.propertyGroupKeys,n=function(Zr,ma,Ga){return r.getPropertiesHash(Zr,ma,Ga)},s=t.styleKey;if(e.removed())return!1;var o="nodes"===t.group,u=e._private.style;a=Object.keys(u);for(var h=0;h<i.length;h++)t.styleKeys[i[h]]=[jr,lr];for(var p=function(Zr,ma){return t.styleKeys[ma][0]=W(Zr,t.styleKeys[ma][0])},x=function(Zr,ma){return t.styleKeys[ma][1]=Yt(Zr,t.styleKeys[ma][1])},k=function(Zr,ma){p(Zr,ma),x(Zr,ma)},_=function(Zr,ma){for(var Ga=0;Ga<Zr.length;Ga++){var li=Zr.charCodeAt(Ga);p(li,ma),x(li,ma)}},O=function(Zr){return-128<Zr&&Zr<128&&Math.floor(Zr)!==Zr?2e9-(1024*Zr|0):Zr},K=0;K<a.length;K++){var Y=a[K],j=u[Y];if(null!=j){var yt=this.properties[Y],ie=yt.type,se=yt.groupKey,Ht=void 0;null!=yt.hashOverride?Ht=yt.hashOverride(e,j):null!=j.pfValue&&(Ht=j.pfValue);var he=null==yt.enums?j.value:null,me=null!=Ht,Me=j.units;!ie.number||!me&&null==he||ie.multiple?_(j.strValue,se):(k(O(me?Ht:he),se),!me&&null!=Me&&_(Me,se))}}for(var tr=[jr,lr],ur=0;ur<i.length;ur++){var rr=t.styleKeys[i[ur]];tr[0]=W(rr[0],tr[0]),tr[1]=Yt(rr[1],tr[1])}t.styleKey=function(t,r){return 2097152*t+r}(tr[0],tr[1]);var Cr=t.styleKeys;t.labelDimsKey=Ne(Cr.labelDimensions);var Ur=n(e,["label"],Cr.labelDimensions);if(t.labelKey=Ne(Ur),t.labelStyleKey=Ne(Tr(Cr.commonLabel,Ur)),!o){var qr=n(e,["source-label"],Cr.labelDimensions);t.sourceLabelKey=Ne(qr),t.sourceLabelStyleKey=Ne(Tr(Cr.commonLabel,qr));var Dr=n(e,["target-label"],Cr.labelDimensions);t.targetLabelKey=Ne(Dr),t.targetLabelStyleKey=Ne(Tr(Cr.commonLabel,Dr))}if(o){var Wr=t.styleKeys,Za=Wr.pie,Ta=Wr.stripe,Kr=[Wr.nodeBody,Wr.nodeBorder,Wr.nodeOutline,Wr.backgroundImage,Wr.compound,Za,Ta].filter(function($r){return null!=$r}).reduce(Tr,[jr,lr]);t.nodeKey=Ne(Kr),t.hasPie=null!=Za&&Za[0]!==jr&&Za[1]!==lr,t.hasStripe=null!=Ta&&Ta[0]!==jr&&Ta[1]!==lr}return s!==t.styleKey},clearStyleHints:function(e){var t=e._private;t.styleCxtKey="",t.styleKeys={},t.styleKey=null,t.labelKey=null,t.labelStyleKey=null,t.sourceLabelKey=null,t.sourceLabelStyleKey=null,t.targetLabelKey=null,t.targetLabelStyleKey=null,t.nodeKey=null,t.hasPie=null,t.hasStripe=null},applyParsedProperty:function(e,t){var n,r=this,a=t,i=e._private.style,s=r.types,o=r.properties[a.name].type,u=a.bypass,h=i[a.name],f=h&&h.bypass,p=e._private,x="mapping",k=function(ga){return null==ga?null:null!=ga.pfValue?ga.pfValue:ga.value},_=function(){var ga=k(h),Ea=k(a);r.checkTriggers(e,a.name,ga,Ea)};if("curve-style"===t.name&&e.isEdge()&&("bezier"!==t.value&&e.isLoop()||"haystack"===t.value&&(e.source().isParent()||e.target().isParent()))&&(a=t=this.parse(t.name,"bezier",u)),a.delete)return i[a.name]=void 0,_(),!0;if(a.deleteBypassed)return h?!!h.bypass&&(h.bypassed=void 0,_(),!0):(_(),!0);if(a.deleteBypass)return h?!!h.bypass&&(i[a.name]=h.bypassed,_(),!0):(_(),!0);var U=function(){_a("Do not assign mappings to elements without corresponding data (i.e. ele `"+e.id()+"` has no mapping for property `"+a.name+"` with data field `"+a.field+"`); try a `["+a.field+"]` selector to limit scope to elements with `"+a.field+"` defined")};switch(a.mapped){case s.mapData:for(var O=a.field.split("."),K=p.data,Y=0;Y<O.length&&K;Y++)K=K[O[Y]];if(null==K)return U(),!1;var yt;if(!X(K))return _a("Do not use continuous mappers without specifying numeric data (i.e. `"+a.field+": "+K+"` for `"+e.id()+"` is non-numeric)"),!1;var ie=a.fieldMax-a.fieldMin;if((yt=0===ie?0:(K-a.fieldMin)/ie)<0?yt=0:yt>1&&(yt=1),o.color){var se=a.valueMin[0],he=a.valueMin[1],me=a.valueMax[1],Te=a.valueMin[2],Be=a.valueMax[2],Me=null==a.valueMin[3]?1:a.valueMin[3],Oe=null==a.valueMax[3]?1:a.valueMax[3],tr=[Math.round(se+(a.valueMax[0]-se)*yt),Math.round(he+(me-he)*yt),Math.round(Te+(Be-Te)*yt),Math.round(Me+(Oe-Me)*yt)];n={bypass:a.bypass,name:a.name,value:tr,strValue:"rgb("+tr[0]+", "+tr[1]+", "+tr[2]+")"}}else{if(!o.number)return!1;n=this.parse(a.name,a.valueMin+(a.valueMax-a.valueMin)*yt,a.bypass,x)}if(!n)return U(),!1;n.mapping=a,a=n;break;case s.data:for(var fr=a.field.split("."),rr=p.data,Cr=0;Cr<fr.length&&rr;Cr++)rr=rr[fr[Cr]];if(null!=rr&&(n=this.parse(a.name,rr,a.bypass,x)),!n)return U(),!1;n.mapping=a,a=n;break;case s.fn:var Dr=null!=a.fnValue?a.fnValue:(0,a.value)(e);if(a.prevFnValue=Dr,null==Dr)return _a("Custom function mappers may not return null (i.e. `"+a.name+"` for ele `"+e.id()+"` is null)"),!1;if(!(n=this.parse(a.name,Dr,a.bypass,x)))return _a("Custom function mappers may not return invalid values for the property type (i.e. `"+a.name+"` for ele `"+e.id()+"` is invalid)"),!1;n.mapping=Ha(a),a=n;break;case void 0:break;default:return!1}return u?(a.bypassed=f?h.bypassed:h,i[a.name]=a):f?h.bypassed=a:i[a.name]=a,_(),!0},cleanElements:function(e,t){for(var r=0;r<e.length;r++){var a=e[r];if(this.clearStyleHints(a),a.dirtyCompoundBoundsCache(),a.dirtyBoundingBoxCache(),t)for(var i=a._private.style,n=Object.keys(i),s=0;s<n.length;s++){var o=n[s],u=i[o];null!=u&&(u.bypass?u.bypassed=null:i[o]=null)}else a._private.style={}}},update:function(){this._private.cy.mutableElements().updateStyle()},updateTransitions:function(e,t){var r=this,a=e._private,i=e.pstyle("transition-property").value,n=e.pstyle("transition-duration").pfValue,s=e.pstyle("transition-delay").pfValue;if(i.length>0&&n>0){for(var o={},u=!1,h=0;h<i.length;h++){var f=i[h],p=e.pstyle(f),x=t[f];if(x){var _=x.prev,U=null!=x.next?x.next:p,O=!1,K=void 0,Y=1e-6;_&&(X(_.pfValue)&&X(U.pfValue)?K=_.pfValue+Y*(O=U.pfValue-_.pfValue):X(_.value)&&X(U.value)?K=_.value+Y*(O=U.value-_.value):ft(_.value)&&ft(U.value)&&(O=_.value[0]!==U.value[0]||_.value[1]!==U.value[1]||_.value[2]!==U.value[2],K=_.strValue),O&&(o[f]=U.strValue,this.applyBypass(e,f,K),u=!0))}}if(!u)return;a.transitioning=!0,new Ks(function(j){s>0?e.delayAnimation(s).play().promise().then(j):j()}).then(function(){return e.animation({style:o,duration:n,easing:e.pstyle("transition-timing-function").value,queue:!1}).play().promise()}).then(function(){r.removeBypasses(e,i),e.emitAndNotify("style"),a.transitioning=!1})}else a.transitioning&&(this.removeBypasses(e,i),e.emitAndNotify("style"),a.transitioning=!1)},checkTrigger:function(e,t,r,a,i,n){var s=this.properties[t],o=i(s);e.removed()||null!=o&&o(r,a,e)&&n(s)},checkZOrderTrigger:function(e,t,r,a){var i=this;this.checkTrigger(e,t,r,a,function(n){return n.triggersZOrder},function(){i._private.cy.notify("zorder",e)})},checkBoundsTrigger:function(e,t,r,a){this.checkTrigger(e,t,r,a,function(i){return i.triggersBounds},function(i){e.dirtyCompoundBoundsCache(),e.dirtyBoundingBoxCache()})},checkConnectedEdgesBoundsTrigger:function(e,t,r,a){this.checkTrigger(e,t,r,a,function(i){return i.triggersBoundsOfConnectedEdges},function(i){e.connectedEdges().forEach(function(n){n.dirtyBoundingBoxCache()})})},checkParallelEdgesBoundsTrigger:function(e,t,r,a){this.checkTrigger(e,t,r,a,function(i){return i.triggersBoundsOfParallelEdges},function(i){e.parallelEdges().forEach(function(n){n.dirtyBoundingBoxCache()})})},checkTriggers:function(e,t,r,a){e.dirtyStyleCache(),this.checkZOrderTrigger(e,t,r,a),this.checkBoundsTrigger(e,t,r,a),this.checkConnectedEdgesBoundsTrigger(e,t,r,a),this.checkParallelEdgesBoundsTrigger(e,t,r,a)}},fo={applyBypass:function(e,t,r,a){var n=[];if("*"===t||"**"===t){if(void 0!==r)for(var o=0;o<this.properties.length;o++){var f=this.parse(this.properties[o].name,r,!0);f&&n.push(f)}}else if(je(t)){var p=this.parse(t,r,!0);p&&n.push(p)}else{if(!Bt(t))return!1;var x=t;a=r;for(var k=Object.keys(x),_=0;_<k.length;_++){var U=k[_],O=x[U];if(void 0===O&&(O=x[qe(U)]),void 0!==O){var K=this.parse(U,O,!0);K&&n.push(K)}}}if(0===n.length)return!1;for(var Y=!1,j=0;j<e.length;j++){for(var yt=e[j],ie={},se=void 0,Ht=0;Ht<n.length;Ht++){var he=n[Ht];if(a){var me=yt.pstyle(he.name);se=ie[he.name]={prev:me}}Y=this.applyParsedProperty(yt,Ha(he))||Y,a&&(se.next=yt.pstyle(he.name))}Y&&this.updateStyleHints(yt),a&&this.updateTransitions(yt,ie,!0)}return Y},overrideBypass:function(e,t,r){t=oe(t);for(var a=0;a<e.length;a++){var i=e[a],n=i._private.style[t],s=this.properties[t].type,o=s.color,u=s.mutiple,h=n?null!=n.pfValue?n.pfValue:n.value:null;n&&n.bypass?(n.value=r,null!=n.pfValue&&(n.pfValue=r),n.strValue=o?"rgb("+r.join(",")+")":u?r.join(" "):""+r,this.updateStyleHints(i)):this.applyBypass(i,t,r),this.checkTriggers(i,t,h,r)}},removeAllBypasses:function(e,t){return this.removeBypasses(e,this.propertyNames,t)},removeBypasses:function(e,t,r){for(var i=0;i<e.length;i++){for(var n=e[i],s={},o=0;o<t.length;o++){var u=t[o],h=this.properties[u],f=n.pstyle(h.name);if(f&&f.bypass){var x=this.parse(u,"",!0),k=s[h.name]={prev:f};this.applyParsedProperty(n,x),k.next=n.pstyle(h.name)}}this.updateStyleHints(n),r&&this.updateTransitions(n,s,!0)}}},Ic={getEmSizeInPixels:function(){var e=this.containerCss("font-size");return null!=e?parseFloat(e):1},containerCss:function(e){var t=this._private.cy,r=t.container(),a=t.window();if(a&&r&&a.getComputedStyle)return a.getComputedStyle(r).getPropertyValue(e)}},es={getRenderedStyle:function(e,t){return t?this.getStylePropertyValue(e,t,!0):this.getRawStyle(e,!0)},getRawStyle:function(e,t){var r=this;if(e=e[0]){for(var a={},i=0;i<r.properties.length;i++){var n=r.properties[i],s=r.getStylePropertyValue(e,n.name,t);null!=s&&(a[n.name]=s,a[qe(n.name)]=s)}return a}},getIndexedStyle:function(e,t,r,a){return e.pstyle(t)[r][a]??e.cy().style().getDefaultProperty(t)[r][0]},getStylePropertyValue:function(e,t,r){if(e=e[0]){var i=this.properties[t];i.alias&&(i=i.pointsTo);var n=i.type,s=e.pstyle(i.name);if(s){var o=s.value,u=s.units,h=s.strValue;if(r&&n.number&&null!=o&&X(o)){var f=e.cy().zoom(),p=function(O){return O*f},x=function(O,K){return p(O)+K},k=ft(o);return(k?u.every(function(U){return null!=U}):null!=u)?k?o.map(function(U,O){return x(U,u[O])}).join(" "):x(o,u):k?o.map(function(U){return je(U)?U:""+p(U)}).join(" "):""+p(o)}if(null!=h)return h}return null}},getAnimationStartStyle:function(e,t){for(var r={},a=0;a<t.length;a++){var n=t[a].name,s=e.pstyle(n);void 0!==s&&(s=Bt(s)?this.parse(n,s.strValue):this.parse(n,s)),s&&(r[n]=s)}return r},getPropsList:function(e){var r=[],a=e,i=this.properties;if(a)for(var n=Object.keys(a),s=0;s<n.length;s++){var o=n[s],u=a[o],h=i[o]||i[oe(o)],f=this.parse(h.name,u);f&&r.push(f)}return r},getNonDefaultPropertiesHash:function(e,t,r){var n,s,o,u,h,a=r.slice();for(u=0;u<t.length;u++)if(null!=(n=e.pstyle(t[u],!1)))if(null!=n.pfValue)a[0]=W(o,a[0]),a[1]=Yt(o,a[1]);else for(s=n.strValue,h=0;h<s.length;h++)o=s.charCodeAt(h),a[0]=W(o,a[0]),a[1]=Yt(o,a[1]);return a}};es.getPropertiesHash=es.getNonDefaultPropertiesHash;var Qo={appendFromJson:function(e){for(var t=this,r=0;r<e.length;r++){var a=e[r],i=a.selector,n=a.style||a.css,s=Object.keys(n);t.selector(i);for(var o=0;o<s.length;o++){var u=s[o];t.css(u,n[u])}}return t},fromJson:function(e){var t=this;return t.resetToDefault(),t.appendFromJson(e),t},json:function(){for(var e=[],t=this.defaultLength;t<this.length;t++){for(var r=this[t],a=r.selector,i=r.properties,n={},s=0;s<i.length;s++){var o=i[s];n[o.name]=o.strValue}e.push({selector:a?a.toString():"core",style:n})}return e}},Mc={appendFromString:function(e){var i,n,s,r=this,a=""+e;function o(){a=a.length>i.length?a.substr(i.length):""}function u(){n=n.length>s.length?n.substr(s.length):""}for(a=a.replace(/[/][*](\s|.)+?[*][/]/g,"");!a.match(/^\s*$/);){var f=a.match(/^\s*((?:.|\s)+?)\s*\{((?:.|\s)+?)\}/);if(!f){_a("Halting stylesheet parsing: String stylesheet contains more to parse but no selector and block found in: "+a);break}i=f[0];var p=f[1];if("core"!==p&&new gs(p).invalid)_a("Skipping parsing of block: Invalid selector found in string stylesheet: "+p),o();else{var k=f[2],_=!1;n=k;for(var U=[];!n.match(/^\s*$/);){var K=n.match(/^\s*(.+?)\s*:\s*(.+?)(?:\s*;|\s*$)/);if(!K){_a("Skipping parsing of block: Invalid formatting of style property and value definitions found in:"+k),_=!0;break}s=K[0];var Y=K[1],j=K[2];this.properties[Y]?r.parse(Y,j)?(U.push({name:Y,val:j}),u()):(_a("Skipping property: Invalid property definition in: "+s),u()):(_a("Skipping property: Invalid property name in: "+s),u())}if(_){o();break}r.selector(p);for(var se=0;se<U.length;se++){var Ht=U[se];r.css(Ht.name,Ht.val)}o()}}return r},fromString:function(e){var t=this;return t.resetToDefault(),t.appendFromString(e),t}},dn={};(function(){var e=B,t=et,r=it,n=function($r){return"^"+$r+"\\s*\\(\\s*([\\w\\.]+)\\s*\\)$"},s=function($r){var Zr=e+"|\\w+|"+t+"|"+r+"|\\#[0-9a-fA-F]{3}|\\#[0-9a-fA-F]{6}";return"^"+$r+"\\s*\\(([\\w\\.]+)\\s*\\,\\s*("+e+")\\s*\\,\\s*("+e+")\\s*,\\s*("+Zr+")\\s*\\,\\s*("+Zr+")\\)$"},o=["^url\\s*\\(\\s*['\"]?(.+?)['\"]?\\s*\\)$","^(none)$","^(.+)$"];dn.types={time:{number:!0,min:0,units:"s|ms",implicitUnits:"ms"},percent:{number:!0,min:0,max:100,units:"%",implicitUnits:"%"},percentages:{number:!0,min:0,max:100,units:"%",implicitUnits:"%",multiple:!0},zeroOneNumber:{number:!0,min:0,max:1,unitless:!0},zeroOneNumbers:{number:!0,min:0,max:1,unitless:!0,multiple:!0},nOneOneNumber:{number:!0,min:-1,max:1,unitless:!0},nonNegativeInt:{number:!0,min:0,integer:!0,unitless:!0},nonNegativeNumber:{number:!0,min:0,unitless:!0},position:{enums:["parent","origin"]},nodeSize:{number:!0,min:0,enums:["label"]},number:{number:!0,unitless:!0},numbers:{number:!0,unitless:!0,multiple:!0},positiveNumber:{number:!0,unitless:!0,min:0,strictMin:!0},size:{number:!0,min:0},bidirectionalSize:{number:!0},bidirectionalSizeMaybePercent:{number:!0,allowPercent:!0},bidirectionalSizes:{number:!0,multiple:!0},sizeMaybePercent:{number:!0,min:0,allowPercent:!0},axisDirection:{enums:["horizontal","leftward","rightward","vertical","upward","downward","auto"]},axisDirectionExplicit:{enums:["leftward","rightward","upward","downward"]},axisDirectionPrimary:{enums:["horizontal","vertical"]},paddingRelativeTo:{enums:["width","height","average","min","max"]},bgWH:{number:!0,min:0,allowPercent:!0,enums:["auto"],multiple:!0},bgPos:{number:!0,allowPercent:!0,multiple:!0},bgRelativeTo:{enums:["inner","include-padding"],multiple:!0},bgRepeat:{enums:["repeat","repeat-x","repeat-y","no-repeat"],multiple:!0},bgFit:{enums:["none","contain","cover"],multiple:!0},bgCrossOrigin:{enums:["anonymous","use-credentials","null"],multiple:!0},bgClip:{enums:["none","node"],multiple:!0},bgContainment:{enums:["inside","over"],multiple:!0},boxSelection:{enums:["contain","overlap","none"]},color:{color:!0},colors:{color:!0,multiple:!0},fill:{enums:["solid","linear-gradient","radial-gradient"]},bool:{enums:["yes","no"]},bools:{enums:["yes","no"],multiple:!0},lineStyle:{enums:["solid","dotted","dashed"]},lineCap:{enums:["butt","round","square"]},linePosition:{enums:["center","inside","outside"]},lineJoin:{enums:["round","bevel","miter"]},borderStyle:{enums:["solid","dotted","dashed","double"]},curveStyle:{enums:["bezier","unbundled-bezier","haystack","segments","straight","straight-triangle","taxi","round-segments","round-taxi"]},radiusType:{enums:["arc-radius","influence-radius"],multiple:!0},fontFamily:{regex:'^([\\w- \\"]+(?:\\s*,\\s*[\\w- \\"]+)*)$'},fontStyle:{enums:["italic","normal","oblique"]},fontWeight:{enums:["normal","bold","bolder","lighter","100","200","300","400","500","600","800","900",100,200,300,400,500,600,700,800,900]},textDecoration:{enums:["none","underline","overline","line-through"]},textTransform:{enums:["none","uppercase","lowercase"]},textWrap:{enums:["none","wrap","ellipsis"]},textOverflowWrap:{enums:["whitespace","anywhere"]},textBackgroundShape:{enums:["rectangle","roundrectangle","round-rectangle","circle"]},nodeShape:{enums:["rectangle","roundrectangle","round-rectangle","cutrectangle","cut-rectangle","bottomroundrectangle","bottom-round-rectangle","barrel","ellipse","triangle","round-triangle","square","pentagon","round-pentagon","hexagon","round-hexagon","concavehexagon","concave-hexagon","heptagon","round-heptagon","octagon","round-octagon","tag","round-tag","star","diamond","round-diamond","vee","rhomboid","right-rhomboid","polygon"]},overlayShape:{enums:["roundrectangle","round-rectangle","ellipse"]},cornerRadius:{number:!0,min:0,units:"px|em",implicitUnits:"px",enums:["auto"]},compoundIncludeLabels:{enums:["include","exclude"]},arrowShape:{enums:["tee","triangle","triangle-tee","circle-triangle","triangle-cross","triangle-backcurve","vee","square","circle","diamond","chevron","none"]},arrowFill:{enums:["filled","hollow"]},arrowWidth:{number:!0,units:"%|px|em",implicitUnits:"px",enums:["match-line"]},display:{enums:["element","none"]},visibility:{enums:["hidden","visible"]},zCompoundDepth:{enums:["bottom","orphan","auto","top"]},zIndexCompare:{enums:["auto","manual"]},valign:{enums:["top","center","bottom"]},halign:{enums:["left","center","right"]},justification:{enums:["left","center","right","auto"]},text:{string:!0},data:{mapping:!0,regex:n("data")},layoutData:{mapping:!0,regex:n("layoutData")},scratch:{mapping:!0,regex:n("scratch")},mapData:{mapping:!0,regex:s("mapData")},mapLayoutData:{mapping:!0,regex:s("mapLayoutData")},mapScratch:{mapping:!0,regex:s("mapScratch")},fn:{mapping:!0,fn:!0},url:{regexes:o,singleRegexMatchValue:!0},urls:{regexes:o,singleRegexMatchValue:!0,multiple:!0},propList:{propList:!0},angle:{number:!0,units:"deg|rad",implicitUnits:"rad"},textRotation:{number:!0,units:"deg|rad",implicitUnits:"rad",enums:["none","autorotate"]},polygonPointList:{number:!0,multiple:!0,evenMultiple:!0,min:-1,max:1,unitless:!0},edgeDistances:{enums:["intersection","node-position","endpoints"]},edgeEndpoint:{number:!0,multiple:!0,units:"%|px|em|deg|rad",implicitUnits:"px",enums:["inside-to-node","outside-to-node","outside-to-node-or-label","outside-to-line","outside-to-line-or-label"],singleEnum:!0,validate:function($r,Zr){switch($r.length){case 2:return"deg"!==Zr[0]&&"rad"!==Zr[0]&&"deg"!==Zr[1]&&"rad"!==Zr[1];case 1:return je($r[0])||"deg"===Zr[0]||"rad"===Zr[0];default:return!1}}},easing:{regexes:["^(spring)\\s*\\(\\s*("+e+")\\s*,\\s*("+e+")\\s*\\)$","^(cubic-bezier)\\s*\\(\\s*("+e+")\\s*,\\s*("+e+")\\s*,\\s*("+e+")\\s*,\\s*("+e+")\\s*\\)$"],enums:["linear","ease","ease-in","ease-out","ease-in-out","ease-in-sine","ease-out-sine","ease-in-out-sine","ease-in-quad","ease-out-quad","ease-in-out-quad","ease-in-cubic","ease-out-cubic","ease-in-out-cubic","ease-in-quart","ease-out-quart","ease-in-out-quart","ease-in-quint","ease-out-quint","ease-in-out-quint","ease-in-expo","ease-out-expo","ease-in-out-expo","ease-in-circ","ease-out-circ","ease-in-out-circ"]},gradientDirection:{enums:["to-bottom","to-top","to-left","to-right","to-bottom-right","to-bottom-left","to-top-right","to-top-left","to-right-bottom","to-left-bottom","to-right-top","to-left-top"]},boundsExpansion:{number:!0,multiple:!0,min:0,validate:function($r){var Zr=$r.length;return 1===Zr||2===Zr||4===Zr}}};var u={zeroNonZero:function($r,Zr){return(null==$r||null==Zr)&&$r!==Zr||0==$r&&0!=Zr||0!=$r&&0==Zr},any:function($r,Zr){return $r!=Zr},emptyNonEmpty:function($r,Zr){var ma=Nt($r),Ga=Nt(Zr);return ma&&!Ga||!ma&&Ga}},h=dn.types,f=[{name:"label",type:h.text,triggersBounds:u.any,triggersZOrder:u.emptyNonEmpty},{name:"text-rotation",type:h.textRotation,triggersBounds:u.any},{name:"text-margin-x",type:h.bidirectionalSize,triggersBounds:u.any},{name:"text-margin-y",type:h.bidirectionalSize,triggersBounds:u.any}],p=[{name:"source-label",type:h.text,triggersBounds:u.any},{name:"source-text-rotation",type:h.textRotation,triggersBounds:u.any},{name:"source-text-margin-x",type:h.bidirectionalSize,triggersBounds:u.any},{name:"source-text-margin-y",type:h.bidirectionalSize,triggersBounds:u.any},{name:"source-text-offset",type:h.size,triggersBounds:u.any}],x=[{name:"target-label",type:h.text,triggersBounds:u.any},{name:"target-text-rotation",type:h.textRotation,triggersBounds:u.any},{name:"target-text-margin-x",type:h.bidirectionalSize,triggersBounds:u.any},{name:"target-text-margin-y",type:h.bidirectionalSize,triggersBounds:u.any},{name:"target-text-offset",type:h.size,triggersBounds:u.any}],k=[{name:"font-family",type:h.fontFamily,triggersBounds:u.any},{name:"font-style",type:h.fontStyle,triggersBounds:u.any},{name:"font-weight",type:h.fontWeight,triggersBounds:u.any},{name:"font-size",type:h.size,triggersBounds:u.any},{name:"text-transform",type:h.textTransform,triggersBounds:u.any},{name:"text-wrap",type:h.textWrap,triggersBounds:u.any},{name:"text-overflow-wrap",type:h.textOverflowWrap,triggersBounds:u.any},{name:"text-max-width",type:h.size,triggersBounds:u.any},{name:"text-outline-width",type:h.size,triggersBounds:u.any},{name:"line-height",type:h.positiveNumber,triggersBounds:u.any}],_=[{name:"text-valign",type:h.valign,triggersBounds:u.any},{name:"text-halign",type:h.halign,triggersBounds:u.any},{name:"color",type:h.color},{name:"text-outline-color",type:h.color},{name:"text-outline-opacity",type:h.zeroOneNumber},{name:"text-background-color",type:h.color},{name:"text-background-opacity",type:h.zeroOneNumber},{name:"text-background-padding",type:h.size,triggersBounds:u.any},{name:"text-border-opacity",type:h.zeroOneNumber},{name:"text-border-color",type:h.color},{name:"text-border-width",type:h.size,triggersBounds:u.any},{name:"text-border-style",type:h.borderStyle,triggersBounds:u.any},{name:"text-background-shape",type:h.textBackgroundShape,triggersBounds:u.any},{name:"text-justification",type:h.justification},{name:"box-select-labels",type:h.bool,triggersBounds:u.any}],U=[{name:"events",type:h.bool,triggersZOrder:u.any},{name:"text-events",type:h.bool,triggersZOrder:u.any},{name:"box-selection",type:h.boxSelection,triggersZOrder:u.any}],O=[{name:"display",type:h.display,triggersZOrder:u.any,triggersBounds:u.any,triggersBoundsOfConnectedEdges:u.any,triggersBoundsOfParallelEdges:function($r,Zr,ma){return $r!==Zr&&"bezier"===ma.pstyle("curve-style").value}},{name:"visibility",type:h.visibility,triggersZOrder:u.any},{name:"opacity",type:h.zeroOneNumber,triggersZOrder:u.zeroNonZero},{name:"text-opacity",type:h.zeroOneNumber},{name:"min-zoomed-font-size",type:h.size},{name:"z-compound-depth",type:h.zCompoundDepth,triggersZOrder:u.any},{name:"z-index-compare",type:h.zIndexCompare,triggersZOrder:u.any},{name:"z-index",type:h.number,triggersZOrder:u.any}],K=[{name:"overlay-padding",type:h.size,triggersBounds:u.any},{name:"overlay-color",type:h.color},{name:"overlay-opacity",type:h.zeroOneNumber,triggersBounds:u.zeroNonZero},{name:"overlay-shape",type:h.overlayShape,triggersBounds:u.any},{name:"overlay-corner-radius",type:h.cornerRadius}],Y=[{name:"underlay-padding",type:h.size,triggersBounds:u.any},{name:"underlay-color",type:h.color},{name:"underlay-opacity",type:h.zeroOneNumber,triggersBounds:u.zeroNonZero},{name:"underlay-shape",type:h.overlayShape,triggersBounds:u.any},{name:"underlay-corner-radius",type:h.cornerRadius}],j=[{name:"transition-property",type:h.propList},{name:"transition-duration",type:h.time},{name:"transition-delay",type:h.time},{name:"transition-timing-function",type:h.easing}],yt=function($r,Zr){return"label"===Zr.value?-$r.poolIndex():Zr.pfValue},ie=[{name:"height",type:h.nodeSize,triggersBounds:u.any,hashOverride:yt},{name:"width",type:h.nodeSize,triggersBounds:u.any,hashOverride:yt},{name:"shape",type:h.nodeShape,triggersBounds:u.any},{name:"shape-polygon-points",type:h.polygonPointList,triggersBounds:u.any},{name:"corner-radius",type:h.cornerRadius},{name:"background-color",type:h.color},{name:"background-fill",type:h.fill},{name:"background-opacity",type:h.zeroOneNumber},{name:"background-blacken",type:h.nOneOneNumber},{name:"background-gradient-stop-colors",type:h.colors},{name:"background-gradient-stop-positions",type:h.percentages},{name:"background-gradient-direction",type:h.gradientDirection},{name:"padding",type:h.sizeMaybePercent,triggersBounds:u.any},{name:"padding-relative-to",type:h.paddingRelativeTo,triggersBounds:u.any},{name:"bounds-expansion",type:h.boundsExpansion,triggersBounds:u.any}],se=[{name:"border-color",type:h.color},{name:"border-opacity",type:h.zeroOneNumber},{name:"border-width",type:h.size,triggersBounds:u.any},{name:"border-style",type:h.borderStyle},{name:"border-cap",type:h.lineCap},{name:"border-join",type:h.lineJoin},{name:"border-dash-pattern",type:h.numbers},{name:"border-dash-offset",type:h.number},{name:"border-position",type:h.linePosition}],Ht=[{name:"outline-color",type:h.color},{name:"outline-opacity",type:h.zeroOneNumber},{name:"outline-width",type:h.size,triggersBounds:u.any},{name:"outline-style",type:h.borderStyle},{name:"outline-offset",type:h.size,triggersBounds:u.any}],he=[{name:"background-image",type:h.urls},{name:"background-image-crossorigin",type:h.bgCrossOrigin},{name:"background-image-opacity",type:h.zeroOneNumbers},{name:"background-image-containment",type:h.bgContainment},{name:"background-image-smoothing",type:h.bools},{name:"background-position-x",type:h.bgPos},{name:"background-position-y",type:h.bgPos},{name:"background-width-relative-to",type:h.bgRelativeTo},{name:"background-height-relative-to",type:h.bgRelativeTo},{name:"background-repeat",type:h.bgRepeat},{name:"background-fit",type:h.bgFit},{name:"background-clip",type:h.bgClip},{name:"background-width",type:h.bgWH},{name:"background-height",type:h.bgWH},{name:"background-offset-x",type:h.bgPos},{name:"background-offset-y",type:h.bgPos}],me=[{name:"position",type:h.position,triggersBounds:u.any},{name:"compound-sizing-wrt-labels",type:h.compoundIncludeLabels,triggersBounds:u.any},{name:"min-width",type:h.size,triggersBounds:u.any},{name:"min-width-bias-left",type:h.sizeMaybePercent,triggersBounds:u.any},{name:"min-width-bias-right",type:h.sizeMaybePercent,triggersBounds:u.any},{name:"min-height",type:h.size,triggersBounds:u.any},{name:"min-height-bias-top",type:h.sizeMaybePercent,triggersBounds:u.any},{name:"min-height-bias-bottom",type:h.sizeMaybePercent,triggersBounds:u.any}],Te=[{name:"line-style",type:h.lineStyle},{name:"line-color",type:h.color},{name:"line-fill",type:h.fill},{name:"line-cap",type:h.lineCap},{name:"line-opacity",type:h.zeroOneNumber},{name:"line-dash-pattern",type:h.numbers},{name:"line-dash-offset",type:h.number},{name:"line-outline-width",type:h.size},{name:"line-outline-color",type:h.color},{name:"line-gradient-stop-colors",type:h.colors},{name:"line-gradient-stop-positions",type:h.percentages},{name:"curve-style",type:h.curveStyle,triggersBounds:u.any,triggersBoundsOfParallelEdges:function($r,Zr){return $r!==Zr&&("bezier"===$r||"bezier"===Zr)}},{name:"haystack-radius",type:h.zeroOneNumber,triggersBounds:u.any},{name:"source-endpoint",type:h.edgeEndpoint,triggersBounds:u.any},{name:"target-endpoint",type:h.edgeEndpoint,triggersBounds:u.any},{name:"control-point-step-size",type:h.size,triggersBounds:u.any},{name:"control-point-distances",type:h.bidirectionalSizes,triggersBounds:u.any},{name:"control-point-weights",type:h.numbers,triggersBounds:u.any},{name:"segment-distances",type:h.bidirectionalSizes,triggersBounds:u.any},{name:"segment-weights",type:h.numbers,triggersBounds:u.any},{name:"segment-radii",type:h.numbers,triggersBounds:u.any},{name:"radius-type",type:h.radiusType,triggersBounds:u.any},{name:"taxi-turn",type:h.bidirectionalSizeMaybePercent,triggersBounds:u.any},{name:"taxi-turn-min-distance",type:h.size,triggersBounds:u.any},{name:"taxi-direction",type:h.axisDirection,triggersBounds:u.any},{name:"taxi-radius",type:h.number,triggersBounds:u.any},{name:"edge-distances",type:h.edgeDistances,triggersBounds:u.any},{name:"arrow-scale",type:h.positiveNumber,triggersBounds:u.any},{name:"loop-direction",type:h.angle,triggersBounds:u.any},{name:"loop-sweep",type:h.angle,triggersBounds:u.any},{name:"source-distance-from-node",type:h.size,triggersBounds:u.any},{name:"target-distance-from-node",type:h.size,triggersBounds:u.any}],Be=[{name:"ghost",type:h.bool,triggersBounds:u.any},{name:"ghost-offset-x",type:h.bidirectionalSize,triggersBounds:u.any},{name:"ghost-offset-y",type:h.bidirectionalSize,triggersBounds:u.any},{name:"ghost-opacity",type:h.zeroOneNumber}],Me=[{name:"selection-box-color",type:h.color},{name:"selection-box-opacity",type:h.zeroOneNumber},{name:"selection-box-border-color",type:h.color},{name:"selection-box-border-width",type:h.size},{name:"active-bg-color",type:h.color},{name:"active-bg-opacity",type:h.zeroOneNumber},{name:"active-bg-size",type:h.size},{name:"outside-texture-bg-color",type:h.color},{name:"outside-texture-bg-opacity",type:h.zeroOneNumber}],Oe=[];dn.pieBackgroundN=16,Oe.push({name:"pie-size",type:h.sizeMaybePercent}),Oe.push({name:"pie-hole",type:h.sizeMaybePercent}),Oe.push({name:"pie-start-angle",type:h.angle});for(var tr=1;tr<=dn.pieBackgroundN;tr++)Oe.push({name:"pie-"+tr+"-background-color",type:h.color}),Oe.push({name:"pie-"+tr+"-background-size",type:h.percent}),Oe.push({name:"pie-"+tr+"-background-opacity",type:h.zeroOneNumber});var ur=[];dn.stripeBackgroundN=16,ur.push({name:"stripe-size",type:h.sizeMaybePercent}),ur.push({name:"stripe-direction",type:h.axisDirectionPrimary});for(var fr=1;fr<=dn.stripeBackgroundN;fr++)ur.push({name:"stripe-"+fr+"-background-color",type:h.color}),ur.push({name:"stripe-"+fr+"-background-size",type:h.percent}),ur.push({name:"stripe-"+fr+"-background-opacity",type:h.zeroOneNumber});var rr=[],Cr=dn.arrowPrefixes=["source","mid-source","target","mid-target"];[{name:"arrow-shape",type:h.arrowShape,triggersBounds:u.any},{name:"arrow-color",type:h.color},{name:"arrow-fill",type:h.arrowFill},{name:"arrow-width",type:h.arrowWidth}].forEach(function(Kr){Cr.forEach(function($r){rr.push({name:$r+"-"+Kr.name,type:Kr.type,triggersBounds:Kr.triggersBounds})})},{});var Ur=dn.properties=[].concat(U,j,O,K,Y,Be,_,k,f,p,x,ie,se,Ht,he,Oe,ur,me,Te,rr,Me),qr=dn.propertyGroups={behavior:U,transition:j,visibility:O,overlay:K,underlay:Y,ghost:Be,commonLabel:_,labelDimensions:k,mainLabel:f,sourceLabel:p,targetLabel:x,nodeBody:ie,nodeBorder:se,nodeOutline:Ht,backgroundImage:he,pie:Oe,stripe:ur,compound:me,edgeLine:Te,edgeArrow:rr,core:Me},Dr=dn.propertyGroupNames={};(dn.propertyGroupKeys=Object.keys(qr)).forEach(function(Kr){Dr[Kr]=qr[Kr].map(function($r){return $r.name}),qr[Kr].forEach(function($r){return $r.groupKey=Kr})});var ga=dn.aliases=[{name:"content",pointsTo:"label"},{name:"control-point-distance",pointsTo:"control-point-distances"},{name:"control-point-weight",pointsTo:"control-point-weights"},{name:"segment-distance",pointsTo:"segment-distances"},{name:"segment-weight",pointsTo:"segment-weights"},{name:"segment-radius",pointsTo:"segment-radii"},{name:"edge-text-rotation",pointsTo:"text-rotation"},{name:"padding-left",pointsTo:"padding"},{name:"padding-right",pointsTo:"padding"},{name:"padding-top",pointsTo:"padding"},{name:"padding-bottom",pointsTo:"padding"}];dn.propertyNames=Ur.map(function(Kr){return Kr.name});for(var Ea=0;Ea<Ur.length;Ea++){var pa=Ur[Ea];Ur[pa.name]=pa}for(var Aa=0;Aa<ga.length;Aa++){var Ra=ga[Aa],Ta={name:Ra.name,alias:!0,pointsTo:Ur[Ra.pointsTo]};Ur.push(Ta),Ur[Ra.name]=Ta}})(),dn.getDefaultProperty=function(e){return this.getDefaultProperties()[e]},dn.getDefaultProperties=function(){var e=this._private;if(null!=e.defaultProperties)return e.defaultProperties;for(var t=G({"selection-box-color":"#ddd","selection-box-opacity":.65,"selection-box-border-color":"#aaa","selection-box-border-width":1,"active-bg-color":"black","active-bg-opacity":.15,"active-bg-size":30,"outside-texture-bg-color":"#000","outside-texture-bg-opacity":.125,events:"yes","text-events":"no","text-valign":"top","text-halign":"center","text-justification":"auto","line-height":1,color:"#000","box-selection":"contain","text-outline-color":"#000","text-outline-width":0,"text-outline-opacity":1,"text-opacity":1,"text-decoration":"none","text-transform":"none","text-wrap":"none","text-overflow-wrap":"whitespace","text-max-width":9999,"text-background-color":"#000","text-background-opacity":0,"text-background-shape":"rectangle","text-background-padding":0,"text-border-opacity":0,"text-border-width":0,"text-border-style":"solid","text-border-color":"#000","font-family":"Helvetica Neue, Helvetica, sans-serif","font-style":"normal","font-weight":"normal","font-size":16,"min-zoomed-font-size":0,"text-rotation":"none","source-text-rotation":"none","target-text-rotation":"none",visibility:"visible",display:"element",opacity:1,"z-compound-depth":"auto","z-index-compare":"auto","z-index":0,label:"","text-margin-x":0,"text-margin-y":0,"source-label":"","source-text-offset":0,"source-text-margin-x":0,"source-text-margin-y":0,"target-label":"","target-text-offset":0,"target-text-margin-x":0,"target-text-margin-y":0,"overlay-opacity":0,"overlay-color":"#000","overlay-padding":10,"overlay-shape":"round-rectangle","overlay-corner-radius":"auto","underlay-opacity":0,"underlay-color":"#000","underlay-padding":10,"underlay-shape":"round-rectangle","underlay-corner-radius":"auto","transition-property":"none","transition-duration":0,"transition-delay":0,"transition-timing-function":"linear","box-select-labels":"no","background-blacken":0,"background-color":"#999","background-fill":"solid","background-opacity":1,"background-image":"none","background-image-crossorigin":"anonymous","background-image-opacity":1,"background-image-containment":"inside","background-image-smoothing":"yes","background-position-x":"50%","background-position-y":"50%","background-offset-x":0,"background-offset-y":0,"background-width-relative-to":"include-padding","background-height-relative-to":"include-padding","background-repeat":"no-repeat","background-fit":"none","background-clip":"node","background-width":"auto","background-height":"auto","border-color":"#000","border-opacity":1,"border-width":0,"border-style":"solid","border-dash-pattern":[4,2],"border-dash-offset":0,"border-cap":"butt","border-join":"miter","border-position":"center","outline-color":"#999","outline-opacity":1,"outline-width":0,"outline-offset":0,"outline-style":"solid",height:30,width:30,shape:"ellipse","shape-polygon-points":"-1, -1,   1, -1,   1, 1,   -1, 1","corner-radius":"auto","bounds-expansion":0,"background-gradient-direction":"to-bottom","background-gradient-stop-colors":"#999","background-gradient-stop-positions":"0%",ghost:"no","ghost-offset-y":0,"ghost-offset-x":0,"ghost-opacity":0,padding:0,"padding-relative-to":"width",position:"origin","compound-sizing-wrt-labels":"include","min-width":0,"min-width-bias-left":0,"min-width-bias-right":0,"min-height":0,"min-height-bias-top":0,"min-height-bias-bottom":0},{"pie-size":"100%","pie-hole":0,"pie-start-angle":"0deg"},[{name:"pie-{{i}}-background-color",value:"black"},{name:"pie-{{i}}-background-size",value:"0%"},{name:"pie-{{i}}-background-opacity",value:1}].reduce(function(u,h){for(var f=1;f<=dn.pieBackgroundN;f++)u[h.name.replace("{{i}}",f)]=h.value;return u},{}),{"stripe-size":"100%","stripe-direction":"horizontal"},[{name:"stripe-{{i}}-background-color",value:"black"},{name:"stripe-{{i}}-background-size",value:"0%"},{name:"stripe-{{i}}-background-opacity",value:1}].reduce(function(u,h){for(var f=1;f<=dn.stripeBackgroundN;f++)u[h.name.replace("{{i}}",f)]=h.value;return u},{}),{"line-style":"solid","line-color":"#999","line-fill":"solid","line-cap":"butt","line-opacity":1,"line-outline-width":0,"line-outline-color":"#000","line-gradient-stop-colors":"#999","line-gradient-stop-positions":"0%","control-point-step-size":40,"control-point-weights":.5,"segment-weights":.5,"segment-distances":20,"segment-radii":15,"radius-type":"arc-radius","taxi-turn":"50%","taxi-radius":15,"taxi-turn-min-distance":10,"taxi-direction":"auto","edge-distances":"intersection","curve-style":"haystack","haystack-radius":0,"arrow-scale":1,"loop-direction":"-45deg","loop-sweep":"-90deg","source-distance-from-node":0,"target-distance-from-node":0,"source-endpoint":"outside-to-node","target-endpoint":"outside-to-node","line-dash-pattern":[6,3],"line-dash-offset":0},[{name:"arrow-shape",value:"none"},{name:"arrow-color",value:"#999"},{name:"arrow-fill",value:"filled"},{name:"arrow-width",value:1}].reduce(function(u,h){return dn.arrowPrefixes.forEach(function(f){u[f+"-"+h.name]=h.value}),u},{})),r={},a=0;a<this.properties.length;a++){var i=this.properties[a];if(!i.pointsTo){var n=i.name,o=this.parse(n,t[n]);r[n]=o}}return e.defaultProperties=r,e.defaultProperties},dn.addDefaultStylesheet=function(){this.selector(":parent").css({shape:"rectangle",padding:10,"background-color":"#eee","border-color":"#ccc","border-width":1}).selector("edge").css({width:3}).selector(":loop").css({"curve-style":"bezier"}).selector("edge:compound").css({"curve-style":"bezier","source-endpoint":"outside-to-line","target-endpoint":"outside-to-line"}).selector(":selected").css({"background-color":"#0169D9","line-color":"#0169D9","source-arrow-color":"#0169D9","target-arrow-color":"#0169D9","mid-source-arrow-color":"#0169D9","mid-target-arrow-color":"#0169D9"}).selector(":parent:selected").css({"background-color":"#CCE1F9","border-color":"#aec8e5"}).selector(":active").css({"overlay-color":"black","overlay-padding":10,"overlay-opacity":.25}),this.defaultLength=this.length};var Jo={parse:function(e,t,r,a){var i=this;if(z(t))return i.parseImplWarn(e,t,r,a);var f,u=Pa(e,""+t,r?"t":"f","mapping"===a||!0===a||!1===a||null==a?"dontcare":a),h=i.propCache=i.propCache||[];return(f=h[u])||(f=h[u]=i.parseImplWarn(e,t,r,a)),(r||"mapping"===a)&&(f=Ha(f))&&(f.value=Ha(f.value)),f},parseImplWarn:function(e,t,r,a){var i=this.parseImpl(e,t,r,a);return!i&&null!=t&&_a("The style property `".concat(e,": ").concat(t,"` is invalid")),i&&("width"===i.name||"height"===i.name)&&"label"===t&&_a("The style value of `label` is deprecated for `"+i.name+"`"),i},parseImpl:function(e,t,r,a){var i=this;e=oe(e);var n=i.properties[e],s=t,o=i.types;if(!n||void 0===t)return null;n.alias&&(e=(n=n.pointsTo).name);var u=je(t);u&&(t=t.trim());var f,p,h=n.type;if(!h)return null;if(r&&(""===t||null===t))return{name:e,value:t,bypass:!0,deleteBypass:!0};if(z(t))return{name:e,value:t,strValue:"fn",mapped:o.fn,bypass:r};if(!(!u||a||t.length<7||"a"!==t[1])){if(t.length>=7&&"d"===t[0]&&(f=new RegExp(o.data.regex).exec(t)))return!r&&{name:e,value:f,strValue:""+t,mapped:o.data,field:f[1],bypass:r};if(t.length>=10&&"m"===t[0]&&(p=new RegExp(o.mapData.regex).exec(t))){if(r||h.multiple)return!1;var k=o.mapData;if(!h.color&&!h.number)return!1;var _=this.parse(e,p[4]);if(!_||_.mapped)return!1;var U=this.parse(e,p[5]);if(!U||U.mapped)return!1;if(_.pfValue===U.pfValue||_.strValue===U.strValue)return _a("`"+e+": "+t+"` is not a valid mapper because the output range is zero; converting to `"+e+": "+_.strValue+"`"),this.parse(e,_.strValue);if(h.color){var O=_.value,K=U.value;if(!(O[0]!==K[0]||O[1]!==K[1]||O[2]!==K[2]||O[3]!==K[3]&&(null!=O[3]&&1!==O[3]||null!=K[3]&&1!==K[3])))return!1}return{name:e,value:p,strValue:""+t,mapped:k,field:p[1],fieldMin:parseFloat(p[2]),fieldMax:parseFloat(p[3]),valueMin:_.value,valueMax:U.value,bypass:r}}}if(h.multiple&&"multiple"!==a){var j;if(j=u?t.split(/\s+/):ft(t)?t:[t],h.evenMultiple&&j.length%2!=0)return null;for(var yt=[],ie=[],se=[],Ht="",he=!1,me=0;me<j.length;me++){var Te=i.parse(e,j[me],r,"multiple");he=he||je(Te.value),yt.push(Te.value),se.push(null!=Te.pfValue?Te.pfValue:Te.value),ie.push(Te.units),Ht+=(me>0?" ":"")+Te.strValue}return h.validate&&!h.validate(yt,ie)?null:h.singleEnum&&he?1===yt.length&&je(yt[0])?{name:e,value:yt[0],strValue:yt[0],bypass:r}:null:{name:e,value:yt,pfValue:se,strValue:Ht,bypass:r,units:ie}}var Be=function(){for(var Ta=0;Ta<h.enums.length;Ta++)if(h.enums[Ta]===t)return{name:e,value:t,strValue:""+t,bypass:r};return null};if(h.number){var Me,Oe="px";if(h.units&&(Me=h.units),h.implicitUnits&&(Oe=h.implicitUnits),!h.unitless)if(u){var tr="px|em"+(h.allowPercent?"|\\%":"");Me&&(tr=Me);var ur=t.match("^("+B+")("+tr+")?$");ur&&(t=ur[1],Me=ur[2]||Oe)}else(!Me||h.implicitUnits)&&(Me=Oe);if(t=parseFloat(t),isNaN(t)&&void 0===h.enums)return null;if(isNaN(t)&&void 0!==h.enums)return t=s,Be();if(h.integer&&!function(t){return X(t)&&Math.floor(t)===t}(t)||void 0!==h.min&&(t<h.min||h.strictMin&&t===h.min)||void 0!==h.max&&(t>h.max||h.strictMax&&t===h.max))return null;var fr={name:e,value:t,strValue:""+t+(Me||""),units:Me,bypass:r};return fr.pfValue=h.unitless||"px"!==Me&&"em"!==Me?t:"px"!==Me&&Me?this.getEmSizeInPixels()*t:t,("ms"===Me||"s"===Me)&&(fr.pfValue="ms"===Me?t:1e3*t),("deg"===Me||"rad"===Me)&&(fr.pfValue="rad"===Me?t:function(t){return Math.PI*t/180}(t)),"%"===Me&&(fr.pfValue=t/100),fr}if(h.propList){var rr=[],Cr=""+t;if("none"!==Cr){for(var Ur=Cr.split(/\s*,\s*|\s+/),qr=0;qr<Ur.length;qr++){var Dr=Ur[qr].trim();i.properties[Dr]?rr.push(Dr):_a("`"+Dr+"` is not a valid property name")}if(0===rr.length)return null}return{name:e,value:rr,strValue:0===rr.length?"none":rr.join(" "),bypass:r}}if(h.color){var Wr=pe(t);return Wr?{name:e,value:Wr,pfValue:Wr,strValue:"rgb("+Wr[0]+","+Wr[1]+","+Wr[2]+")",bypass:r}:null}if(h.regex||h.regexes){if(h.enums){var ga=Be();if(ga)return ga}for(var Ea=h.regexes?h.regexes:[h.regex],pa=0;pa<Ea.length;pa++){var Ra=new RegExp(Ea[pa]).exec(t);if(Ra)return{name:e,value:h.singleRegexMatchValue?Ra[1]:Ra,strValue:""+t,bypass:r}}return null}return h.string?{name:e,value:""+t,strValue:""+t,bypass:r}:h.enums?Be():null}},En=function(t){if(!(this instanceof En))return new En(t);V(t)?(this._private={cy:t,coreStyle:{}},this.length=0,this.resetToDefault()):Ka("A style must have a core reference")},In=En.prototype;In.instanceString=function(){return"style"},In.clear=function(){for(var e=this._private,r=e.cy.elements(),a=0;a<this.length;a++)this[a]=void 0;return this.length=0,e.contextStyles={},e.propDiffs={},this.cleanElements(r,!0),r.forEach(function(i){var n=i[0]._private;n.styleDirty=!0,n.appliedInitStyle=!1}),this},In.resetToDefault=function(){return this.clear(),this.addDefaultStylesheet(),this},In.core=function(e){return this._private.coreStyle[e]||this.getDefaultProperty(e)},In.selector=function(e){var t="core"===e?null:new gs(e),r=this.length++;return this[r]={selector:t,properties:[],mappedProperties:[],index:r},this},In.css=function(){var t=arguments;if(1===t.length)for(var r=t[0],a=0;a<this.properties.length;a++){var i=this.properties[a],n=r[i.name];void 0===n&&(n=r[qe(i.name)]),void 0!==n&&this.cssRule(i.name,n)}else 2===t.length&&this.cssRule(t[0],t[1]);return this},In.style=In.css,In.cssRule=function(e,t){var r=this.parse(e,t);if(r){var a=this.length-1;this[a].properties.push(r),this[a].properties[r.name]=r,r.name.match(/pie-(\d+)-background-size/)&&r.value&&(this._private.hasPie=!0),r.name.match(/stripe-(\d+)-background-size/)&&r.value&&(this._private.hasStripe=!0),r.mapped&&this[a].mappedProperties.push(r),!this[a].selector&&(this._private.coreStyle[r.name]=r)}return this},In.append=function(e){return pt(e)?e.appendToStyle(this):ft(e)?this.appendFromJson(e):je(e)&&this.appendFromString(e),this},En.fromJson=function(e,t){var r=new En(e);return r.fromJson(t),r},En.fromString=function(e,t){return new En(e).fromString(t)},[_n,fo,Ic,es,Qo,Mc,dn,Jo].forEach(function(e){G(In,e)}),En.types=In.types,En.properties=In.properties,En.propertyGroups=In.propertyGroups,En.propertyGroupNames=In.propertyGroupNames,En.propertyGroupKeys=In.propertyGroupKeys;var k1={style:function(t){return t&&this.setStyle(t).update(),this._private.style},setStyle:function(t){var r=this._private;return r.style=pt(t)?t.generateStyle(this):ft(t)?En.fromJson(this,t):je(t)?En.fromString(this,t):En(this),r.style},updateStyle:function(){this.mutableElements().updateStyle()}},Ts={autolock:function(t){return void 0===t?this._private.autolock:(this._private.autolock=!!t,this)},autoungrabify:function(t){return void 0===t?this._private.autoungrabify:(this._private.autoungrabify=!!t,this)},autounselectify:function(t){return void 0===t?this._private.autounselectify:(this._private.autounselectify=!!t,this)},selectionType:function(t){var r=this._private;return null==r.selectionType&&(r.selectionType="single"),void 0===t?r.selectionType:(("additive"===t||"single"===t)&&(r.selectionType=t),this)},panningEnabled:function(t){return void 0===t?this._private.panningEnabled:(this._private.panningEnabled=!!t,this)},userPanningEnabled:function(t){return void 0===t?this._private.userPanningEnabled:(this._private.userPanningEnabled=!!t,this)},zoomingEnabled:function(t){return void 0===t?this._private.zoomingEnabled:(this._private.zoomingEnabled=!!t,this)},userZoomingEnabled:function(t){return void 0===t?this._private.userZoomingEnabled:(this._private.userZoomingEnabled=!!t,this)},boxSelectionEnabled:function(t){return void 0===t?this._private.boxSelectionEnabled:(this._private.boxSelectionEnabled=!!t,this)},pan:function(){var a,i,n,s,o,t=arguments,r=this._private.pan;switch(t.length){case 0:return r;case 1:if(je(t[0]))return r[a=t[0]];if(Bt(t[0])){if(!this._private.panningEnabled)return this;o=(n=t[0]).y,X(s=n.x)&&(r.x=s),X(o)&&(r.y=o),this.emit("pan viewport")}break;case 2:if(!this._private.panningEnabled)return this;i=t[1],("x"===(a=t[0])||"y"===a)&&X(i)&&(r[a]=i),this.emit("pan viewport")}return this.notify("viewport"),this},panBy:function(t,r){var n,s,o,u,h,a=arguments,i=this._private.pan;if(!this._private.panningEnabled)return this;switch(a.length){case 1:Bt(t)&&(h=(o=a[0]).y,X(u=o.x)&&(i.x+=u),X(h)&&(i.y+=h),this.emit("pan viewport"));break;case 2:s=r,("x"===(n=t)||"y"===n)&&X(s)&&(i[n]+=s),this.emit("pan viewport")}return this.notify("viewport"),this},gc:function(){this.notify("gc")},fit:function(t,r){var a=this.getFitViewport(t,r);if(a){var i=this._private;i.zoom=a.zoom,i.pan=a.pan,this.emit("pan zoom viewport"),this.notify("viewport")}return this},getFitViewport:function(t,r){var a;if((X(t)&&void 0===r&&(r=t,t=void 0),this._private.panningEnabled&&this._private.zoomingEnabled)&&(je(t)?t=this.$(t):!function(t){return Bt(t)&&X(t.x1)&&X(t.x2)&&X(t.y1)&&X(t.y2)}(t)?re(t)||(t=this.mutableElements()):((a={x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2}).w=a.x2-a.x1,a.h=a.y2-a.y1),!re(t)||!t.empty())){a=a||t.boundingBox();var u,s=this.width(),o=this.height();if(r=X(r)?r:0,!isNaN(s)&&!isNaN(o)&&s>0&&o>0&&!isNaN(a.w)&&!isNaN(a.h)&&a.w>0&&a.h>0)return{zoom:u=(u=(u=Math.min((s-2*r)/a.w,(o-2*r)/a.h))>this._private.maxZoom?this._private.maxZoom:u)<this._private.minZoom?this._private.minZoom:u,pan:{x:(s-u*(a.x1+a.x2))/2,y:(o-u*(a.y1+a.y2))/2}}}},zoomRange:function(t,r){var a=this._private;if(null==r){var i=t;t=i.min,r=i.max}return X(t)&&X(r)&&t<=r?(a.minZoom=t,a.maxZoom=r):X(t)&&void 0===r&&t<=a.maxZoom?a.minZoom=t:X(r)&&void 0===t&&r>=a.minZoom&&(a.maxZoom=r),this},minZoom:function(t){return void 0===t?this._private.minZoom:this.zoomRange({min:t})},maxZoom:function(t){return void 0===t?this._private.maxZoom:this.zoomRange({max:t})},getZoomedViewport:function(t){var n,s,r=this._private,a=r.pan,i=r.zoom,o=!1;return r.zoomingEnabled||(o=!0),X(t)?s=t:Bt(t)&&(s=t.level,null!=t.position?n=Bn(t.position,i,a):null!=t.renderedPosition&&(n=t.renderedPosition),null!=n&&!r.panningEnabled&&(o=!0)),s=(s=s>r.maxZoom?r.maxZoom:s)<r.minZoom?r.minZoom:s,!o&&X(s)&&s!==i&&(null==n||X(n.x)&&X(n.y))?null!=n?{zoomed:!0,panned:!0,zoom:s,pan:{x:-s/i*(n.x-a.x)+n.x,y:-s/i*(n.y-a.y)+n.y}}:{zoomed:!0,panned:!1,zoom:s,pan:a}:null},zoom:function(t){if(void 0===t)return this._private.zoom;var r=this.getZoomedViewport(t),a=this._private;return null!=r&&r.zoomed?(a.zoom=r.zoom,r.panned&&(a.pan.x=r.pan.x,a.pan.y=r.pan.y),this.emit("zoom"+(r.panned?" pan":"")+" viewport"),this.notify("viewport"),this):this},viewport:function(t){var r=this._private,a=!0,i=!0,n=[],s=!1,o=!1;if(!t)return this;if(X(t.zoom)||(a=!1),Bt(t.pan)||(i=!1),!a&&!i)return this;if(a){var u=t.zoom;u<r.minZoom||u>r.maxZoom||!r.zoomingEnabled?s=!0:(r.zoom=u,n.push("zoom"))}if(i&&(!s||!t.cancelOnFailedZoom)&&r.panningEnabled){var h=t.pan;X(h.x)&&(r.pan.x=h.x,o=!1),X(h.y)&&(r.pan.y=h.y,o=!1),o||n.push("pan")}return n.length>0&&(n.push("viewport"),this.emit(n.join(" ")),this.notify("viewport")),this},center:function(t){var r=this.getCenterPan(t);return r&&(this._private.pan=r,this.emit("pan viewport"),this.notify("viewport")),this},getCenterPan:function(t,r){if(this._private.panningEnabled){if(je(t)){var a=t;t=this.mutableElements().filter(a)}else re(t)||(t=this.mutableElements());if(0!==t.length){var i=t.boundingBox(),n=this.width(),s=this.height();return{x:(n-(r=void 0===r?this._private.zoom:r)*(i.x1+i.x2))/2,y:(s-r*(i.y1+i.y2))/2}}}},reset:function(){return this._private.panningEnabled&&this._private.zoomingEnabled?(this.viewport({pan:{x:0,y:0},zoom:1}),this):this},invalidateSize:function(){this._private.sizeCache=null},size:function(){var i,n,t=this._private,r=t.container;return t.sizeCache=t.sizeCache||(r?(i=this.window().getComputedStyle(r),{width:r.clientWidth-(n=function(o){return parseFloat(i.getPropertyValue(o))})("padding-left")-n("padding-right"),height:r.clientHeight-n("padding-top")-n("padding-bottom")}):{width:1,height:1})},width:function(){return this.size().width},height:function(){return this.size().height},extent:function(){var t=this._private.pan,r=this._private.zoom,a=this.renderedExtent(),i={x1:(a.x1-t.x)/r,x2:(a.x2-t.x)/r,y1:(a.y1-t.y)/r,y2:(a.y2-t.y)/r};return i.w=i.x2-i.x1,i.h=i.y2-i.y1,i},renderedExtent:function(){var t=this.width(),r=this.height();return{x1:0,y1:0,x2:t,y2:r,w:t,h:r}},multiClickDebounceTime:function(t){return t?(this._private.multiClickDebounceTime=t,this):this._private.multiClickDebounceTime}};Ts.centre=Ts.center,Ts.autolockNodes=Ts.autolock,Ts.autoungrabifyNodes=Ts.autoungrabify;var go={data:$i.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeData:$i.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),scratch:$i.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:$i.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0})};go.attr=go.data,go.removeAttr=go.removeData;var po=function(t){var r=this,a=(t=G({},t)).container;a&&!w(a)&&w(a[0])&&(a=a[0]);var i=a?a._cyreg:null;(i=i||{})&&i.cy&&(i.cy.destroy(),i={});var n=i.readies=i.readies||[];a&&(a._cyreg=i),i.cy=r;var s=void 0!==wr&&void 0!==a&&!t.headless,o=t;o.layout=G({name:s?"grid":"null"},o.layout),o.renderer=G({name:s?"canvas":"null"},o.renderer);var u=function(_,U,O){return void 0!==U?U:void 0!==O?O:_},h=this._private={container:a,ready:!1,options:o,elements:new wn(this),listeners:[],aniEles:new wn(this),data:o.data||{},scratch:{},layout:null,renderer:null,destroyed:!1,notificationsEnabled:!0,minZoom:1e-50,maxZoom:1e50,zoomingEnabled:u(!0,o.zoomingEnabled),userZoomingEnabled:u(!0,o.userZoomingEnabled),panningEnabled:u(!0,o.panningEnabled),userPanningEnabled:u(!0,o.userPanningEnabled),boxSelectionEnabled:u(!0,o.boxSelectionEnabled),autolock:u(!1,o.autolock,o.autolockNodes),autoungrabify:u(!1,o.autoungrabify,o.autoungrabifyNodes),autounselectify:u(!1,o.autounselectify),styleEnabled:void 0===o.styleEnabled?s:o.styleEnabled,zoom:X(o.zoom)?o.zoom:1,pan:{x:Bt(o.pan)&&X(o.pan.x)?o.pan.x:0,y:Bt(o.pan)&&X(o.pan.y)?o.pan.y:0},animation:{current:[],queue:[]},hasCompoundNodes:!1,multiClickDebounceTime:u(250,o.multiClickDebounceTime)};this.createEmitter(),this.selectionType(o.selectionType),this.zoomRange({min:o.minZoom,max:o.maxZoom}),h.styleEnabled&&r.setStyle([]);var p=G({},o,o.renderer);r.initRenderer(p),function(_,U){if(_.some(ye))return Ks.all(_).then(U);U(_)}([o.style,o.elements],function(k){var _=k[0],U=k[1];h.styleEnabled&&r.style().append(_),function(_,U,O){r.notifications(!1);var K=r.mutableElements();K.length>0&&K.remove(),null!=_&&(Bt(_)||ft(_))&&r.add(_),r.one("layoutready",function(j){r.notifications(!0),r.emit(j),r.one("load",U),r.emitAndNotify("load")}).one("layoutstop",function(){r.one("done",O),r.emit("done")});var Y=G({},r._private.options.layout);Y.eles=r.elements(),r.layout(Y).run()}(U,function(){r.startAnimationLoop(),h.ready=!0,z(o.ready)&&r.on("ready",o.ready);for(var O=0;O<n.length;O++)r.on("ready",n[O]);i&&(i.readies=[]),r.emit("ready")},o.done)})},tl=po.prototype;G(tl,{instanceString:function(){return"core"},isReady:function(){return this._private.ready},destroyed:function(){return this._private.destroyed},ready:function(t){return this.isReady()?this.emitter().emit("ready",[],t):this.on("ready",t),this},destroy:function(){var t=this;if(!t.destroyed())return t.stopAnimationLoop(),t.destroyRenderer(),this.emit("destroy"),t._private.destroyed=!0,t},hasElementWithId:function(t){return this._private.elements.hasElementWithId(t)},getElementById:function(t){return this._private.elements.getElementById(t)},hasCompoundNodes:function(){return this._private.hasCompoundNodes},headless:function(){return this._private.renderer.isHeadless()},styleEnabled:function(){return this._private.styleEnabled},addToPool:function(t){return this._private.elements.merge(t),this},removeFromPool:function(t){return this._private.elements.unmerge(t),this},container:function(){return this._private.container||null},window:function(){if(null==this._private.container)return wr;var r=this._private.container.ownerDocument;return void 0===r||null==r?wr:r.defaultView||wr},mount:function(t){if(null!=t){var r=this,a=r._private,i=a.options;return!w(t)&&w(t[0])&&(t=t[0]),r.stopAnimationLoop(),r.destroyRenderer(),a.container=t,a.styleEnabled=!0,r.invalidateSize(),r.initRenderer(G({},i,i.renderer,{name:"null"===i.renderer.name?"canvas":i.renderer.name})),r.startAnimationLoop(),r.style(i.style),r.emit("mount"),r}},unmount:function(){var t=this;return t.stopAnimationLoop(),t.destroyRenderer(),t.initRenderer({name:"null"}),t.emit("unmount"),t},options:function(){return Ha(this._private.options)},json:function(t){var r=this,a=r._private,i=r.mutableElements();if(Bt(t)){if(r.startBatch(),t.elements){var s={},o=function(yt,ie){for(var se=[],Ht=[],he=0;he<yt.length;he++){var me=yt[he];if(me.data.id){var Te=""+me.data.id,Be=r.getElementById(Te);s[Te]=!0,0!==Be.length?Ht.push({ele:Be,json:me}):(ie&&(me.group=ie),se.push(me))}else _a("cy.json() cannot handle elements without an ID attribute")}r.add(se);for(var Me=0;Me<Ht.length;Me++){var Oe=Ht[Me];Oe.ele.json(Oe.json)}};if(ft(t.elements))o(t.elements);else for(var u=["nodes","edges"],h=0;h<u.length;h++){var f=u[h],p=t.elements[f];ft(p)&&o(p,f)}var x=r.collection();i.filter(function(j){return!s[j.id()]}).forEach(function(j){j.isParent()?x.merge(j):j.remove()}),x.forEach(function(j){return j.children().move({parent:null})}),x.forEach(function(j){return(yt=j,r.getElementById(yt.id())).remove();var yt})}t.style&&r.style(t.style),null!=t.zoom&&t.zoom!==a.zoom&&r.zoom(t.zoom),t.pan&&(t.pan.x!==a.pan.x||t.pan.y!==a.pan.y)&&r.pan(t.pan),t.data&&r.data(t.data);for(var k=["minZoom","maxZoom","zoomingEnabled","userZoomingEnabled","panningEnabled","userPanningEnabled","boxSelectionEnabled","autolock","autoungrabify","autounselectify","multiClickDebounceTime"],_=0;_<k.length;_++){var U=k[_];null!=t[U]&&r[U](t[U])}return r.endBatch(),this}var K={};t?K.elements=this.elements().map(function(j){return j.json()}):(K.elements={},i.forEach(function(j){var yt=j.group();K.elements[yt]||(K.elements[yt]=[]),K.elements[yt].push(j.json())})),this._private.styleEnabled&&(K.style=r.style().json()),K.data=Ha(r.data());var Y=a.options;return K.zoomingEnabled=a.zoomingEnabled,K.userZoomingEnabled=a.userZoomingEnabled,K.zoom=a.zoom,K.minZoom=a.minZoom,K.maxZoom=a.maxZoom,K.panningEnabled=a.panningEnabled,K.userPanningEnabled=a.userPanningEnabled,K.pan=Ha(a.pan),K.boxSelectionEnabled=a.boxSelectionEnabled,K.renderer=Ha(Y.renderer),K.hideEdgesOnViewport=Y.hideEdgesOnViewport,K.textureOnViewport=Y.textureOnViewport,K.wheelSensitivity=Y.wheelSensitivity,K.motionBlur=Y.motionBlur,K.multiClickDebounceTime=Y.multiClickDebounceTime,K}}),tl.$id=tl.getElementById,[f1,x1,md,Rc,Xo,_1,Pc,Zo,k1,Ts,go].forEach(function(e){G(tl,e)});var S1={fit:!0,directed:!1,direction:"downward",padding:30,circle:!1,grid:!1,spacingFactor:1.75,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,roots:void 0,depthSort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(t,r){return!0},ready:void 0,stop:void 0,transform:function(t,r){return r}},w1={maximal:!1,acyclic:!1},Gs=function(t){return t.scratch("breadthfirst")},xd=function(t,r){return t.scratch("breadthfirst",r)};function bd(e){this.options=G({},S1,w1,e)}bd.prototype.run=function(){var h,e=this.options,t=e.cy,r=e.eles,a=r.nodes().filter(function(gi){return gi.isChildless()}),i=r,n=e.directed,s=e.acyclic||e.maximal||e.maximalAdjustments>0,o=!!e.boundingBox,u=kt(o?e.boundingBox:structuredClone(t.extent()));if(re(e.roots))h=e.roots;else if(ft(e.roots)){for(var f=[],p=0;p<e.roots.length;p++){var k=t.getElementById(e.roots[p]);f.push(k)}h=t.collection(f)}else if(je(e.roots))h=t.$(e.roots);else if(n)h=a.roots();else{var _=r.components();h=t.collection();for(var U=function(){var Qa=_[O],ci=Qa.maxDegree(!1),di=Qa.filter(function(_i){return _i.degree(!1)===ci});h=h.add(di)},O=0;O<_.length;O++)U()}var K=[],Y={},j=function(Qa,ci){null==K[ci]&&(K[ci]=[]);var di=K[ci].length;K[ci].push(Qa),xd(Qa,{index:di,depth:ci})};i.bfs({roots:h,directed:e.directed,visit:function(Qa,ci,di,_i,fi){var wi=Qa[0],Mi=wi.id();wi.isChildless()&&j(wi,fi),Y[Mi]=!0}});for(var ie=[],se=0;se<a.length;se++){var Ht=a[se];Y[Ht.id()]||ie.push(Ht)}var he=function(Qa){for(var ci=K[Qa],di=0;di<ci.length;di++){var _i=ci[di];null!=_i?xd(_i,{depth:Qa,index:di}):(ci.splice(di,1),di--)}},me=function(Qa,ci){for(var di=Gs(Qa),_i=Qa.incomers().filter(function(bi){return bi.isNode()&&r.has(bi)}),fi=-1,wi=Qa.id(),Mi=0;Mi<_i.length;Mi++){var Hi=Gs(_i[Mi]);fi=Math.max(fi,Hi.depth)}if(di.depth<=fi){if(!e.acyclic&&ci[wi])return null;var Gi=fi+1;return function(Qa,ci){var di=Gs(Qa);K[di.depth][di.index]=null,Qa.isChildless()&&j(Qa,ci)}(Qa,Gi),ci[wi]=Gi,!0}return!1};if(n&&s){var Te=[],Be={},Me=function(Qa){return Te.push(Qa)},Oe=function(){return Te.shift()};for(a.forEach(function(gi){return Te.push(gi)});Te.length>0;){var tr=Oe(),ur=me(tr,Be);if(ur)tr.outgoers().filter(function(gi){return gi.isNode()&&r.has(gi)}).forEach(Me);else if(null===ur){_a("Detected double maximal shift for node `"+tr.id()+"`.  Bailing maximal adjustment due to cycle.  Use `options.maximal: true` only on DAGs.");break}}}var fr=0;if(e.avoidOverlap)for(var rr=0;rr<a.length;rr++){var Ur=a[rr].layoutDimensions(e);fr=Math.max(fr,Ur.w,Ur.h)}var Wr={},ga=function(Qa){if(Wr[Qa.id()])return Wr[Qa.id()];for(var ci=Gs(Qa).depth,di=Qa.neighborhood(),_i=0,fi=0,wi=0;wi<di.length;wi++){var Mi=di[wi];if(!Mi.isEdge()&&!Mi.isParent()&&a.has(Mi)){var Yi=Gs(Mi);if(null!=Yi){var Hi=Yi.index,Gi=Yi.depth;null!=Hi&&null!=Gi&&Gi<ci&&(_i+=Hi/K[Gi].length,fi++)}}}return _i/=fi=Math.max(1,fi),0===fi&&(_i=0),Wr[Qa.id()]=_i,_i},Ea=function(Qa,ci){var fi=ga(Qa)-ga(ci);return 0===fi?ht(Qa.id(),ci.id()):fi};void 0!==e.depthSort&&(Ea=e.depthSort);for(var pa=K.length,Aa=0;Aa<pa;Aa++)K[Aa].sort(Ea),he(Aa);for(var Ra=[],Za=0;Za<ie.length;Za++)Ra.push(ie[Za]);Ra.length&&(K.unshift(Ra),pa=K.length,function(){for(var Qa=0;Qa<pa;Qa++)he(Qa)}());for(var Kr=0,$r=0;$r<pa;$r++)Kr=Math.max(K[$r].length,Kr);var Zr_x=u.x1+u.w/2,Zr_y=u.y1+u.h/2,ma=a.reduce(function(gi,Qa){return ci=Qa.boundingBox({includeLabels:e.nodeDimensionsIncludeLabels}),{w:-1===gi.w?ci.w:(gi.w+ci.w)/2,h:-1===gi.h?ci.h:(gi.h+ci.h)/2};var ci},{w:-1,h:-1}),Ga=Math.max(1===pa?0:o?(u.h-2*e.padding-ma.h)/(pa-1):(u.h-2*e.padding-ma.h)/(pa+1),fr),li=K.reduce(function(gi,Qa){return Math.max(gi,Qa.length)},0),Ci={downward:0,leftward:90,upward:180,rightward:-90};return-1===Object.keys(Ci).indexOf(e.direction)&&Ka("Invalid direction '".concat(e.direction,"' specified for breadthfirst layout. Valid values are: ").concat(Object.keys(Ci).join(", "))),r.nodes().layoutPositions(this,e,function(Qa){return function ba(e,t,r){if(0===r)return e;var a=(t.x1+t.x2)/2,i=(t.y1+t.y2)/2,n=t.w/t.h,s=1/n,o=function Wa(e,t,r,a,i){var n=i*Math.PI/180;return{x:Math.cos(n)*(e-r)-Math.sin(n)*(t-a)+r,y:Math.sin(n)*(e-r)+Math.cos(n)*(t-a)+a}}(e.x,e.y,a,i,r),u=function(t,r,a,i,n,s){return{x:(t-a)*n+a,y:(r-i)*s+i}}(o.x,o.y,a,i,n,s);return{x:u.x,y:u.y}}(function(Qa){var ci=Gs(Qa),di=ci.depth,_i=ci.index;if(e.circle){var fi=Math.min(u.w/2/pa,u.h/2/pa),wi=(fi=Math.max(fi,fr))*di+fi-(pa>0&&K[0].length<=3?fi/2:0),Mi=2*Math.PI/K[di].length*_i;return 0===di&&1===K[0].length&&(wi=1),{x:Zr_x+wi*Math.cos(Mi),y:Zr_y+wi*Math.sin(Mi)}}var Yi=K[di].length,Hi=Math.max(1===Yi?0:o?(u.w-2*e.padding-ma.w)/((e.grid?li:Yi)-1):(u.w-2*e.padding-ma.w)/((e.grid?li:Yi)+1),fr);return{x:Zr_x+(_i+1-(Yi+1)/2)*Hi,y:Zr_y+(di+1-(pa+1)/2)*Ga}}(Qa),u,Ci[e.direction])}),this};var A1={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,radius:void 0,startAngle:1.5*Math.PI,sweep:void 0,clockwise:!0,sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(t,r){return!0},ready:void 0,stop:void 0,transform:function(t,r){return r}};function _d(e){this.options=G({},A1,e)}_d.prototype.run=function(){var e=this.options,t=e,r=e.cy,a=t.eles,i=void 0!==t.counterclockwise?!t.counterclockwise:t.clockwise,n=a.nodes().not(":parent");t.sort&&(n=n.sort(t.sort));for(var f,s=kt(t.boundingBox?t.boundingBox:{x1:0,y1:0,w:r.width(),h:r.height()}),o={x:s.x1+s.w/2,y:s.y1+s.h/2},h=(void 0===t.sweep?2*Math.PI-2*Math.PI/n.length:t.sweep)/Math.max(1,n.length-1),p=0,x=0;x<n.length;x++){var _=n[x].layoutDimensions(t);p=Math.max(p,_.w,_.h)}if(f=X(t.radius)?t.radius:n.length<=1?0:Math.min(s.h,s.w)/2-p,n.length>1&&t.avoidOverlap){p*=1.75;var K=Math.cos(h)-Math.cos(0),Y=Math.sin(h)-Math.sin(0),j=Math.sqrt(p*p/(K*K+Y*Y));f=Math.max(j,f)}return a.nodes().layoutPositions(this,t,function(se,Ht){var he=t.startAngle+Ht*h*(i?1:-1),me=f*Math.cos(he),Te=f*Math.sin(he);return{x:o.x+me,y:o.y+Te}}),this};var D1={fit:!0,padding:30,startAngle:1.5*Math.PI,sweep:void 0,clockwise:!0,equidistant:!1,minNodeSpacing:10,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,height:void 0,width:void 0,spacingFactor:void 0,concentric:function(t){return t.degree()},levelWidth:function(t){return t.maxDegree()/4},animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(t,r){return!0},ready:void 0,stop:void 0,transform:function(t,r){return r}};function Ed(e){this.options=G({},D1,e)}Ed.prototype.run=function(){for(var e=this.options,t=e,r=void 0!==t.counterclockwise?!t.counterclockwise:t.clockwise,a=e.cy,i=t.eles,n=i.nodes().not(":parent"),s=kt(t.boundingBox?t.boundingBox:{x1:0,y1:0,w:a.width(),h:a.height()}),o={x:s.x1+s.w/2,y:s.y1+s.h/2},u=[],h=0,f=0;f<n.length;f++){var x,p=n[f];x=t.concentric(p),u.push({value:x,node:p}),p._private.scratch.concentric=x}n.updateStyle();for(var k=0;k<n.length;k++){var U=n[k].layoutDimensions(t);h=Math.max(h,U.w,U.h)}u.sort(function(Ga,li){return li.value-Ga.value});for(var O=t.levelWidth(n),K=[[]],Y=K[0],j=0;j<u.length;j++){var yt=u[j];Y.length>0&&Math.abs(Y[0].value-yt.value)>=O&&K.push(Y=[]),Y.push(yt)}var se=h+t.minNodeSpacing;if(!t.avoidOverlap){var Ht=K.length>0&&K[0].length>1,he=Math.min(s.w,s.h)/2-se;se=Math.min(se,he/(K.length+Ht?1:0))}for(var Te=0,Be=0;Be<K.length;Be++){var Me=K[Be],Oe=void 0===t.sweep?2*Math.PI-2*Math.PI/Me.length:t.sweep,tr=Me.dTheta=Oe/Math.max(1,Me.length-1);if(Me.length>1&&t.avoidOverlap){var ur=Math.cos(tr)-Math.cos(0),fr=Math.sin(tr)-Math.sin(0),rr=Math.sqrt(se*se/(ur*ur+fr*fr));Te=Math.max(rr,Te)}Me.r=Te,Te+=se}if(t.equidistant){for(var Cr=0,Ur=0,qr=0;qr<K.length;qr++)Cr=Math.max(Cr,K[qr].r-Ur);Ur=0;for(var ga=0;ga<K.length;ga++){var Ea=K[ga];0===ga&&(Ur=Ea.r),Ea.r=Ur,Ur+=Cr}}for(var pa={},Aa=0;Aa<K.length;Aa++)for(var Ra=K[Aa],Za=Ra.dTheta,Ta=Ra.r,Kr=0;Kr<Ra.length;Kr++){var $r=Ra[Kr],Zr=t.startAngle+(r?1:-1)*Za*Kr,ma={x:o.x+Ta*Math.cos(Zr),y:o.y+Ta*Math.sin(Zr)};pa[$r.node.id()]=ma}return i.nodes().layoutPositions(this,t,function(Ga){var li=Ga.id();return pa[li]}),this};var Oc,L1={ready:function(){},stop:function(){},animate:!0,animationEasing:void 0,animationDuration:void 0,animateFilter:function(t,r){return!0},animationThreshold:250,refresh:20,fit:!0,padding:30,boundingBox:void 0,nodeDimensionsIncludeLabels:!1,randomize:!1,componentSpacing:40,nodeRepulsion:function(t){return 2048},nodeOverlap:4,idealEdgeLength:function(t){return 32},edgeElasticity:function(t){return 32},nestingFactor:1.2,gravity:1,numIter:1e3,initialTemp:1e3,coolingFactor:.99,minTemp:1};function el(e){this.options=G({},L1,e),this.options.layout=this;var t=this.options.eles.nodes(),a=this.options.eles.edges().filter(function(i){var n=i.source().data("id"),s=i.target().data("id"),o=t.some(function(h){return h.data("id")===n}),u=t.some(function(h){return h.data("id")===s});return!o||!u});this.options.eles=this.options.eles.not(a)}el.prototype.run=function(){var e=this.options,t=e.cy,r=this;r.stopped=!1,(!0===e.animate||!1===e.animate)&&r.emit({type:"layoutstart",layout:r}),Oc=!0===e.debug;var a=B1(t,r,e);Oc&&(void 0)(a),e.randomize&&I1(a);var i=ia(),n=function(){M1(a,t,e),!0===e.fit&&t.fit(e.padding)},s=function(x){return!(r.stopped||x>=e.numIter||(O1(a,e),a.temperature=a.temperature*e.coolingFactor,a.temperature<e.minTemp))},o=function(){if(!0===e.animate||!1===e.animate)n(),r.one("layoutstop",e.stop),r.emit({type:"layoutstop",layout:r});else{var x=e.eles.nodes(),k=kd(a,e,x);x.layoutPositions(r,e,k)}},u=0,h=!0;if(!0===e.animate){var f=function(){for(var x=0;h&&x<e.refresh;)h=s(u),u++,x++;h?(ia()-i>=e.animationThreshold&&n(),ha(f)):(wd(a,e),o())};f()}else{for(;h;)h=s(u),u++;wd(a,e),o()}return this},el.prototype.stop=function(){return this.stopped=!0,this.thread&&this.thread.stop(),this.emit("layoutstop"),this},el.prototype.destroy=function(){return this.thread&&this.thread.stop(),this};var B1=function(t,r,a){for(var i=a.eles.edges(),n=a.eles.nodes(),s=kt(a.boundingBox?a.boundingBox:{x1:0,y1:0,w:t.width(),h:t.height()}),o={isCompound:t.hasCompoundNodes(),layoutNodes:[],idToIndex:{},nodeSize:n.size(),graphSet:[],indexToGraph:[],layoutEdges:[],edgeSize:i.size(),temperature:a.initialTemp,clientWidth:s.w,clientHeight:s.h,boundingBox:s},u=a.eles.components(),h={},f=0;f<u.length;f++)for(var p=u[f],x=0;x<p.length;x++)h[p[x].id()]=f;for(f=0;f<o.nodeSize;f++){var U=(_=n[f]).layoutDimensions(a);(O={}).isLocked=_.locked(),O.id=_.data("id"),O.parentId=_.data("parent"),O.cmptId=h[_.id()],O.children=[],O.positionX=_.position("x"),O.positionY=_.position("y"),O.offsetX=0,O.offsetY=0,O.height=U.w,O.width=U.h,O.maxX=O.positionX+O.width/2,O.minX=O.positionX-O.width/2,O.maxY=O.positionY+O.height/2,O.minY=O.positionY-O.height/2,O.padLeft=parseFloat(_.style("padding")),O.padRight=parseFloat(_.style("padding")),O.padTop=parseFloat(_.style("padding")),O.padBottom=parseFloat(_.style("padding")),O.nodeRepulsion=z(a.nodeRepulsion)?a.nodeRepulsion(_):a.nodeRepulsion,o.layoutNodes.push(O),o.idToIndex[O.id]=f}var K=[],Y=0,j=-1,yt=[];for(f=0;f<o.nodeSize;f++){var _,ie=(_=o.layoutNodes[f]).parentId;null!=ie?o.layoutNodes[o.idToIndex[ie]].children.push(_.id):(K[++j]=_.id,yt.push(_.id))}for(o.graphSet.push(yt);Y<=j;){var se=K[Y++],he=o.layoutNodes[o.idToIndex[se]].children;if(he.length>0)for(o.graphSet.push(he),f=0;f<he.length;f++)K[++j]=he[f]}for(f=0;f<o.graphSet.length;f++){var me=o.graphSet[f];for(x=0;x<me.length;x++)o.indexToGraph[o.idToIndex[me[x]]]=f}for(f=0;f<o.edgeSize;f++){var Be=i[f],Me={};Me.id=Be.data("id"),Me.sourceId=Be.data("source"),Me.targetId=Be.data("target");var Oe=z(a.idealEdgeLength)?a.idealEdgeLength(Be):a.idealEdgeLength,tr=z(a.edgeElasticity)?a.edgeElasticity(Be):a.edgeElasticity,ur=o.idToIndex[Me.sourceId],fr=o.idToIndex[Me.targetId];if(o.indexToGraph[ur]!=o.indexToGraph[fr]){for(var Ur=R1(Me.sourceId,Me.targetId,o),qr=o.graphSet[Ur],Dr=0,O=o.layoutNodes[ur];-1===qr.indexOf(O.id);)O=o.layoutNodes[o.idToIndex[O.parentId]],Dr++;for(O=o.layoutNodes[fr];-1===qr.indexOf(O.id);)O=o.layoutNodes[o.idToIndex[O.parentId]],Dr++;Oe*=Dr*a.nestingFactor}Me.idealLength=Oe,Me.elasticity=tr,o.layoutEdges.push(Me)}return o},R1=function(t,r,a){var i=Cd(t,r,0,a);return 2>i.count?0:i.graph},Cd=function(t,r,a,i){var n=i.graphSet[a];if(-1<n.indexOf(t)&&-1<n.indexOf(r))return{count:2,graph:a};for(var s=0,o=0;o<n.length;o++){var f=i.layoutNodes[i.idToIndex[n[o]]].children;if(0!==f.length){var x=Cd(t,r,i.indexToGraph[i.idToIndex[f[0]]],i);if(0!==x.count){if(1!==x.count)return x;if(2===++s)break}}}return{count:s,graph:a}},I1=function(t,r){for(var a=t.clientWidth,i=t.clientHeight,n=0;n<t.nodeSize;n++){var s=t.layoutNodes[n];0===s.children.length&&!s.isLocked&&(s.positionX=Math.random()*a,s.positionY=Math.random()*i)}},kd=function(t,r,a){var i=t.boundingBox,n={x1:1/0,x2:-1/0,y1:1/0,y2:-1/0};return r.boundingBox&&(a.forEach(function(s){var o=t.layoutNodes[t.idToIndex[s.data("id")]];n.x1=Math.min(n.x1,o.positionX),n.x2=Math.max(n.x2,o.positionX),n.y1=Math.min(n.y1,o.positionY),n.y2=Math.max(n.y2,o.positionY)}),n.w=n.x2-n.x1,n.h=n.y2-n.y1),function(s,o){var u=t.layoutNodes[t.idToIndex[s.data("id")]];return r.boundingBox?{x:i.x1+(0===n.w?.5:(u.positionX-n.x1)/n.w)*i.w,y:i.y1+(0===n.h?.5:(u.positionY-n.y1)/n.h)*i.h}:{x:u.positionX,y:u.positionY}}},M1=function(t,r,a){var i=a.layout,n=a.eles.nodes(),s=kd(t,a,n);n.positions(s),!0!==t.ready&&(t.ready=!0,i.one("layoutready",a.ready),i.emit({type:"layoutready",layout:this}))},O1=function(t,r,a){F1(t,r),W1(t),z1(t,r),V1(t),U1(t)},F1=function(t,r){for(var a=0;a<t.graphSet.length;a++)for(var i=t.graphSet[a],n=i.length,s=0;s<n;s++)for(var o=t.layoutNodes[t.idToIndex[i[s]]],u=s+1;u<n;u++)N1(o,t.layoutNodes[t.idToIndex[i[u]]],t,r)},Td=function(t){return 2*t*Math.random()-1},N1=function(t,r,a,i){if(t.cmptId===r.cmptId||a.isCompound){var o=r.positionX-t.positionX,u=r.positionY-t.positionY;0===o&&0===u&&(o=Td(1),u=Td(1));var f=K1(t,r,o,u);if(f>0)var k=(p=i.nodeOverlap*f)*o/(x=Math.sqrt(o*o+u*u)),_=p*u/x;else{var p,U=rl(t,o,u),O=rl(r,-1*o,-1*u),K=O.x-U.x,Y=O.y-U.y,j=K*K+Y*Y,x=Math.sqrt(j);k=(p=(t.nodeRepulsion+r.nodeRepulsion)/j)*K/x,_=p*Y/x}t.isLocked||(t.offsetX-=k,t.offsetY-=_),r.isLocked||(r.offsetX+=k,r.offsetY+=_)}},K1=function(t,r,a,i){if(a>0)var n=t.maxX-r.minX;else n=r.maxX-t.minX;if(i>0)var s=t.maxY-r.minY;else s=r.maxY-t.minY;return n>=0&&s>=0?Math.sqrt(n*n+s*s):0},rl=function(t,r,a){var i=t.positionX,n=t.positionY,s=t.height||1,o=t.width||1,u=a/r,h=s/o,f={};return 0===r&&0<a||0===r&&0>a?(f.x=i,f.y=n+s/2,f):0<r&&-1*h<=u&&u<=h?(f.x=i+o/2,f.y=n+o*a/2/r,f):0>r&&-1*h<=u&&u<=h?(f.x=i-o/2,f.y=n-o*a/2/r,f):0<a&&(u<=-1*h||u>=h)?(f.x=i+s*r/2/a,f.y=n+s/2,f):(0>a&&(u<=-1*h||u>=h)&&(f.x=i-s*r/2/a,f.y=n-s/2),f)},W1=function(t,r){for(var a=0;a<t.edgeSize;a++){var i=t.layoutEdges[a],s=t.layoutNodes[t.idToIndex[i.sourceId]],u=t.layoutNodes[t.idToIndex[i.targetId]],h=u.positionX-s.positionX,f=u.positionY-s.positionY;if(0!==h||0!==f){var p=rl(s,h,f),x=rl(u,-1*h,-1*f),k=x.x-p.x,_=x.y-p.y,U=Math.sqrt(k*k+_*_),O=Math.pow(i.idealLength-U,2)/i.elasticity;if(0!==U)var K=O*k/U,Y=O*_/U;else K=0,Y=0;s.isLocked||(s.offsetX+=K,s.offsetY+=Y),u.isLocked||(u.offsetX-=K,u.offsetY-=Y)}}},z1=function(t,r){if(0!==r.gravity)for(var i=0;i<t.graphSet.length;i++){var n=t.graphSet[i],s=n.length;if(0===i)var o=t.clientHeight/2,u=t.clientWidth/2;else{var f=t.layoutNodes[t.idToIndex[t.layoutNodes[t.idToIndex[n[0]]].parentId]];o=f.positionX,u=f.positionY}for(var p=0;p<s;p++){var x=t.layoutNodes[t.idToIndex[n[p]]];if(!x.isLocked){var k=o-x.positionX,_=u-x.positionY,U=Math.sqrt(k*k+_*_);if(U>1){var K=r.gravity*_/U;x.offsetX+=r.gravity*k/U,x.offsetY+=K}}}}},V1=function(t,r){var a=[],i=0,n=-1;for(a.push.apply(a,t.graphSet[0]),n+=t.graphSet[0].length;i<=n;){var s=a[i++],u=t.layoutNodes[t.idToIndex[s]],h=u.children;if(0<h.length&&!u.isLocked){for(var f=u.offsetX,p=u.offsetY,x=0;x<h.length;x++){var k=t.layoutNodes[t.idToIndex[h[x]]];k.offsetX+=f,k.offsetY+=p,a[++n]=h[x]}u.offsetX=0,u.offsetY=0}}},U1=function(t,r){for(var a=0;a<t.nodeSize;a++)0<(i=t.layoutNodes[a]).children.length&&(i.maxX=void 0,i.minX=void 0,i.maxY=void 0,i.minY=void 0);for(a=0;a<t.nodeSize;a++)if(!(0<(i=t.layoutNodes[a]).children.length||i.isLocked)){var n=$1(i.offsetX,i.offsetY,t.temperature);i.positionX+=n.x,i.positionY+=n.y,i.offsetX=0,i.offsetY=0,i.minX=i.positionX-i.width,i.maxX=i.positionX+i.width,i.minY=i.positionY-i.height,i.maxY=i.positionY+i.height,Sd(i,t)}for(a=0;a<t.nodeSize;a++){var i;0<(i=t.layoutNodes[a]).children.length&&!i.isLocked&&(i.positionX=(i.maxX+i.minX)/2,i.positionY=(i.maxY+i.minY)/2,i.width=i.maxX-i.minX,i.height=i.maxY-i.minY)}},$1=function(t,r,a){var i=Math.sqrt(t*t+r*r);if(i>a)var n={x:a*t/i,y:a*r/i};else n={x:t,y:r};return n},Sd=function(t,r){var a=t.parentId;if(null!=a){var i=r.layoutNodes[r.idToIndex[a]],n=!1;if((null==i.maxX||t.maxX+i.padRight>i.maxX)&&(i.maxX=t.maxX+i.padRight,n=!0),(null==i.minX||t.minX-i.padLeft<i.minX)&&(i.minX=t.minX-i.padLeft,n=!0),(null==i.maxY||t.maxY+i.padBottom>i.maxY)&&(i.maxY=t.maxY+i.padBottom,n=!0),(null==i.minY||t.minY-i.padTop<i.minY)&&(i.minY=t.minY-i.padTop,n=!0),n)return Sd(i,r)}},wd=function(t,r){for(var a=t.layoutNodes,i=[],n=0;n<a.length;n++){var s=a[n],o=s.cmptId;(i[o]=i[o]||[]).push(s)}var h=0;for(n=0;n<i.length;n++)if(f=i[n]){f.x1=1/0,f.x2=-1/0,f.y1=1/0,f.y2=-1/0;for(var p=0;p<f.length;p++){var x=f[p];f.x1=Math.min(f.x1,x.positionX-x.width/2),f.x2=Math.max(f.x2,x.positionX+x.width/2),f.y1=Math.min(f.y1,x.positionY-x.height/2),f.y2=Math.max(f.y2,x.positionY+x.height/2)}f.w=f.x2-f.x1,f.h=f.y2-f.y1,h+=f.w*f.h}i.sort(function(Y,j){return j.w*j.h-Y.w*Y.h});var k=0,_=0,U=0,O=0,K=Math.sqrt(h)*t.clientWidth/t.clientHeight;for(n=0;n<i.length;n++){var f;if(f=i[n]){for(p=0;p<f.length;p++)(x=f[p]).isLocked||(x.positionX+=k-f.x1,x.positionY+=_-f.y1);k+=f.w+r.componentSpacing,U+=f.w+r.componentSpacing,O=Math.max(O,f.h),U>K&&(_+=O+r.componentSpacing,k=0,U=0,O=0)}}},Y1={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,avoidOverlapPadding:10,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,condense:!1,rows:void 0,cols:void 0,position:function(t){},sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(t,r){return!0},ready:void 0,stop:void 0,transform:function(t,r){return r}};function Ad(e){this.options=G({},Y1,e)}Ad.prototype.run=function(){var e=this.options,t=e,r=e.cy,a=t.eles,i=a.nodes().not(":parent");t.sort&&(i=i.sort(t.sort));var n=kt(t.boundingBox?t.boundingBox:{x1:0,y1:0,w:r.width(),h:r.height()});if(0===n.h||0===n.w)a.nodes().layoutPositions(this,t,function(ga){return{x:n.x1,y:n.y1}});else{var s=i.size(),o=Math.sqrt(s*n.h/n.w),u=Math.round(o),h=Math.round(n.w/n.h*o),f=function(Ea){if(null==Ea)return Math.min(u,h);Math.min(u,h)==u?u=Ea:h=Ea},p=function(Ea){if(null==Ea)return Math.max(u,h);Math.max(u,h)==u?u=Ea:h=Ea},x=t.rows,k=null!=t.cols?t.cols:t.columns;if(null!=x&&null!=k)u=x,h=k;else if(null!=x&&null==k)u=x,h=Math.ceil(s/u);else if(null==x&&null!=k)h=k,u=Math.ceil(s/h);else if(h*u>s){var _=f(),U=p();(_-1)*U>=s?f(_-1):(U-1)*_>=s&&p(U-1)}else for(;h*u<s;){var O=f(),K=p();(K+1)*O>=s?p(K+1):f(O+1)}var Y=n.w/h,j=n.h/u;if(t.condense&&(Y=0,j=0),t.avoidOverlap)for(var yt=0;yt<i.length;yt++){var ie=i[yt],se=ie._private.position;(null==se.x||null==se.y)&&(se.x=0,se.y=0);var Ht=ie.layoutDimensions(t),he=t.avoidOverlapPadding,Te=Ht.h+he;Y=Math.max(Y,Ht.w+he),j=Math.max(j,Te)}for(var Be={},Me=function(Ea,pa){return!!Be["c-"+Ea+"-"+pa]},Oe=function(Ea,pa){Be["c-"+Ea+"-"+pa]=!0},tr=0,ur=0,fr=function(){++ur>=h&&(ur=0,tr++)},rr={},Cr=0;Cr<i.length;Cr++){var Ur=i[Cr],qr=t.position(Ur);if(qr&&(void 0!==qr.row||void 0!==qr.col)){var Dr={row:qr.row,col:qr.col};if(void 0===Dr.col)for(Dr.col=0;Me(Dr.row,Dr.col);)Dr.col++;else if(void 0===Dr.row)for(Dr.row=0;Me(Dr.row,Dr.col);)Dr.row++;rr[Ur.id()]=Dr,Oe(Dr.row,Dr.col)}}i.layoutPositions(this,t,function(Ea,pa){var Aa,Ra;if(Ea.locked()||Ea.isParent())return!1;var Za=rr[Ea.id()];if(Za)Aa=Za.col*Y+Y/2+n.x1,Ra=Za.row*j+j/2+n.y1;else{for(;Me(tr,ur);)fr();Aa=ur*Y+Y/2+n.x1,Ra=tr*j+j/2+n.y1,Oe(tr,ur),fr()}return{x:Aa,y:Ra}})}return this};var H1={ready:function(){},stop:function(){}};function Fc(e){this.options=G({},H1,e)}Fc.prototype.run=function(){var e=this.options,t=e.eles,r=this;return r.emit("layoutstart"),t.nodes().positions(function(){return{x:0,y:0}}),r.one("layoutready",e.ready),r.emit("layoutready"),r.one("layoutstop",e.stop),r.emit("layoutstop"),this},Fc.prototype.stop=function(){return this};var G1={positions:void 0,zoom:void 0,pan:void 0,fit:!0,padding:30,spacingFactor:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(t,r){return!0},ready:void 0,stop:void 0,transform:function(t,r){return r}};function Dd(e){this.options=G({},G1,e)}Dd.prototype.run=function(){var e=this.options,r=e.eles.nodes(),a=z(e.positions);return r.layoutPositions(this,e,function(n,s){var o=function i(n){return null==e.positions?function(t){return{x:t.x,y:t.y}}(n.position()):a?e.positions(n):e.positions[n._private.data.id]??null}(n);return!n.locked()&&null!=o&&o}),this};var q1={fit:!0,padding:30,boundingBox:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(t,r){return!0},ready:void 0,stop:void 0,transform:function(t,r){return r}};function Ld(e){this.options=G({},q1,e)}Ld.prototype.run=function(){var e=this.options,t=e.cy,r=e.eles,a=kt(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:t.width(),h:t.height()});return r.nodes().layoutPositions(this,e,function(s,o){return{x:a.x1+Math.round(Math.random()*a.w),y:a.y1+Math.round(Math.random()*a.h)}}),this};var j1=[{name:"breadthfirst",impl:bd},{name:"circle",impl:_d},{name:"concentric",impl:Ed},{name:"cose",impl:el},{name:"grid",impl:Ad},{name:"null",impl:Fc},{name:"preset",impl:Dd},{name:"random",impl:Ld}];function Bd(e){this.options=e,this.notifications=0}var Rd=function(){},Pd=function(){throw new Error("A headless instance can not render images")};Bd.prototype={recalculateRenderedStyle:Rd,notify:function(){this.notifications++},init:Rd,isHeadless:function(){return!0},png:Pd,jpg:Pd};var Nc={arrowShapeWidth:.3,registerArrowShapes:function(){var e=this.arrowShapes={},t=this,r=function(h,f,p,x,k,_,U){return k.x-p/2-U<=h&&h<=k.x+p/2+U&&k.y-p/2-U<=f&&f<=k.y+p/2+U},a=function(h,f,p,x,k){var _=h*Math.cos(x)-f*Math.sin(x),U=h*Math.sin(x)+f*Math.cos(x);return{x:_*p+k.x,y:U*p+k.y}},i=function(h,f,p,x){for(var k=[],_=0;_<h.length;_+=2)k.push(a(h[_],h[_+1],f,p,x));return k},n=function(h){for(var f=[],p=0;p<h.length;p++){var x=h[p];f.push(x.x,x.y)}return f},s=function(h){return h.pstyle("width").pfValue*h.pstyle("arrow-scale").pfValue*2},o=function(h,f){je(f)&&(f=e[f]),e[h]=G({name:h,points:[-.15,-.3,.15,-.3,.15,.3,-.15,.3],collide:function(x,k,_,U,O,K){var Y=n(i(this.points,_+2*K,U,O));return Ir(x,k,Y)},roughCollide:r,draw:function(x,k,_,U){var O=i(this.points,k,_,U);t.arrowShapeImpl("polygon")(x,O)},spacing:function(x){return 0},gap:s},f)};o("none",{collide:Ua,roughCollide:Ua,draw:Oa,spacing:nr,gap:nr}),o("triangle",{points:[-.15,-.3,0,0,.15,-.3]}),o("arrow","triangle"),o("triangle-backcurve",{points:e.triangle.points,controlPoint:[0,-.15],roughCollide:r,draw:function(h,f,p,x,k){var _=i(this.points,f,p,x),U=this.controlPoint,O=a(U[0],U[1],f,p,x);t.arrowShapeImpl(this.name)(h,_,O)},gap:function(h){return.8*s(h)}}),o("triangle-tee",{points:[0,0,.15,-.3,-.15,-.3,0,0],pointsTee:[-.15,-.4,-.15,-.5,.15,-.5,.15,-.4],collide:function(h,f,p,x,k,_,U){var O=n(i(this.points,p+2*U,x,k)),K=n(i(this.pointsTee,p+2*U,x,k));return Ir(h,f,O)||Ir(h,f,K)},draw:function(h,f,p,x,k){var _=i(this.points,f,p,x),U=i(this.pointsTee,f,p,x);t.arrowShapeImpl(this.name)(h,_,U)}}),o("circle-triangle",{radius:.15,pointsTr:[0,-.15,.15,-.45,-.15,-.45,0,-.15],collide:function(h,f,p,x,k,_,U){var O=k,K=Math.pow(O.x-h,2)+Math.pow(O.y-f,2)<=Math.pow((p+2*U)*this.radius,2),Y=n(i(this.points,p+2*U,x,k));return Ir(h,f,Y)||K},draw:function(h,f,p,x,k){var _=i(this.pointsTr,f,p,x);t.arrowShapeImpl(this.name)(h,_,x.x,x.y,this.radius*f)},spacing:function(h){return t.getArrowWidth(h.pstyle("width").pfValue,h.pstyle("arrow-scale").value)*this.radius}}),o("triangle-cross",{points:[0,0,.15,-.3,-.15,-.3,0,0],baseCrossLinePts:[-.15,-.4,-.15,-.4,.15,-.4,.15,-.4],crossLinePts:function(h,f){var p=this.baseCrossLinePts.slice(),x=f/h;return p[3]=p[3]-x,p[5]=p[5]-x,p},collide:function(h,f,p,x,k,_,U){var O=n(i(this.points,p+2*U,x,k)),K=n(i(this.crossLinePts(p,_),p+2*U,x,k));return Ir(h,f,O)||Ir(h,f,K)},draw:function(h,f,p,x,k){var _=i(this.points,f,p,x),U=i(this.crossLinePts(f,k),f,p,x);t.arrowShapeImpl(this.name)(h,_,U)}}),o("vee",{points:[-.15,-.3,0,0,.15,-.3,0,-.15],gap:function(h){return.525*s(h)}}),o("circle",{radius:.15,collide:function(h,f,p,x,k,_,U){var O=k;return Math.pow(O.x-h,2)+Math.pow(O.y-f,2)<=Math.pow((p+2*U)*this.radius,2)},draw:function(h,f,p,x,k){t.arrowShapeImpl(this.name)(h,x.x,x.y,this.radius*f)},spacing:function(h){return t.getArrowWidth(h.pstyle("width").pfValue,h.pstyle("arrow-scale").value)*this.radius}}),o("tee",{points:[-.15,0,-.15,-.1,.15,-.1,.15,0],spacing:function(h){return 1},gap:function(h){return 1}}),o("square",{points:[-.15,0,.15,0,.15,-.3,-.15,-.3]}),o("diamond",{points:[-.15,-.15,0,-.3,.15,-.15,0,0],gap:function(h){return h.pstyle("width").pfValue*h.pstyle("arrow-scale").value}}),o("chevron",{points:[0,0,-.15,-.15,-.1,-.2,0,-.1,.1,-.2,.15,-.15],gap:function(h){return.95*h.pstyle("width").pfValue*h.pstyle("arrow-scale").value}})}},Ss={projectIntoViewport:function(e,t){var r=this.cy,a=this.findContainerClientCoords(),i=a[0],n=a[1],s=a[4],o=r.pan(),u=r.zoom();return[((e-i)/s-o.x)/u,((t-n)/s-o.y)/u]},findContainerClientCoords:function(){if(this.containerBB)return this.containerBB;var e=this.container,t=e.getBoundingClientRect(),r=this.cy.window().getComputedStyle(e),a=function(K){return parseFloat(r.getPropertyValue(K))},i_left=a("padding-left"),i_right=a("padding-right"),i_top=a("padding-top"),i_bottom=a("padding-bottom"),n_left=a("border-left-width"),n_right=a("border-right-width"),n_top=a("border-top-width"),s=(a("border-bottom-width"),e.clientWidth);return this.containerBB=[t.left+i_left+n_left,t.top+i_top+n_top,s-(i_left+i_right),e.clientHeight-(i_top+i_bottom),t.width/(s+(n_left+n_right))]},invalidateContainerClientCoordsCache:function(){this.containerBB=null},findNearestElement:function(e,t,r,a){return this.findNearestElements(e,t,r,a)[0]},findNearestElements:function(e,t,r,a){var _,U,i=this,n=this,s=n.getCachedZSortedEles(),o=[],u=n.cy.zoom(),h=n.cy.hasCompoundNodes(),f=(a?24:8)/u,p=(a?8:2)/u,x=(a?8:2)/u,k=1/0;function O(Ht,he){if(Ht.isNode()){if(U)return;U=Ht,o.push(Ht)}if(Ht.isEdge()&&(null==he||he<k))if(_){if(_.pstyle("z-compound-depth").value===Ht.pstyle("z-compound-depth").value&&_.pstyle("z-compound-depth").value===Ht.pstyle("z-compound-depth").value)for(var me=0;me<o.length;me++)if(o[me].isEdge()){o[me]=Ht,_=Ht,k=he??k;break}}else o.push(Ht),_=Ht,k=he??k}function K(Ht){var he=Ht.outerWidth()+2*p,me=Ht.outerHeight()+2*p,Te=he/2,Be=me/2,Me=Ht.position(),Oe="auto"===Ht.pstyle("corner-radius").value?"auto":Ht.pstyle("corner-radius").pfValue,tr=Ht._private.rscratch;if(Me.x-Te<=e&&e<=Me.x+Te&&Me.y-Be<=t&&t<=Me.y+Be&&n.nodeShapes[i.getNodeShape(Ht)].checkPoint(e,t,0,he,me,Me.x,Me.y,Oe,tr))return O(Ht,0),!0}function Y(Ht){var ur,he=Ht._private,me=he.rscratch,Te=Ht.pstyle("width").pfValue,Be=Ht.pstyle("arrow-scale").value,Me=Te/2+f,Oe=Me*Me,tr=2*Me,Cr=he.source,Ur=he.target;if("segments"===me.edgeType||"straight"===me.edgeType||"haystack"===me.edgeType){for(var fr=me.allpts,rr=0;rr+3<fr.length;rr+=2)if(Ie(e,t,fr[rr],fr[rr+1],fr[rr+2],fr[rr+3],tr)&&Oe>(ur=ta(e,t,fr[rr],fr[rr+1],fr[rr+2],fr[rr+3])))return O(Ht,ur),!0}else if("bezier"===me.edgeType||"multibezier"===me.edgeType||"self"===me.edgeType||"compound"===me.edgeType)for(fr=me.allpts,rr=0;rr+5<me.allpts.length;rr+=4)if(Qt(e,t,fr[rr],fr[rr+1],fr[rr+2],fr[rr+3],fr[rr+4],fr[rr+5],tr)&&Oe>(ur=Sr(e,t,fr[rr],fr[rr+1],fr[rr+2],fr[rr+3],fr[rr+4],fr[rr+5])))return O(Ht,ur),!0;Cr=Cr||he.source,Ur=Ur||he.target;var qr=i.getArrowWidth(Te,Be),Dr=[{name:"source",x:me.arrowStartX,y:me.arrowStartY,angle:me.srcArrowAngle},{name:"target",x:me.arrowEndX,y:me.arrowEndY,angle:me.tgtArrowAngle},{name:"mid-source",x:me.midX,y:me.midY,angle:me.midsrcArrowAngle},{name:"mid-target",x:me.midX,y:me.midY,angle:me.midtgtArrowAngle}];for(rr=0;rr<Dr.length;rr++){var Wr=Dr[rr],ga=n.arrowShapes[Ht.pstyle(Wr.name+"-arrow-shape").value],Ea=Ht.pstyle("width").pfValue;if(ga.roughCollide(e,t,qr,Wr.angle,{x:Wr.x,y:Wr.y},Ea,f)&&ga.collide(e,t,qr,Wr.angle,{x:Wr.x,y:Wr.y},Ea,f))return O(Ht),!0}h&&o.length>0&&(K(Cr),K(Ur))}function j(Ht,he,me){return Jt(Ht,he,me)}function yt(Ht,he){var Be,me=Ht._private,Te=x;Be=he?he+"-":"",Ht.boundingBox();var Me=me.labelBounds[he||"main"],Oe=Ht.pstyle(Be+"label").value;if("yes"===Ht.pstyle("text-events").strValue&&Oe){var ur=j(me.rscratch,"labelX",he),fr=j(me.rscratch,"labelY",he),rr=j(me.rscratch,"labelAngle",he),Cr=Ht.pstyle(Be+"text-margin-x").pfValue,Ur=Ht.pstyle(Be+"text-margin-y").pfValue,qr=Me.x1-Te-Cr,Dr=Me.x2+Te-Cr,Wr=Me.y1-Te-Ur,ga=Me.y2+Te-Ur;if(rr){var Ea=Math.cos(rr),pa=Math.sin(rr),Aa=function(ma,Ga){return{x:(ma-=ur)*Ea-(Ga-=fr)*pa+ur,y:ma*pa+Ga*Ea+fr}},Ra=Aa(qr,Wr),Za=Aa(qr,ga),Ta=Aa(Dr,Wr),Kr=Aa(Dr,ga);if(Ir(e,t,[Ra.x+Cr,Ra.y+Ur,Ta.x+Cr,Ta.y+Ur,Kr.x+Cr,Kr.y+Ur,Za.x+Cr,Za.y+Ur]))return O(Ht),!0}else if(Le(Me,e,t))return O(Ht),!0}}r&&(s=s.interactive);for(var ie=s.length-1;ie>=0;ie--){var se=s[ie];se.isNode()?K(se)||yt(se):Y(se)||yt(se)||yt(se,"source")||yt(se,"target")}return o},getAllInBox:function(e,t,r,a){var i=this.getCachedZSortedEles().interactive,s=2/this.cy.zoom(),o=[],u=Math.min(e,r),h=Math.max(e,r),f=Math.min(t,a),p=Math.max(t,a),x=kt({x1:e=u,y1:t=f,x2:r=h,y2:a=p}),k=[{x:x.x1,y:x.y1},{x:x.x2,y:x.y1},{x:x.x2,y:x.y2},{x:x.x1,y:x.y2}],_=[[k[0],k[1]],[k[1],k[2]],[k[2],k[3]],[k[3],k[0]]];function U(ma,Ga,li){return Jt(ma,Ga,li)}function O(ma,Ga){var li=ma._private,Ii=s;ma.boundingBox();var xi=li.labelBounds.main;if(!xi)return null;var gi=U(li.rscratch,"labelX",Ga),Qa=U(li.rscratch,"labelY",Ga),ci=U(li.rscratch,"labelAngle",Ga),di=ma.pstyle("text-margin-x").pfValue,_i=ma.pstyle("text-margin-y").pfValue,fi=xi.x1-Ii-di,wi=xi.x2+Ii-di,Mi=xi.y1-Ii-_i,Yi=xi.y2+Ii-_i;if(ci){var Hi=Math.cos(ci),Gi=Math.sin(ci),bi=function(va,ge){return{x:(va-=gi)*Hi-(ge-=Qa)*Gi+gi,y:va*Gi+ge*Hi+Qa}};return[bi(fi,Mi),bi(wi,Mi),bi(wi,Yi),bi(fi,Yi)]}return[{x:fi,y:Mi},{x:wi,y:Mi},{x:wi,y:Yi},{x:fi,y:Yi}]}function K(ma,Ga,li,Ii){function Ci(xi,gi,Qa){return(Qa.y-xi.y)*(gi.x-xi.x)>(gi.y-xi.y)*(Qa.x-xi.x)}return Ci(ma,li,Ii)!==Ci(Ga,li,Ii)&&Ci(ma,Ga,li)!==Ci(ma,Ga,Ii)}for(var Y=0;Y<i.length;Y++){var j=i[Y];if(j.isNode()){var yt=j,ie="yes"===yt.pstyle("text-events").strValue,se=yt.pstyle("box-selection").strValue,Ht="yes"===yt.pstyle("box-select-labels").strValue;if("none"===se)continue;var me=yt.boundingBox({includeNodes:!0,includeEdges:!1,includeLabels:("overlap"===se||Ht)&&ie});if("contain"===se){var Te=!1;if(Ht&&ie){var Be=O(yt);Be&&ml(Be,k)&&(o.push(yt),Te=!0)}!Te&&l(x,me)&&o.push(yt)}else if("overlap"===se&&fe(x,me)){var Me=yt.boundingBox({includeNodes:!0,includeEdges:!0,includeLabels:!1,includeMainLabels:!1,includeSourceLabels:!1,includeTargetLabels:!1});if(ml([{x:Me.x1,y:Me.y1},{x:Me.x2,y:Me.y1},{x:Me.x2,y:Me.y2},{x:Me.x1,y:Me.y2}],k))o.push(yt);else{var tr=O(yt);tr&&ml(tr,k)&&o.push(yt)}}}else{var ur=j,fr=ur._private,rr=fr.rscratch,Cr=ur.pstyle("box-selection").strValue;if("none"===Cr)continue;if("contain"===Cr){if(null!=rr.startX&&null!=rr.startY&&!Le(x,rr.startX,rr.startY)||null!=rr.endX&&null!=rr.endY&&!Le(x,rr.endX,rr.endY))continue;if("bezier"===rr.edgeType||"multibezier"===rr.edgeType||"self"===rr.edgeType||"compound"===rr.edgeType||"segments"===rr.edgeType||"haystack"===rr.edgeType){for(var Ur=fr.rstyle.bezierPts||fr.rstyle.linePts||fr.rstyle.haystackPts,qr=!0,Dr=0;Dr<Ur.length;Dr++)if(!tt(x,Ur[Dr])){qr=!1;break}qr&&o.push(ur)}else"straight"===rr.edgeType&&o.push(ur)}else if("overlap"===Cr){var Wr=!1;if(null!=rr.startX&&null!=rr.startY&&null!=rr.endX&&null!=rr.endY&&(Le(x,rr.startX,rr.startY)||Le(x,rr.endX,rr.endY)))o.push(ur),Wr=!0;else if(!Wr&&"haystack"===rr.edgeType)for(var ga=fr.rstyle.haystackPts,Ea=0;Ea<ga.length;Ea++)if(tt(x,ga[Ea])){o.push(ur),Wr=!0;break}if(!Wr){var pa=fr.rstyle.bezierPts||fr.rstyle.linePts||fr.rstyle.haystackPts;if((!pa||pa.length<2)&&"straight"===rr.edgeType&&null!=rr.startX&&null!=rr.startY&&null!=rr.endX&&null!=rr.endY&&(pa=[{x:rr.startX,y:rr.startY},{x:rr.endX,y:rr.endY}]),!pa||pa.length<2)continue;for(var Aa=0;Aa<pa.length-1;Aa++){for(var Ra=pa[Aa],Za=pa[Aa+1],Ta=0;Ta<_.length;Ta++){var Kr=Rt(_[Ta],2);if(K(Ra,Za,Kr[0],Kr[1])){o.push(ur),Wr=!0;break}}if(Wr)break}}}}}return o}},al={calculateArrowAngles:function(e){var u,h,f,p,x,k,t=e._private.rscratch,r="haystack"===t.edgeType,a="bezier"===t.edgeType,i="multibezier"===t.edgeType,n="segments"===t.edgeType,s="compound"===t.edgeType,o="self"===t.edgeType;r?(f=t.haystackPts[0],p=t.haystackPts[1],x=t.haystackPts[2],k=t.haystackPts[3]):(f=t.arrowStartX,p=t.arrowStartY,x=t.arrowEndX,k=t.arrowEndY),K=t.midX,Y=t.midY,n?(u=f-t.segpts[0],h=p-t.segpts[1]):i||s||o||a?(u=f-Gt((_=t.allpts)[0],_[2],_[4],.1),h=p-Gt(_[1],_[3],_[5],.1)):(u=f-K,h=p-Y),t.srcArrowAngle=kn(u,h);var K=t.midX,Y=t.midY;if(r&&(K=(f+x)/2,Y=(p+k)/2),u=x-f,h=k-p,n)if((_=t.allpts).length/2%2==0)u=_[j=_.length/2]-_[yt=j-2],h=_[j+1]-_[yt+1];else if(t.isRound)u=t.midVector[1],h=-t.midVector[0];else{var yt;u=_[j=_.length/2-1]-_[yt=j-2],h=_[j+1]-_[yt+1]}else if(i||s||o){var se,Ht,he,me,Be,Te,Me,_=t.allpts;t.ctrlpts.length/2%2==0?(se=Gt(_[Te=_.length/2-1],_[Be=Te+2],_[Me=Be+2],0),Ht=Gt(_[Te+1],_[Be+1],_[Me+1],0),he=Gt(_[Te],_[Be],_[Me],1e-4),me=Gt(_[Te+1],_[Be+1],_[Me+1],1e-4)):(se=Gt(_[Te=(Be=_.length/2-1)-2],_[Be],_[Me=Be+2],.4999),Ht=Gt(_[Te+1],_[Be+1],_[Me+1],.4999),he=Gt(_[Te],_[Be],_[Me],.5),me=Gt(_[Te+1],_[Be+1],_[Me+1],.5)),u=he-se,h=me-Ht}if(t.midtgtArrowAngle=kn(u,h),t.midDispX=u,t.midDispY=h,u*=-1,h*=-1,n&&(_=t.allpts).length/2%2!=0&&!t.isRound){var j,Oe=2+(j=_.length/2-1);u=-(_[Oe]-_[j]),h=-(_[Oe+1]-_[j+1])}if(t.midsrcArrowAngle=kn(u,h),n)u=x-t.segpts[t.segpts.length-2],h=k-t.segpts[t.segpts.length-1];else if(i||s||o||a){var tr=(_=t.allpts).length;u=x-Gt(_[tr-6],_[tr-4],_[tr-2],.9),h=k-Gt(_[tr-5],_[tr-3],_[tr-1],.9)}else u=x-K,h=k-Y;t.tgtArrowAngle=kn(u,h)}};al.getArrowWidth=al.getArrowHeight=function(e,t){var r=this.arrowWidthCache=this.arrowWidthCache||{},a=r[e+", "+t];return a||(a=Math.max(Math.pow(13.37*e,.9),29)*t,r[e+", "+t]=a,a)};var Kc,Wc,Md,ws,il,ls,As,Ds,as,qs,nl,Od,Fd,zc,Vc,Nd,rs={},qn={},Kd=function(t,r,a){a.x=r.x-t.x,a.y=r.y-t.y,a.len=Math.sqrt(a.x*a.x+a.y*a.y),a.nx=a.x/a.len,a.ny=a.y/a.len,a.ang=Math.atan2(a.ny,a.nx)};function Wd(e,t){0===t.radius?e.lineTo(t.cx,t.cy):e.arc(t.cx,t.cy,t.radius,t.startAngle,t.endAngle,t.counterClockwise)}function Uc(e,t,r,a){return 0===a||0===t.radius?{cx:t.x,cy:t.y,radius:0,startX:t.x,startY:t.y,stopX:t.x,stopY:t.y,startAngle:void 0,endAngle:void 0,counterClockwise:void 0}:(function(t,r,a,i,n){if(t!==Nd?Kd(r,t,rs):function(t,r){r.x=-1*t.x,r.y=-1*t.y,r.nx=-1*t.nx,r.ny=-1*t.ny,r.ang=t.ang>0?-(Math.PI-t.ang):Math.PI+t.ang}(qn,rs),Kd(r,a,qn),Md=rs.nx*qn.nx-rs.ny*-qn.ny,ls=Math.asin(Math.max(-1,Math.min(1,rs.nx*qn.ny-rs.ny*qn.nx))),Math.abs(ls)<1e-6)return Kc=r.x,Wc=r.y,void(Ds=qs=0);ws=1,il=!1,Md<0?ls<0?ls=Math.PI+ls:(ls=Math.PI-ls,ws=-1,il=!0):ls>0&&(ws=-1,il=!0),qs=void 0!==r.radius?r.radius:i,As=ls/2,nl=Math.min(rs.len/2,qn.len/2),n?(as=Math.abs(Math.cos(As)*qs/Math.sin(As)))>nl?(as=nl,Ds=Math.abs(as*Math.sin(As)/Math.cos(As))):Ds=qs:(as=Math.min(nl,qs),Ds=Math.abs(as*Math.sin(As)/Math.cos(As))),Kc=(zc=r.x+qn.nx*as)-qn.ny*Ds*ws,Wc=(Vc=r.y+qn.ny*as)+qn.nx*Ds*ws,Od=r.x+rs.nx*as,Fd=r.y+rs.ny*as,Nd=r}(e,t,r,a,!(arguments.length>4&&void 0!==arguments[4])||arguments[4]),{cx:Kc,cy:Wc,radius:Ds,startX:Od,startY:Fd,stopX:zc,stopY:Vc,startAngle:rs.ang+Math.PI/2*ws,endAngle:qn.ang-Math.PI/2*ws,counterClockwise:il})}var Q1=Math.sqrt(.02),Mn={};function zd(e){var t=[];if(null!=e){for(var r=0;r<e.length;r+=2)t.push({x:e[r],y:e[r+1]});return t}}Mn.findMidptPtsEtc=function(e,t){var n,me,Te,Be,r=t.posPts,a=t.intersectionPts,i=t.vectorNormInverse,s=e.pstyle("source-endpoint"),o=e.pstyle("target-endpoint"),u=null!=s.units&&null!=o.units;switch(e.pstyle("edge-distances").value){case"node-position":n=r;break;case"intersection":n=a;break;case"endpoints":if(u){var x=Rt(this.manualEndptToPx(e.source()[0],s),2),k=x[0],_=x[1],O=Rt(this.manualEndptToPx(e.target()[0],o),2),K=O[0],Y=O[1],j={x1:k,y1:_,x2:K,y2:Y};Te=K-k,i={x:-(me=Y-_)/(Be=Math.sqrt(Te*Te+me*me)),y:Te/Be},n=j}else _a("Edge ".concat(e.id()," has edge-distances:endpoints specified without manual endpoints specified via source-endpoint and target-endpoint.  Falling back on edge-distances:intersection (default).")),n=a}return{midptPts:n,vectorNormInverse:i}},Mn.findHaystackPoints=function(e){for(var t=0;t<e.length;t++){var r=e[t],a=r._private,i=a.rscratch;if(!i.haystack){var n=2*Math.random()*Math.PI;i.source={x:Math.cos(n),y:Math.sin(n)},n=2*Math.random()*Math.PI,i.target={x:Math.cos(n),y:Math.sin(n)}}var s=a.source,o=a.target,u=s.position(),h=o.position(),f=s.width(),p=o.width(),x=s.height(),k=o.height(),U=r.pstyle("haystack-radius").value/2;i.haystackPts=i.allpts=[i.source.x*f*U+u.x,i.source.y*x*U+u.y,i.target.x*p*U+h.x,i.target.y*k*U+h.y],i.midX=(i.allpts[0]+i.allpts[2])/2,i.midY=(i.allpts[1]+i.allpts[3])/2,i.edgeType="haystack",i.haystack=!0,this.storeEdgeProjections(r),this.calculateArrowAngles(r),this.recalculateEdgeLabelProjections(r),this.calculateLabelAngles(r)}},Mn.findSegmentsPoints=function(e,t){var r=e._private.rscratch,a=e.pstyle("segment-weights"),i=e.pstyle("segment-distances"),n=e.pstyle("segment-radii"),s=e.pstyle("radius-type"),o=Math.min(a.pfValue.length,i.pfValue.length),u=n.pfValue[n.pfValue.length-1],h=s.pfValue[s.pfValue.length-1];r.edgeType="segments",r.segpts=[],r.radii=[],r.isArcRadius=[];for(var f=0;f<o;f++){var p=a.pfValue[f],x=i.pfValue[f],k=1-p,_=p,U=this.findMidptPtsEtc(e,t),O=U.midptPts,K=U.vectorNormInverse,Y={x:O.x1*k+O.x2*_,y:O.y1*k+O.y2*_};r.segpts.push(Y.x+K.x*x,Y.y+K.y*x),r.radii.push(void 0!==n.pfValue[f]?n.pfValue[f]:u),r.isArcRadius.push("arc-radius"===(void 0!==s.pfValue[f]?s.pfValue[f]:h))}},Mn.findLoopPoints=function(e,t,r,a){var i=e._private.rscratch,n=t.dirCounts,s=t.srcPos,o=e.pstyle("control-point-distances"),u=o?o.pfValue[0]:void 0,h=e.pstyle("loop-direction").pfValue,f=e.pstyle("loop-sweep").pfValue,p=e.pstyle("control-point-step-size").pfValue;i.edgeType="self";var x=r,k=p;a&&(x=0,k=u);var _=h-Math.PI/2,U=_-f/2,O=_+f/2,K=h+"_"+f;x=void 0===n[K]?n[K]=0:++n[K],i.ctrlpts=[s.x+1.4*Math.cos(U)*k*(x/3+1),s.y+1.4*Math.sin(U)*k*(x/3+1),s.x+1.4*Math.cos(O)*k*(x/3+1),s.y+1.4*Math.sin(O)*k*(x/3+1)]},Mn.findCompoundLoopPoints=function(e,t,r,a){var i=e._private.rscratch;i.edgeType="compound";var n=t.srcPos,s=t.tgtPos,o=t.srcW,u=t.srcH,h=t.tgtW,f=t.tgtH,p=e.pstyle("control-point-step-size").pfValue,x=e.pstyle("control-point-distances"),_=r,U=p;a&&(_=0,U=x?x.pfValue[0]:void 0);var K={x:n.x-o/2,y:n.y-u/2},Y={x:s.x-h/2,y:s.y-f/2},j={x:Math.min(K.x,Y.x),y:Math.min(K.y,Y.y)},ie=Math.max(.5,Math.log(.01*o)),se=Math.max(.5,Math.log(.01*h));i.ctrlpts=[j.x,j.y-(1+Math.pow(50,1.12)/100)*U*(_/3+1)*ie,j.x-(1+Math.pow(50,1.12)/100)*U*(_/3+1)*se,j.y]},Mn.findStraightEdgePoints=function(e){e._private.rscratch.edgeType="straight"},Mn.findBezierPoints=function(e,t,r,a,i){var n=e._private.rscratch,s=e.pstyle("control-point-step-size").pfValue,o=e.pstyle("control-point-distances"),u=e.pstyle("control-point-weights"),h=o&&u?Math.min(o.value.length,u.value.length):1,f=o?o.pfValue[0]:void 0,p=u.value[0],x=a;n.edgeType=x?"multibezier":"bezier",n.ctrlpts=[];for(var k=0;k<h;k++){var U,_=(.5-t.eles.length/2+r)*s*(i?-1:1),O=un(_);x&&(f=o?o.pfValue[k]:s,p=u.value[k]);var K=void 0!==(U=a?f:void 0!==f?O*f:void 0)?U:_,Y=1-p,j=p,yt=this.findMidptPtsEtc(e,t),ie=yt.midptPts,se=yt.vectorNormInverse,Ht={x:ie.x1*Y+ie.x2*j,y:ie.y1*Y+ie.y2*j};n.ctrlpts.push(Ht.x+se.x*K,Ht.y+se.y*K)}},Mn.findTaxiPoints=function(e,t){var r=e._private.rscratch;r.edgeType="segments";var a="vertical",i="horizontal",n="leftward",s="rightward",o="downward",u="upward",f=t.posPts,p=t.srcW,x=t.srcH,k=t.tgtW,_=t.tgtH,O="node-position"!==e.pstyle("edge-distances").value,K=e.pstyle("taxi-direction").value,Y=K,j=e.pstyle("taxi-turn"),yt="%"===j.units,ie=j.pfValue,se=ie<0,Ht=e.pstyle("taxi-turn-min-distance").pfValue,me=O?(x+_)/2:0,Te=f.x2-f.x1,Be=f.y2-f.y1,Me=function(ge,Yr){return ge>0?Math.max(ge-Yr,0):Math.min(ge+Yr,0)},Oe=Me(Te,O?(p+k)/2:0),tr=Me(Be,me),ur=!1;"auto"===Y?K=Math.abs(Oe)>Math.abs(tr)?i:a:Y===u||Y===o?(K=a,ur=!0):(Y===n||Y===s)&&(K=i,ur=!0);var Dr,fr=K===a,rr=fr?tr:Oe,Cr=fr?Be:Te,Ur=un(Cr),qr=!1;(!ur||!yt&&!se)&&(Y===o&&Cr<0||Y===u&&Cr>0||Y===n&&Cr>0||Y===s&&Cr<0)&&(rr=(Ur*=-1)*Math.abs(rr),qr=!0);var Ea=function(ge){return Math.abs(ge)<Ht||Math.abs(ge)>=Math.abs(rr)},pa=Ea(Dr=yt?(ie<0?1+ie:ie)*rr:(ie<0?rr:0)+ie*Ur),Aa=Ea(Math.abs(rr)-Math.abs(Dr));if(!pa&&!Aa||qr)if(fr){var fi=f.y1+Dr+(O?x/2*Ur:0);r.segpts=[f.x1,fi,f.x2,fi]}else{var Yi=f.x1+Dr+(O?p/2*Ur:0);r.segpts=[Yi,f.y1,Yi,f.y2]}else if(fr){var Za=Math.abs(Cr)<=x/2,Ta=Math.abs(Te)<=k/2;if(Za){var Kr=(f.x1+f.x2)/2;r.segpts=[Kr,f.y1,Kr,f.y2]}else if(Ta){var ma=(f.y1+f.y2)/2;r.segpts=[f.x1,ma,f.x2,ma]}else r.segpts=[f.x1,f.y2]}else{var Ii=Math.abs(Cr)<=p/2,Ci=Math.abs(Be)<=_/2;if(Ii){var xi=(f.y1+f.y2)/2;r.segpts=[f.x1,xi,f.x2,xi]}else if(Ci){var ci=(f.x1+f.x2)/2;r.segpts=[ci,f.y1,ci,f.y2]}else r.segpts=[f.x2,f.y1]}if(r.isRound){var bi=e.pstyle("taxi-radius").value,ai="arc-radius"===e.pstyle("radius-type").value[0];r.radii=new Array(r.segpts.length/2).fill(bi),r.isArcRadius=new Array(r.segpts.length/2).fill(ai)}},Mn.tryToCorrectInvalidPoints=function(e,t){var r=e._private.rscratch;if("bezier"===r.edgeType){var a=t.srcPos,i=t.tgtPos,n=t.srcW,s=t.srcH,o=t.tgtW,u=t.tgtH,h=t.srcShape,f=t.tgtShape,p=t.srcCornerRadius,x=t.tgtCornerRadius,k=t.srcRs,_=t.tgtRs,U=!X(r.startX)||!X(r.startY),O=!X(r.arrowStartX)||!X(r.arrowStartY),K=!X(r.endX)||!X(r.endY),Y=!X(r.arrowEndX)||!X(r.arrowEndY),ie=this.getArrowWidth(e.pstyle("width").pfValue,e.pstyle("arrow-scale").value)*this.arrowShapeWidth*3,se=Xi({x:r.ctrlpts[0],y:r.ctrlpts[1]},{x:r.startX,y:r.startY}),Ht=se<ie,he=Xi({x:r.ctrlpts[0],y:r.ctrlpts[1]},{x:r.endX,y:r.endY}),me=he<ie,Te=!1;if(U||O||Ht){Te=!0;var Be={x:r.ctrlpts[0]-a.x,y:r.ctrlpts[1]-a.y},Me=Math.sqrt(Be.x*Be.x+Be.y*Be.y),Oe={x:Be.x/Me,y:Be.y/Me},tr=Math.max(n,s),ur={x:r.ctrlpts[0]+2*Oe.x*tr,y:r.ctrlpts[1]+2*Oe.y*tr},fr=h.intersectLine(a.x,a.y,n,s,ur.x,ur.y,0,p,k);Ht?(r.ctrlpts[0]=r.ctrlpts[0]+Oe.x*(ie-se),r.ctrlpts[1]=r.ctrlpts[1]+Oe.y*(ie-se)):(r.ctrlpts[0]=fr[0]+Oe.x*ie,r.ctrlpts[1]=fr[1]+Oe.y*ie)}if(K||Y||me){Te=!0;var rr={x:r.ctrlpts[0]-i.x,y:r.ctrlpts[1]-i.y},Cr=Math.sqrt(rr.x*rr.x+rr.y*rr.y),Ur={x:rr.x/Cr,y:rr.y/Cr},qr=Math.max(n,s),Dr={x:r.ctrlpts[0]+2*Ur.x*qr,y:r.ctrlpts[1]+2*Ur.y*qr},Wr=f.intersectLine(i.x,i.y,o,u,Dr.x,Dr.y,0,x,_);me?(r.ctrlpts[0]=r.ctrlpts[0]+Ur.x*(ie-he),r.ctrlpts[1]=r.ctrlpts[1]+Ur.y*(ie-he)):(r.ctrlpts[0]=Wr[0]+Ur.x*ie,r.ctrlpts[1]=Wr[1]+Ur.y*ie)}Te&&this.findEndpoints(e)}},Mn.storeAllpts=function(e){var t=e._private.rscratch;if("multibezier"===t.edgeType||"bezier"===t.edgeType||"self"===t.edgeType||"compound"===t.edgeType){t.allpts=[],t.allpts.push(t.startX,t.startY);for(var r=0;r+1<t.ctrlpts.length;r+=2)t.allpts.push(t.ctrlpts[r],t.ctrlpts[r+1]),r+3<t.ctrlpts.length&&t.allpts.push((t.ctrlpts[r]+t.ctrlpts[r+2])/2,(t.ctrlpts[r+1]+t.ctrlpts[r+3])/2);var a;t.allpts.push(t.endX,t.endY),t.ctrlpts.length/2%2==0?(t.midX=t.allpts[a=t.allpts.length/2-1],t.midY=t.allpts[a+1]):(t.midX=Gt(t.allpts[a=t.allpts.length/2-3],t.allpts[a+2],t.allpts[a+4],.5),t.midY=Gt(t.allpts[a+1],t.allpts[a+3],t.allpts[a+5],.5))}else if("straight"===t.edgeType)t.allpts=[t.startX,t.startY,t.endX,t.endY],t.midX=(t.startX+t.endX+t.arrowStartX+t.arrowEndX)/4,t.midY=(t.startY+t.endY+t.arrowStartY+t.arrowEndY)/4;else if("segments"===t.edgeType){if(t.allpts=[],t.allpts.push(t.startX,t.startY),t.allpts.push.apply(t.allpts,t.segpts),t.allpts.push(t.endX,t.endY),t.isRound){t.roundCorners=[];for(var n=2;n+3<t.allpts.length;n+=2){var s=t.radii[n/2-1];t.roundCorners.push(Uc({x:t.allpts[n-2],y:t.allpts[n-1]},{x:t.allpts[n],y:t.allpts[n+1],radius:s},{x:t.allpts[n+2],y:t.allpts[n+3]},s,t.isArcRadius[n/2-1]))}}if(t.segpts.length%4==0){var u=t.segpts.length/2,h=u-2;t.midX=(t.segpts[h]+t.segpts[u])/2,t.midY=(t.segpts[h+1]+t.segpts[u+1])/2}else{var f=t.segpts.length/2-1;if(t.isRound){var p={x:t.segpts[f],y:t.segpts[f+1]},x=t.roundCorners[f/2];if(0===x.radius){var k={x:t.segpts[f+2],y:t.segpts[f+3]};t.midX=p.x,t.midY=p.y,t.midVector=[p.y-k.y,k.x-p.x]}else{var _=[p.x-x.cx,p.y-x.cy],U=x.radius/Math.sqrt(Math.pow(_[0],2)+Math.pow(_[1],2));_=_.map(function(O){return O*U}),t.midX=x.cx+_[0],t.midY=x.cy+_[1],t.midVector=_}}else t.midX=t.segpts[f],t.midY=t.segpts[f+1]}}},Mn.checkForInvalidEdgeWarning=function(e){var t=e[0]._private.rscratch;t.nodesOverlap||X(t.startX)&&X(t.startY)&&X(t.endX)&&X(t.endY)?t.loggedErr=!1:t.loggedErr||(t.loggedErr=!0,_a("Edge `"+e.id()+"` has invalid endpoints and so it is impossible to draw.  Adjust your edge style (e.g. control points) accordingly or use an alternative edge type.  This is expected behaviour when the source node and the target node overlap."))},Mn.findEdgeControlPoints=function(e){var t=this;if(e&&0!==e.length){for(var r=this,i=r.cy.hasCompoundNodes(),n=new Lt,s=function(me,Te){return[].concat(q(me),[Te?1:0]).join("-")},o=[],u=[],h=0;h<e.length;h++){var f=e[h],p=f._private,x=f.pstyle("curve-style").value;if(!f.removed()&&f.takesUpSpace()){if("haystack"===x){u.push(f);continue}var k="unbundled-bezier"===x||Tt(x,"segments")||"straight"===x||"straight-triangle"===x||Tt(x,"taxi"),_="unbundled-bezier"===x||"bezier"===x,O=p.target,j=[p.source.poolIndex(),O.poolIndex()].sort(),yt=s(j,k),ie=n.get(yt);null==ie&&(ie={eles:[]},o.push({pairId:j,edgeIsUnbundled:k}),n.set(yt,ie)),ie.eles.push(f),k&&(ie.hasUnbundled=!0),_&&(ie.hasBezier=!0)}}for(var se=function(){var tr,me=o[Ht],Me=s(me.pairId,me.edgeIsUnbundled),Oe=n.get(Me);if(!Oe.hasUnbundled){var ur=Oe.eles[0].parallelEdges().filter(function(ai){return ai.isBundledBezier()});Ct(Oe.eles),ur.forEach(function(ai){return Oe.eles.push(ai)}),Oe.eles.sort(function(ai,va){return ai.poolIndex()-va.poolIndex()})}var fr=Oe.eles[0],rr=fr.source(),Cr=fr.target();if(rr.poolIndex()>Cr.poolIndex()){var Ur=rr;rr=Cr,Cr=Ur}var qr=Oe.srcPos=rr.position(),Dr=Oe.tgtPos=Cr.position(),Wr=Oe.srcW=rr.outerWidth(),ga=Oe.srcH=rr.outerHeight(),Ea=Oe.tgtW=Cr.outerWidth(),pa=Oe.tgtH=Cr.outerHeight(),Aa=Oe.srcShape=r.nodeShapes[t.getNodeShape(rr)],Ra=Oe.tgtShape=r.nodeShapes[t.getNodeShape(Cr)],Za=Oe.srcCornerRadius="auto"===rr.pstyle("corner-radius").value?"auto":rr.pstyle("corner-radius").pfValue,Ta=Oe.tgtCornerRadius="auto"===Cr.pstyle("corner-radius").value?"auto":Cr.pstyle("corner-radius").pfValue,Kr=Oe.tgtRs=Cr._private.rscratch,$r=Oe.srcRs=rr._private.rscratch;Oe.dirCounts={north:0,west:0,south:0,east:0,northwest:0,southwest:0,northeast:0,southeast:0};for(var Zr=0;Zr<Oe.eles.length;Zr++){var ma=Oe.eles[Zr],Ga=ma[0]._private.rscratch,li=ma.pstyle("curve-style").value,Ii="unbundled-bezier"===li||Tt(li,"segments")||Tt(li,"taxi"),Ci=!rr.same(ma.source());if(!Oe.calculatedIntersection&&rr!==Cr&&(Oe.hasBezier||Oe.hasUnbundled)){Oe.calculatedIntersection=!0;var xi=Aa.intersectLine(qr.x,qr.y,Wr,ga,Dr.x,Dr.y,0,Za,$r),gi=Oe.srcIntn=xi,Qa=Ra.intersectLine(Dr.x,Dr.y,Ea,pa,qr.x,qr.y,0,Ta,Kr),ci=Oe.tgtIntn=Qa,di=Oe.intersectionPts={x1:xi[0],x2:Qa[0],y1:xi[1],y2:Qa[1]},_i=Oe.posPts={x1:qr.x,x2:Dr.x,y1:qr.y,y2:Dr.y},fi=Qa[1]-xi[1],wi=Qa[0]-xi[0],Mi=Math.sqrt(wi*wi+fi*fi);X(Mi)&&Mi>=Q1||(Mi=Math.sqrt(Math.max(wi*wi,.01)+Math.max(fi*fi,.01)));var Yi=Oe.vector={x:wi,y:fi},Hi=Oe.vectorNorm={x:Yi.x/Mi,y:Yi.y/Mi},Gi={x:-Hi.y,y:Hi.x};Oe.nodesOverlap=!X(Mi)||Ra.checkPoint(xi[0],xi[1],0,Ea,pa,Dr.x,Dr.y,Ta,Kr)||Aa.checkPoint(Qa[0],Qa[1],0,Wr,ga,qr.x,qr.y,Za,$r),Oe.vectorNormInverse=Gi,tr={nodesOverlap:Oe.nodesOverlap,dirCounts:Oe.dirCounts,calculatedIntersection:!0,hasBezier:Oe.hasBezier,hasUnbundled:Oe.hasUnbundled,eles:Oe.eles,srcPos:Dr,srcRs:Kr,tgtPos:qr,tgtRs:$r,srcW:Ea,srcH:pa,tgtW:Wr,tgtH:ga,srcIntn:ci,tgtIntn:gi,srcShape:Ra,tgtShape:Aa,posPts:{x1:_i.x2,y1:_i.y2,x2:_i.x1,y2:_i.y1},intersectionPts:{x1:di.x2,y1:di.y2,x2:di.x1,y2:di.y1},vector:{x:-Yi.x,y:-Yi.y},vectorNorm:{x:-Hi.x,y:-Hi.y},vectorNormInverse:{x:-Gi.x,y:-Gi.y}}}var bi=Ci?tr:Oe;Ga.nodesOverlap=bi.nodesOverlap,Ga.srcIntn=bi.srcIntn,Ga.tgtIntn=bi.tgtIntn,Ga.isRound=li.startsWith("round"),i&&(rr.isParent()||rr.isChild()||Cr.isParent()||Cr.isChild())&&(rr.parents().anySame(Cr)||Cr.parents().anySame(rr)||rr.same(Cr)&&rr.isParent())?t.findCompoundLoopPoints(ma,bi,Zr,Ii):rr===Cr?t.findLoopPoints(ma,bi,Zr,Ii):li.endsWith("segments")?t.findSegmentsPoints(ma,bi):li.endsWith("taxi")?t.findTaxiPoints(ma,bi):"straight"===li||!Ii&&Oe.eles.length%2==1&&Zr===Math.floor(Oe.eles.length/2)?t.findStraightEdgePoints(ma):t.findBezierPoints(ma,bi,Zr,Ii,Ci),t.findEndpoints(ma),t.tryToCorrectInvalidPoints(ma,bi),t.checkForInvalidEdgeWarning(ma),t.storeAllpts(ma),t.storeEdgeProjections(ma),t.calculateArrowAngles(ma),t.recalculateEdgeLabelProjections(ma),t.calculateLabelAngles(ma)}},Ht=0;Ht<o.length;Ht++)se();this.findHaystackPoints(u)}},Mn.getSegmentPoints=function(e){var t=e[0]._private.rscratch;if(this.recalculateRenderedStyle(e),"segments"===t.edgeType)return zd(t.segpts)},Mn.getControlPoints=function(e){var t=e[0]._private.rscratch;this.recalculateRenderedStyle(e);var r=t.edgeType;if("bezier"===r||"multibezier"===r||"self"===r||"compound"===r)return zd(t.ctrlpts)},Mn.getEdgeMidpoint=function(e){var t=e[0]._private.rscratch;return this.recalculateRenderedStyle(e),{x:t.midX,y:t.midY}};var yo={manualEndptToPx:function(e,t){var a=e.position(),i=e.outerWidth(),n=e.outerHeight(),s=e._private.rscratch;if(2===t.value.length){var o=[t.pfValue[0],t.pfValue[1]];return"%"===t.units[0]&&(o[0]=o[0]*i),"%"===t.units[1]&&(o[1]=o[1]*n),o[0]+=a.x,o[1]+=a.y,o}var u=t.pfValue[0];u=-Math.PI/2+u;var h=2*Math.max(i,n),f=[a.x+Math.cos(u)*h,a.y+Math.sin(u)*h];return this.nodeShapes[this.getNodeShape(e)].intersectLine(a.x,a.y,i,n,f[0],f[1],0,"auto"===e.pstyle("corner-radius").value?"auto":e.pstyle("corner-radius").pfValue,s)},findEndpoints:function(e){var t,r,a,i,s,n=this,o=e.source()[0],u=e.target()[0],h=o.position(),f=u.position(),p=e.pstyle("target-arrow-shape").value,x=e.pstyle("source-arrow-shape").value,k=e.pstyle("target-distance-from-node").pfValue,_=e.pstyle("source-distance-from-node").pfValue,U=o._private.rscratch,O=u._private.rscratch,K=e.pstyle("curve-style").value,Y=e._private.rscratch,j=Y.edgeType,yt=Tt(K,"taxi"),ie="self"===j||"compound"===j,se="bezier"===j||"multibezier"===j||ie,Ht="bezier"!==j,he="straight"===j||"segments"===j,me="segments"===j,Te=se||Ht||he,Be=ie||yt,Me=e.pstyle("source-endpoint"),Oe=Be?"outside-to-node":Me.value,tr="auto"===o.pstyle("corner-radius").value?"auto":o.pstyle("corner-radius").pfValue,ur=e.pstyle("target-endpoint"),fr=Be?"outside-to-node":ur.value,rr="auto"===u.pstyle("corner-radius").value?"auto":u.pstyle("corner-radius").pfValue;Y.srcManEndpt=Me,Y.tgtManEndpt=ur;var Cr,Ur,qr,Dr,Wr=null!==(t=2===(null==ur||null===(r=ur.pfValue)||void 0===r?void 0:r.length)?ur.pfValue:null)&&void 0!==t?t:[0,0],ga=null!==(a=2===(null==Me||null===(i=Me.pfValue)||void 0===i?void 0:i.length)?Me.pfValue:null)&&void 0!==a?a:[0,0];if(se){var Ea=[Y.ctrlpts[0],Y.ctrlpts[1]];Cr=Ht?[Y.ctrlpts[Y.ctrlpts.length-2],Y.ctrlpts[Y.ctrlpts.length-1]]:Ea,Ur=Ea}else if(he){var Aa=me?Y.segpts.slice(0,2):[f.x+Wr[0],f.y+Wr[1]];Cr=me?Y.segpts.slice(Y.segpts.length-2):[h.x+ga[0],h.y+ga[1]],Ur=Aa}if("inside-to-node"===fr)s=[f.x,f.y];else if(ur.units)s=this.manualEndptToPx(u,ur);else if("outside-to-line"===fr)s=Y.tgtIntn;else if("outside-to-node"===fr||"outside-to-node-or-label"===fr?qr=Cr:("outside-to-line"===fr||"outside-to-line-or-label"===fr)&&(qr=[h.x,h.y]),s=n.nodeShapes[this.getNodeShape(u)].intersectLine(f.x,f.y,u.outerWidth(),u.outerHeight(),qr[0],qr[1],0,rr,O),"outside-to-node-or-label"===fr||"outside-to-line-or-label"===fr){var Za=u._private.rscratch,$r=Za.labelX,Zr=Za.labelY,ma=Za.labelWidth/2,Ga=Za.labelHeight/2,li=u.pstyle("text-valign").value;"top"===li?Zr-=Ga:"bottom"===li&&(Zr+=Ga);var Ii=u.pstyle("text-halign").value;"left"===Ii?$r-=ma:"right"===Ii&&($r+=ma);var Ci=Tn(qr[0],qr[1],[$r-ma,Zr-Ga,$r+ma,Zr-Ga,$r+ma,Zr+Ga,$r-ma,Zr+Ga],f.x,f.y);if(Ci.length>0){var xi=h,gi=rn(xi,hn(s)),Qa=rn(xi,hn(Ci)),ci=gi;Qa<gi&&(s=Ci,ci=Qa),Ci.length>2&&rn(xi,{x:Ci[2],y:Ci[3]})<ci&&(s=[Ci[2],Ci[3]])}}var _i=an(s,Cr,n.arrowShapes[p].spacing(e)+k),fi=an(s,Cr,n.arrowShapes[p].gap(e)+k);if(Y.endX=fi[0],Y.endY=fi[1],Y.arrowEndX=_i[0],Y.arrowEndY=_i[1],"inside-to-node"===Oe)s=[h.x,h.y];else if(Me.units)s=this.manualEndptToPx(o,Me);else if("outside-to-line"===Oe)s=Y.srcIntn;else if("outside-to-node"===Oe||"outside-to-node-or-label"===Oe?Dr=Ur:("outside-to-line"===Oe||"outside-to-line-or-label"===Oe)&&(Dr=[f.x,f.y]),s=n.nodeShapes[this.getNodeShape(o)].intersectLine(h.x,h.y,o.outerWidth(),o.outerHeight(),Dr[0],Dr[1],0,tr,U),"outside-to-node-or-label"===Oe||"outside-to-line-or-label"===Oe){var wi=o._private.rscratch,Hi=wi.labelX,Gi=wi.labelY,bi=wi.labelWidth/2,ai=wi.labelHeight/2,va=o.pstyle("text-valign").value;"top"===va?Gi-=ai:"bottom"===va&&(Gi+=ai);var ge=o.pstyle("text-halign").value;"left"===ge?Hi-=bi:"right"===ge&&(Hi+=bi);var Yr=Tn(Dr[0],Dr[1],[Hi-bi,Gi-ai,Hi+bi,Gi-ai,Hi+bi,Gi+ai,Hi-bi,Gi+ai],h.x,h.y);if(Yr.length>0){var na=f,ca=rn(na,hn(s)),xa=rn(na,hn(Yr)),ri=ca;xa<ca&&(s=[Yr[0],Yr[1]],ri=xa),Yr.length>2&&rn(na,{x:Yr[2],y:Yr[3]})<ri&&(s=[Yr[2],Yr[3]])}}var si=an(s,Ur,n.arrowShapes[x].spacing(e)+_),ii=an(s,Ur,n.arrowShapes[x].gap(e)+_);Y.startX=ii[0],Y.startY=ii[1],Y.arrowStartX=si[0],Y.arrowStartY=si[1],Te&&(Y.badLine=!(X(Y.startX)&&X(Y.startY)&&X(Y.endX)&&X(Y.endY)))},getSourceEndpoint:function(e){var t=e[0]._private.rscratch;return"haystack"===(this.recalculateRenderedStyle(e),t.edgeType)?{x:t.haystackPts[0],y:t.haystackPts[1]}:{x:t.arrowStartX,y:t.arrowStartY}},getTargetEndpoint:function(e){var t=e[0]._private.rscratch;return"haystack"===(this.recalculateRenderedStyle(e),t.edgeType)?{x:t.haystackPts[2],y:t.haystackPts[3]}:{x:t.arrowEndX,y:t.arrowEndY}}},$c={};function J1(e,t,r){for(var a=function(h,f,p,x){return Gt(h,f,p,x)},n=t._private.rstyle.bezierPts,s=0;s<e.bezierProjPcts.length;s++){var o=e.bezierProjPcts[s];n.push({x:a(r[0],r[2],r[4],o),y:a(r[1],r[3],r[5],o)})}}$c.storeEdgeProjections=function(e){var t=e._private,r=t.rscratch,a=r.edgeType;if(t.rstyle.bezierPts=null,t.rstyle.linePts=null,t.rstyle.haystackPts=null,"multibezier"===a||"bezier"===a||"self"===a||"compound"===a){t.rstyle.bezierPts=[];for(var i=0;i+5<r.allpts.length;i+=4)J1(this,e,r.allpts.slice(i,i+6))}else if("segments"===a){var n=t.rstyle.linePts=[];for(i=0;i+1<r.allpts.length;i+=2)n.push({x:r.allpts[i],y:r.allpts[i+1]})}else if("haystack"===a){var s=r.haystackPts;t.rstyle.haystackPts=[{x:s[0],y:s[1]},{x:s[2],y:s[3]}]}t.rstyle.arrowWidth=this.getArrowWidth(e.pstyle("width").pfValue,e.pstyle("arrow-scale").value)*this.arrowShapeWidth},$c.recalculateEdgeProjections=function(e){this.findEdgeControlPoints(e)};var is={recalculateNodeLabelProjection:function(e){var t=e.pstyle("label").strValue;if(!Nt(t)){var r,a,i=e._private,n=e.width(),s=e.height(),o=e.padding(),u=e.position(),h=e.pstyle("text-halign").strValue,f=e.pstyle("text-valign").strValue,p=i.rscratch,x=i.rstyle;switch(h){case"left":r=u.x-n/2-o;break;case"right":r=u.x+n/2+o;break;default:r=u.x}switch(f){case"top":a=u.y-s/2-o;break;case"bottom":a=u.y+s/2+o;break;default:a=u.y}p.labelX=r,p.labelY=a,x.labelX=r,x.labelY=a,this.calculateLabelAngles(e),this.applyLabelDimensions(e)}}},Vd=function(t,r){var a=Math.atan(r/t);return 0===t&&a<0&&(a*=-1),a},Ud=function(t,r){return Vd(r.x-t.x,r.y-t.y)};is.recalculateEdgeLabelProjections=function(e){var t,r=e._private,a=r.rscratch,i=this,n={mid:e.pstyle("label").strValue,source:e.pstyle("source-label").strValue,target:e.pstyle("target-label").strValue};if(n.mid||n.source||n.target){var s=function(p,x,k){Ve(r.rscratch,p,x,k),Ve(r.rstyle,p,x,k)};s("labelX",null,(t={x:a.midX,y:a.midY}).x),s("labelY",null,t.y);var o=Vd(a.midDispX,a.midDispY);s("labelAutoAngle",null,o);var u=function(){if(u.cache)return u.cache;for(var p=[],x=0;x+5<a.allpts.length;x+=4)p.push({p0:{x:a.allpts[x],y:a.allpts[x+1]},p1:{x:a.allpts[x+2],y:a.allpts[x+3]},p2:{x:a.allpts[x+4],y:a.allpts[x+5]},startDist:0,length:0,segments:[]});var O=r.rstyle.bezierPts,K=i.bezierProjPcts.length;function Y(Ht,he,me,Te,Be){var Me=Xi(he,me),Oe=Ht.segments[Ht.segments.length-1];Ht.segments.push({p0:he,p1:me,t0:Te,t1:Be,startDist:Oe?Oe.startDist+Oe.length:0,length:Me}),Ht.length+=Me}for(var j=0;j<p.length;j++){var yt=p[j],ie=p[j-1];ie&&(yt.startDist=ie.startDist+ie.length),Y(yt,yt.p0,O[j*K],0,i.bezierProjPcts[0]);for(var se=0;se<K-1;se++)Y(yt,O[j*K+se],O[j*K+se+1],i.bezierProjPcts[se],i.bezierProjPcts[se+1]);Y(yt,O[j*K+K-1],yt.p2,i.bezierProjPcts[K-1],1)}return u.cache=p},h=function(p){var x,k="source"===p;if(n[p]){var _=e.pstyle(p+"-text-offset").pfValue;switch(a.edgeType){case"self":case"compound":case"bezier":case"multibezier":for(var O,U=u(),K=0,Y=0,j=0;j<U.length;j++){for(var yt=U[k?j:U.length-1-j],ie=0;ie<yt.segments.length;ie++){var se=yt.segments[k?ie:yt.segments.length-1-ie];if(K=Y,(Y+=se.length)>=_||j===U.length-1&&ie===yt.segments.length-1){O={cp:yt,segment:se};break}}if(O)break}var he=O.cp,me=O.segment,Te=(_-K)/me.length,Be=me.t1-me.t0,Me=k?me.t0+Be*Te:me.t1-Be*Te;Me=Xt(0,Me,1),t=d(he.p0,he.p1,he.p2,Me),x=function(t,r,a,i){var n=Xt(0,i-.001,1),s=Xt(0,i+.001,1),o=d(t,r,a,n),u=d(t,r,a,s);return Ud(o,u)}(he.p0,he.p1,he.p2,Me);break;case"straight":case"segments":case"haystack":for(var tr,ur,fr,rr,Oe=0,Cr=a.allpts.length,Ur=0;Ur+3<Cr&&(k?(fr={x:a.allpts[Ur],y:a.allpts[Ur+1]},rr={x:a.allpts[Ur+2],y:a.allpts[Ur+3]}):(fr={x:a.allpts[Cr-2-Ur],y:a.allpts[Cr-1-Ur]},rr={x:a.allpts[Cr-4-Ur],y:a.allpts[Cr-3-Ur]}),ur=Oe,!((Oe+=tr=Xi(fr,rr))>=_));Ur+=2);var Dr=(_-ur)/tr;Dr=Xt(0,Dr,1),t=function(t,r,a,i){var n_x=r.x-t.x,n_y=r.y-t.y,s=Xi(t,r);return a=a??0,{x:t.x+n_x/s*(i=i??a*s),y:t.y+n_y/s*i}}(fr,rr,Dr),x=Ud(fr,rr)}s("labelX",p,t.x),s("labelY",p,t.y),s("labelAutoAngle",p,x)}};h("source"),h("target"),this.applyLabelDimensions(e)}},is.applyLabelDimensions=function(e){this.applyPrefixedLabelDimensions(e),e.isEdge()&&(this.applyPrefixedLabelDimensions(e,"source"),this.applyPrefixedLabelDimensions(e,"target"))},is.applyPrefixedLabelDimensions=function(e,t){var r=e._private,a=this.getLabelText(e,t),i=da(a,e._private.labelDimsKey);if(Jt(r.rscratch,"prefixedLabelDimsKey",t)!==i){Ve(r.rscratch,"prefixedLabelDimsKey",t,i);var n=this.calculateLabelDimensions(e,a),s=e.pstyle("line-height").pfValue,o=e.pstyle("text-wrap").strValue,u=Jt(r.rscratch,"labelWrapCachedLines",t)||[],h="wrap"!==o?1:Math.max(u.length,1),f=n.height/h,p=f*s,x=n.width,k=n.height+(h-1)*(s-1)*f;Ve(r.rstyle,"labelWidth",t,x),Ve(r.rscratch,"labelWidth",t,x),Ve(r.rstyle,"labelHeight",t,k),Ve(r.rscratch,"labelHeight",t,k),Ve(r.rscratch,"labelLineHeight",t,p)}},is.getLabelText=function(e,t){var r=e._private,i=e.pstyle((t?t+"-":"")+"label").strValue,n=e.pstyle("text-transform").value,s=function(ga,Ea){return Ea?(Ve(r.rscratch,ga,t,Ea),Ea):Jt(r.rscratch,ga,t)};if(!i)return"";"none"==n||("uppercase"==n?i=i.toUpperCase():"lowercase"==n&&(i=i.toLowerCase()));var o=e.pstyle("text-wrap").value;if("wrap"===o){var u=s("labelKey");if(null!=u&&s("labelWrapKey")===u)return s("labelWrapCachedText");for(var f=i.split("\n"),p=e.pstyle("text-max-width").pfValue,k="anywhere"===e.pstyle("text-overflow-wrap").value,_=[],U=/[\s\u200b]+|$/g,O=0;O<f.length;O++){var K=f[O],j=this.calculateLabelDimensions(e,K).width;if(k){var yt=K.split("").join("\u200b");K=yt}if(j>p){var me,se="",Ht=0,he=$(K.matchAll(U));try{for(he.s();!(me=he.n()).done;){var Te=me.value,Be=Te[0],Me=K.substring(Ht,Te.index);Ht=Te.index+Be.length,this.calculateLabelDimensions(e,0===se.length?Me:se+Me+Be).width<=p?se+=Me+Be:(se&&_.push(se),se=Me+Be)}}catch(Wr){he.e(Wr)}finally{he.f()}se.match(/^[\s\u200b]+$/)||_.push(se)}else _.push(K)}s("labelWrapCachedLines",_),i=s("labelWrapCachedText",_.join("\n")),s("labelWrapKey",u)}else if("ellipsis"===o){var fr=e.pstyle("text-max-width").pfValue,rr="",Ur=!1;if(this.calculateLabelDimensions(e,i).width<fr)return i;for(var qr=0;qr<i.length&&!(this.calculateLabelDimensions(e,rr+i[qr]+"\u2026").width>fr);qr++)rr+=i[qr],qr===i.length-1&&(Ur=!0);return Ur||(rr+="\u2026"),rr}return i},is.getLabelJustification=function(e){var t=e.pstyle("text-justification").strValue,r=e.pstyle("text-halign").strValue;if("auto"!==t)return t;if(!e.isNode())return"center";switch(r){case"left":return"right";case"right":return"left";default:return"center"}},is.calculateLabelDimensions=function(e,t){var i=this.cy.window().document,s=e.pstyle("font-style").strValue,o=e.pstyle("font-size").pfValue,u=e.pstyle("font-family").strValue,h=e.pstyle("font-weight").strValue,f=this.labelCalcCanvas,p=this.labelCalcCanvasContext;if(!f){f=this.labelCalcCanvas=i.createElement("canvas"),p=this.labelCalcCanvasContext=f.getContext("2d");var x=f.style;x.position="absolute",x.left="-9999px",x.top="-9999px",x.zIndex="-1",x.visibility="hidden",x.pointerEvents="none"}p.font="".concat(s," ").concat(h," ").concat(o,"px ").concat(u);for(var k=0,_=0,U=t.split("\n"),O=0;O<U.length;O++){var Y=p.measureText(U[O]),j=Math.ceil(Y.width),yt=o;k=Math.max(j,k),_+=yt}return{width:k+=0,height:_+=0}},is.calculateLabelAngle=function(e,t){var a=e._private.rscratch,i=e.isEdge(),s=e.pstyle((t?t+"-":"")+"text-rotation"),o=s.strValue;return"none"===o?0:i&&"autorotate"===o?a.labelAutoAngle:"autorotate"===o?0:s.pfValue},is.calculateLabelAngles=function(e){var t=this,r=e.isEdge(),i=e._private.rscratch;i.labelAngle=t.calculateLabelAngle(e),r&&(i.sourceLabelAngle=t.calculateLabelAngle(e,"source"),i.targetLabelAngle=t.calculateLabelAngle(e,"target"))};var $d={},Hd=!1;$d.getNodeShape=function(e){var r=e.pstyle("shape").value;if("cutrectangle"===r&&(e.width()<28||e.height()<28))return Hd||(_a("The `cutrectangle` node shape can not be used at small sizes so `rectangle` is used instead"),Hd=!0),"rectangle";if(e.isParent())return"rectangle"===r||"roundrectangle"===r||"round-rectangle"===r||"cutrectangle"===r||"cut-rectangle"===r||"barrel"===r?r:"rectangle";if("polygon"===r){var a=e.pstyle("shape-polygon-points").value;return this.nodeShapes.makePolygon(a).name}return r};var ol={updateCachedGrabbedEles:function(){var e=this.cachedZSortedEles;if(e){e.drag=[],e.nondrag=[];for(var t=[],r=0;r<e.length;r++){var i=(a=e[r])._private.rscratch;a.grabbed()&&!a.isParent()?t.push(a):i.inDragLayer?e.drag.push(a):e.nondrag.push(a)}for(r=0;r<t.length;r++){var a;e.drag.push(a=t[r])}}},invalidateCachedZSortedEles:function(){this.cachedZSortedEles=null},getCachedZSortedEles:function(e){if(e||!this.cachedZSortedEles){var t=this.cy.mutableElements().toArray();t.sort(sd),t.interactive=t.filter(function(r){return r.interactive()}),this.cachedZSortedEles=t,this.updateCachedGrabbedEles()}else t=this.cachedZSortedEles;return t}},Gd={};[Ss,al,Mn,yo,$c,is,$d,{registerCalculationListeners:function(){var e=this.cy,t=e.collection(),r=this,a=function(s){var o=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(t.merge(s),o)for(var u=0;u<s.length;u++){var p=s[u]._private.rstyle;p.clean=!1,p.cleanConnected=!1}};r.binder(e).on("bounds.* dirty.*",function(s){a(s.target)}).on("style.* background.*",function(s){a(s.target,!1)});var i=function(s){if(s){var o=r.onUpdateEleCalcsFns;t.cleanStyle();for(var u=0;u<t.length;u++){var h=t[u],f=h._private.rstyle;h.isNode()&&!f.cleanConnected&&(a(h.connectedEdges()),f.cleanConnected=!0)}if(o)for(var p=0;p<o.length;p++)(0,o[p])(s,t);r.recalculateRenderedStyle(t),t=e.collection()}};r.flushRenderedStyleQueue=function(){i(!0)},r.beforeRender(i,r.beforeRenderPriorities.eleCalcs)},onUpdateEleCalcs:function(e){(this.onUpdateEleCalcsFns=this.onUpdateEleCalcsFns||[]).push(e)},recalculateRenderedStyle:function(e,t){var r=function(yt){return yt._private.rstyle.cleanConnected};if(0!==e.length){var a=[],i=[];if(!this.destroyed){void 0===t&&(t=!0);for(var n=0;n<e.length;n++){var s=e[n],o=s._private,u=o.rstyle;s.isEdge()&&(!r(s.source())||!r(s.target()))&&(u.clean=!1),s.isEdge()&&s.isBundledBezier()&&s.parallelEdges().some(function(j){return!j._private.rstyle.clean&&j.isBundledBezier()})&&(u.clean=!1),!(t&&u.clean||s.removed())&&"none"!==s.pstyle("display").value&&("nodes"===o.group?i.push(s):a.push(s),u.clean=!0)}for(var h=0;h<i.length;h++){var f=i[h],x=f._private.rstyle,k=f.position();this.recalculateNodeLabelProjection(f),x.nodeX=k.x,x.nodeY=k.y,x.nodeW=f.pstyle("width").pfValue,x.nodeH=f.pstyle("height").pfValue}this.recalculateEdgeProjections(a);for(var _=0;_<a.length;_++){var O=a[_]._private,K=O.rstyle,Y=O.rscratch;K.srcX=Y.arrowStartX,K.srcY=Y.arrowStartY,K.tgtX=Y.arrowEndX,K.tgtY=Y.arrowEndY,K.midX=Y.midX,K.midY=Y.midY,K.labelAngle=Y.labelAngle,K.sourceLabelAngle=Y.sourceLabelAngle,K.targetLabelAngle=Y.targetLabelAngle}}}}},ol].forEach(function(e){G(Gd,e)});var qd={getCachedImage:function(e,t,r){var i=this.imageCache=this.imageCache||{},n=i[e];if(n)return n.image.complete||n.image.addEventListener("load",r),n.image;var s=(n=i[e]=i[e]||{}).image=new Image;s.addEventListener("load",r),s.addEventListener("error",function(){s.error=!0});return"data:"===e.substring(0,5).toLowerCase()||(s.crossOrigin=t="null"===t?null:t),s.src=e,s}},js={registerBinding:function(e,t,r,a){var i=Array.prototype.slice.apply(arguments,[1]);if(Array.isArray(e)){for(var n=[],s=0;s<e.length;s++){var o=e[s];if(void 0!==o){var u=this.binder(o);n.push(u.on.apply(u,i))}}return n}return(u=this.binder(e)).on.apply(u,i)},binder:function(e){var t=this,r=t.cy.window(),a=e===r||e===r.document||e===r.document.body||function(t){return!(typeof HTMLElement>"u")&&t instanceof HTMLElement}(e);if(null==t.supportsPassiveEvents){var i=!1;try{var n=Object.defineProperty({},"passive",{get:function(){return i=!0,!0}});r.addEventListener("test",null,n)}catch{}t.supportsPassiveEvents=i}var s=function(u,h,f){var p=Array.prototype.slice.call(arguments);return a&&t.supportsPassiveEvents&&(p[2]={capture:f??!1,passive:!1,once:!1}),t.bindings.push({target:e,args:p}),(e.addEventListener||e.on).apply(e,p),this};return{on:s,addEventListener:s,addListener:s,bind:s}},nodeIsDraggable:function(e){return e&&e.isNode()&&!e.locked()&&e.grabbable()},nodeIsGrabbable:function(e){return this.nodeIsDraggable(e)&&e.interactive()}};js.load=function(){var e=this,t=e.cy.window(),r=function(ge){return ge.selected()},i=function(ge,Yr,na,ca){null==ge&&(ge=e.cy);for(var xa=0;xa<Yr.length;xa++)ge.emit({originalEvent:na,type:Yr[xa],position:ca})},n=function(ge){return ge.shiftKey||ge.metaKey||ge.ctrlKey},s=function(ge,Yr){var na=!0;if(e.cy.hasCompoundNodes()&&ge&&ge.pannable()){for(var ca=0;Yr&&ca<Yr.length;ca++)if((ge=Yr[ca]).isNode()&&ge.isParent()&&!ge.pannable()){na=!1;break}}else na=!0;return na},h=function(ge){ge[0]._private.rscratch.inDragLayer=!0},p=function(ge){ge[0]._private.rscratch.isGrabTarget=!0},k=function(ge,Yr){var na=Yr.addToList;!na.has(ge)&&ge.grabbable()&&!ge.locked()&&(na.merge(ge),function(ge){ge[0]._private.grabbed=!0}(ge))},U=function(ge,Yr){Yr=Yr||{};var na=ge.cy().hasCompoundNodes();Yr.inDragLayer&&(ge.forEach(h),ge.neighborhood().stdFilter(function(ca){return!na||ca.isEdge()}).forEach(h)),Yr.addToList&&ge.forEach(function(ca){k(ca,Yr)}),function(ge,Yr){if(ge.cy().hasCompoundNodes()&&(null!=Yr.inDragLayer||null!=Yr.addToList)){var na=ge.descendants();Yr.inDragLayer&&(na.forEach(h),na.connectedEdges().forEach(h)),Yr.addToList&&k(na,Yr)}}(ge,Yr),Y(ge,{inDragLayer:Yr.inDragLayer}),e.updateCachedGrabbedEles()},O=U,K=function(ge){ge&&(e.getCachedZSortedEles().forEach(function(Yr){(function(ge){ge[0]._private.grabbed=!1})(Yr),function(ge){ge[0]._private.rscratch.inDragLayer=!1}(Yr),function(ge){ge[0]._private.rscratch.isGrabTarget=!1}(Yr)}),e.updateCachedGrabbedEles())},Y=function(ge,Yr){if((null!=Yr.inDragLayer||null!=Yr.addToList)&&ge.cy().hasCompoundNodes()){var na=ge.ancestors().orphans();if(!na.same(ge)){var ca=na.descendants().spawnSelf().merge(na).unmerge(ge).unmerge(ge.descendants()),xa=ca.connectedEdges();Yr.inDragLayer&&(xa.forEach(h),ca.forEach(h)),Yr.addToList&&ca.forEach(function(ri){k(ri,Yr)})}}},j=function(){null!=document.activeElement&&null!=document.activeElement.blur&&document.activeElement.blur()},yt=typeof MutationObserver<"u",ie=typeof ResizeObserver<"u";yt?(e.removeObserver=new MutationObserver(function(va){for(var ge=0;ge<va.length;ge++){var na=va[ge].removedNodes;if(na)for(var ca=0;ca<na.length;ca++)if(na[ca]===e.container){e.destroy();break}}}),e.container.parentNode&&e.removeObserver.observe(e.container.parentNode,{childList:!0})):e.registerBinding(e.container,"DOMNodeRemoved",function(va){e.destroy()});var se=zr(function(){e.cy.resize()},100);yt&&(e.styleObserver=new MutationObserver(se),e.styleObserver.observe(e.container,{attributes:!0})),e.registerBinding(t,"resize",se),ie&&(e.resizeObserver=new ResizeObserver(se),e.resizeObserver.observe(e.container));var he=function(){e.invalidateContainerClientCoordsCache()};(function(ge,Yr){for(;null!=ge;)Yr(ge),ge=ge.parentNode})(e.container,function(va){e.registerBinding(va,"transitionend",he),e.registerBinding(va,"animationend",he),e.registerBinding(va,"scroll",he)}),e.registerBinding(e.container,"contextmenu",function(va){va.preventDefault()});var Te=function(ge){for(var Yr=e.findContainerClientCoords(),na=Yr[0],ca=Yr[1],xa=Yr[2],ri=Yr[3],Da=ge.touches?ge.touches:[ge],si=!1,ii=0;ii<Da.length;ii++){var pi=Da[ii];if(na<=pi.clientX&&pi.clientX<=na+xa&&ca<=pi.clientY&&pi.clientY<=ca+ri){si=!0;break}}if(!si)return!1;for(var Ai=e.container,oi=ge.target.parentNode,Li=!1;oi;){if(oi===Ai){Li=!0;break}oi=oi.parentNode}return!!Li};e.registerBinding(e.container,"mousedown",function(ge){if(Te(ge)&&(1!==e.hoverData.which||1===ge.which)){ge.preventDefault(),j(),e.hoverData.capture=!0,e.hoverData.which=ge.which;var Yr=e.cy,na=[ge.clientX,ge.clientY],ca=e.projectIntoViewport(na[0],na[1]),xa=e.selection,ri=e.findNearestElements(ca[0],ca[1],!0,!1),Da=ri[0],si=e.dragData.possibleDragElements;e.hoverData.mdownPos=ca,e.hoverData.mdownGPos=na;var ii=function(Di){return{originalEvent:ge,type:Di,position:{x:ca[0],y:ca[1]}}};if(3==ge.which){e.hoverData.cxtStarted=!0;var Ai={originalEvent:ge,type:"cxttapstart",position:{x:ca[0],y:ca[1]}};Da?(Da.activate(),Da.emit(Ai),e.hoverData.down=Da):Yr.emit(Ai),e.hoverData.downTime=(new Date).getTime(),e.hoverData.cxtDragged=!1}else if(1==ge.which){if(Da&&Da.activate(),null!=Da&&e.nodeIsGrabbable(Da)){if(p(Da),Da.selected()){si=e.dragData.possibleDragElements=Yr.collection();var oi=Yr.$(function(Li){return Li.isNode()&&Li.selected()&&e.nodeIsGrabbable(Li)});U(oi,{addToList:si}),Da.emit(ii("grabon")),oi.forEach(function(Di){Di.emit(ii("grab"))})}else si=e.dragData.possibleDragElements=Yr.collection(),O(Da,{addToList:si}),Da.emit(ii("grabon")).emit(ii("grab"));e.redrawHint("eles",!0),e.redrawHint("drag",!0)}e.hoverData.down=Da,e.hoverData.downs=ri,e.hoverData.downTime=(new Date).getTime(),i(Da,["mousedown","tapstart","vmousedown"],ge,{x:ca[0],y:ca[1]}),null==Da?(xa[4]=1,e.data.bgActivePosistion={x:ca[0],y:ca[1]},e.redrawHint("select",!0),e.redraw()):Da.pannable()&&(xa[4]=1),e.hoverData.tapholdCancelled=!1,clearTimeout(e.hoverData.tapholdTimeout),e.hoverData.tapholdTimeout=setTimeout(function(){if(!e.hoverData.tapholdCancelled){var Di=e.hoverData.down;Di?Di.emit(ii("taphold")):Yr.emit(ii("taphold"))}},e.tapholdDuration)}xa[0]=xa[2]=ca[0],xa[1]=xa[3]=ca[1]}},!1);var Me,Oe,tr,Be=function(ge){var Yr=ge.getRootNode();if(Yr&&11===Yr.nodeType&&void 0!==Yr.host)return Yr}(e.container);e.registerBinding([t,Be],"mousemove",function(ge){var jn;if(e.hoverData.capture||Te(ge)){var na=!1,ca=e.cy,xa=ca.zoom(),ri=[ge.clientX,ge.clientY],Da=e.projectIntoViewport(ri[0],ri[1]),si=e.hoverData.mdownPos,ii=e.hoverData.mdownGPos,pi=e.selection,Ai=null;!e.hoverData.draggingEles&&!e.hoverData.dragging&&!e.hoverData.selecting&&(Ai=e.findNearestElement(Da[0],Da[1],!0,!1));var yn,Ti=e.hoverData.last,oi=e.hoverData.down,Li=[Da[0]-pi[2],Da[1]-pi[3]],Di=e.dragData.possibleDragElements;if(ii){var on=ri[0]-ii[0],fn=ri[1]-ii[1];e.hoverData.isOverThresholdDrag=yn=on*on+fn*fn>=e.desktopTapThreshold2}var Dn=n(ge);yn&&(e.hoverData.tapholdCancelled=!0),na=!0,i(Ai,["mousemove","vmousemove","tapdrag"],ge,{x:Da[0],y:Da[1]});var gn=function(jn){return{originalEvent:ge,type:jn,position:{x:Da[0],y:Da[1]}}},us=function(){e.data.bgActivePosistion=void 0,e.hoverData.selecting||ca.emit(gn("boxstart")),pi[4]=1,e.hoverData.selecting=!0,e.redrawHint("select",!0),e.redraw()};if(3===e.hoverData.which){if(yn){var ds=gn("cxtdrag");oi?oi.emit(ds):ca.emit(ds),e.hoverData.cxtDragged=!0,(!e.hoverData.cxtOver||Ai!==e.hoverData.cxtOver)&&(e.hoverData.cxtOver&&e.hoverData.cxtOver.emit(gn("cxtdragout")),e.hoverData.cxtOver=Ai,Ai&&Ai.emit(gn("cxtdragover")))}}else if(e.hoverData.dragging){if(na=!0,ca.panningEnabled()&&ca.userPanningEnabled()){var eo;if(e.hoverData.justStartedPan){var pl=e.hoverData.mdownPos;eo={x:(Da[0]-pl[0])*xa,y:(Da[1]-pl[1])*xa},e.hoverData.justStartedPan=!1}else eo={x:Li[0]*xa,y:Li[1]*xa};ca.panBy(eo),ca.emit(gn("dragpan")),e.hoverData.dragged=!0}Da=e.projectIntoViewport(ge.clientX,ge.clientY)}else if(1!=pi[4]||null!=oi&&!oi.pannable()){if(oi&&oi.pannable()&&oi.active()&&oi.unactivate(),(!oi||!oi.grabbed())&&Ai!=Ti&&(Ti&&i(Ti,["mouseout","tapdragout"],ge,{x:Da[0],y:Da[1]}),Ai&&i(Ai,["mouseover","tapdragover"],ge,{x:Da[0],y:Da[1]}),e.hoverData.last=Ai),oi)if(yn){if(ca.boxSelectionEnabled()&&Dn)oi&&oi.grabbed()&&(K(Di),oi.emit(gn("freeon")),Di.emit(gn("free")),e.dragData.didDrag&&(oi.emit(gn("dragfreeon")),Di.emit(gn("dragfree")))),us();else if(oi&&oi.grabbed()&&e.nodeIsDraggable(oi)){var Wn=!e.dragData.didDrag;Wn&&e.redrawHint("eles",!0),e.dragData.didDrag=!0,e.hoverData.draggingEles||U(Di,{inDragLayer:!0});var On={x:0,y:0};if(X(Li[0])&&X(Li[1])&&(On.x+=Li[0],On.y+=Li[1],Wn)){var zn=e.hoverData.dragDelta;zn&&X(zn[0])&&X(zn[1])&&(On.x+=zn[0],On.y+=zn[1])}e.hoverData.draggingEles=!0,Di.silentShift(On).emit(gn("position")).emit(gn("drag")),e.redrawHint("drag",!0),e.redraw()}}else 0===(jn=e.hoverData.dragDelta=e.hoverData.dragDelta||[]).length?(jn.push(Li[0]),jn.push(Li[1])):(jn[0]+=Li[0],jn[1]+=Li[1]);na=!0}else yn&&(e.hoverData.dragging||!ca.boxSelectionEnabled()||!Dn&&ca.panningEnabled()&&ca.userPanningEnabled()?!e.hoverData.selecting&&ca.panningEnabled()&&ca.userPanningEnabled()&&s(oi,e.hoverData.downs)&&(e.hoverData.dragging=!0,e.hoverData.justStartedPan=!0,pi[4]=0,e.data.bgActivePosistion=hn(si),e.redrawHint("select",!0),e.redraw()):us(),oi&&oi.pannable()&&oi.active()&&oi.unactivate());if(pi[2]=Da[0],pi[3]=Da[1],na)return ge.stopPropagation&&ge.stopPropagation(),ge.preventDefault&&ge.preventDefault(),!1}},!1),e.registerBinding(t,"mouseup",function(ge){if((1!==e.hoverData.which||1===ge.which||!e.hoverData.capture)&&e.hoverData.capture){e.hoverData.capture=!1;var na=e.cy,ca=e.projectIntoViewport(ge.clientX,ge.clientY),xa=e.selection,ri=e.findNearestElement(ca[0],ca[1],!0,!1),Da=e.dragData.possibleDragElements,si=e.hoverData.down,ii=n(ge);e.data.bgActivePosistion&&(e.redrawHint("select",!0),e.redraw()),e.hoverData.tapholdCancelled=!0,e.data.bgActivePosistion=void 0,si&&si.unactivate();var pi=function(on){return{originalEvent:ge,type:on,position:{x:ca[0],y:ca[1]}}};if(3===e.hoverData.which){var Ai=pi("cxttapend");if(si?si.emit(Ai):na.emit(Ai),!e.hoverData.cxtDragged){var Ti=pi("cxttap");si?si.emit(Ti):na.emit(Ti)}e.hoverData.cxtDragged=!1,e.hoverData.which=null}else if(1===e.hoverData.which){if(i(ri,["mouseup","tapend","vmouseup"],ge,{x:ca[0],y:ca[1]}),!e.dragData.didDrag&&!e.hoverData.dragged&&!e.hoverData.selecting&&!e.hoverData.isOverThresholdDrag&&(i(si,["click","tap","vclick"],ge,{x:ca[0],y:ca[1]}),Oe=!1,ge.timeStamp-tr<=na.multiClickDebounceTime()?(Me&&clearTimeout(Me),Oe=!0,tr=null,i(si,["dblclick","dbltap","vdblclick"],ge,{x:ca[0],y:ca[1]})):(Me=setTimeout(function(){Oe||i(si,["oneclick","onetap","voneclick"],ge,{x:ca[0],y:ca[1]})},na.multiClickDebounceTime()),tr=ge.timeStamp)),null==si&&!e.dragData.didDrag&&!e.hoverData.selecting&&!e.hoverData.dragged&&!n(ge)&&(na.$(r).unselect(["tapunselect"]),Da.length>0&&e.redrawHint("eles",!0),e.dragData.possibleDragElements=Da=na.collection()),ri==si&&!e.dragData.didDrag&&!e.hoverData.selecting&&null!=ri&&ri._private.selectable&&(e.hoverData.dragging||("additive"===na.selectionType()||ii?ri.selected()?ri.unselect(["tapunselect"]):ri.select(["tapselect"]):ii||(na.$(r).unmerge(ri).unselect(["tapunselect"]),ri.select(["tapselect"]))),e.redrawHint("eles",!0)),e.hoverData.selecting){var oi=na.collection(e.getAllInBox(xa[0],xa[1],xa[2],xa[3]));e.redrawHint("select",!0),oi.length>0&&e.redrawHint("eles",!0),na.emit(pi("boxend")),"additive"===na.selectionType()||ii||na.$(r).unmerge(oi).unselect(),oi.emit(pi("box")).stdFilter(function(on){return on.selectable()&&!on.selected()}).select().emit(pi("boxselect")),e.redraw()}if(e.hoverData.dragging&&(e.hoverData.dragging=!1,e.redrawHint("select",!0),e.redrawHint("eles",!0),e.redraw()),!xa[4]){e.redrawHint("drag",!0),e.redrawHint("eles",!0);var Di=si&&si.grabbed();K(Da),Di&&(si.emit(pi("freeon")),Da.emit(pi("free")),e.dragData.didDrag&&(si.emit(pi("dragfreeon")),Da.emit(pi("dragfree"))))}}xa[4]=0,e.hoverData.down=null,e.hoverData.cxtStarted=!1,e.hoverData.draggingEles=!1,e.hoverData.selecting=!1,e.hoverData.isOverThresholdDrag=!1,e.dragData.didDrag=!1,e.hoverData.dragged=!1,e.hoverData.dragDelta=[],e.hoverData.mdownPos=null,e.hoverData.mdownGPos=null,e.hoverData.which=null}},!1);var rr,ur=[],Cr=1e5,Dr=function(ge){var Yr=!1,na=ge.deltaY;if(null==na&&(null!=ge.wheelDeltaY?na=ge.wheelDeltaY/4:null!=ge.wheelDelta&&(na=ge.wheelDelta/4)),0!==na){if(null==rr)if(ur.length>=4){var ca=ur;if(rr=function(ge){for(var na=0;na<ge.length;na++)if(ge[na]%5!=0)return!1;return!0}(ca),!rr){var xa=Math.abs(ca[0]);rr=function(ge){for(var Yr=Math.abs(ge[0]),na=1;na<ge.length;na++)if(Math.abs(ge[na])!==Yr)return!1;return!0}(ca)&&xa>5}if(rr)for(var ri=0;ri<ca.length;ri++)Cr=Math.min(Math.abs(ca[ri]),Cr)}else ur.push(na),Yr=!0;else rr&&(Cr=Math.min(Math.abs(na),Cr));if(!e.scrollingPage){var Da=e.cy,si=Da.zoom(),ii=Da.pan(),pi=e.projectIntoViewport(ge.clientX,ge.clientY),Ai=[pi[0]*si+ii.x,pi[1]*si+ii.y];if(e.hoverData.draggingEles||e.hoverData.dragging||e.hoverData.cxtStarted||0!==e.selection[4])return void ge.preventDefault();if(Da.panningEnabled()&&Da.userPanningEnabled()&&Da.zoomingEnabled()&&Da.userZoomingEnabled()){var Ti;ge.preventDefault(),e.data.wheelZooming=!0,clearTimeout(e.data.wheelTimeout),e.data.wheelTimeout=setTimeout(function(){e.data.wheelZooming=!1,e.redrawHint("eles",!0),e.redraw()},150),Yr&&Math.abs(na)>5&&(na=5*un(na)),Ti=na/-250,rr&&(Ti/=Cr,Ti*=3),Ti*=e.wheelSensitivity,1===ge.deltaMode&&(Ti*=33);var Li=Da.zoom()*Math.pow(10,Ti);"gesturechange"===ge.type&&(Li=e.gestureStartZoom*ge.scale),Da.zoom({level:Li,renderedPosition:{x:Ai[0],y:Ai[1]}}),Da.emit({type:"gesturechange"===ge.type?"pinchzoom":"scrollzoom",originalEvent:ge,position:{x:pi[0],y:pi[1]}})}}}};e.registerBinding(e.container,"wheel",Dr,!0),e.registerBinding(t,"scroll",function(ge){e.scrollingPage=!0,clearTimeout(e.scrollingPageTimeout),e.scrollingPageTimeout=setTimeout(function(){e.scrollingPage=!1},250)},!0),e.registerBinding(e.container,"gesturestart",function(ge){e.gestureStartZoom=e.cy.zoom(),e.hasTouchStarted||ge.preventDefault()},!0),e.registerBinding(e.container,"gesturechange",function(va){e.hasTouchStarted||Dr(va)},!0),e.registerBinding(e.container,"mouseout",function(ge){var Yr=e.projectIntoViewport(ge.clientX,ge.clientY);e.cy.emit({originalEvent:ge,type:"mouseout",position:{x:Yr[0],y:Yr[1]}})},!1),e.registerBinding(e.container,"mouseover",function(ge){var Yr=e.projectIntoViewport(ge.clientX,ge.clientY);e.cy.emit({originalEvent:ge,type:"mouseover",position:{x:Yr[0],y:Yr[1]}})},!1);var Wr,ga,Ea,pa,Aa,Ra,Za,Ta,Kr,$r,Zr,ma,Ga,Ci,xi,gi,Qa,ci,di,_i,li=function(ge,Yr,na,ca){return Math.sqrt((na-ge)*(na-ge)+(ca-Yr)*(ca-Yr))},Ii=function(ge,Yr,na,ca){return(na-ge)*(na-ge)+(ca-Yr)*(ca-Yr)};if(e.registerBinding(e.container,"touchstart",Ci=function(ge){if(e.hasTouchStarted=!0,Te(ge)){j(),e.touchData.capture=!0,e.data.bgActivePosistion=void 0;var Yr=e.cy,na=e.touchData.now,ca=e.touchData.earlier;if(ge.touches[0]){var xa=e.projectIntoViewport(ge.touches[0].clientX,ge.touches[0].clientY);na[0]=xa[0],na[1]=xa[1]}ge.touches[1]&&(xa=e.projectIntoViewport(ge.touches[1].clientX,ge.touches[1].clientY),na[2]=xa[0],na[3]=xa[1]),ge.touches[2]&&(xa=e.projectIntoViewport(ge.touches[2].clientX,ge.touches[2].clientY),na[4]=xa[0],na[5]=xa[1]);var ri=function(Dn){return{originalEvent:ge,type:Dn,position:{x:na[0],y:na[1]}}};if(ge.touches[1]){e.touchData.singleTouchMoved=!0,K(e.dragData.touchDragEles);var Da=e.findContainerClientCoords();Zr=Da[2],ma=Da[3],ga=ge.touches[0].clientY-($r=Da[1]),Ea=ge.touches[1].clientX-(Kr=Da[0]),pa=ge.touches[1].clientY-$r,Ga=0<=(Wr=ge.touches[0].clientX-Kr)&&Wr<=Zr&&0<=Ea&&Ea<=Zr&&0<=ga&&ga<=ma&&0<=pa&&pa<=ma;var si=Yr.pan(),ii=Yr.zoom();if(Aa=li(Wr,ga,Ea,pa),Ra=Ii(Wr,ga,Ea,pa),Ta=[((Za=[(Wr+Ea)/2,(ga+pa)/2])[0]-si.x)/ii,(Za[1]-si.y)/ii],Ra<4e4&&!ge.touches[2]){var Ti=e.findNearestElement(na[0],na[1],!0,!0),oi=e.findNearestElement(na[2],na[3],!0,!0);return Ti&&Ti.isNode()?(Ti.activate().emit(ri("cxttapstart")),e.touchData.start=Ti):oi&&oi.isNode()?(oi.activate().emit(ri("cxttapstart")),e.touchData.start=oi):Yr.emit(ri("cxttapstart")),e.touchData.start&&(e.touchData.start._private.grabbed=!1),e.touchData.cxt=!0,e.touchData.cxtDragged=!1,e.data.bgActivePosistion=void 0,void e.redraw()}}if(ge.touches[2])Yr.boxSelectionEnabled()&&ge.preventDefault();else if(!ge.touches[1]&&ge.touches[0]){var Li=e.findNearestElements(na[0],na[1],!0,!0),Di=Li[0];if(null!=Di&&(Di.activate(),e.touchData.start=Di,e.touchData.starts=Li,e.nodeIsGrabbable(Di))){var yn=e.dragData.touchDragEles=Yr.collection(),on=null;e.redrawHint("eles",!0),e.redrawHint("drag",!0),Di.selected()?(on=Yr.$(function(mn){return mn.selected()&&e.nodeIsGrabbable(mn)}),U(on,{addToList:yn})):O(Di,{addToList:yn}),p(Di),Di.emit(ri("grabon")),on?on.forEach(function(mn){mn.emit(ri("grab"))}):Di.emit(ri("grab"))}i(Di,["touchstart","tapstart","vmousedown"],ge,{x:na[0],y:na[1]}),null==Di&&(e.data.bgActivePosistion={x:xa[0],y:xa[1]},e.redrawHint("select",!0),e.redraw()),e.touchData.singleTouchMoved=!1,e.touchData.singleTouchStartTime=+new Date,clearTimeout(e.touchData.tapholdTimeout),e.touchData.tapholdTimeout=setTimeout(function(){!1===e.touchData.singleTouchMoved&&!e.pinching&&!e.touchData.selecting&&i(e.touchData.start,["taphold"],ge,{x:na[0],y:na[1]})},e.tapholdDuration)}if(ge.touches.length>=1){for(var Kn=e.touchData.startPosition=[null,null,null,null,null,null],fn=0;fn<na.length;fn++)Kn[fn]=ca[fn]=na[fn];var Cn=ge.touches[0];e.touchData.startGPosition=[Cn.clientX,Cn.clientY]}}},!1),e.registerBinding(t,"touchmove",xi=function(ge){var Yr=e.touchData.capture;if(Yr||Te(ge)){var na=e.selection,ca=e.cy,xa=e.touchData.now,ri=e.touchData.earlier,Da=ca.zoom();if(ge.touches[0]){var si=e.projectIntoViewport(ge.touches[0].clientX,ge.touches[0].clientY);xa[0]=si[0],xa[1]=si[1]}ge.touches[1]&&(si=e.projectIntoViewport(ge.touches[1].clientX,ge.touches[1].clientY),xa[2]=si[0],xa[3]=si[1]),ge.touches[2]&&(si=e.projectIntoViewport(ge.touches[2].clientX,ge.touches[2].clientY),xa[4]=si[0],xa[5]=si[1]);var Ai,ii=function(F2){return{originalEvent:ge,type:F2,position:{x:xa[0],y:xa[1]}}},pi=e.touchData.startGPosition;if(Yr&&ge.touches[0]&&pi){for(var Ti=[],oi=0;oi<xa.length;oi++)Ti[oi]=xa[oi]-ri[oi];var Li=ge.touches[0].clientX-pi[0],yn=ge.touches[0].clientY-pi[1];Ai=Li*Li+yn*yn>=e.touchTapThreshold2}if(Yr&&e.touchData.cxt){ge.preventDefault();var Cs=Ii(fn=ge.touches[0].clientX-Kr,Cn=ge.touches[0].clientY-$r,mn=ge.touches[1].clientX-Kr,Dn=ge.touches[1].clientY-$r);if(Cs/Ra>=2.25||Cs>=22500){e.touchData.cxt=!1,e.data.bgActivePosistion=void 0,e.redrawHint("select",!0);var Is=ii("cxttapend");e.touchData.start?(e.touchData.start.unactivate().emit(Is),e.touchData.start=null):ca.emit(Is)}}if(Yr&&e.touchData.cxt){Is=ii("cxtdrag"),e.data.bgActivePosistion=void 0,e.redrawHint("select",!0),e.touchData.start?e.touchData.start.emit(Is):ca.emit(Is),e.touchData.start&&(e.touchData.start._private.grabbed=!1),e.touchData.cxtDragged=!0;var Wn=e.findNearestElement(xa[0],xa[1],!0,!0);(!e.touchData.cxtOver||Wn!==e.touchData.cxtOver)&&(e.touchData.cxtOver&&e.touchData.cxtOver.emit(ii("cxtdragout")),e.touchData.cxtOver=Wn,Wn&&Wn.emit(ii("cxtdragover")))}else if(Yr&&ge.touches[2]&&ca.boxSelectionEnabled())ge.preventDefault(),e.data.bgActivePosistion=void 0,this.lastThreeTouch=+new Date,e.touchData.selecting||ca.emit(ii("boxstart")),e.touchData.selecting=!0,e.touchData.didSelect=!0,na[4]=1,na&&0!==na.length&&void 0!==na[0]?(na[2]=(xa[0]+xa[2]+xa[4])/3,na[3]=(xa[1]+xa[3]+xa[5])/3):(na[0]=(xa[0]+xa[2]+xa[4])/3,na[1]=(xa[1]+xa[3]+xa[5])/3,na[2]=(xa[0]+xa[2]+xa[4])/3+1,na[3]=(xa[1]+xa[3]+xa[5])/3+1),e.redrawHint("select",!0),e.redraw();else if(Yr&&ge.touches[1]&&!e.touchData.didSelect&&ca.zoomingEnabled()&&ca.panningEnabled()&&ca.userZoomingEnabled()&&ca.userPanningEnabled()){if(ge.preventDefault(),e.data.bgActivePosistion=void 0,e.redrawHint("select",!0),On=e.dragData.touchDragEles){e.redrawHint("drag",!0);for(var zn=0;zn<On.length;zn++){var So=On[zn]._private;So.grabbed=!1,So.rscratch.inDragLayer=!1}}var fn,Cn,mn,Dn,jn=e.touchData.start,P0=li(fn=ge.touches[0].clientX-Kr,Cn=ge.touches[0].clientY-$r,mn=ge.touches[1].clientX-Kr,Dn=ge.touches[1].clientY-$r),A2=P0/Aa;if(Ga){var P2=(fn-Wr+(mn-Ea))/2,I2=(Cn-ga+(Dn-pa))/2,wo=ca.zoom(),sh=wo*A2,vl=ca.pan(),I0=Ta[0]*wo+vl.x,M0=Ta[1]*wo+vl.y,M2={x:-sh/wo*(I0-vl.x-P2)+I0,y:-sh/wo*(M0-vl.y-I2)+M0};jn&&jn.active()&&(K(On=e.dragData.touchDragEles),e.redrawHint("drag",!0),e.redrawHint("eles",!0),jn.unactivate().emit(ii("freeon")),On.emit(ii("free")),e.dragData.didDrag&&(jn.emit(ii("dragfreeon")),On.emit(ii("dragfree")))),ca.viewport({zoom:sh,pan:M2,cancelOnFailedZoom:!0}),ca.emit(ii("pinchzoom")),Aa=P0,Wr=fn,ga=Cn,Ea=mn,pa=Dn,e.pinching=!0}ge.touches[0]&&(si=e.projectIntoViewport(ge.touches[0].clientX,ge.touches[0].clientY),xa[0]=si[0],xa[1]=si[1]),ge.touches[1]&&(si=e.projectIntoViewport(ge.touches[1].clientX,ge.touches[1].clientY),xa[2]=si[0],xa[3]=si[1]),ge.touches[2]&&(si=e.projectIntoViewport(ge.touches[2].clientX,ge.touches[2].clientY),xa[4]=si[0],xa[5]=si[1])}else if(ge.touches[0]&&!e.touchData.didSelect){var Jn=e.touchData.start,oh=e.touchData.last;if(!e.hoverData.draggingEles&&!e.swipePanning&&(Wn=e.findNearestElement(xa[0],xa[1],!0,!0)),Yr&&null!=Jn&&ge.preventDefault(),Yr&&null!=Jn&&e.nodeIsDraggable(Jn))if(Ai){var On=e.dragData.touchDragEles,O0=!e.dragData.didDrag;O0&&U(On,{inDragLayer:!0}),e.dragData.didDrag=!0;var Ao={x:0,y:0};X(Ti[0])&&X(Ti[1])&&(Ao.x+=Ti[0],Ao.y+=Ti[1],O0)&&(e.redrawHint("eles",!0),(ts=e.touchData.dragDelta)&&X(ts[0])&&X(ts[1])&&(Ao.x+=ts[0],Ao.y+=ts[1])),e.hoverData.draggingEles=!0,On.silentShift(Ao).emit(ii("position")).emit(ii("drag")),e.redrawHint("drag",!0),e.touchData.startPosition[0]==ri[0]&&e.touchData.startPosition[1]==ri[1]&&e.redrawHint("eles",!0),e.redraw()}else{var ts;0===(ts=e.touchData.dragDelta=e.touchData.dragDelta||[]).length?(ts.push(Ti[0]),ts.push(Ti[1])):(ts[0]+=Ti[0],ts[1]+=Ti[1])}if(i(Jn||Wn,["touchmove","tapdrag","vmousemove"],ge,{x:xa[0],y:xa[1]}),(!Jn||!Jn.grabbed())&&Wn!=oh&&(oh&&oh.emit(ii("tapdragout")),Wn&&Wn.emit(ii("tapdragover"))),e.touchData.last=Wn,Yr)for(zn=0;zn<xa.length;zn++)xa[zn]&&e.touchData.startPosition[zn]&&Ai&&(e.touchData.singleTouchMoved=!0);Yr&&(null==Jn||Jn.pannable())&&ca.panningEnabled()&&ca.userPanningEnabled()&&(s(Jn,e.touchData.starts)&&(ge.preventDefault(),e.data.bgActivePosistion||(e.data.bgActivePosistion=hn(e.touchData.startPosition)),e.swipePanning?(ca.panBy({x:Ti[0]*Da,y:Ti[1]*Da}),ca.emit(ii("dragpan"))):Ai&&(e.swipePanning=!0,ca.panBy({x:Li*Da,y:yn*Da}),ca.emit(ii("dragpan")),Jn&&(Jn.unactivate(),e.redrawHint("select",!0),e.touchData.start=null))),si=e.projectIntoViewport(ge.touches[0].clientX,ge.touches[0].clientY),xa[0]=si[0],xa[1]=si[1])}for(oi=0;oi<xa.length;oi++)ri[oi]=xa[oi];Yr&&ge.touches.length>0&&!e.hoverData.draggingEles&&!e.swipePanning&&null!=e.data.bgActivePosistion&&(e.data.bgActivePosistion=void 0,e.redrawHint("select",!0),e.redraw())}},!1),e.registerBinding(t,"touchcancel",gi=function(ge){var Yr=e.touchData.start;e.touchData.capture=!1,Yr&&Yr.unactivate()}),e.registerBinding(t,"touchend",Qa=function(ge){var Yr=e.touchData.start;if(e.touchData.capture){0===ge.touches.length&&(e.touchData.capture=!1),ge.preventDefault();var ca=e.selection;e.swipePanning=!1,e.hoverData.draggingEles=!1;var xa=e.cy,ri=xa.zoom(),Da=e.touchData.now,si=e.touchData.earlier;if(ge.touches[0]){var ii=e.projectIntoViewport(ge.touches[0].clientX,ge.touches[0].clientY);Da[0]=ii[0],Da[1]=ii[1]}ge.touches[1]&&(ii=e.projectIntoViewport(ge.touches[1].clientX,ge.touches[1].clientY),Da[2]=ii[0],Da[3]=ii[1]),ge.touches[2]&&(ii=e.projectIntoViewport(ge.touches[2].clientX,ge.touches[2].clientY),Da[4]=ii[0],Da[5]=ii[1]);var Ai,pi=function(ds){return{originalEvent:ge,type:ds,position:{x:Da[0],y:Da[1]}}};if(Yr&&Yr.unactivate(),e.touchData.cxt){if(Ai=pi("cxttapend"),Yr?Yr.emit(Ai):xa.emit(Ai),!e.touchData.cxtDragged){var Ti=pi("cxttap");Yr?Yr.emit(Ti):xa.emit(Ti)}return e.touchData.start&&(e.touchData.start._private.grabbed=!1),e.touchData.cxt=!1,e.touchData.start=null,void e.redraw()}if(!ge.touches[2]&&xa.boxSelectionEnabled()&&e.touchData.selecting){e.touchData.selecting=!1;var oi=xa.collection(e.getAllInBox(ca[0],ca[1],ca[2],ca[3]));ca[0]=void 0,ca[1]=void 0,ca[2]=void 0,ca[3]=void 0,ca[4]=0,e.redrawHint("select",!0),xa.emit(pi("boxend")),oi.emit(pi("box")).stdFilter(function(ds){return ds.selectable()&&!ds.selected()}).select().emit(pi("boxselect")),oi.nonempty()&&e.redrawHint("eles",!0),e.redraw()}if(Yr?.unactivate(),ge.touches[2])e.data.bgActivePosistion=void 0,e.redrawHint("select",!0);else if(!ge.touches[1]&&!ge.touches[0]&&!ge.touches[0]){e.data.bgActivePosistion=void 0,e.redrawHint("select",!0);var Di=e.dragData.touchDragEles;if(null!=Yr){var yn=Yr._private.grabbed;K(Di),e.redrawHint("drag",!0),e.redrawHint("eles",!0),yn&&(Yr.emit(pi("freeon")),Di.emit(pi("free")),e.dragData.didDrag&&(Yr.emit(pi("dragfreeon")),Di.emit(pi("dragfree")))),i(Yr,["touchend","tapend","vmouseup","tapdragout"],ge,{x:Da[0],y:Da[1]}),Yr.unactivate(),e.touchData.start=null}else{var on=e.findNearestElement(Da[0],Da[1],!0,!0);i(on,["touchend","tapend","vmouseup","tapdragout"],ge,{x:Da[0],y:Da[1]})}var Kn=e.touchData.startPosition[0]-Da[0],Cn=e.touchData.startPosition[1]-Da[1],Cs=(Kn*Kn+Cn*Cn)*ri*ri;e.touchData.singleTouchMoved||(Yr||xa.$(":selected").unselect(["tapunselect"]),i(Yr,["tap","vclick"],ge,{x:Da[0],y:Da[1]}),ci=!1,ge.timeStamp-_i<=xa.multiClickDebounceTime()?(di&&clearTimeout(di),ci=!0,_i=null,i(Yr,["dbltap","vdblclick"],ge,{x:Da[0],y:Da[1]})):(di=setTimeout(function(){ci||i(Yr,["onetap","voneclick"],ge,{x:Da[0],y:Da[1]})},xa.multiClickDebounceTime()),_i=ge.timeStamp)),null!=Yr&&!e.dragData.didDrag&&Yr._private.selectable&&Cs<e.touchTapThreshold2&&!e.pinching&&("single"===xa.selectionType()?(xa.$(r).unmerge(Yr).unselect(["tapunselect"]),Yr.select(["tapselect"])):Yr.selected()?Yr.unselect(["tapunselect"]):Yr.select(["tapselect"]),e.redrawHint("eles",!0)),e.touchData.singleTouchMoved=!0}for(var gn=0;gn<Da.length;gn++)si[gn]=Da[gn];e.dragData.didDrag=!1,0===ge.touches.length&&(e.touchData.dragDelta=[],e.touchData.startPosition=[null,null,null,null,null,null],e.touchData.startGPosition=null,e.touchData.didSelect=!1),ge.touches.length<2&&(1===ge.touches.length&&(e.touchData.startGPosition=[ge.touches[0].clientX,ge.touches[0].clientY]),e.pinching=!1,e.redrawHint("eles",!0),e.redraw())}},!1),typeof TouchEvent>"u"){var fi=[],wi=function(ge){return{clientX:ge.clientX,clientY:ge.clientY,force:1,identifier:ge.pointerId,pageX:ge.pageX,pageY:ge.pageY,radiusX:ge.width/2,radiusY:ge.height/2,screenX:ge.screenX,screenY:ge.screenY,target:ge.target}},Hi=function(ge){for(var Yr=0;Yr<fi.length;Yr++)if(fi[Yr].event.pointerId===ge.pointerId)return void fi.splice(Yr,1)},bi=function(ge){ge.touches=fi.map(function(Yr){return Yr.touch})},ai=function(ge){return"mouse"===ge.pointerType||4===ge.pointerType};e.registerBinding(e.container,"pointerdown",function(va){ai(va)||(va.preventDefault(),fi.push(function(ge){return{event:ge,touch:wi(ge)}}(va)),bi(va),Ci(va))}),e.registerBinding(e.container,"pointerup",function(va){ai(va)||(Hi(va),bi(va),Qa(va))}),e.registerBinding(e.container,"pointercancel",function(va){ai(va)||(Hi(va),bi(va),gi())}),e.registerBinding(e.container,"pointermove",function(va){var ge,Yr;ai(va)||(va.preventDefault(),ge=va,(Yr=fi.filter(function(na){return na.event.pointerId===ge.pointerId})[0]).event=ge,Yr.touch=wi(ge),bi(va),xi(va))})}};var cs={generatePolygon:function(e,t){return this.nodeShapes[e]={renderer:this,name:e,points:t,draw:function(a,i,n,s,o,u){this.renderer.nodeShapeImpl("polygon",a,i,n,s,o,this.points)},intersectLine:function(a,i,n,s,o,u,h,f){return Tn(o,u,this.points,a,i,n/2,s/2,h)},checkPoint:function(a,i,n,s,o,u,h,f){return la(a,i,this.points,u,h,s,o,[0,-1],n)},hasMiterBounds:"rectangle"!==e,miterBounds:function(a,i,n,s,o,u){return function st(e,t,r,a,i,n){var o=function N(e,t){if(e.length<3)throw new Error("Need at least 3 vertices");var r=function(he,me){return{x:he.x+me.x,y:he.y+me.y}},a=function(he,me){return{x:he.x-me.x,y:he.y-me.y}},i=function(he,me){return{x:he.x*me,y:he.y*me}},n=function(he,me){return he.x*me.y-he.y*me.x},s=function(he){var me=T(he.x,he.y);return 0===me?{x:0,y:0}:{x:he.x/me,y:he.y/me}},u=function(he,me,Te,Be){var Me=a(me,he),Oe=a(Be,Te),tr=n(Me,Oe);if(Math.abs(tr)<1e-9)return r(he,i(Me,.5));var ur=n(a(Te,he),Oe)/tr;return r(he,i(Me,ur))},h=e.map(function(Ht){return{x:Ht.x,y:Ht.y}});(function(he){for(var me=0,Te=0;Te<he.length;Te++){var Be=he[Te],Me=he[(Te+1)%he.length];me+=Be.x*Me.y-Me.x*Be.y}return me/2})(h)<0&&h.reverse();for(var f=h.length,p=[],x=0;x<f;x++){var U=a(h[(x+1)%f],h[x]),O=s({x:U.y,y:-U.x});p.push(O)}for(var K=p.map(function(Ht,he){return{p1:r(h[he],i(Ht,t)),p2:r(h[(he+1)%f],i(Ht,t))}}),Y=[],j=0;j<f;j++){var yt=K[(j-1+f)%f],ie=K[j],se=u(yt.p1,yt.p2,ie.p1,ie.p2);Y.push(se)}return Y}($n(e,t,r,a,i),n),u=kt();return o.forEach(function(h){return Dt(u,h.x,h.y)}),u}(this.points,a,i,n,s,o)}}},generateEllipse:function(){return this.nodeShapes.ellipse={renderer:this,name:"ellipse",draw:function(t,r,a,i,n,s){this.renderer.nodeShapeImpl(this.name,t,r,a,i,n)},intersectLine:function(t,r,a,i,n,s,o,u){return function(t,r,a,i,n,s){var o=a-t,u=i-r;o/=n,u/=s;var h=Math.sqrt(o*o+u*u),f=h-1;if(f<0)return[];var p=f/h;return[(a-t)*p+t,(i-r)*p+r]}(n,s,t,r,a/2+o,i/2+o)},checkPoint:function(t,r,a,i,n,s,o,u){return za(t,r,i,n,s,o,a)}}},generateRoundPolygon:function(e,t){return this.nodeShapes[e]={renderer:this,name:e,points:t,getOrCreateCorners:function(a,i,n,s,o,u,h){if(void 0!==u[h]&&u[h+"-cx"]===a&&u[h+"-cy"]===i)return u[h];u[h]=new Array(t.length/2),u[h+"-cx"]=a,u[h+"-cy"]=i;var f=n/2,p=s/2;o="auto"===o?os(n,s):o;for(var x=new Array(t.length/2),k=0;k<t.length/2;k++)x[k]={x:a+f*t[2*k],y:i+p*t[2*k+1]};var _,U,O,K,Y=x.length;for(U=x[Y-1],_=0;_<Y;_++)u[h][_]=Uc(U,O=x[_%Y],K=x[(_+1)%Y],o),U=O,O=K;return u[h]},draw:function(a,i,n,s,o,u,h){this.renderer.nodeShapeImpl("round-polygon",a,i,n,s,o,this.points,this.getOrCreateCorners(i,n,s,o,u,h,"drawCorners"))},intersectLine:function(a,i,n,s,o,u,h,f,p){return function(t,r,a,i,n,s,o,u,h){var p,f=[],x=new Array(2*a.length);h.forEach(function(Y,j){0===j?(x[x.length-2]=Y.startX,x[x.length-1]=Y.startY):(x[4*j-2]=Y.startX,x[4*j-1]=Y.startY),x[4*j]=Y.stopX,x[4*j+1]=Y.stopY,0!==(p=Na(t,r,i,n,Y.cx,Y.cy,Y.radius)).length&&f.push(p[0],p[1])});for(var k=0;k<x.length/4;k++)0!==(p=ji(t,r,i,n,x[4*k],x[4*k+1],x[4*k+2],x[4*k+3],!1)).length&&f.push(p[0],p[1]);if(f.length>2){for(var _=[f[0],f[1]],U=Math.pow(_[0]-t,2)+Math.pow(_[1]-r,2),O=1;O<f.length/2;O++){var K=Math.pow(f[2*O]-t,2)+Math.pow(f[2*O+1]-r,2);K<=U&&(_[0]=f[2*O],_[1]=f[2*O+1],U=K)}return _}return f}(o,u,this.points,a,i,0,0,0,this.getOrCreateCorners(a,i,n,s,f,p,"corners"))},checkPoint:function(a,i,n,s,o,u,h,f,p){return function(t,r,a,i,n,s,o,u){for(var h=new Array(2*a.length),f=0;f<u.length;f++){var p=u[f];if(h[4*f+0]=p.startX,h[4*f+1]=p.startY,h[4*f+2]=p.stopX,h[4*f+3]=p.stopY,Math.pow(p.cx-t,2)+Math.pow(p.cy-r,2)<=Math.pow(p.radius,2))return!0}return Ir(t,r,h)}(a,i,this.points,0,0,0,0,this.getOrCreateCorners(u,h,s,o,f,p,"corners"))}}},generateRoundRectangle:function(){return this.nodeShapes["round-rectangle"]=this.nodeShapes.roundrectangle={renderer:this,name:"round-rectangle",points:Ni(4,0),draw:function(t,r,a,i,n,s){this.renderer.nodeShapeImpl(this.name,t,r,a,i,n,this.points,s)},intersectLine:function(t,r,a,i,n,s,o,u){return bt(n,s,t,r,a,i,o,u)},checkPoint:function(t,r,a,i,n,s,o,u){var h=i/2,f=n/2;u="auto"===u?Ui(i,n):u;var p=2*(u=Math.min(h,f,u));return!!(la(t,r,this.points,s,o,i,n-p,[0,-1],a)||la(t,r,this.points,s,o,i-p,n,[0,-1],a)||za(t,r,p,p,s-h+u,o-f+u,a)||za(t,r,p,p,s+h-u,o-f+u,a)||za(t,r,p,p,s+h-u,o+f-u,a)||za(t,r,p,p,s-h+u,o+f-u,a))}}},generateCutRectangle:function(){return this.nodeShapes["cut-rectangle"]=this.nodeShapes.cutrectangle={renderer:this,name:"cut-rectangle",cornerLength:8,points:Ni(4,0),draw:function(t,r,a,i,n,s){this.renderer.nodeShapeImpl(this.name,t,r,a,i,n,null,s)},generateCutTrianglePts:function(t,r,a,i,n){var s="auto"===n?this.cornerLength:n,o=r/2,u=t/2,h=a-u,f=a+u,p=i-o,x=i+o;return{topLeft:[h,p+s,h+s,p,h+s,p+s],topRight:[f-s,p,f,p+s,f-s,p+s],bottomRight:[f,x-s,f-s,x,f-s,x-s],bottomLeft:[h+s,x,h,x-s,h+s,x-s]}},intersectLine:function(t,r,a,i,n,s,o,u){var h=this.generateCutTrianglePts(a+2*o,i+2*o,t,r,u),f=[].concat.apply([],[h.topLeft.splice(0,4),h.topRight.splice(0,4),h.bottomRight.splice(0,4),h.bottomLeft.splice(0,4)]);return Tn(n,s,f,t,r)},checkPoint:function(t,r,a,i,n,s,o,u){var h="auto"===u?this.cornerLength:u;if(la(t,r,this.points,s,o,i,n-2*h,[0,-1],a)||la(t,r,this.points,s,o,i-2*h,n,[0,-1],a))return!0;var f=this.generateCutTrianglePts(i,n,s,o);return Ir(t,r,f.topLeft)||Ir(t,r,f.topRight)||Ir(t,r,f.bottomRight)||Ir(t,r,f.bottomLeft)}}},generateBarrel:function(){return this.nodeShapes.barrel={renderer:this,name:"barrel",points:Ni(4,0),draw:function(t,r,a,i,n,s){this.renderer.nodeShapeImpl(this.name,t,r,a,i,n)},intersectLine:function(t,r,a,i,n,s,o,u){var x=this.generateBarrelBezierPts(a+2*o,i+2*o,t,r),k=function(O){var K=d({x:O[0],y:O[1]},{x:O[2],y:O[3]},{x:O[4],y:O[5]},.15),Y=d({x:O[0],y:O[1]},{x:O[2],y:O[3]},{x:O[4],y:O[5]},.5),j=d({x:O[0],y:O[1]},{x:O[2],y:O[3]},{x:O[4],y:O[5]},.85);return[O[0],O[1],K.x,K.y,Y.x,Y.y,j.x,j.y,O[4],O[5]]},_=[].concat(k(x.topLeft),k(x.topRight),k(x.bottomRight),k(x.bottomLeft));return Tn(n,s,_,t,r)},generateBarrelBezierPts:function(t,r,a,i){var n=r/2,s=t/2,o=a-s,u=a+s,h=i-n,f=i+n,p=yl(t,r),x=p.heightOffset,k=p.widthOffset,_=p.ctrlPtOffsetPct*t,U={topLeft:[o,h+x,o+_,h,o+k,h],topRight:[u-k,h,u-_,h,u,h+x],bottomRight:[u,f-x,u-_,f,u-k,f],bottomLeft:[o+k,f,o+_,f,o,f-x]};return U.topLeft.isTop=!0,U.topRight.isTop=!0,U.bottomLeft.isBottom=!0,U.bottomRight.isBottom=!0,U},checkPoint:function(t,r,a,i,n,s,o,u){var h=yl(i,n),p=h.widthOffset;if(la(t,r,this.points,s,o,i,n-2*h.heightOffset,[0,-1],a)||la(t,r,this.points,s,o,i-2*p,n,[0,-1],a))return!0;for(var x=this.generateBarrelBezierPts(i,n,s,o),k=function(he,me,Te){var Be=Te[4],Me=Te[2],Oe=Te[0],tr=Te[5],ur=Te[1],fr=Math.min(Be,Oe),rr=Math.max(Be,Oe),Cr=Math.min(tr,ur),Ur=Math.max(tr,ur);if(fr<=he&&he<=rr&&Cr<=me&&me<=Ur){var qr=function(t,r,a){return[t-2*r+a,2*(r-t),t]}(Be,Me,Oe),Dr=function(t,r,a,i){var n=r*r-4*t*(a-=i);if(n<0)return[];var s=Math.sqrt(n),o=2*t;return[(-r+s)/o,(-r-s)/o]}(qr[0],qr[1],qr[2],he),Wr=Dr.filter(function(ga){return 0<=ga&&ga<=1});if(Wr.length>0)return Wr[0]}return null},_=Object.keys(x),U=0;U<_.length;U++){var K=x[_[U]],Y=k(t,r,K);if(null!=Y){var se=Gt(K[5],K[3],K[1],Y);if(K.isTop&&se<=r||K.isBottom&&r<=se)return!0}}return!1}}},generateBottomRoundrectangle:function(){return this.nodeShapes["bottom-round-rectangle"]=this.nodeShapes.bottomroundrectangle={renderer:this,name:"bottom-round-rectangle",points:Ni(4,0),draw:function(t,r,a,i,n,s){this.renderer.nodeShapeImpl(this.name,t,r,a,i,n,this.points,s)},intersectLine:function(t,r,a,i,n,s,o,u){var f=r-(i/2+o),k=ji(n,s,t,r,t-(a/2+o),f,t+(a/2+o),f,!1);return k.length>0?k:bt(n,s,t,r,a,i,o,u)},checkPoint:function(t,r,a,i,n,s,o,u){var h=2*(u="auto"===u?Ui(i,n):u);if(la(t,r,this.points,s,o,i,n-h,[0,-1],a)||la(t,r,this.points,s,o,i-h,n,[0,-1],a))return!0;var f=i/2+2*a,p=n/2+2*a;return!!(Ir(t,r,[s-f,o-p,s-f,o,s+f,o,s+f,o-p])||za(t,r,h,h,s+i/2-u,o+n/2-u,a)||za(t,r,h,h,s-i/2+u,o+n/2-u,a))}}},registerNodeShapes:function(){var e=this.nodeShapes={},t=this;this.generateEllipse(),this.generatePolygon("triangle",Ni(3,0)),this.generateRoundPolygon("round-triangle",Ni(3,0)),this.generatePolygon("rectangle",Ni(4,0)),e.square=e.rectangle,this.generateRoundRectangle(),this.generateCutRectangle(),this.generateBarrel(),this.generateBottomRoundrectangle();var r=[0,1,1,0,0,-1,-1,0];this.generatePolygon("diamond",r),this.generateRoundPolygon("round-diamond",r),this.generatePolygon("pentagon",Ni(5,0)),this.generateRoundPolygon("round-pentagon",Ni(5,0)),this.generatePolygon("hexagon",Ni(6,0)),this.generateRoundPolygon("round-hexagon",Ni(6,0)),this.generatePolygon("heptagon",Ni(7,0)),this.generateRoundPolygon("round-heptagon",Ni(7,0)),this.generatePolygon("octagon",Ni(8,0)),this.generateRoundPolygon("round-octagon",Ni(8,0));var a=new Array(20),i=pn(5,0),n=pn(5,Math.PI/5),s=.5*(3-Math.sqrt(5));s*=1.57;for(var o=0;o<n.length/2;o++)n[2*o]*=s,n[2*o+1]*=s;for(o=0;o<5;o++)a[4*o]=i[2*o],a[4*o+1]=i[2*o+1],a[4*o+2]=n[2*o],a[4*o+3]=n[2*o+1];a=bn(a),this.generatePolygon("star",a),this.generatePolygon("vee",[-1,-1,0,-.333,1,-1,0,1]),this.generatePolygon("rhomboid",[-1,-1,.333,-1,1,1,-.333,1]),this.generatePolygon("right-rhomboid",[-.333,-1,1,-1,.333,1,-1,1]),this.nodeShapes.concavehexagon=this.generatePolygon("concave-hexagon",[-1,-.95,-.75,0,-1,.95,1,.95,.75,0,1,-.95]);var u=[-1,-1,.25,-1,1,0,.25,1,-1,1];this.generatePolygon("tag",u),this.generateRoundPolygon("round-tag",u),e.makePolygon=function(h){var x,p="polygon-"+h.join("$");return(x=this[p])?x:t.generatePolygon(p,h)}}},mo={timeToRender:function(){return this.redrawTotalTime/this.redrawCount},redraw:function(e){e=e||Ri();var t=this;void 0===t.averageRedrawTime&&(t.averageRedrawTime=0),void 0===t.lastRedrawTime&&(t.lastRedrawTime=0),void 0===t.lastDrawTime&&(t.lastDrawTime=0),t.requestedFrame=!0,t.renderOptions=e},beforeRender:function(e,t){if(!this.destroyed){null==t&&Ka("Priority is not optional for beforeRender");var r=this.beforeRenderCallbacks;r.push({fn:e,priority:t}),r.sort(function(a,i){return i.priority-a.priority})}}},jd=function(t,r,a){for(var i=t.beforeRenderCallbacks,n=0;n<i.length;n++)i[n].fn(r,a)};mo.startRenderLoop=function(){var e=this,t=e.cy;if(!e.renderLoopStarted){e.renderLoopStarted=!0;var r=function(i){if(!e.destroyed){if(!t.batching())if(e.requestedFrame&&!e.skipFrame){jd(e,!0,i);var n=ia();e.render(e.renderOptions);var s=e.lastDrawTime=ia();void 0===e.averageRedrawTime&&(e.averageRedrawTime=s-n),void 0===e.redrawCount&&(e.redrawCount=0),e.redrawCount++,void 0===e.redrawTotalTime&&(e.redrawTotalTime=0);var o=s-n;e.redrawTotalTime+=o,e.lastRedrawTime=o,e.averageRedrawTime=e.averageRedrawTime/2+o/2,e.requestedFrame=!1}else jd(e,!1,i);e.skipFrame=!1,ha(r)}};ha(r)}};var Xd=function(t){this.init(t)},Xs=Xd.prototype;Xs.clientFunctions=["redrawHint","render","renderTo","matchCanvasSize","nodeShapeImpl","arrowShapeImpl"],Xs.init=function(e){var t=this;t.options=e,t.cy=e.cy;var r=t.container=e.cy.container(),a=t.cy.window();if(a){var i=a.document,n=i.head,s="__________cytoscape_stylesheet",o="__________cytoscape_container",u=null!=i.getElementById(s);if(r.className.indexOf(o)<0&&(r.className=(r.className||"")+" "+o),!u){var h=i.createElement("style");h.id=s,h.textContent="."+o+" { position: relative; }",n.insertBefore(h,n.children[0])}"static"===a.getComputedStyle(r).getPropertyValue("position")&&_a("A Cytoscape container has style position:static and so can not use UI extensions properly")}t.selection=[void 0,void 0,void 0,void 0,0],t.bezierProjPcts=[.05,.225,.4,.5,.6,.775,.95],t.hoverData={down:null,last:null,downTime:null,triggerMode:null,dragging:!1,initialPan:[null,null],capture:!1},t.dragData={possibleDragElements:[]},t.touchData={start:null,capture:!1,startPosition:[null,null,null,null,null,null],singleTouchStartTime:null,singleTouchMoved:!0,now:[null,null,null,null,null,null],earlier:[null,null,null,null,null,null]},t.redraws=0,t.showFps=e.showFps,t.debug=e.debug,t.webgl=e.webgl,t.hideEdgesOnViewport=e.hideEdgesOnViewport,t.textureOnViewport=e.textureOnViewport,t.wheelSensitivity=e.wheelSensitivity,t.motionBlurEnabled=e.motionBlur,t.forcedPixelRatio=X(e.pixelRatio)?e.pixelRatio:null,t.motionBlur=e.motionBlur,t.motionBlurOpacity=e.motionBlurOpacity,t.motionBlurTransparency=1-t.motionBlurOpacity,t.motionBlurPxRatio=1,t.mbPxRBlurry=1,t.minMbLowQualFrames=4,t.fullQualityMb=!1,t.clearedForMotionBlur=[],t.desktopTapThreshold=e.desktopTapThreshold,t.desktopTapThreshold2=e.desktopTapThreshold*e.desktopTapThreshold,t.touchTapThreshold=e.touchTapThreshold,t.touchTapThreshold2=e.touchTapThreshold*e.touchTapThreshold,t.tapholdDuration=500,t.bindings=[],t.beforeRenderCallbacks=[],t.beforeRenderPriorities={animations:400,eleCalcs:300,eleTxrDeq:200,lyrTxrDeq:150,lyrTxrSkip:100},t.registerNodeShapes(),t.registerArrowShapes(),t.registerCalculationListeners()},Xs.notify=function(e,t){var r=this,a=r.cy;if(!this.destroyed){if("init"===e)return void r.load();if("destroy"===e)return void r.destroy();("add"===e||"remove"===e||"move"===e&&a.hasCompoundNodes()||"load"===e||"zorder"===e||"mount"===e)&&r.invalidateCachedZSortedEles(),"viewport"===e&&r.redrawHint("select",!0),"gc"===e&&r.redrawHint("gc",!0),("load"===e||"resize"===e||"mount"===e)&&(r.invalidateContainerClientCoordsCache(),r.matchCanvasSize(r.container)),r.redrawHint("eles",!0),r.redrawHint("drag",!0),this.startRenderLoop(),this.redraw()}},Xs.destroy=function(){var e=this;e.destroyed=!0,e.cy.stopAnimationLoop();for(var t=0;t<e.bindings.length;t++){var r=e.bindings[t],i=r.target;(i.off||i.removeEventListener).apply(i,r.args)}if(e.bindings=[],e.beforeRenderCallbacks=[],e.onUpdateEleCalcsFns=[],e.removeObserver&&e.removeObserver.disconnect(),e.styleObserver&&e.styleObserver.disconnect(),e.resizeObserver&&e.resizeObserver.disconnect(),e.labelCalcDiv)try{document.body.removeChild(e.labelCalcDiv)}catch{}},Xs.isHeadless=function(){return!1},[Nc,Gd,qd,js,cs,mo].forEach(function(e){G(Xs,e)});var Yc=1e3/60,Zd_setupDequeueing=function(t){return function(){var a=this,i=this.renderer;if(!a.dequeueingSetup){a.dequeueingSetup=!0;var n=zr(function(){i.redrawHint("eles",!0),i.redrawHint("drag",!0),i.redraw()},t.deqRedrawThreshold);i.beforeRender(function(h,f){var p=ia(),x=i.averageRedrawTime,k=i.lastRedrawTime,_=[],U=i.cy.extent(),O=i.getPixelRatio();for(h||i.flushRenderedStyleQueue();;){var K=ia(),Y=K-p,j=K-f;if(k<Yc){if(j>=t.deqFastCost*(Yc-(h?x:0)))break}else if(h){if(Y>=t.deqCost*k||Y>=t.deqAvgCost*x)break}else if(j>=t.deqNoDrawCost*Yc)break;var ie=t.deq(a,O,U);if(!(ie.length>0))break;for(var se=0;se<ie.length;se++)_.push(ie[se])}_.length>0&&(t.onDeqd(a,_),!h&&t.shouldRedraw(a,_,O,U)&&n())},(t.priority||Oa)(a))}}},rp=function(){return ut(function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ua;S(this,e),this.idsByKey=new Lt,this.keyForId=new Lt,this.cachesByLvl=new Lt,this.lvls=[],this.getKey=t,this.doesEleInvalidateKey=r},[{key:"getIdsFor",value:function(r){null==r&&Ka("Can not get id list for null key");var a=this.idsByKey,i=this.idsByKey.get(r);return i||(i=new Xr,a.set(r,i)),i}},{key:"addIdForKey",value:function(r,a){null!=r&&this.getIdsFor(r).add(a)}},{key:"deleteIdForKey",value:function(r,a){null!=r&&this.getIdsFor(r).delete(a)}},{key:"getNumberOfIdsForKey",value:function(r){return null==r?0:this.getIdsFor(r).size}},{key:"updateKeyMappingFor",value:function(r){var a=r.id(),i=this.keyForId.get(a),n=this.getKey(r);this.deleteIdForKey(i,a),this.addIdForKey(n,a),this.keyForId.set(a,n)}},{key:"deleteKeyMappingFor",value:function(r){var a=r.id(),i=this.keyForId.get(a);this.deleteIdForKey(i,a),this.keyForId.delete(a)}},{key:"keyHasChangedFor",value:function(r){var a=r.id();return this.keyForId.get(a)!==this.getKey(r)}},{key:"isInvalid",value:function(r){return this.keyHasChangedFor(r)||this.doesEleInvalidateKey(r)}},{key:"getCachesAt",value:function(r){var a=this.cachesByLvl,i=this.lvls,n=a.get(r);return n||(n=new Lt,a.set(r,n),i.push(r)),n}},{key:"getCache",value:function(r,a){return this.getCachesAt(a).get(r)}},{key:"get",value:function(r,a){var i=this.getKey(r),n=this.getCache(i,a);return null!=n&&this.updateKeyMappingFor(r),n}},{key:"getForCachedKey",value:function(r,a){var i=this.keyForId.get(r.id());return this.getCache(i,a)}},{key:"hasCache",value:function(r,a){return this.getCachesAt(a).has(r)}},{key:"has",value:function(r,a){var i=this.getKey(r);return this.hasCache(i,a)}},{key:"setCache",value:function(r,a,i){i.key=r,this.getCachesAt(a).set(r,i)}},{key:"set",value:function(r,a,i){var n=this.getKey(r);this.setCache(n,a,i),this.updateKeyMappingFor(r)}},{key:"deleteCache",value:function(r,a){this.getCachesAt(a).delete(r)}},{key:"delete",value:function(r,a){var i=this.getKey(r);this.deleteCache(i,a)}},{key:"invalidateKey",value:function(r){var a=this;this.lvls.forEach(function(i){return a.deleteCache(r,i)})}},{key:"invalidate",value:function(r){var a=r.id(),i=this.keyForId.get(a);this.deleteKeyMappingFor(r);var n=this.doesEleInvalidateKey(r);return n&&this.invalidateKey(i),n||0===this.getNumberOfIdsForKey(i)}}])}(),Zs={dequeue:"dequeue",downscale:"downscale",highQuality:"highQuality"},vp=Fe({getKey:null,doesEleInvalidateKey:Ua,drawElement:null,getBoundingBox:null,getRotationPoint:null,getRotationOffset:null,isVisible:pr,allowEdgeTxrCaching:!0,allowParentTxrCaching:!0}),xo=function(t,r){var a=this;a.renderer=t,a.onDequeues=[];var i=vp(r);G(a,i),a.lookup=new rp(i.getKey,i.doesEleInvalidateKey),a.setupDequeueing()},vn=xo.prototype;vn.reasons=Zs,vn.getTextureQueue=function(e){var t=this;return t.eleImgCaches=t.eleImgCaches||{},t.eleImgCaches[e]=t.eleImgCaches[e]||[]},vn.getRetiredTextureQueue=function(e){var r=this.eleImgCaches.retired=this.eleImgCaches.retired||{};return r[e]=r[e]||[]},vn.getElementQueue=function(){return this.eleCacheQueue=this.eleCacheQueue||new Pr(function(r,a){return a.reqs-r.reqs})},vn.getElementKeyToQueue=function(){return this.eleKeyToCacheQueue=this.eleKeyToCacheQueue||{}},vn.getElement=function(e,t,r,a,i){var n=this,s=this.renderer,o=s.cy.zoom(),u=this.lookup;if(!t||0===t.w||0===t.h||isNaN(t.w)||isNaN(t.h)||!e.visible()||e.removed()||!n.allowEdgeTxrCaching&&e.isEdge()||!n.allowParentTxrCaching&&e.isParent())return null;if(null==a&&(a=Math.ceil(Rn(o*r))),a<-4)a=-4;else if(o>=7.99||a>3)return null;var h=Math.pow(2,a),f=t.h*h,p=t.w*h,x=s.eleTextBiggerThanMin(e,h);if(!this.isVisible(e,x))return null;var _,k=u.get(e,a);if(k&&k.invalidated&&(k.invalidated=!1,k.texture.invalidatedWidth-=k.width),k)return k;if(_=f<=25?25:f<=50?50:50*Math.ceil(f/50),f>1024||p>1024)return null;var U=n.getTextureQueue(_),O=U[U.length-2],K=function(){return n.recycleTexture(_,p)||n.addTexture(_,p)};O||(O=U[U.length-1]),O||(O=K()),O.width-O.usedWidth<p&&(O=K());for(var se,Y=function(fr){return fr&&fr.scaledLabelShown===x},j=i&&i===Zs.dequeue,yt=i&&i===Zs.highQuality,ie=i&&i===Zs.downscale,Ht=a+1;Ht<=3;Ht++){var he=u.get(e,Ht);if(he){se=he;break}}var me=se&&se.level===a+1?se:null,Te=function(){O.context.drawImage(me.texture.canvas,me.x,0,me.width,me.height,O.usedWidth,0,p,f)};if(O.context.setTransform(1,0,0,1,0,0),O.context.clearRect(O.usedWidth,0,p,_),Y(me))Te();else if(Y(se)){if(!yt)return n.queueElement(e,se.level-1),se;for(var Be=se.level;Be>a;Be--)me=n.getElement(e,t,r,Be,Zs.downscale);Te()}else{var Me;if(!j&&!yt&&!ie)for(var Oe=a-1;Oe>=-4;Oe--){var tr=u.get(e,Oe);if(tr){Me=tr;break}}if(Y(Me))return n.queueElement(e,a),Me;O.context.translate(O.usedWidth,0),O.context.scale(h,h),this.drawElement(O.context,e,t,x,!1),O.context.scale(1/h,1/h),O.context.translate(-O.usedWidth,0)}return k={x:O.usedWidth,texture:O,level:a,scale:h,width:p,height:f,scaledLabelShown:x},O.usedWidth+=Math.ceil(p+8),O.eleCaches.push(k),u.set(e,a,k),n.checkTextureFullness(O),k},vn.invalidateElements=function(e){for(var t=0;t<e.length;t++)this.invalidateElement(e[t])},vn.invalidateElement=function(e){var t=this,r=t.lookup,a=[];if(r.isInvalid(e)){for(var n=-4;n<=3;n++){var s=r.getForCachedKey(e,n);s&&a.push(s)}if(r.invalidate(e))for(var u=0;u<a.length;u++){var h=a[u],f=h.texture;f.invalidatedWidth+=h.width,h.invalidated=!0,t.checkTextureUtility(f)}t.removeFromQueue(e)}},vn.checkTextureUtility=function(e){e.invalidatedWidth>=.2*e.width&&this.retireTexture(e)},vn.checkTextureFullness=function(e){var r=this.getTextureQueue(e.height);e.usedWidth/e.width>.8&&e.fullnessChecks>=10?at(r,e):e.fullnessChecks++},vn.retireTexture=function(e){var r=e.height,a=this.getTextureQueue(r),i=this.lookup;at(a,e),e.retired=!0;for(var n=e.eleCaches,s=0;s<n.length;s++){var o=n[s];i.deleteCache(o.key,o.level)}Ct(n),this.getRetiredTextureQueue(r).push(e)},vn.addTexture=function(e,t){var i={};return this.getTextureQueue(e).push(i),i.eleCaches=[],i.height=e,i.width=Math.max(1024,t),i.usedWidth=0,i.invalidatedWidth=0,i.fullnessChecks=0,i.canvas=this.renderer.makeOffscreenCanvas(i.width,i.height),i.context=i.canvas.getContext("2d"),i},vn.recycleTexture=function(e,t){for(var a=this.getTextureQueue(e),i=this.getRetiredTextureQueue(e),n=0;n<i.length;n++){var s=i[n];if(s.width>=t)return s.retired=!1,s.usedWidth=0,s.invalidatedWidth=0,s.fullnessChecks=0,Ct(s.eleCaches),s.context.setTransform(1,0,0,1,0,0),s.context.clearRect(0,0,s.width,s.height),at(i,s),a.push(s),s}},vn.queueElement=function(e,t){var a=this.getElementQueue(),i=this.getElementKeyToQueue(),n=this.getKey(e),s=i[n];if(s)s.level=Math.max(s.level,t),s.eles.merge(e),s.reqs++,a.updateItem(s);else{var o={eles:e.spawn().merge(e),level:t,reqs:1,key:n};a.push(o),i[n]=o}},vn.dequeue=function(e){for(var t=this,r=t.getElementQueue(),a=t.getElementKeyToQueue(),i=[],n=t.lookup,s=0;s<1&&r.size()>0;s++){var o=r.pop(),u=o.key,h=o.eles[0],f=n.hasCache(h,o.level);if(a[u]=null,!f){i.push(o);var p=t.getBoundingBox(h);t.getElement(h,p,e,o.level,Zs.dequeue)}}return i},vn.removeFromQueue=function(e){var r=this.getElementQueue(),a=this.getElementKeyToQueue(),i=this.getKey(e),n=a[i];null!=n&&(1===n.eles.length?(n.reqs=Va,r.updateItem(n),r.pop(),a[i]=null):n.eles.unmerge(e))},vn.onDequeue=function(e){this.onDequeues.push(e)},vn.offDequeue=function(e){at(this.onDequeues,e)},vn.setupDequeueing=Zd_setupDequeueing({deqRedrawThreshold:100,deqCost:.15,deqAvgCost:.1,deqNoDrawCost:.9,deqFastCost:.9,deq:function(t,r,a){return t.dequeue(r,a)},onDeqd:function(t,r){for(var a=0;a<t.onDequeues.length;a++)(0,t.onDequeues[a])(r)},shouldRedraw:function(t,r,a,i){for(var n=0;n<r.length;n++)for(var s=r[n].eles,o=0;o<s.length;o++){var u=s[o].boundingBox();if(fe(u,i))return!0}return!1},priority:function(t){return t.renderer.beforeRenderPriorities.eleTxrDeq}});var r0=function(t){var r=this,a=r.renderer=t,i=a.cy;r.layersByLevel={},r.firstGet=!0,r.lastInvalidationTime=ia()-500,r.skipping=!1,r.eleTxrDeqs=i.collection(),r.scheduleElementRefinement=zr(function(){r.refineElementTextures(r.eleTxrDeqs),r.eleTxrDeqs.unmerge(r.eleTxrDeqs)},50),a.beforeRender(function(s,o){r.skipping=o-r.lastInvalidationTime<=250},a.beforeRenderPriorities.lyrTxrSkip),r.layersQueue=new Pr(function(o,u){return u.reqs-o.reqs}),r.setupDequeueing()},An=r0.prototype,a0=0,Ap=Math.pow(2,53)-1;An.makeLayer=function(e,t){var r=Math.pow(2,t),a=Math.ceil(e.w*r),i=Math.ceil(e.h*r),n=this.renderer.makeOffscreenCanvas(a,i),s={id:a0=++a0%Ap,bb:e,level:t,width:a,height:i,canvas:n,context:n.getContext("2d"),eles:[],elesQueue:[],reqs:0},o=s.context,u=-s.bb.x1,h=-s.bb.y1;return o.scale(r,r),o.translate(u,h),s},An.getLayers=function(e,t,r){var a=this,s=a.renderer.cy.zoom(),o=a.firstGet;if(a.firstGet=!1,null==r)if((r=Math.ceil(Rn(s*t)))<-4)r=-4;else if(s>=3.99||r>2)return null;a.validateLayersElesOrdering(r,e);var p,k,u=a.layersByLevel,h=Math.pow(2,r),f=u[r]=u[r]||[];if(a.levelIsComplete(r,e))return f;!function(){var Te=function(ur){if(a.validateLayersElesOrdering(ur,e),a.levelIsComplete(ur,e))return k=u[ur],!0},Be=function(ur){if(!k)for(var fr=r+ur;-4<=fr&&fr<=2&&!Te(fr);fr+=ur);};Be(1),Be(-1);for(var Me=f.length-1;Me>=0;Me--){var Oe=f[Me];Oe.invalid&&at(f,Oe)}}();var O=function(Te){var Be=(Te=Te||{}).after;!function(){if(!p){p=kt();for(var Te=0;Te<e.length;Te++)nt(p,e[Te].boundingBox())}}();var Me=Math.ceil(p.w*h),Oe=Math.ceil(p.h*h);if(Me>32767||Oe>32767)return null;if(Me*Oe>16e6)return null;var ur=a.makeLayer(p,r);if(null!=Be){var fr=f.indexOf(Be)+1;f.splice(fr,0,ur)}else(void 0===Te.insert||Te.insert)&&f.unshift(ur);return ur};if(a.skipping&&!o)return null;for(var K=null,Y=e.length/1,j=!o,yt=0;yt<e.length;yt++){var ie=e[yt],se=ie._private.rscratch,Ht=se.imgLayerCaches=se.imgLayerCaches||{},he=Ht[r];if(he)K=he;else{if((!K||K.eles.length>=Y||!l(K.bb,ie.boundingBox()))&&!(K=O({insert:!0,after:K})))return null;k||j?a.queueLayer(K,ie):a.drawEleInLayer(K,ie,r,t),K.eles.push(ie),Ht[r]=K}}return k||(j?null:f)},An.getEleLevelForLayerLevel=function(e,t){return e},An.drawEleInLayer=function(e,t,r,a){var n=this.renderer,s=e.context,o=t.boundingBox();0===o.w||0===o.h||!t.visible()||(r=this.getEleLevelForLayerLevel(r,a),n.setImgSmoothing(s,!1),n.drawCachedElement(s,t,null,null,r,!0),n.setImgSmoothing(s,!0))},An.levelIsComplete=function(e,t){var a=this.layersByLevel[e];if(!a||0===a.length)return!1;for(var i=0,n=0;n<a.length;n++){var s=a[n];if(s.reqs>0||s.invalid)return!1;i+=s.eles.length}return i===t.length},An.validateLayersElesOrdering=function(e,t){var r=this.layersByLevel[e];if(r)for(var a=0;a<r.length;a++){for(var i=r[a],n=-1,s=0;s<t.length;s++)if(i.eles[0]===t[s]){n=s;break}if(n<0)this.invalidateLayer(i);else{var o=n;for(s=0;s<i.eles.length;s++)if(i.eles[s]!==t[o+s]){this.invalidateLayer(i);break}}}},An.updateElementsInLayers=function(e,t){for(var a=It(e[0]),i=0;i<e.length;i++)for(var n=a?null:e[i],s=a?e[i]:e[i].ele,o=s._private.rscratch,u=o.imgLayerCaches=o.imgLayerCaches||{},h=-4;h<=2;h++){var f=u[h];f&&(n&&this.getEleLevelForLayerLevel(f.level)!==n.level||t(f,s,n))}},An.haveLayers=function(){for(var t=!1,r=-4;r<=2;r++){var a=this.layersByLevel[r];if(a&&a.length>0){t=!0;break}}return t},An.invalidateElements=function(e){var t=this;0!==e.length&&(t.lastInvalidationTime=ia(),0!==e.length&&t.haveLayers()&&t.updateElementsInLayers(e,function(a,i,n){t.invalidateLayer(a)}))},An.invalidateLayer=function(e){if(this.lastInvalidationTime=ia(),!e.invalid){var t=e.level,r=e.eles;at(this.layersByLevel[t],e),e.elesQueue=[],e.invalid=!0,e.replacement&&(e.replacement.invalid=!0);for(var i=0;i<r.length;i++){var n=r[i]._private.rscratch.imgLayerCaches;n&&(n[t]=null)}}},An.refineElementTextures=function(e){var t=this;t.updateElementsInLayers(e,function(a,i,n){var s=a.replacement;if(s||((s=a.replacement=t.makeLayer(a.bb,a.level)).replaces=a,s.eles=a.eles),!s.reqs)for(var o=0;o<s.eles.length;o++)t.queueLayer(s,s.eles[o])})},An.enqueueElementRefinement=function(e){this.eleTxrDeqs.merge(e),this.scheduleElementRefinement()},An.queueLayer=function(e,t){var a=this.layersQueue,i=e.elesQueue,n=i.hasId=i.hasId||{};if(!e.replacement){if(t){if(n[t.id()])return;i.push(t),n[t.id()]=!0}e.reqs?(e.reqs++,a.updateItem(e)):(e.reqs=1,a.push(e))}},An.dequeue=function(e){for(var t=this,r=t.layersQueue,a=[],i=0;i<1&&0!==r.size();){var n=r.peek();if(n.replacement)r.pop();else if(n.replaces&&n!==n.replaces.replacement)r.pop();else if(n.invalid)r.pop();else{var s=n.elesQueue.shift();s&&(t.drawEleInLayer(n,s,n.level,e),i++),0===a.length&&a.push(!0),0===n.elesQueue.length&&(r.pop(),n.reqs=0,n.replaces&&t.applyLayerReplacement(n),t.requestRedraw())}}return a},An.applyLayerReplacement=function(e){var r=this.layersByLevel[e.level],a=e.replaces,i=r.indexOf(a);if(!(i<0||a.invalid)){r[i]=e;for(var n=0;n<e.eles.length;n++){var s=e.eles[n]._private,o=s.imgLayerCaches=s.imgLayerCaches||{};o&&(o[e.level]=e)}this.requestRedraw()}},An.requestRedraw=zr(function(){var e=this.renderer;e.redrawHint("eles",!0),e.redrawHint("drag",!0),e.redraw()},100),An.setupDequeueing=Zd_setupDequeueing({deqRedrawThreshold:50,deqCost:.15,deqAvgCost:.1,deqNoDrawCost:.9,deqFastCost:.9,deq:function(t,r){return t.dequeue(r)},onDeqd:Oa,shouldRedraw:pr,priority:function(t){return t.renderer.beforeRenderPriorities.lyrTxrDeq}});var n0,i0={};function Dp(e,t){for(var r=0;r<t.length;r++){var a=t[r];e.lineTo(a.x,a.y)}}function Lp(e,t,r){for(var a,i=0;i<t.length;i++){var n=t[i];0===i&&(a=n),e.lineTo(n.x,n.y)}e.quadraticCurveTo(r.x,r.y,a.x,a.y)}function s0(e,t,r){e.beginPath&&e.beginPath();for(var a=t,i=0;i<a.length;i++)e.lineTo((n=a[i]).x,n.y);var s=r,o=r[0];for(e.moveTo(o.x,o.y),i=1;i<s.length;i++){var n;e.lineTo((n=s[i]).x,n.y)}e.closePath&&e.closePath()}function Bp(e,t,r,a,i){e.beginPath&&e.beginPath(),e.arc(r,a,i,0,2*Math.PI,!1);var n=t,s=n[0];e.moveTo(s.x,s.y);for(var o=0;o<n.length;o++){var u=n[o];e.lineTo(u.x,u.y)}e.closePath&&e.closePath()}function Rp(e,t,r,a){e.arc(t,r,a,0,2*Math.PI,!1)}i0.arrowShapeImpl=function(e){return(n0||(n0={polygon:Dp,"triangle-backcurve":Lp,"triangle-tee":s0,"circle-triangle":Bp,"triangle-cross":s0,circle:Rp}))[e]};var ns={drawElement:function(e,t,r,a,i,n){t.isNode()?this.drawNode(e,t,r,a,i,n):this.drawEdge(e,t,r,a,i,n)},drawElementOverlay:function(e,t){t.isNode()?this.drawNodeOverlay(e,t):this.drawEdgeOverlay(e,t)},drawElementUnderlay:function(e,t){t.isNode()?this.drawNodeUnderlay(e,t):this.drawEdgeUnderlay(e,t)},drawCachedElementPortion:function(e,t,r,a,i,n,s,o){var u=this,h=r.getBoundingBox(t);if(0!==h.w&&0!==h.h){var f=r.getElement(t,h,a,i,n);if(null!=f){var p=o(u,t);if(0===p)return;var K,Y,j,yt,ie,he,x=s(u,t),k=h.x1,_=h.y1,U=h.w,O=h.h;if(0!==x){var se=r.getRotationPoint(t);e.translate(j=se.x,yt=se.y),e.rotate(x),(ie=u.getImgSmoothing(e))||u.setImgSmoothing(e,!0);var Ht=r.getRotationOffset(t);K=Ht.x,Y=Ht.y}else K=k,Y=_;1!==p&&(e.globalAlpha=(he=e.globalAlpha)*p),e.drawImage(f.texture.canvas,f.x,0,f.width,f.height,K,Y,U,O),1!==p&&(e.globalAlpha=he),0!==x&&(e.rotate(-x),e.translate(-j,-yt),ie||u.setImgSmoothing(e,!1))}else r.drawElement(e,t)}}},Pp=function(){return 0},Ip=function(t,r){return t.getTextAngle(r,null)},Mp=function(t,r){return t.getTextAngle(r,"source")},Op=function(t,r){return t.getTextAngle(r,"target")},Fp=function(t,r){return r.effectiveOpacity()},Gc=function(t,r){return r.pstyle("text-opacity").pfValue*r.effectiveOpacity()};ns.drawCachedElement=function(e,t,r,a,i,n){var s=this,o=s.data,u=o.eleTxrCache,h=o.lblTxrCache,f=o.slbTxrCache,p=o.tlbTxrCache,x=t.boundingBox(),k=!0===n?u.reasons.highQuality:null;if(0!==x.w&&0!==x.h&&t.visible()&&(!a||fe(x,a))){var _=t.isEdge(),U=t.element()._private.rscratch.badLine;s.drawElementUnderlay(e,t),s.drawCachedElementPortion(e,t,u,r,i,k,Pp,Fp),(!_||!U)&&s.drawCachedElementPortion(e,t,h,r,i,k,Ip,Gc),_&&!U&&(s.drawCachedElementPortion(e,t,f,r,i,k,Mp,Gc),s.drawCachedElementPortion(e,t,p,r,i,k,Op,Gc)),s.drawElementOverlay(e,t)}},ns.drawElements=function(e,t){for(var a=0;a<t.length;a++)this.drawElement(e,t[a])},ns.drawCachedElements=function(e,t,r,a){for(var n=0;n<t.length;n++)this.drawCachedElement(e,t[n],r,a)},ns.drawCachedNodes=function(e,t,r,a){for(var n=0;n<t.length;n++){var s=t[n];s.isNode()&&this.drawCachedElement(e,s,r,a)}},ns.drawLayeredElements=function(e,t,r,a){var n=this.data.lyrTxrCache.getLayers(t,r);if(n)for(var s=0;s<n.length;s++){var o=n[s],u=o.bb;0===u.w||0===u.h||e.drawImage(o.canvas,u.x1,u.y1,u.w,u.h)}else this.drawCachedElements(e,t,r,a)};var hs={drawEdge:function(e,t,r){var a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],n=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],s=this,o=t._private.rscratch;if((!n||t.visible())&&!o.badLine&&null!=o.allpts&&!isNaN(o.allpts[0])){var u;r&&e.translate(-(u=r).x1,-u.y1);var h=n?t.pstyle("opacity").value:1,f=n?t.pstyle("line-opacity").value:1,p=t.pstyle("curve-style").value,x=t.pstyle("line-style").value,k=t.pstyle("width").pfValue,_=t.pstyle("line-cap").value,U=t.pstyle("line-outline-width").value,O=t.pstyle("line-outline-color").value,K=h*f,Y=h*f,j=function(){var ur=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K;"straight-triangle"===p?(s.eleStrokeStyle(e,t,ur),s.drawEdgeTrianglePath(t,e,o.allpts)):(e.lineWidth=k,e.lineCap=_,s.eleStrokeStyle(e,t,ur),s.drawEdgePath(t,e,o.allpts,x),e.lineCap="butt")},Ht=function(){s.drawArrowheads(e,t,arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y)};if(e.lineJoin="round","yes"===t.pstyle("ghost").value){var Te=t.pstyle("ghost-offset-x").pfValue,Be=t.pstyle("ghost-offset-y").pfValue,Me=t.pstyle("ghost-opacity").value,Oe=K*Me;e.translate(Te,Be),j(Oe),Ht(Oe),e.translate(-Te,-Be)}else!function(){var ur=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K;e.lineWidth=k+U,e.lineCap=_,U>0?(s.colorStrokeStyle(e,O[0],O[1],O[2],ur),"straight-triangle"===p?s.drawEdgeTrianglePath(t,e,o.allpts):(s.drawEdgePath(t,e,o.allpts,x),e.lineCap="butt")):e.lineCap="butt"}();i&&s.drawEdgeUnderlay(e,t),j(),Ht(),i&&s.drawEdgeOverlay(e,t),s.drawElementText(e,t,null,a),r&&e.translate(u.x1,u.y1)}}},o0=function(t){if(!["overlay","underlay"].includes(t))throw new Error("Invalid state");return function(r,a){if(a.visible()){var i=a.pstyle("".concat(t,"-opacity")).value;if(0!==i){var n=this,s=n.usePaths(),o=a._private.rscratch,h=2*a.pstyle("".concat(t,"-padding")).pfValue,f=a.pstyle("".concat(t,"-color")).value;r.lineWidth=h,r.lineCap="self"!==o.edgeType||s?"round":"butt",n.colorStrokeStyle(r,f[0],f[1],f[2],i),n.drawEdgePath(a,r,o.allpts,"solid")}}}};hs.drawEdgeOverlay=o0("overlay"),hs.drawEdgeUnderlay=o0("underlay"),hs.drawEdgePath=function(e,t,r,a){var s,i=e._private.rscratch,n=t,o=!1,u=this.usePaths(),h=e.pstyle("line-dash-pattern").pfValue,f=e.pstyle("line-dash-offset").pfValue;if(u){var p=r.join("$");i.pathCacheKey&&i.pathCacheKey===p?(s=t=i.pathCache,o=!0):(s=t=new Path2D,i.pathCacheKey=p,i.pathCache=s)}if(n.setLineDash)switch(a){case"dotted":n.setLineDash([1,1]);break;case"dashed":n.setLineDash(h),n.lineDashOffset=f;break;case"solid":n.setLineDash([])}if(!o&&!i.badLine)switch(t.beginPath&&t.beginPath(),t.moveTo(r[0],r[1]),i.edgeType){case"bezier":case"self":case"compound":case"multibezier":for(var k=2;k+3<r.length;k+=4)t.quadraticCurveTo(r[k],r[k+1],r[k+2],r[k+3]);break;case"straight":case"haystack":for(var _=2;_+1<r.length;_+=2)t.lineTo(r[_],r[_+1]);break;case"segments":if(i.isRound){var O,U=$(i.roundCorners);try{for(U.s();!(O=U.n()).done;)Wd(t,O.value)}catch(j){U.e(j)}finally{U.f()}t.lineTo(r[r.length-2],r[r.length-1])}else for(var Y=2;Y+1<r.length;Y+=2)t.lineTo(r[Y],r[Y+1])}t=n,u?t.stroke(s):t.stroke(),t.setLineDash&&t.setLineDash([])},hs.drawEdgeTrianglePath=function(e,t,r){t.fillStyle=t.strokeStyle;for(var a=e.pstyle("width").pfValue,i=0;i+1<r.length;i+=2){var n=[r[i+2]-r[i],r[i+3]-r[i+1]],s=Math.sqrt(n[0]*n[0]+n[1]*n[1]),o=[n[1]/s,-n[0]/s],u=[o[0]*a/2,o[1]*a/2];t.beginPath(),t.moveTo(r[i]-u[0],r[i+1]-u[1]),t.lineTo(r[i]+u[0],r[i+1]+u[1]),t.lineTo(r[i+2],r[i+3]),t.closePath(),t.fill()}},hs.drawArrowheads=function(e,t,r){var a=t._private.rscratch,i="haystack"===a.edgeType;i||this.drawArrowhead(e,t,"source",a.arrowStartX,a.arrowStartY,a.srcArrowAngle,r),this.drawArrowhead(e,t,"mid-target",a.midX,a.midY,a.midtgtArrowAngle,r),this.drawArrowhead(e,t,"mid-source",a.midX,a.midY,a.midsrcArrowAngle,r),i||this.drawArrowhead(e,t,"target",a.arrowEndX,a.arrowEndY,a.tgtArrowAngle,r)},hs.drawArrowhead=function(e,t,r,a,i,n,s){if(!(isNaN(a)||null==a||isNaN(i)||null==i||isNaN(n)||null==n)){var o=this,u=t.pstyle(r+"-arrow-shape").value;if("none"!==u){var h="hollow"===t.pstyle(r+"-arrow-fill").value?"both":"filled",f=t.pstyle(r+"-arrow-fill").value,p=t.pstyle("width").pfValue,x=t.pstyle(r+"-arrow-width"),k="match-line"===x.value?p:x.pfValue;"%"===x.units&&(k*=p);var _=t.pstyle("opacity").value;void 0===s&&(s=_);var U=e.globalCompositeOperation;(1!==s||"hollow"===f)&&(e.globalCompositeOperation="destination-out",o.colorFillStyle(e,255,255,255,1),o.colorStrokeStyle(e,255,255,255,1),o.drawArrowShape(t,e,h,p,u,k,a,i,n),e.globalCompositeOperation=U);var O=t.pstyle(r+"-arrow-color").value;o.colorFillStyle(e,O[0],O[1],O[2],s),o.colorStrokeStyle(e,O[0],O[1],O[2],s),o.drawArrowShape(t,e,f,p,u,k,a,i,n)}}},hs.drawArrowShape=function(e,t,r,a,i,n,s,o,u){var x,h=this,f=this.usePaths()&&"triangle-cross"!==i,p=!1,k=t,_={x:s,y:o},U=e.pstyle("arrow-scale").value,O=this.getArrowWidth(a,U),K=h.arrowShapes[i];if(f){var Y=h.arrowPathCache=h.arrowPathCache||[],j=da(i),yt=Y[j];null!=yt?(x=t=yt,p=!0):(x=t=new Path2D,Y[j]=x)}p||(t.beginPath&&t.beginPath(),f?K.draw(t,1,0,{x:0,y:0},1):K.draw(t,O,u,_,a),t.closePath&&t.closePath()),t=k,f&&(t.translate(s,o),t.rotate(u),t.scale(O,O)),("filled"===r||"both"===r)&&(f?t.fill(x):t.fill()),("hollow"===r||"both"===r)&&(t.lineWidth=n/(f?O:1),t.lineJoin="miter",f?t.stroke(x):t.stroke()),f&&(t.scale(1/O,1/O),t.rotate(-u),t.translate(-s,-o))};var qc={safeDrawImage:function(e,t,r,a,i,n,s,o,u,h){if(!(i<=0||n<=0||u<=0||h<=0))try{e.drawImage(t,r,a,i,n,s,o,u,h)}catch(f){_a(f)}},drawInscribedImage:function(e,t,r,a,i){var n=this,s=r.position(),o=s.x,u=s.y,h=r.cy().style(),f=h.getIndexedStyle.bind(h),p=f(r,"background-fit","value",a),x=f(r,"background-repeat","value",a),k=r.width(),_=r.height(),U=2*r.padding(),O=k+("inner"===f(r,"background-width-relative-to","value",a)?0:U),K=_+("inner"===f(r,"background-height-relative-to","value",a)?0:U),Y=r._private.rscratch,yt="node"===f(r,"background-clip","value",a),ie=f(r,"background-image-opacity","value",a)*i,se=f(r,"background-image-smoothing","value",a),Ht=r.pstyle("corner-radius").value;"auto"!==Ht&&(Ht=r.pstyle("corner-radius").pfValue);var he=t.width||t.cachedW,me=t.height||t.cachedH;(null==he||null==me)&&(document.body.appendChild(t),he=t.cachedW=t.width||t.offsetWidth,me=t.cachedH=t.height||t.offsetHeight,document.body.removeChild(t));var Te=he,Be=me;if("auto"!==f(r,"background-width","value",a)&&(Te="%"===f(r,"background-width","units",a)?f(r,"background-width","pfValue",a)*O:f(r,"background-width","pfValue",a)),"auto"!==f(r,"background-height","value",a)&&(Be="%"===f(r,"background-height","units",a)?f(r,"background-height","pfValue",a)*K:f(r,"background-height","pfValue",a)),0!==Te&&0!==Be){if("contain"===p)Te*=Me=Math.min(O/Te,K/Be),Be*=Me;else if("cover"===p){var Me;Te*=Me=Math.max(O/Te,K/Be),Be*=Me}var Oe=o-O/2,tr=f(r,"background-position-x","units",a),ur=f(r,"background-position-x","pfValue",a);Oe+="%"===tr?(O-Te)*ur:ur;var fr=f(r,"background-offset-x","units",a),rr=f(r,"background-offset-x","pfValue",a);Oe+="%"===fr?(O-Te)*rr:rr;var Cr=u-K/2,Ur=f(r,"background-position-y","units",a),qr=f(r,"background-position-y","pfValue",a);Cr+="%"===Ur?(K-Be)*qr:qr;var Dr=f(r,"background-offset-y","units",a),Wr=f(r,"background-offset-y","pfValue",a);Cr+="%"===Dr?(K-Be)*Wr:Wr,Y.pathCache&&(Oe-=o,Cr-=u,o=0,u=0);var ga=e.globalAlpha;e.globalAlpha=ie;var Ea=n.getImgSmoothing(e),pa=!1;if("no"===se&&Ea?(n.setImgSmoothing(e,!1),pa=!0):"yes"===se&&!Ea&&(n.setImgSmoothing(e,!0),pa=!0),"no-repeat"===x)yt&&(e.save(),Y.pathCache?e.clip(Y.pathCache):(n.nodeShapes[n.getNodeShape(r)].draw(e,o,u,O,K,Ht,Y),e.clip())),n.safeDrawImage(e,t,0,0,he,me,Oe,Cr,Te,Be),yt&&e.restore();else{var Aa=e.createPattern(t,x);e.fillStyle=Aa,n.nodeShapes[n.getNodeShape(r)].draw(e,o,u,O,K,Ht,Y),e.translate(Oe,Cr),e.fill(),e.translate(-Oe,-Cr)}e.globalAlpha=ga,pa&&n.setImgSmoothing(e,Ea)}}},Ls={};function l0(e,t,r,a,i){var s=Math.min(arguments.length>5&&void 0!==arguments[5]?arguments[5]:5,a/2,i/2);e.beginPath(),e.moveTo(t+s,r),e.lineTo(t+a-s,r),e.quadraticCurveTo(t+a,r,t+a,r+s),e.lineTo(t+a,r+i-s),e.quadraticCurveTo(t+a,r+i,t+a-s,r+i),e.lineTo(t+s,r+i),e.quadraticCurveTo(t,r+i,t,r+i-s),e.lineTo(t,r+s),e.quadraticCurveTo(t,r,t+s,r),e.closePath()}Ls.eleTextBiggerThanMin=function(e,t){if(!t){var r=e.cy().zoom(),a=this.getPixelRatio(),i=Math.ceil(Rn(r*a));t=Math.pow(2,i)}return!(e.pstyle("font-size").pfValue*t<e.pstyle("min-zoomed-font-size").pfValue)},Ls.drawElementText=function(e,t,r,a,i){var n=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],s=this;if(null==a){if(n&&!s.eleTextBiggerThanMin(t))return}else if(!1===a)return;if(t.isNode()){var o=t.pstyle("label");if(!o||!o.value)return;var u=s.getLabelJustification(t);e.textAlign=u,e.textBaseline="bottom"}else{var h=t.element()._private.rscratch.badLine,f=t.pstyle("label"),p=t.pstyle("source-label"),x=t.pstyle("target-label");if(h||(!f||!f.value)&&(!p||!p.value)&&(!x||!x.value))return;e.textAlign="center",e.textBaseline="bottom"}var _,k=!r;r&&e.translate(-(_=r).x1,-_.y1),null==i?(s.drawText(e,t,null,k,n),t.isEdge()&&(s.drawText(e,t,"source",k,n),s.drawText(e,t,"target",k,n))):s.drawText(e,t,i,k,n),r&&e.translate(_.x1,_.y1)},Ls.getFontCache=function(e){var t;this.fontCaches=this.fontCaches||[];for(var r=0;r<this.fontCaches.length;r++)if((t=this.fontCaches[r]).context===e)return t;return this.fontCaches.push(t={context:e}),t},Ls.setupTextStyle=function(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=t.pstyle("font-style").strValue,i=t.pstyle("font-size").pfValue+"px",n=t.pstyle("font-family").strValue,s=t.pstyle("font-weight").strValue,o=r?t.effectiveOpacity()*t.pstyle("text-opacity").value:1,u=t.pstyle("text-outline-opacity").value*o,h=t.pstyle("color").value,f=t.pstyle("text-outline-color").value;e.font=a+" "+s+" "+i+" "+n,e.lineJoin="round",this.colorFillStyle(e,h[0],h[1],h[2],o),this.colorStrokeStyle(e,f[0],f[1],f[2],u)},Ls.getTextAngle=function(e,t){var r,i=e._private.rscratch,s=e.pstyle((t?t+"-":"")+"text-rotation");if("autorotate"===s.strValue){var o=Jt(i,"labelAngle",t);r=e.isEdge()?o:0}else r="none"===s.strValue?0:s.pfValue;return r},Ls.drawText=function(e,t,r){var a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],s=t._private.rscratch,o=i?t.effectiveOpacity():1;if(!i||0!==o&&0!==t.pstyle("text-opacity").value){"main"===r&&(r=null);var f,p,u=Jt(s,"labelX",r),h=Jt(s,"labelY",r),x=this.getLabelText(t,r);if(null!=x&&""!==x&&!isNaN(u)&&!isNaN(h)){this.setupTextStyle(e,t,i);var ie,k=r?r+"-":"",_=Jt(s,"labelWidth",r),U=Jt(s,"labelHeight",r),O=t.pstyle(k+"text-margin-x").pfValue,K=t.pstyle(k+"text-margin-y").pfValue,Y=t.isEdge(),j=t.pstyle("text-halign").value,yt=t.pstyle("text-valign").value;switch(Y&&(j="center",yt="center"),u+=O,h+=K,0!==(ie=a?this.getTextAngle(t,r):0)&&(e.translate(f=u,p=h),e.rotate(ie),u=0,h=0),yt){case"top":break;case"center":h+=U/2;break;case"bottom":h+=U}var se=t.pstyle("text-background-opacity").value,Ht=t.pstyle("text-border-opacity").value,he=t.pstyle("text-border-width").pfValue,me=t.pstyle("text-background-padding").pfValue,Te=t.pstyle("text-background-shape").strValue,Be="round-rectangle"===Te||"roundrectangle"===Te,Me="circle"===Te;if(se>0||he>0&&Ht>0){var tr=e.fillStyle,ur=e.strokeStyle,fr=e.lineWidth,rr=t.pstyle("text-background-color").value,Cr=t.pstyle("text-border-color").value,Ur=t.pstyle("text-border-style").value,qr=se>0,Dr=he>0&&Ht>0,Wr=u-me;switch(j){case"left":Wr-=_;break;case"center":Wr-=_/2}var ga=h-U-me,Ea=_+2*me,pa=U+2*me;if(qr&&(e.fillStyle="rgba(".concat(rr[0],",").concat(rr[1],",").concat(rr[2],",").concat(se*o,")")),Dr&&(e.strokeStyle="rgba(".concat(Cr[0],",").concat(Cr[1],",").concat(Cr[2],",").concat(Ht*o,")"),e.lineWidth=he,e.setLineDash))switch(Ur){case"dotted":e.setLineDash([1,1]);break;case"dashed":e.setLineDash([4,2]);break;case"double":e.lineWidth=he/4,e.setLineDash([]);break;default:e.setLineDash([])}if(Be?(e.beginPath(),l0(e,Wr,ga,Ea,pa,2)):Me?(e.beginPath(),function Np(e,t,r,a,i){var s=Math.min(a,i)/2,o=t+a/2,u=r+i/2;e.beginPath(),e.arc(o,u,s,0,2*Math.PI),e.closePath()}(e,Wr,ga,Ea,pa)):(e.beginPath(),e.rect(Wr,ga,Ea,pa)),qr&&e.fill(),Dr&&e.stroke(),Dr&&"double"===Ur){var Aa=he/2;e.beginPath(),Be?l0(e,Wr+Aa,ga+Aa,Ea-2*Aa,pa-2*Aa,2):e.rect(Wr+Aa,ga+Aa,Ea-2*Aa,pa-2*Aa),e.stroke()}e.fillStyle=tr,e.strokeStyle=ur,e.lineWidth=fr,e.setLineDash&&e.setLineDash([])}var Ra=2*t.pstyle("text-outline-width").pfValue;if(Ra>0&&(e.lineWidth=Ra),"wrap"===t.pstyle("text-wrap").value){var Za=Jt(s,"labelWrapCachedLines",r),Ta=Jt(s,"labelLineHeight",r),Kr=_/2,$r=this.getLabelJustification(t);switch("auto"===$r||("left"===j?"left"===$r?u+=-_:"center"===$r&&(u+=-Kr):"center"===j?"left"===$r?u+=-Kr:"right"===$r&&(u+=Kr):"right"===j&&("center"===$r?u+=Kr:"right"===$r&&(u+=_))),yt){case"top":case"center":case"bottom":h-=(Za.length-1)*Ta}for(var Zr=0;Zr<Za.length;Zr++)Ra>0&&e.strokeText(Za[Zr],u,h),e.fillText(Za[Zr],u,h),h+=Ta}else Ra>0&&e.strokeText(x,u,h),e.fillText(x,u,h);0!==ie&&(e.rotate(-ie),e.translate(-f,-p))}}};var _s={drawNode:function(e,t,r){var o,u,a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],n=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],s=this,h=t._private,f=h.rscratch,p=t.position();if(X(p.x)&&X(p.y)&&(!n||t.visible())){var _,K,x=n?t.effectiveOpacity():1,k=s.usePaths(),U=!1,O=t.padding();o=t.width()+2*O,u=t.height()+2*O,r&&e.translate(-(K=r).x1,-K.y1);for(var j=t.pstyle("background-image").value,yt=new Array(j.length),ie=new Array(j.length),se=0,Ht=0;Ht<j.length;Ht++){var he=j[Ht];if(yt[Ht]=null!=he&&"none"!==he){var Te=t.cy().style().getIndexedStyle(t,"background-image-crossorigin","value",Ht);se++,ie[Ht]=s.getCachedImage(he,Te,function(){h.backgroundTimestamp=Date.now(),t.emitAndNotify("background")})}}var Be=t.pstyle("background-blacken").value,Me=t.pstyle("border-width").pfValue,Oe=t.pstyle("background-opacity").value*x,tr=t.pstyle("border-color").value,ur=t.pstyle("border-style").value,fr=t.pstyle("border-join").value,rr=t.pstyle("border-cap").value,Cr=t.pstyle("border-position").value,Ur=t.pstyle("border-dash-pattern").pfValue,qr=t.pstyle("border-dash-offset").pfValue,Dr=t.pstyle("border-opacity").value*x,Wr=t.pstyle("outline-width").pfValue,ga=t.pstyle("outline-color").value,Ea=t.pstyle("outline-style").value,pa=t.pstyle("outline-opacity").value*x,Aa=t.pstyle("outline-offset").value,Ra=t.pstyle("corner-radius").value;"auto"!==Ra&&(Ra=t.pstyle("corner-radius").pfValue);var Za=function(){s.eleFillStyle(e,t,arguments.length>0&&void 0!==arguments[0]?arguments[0]:Oe)},Ta=function(){s.colorStrokeStyle(e,tr[0],tr[1],tr[2],arguments.length>0&&void 0!==arguments[0]?arguments[0]:Dr)},Kr=function(){s.colorStrokeStyle(e,ga[0],ga[1],ga[2],arguments.length>0&&void 0!==arguments[0]?arguments[0]:pa)},$r=function(ai,va,ge,Yr){var ri,na=s.nodePathCache=s.nodePathCache||[],ca=Pa("polygon"===ge?ge+","+Yr.join(","):ge,""+va,""+ai,""+Ra),xa=na[ca],Da=!1;return null!=xa?(Da=!0,f.pathCache=ri=xa):(ri=new Path2D,na[ca]=f.pathCache=ri),{path:ri,cacheHit:Da}},Zr=t.pstyle("shape").strValue,ma=t.pstyle("shape-polygon-points").pfValue;if(k){e.translate(p.x,p.y);var Ga=$r(o,u,Zr,ma);_=Ga.path,U=Ga.cacheHit}var li=function(){if(!U){var ai=p;k&&(ai={x:0,y:0}),s.nodeShapes[s.getNodeShape(t)].draw(_||e,ai.x,ai.y,o,u,Ra,f)}k?e.fill(_):e.fill()},Ii=function(){for(var ai=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,va=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],ge=h.backgrounding,Yr=0,na=0;na<ie.length;na++){var ca=t.cy().style().getIndexedStyle(t,"background-image-containment","value",na);va&&"over"===ca||!va&&"inside"===ca?Yr++:yt[na]&&ie[na].complete&&!ie[na].error&&(Yr++,s.drawInscribedImage(e,ie[na],t,na,ai))}h.backgrounding=Yr!==se,ge!==h.backgrounding&&t.updateStyle(!1)},Ci=function(){var ai=arguments.length>0&&void 0!==arguments[0]&&arguments[0],va=arguments.length>1&&void 0!==arguments[1]?arguments[1]:x;s.hasPie(t)&&(s.drawPie(e,t,va),ai&&(k||s.nodeShapes[s.getNodeShape(t)].draw(e,p.x,p.y,o,u,Ra,f)))},xi=function(){var ai=arguments.length>0&&void 0!==arguments[0]&&arguments[0],va=arguments.length>1&&void 0!==arguments[1]?arguments[1]:x;s.hasStripe(t)&&(e.save(),k?e.clip(f.pathCache):(s.nodeShapes[s.getNodeShape(t)].draw(e,p.x,p.y,o,u,Ra,f),e.clip()),s.drawStripe(e,t,va),e.restore(),ai&&(k||s.nodeShapes[s.getNodeShape(t)].draw(e,p.x,p.y,o,u,Ra,f)))},gi=function(){var ge=Be>0?0:255;0!==Be&&(s.colorFillStyle(e,ge,ge,ge,(Be>0?Be:-Be)*(arguments.length>0&&void 0!==arguments[0]?arguments[0]:x)),k?e.fill(_):e.fill())},Qa=function(){if(Me>0){if(e.lineWidth=Me,e.lineCap=rr,e.lineJoin=fr,e.setLineDash)switch(ur){case"dotted":e.setLineDash([1,1]);break;case"dashed":e.setLineDash(Ur),e.lineDashOffset=qr;break;case"solid":case"double":e.setLineDash([])}if("center"!==Cr){if(e.save(),e.lineWidth*=2,"inside"===Cr)k?e.clip(_):e.clip();else{var ai=new Path2D;ai.rect(-o/2-Me,-u/2-Me,o+2*Me,u+2*Me),ai.addPath(_),e.clip(ai,"evenodd")}k?e.stroke(_):e.stroke(),e.restore()}else k?e.stroke(_):e.stroke();if("double"===ur){e.lineWidth=Me/3;var va=e.globalCompositeOperation;e.globalCompositeOperation="destination-out",k?e.stroke(_):e.stroke(),e.globalCompositeOperation=va}e.setLineDash&&e.setLineDash([])}},ci=function(){if(Wr>0){if(e.lineWidth=Wr,e.lineCap="butt",e.setLineDash)switch(Ea){case"dotted":e.setLineDash([1,1]);break;case"dashed":e.setLineDash([4,2]);break;case"solid":case"double":e.setLineDash([])}var ai=p;k&&(ai={x:0,y:0});var va=s.getNodeShape(t),ge=Me;"inside"===Cr&&(ge=0),"outside"===Cr&&(ge*=2);var Da,Yr=(o+ge+(Wr+Aa))/o,na=(u+ge+(Wr+Aa))/u,ca=o*Yr,xa=u*na,ri=s.nodeShapes[va].points;if(k&&(Da=$r(ca,xa,va,ri).path),"ellipse"===va)s.drawEllipsePath(Da||e,ai.x,ai.y,ca,xa);else if(["round-diamond","round-heptagon","round-hexagon","round-octagon","round-pentagon","round-polygon","round-triangle","round-tag"].includes(va)){var ii=0,pi=0,Ai=0;"round-diamond"===va?ii=1.4*(ge+Aa+Wr):"round-heptagon"===va?(ii=1.075*(ge+Aa+Wr),Ai=-(ge/2+Aa+Wr)/35):"round-hexagon"===va?ii=1.12*(ge+Aa+Wr):"round-pentagon"===va?(ii=1.13*(ge+Aa+Wr),Ai=-(ge/2+Aa+Wr)/15):"round-tag"===va?(ii=1.12*(ge+Aa+Wr),pi=.07*(ge/2+Wr+Aa)):"round-triangle"===va&&(ii=(ge+Aa+Wr)*(Math.PI/2),Ai=-(ge+Aa/2+Wr)/Math.PI),0!==ii&&(ca=o*(Yr=(o+ii)/o),["round-hexagon","round-tag"].includes(va)||(xa=u*(na=(u+ii)/u)));for(var Ti=ca/2,oi=xa/2,Li=(Ra="auto"===Ra?os(ca,xa):Ra)+(ge+Wr+Aa)/2,Di=new Array(ri.length/2),yn=new Array(ri.length/2),on=0;on<ri.length/2;on++)Di[on]={x:ai.x+pi+Ti*ri[2*on],y:ai.y+Ai+oi*ri[2*on+1]};var Kn,fn,Cn,mn,Dn=Di.length;for(fn=Di[Dn-1],Kn=0;Kn<Dn;Kn++)yn[Kn]=Uc(fn,Cn=Di[Kn%Dn],mn=Di[(Kn+1)%Dn],Li),fn=Cn,Cn=mn;s.drawRoundPolygonPath(Da||e,ai.x+pi,ai.y+Ai,o*Yr,u*na,ri,yn)}else["roundrectangle","round-rectangle"].includes(va)?(Ra="auto"===Ra?Ui(ca,xa):Ra,s.drawRoundRectanglePath(Da||e,ai.x,ai.y,ca,xa,Ra+(ge+Wr+Aa)/2)):["cutrectangle","cut-rectangle"].includes(va)?s.drawCutRectanglePath(Da||e,ai.x,ai.y,ca,xa,null,(Ra="auto"===Ra?8:Ra)+(ge+Wr+Aa)/4):["bottomroundrectangle","bottom-round-rectangle"].includes(va)?(Ra="auto"===Ra?Ui(ca,xa):Ra,s.drawBottomRoundRectanglePath(Da||e,ai.x,ai.y,ca,xa,Ra+(ge+Wr+Aa)/2)):"barrel"===va?s.drawBarrelPath(Da||e,ai.x,ai.y,ca,xa):va.startsWith("polygon")||["rhomboid","right-rhomboid","round-tag","tag","vee"].includes(va)?(ri=ka(Ba(ri,(ge+Wr+Aa)/o)),s.drawPolygonPath(Da||e,ai.x,ai.y,o,u,ri)):(ri=ka(Ba(ri,-(ge+Wr+Aa)/o)),s.drawPolygonPath(Da||e,ai.x,ai.y,o,u,ri));if(k?e.stroke(Da):e.stroke(),"double"===Ea){e.lineWidth=ge/3;var us=e.globalCompositeOperation;e.globalCompositeOperation="destination-out",k?e.stroke(Da):e.stroke(),e.globalCompositeOperation=us}e.setLineDash&&e.setLineDash([])}};if("yes"===t.pstyle("ghost").value){var Mi=t.pstyle("ghost-offset-x").pfValue,Yi=t.pstyle("ghost-offset-y").pfValue,Hi=t.pstyle("ghost-opacity").value,Gi=Hi*x;e.translate(Mi,Yi),Kr(),ci(),Za(Hi*Oe),li(),Ii(Gi,!0),Ta(Hi*Dr),Qa(),Ci(0!==Be||0!==Me),xi(0!==Be||0!==Me),Ii(Gi,!1),gi(Gi),e.translate(-Mi,-Yi)}k&&e.translate(-p.x,-p.y),i&&s.drawNodeUnderlay(e,t,p,o,u),k&&e.translate(p.x,p.y),Kr(),ci(),Za(),li(),Ii(x,!0),Ta(),Qa(),Ci(0!==Be||0!==Me),xi(0!==Be||0!==Me),Ii(x,!1),gi(),k&&e.translate(-p.x,-p.y),s.drawElementText(e,t,null,a),i&&s.drawNodeOverlay(e,t,p,o,u),r&&e.translate(K.x1,K.y1)}}},c0=function(t){if(!["overlay","underlay"].includes(t))throw new Error("Invalid state");return function(r,a,i,n,s){if(a.visible()){var u=a.pstyle("".concat(t,"-padding")).pfValue,h=a.pstyle("".concat(t,"-opacity")).value,f=a.pstyle("".concat(t,"-color")).value,p=a.pstyle("".concat(t,"-shape")).value,x=a.pstyle("".concat(t,"-corner-radius")).value;if(h>0){if(i=i||a.position(),null==n||null==s){var k=a.padding();n=a.width()+2*k,s=a.height()+2*k}this.colorFillStyle(r,f[0],f[1],f[2],h),this.nodeShapes[p].draw(r,i.x,i.y,n+2*u,s+2*u,x),r.fill()}}}};_s.drawNodeOverlay=c0("overlay"),_s.drawNodeUnderlay=c0("underlay"),_s.hasPie=function(e){return(e=e[0])._private.hasPie},_s.hasStripe=function(e){return(e=e[0])._private.hasStripe},_s.drawPie=function(e,t,r,a){t=t[0],a=a||t.position();var k,i=t.cy().style(),n=t.pstyle("pie-size"),s=t.pstyle("pie-hole"),o=t.pstyle("pie-start-angle").pfValue,u=a.x,h=a.y,f=t.width(),p=t.height(),x=Math.min(f,p)/2,_=0;if(this.usePaths()&&(u=0,h=0),"%"===n.units?x*=n.pfValue:void 0!==n.pfValue&&(x=n.pfValue/2),"%"===s.units?k=x*s.pfValue:void 0!==s.pfValue&&(k=s.pfValue/2),!(k>=x))for(var O=1;O<=i.pieBackgroundN;O++){var K=t.pstyle("pie-"+O+"-background-size").value,Y=t.pstyle("pie-"+O+"-background-color").value,j=t.pstyle("pie-"+O+"-background-opacity").value*r,yt=K/100;yt+_>1&&(yt=1-_);var ie=1.5*Math.PI+2*Math.PI*_,Ht=(ie+=o)+2*Math.PI*yt;0===K||_>=1||_+yt>1||(0===k?(e.beginPath(),e.moveTo(u,h),e.arc(u,h,x,ie,Ht),e.closePath()):(e.beginPath(),e.arc(u,h,x,ie,Ht),e.arc(u,h,k,Ht,ie,!0),e.closePath()),this.colorFillStyle(e,Y[0],Y[1],Y[2],j),e.fill(),_+=yt)}},_s.drawStripe=function(e,t,r,a){t=t[0],a=a||t.position();var i=t.cy().style(),n=a.x,s=a.y,o=t.width(),u=t.height(),h=0,f=this.usePaths();e.save();var p=t.pstyle("stripe-direction").value,x=t.pstyle("stripe-size");switch(p){case"vertical":break;case"righward":e.rotate(-Math.PI/2)}var k=o,_=u;"%"===x.units?(k*=x.pfValue,_*=x.pfValue):void 0!==x.pfValue&&(k=x.pfValue,_=x.pfValue),f&&(n=0,s=0),s-=k/2,n-=_/2;for(var U=1;U<=i.stripeBackgroundN;U++){var O=t.pstyle("stripe-"+U+"-background-size").value,K=t.pstyle("stripe-"+U+"-background-color").value,Y=t.pstyle("stripe-"+U+"-background-opacity").value*r,j=O/100;j+h>1&&(j=1-h),!(0===O||h>=1||h+j>1)&&(e.beginPath(),e.rect(n,s+_*h,k,_*j),e.closePath(),this.colorFillStyle(e,K[0],K[1],K[2],Y),e.fill(),h+=j)}e.restore()};var _o,Nn={};function h0(e,t,r){var a=e.createShader(t);if(e.shaderSource(a,r),e.compileShader(a),!e.getShaderParameter(a,e.COMPILE_STATUS))throw new Error(e.getShaderInfoLog(a));return a}function zp(e,t,r){void 0===r&&(r=t);var a=e.makeOffscreenCanvas(t,r),i=a.context=a.getContext("2d");return a.clear=function(){return i.clearRect(0,0,a.width,a.height)},a.clear(),a}function jc(e){var t=e.pixelRatio,r=e.cy.zoom(),a=e.cy.pan();return{zoom:r*t,pan:{x:a.x*t,y:a.y*t}}}function $p(e){return"solid"===e.pstyle("background-fill").value&&"none"===e.pstyle("background-image").strValue&&(0===e.pstyle("border-width").value||0===e.pstyle("border-opacity").value||"solid"===e.pstyle("border-style").value)}function Yp(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function Bs(e,t,r){var a=e[0]/255,i=e[1]/255,n=e[2]/255,s=t,o=r||new Array(4);return o[0]=a*s,o[1]=i*s,o[2]=n*s,o[3]=s,o}function Qs(e,t){var r=t||new Array(4);return r[0]=(255&e)/255,r[1]=(e>>8&255)/255,r[2]=(e>>16&255)/255,r[3]=(e>>24&255)/255,r}function Hp(e){return e[0]+(e[1]<<8)+(e[2]<<16)+(e[3]<<24)}function u0(e,t){switch(t){case"float":return[1,e.FLOAT,4];case"vec2":return[2,e.FLOAT,4];case"vec3":return[3,e.FLOAT,4];case"vec4":return[4,e.FLOAT,4];case"int":return[1,e.INT,4];case"ivec2":return[2,e.INT,4]}}function d0(e,t,r){switch(t){case e.FLOAT:return new Float32Array(r);case e.INT:return new Int32Array(r)}}function qp(e,t,r,a,i,n){switch(t){case e.FLOAT:return new Float32Array(r.buffer,n*a,i);case e.INT:return new Int32Array(r.buffer,n*a,i)}}function ss(e,t,r,a){var n=Rt(u0(e,r),3),s=n[0],o=n[1],u=n[2],h=d0(e,o,t*s),f=s*u,p=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,p),e.bufferData(e.ARRAY_BUFFER,t*f,e.DYNAMIC_DRAW),e.enableVertexAttribArray(a),o===e.FLOAT?e.vertexAttribPointer(a,s,o,!1,f,0):o===e.INT&&e.vertexAttribIPointer(a,s,o,f,0),e.vertexAttribDivisor(a,1),e.bindBuffer(e.ARRAY_BUFFER,null);for(var x=new Array(t),k=0;k<t;k++)x[k]=qp(e,o,h,f,s,k);return p.dataArray=h,p.stride=f,p.size=s,p.getView=function(_){return x[_]},p.setPoint=function(_,U,O){var K=x[_];K[0]=U,K[1]=O},p.bufferSubData=function(_){e.bindBuffer(e.ARRAY_BUFFER,p),_?e.bufferSubData(e.ARRAY_BUFFER,0,h,0,_*s):e.bufferSubData(e.ARRAY_BUFFER,0,h)},p}Nn.getPixelRatio=function(){var e=this.data.contexts[0];return null!=this.forcedPixelRatio?this.forcedPixelRatio:(this.cy.window().devicePixelRatio||1)/(e.backingStorePixelRatio||e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1)},Nn.paintCache=function(e){for(var a,t=this.paintCaches=this.paintCaches||[],r=!0,i=0;i<t.length;i++)if((a=t[i]).context===e){r=!1;break}return r&&t.push(a={context:e}),a},Nn.createGradientStyleFor=function(e,t,r,a,i){var n,s=this.usePaths(),o=r.pstyle(t+"-gradient-stop-colors").value,u=r.pstyle(t+"-gradient-stop-positions").pfValue;if("radial-gradient"===a)if(r.isEdge()){var h=r.sourceEndpoint(),f=r.targetEndpoint(),p=r.midpoint(),x=Xi(h,p),k=Xi(f,p);n=e.createRadialGradient(p.x,p.y,0,p.x,p.y,Math.max(x,k))}else{var _=s?{x:0,y:0}:r.position(),U=r.paddedWidth(),O=r.paddedHeight();n=e.createRadialGradient(_.x,_.y,0,_.x,_.y,Math.max(U,O))}else if(r.isEdge()){var K=r.sourceEndpoint(),Y=r.targetEndpoint();n=e.createLinearGradient(K.x,K.y,Y.x,Y.y)}else{var j=s?{x:0,y:0}:r.position(),se=r.paddedWidth()/2,Ht=r.paddedHeight()/2;switch(r.pstyle("background-gradient-direction").value){case"to-bottom":n=e.createLinearGradient(j.x,j.y-Ht,j.x,j.y+Ht);break;case"to-top":n=e.createLinearGradient(j.x,j.y+Ht,j.x,j.y-Ht);break;case"to-left":n=e.createLinearGradient(j.x+se,j.y,j.x-se,j.y);break;case"to-right":n=e.createLinearGradient(j.x-se,j.y,j.x+se,j.y);break;case"to-bottom-right":case"to-right-bottom":n=e.createLinearGradient(j.x-se,j.y-Ht,j.x+se,j.y+Ht);break;case"to-top-right":case"to-right-top":n=e.createLinearGradient(j.x-se,j.y+Ht,j.x+se,j.y-Ht);break;case"to-bottom-left":case"to-left-bottom":n=e.createLinearGradient(j.x+se,j.y-Ht,j.x-se,j.y+Ht);break;case"to-top-left":case"to-left-top":n=e.createLinearGradient(j.x+se,j.y+Ht,j.x-se,j.y-Ht)}}if(!n)return null;for(var me=u.length===o.length,Te=o.length,Be=0;Be<Te;Be++)n.addColorStop(me?u[Be]:Be/(Te-1),"rgba("+o[Be][0]+","+o[Be][1]+","+o[Be][2]+","+i+")");return n},Nn.gradientFillStyle=function(e,t,r,a){var i=this.createGradientStyleFor(e,"background",t,r,a);if(!i)return null;e.fillStyle=i},Nn.colorFillStyle=function(e,t,r,a,i){e.fillStyle="rgba("+t+","+r+","+a+","+i+")"},Nn.eleFillStyle=function(e,t,r){var a=t.pstyle("background-fill").value;if("linear-gradient"===a||"radial-gradient"===a)this.gradientFillStyle(e,t,a,r);else{var i=t.pstyle("background-color").value;this.colorFillStyle(e,i[0],i[1],i[2],r)}},Nn.gradientStrokeStyle=function(e,t,r,a){var i=this.createGradientStyleFor(e,"line",t,r,a);if(!i)return null;e.strokeStyle=i},Nn.colorStrokeStyle=function(e,t,r,a,i){e.strokeStyle="rgba("+t+","+r+","+a+","+i+")"},Nn.eleStrokeStyle=function(e,t,r){var a=t.pstyle("line-fill").value;if("linear-gradient"===a||"radial-gradient"===a)this.gradientStrokeStyle(e,t,a,r);else{var i=t.pstyle("line-color").value;this.colorStrokeStyle(e,i[0],i[1],i[2],r)}},Nn.matchCanvasSize=function(e){var t=this,r=t.data,a=t.findContainerClientCoords(),i=a[2],n=a[3],s=t.getPixelRatio();(e===t.data.bufferCanvases[t.MOTIONBLUR_BUFFER_NODE]||e===t.data.bufferCanvases[t.MOTIONBLUR_BUFFER_DRAG])&&(s=t.motionBlurPxRatio);var f,u=i*s,h=n*s;if(u!==t.canvasWidth||h!==t.canvasHeight){t.fontCaches=null;var p=r.canvasContainer;p.style.width=i+"px",p.style.height=n+"px";for(var x=0;x<t.CANVAS_LAYERS;x++)(f=r.canvases[x]).width=u,f.height=h,f.style.width=i+"px",f.style.height=n+"px";for(x=0;x<t.BUFFER_COUNT;x++)(f=r.bufferCanvases[x]).width=u,f.height=h,f.style.width=i+"px",f.style.height=n+"px";t.textureMult=1,s<=1&&(f=r.bufferCanvases[t.TEXTURE_BUFFER],t.textureMult=2,f.width=u*t.textureMult,f.height=h*t.textureMult),t.canvasWidth=u,t.canvasHeight=h,t.pixelRatio=s}},Nn.renderTo=function(e,t,r,a){this.render({forcedContext:e,forcedZoom:t,forcedPan:r,drawAllLayers:!0,forcedPxRatio:a})},Nn.clearCanvas=function(){var e=this,t=e.data;function r(a){a.clearRect(0,0,e.canvasWidth,e.canvasHeight)}r(t.contexts[e.NODE]),r(t.contexts[e.DRAG])},Nn.render=function(e){var t=this;e=e||Ri();var r=t.cy,a=e.forcedContext,i=e.drawAllLayers,n=e.drawOnlyNodeLayer,s=e.forcedZoom,o=e.forcedPan,u=void 0===e.forcedPxRatio?this.getPixelRatio():e.forcedPxRatio,h=t.data,f=h.canvasNeedsRedraw,p=t.textureOnViewport&&!a&&(t.pinching||t.hoverData.dragging||t.swipePanning||t.data.wheelZooming),x=void 0!==e.motionBlur?e.motionBlur:t.motionBlur,k=t.motionBlurPxRatio,_=r.hasCompoundNodes(),U=t.hoverData.draggingEles,K=x=x&&!a&&t.motionBlurEnabled&&!(t.hoverData.selecting||t.touchData.selecting);a||(t.prevPxRatio!==u&&(t.invalidateContainerClientCoordsCache(),t.matchCanvasSize(t.container),t.redrawHint("eles",!0),t.redrawHint("drag",!0)),t.prevPxRatio=u),!a&&t.motionBlurTimeout&&clearTimeout(t.motionBlurTimeout),x&&(null==t.mbFrames&&(t.mbFrames=0),t.mbFrames++,t.mbFrames<3&&(K=!1),t.mbFrames>t.minMbLowQualFrames&&(t.motionBlurPxRatio=t.mbPxRBlurry)),t.clearingMotionBlur&&(t.motionBlurPxRatio=1),t.textureDrawLastFrame&&!p&&(f[t.NODE]=!0,f[t.SELECT_BOX]=!0);var Y=r.style(),j=r.zoom(),yt=void 0!==s?s:j,ie=r.pan(),se={x:ie.x,y:ie.y},Ht={zoom:j,pan:{x:ie.x,y:ie.y}},he=t.prevViewport;!(void 0===he||Ht.zoom!==he.zoom||Ht.pan.x!==he.pan.x||Ht.pan.y!==he.pan.y)&&!(U&&!_)&&(t.motionBlurPxRatio=1),o&&(se=o),yt*=u,se.x*=u,se.y*=u;var Te=t.getCachedZSortedEles();function Be(Ta,Kr,$r,Zr,ma){var Ga=Ta.globalCompositeOperation;Ta.globalCompositeOperation="destination-out",t.colorFillStyle(Ta,255,255,255,t.motionBlurTransparency),Ta.fillRect(Kr,$r,Zr,ma),Ta.globalCompositeOperation=Ga}function Me(Ta,Kr){var $r,Zr,ma,Ga;t.clearingMotionBlur||Ta!==h.bufferContexts[t.MOTIONBLUR_BUFFER_NODE]&&Ta!==h.bufferContexts[t.MOTIONBLUR_BUFFER_DRAG]?($r=se,Zr=yt,ma=t.canvasWidth,Ga=t.canvasHeight):($r={x:ie.x*k,y:ie.y*k},Zr=j*k,ma=t.canvasWidth*k,Ga=t.canvasHeight*k),Ta.setTransform(1,0,0,1,0,0),"motionBlur"===Kr?Be(Ta,0,0,ma,Ga):!a&&(void 0===Kr||Kr)&&Ta.clearRect(0,0,ma,Ga),i||(Ta.translate($r.x,$r.y),Ta.scale(Zr,Zr)),o&&Ta.translate(o.x,o.y),s&&Ta.scale(s,s)}if(p||(t.textureDrawLastFrame=!1),p){if(t.textureDrawLastFrame=!0,!t.textureCache){t.textureCache={},t.textureCache.bb=r.mutableElements().boundingBox(),t.textureCache.texture=t.data.bufferCanvases[t.TEXTURE_BUFFER];var Oe=t.data.bufferContexts[t.TEXTURE_BUFFER];Oe.setTransform(1,0,0,1,0,0),Oe.clearRect(0,0,t.canvasWidth*t.textureMult,t.canvasHeight*t.textureMult),t.render({forcedContext:Oe,drawOnlyNodeLayer:!0,forcedPxRatio:u*t.textureMult}),(Ht=t.textureCache.viewport={zoom:r.zoom(),pan:r.pan(),width:t.canvasWidth,height:t.canvasHeight}).mpan={x:(0-Ht.pan.x)/Ht.zoom,y:(0-Ht.pan.y)/Ht.zoom}}f[t.DRAG]=!1,f[t.NODE]=!1;var ur=t.textureCache.texture;Ht=t.textureCache.viewport,(tr=h.contexts[t.NODE]).setTransform(1,0,0,1,0,0),x?Be(tr,0,0,Ht.width,Ht.height):tr.clearRect(0,0,Ht.width,Ht.height);var fr=Y.core("outside-texture-bg-color").value,rr=Y.core("outside-texture-bg-opacity").value;t.colorFillStyle(tr,fr[0],fr[1],fr[2],rr),tr.fillRect(0,0,Ht.width,Ht.height),j=r.zoom(),Me(tr,!1),tr.clearRect(Ht.mpan.x,Ht.mpan.y,Ht.width/Ht.zoom/u,Ht.height/Ht.zoom/u),tr.drawImage(ur,Ht.mpan.x,Ht.mpan.y,Ht.width/Ht.zoom/u,Ht.height/Ht.zoom/u)}else t.textureOnViewport&&!a&&(t.textureCache=null);var tr,Cr=r.extent(),Ur=t.pinching||t.hoverData.dragging||t.swipePanning||t.data.wheelZooming||t.hoverData.draggingEles||t.cy.animated(),qr=t.hideEdgesOnViewport&&Ur,Dr=[];if(Dr[t.NODE]=!f[t.NODE]&&x&&!t.clearedForMotionBlur[t.NODE]||t.clearingMotionBlur,Dr[t.NODE]&&(t.clearedForMotionBlur[t.NODE]=!0),Dr[t.DRAG]=!f[t.DRAG]&&x&&!t.clearedForMotionBlur[t.DRAG]||t.clearingMotionBlur,Dr[t.DRAG]&&(t.clearedForMotionBlur[t.DRAG]=!0),f[t.NODE]||i||n||Dr[t.NODE]){var Wr=x&&!Dr[t.NODE]&&1!==k;Me(tr=a||(Wr?t.data.bufferContexts[t.MOTIONBLUR_BUFFER_NODE]:h.contexts[t.NODE]),x&&!Wr?"motionBlur":void 0),qr?t.drawCachedNodes(tr,Te.nondrag,u,Cr):t.drawLayeredElements(tr,Te.nondrag,u,Cr),t.debug&&t.drawDebugPoints(tr,Te.nondrag),!i&&!x&&(f[t.NODE]=!1)}!n&&(f[t.DRAG]||i||Dr[t.DRAG])&&(Wr=x&&!Dr[t.DRAG]&&1!==k,Me(tr=a||(Wr?t.data.bufferContexts[t.MOTIONBLUR_BUFFER_DRAG]:h.contexts[t.DRAG]),x&&!Wr?"motionBlur":void 0),qr?t.drawCachedNodes(tr,Te.drag,u,Cr):t.drawCachedElements(tr,Te.drag,u,Cr),t.debug&&t.drawDebugPoints(tr,Te.drag),!i&&!x&&(f[t.DRAG]=!1));if(this.drawSelectionRectangle(e,Me),x&&1!==k){var Aa=h.contexts[t.DRAG],Ra=t.data.bufferCanvases[t.MOTIONBLUR_BUFFER_DRAG],Za=function(Kr,$r,Zr){Kr.setTransform(1,0,0,1,0,0),Zr||!K?Kr.clearRect(0,0,t.canvasWidth,t.canvasHeight):Be(Kr,0,0,t.canvasWidth,t.canvasHeight),Kr.drawImage($r,0,0,t.canvasWidth*k,t.canvasHeight*k,0,0,t.canvasWidth,t.canvasHeight)};(f[t.NODE]||Dr[t.NODE])&&(Za(h.contexts[t.NODE],t.data.bufferCanvases[t.MOTIONBLUR_BUFFER_NODE],Dr[t.NODE]),f[t.NODE]=!1),(f[t.DRAG]||Dr[t.DRAG])&&(Za(Aa,Ra,Dr[t.DRAG]),f[t.DRAG]=!1)}t.prevViewport=Ht,t.clearingMotionBlur&&(t.clearingMotionBlur=!1,t.motionBlurCleared=!0,t.motionBlur=!0),x&&(t.motionBlurTimeout=setTimeout(function(){t.motionBlurTimeout=null,t.clearedForMotionBlur[t.NODE]=!1,t.clearedForMotionBlur[t.DRAG]=!1,t.motionBlur=!1,t.clearingMotionBlur=!p,t.mbFrames=0,f[t.NODE]=!0,f[t.DRAG]=!0,t.redraw()},100)),a||r.emit("render")},Nn.drawSelectionRectangle=function(e,t){var r=this,i=r.data,n=r.cy.style(),o=e.drawAllLayers,u=i.canvasNeedsRedraw;if(r.showFps||!e.drawOnlyNodeLayer&&u[r.SELECT_BOX]&&!o){var f=e.forcedContext||i.contexts[r.SELECT_BOX];if(t(f),1==r.selection[4]&&(r.hoverData.selecting||r.touchData.selecting)){var p=r.cy.zoom(),x=n.core("selection-box-border-width").value/p;f.lineWidth=x,f.fillStyle="rgba("+n.core("selection-box-color").value[0]+","+n.core("selection-box-color").value[1]+","+n.core("selection-box-color").value[2]+","+n.core("selection-box-opacity").value+")",f.fillRect(r.selection[0],r.selection[1],r.selection[2]-r.selection[0],r.selection[3]-r.selection[1]),x>0&&(f.strokeStyle="rgba("+n.core("selection-box-border-color").value[0]+","+n.core("selection-box-border-color").value[1]+","+n.core("selection-box-border-color").value[2]+","+n.core("selection-box-opacity").value+")",f.strokeRect(r.selection[0],r.selection[1],r.selection[2]-r.selection[0],r.selection[3]-r.selection[1]))}if(i.bgActivePosistion&&!r.hoverData.selecting){p=r.cy.zoom();var k=i.bgActivePosistion;f.fillStyle="rgba("+n.core("active-bg-color").value[0]+","+n.core("active-bg-color").value[1]+","+n.core("active-bg-color").value[2]+","+n.core("active-bg-opacity").value+")",f.beginPath(),f.arc(k.x,k.y,n.core("active-bg-size").pfValue/p,0,2*Math.PI),f.fill()}var _=r.lastRedrawTime;if(r.showFps&&_){_=Math.round(_);var U=Math.round(1e3/_),O="1 frame = "+_+" ms = "+U+" fps";if(f.setTransform(1,0,0,1,0,0),f.fillStyle="rgba(255, 0, 0, 0.75)",f.strokeStyle="rgba(255, 0, 0, 0.75)",f.font="30px Arial",!_o){var K=f.measureText(O);_o=K.actualBoundingBoxAscent}f.fillText(O,0,_o),f.strokeRect(0,_o+10,250,20),f.fillRect(0,_o+10,250*Math.min(U/60,1),20)}o||(u[r.SELECT_BOX]=!1)}};var f0=typeof Float32Array<"u"?Float32Array:Array;function Xc(){var e=new f0(9);return f0!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e}function g0(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function ul(e,t,r){var a=t[0],i=t[1],n=t[2],s=t[3],o=t[4],u=t[5],h=t[6],f=t[7],p=t[8],x=r[0],k=r[1];return e[0]=a,e[1]=i,e[2]=n,e[3]=s,e[4]=o,e[5]=u,e[6]=x*a+k*s+h,e[7]=x*i+k*o+f,e[8]=x*n+k*u+p,e}function p0(e,t,r){var a=t[0],i=t[1],n=t[2],s=t[3],o=t[4],u=t[5],h=t[6],f=t[7],p=t[8],x=Math.sin(r),k=Math.cos(r);return e[0]=k*a+x*s,e[1]=k*i+x*o,e[2]=k*n+x*u,e[3]=k*s-x*a,e[4]=k*o-x*i,e[5]=k*u-x*n,e[6]=h,e[7]=f,e[8]=p,e}function Zc(e,t,r){var a=r[0],i=r[1];return e[0]=a*t[0],e[1]=a*t[1],e[2]=a*t[2],e[3]=i*t[3],e[4]=i*t[4],e[5]=i*t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)});var t2=function(){return ut(function e(t,r,a,i){S(this,e),this.debugID=Math.floor(1e4*Math.random()),this.r=t,this.texSize=r,this.texRows=a,this.texHeight=Math.floor(r/a),this.enableWrapping=!0,this.locked=!1,this.texture=null,this.needsBuffer=!0,this.freePointer={x:0,row:0},this.keyToLocation=new Map,this.canvas=i(t,r,r),this.scratch=i(t,r,this.texHeight,"scratch")},[{key:"lock",value:function(){this.locked=!0}},{key:"getKeys",value:function(){return new Set(this.keyToLocation.keys())}},{key:"getScale",value:function(r){var a=r.w,i=r.h,s=this.texSize,o=this.texHeight/i,u=a*o,h=i*o;return u>s&&(u=a*(o=s/a),h=i*o),{scale:o,texW:u,texH:h}}},{key:"draw",value:function(r,a,i){var n=this;if(this.locked)throw new Error("can't draw, atlas is locked");var s=this.texSize,o=this.texRows,u=this.texHeight,h=this.getScale(a),f=h.scale,p=h.texW,x=h.texH,k=function(j,yt){if(i&&yt){var ie=yt.context,he=j.x,me=u*j.row;ie.save(),ie.translate(he,me),ie.scale(f,f),i(ie,a),ie.restore()}},_=[null,null],U=function(){k(n.freePointer,n.canvas),_[0]={x:n.freePointer.x,y:n.freePointer.row*u,w:p,h:x},_[1]={x:n.freePointer.x+p,y:n.freePointer.row*u,w:0,h:x},n.freePointer.x+=p,n.freePointer.x==s&&(n.freePointer.x=0,n.freePointer.row++)},K=function(){n.freePointer.x=0,n.freePointer.row++};if(this.freePointer.x+p<=s)U();else{if(this.freePointer.row>=o-1)return!1;this.freePointer.x===s?(K(),U()):this.enableWrapping?function(){var j=n.scratch,yt=n.canvas;j.clear(),k({x:0,row:0},j);var ie=s-n.freePointer.x,se=p-ie,Ht=u,he=n.freePointer.x,me=n.freePointer.row*u,Te=ie;yt.context.drawImage(j,0,0,Te,Ht,he,me,Te,Ht),_[0]={x:he,y:me,w:Te,h:x};var Me=(n.freePointer.row+1)*u,Oe=se;yt&&yt.context.drawImage(j,ie,0,Oe,Ht,0,Me,Oe,Ht),_[1]={x:0,y:Me,w:Oe,h:x},n.freePointer.x=se,n.freePointer.row++}():(K(),U())}return this.keyToLocation.set(r,_),this.needsBuffer=!0,_}},{key:"getOffsets",value:function(r){return this.keyToLocation.get(r)}},{key:"isEmpty",value:function(){return 0===this.freePointer.x&&0===this.freePointer.row}},{key:"canFit",value:function(r){if(this.locked)return!1;var a=this.texSize,i=this.texRows,n=this.getScale(r);return!(this.freePointer.x+n.texW>a)||this.freePointer.row<i-1}},{key:"bufferIfNeeded",value:function(r){this.texture||(this.texture=function Gp(e){var r=e.createTexture();return r.buffer=function(a){e.bindTexture(e.TEXTURE_2D,r),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR_MIPMAP_NEAREST),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,a),e.generateMipmap(e.TEXTURE_2D),e.bindTexture(e.TEXTURE_2D,null)},r.deleteTexture=function(){e.deleteTexture(r)},r}(r)),this.needsBuffer&&(this.texture.buffer(this.canvas),this.needsBuffer=!1,this.locked&&(this.canvas=null,this.scratch=null))}},{key:"dispose",value:function(){this.texture&&(this.texture.deleteTexture(),this.texture=null),this.canvas=null,this.scratch=null,this.locked=!0}}])}(),e2=function(){return ut(function e(t,r,a,i){S(this,e),this.r=t,this.texSize=r,this.texRows=a,this.createTextureCanvas=i,this.atlases=[],this.styleKeyToAtlas=new Map,this.markedKeys=new Set},[{key:"getKeys",value:function(){return new Set(this.styleKeyToAtlas.keys())}},{key:"_createAtlas",value:function(){return new t2(this.r,this.texSize,this.texRows,this.createTextureCanvas)}},{key:"_getScratchCanvas",value:function(){if(!this.scratch){var r=this.r,a=this.texSize,n=this.createTextureCanvas,s=Math.floor(a/this.texRows);this.scratch=n(r,a,s,"scratch")}return this.scratch}},{key:"draw",value:function(r,a,i){var n=this.styleKeyToAtlas.get(r);return n||((!(n=this.atlases[this.atlases.length-1])||!n.canFit(a))&&(n&&n.lock(),n=this._createAtlas(),this.atlases.push(n)),n.draw(r,a,i),this.styleKeyToAtlas.set(r,n)),n}},{key:"getAtlas",value:function(r){return this.styleKeyToAtlas.get(r)}},{key:"hasAtlas",value:function(r){return this.styleKeyToAtlas.has(r)}},{key:"markKeyForGC",value:function(r){this.markedKeys.add(r)}},{key:"gc",value:function(){var r=this,a=this.markedKeys;if(0!==a.size){var u,i=[],n=new Map,s=null,o=$(this.atlases);try{var h=function(){var p=u.value,x=p.getKeys(),k=function r2(e,t){return e.intersection?e.intersection(t):new Set(q(e).filter(function(r){return t.has(r)}))}(a,x);if(0===k.size)return i.push(p),x.forEach(function(ie){return n.set(ie,p)}),1;s||(s=r._createAtlas(),i.push(s));var U,_=$(x);try{for(_.s();!(U=_.n()).done;){var O=U.value;if(!k.has(O)){var Y=Rt(p.getOffsets(O),2),j=Y[0];s.canFit({w:j.w+Y[1].w,h:j.h})||(s.lock(),s=r._createAtlas(),i.push(s)),p.canvas&&(r._copyTextureToNewAtlas(O,p,s),n.set(O,s))}}}catch(ie){_.e(ie)}finally{_.f()}p.dispose()};for(o.s();!(u=o.n()).done;)h()}catch(f){o.e(f)}finally{o.f()}this.atlases=i,this.styleKeyToAtlas=n,this.markedKeys=new Set}else console.log("nothing to garbage collect")}},{key:"_copyTextureToNewAtlas",value:function(r,a,i){var s=Rt(a.getOffsets(r),2),o=s[0],u=s[1];if(0===u.w)i.draw(r,o,function(x){x.drawImage(a.canvas,o.x,o.y,o.w,o.h,0,0,o.w,o.h)});else{var h=this._getScratchCanvas();h.clear(),h.context.drawImage(a.canvas,o.x,o.y,o.w,o.h,0,0,o.w,o.h),h.context.drawImage(a.canvas,u.x,u.y,u.w,u.h,o.w,0,u.w,u.h);var f=o.w+u.w,p=o.h;i.draw(r,{w:f,h:p},function(x){x.drawImage(h,0,0,f,p,0,0,f,p)})}}},{key:"getCounts",value:function(){return{keyCount:this.styleKeyToAtlas.size,atlasCount:new Set(this.styleKeyToAtlas.values()).size}}}])}(),a2=function(){return ut(function e(t,r){S(this,e),this.r=t,this.globalOptions=r,this.atlasSize=r.webglTexSize,this.maxAtlasesPerBatch=r.webglTexPerBatch,this.renderTypes=new Map,this.collections=new Map,this.typeAndIdToKey=new Map},[{key:"getAtlasSize",value:function(){return this.atlasSize}},{key:"addAtlasCollection",value:function(r,a){var i=this.globalOptions,n=i.webglTexSize,o=a.texRows,u=this._cacheScratchCanvas(i.createTextureCanvas),h=new e2(this.r,n,o,u);this.collections.set(r,h)}},{key:"addRenderType",value:function(r,a){var i=a.collection;if(!this.collections.has(i))throw new Error("invalid atlas collection name '".concat(i,"'"));var n=this.collections.get(i),s=G({type:r,atlasCollection:n},a);this.renderTypes.set(r,s)}},{key:"getRenderTypeOpts",value:function(r){return this.renderTypes.get(r)}},{key:"getAtlasCollection",value:function(r){return this.collections.get(r)}},{key:"_cacheScratchCanvas",value:function(r){var a=-1,i=-1,n=null;return function(s,o,u,h){return h?((!n||o!=a||u!=i)&&(a=o,i=u,n=r(s,o,u)),n):r(s,o,u)}}},{key:"_key",value:function(r,a){return"".concat(r,"-").concat(a)}},{key:"invalidate",value:function(r){var _,a=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=i.forceRedraw,s=void 0!==n&&n,o=i.filterEle,u=void 0===o?function(){return!0}:o,h=i.filterType,f=void 0===h?function(){return!0}:h,p=!1,x=!1,k=$(r);try{for(k.s();!(_=k.n()).done;){var U=_.value;if(u(U)){var K,O=$(this.renderTypes.values());try{var Y=function(){var yt=K.value,ie=yt.type;if(f(ie)){var se=a.collections.get(yt.collection),Ht=yt.getKey(U),he=Array.isArray(Ht)?Ht:[Ht];if(s)he.forEach(function(Me){return se.markKeyForGC(Me)}),x=!0;else{var me=yt.getID?yt.getID(U):U.id(),Te=a._key(ie,me),Be=a.typeAndIdToKey.get(Te);void 0!==Be&&!Yp(he,Be)&&(p=!0,a.typeAndIdToKey.delete(Te),Be.forEach(function(Me){return se.markKeyForGC(Me)}))}}};for(O.s();!(K=O.n()).done;)Y()}catch(j){O.e(j)}finally{O.f()}}}}catch(j){k.e(j)}finally{k.f()}return x&&(this.gc(),p=!1),p}},{key:"gc",value:function(){var a,r=$(this.collections.values());try{for(r.s();!(a=r.n()).done;)a.value.gc()}catch(n){r.e(n)}finally{r.f()}}},{key:"getOrCreateAtlas",value:function(r,a,i,n){var s=this.renderTypes.get(a),o=this.collections.get(s.collection),u=!1,h=o.draw(n,i,function(x){s.drawClipped?(x.save(),x.beginPath(),x.rect(0,0,i.w,i.h),x.clip(),s.drawElement(x,r,i,!0,!0),x.restore()):s.drawElement(x,r,i,!0,!0),u=!0});if(u){var f=s.getID?s.getID(r):r.id(),p=this._key(a,f);this.typeAndIdToKey.has(p)?this.typeAndIdToKey.get(p).push(n):this.typeAndIdToKey.set(p,[n])}return h}},{key:"getAtlasInfo",value:function(r,a){var i=this,n=this.renderTypes.get(a),s=n.getKey(r);return(Array.isArray(s)?s:[s]).map(function(u){var h=n.getBoundingBox(r,u),f=i.getOrCreateAtlas(r,a,h,u),x=Rt(f.getOffsets(u),2),k=x[0];return{atlas:f,tex:k,tex1:k,tex2:x[1],bb:h}})}},{key:"getDebugInfo",value:function(){var i,r=[],a=$(this.collections);try{for(a.s();!(i=a.n()).done;){var n=Rt(i.value,2),s=n[0],u=n[1].getCounts();r.push({type:s,keyCount:u.keyCount,atlasCount:u.atlasCount})}}catch(p){a.e(p)}finally{a.f()}return r}}])}(),i2=function(){return ut(function e(t){S(this,e),this.globalOptions=t,this.atlasSize=t.webglTexSize,this.maxAtlasesPerBatch=t.webglTexPerBatch,this.batchAtlases=[]},[{key:"getMaxAtlasesPerBatch",value:function(){return this.maxAtlasesPerBatch}},{key:"getAtlasSize",value:function(){return this.atlasSize}},{key:"getIndexArray",value:function(){return Array.from({length:this.maxAtlasesPerBatch},function(r,a){return a})}},{key:"startBatch",value:function(){this.batchAtlases=[]}},{key:"getAtlasCount",value:function(){return this.batchAtlases.length}},{key:"getAtlases",value:function(){return this.batchAtlases}},{key:"canAddToCurrentBatch",value:function(r){return this.batchAtlases.length!==this.maxAtlasesPerBatch||this.batchAtlases.includes(r)}},{key:"getAtlasIndexForBatch",value:function(r){var a=this.batchAtlases.indexOf(r);if(a<0){if(this.batchAtlases.length===this.maxAtlasesPerBatch)throw new Error("cannot add more atlases to batch");this.batchAtlases.push(r),a=this.batchAtlases.length-1}return a}}])}(),Eo={SCREEN:{name:"screen",screen:!0},PICKING:{name:"picking",picking:!0}},c2=function(){return ut(function e(t,r,a){S(this,e),this.r=t,this.gl=r,this.maxInstances=a.webglBatchSize,this.atlasSize=a.webglTexSize,this.bgColor=a.bgColor,this.debug=a.webglDebug,this.batchDebugInfo=[],a.enableWrapping=!0,a.createTextureCanvas=zp,this.atlasManager=new a2(t,a),this.batchManager=new i2(a),this.simpleShapeOptions=new Map,this.program=this._createShaderProgram(Eo.SCREEN),this.pickingProgram=this._createShaderProgram(Eo.PICKING),this.vao=this._createVAO()},[{key:"addAtlasCollection",value:function(r,a){this.atlasManager.addAtlasCollection(r,a)}},{key:"addTextureAtlasRenderType",value:function(r,a){this.atlasManager.addRenderType(r,a)}},{key:"addSimpleShapeRenderType",value:function(r,a){this.simpleShapeOptions.set(r,a)}},{key:"invalidate",value:function(r){var i=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).type,n=this.atlasManager;return i?n.invalidate(r,{filterType:function(o){return o===i},forceRedraw:!0}):n.invalidate(r)}},{key:"gc",value:function(){this.atlasManager.gc()}},{key:"_createShaderProgram",value:function(r){var a=this.gl,i="#version 300 es\n      precision highp float;\n\n      uniform mat3 uPanZoomMatrix;\n      uniform int  uAtlasSize;\n      \n      // instanced\n      in vec2 aPosition; // a vertex from the unit square\n      \n      in mat3 aTransform; // used to transform verticies, eg into a bounding box\n      in int aVertType; // the type of thing we are rendering\n\n      // the z-index that is output when using picking mode\n      in vec4 aIndex;\n      \n      // For textures\n      in int aAtlasId; // which shader unit/atlas to use\n      in vec4 aTex; // x/y/w/h of texture in atlas\n\n      // for edges\n      in vec4 aPointAPointB;\n      in vec4 aPointCPointD;\n      in vec2 aLineWidth; // also used for node border width\n\n      // simple shapes\n      in vec4 aCornerRadius; // for round-rectangle [top-right, bottom-right, top-left, bottom-left]\n      in vec4 aColor; // also used for edges\n      in vec4 aBorderColor; // aLineWidth is used for border width\n\n      // output values passed to the fragment shader\n      out vec2 vTexCoord;\n      out vec4 vColor;\n      out vec2 vPosition;\n      // flat values are not interpolated\n      flat out int vAtlasId; \n      flat out int vVertType;\n      flat out vec2 vTopRight;\n      flat out vec2 vBotLeft;\n      flat out vec4 vCornerRadius;\n      flat out vec4 vBorderColor;\n      flat out vec2 vBorderWidth;\n      flat out vec4 vIndex;\n      \n      void main(void) {\n        int vid = gl_VertexID;\n        vec2 position = aPosition; // TODO make this a vec3, simplifies some code below\n\n        if(aVertType == ".concat(0,") {\n          float texX = aTex.x; // texture coordinates\n          float texY = aTex.y;\n          float texW = aTex.z;\n          float texH = aTex.w;\n\n          if(vid == 1 || vid == 2 || vid == 4) {\n            texX += texW;\n          }\n          if(vid == 2 || vid == 4 || vid == 5) {\n            texY += texH;\n          }\n\n          float d = float(uAtlasSize);\n          vTexCoord = vec2(texX / d, texY / d); // tex coords must be between 0 and 1\n\n          gl_Position = vec4(uPanZoomMatrix * aTransform * vec3(position, 1.0), 1.0);\n        }\n        else if(aVertType == ").concat(4," || aVertType == ").concat(7," \n             || aVertType == ").concat(5," || aVertType == ").concat(6,") { // simple shapes\n\n          // the bounding box is needed by the fragment shader\n          vBotLeft  = (aTransform * vec3(0, 0, 1)).xy; // flat\n          vTopRight = (aTransform * vec3(1, 1, 1)).xy; // flat\n          vPosition = (aTransform * vec3(position, 1)).xy; // will be interpolated\n\n          // calculations are done in the fragment shader, just pass these along\n          vColor = aColor;\n          vCornerRadius = aCornerRadius;\n          vBorderColor = aBorderColor;\n          vBorderWidth = aLineWidth;\n\n          gl_Position = vec4(uPanZoomMatrix * aTransform * vec3(position, 1.0), 1.0);\n        }\n        else if(aVertType == ").concat(1,") {\n          vec2 source = aPointAPointB.xy;\n          vec2 target = aPointAPointB.zw;\n\n          // adjust the geometry so that the line is centered on the edge\n          position.y = position.y - 0.5;\n\n          // stretch the unit square into a long skinny rectangle\n          vec2 xBasis = target - source;\n          vec2 yBasis = normalize(vec2(-xBasis.y, xBasis.x));\n          vec2 point = source + xBasis * position.x + yBasis * aLineWidth[0] * position.y;\n\n          gl_Position = vec4(uPanZoomMatrix * vec3(point, 1.0), 1.0);\n          vColor = aColor;\n        } \n        else if(aVertType == ").concat(2,") {\n          vec2 pointA = aPointAPointB.xy;\n          vec2 pointB = aPointAPointB.zw;\n          vec2 pointC = aPointCPointD.xy;\n          vec2 pointD = aPointCPointD.zw;\n\n          // adjust the geometry so that the line is centered on the edge\n          position.y = position.y - 0.5;\n\n          vec2 p0, p1, p2, pos;\n          if(position.x == 0.0) { // The left side of the unit square\n            p0 = pointA;\n            p1 = pointB;\n            p2 = pointC;\n            pos = position;\n          } else { // The right side of the unit square, use same approach but flip the geometry upside down\n            p0 = pointD;\n            p1 = pointC;\n            p2 = pointB;\n            pos = vec2(0.0, -position.y);\n          }\n\n          vec2 p01 = p1 - p0;\n          vec2 p12 = p2 - p1;\n          vec2 p21 = p1 - p2;\n\n          // Find the normal vector.\n          vec2 tangent = normalize(normalize(p12) + normalize(p01));\n          vec2 normal = vec2(-tangent.y, tangent.x);\n\n          // Find the vector perpendicular to p0 -> p1.\n          vec2 p01Norm = normalize(vec2(-p01.y, p01.x));\n\n          // Determine the bend direction.\n          float sigma = sign(dot(p01 + p21, normal));\n          float width = aLineWidth[0];\n\n          if(sign(pos.y) == -sigma) {\n            // This is an intersecting vertex. Adjust the position so that there's no overlap.\n            vec2 point = 0.5 * width * normal * -sigma / dot(normal, p01Norm);\n            gl_Position = vec4(uPanZoomMatrix * vec3(p1 + point, 1.0), 1.0);\n          } else {\n            // This is a non-intersecting vertex. Treat it like a mitre join.\n            vec2 point = 0.5 * width * normal * sigma * dot(normal, p01Norm);\n            gl_Position = vec4(uPanZoomMatrix * vec3(p1 + point, 1.0), 1.0);\n          }\n\n          vColor = aColor;\n        } \n        else if(aVertType == ").concat(3," && vid < 3) {\n          // massage the first triangle into an edge arrow\n          if(vid == 0)\n            position = vec2(-0.15, -0.3);\n          if(vid == 1)\n            position = vec2(  0.0,  0.0);\n          if(vid == 2)\n            position = vec2( 0.15, -0.3);\n\n          gl_Position = vec4(uPanZoomMatrix * aTransform * vec3(position, 1.0), 1.0);\n          vColor = aColor;\n        }\n        else {\n          gl_Position = vec4(2.0, 0.0, 0.0, 1.0); // discard vertex by putting it outside webgl clip space\n        }\n\n        vAtlasId = aAtlasId;\n        vVertType = aVertType;\n        vIndex = aIndex;\n      }\n    "),n=this.batchManager.getIndexArray(),o=function Wp(e,t,r){var a=h0(e,e.VERTEX_SHADER,t),i=h0(e,e.FRAGMENT_SHADER,r),n=e.createProgram();if(e.attachShader(n,a),e.attachShader(n,i),e.linkProgram(n),!e.getProgramParameter(n,e.LINK_STATUS))throw new Error("Could not initialize shaders");return n}(a,i,"#version 300 es\n      precision highp float;\n\n      // declare texture unit for each texture atlas in the batch\n      ".concat(n.map(function(h){return"uniform sampler2D uTexture".concat(h,";")}).join("\n\t"),"\n\n      uniform vec4 uBGColor;\n      uniform float uZoom;\n\n      in vec2 vTexCoord;\n      in vec4 vColor;\n      in vec2 vPosition; // model coordinates\n\n      flat in int vAtlasId;\n      flat in vec4 vIndex;\n      flat in int vVertType;\n      flat in vec2 vTopRight;\n      flat in vec2 vBotLeft;\n      flat in vec4 vCornerRadius;\n      flat in vec4 vBorderColor;\n      flat in vec2 vBorderWidth;\n\n      out vec4 outColor;\n\n      ").concat("\n  float circleSD(vec2 p, float r) {\n    return distance(vec2(0), p) - r; // signed distance\n  }\n","\n      ").concat("\n  float rectangleSD(vec2 p, vec2 b) {\n    vec2 d = abs(p)-b;\n    return distance(vec2(0),max(d,0.0)) + min(max(d.x,d.y),0.0);\n  }\n","\n      ").concat("\n  float roundRectangleSD(vec2 p, vec2 b, vec4 cr) {\n    cr.xy = (p.x > 0.0) ? cr.xy : cr.zw;\n    cr.x  = (p.y > 0.0) ? cr.x  : cr.y;\n    vec2 q = abs(p) - b + cr.x;\n    return min(max(q.x, q.y), 0.0) + distance(vec2(0), max(q, 0.0)) - cr.x;\n  }\n","\n      ").concat("\n  float ellipseSD(vec2 p, vec2 ab) {\n    p = abs( p ); // symmetry\n\n    // find root with Newton solver\n    vec2 q = ab*(p-ab);\n    float w = (q.x<q.y)? 1.570796327 : 0.0;\n    for( int i=0; i<5; i++ ) {\n      vec2 cs = vec2(cos(w),sin(w));\n      vec2 u = ab*vec2( cs.x,cs.y);\n      vec2 v = ab*vec2(-cs.y,cs.x);\n      w = w + dot(p-u,v)/(dot(p-u,u)+dot(v,v));\n    }\n    \n    // compute final point and distance\n    float d = length(p-ab*vec2(cos(w),sin(w)));\n    \n    // return signed distance\n    return (dot(p/ab,p/ab)>1.0) ? d : -d;\n  }\n","\n\n      vec4 blend(vec4 top, vec4 bot) { // blend colors with premultiplied alpha\n        return vec4( \n          top.rgb + (bot.rgb * (1.0 - top.a)),\n          top.a   + (bot.a   * (1.0 - top.a)) \n        );\n      }\n\n      vec4 distInterp(vec4 cA, vec4 cB, float d) { // interpolate color using Signed Distance\n        // scale to the zoom level so that borders don't look blurry when zoomed in\n        // note 1.5 is an aribitrary value chosen because it looks good\n        return mix(cA, cB, 1.0 - smoothstep(0.0, 1.5 / uZoom, abs(d))); \n      }\n\n      void main(void) {\n        if(vVertType == ").concat(0,") {\n          // look up the texel from the texture unit\n          ").concat(n.map(function(h){return"if(vAtlasId == ".concat(h,") outColor = texture(uTexture").concat(h,", vTexCoord);")}).join("\n\telse "),"\n        } \n        else if(vVertType == ").concat(3,") {\n          // mimics how canvas renderer uses context.globalCompositeOperation = 'destination-out';\n          outColor = blend(vColor, uBGColor);\n          outColor.a = 1.0; // make opaque, masks out line under arrow\n        }\n        else if(vVertType == ").concat(4," && vBorderWidth == vec2(0.0)) { // simple rectangle with no border\n          outColor = vColor; // unit square is already transformed to the rectangle, nothing else needs to be done\n        }\n        else if(vVertType == ").concat(4," || vVertType == ").concat(7," \n          || vVertType == ").concat(5," || vVertType == ").concat(6,") { // use SDF\n\n          float outerBorder = vBorderWidth[0];\n          float innerBorder = vBorderWidth[1];\n          float borderPadding = outerBorder * 2.0;\n          float w = vTopRight.x - vBotLeft.x - borderPadding;\n          float h = vTopRight.y - vBotLeft.y - borderPadding;\n          vec2 b = vec2(w/2.0, h/2.0); // half width, half height\n          vec2 p = vPosition - vec2(vTopRight.x - b[0] - outerBorder, vTopRight.y - b[1] - outerBorder); // translate to center\n\n          float d; // signed distance\n          if(vVertType == ").concat(4,") {\n            d = rectangleSD(p, b);\n          } else if(vVertType == ").concat(7," && w == h) {\n            d = circleSD(p, b.x); // faster than ellipse\n          } else if(vVertType == ").concat(7,") {\n            d = ellipseSD(p, b);\n          } else {\n            d = roundRectangleSD(p, b, vCornerRadius.wzyx);\n          }\n\n          // use the distance to interpolate a color to smooth the edges of the shape, doesn't need multisampling\n          // we must smooth colors inwards, because we can't change pixels outside the shape's bounding box\n          if(d > 0.0) {\n            if(d > outerBorder) {\n              discard;\n            } else {\n              outColor = distInterp(vBorderColor, vec4(0), d - outerBorder);\n            }\n          } else {\n            if(d > innerBorder) {\n              vec4 outerColor = outerBorder == 0.0 ? vec4(0) : vBorderColor;\n              vec4 innerBorderColor = blend(vBorderColor, vColor);\n              outColor = distInterp(innerBorderColor, outerColor, d);\n            } \n            else {\n              vec4 outerColor;\n              if(innerBorder == 0.0 && outerBorder == 0.0) {\n                outerColor = vec4(0);\n              } else if(innerBorder == 0.0) {\n                outerColor = vBorderColor;\n              } else {\n                outerColor = blend(vBorderColor, vColor);\n              }\n              outColor = distInterp(vColor, outerColor, d - innerBorder);\n            }\n          }\n        }\n        else {\n          outColor = vColor;\n        }\n\n        ").concat(r.picking?"if(outColor.a == 0.0) discard;\n             else outColor = vIndex;":"","\n      }\n    "));o.aPosition=a.getAttribLocation(o,"aPosition"),o.aIndex=a.getAttribLocation(o,"aIndex"),o.aVertType=a.getAttribLocation(o,"aVertType"),o.aTransform=a.getAttribLocation(o,"aTransform"),o.aAtlasId=a.getAttribLocation(o,"aAtlasId"),o.aTex=a.getAttribLocation(o,"aTex"),o.aPointAPointB=a.getAttribLocation(o,"aPointAPointB"),o.aPointCPointD=a.getAttribLocation(o,"aPointCPointD"),o.aLineWidth=a.getAttribLocation(o,"aLineWidth"),o.aColor=a.getAttribLocation(o,"aColor"),o.aCornerRadius=a.getAttribLocation(o,"aCornerRadius"),o.aBorderColor=a.getAttribLocation(o,"aBorderColor"),o.uPanZoomMatrix=a.getUniformLocation(o,"uPanZoomMatrix"),o.uAtlasSize=a.getUniformLocation(o,"uAtlasSize"),o.uBGColor=a.getUniformLocation(o,"uBGColor"),o.uZoom=a.getUniformLocation(o,"uZoom"),o.uTextures=[];for(var u=0;u<this.batchManager.getMaxAtlasesPerBatch();u++)o.uTextures.push(a.getUniformLocation(o,"uTexture".concat(u)));return o}},{key:"_createVAO",value:function(){var r=[0,0,1,0,1,1,0,0,1,1,0,1];this.vertexCount=r.length/2;var a=this.maxInstances,i=this.gl,n=this.program,s=i.createVertexArray();return i.bindVertexArray(s),function jp(e,t,r,a){var n=Rt(u0(e,t),2),s=n[0],o=n[1],u=d0(e,o,a),h=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,h),e.bufferData(e.ARRAY_BUFFER,u,e.STATIC_DRAW),o===e.FLOAT?e.vertexAttribPointer(r,s,o,!1,0,0):o===e.INT&&e.vertexAttribIPointer(r,s,o,0,0),e.enableVertexAttribArray(r),e.bindBuffer(e.ARRAY_BUFFER,null)}(i,"vec2",n.aPosition,r),this.transformBuffer=function Xp(e,t,r){for(var i=new Float32Array(9*t),n=new Array(t),s=0;s<t;s++)n[s]=new Float32Array(i.buffer,9*s*4,9);var u=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,u),e.bufferData(e.ARRAY_BUFFER,i.byteLength,e.DYNAMIC_DRAW);for(var h=0;h<3;h++){var f=r+h;e.enableVertexAttribArray(f),e.vertexAttribPointer(f,3,e.FLOAT,!1,36,12*h),e.vertexAttribDivisor(f,1)}return e.bindBuffer(e.ARRAY_BUFFER,null),u.getMatrixView=function(p){return n[p]},u.setData=function(p,x){n[x].set(p,0)},u.bufferSubData=function(){e.bindBuffer(e.ARRAY_BUFFER,u),e.bufferSubData(e.ARRAY_BUFFER,0,i)},u}(i,a,n.aTransform),this.indexBuffer=ss(i,a,"vec4",n.aIndex),this.vertTypeBuffer=ss(i,a,"int",n.aVertType),this.atlasIdBuffer=ss(i,a,"int",n.aAtlasId),this.texBuffer=ss(i,a,"vec4",n.aTex),this.pointAPointBBuffer=ss(i,a,"vec4",n.aPointAPointB),this.pointCPointDBuffer=ss(i,a,"vec4",n.aPointCPointD),this.lineWidthBuffer=ss(i,a,"vec2",n.aLineWidth),this.colorBuffer=ss(i,a,"vec4",n.aColor),this.cornerRadiusBuffer=ss(i,a,"vec4",n.aCornerRadius),this.borderColorBuffer=ss(i,a,"vec4",n.aBorderColor),i.bindVertexArray(null),s}},{key:"buffers",get:function(){var r=this;return this._buffers||(this._buffers=Object.keys(this).filter(function(a){return Tt(a,"Buffer")}).map(function(a){return r[a]})),this._buffers}},{key:"startFrame",value:function(r){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Eo.SCREEN;this.panZoomMatrix=r,this.renderTarget=a,this.batchDebugInfo=[],this.wrappedCount=0,this.simpleCount=0,this.startBatch()}},{key:"startBatch",value:function(){this.instanceCount=0,this.batchManager.startBatch()}},{key:"endFrame",value:function(){this.endBatch()}},{key:"_isVisible",value:function(r,a){return!!r.visible()&&(!a||!a.isVisible||a.isVisible(r))}},{key:"drawTexture",value:function(r,a,i){var n=this.atlasManager,s=this.batchManager,o=n.getRenderTypeOpts(i);if(this._isVisible(r,o)&&(!r.isEdge()||this._isValidEdge(r))){if(this.renderTarget.picking&&o.getTexPickingMode){var u=o.getTexPickingMode(r);if(1===u)return;if(2==u)return void this.drawPickingRectangle(r,a,i)}var p,f=$(n.getAtlasInfo(r,i));try{for(f.s();!(p=f.n()).done;){var x=p.value,k=x.atlas,_=x.tex1,U=x.tex2;s.canAddToCurrentBatch(k)||this.endBatch();for(var O=s.getAtlasIndexForBatch(k),K=0,Y=[[_,!0],[U,!1]];K<Y.length;K++){var j=Rt(Y[K],2),yt=j[0],ie=j[1];if(0!=yt.w){var se=this.instanceCount;this.vertTypeBuffer.getView(se)[0]=0,Qs(a,this.indexBuffer.getView(se)),this.atlasIdBuffer.getView(se)[0]=O;var me=this.texBuffer.getView(se);me[0]=yt.x,me[1]=yt.y,me[2]=yt.w,me[3]=yt.h;var Te=this.transformBuffer.getMatrixView(se);this.setTransformMatrix(r,Te,o,x,ie),this.instanceCount++,ie||this.wrappedCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}}}catch(Be){f.e(Be)}finally{f.f()}}}},{key:"setTransformMatrix",value:function(r,a,i,n){var s=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],o=0;if(i.shapeProps&&i.shapeProps.padding&&(o=r.pstyle(i.shapeProps.padding).pfValue),n){var h=n.tex1,p=h.w/(h.w+n.tex2.w);s||(p=1-p);var x=this._getAdjustedBB(n.bb,o,s,p);this._applyTransformMatrix(a,x,i,r)}else{var k=i.getBoundingBox(r),_=this._getAdjustedBB(k,o,!0,1);this._applyTransformMatrix(a,_,i,r)}}},{key:"_applyTransformMatrix",value:function(r,a,i,n){var s,o;g0(r);var u=i.getRotation?i.getRotation(n):0;if(0!==u){var h=i.getRotationPoint(n);ul(r,r,[h.x,h.y]),p0(r,r,u);var x=i.getRotationOffset(n);s=x.x+(a.xOffset||0),o=x.y+(a.yOffset||0)}else s=a.x1,o=a.y1;ul(r,r,[s,o]),Zc(r,r,[a.w,a.h])}},{key:"_getAdjustedBB",value:function(r,a,i,n){var s=r.x1,o=r.y1,u=r.w,h=r.h;a&&(s-=a,o-=a,u+=2*a,h+=2*a);var p=0,x=u*n;return i&&n<1?u=x:!i&&n<1&&(s+=p=u-x,u=x),{x1:s,y1:o,w:u,h,xOffset:p,yOffset:r.yOffset}}},{key:"drawPickingRectangle",value:function(r,a,i){var n=this.atlasManager.getRenderTypeOpts(i),s=this.instanceCount;this.vertTypeBuffer.getView(s)[0]=4,Qs(a,this.indexBuffer.getView(s)),Bs([0,0,0],1,this.colorBuffer.getView(s));var h=this.transformBuffer.getMatrixView(s);this.setTransformMatrix(r,h,n),this.simpleCount++,this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}},{key:"drawNode",value:function(r,a,i){var n=this.simpleShapeOptions.get(i);if(this._isVisible(r,n)){var s=n.shapeProps,o=this._getVertTypeForShape(r,s.shape);if(void 0===o||n.isSimple&&!n.isSimple(r))return void this.drawTexture(r,a,i);var u=this.instanceCount;if(this.vertTypeBuffer.getView(u)[0]=o,5===o||6===o){var h=n.getBoundingBox(r),f=this._getCornerRadius(r,s.radius,h),p=this.cornerRadiusBuffer.getView(u);p[0]=f,p[1]=f,p[2]=f,p[3]=f,6===o&&(p[0]=0,p[2]=0)}Qs(a,this.indexBuffer.getView(u)),Bs(r.pstyle(s.color).value,r.pstyle(s.opacity).value,this.colorBuffer.getView(u));var O=this.lineWidthBuffer.getView(u);if(O[0]=0,O[1]=0,s.border){var K=r.pstyle("border-width").value;if(K>0){Bs(r.pstyle("border-color").value,r.pstyle("border-opacity").value,this.borderColorBuffer.getView(u));var ie=r.pstyle("border-position").value;if("inside"===ie)O[0]=0,O[1]=-K;else if("outside"===ie)O[0]=K,O[1]=0;else{var se=K/2;O[0]=se,O[1]=-se}}}var Ht=this.transformBuffer.getMatrixView(u);this.setTransformMatrix(r,Ht,n),this.simpleCount++,this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}},{key:"_getVertTypeForShape",value:function(r,a){switch(r.pstyle(a).value){case"rectangle":return 4;case"ellipse":return 7;case"roundrectangle":case"round-rectangle":return 5;case"bottom-round-rectangle":return 6;default:return}}},{key:"_getCornerRadius",value:function(r,a,i){var n=i.w,s=i.h;if("auto"===r.pstyle(a).value)return Ui(n,s);var o=r.pstyle(a).pfValue;return Math.min(o,s/2,n/2)}},{key:"drawEdgeArrow",value:function(r,a,i){if(r.visible()){var s,o,u,n=r._private.rscratch;if(!("source"===i?(s=n.arrowStartX,o=n.arrowStartY,u=n.srcArrowAngle):(s=n.arrowEndX,o=n.arrowEndY,u=n.tgtArrowAngle),isNaN(s)||null==s||isNaN(o)||null==o||isNaN(u)||null==u||"none"===r.pstyle(i+"-arrow-shape").value)){var f=r.pstyle(i+"-arrow-color").value,k=r.pstyle("opacity").value*r.pstyle("line-opacity").value,_=r.pstyle("width").pfValue,U=r.pstyle("arrow-scale").value,O=this.r.getArrowWidth(_,U),K=this.instanceCount,Y=this.transformBuffer.getMatrixView(K);g0(Y),ul(Y,Y,[s,o]),Zc(Y,Y,[O,O]),p0(Y,Y,u),this.vertTypeBuffer.getView(K)[0]=3,Qs(a,this.indexBuffer.getView(K)),Bs(f,k,this.colorBuffer.getView(K)),this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}}},{key:"drawEdgeLine",value:function(r,a){if(r.visible()){var i=this._getEdgePoints(r);if(i){var n=r.pstyle("opacity").value,s=r.pstyle("line-opacity").value,o=r.pstyle("width").pfValue,u=r.pstyle("line-color").value,h=n*s;if(i.length/2+this.instanceCount>this.maxInstances&&this.endBatch(),4==i.length){var f=this.instanceCount;this.vertTypeBuffer.getView(f)[0]=1,Qs(a,this.indexBuffer.getView(f)),Bs(u,h,this.colorBuffer.getView(f)),this.lineWidthBuffer.getView(f)[0]=o;var _=this.pointAPointBBuffer.getView(f);_[0]=i[0],_[1]=i[1],_[2]=i[2],_[3]=i[3],this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}else for(var U=0;U<i.length-2;U+=2){var O=this.instanceCount;this.vertTypeBuffer.getView(O)[0]=2,Qs(a,this.indexBuffer.getView(O)),Bs(u,h,this.colorBuffer.getView(O)),this.lineWidthBuffer.getView(O)[0]=o;var yt=i[U-2],ie=i[U-1],se=i[U],Ht=i[U+1],he=i[U+2],me=i[U+3],Te=i[U+4],Be=i[U+5];0==U&&(yt=2*se-he+.001,ie=2*Ht-me+.001),U==i.length-4&&(Te=2*he-se+.001,Be=2*me-Ht+.001);var Me=this.pointAPointBBuffer.getView(O);Me[0]=yt,Me[1]=ie,Me[2]=se,Me[3]=Ht;var Oe=this.pointCPointDBuffer.getView(O);Oe[0]=he,Oe[1]=me,Oe[2]=Te,Oe[3]=Be,this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}}}},{key:"_isValidEdge",value:function(r){var a=r._private.rscratch;return!(a.badLine||null==a.allpts||isNaN(a.allpts[0]))}},{key:"_getEdgePoints",value:function(r){var a=r._private.rscratch;if(this._isValidEdge(r)){var i=a.allpts;if(4==i.length)return i;var n=this._getNumSegments(r);return this._getCurveSegmentPoints(i,n)}}},{key:"_getNumSegments",value:function(r){return Math.min(Math.max(15,5),this.maxInstances)}},{key:"_getCurveSegmentPoints",value:function(r,a){if(4==r.length)return r;for(var i=Array(2*(a+1)),n=0;n<=a;n++)0==n?(i[0]=r[0],i[1]=r[1]):n==a?(i[2*n]=r[r.length-2],i[2*n+1]=r[r.length-1]):this._setCurvePoint(r,n/a,i,2*n);return i}},{key:"_setCurvePoint",value:function(r,a,i,n){if(!(r.length<=2)){for(var s=Array(r.length-2),o=0;o<s.length;o+=2){var h=(1-a)*r[o+1]+a*r[o+3];s[o]=(1-a)*r[o]+a*r[o+2],s[o+1]=h}return this._setCurvePoint(s,a,i,n)}i[n]=r[0],i[n+1]=r[1]}},{key:"endBatch",value:function(){var r=this.gl,a=this.vao,i=this.vertexCount,n=this.instanceCount;if(0!==n){var s=this.renderTarget.picking?this.pickingProgram:this.program;r.useProgram(s),r.bindVertexArray(a);var u,o=$(this.buffers);try{for(o.s();!(u=o.n()).done;)u.value.bufferSubData(n)}catch(_){o.e(_)}finally{o.f()}for(var f=this.batchManager.getAtlases(),p=0;p<f.length;p++)f[p].bufferIfNeeded(r);for(var x=0;x<f.length;x++)r.activeTexture(r.TEXTURE0+x),r.bindTexture(r.TEXTURE_2D,f[x].texture),r.uniform1i(s.uTextures[x],x);r.uniform1f(s.uZoom,function Vp(e){var t=e.pixelRatio;return e.cy.zoom()*t}(this.r)),r.uniformMatrix3fv(s.uPanZoomMatrix,!1,this.panZoomMatrix),r.uniform1i(s.uAtlasSize,this.batchManager.getAtlasSize());var k=Bs(this.bgColor,1);r.uniform4fv(s.uBGColor,k),r.drawArraysInstanced(r.TRIANGLES,0,i,n),r.bindVertexArray(null),r.bindTexture(r.TEXTURE_2D,null),this.debug&&this.batchDebugInfo.push({count:n,atlasCount:f.length}),this.startBatch()}}},{key:"getDebugInfo",value:function(){var r=this.atlasManager.getDebugInfo(),a=r.reduce(function(s,o){return s+o.atlasCount},0),i=this.batchDebugInfo,n=i.reduce(function(s,o){return s+o.count},0);return{atlasInfo:r,totalAtlases:a,wrappedCount:this.wrappedCount,simpleCount:this.simpleCount,batchCount:i.length,batchInfo:i,totalInstances:n}}}])}(),m0={};function x0(e,t){return Jt(e._private.rscratch,"labelWrapCachedLines",t)||[]}m0.initWebgl=function(e,t){var r=this,a=r.data.contexts[r.WEBGL];e.bgColor=function h2(e){var t=e.cy.container();return pe(t&&t.style&&t.style.backgroundColor||"white")}(r),e.webglTexSize=Math.min(e.webglTexSize,a.getParameter(a.MAX_TEXTURE_SIZE)),e.webglTexRows=Math.min(e.webglTexRows,54),e.webglTexRowsNodes=Math.min(e.webglTexRowsNodes,54),e.webglBatchSize=Math.min(e.webglBatchSize,16384),e.webglTexPerBatch=Math.min(e.webglTexPerBatch,a.getParameter(a.MAX_TEXTURE_IMAGE_UNITS)),r.webglDebug=e.webglDebug,r.webglDebugShowAtlases=e.webglDebugShowAtlases,r.pickingFrameBuffer=function Zp(e){var t=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,t);var r=e.createTexture();return e.bindTexture(e.TEXTURE_2D,r),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,r,0),e.bindFramebuffer(e.FRAMEBUFFER,null),t.setFramebufferAttachmentSizes=function(a,i){e.bindTexture(e.TEXTURE_2D,r),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,a,i,0,e.RGBA,e.UNSIGNED_BYTE,null)},t}(a),r.pickingFrameBuffer.needsDraw=!0,r.drawing=new c2(r,a,e);var i=function(p){return function(x){return r.getTextAngle(x,p)}},n=function(p){return function(x){var k=x.pstyle(p);return k&&k.value}},s=function(p){return function(x){return x.pstyle("".concat(p,"-opacity")).value>0}},o=function(p){return"yes"===p.pstyle("text-events").strValue?2:1},u=function(p){var x=p.position(),k=x.x,_=x.y,U=p.outerWidth(),O=p.outerHeight();return{w:U,h:O,x1:k-U/2,y1:_-O/2}};r.drawing.addAtlasCollection("node",{texRows:e.webglTexRowsNodes}),r.drawing.addAtlasCollection("label",{texRows:e.webglTexRows}),r.drawing.addTextureAtlasRenderType("node-body",{collection:"node",getKey:t.getStyleKey,getBoundingBox:t.getElementBox,drawElement:t.drawElement}),r.drawing.addSimpleShapeRenderType("node-body",{getBoundingBox:u,isSimple:$p,shapeProps:{shape:"shape",color:"background-color",opacity:"background-opacity",radius:"corner-radius",border:!0}}),r.drawing.addSimpleShapeRenderType("node-overlay",{getBoundingBox:u,isVisible:s("overlay"),shapeProps:{shape:"overlay-shape",color:"overlay-color",opacity:"overlay-opacity",padding:"overlay-padding",radius:"overlay-corner-radius"}}),r.drawing.addSimpleShapeRenderType("node-underlay",{getBoundingBox:u,isVisible:s("underlay"),shapeProps:{shape:"underlay-shape",color:"underlay-color",opacity:"underlay-opacity",padding:"underlay-padding",radius:"underlay-corner-radius"}}),r.drawing.addTextureAtlasRenderType("label",{collection:"label",getTexPickingMode:o,getKey:th(t.getLabelKey,null),getBoundingBox:eh(t.getLabelBox,null),drawClipped:!0,drawElement:t.drawLabel,getRotation:i(null),getRotationPoint:t.getLabelRotationPoint,getRotationOffset:t.getLabelRotationOffset,isVisible:n("label")}),r.drawing.addTextureAtlasRenderType("edge-source-label",{collection:"label",getTexPickingMode:o,getKey:th(t.getSourceLabelKey,"source"),getBoundingBox:eh(t.getSourceLabelBox,"source"),drawClipped:!0,drawElement:t.drawSourceLabel,getRotation:i("source"),getRotationPoint:t.getSourceLabelRotationPoint,getRotationOffset:t.getSourceLabelRotationOffset,isVisible:n("source-label")}),r.drawing.addTextureAtlasRenderType("edge-target-label",{collection:"label",getTexPickingMode:o,getKey:th(t.getTargetLabelKey,"target"),getBoundingBox:eh(t.getTargetLabelBox,"target"),drawClipped:!0,drawElement:t.drawTargetLabel,getRotation:i("target"),getRotationPoint:t.getTargetLabelRotationPoint,getRotationOffset:t.getTargetLabelRotationOffset,isVisible:n("target-label")});var h=zr(function(){console.log("garbage collect flag set"),r.data.gc=!0},1e4);r.onUpdateEleCalcs(function(f,p){var x=!1;p&&p.length>0&&(x|=r.drawing.invalidate(p)),x&&h()}),function u2(e){var t=e.render;e.render=function(n){n=n||{},e.webgl&&(e.cy.zoom()>7.99?(function d2(e){var t=e.data.contexts[e.WEBGL];t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT)}(e),t.call(e,n)):(function f2(e){var t=function(a){a.save(),a.setTransform(1,0,0,1,0,0),a.clearRect(0,0,e.canvasWidth,e.canvasHeight),a.restore()};t(e.data.contexts[e.NODE]),t(e.data.contexts[e.DRAG])}(e),_0(e,n,Eo.SCREEN)))};var r=e.matchCanvasSize;e.matchCanvasSize=function(n){r.call(e,n),e.pickingFrameBuffer.setFramebufferAttachmentSizes(e.canvasWidth,e.canvasHeight),e.pickingFrameBuffer.needsDraw=!0},e.findNearestElements=function(n,s,o,u){return function x2(e,t,r){var n,s,u,a=function m2(e,t,r){var n,s,h=jc(e),x=function Up(e,t,r,a,i){var s=i*r+t.y;return[a*r+t.x,s=Math.round(e.canvasHeight-s)]}(e,h.pan,h.zoom,t,r),k=Rt(x,2);n=k[0]-3,s=k[1]-3;var K=e.data.contexts[e.WEBGL];K.bindFramebuffer(K.FRAMEBUFFER,e.pickingFrameBuffer),e.pickingFrameBuffer.needsDraw&&(K.viewport(0,0,K.canvas.width,K.canvas.height),_0(e,null,Eo.PICKING),e.pickingFrameBuffer.needsDraw=!1);var j=new Uint8Array(144);K.readPixels(n,s,6,6,K.RGBA,K.UNSIGNED_BYTE,j),K.bindFramebuffer(K.FRAMEBUFFER,null);for(var yt=new Set,ie=0;ie<36;ie++){var Ht=Hp(j.slice(4*ie,4*ie+4))-1;Ht>=0&&yt.add(Ht)}return yt}(e,t,r),i=e.getCachedZSortedEles(),o=$(a);try{for(o.s();!(u=o.n()).done;){var f=i[u.value];if(!n&&f.isNode()&&(n=f),!s&&f.isEdge()&&(s=f),n&&s)break}}catch(p){o.e(p)}finally{o.f()}return[n,s].filter(Boolean)}(e,n,s)};var a=e.invalidateCachedZSortedEles;e.invalidateCachedZSortedEles=function(){a.call(e),e.pickingFrameBuffer.needsDraw=!0};var i=e.notify;e.notify=function(n,s){i.call(e,n,s),"viewport"===n||"bounds"===n?e.pickingFrameBuffer.needsDraw=!0:"background"===n&&e.drawing.invalidate(s,{type:"node-body"})}}(r)};var th=function(t,r){return function(a){var i=t(a),n=x0(a,r);return n.length>1?n.map(function(s,o){return"".concat(i,"_").concat(o)}):i}},eh=function(t,r){return function(a,i){var n=t(a);if("string"==typeof i){var s=i.indexOf("_");if(s>0){var o=Number(i.substring(s+1)),u=x0(a,r),h=n.h/u.length,f=h*o;return{x1:n.x1,w:n.w,y1:n.y1+f,h,yOffset:f}}}return n}};function b0(e,t){var r=e.canvasWidth,a=e.canvasHeight,i=jc(e),n=i.pan,s=i.zoom;t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,r,a),t.translate(n.x,n.y),t.scale(s,s)}function rh(e,t,r){var a=e.drawing;t+=1,r.isNode()?(a.drawNode(r,t,"node-underlay"),a.drawNode(r,t,"node-body"),a.drawTexture(r,t,"label"),a.drawNode(r,t,"node-overlay")):(a.drawEdgeLine(r,t),a.drawEdgeArrow(r,t,"source"),a.drawEdgeArrow(r,t,"target"),a.drawTexture(r,t,"label"),a.drawTexture(r,t,"edge-source-label"),a.drawTexture(r,t,"edge-target-label"))}function _0(e,t,r){var a;e.webglDebug&&(a=performance.now());var i=e.drawing,n=0;if(r.screen&&e.data.canvasNeedsRedraw[e.SELECT_BOX]&&function p2(e,t){e.drawSelectionRectangle(t,function(r){return b0(e,r)})}(e,t),e.data.canvasNeedsRedraw[e.NODE]||r.picking){var s=e.data.contexts[e.WEBGL];r.screen?(s.clearColor(0,0,0,0),s.enable(s.BLEND),s.blendFunc(s.ONE,s.ONE_MINUS_SRC_ALPHA)):s.disable(s.BLEND),s.clear(s.COLOR_BUFFER_BIT|s.DEPTH_BUFFER_BIT),s.viewport(0,0,s.canvas.width,s.canvas.height);var o=function g2(e){var t=e.canvasWidth,r=e.canvasHeight,a=jc(e),i=a.pan,n=a.zoom,s=Xc();ul(s,s,[i.x,i.y]),Zc(s,s,[n,n]);var o=Xc();!function Jp(e,t,r){e[0]=2/t,e[1]=0,e[2]=0,e[3]=0,e[4]=-2/r,e[5]=0,e[6]=-1,e[7]=1,e[8]=1}(o,t,r);var u=Xc();return function Qp(e,t,r){var a=t[0],i=t[1],n=t[2],s=t[3],o=t[4],u=t[5],h=t[6],f=t[7],p=t[8],x=r[0],k=r[1],_=r[2],U=r[3],O=r[4],K=r[5],Y=r[6],j=r[7],yt=r[8];e[0]=x*a+k*s+_*h,e[1]=x*i+k*o+_*f,e[2]=x*n+k*u+_*p,e[3]=U*a+O*s+K*h,e[4]=U*i+O*o+K*f,e[5]=U*n+O*u+K*p,e[6]=Y*a+j*s+yt*h,e[7]=Y*i+j*o+yt*f,e[8]=Y*n+j*u+yt*p}(u,o,s),u}(e),u=e.getCachedZSortedEles();if(n=u.length,i.startFrame(o,r),r.screen){for(var h=0;h<u.nondrag.length;h++)rh(e,h,u.nondrag[h]);for(var f=0;f<u.drag.length;f++)rh(e,f,u.drag[f])}else if(r.picking)for(var p=0;p<u.length;p++)rh(e,p,u[p]);i.endFrame(),r.screen&&e.webglDebugShowAtlases&&(function v2(e){var t=e.data.contexts[e.NODE];t.save(),b0(e,t),t.strokeStyle="rgba(0, 0, 0, 0.3)",t.beginPath(),t.moveTo(-1e3,0),t.lineTo(1e3,0),t.stroke(),t.beginPath(),t.moveTo(0,-1e3),t.lineTo(0,1e3),t.stroke(),t.restore()}(e),function y2(e){var t=function(i,n,s){for(var o=i.atlasManager.getAtlasCollection(n),u=e.data.contexts[e.NODE],h=o.atlases,f=0;f<h.length;f++){var x=h[f].canvas;if(x){var k=x.width,_=x.height,U=k*f,O=x.height*s;u.save(),u.scale(.4,.4),u.drawImage(x,U,O),u.strokeStyle="black",u.rect(U,O,k,_),u.stroke(),u.restore()}}},r=0;t(e.drawing,"node",r++),t(e.drawing,"label",r++)}(e)),e.data.canvasNeedsRedraw[e.NODE]=!1,e.data.canvasNeedsRedraw[e.DRAG]=!1}if(e.webglDebug){var x=performance.now(),_=Math.ceil(x-a),U=i.getDebugInfo(),O=["".concat(n," elements"),"".concat(U.totalInstances," instances"),"".concat(U.batchCount," batches"),"".concat(U.totalAtlases," atlases"),"".concat(U.wrappedCount," wrapped textures"),"".concat(U.simpleCount," simple shapes")].join(", ");console.log("WebGL (".concat(r.name,") - frame time ").concat(_,"ms")),console.log("Totals:"),console.log("  ".concat(O)),console.log("Texture Atlases Used:");var j,Y=$(U.atlasInfo);try{for(Y.s();!(j=Y.n()).done;){var yt=j.value;console.log("  ".concat(yt.type,": ").concat(yt.keyCount," keys, ").concat(yt.atlasCount," atlases"))}}catch(ie){Y.e(ie)}finally{Y.f()}console.log("")}e.data.gc&&(console.log("Garbage Collect!"),e.data.gc=!1,i.gc())}for(var Es={drawPolygonPath:function(e,t,r,a,i,n){var s=a/2,o=i/2;e.beginPath&&e.beginPath(),e.moveTo(t+s*n[0],r+o*n[1]);for(var u=1;u<n.length/2;u++)e.lineTo(t+s*n[2*u],r+o*n[2*u+1]);e.closePath()},drawRoundPolygonPath:function(e,t,r,a,i,n,s){s.forEach(function(o){return Wd(e,o)}),e.closePath()},drawRoundRectanglePath:function(e,t,r,a,i,n){var s=a/2,o=i/2,u="auto"===n?Ui(a,i):Math.min(n,o,s);e.beginPath&&e.beginPath(),e.moveTo(t,r-o),e.arcTo(t+s,r-o,t+s,r,u),e.arcTo(t+s,r+o,t,r+o,u),e.arcTo(t-s,r+o,t-s,r,u),e.arcTo(t-s,r-o,t,r-o,u),e.lineTo(t,r-o),e.closePath()},drawBottomRoundRectanglePath:function(e,t,r,a,i,n){var s=a/2,o=i/2,u="auto"===n?Ui(a,i):n;e.beginPath&&e.beginPath(),e.moveTo(t,r-o),e.lineTo(t+s,r-o),e.lineTo(t+s,r),e.arcTo(t+s,r+o,t,r+o,u),e.arcTo(t-s,r+o,t-s,r,u),e.lineTo(t-s,r-o),e.lineTo(t,r-o),e.closePath()},drawCutRectanglePath:function(e,t,r,a,i,n,s){var o=a/2,u=i/2,h="auto"===s?8:s;e.beginPath&&e.beginPath(),e.moveTo(t-o+h,r-u),e.lineTo(t+o-h,r-u),e.lineTo(t+o,r-u+h),e.lineTo(t+o,r+u-h),e.lineTo(t+o-h,r+u),e.lineTo(t-o+h,r+u),e.lineTo(t-o,r+u-h),e.lineTo(t-o,r-u+h),e.closePath()},drawBarrelPath:function(e,t,r,a,i){var n=a/2,s=i/2,o=t-n,u=t+n,h=r-s,f=r+s,p=yl(a,i),x=p.widthOffset,k=p.heightOffset,_=p.ctrlPtOffsetPct*x;e.beginPath&&e.beginPath(),e.moveTo(o,h+k),e.lineTo(o,f-k),e.quadraticCurveTo(o+_,f,o+x,f),e.lineTo(u-x,f),e.quadraticCurveTo(u-_,f,u,f-k),e.lineTo(u,h+k),e.quadraticCurveTo(u-_,h,u-x,h),e.lineTo(o+x,h),e.quadraticCurveTo(o+_,h,o,h+k),e.closePath()}},E0=Math.sin(0),C0=Math.cos(0),ah={},ih={},k0=Math.PI/40,to=0*Math.PI;to<2*Math.PI;to+=k0)ah[to]=Math.sin(to),ih[to]=Math.cos(to);Es.drawEllipsePath=function(e,t,r,a,i){if(e.beginPath&&e.beginPath(),e.ellipse)e.ellipse(t,r,a/2,i/2,0,0,2*Math.PI);else for(var n,s,o=a/2,u=i/2,h=0*Math.PI;h<2*Math.PI;h+=k0)n=t-o*ah[h]*E0+o*ih[h]*C0,s=r+u*ih[h]*E0+u*ah[h]*C0,0===h?e.moveTo(n,s):e.lineTo(n,s);e.closePath()};var To={};function T0(e){var t=e.indexOf(",");return e.substr(t+1)}function S0(e,t,r){var a=function(){return t.toDataURL(r,e.quality)};switch(e.output){case"blob-promise":return new Ks(function(i,n){try{t.toBlob(function(s){null!=s?i(s):n(new Error("`canvas.toBlob()` sent a null value in its callback"))},r,e.quality)}catch(s){n(s)}});case"blob":return function b2(e,t){for(var r=atob(e),a=new ArrayBuffer(r.length),i=new Uint8Array(a),n=0;n<r.length;n++)i[n]=r.charCodeAt(n);return new Blob([a],{type:t})}(T0(a()),r);case"base64":return T0(a());default:return a()}}To.createBuffer=function(e,t){var r=document.createElement("canvas");return r.width=e,r.height=t,[r,r.getContext("2d")]},To.bufferCanvasImage=function(e){var t=this.cy,a=t.mutableElements().boundingBox(),i=this.findContainerClientCoords(),n=e.full?Math.ceil(a.w):i[2],s=e.full?Math.ceil(a.h):i[3],o=X(e.maxWidth)||X(e.maxHeight),u=this.getPixelRatio(),h=1;if(void 0!==e.scale)n*=e.scale,s*=e.scale,h=e.scale;else if(o){var f=1/0,p=1/0;X(e.maxWidth)&&(f=h*e.maxWidth/n),X(e.maxHeight)&&(p=h*e.maxHeight/s),n*=h=Math.min(f,p),s*=h}o||(n*=u,s*=u,h*=u);var x=document.createElement("canvas");x.width=n,x.height=s,x.style.width=n+"px",x.style.height=s+"px";var k=x.getContext("2d");if(n>0&&s>0){k.clearRect(0,0,n,s),k.globalCompositeOperation="source-over";var _=this.getCachedZSortedEles();if(e.full)k.translate(-a.x1*h,-a.y1*h),k.scale(h,h),this.drawElements(k,_),k.scale(1/h,1/h),k.translate(a.x1*h,a.y1*h);else{var U=t.pan(),O={x:U.x*h,y:U.y*h};h*=t.zoom(),k.translate(O.x,O.y),k.scale(h,h),this.drawElements(k,_),k.scale(1/h,1/h),k.translate(-O.x,-O.y)}e.bg&&(k.globalCompositeOperation="destination-over",k.fillStyle=e.bg,k.rect(0,0,n,s),k.fill())}return x},To.png=function(e){return S0(e,this.bufferCanvasImage(e),"image/png")},To.jpg=function(e){return S0(e,this.bufferCanvasImage(e),"image/jpeg")};var _2=A0,Si=A0.prototype;function A0(e){var t=this,a=t.cy.window().document;e.webgl&&(Si.CANVAS_LAYERS=t.CANVAS_LAYERS=4,console.log("webgl rendering enabled")),t.data={canvases:new Array(Si.CANVAS_LAYERS),contexts:new Array(Si.CANVAS_LAYERS),canvasNeedsRedraw:new Array(Si.CANVAS_LAYERS),bufferCanvases:new Array(Si.BUFFER_COUNT),bufferContexts:new Array(Si.CANVAS_LAYERS)};var i="-webkit-tap-highlight-color",n="rgba(0,0,0,0)";t.data.canvasContainer=a.createElement("div");var s=t.data.canvasContainer.style;t.data.canvasContainer.style[i]=n,s.position="relative",s.zIndex="0",s.overflow="hidden";var o=e.cy.container();o.appendChild(t.data.canvasContainer),o.style[i]=n;var u={"-webkit-user-select":"none","-moz-user-select":"-moz-none","user-select":"none","-webkit-tap-highlight-color":"rgba(0,0,0,0)","outline-style":"none"};Vr&&Vr.userAgent.match(/msie|trident|edge/i)&&(u["-ms-touch-action"]="none",u["touch-action"]="none");for(var h=0;h<Si.CANVAS_LAYERS;h++){var f=t.data.canvases[h]=a.createElement("canvas"),p=Si.CANVAS_TYPES[h];t.data.contexts[h]=f.getContext(p),t.data.contexts[h]||Ka("Could not create canvas of type "+p),Object.keys(u).forEach(function(Ta){f.style[Ta]=u[Ta]}),f.style.position="absolute",f.setAttribute("data-id","layer"+h),f.style.zIndex=String(Si.CANVAS_LAYERS-h),t.data.canvasContainer.appendChild(f),t.data.canvasNeedsRedraw[h]=!1}for(t.data.topCanvas=t.data.canvases[0],t.data.canvases[Si.NODE].setAttribute("data-id","layer"+Si.NODE+"-node"),t.data.canvases[Si.SELECT_BOX].setAttribute("data-id","layer"+Si.SELECT_BOX+"-selectbox"),t.data.canvases[Si.DRAG].setAttribute("data-id","layer"+Si.DRAG+"-drag"),t.data.canvases[Si.WEBGL]&&t.data.canvases[Si.WEBGL].setAttribute("data-id","layer"+Si.WEBGL+"-webgl"),h=0;h<Si.BUFFER_COUNT;h++)t.data.bufferCanvases[h]=a.createElement("canvas"),t.data.bufferContexts[h]=t.data.bufferCanvases[h].getContext("2d"),t.data.bufferCanvases[h].style.position="absolute",t.data.bufferCanvases[h].setAttribute("data-id","buffer"+h),t.data.bufferCanvases[h].style.zIndex=String(-h-1),t.data.bufferCanvases[h].style.visibility="hidden";t.pathsEnabled=!0;var x=kt(),_=function(Kr){return{x:-Kr.w/2,y:-Kr.h/2}},O=function(Kr){return Kr[0]._private.nodeKey},K=function(Kr){return Kr[0]._private.labelStyleKey},Y=function(Kr){return Kr[0]._private.sourceLabelStyleKey},j=function(Kr){return Kr[0]._private.targetLabelStyleKey},yt=function(Kr,$r,Zr,ma,Ga){return t.drawElement(Kr,$r,Zr,!1,!1,Ga)},ie=function(Kr,$r,Zr,ma,Ga){return t.drawElementText(Kr,$r,Zr,ma,"main",Ga)},se=function(Kr,$r,Zr,ma,Ga){return t.drawElementText(Kr,$r,Zr,ma,"source",Ga)},Ht=function(Kr,$r,Zr,ma,Ga){return t.drawElementText(Kr,$r,Zr,ma,"target",Ga)},he=function(Kr){return Kr.boundingBox(),Kr[0]._private.bodyBounds},me=function(Kr){return Kr.boundingBox(),Kr[0]._private.labelBounds.main||x},Te=function(Kr){return Kr.boundingBox(),Kr[0]._private.labelBounds.source||x},Be=function(Kr){return Kr.boundingBox(),Kr[0]._private.labelBounds.target||x},Me=function(Kr,$r){return $r},Oe=function(Kr){return function(Kr){return{x:(Kr.x1+Kr.x2)/2,y:(Kr.y1+Kr.y2)/2}}(he(Kr))},tr=function(Kr,$r,Zr){var ma=Kr?Kr+"-":"";return{x:$r.x+Zr.pstyle(ma+"text-margin-x").pfValue,y:$r.y+Zr.pstyle(ma+"text-margin-y").pfValue}},ur=function(Kr,$r,Zr){var ma=Kr[0]._private.rscratch;return{x:ma[$r],y:ma[Zr]}},fr=function(Kr){return tr("",ur(Kr,"labelX","labelY"),Kr)},rr=function(Kr){return tr("source",ur(Kr,"sourceLabelX","sourceLabelY"),Kr)},Cr=function(Kr){return tr("target",ur(Kr,"targetLabelX","targetLabelY"),Kr)},Ur=function(Kr){return _(he(Kr))},qr=function(Kr){return _(Te(Kr))},Dr=function(Kr){return _(Be(Kr))},Wr=function(Kr){var $r=me(Kr),Zr=_(me(Kr));if(Kr.isNode()){switch(Kr.pstyle("text-halign").value){case"left":Zr.x=-$r.w-($r.leftPad||0);break;case"right":Zr.x=-($r.rightPad||0)}switch(Kr.pstyle("text-valign").value){case"top":Zr.y=-$r.h-($r.topPad||0);break;case"bottom":Zr.y=-($r.botPad||0)}}return Zr},ga=t.data.eleTxrCache=new xo(t,{getKey:O,doesEleInvalidateKey:function(Kr){var $r=Kr[0]._private;return!($r.oldBackgroundTimestamp===$r.backgroundTimestamp)},drawElement:yt,getBoundingBox:he,getRotationPoint:Oe,getRotationOffset:Ur,allowEdgeTxrCaching:!1,allowParentTxrCaching:!1}),Ea=t.data.lblTxrCache=new xo(t,{getKey:K,drawElement:ie,getBoundingBox:me,getRotationPoint:fr,getRotationOffset:Wr,isVisible:Me}),pa=t.data.slbTxrCache=new xo(t,{getKey:Y,drawElement:se,getBoundingBox:Te,getRotationPoint:rr,getRotationOffset:qr,isVisible:Me}),Aa=t.data.tlbTxrCache=new xo(t,{getKey:j,drawElement:Ht,getBoundingBox:Be,getRotationPoint:Cr,getRotationOffset:Dr,isVisible:Me}),Ra=t.data.lyrTxrCache=new r0(t);t.onUpdateEleCalcs(function(Kr,$r){ga.invalidateElements($r),Ea.invalidateElements($r),pa.invalidateElements($r),Aa.invalidateElements($r),Ra.invalidateElements($r);for(var Zr=0;Zr<$r.length;Zr++){var ma=$r[Zr]._private;ma.oldBackgroundTimestamp=ma.backgroundTimestamp}});var Za=function(Kr){for(var $r=0;$r<Kr.length;$r++)Ra.enqueueElementRefinement(Kr[$r].ele)};ga.onDequeue(Za),Ea.onDequeue(Za),pa.onDequeue(Za),Aa.onDequeue(Za),e.webgl&&t.initWebgl(e,{getStyleKey:O,getLabelKey:K,getSourceLabelKey:Y,getTargetLabelKey:j,drawElement:yt,drawLabel:ie,drawSourceLabel:se,drawTargetLabel:Ht,getElementBox:he,getLabelBox:me,getSourceLabelBox:Te,getTargetLabelBox:Be,getElementRotationPoint:Oe,getElementRotationOffset:Ur,getLabelRotationPoint:fr,getSourceLabelRotationPoint:rr,getTargetLabelRotationPoint:Cr,getLabelRotationOffset:Wr,getSourceLabelRotationOffset:qr,getTargetLabelRotationOffset:Dr})}Si.CANVAS_LAYERS=3,Si.SELECT_BOX=0,Si.DRAG=1,Si.NODE=2,Si.WEBGL=3,Si.CANVAS_TYPES=["2d","2d","2d","webgl2"],Si.BUFFER_COUNT=3,Si.TEXTURE_BUFFER=0,Si.MOTIONBLUR_BUFFER_NODE=1,Si.MOTIONBLUR_BUFFER_DRAG=2,Si.redrawHint=function(e,t){var r=this;switch(e){case"eles":r.data.canvasNeedsRedraw[Si.NODE]=t;break;case"drag":r.data.canvasNeedsRedraw[Si.DRAG]=t;break;case"select":r.data.canvasNeedsRedraw[Si.SELECT_BOX]=t;break;case"gc":r.data.gc=!0}};var E2=typeof Path2D<"u";Si.path2dEnabled=function(e){if(void 0===e)return this.pathsEnabled;this.pathsEnabled=!!e},Si.usePaths=function(){return E2&&this.pathsEnabled},Si.setImgSmoothing=function(e,t){null!=e.imageSmoothingEnabled?e.imageSmoothingEnabled=t:(e.webkitImageSmoothingEnabled=t,e.mozImageSmoothingEnabled=t,e.msImageSmoothingEnabled=t)},Si.getImgSmoothing=function(e){return null!=e.imageSmoothingEnabled?e.imageSmoothingEnabled:e.webkitImageSmoothingEnabled||e.mozImageSmoothingEnabled||e.msImageSmoothingEnabled},Si.makeOffscreenCanvas=function(e,t){var r;return"undefined"!==(typeof OffscreenCanvas>"u"?"undefined":cr(OffscreenCanvas))?r=new OffscreenCanvas(e,t):((r=this.cy.window().document.createElement("canvas")).width=e,r.height=t),r},[i0,ns,hs,qc,Ls,_s,Nn,m0,Es,To,{nodeShapeImpl:function(e,t,r,a,i,n,s,o){switch(e){case"ellipse":return this.drawEllipsePath(t,r,a,i,n);case"polygon":return this.drawPolygonPath(t,r,a,i,n,s);case"round-polygon":return this.drawRoundPolygonPath(t,r,a,i,n,s,o);case"roundrectangle":case"round-rectangle":return this.drawRoundRectanglePath(t,r,a,i,n,o);case"cutrectangle":case"cut-rectangle":return this.drawCutRectanglePath(t,r,a,i,n,s,o);case"bottomroundrectangle":case"bottom-round-rectangle":return this.drawBottomRoundRectanglePath(t,r,a,i,n,o);case"barrel":return this.drawBarrelPath(t,r,a,i,n)}}}].forEach(function(e){G(Si,e)});var k2=[{type:"layout",extensions:j1},{type:"renderer",extensions:[{name:"null",impl:Bd},{name:"base",impl:Xd},{name:"canvas",impl:_2}]}],D0={},L0={};function B0(e,t,r){var a=r,i=function(he){_a("Can not register `"+t+"` for `"+e+"` since `"+he+"` already exists in the prototype and can not be overridden")};if("core"===e){if(po.prototype[t])return i(t);po.prototype[t]=r}else if("collection"===e){if(wn.prototype[t])return i(t);wn.prototype[t]=r}else if("layout"===e){for(var n=function(he){this.options=he,r.call(this,he),Bt(this._private)||(this._private={}),this._private.cy=he.cy,this._private.listeners=[],this.createEmitter()},s=n.prototype=Object.create(r.prototype),o=[],u=0;u<o.length;u++){var h=o[u];s[h]=s[h]||function(){return this}}s.start&&!s.run?s.run=function(){return this.start(),this}:!s.start&&s.run&&(s.start=function(){return this.run(),this});var f=r.prototype.stop;s.stop=function(){var Ht=this.options;if(Ht&&Ht.animate){var he=this.animations;if(he)for(var me=0;me<he.length;me++)he[me].stop()}return f?f.call(this):this.emit("layoutstop"),this},s.destroy||(s.destroy=function(){return this}),s.cy=function(){return this._private.cy};var p=function(he){return he._private.cy},x={addEventFields:function(he,me){me.layout=he,me.cy=p(he),me.target=he},bubble:function(){return!0},parent:function(he){return p(he)}};G(s,{createEmitter:function(){return this._private.emitter=new Vo(x,this),this},emitter:function(){return this._private.emitter},on:function(he,me){return this.emitter().on(he,me),this},one:function(he,me){return this.emitter().one(he,me),this},once:function(he,me){return this.emitter().one(he,me),this},removeListener:function(he,me){return this.emitter().removeListener(he,me),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},emit:function(he,me){return this.emitter().emit(he,me),this}}),$i.eventAliasesOn(s),a=n}else if("renderer"===e&&"null"!==t&&"base"!==t){var k=R0("renderer","base"),_=k.prototype,U=r,O=r.prototype,K=function(){k.apply(this,arguments),U.apply(this,arguments)},Y=K.prototype;for(var j in _){var yt=_[j];if(null!=O[j])return i(j);Y[j]=yt}for(var se in O)Y[se]=O[se];_.clientFunctions.forEach(function(Ht){Y[Ht]=Y[Ht]||function(){Ka("Renderer does not implement `renderer."+Ht+"()` on its prototype")}}),a=K}else if("__proto__"===e||"constructor"===e||"prototype"===e)return Ka(e+" is an illegal type to be registered, possibly lead to prototype pollutions");return Ze({map:D0,keys:[e,t],value:a})}function R0(e,t){return de({map:D0,keys:[e,t]})}function T2(e,t,r,a,i){return Ze({map:L0,keys:[e,t,r,a],value:i})}function S2(e,t,r,a){return de({map:L0,keys:[e,t,r,a]})}var nh=function(){return 2===arguments.length?R0.apply(null,arguments):3===arguments.length?B0.apply(null,arguments):4===arguments.length?S2.apply(null,arguments):5===arguments.length?T2.apply(null,arguments):void Ka("Invalid extension access syntax")};po.prototype.extension=nh,k2.forEach(function(e){e.extensions.forEach(function(t){B0(e.type,t.name,t.impl)})});var gl=function(){if(!(this instanceof gl))return new gl;this.length=0},Rs=gl.prototype;Rs.instanceString=function(){return"stylesheet"},Rs.selector=function(e){return this[this.length++]={selector:e,properties:[]},this},Rs.css=function(e,t){var r=this.length-1;if(je(e))this[r].properties.push({name:e,value:t});else if(Bt(e))for(var a=e,i=Object.keys(a),n=0;n<i.length;n++){var s=i[n],o=a[s];if(null!=o){var u=En.properties[s]||En.properties[qe(s)];null!=u&&this[r].properties.push({name:u.name,value:o})}}return this},Rs.style=Rs.css,Rs.generateStyle=function(e){var t=new En(e);return this.appendToStyle(t)},Rs.appendToStyle=function(e){for(var t=0;t<this.length;t++){var r=this[t],i=r.properties;e.selector(r.selector);for(var n=0;n<i.length;n++){var s=i[n];e.css(s.name,s.value)}}return e};var Ps=function(t){return void 0===t&&(t={}),Bt(t)?new po(t):je(t)?nh.apply(nh,arguments):void 0};Ps.use=function(e){var t=Array.prototype.slice.call(arguments,1);return t.unshift(Ps),e.apply(null,t),this},Ps.warnings=function(e){return ti(e)},Ps.version="3.33.1",Ps.stylesheet=Ps.Stylesheet=gl},18617:(Ja,vr,R)=>{"use strict";R.r(vr),R.d(vr,{diagram:()=>sr});var ot=R(89204),ee=R(80525),L=R(67040),S=R(52052),Pt=R(79006),ut=R(32303),$=R(62233),A=R(40622),At={NORMAL:0,REVERSE:1,HIGHLIGHT:2,MERGE:3,CHERRY_PICK:4},wt=Pt.UI.gitGraph,Ge=(0,ut.K2)(()=>(0,S.$t)({...wt,...(0,Pt.zj)().gitGraph}),"getConfig"),dt=new L.m(()=>{const te=Ge(),ne=te.mainBranchName,be=te.mainBranchOrder;return{mainBranchName:ne,commits:new Map,head:null,branchConfig:new Map([[ne,{name:ne,order:be}]]),branches:new Map([[ne,null]]),currBranch:ne,direction:"LR",seq:0,options:{}}});function Rt(){return(0,S.yT)({length:7})}function q(te,ne){const be=Object.create(null);return te.reduce((ir,g)=>{const y=ne(g);return be[y]||(be[y]=!0,ir.push(g)),ir},[])}(0,ut.K2)(Rt,"getID"),(0,ut.K2)(q,"uniqBy");var ar=(0,ut.K2)(function(te){dt.records.direction=te},"setDirection"),Ke=(0,ut.K2)(function(te){ut.Rm.debug("options str",te),te=te?.trim(),te=te||"{}";try{dt.records.options=JSON.parse(te)}catch(ne){ut.Rm.error("error while parsing gitGraph options",ne.message)}},"setOptions"),cr=(0,ut.K2)(function(){return dt.records.options},"getOptions"),Rr=(0,ut.K2)(function(te){let ne=te.msg,be=te.id;const ir=te.type;let g=te.tags;ut.Rm.info("commit",ne,be,ir,g),ut.Rm.debug("Entering commit:",ne,be,ir,g);const y=Ge();be=Pt.Y2.sanitizeText(be,y),ne=Pt.Y2.sanitizeText(ne,y),g=g?.map(I=>Pt.Y2.sanitizeText(I,y));const E={id:be||dt.records.seq+"-"+Rt(),message:ne,seq:dt.records.seq++,type:ir??At.NORMAL,tags:g??[],parents:null==dt.records.head?[]:[dt.records.head.id],branch:dt.records.currBranch};dt.records.head=E,ut.Rm.info("main branch",y.mainBranchName),dt.records.commits.has(E.id)&&ut.Rm.warn(`Commit ID ${E.id} already exists`),dt.records.commits.set(E.id,E),dt.records.branches.set(dt.records.currBranch,E.id),ut.Rm.debug("in pushCommit "+E.id)},"commit"),wr=(0,ut.K2)(function(te){let ne=te.name;const be=te.order;if(ne=Pt.Y2.sanitizeText(ne,Ge()),dt.records.branches.has(ne))throw new Error(`Trying to create an existing branch. (Help: Either use a new name if you want create a new branch or try using "checkout ${ne}")`);dt.records.branches.set(ne,null!=dt.records.head?dt.records.head.id:null),dt.records.branchConfig.set(ne,{name:ne,order:be}),Nr(ne),ut.Rm.debug("in createBranch")},"branch"),Vr=(0,ut.K2)(te=>{let ne=te.branch,be=te.id;const ir=te.type,g=te.tags,y=Ge();ne=Pt.Y2.sanitizeText(ne,y),be&&(be=Pt.Y2.sanitizeText(be,y));const E=dt.records.branches.get(dt.records.currBranch),I=dt.records.branches.get(ne),m=E?dt.records.commits.get(E):void 0,D=I?dt.records.commits.get(I):void 0;if(m&&D&&m.branch===ne)throw new Error(`Cannot merge branch '${ne}' into itself.`);if(dt.records.currBranch===ne){const C=new Error('Incorrect usage of "merge". Cannot merge a branch to itself');throw C.hash={text:`merge ${ne}`,token:`merge ${ne}`,expected:["branch abc"]},C}if(void 0===m||!m){const C=new Error(`Incorrect usage of "merge". Current branch (${dt.records.currBranch})has no commits`);throw C.hash={text:`merge ${ne}`,token:`merge ${ne}`,expected:["commit"]},C}if(!dt.records.branches.has(ne)){const C=new Error('Incorrect usage of "merge". Branch to be merged ('+ne+") does not exist");throw C.hash={text:`merge ${ne}`,token:`merge ${ne}`,expected:[`branch ${ne}`]},C}if(void 0===D||!D){const C=new Error('Incorrect usage of "merge". Branch to be merged ('+ne+") has no commits");throw C.hash={text:`merge ${ne}`,token:`merge ${ne}`,expected:['"commit"']},C}if(m===D){const C=new Error('Incorrect usage of "merge". Both branches have same head');throw C.hash={text:`merge ${ne}`,token:`merge ${ne}`,expected:["branch abc"]},C}if(be&&dt.records.commits.has(be)){const C=new Error('Incorrect usage of "merge". Commit with id:'+be+" already exists, use different custom id");throw C.hash={text:`merge ${ne} ${be} ${ir} ${g?.join(" ")}`,token:`merge ${ne} ${be} ${ir} ${g?.join(" ")}`,expected:[`merge ${ne} ${be}_UNIQUE ${ir} ${g?.join(" ")}`]},C}const v=I||"",b={id:be||`${dt.records.seq}-${Rt()}`,message:`merged branch ${ne} into ${dt.records.currBranch}`,seq:dt.records.seq++,parents:null==dt.records.head?[]:[dt.records.head.id,v],branch:dt.records.currBranch,type:At.MERGE,customType:ir,customId:!!be,tags:g??[]};dt.records.head=b,dt.records.commits.set(b.id,b),dt.records.branches.set(dt.records.currBranch,b.id),ut.Rm.debug(dt.records.branches),ut.Rm.debug("in mergeBranch")},"merge"),ra=(0,ut.K2)(function(te){let ne=te.id,be=te.targetId,ir=te.tags,g=te.parent;ut.Rm.debug("Entering cherryPick:",ne,be,ir);const y=Ge();if(ne=Pt.Y2.sanitizeText(ne,y),be=Pt.Y2.sanitizeText(be,y),ir=ir?.map(m=>Pt.Y2.sanitizeText(m,y)),g=Pt.Y2.sanitizeText(g,y),!ne||!dt.records.commits.has(ne)){const m=new Error('Incorrect usage of "cherryPick". Source commit id should exist and provided');throw m.hash={text:`cherryPick ${ne} ${be}`,token:`cherryPick ${ne} ${be}`,expected:["cherry-pick abc"]},m}const E=dt.records.commits.get(ne);if(void 0===E||!E)throw new Error('Incorrect usage of "cherryPick". Source commit id should exist and provided');if(g&&(!Array.isArray(E.parents)||!E.parents.includes(g)))throw new Error("Invalid operation: The specified parent commit is not an immediate parent of the cherry-picked commit.");const I=E.branch;if(E.type===At.MERGE&&!g)throw new Error("Incorrect usage of cherry-pick: If the source commit is a merge commit, an immediate parent commit must be specified.");if(!be||!dt.records.commits.has(be)){if(I===dt.records.currBranch){const b=new Error('Incorrect usage of "cherryPick". Source commit is already on current branch');throw b.hash={text:`cherryPick ${ne} ${be}`,token:`cherryPick ${ne} ${be}`,expected:["cherry-pick abc"]},b}const m=dt.records.branches.get(dt.records.currBranch);if(void 0===m||!m){const b=new Error(`Incorrect usage of "cherry-pick". Current branch (${dt.records.currBranch})has no commits`);throw b.hash={text:`cherryPick ${ne} ${be}`,token:`cherryPick ${ne} ${be}`,expected:["cherry-pick abc"]},b}const D=dt.records.commits.get(m);if(void 0===D||!D){const b=new Error(`Incorrect usage of "cherry-pick". Current branch (${dt.records.currBranch})has no commits`);throw b.hash={text:`cherryPick ${ne} ${be}`,token:`cherryPick ${ne} ${be}`,expected:["cherry-pick abc"]},b}const v={id:dt.records.seq+"-"+Rt(),message:`cherry-picked ${E?.message} into ${dt.records.currBranch}`,seq:dt.records.seq++,parents:null==dt.records.head?[]:[dt.records.head.id,E.id],branch:dt.records.currBranch,type:At.CHERRY_PICK,tags:ir?ir.filter(Boolean):[`cherry-pick:${E.id}${E.type===At.MERGE?`|parent:${g}`:""}`]};dt.records.head=v,dt.records.commits.set(v.id,v),dt.records.branches.set(dt.records.currBranch,v.id),ut.Rm.debug(dt.records.branches),ut.Rm.debug("in cherryPick")}},"cherryPick"),Nr=(0,ut.K2)(function(te){if(te=Pt.Y2.sanitizeText(te,Ge()),!dt.records.branches.has(te)){const ne=new Error(`Trying to checkout branch which is not yet created. (Help try using "branch ${te}")`);throw ne.hash={text:`checkout ${te}`,token:`checkout ${te}`,expected:[`branch ${te}`]},ne}{dt.records.currBranch=te;const ne=dt.records.branches.get(dt.records.currBranch);dt.records.head=void 0!==ne&&ne?dt.records.commits.get(ne)??null:null}},"checkout");function Fr(te,ne,be){const ir=te.indexOf(ne);-1===ir?te.push(be):te.splice(ir,1,be)}function Se(te){const ne=te.reduce((g,y)=>g.seq>y.seq?g:y,te[0]);let be="";te.forEach(function(g){be+=g===ne?"\t*":"\t|"});const ir=[be,ne.id,ne.seq];for(const g in dt.records.branches)dt.records.branches.get(g)===ne.id&&ir.push(g);if(ut.Rm.debug(ir.join(" ")),ne.parents&&2==ne.parents.length&&ne.parents[0]&&ne.parents[1]){const g=dt.records.commits.get(ne.parents[0]);Fr(te,ne,g),ne.parents[1]&&te.push(dt.records.commits.get(ne.parents[1]))}else{if(0==ne.parents.length)return;if(ne.parents[0]){const g=dt.records.commits.get(ne.parents[0]);Fr(te,ne,g)}}Se(te=q(te,g=>g.id))}(0,ut.K2)(Fr,"upsert"),(0,ut.K2)(Se,"prettyPrintCommitHistory");var Or=(0,ut.K2)(function(){ut.Rm.debug(dt.records.commits),Se([we()[0]])},"prettyPrint"),je=(0,ut.K2)(function(){dt.reset(),(0,Pt.IU)()},"clear"),z=(0,ut.K2)(function(){return[...dt.records.branchConfig.values()].map((ne,be)=>null!=ne.order?ne:{...ne,order:parseFloat(`0.${be}`)}).sort((ne,be)=>(ne.order??0)-(be.order??0)).map(({name:ne})=>({name:ne}))},"getBranchesAsObjArray"),ft=(0,ut.K2)(function(){return dt.records.branches},"getBranches"),Bt=(0,ut.K2)(function(){return dt.records.commits},"getCommits"),we=(0,ut.K2)(function(){const te=[...dt.records.commits.values()];return te.forEach(function(ne){ut.Rm.debug(ne.id)}),te.sort((ne,be)=>ne.seq-be.seq),te},"getCommitsArray"),re={commitType:At,getConfig:Ge,setDirection:ar,setOptions:Ke,getOptions:cr,commit:Rr,branch:wr,merge:Vr,cherryPick:ra,checkout:Nr,prettyPrint:Or,clear:je,getBranchesAsObjArray:z,getBranches:ft,getCommits:Bt,getCommitsArray:we,getCurrentBranch:(0,ut.K2)(function(){return dt.records.currBranch},"getCurrentBranch"),getDirection:(0,ut.K2)(function(){return dt.records.direction},"getDirection"),getHead:(0,ut.K2)(function(){return dt.records.head},"getHead"),setAccTitle:Pt.SV,getAccTitle:Pt.iN,getAccDescription:Pt.m7,setAccDescription:Pt.EI,setDiagramTitle:Pt.ke,getDiagramTitle:Pt.ab},It=(0,ut.K2)((te,ne)=>{(0,ee.S)(te,ne),te.dir&&ne.setDirection(te.dir);for(const be of te.statements)qt(be,ne)},"populate"),qt=(0,ut.K2)((te,ne)=>{const ir={Commit:(0,ut.K2)(g=>ne.commit(V(g)),"Commit"),Branch:(0,ut.K2)(g=>ne.branch(pt(g)),"Branch"),Merge:(0,ut.K2)(g=>ne.merge(H(g)),"Merge"),Checkout:(0,ut.K2)(g=>ne.checkout(Nt(g)),"Checkout"),CherryPicking:(0,ut.K2)(g=>ne.cherryPick(St(g)),"CherryPicking")}[te.$type];ir?ir(te):ut.Rm.error(`Unknown statement type: ${te.$type}`)},"parseStatement"),V=(0,ut.K2)(te=>({id:te.id,msg:te.message??"",type:void 0!==te.type?At[te.type]:At.NORMAL,tags:te.tags??void 0}),"parseCommit"),pt=(0,ut.K2)(te=>({name:te.name,order:te.order??0}),"parseBranch"),H=(0,ut.K2)(te=>({branch:te.branch,id:te.id??"",type:void 0!==te.type?At[te.type]:void 0,tags:te.tags??void 0}),"parseMerge"),Nt=(0,ut.K2)(te=>te.branch,"parseCheckout"),St=(0,ut.K2)(te=>({id:te.id,targetId:"",tags:0===te.tags?.length?void 0:te.tags,parent:te.parent}),"parseCherryPicking"),$t={parse:(0,ut.K2)(function(){var te=(0,ot.A)(function*(ne){const be=yield(0,$.qg)("gitGraph",ne);ut.Rm.debug(be),It(be,re)});return function(ne){return te.apply(this,arguments)}}(),"parse")},ye=(0,Pt.D7)(),le=ye?.gitGraph,Tt=new Map,B=new Map,et=new Map,mt=[],it=0,rt="LR",_t=(0,ut.K2)(()=>{Tt.clear(),B.clear(),et.clear(),it=0,mt=[],rt="LR"},"clear"),ht=(0,ut.K2)(te=>{const ne=document.createElementNS("http://www.w3.org/2000/svg","text");return("string"==typeof te?te.split(/\\n|\n|<br\s*\/?>/gi):te).forEach(ir=>{const g=document.createElementNS("http://www.w3.org/2000/svg","tspan");g.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),g.setAttribute("dy","1em"),g.setAttribute("x","0"),g.setAttribute("class","row"),g.textContent=ir.trim(),ne.appendChild(g)}),ne},"drawText"),Ft=(0,ut.K2)(te=>{let ne,be,ir;return"BT"===rt?(be=(0,ut.K2)((g,y)=>g<=y,"comparisonFunc"),ir=1/0):(be=(0,ut.K2)((g,y)=>g>=y,"comparisonFunc"),ir=0),te.forEach(g=>{const y="TB"===rt||"BT"==rt?B.get(g)?.y:B.get(g)?.x;void 0!==y&&be(y,ir)&&(ne=g,ir=y)}),ne},"findClosestParent"),G=(0,ut.K2)(te=>{let ne="",be=1/0;return te.forEach(ir=>{const g=B.get(ir).y;g<=be&&(ne=ir,be=g)}),ne||void 0},"findClosestParentBT"),lt=(0,ut.K2)((te,ne,be)=>{let ir=be,g=be;const y=[];te.forEach(E=>{const I=ne.get(E);if(!I)throw new Error(`Commit not found for key ${E}`);I.parents.length?(ir=Mt(I),g=Math.max(ir,g)):y.push(I),Zt(I,ir)}),ir=g,y.forEach(E=>{pe(E,ir,be)}),te.forEach(E=>{const I=ne.get(E);if(I?.parents.length){const m=G(I.parents);ir=B.get(m).y-40,ir<=g&&(g=ir);const D=Tt.get(I.branch).pos;B.set(I.id,{x:D,y:ir-10})}})},"setParallelBTPos"),ke=(0,ut.K2)(te=>{const ne=Ft(te.parents.filter(ir=>null!==ir));if(!ne)throw new Error(`Closest parent not found for commit ${te.id}`);const be=B.get(ne)?.y;if(void 0===be)throw new Error(`Closest parent position not found for commit ${te.id}`);return be},"findClosestParentPos"),Mt=(0,ut.K2)(te=>ke(te)+40,"calculateCommitPosition"),Zt=(0,ut.K2)((te,ne)=>{const be=Tt.get(te.branch);if(!be)throw new Error(`Branch not found for commit ${te.id}`);const ir=be.pos,g=ne+10;return B.set(te.id,{x:ir,y:g}),{x:ir,y:g}},"setCommitPosition"),pe=(0,ut.K2)((te,ne,be)=>{const ir=Tt.get(te.branch);if(!ir)throw new Error(`Branch not found for commit ${te.id}`);B.set(te.id,{x:ir.pos,y:ne+be})},"setRootPosition"),Re=(0,ut.K2)((te,ne,be,ir,g,y)=>{if(y===At.HIGHLIGHT)te.append("rect").attr("x",be.x-10).attr("y",be.y-10).attr("width",20).attr("height",20).attr("class",`commit ${ne.id} commit-highlight${g%8} ${ir}-outer`),te.append("rect").attr("x",be.x-6).attr("y",be.y-6).attr("width",12).attr("height",12).attr("class",`commit ${ne.id} commit${g%8} ${ir}-inner`);else if(y===At.CHERRY_PICK)te.append("circle").attr("cx",be.x).attr("cy",be.y).attr("r",10).attr("class",`commit ${ne.id} ${ir}`),te.append("circle").attr("cx",be.x-3).attr("cy",be.y+2).attr("r",2.75).attr("fill","#fff").attr("class",`commit ${ne.id} ${ir}`),te.append("circle").attr("cx",be.x+3).attr("cy",be.y+2).attr("r",2.75).attr("fill","#fff").attr("class",`commit ${ne.id} ${ir}`),te.append("line").attr("x1",be.x+3).attr("y1",be.y+1).attr("x2",be.x).attr("y2",be.y-5).attr("stroke","#fff").attr("class",`commit ${ne.id} ${ir}`),te.append("line").attr("x1",be.x-3).attr("y1",be.y+1).attr("x2",be.x).attr("y2",be.y-5).attr("stroke","#fff").attr("class",`commit ${ne.id} ${ir}`);else{const E=te.append("circle");if(E.attr("cx",be.x),E.attr("cy",be.y),E.attr("r",ne.type===At.MERGE?9:10),E.attr("class",`commit ${ne.id} commit${g%8}`),y===At.MERGE){const I=te.append("circle");I.attr("cx",be.x),I.attr("cy",be.y),I.attr("r",6),I.attr("class",`commit ${ir} ${ne.id} commit${g%8}`)}y===At.REVERSE&&te.append("path").attr("d",`M ${be.x-5},${be.y-5}L${be.x+5},${be.y+5}M${be.x-5},${be.y+5}L${be.x+5},${be.y-5}`).attr("class",`commit ${ir} ${ne.id} commit${g%8}`)}},"drawCommitBullet"),Ze=(0,ut.K2)((te,ne,be,ir)=>{if(ne.type!==At.CHERRY_PICK&&(ne.customId&&ne.type===At.MERGE||ne.type!==At.MERGE)&&le?.showCommitLabel){const g=te.append("g"),y=g.insert("rect").attr("class","commit-label-bkg"),E=g.append("text").attr("x",ir).attr("y",be.y+25).attr("class","commit-label").text(ne.id),I=E.node()?.getBBox();I&&(y.attr("x",be.posWithOffset-I.width/2-2).attr("y",be.y+13.5).attr("width",I.width+4).attr("height",I.height+4),"TB"===rt||"BT"===rt?(y.attr("x",be.x-(I.width+16+5)).attr("y",be.y-12),E.attr("x",be.x-(I.width+16)).attr("y",be.y+I.height-12)):E.attr("x",be.posWithOffset-I.width/2),le.rotateCommitLabel)&&("TB"===rt||"BT"===rt?(E.attr("transform","rotate(-45, "+be.x+", "+be.y+")"),y.attr("transform","rotate(-45, "+be.x+", "+be.y+")")):g.attr("transform","translate("+(-7.5-(I.width+10)/25*9.5)+", "+(10+I.width/25*8.5)+") rotate(-45, "+ir+", "+be.y+")"))}},"drawCommitLabel"),de=(0,ut.K2)((te,ne,be,ir)=>{if(ne.tags.length>0){let g=0,y=0,E=0;const I=[];for(const m of ne.tags.reverse()){const D=te.insert("polygon"),v=te.append("circle"),b=te.append("text").attr("y",be.y-16-g).attr("class","tag-label").text(m),C=b.node()?.getBBox();if(!C)throw new Error("Tag bbox not found");y=Math.max(y,C.width),E=Math.max(E,C.height),b.attr("x",be.posWithOffset-C.width/2),I.push({tag:b,hole:v,rect:D,yOffset:g}),g+=20}for(const{tag:m,hole:D,rect:v,yOffset:b}of I){const C=E/2,P=be.y-19.2-b;if(v.attr("class","tag-label-bkg").attr("points",`\n      ${ir-y/2-2},${P+2}  \n      ${ir-y/2-2},${P-2}\n      ${be.posWithOffset-y/2-4},${P-C-2}\n      ${be.posWithOffset+y/2+4},${P-C-2}\n      ${be.posWithOffset+y/2+4},${P+C+2}\n      ${be.posWithOffset-y/2-4},${P+C+2}`),D.attr("cy",P).attr("cx",ir-y/2+2).attr("r",1.5).attr("class","tag-hole"),"TB"===rt||"BT"===rt){const Q=ir+b;v.attr("class","tag-label-bkg").attr("points",`\n        ${be.x},${Q+2}\n        ${be.x},${Q-2}\n        ${be.x+10},${Q-C-2}\n        ${be.x+10+y+4},${Q-C-2}\n        ${be.x+10+y+4},${Q+C+2}\n        ${be.x+10},${Q+C+2}`).attr("transform","translate(12,12) rotate(45, "+be.x+","+ir+")"),D.attr("cx",be.x+2).attr("cy",Q).attr("transform","translate(12,12) rotate(45, "+be.x+","+ir+")"),m.attr("x",be.x+5).attr("y",Q+3).attr("transform","translate(14,14) rotate(45, "+be.x+","+ir+")")}}}},"drawCommitTags"),mr=(0,ut.K2)(te=>{switch(te.customType??te.type){case At.NORMAL:return"commit-normal";case At.REVERSE:return"commit-reverse";case At.HIGHLIGHT:return"commit-highlight";case At.MERGE:return"commit-merge";case At.CHERRY_PICK:return"commit-cherry-pick";default:return"commit-normal"}},"getCommitClassType"),xr=(0,ut.K2)((te,ne,be,ir)=>{const g={x:0,y:0};if(!(te.parents.length>0))return"TB"===ne?30:"BT"===ne?(ir.get(te.id)??g).y-40:0;{const y=Ft(te.parents);if(y){const E=ir.get(y)??g;return"TB"===ne?E.y+40:"BT"===ne?(ir.get(te.id)??g).y-40:E.x+40}}return 0},"calculatePosition"),zt=(0,ut.K2)((te,ne,be)=>{const ir="BT"===rt&&be?ne:ne+10,g="TB"===rt||"BT"===rt?ir:Tt.get(te.branch)?.pos,y="TB"===rt||"BT"===rt?Tt.get(te.branch)?.pos:ir;if(void 0===y||void 0===g)throw new Error(`Position were undefined for commit ${te.id}`);return{x:y,y:g,posWithOffset:ir}},"getCommitPosition"),Ae=(0,ut.K2)((te,ne,be)=>{if(!le)throw new Error("GitGraph config not found");const ir=te.append("g").attr("class","commit-bullets"),g=te.append("g").attr("class","commit-labels");let y="TB"===rt||"BT"===rt?30:0;const E=[...ne.keys()],I=le?.parallelCommits??!1;let D=E.sort((0,ut.K2)((v,b)=>{const C=ne.get(v)?.seq,P=ne.get(b)?.seq;return void 0!==C&&void 0!==P?C-P:0},"sortKeys"));"BT"===rt&&(I&&lt(D,ne,y),D=D.reverse()),D.forEach(v=>{const b=ne.get(v);if(!b)throw new Error(`Commit not found for key ${v}`);I&&(y=xr(b,rt,y,B));const C=zt(b,y,I);if(be){const P=mr(b),Q=b.customType??b.type,xt=Tt.get(b.branch)?.index??0;Re(ir,b,C,P,xt,Q),Ze(g,b,C,y),de(g,b,C,y)}B.set(b.id,"TB"===rt||"BT"===rt?{x:C.x,y:C.posWithOffset}:{x:C.posWithOffset,y:C.y}),y="BT"===rt&&I?y+40:y+40+10,y>it&&(it=y)})},"drawCommits"),or=(0,ut.K2)((te,ne,be,ir,g)=>{const E=("TB"===rt||"BT"===rt?be.x<ir.x:be.y<ir.y)?ne.branch:te.branch,I=(0,ut.K2)(D=>D.branch===E,"isOnBranchToGetCurve"),m=(0,ut.K2)(D=>D.seq>te.seq&&D.seq<ne.seq,"isBetweenCommits");return[...g.values()].some(D=>m(D)&&I(D))},"shouldRerouteArrow"),ve=(0,ut.K2)((te,ne,be=0)=>{const ir=te+Math.abs(te-ne)/2;if(be>5)return ir;if(mt.every(E=>Math.abs(E-ir)>=10))return mt.push(ir),ir;const y=Math.abs(te-ne);return ve(te,ne-y/5,be+1)},"findLane"),ce=(0,ut.K2)((te,ne,be,ir)=>{const g=B.get(ne.id),y=B.get(be.id);if(void 0===g||void 0===y)throw new Error(`Commit positions not found for commits ${ne.id} and ${be.id}`);const E=or(ne,be,g,y,ir);let C,I="",m="",D=0,v=0,b=Tt.get(be.branch)?.index;if(be.type===At.MERGE&&ne.id!==be.parents[0]&&(b=Tt.get(ne.branch)?.index),E){I="A 10 10, 0, 0, 0,",m="A 10 10, 0, 0, 1,",D=10,v=10;const P=g.y<y.y?ve(g.y,y.y):ve(y.y,g.y),Q=g.x<y.x?ve(g.x,y.x):ve(y.x,g.x);"TB"===rt?g.x<y.x?C=`M ${g.x} ${g.y} L ${Q-D} ${g.y} ${m} ${Q} ${g.y+v} L ${Q} ${y.y-D} ${I} ${Q+v} ${y.y} L ${y.x} ${y.y}`:(b=Tt.get(ne.branch)?.index,C=`M ${g.x} ${g.y} L ${Q+D} ${g.y} ${I} ${Q} ${g.y+v} L ${Q} ${y.y-D} ${m} ${Q-v} ${y.y} L ${y.x} ${y.y}`):"BT"===rt?g.x<y.x?C=`M ${g.x} ${g.y} L ${Q-D} ${g.y} ${I} ${Q} ${g.y-v} L ${Q} ${y.y+D} ${m} ${Q+v} ${y.y} L ${y.x} ${y.y}`:(b=Tt.get(ne.branch)?.index,C=`M ${g.x} ${g.y} L ${Q+D} ${g.y} ${m} ${Q} ${g.y-v} L ${Q} ${y.y+D} ${I} ${Q-v} ${y.y} L ${y.x} ${y.y}`):g.y<y.y?C=`M ${g.x} ${g.y} L ${g.x} ${P-D} ${I} ${g.x+v} ${P} L ${y.x-D} ${P} ${m} ${y.x} ${P+v} L ${y.x} ${y.y}`:(b=Tt.get(ne.branch)?.index,C=`M ${g.x} ${g.y} L ${g.x} ${P+D} ${m} ${g.x+v} ${P} L ${y.x-D} ${P} ${I} ${y.x} ${P-v} L ${y.x} ${y.y}`)}else I="A 20 20, 0, 0, 0,",m="A 20 20, 0, 0, 1,",D=20,v=20,"TB"===rt?(g.x<y.x&&(C=be.type===At.MERGE&&ne.id!==be.parents[0]?`M ${g.x} ${g.y} L ${g.x} ${y.y-D} ${I} ${g.x+v} ${y.y} L ${y.x} ${y.y}`:`M ${g.x} ${g.y} L ${y.x-D} ${g.y} ${m} ${y.x} ${g.y+v} L ${y.x} ${y.y}`),g.x>y.x&&(I="A 20 20, 0, 0, 0,",m="A 20 20, 0, 0, 1,",D=20,v=20,C=be.type===At.MERGE&&ne.id!==be.parents[0]?`M ${g.x} ${g.y} L ${g.x} ${y.y-D} ${m} ${g.x-v} ${y.y} L ${y.x} ${y.y}`:`M ${g.x} ${g.y} L ${y.x+D} ${g.y} ${I} ${y.x} ${g.y+v} L ${y.x} ${y.y}`),g.x===y.x&&(C=`M ${g.x} ${g.y} L ${y.x} ${y.y}`)):"BT"===rt?(g.x<y.x&&(C=be.type===At.MERGE&&ne.id!==be.parents[0]?`M ${g.x} ${g.y} L ${g.x} ${y.y+D} ${m} ${g.x+v} ${y.y} L ${y.x} ${y.y}`:`M ${g.x} ${g.y} L ${y.x-D} ${g.y} ${I} ${y.x} ${g.y-v} L ${y.x} ${y.y}`),g.x>y.x&&(I="A 20 20, 0, 0, 0,",m="A 20 20, 0, 0, 1,",D=20,v=20,C=be.type===At.MERGE&&ne.id!==be.parents[0]?`M ${g.x} ${g.y} L ${g.x} ${y.y+D} ${I} ${g.x-v} ${y.y} L ${y.x} ${y.y}`:`M ${g.x} ${g.y} L ${y.x-D} ${g.y} ${I} ${y.x} ${g.y-v} L ${y.x} ${y.y}`),g.x===y.x&&(C=`M ${g.x} ${g.y} L ${y.x} ${y.y}`)):(g.y<y.y&&(C=be.type===At.MERGE&&ne.id!==be.parents[0]?`M ${g.x} ${g.y} L ${y.x-D} ${g.y} ${m} ${y.x} ${g.y+v} L ${y.x} ${y.y}`:`M ${g.x} ${g.y} L ${g.x} ${y.y-D} ${I} ${g.x+v} ${y.y} L ${y.x} ${y.y}`),g.y>y.y&&(C=be.type===At.MERGE&&ne.id!==be.parents[0]?`M ${g.x} ${g.y} L ${y.x-D} ${g.y} ${I} ${y.x} ${g.y-v} L ${y.x} ${y.y}`:`M ${g.x} ${g.y} L ${g.x} ${y.y+D} ${m} ${g.x+v} ${y.y} L ${y.x} ${y.y}`),g.y===y.y&&(C=`M ${g.x} ${g.y} L ${y.x} ${y.y}`));if(void 0===C)throw new Error("Line definition not found");te.append("path").attr("d",C).attr("class","arrow arrow"+b%8)},"drawArrow"),Ee=(0,ut.K2)((te,ne)=>{const be=te.append("g").attr("class","commit-arrows");[...ne.keys()].forEach(ir=>{const g=ne.get(ir);g.parents&&g.parents.length>0&&g.parents.forEach(y=>{ce(be,ne.get(y),g,ne)})})},"drawArrows"),De=(0,ut.K2)((te,ne)=>{const be=te.append("g");ne.forEach((ir,g)=>{const y=g%8,E=Tt.get(ir.name)?.pos;if(void 0===E)throw new Error(`Position not found for branch ${ir.name}`);const I=be.append("line");I.attr("x1",0),I.attr("y1",E),I.attr("x2",it),I.attr("y2",E),I.attr("class","branch branch"+y),"TB"===rt?(I.attr("y1",30),I.attr("x1",E),I.attr("y2",it),I.attr("x2",E)):"BT"===rt&&(I.attr("y1",it),I.attr("x1",E),I.attr("y2",30),I.attr("x2",E)),mt.push(E);const D=ht(ir.name),v=be.insert("rect"),C=be.insert("g").attr("class","branchLabel").insert("g").attr("class","label branch-label"+y);C.node().appendChild(D);const P=D.getBBox();v.attr("class","branchLabelBkg label"+y).attr("rx",4).attr("ry",4).attr("x",-P.width-4-(!0===le?.rotateCommitLabel?30:0)).attr("y",-P.height/2+8).attr("width",P.width+18).attr("height",P.height+4),C.attr("transform","translate("+(-P.width-14-(!0===le?.rotateCommitLabel?30:0))+", "+(E-P.height/2-1)+")"),"TB"===rt?(v.attr("x",E-P.width/2-10).attr("y",0),C.attr("transform","translate("+(E-P.width/2-5)+", 0)")):"BT"===rt?(v.attr("x",E-P.width/2-10).attr("y",it),C.attr("transform","translate("+(E-P.width/2-5)+", "+it+")")):v.attr("transform","translate(-19, "+(E-P.height/2)+")")})},"drawBranches"),er=(0,ut.K2)(function(te,ne,be,ir,g){return Tt.set(te,{pos:ne,index:be}),ne+(50+(g?40:0)+("TB"===rt||"BT"===rt?ir.width/2:0))},"setBranchPosition"),sr={parser:$t,db:re,renderer:{draw:(0,ut.K2)(function(te,ne,be,ir){if(_t(),ut.Rm.debug("in gitgraph renderer",te+"\n","id:",ne,be),!le)throw new Error("GitGraph config not found");const g=le.rotateCommitLabel??!1,y=ir.db;et=y.getCommits();const E=y.getBranchesAsObjArray();rt=y.getDirection();const I=(0,A.Ltv)(`[id="${ne}"]`);let m=0;E.forEach((D,v)=>{const b=ht(D.name),C=I.append("g"),P=C.insert("g").attr("class","branchLabel"),Q=P.insert("g").attr("class","label branch-label");Q.node()?.appendChild(b);const xt=b.getBBox();m=er(D.name,m,v,xt,g),Q.remove(),P.remove(),C.remove()}),Ae(I,et,!1),le.showBranches&&De(I,E),Ee(I,et),Ae(I,et,!0),S._K.insertTitle(I,"gitTitleText",le.titleTopMargin??0,y.getDiagramTitle()),(0,Pt.mj)(void 0,I,le.diagramPadding,le.useMaxWidth)},"draw")},styles:(0,ut.K2)(te=>`\n  .commit-id,\n  .commit-msg,\n  .branch-label {\n    fill: lightgrey;\n    color: lightgrey;\n    font-family: 'trebuchet ms', verdana, arial, sans-serif;\n    font-family: var(--mermaid-font-family);\n  }\n  ${[0,1,2,3,4,5,6,7].map(ne=>`\n        .branch-label${ne} { fill: ${te["gitBranchLabel"+ne]}; }\n        .commit${ne} { stroke: ${te["git"+ne]}; fill: ${te["git"+ne]}; }\n        .commit-highlight${ne} { stroke: ${te["gitInv"+ne]}; fill: ${te["gitInv"+ne]}; }\n        .label${ne}  { fill: ${te["git"+ne]}; }\n        .arrow${ne} { stroke: ${te["git"+ne]}; }\n        `).join("\n")}\n\n  .branch {\n    stroke-width: 1;\n    stroke: ${te.lineColor};\n    stroke-dasharray: 2;\n  }\n  .commit-label { font-size: ${te.commitLabelFontSize}; fill: ${te.commitLabelColor};}\n  .commit-label-bkg { font-size: ${te.commitLabelFontSize}; fill: ${te.commitLabelBackground}; opacity: 0.5; }\n  .tag-label { font-size: ${te.tagLabelFontSize}; fill: ${te.tagLabelColor};}\n  .tag-label-bkg { fill: ${te.tagLabelBackground}; stroke: ${te.tagLabelBorder}; }\n  .tag-hole { fill: ${te.textColor}; }\n\n  .commit-merge {\n    stroke: ${te.primaryColor};\n    fill: ${te.primaryColor};\n  }\n  .commit-reverse {\n    stroke: ${te.primaryColor};\n    fill: ${te.primaryColor};\n    stroke-width: 3;\n  }\n  .commit-highlight-outer {\n  }\n  .commit-highlight-inner {\n    stroke: ${te.primaryColor};\n    fill: ${te.primaryColor};\n  }\n\n  .arrow { stroke-width: 8; stroke-linecap: round; fill: none}\n  .gitTitleText {\n    text-anchor: middle;\n    font-size: 18px;\n    fill: ${te.textColor};\n  }\n`,"getStyles")}},19753:(Ja,vr,R)=>{"use strict";R.d(vr,{Fr:()=>A,GX:()=>$,KX:()=>ut,WW:()=>S,ue:()=>L});var ot=R(79006),ee=R(32303),L=(0,ee.K2)(wt=>{const{handDrawnSeed:Ge}=(0,ot.D7)();return{fill:wt,hachureAngle:120,hachureGap:4,fillWeight:2,roughness:.7,stroke:wt,seed:Ge}},"solidStateFill"),S=(0,ee.K2)(wt=>{const Ge=Pt([...wt.cssCompiledStyles||[],...wt.cssStyles||[],...wt.labelStyle||[]]);return{stylesMap:Ge,stylesArray:[...Ge]}},"compileStyles"),Pt=(0,ee.K2)(wt=>{const Ge=new Map;return wt.forEach(dt=>{const[Rt,q]=dt.split(":");Ge.set(Rt.trim(),q?.trim())}),Ge},"styles2Map"),ut=(0,ee.K2)(wt=>"color"===wt||"font-size"===wt||"font-family"===wt||"font-weight"===wt||"font-style"===wt||"text-decoration"===wt||"text-align"===wt||"text-transform"===wt||"line-height"===wt||"letter-spacing"===wt||"word-spacing"===wt||"text-shadow"===wt||"text-overflow"===wt||"white-space"===wt||"word-wrap"===wt||"word-break"===wt||"overflow-wrap"===wt||"hyphens"===wt,"isLabelStyle"),$=(0,ee.K2)(wt=>{const{stylesArray:Ge}=S(wt),dt=[],Rt=[],q=[],ar=[];return Ge.forEach(Ke=>{const cr=Ke[0];ut(cr)?dt.push(Ke.join(":")+" !important"):(Rt.push(Ke.join(":")+" !important"),cr.includes("stroke")&&q.push(Ke.join(":")+" !important"),"fill"===cr&&ar.push(Ke.join(":")+" !important"))}),{labelStyles:dt.join(";"),nodeStyles:Rt.join(";"),stylesArray:Ge,borderStyles:q,backgroundStyles:ar}},"styles2String"),A=(0,ee.K2)((wt,Ge)=>{const{themeVariables:dt,handDrawnSeed:Rt}=(0,ot.D7)(),{nodeBorder:q,mainBkg:ar}=dt,{stylesMap:Ke}=S(wt);return Object.assign({roughness:.7,fill:Ke.get("fill")||ar,fillStyle:"hachure",fillWeight:4,hachureGap:5.2,stroke:Ke.get("stroke")||q,seed:Rt,strokeWidth:Ke.get("stroke-width")?.replace("px","")||1.3,fillLineDash:[0,0],strokeLineDash:At(Ke.get("stroke-dasharray"))},Ge)},"userNodeOverrides"),At=(0,ee.K2)(wt=>{if(!wt)return[0,0];const Ge=wt.trim().split(/\s+/).map(Number);if(1===Ge.length){const q=isNaN(Ge[0])?0:Ge[0];return[q,q]}return[isNaN(Ge[0])?0:Ge[0],isNaN(Ge[1])?0:Ge[1]]},"getStrokeDashArray")},24715:(Ja,vr,R)=>{"use strict";R.d(vr,{H:()=>J,r:()=>Dt});var ot=R(32303);function ee(l){return typeof l>"u"||null===l}function L(l){return"object"==typeof l&&null!==l}function S(l){return Array.isArray(l)?l:ee(l)?[]:[l]}function Pt(l,T){var N,st,bt,Ie;if(T)for(N=0,st=(Ie=Object.keys(T)).length;N<st;N+=1)l[bt=Ie[N]]=T[bt];return l}function ut(l,T){var st,N="";for(st=0;st<T;st+=1)N+=l;return N}function $(l){return 0===l&&Number.NEGATIVE_INFINITY===1/l}(0,ot.K2)(ee,"isNothing"),(0,ot.K2)(L,"isObject"),(0,ot.K2)(S,"toArray"),(0,ot.K2)(Pt,"extend"),(0,ot.K2)(ut,"repeat"),(0,ot.K2)($,"isNegativeZero");var q={isNothing:ee,isObject:L,toArray:S,repeat:ut,isNegativeZero:$,extend:Pt};function ar(l,T){var N="",st=l.reason||"(unknown reason)";return l.mark?(l.mark.name&&(N+='in "'+l.mark.name+'" '),N+="("+(l.mark.line+1)+":"+(l.mark.column+1)+")",!T&&l.mark.snippet&&(N+="\n\n"+l.mark.snippet),st+" "+N):st}function Ke(l,T){Error.call(this),this.name="YAMLException",this.reason=l,this.mark=T,this.message=ar(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack||""}(0,ot.K2)(ar,"formatError"),(0,ot.K2)(Ke,"YAMLException$1"),(Ke.prototype=Object.create(Error.prototype)).constructor=Ke,Ke.prototype.toString=(0,ot.K2)(function(T){return this.name+": "+ar(this,T)},"toString");var cr=Ke;function Rr(l,T,N,st,bt){var Ie="",Qt="",Ue=Math.floor(bt/2)-1;return st-T>Ue&&(T=st-Ue+(Ie=" ... ").length),N-st>Ue&&(N=st+Ue-(Qt=" ...").length),{str:Ie+l.slice(T,N).replace(/\t/g,"\u2192")+Qt,pos:st-T+Ie.length}}function wr(l,T){return q.repeat(" ",T-l.length)+l}function Vr(l,T){if(T=Object.create(T||null),!l.buffer)return null;T.maxLength||(T.maxLength=79),"number"!=typeof T.indent&&(T.indent=1),"number"!=typeof T.linesBefore&&(T.linesBefore=3),"number"!=typeof T.linesAfter&&(T.linesAfter=2);for(var Ie,N=/\r?\n|\r|\0/g,st=[0],bt=[],Qt=-1;Ie=N.exec(l.buffer);)bt.push(Ie.index),st.push(Ie.index+Ie[0].length),l.position<=Ie.index&&Qt<0&&(Qt=st.length-2);Qt<0&&(Qt=st.length-1);var br,Sr,Ue="",ta=Math.min(l.line+T.linesAfter,bt.length).toString().length,Ir=T.maxLength-(T.indent+ta+3);for(br=1;br<=T.linesBefore&&!(Qt-br<0);br++)Sr=Rr(l.buffer,st[Qt-br],bt[Qt-br],l.position-(st[Qt]-st[Qt-br]),Ir),Ue=q.repeat(" ",T.indent)+wr((l.line-br+1).toString(),ta)+" | "+Sr.str+"\n"+Ue;for(Sr=Rr(l.buffer,st[Qt],bt[Qt],l.position,Ir),Ue+=q.repeat(" ",T.indent)+wr((l.line+1).toString(),ta)+" | "+Sr.str+"\n",Ue+=q.repeat("-",T.indent+ta+3+Sr.pos)+"^\n",br=1;br<=T.linesAfter&&!(Qt+br>=bt.length);br++)Sr=Rr(l.buffer,st[Qt+br],bt[Qt+br],l.position-(st[Qt]-st[Qt+br]),Ir),Ue+=q.repeat(" ",T.indent)+wr((l.line+br+1).toString(),ta)+" | "+Sr.str+"\n";return Ue.replace(/\n$/,"")}(0,ot.K2)(Rr,"getLine"),(0,ot.K2)(wr,"padStart"),(0,ot.K2)(Vr,"makeSnippet");var ra=Vr,Nr=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],Fr=["scalar","sequence","mapping"];function Se(l){var T={};return null!==l&&Object.keys(l).forEach(function(N){l[N].forEach(function(st){T[String(st)]=N})}),T}function Or(l,T){if(T=T||{},Object.keys(T).forEach(function(N){if(-1===Nr.indexOf(N))throw new cr('Unknown option "'+N+'" is met in definition of "'+l+'" YAML type.')}),this.options=T,this.tag=l,this.kind=T.kind||null,this.resolve=T.resolve||function(){return!0},this.construct=T.construct||function(N){return N},this.instanceOf=T.instanceOf||null,this.predicate=T.predicate||null,this.represent=T.represent||null,this.representName=T.representName||null,this.defaultStyle=T.defaultStyle||null,this.multi=T.multi||!1,this.styleAliases=Se(T.styleAliases||null),-1===Fr.indexOf(this.kind))throw new cr('Unknown kind "'+this.kind+'" is specified for "'+l+'" YAML type.')}(0,ot.K2)(Se,"compileStyleAliases"),(0,ot.K2)(Or,"Type$1");var je=Or;function z(l,T){var N=[];return l[T].forEach(function(st){var bt=N.length;N.forEach(function(Ie,Qt){Ie.tag===st.tag&&Ie.kind===st.kind&&Ie.multi===st.multi&&(bt=Qt)}),N[bt]=st}),N}function ft(){var T,N,l={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}};function st(bt){bt.multi?(l.multi[bt.kind].push(bt),l.multi.fallback.push(bt)):l[bt.kind][bt.tag]=l.fallback[bt.tag]=bt}for((0,ot.K2)(st,"collectType"),T=0,N=arguments.length;T<N;T+=1)arguments[T].forEach(st);return l}function Bt(l){return this.extend(l)}(0,ot.K2)(z,"compileList"),(0,ot.K2)(ft,"compileMap"),(0,ot.K2)(Bt,"Schema$1"),Bt.prototype.extend=(0,ot.K2)(function(T){var N=[],st=[];if(T instanceof je)st.push(T);else if(Array.isArray(T))st=st.concat(T);else{if(!T||!Array.isArray(T.implicit)&&!Array.isArray(T.explicit))throw new cr("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");T.implicit&&(N=N.concat(T.implicit)),T.explicit&&(st=st.concat(T.explicit))}N.forEach(function(Ie){if(!(Ie instanceof je))throw new cr("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(Ie.loadKind&&"scalar"!==Ie.loadKind)throw new cr("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(Ie.multi)throw new cr("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),st.forEach(function(Ie){if(!(Ie instanceof je))throw new cr("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var bt=Object.create(Bt.prototype);return bt.implicit=(this.implicit||[]).concat(N),bt.explicit=(this.explicit||[]).concat(st),bt.compiledImplicit=z(bt,"implicit"),bt.compiledExplicit=z(bt,"explicit"),bt.compiledTypeMap=ft(bt.compiledImplicit,bt.compiledExplicit),bt},"extend");var re=new Bt({explicit:[new je("tag:yaml.org,2002:str",{kind:"scalar",construct:(0,ot.K2)(function(l){return null!==l?l:""},"construct")}),new je("tag:yaml.org,2002:seq",{kind:"sequence",construct:(0,ot.K2)(function(l){return null!==l?l:[]},"construct")}),new je("tag:yaml.org,2002:map",{kind:"mapping",construct:(0,ot.K2)(function(l){return null!==l?l:{}},"construct")})]});function It(l){if(null===l)return!0;var T=l.length;return 1===T&&"~"===l||4===T&&("null"===l||"Null"===l||"NULL"===l)}function qt(){return null}function V(l){return null===l}(0,ot.K2)(It,"resolveYamlNull"),(0,ot.K2)(qt,"constructYamlNull"),(0,ot.K2)(V,"isNull");var pt=new je("tag:yaml.org,2002:null",{kind:"scalar",resolve:It,construct:qt,predicate:V,represent:{canonical:(0,ot.K2)(function(){return"~"},"canonical"),lowercase:(0,ot.K2)(function(){return"null"},"lowercase"),uppercase:(0,ot.K2)(function(){return"NULL"},"uppercase"),camelcase:(0,ot.K2)(function(){return"Null"},"camelcase"),empty:(0,ot.K2)(function(){return""},"empty")},defaultStyle:"lowercase"});function H(l){if(null===l)return!1;var T=l.length;return 4===T&&("true"===l||"True"===l||"TRUE"===l)||5===T&&("false"===l||"False"===l||"FALSE"===l)}function Nt(l){return"true"===l||"True"===l||"TRUE"===l}function St(l){return"[object Boolean]"===Object.prototype.toString.call(l)}(0,ot.K2)(H,"resolveYamlBoolean"),(0,ot.K2)(Nt,"constructYamlBoolean"),(0,ot.K2)(St,"isBoolean");var $t=new je("tag:yaml.org,2002:bool",{kind:"scalar",resolve:H,construct:Nt,predicate:St,represent:{lowercase:(0,ot.K2)(function(l){return l?"true":"false"},"lowercase"),uppercase:(0,ot.K2)(function(l){return l?"TRUE":"FALSE"},"uppercase"),camelcase:(0,ot.K2)(function(l){return l?"True":"False"},"camelcase")},defaultStyle:"lowercase"});function ye(l){return 48<=l&&l<=57||65<=l&&l<=70||97<=l&&l<=102}function le(l){return 48<=l&&l<=55}function Pe(l){return 48<=l&&l<=57}function oe(l){if(null===l)return!1;var bt,T=l.length,N=0,st=!1;if(!T)return!1;if(("-"===(bt=l[N])||"+"===bt)&&(bt=l[++N]),"0"===bt){if(N+1===T)return!0;if("b"===(bt=l[++N])){for(N++;N<T;N++)if("_"!==(bt=l[N])){if("0"!==bt&&"1"!==bt)return!1;st=!0}return st&&"_"!==bt}if("x"===bt){for(N++;N<T;N++)if("_"!==(bt=l[N])){if(!ye(l.charCodeAt(N)))return!1;st=!0}return st&&"_"!==bt}if("o"===bt){for(N++;N<T;N++)if("_"!==(bt=l[N])){if(!le(l.charCodeAt(N)))return!1;st=!0}return st&&"_"!==bt}}if("_"===bt)return!1;for(;N<T;N++)if("_"!==(bt=l[N])){if(!Pe(l.charCodeAt(N)))return!1;st=!0}return!(!st||"_"===bt)}function qe(l){var st,T=l,N=1;if(-1!==T.indexOf("_")&&(T=T.replace(/_/g,"")),("-"===(st=T[0])||"+"===st)&&("-"===st&&(N=-1),st=(T=T.slice(1))[0]),"0"===T)return 0;if("0"===st){if("b"===T[1])return N*parseInt(T.slice(2),2);if("x"===T[1])return N*parseInt(T.slice(2),16);if("o"===T[1])return N*parseInt(T.slice(2),8)}return N*parseInt(T,10)}function ze(l){return"[object Number]"===Object.prototype.toString.call(l)&&l%1==0&&!q.isNegativeZero(l)}(0,ot.K2)(ye,"isHexCode"),(0,ot.K2)(le,"isOctCode"),(0,ot.K2)(Pe,"isDecCode"),(0,ot.K2)(oe,"resolveYamlInteger"),(0,ot.K2)(qe,"constructYamlInteger"),(0,ot.K2)(ze,"isInteger");var Et=new je("tag:yaml.org,2002:int",{kind:"scalar",resolve:oe,construct:qe,predicate:ze,represent:{binary:(0,ot.K2)(function(l){return l>=0?"0b"+l.toString(2):"-0b"+l.toString(2).slice(1)},"binary"),octal:(0,ot.K2)(function(l){return l>=0?"0o"+l.toString(8):"-0o"+l.toString(8).slice(1)},"octal"),decimal:(0,ot.K2)(function(l){return l.toString(10)},"decimal"),hexadecimal:(0,ot.K2)(function(l){return l>=0?"0x"+l.toString(16).toUpperCase():"-0x"+l.toString(16).toUpperCase().slice(1)},"hexadecimal")},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),Tt=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function B(l){return!(null===l||!Tt.test(l)||"_"===l[l.length-1])}function F(l){var T,N;return N="-"===(T=l.replace(/_/g,"").toLowerCase())[0]?-1:1,"+-".indexOf(T[0])>=0&&(T=T.slice(1)),".inf"===T?1===N?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:".nan"===T?NaN:N*parseFloat(T,10)}(0,ot.K2)(B,"resolveYamlFloat"),(0,ot.K2)(F,"constructYamlFloat");var et=/^[-+]?[0-9]+e/;function mt(l,T){var N;if(isNaN(l))switch(T){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===l)switch(T){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===l)switch(T){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(q.isNegativeZero(l))return"-0.0";return N=l.toString(10),et.test(N)?N.replace("e",".e"):N}function it(l){return"[object Number]"===Object.prototype.toString.call(l)&&(l%1!=0||q.isNegativeZero(l))}(0,ot.K2)(mt,"representYamlFloat"),(0,ot.K2)(it,"isFloat");var rt=new je("tag:yaml.org,2002:float",{kind:"scalar",resolve:B,construct:F,predicate:it,represent:mt,defaultStyle:"lowercase"}),_t=re.extend({implicit:[pt,$t,Et,rt]}),ht=_t,Ft=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),G=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function lt(l){return null!==l&&(null!==Ft.exec(l)||null!==G.exec(l))}function ke(l){var T,N,st,bt,Ie,Qt,Ue,la,br=0,Sr=null;if(null===(T=Ft.exec(l))&&(T=G.exec(l)),null===T)throw new Error("Date resolve error");if(N=+T[1],st=+T[2]-1,bt=+T[3],!T[4])return new Date(Date.UTC(N,st,bt));if(Ie=+T[4],Qt=+T[5],Ue=+T[6],T[7]){for(br=T[7].slice(0,3);br.length<3;)br+="0";br=+br}return T[9]&&(Sr=6e4*(60*+T[10]+ +(T[11]||0)),"-"===T[9]&&(Sr=-Sr)),la=new Date(Date.UTC(N,st,bt,Ie,Qt,Ue,br)),Sr&&la.setTime(la.getTime()-Sr),la}function Mt(l){return l.toISOString()}(0,ot.K2)(lt,"resolveYamlTimestamp"),(0,ot.K2)(ke,"constructYamlTimestamp"),(0,ot.K2)(Mt,"representYamlTimestamp");var Zt=new je("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:lt,construct:ke,instanceOf:Date,represent:Mt});function pe(l){return"<<"===l||null===l}(0,ot.K2)(pe,"resolveYamlMerge");var Re=new je("tag:yaml.org,2002:merge",{kind:"scalar",resolve:pe}),Ze="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\n\r";function de(l){if(null===l)return!1;var T,N,st=0,bt=l.length,Ie=Ze;for(N=0;N<bt;N++)if(!((T=Ie.indexOf(l.charAt(N)))>64)){if(T<0)return!1;st+=6}return st%8==0}function mr(l){var T,N,st=l.replace(/[\r\n=]/g,""),bt=st.length,Ie=Ze,Qt=0,Ue=[];for(T=0;T<bt;T++)T%4==0&&T&&(Ue.push(Qt>>16&255),Ue.push(Qt>>8&255),Ue.push(255&Qt)),Qt=Qt<<6|Ie.indexOf(st.charAt(T));return 0==(N=bt%4*6)?(Ue.push(Qt>>16&255),Ue.push(Qt>>8&255),Ue.push(255&Qt)):18===N?(Ue.push(Qt>>10&255),Ue.push(Qt>>2&255)):12===N&&Ue.push(Qt>>4&255),new Uint8Array(Ue)}function xr(l){var st,bt,T="",N=0,Ie=l.length,Qt=Ze;for(st=0;st<Ie;st++)st%3==0&&st&&(T+=Qt[N>>18&63],T+=Qt[N>>12&63],T+=Qt[N>>6&63],T+=Qt[63&N]),N=(N<<8)+l[st];return 0==(bt=Ie%3)?(T+=Qt[N>>18&63],T+=Qt[N>>12&63],T+=Qt[N>>6&63],T+=Qt[63&N]):2===bt?(T+=Qt[N>>10&63],T+=Qt[N>>4&63],T+=Qt[N<<2&63],T+=Qt[64]):1===bt&&(T+=Qt[N>>2&63],T+=Qt[N<<4&63],T+=Qt[64],T+=Qt[64]),T}function zt(l){return"[object Uint8Array]"===Object.prototype.toString.call(l)}(0,ot.K2)(de,"resolveYamlBinary"),(0,ot.K2)(mr,"constructYamlBinary"),(0,ot.K2)(xr,"representYamlBinary"),(0,ot.K2)(zt,"isBinary");var Ae=new je("tag:yaml.org,2002:binary",{kind:"scalar",resolve:de,construct:mr,predicate:zt,represent:xr}),or=Object.prototype.hasOwnProperty,ve=Object.prototype.toString;function ce(l){if(null===l)return!0;var N,st,bt,Ie,Qt,T=[],Ue=l;for(N=0,st=Ue.length;N<st;N+=1){if(Qt=!1,"[object Object]"!==ve.call(bt=Ue[N]))return!1;for(Ie in bt)if(or.call(bt,Ie)){if(Qt)return!1;Qt=!0}if(!Qt)return!1;if(-1!==T.indexOf(Ie))return!1;T.push(Ie)}return!0}function Ee(l){return null!==l?l:[]}(0,ot.K2)(ce,"resolveYamlOmap"),(0,ot.K2)(Ee,"constructYamlOmap");var De=new je("tag:yaml.org,2002:omap",{kind:"sequence",resolve:ce,construct:Ee}),er=Object.prototype.toString;function Qe(l){if(null===l)return!0;var T,N,st,bt,Ie,Qt=l;for(Ie=new Array(Qt.length),T=0,N=Qt.length;T<N;T+=1){if("[object Object]"!==er.call(st=Qt[T])||1!==(bt=Object.keys(st)).length)return!1;Ie[T]=[bt[0],st[bt[0]]]}return!0}function Lr(l){if(null===l)return[];var T,N,st,bt,Ie,Qt=l;for(Ie=new Array(Qt.length),T=0,N=Qt.length;T<N;T+=1)st=Qt[T],bt=Object.keys(st),Ie[T]=[bt[0],st[bt[0]]];return Ie}(0,ot.K2)(Qe,"resolveYamlPairs"),(0,ot.K2)(Lr,"constructYamlPairs");var _e=new je("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:Qe,construct:Lr}),Hr=Object.prototype.hasOwnProperty;function sr(l){if(null===l)return!0;var T,N=l;for(T in N)if(Hr.call(N,T)&&null!==N[T])return!1;return!0}function te(l){return null!==l?l:{}}(0,ot.K2)(sr,"resolveYamlSet"),(0,ot.K2)(te,"constructYamlSet");var ne=new je("tag:yaml.org,2002:set",{kind:"mapping",resolve:sr,construct:te}),be=ht.extend({implicit:[Zt,Re],explicit:[Ae,De,_e,ne]}),ir=Object.prototype.hasOwnProperty,b=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,C=/[\x85\u2028\u2029]/,P=/[,\[\]\{\}]/,Q=/^(?:!|!!|![a-z\-]+!)$/i,xt=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function Vt(l){return Object.prototype.toString.call(l)}function jt(l){return 10===l||13===l}function Ut(l){return 9===l||32===l}function Wt(l){return 9===l||32===l||10===l||13===l}function xe(l){return 44===l||91===l||93===l||123===l||125===l}function Xe(l){var T;return 48<=l&&l<=57?l-48:97<=(T=32|l)&&T<=102?T-97+10:-1}function We(l){return 120===l?2:117===l?4:85===l?8:0}function gr(l){return 48<=l&&l<=57?l-48:-1}function hr(l){return 48===l?"\0":97===l?"\x07":98===l?"\b":116===l||9===l?"\t":110===l?"\n":118===l?"\v":102===l?"\f":114===l?"\r":101===l?"\x1b":32===l?" ":34===l?'"':47===l?"/":92===l?"\\":78===l?"\x85":95===l?"\xa0":76===l?"\u2028":80===l?"\u2029":""}function _r(l){return l<=65535?String.fromCharCode(l):String.fromCharCode(55296+(l-65536>>10),56320+(l-65536&1023))}(0,ot.K2)(Vt,"_class"),(0,ot.K2)(jt,"is_EOL"),(0,ot.K2)(Ut,"is_WHITE_SPACE"),(0,ot.K2)(Wt,"is_WS_OR_EOL"),(0,ot.K2)(xe,"is_FLOW_INDICATOR"),(0,ot.K2)(Xe,"fromHexCode"),(0,ot.K2)(We,"escapedHexLen"),(0,ot.K2)(gr,"fromDecimalCode"),(0,ot.K2)(hr,"simpleEscapeSequence"),(0,ot.K2)(_r,"charFromCodepoint");var Ar,$e=new Array(256),He=new Array(256);for(Ar=0;Ar<256;Ar++)$e[Ar]=hr(Ar)?1:0,He[Ar]=hr(Ar);function kr(l,T){this.input=l,this.filename=T.filename||null,this.schema=T.schema||be,this.onWarning=T.onWarning||null,this.legacy=T.legacy||!1,this.json=T.json||!1,this.listener=T.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=l.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function zr(l,T){var N={name:l.filename,buffer:l.input.slice(0,-1),position:l.position,line:l.line,column:l.position-l.lineStart};return N.snippet=ra(N),new cr(T,N)}function Er(l,T){throw zr(l,T)}function Jr(l,T){l.onWarning&&l.onWarning.call(null,zr(l,T))}(0,ot.K2)(kr,"State$1"),(0,ot.K2)(zr,"generateError"),(0,ot.K2)(Er,"throwError"),(0,ot.K2)(Jr,"throwWarning");var Br={YAML:(0,ot.K2)(function(T,N,st){var bt,Ie,Qt;null!==T.version&&Er(T,"duplication of %YAML directive"),1!==st.length&&Er(T,"YAML directive accepts exactly one argument"),null===(bt=/^([0-9]+)\.([0-9]+)$/.exec(st[0]))&&Er(T,"ill-formed argument of the YAML directive"),Ie=parseInt(bt[1],10),Qt=parseInt(bt[2],10),1!==Ie&&Er(T,"unacceptable YAML version of the document"),T.version=st[0],T.checkLineBreaks=Qt<2,1!==Qt&&2!==Qt&&Jr(T,"unsupported YAML version of the document")},"handleYamlDirective"),TAG:(0,ot.K2)(function(T,N,st){var bt,Ie;2!==st.length&&Er(T,"TAG directive accepts exactly two arguments"),Ie=st[1],Q.test(bt=st[0])||Er(T,"ill-formed tag handle (first argument) of the TAG directive"),ir.call(T.tagMap,bt)&&Er(T,'there is a previously declared suffix for "'+bt+'" tag handle'),xt.test(Ie)||Er(T,"ill-formed tag prefix (second argument) of the TAG directive");try{Ie=decodeURIComponent(Ie)}catch{Er(T,"tag prefix is malformed: "+Ie)}T.tagMap[bt]=Ie},"handleTagDirective")};function ha(l,T,N,st){var bt,Ie,Qt,Ue;if(T<N){if(Ue=l.input.slice(T,N),st)for(bt=0,Ie=Ue.length;bt<Ie;bt+=1)9===(Qt=Ue.charCodeAt(bt))||32<=Qt&&Qt<=1114111||Er(l,"expected valid JSON character");else b.test(Ue)&&Er(l,"the stream contains non-printable characters");l.result+=Ue}}function ia(l,T,N,st){var bt,Ie,Qt,Ue;for(q.isObject(N)||Er(l,"cannot merge mappings; the provided source object is unacceptable"),Qt=0,Ue=(bt=Object.keys(N)).length;Qt<Ue;Qt+=1)ir.call(T,Ie=bt[Qt])||(T[Ie]=N[Ie],st[Ie]=!0)}function jr(l,T,N,st,bt,Ie,Qt,Ue,br){var Sr,ta;if(Array.isArray(bt))for(Sr=0,ta=(bt=Array.prototype.slice.call(bt)).length;Sr<ta;Sr+=1)Array.isArray(bt[Sr])&&Er(l,"nested arrays are not supported inside keys"),"object"==typeof bt&&"[object Object]"===Vt(bt[Sr])&&(bt[Sr]="[object Object]");if("object"==typeof bt&&"[object Object]"===Vt(bt)&&(bt="[object Object]"),bt=String(bt),null===T&&(T={}),"tag:yaml.org,2002:merge"===st)if(Array.isArray(Ie))for(Sr=0,ta=Ie.length;Sr<ta;Sr+=1)ia(l,T,Ie[Sr],N);else ia(l,T,Ie,N);else!l.json&&!ir.call(N,bt)&&ir.call(T,bt)&&(l.line=Qt||l.line,l.lineStart=Ue||l.lineStart,l.position=br||l.position,Er(l,"duplicated mapping key")),"__proto__"===bt?Object.defineProperty(T,bt,{configurable:!0,enumerable:!0,writable:!0,value:Ie}):T[bt]=Ie,delete N[bt];return T}function Qr(l){var T;10===(T=l.input.charCodeAt(l.position))?l.position++:13===T?(l.position++,10===l.input.charCodeAt(l.position)&&l.position++):Er(l,"a line break is expected"),l.line+=1,l.lineStart=l.position,l.firstTabInLine=-1}function lr(l,T,N){for(var st=0,bt=l.input.charCodeAt(l.position);0!==bt;){for(;Ut(bt);)9===bt&&-1===l.firstTabInLine&&(l.firstTabInLine=l.position),bt=l.input.charCodeAt(++l.position);if(T&&35===bt)do{bt=l.input.charCodeAt(++l.position)}while(10!==bt&&13!==bt&&0!==bt);if(!jt(bt))break;for(Qr(l),bt=l.input.charCodeAt(l.position),st++,l.lineIndent=0;32===bt;)l.lineIndent++,bt=l.input.charCodeAt(++l.position)}return-1!==N&&0!==st&&l.lineIndent<N&&Jr(l,"deficient indentation"),st}function dr(l){var N,T=l.position;return!(45!==(N=l.input.charCodeAt(T))&&46!==N||N!==l.input.charCodeAt(T+1)||N!==l.input.charCodeAt(T+2)||(T+=3,N=l.input.charCodeAt(T),0!==N&&!Wt(N)))}function W(l,T){1===T?l.result+=" ":T>1&&(l.result+=q.repeat("\n",T-1))}function Yt(l,T,N){var bt,Ie,Qt,Ue,br,Sr,ta,Ca,Ir=l.kind,la=l.result;if(Wt(Ca=l.input.charCodeAt(l.position))||xe(Ca)||35===Ca||38===Ca||42===Ca||33===Ca||124===Ca||62===Ca||39===Ca||34===Ca||37===Ca||64===Ca||96===Ca||(63===Ca||45===Ca)&&(Wt(bt=l.input.charCodeAt(l.position+1))||N&&xe(bt)))return!1;for(l.kind="scalar",l.result="",Ie=Qt=l.position,Ue=!1;0!==Ca;){if(58===Ca){if(Wt(bt=l.input.charCodeAt(l.position+1))||N&&xe(bt))break}else if(35===Ca){if(Wt(l.input.charCodeAt(l.position-1)))break}else{if(l.position===l.lineStart&&dr(l)||N&&xe(Ca))break;if(jt(Ca)){if(br=l.line,Sr=l.lineStart,ta=l.lineIndent,lr(l,!1,-1),l.lineIndent>=T){Ue=!0,Ca=l.input.charCodeAt(l.position);continue}l.position=Qt,l.line=br,l.lineStart=Sr,l.lineIndent=ta;break}}Ue&&(ha(l,Ie,Qt,!1),W(l,l.line-br),Ie=Qt=l.position,Ue=!1),Ut(Ca)||(Qt=l.position+1),Ca=l.input.charCodeAt(++l.position)}return ha(l,Ie,Qt,!1),!!l.result||(l.kind=Ir,l.result=la,!1)}function Ye(l,T){var N,st,bt;if(39!==(N=l.input.charCodeAt(l.position)))return!1;for(l.kind="scalar",l.result="",l.position++,st=bt=l.position;0!==(N=l.input.charCodeAt(l.position));)if(39===N){if(ha(l,st,l.position,!0),39!==(N=l.input.charCodeAt(++l.position)))return!0;st=l.position,l.position++,bt=l.position}else jt(N)?(ha(l,st,bt,!0),W(l,lr(l,!1,T)),st=bt=l.position):l.position===l.lineStart&&dr(l)?Er(l,"unexpected end of the document within a single quoted scalar"):(l.position++,bt=l.position);Er(l,"unexpected end of the stream within a single quoted scalar")}function Ne(l,T){var N,st,bt,Ie,Qt,Ue;if(34!==(Ue=l.input.charCodeAt(l.position)))return!1;for(l.kind="scalar",l.result="",l.position++,N=st=l.position;0!==(Ue=l.input.charCodeAt(l.position));){if(34===Ue)return ha(l,N,l.position,!0),l.position++,!0;if(92===Ue){if(ha(l,N,l.position,!0),jt(Ue=l.input.charCodeAt(++l.position)))lr(l,!1,T);else if(Ue<256&&$e[Ue])l.result+=He[Ue],l.position++;else if((Qt=We(Ue))>0){for(bt=Qt,Ie=0;bt>0;bt--)(Qt=Xe(Ue=l.input.charCodeAt(++l.position)))>=0?Ie=(Ie<<4)+Qt:Er(l,"expected hexadecimal character");l.result+=_r(Ie),l.position++}else Er(l,"unknown escape sequence");N=st=l.position}else jt(Ue)?(ha(l,N,st,!0),W(l,lr(l,!1,T)),N=st=l.position):l.position===l.lineStart&&dr(l)?Er(l,"unexpected end of the document within a double quoted scalar"):(l.position++,st=l.position)}Er(l,"unexpected end of the stream within a double quoted scalar")}function Tr(l,T){var st,bt,Ie,Ue,ta,Ir,la,Ca,Ba,Xa,za,Na,N=!0,Qt=l.tag,br=l.anchor,ka=Object.create(null);if(91===(Na=l.input.charCodeAt(l.position)))ta=93,Ca=!1,Ue=[];else{if(123!==Na)return!1;ta=125,Ca=!0,Ue={}}for(null!==l.anchor&&(l.anchorMap[l.anchor]=Ue),Na=l.input.charCodeAt(++l.position);0!==Na;){if(lr(l,!0,T),(Na=l.input.charCodeAt(l.position))===ta)return l.position++,l.tag=Qt,l.anchor=br,l.kind=Ca?"mapping":"sequence",l.result=Ue,!0;N?44===Na&&Er(l,"expected the node content, but found ','"):Er(l,"missed comma between flow collection entries"),za=null,Ir=la=!1,63===Na&&Wt(l.input.charCodeAt(l.position+1))&&(Ir=la=!0,l.position++,lr(l,!0,T)),st=l.line,bt=l.lineStart,Ie=l.position,ba(l,T,1,!1,!0),Xa=l.tag,Ba=l.result,lr(l,!0,T),Na=l.input.charCodeAt(l.position),(la||l.line===st)&&58===Na&&(Ir=!0,Na=l.input.charCodeAt(++l.position),lr(l,!0,T),ba(l,T,1,!1,!0),za=l.result),Ca?jr(l,Ue,ka,Xa,Ba,za,st,bt,Ie):Ue.push(Ir?jr(l,null,ka,Xa,Ba,za,st,bt,Ie):Ba),lr(l,!0,T),44===(Na=l.input.charCodeAt(l.position))?(N=!0,Na=l.input.charCodeAt(++l.position)):N=!1}Er(l,"unexpected end of the stream within a flow collection")}function yr(l,T){var N,st,ta,Ir,bt=1,Ie=!1,Qt=!1,Ue=T,br=0,Sr=!1;if(124===(Ir=l.input.charCodeAt(l.position)))st=!1;else{if(62!==Ir)return!1;st=!0}for(l.kind="scalar",l.result="";0!==Ir;)if(43===(Ir=l.input.charCodeAt(++l.position))||45===Ir)1===bt?bt=43===Ir?3:2:Er(l,"repeat of a chomping mode identifier");else{if(!((ta=gr(Ir))>=0))break;0===ta?Er(l,"bad explicit indentation width of a block scalar; it cannot be less than one"):Qt?Er(l,"repeat of an indentation width identifier"):(Ue=T+ta-1,Qt=!0)}if(Ut(Ir)){do{Ir=l.input.charCodeAt(++l.position)}while(Ut(Ir));if(35===Ir)do{Ir=l.input.charCodeAt(++l.position)}while(!jt(Ir)&&0!==Ir)}for(;0!==Ir;){for(Qr(l),l.lineIndent=0,Ir=l.input.charCodeAt(l.position);(!Qt||l.lineIndent<Ue)&&32===Ir;)l.lineIndent++,Ir=l.input.charCodeAt(++l.position);if(!Qt&&l.lineIndent>Ue&&(Ue=l.lineIndent),jt(Ir))br++;else{if(l.lineIndent<Ue){3===bt?l.result+=q.repeat("\n",Ie?1+br:br):1===bt&&Ie&&(l.result+="\n");break}for(st?Ut(Ir)?(Sr=!0,l.result+=q.repeat("\n",Ie?1+br:br)):Sr?(Sr=!1,l.result+=q.repeat("\n",br+1)):0===br?Ie&&(l.result+=" "):l.result+=q.repeat("\n",br):l.result+=q.repeat("\n",Ie?1+br:br),Ie=!0,Qt=!0,br=0,N=l.position;!jt(Ir)&&0!==Ir;)Ir=l.input.charCodeAt(++l.position);ha(l,N,l.position,!1)}}return!0}function da(l,T){var N,br,st=l.tag,bt=l.anchor,Ie=[],Ue=!1;if(-1!==l.firstTabInLine)return!1;for(null!==l.anchor&&(l.anchorMap[l.anchor]=Ie),br=l.input.charCodeAt(l.position);0!==br&&(-1!==l.firstTabInLine&&(l.position=l.firstTabInLine,Er(l,"tab characters must not be used in indentation")),45===br&&Wt(l.input.charCodeAt(l.position+1)));)if(Ue=!0,l.position++,lr(l,!0,-1)&&l.lineIndent<=T)Ie.push(null),br=l.input.charCodeAt(l.position);else if(N=l.line,ba(l,T,3,!1,!0),Ie.push(l.result),lr(l,!0,-1),br=l.input.charCodeAt(l.position),(l.line===N||l.lineIndent>T)&&0!==br)Er(l,"bad indentation of a sequence entry");else if(l.lineIndent<T)break;return!!Ue&&(l.tag=st,l.anchor=bt,l.kind="sequence",l.result=Ie,!0)}function Pa(l,T,N){var st,bt,Ie,Qt,Ue,br,Na,Sr=l.tag,ta=l.anchor,Ir={},la=Object.create(null),Ca=null,ka=null,Ba=null,Xa=!1,za=!1;if(-1!==l.firstTabInLine)return!1;for(null!==l.anchor&&(l.anchorMap[l.anchor]=Ir),Na=l.input.charCodeAt(l.position);0!==Na;){if(!Xa&&-1!==l.firstTabInLine&&(l.position=l.firstTabInLine,Er(l,"tab characters must not be used in indentation")),st=l.input.charCodeAt(l.position+1),Ie=l.line,63!==Na&&58!==Na||!Wt(st)){if(Qt=l.line,Ue=l.lineStart,br=l.position,!ba(l,N,2,!1,!0))break;if(l.line===Ie){for(Na=l.input.charCodeAt(l.position);Ut(Na);)Na=l.input.charCodeAt(++l.position);if(58===Na)Wt(Na=l.input.charCodeAt(++l.position))||Er(l,"a whitespace character is expected after the key-value separator within a block mapping"),Xa&&(jr(l,Ir,la,Ca,ka,null,Qt,Ue,br),Ca=ka=Ba=null),za=!0,Xa=!1,bt=!1,Ca=l.tag,ka=l.result;else{if(!za)return l.tag=Sr,l.anchor=ta,!0;Er(l,"can not read an implicit mapping pair; a colon is missed")}}else{if(!za)return l.tag=Sr,l.anchor=ta,!0;Er(l,"can not read a block mapping entry; a multiline key may not be an implicit key")}}else 63===Na?(Xa&&(jr(l,Ir,la,Ca,ka,null,Qt,Ue,br),Ca=ka=Ba=null),za=!0,Xa=!0,bt=!0):Xa?(Xa=!1,bt=!0):Er(l,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),l.position+=1,Na=st;if((l.line===Ie||l.lineIndent>T)&&(Xa&&(Qt=l.line,Ue=l.lineStart,br=l.position),ba(l,T,4,!0,bt)&&(Xa?ka=l.result:Ba=l.result),Xa||(jr(l,Ir,la,Ca,ka,Ba,Qt,Ue,br),Ca=ka=Ba=null),lr(l,!0,-1),Na=l.input.charCodeAt(l.position)),(l.line===Ie||l.lineIndent>T)&&0!==Na)Er(l,"bad indentation of a mapping entry");else if(l.lineIndent<T)break}return Xa&&jr(l,Ir,la,Ca,ka,null,Qt,Ue,br),za&&(l.tag=Sr,l.anchor=ta,l.kind="mapping",l.result=Ir),za}function Ia(l){var T,bt,Ie,Qt,N=!1,st=!1;if(33!==(Qt=l.input.charCodeAt(l.position)))return!1;if(null!==l.tag&&Er(l,"duplication of a tag property"),60===(Qt=l.input.charCodeAt(++l.position))?(N=!0,Qt=l.input.charCodeAt(++l.position)):33===Qt?(st=!0,bt="!!",Qt=l.input.charCodeAt(++l.position)):bt="!",T=l.position,N){do{Qt=l.input.charCodeAt(++l.position)}while(0!==Qt&&62!==Qt);l.position<l.length?(Ie=l.input.slice(T,l.position),Qt=l.input.charCodeAt(++l.position)):Er(l,"unexpected end of the stream within a verbatim tag")}else{for(;0!==Qt&&!Wt(Qt);)33===Qt&&(st?Er(l,"tag suffix cannot contain exclamation marks"):(bt=l.input.slice(T-1,l.position+1),Q.test(bt)||Er(l,"named tag handle cannot contain such characters"),st=!0,T=l.position+1)),Qt=l.input.charCodeAt(++l.position);Ie=l.input.slice(T,l.position),P.test(Ie)&&Er(l,"tag suffix cannot contain flow indicator characters")}Ie&&!xt.test(Ie)&&Er(l,"tag name cannot contain such characters: "+Ie);try{Ie=decodeURIComponent(Ie)}catch{Er(l,"tag name is malformed: "+Ie)}return N?l.tag=Ie:ir.call(l.tagMap,bt)?l.tag=l.tagMap[bt]+Ie:"!"===bt?l.tag="!"+Ie:"!!"===bt?l.tag="tag:yaml.org,2002:"+Ie:Er(l,'undeclared tag handle "'+bt+'"'),!0}function Wa(l){var T,N;if(38!==(N=l.input.charCodeAt(l.position)))return!1;for(null!==l.anchor&&Er(l,"duplication of an anchor property"),N=l.input.charCodeAt(++l.position),T=l.position;0!==N&&!Wt(N)&&!xe(N);)N=l.input.charCodeAt(++l.position);return l.position===T&&Er(l,"name of an anchor node must contain at least one character"),l.anchor=l.input.slice(T,l.position),!0}function Ma(l){var T,N,st;if(42!==(st=l.input.charCodeAt(l.position)))return!1;for(st=l.input.charCodeAt(++l.position),T=l.position;0!==st&&!Wt(st)&&!xe(st);)st=l.input.charCodeAt(++l.position);return l.position===T&&Er(l,"name of an alias node must contain at least one character"),N=l.input.slice(T,l.position),ir.call(l.anchorMap,N)||Er(l,'unidentified alias "'+N+'"'),l.result=l.anchorMap[N],lr(l,!0,-1),!0}function ba(l,T,N,st,bt){var Ie,Qt,Ue,Ir,la,Ca,ka,Ba,Xa,br=1,Sr=!1,ta=!1;if(null!==l.listener&&l.listener("open",l),l.tag=null,l.anchor=null,l.kind=null,l.result=null,Ie=Qt=Ue=4===N||3===N,st&&lr(l,!0,-1)&&(Sr=!0,l.lineIndent>T?br=1:l.lineIndent===T?br=0:l.lineIndent<T&&(br=-1)),1===br)for(;Ia(l)||Wa(l);)lr(l,!0,-1)?(Sr=!0,Ue=Ie,l.lineIndent>T?br=1:l.lineIndent===T?br=0:l.lineIndent<T&&(br=-1)):Ue=!1;if(Ue&&(Ue=Sr||bt),(1===br||4===N)&&(Ba=1===N||2===N?T:T+1,Xa=l.position-l.lineStart,1===br?Ue&&(da(l,Xa)||Pa(l,Xa,Ba))||Tr(l,Ba)?ta=!0:(Qt&&yr(l,Ba)||Ye(l,Ba)||Ne(l,Ba)?ta=!0:Ma(l)?(ta=!0,(null!==l.tag||null!==l.anchor)&&Er(l,"alias node should not have any properties")):Yt(l,Ba,1===N)&&(ta=!0,null===l.tag&&(l.tag="?")),null!==l.anchor&&(l.anchorMap[l.anchor]=l.result)):0===br&&(ta=Ue&&da(l,Xa))),null===l.tag)null!==l.anchor&&(l.anchorMap[l.anchor]=l.result);else if("?"===l.tag){for(null!==l.result&&"scalar"!==l.kind&&Er(l,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+l.kind+'"'),Ir=0,la=l.implicitTypes.length;Ir<la;Ir+=1)if((ka=l.implicitTypes[Ir]).resolve(l.result)){l.result=ka.construct(l.result),l.tag=ka.tag,null!==l.anchor&&(l.anchorMap[l.anchor]=l.result);break}}else if("!"!==l.tag){if(ir.call(l.typeMap[l.kind||"fallback"],l.tag))ka=l.typeMap[l.kind||"fallback"][l.tag];else for(ka=null,Ir=0,la=(Ca=l.typeMap.multi[l.kind||"fallback"]).length;Ir<la;Ir+=1)if(l.tag.slice(0,Ca[Ir].tag.length)===Ca[Ir].tag){ka=Ca[Ir];break}ka||Er(l,"unknown tag !<"+l.tag+">"),null!==l.result&&ka.kind!==l.kind&&Er(l,"unacceptable node kind for !<"+l.tag+'> tag; it should be "'+ka.kind+'", not "'+l.kind+'"'),ka.resolve(l.result,l.tag)?(l.result=ka.construct(l.result,l.tag),null!==l.anchor&&(l.anchorMap[l.anchor]=l.result)):Er(l,"cannot resolve a node with !<"+l.tag+"> explicit tag")}return null!==l.listener&&l.listener("close",l),null!==l.tag||null!==l.anchor||ta}function sa(l){var N,st,bt,Qt,T=l.position,Ie=!1;for(l.version=null,l.checkLineBreaks=l.legacy,l.tagMap=Object.create(null),l.anchorMap=Object.create(null);0!==(Qt=l.input.charCodeAt(l.position))&&(lr(l,!0,-1),Qt=l.input.charCodeAt(l.position),!(l.lineIndent>0||37!==Qt));){for(Ie=!0,Qt=l.input.charCodeAt(++l.position),N=l.position;0!==Qt&&!Wt(Qt);)Qt=l.input.charCodeAt(++l.position);for(bt=[],(st=l.input.slice(N,l.position)).length<1&&Er(l,"directive name must not be less than one character in length");0!==Qt;){for(;Ut(Qt);)Qt=l.input.charCodeAt(++l.position);if(35===Qt){do{Qt=l.input.charCodeAt(++l.position)}while(0!==Qt&&!jt(Qt));break}if(jt(Qt))break;for(N=l.position;0!==Qt&&!Wt(Qt);)Qt=l.input.charCodeAt(++l.position);bt.push(l.input.slice(N,l.position))}0!==Qt&&Qr(l),ir.call(Br,st)?Br[st](l,st,bt):Jr(l,'unknown document directive "'+st+'"')}lr(l,!0,-1),0===l.lineIndent&&45===l.input.charCodeAt(l.position)&&45===l.input.charCodeAt(l.position+1)&&45===l.input.charCodeAt(l.position+2)?(l.position+=3,lr(l,!0,-1)):Ie&&Er(l,"directives end mark is expected"),ba(l,l.lineIndent-1,4,!1,!0),lr(l,!0,-1),l.checkLineBreaks&&C.test(l.input.slice(T,l.position))&&Jr(l,"non-ASCII line breaks are interpreted as content"),l.documents.push(l.result),l.position===l.lineStart&&dr(l)?46===l.input.charCodeAt(l.position)&&(l.position+=3,lr(l,!0,-1)):l.position<l.length-1&&Er(l,"end of the stream or a document separator is expected")}function Sa(l,T){T=T||{},0!==(l=String(l)).length&&(10!==l.charCodeAt(l.length-1)&&13!==l.charCodeAt(l.length-1)&&(l+="\n"),65279===l.charCodeAt(0)&&(l=l.slice(1)));var N=new kr(l,T),st=l.indexOf("\0");for(-1!==st&&(N.position=st,Er(N,"null byte is not allowed in input")),N.input+="\0";32===N.input.charCodeAt(N.position);)N.lineIndent+=1,N.position+=1;for(;N.position<N.length-1;)sa(N);return N.documents}function ea(l,T,N){null!==T&&"object"==typeof T&&typeof N>"u"&&(N=T,T=null);var st=Sa(l,N);if("function"!=typeof T)return st;for(var bt=0,Ie=st.length;bt<Ie;bt+=1)T(st[bt])}function Va(l,T){var N=Sa(l,T);if(0!==N.length){if(1===N.length)return N[0];throw new cr("expected a single document in the stream, but found more")}}(0,ot.K2)(ha,"captureSegment"),(0,ot.K2)(ia,"mergeMappings"),(0,ot.K2)(jr,"storeMappingPair"),(0,ot.K2)(Qr,"readLineBreak"),(0,ot.K2)(lr,"skipSeparationSpace"),(0,ot.K2)(dr,"testDocumentSeparator"),(0,ot.K2)(W,"writeFoldedLines"),(0,ot.K2)(Yt,"readPlainScalar"),(0,ot.K2)(Ye,"readSingleQuotedScalar"),(0,ot.K2)(Ne,"readDoubleQuotedScalar"),(0,ot.K2)(Tr,"readFlowCollection"),(0,ot.K2)(yr,"readBlockScalar"),(0,ot.K2)(da,"readBlockSequence"),(0,ot.K2)(Pa,"readBlockMapping"),(0,ot.K2)(Ia,"readTagProperty"),(0,ot.K2)(Wa,"readAnchorProperty"),(0,ot.K2)(Ma,"readAlias"),(0,ot.K2)(ba,"composeNode"),(0,ot.K2)(sa,"readDocument"),(0,ot.K2)(Sa,"loadDocuments"),(0,ot.K2)(ea,"loadAll$1"),(0,ot.K2)(Va,"load$1");var nr_load=Va,Oa=Object.prototype.toString,Ka=Object.prototype.hasOwnProperty,$a={0:"\\0",7:"\\a",8:"\\b",9:"\\t",10:"\\n",11:"\\v",12:"\\f",13:"\\r",27:"\\e",34:'\\"',92:"\\\\",133:"\\N",160:"\\_",8232:"\\L",8233:"\\P"},yi=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],Ei=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function mi(l,T){var N,st,bt,Ie,Qt,Ue,br;if(null===T)return{};for(N={},bt=0,Ie=(st=Object.keys(T)).length;bt<Ie;bt+=1)Qt=st[bt],Ue=String(T[Qt]),"!!"===Qt.slice(0,2)&&(Qt="tag:yaml.org,2002:"+Qt.slice(2)),(br=l.compiledTypeMap.fallback[Qt])&&Ka.call(br.styleAliases,Ue)&&(Ue=br.styleAliases[Ue]),N[Qt]=Ue;return N}function Fa(l){var T,N,st;if(T=l.toString(16).toUpperCase(),l<=255)N="x",st=2;else if(l<=65535)N="u",st=4;else{if(!(l<=4294967295))throw new cr("code point within a string may not be greater than 0xFFFFFFFF");N="U",st=8}return"\\"+N+q.repeat("0",st-T.length)+T}function Ya(l){this.schema=l.schema||be,this.indent=Math.max(1,l.indent||2),this.noArrayIndent=l.noArrayIndent||!1,this.skipInvalid=l.skipInvalid||!1,this.flowLevel=q.isNothing(l.flowLevel)?-1:l.flowLevel,this.styleMap=mi(this.schema,l.styles||null),this.sortKeys=l.sortKeys||!1,this.lineWidth=l.lineWidth||80,this.noRefs=l.noRefs||!1,this.noCompatMode=l.noCompatMode||!1,this.condenseFlow=l.condenseFlow||!1,this.quotingType='"'===l.quotingType?2:1,this.forceQuotes=l.forceQuotes||!1,this.replacer="function"==typeof l.replacer?l.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function ni(l,T){for(var Qt,N=q.repeat(" ",T),st=0,bt=-1,Ie="",Ue=l.length;st<Ue;)-1===(bt=l.indexOf("\n",st))?(Qt=l.slice(st),st=Ue):(Qt=l.slice(st,bt+1),st=bt+1),Qt.length&&"\n"!==Qt&&(Ie+=N),Ie+=Qt;return Ie}function Mr(l,T){return"\n"+q.repeat(" ",l.indent*T)}function Pi(l,T){var N,st;for(N=0,st=l.implicitTypes.length;N<st;N+=1)if(l.implicitTypes[N].resolve(T))return!0;return!1}function ua(l){return 32===l||9===l}function ki(l){return 32<=l&&l<=126||161<=l&&l<=55295&&8232!==l&&8233!==l||57344<=l&&l<=65533&&65279!==l||65536<=l&&l<=1114111}function Bi(l){return ki(l)&&65279!==l&&13!==l&&10!==l}function Wi(l,T,N){var st=Bi(l),bt=st&&!ua(l);return(N?st:st&&44!==l&&91!==l&&93!==l&&123!==l&&125!==l)&&35!==l&&!(58===T&&!bt)||Bi(T)&&!ua(T)&&35===l||58===T&&bt}function ln(l){return ki(l)&&65279!==l&&!ua(l)&&45!==l&&63!==l&&58!==l&&44!==l&&91!==l&&93!==l&&123!==l&&125!==l&&35!==l&&38!==l&&42!==l&&33!==l&&124!==l&&61!==l&&62!==l&&39!==l&&34!==l&&37!==l&&64!==l&&96!==l}function Ji(l){return!ua(l)&&58!==l}function Oi(l,T){var st,N=l.charCodeAt(T);return N>=55296&&N<=56319&&T+1<l.length&&(st=l.charCodeAt(T+1))>=56320&&st<=57343?1024*(N-55296)+st-56320+65536:N}function zi(l){return/^\n* /.test(l)}function Un(l,T,N,st,bt,Ie,Qt,Ue){var br,Sr=0,ta=null,Ir=!1,la=!1,Ca=-1!==st,ka=-1,Ba=ln(Oi(l,0))&&Ji(Oi(l,l.length-1));if(T||Qt)for(br=0;br<l.length;Sr>=65536?br+=2:br++){if(!ki(Sr=Oi(l,br)))return 5;Ba=Ba&&Wi(Sr,ta,Ue),ta=Sr}else{for(br=0;br<l.length;Sr>=65536?br+=2:br++){if(10===(Sr=Oi(l,br)))Ir=!0,Ca&&(la=la||br-ka-1>st&&" "!==l[ka+1],ka=br);else if(!ki(Sr))return 5;Ba=Ba&&Wi(Sr,ta,Ue),ta=Sr}la=la||Ca&&br-ka-1>st&&" "!==l[ka+1]}return Ir||la?N>9&&zi(l)?5:Qt?2===Ie?5:2:la?4:3:!Ba||Qt||bt(l)?2===Ie?5:2:1}function tn(l,T,N,st,bt){l.dump=function(){if(0===T.length)return 2===l.quotingType?'""':"''";if(!l.noCompatMode&&(-1!==yi.indexOf(T)||Ei.test(T)))return 2===l.quotingType?'"'+T+'"':"'"+T+"'";var Ie=l.indent*Math.max(1,N),Qt=-1===l.lineWidth?-1:Math.max(Math.min(l.lineWidth,40),l.lineWidth-Ie),Ue=st||l.flowLevel>-1&&N>=l.flowLevel;function br(Sr){return Pi(l,Sr)}switch((0,ot.K2)(br,"testAmbiguity"),Un(T,Ue,l.indent,Qt,br,l.quotingType,l.forceQuotes&&!st,bt)){case 1:return T;case 2:return"'"+T.replace(/'/g,"''")+"'";case 3:return"|"+Fn(T,l.indent)+xn(ni(T,Ie));case 4:return">"+Fn(T,l.indent)+xn(ni(nn(T,Qt),Ie));case 5:return'"'+Rn(T)+'"';default:throw new cr("impossible error: invalid scalar style")}}()}function Fn(l,T){var N=zi(l)?String(T):"",st="\n"===l[l.length-1];return N+(!st||"\n"!==l[l.length-2]&&"\n"!==l?st?"":"-":"+")+"\n"}function xn(l){return"\n"===l[l.length-1]?l.slice(0,-1):l}function nn(l,T){for(var Ie,Qt,N=/(\n+)([^\n]*)/g,st=(Sr=void 0,Sr=l.indexOf("\n"),N.lastIndex=Sr=-1!==Sr?Sr:l.length,kn(l.slice(0,Sr),T)),bt="\n"===l[0]||" "===l[0];Qt=N.exec(l);){var br=Qt[2];Ie=" "===br[0],st+=Qt[1]+(bt||Ie||""===br?"":"\n")+kn(br,T),bt=Ie}var Sr;return st}function kn(l,T){if(""===l||" "===l[0])return l;for(var st,Ie,N=/ [^ ]/g,bt=0,Qt=0,Ue=0,br="";st=N.exec(l);)(Ue=st.index)-bt>T&&(br+="\n"+l.slice(bt,Ie=Qt>bt?Qt:Ue),bt=Ie+1),Qt=Ue;return br+="\n",(br+=l.length-bt>T&&Qt>bt?l.slice(bt,Qt)+"\n"+l.slice(Qt+1):l.slice(bt)).slice(1)}function Rn(l){for(var st,T="",N=0,bt=0;bt<l.length;N>=65536?bt+=2:bt++)N=Oi(l,bt),!(st=$a[N])&&ki(N)?(T+=l[bt],N>=65536&&(T+=l[bt+1])):T+=st||Fa(N);return T}function un(l,T,N){var Ie,Qt,Ue,st="",bt=l.tag;for(Ie=0,Qt=N.length;Ie<Qt;Ie+=1)Ue=N[Ie],l.replacer&&(Ue=l.replacer.call(N,String(Ie),Ue)),(d(l,T,Ue,!1,!1)||typeof Ue>"u"&&d(l,T,null,!1,!1))&&(""!==st&&(st+=","+(l.condenseFlow?"":" ")),st+=l.dump);l.tag=bt,l.dump="["+st+"]"}function Xi(l,T,N,st){var Qt,Ue,br,bt="",Ie=l.tag;for(Qt=0,Ue=N.length;Qt<Ue;Qt+=1)br=N[Qt],l.replacer&&(br=l.replacer.call(N,String(Qt),br)),(d(l,T+1,br,!0,!0,!1,!0)||typeof br>"u"&&d(l,T+1,null,!0,!0,!1,!0))&&((!st||""!==bt)&&(bt+=Mr(l,T)),l.dump&&10===l.dump.charCodeAt(0)?bt+="-":bt+="- ",bt+=l.dump);l.tag=Ie,l.dump=bt||"[]"}function rn(l,T,N){var Qt,Ue,br,Sr,ta,st="",bt=l.tag,Ie=Object.keys(N);for(Qt=0,Ue=Ie.length;Qt<Ue;Qt+=1)ta="",""!==st&&(ta+=", "),l.condenseFlow&&(ta+='"'),Sr=N[br=Ie[Qt]],l.replacer&&(Sr=l.replacer.call(N,br,Sr)),d(l,T,br,!1,!1)&&(l.dump.length>1024&&(ta+="? "),ta+=l.dump+(l.condenseFlow?'"':"")+":"+(l.condenseFlow?"":" "),d(l,T,Sr,!1,!1)&&(st+=ta+=l.dump));l.tag=bt,l.dump="{"+st+"}"}function Yn(l,T,N,st){var Ue,br,Sr,ta,Ir,la,bt="",Ie=l.tag,Qt=Object.keys(N);if(!0===l.sortKeys)Qt.sort();else if("function"==typeof l.sortKeys)Qt.sort(l.sortKeys);else if(l.sortKeys)throw new cr("sortKeys must be a boolean or a function");for(Ue=0,br=Qt.length;Ue<br;Ue+=1)la="",(!st||""!==bt)&&(la+=Mr(l,T)),ta=N[Sr=Qt[Ue]],l.replacer&&(ta=l.replacer.call(N,Sr,ta)),d(l,T+1,Sr,!0,!0,!0)&&((Ir=null!==l.tag&&"?"!==l.tag||l.dump&&l.dump.length>1024)&&(l.dump&&10===l.dump.charCodeAt(0)?la+="?":la+="? "),la+=l.dump,Ir&&(la+=Mr(l,T)),d(l,T+1,ta,!0,Ir)&&(l.dump&&10===l.dump.charCodeAt(0)?la+=":":la+=": ",bt+=la+=l.dump));l.tag=Ie,l.dump=bt||"{}"}function Gt(l,T,N){var st,bt,Ie,Qt,Ue,br;for(Ie=0,Qt=(bt=N?l.explicitTypes:l.implicitTypes).length;Ie<Qt;Ie+=1)if(((Ue=bt[Ie]).instanceOf||Ue.predicate)&&(!Ue.instanceOf||"object"==typeof T&&T instanceof Ue.instanceOf)&&(!Ue.predicate||Ue.predicate(T))){if(l.tag=N?Ue.multi&&Ue.representName?Ue.representName(T):Ue.tag:"?",Ue.represent){if(br=l.styleMap[Ue.tag]||Ue.defaultStyle,"[object Function]"===Oa.call(Ue.represent))st=Ue.represent(T,br);else{if(!Ka.call(Ue.represent,br))throw new cr("!<"+Ue.tag+'> tag resolver accepts not "'+br+'" style');st=Ue.represent[br](T,br)}l.dump=st}return!0}return!1}function d(l,T,N,st,bt,Ie,Qt){l.tag=null,l.dump=N,Gt(l,N,!1)||Gt(l,N,!0);var Sr,Ue=Oa.call(l.dump),br=st;st&&(st=l.flowLevel<0||l.flowLevel>T);var Ir,la,ta="[object Object]"===Ue||"[object Array]"===Ue;if(ta&&(la=-1!==(Ir=l.duplicates.indexOf(N))),(null!==l.tag&&"?"!==l.tag||la||2!==l.indent&&T>0)&&(bt=!1),la&&l.usedDuplicates[Ir])l.dump="*ref_"+Ir;else{if(ta&&la&&!l.usedDuplicates[Ir]&&(l.usedDuplicates[Ir]=!0),"[object Object]"===Ue)st&&0!==Object.keys(l.dump).length?(Yn(l,T,l.dump,bt),la&&(l.dump="&ref_"+Ir+l.dump)):(rn(l,T,l.dump),la&&(l.dump="&ref_"+Ir+" "+l.dump));else if("[object Array]"===Ue)st&&0!==l.dump.length?(Xi(l,l.noArrayIndent&&!Qt&&T>0?T-1:T,l.dump,bt),la&&(l.dump="&ref_"+Ir+l.dump)):(un(l,T,l.dump),la&&(l.dump="&ref_"+Ir+" "+l.dump));else{if("[object String]"!==Ue){if("[object Undefined]"===Ue)return!1;if(l.skipInvalid)return!1;throw new cr("unacceptable kind of an object to dump "+Ue)}"?"!==l.tag&&tn(l,l.dump,T,Ie,br)}null!==l.tag&&"?"!==l.tag&&(Sr=encodeURI("!"===l.tag[0]?l.tag.slice(1):l.tag).replace(/!/g,"%21"),Sr="!"===l.tag[0]?"!"+Sr:"tag:yaml.org,2002:"===Sr.slice(0,18)?"!!"+Sr.slice(18):"!<"+Sr+">",l.dump=Sr+" "+l.dump)}return!0}function ct(l,T){var bt,Ie,N=[],st=[];for(Xt(l,N,st),bt=0,Ie=st.length;bt<Ie;bt+=1)T.duplicates.push(N[st[bt]]);T.usedDuplicates=new Array(Ie)}function Xt(l,T,N){var st,bt,Ie;if(null!==l&&"object"==typeof l)if(-1!==(bt=T.indexOf(l)))-1===N.indexOf(bt)&&N.push(bt);else if(T.push(l),Array.isArray(l))for(bt=0,Ie=l.length;bt<Ie;bt+=1)Xt(l[bt],T,N);else for(bt=0,Ie=(st=Object.keys(l)).length;bt<Ie;bt+=1)Xt(l[st[bt]],T,N)}function nt(l,T){return function(){throw new Error("Function yaml."+l+" is removed in js-yaml 4. Use yaml."+T+" instead, which is now safe by default.")}}(0,ot.K2)(mi,"compileStyleMap"),(0,ot.K2)(Fa,"encodeHex"),(0,ot.K2)(Ya,"State"),(0,ot.K2)(ni,"indentString"),(0,ot.K2)(Mr,"generateNextLine"),(0,ot.K2)(Pi,"testImplicitResolving"),(0,ot.K2)(ua,"isWhitespace"),(0,ot.K2)(ki,"isPrintable"),(0,ot.K2)(Bi,"isNsCharOrWhitespace"),(0,ot.K2)(Wi,"isPlainSafe"),(0,ot.K2)(ln,"isPlainSafeFirst"),(0,ot.K2)(Ji,"isPlainSafeLast"),(0,ot.K2)(Oi,"codePointAt"),(0,ot.K2)(zi,"needIndentIndicator"),(0,ot.K2)(Un,"chooseScalarStyle"),(0,ot.K2)(tn,"writeScalar"),(0,ot.K2)(Fn,"blockHeader"),(0,ot.K2)(xn,"dropEndingNewline"),(0,ot.K2)(nn,"foldString"),(0,ot.K2)(kn,"foldLine"),(0,ot.K2)(Rn,"escapeString"),(0,ot.K2)(un,"writeFlowSequence"),(0,ot.K2)(Xi,"writeBlockSequence"),(0,ot.K2)(rn,"writeFlowMapping"),(0,ot.K2)(Yn,"writeBlockMapping"),(0,ot.K2)(Gt,"detectType"),(0,ot.K2)(d,"writeNode"),(0,ot.K2)(ct,"getDuplicateReferences"),(0,ot.K2)(Xt,"inspectNode"),(0,ot.K2)(function kt(l,T){var N=new Ya(T=T||{});N.noRefs||ct(l,N);var st=l;return N.replacer&&(st=N.replacer.call({"":st},"",st)),d(N,0,st,!0,!0)?N.dump+"\n":""},"dump$1"),(0,ot.K2)(nt,"renamed");var Dt=_t,J=nr_load;
/*! Bundled license information:
      
      js-yaml/dist/js-yaml.mjs:
        (*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT *)
      */nt("safeLoad","load"),nt("safeLoadAll","loadAll"),nt("safeDump","dump")},28642:(Ja,vr,R)=>{"use strict";R.r(vr),R.d(vr,{diagram:()=>Fe});var ot=R(89204),ee=R(97787),L=R(36384),S=R(32239),Pt=R(59355),ut=R(52052),$=R(79006),A=R(32303),At=R(39115),wt=R(79687),Ge=R(40622),dt=R(61823),Rt=function(){var at=(0,A.K2)(function(mi,Fa,Pr,ya){for(Pr=Pr||{},ya=mi.length;ya--;Pr[mi[ya]]=Fa);return Pr},"o"),Ct=[1,15],M=[1,7],Jt=[1,13],Ve=[1,14],gt=[1,19],Lt=[1,16],Kt=[1,17],Je=[1,18],Xr=[8,30],Gr=[8,10,21,28,29,30,31,39,43,46],aa=[1,23],La=[1,24],fa=[8,10,15,16,21,28,29,30,31,39,43,46],wa=[8,10,15,16,21,27,28,29,30,31,39,43,46],ja=[1,49],$a={trace:(0,A.K2)(function(){},"trace"),yy:{},symbols_:{error:2,spaceLines:3,SPACELINE:4,NL:5,separator:6,SPACE:7,EOF:8,start:9,BLOCK_DIAGRAM_KEY:10,document:11,stop:12,statement:13,link:14,LINK:15,START_LINK:16,LINK_LABEL:17,STR:18,nodeStatement:19,columnsStatement:20,SPACE_BLOCK:21,blockStatement:22,classDefStatement:23,cssClassStatement:24,styleStatement:25,node:26,SIZE:27,COLUMNS:28,"id-block":29,end:30,NODE_ID:31,nodeShapeNLabel:32,dirList:33,DIR:34,NODE_DSTART:35,NODE_DEND:36,BLOCK_ARROW_START:37,BLOCK_ARROW_END:38,classDef:39,CLASSDEF_ID:40,CLASSDEF_STYLEOPTS:41,DEFAULT:42,class:43,CLASSENTITY_IDS:44,STYLECLASS:45,style:46,STYLE_ENTITY_IDS:47,STYLE_DEFINITION_DATA:48,$accept:0,$end:1},terminals_:{2:"error",4:"SPACELINE",5:"NL",7:"SPACE",8:"EOF",10:"BLOCK_DIAGRAM_KEY",15:"LINK",16:"START_LINK",17:"LINK_LABEL",18:"STR",21:"SPACE_BLOCK",27:"SIZE",28:"COLUMNS",29:"id-block",30:"end",31:"NODE_ID",34:"DIR",35:"NODE_DSTART",36:"NODE_DEND",37:"BLOCK_ARROW_START",38:"BLOCK_ARROW_END",39:"classDef",40:"CLASSDEF_ID",41:"CLASSDEF_STYLEOPTS",42:"DEFAULT",43:"class",44:"CLASSENTITY_IDS",45:"STYLECLASS",46:"style",47:"STYLE_ENTITY_IDS",48:"STYLE_DEFINITION_DATA"},productions_:[0,[3,1],[3,2],[3,2],[6,1],[6,1],[6,1],[9,3],[12,1],[12,1],[12,2],[12,2],[11,1],[11,2],[14,1],[14,4],[13,1],[13,1],[13,1],[13,1],[13,1],[13,1],[13,1],[19,3],[19,2],[19,1],[20,1],[22,4],[22,3],[26,1],[26,2],[33,1],[33,2],[32,3],[32,4],[23,3],[23,3],[24,3],[25,3]],performAction:(0,A.K2)(function(Fa,Pr,ya,Ya,ni,Mr,Pi){var ua=Mr.length-1;switch(ni){case 4:Ya.getLogger().debug("Rule: separator (NL) ");break;case 5:Ya.getLogger().debug("Rule: separator (Space) ");break;case 6:Ya.getLogger().debug("Rule: separator (EOF) ");break;case 7:Ya.getLogger().debug("Rule: hierarchy: ",Mr[ua-1]),Ya.setHierarchy(Mr[ua-1]);break;case 8:Ya.getLogger().debug("Stop NL ");break;case 9:Ya.getLogger().debug("Stop EOF ");break;case 10:Ya.getLogger().debug("Stop NL2 ");break;case 11:Ya.getLogger().debug("Stop EOF2 ");break;case 12:Ya.getLogger().debug("Rule: statement: ",Mr[ua]),this.$="number"==typeof Mr[ua].length?Mr[ua]:[Mr[ua]];break;case 13:Ya.getLogger().debug("Rule: statement #2: ",Mr[ua-1]),this.$=[Mr[ua-1]].concat(Mr[ua]);break;case 14:Ya.getLogger().debug("Rule: link: ",Mr[ua],Fa),this.$={edgeTypeStr:Mr[ua],label:""};break;case 15:Ya.getLogger().debug("Rule: LABEL link: ",Mr[ua-3],Mr[ua-1],Mr[ua]),this.$={edgeTypeStr:Mr[ua],label:Mr[ua-1]};break;case 18:const ki=parseInt(Mr[ua]),Bi=Ya.generateId();this.$={id:Bi,type:"space",label:"",width:ki,children:[]};break;case 23:Ya.getLogger().debug("Rule: (nodeStatement link node) ",Mr[ua-2],Mr[ua-1],Mr[ua]," typestr: ",Mr[ua-1].edgeTypeStr);const Wi=Ya.edgeStrToEdgeData(Mr[ua-1].edgeTypeStr);this.$=[{id:Mr[ua-2].id,label:Mr[ua-2].label,type:Mr[ua-2].type,directions:Mr[ua-2].directions},{id:Mr[ua-2].id+"-"+Mr[ua].id,start:Mr[ua-2].id,end:Mr[ua].id,label:Mr[ua-1].label,type:"edge",directions:Mr[ua].directions,arrowTypeEnd:Wi,arrowTypeStart:"arrow_open"},{id:Mr[ua].id,label:Mr[ua].label,type:Ya.typeStr2Type(Mr[ua].typeStr),directions:Mr[ua].directions}];break;case 24:Ya.getLogger().debug("Rule: nodeStatement (abc88 node size) ",Mr[ua-1],Mr[ua]),this.$={id:Mr[ua-1].id,label:Mr[ua-1].label,type:Ya.typeStr2Type(Mr[ua-1].typeStr),directions:Mr[ua-1].directions,widthInColumns:parseInt(Mr[ua],10)};break;case 25:Ya.getLogger().debug("Rule: nodeStatement (node) ",Mr[ua]),this.$={id:Mr[ua].id,label:Mr[ua].label,type:Ya.typeStr2Type(Mr[ua].typeStr),directions:Mr[ua].directions,widthInColumns:1};break;case 26:Ya.getLogger().debug("APA123",this?this:"na"),Ya.getLogger().debug("COLUMNS: ",Mr[ua]),this.$={type:"column-setting",columns:"auto"===Mr[ua]?-1:parseInt(Mr[ua])};break;case 27:Ya.getLogger().debug("Rule: id-block statement : ",Mr[ua-2],Mr[ua-1]),Ya.generateId(),this.$={...Mr[ua-2],type:"composite",children:Mr[ua-1]};break;case 28:Ya.getLogger().debug("Rule: blockStatement : ",Mr[ua-2],Mr[ua-1],Mr[ua]);const Ji=Ya.generateId();this.$={id:Ji,type:"composite",label:"",children:Mr[ua-1]};break;case 29:Ya.getLogger().debug("Rule: node (NODE_ID separator): ",Mr[ua]),this.$={id:Mr[ua]};break;case 30:Ya.getLogger().debug("Rule: node (NODE_ID nodeShapeNLabel separator): ",Mr[ua-1],Mr[ua]),this.$={id:Mr[ua-1],label:Mr[ua].label,typeStr:Mr[ua].typeStr,directions:Mr[ua].directions};break;case 31:Ya.getLogger().debug("Rule: dirList: ",Mr[ua]),this.$=[Mr[ua]];break;case 32:Ya.getLogger().debug("Rule: dirList: ",Mr[ua-1],Mr[ua]),this.$=[Mr[ua-1]].concat(Mr[ua]);break;case 33:Ya.getLogger().debug("Rule: nodeShapeNLabel: ",Mr[ua-2],Mr[ua-1],Mr[ua]),this.$={typeStr:Mr[ua-2]+Mr[ua],label:Mr[ua-1]};break;case 34:Ya.getLogger().debug("Rule: BLOCK_ARROW nodeShapeNLabel: ",Mr[ua-3],Mr[ua-2]," #3:",Mr[ua-1],Mr[ua]),this.$={typeStr:Mr[ua-3]+Mr[ua],label:Mr[ua-2],directions:Mr[ua-1]};break;case 35:case 36:this.$={type:"classDef",id:Mr[ua-1].trim(),css:Mr[ua].trim()};break;case 37:this.$={type:"applyClass",id:Mr[ua-1].trim(),styleClass:Mr[ua].trim()};break;case 38:this.$={type:"applyStyles",id:Mr[ua-1].trim(),stylesStr:Mr[ua].trim()}}},"anonymous"),table:[{9:1,10:[1,2]},{1:[3]},{10:Ct,11:3,13:4,19:5,20:6,21:M,22:8,23:9,24:10,25:11,26:12,28:Jt,29:Ve,31:gt,39:Lt,43:Kt,46:Je},{8:[1,20]},at(Xr,[2,12],{13:4,19:5,20:6,22:8,23:9,24:10,25:11,26:12,11:21,10:Ct,21:M,28:Jt,29:Ve,31:gt,39:Lt,43:Kt,46:Je}),at(Gr,[2,16],{14:22,15:aa,16:La}),at(Gr,[2,17]),at(Gr,[2,18]),at(Gr,[2,19]),at(Gr,[2,20]),at(Gr,[2,21]),at(Gr,[2,22]),at(fa,[2,25],{27:[1,25]}),at(Gr,[2,26]),{19:26,26:12,31:gt},{10:Ct,11:27,13:4,19:5,20:6,21:M,22:8,23:9,24:10,25:11,26:12,28:Jt,29:Ve,31:gt,39:Lt,43:Kt,46:Je},{40:[1,28],42:[1,29]},{44:[1,30]},{47:[1,31]},at(wa,[2,29],{32:32,35:[1,33],37:[1,34]}),{1:[2,7]},at(Xr,[2,13]),{26:35,31:gt},{31:[2,14]},{17:[1,36]},at(fa,[2,24]),{10:Ct,11:37,13:4,14:22,15:aa,16:La,19:5,20:6,21:M,22:8,23:9,24:10,25:11,26:12,28:Jt,29:Ve,31:gt,39:Lt,43:Kt,46:Je},{30:[1,38]},{41:[1,39]},{41:[1,40]},{45:[1,41]},{48:[1,42]},at(wa,[2,30]),{18:[1,43]},{18:[1,44]},at(fa,[2,23]),{18:[1,45]},{30:[1,46]},at(Gr,[2,28]),at(Gr,[2,35]),at(Gr,[2,36]),at(Gr,[2,37]),at(Gr,[2,38]),{36:[1,47]},{33:48,34:ja},{15:[1,50]},at(Gr,[2,27]),at(wa,[2,33]),{38:[1,51]},{33:52,34:ja,38:[2,31]},{31:[2,15]},at(wa,[2,34]),{38:[2,32]}],defaultActions:{20:[2,7],23:[2,14],50:[2,15],52:[2,32]},parseError:(0,A.K2)(function(Fa,Pr){if(!Pr.recoverable){var ya=new Error(Fa);throw ya.hash=Pr,ya}this.trace(Fa)},"parseError"),parse:(0,A.K2)(function(Fa){var Pr=this,ya=[0],Ya=[],ni=[null],Mr=[],Pi=this.table,ua="",ki=0,Bi=0,Wi=0,Oi=Mr.slice.call(arguments,1),zi=Object.create(this.lexer),cn={yy:{}};for(var Ln in this.yy)Object.prototype.hasOwnProperty.call(this.yy,Ln)&&(cn.yy[Ln]=this.yy[Ln]);zi.setInput(Fa,cn.yy),cn.yy.lexer=zi,cn.yy.parser=this,typeof zi.yylloc>"u"&&(zi.yylloc={});var Bn=zi.yylloc;Mr.push(Bn);var Vn=zi.options&&zi.options.ranges;function Un(){var ct;return"number"!=typeof(ct=Ya.pop()||zi.lex()||1)&&(ct instanceof Array&&(ct=(Ya=ct).pop()),ct=Pr.symbols_[ct]||ct),ct}this.parseError="function"==typeof cn.yy.parseError?cn.yy.parseError:Object.getPrototypeOf(this).parseError,(0,A.K2)(function hn(ct){ya.length=ya.length-2*ct,ni.length=ni.length-ct,Mr.length=Mr.length-ct},"popStack"),(0,A.K2)(Un,"lex");for(var tn,Fn,xn,nn,Rn,Xi,rn,Gt,un={};;){if(this.defaultActions[xn=ya[ya.length-1]]?nn=this.defaultActions[xn]:((null===tn||typeof tn>"u")&&(tn=Un()),nn=Pi[xn]&&Pi[xn][tn]),typeof nn>"u"||!nn.length||!nn[0]){var d;for(Xi in Gt=[],Pi[xn])this.terminals_[Xi]&&Xi>2&&Gt.push("'"+this.terminals_[Xi]+"'");d=zi.showPosition?"Parse error on line "+(ki+1)+":\n"+zi.showPosition()+"\nExpecting "+Gt.join(", ")+", got '"+(this.terminals_[tn]||tn)+"'":"Parse error on line "+(ki+1)+": Unexpected "+(1==tn?"end of input":"'"+(this.terminals_[tn]||tn)+"'"),this.parseError(d,{text:zi.match,token:this.terminals_[tn]||tn,line:zi.yylineno,loc:Bn,expected:Gt})}if(nn[0]instanceof Array&&nn.length>1)throw new Error("Parse Error: multiple actions possible at state: "+xn+", token: "+tn);switch(nn[0]){case 1:ya.push(tn),ni.push(zi.yytext),Mr.push(zi.yylloc),ya.push(nn[1]),tn=null,Fn?(tn=Fn,Fn=null):(Bi=zi.yyleng,ua=zi.yytext,ki=zi.yylineno,Bn=zi.yylloc,Wi>0&&Wi--);break;case 2:if(un.$=ni[ni.length-(rn=this.productions_[nn[1]][1])],un._$={first_line:Mr[Mr.length-(rn||1)].first_line,last_line:Mr[Mr.length-1].last_line,first_column:Mr[Mr.length-(rn||1)].first_column,last_column:Mr[Mr.length-1].last_column},Vn&&(un._$.range=[Mr[Mr.length-(rn||1)].range[0],Mr[Mr.length-1].range[1]]),typeof(Rn=this.performAction.apply(un,[ua,Bi,ki,cn.yy,nn[1],ni,Mr].concat(Oi)))<"u")return Rn;rn&&(ya=ya.slice(0,-1*rn*2),ni=ni.slice(0,-1*rn),Mr=Mr.slice(0,-1*rn)),ya.push(this.productions_[nn[1]][0]),ni.push(un.$),Mr.push(un._$),ya.push(Pi[ya[ya.length-2]][ya[ya.length-1]]);break;case 3:return!0}}return!0},"parse")};function Ei(){this.yy={}}return $a.lexer=function(){return{EOF:1,parseError:(0,A.K2)(function(Pr,ya){if(!this.yy.parser)throw new Error(Pr);this.yy.parser.parseError(Pr,ya)},"parseError"),setInput:(0,A.K2)(function(Fa,Pr){return this.yy=Pr||this.yy||{},this._input=Fa,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},"setInput"),input:(0,A.K2)(function(){var Fa=this._input[0];return this.yytext+=Fa,this.yyleng++,this.offset++,this.match+=Fa,this.matched+=Fa,Fa.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),Fa},"input"),unput:(0,A.K2)(function(Fa){var Pr=Fa.length,ya=Fa.split(/(?:\r\n?|\n)/g);this._input=Fa+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-Pr),this.offset-=Pr;var Ya=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),ya.length-1&&(this.yylineno-=ya.length-1);var ni=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:ya?(ya.length===Ya.length?this.yylloc.first_column:0)+Ya[Ya.length-ya.length].length-ya[0].length:this.yylloc.first_column-Pr},this.options.ranges&&(this.yylloc.range=[ni[0],ni[0]+this.yyleng-Pr]),this.yyleng=this.yytext.length,this},"unput"),more:(0,A.K2)(function(){return this._more=!0,this},"more"),reject:(0,A.K2)(function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},"reject"),less:(0,A.K2)(function(Fa){this.unput(this.match.slice(Fa))},"less"),pastInput:(0,A.K2)(function(){var Fa=this.matched.substr(0,this.matched.length-this.match.length);return(Fa.length>20?"...":"")+Fa.substr(-20).replace(/\n/g,"")},"pastInput"),upcomingInput:(0,A.K2)(function(){var Fa=this.match;return Fa.length<20&&(Fa+=this._input.substr(0,20-Fa.length)),(Fa.substr(0,20)+(Fa.length>20?"...":"")).replace(/\n/g,"")},"upcomingInput"),showPosition:(0,A.K2)(function(){var Fa=this.pastInput(),Pr=new Array(Fa.length+1).join("-");return Fa+this.upcomingInput()+"\n"+Pr+"^"},"showPosition"),test_match:(0,A.K2)(function(Fa,Pr){var ya,Ya,ni;if(this.options.backtrack_lexer&&(ni={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(ni.yylloc.range=this.yylloc.range.slice(0))),(Ya=Fa[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=Ya.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:Ya?Ya[Ya.length-1].length-Ya[Ya.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+Fa[0].length},this.yytext+=Fa[0],this.match+=Fa[0],this.matches=Fa,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(Fa[0].length),this.matched+=Fa[0],ya=this.performAction.call(this,this.yy,this,Pr,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),ya)return ya;if(this._backtrack){for(var Mr in ni)this[Mr]=ni[Mr];return!1}return!1},"test_match"),next:(0,A.K2)(function(){if(this.done)return this.EOF;var Fa,Pr,ya,Ya;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var ni=this._currentRules(),Mr=0;Mr<ni.length;Mr++)if((ya=this._input.match(this.rules[ni[Mr]]))&&(!Pr||ya[0].length>Pr[0].length)){if(Pr=ya,Ya=Mr,this.options.backtrack_lexer){if(!1!==(Fa=this.test_match(ya,ni[Mr])))return Fa;if(this._backtrack){Pr=!1;continue}return!1}if(!this.options.flex)break}return Pr?!1!==(Fa=this.test_match(Pr,ni[Ya]))&&Fa:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},"next"),lex:(0,A.K2)(function(){return this.next()||this.lex()},"lex"),begin:(0,A.K2)(function(Pr){this.conditionStack.push(Pr)},"begin"),popState:(0,A.K2)(function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},"popState"),_currentRules:(0,A.K2)(function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},"_currentRules"),topState:(0,A.K2)(function(Pr){return(Pr=this.conditionStack.length-1-Math.abs(Pr||0))>=0?this.conditionStack[Pr]:"INITIAL"},"topState"),pushState:(0,A.K2)(function(Pr){this.begin(Pr)},"pushState"),stateStackSize:(0,A.K2)(function(){return this.conditionStack.length},"stateStackSize"),options:{},performAction:(0,A.K2)(function(Pr,ya,Ya,ni){switch(Ya){case 0:return Pr.getLogger().debug("Found block-beta"),10;case 1:return Pr.getLogger().debug("Found id-block"),29;case 2:return Pr.getLogger().debug("Found block"),10;case 3:Pr.getLogger().debug(".",ya.yytext);break;case 4:Pr.getLogger().debug("_",ya.yytext);break;case 5:return 5;case 6:return ya.yytext=-1,28;case 7:return ya.yytext=ya.yytext.replace(/columns\s+/,""),Pr.getLogger().debug("COLUMNS (LEX)",ya.yytext),28;case 8:case 76:case 77:case 99:this.pushState("md_string");break;case 9:return"MD_STR";case 10:case 34:case 79:this.popState();break;case 11:this.pushState("string");break;case 12:Pr.getLogger().debug("LEX: POPPING STR:",ya.yytext),this.popState();break;case 13:return Pr.getLogger().debug("LEX: STR end:",ya.yytext),"STR";case 14:return ya.yytext=ya.yytext.replace(/space\:/,""),Pr.getLogger().debug("SPACE NUM (LEX)",ya.yytext),21;case 15:return ya.yytext="1",Pr.getLogger().debug("COLUMNS (LEX)",ya.yytext),21;case 16:return 42;case 17:return"LINKSTYLE";case 18:return"INTERPOLATE";case 19:return this.pushState("CLASSDEF"),39;case 20:return this.popState(),this.pushState("CLASSDEFID"),"DEFAULT_CLASSDEF_ID";case 21:return this.popState(),this.pushState("CLASSDEFID"),40;case 22:return this.popState(),41;case 23:return this.pushState("CLASS"),43;case 24:return this.popState(),this.pushState("CLASS_STYLE"),44;case 25:return this.popState(),45;case 26:return this.pushState("STYLE_STMNT"),46;case 27:return this.popState(),this.pushState("STYLE_DEFINITION"),47;case 28:return this.popState(),48;case 29:return this.pushState("acc_title"),"acc_title";case 30:return this.popState(),"acc_title_value";case 31:return this.pushState("acc_descr"),"acc_descr";case 32:return this.popState(),"acc_descr_value";case 33:this.pushState("acc_descr_multiline");break;case 35:return"acc_descr_multiline_value";case 36:return 30;case 37:case 38:case 40:case 41:case 44:return this.popState(),Pr.getLogger().debug("Lex: (("),"NODE_DEND";case 39:return this.popState(),Pr.getLogger().debug("Lex: ))"),"NODE_DEND";case 42:return this.popState(),Pr.getLogger().debug("Lex: (-"),"NODE_DEND";case 43:return this.popState(),Pr.getLogger().debug("Lex: -)"),"NODE_DEND";case 45:return this.popState(),Pr.getLogger().debug("Lex: ]]"),"NODE_DEND";case 46:return this.popState(),Pr.getLogger().debug("Lex: ("),"NODE_DEND";case 47:return this.popState(),Pr.getLogger().debug("Lex: ])"),"NODE_DEND";case 48:case 49:return this.popState(),Pr.getLogger().debug("Lex: /]"),"NODE_DEND";case 50:return this.popState(),Pr.getLogger().debug("Lex: )]"),"NODE_DEND";case 51:return this.popState(),Pr.getLogger().debug("Lex: )"),"NODE_DEND";case 52:return this.popState(),Pr.getLogger().debug("Lex: ]>"),"NODE_DEND";case 53:return this.popState(),Pr.getLogger().debug("Lex: ]"),"NODE_DEND";case 54:return Pr.getLogger().debug("Lexa: -)"),this.pushState("NODE"),35;case 55:return Pr.getLogger().debug("Lexa: (-"),this.pushState("NODE"),35;case 56:return Pr.getLogger().debug("Lexa: ))"),this.pushState("NODE"),35;case 57:case 59:case 60:case 61:case 64:return Pr.getLogger().debug("Lexa: )"),this.pushState("NODE"),35;case 58:return Pr.getLogger().debug("Lex: ((("),this.pushState("NODE"),35;case 62:return Pr.getLogger().debug("Lexc: >"),this.pushState("NODE"),35;case 63:return Pr.getLogger().debug("Lexa: (["),this.pushState("NODE"),35;case 65:case 66:case 67:case 68:case 69:case 70:case 71:return this.pushState("NODE"),35;case 72:return Pr.getLogger().debug("Lexa: ["),this.pushState("NODE"),35;case 73:return this.pushState("BLOCK_ARROW"),Pr.getLogger().debug("LEX ARR START"),37;case 74:return Pr.getLogger().debug("Lex: NODE_ID",ya.yytext),31;case 75:return Pr.getLogger().debug("Lex: EOF",ya.yytext),8;case 78:return"NODE_DESCR";case 80:Pr.getLogger().debug("Lex: Starting string"),this.pushState("string");break;case 81:Pr.getLogger().debug("LEX ARR: Starting string"),this.pushState("string");break;case 82:return Pr.getLogger().debug("LEX: NODE_DESCR:",ya.yytext),"NODE_DESCR";case 83:Pr.getLogger().debug("LEX POPPING"),this.popState();break;case 84:Pr.getLogger().debug("Lex: =>BAE"),this.pushState("ARROW_DIR");break;case 85:return ya.yytext=ya.yytext.replace(/^,\s*/,""),Pr.getLogger().debug("Lex (right): dir:",ya.yytext),"DIR";case 86:return ya.yytext=ya.yytext.replace(/^,\s*/,""),Pr.getLogger().debug("Lex (left):",ya.yytext),"DIR";case 87:return ya.yytext=ya.yytext.replace(/^,\s*/,""),Pr.getLogger().debug("Lex (x):",ya.yytext),"DIR";case 88:return ya.yytext=ya.yytext.replace(/^,\s*/,""),Pr.getLogger().debug("Lex (y):",ya.yytext),"DIR";case 89:return ya.yytext=ya.yytext.replace(/^,\s*/,""),Pr.getLogger().debug("Lex (up):",ya.yytext),"DIR";case 90:return ya.yytext=ya.yytext.replace(/^,\s*/,""),Pr.getLogger().debug("Lex (down):",ya.yytext),"DIR";case 91:return ya.yytext="]>",Pr.getLogger().debug("Lex (ARROW_DIR end):",ya.yytext),this.popState(),this.popState(),"BLOCK_ARROW_END";case 92:return Pr.getLogger().debug("Lex: LINK","#"+ya.yytext+"#"),15;case 93:case 94:case 95:return Pr.getLogger().debug("Lex: LINK",ya.yytext),15;case 96:case 97:case 98:return Pr.getLogger().debug("Lex: START_LINK",ya.yytext),this.pushState("LLABEL"),16;case 100:return Pr.getLogger().debug("Lex: Starting string"),this.pushState("string"),"LINK_LABEL";case 101:return this.popState(),Pr.getLogger().debug("Lex: LINK","#"+ya.yytext+"#"),15;case 102:case 103:return this.popState(),Pr.getLogger().debug("Lex: LINK",ya.yytext),15;case 104:return Pr.getLogger().debug("Lex: COLON",ya.yytext),ya.yytext=ya.yytext.slice(1),27}},"anonymous"),rules:[/^(?:block-beta\b)/,/^(?:block:)/,/^(?:block\b)/,/^(?:[\s]+)/,/^(?:[\n]+)/,/^(?:((\u000D\u000A)|(\u000A)))/,/^(?:columns\s+auto\b)/,/^(?:columns\s+[\d]+)/,/^(?:["][`])/,/^(?:[^`"]+)/,/^(?:[`]["])/,/^(?:["])/,/^(?:["])/,/^(?:[^"]*)/,/^(?:space[:]\d+)/,/^(?:space\b)/,/^(?:default\b)/,/^(?:linkStyle\b)/,/^(?:interpolate\b)/,/^(?:classDef\s+)/,/^(?:DEFAULT\s+)/,/^(?:\w+\s+)/,/^(?:[^\n]*)/,/^(?:class\s+)/,/^(?:(\w+)+((,\s*\w+)*))/,/^(?:[^\n]*)/,/^(?:style\s+)/,/^(?:(\w+)+((,\s*\w+)*))/,/^(?:[^\n]*)/,/^(?:accTitle\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*\{\s*)/,/^(?:[\}])/,/^(?:[^\}]*)/,/^(?:end\b\s*)/,/^(?:\(\(\()/,/^(?:\)\)\))/,/^(?:[\)]\))/,/^(?:\}\})/,/^(?:\})/,/^(?:\(-)/,/^(?:-\))/,/^(?:\(\()/,/^(?:\]\])/,/^(?:\()/,/^(?:\]\))/,/^(?:\\\])/,/^(?:\/\])/,/^(?:\)\])/,/^(?:[\)])/,/^(?:\]>)/,/^(?:[\]])/,/^(?:-\))/,/^(?:\(-)/,/^(?:\)\))/,/^(?:\))/,/^(?:\(\(\()/,/^(?:\(\()/,/^(?:\{\{)/,/^(?:\{)/,/^(?:>)/,/^(?:\(\[)/,/^(?:\()/,/^(?:\[\[)/,/^(?:\[\|)/,/^(?:\[\()/,/^(?:\)\)\))/,/^(?:\[\\)/,/^(?:\[\/)/,/^(?:\[\\)/,/^(?:\[)/,/^(?:<\[)/,/^(?:[^\(\[\n\-\)\{\}\s\<\>:]+)/,/^(?:$)/,/^(?:["][`])/,/^(?:["][`])/,/^(?:[^`"]+)/,/^(?:[`]["])/,/^(?:["])/,/^(?:["])/,/^(?:[^"]+)/,/^(?:["])/,/^(?:\]>\s*\()/,/^(?:,?\s*right\s*)/,/^(?:,?\s*left\s*)/,/^(?:,?\s*x\s*)/,/^(?:,?\s*y\s*)/,/^(?:,?\s*up\s*)/,/^(?:,?\s*down\s*)/,/^(?:\)\s*)/,/^(?:\s*[xo<]?--+[-xo>]\s*)/,/^(?:\s*[xo<]?==+[=xo>]\s*)/,/^(?:\s*[xo<]?-?\.+-[xo>]?\s*)/,/^(?:\s*~~[\~]+\s*)/,/^(?:\s*[xo<]?--\s*)/,/^(?:\s*[xo<]?==\s*)/,/^(?:\s*[xo<]?-\.\s*)/,/^(?:["][`])/,/^(?:["])/,/^(?:\s*[xo<]?--+[-xo>]\s*)/,/^(?:\s*[xo<]?==+[=xo>]\s*)/,/^(?:\s*[xo<]?-?\.+-[xo>]?\s*)/,/^(?::\d+)/],conditions:{STYLE_DEFINITION:{rules:[28],inclusive:!1},STYLE_STMNT:{rules:[27],inclusive:!1},CLASSDEFID:{rules:[22],inclusive:!1},CLASSDEF:{rules:[20,21],inclusive:!1},CLASS_STYLE:{rules:[25],inclusive:!1},CLASS:{rules:[24],inclusive:!1},LLABEL:{rules:[99,100,101,102,103],inclusive:!1},ARROW_DIR:{rules:[85,86,87,88,89,90,91],inclusive:!1},BLOCK_ARROW:{rules:[76,81,84],inclusive:!1},NODE:{rules:[37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,77,80],inclusive:!1},md_string:{rules:[9,10,78,79],inclusive:!1},space:{rules:[],inclusive:!1},string:{rules:[12,13,82,83],inclusive:!1},acc_descr_multiline:{rules:[34,35],inclusive:!1},acc_descr:{rules:[32],inclusive:!1},acc_title:{rules:[30],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,5,6,7,8,11,14,15,16,17,18,19,23,26,29,31,33,36,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,92,93,94,95,96,97,98,104],inclusive:!0}}}}(),(0,A.K2)(Ei,"Parser"),Ei.prototype=$a,$a.Parser=Ei,new Ei}();Rt.parser=Rt;var q=Rt,ar=new Map,Ke=[],cr=new Map,Nr=(0,$.D7)(),Fr=new Map,Se=(0,A.K2)(at=>$.Y2.sanitizeText(at,Nr),"sanitizeText"),Or=(0,A.K2)(function(at,Ct=""){let M=Fr.get(at);M||(M={id:at,styles:[],textStyles:[]},Fr.set(at,M)),Ct?.split(",").forEach(Jt=>{const Ve=Jt.replace(/([^;]*);/,"$1").trim();if(RegExp("color").exec(Jt)){const Lt=Ve.replace("fill","bgFill").replace("color","fill");M.textStyles.push(Lt)}M.styles.push(Ve)})},"addStyleClass"),je=(0,A.K2)(function(at,Ct=""){const M=ar.get(at);null!=Ct&&(M.styles=Ct.split(","))},"addStyle2Node"),z=(0,A.K2)(function(at,Ct){at.split(",").forEach(function(M){let Jt=ar.get(M);if(void 0===Jt){const Ve=M.trim();Jt={id:Ve,type:"na",children:[]},ar.set(Ve,Jt)}Jt.classes||(Jt.classes=[]),Jt.classes.push(Ct)})},"setCssClass"),ft=(0,A.K2)((at,Ct)=>{const M=at.flat(),Jt=[],gt=M.find(Lt=>"column-setting"===Lt?.type)?.columns??-1;for(const Lt of M)if("number"==typeof gt&&gt>0&&"column-setting"!==Lt.type&&"number"==typeof Lt.widthInColumns&&Lt.widthInColumns>gt&&A.Rm.warn(`Block ${Lt.id} width ${Lt.widthInColumns} exceeds configured column width ${gt}`),Lt.label&&(Lt.label=Se(Lt.label)),"classDef"!==Lt.type)if("applyClass"!==Lt.type)if("applyStyles"!==Lt.type)if("column-setting"===Lt.type)Ct.columns=Lt.columns??-1;else if("edge"===Lt.type){const Kt=(cr.get(Lt.id)??0)+1;cr.set(Lt.id,Kt),Lt.id=Kt+"-"+Lt.id,Ke.push(Lt)}else{Lt.label||(Lt.label="composite"===Lt.type?"":Lt.id);const Kt=ar.get(Lt.id);if(void 0===Kt?ar.set(Lt.id,Lt):("na"!==Lt.type&&(Kt.type=Lt.type),Lt.label!==Lt.id&&(Kt.label=Lt.label)),Lt.children&&ft(Lt.children,Lt),"space"===Lt.type){const Je=Lt.width??1;for(let Xr=0;Xr<Je;Xr++){const Gr=(0,At.A)(Lt);Gr.id=Gr.id+"-"+Xr,ar.set(Gr.id,Gr),Jt.push(Gr)}}else void 0===Kt&&Jt.push(Lt)}else Lt?.stylesStr&&je(Lt.id,Lt?.stylesStr);else z(Lt.id,Lt?.styleClass??"");else Or(Lt.id,Lt.css);Ct.children=Jt},"populateBlockDatabase"),Bt=[],we={id:"root",type:"composite",children:[],columns:-1},X=(0,A.K2)(()=>{A.Rm.debug("Clear called"),(0,$.IU)(),we={id:"root",type:"composite",children:[],columns:-1},ar=new Map([["root",we]]),Bt=[],Fr=new Map,Ke=[],cr=new Map},"clear");function ae(at){switch(A.Rm.debug("typeStr2Type",at),at){case"[]":return"square";case"()":return A.Rm.debug("we have a round"),"round";case"(())":return"circle";case">]":return"rect_left_inv_arrow";case"{}":return"diamond";case"{{}}":return"hexagon";case"([])":return"stadium";case"[[]]":return"subroutine";case"[()]":return"cylinder";case"((()))":return"doublecircle";case"[//]":return"lean_right";case"[\\\\]":return"lean_left";case"[/\\]":return"trapezoid";case"[\\/]":return"inv_trapezoid";case"<[]>":return"block_arrow";default:return"na"}}function w(at){return"=="===(A.Rm.debug("typeStr2Type",at),at)?"thick":"normal"}function re(at){switch(at.replace(/^[\s-]+|[\s-]+$/g,"")){case"x":return"arrow_cross";case"o":return"arrow_circle";case">":return"arrow_point";default:return""}}(0,A.K2)(ae,"typeStr2Type"),(0,A.K2)(w,"edgeTypeStr2Type"),(0,A.K2)(re,"edgeStrToEdgeData");var It=0,qt=(0,A.K2)(()=>(It++,"id-"+Math.random().toString(36).substr(2,12)+"-"+It),"generateId"),V=(0,A.K2)(at=>{we.children=at,ft(at,we),Bt=we.children},"setHierarchy"),pt=(0,A.K2)(at=>{const Ct=ar.get(at);return Ct?Ct.columns?Ct.columns:Ct.children?Ct.children.length:-1:-1},"getColumns"),H=(0,A.K2)(()=>[...ar.values()],"getBlocksFlat"),Nt=(0,A.K2)(()=>Bt||[],"getBlocks"),St=(0,A.K2)(()=>Ke,"getEdges"),$t=(0,A.K2)(at=>ar.get(at),"getBlock"),ye=(0,A.K2)(at=>{ar.set(at.id,at)},"setBlock"),le=(0,A.K2)(()=>A.Rm,"getLogger"),Pe=(0,A.K2)(function(){return Fr},"getClasses"),qe={getConfig:(0,A.K2)(()=>(0,$.zj)().block,"getConfig"),typeStr2Type:ae,edgeTypeStr2Type:w,edgeStrToEdgeData:re,getLogger:le,getBlocksFlat:H,getBlocks:Nt,getEdges:St,setHierarchy:V,getBlock:$t,setBlock:ye,getColumns:pt,getClasses:Pe,clear:X,generateId:qt},ze=(0,A.K2)((at,Ct)=>{const M=wt.Ix,Jt=M(at,"r"),Ve=M(at,"g"),gt=M(at,"b");return wt.B3(Jt,Ve,gt,Ct)},"fade"),Tt=(0,A.K2)(at=>`.label {\n    font-family: ${at.fontFamily};\n    color: ${at.nodeTextColor||at.textColor};\n  }\n  .cluster-label text {\n    fill: ${at.titleColor};\n  }\n  .cluster-label span,p {\n    color: ${at.titleColor};\n  }\n\n\n\n  .label text,span,p {\n    fill: ${at.nodeTextColor||at.textColor};\n    color: ${at.nodeTextColor||at.textColor};\n  }\n\n  .node rect,\n  .node circle,\n  .node ellipse,\n  .node polygon,\n  .node path {\n    fill: ${at.mainBkg};\n    stroke: ${at.nodeBorder};\n    stroke-width: 1px;\n  }\n  .flowchart-label text {\n    text-anchor: middle;\n  }\n  // .flowchart-label .text-outer-tspan {\n  //   text-anchor: middle;\n  // }\n  // .flowchart-label .text-inner-tspan {\n  //   text-anchor: start;\n  // }\n\n  .node .label {\n    text-align: center;\n  }\n  .node.clickable {\n    cursor: pointer;\n  }\n\n  .arrowheadPath {\n    fill: ${at.arrowheadColor};\n  }\n\n  .edgePath .path {\n    stroke: ${at.lineColor};\n    stroke-width: 2.0px;\n  }\n\n  .flowchart-link {\n    stroke: ${at.lineColor};\n    fill: none;\n  }\n\n  .edgeLabel {\n    background-color: ${at.edgeLabelBackground};\n    rect {\n      opacity: 0.5;\n      background-color: ${at.edgeLabelBackground};\n      fill: ${at.edgeLabelBackground};\n    }\n    text-align: center;\n  }\n\n  /* For html labels only */\n  .labelBkg {\n    background-color: ${ze(at.edgeLabelBackground,.5)};\n    // background-color:\n  }\n\n  .node .cluster {\n    // fill: ${ze(at.mainBkg,.5)};\n    fill: ${ze(at.clusterBkg,.5)};\n    stroke: ${ze(at.clusterBorder,.2)};\n    box-shadow: rgba(50, 50, 93, 0.25) 0px 13px 27px -5px, rgba(0, 0, 0, 0.3) 0px 8px 16px -8px;\n    stroke-width: 1px;\n  }\n\n  .cluster text {\n    fill: ${at.titleColor};\n  }\n\n  .cluster span,p {\n    color: ${at.titleColor};\n  }\n  /* .cluster div {\n    color: ${at.titleColor};\n  } */\n\n  div.mermaidTooltip {\n    position: absolute;\n    text-align: center;\n    max-width: 200px;\n    padding: 2px;\n    font-family: ${at.fontFamily};\n    font-size: 12px;\n    background: ${at.tertiaryColor};\n    border: 1px solid ${at.border2};\n    border-radius: 2px;\n    pointer-events: none;\n    z-index: 100;\n  }\n\n  .flowchartTitleText {\n    text-anchor: middle;\n    font-size: 18px;\n    fill: ${at.textColor};\n  }\n  ${(0,ee.o)()}\n`,"getStyles"),B=(0,A.K2)((at,Ct,M,Jt)=>{Ct.forEach(Ve=>{lt[Ve](at,M,Jt)})},"insertMarkers"),lt={extension:(0,A.K2)((at,Ct,M)=>{A.Rm.trace("Making markers for ",M),at.append("defs").append("marker").attr("id",M+"_"+Ct+"-extensionStart").attr("class","marker extension "+Ct).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 1,7 L18,13 V 1 Z"),at.append("defs").append("marker").attr("id",M+"_"+Ct+"-extensionEnd").attr("class","marker extension "+Ct).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 1,1 V 13 L18,7 Z")},"extension"),composition:(0,A.K2)((at,Ct,M)=>{at.append("defs").append("marker").attr("id",M+"_"+Ct+"-compositionStart").attr("class","marker composition "+Ct).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),at.append("defs").append("marker").attr("id",M+"_"+Ct+"-compositionEnd").attr("class","marker composition "+Ct).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")},"composition"),aggregation:(0,A.K2)((at,Ct,M)=>{at.append("defs").append("marker").attr("id",M+"_"+Ct+"-aggregationStart").attr("class","marker aggregation "+Ct).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),at.append("defs").append("marker").attr("id",M+"_"+Ct+"-aggregationEnd").attr("class","marker aggregation "+Ct).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")},"aggregation"),dependency:(0,A.K2)((at,Ct,M)=>{at.append("defs").append("marker").attr("id",M+"_"+Ct+"-dependencyStart").attr("class","marker dependency "+Ct).attr("refX",6).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 5,7 L9,13 L1,7 L9,1 Z"),at.append("defs").append("marker").attr("id",M+"_"+Ct+"-dependencyEnd").attr("class","marker dependency "+Ct).attr("refX",13).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")},"dependency"),lollipop:(0,A.K2)((at,Ct,M)=>{at.append("defs").append("marker").attr("id",M+"_"+Ct+"-lollipopStart").attr("class","marker lollipop "+Ct).attr("refX",13).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("circle").attr("stroke","black").attr("fill","transparent").attr("cx",7).attr("cy",7).attr("r",6),at.append("defs").append("marker").attr("id",M+"_"+Ct+"-lollipopEnd").attr("class","marker lollipop "+Ct).attr("refX",1).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("circle").attr("stroke","black").attr("fill","transparent").attr("cx",7).attr("cy",7).attr("r",6)},"lollipop"),point:(0,A.K2)((at,Ct,M)=>{at.append("marker").attr("id",M+"_"+Ct+"-pointEnd").attr("class","marker "+Ct).attr("viewBox","0 0 10 10").attr("refX",6).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),at.append("marker").attr("id",M+"_"+Ct+"-pointStart").attr("class","marker "+Ct).attr("viewBox","0 0 10 10").attr("refX",4.5).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 0 5 L 10 10 L 10 0 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")},"point"),circle:(0,A.K2)((at,Ct,M)=>{at.append("marker").attr("id",M+"_"+Ct+"-circleEnd").attr("class","marker "+Ct).attr("viewBox","0 0 10 10").attr("refX",11).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),at.append("marker").attr("id",M+"_"+Ct+"-circleStart").attr("class","marker "+Ct).attr("viewBox","0 0 10 10").attr("refX",-1).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")},"circle"),cross:(0,A.K2)((at,Ct,M)=>{at.append("marker").attr("id",M+"_"+Ct+"-crossEnd").attr("class","marker cross "+Ct).attr("viewBox","0 0 11 11").attr("refX",12).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0"),at.append("marker").attr("id",M+"_"+Ct+"-crossStart").attr("class","marker cross "+Ct).attr("viewBox","0 0 11 11").attr("refX",-1).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0")},"cross"),barb:(0,A.K2)((at,Ct,M)=>{at.append("defs").append("marker").attr("id",M+"_"+Ct+"-barbEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",14).attr("markerUnits","strokeWidth").attr("orient","auto").append("path").attr("d","M 19,7 L9,13 L14,7 L9,1 Z")},"barb")},ke=B,Mt=(0,$.D7)()?.block?.padding??8;function Zt(at,Ct){if(0===at||!Number.isInteger(at))throw new Error("Columns must be an integer !== 0.");if(Ct<0||!Number.isInteger(Ct))throw new Error("Position must be a non-negative integer."+Ct);return at<0?{px:Ct,py:0}:1===at?{px:0,py:Ct}:{px:Ct%at,py:Math.floor(Ct/at)}}(0,A.K2)(Zt,"calculateBlockPosition");var pe=(0,A.K2)(at=>{let Ct=0,M=0;for(const Jt of at.children){const{width:Ve,height:gt,x:Lt,y:Kt}=Jt.size??{width:0,height:0,x:0,y:0};A.Rm.debug("getMaxChildSize abc95 child:",Jt.id,"width:",Ve,"height:",gt,"x:",Lt,"y:",Kt,Jt.type),"space"!==Jt.type&&(Ve>Ct&&(Ct=Ve/(at.widthInColumns??1)),gt>M&&(M=gt))}return{width:Ct,height:M}},"getMaxChildSize");function Re(at,Ct,M=0,Jt=0){A.Rm.debug("setBlockSizes abc95 (start)",at.id,at?.size?.x,"block width =",at?.size,"siblingWidth",M),at?.size?.width||(at.size={width:M,height:Jt,x:0,y:0});let Ve=0,gt=0;if(at.children?.length>0){for(const fa of at.children)Re(fa,Ct);const Lt=pe(at);Ve=Lt.width,gt=Lt.height,A.Rm.debug("setBlockSizes abc95 maxWidth of",at.id,":s children is ",Ve,gt);for(const fa of at.children)fa.size&&(A.Rm.debug(`abc95 Setting size of children of ${at.id} id=${fa.id} ${Ve} ${gt} ${JSON.stringify(fa.size)}`),fa.size.width=Ve*(fa.widthInColumns??1)+Mt*((fa.widthInColumns??1)-1),fa.size.height=gt,fa.size.x=0,fa.size.y=0,A.Rm.debug(`abc95 updating size of ${at.id} children child:${fa.id} maxWidth:${Ve} maxHeight:${gt}`));for(const fa of at.children)Re(fa,Ct,Ve,gt);const Kt=at.columns??-1;let Je=0;for(const fa of at.children)Je+=fa.widthInColumns??1;let Xr=at.children.length;Kt>0&&Kt<Je&&(Xr=Kt);const Gr=Math.ceil(Je/Xr);let aa=Xr*(Ve+Mt)+Mt,La=Gr*(gt+Mt)+Mt;if(aa<M){A.Rm.debug(`Detected to small sibling: abc95 ${at.id} siblingWidth ${M} siblingHeight ${Jt} width ${aa}`),aa=M,La=Jt;const fa=(M-Xr*Mt-Mt)/Xr,wa=(Jt-Gr*Mt-Mt)/Gr;A.Rm.debug("Size indata abc88",at.id,"childWidth",fa,"maxWidth",Ve),A.Rm.debug("Size indata abc88",at.id,"childHeight",wa,"maxHeight",gt),A.Rm.debug("Size indata abc88 xSize",Xr,"padding",Mt);for(const ja of at.children)ja.size&&(ja.size.width=fa,ja.size.height=wa,ja.size.x=0,ja.size.y=0)}if(A.Rm.debug(`abc95 (finale calc) ${at.id} xSize ${Xr} ySize ${Gr} columns ${Kt}${at.children.length} width=${Math.max(aa,at.size?.width||0)}`),aa<(at?.size?.width||0)){aa=at?.size?.width||0;const fa=Kt>0?Math.min(at.children.length,Kt):at.children.length;if(fa>0){const wa=(aa-fa*Mt-Mt)/fa;A.Rm.debug("abc95 (growing to fit) width",at.id,aa,at.size?.width,wa);for(const ja of at.children)ja.size&&(ja.size.width=wa)}}at.size={width:aa,height:La,x:0,y:0}}A.Rm.debug("setBlockSizes abc94 (done)",at.id,at?.size?.x,at?.size?.width,at?.size?.y,at?.size?.height)}function Ze(at,Ct){A.Rm.debug(`abc85 layout blocks (=>layoutBlocks) ${at.id} x: ${at?.size?.x} y: ${at?.size?.y} width: ${at?.size?.width}`);const M=at.columns??-1;if(A.Rm.debug("layoutBlocks columns abc95",at.id,"=>",M,at),at.children&&at.children.length>0){A.Rm.debug("widthOfChildren 88",at.children.length*(at?.children[0]?.size?.width??0)+(at.children.length-1)*Mt,"posX");let gt=0;A.Rm.debug("abc91 block?.size?.x",at.id,at?.size?.x);let Lt=at?.size?.x?at?.size?.x+(-at?.size?.width/2||0):-Mt,Kt=0;for(const Je of at.children){const Xr=at;if(!Je.size)continue;const{width:Gr,height:aa}=Je.size,{px:La,py:fa}=Zt(M,gt);if(fa!=Kt&&(Kt=fa,Lt=at?.size?.x?at?.size?.x+(-at?.size?.width/2||0):-Mt,A.Rm.debug("New row in layout for block",at.id," and child ",Je.id,Kt)),A.Rm.debug(`abc89 layout blocks (child) id: ${Je.id} Pos: ${gt} (px, py) ${La},${fa} (${Xr?.size?.x},${Xr?.size?.y}) parent: ${Xr.id} width: ${Gr}${Mt}`),Xr.size){const ja=Gr/2;Je.size.x=Lt+Mt+ja,A.Rm.debug(`abc91 layout blocks (calc) px, pyid:${Je.id} startingPos=X${Lt} new startingPosX${Je.size.x} ${ja} padding=${Mt} width=${Gr} halfWidth=${ja} => x:${Je.size.x} y:${Je.size.y} ${Je.widthInColumns} (width * (child?.w || 1)) / 2 ${Gr*(Je?.widthInColumns??1)/2}`),Lt=Je.size.x+ja,Je.size.y=Xr.size.y-Xr.size.height/2+fa*(aa+Mt)+aa/2+Mt,A.Rm.debug(`abc88 layout blocks (calc) px, pyid:${Je.id}startingPosX${Lt}${Mt}${ja}=>x:${Je.size.x}y:${Je.size.y}${Je.widthInColumns}(width * (child?.w || 1)) / 2${Gr*(Je?.widthInColumns??1)/2}`)}Je.children&&Ze(Je,Ct);let wa=Je?.widthInColumns??1;M>0&&(wa=Math.min(wa,M-gt%M)),gt+=wa,A.Rm.debug("abc88 columnsPos",Je,gt)}}A.Rm.debug(`layout blocks (<==layoutBlocks) ${at.id} x: ${at?.size?.x} y: ${at?.size?.y} width: ${at?.size?.width}`)}function de(at,{minX:Ct,minY:M,maxX:Jt,maxY:Ve}={minX:0,minY:0,maxX:0,maxY:0}){if(at.size&&"root"!==at.id){const{x:gt,y:Lt,width:Kt,height:Je}=at.size;gt-Kt/2<Ct&&(Ct=gt-Kt/2),Lt-Je/2<M&&(M=Lt-Je/2),gt+Kt/2>Jt&&(Jt=gt+Kt/2),Lt+Je/2>Ve&&(Ve=Lt+Je/2)}if(at.children)for(const gt of at.children)({minX:Ct,minY:M,maxX:Jt,maxY:Ve}=de(gt,{minX:Ct,minY:M,maxX:Jt,maxY:Ve}));return{minX:Ct,minY:M,maxX:Jt,maxY:Ve}}function mr(at){const Ct=at.getBlock("root");if(!Ct)return;Re(Ct,at,0,0),Ze(Ct,at),A.Rm.debug("getBlocks",JSON.stringify(Ct,null,2));const{minX:M,minY:Jt,maxX:Ve,maxY:gt}=de(Ct);return{x:M,y:Jt,width:Ve-M,height:gt-Jt}}function xr(at,Ct){Ct&&at.attr("style",Ct)}function zt(at,Ct){const M=(0,Ge.Ltv)(document.createElementNS("http://www.w3.org/2000/svg","foreignObject")),Jt=M.append("xhtml:div"),Ve=at.label,gt=at.isNode?"nodeLabel":"edgeLabel",Lt=Jt.append("span");return Lt.html((0,$.jZ)(Ve,Ct)),xr(Lt,at.labelStyle),Lt.attr("class",gt),xr(Jt,at.labelStyle),Jt.style("display","inline-block"),Jt.style("white-space","nowrap"),Jt.attr("xmlns","http://www.w3.org/1999/xhtml"),M.node()}(0,A.K2)(Re,"setBlockSizes"),(0,A.K2)(Ze,"layoutBlocks"),(0,A.K2)(de,"findBounds"),(0,A.K2)(mr,"layout"),(0,A.K2)(xr,"applyStyle"),(0,A.K2)(zt,"addHtmlLabel");var or=(0,A.K2)(function(){var at=(0,ot.A)(function*(Ct,M,Jt,Ve){let gt=Ct||"";"object"==typeof gt&&(gt=gt[0]);const Lt=(0,$.D7)();if((0,$._3)(Lt.flowchart.htmlLabels))return gt=gt.replace(/\\n|\n/g,"<br />"),A.Rm.debug("vertexText"+gt),zt({isNode:Ve,label:yield(0,Pt.hE)((0,ut.Sm)(gt)),labelStyle:M.replace("fill:","color:")},Lt);{const Kt=document.createElementNS("http://www.w3.org/2000/svg","text");Kt.setAttribute("style",M.replace("color:","fill:"));let Je=[];Je="string"==typeof gt?gt.split(/\\n|\n|<br\s*\/?>/gi):Array.isArray(gt)?gt:[];for(const Xr of Je){const Gr=document.createElementNS("http://www.w3.org/2000/svg","tspan");Gr.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),Gr.setAttribute("dy","1em"),Gr.setAttribute("x","0"),Gr.setAttribute("class",Jt?"title-row":"row"),Gr.textContent=Xr.trim(),Kt.appendChild(Gr)}return Kt}});return function(Ct,M,Jt,Ve){return at.apply(this,arguments)}}(),"createLabel"),ve=(0,A.K2)((at,Ct,M,Jt,Ve)=>{Ct.arrowTypeStart&&Ee(at,"start",Ct.arrowTypeStart,M,Jt,Ve),Ct.arrowTypeEnd&&Ee(at,"end",Ct.arrowTypeEnd,M,Jt,Ve)},"addEdgeMarkers"),ce={arrow_cross:"cross",arrow_point:"point",arrow_barb:"barb",arrow_circle:"circle",aggregation:"aggregation",extension:"extension",composition:"composition",dependency:"dependency",lollipop:"lollipop"},Ee=(0,A.K2)((at,Ct,M,Jt,Ve,gt)=>{const Lt=ce[M];Lt?at.attr(`marker-${Ct}`,`url(${Jt}#${Ve}_${gt}-${Lt}${"start"===Ct?"Start":"End"})`):A.Rm.warn(`Unknown arrow type: ${M}`)},"addEdgeMarker"),De={},er={},Qe=(0,A.K2)(function(){var at=(0,ot.A)(function*(Ct,M){const Jt=(0,$.D7)(),Ve=(0,$._3)(Jt.flowchart.htmlLabels),gt="markdown"===M.labelType?(0,Pt.GZ)(Ct,M.label,{style:M.labelStyle,useHtmlLabels:Ve,addSvgBackground:!0},Jt):yield or(M.label,M.labelStyle),Lt=Ct.insert("g").attr("class","edgeLabel"),Kt=Lt.insert("g").attr("class","label");Kt.node().appendChild(gt);let Xr,Je=gt.getBBox();if(Ve){const Gr=gt.children[0],aa=(0,Ge.Ltv)(gt);Je=Gr.getBoundingClientRect(),aa.attr("width",Je.width),aa.attr("height",Je.height)}if(Kt.attr("transform","translate("+-Je.width/2+", "+-Je.height/2+")"),De[M.id]=Lt,M.width=Je.width,M.height=Je.height,M.startLabelLeft){const Gr=yield or(M.startLabelLeft,M.labelStyle),aa=Ct.insert("g").attr("class","edgeTerminals"),La=aa.insert("g").attr("class","inner");Xr=La.node().appendChild(Gr);const fa=Gr.getBBox();La.attr("transform","translate("+-fa.width/2+", "+-fa.height/2+")"),er[M.id]||(er[M.id]={}),er[M.id].startLeft=aa,Lr(Xr,M.startLabelLeft)}if(M.startLabelRight){const Gr=yield or(M.startLabelRight,M.labelStyle),aa=Ct.insert("g").attr("class","edgeTerminals"),La=aa.insert("g").attr("class","inner");Xr=aa.node().appendChild(Gr),La.node().appendChild(Gr);const fa=Gr.getBBox();La.attr("transform","translate("+-fa.width/2+", "+-fa.height/2+")"),er[M.id]||(er[M.id]={}),er[M.id].startRight=aa,Lr(Xr,M.startLabelRight)}if(M.endLabelLeft){const Gr=yield or(M.endLabelLeft,M.labelStyle),aa=Ct.insert("g").attr("class","edgeTerminals"),La=aa.insert("g").attr("class","inner");Xr=La.node().appendChild(Gr);const fa=Gr.getBBox();La.attr("transform","translate("+-fa.width/2+", "+-fa.height/2+")"),aa.node().appendChild(Gr),er[M.id]||(er[M.id]={}),er[M.id].endLeft=aa,Lr(Xr,M.endLabelLeft)}if(M.endLabelRight){const Gr=yield or(M.endLabelRight,M.labelStyle),aa=Ct.insert("g").attr("class","edgeTerminals"),La=aa.insert("g").attr("class","inner");Xr=La.node().appendChild(Gr);const fa=Gr.getBBox();La.attr("transform","translate("+-fa.width/2+", "+-fa.height/2+")"),aa.node().appendChild(Gr),er[M.id]||(er[M.id]={}),er[M.id].endRight=aa,Lr(Xr,M.endLabelRight)}return gt});return function(Ct,M){return at.apply(this,arguments)}}(),"insertEdgeLabel");function Lr(at,Ct){(0,$.D7)().flowchart.htmlLabels&&at&&(at.style.width=9*Ct.length+"px",at.style.height="12px")}(0,A.K2)(Lr,"setTerminalWidth");var _e=(0,A.K2)((at,Ct)=>{A.Rm.debug("Moving label abc88 ",at.id,at.label,De[at.id],Ct);let M=Ct.updatedPath?Ct.updatedPath:Ct.originalPath;const Jt=(0,$.D7)(),{subGraphTitleTotalMargin:Ve}=(0,S.O)(Jt);if(at.label){const gt=De[at.id];let Lt=at.x,Kt=at.y;if(M){const Je=ut._K.calcLabelPosition(M);A.Rm.debug("Moving label "+at.label+" from (",Lt,",",Kt,") to (",Je.x,",",Je.y,") abc88"),Ct.updatedPath&&(Lt=Je.x,Kt=Je.y)}gt.attr("transform",`translate(${Lt}, ${Kt+Ve/2})`)}if(at.startLabelLeft){const gt=er[at.id].startLeft;let Lt=at.x,Kt=at.y;if(M){const Je=ut._K.calcTerminalLabelPosition(at.arrowTypeStart?10:0,"start_left",M);Lt=Je.x,Kt=Je.y}gt.attr("transform",`translate(${Lt}, ${Kt})`)}if(at.startLabelRight){const gt=er[at.id].startRight;let Lt=at.x,Kt=at.y;if(M){const Je=ut._K.calcTerminalLabelPosition(at.arrowTypeStart?10:0,"start_right",M);Lt=Je.x,Kt=Je.y}gt.attr("transform",`translate(${Lt}, ${Kt})`)}if(at.endLabelLeft){const gt=er[at.id].endLeft;let Lt=at.x,Kt=at.y;if(M){const Je=ut._K.calcTerminalLabelPosition(at.arrowTypeEnd?10:0,"end_left",M);Lt=Je.x,Kt=Je.y}gt.attr("transform",`translate(${Lt}, ${Kt})`)}if(at.endLabelRight){const gt=er[at.id].endRight;let Lt=at.x,Kt=at.y;if(M){const Je=ut._K.calcTerminalLabelPosition(at.arrowTypeEnd?10:0,"end_right",M);Lt=Je.x,Kt=Je.y}gt.attr("transform",`translate(${Lt}, ${Kt})`)}},"positionEdgeLabel"),Hr=(0,A.K2)((at,Ct)=>{const Jt=at.y,Ve=Math.abs(Ct.x-at.x),gt=Math.abs(Ct.y-Jt);return Ve>=at.width/2||gt>=at.height/2},"outsideNode"),sr=(0,A.K2)((at,Ct,M)=>{A.Rm.debug(`intersection calc abc89:\n  outsidePoint: ${JSON.stringify(Ct)}\n  insidePoint : ${JSON.stringify(M)}\n  node        : x:${at.x} y:${at.y} w:${at.width} h:${at.height}`);const Jt=at.x,Ve=at.y,gt=Math.abs(Jt-M.x),Lt=at.width/2;let Kt=M.x<Ct.x?Lt-gt:Lt+gt;const Je=at.height/2,Xr=Math.abs(Ct.y-M.y),Gr=Math.abs(Ct.x-M.x);if(Math.abs(Ve-Ct.y)*Lt>Math.abs(Jt-Ct.x)*Je){let aa=M.y<Ct.y?Ct.y-Je-Ve:Ve-Je-Ct.y;Kt=Gr*aa/Xr;const La={x:M.x<Ct.x?M.x+Kt:M.x-Gr+Kt,y:M.y<Ct.y?M.y+Xr-aa:M.y-Xr+aa};return 0===Kt&&(La.x=Ct.x,La.y=Ct.y),0===Gr&&(La.x=Ct.x),0===Xr&&(La.y=Ct.y),A.Rm.debug(`abc89 topp/bott calc, Q ${Xr}, q ${aa}, R ${Gr}, r ${Kt}`,La),La}{Kt=M.x<Ct.x?Ct.x-Lt-Jt:Jt-Lt-Ct.x;let aa=Xr*Kt/Gr,La=M.x<Ct.x?M.x+Gr-Kt:M.x-Gr+Kt,fa=M.y<Ct.y?M.y+aa:M.y-aa;return A.Rm.debug(`sides calc abc89, Q ${Xr}, q ${aa}, R ${Gr}, r ${Kt}`,{_x:La,_y:fa}),0===Kt&&(La=Ct.x,fa=Ct.y),0===Gr&&(La=Ct.x),0===Xr&&(fa=Ct.y),{x:La,y:fa}}},"intersection"),te=(0,A.K2)((at,Ct)=>{A.Rm.debug("abc88 cutPathAtIntersect",at,Ct);let M=[],Jt=at[0],Ve=!1;return at.forEach(gt=>{if(Hr(Ct,gt)||Ve)Jt=gt,Ve||M.push(gt);else{const Lt=sr(Ct,Jt,gt);let Kt=!1;M.forEach(Je=>{Kt=Kt||Je.x===Lt.x&&Je.y===Lt.y}),M.some(Je=>Je.x===Lt.x&&Je.y===Lt.y)||M.push(Lt),Ve=!0}}),M},"cutPathAtIntersect"),ne=(0,A.K2)(function(at,Ct,M,Jt,Ve,gt,Lt){let Kt=M.points;A.Rm.debug("abc88 InsertEdge: edge=",M,"e=",Ct);let Je=!1;const Xr=gt.node(Ct.v);var Gr=gt.node(Ct.w);Gr?.intersect&&Xr?.intersect&&(Kt=Kt.slice(1,M.points.length-1),Kt.unshift(Xr.intersect(Kt[0])),Kt.push(Gr.intersect(Kt[Kt.length-1]))),M.toCluster&&(A.Rm.debug("to cluster abc88",Jt[M.toCluster]),Kt=te(M.points,Jt[M.toCluster].node),Je=!0),M.fromCluster&&(A.Rm.debug("from cluster abc88",Jt[M.fromCluster]),Kt=te(Kt.reverse(),Jt[M.fromCluster].node).reverse(),Je=!0);const aa=Kt.filter(Fa=>!Number.isNaN(Fa.y));let La=Ge.qrM;M.curve&&("graph"===Ve||"flowchart"===Ve)&&(La=M.curve);const{x:fa,y:wa}=(0,L.RI)(M),ja=(0,Ge.n8j)().x(fa).y(wa).curve(La);let $a;switch(M.thickness){case"normal":$a="edge-thickness-normal";break;case"thick":case"invisible":$a="edge-thickness-thick";break;default:$a=""}switch(M.pattern){case"solid":$a+=" edge-pattern-solid";break;case"dotted":$a+=" edge-pattern-dotted";break;case"dashed":$a+=" edge-pattern-dashed"}const yi=at.append("path").attr("d",ja(aa)).attr("id",M.id).attr("class"," "+$a+(M.classes?" "+M.classes:"")).attr("style",M.style);let Ei="";((0,$.D7)().flowchart.arrowMarkerAbsolute||(0,$.D7)().state.arrowMarkerAbsolute)&&(Ei=(0,$.ID)(!0)),ve(yi,M,Ei,Lt,Ve);let mi={};return Je&&(mi.updatedPath=Kt),mi.originalPath=M.points,mi},"insertEdge"),be=(0,A.K2)(at=>{const Ct=new Set;for(const M of at)switch(M){case"x":Ct.add("right"),Ct.add("left");break;case"y":Ct.add("up"),Ct.add("down");break;default:Ct.add(M)}return Ct},"expandAndDeduplicateDirections"),ir=(0,A.K2)((at,Ct,M)=>{const Jt=be(at),gt=Ct.height+2*M.padding,Lt=gt/2,Kt=Ct.width+2*Lt+M.padding,Je=M.padding/2;return Jt.has("right")&&Jt.has("left")&&Jt.has("up")&&Jt.has("down")?[{x:0,y:0},{x:Lt,y:0},{x:Kt/2,y:2*Je},{x:Kt-Lt,y:0},{x:Kt,y:0},{x:Kt,y:-gt/3},{x:Kt+2*Je,y:-gt/2},{x:Kt,y:-2*gt/3},{x:Kt,y:-gt},{x:Kt-Lt,y:-gt},{x:Kt/2,y:-gt-2*Je},{x:Lt,y:-gt},{x:0,y:-gt},{x:0,y:-2*gt/3},{x:-2*Je,y:-gt/2},{x:0,y:-gt/3}]:Jt.has("right")&&Jt.has("left")&&Jt.has("up")?[{x:Lt,y:0},{x:Kt-Lt,y:0},{x:Kt,y:-gt/2},{x:Kt-Lt,y:-gt},{x:Lt,y:-gt},{x:0,y:-gt/2}]:Jt.has("right")&&Jt.has("left")&&Jt.has("down")?[{x:0,y:0},{x:Lt,y:-gt},{x:Kt-Lt,y:-gt},{x:Kt,y:0}]:Jt.has("right")&&Jt.has("up")&&Jt.has("down")?[{x:0,y:0},{x:Kt,y:-Lt},{x:Kt,y:-gt+Lt},{x:0,y:-gt}]:Jt.has("left")&&Jt.has("up")&&Jt.has("down")?[{x:Kt,y:0},{x:0,y:-Lt},{x:0,y:-gt+Lt},{x:Kt,y:-gt}]:Jt.has("right")&&Jt.has("left")?[{x:Lt,y:0},{x:Lt,y:-Je},{x:Kt-Lt,y:-Je},{x:Kt-Lt,y:0},{x:Kt,y:-gt/2},{x:Kt-Lt,y:-gt},{x:Kt-Lt,y:-gt+Je},{x:Lt,y:-gt+Je},{x:Lt,y:-gt},{x:0,y:-gt/2}]:Jt.has("up")&&Jt.has("down")?[{x:Kt/2,y:0},{x:0,y:-Je},{x:Lt,y:-Je},{x:Lt,y:-gt+Je},{x:0,y:-gt+Je},{x:Kt/2,y:-gt},{x:Kt,y:-gt+Je},{x:Kt-Lt,y:-gt+Je},{x:Kt-Lt,y:-Je},{x:Kt,y:-Je}]:Jt.has("right")&&Jt.has("up")?[{x:0,y:0},{x:Kt,y:-Lt},{x:0,y:-gt}]:Jt.has("right")&&Jt.has("down")?[{x:0,y:0},{x:Kt,y:0},{x:0,y:-gt}]:Jt.has("left")&&Jt.has("up")?[{x:Kt,y:0},{x:0,y:-Lt},{x:Kt,y:-gt}]:Jt.has("left")&&Jt.has("down")?[{x:Kt,y:0},{x:0,y:0},{x:Kt,y:-gt}]:Jt.has("right")?[{x:Lt,y:-Je},{x:Lt,y:-Je},{x:Kt-Lt,y:-Je},{x:Kt-Lt,y:0},{x:Kt,y:-gt/2},{x:Kt-Lt,y:-gt},{x:Kt-Lt,y:-gt+Je},{x:Lt,y:-gt+Je},{x:Lt,y:-gt+Je}]:Jt.has("left")?[{x:Lt,y:0},{x:Lt,y:-Je},{x:Kt-Lt,y:-Je},{x:Kt-Lt,y:-gt+Je},{x:Lt,y:-gt+Je},{x:Lt,y:-gt},{x:0,y:-gt/2}]:Jt.has("up")?[{x:Lt,y:-Je},{x:Lt,y:-gt+Je},{x:0,y:-gt+Je},{x:Kt/2,y:-gt},{x:Kt,y:-gt+Je},{x:Kt-Lt,y:-gt+Je},{x:Kt-Lt,y:-Je}]:Jt.has("down")?[{x:Kt/2,y:0},{x:0,y:-Je},{x:Lt,y:-Je},{x:Lt,y:-gt+Je},{x:Kt-Lt,y:-gt+Je},{x:Kt-Lt,y:-Je},{x:Kt,y:-Je}]:[{x:0,y:0}]},"getArrowPoints");function g(at,Ct){return at.intersect(Ct)}(0,A.K2)(g,"intersectNode");var y=g;function E(at,Ct,M,Jt){var Ve=at.x,gt=at.y,Lt=Ve-Jt.x,Kt=gt-Jt.y,Je=Math.sqrt(Ct*Ct*Kt*Kt+M*M*Lt*Lt),Xr=Math.abs(Ct*M*Lt/Je);Jt.x<Ve&&(Xr=-Xr);var Gr=Math.abs(Ct*M*Kt/Je);return Jt.y<gt&&(Gr=-Gr),{x:Ve+Xr,y:gt+Gr}}(0,A.K2)(E,"intersectEllipse");var I=E;function m(at,Ct,M){return I(at,Ct,Ct,M)}(0,A.K2)(m,"intersectCircle");var D=m;function v(at,Ct,M,Jt){var Ve,gt,Lt,Kt,Je,Xr,Gr,aa,La,fa,wa,ja,$a;if(fa=(Ve=Ct.y-at.y)*Jt.x+(Lt=at.x-Ct.x)*Jt.y+(Je=Ct.x*at.y-at.x*Ct.y),!(0!==(La=Ve*M.x+Lt*M.y+Je)&&0!==fa&&b(La,fa)||(gt=Jt.y-M.y,Kt=M.x-Jt.x,Xr=Jt.x*M.y-M.x*Jt.y,Gr=gt*at.x+Kt*at.y+Xr,aa=gt*Ct.x+Kt*Ct.y+Xr,0!==Gr&&0!==aa&&b(Gr,aa)||(wa=Ve*Kt-gt*Lt,0===wa))))return ja=Math.abs(wa/2),{x:($a=Lt*Xr-Kt*Je)<0?($a-ja)/wa:($a+ja)/wa,y:($a=gt*Je-Ve*Xr)<0?($a-ja)/wa:($a+ja)/wa}}function b(at,Ct){return at*Ct>0}(0,A.K2)(v,"intersectLine"),(0,A.K2)(b,"sameSign");var C=v,P=Q;function Q(at,Ct,M){var Jt=at.x,Ve=at.y,gt=[],Lt=Number.POSITIVE_INFINITY,Kt=Number.POSITIVE_INFINITY;"function"==typeof Ct.forEach?Ct.forEach(function(wa){Lt=Math.min(Lt,wa.x),Kt=Math.min(Kt,wa.y)}):(Lt=Math.min(Lt,Ct.x),Kt=Math.min(Kt,Ct.y));for(var Je=Jt-at.width/2-Lt,Xr=Ve-at.height/2-Kt,Gr=0;Gr<Ct.length;Gr++){var aa=Ct[Gr],La=Ct[Gr<Ct.length-1?Gr+1:0],fa=C(at,M,{x:Je+aa.x,y:Xr+aa.y},{x:Je+La.x,y:Xr+La.y});fa&&gt.push(fa)}return gt.length?(gt.length>1&&gt.sort(function(wa,ja){var $a=wa.x-M.x,yi=wa.y-M.y,Ei=Math.sqrt($a*$a+yi*yi),mi=ja.x-M.x,Fa=ja.y-M.y,Pr=Math.sqrt(mi*mi+Fa*Fa);return Ei<Pr?-1:Ei===Pr?0:1}),gt[0]):at}(0,A.K2)(Q,"intersectPolygon");var jt={node:y,circle:D,ellipse:I,polygon:P,rect:(0,A.K2)((at,Ct)=>{var Je,Xr,M=at.x,Jt=at.y,Ve=Ct.x-M,gt=Ct.y-Jt,Lt=at.width/2,Kt=at.height/2;return Math.abs(gt)*Lt>Math.abs(Ve)*Kt?(gt<0&&(Kt=-Kt),Je=0===gt?0:Kt*Ve/gt,Xr=Kt):(Ve<0&&(Lt=-Lt),Je=Lt,Xr=0===Ve?0:Lt*gt/Ve),{x:M+Je,y:Jt+Xr}},"intersectRect")},Ut=(0,A.K2)(function(){var at=(0,ot.A)(function*(Ct,M,Jt,Ve){const gt=(0,$.D7)();let Lt;const Kt=M.useHtmlLabels||(0,$._3)(gt.flowchart.htmlLabels);Lt=Jt||"node default";const Je=Ct.insert("g").attr("class",Lt).attr("id",M.domId||M.id),Xr=Je.insert("g").attr("class","label").attr("style",M.labelStyle);let Gr;Gr=void 0===M.labelText?"":"string"==typeof M.labelText?M.labelText:M.labelText[0];const aa=Xr.node();let La;La="markdown"===M.labelType?(0,Pt.GZ)(Xr,(0,$.jZ)((0,ut.Sm)(Gr),gt),{useHtmlLabels:Kt,width:M.width||gt.flowchart.wrappingWidth,classes:"markdown-node-label"},gt):aa.appendChild(yield or((0,$.jZ)((0,ut.Sm)(Gr),gt),M.labelStyle,!1,Ve));let fa=La.getBBox();const wa=M.padding/2;if((0,$._3)(gt.flowchart.htmlLabels)){const ja=La.children[0],$a=(0,Ge.Ltv)(La),yi=ja.getElementsByTagName("img");if(yi){const Ei=""===Gr.replace(/<img[^>]*>/g,"").trim();yield Promise.all([...yi].map(mi=>new Promise(Fa=>{function Pr(){if(mi.style.display="flex",mi.style.flexDirection="column",Ei){const ya=gt.fontSize?gt.fontSize:window.getComputedStyle(document.body).fontSize,ni=5*parseInt(ya,10)+"px";mi.style.minWidth=ni,mi.style.maxWidth=ni}else mi.style.width="100%";Fa(mi)}(0,A.K2)(Pr,"setupImage"),setTimeout(()=>{mi.complete&&Pr()}),mi.addEventListener("error",Pr),mi.addEventListener("load",Pr)})))}fa=ja.getBoundingClientRect(),$a.attr("width",fa.width),$a.attr("height",fa.height)}return Xr.attr("transform",Kt?"translate("+-fa.width/2+", "+-fa.height/2+")":"translate(0, "+-fa.height/2+")"),M.centerLabel&&Xr.attr("transform","translate("+-fa.width/2+", "+-fa.height/2+")"),Xr.insert("rect",":first-child"),{shapeSvg:Je,bbox:fa,halfPadding:wa,label:Xr}});return function(Ct,M,Jt,Ve){return at.apply(this,arguments)}}(),"labelHelper"),Wt=(0,A.K2)((at,Ct)=>{const M=Ct.node().getBBox();at.width=M.width,at.height=M.height},"updateNodeBounds");function xe(at,Ct,M,Jt){return at.insert("polygon",":first-child").attr("points",Jt.map(function(Ve){return Ve.x+","+Ve.y}).join(" ")).attr("class","label-container").attr("transform","translate("+-Ct/2+","+M/2+")")}(0,A.K2)(xe,"insertPolygonShape");var We=(0,A.K2)(function(){var at=(0,ot.A)(function*(Ct,M){M.useHtmlLabels||(0,$.D7)().flowchart.htmlLabels||(M.centerLabel=!0);const{shapeSvg:Ve,bbox:gt,halfPadding:Lt}=yield Ut(Ct,M,"node "+M.classes,!0);A.Rm.info("Classes = ",M.classes);const Kt=Ve.insert("rect",":first-child");return Kt.attr("rx",M.rx).attr("ry",M.ry).attr("x",-gt.width/2-Lt).attr("y",-gt.height/2-Lt).attr("width",gt.width+M.padding).attr("height",gt.height+M.padding),Wt(M,Kt),M.intersect=function(Je){return jt.rect(M,Je)},Ve});return function(Ct,M){return at.apply(this,arguments)}}(),"note"),gr=(0,A.K2)(at=>at?" "+at:"","formatClass"),hr=(0,A.K2)((at,Ct)=>`${Ct||"node default"}${gr(at.classes)} ${gr(at.class)}`,"getClassesFromNode"),_r=(0,A.K2)(function(){var at=(0,ot.A)(function*(Ct,M){const{shapeSvg:Jt,bbox:Ve}=yield Ut(Ct,M,hr(M,void 0),!0),Kt=Ve.width+M.padding+(Ve.height+M.padding),Je=[{x:Kt/2,y:0},{x:Kt,y:-Kt/2},{x:Kt/2,y:-Kt},{x:0,y:-Kt/2}];A.Rm.info("Question main (Circle)");const Xr=xe(Jt,Kt,Kt,Je);return Xr.attr("style",M.style),Wt(M,Xr),M.intersect=function(Gr){return A.Rm.warn("Intersect called"),jt.polygon(M,Je,Gr)},Jt});return function(Ct,M){return at.apply(this,arguments)}}(),"question"),$e=(0,A.K2)((at,Ct)=>{const M=at.insert("g").attr("class","node default").attr("id",Ct.domId||Ct.id);return M.insert("polygon",":first-child").attr("points",[{x:0,y:14},{x:14,y:0},{x:0,y:-14},{x:-14,y:0}].map(function(Lt){return Lt.x+","+Lt.y}).join(" ")).attr("class","state-start").attr("r",7).attr("width",28).attr("height",28),Ct.width=28,Ct.height=28,Ct.intersect=function(Lt){return jt.circle(Ct,14,Lt)},M},"choice"),He=(0,A.K2)(function(){var at=(0,ot.A)(function*(Ct,M){const{shapeSvg:Jt,bbox:Ve}=yield Ut(Ct,M,hr(M,void 0),!0),Lt=Ve.height+M.padding,Kt=Lt/4,Je=Ve.width+2*Kt+M.padding,Xr=[{x:Kt,y:0},{x:Je-Kt,y:0},{x:Je,y:-Lt/2},{x:Je-Kt,y:-Lt},{x:Kt,y:-Lt},{x:0,y:-Lt/2}],Gr=xe(Jt,Je,Lt,Xr);return Gr.attr("style",M.style),Wt(M,Gr),M.intersect=function(aa){return jt.polygon(M,Xr,aa)},Jt});return function(Ct,M){return at.apply(this,arguments)}}(),"hexagon"),Ar=(0,A.K2)(function(){var at=(0,ot.A)(function*(Ct,M){const{shapeSvg:Jt,bbox:Ve}=yield Ut(Ct,M,void 0,!0),Lt=Ve.height+2*M.padding,Je=Ve.width+Lt/2*2+M.padding,Xr=ir(M.directions,Ve,M),Gr=xe(Jt,Je,Lt,Xr);return Gr.attr("style",M.style),Wt(M,Gr),M.intersect=function(aa){return jt.polygon(M,Xr,aa)},Jt});return function(Ct,M){return at.apply(this,arguments)}}(),"block_arrow"),kr=(0,A.K2)(function(){var at=(0,ot.A)(function*(Ct,M){const{shapeSvg:Jt,bbox:Ve}=yield Ut(Ct,M,hr(M,void 0),!0),gt=Ve.width+M.padding,Lt=Ve.height+M.padding,Kt=[{x:-Lt/2,y:0},{x:gt,y:0},{x:gt,y:-Lt},{x:-Lt/2,y:-Lt},{x:0,y:-Lt/2}];return xe(Jt,gt,Lt,Kt).attr("style",M.style),M.width=gt+Lt,M.height=Lt,M.intersect=function(Xr){return jt.polygon(M,Kt,Xr)},Jt});return function(Ct,M){return at.apply(this,arguments)}}(),"rect_left_inv_arrow"),zr=(0,A.K2)(function(){var at=(0,ot.A)(function*(Ct,M){const{shapeSvg:Jt,bbox:Ve}=yield Ut(Ct,M,hr(M),!0),gt=Ve.width+M.padding,Lt=Ve.height+M.padding,Kt=[{x:-2*Lt/6,y:0},{x:gt-Lt/6,y:0},{x:gt+2*Lt/6,y:-Lt},{x:Lt/6,y:-Lt}],Je=xe(Jt,gt,Lt,Kt);return Je.attr("style",M.style),Wt(M,Je),M.intersect=function(Xr){return jt.polygon(M,Kt,Xr)},Jt});return function(Ct,M){return at.apply(this,arguments)}}(),"lean_right"),Er=(0,A.K2)(function(){var at=(0,ot.A)(function*(Ct,M){const{shapeSvg:Jt,bbox:Ve}=yield Ut(Ct,M,hr(M,void 0),!0),gt=Ve.width+M.padding,Lt=Ve.height+M.padding,Kt=[{x:2*Lt/6,y:0},{x:gt+Lt/6,y:0},{x:gt-2*Lt/6,y:-Lt},{x:-Lt/6,y:-Lt}],Je=xe(Jt,gt,Lt,Kt);return Je.attr("style",M.style),Wt(M,Je),M.intersect=function(Xr){return jt.polygon(M,Kt,Xr)},Jt});return function(Ct,M){return at.apply(this,arguments)}}(),"lean_left"),Jr=(0,A.K2)(function(){var at=(0,ot.A)(function*(Ct,M){const{shapeSvg:Jt,bbox:Ve}=yield Ut(Ct,M,hr(M,void 0),!0),gt=Ve.width+M.padding,Lt=Ve.height+M.padding,Kt=[{x:-2*Lt/6,y:0},{x:gt+2*Lt/6,y:0},{x:gt-Lt/6,y:-Lt},{x:Lt/6,y:-Lt}],Je=xe(Jt,gt,Lt,Kt);return Je.attr("style",M.style),Wt(M,Je),M.intersect=function(Xr){return jt.polygon(M,Kt,Xr)},Jt});return function(Ct,M){return at.apply(this,arguments)}}(),"trapezoid"),Br=(0,A.K2)(function(){var at=(0,ot.A)(function*(Ct,M){const{shapeSvg:Jt,bbox:Ve}=yield Ut(Ct,M,hr(M,void 0),!0),gt=Ve.width+M.padding,Lt=Ve.height+M.padding,Kt=[{x:Lt/6,y:0},{x:gt-Lt/6,y:0},{x:gt+2*Lt/6,y:-Lt},{x:-2*Lt/6,y:-Lt}],Je=xe(Jt,gt,Lt,Kt);return Je.attr("style",M.style),Wt(M,Je),M.intersect=function(Xr){return jt.polygon(M,Kt,Xr)},Jt});return function(Ct,M){return at.apply(this,arguments)}}(),"inv_trapezoid"),ha=(0,A.K2)(function(){var at=(0,ot.A)(function*(Ct,M){const{shapeSvg:Jt,bbox:Ve}=yield Ut(Ct,M,hr(M,void 0),!0),gt=Ve.width+M.padding,Lt=Ve.height+M.padding,Kt=[{x:0,y:0},{x:gt+Lt/2,y:0},{x:gt,y:-Lt/2},{x:gt+Lt/2,y:-Lt},{x:0,y:-Lt}],Je=xe(Jt,gt,Lt,Kt);return Je.attr("style",M.style),Wt(M,Je),M.intersect=function(Xr){return jt.polygon(M,Kt,Xr)},Jt});return function(Ct,M){return at.apply(this,arguments)}}(),"rect_right_inv_arrow"),ia=(0,A.K2)(function(){var at=(0,ot.A)(function*(Ct,M){const{shapeSvg:Jt,bbox:Ve}=yield Ut(Ct,M,hr(M,void 0),!0),gt=Ve.width+M.padding,Lt=gt/2,Kt=Lt/(2.5+gt/50),Je=Ve.height+Kt+M.padding,Xr="M 0,"+Kt+" a "+Lt+","+Kt+" 0,0,0 "+gt+" 0 a "+Lt+","+Kt+" 0,0,0 "+-gt+" 0 l 0,"+Je+" a "+Lt+","+Kt+" 0,0,0 "+gt+" 0 l 0,"+-Je,Gr=Jt.attr("label-offset-y",Kt).insert("path",":first-child").attr("style",M.style).attr("d",Xr).attr("transform","translate("+-gt/2+","+-(Je/2+Kt)+")");return Wt(M,Gr),M.intersect=function(aa){const La=jt.rect(M,aa),fa=La.x-M.x;if(0!=Lt&&(Math.abs(fa)<M.width/2||Math.abs(fa)==M.width/2&&Math.abs(La.y-M.y)>M.height/2-Kt)){let wa=Kt*Kt*(1-fa*fa/(Lt*Lt));0!=wa&&(wa=Math.sqrt(wa)),wa=Kt-wa,aa.y-M.y>0&&(wa=-wa),La.y+=wa}return La},Jt});return function(Ct,M){return at.apply(this,arguments)}}(),"cylinder"),jr=(0,A.K2)(function(){var at=(0,ot.A)(function*(Ct,M){const{shapeSvg:Jt,bbox:Ve,halfPadding:gt}=yield Ut(Ct,M,"node "+M.classes+" "+M.class,!0),Lt=Jt.insert("rect",":first-child"),Kt=M.positioned?M.width:Ve.width+M.padding,Je=M.positioned?M.height:Ve.height+M.padding,Xr=M.positioned?-Kt/2:-Ve.width/2-gt,Gr=M.positioned?-Je/2:-Ve.height/2-gt;if(Lt.attr("class","basic label-container").attr("style",M.style).attr("rx",M.rx).attr("ry",M.ry).attr("x",Xr).attr("y",Gr).attr("width",Kt).attr("height",Je),M.props){const aa=new Set(Object.keys(M.props));M.props.borders&&(dr(Lt,M.props.borders,Kt,Je),aa.delete("borders")),aa.forEach(La=>{A.Rm.warn(`Unknown node property ${La}`)})}return Wt(M,Lt),M.intersect=function(aa){return jt.rect(M,aa)},Jt});return function(Ct,M){return at.apply(this,arguments)}}(),"rect"),Qr=(0,A.K2)(function(){var at=(0,ot.A)(function*(Ct,M){const{shapeSvg:Jt,bbox:Ve,halfPadding:gt}=yield Ut(Ct,M,"node "+M.classes,!0),Lt=Jt.insert("rect",":first-child"),Kt=M.positioned?M.width:Ve.width+M.padding,Je=M.positioned?M.height:Ve.height+M.padding,Xr=M.positioned?-Kt/2:-Ve.width/2-gt,Gr=M.positioned?-Je/2:-Ve.height/2-gt;if(Lt.attr("class","basic cluster composite label-container").attr("style",M.style).attr("rx",M.rx).attr("ry",M.ry).attr("x",Xr).attr("y",Gr).attr("width",Kt).attr("height",Je),M.props){const aa=new Set(Object.keys(M.props));M.props.borders&&(dr(Lt,M.props.borders,Kt,Je),aa.delete("borders")),aa.forEach(La=>{A.Rm.warn(`Unknown node property ${La}`)})}return Wt(M,Lt),M.intersect=function(aa){return jt.rect(M,aa)},Jt});return function(Ct,M){return at.apply(this,arguments)}}(),"composite"),lr=(0,A.K2)(function(){var at=(0,ot.A)(function*(Ct,M){const{shapeSvg:Jt}=yield Ut(Ct,M,"label",!0);A.Rm.trace("Classes = ",M.class);const Ve=Jt.insert("rect",":first-child");if(Ve.attr("width",0).attr("height",0),Jt.attr("class","label edgeLabel"),M.props){const Kt=new Set(Object.keys(M.props));M.props.borders&&(dr(Ve,M.props.borders,0,0),Kt.delete("borders")),Kt.forEach(Je=>{A.Rm.warn(`Unknown node property ${Je}`)})}return Wt(M,Ve),M.intersect=function(Kt){return jt.rect(M,Kt)},Jt});return function(Ct,M){return at.apply(this,arguments)}}(),"labelRect");function dr(at,Ct,M,Jt){const Ve=[],gt=(0,A.K2)(Kt=>{Ve.push(Kt,0)},"addBorder"),Lt=(0,A.K2)(Kt=>{Ve.push(0,Kt)},"skipBorder");Ct.includes("t")?(A.Rm.debug("add top border"),gt(M)):Lt(M),Ct.includes("r")?(A.Rm.debug("add right border"),gt(Jt)):Lt(Jt),Ct.includes("b")?(A.Rm.debug("add bottom border"),gt(M)):Lt(M),Ct.includes("l")?(A.Rm.debug("add left border"),gt(Jt)):Lt(Jt),at.attr("stroke-dasharray",Ve.join(" "))}(0,A.K2)(dr,"applyNodePropertyBorders");var W=(0,A.K2)(function(){var at=(0,ot.A)(function*(Ct,M){let Jt;Jt=M.classes?"node "+M.classes:"node default";const Ve=Ct.insert("g").attr("class",Jt).attr("id",M.domId||M.id),gt=Ve.insert("rect",":first-child"),Lt=Ve.insert("line"),Kt=Ve.insert("g").attr("class","label"),Je=M.labelText.flat?M.labelText.flat():M.labelText;let Xr="";Xr="object"==typeof Je?Je[0]:Je,A.Rm.info("Label text abc79",Xr,Je,"object"==typeof Je);const Gr=Kt.node().appendChild(yield or(Xr,M.labelStyle,!0,!0));let aa={width:0,height:0};if((0,$._3)((0,$.D7)().flowchart.htmlLabels)){const $a=Gr.children[0],yi=(0,Ge.Ltv)(Gr);aa=$a.getBoundingClientRect(),yi.attr("width",aa.width),yi.attr("height",aa.height)}A.Rm.info("Text 2",Je);const La=Je.slice(1,Je.length);let fa=Gr.getBBox();const wa=Kt.node().appendChild(yield or(La.join?La.join("<br/>"):La,M.labelStyle,!0,!0));if((0,$._3)((0,$.D7)().flowchart.htmlLabels)){const $a=wa.children[0],yi=(0,Ge.Ltv)(wa);aa=$a.getBoundingClientRect(),yi.attr("width",aa.width),yi.attr("height",aa.height)}const ja=M.padding/2;return(0,Ge.Ltv)(wa).attr("transform","translate( "+(aa.width>fa.width?0:(fa.width-aa.width)/2)+", "+(fa.height+ja+5)+")"),(0,Ge.Ltv)(Gr).attr("transform","translate( "+(aa.width<fa.width?0:-(fa.width-aa.width)/2)+", 0)"),aa=Kt.node().getBBox(),Kt.attr("transform","translate("+-aa.width/2+", "+(-aa.height/2-ja+3)+")"),gt.attr("class","outer title-state").attr("x",-aa.width/2-ja).attr("y",-aa.height/2-ja).attr("width",aa.width+M.padding).attr("height",aa.height+M.padding),Lt.attr("class","divider").attr("x1",-aa.width/2-ja).attr("x2",aa.width/2+ja).attr("y1",-aa.height/2-ja+fa.height+ja).attr("y2",-aa.height/2-ja+fa.height+ja),Wt(M,gt),M.intersect=function($a){return jt.rect(M,$a)},Ve});return function(Ct,M){return at.apply(this,arguments)}}(),"rectWithTitle"),Yt=(0,A.K2)(function(){var at=(0,ot.A)(function*(Ct,M){const{shapeSvg:Jt,bbox:Ve}=yield Ut(Ct,M,hr(M,void 0),!0),gt=Ve.height+M.padding,Lt=Ve.width+gt/4+M.padding,Kt=Jt.insert("rect",":first-child").attr("style",M.style).attr("rx",gt/2).attr("ry",gt/2).attr("x",-Lt/2).attr("y",-gt/2).attr("width",Lt).attr("height",gt);return Wt(M,Kt),M.intersect=function(Je){return jt.rect(M,Je)},Jt});return function(Ct,M){return at.apply(this,arguments)}}(),"stadium"),Ye=(0,A.K2)(function(){var at=(0,ot.A)(function*(Ct,M){const{shapeSvg:Jt,bbox:Ve,halfPadding:gt}=yield Ut(Ct,M,hr(M,void 0),!0),Lt=Jt.insert("circle",":first-child");return Lt.attr("style",M.style).attr("rx",M.rx).attr("ry",M.ry).attr("r",Ve.width/2+gt).attr("width",Ve.width+M.padding).attr("height",Ve.height+M.padding),A.Rm.info("Circle main"),Wt(M,Lt),M.intersect=function(Kt){return A.Rm.info("Circle intersect",M,Ve.width/2+gt,Kt),jt.circle(M,Ve.width/2+gt,Kt)},Jt});return function(Ct,M){return at.apply(this,arguments)}}(),"circle"),Ne=(0,A.K2)(function(){var at=(0,ot.A)(function*(Ct,M){const{shapeSvg:Jt,bbox:Ve,halfPadding:gt}=yield Ut(Ct,M,hr(M,void 0),!0),Kt=Jt.insert("g",":first-child"),Je=Kt.insert("circle"),Xr=Kt.insert("circle");return Kt.attr("class",M.class),Je.attr("style",M.style).attr("rx",M.rx).attr("ry",M.ry).attr("r",Ve.width/2+gt+5).attr("width",Ve.width+M.padding+10).attr("height",Ve.height+M.padding+10),Xr.attr("style",M.style).attr("rx",M.rx).attr("ry",M.ry).attr("r",Ve.width/2+gt).attr("width",Ve.width+M.padding).attr("height",Ve.height+M.padding),A.Rm.info("DoubleCircle main"),Wt(M,Je),M.intersect=function(Gr){return A.Rm.info("DoubleCircle intersect",M,Ve.width/2+gt+5,Gr),jt.circle(M,Ve.width/2+gt+5,Gr)},Jt});return function(Ct,M){return at.apply(this,arguments)}}(),"doublecircle"),Tr=(0,A.K2)(function(){var at=(0,ot.A)(function*(Ct,M){const{shapeSvg:Jt,bbox:Ve}=yield Ut(Ct,M,hr(M,void 0),!0),gt=Ve.width+M.padding,Lt=Ve.height+M.padding,Kt=[{x:0,y:0},{x:gt,y:0},{x:gt,y:-Lt},{x:0,y:-Lt},{x:0,y:0},{x:-8,y:0},{x:gt+8,y:0},{x:gt+8,y:-Lt},{x:-8,y:-Lt},{x:-8,y:0}],Je=xe(Jt,gt,Lt,Kt);return Je.attr("style",M.style),Wt(M,Je),M.intersect=function(Xr){return jt.polygon(M,Kt,Xr)},Jt});return function(Ct,M){return at.apply(this,arguments)}}(),"subroutine"),yr=(0,A.K2)((at,Ct)=>{const M=at.insert("g").attr("class","node default").attr("id",Ct.domId||Ct.id),Jt=M.insert("circle",":first-child");return Jt.attr("class","state-start").attr("r",7).attr("width",14).attr("height",14),Wt(Ct,Jt),Ct.intersect=function(Ve){return jt.circle(Ct,7,Ve)},M},"start"),da=(0,A.K2)((at,Ct,M)=>{const Jt=at.insert("g").attr("class","node default").attr("id",Ct.domId||Ct.id);let Ve=70,gt=10;"LR"===M&&(Ve=10,gt=70);const Lt=Jt.append("rect").attr("x",-1*Ve/2).attr("y",-1*gt/2).attr("width",Ve).attr("height",gt).attr("class","fork-join");return Wt(Ct,Lt),Ct.height=Ct.height+Ct.padding/2,Ct.width=Ct.width+Ct.padding/2,Ct.intersect=function(Kt){return jt.rect(Ct,Kt)},Jt},"forkJoin"),Wa={rhombus:_r,composite:Qr,question:_r,rect:jr,labelRect:lr,rectWithTitle:W,choice:$e,circle:Ye,doublecircle:Ne,stadium:Yt,hexagon:He,block_arrow:Ar,rect_left_inv_arrow:kr,lean_right:zr,lean_left:Er,trapezoid:Jr,inv_trapezoid:Br,rect_right_inv_arrow:ha,cylinder:ia,start:yr,end:(0,A.K2)((at,Ct)=>{const M=at.insert("g").attr("class","node default").attr("id",Ct.domId||Ct.id),Jt=M.insert("circle",":first-child"),Ve=M.insert("circle",":first-child");return Ve.attr("class","state-start").attr("r",7).attr("width",14).attr("height",14),Jt.attr("class","state-end").attr("r",5).attr("width",10).attr("height",10),Wt(Ct,Ve),Ct.intersect=function(gt){return jt.circle(Ct,7,gt)},M},"end"),note:We,subroutine:Tr,fork:da,join:da,class_box:(0,A.K2)(function(){var at=(0,ot.A)(function*(Ct,M){const Jt=M.padding/2;let Lt;Lt=M.classes?"node "+M.classes:"node default";const Kt=Ct.insert("g").attr("class",Lt).attr("id",M.domId||M.id),Je=Kt.insert("rect",":first-child"),Xr=Kt.insert("line"),Gr=Kt.insert("line");let aa=0,La=4;const fa=Kt.insert("g").attr("class","label");let wa=0;const ja=M.classData.annotations?.[0],$a=M.classData.annotations[0]?"\xab"+M.classData.annotations[0]+"\xbb":"",yi=fa.node().appendChild(yield or($a,M.labelStyle,!0,!0));let Ei=yi.getBBox();if((0,$._3)((0,$.D7)().flowchart.htmlLabels)){const Mr=yi.children[0],Pi=(0,Ge.Ltv)(yi);Ei=Mr.getBoundingClientRect(),Pi.attr("width",Ei.width),Pi.attr("height",Ei.height)}M.classData.annotations[0]&&(La+=Ei.height+4,aa+=Ei.width);let mi=M.classData.label;void 0!==M.classData.type&&""!==M.classData.type&&((0,$.D7)().flowchart.htmlLabels?mi+="&lt;"+M.classData.type+"&gt;":mi+="<"+M.classData.type+">");const Fa=fa.node().appendChild(yield or(mi,M.labelStyle,!0,!0));(0,Ge.Ltv)(Fa).attr("class","classTitle");let Pr=Fa.getBBox();if((0,$._3)((0,$.D7)().flowchart.htmlLabels)){const Mr=Fa.children[0],Pi=(0,Ge.Ltv)(Fa);Pr=Mr.getBoundingClientRect(),Pi.attr("width",Pr.width),Pi.attr("height",Pr.height)}La+=Pr.height+4,Pr.width>aa&&(aa=Pr.width);const ya=[];M.classData.members.forEach(function(){var Mr=(0,ot.A)(function*(Pi){const ua=Pi.getDisplayDetails();let ki=ua.displayText;(0,$.D7)().flowchart.htmlLabels&&(ki=ki.replace(/</g,"&lt;").replace(/>/g,"&gt;"));const Bi=fa.node().appendChild(yield or(ki,ua.cssStyle?ua.cssStyle:M.labelStyle,!0,!0));let Wi=Bi.getBBox();if((0,$._3)((0,$.D7)().flowchart.htmlLabels)){const ln=Bi.children[0],Ji=(0,Ge.Ltv)(Bi);Wi=ln.getBoundingClientRect(),Ji.attr("width",Wi.width),Ji.attr("height",Wi.height)}Wi.width>aa&&(aa=Wi.width),La+=Wi.height+4,ya.push(Bi)});return function(Pi){return Mr.apply(this,arguments)}}()),La+=8;const Ya=[];if(M.classData.methods.forEach(function(){var Mr=(0,ot.A)(function*(Pi){const ua=Pi.getDisplayDetails();let ki=ua.displayText;(0,$.D7)().flowchart.htmlLabels&&(ki=ki.replace(/</g,"&lt;").replace(/>/g,"&gt;"));const Bi=fa.node().appendChild(yield or(ki,ua.cssStyle?ua.cssStyle:M.labelStyle,!0,!0));let Wi=Bi.getBBox();if((0,$._3)((0,$.D7)().flowchart.htmlLabels)){const ln=Bi.children[0],Ji=(0,Ge.Ltv)(Bi);Wi=ln.getBoundingClientRect(),Ji.attr("width",Wi.width),Ji.attr("height",Wi.height)}Wi.width>aa&&(aa=Wi.width),La+=Wi.height+4,Ya.push(Bi)});return function(Pi){return Mr.apply(this,arguments)}}()),La+=8,ja){let Mr=(aa-Ei.width)/2;(0,Ge.Ltv)(yi).attr("transform","translate( "+(-1*aa/2+Mr)+", "+-1*La/2+")"),wa=Ei.height+4}let ni=(aa-Pr.width)/2;return(0,Ge.Ltv)(Fa).attr("transform","translate( "+(-1*aa/2+ni)+", "+(-1*La/2+wa)+")"),wa+=Pr.height+4,Xr.attr("class","divider").attr("x1",-aa/2-Jt).attr("x2",aa/2+Jt).attr("y1",-La/2-Jt+8+wa).attr("y2",-La/2-Jt+8+wa),wa+=8,ya.forEach(Mr=>{(0,Ge.Ltv)(Mr).attr("transform","translate( "+-aa/2+", "+(-1*La/2+wa+4)+")");const Pi=Mr?.getBBox();wa+=(Pi?.height??0)+4}),wa+=8,Gr.attr("class","divider").attr("x1",-aa/2-Jt).attr("x2",aa/2+Jt).attr("y1",-La/2-Jt+8+wa).attr("y2",-La/2-Jt+8+wa),wa+=8,Ya.forEach(Mr=>{(0,Ge.Ltv)(Mr).attr("transform","translate( "+-aa/2+", "+(-1*La/2+wa)+")");const Pi=Mr?.getBBox();wa+=(Pi?.height??0)+4}),Je.attr("style",M.style).attr("class","outer title-state").attr("x",-aa/2-Jt).attr("y",-La/2-Jt).attr("width",aa+M.padding).attr("height",La+M.padding),Wt(M,Je),M.intersect=function(Mr){return jt.rect(M,Mr)},Kt});return function(Ct,M){return at.apply(this,arguments)}}(),"class_box")},Ma={},ba=(0,A.K2)(function(){var at=(0,ot.A)(function*(Ct,M,Jt){let Ve,gt;if(M.link){let Lt;"sandbox"===(0,$.D7)().securityLevel?Lt="_top":M.linkTarget&&(Lt=M.linkTarget||"_blank"),Ve=Ct.insert("svg:a").attr("xlink:href",M.link).attr("target",Lt),gt=yield Wa[M.shape](Ve,M,Jt)}else gt=yield Wa[M.shape](Ct,M,Jt),Ve=gt;return M.tooltip&&gt.attr("title",M.tooltip),M.class&&gt.attr("class","node default "+M.class),Ma[M.id]=Ve,M.haveCallback&&Ma[M.id].attr("class",Ma[M.id].attr("class")+" clickable"),Ve});return function(Ct,M,Jt){return at.apply(this,arguments)}}(),"insertNode"),sa=(0,A.K2)(at=>{const Ct=Ma[at.id];A.Rm.trace("Transforming node",at.diff,at,"translate("+(at.x-at.width/2-5)+", "+at.width/2+")");const Jt=at.diff||0;return Ct.attr("transform",at.clusterNode?"translate("+(at.x+Jt-at.width/2)+", "+(at.y-at.height/2-8)+")":"translate("+at.x+", "+at.y+")"),Jt},"positionNode");function Sa(at,Ct,M=!1){const Jt=at;let Ve="default";(Jt?.classes?.length||0)>0&&(Ve=(Jt?.classes??[]).join(" ")),Ve+=" flowchart-label";let Kt,gt=0,Lt="";switch(Jt.type){case"round":gt=5,Lt="rect";break;case"composite":gt=0,Lt="composite",Kt=0;break;case"square":case"group":default:Lt="rect";break;case"diamond":Lt="question";break;case"hexagon":Lt="hexagon";break;case"block_arrow":Lt="block_arrow";break;case"odd":case"rect_left_inv_arrow":Lt="rect_left_inv_arrow";break;case"lean_right":Lt="lean_right";break;case"lean_left":Lt="lean_left";break;case"trapezoid":Lt="trapezoid";break;case"inv_trapezoid":Lt="inv_trapezoid";break;case"circle":Lt="circle";break;case"ellipse":Lt="ellipse";break;case"stadium":Lt="stadium";break;case"subroutine":Lt="subroutine";break;case"cylinder":Lt="cylinder";break;case"doublecircle":Lt="doublecircle"}const Je=(0,ut.sM)(Jt?.styles??[]),Gr=Jt.size??{width:0,height:0,x:0,y:0};return{labelStyle:Je.labelStyle,shape:Lt,labelText:Jt.label,rx:gt,ry:gt,class:Ve,style:Je.style,id:Jt.id,directions:Jt.directions,width:Gr.width,height:Gr.height,x:Gr.x,y:Gr.y,positioned:M,intersect:void 0,type:Jt.type,padding:Kt??(0,$.zj)()?.block?.padding??0}}function ea(at,Ct,M){return Va.apply(this,arguments)}function Va(){return(Va=(0,ot.A)(function*(at,Ct,M){const Jt=Sa(Ct,0,!1);if("group"===Jt.type)return;const Ve=(0,$.zj)(),gt=yield ba(at,Jt,{config:Ve}),Lt=gt.node().getBBox(),Kt=M.getBlock(Jt.id);Kt.size={width:Lt.width,height:Lt.height,x:0,y:0,node:gt},M.setBlock(Kt),gt.remove()})).apply(this,arguments)}function pr(at,Ct,M){return Ua.apply(this,arguments)}function Ua(){return(Ua=(0,ot.A)(function*(at,Ct,M){const Jt=Sa(Ct,0,!0);if("space"!==M.getBlock(Jt.id).type){const gt=(0,$.zj)();yield ba(at,Jt,{config:gt}),Ct.intersect=Jt?.intersect,sa(Jt)}})).apply(this,arguments)}function nr(at,Ct,M,Jt){return Oa.apply(this,arguments)}function Oa(){return(Oa=(0,ot.A)(function*(at,Ct,M,Jt){for(const Ve of Ct)yield Jt(at,Ve,M),Ve.children&&(yield nr(at,Ve.children,M,Jt))})).apply(this,arguments)}function Ka(at,Ct,M){return ti.apply(this,arguments)}function ti(){return(ti=(0,ot.A)(function*(at,Ct,M){yield nr(at,Ct,M,ea)})).apply(this,arguments)}function _a(at,Ct,M){return qa.apply(this,arguments)}function qa(){return(qa=(0,ot.A)(function*(at,Ct,M){yield nr(at,Ct,M,pr)})).apply(this,arguments)}function Ha(at,Ct,M,Jt,Ve){return oa.apply(this,arguments)}function oa(){return(oa=(0,ot.A)(function*(at,Ct,M,Jt,Ve){const gt=new dt.T({multigraph:!0,compound:!0});gt.setGraph({rankdir:"TB",nodesep:10,ranksep:10,marginx:8,marginy:8});for(const Lt of M)Lt.size&&gt.setNode(Lt.id,{width:Lt.size.width,height:Lt.size.height,intersect:Lt.intersect});for(const Lt of Ct)if(Lt.start&&Lt.end){const Kt=Jt.getBlock(Lt.start),Je=Jt.getBlock(Lt.end);if(Kt?.size&&Je?.size){const Xr=Kt.size,Gr=Je.size,aa=[{x:Xr.x,y:Xr.y},{x:Xr.x+(Gr.x-Xr.x)/2,y:Xr.y+(Gr.y-Xr.y)/2},{x:Gr.x,y:Gr.y}];ne(at,{v:Lt.start,w:Lt.end,name:Lt.id},{...Lt,arrowTypeEnd:Lt.arrowTypeEnd,arrowTypeStart:Lt.arrowTypeStart,points:aa,classes:"edge-thickness-normal edge-pattern-solid flowchart-link LS-a1 LE-b1"},void 0,"block",gt,Ve),Lt.label&&(yield Qe(at,{...Lt,label:Lt.label,labelStyle:"stroke: #333; stroke-width: 1.5px;fill:none;",arrowTypeEnd:Lt.arrowTypeEnd,arrowTypeStart:Lt.arrowTypeStart,points:aa,classes:"edge-thickness-normal edge-pattern-solid flowchart-link LS-a1 LE-b1"}),_e({...Lt,x:aa[1].x,y:aa[1].y},{originalPath:aa}))}}})).apply(this,arguments)}(0,A.K2)(Sa,"getNodeFromBlock"),(0,A.K2)(ea,"calculateBlockSize"),(0,A.K2)(pr,"insertBlockPositioned"),(0,A.K2)(nr,"performOperations"),(0,A.K2)(Ka,"calculateBlockSizes"),(0,A.K2)(_a,"insertBlocks"),(0,A.K2)(Ha,"insertEdges");var hi=(0,A.K2)(function(at,Ct){return Ct.db.getClasses()},"getClasses"),Fe={parser:q,db:qe,renderer:{draw:(0,A.K2)(function(){var at=(0,ot.A)(function*(Ct,M,Jt,Ve){const{securityLevel:gt,block:Lt}=(0,$.zj)(),Kt=Ve.db;let Je;"sandbox"===gt&&(Je=(0,Ge.Ltv)("#i"+M));const Xr=(0,Ge.Ltv)("sandbox"===gt?Je.nodes()[0].contentDocument.body:"body"),Gr="sandbox"===gt?Xr.select(`[id="${M}"]`):(0,Ge.Ltv)(`[id="${M}"]`);ke(Gr,["point","circle","cross"],Ve.type,M);const La=Kt.getBlocks(),fa=Kt.getBlocksFlat(),wa=Kt.getEdges(),ja=Gr.insert("g").attr("class","block");yield Ka(ja,La,Kt);const $a=mr(Kt);if(yield _a(ja,La,Kt),yield Ha(ja,wa,fa,Kt,M),$a){const yi=$a,Ei=Math.max(1,Math.round(yi.width/yi.height*.125)),mi=yi.height+Ei+10,Fa=yi.width+10,{useMaxWidth:Pr}=Lt;(0,$.a$)(Gr,mi,Fa,!!Pr),A.Rm.debug("Here Bounds",$a,yi),Gr.attr("viewBox",`${yi.x-5} ${yi.y-5} ${yi.width+10} ${yi.height+10}`)}});return function(Ct,M,Jt,Ve){return at.apply(this,arguments)}}(),"draw"),getClasses:hi},styles:Tt}},28957:(Ja,vr,R)=>{"use strict";R.r(vr),R.d(vr,{diagram:()=>Et});var ot=R(79006),ee=R(32303),L=R(40622),S=R(79687),Pt=function(){var Tt=(0,ee.K2)(function(ke,Mt,Zt,pe){for(Zt=Zt||{},pe=ke.length;pe--;Zt[ke[pe]]=Mt);return Zt},"o"),B=[6,8,10,11,12,14,16,17,20,21],F=[1,9],et=[1,10],mt=[1,11],it=[1,12],rt=[1,13],_t=[1,16],ht=[1,17],Ft={trace:(0,ee.K2)(function(){},"trace"),yy:{},symbols_:{error:2,start:3,timeline:4,document:5,EOF:6,line:7,SPACE:8,statement:9,NEWLINE:10,title:11,acc_title:12,acc_title_value:13,acc_descr:14,acc_descr_value:15,acc_descr_multiline_value:16,section:17,period_statement:18,event_statement:19,period:20,event:21,$accept:0,$end:1},terminals_:{2:"error",4:"timeline",6:"EOF",8:"SPACE",10:"NEWLINE",11:"title",12:"acc_title",13:"acc_title_value",14:"acc_descr",15:"acc_descr_value",16:"acc_descr_multiline_value",17:"section",20:"period",21:"event"},productions_:[0,[3,3],[5,0],[5,2],[7,2],[7,1],[7,1],[7,1],[9,1],[9,2],[9,2],[9,1],[9,1],[9,1],[9,1],[18,1],[19,1]],performAction:(0,ee.K2)(function(Mt,Zt,pe,Re,Ze,de,mr){var xr=de.length-1;switch(Ze){case 1:return de[xr-1];case 2:case 6:case 7:this.$=[];break;case 3:de[xr-1].push(de[xr]),this.$=de[xr-1];break;case 4:case 5:this.$=de[xr];break;case 8:Re.getCommonDb().setDiagramTitle(de[xr].substr(6)),this.$=de[xr].substr(6);break;case 9:this.$=de[xr].trim(),Re.getCommonDb().setAccTitle(this.$);break;case 10:case 11:this.$=de[xr].trim(),Re.getCommonDb().setAccDescription(this.$);break;case 12:Re.addSection(de[xr].substr(8)),this.$=de[xr].substr(8);break;case 15:Re.addTask(de[xr],0,""),this.$=de[xr];break;case 16:Re.addEvent(de[xr].substr(2)),this.$=de[xr]}},"anonymous"),table:[{3:1,4:[1,2]},{1:[3]},Tt(B,[2,2],{5:3}),{6:[1,4],7:5,8:[1,6],9:7,10:[1,8],11:F,12:et,14:mt,16:it,17:rt,18:14,19:15,20:_t,21:ht},Tt(B,[2,7],{1:[2,1]}),Tt(B,[2,3]),{9:18,11:F,12:et,14:mt,16:it,17:rt,18:14,19:15,20:_t,21:ht},Tt(B,[2,5]),Tt(B,[2,6]),Tt(B,[2,8]),{13:[1,19]},{15:[1,20]},Tt(B,[2,11]),Tt(B,[2,12]),Tt(B,[2,13]),Tt(B,[2,14]),Tt(B,[2,15]),Tt(B,[2,16]),Tt(B,[2,4]),Tt(B,[2,9]),Tt(B,[2,10])],defaultActions:{},parseError:(0,ee.K2)(function(Mt,Zt){if(!Zt.recoverable){var pe=new Error(Mt);throw pe.hash=Zt,pe}this.trace(Mt)},"parseError"),parse:(0,ee.K2)(function(Mt){var Zt=this,pe=[0],Re=[],Ze=[null],de=[],mr=this.table,xr="",zt=0,Ae=0,or=0,Ee=de.slice.call(arguments,1),De=Object.create(this.lexer),er={yy:{}};for(var Qe in this.yy)Object.prototype.hasOwnProperty.call(this.yy,Qe)&&(er.yy[Qe]=this.yy[Qe]);De.setInput(Mt,er.yy),er.yy.lexer=De,er.yy.parser=this,typeof De.yylloc>"u"&&(De.yylloc={});var Lr=De.yylloc;de.push(Lr);var _e=De.options&&De.options.ranges;function sr(){var C;return"number"!=typeof(C=Re.pop()||De.lex()||1)&&(C instanceof Array&&(C=(Re=C).pop()),C=Zt.symbols_[C]||C),C}this.parseError="function"==typeof er.yy.parseError?er.yy.parseError:Object.getPrototypeOf(this).parseError,(0,ee.K2)(function Hr(C){pe.length=pe.length-2*C,Ze.length=Ze.length-C,de.length=de.length-C},"popStack"),(0,ee.K2)(sr,"lex");for(var te,ne,be,ir,y,I,m,v,E={};;){if(this.defaultActions[be=pe[pe.length-1]]?ir=this.defaultActions[be]:((null===te||typeof te>"u")&&(te=sr()),ir=mr[be]&&mr[be][te]),typeof ir>"u"||!ir.length||!ir[0]){var b;for(I in v=[],mr[be])this.terminals_[I]&&I>2&&v.push("'"+this.terminals_[I]+"'");b=De.showPosition?"Parse error on line "+(zt+1)+":\n"+De.showPosition()+"\nExpecting "+v.join(", ")+", got '"+(this.terminals_[te]||te)+"'":"Parse error on line "+(zt+1)+": Unexpected "+(1==te?"end of input":"'"+(this.terminals_[te]||te)+"'"),this.parseError(b,{text:De.match,token:this.terminals_[te]||te,line:De.yylineno,loc:Lr,expected:v})}if(ir[0]instanceof Array&&ir.length>1)throw new Error("Parse Error: multiple actions possible at state: "+be+", token: "+te);switch(ir[0]){case 1:pe.push(te),Ze.push(De.yytext),de.push(De.yylloc),pe.push(ir[1]),te=null,ne?(te=ne,ne=null):(Ae=De.yyleng,xr=De.yytext,zt=De.yylineno,Lr=De.yylloc,or>0&&or--);break;case 2:if(E.$=Ze[Ze.length-(m=this.productions_[ir[1]][1])],E._$={first_line:de[de.length-(m||1)].first_line,last_line:de[de.length-1].last_line,first_column:de[de.length-(m||1)].first_column,last_column:de[de.length-1].last_column},_e&&(E._$.range=[de[de.length-(m||1)].range[0],de[de.length-1].range[1]]),typeof(y=this.performAction.apply(E,[xr,Ae,zt,er.yy,ir[1],Ze,de].concat(Ee)))<"u")return y;m&&(pe=pe.slice(0,-1*m*2),Ze=Ze.slice(0,-1*m),de=de.slice(0,-1*m)),pe.push(this.productions_[ir[1]][0]),Ze.push(E.$),de.push(E._$),pe.push(mr[pe[pe.length-2]][pe[pe.length-1]]);break;case 3:return!0}}return!0},"parse")};function lt(){this.yy={}}return Ft.lexer=function(){return{EOF:1,parseError:(0,ee.K2)(function(Zt,pe){if(!this.yy.parser)throw new Error(Zt);this.yy.parser.parseError(Zt,pe)},"parseError"),setInput:(0,ee.K2)(function(Mt,Zt){return this.yy=Zt||this.yy||{},this._input=Mt,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},"setInput"),input:(0,ee.K2)(function(){var Mt=this._input[0];return this.yytext+=Mt,this.yyleng++,this.offset++,this.match+=Mt,this.matched+=Mt,Mt.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),Mt},"input"),unput:(0,ee.K2)(function(Mt){var Zt=Mt.length,pe=Mt.split(/(?:\r\n?|\n)/g);this._input=Mt+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-Zt),this.offset-=Zt;var Re=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),pe.length-1&&(this.yylineno-=pe.length-1);var Ze=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:pe?(pe.length===Re.length?this.yylloc.first_column:0)+Re[Re.length-pe.length].length-pe[0].length:this.yylloc.first_column-Zt},this.options.ranges&&(this.yylloc.range=[Ze[0],Ze[0]+this.yyleng-Zt]),this.yyleng=this.yytext.length,this},"unput"),more:(0,ee.K2)(function(){return this._more=!0,this},"more"),reject:(0,ee.K2)(function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},"reject"),less:(0,ee.K2)(function(Mt){this.unput(this.match.slice(Mt))},"less"),pastInput:(0,ee.K2)(function(){var Mt=this.matched.substr(0,this.matched.length-this.match.length);return(Mt.length>20?"...":"")+Mt.substr(-20).replace(/\n/g,"")},"pastInput"),upcomingInput:(0,ee.K2)(function(){var Mt=this.match;return Mt.length<20&&(Mt+=this._input.substr(0,20-Mt.length)),(Mt.substr(0,20)+(Mt.length>20?"...":"")).replace(/\n/g,"")},"upcomingInput"),showPosition:(0,ee.K2)(function(){var Mt=this.pastInput(),Zt=new Array(Mt.length+1).join("-");return Mt+this.upcomingInput()+"\n"+Zt+"^"},"showPosition"),test_match:(0,ee.K2)(function(Mt,Zt){var pe,Re,Ze;if(this.options.backtrack_lexer&&(Ze={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(Ze.yylloc.range=this.yylloc.range.slice(0))),(Re=Mt[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=Re.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:Re?Re[Re.length-1].length-Re[Re.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+Mt[0].length},this.yytext+=Mt[0],this.match+=Mt[0],this.matches=Mt,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(Mt[0].length),this.matched+=Mt[0],pe=this.performAction.call(this,this.yy,this,Zt,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),pe)return pe;if(this._backtrack){for(var de in Ze)this[de]=Ze[de];return!1}return!1},"test_match"),next:(0,ee.K2)(function(){if(this.done)return this.EOF;var Mt,Zt,pe,Re;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var Ze=this._currentRules(),de=0;de<Ze.length;de++)if((pe=this._input.match(this.rules[Ze[de]]))&&(!Zt||pe[0].length>Zt[0].length)){if(Zt=pe,Re=de,this.options.backtrack_lexer){if(!1!==(Mt=this.test_match(pe,Ze[de])))return Mt;if(this._backtrack){Zt=!1;continue}return!1}if(!this.options.flex)break}return Zt?!1!==(Mt=this.test_match(Zt,Ze[Re]))&&Mt:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},"next"),lex:(0,ee.K2)(function(){return this.next()||this.lex()},"lex"),begin:(0,ee.K2)(function(Zt){this.conditionStack.push(Zt)},"begin"),popState:(0,ee.K2)(function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},"popState"),_currentRules:(0,ee.K2)(function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},"_currentRules"),topState:(0,ee.K2)(function(Zt){return(Zt=this.conditionStack.length-1-Math.abs(Zt||0))>=0?this.conditionStack[Zt]:"INITIAL"},"topState"),pushState:(0,ee.K2)(function(Zt){this.begin(Zt)},"pushState"),stateStackSize:(0,ee.K2)(function(){return this.conditionStack.length},"stateStackSize"),options:{"case-insensitive":!0},performAction:(0,ee.K2)(function(Zt,pe,Re,Ze){switch(Re){case 0:case 1:case 3:case 4:break;case 2:return 10;case 5:return 4;case 6:return 11;case 7:return this.begin("acc_title"),12;case 8:return this.popState(),"acc_title_value";case 9:return this.begin("acc_descr"),14;case 10:return this.popState(),"acc_descr_value";case 11:this.begin("acc_descr_multiline");break;case 12:this.popState();break;case 13:return"acc_descr_multiline_value";case 14:return 17;case 15:return 21;case 16:return 20;case 17:return 6;case 18:return"INVALID"}},"anonymous"),rules:[/^(?:%(?!\{)[^\n]*)/i,/^(?:[^\}]%%[^\n]*)/i,/^(?:[\n]+)/i,/^(?:\s+)/i,/^(?:#[^\n]*)/i,/^(?:timeline\b)/i,/^(?:title\s[^\n]+)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:section\s[^:\n]+)/i,/^(?::\s(?:[^:\n]|:(?!\s))+)/i,/^(?:[^#:\n]+)/i,/^(?:$)/i,/^(?:.)/i],conditions:{acc_descr_multiline:{rules:[12,13],inclusive:!1},acc_descr:{rules:[10],inclusive:!1},acc_title:{rules:[8],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,5,6,7,9,11,14,15,16,17,18],inclusive:!0}}}}(),(0,ee.K2)(lt,"Parser"),lt.prototype=Ft,Ft.Parser=lt,new lt}();Pt.parser=Pt;var ut=Pt,$={};(0,ee.VA)($,{addEvent:()=>wr,addSection:()=>ar,addTask:()=>Rr,addTaskOrg:()=>Vr,clear:()=>q,default:()=>Nr,getCommonDb:()=>Rt,getSections:()=>Ke,getTasks:()=>cr});var A="",At=0,wt=[],Ge=[],dt=[],Rt=(0,ee.K2)(()=>ot.Wt,"getCommonDb"),q=(0,ee.K2)(function(){wt.length=0,Ge.length=0,A="",dt.length=0,(0,ot.IU)()},"clear"),ar=(0,ee.K2)(function(Tt){A=Tt,wt.push(Tt)},"addSection"),Ke=(0,ee.K2)(function(){return wt},"getSections"),cr=(0,ee.K2)(function(){let Tt=ra(),F=0;for(;!Tt&&F<100;)Tt=ra(),F++;return Ge.push(...dt),Ge},"getTasks"),Rr=(0,ee.K2)(function(Tt,B,F){const et={id:At++,section:A,type:A,task:Tt,score:B||0,events:F?[F]:[]};dt.push(et)},"addTask"),wr=(0,ee.K2)(function(Tt){dt.find(F=>F.id===At-1).events.push(Tt)},"addEvent"),Vr=(0,ee.K2)(function(Tt){Ge.push({section:A,type:A,description:Tt,task:Tt,classes:[]})},"addTaskOrg"),ra=(0,ee.K2)(function(){const Tt=(0,ee.K2)(function(F){return dt[F].processed},"compileTask");let B=!0;for(const[F,et]of dt.entries())Tt(F),B=B&&et.processed;return B},"compileTasks"),Nr={clear:q,getCommonDb:Rt,addSection:ar,getSections:Ke,getTasks:cr,addTask:Rr,addTaskOrg:Vr,addEvent:wr},Se=(0,ee.K2)(function(Tt,B){const F=Tt.append("rect");return F.attr("x",B.x),F.attr("y",B.y),F.attr("fill",B.fill),F.attr("stroke",B.stroke),F.attr("width",B.width),F.attr("height",B.height),F.attr("rx",B.rx),F.attr("ry",B.ry),void 0!==B.class&&F.attr("class",B.class),F},"drawRect"),Or=(0,ee.K2)(function(Tt,B){const et=Tt.append("circle").attr("cx",B.cx).attr("cy",B.cy).attr("class","face").attr("r",15).attr("stroke-width",2).attr("overflow","visible"),mt=Tt.append("g");function it(ht){const Ft=(0,L.JLW)().startAngle(Math.PI/2).endAngle(Math.PI/2*3).innerRadius(7.5).outerRadius(6.8181818181818175);ht.append("path").attr("class","mouth").attr("d",Ft).attr("transform","translate("+B.cx+","+(B.cy+2)+")")}function rt(ht){const Ft=(0,L.JLW)().startAngle(3*Math.PI/2).endAngle(Math.PI/2*5).innerRadius(7.5).outerRadius(6.8181818181818175);ht.append("path").attr("class","mouth").attr("d",Ft).attr("transform","translate("+B.cx+","+(B.cy+7)+")")}function _t(ht){ht.append("line").attr("class","mouth").attr("stroke",2).attr("x1",B.cx-5).attr("y1",B.cy+7).attr("x2",B.cx+5).attr("y2",B.cy+7).attr("class","mouth").attr("stroke-width","1px").attr("stroke","#666")}return mt.append("circle").attr("cx",B.cx-5).attr("cy",B.cy-5).attr("r",1.5).attr("stroke-width",2).attr("fill","#666").attr("stroke","#666"),mt.append("circle").attr("cx",B.cx+5).attr("cy",B.cy-5).attr("r",1.5).attr("stroke-width",2).attr("fill","#666").attr("stroke","#666"),(0,ee.K2)(it,"smile"),(0,ee.K2)(rt,"sad"),(0,ee.K2)(_t,"ambivalent"),B.score>3?it(mt):B.score<3?rt(mt):_t(mt),et},"drawFace"),je=(0,ee.K2)(function(Tt,B){const F=Tt.append("circle");return F.attr("cx",B.cx),F.attr("cy",B.cy),F.attr("class","actor-"+B.pos),F.attr("fill",B.fill),F.attr("stroke",B.stroke),F.attr("r",B.r),void 0!==F.class&&F.attr("class",F.class),void 0!==B.title&&F.append("title").text(B.title),F},"drawCircle"),z=(0,ee.K2)(function(Tt,B){const F=B.text.replace(/<br\s*\/?>/gi," "),et=Tt.append("text");et.attr("x",B.x),et.attr("y",B.y),et.attr("class","legend"),et.style("text-anchor",B.anchor),void 0!==B.class&&et.attr("class",B.class);const mt=et.append("tspan");return mt.attr("x",B.x+2*B.textMargin),mt.text(F),et},"drawText"),ft=(0,ee.K2)(function(Tt,B){function F(mt,it,rt,_t,ht){return mt+","+it+" "+(mt+rt)+","+it+" "+(mt+rt)+","+(it+_t-ht)+" "+(mt+rt-1.2*ht)+","+(it+_t)+" "+mt+","+(it+_t)}(0,ee.K2)(F,"genPoints");const et=Tt.append("polygon");et.attr("points",F(B.x,B.y,50,20,7)),et.attr("class","labelBox"),B.y=B.y+B.labelMargin,B.x=B.x+.5*B.labelMargin,z(Tt,B)},"drawLabel"),Bt=(0,ee.K2)(function(Tt,B,F){const et=Tt.append("g"),mt=re();mt.x=B.x,mt.y=B.y,mt.fill=B.fill,mt.width=F.width,mt.height=F.height,mt.class="journey-section section-type-"+B.num,mt.rx=3,mt.ry=3,Se(et,mt),It(F)(B.text,et,mt.x,mt.y,mt.width,mt.height,{class:"journey-section section-type-"+B.num},F,B.colour)},"drawSection"),we=-1,X=(0,ee.K2)(function(Tt,B,F){const et=B.x+F.width/2,mt=Tt.append("g");we++,mt.append("line").attr("id","task"+we).attr("x1",et).attr("y1",B.y).attr("x2",et).attr("y2",450).attr("class","task-line").attr("stroke-width","1px").attr("stroke-dasharray","4 2").attr("stroke","#666"),Or(mt,{cx:et,cy:300+30*(5-B.score),score:B.score});const rt=re();rt.x=B.x,rt.y=B.y,rt.fill=B.fill,rt.width=F.width,rt.height=F.height,rt.class="task task-type-"+B.num,rt.rx=3,rt.ry=3,Se(mt,rt),It(F)(B.task,mt,rt.x,rt.y,rt.width,rt.height,{class:"task"},F,B.colour)},"drawTask"),ae=(0,ee.K2)(function(Tt,B){Se(Tt,{x:B.startx,y:B.starty,width:B.stopx-B.startx,height:B.stopy-B.starty,fill:B.fill,class:"rect"}).lower()},"drawBackgroundRect"),w=(0,ee.K2)(function(){return{x:0,y:0,fill:void 0,"text-anchor":"start",width:100,height:100,textMargin:0,rx:0,ry:0}},"getTextObj"),re=(0,ee.K2)(function(){return{x:0,y:0,width:100,anchor:"start",height:100,rx:0,ry:0}},"getNoteRect"),It=function(){function Tt(mt,it,rt,_t,ht,Ft,G,lt){et(it.append("text").attr("x",rt+ht/2).attr("y",_t+Ft/2+5).style("font-color",lt).style("text-anchor","middle").text(mt),G)}function B(mt,it,rt,_t,ht,Ft,G,lt,ke){const{taskFontSize:Mt,taskFontFamily:Zt}=lt,pe=mt.split(/<br\s*\/?>/gi);for(let Re=0;Re<pe.length;Re++){const Ze=Re*Mt-Mt*(pe.length-1)/2,de=it.append("text").attr("x",rt+ht/2).attr("y",_t).attr("fill",ke).style("text-anchor","middle").style("font-size",Mt).style("font-family",Zt);de.append("tspan").attr("x",rt+ht/2).attr("dy",Ze).text(pe[Re]),de.attr("y",_t+Ft/2).attr("dominant-baseline","central").attr("alignment-baseline","central"),et(de,G)}}function F(mt,it,rt,_t,ht,Ft,G,lt){const ke=it.append("switch"),Zt=ke.append("foreignObject").attr("x",rt).attr("y",_t).attr("width",ht).attr("height",Ft).attr("position","fixed").append("xhtml:div").style("display","table").style("height","100%").style("width","100%");Zt.append("div").attr("class","label").style("display","table-cell").style("text-align","center").style("vertical-align","middle").text(mt),B(mt,ke,rt,_t,ht,Ft,G,lt),et(Zt,G)}function et(mt,it){for(const rt in it)rt in it&&mt.attr(rt,it[rt])}return(0,ee.K2)(Tt,"byText"),(0,ee.K2)(B,"byTspan"),(0,ee.K2)(F,"byFo"),(0,ee.K2)(et,"_setTextAttrs"),function(mt){return"fo"===mt.textPlacement?F:"old"===mt.textPlacement?Tt:B}}(),qt=(0,ee.K2)(function(Tt){Tt.append("defs").append("marker").attr("id","arrowhead").attr("refX",5).attr("refY",2).attr("markerWidth",6).attr("markerHeight",4).attr("orient","auto").append("path").attr("d","M 0,0 V 4 L6,2 Z")},"initGraphics");function V(Tt,B){Tt.each(function(){var mt,F=(0,L.Ltv)(this),et=F.text().split(/(\s+|<br>)/).reverse(),it=[],_t=F.attr("y"),ht=parseFloat(F.attr("dy")),Ft=F.text(null).append("tspan").attr("x",0).attr("y",_t).attr("dy",ht+"em");for(let G=0;G<et.length;G++)it.push(mt=et[et.length-1-G]),Ft.text(it.join(" ").trim()),(Ft.node().getComputedTextLength()>B||"<br>"===mt)&&(it.pop(),Ft.text(it.join(" ").trim()),it="<br>"===mt?[""]:[mt],Ft=F.append("tspan").attr("x",0).attr("y",_t).attr("dy","1.1em").text(mt))})}(0,ee.K2)(V,"wrap");var pt=(0,ee.K2)(function(Tt,B,F,et){const mt=F%12-1,it=Tt.append("g");B.section=mt,it.attr("class",(B.class?B.class+" ":"")+"timeline-node section-"+mt);const rt=it.append("g"),_t=it.append("g"),Ft=_t.append("text").text(B.descr).attr("dy","1em").attr("alignment-baseline","middle").attr("dominant-baseline","middle").attr("text-anchor","middle").call(V,B.width).node().getBBox(),G=et.fontSize?.replace?et.fontSize.replace("px",""):et.fontSize;return B.height=Ft.height+1.1*G*.5+B.padding,B.height=Math.max(B.height,B.maxHeight),B.width=B.width+2*B.padding,_t.attr("transform","translate("+B.width/2+", "+B.padding/2+")"),Nt(rt,B,mt,et),B},"drawNode"),H=(0,ee.K2)(function(Tt,B,F){const et=Tt.append("g"),it=et.append("text").text(B.descr).attr("dy","1em").attr("alignment-baseline","middle").attr("dominant-baseline","middle").attr("text-anchor","middle").call(V,B.width).node().getBBox(),rt=F.fontSize?.replace?F.fontSize.replace("px",""):F.fontSize;return et.remove(),it.height+1.1*rt*.5+B.padding},"getVirtualNodeHeight"),Nt=(0,ee.K2)(function(Tt,B,F){Tt.append("path").attr("id","node-"+B.id).attr("class","node-bkg node-"+B.type).attr("d",`M0 ${B.height-5} v${10-B.height} q0,-5 5,-5 h${B.width-10} q5,0 5,5 v${B.height-5} H0 Z`),Tt.append("line").attr("class","node-line-"+F).attr("x1",0).attr("y1",B.height).attr("x2",B.width).attr("y2",B.height)},"defaultBkg"),St={drawRect:Se,drawCircle:je,drawSection:Bt,drawText:z,drawLabel:ft,drawTask:X,drawBackgroundRect:ae,getTextObj:w,getNoteRect:re,initGraphics:qt,drawNode:pt,getVirtualNodeHeight:H},$t=(0,ee.K2)(function(Tt,B,F,et){const mt=(0,ot.D7)(),it=mt.timeline?.leftMargin??50;ee.Rm.debug("timeline",et.db);const rt=mt.securityLevel;let _t;"sandbox"===rt&&(_t=(0,L.Ltv)("#i"+B));const Ft=(0,L.Ltv)("sandbox"===rt?_t.nodes()[0].contentDocument.body:"body").select("#"+B);Ft.append("g");const G=et.db.getTasks(),lt=et.db.getCommonDb().getDiagramTitle();ee.Rm.debug("task",G),St.initGraphics(Ft);const ke=et.db.getSections();ee.Rm.debug("sections",ke);let Mt=0,Zt=0,pe=0,Re=0,Ze=50+it,de=50;Re=50;let mr=0,xr=!0;ke.forEach(function(ce){const De=St.getVirtualNodeHeight(Ft,{number:mr,descr:ce,section:mr,width:150,padding:20,maxHeight:Mt},mt);ee.Rm.debug("sectionHeight before draw",De),Mt=Math.max(Mt,De+20)});let zt=0,Ae=0;ee.Rm.debug("tasks.length",G.length);for(const[ce,Ee]of G.entries()){const er=St.getVirtualNodeHeight(Ft,{number:ce,descr:Ee,section:Ee.section,width:150,padding:20,maxHeight:Zt},mt);ee.Rm.debug("taskHeight before draw",er),Zt=Math.max(Zt,er+20),zt=Math.max(zt,Ee.events.length);let Qe=0;for(const Lr of Ee.events)Qe+=St.getVirtualNodeHeight(Ft,{descr:Lr,section:Ee.section,number:Ee.section,width:150,padding:20,maxHeight:50},mt);Ee.events.length>0&&(Qe+=10*(Ee.events.length-1)),Ae=Math.max(Ae,Qe)}ee.Rm.debug("maxSectionHeight before draw",Mt),ee.Rm.debug("maxTaskHeight before draw",Zt),ke&&ke.length>0?ke.forEach(ce=>{const Ee=G.filter(Lr=>Lr.section===ce),De={number:mr,descr:ce,section:mr,width:200*Math.max(Ee.length,1)-50,padding:20,maxHeight:Mt};ee.Rm.debug("sectionNode",De);const er=Ft.append("g"),Qe=St.drawNode(er,De,mr,mt);ee.Rm.debug("sectionNode output",Qe),er.attr("transform",`translate(${Ze}, 50)`),de+=Mt+50,Ee.length>0&&ye(Ft,Ee,mr,Ze,de,Zt,mt,zt,Ae,Mt,!1),Ze+=200*Math.max(Ee.length,1),de=50,mr++}):(xr=!1,ye(Ft,G,mr,Ze,de,Zt,mt,zt,Ae,Mt,!0));const or=Ft.node().getBBox();ee.Rm.debug("bounds",or),lt&&Ft.append("text").text(lt).attr("x",or.width/2-it).attr("font-size","4ex").attr("font-weight","bold").attr("y",20),pe=xr?Mt+Zt+150:Zt+100,Ft.append("g").attr("class","lineWrapper").append("line").attr("x1",it).attr("y1",pe).attr("x2",or.width+3*it).attr("y2",pe).attr("stroke-width",4).attr("stroke","black").attr("marker-end","url(#arrowhead)"),(0,ot.ot)(void 0,Ft,mt.timeline?.padding??50,mt.timeline?.useMaxWidth??!1)},"draw"),ye=(0,ee.K2)(function(Tt,B,F,et,mt,it,rt,_t,ht,Ft,G){for(const lt of B){const ke={descr:lt.task,section:F,number:F,width:150,padding:20,maxHeight:it};ee.Rm.debug("taskNode",ke);const Mt=Tt.append("g").attr("class","taskWrapper"),pe=St.drawNode(Mt,ke,F,rt).height;if(ee.Rm.debug("taskHeight after draw",pe),Mt.attr("transform",`translate(${et}, ${mt})`),it=Math.max(it,pe),lt.events){const Re=Tt.append("g").attr("class","lineWrapper");let Ze=it;Ze+=le(Tt,lt.events,F,et,mt+=100,rt),mt-=100,Re.append("line").attr("x1",et+95).attr("y1",mt+it).attr("x2",et+95).attr("y2",mt+it+100+ht+100).attr("stroke-width",2).attr("stroke","black").attr("marker-end","url(#arrowhead)").attr("stroke-dasharray","5,5")}et+=200,G&&!rt.timeline?.disableMulticolor&&F++}mt-=10},"drawTasks"),le=(0,ee.K2)(function(Tt,B,F,et,mt,it){let rt=0;const _t=mt;mt+=100;for(const ht of B){const Ft={descr:ht,section:F,number:F,width:150,padding:20,maxHeight:50};ee.Rm.debug("eventNode",Ft);const G=Tt.append("g").attr("class","eventWrapper"),ke=St.drawNode(G,Ft,F,it).height;rt+=ke,G.attr("transform",`translate(${et}, ${mt})`),mt=mt+10+ke}return mt=_t,rt},"drawEvents"),Pe={setConf:(0,ee.K2)(()=>{},"setConf"),draw:$t},oe=(0,ee.K2)(Tt=>{let B="";for(let F=0;F<Tt.THEME_COLOR_LIMIT;F++)Tt["lineColor"+F]=Tt["lineColor"+F]||Tt["cScaleInv"+F],Tt["lineColor"+F]=(0,S.HD)(Tt["lineColor"+F])?(0,S.a)(Tt["lineColor"+F],20):(0,S.e$)(Tt["lineColor"+F],20);for(let F=0;F<Tt.THEME_COLOR_LIMIT;F++)B+=`\n    .section-${F-1} rect, .section-${F-1} path, .section-${F-1} circle, .section-${F-1} path  {\n      fill: ${Tt["cScale"+F]};\n    }\n    .section-${F-1} text {\n     fill: ${Tt["cScaleLabel"+F]};\n    }\n    .node-icon-${F-1} {\n      font-size: 40px;\n      color: ${Tt["cScaleLabel"+F]};\n    }\n    .section-edge-${F-1}{\n      stroke: ${Tt["cScale"+F]};\n    }\n    .edge-depth-${F-1}{\n      stroke-width: ${""+(17-3*F)};\n    }\n    .section-${F-1} line {\n      stroke: ${Tt["cScaleInv"+F]} ;\n      stroke-width: 3;\n    }\n\n    .lineWrapper line{\n      stroke: ${Tt["cScaleLabel"+F]} ;\n    }\n\n    .disabled, .disabled circle, .disabled text {\n      fill: lightgray;\n    }\n    .disabled text {\n      fill: #efefef;\n    }\n    `;return B},"genSections"),Et={db:$,renderer:Pe,parser:ut,styles:(0,ee.K2)(Tt=>`\n  .edge {\n    stroke-width: 3;\n  }\n  ${oe(Tt)}\n  .section-root rect, .section-root path, .section-root circle  {\n    fill: ${Tt.git0};\n  }\n  .section-root text {\n    fill: ${Tt.gitBranchLabel0};\n  }\n  .icon-container {\n    height:100%;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n  }\n  .edge {\n    fill: none;\n  }\n  .eventWrapper  {\n   filter: brightness(120%);\n  }\n`,"getStyles")}},29062:(Ja,vr,R)=>{"use strict";R.r(vr),R.d(vr,{diagram:()=>Fr});var ar,ot=R(89204),ee=R(45027),L=R(5675),S=R(8086),Pt=R(72271),dt=(R(98954),R(36384),R(87452),R(32239),R(19753),R(59355),R(52052)),Rt=R(79006),q=R(32303),Ke=function(){var Se=(0,q.K2)(function(y,E,I,m){for(I=I||{},m=y.length;m--;I[y[m]]=E);return I},"o"),Or=[1,3],je=[1,4],z=[1,5],ft=[1,6],Bt=[5,6,8,9,11,13,21,22,23,24,41,42,43,44,45,46,54,72,74,77,89,90],we=[1,22],X=[2,7],ae=[1,26],w=[1,27],re=[1,28],It=[1,29],qt=[1,33],V=[1,34],pt=[1,35],H=[1,36],Nt=[1,37],St=[1,38],$t=[1,24],ye=[1,31],le=[1,32],Pe=[1,30],oe=[1,39],qe=[1,40],ze=[5,8,9,11,13,21,22,23,24,41,42,43,44,45,46,54,72,74,77,89,90],Et=[1,61],Tt=[89,90],B=[5,8,9,11,13,21,22,23,24,27,29,41,42,43,44,45,46,54,61,63,72,74,75,76,77,80,81,82,83,84,85,86,87,88,89,90],F=[27,29],et=[1,70],mt=[1,71],it=[1,72],rt=[1,73],_t=[1,74],ht=[1,75],Ft=[1,76],G=[1,83],lt=[1,80],ke=[1,84],Mt=[1,85],Zt=[1,86],pe=[1,87],Re=[1,88],Ze=[1,89],de=[1,90],mr=[1,91],xr=[1,92],zt=[5,8,9,11,13,21,22,23,24,27,41,42,43,44,45,46,54,72,74,75,76,77,80,81,82,83,84,85,86,87,88,89,90],Ae=[63,64],or=[1,101],ve=[5,8,9,11,13,21,22,23,24,41,42,43,44,45,46,54,72,74,76,77,89,90],ce=[5,8,9,11,13,21,22,23,24,41,42,43,44,45,46,54,72,74,75,76,77,80,81,82,83,84,85,86,87,88,89,90],Ee=[1,110],De=[1,106],er=[1,107],Qe=[1,108],Lr=[1,109],_e=[1,111],Hr=[1,116],sr=[1,117],te=[1,114],ne=[1,115],be={trace:(0,q.K2)(function(){},"trace"),yy:{},symbols_:{error:2,start:3,directive:4,NEWLINE:5,RD:6,diagram:7,EOF:8,acc_title:9,acc_title_value:10,acc_descr:11,acc_descr_value:12,acc_descr_multiline_value:13,requirementDef:14,elementDef:15,relationshipDef:16,direction:17,styleStatement:18,classDefStatement:19,classStatement:20,direction_tb:21,direction_bt:22,direction_rl:23,direction_lr:24,requirementType:25,requirementName:26,STRUCT_START:27,requirementBody:28,STYLE_SEPARATOR:29,idList:30,ID:31,COLONSEP:32,id:33,TEXT:34,text:35,RISK:36,riskLevel:37,VERIFYMTHD:38,verifyType:39,STRUCT_STOP:40,REQUIREMENT:41,FUNCTIONAL_REQUIREMENT:42,INTERFACE_REQUIREMENT:43,PERFORMANCE_REQUIREMENT:44,PHYSICAL_REQUIREMENT:45,DESIGN_CONSTRAINT:46,LOW_RISK:47,MED_RISK:48,HIGH_RISK:49,VERIFY_ANALYSIS:50,VERIFY_DEMONSTRATION:51,VERIFY_INSPECTION:52,VERIFY_TEST:53,ELEMENT:54,elementName:55,elementBody:56,TYPE:57,type:58,DOCREF:59,ref:60,END_ARROW_L:61,relationship:62,LINE:63,END_ARROW_R:64,CONTAINS:65,COPIES:66,DERIVES:67,SATISFIES:68,VERIFIES:69,REFINES:70,TRACES:71,CLASSDEF:72,stylesOpt:73,CLASS:74,ALPHA:75,COMMA:76,STYLE:77,style:78,styleComponent:79,NUM:80,COLON:81,UNIT:82,SPACE:83,BRKT:84,PCT:85,MINUS:86,LABEL:87,SEMICOLON:88,unqString:89,qString:90,$accept:0,$end:1},terminals_:{2:"error",5:"NEWLINE",6:"RD",8:"EOF",9:"acc_title",10:"acc_title_value",11:"acc_descr",12:"acc_descr_value",13:"acc_descr_multiline_value",21:"direction_tb",22:"direction_bt",23:"direction_rl",24:"direction_lr",27:"STRUCT_START",29:"STYLE_SEPARATOR",31:"ID",32:"COLONSEP",34:"TEXT",36:"RISK",38:"VERIFYMTHD",40:"STRUCT_STOP",41:"REQUIREMENT",42:"FUNCTIONAL_REQUIREMENT",43:"INTERFACE_REQUIREMENT",44:"PERFORMANCE_REQUIREMENT",45:"PHYSICAL_REQUIREMENT",46:"DESIGN_CONSTRAINT",47:"LOW_RISK",48:"MED_RISK",49:"HIGH_RISK",50:"VERIFY_ANALYSIS",51:"VERIFY_DEMONSTRATION",52:"VERIFY_INSPECTION",53:"VERIFY_TEST",54:"ELEMENT",57:"TYPE",59:"DOCREF",61:"END_ARROW_L",63:"LINE",64:"END_ARROW_R",65:"CONTAINS",66:"COPIES",67:"DERIVES",68:"SATISFIES",69:"VERIFIES",70:"REFINES",71:"TRACES",72:"CLASSDEF",74:"CLASS",75:"ALPHA",76:"COMMA",77:"STYLE",80:"NUM",81:"COLON",82:"UNIT",83:"SPACE",84:"BRKT",85:"PCT",86:"MINUS",87:"LABEL",88:"SEMICOLON",89:"unqString",90:"qString"},productions_:[0,[3,3],[3,2],[3,4],[4,2],[4,2],[4,1],[7,0],[7,2],[7,2],[7,2],[7,2],[7,2],[7,2],[7,2],[7,2],[7,2],[17,1],[17,1],[17,1],[17,1],[14,5],[14,7],[28,5],[28,5],[28,5],[28,5],[28,2],[28,1],[25,1],[25,1],[25,1],[25,1],[25,1],[25,1],[37,1],[37,1],[37,1],[39,1],[39,1],[39,1],[39,1],[15,5],[15,7],[56,5],[56,5],[56,2],[56,1],[16,5],[16,5],[62,1],[62,1],[62,1],[62,1],[62,1],[62,1],[62,1],[19,3],[20,3],[20,3],[30,1],[30,3],[30,1],[30,3],[18,3],[73,1],[73,3],[78,1],[78,2],[79,1],[79,1],[79,1],[79,1],[79,1],[79,1],[79,1],[79,1],[79,1],[79,1],[26,1],[26,1],[33,1],[33,1],[35,1],[35,1],[55,1],[55,1],[58,1],[58,1],[60,1],[60,1]],performAction:(0,q.K2)(function(E,I,m,D,v,b,C){var P=b.length-1;switch(v){case 4:this.$=b[P].trim(),D.setAccTitle(this.$);break;case 5:case 6:this.$=b[P].trim(),D.setAccDescription(this.$);break;case 7:this.$=[];break;case 17:D.setDirection("TB");break;case 18:D.setDirection("BT");break;case 19:D.setDirection("RL");break;case 20:D.setDirection("LR");break;case 21:D.addRequirement(b[P-3],b[P-4]);break;case 22:D.addRequirement(b[P-5],b[P-6]),D.setClass([b[P-5]],b[P-3]);break;case 23:D.setNewReqId(b[P-2]);break;case 24:D.setNewReqText(b[P-2]);break;case 25:D.setNewReqRisk(b[P-2]);break;case 26:D.setNewReqVerifyMethod(b[P-2]);break;case 29:this.$=D.RequirementType.REQUIREMENT;break;case 30:this.$=D.RequirementType.FUNCTIONAL_REQUIREMENT;break;case 31:this.$=D.RequirementType.INTERFACE_REQUIREMENT;break;case 32:this.$=D.RequirementType.PERFORMANCE_REQUIREMENT;break;case 33:this.$=D.RequirementType.PHYSICAL_REQUIREMENT;break;case 34:this.$=D.RequirementType.DESIGN_CONSTRAINT;break;case 35:this.$=D.RiskLevel.LOW_RISK;break;case 36:this.$=D.RiskLevel.MED_RISK;break;case 37:this.$=D.RiskLevel.HIGH_RISK;break;case 38:this.$=D.VerifyType.VERIFY_ANALYSIS;break;case 39:this.$=D.VerifyType.VERIFY_DEMONSTRATION;break;case 40:this.$=D.VerifyType.VERIFY_INSPECTION;break;case 41:this.$=D.VerifyType.VERIFY_TEST;break;case 42:D.addElement(b[P-3]);break;case 43:D.addElement(b[P-5]),D.setClass([b[P-5]],b[P-3]);break;case 44:D.setNewElementType(b[P-2]);break;case 45:D.setNewElementDocRef(b[P-2]);break;case 48:D.addRelationship(b[P-2],b[P],b[P-4]);break;case 49:D.addRelationship(b[P-2],b[P-4],b[P]);break;case 50:this.$=D.Relationships.CONTAINS;break;case 51:this.$=D.Relationships.COPIES;break;case 52:this.$=D.Relationships.DERIVES;break;case 53:this.$=D.Relationships.SATISFIES;break;case 54:this.$=D.Relationships.VERIFIES;break;case 55:this.$=D.Relationships.REFINES;break;case 56:this.$=D.Relationships.TRACES;break;case 57:this.$=b[P-2],D.defineClass(b[P-1],b[P]);break;case 58:D.setClass(b[P-1],b[P]);break;case 59:D.setClass([b[P-2]],b[P]);break;case 60:case 62:case 65:this.$=[b[P]];break;case 61:case 63:this.$=b[P-2].concat([b[P]]);break;case 64:this.$=b[P-2],D.setCssStyle(b[P-1],b[P]);break;case 66:b[P-2].push(b[P]),this.$=b[P-2];break;case 68:this.$=b[P-1]+b[P]}},"anonymous"),table:[{3:1,4:2,6:Or,9:je,11:z,13:ft},{1:[3]},{3:8,4:2,5:[1,7],6:Or,9:je,11:z,13:ft},{5:[1,9]},{10:[1,10]},{12:[1,11]},Se(Bt,[2,6]),{3:12,4:2,6:Or,9:je,11:z,13:ft},{1:[2,2]},{4:17,5:we,7:13,8:X,9:je,11:z,13:ft,14:14,15:15,16:16,17:18,18:19,19:20,20:21,21:ae,22:w,23:re,24:It,25:23,33:25,41:qt,42:V,43:pt,44:H,45:Nt,46:St,54:$t,72:ye,74:le,77:Pe,89:oe,90:qe},Se(Bt,[2,4]),Se(Bt,[2,5]),{1:[2,1]},{8:[1,41]},{4:17,5:we,7:42,8:X,9:je,11:z,13:ft,14:14,15:15,16:16,17:18,18:19,19:20,20:21,21:ae,22:w,23:re,24:It,25:23,33:25,41:qt,42:V,43:pt,44:H,45:Nt,46:St,54:$t,72:ye,74:le,77:Pe,89:oe,90:qe},{4:17,5:we,7:43,8:X,9:je,11:z,13:ft,14:14,15:15,16:16,17:18,18:19,19:20,20:21,21:ae,22:w,23:re,24:It,25:23,33:25,41:qt,42:V,43:pt,44:H,45:Nt,46:St,54:$t,72:ye,74:le,77:Pe,89:oe,90:qe},{4:17,5:we,7:44,8:X,9:je,11:z,13:ft,14:14,15:15,16:16,17:18,18:19,19:20,20:21,21:ae,22:w,23:re,24:It,25:23,33:25,41:qt,42:V,43:pt,44:H,45:Nt,46:St,54:$t,72:ye,74:le,77:Pe,89:oe,90:qe},{4:17,5:we,7:45,8:X,9:je,11:z,13:ft,14:14,15:15,16:16,17:18,18:19,19:20,20:21,21:ae,22:w,23:re,24:It,25:23,33:25,41:qt,42:V,43:pt,44:H,45:Nt,46:St,54:$t,72:ye,74:le,77:Pe,89:oe,90:qe},{4:17,5:we,7:46,8:X,9:je,11:z,13:ft,14:14,15:15,16:16,17:18,18:19,19:20,20:21,21:ae,22:w,23:re,24:It,25:23,33:25,41:qt,42:V,43:pt,44:H,45:Nt,46:St,54:$t,72:ye,74:le,77:Pe,89:oe,90:qe},{4:17,5:we,7:47,8:X,9:je,11:z,13:ft,14:14,15:15,16:16,17:18,18:19,19:20,20:21,21:ae,22:w,23:re,24:It,25:23,33:25,41:qt,42:V,43:pt,44:H,45:Nt,46:St,54:$t,72:ye,74:le,77:Pe,89:oe,90:qe},{4:17,5:we,7:48,8:X,9:je,11:z,13:ft,14:14,15:15,16:16,17:18,18:19,19:20,20:21,21:ae,22:w,23:re,24:It,25:23,33:25,41:qt,42:V,43:pt,44:H,45:Nt,46:St,54:$t,72:ye,74:le,77:Pe,89:oe,90:qe},{4:17,5:we,7:49,8:X,9:je,11:z,13:ft,14:14,15:15,16:16,17:18,18:19,19:20,20:21,21:ae,22:w,23:re,24:It,25:23,33:25,41:qt,42:V,43:pt,44:H,45:Nt,46:St,54:$t,72:ye,74:le,77:Pe,89:oe,90:qe},{4:17,5:we,7:50,8:X,9:je,11:z,13:ft,14:14,15:15,16:16,17:18,18:19,19:20,20:21,21:ae,22:w,23:re,24:It,25:23,33:25,41:qt,42:V,43:pt,44:H,45:Nt,46:St,54:$t,72:ye,74:le,77:Pe,89:oe,90:qe},{26:51,89:[1,52],90:[1,53]},{55:54,89:[1,55],90:[1,56]},{29:[1,59],61:[1,57],63:[1,58]},Se(ze,[2,17]),Se(ze,[2,18]),Se(ze,[2,19]),Se(ze,[2,20]),{30:60,33:62,75:Et,89:oe,90:qe},{30:63,33:62,75:Et,89:oe,90:qe},{30:64,33:62,75:Et,89:oe,90:qe},Se(Tt,[2,29]),Se(Tt,[2,30]),Se(Tt,[2,31]),Se(Tt,[2,32]),Se(Tt,[2,33]),Se(Tt,[2,34]),Se(B,[2,81]),Se(B,[2,82]),{1:[2,3]},{8:[2,8]},{8:[2,9]},{8:[2,10]},{8:[2,11]},{8:[2,12]},{8:[2,13]},{8:[2,14]},{8:[2,15]},{8:[2,16]},{27:[1,65],29:[1,66]},Se(F,[2,79]),Se(F,[2,80]),{27:[1,67],29:[1,68]},Se(F,[2,85]),Se(F,[2,86]),{62:69,65:et,66:mt,67:it,68:rt,69:_t,70:ht,71:Ft},{62:77,65:et,66:mt,67:it,68:rt,69:_t,70:ht,71:Ft},{30:78,33:62,75:Et,89:oe,90:qe},{73:79,75:G,76:lt,78:81,79:82,80:ke,81:Mt,82:Zt,83:pe,84:Re,85:Ze,86:de,87:mr,88:xr},Se(zt,[2,60]),Se(zt,[2,62]),{73:93,75:G,76:lt,78:81,79:82,80:ke,81:Mt,82:Zt,83:pe,84:Re,85:Ze,86:de,87:mr,88:xr},{30:94,33:62,75:Et,76:lt,89:oe,90:qe},{5:[1,95]},{30:96,33:62,75:Et,89:oe,90:qe},{5:[1,97]},{30:98,33:62,75:Et,89:oe,90:qe},{63:[1,99]},Se(Ae,[2,50]),Se(Ae,[2,51]),Se(Ae,[2,52]),Se(Ae,[2,53]),Se(Ae,[2,54]),Se(Ae,[2,55]),Se(Ae,[2,56]),{64:[1,100]},Se(ze,[2,59],{76:lt}),Se(ze,[2,64],{76:or}),{33:103,75:[1,102],89:oe,90:qe},Se(ve,[2,65],{79:104,75:G,80:ke,81:Mt,82:Zt,83:pe,84:Re,85:Ze,86:de,87:mr,88:xr}),Se(ce,[2,67]),Se(ce,[2,69]),Se(ce,[2,70]),Se(ce,[2,71]),Se(ce,[2,72]),Se(ce,[2,73]),Se(ce,[2,74]),Se(ce,[2,75]),Se(ce,[2,76]),Se(ce,[2,77]),Se(ce,[2,78]),Se(ze,[2,57],{76:or}),Se(ze,[2,58],{76:lt}),{5:Ee,28:105,31:De,34:er,36:Qe,38:Lr,40:_e},{27:[1,112],76:lt},{5:Hr,40:sr,56:113,57:te,59:ne},{27:[1,118],76:lt},{33:119,89:oe,90:qe},{33:120,89:oe,90:qe},{75:G,78:121,79:82,80:ke,81:Mt,82:Zt,83:pe,84:Re,85:Ze,86:de,87:mr,88:xr},Se(zt,[2,61]),Se(zt,[2,63]),Se(ce,[2,68]),Se(ze,[2,21]),{32:[1,122]},{32:[1,123]},{32:[1,124]},{32:[1,125]},{5:Ee,28:126,31:De,34:er,36:Qe,38:Lr,40:_e},Se(ze,[2,28]),{5:[1,127]},Se(ze,[2,42]),{32:[1,128]},{32:[1,129]},{5:Hr,40:sr,56:130,57:te,59:ne},Se(ze,[2,47]),{5:[1,131]},Se(ze,[2,48]),Se(ze,[2,49]),Se(ve,[2,66],{79:104,75:G,80:ke,81:Mt,82:Zt,83:pe,84:Re,85:Ze,86:de,87:mr,88:xr}),{33:132,89:oe,90:qe},{35:133,89:[1,134],90:[1,135]},{37:136,47:[1,137],48:[1,138],49:[1,139]},{39:140,50:[1,141],51:[1,142],52:[1,143],53:[1,144]},Se(ze,[2,27]),{5:Ee,28:145,31:De,34:er,36:Qe,38:Lr,40:_e},{58:146,89:[1,147],90:[1,148]},{60:149,89:[1,150],90:[1,151]},Se(ze,[2,46]),{5:Hr,40:sr,56:152,57:te,59:ne},{5:[1,153]},{5:[1,154]},{5:[2,83]},{5:[2,84]},{5:[1,155]},{5:[2,35]},{5:[2,36]},{5:[2,37]},{5:[1,156]},{5:[2,38]},{5:[2,39]},{5:[2,40]},{5:[2,41]},Se(ze,[2,22]),{5:[1,157]},{5:[2,87]},{5:[2,88]},{5:[1,158]},{5:[2,89]},{5:[2,90]},Se(ze,[2,43]),{5:Ee,28:159,31:De,34:er,36:Qe,38:Lr,40:_e},{5:Ee,28:160,31:De,34:er,36:Qe,38:Lr,40:_e},{5:Ee,28:161,31:De,34:er,36:Qe,38:Lr,40:_e},{5:Ee,28:162,31:De,34:er,36:Qe,38:Lr,40:_e},{5:Hr,40:sr,56:163,57:te,59:ne},{5:Hr,40:sr,56:164,57:te,59:ne},Se(ze,[2,23]),Se(ze,[2,24]),Se(ze,[2,25]),Se(ze,[2,26]),Se(ze,[2,44]),Se(ze,[2,45])],defaultActions:{8:[2,2],12:[2,1],41:[2,3],42:[2,8],43:[2,9],44:[2,10],45:[2,11],46:[2,12],47:[2,13],48:[2,14],49:[2,15],50:[2,16],134:[2,83],135:[2,84],137:[2,35],138:[2,36],139:[2,37],141:[2,38],142:[2,39],143:[2,40],144:[2,41],147:[2,87],148:[2,88],150:[2,89],151:[2,90]},parseError:(0,q.K2)(function(E,I){if(!I.recoverable){var m=new Error(E);throw m.hash=I,m}this.trace(E)},"parseError"),parse:(0,q.K2)(function(E){var I=this,m=[0],D=[],v=[null],b=[],C=this.table,P="",Q=0,xt=0,Vt=0,Wt=b.slice.call(arguments,1),xe=Object.create(this.lexer),Xe={yy:{}};for(var We in this.yy)Object.prototype.hasOwnProperty.call(this.yy,We)&&(Xe.yy[We]=this.yy[We]);xe.setInput(E,Xe.yy),Xe.yy.lexer=xe,Xe.yy.parser=this,typeof xe.yylloc>"u"&&(xe.yylloc={});var gr=xe.yylloc;b.push(gr);var hr=xe.options&&xe.options.ranges;function $e(){var dr;return"number"!=typeof(dr=D.pop()||xe.lex()||1)&&(dr instanceof Array&&(dr=(D=dr).pop()),dr=I.symbols_[dr]||dr),dr}this.parseError="function"==typeof Xe.yy.parseError?Xe.yy.parseError:Object.getPrototypeOf(this).parseError,(0,q.K2)(function _r(dr){m.length=m.length-2*dr,v.length=v.length-dr,b.length=b.length-dr},"popStack"),(0,q.K2)($e,"lex");for(var He,Ar,kr,zr,Jr,ha,ia,Qr,Br={};;){if(this.defaultActions[kr=m[m.length-1]]?zr=this.defaultActions[kr]:((null===He||typeof He>"u")&&(He=$e()),zr=C[kr]&&C[kr][He]),typeof zr>"u"||!zr.length||!zr[0]){var lr;for(ha in Qr=[],C[kr])this.terminals_[ha]&&ha>2&&Qr.push("'"+this.terminals_[ha]+"'");lr=xe.showPosition?"Parse error on line "+(Q+1)+":\n"+xe.showPosition()+"\nExpecting "+Qr.join(", ")+", got '"+(this.terminals_[He]||He)+"'":"Parse error on line "+(Q+1)+": Unexpected "+(1==He?"end of input":"'"+(this.terminals_[He]||He)+"'"),this.parseError(lr,{text:xe.match,token:this.terminals_[He]||He,line:xe.yylineno,loc:gr,expected:Qr})}if(zr[0]instanceof Array&&zr.length>1)throw new Error("Parse Error: multiple actions possible at state: "+kr+", token: "+He);switch(zr[0]){case 1:m.push(He),v.push(xe.yytext),b.push(xe.yylloc),m.push(zr[1]),He=null,Ar?(He=Ar,Ar=null):(xt=xe.yyleng,P=xe.yytext,Q=xe.yylineno,gr=xe.yylloc,Vt>0&&Vt--);break;case 2:if(Br.$=v[v.length-(ia=this.productions_[zr[1]][1])],Br._$={first_line:b[b.length-(ia||1)].first_line,last_line:b[b.length-1].last_line,first_column:b[b.length-(ia||1)].first_column,last_column:b[b.length-1].last_column},hr&&(Br._$.range=[b[b.length-(ia||1)].range[0],b[b.length-1].range[1]]),typeof(Jr=this.performAction.apply(Br,[P,xt,Q,Xe.yy,zr[1],v,b].concat(Wt)))<"u")return Jr;ia&&(m=m.slice(0,-1*ia*2),v=v.slice(0,-1*ia),b=b.slice(0,-1*ia)),m.push(this.productions_[zr[1]][0]),v.push(Br.$),b.push(Br._$),m.push(C[m[m.length-2]][m[m.length-1]]);break;case 3:return!0}}return!0},"parse")};function g(){this.yy={}}return be.lexer=function(){return{EOF:1,parseError:(0,q.K2)(function(I,m){if(!this.yy.parser)throw new Error(I);this.yy.parser.parseError(I,m)},"parseError"),setInput:(0,q.K2)(function(E,I){return this.yy=I||this.yy||{},this._input=E,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},"setInput"),input:(0,q.K2)(function(){var E=this._input[0];return this.yytext+=E,this.yyleng++,this.offset++,this.match+=E,this.matched+=E,E.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),E},"input"),unput:(0,q.K2)(function(E){var I=E.length,m=E.split(/(?:\r\n?|\n)/g);this._input=E+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-I),this.offset-=I;var D=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),m.length-1&&(this.yylineno-=m.length-1);var v=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:m?(m.length===D.length?this.yylloc.first_column:0)+D[D.length-m.length].length-m[0].length:this.yylloc.first_column-I},this.options.ranges&&(this.yylloc.range=[v[0],v[0]+this.yyleng-I]),this.yyleng=this.yytext.length,this},"unput"),more:(0,q.K2)(function(){return this._more=!0,this},"more"),reject:(0,q.K2)(function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},"reject"),less:(0,q.K2)(function(E){this.unput(this.match.slice(E))},"less"),pastInput:(0,q.K2)(function(){var E=this.matched.substr(0,this.matched.length-this.match.length);return(E.length>20?"...":"")+E.substr(-20).replace(/\n/g,"")},"pastInput"),upcomingInput:(0,q.K2)(function(){var E=this.match;return E.length<20&&(E+=this._input.substr(0,20-E.length)),(E.substr(0,20)+(E.length>20?"...":"")).replace(/\n/g,"")},"upcomingInput"),showPosition:(0,q.K2)(function(){var E=this.pastInput(),I=new Array(E.length+1).join("-");return E+this.upcomingInput()+"\n"+I+"^"},"showPosition"),test_match:(0,q.K2)(function(E,I){var m,D,v;if(this.options.backtrack_lexer&&(v={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(v.yylloc.range=this.yylloc.range.slice(0))),(D=E[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=D.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:D?D[D.length-1].length-D[D.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+E[0].length},this.yytext+=E[0],this.match+=E[0],this.matches=E,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(E[0].length),this.matched+=E[0],m=this.performAction.call(this,this.yy,this,I,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),m)return m;if(this._backtrack){for(var b in v)this[b]=v[b];return!1}return!1},"test_match"),next:(0,q.K2)(function(){if(this.done)return this.EOF;var E,I,m,D;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var v=this._currentRules(),b=0;b<v.length;b++)if((m=this._input.match(this.rules[v[b]]))&&(!I||m[0].length>I[0].length)){if(I=m,D=b,this.options.backtrack_lexer){if(!1!==(E=this.test_match(m,v[b])))return E;if(this._backtrack){I=!1;continue}return!1}if(!this.options.flex)break}return I?!1!==(E=this.test_match(I,v[D]))&&E:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},"next"),lex:(0,q.K2)(function(){return this.next()||this.lex()},"lex"),begin:(0,q.K2)(function(I){this.conditionStack.push(I)},"begin"),popState:(0,q.K2)(function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},"popState"),_currentRules:(0,q.K2)(function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},"_currentRules"),topState:(0,q.K2)(function(I){return(I=this.conditionStack.length-1-Math.abs(I||0))>=0?this.conditionStack[I]:"INITIAL"},"topState"),pushState:(0,q.K2)(function(I){this.begin(I)},"pushState"),stateStackSize:(0,q.K2)(function(){return this.conditionStack.length},"stateStackSize"),options:{"case-insensitive":!0},performAction:(0,q.K2)(function(I,m,D,v){switch(D){case 0:return"title";case 1:return this.begin("acc_title"),9;case 2:return this.popState(),"acc_title_value";case 3:return this.begin("acc_descr"),11;case 4:return this.popState(),"acc_descr_value";case 5:this.begin("acc_descr_multiline");break;case 6:case 58:case 65:this.popState();break;case 7:return"acc_descr_multiline_value";case 8:return 21;case 9:return 22;case 10:return 23;case 11:return 24;case 12:return 5;case 13:case 14:case 15:case 56:break;case 16:return 8;case 17:return 6;case 18:return 27;case 19:return 40;case 20:return 29;case 21:return 32;case 22:return 31;case 23:return 34;case 24:return 36;case 25:return 38;case 26:return 41;case 27:return 42;case 28:return 43;case 29:return 44;case 30:return 45;case 31:return 46;case 32:return 47;case 33:return 48;case 34:return 49;case 35:return 50;case 36:return 51;case 37:return 52;case 38:return 53;case 39:return 54;case 40:return 65;case 41:return 66;case 42:return 67;case 43:return 68;case 44:return 69;case 45:return 70;case 46:return 71;case 47:return 57;case 48:return 59;case 49:return this.begin("style"),77;case 50:case 68:return 75;case 51:return 81;case 52:return 88;case 53:return"PERCENT";case 54:return 86;case 55:return 84;case 57:case 64:this.begin("string");break;case 59:return this.begin("style"),72;case 60:return this.begin("style"),74;case 61:return 61;case 62:return 64;case 63:return 63;case 66:return"qString";case 67:return m.yytext=m.yytext.trim(),89;case 69:return 80;case 70:return 76}},"anonymous"),rules:[/^(?:title\s[^#\n;]+)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:.*direction\s+TB[^\n]*)/i,/^(?:.*direction\s+BT[^\n]*)/i,/^(?:.*direction\s+RL[^\n]*)/i,/^(?:.*direction\s+LR[^\n]*)/i,/^(?:(\r?\n)+)/i,/^(?:\s+)/i,/^(?:#[^\n]*)/i,/^(?:%[^\n]*)/i,/^(?:$)/i,/^(?:requirementDiagram\b)/i,/^(?:\{)/i,/^(?:\})/i,/^(?::{3})/i,/^(?::)/i,/^(?:id\b)/i,/^(?:text\b)/i,/^(?:risk\b)/i,/^(?:verifyMethod\b)/i,/^(?:requirement\b)/i,/^(?:functionalRequirement\b)/i,/^(?:interfaceRequirement\b)/i,/^(?:performanceRequirement\b)/i,/^(?:physicalRequirement\b)/i,/^(?:designConstraint\b)/i,/^(?:low\b)/i,/^(?:medium\b)/i,/^(?:high\b)/i,/^(?:analysis\b)/i,/^(?:demonstration\b)/i,/^(?:inspection\b)/i,/^(?:test\b)/i,/^(?:element\b)/i,/^(?:contains\b)/i,/^(?:copies\b)/i,/^(?:derives\b)/i,/^(?:satisfies\b)/i,/^(?:verifies\b)/i,/^(?:refines\b)/i,/^(?:traces\b)/i,/^(?:type\b)/i,/^(?:docref\b)/i,/^(?:style\b)/i,/^(?:\w+)/i,/^(?::)/i,/^(?:;)/i,/^(?:%)/i,/^(?:-)/i,/^(?:#)/i,/^(?: )/i,/^(?:["])/i,/^(?:\n)/i,/^(?:classDef\b)/i,/^(?:class\b)/i,/^(?:<-)/i,/^(?:->)/i,/^(?:-)/i,/^(?:["])/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:[\w][^:,\r\n\{\<\>\-\=]*)/i,/^(?:\w+)/i,/^(?:[0-9]+)/i,/^(?:,)/i],conditions:{acc_descr_multiline:{rules:[6,7,68,69,70],inclusive:!1},acc_descr:{rules:[4,68,69,70],inclusive:!1},acc_title:{rules:[2,68,69,70],inclusive:!1},style:{rules:[50,51,52,53,54,55,56,57,58,68,69,70],inclusive:!1},unqString:{rules:[68,69,70],inclusive:!1},token:{rules:[68,69,70],inclusive:!1},string:{rules:[65,66,68,69,70],inclusive:!1},INITIAL:{rules:[0,1,3,5,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,59,60,61,62,63,64,67,68,69,70],inclusive:!0}}}}(),(0,q.K2)(g,"Parser"),g.prototype=be,be.Parser=g,new g}();Ke.parser=Ke;var cr=Ke,Rr=(class{constructor(){this.relations=[],this.latestRequirement=this.getInitialRequirement(),this.requirements=new Map,this.latestElement=this.getInitialElement(),this.elements=new Map,this.classes=new Map,this.direction="TB",this.RequirementType={REQUIREMENT:"Requirement",FUNCTIONAL_REQUIREMENT:"Functional Requirement",INTERFACE_REQUIREMENT:"Interface Requirement",PERFORMANCE_REQUIREMENT:"Performance Requirement",PHYSICAL_REQUIREMENT:"Physical Requirement",DESIGN_CONSTRAINT:"Design Constraint"},this.RiskLevel={LOW_RISK:"Low",MED_RISK:"Medium",HIGH_RISK:"High"},this.VerifyType={VERIFY_ANALYSIS:"Analysis",VERIFY_DEMONSTRATION:"Demonstration",VERIFY_INSPECTION:"Inspection",VERIFY_TEST:"Test"},this.Relationships={CONTAINS:"contains",COPIES:"copies",DERIVES:"derives",SATISFIES:"satisfies",VERIFIES:"verifies",REFINES:"refines",TRACES:"traces"},this.setAccTitle=Rt.SV,this.getAccTitle=Rt.iN,this.setAccDescription=Rt.EI,this.getAccDescription=Rt.m7,this.setDiagramTitle=Rt.ke,this.getDiagramTitle=Rt.ab,this.getConfig=(0,q.K2)(()=>(0,Rt.D7)().requirement,"getConfig"),this.clear(),this.setDirection=this.setDirection.bind(this),this.addRequirement=this.addRequirement.bind(this),this.setNewReqId=this.setNewReqId.bind(this),this.setNewReqRisk=this.setNewReqRisk.bind(this),this.setNewReqText=this.setNewReqText.bind(this),this.setNewReqVerifyMethod=this.setNewReqVerifyMethod.bind(this),this.addElement=this.addElement.bind(this),this.setNewElementType=this.setNewElementType.bind(this),this.setNewElementDocRef=this.setNewElementDocRef.bind(this),this.addRelationship=this.addRelationship.bind(this),this.setCssStyle=this.setCssStyle.bind(this),this.setClass=this.setClass.bind(this),this.defineClass=this.defineClass.bind(this),this.setAccTitle=this.setAccTitle.bind(this),this.setAccDescription=this.setAccDescription.bind(this)}getDirection(){return this.direction}setDirection(Se){this.direction=Se}resetLatestRequirement(){this.latestRequirement=this.getInitialRequirement()}resetLatestElement(){this.latestElement=this.getInitialElement()}getInitialRequirement(){return{requirementId:"",text:"",risk:"",verifyMethod:"",name:"",type:"",cssStyles:[],classes:["default"]}}getInitialElement(){return{name:"",type:"",docRef:"",cssStyles:[],classes:["default"]}}addRequirement(Se,Or){return this.requirements.has(Se)||this.requirements.set(Se,{name:Se,type:Or,requirementId:this.latestRequirement.requirementId,text:this.latestRequirement.text,risk:this.latestRequirement.risk,verifyMethod:this.latestRequirement.verifyMethod,cssStyles:[],classes:["default"]}),this.resetLatestRequirement(),this.requirements.get(Se)}getRequirements(){return this.requirements}setNewReqId(Se){void 0!==this.latestRequirement&&(this.latestRequirement.requirementId=Se)}setNewReqText(Se){void 0!==this.latestRequirement&&(this.latestRequirement.text=Se)}setNewReqRisk(Se){void 0!==this.latestRequirement&&(this.latestRequirement.risk=Se)}setNewReqVerifyMethod(Se){void 0!==this.latestRequirement&&(this.latestRequirement.verifyMethod=Se)}addElement(Se){return this.elements.has(Se)||(this.elements.set(Se,{name:Se,type:this.latestElement.type,docRef:this.latestElement.docRef,cssStyles:[],classes:["default"]}),q.Rm.info("Added new element: ",Se)),this.resetLatestElement(),this.elements.get(Se)}getElements(){return this.elements}setNewElementType(Se){void 0!==this.latestElement&&(this.latestElement.type=Se)}setNewElementDocRef(Se){void 0!==this.latestElement&&(this.latestElement.docRef=Se)}addRelationship(Se,Or,je){this.relations.push({type:Se,src:Or,dst:je})}getRelationships(){return this.relations}clear(){this.relations=[],this.resetLatestRequirement(),this.requirements=new Map,this.resetLatestElement(),this.elements=new Map,this.classes=new Map,(0,Rt.IU)()}setCssStyle(Se,Or){for(const je of Se){const z=this.requirements.get(je)??this.elements.get(je);if(!Or||!z)return;for(const ft of Or)ft.includes(",")?z.cssStyles.push(...ft.split(",")):z.cssStyles.push(ft)}}setClass(Se,Or){for(const je of Se){const z=this.requirements.get(je)??this.elements.get(je);if(z)for(const ft of Or){z.classes.push(ft);const Bt=this.classes.get(ft)?.styles;Bt&&z.cssStyles.push(...Bt)}}}defineClass(Se,Or){for(const je of Se){let z=this.classes.get(je);void 0===z&&(z={id:je,styles:[],textStyles:[]},this.classes.set(je,z)),Or&&Or.forEach(function(ft){if(/color/.exec(ft)){const Bt=ft.replace("fill","bgFill");z.textStyles.push(Bt)}z.styles.push(ft)}),this.requirements.forEach(ft=>{ft.classes.includes(je)&&ft.cssStyles.push(...Or.flatMap(Bt=>Bt.split(",")))}),this.elements.forEach(ft=>{ft.classes.includes(je)&&ft.cssStyles.push(...Or.flatMap(Bt=>Bt.split(",")))})}}getClasses(){return this.classes}getData(){const Se=(0,Rt.D7)(),Or=[],je=[];for(const z of this.requirements.values()){const ft=z;ft.id=z.name,ft.cssStyles=z.cssStyles,ft.cssClasses=z.classes.join(" "),ft.shape="requirementBox",ft.look=Se.look,Or.push(ft)}for(const z of this.elements.values()){const ft=z;ft.shape="requirementBox",ft.look=Se.look,ft.id=z.name,ft.cssStyles=z.cssStyles,ft.cssClasses=z.classes.join(" "),Or.push(ft)}for(const z of this.relations){let ft=0;const Bt=z.type===this.Relationships.CONTAINS,we={id:`${z.src}-${z.dst}-${ft}`,start:this.requirements.get(z.src)?.name??this.elements.get(z.src)?.name,end:this.requirements.get(z.dst)?.name??this.elements.get(z.dst)?.name,label:`&lt;&lt;${z.type}&gt;&gt;`,classes:"relationshipLine",style:["fill:none",Bt?"":"stroke-dasharray: 10,7"],labelpos:"c",thickness:"normal",type:"normal",pattern:Bt?"normal":"dashed",arrowTypeStart:Bt?"requirement_contains":"",arrowTypeEnd:Bt?"":"requirement_arrow",look:Se.look};je.push(we),ft++}return{nodes:Or,edges:je,other:{},config:Se,direction:this.getDirection()}}static#t=ar=()=>((0,ee.A)(this,"RequirementDB"),(0,q.K2)(this,"RequirementDB"),this)},ar()),Vr=(0,q.K2)(Se=>`\n\n  marker {\n    fill: ${Se.relationColor};\n    stroke: ${Se.relationColor};\n  }\n\n  marker.cross {\n    stroke: ${Se.lineColor};\n  }\n\n  svg {\n    font-family: ${Se.fontFamily};\n    font-size: ${Se.fontSize};\n  }\n\n  .reqBox {\n    fill: ${Se.requirementBackground};\n    fill-opacity: 1.0;\n    stroke: ${Se.requirementBorderColor};\n    stroke-width: ${Se.requirementBorderSize};\n  }\n  \n  .reqTitle, .reqLabel{\n    fill:  ${Se.requirementTextColor};\n  }\n  .reqLabelBox {\n    fill: ${Se.relationLabelBackground};\n    fill-opacity: 1.0;\n  }\n\n  .req-title-line {\n    stroke: ${Se.requirementBorderColor};\n    stroke-width: ${Se.requirementBorderSize};\n  }\n  .relationshipLine {\n    stroke: ${Se.relationColor};\n    stroke-width: 1;\n  }\n  .relationshipLabel {\n    fill: ${Se.relationLabelColor};\n  }\n  .divider {\n    stroke: ${Se.nodeBorder};\n    stroke-width: 1;\n  }\n  .label {\n    font-family: ${Se.fontFamily};\n    color: ${Se.nodeTextColor||Se.textColor};\n  }\n  .label text,span {\n    fill: ${Se.nodeTextColor||Se.textColor};\n    color: ${Se.nodeTextColor||Se.textColor};\n  }\n  .labelBkg {\n    background-color: ${Se.edgeLabelBackground};\n  }\n\n`,"getStyles"),ra={};(0,q.VA)(ra,{draw:()=>Nr});var Nr=(0,q.K2)(function(){var Se=(0,ot.A)(function*(Or,je,z,ft){q.Rm.info("REF0:"),q.Rm.info("Drawing requirement diagram (unified)",je);const{securityLevel:Bt,state:we,layout:X}=(0,Rt.D7)(),ae=ft.db.getData(),w=(0,L.A)(je,Bt);ae.type=ft.type,ae.layoutAlgorithm=(0,Pt.q7)(X),ae.nodeSpacing=we?.nodeSpacing??50,ae.rankSpacing=we?.rankSpacing??50,ae.markers=["requirement_contains","requirement_arrow"],ae.diagramId=je,yield(0,Pt.XX)(ae,w),dt._K.insertTitle(w,"requirementDiagramTitleText",we?.titleTopMargin??25,ft.db.getDiagramTitle()),(0,S.P)(w,8,"requirementDiagram",we?.useMaxWidth??!0)});return function(Or,je,z,ft){return Se.apply(this,arguments)}}(),"draw"),Fr={parser:cr,get db(){return new Rr},renderer:ra,styles:Vr}},30001:function(Ja){Ja.exports=function(){"use strict";var vr={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},R=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|Q|YYYY|YY?|ww?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,ot=/\d/,ee=/\d\d/,L=/\d\d?/,S=/\d*[^-_:/,()\s\d]+/,Pt={},ut=function(Rt){return(Rt=+Rt)+(Rt>68?1900:2e3)},$=function(Rt){return function(q){this[Rt]=+q}},A=[/[+-]\d\d:?(\d\d)?|Z/,function(Rt){(this.zone||(this.zone={})).offset=function(q){if(!q||"Z"===q)return 0;var ar=q.match(/([+-]|\d\d)/g),Ke=60*ar[1]+(+ar[2]||0);return 0===Ke?0:"+"===ar[0]?-Ke:Ke}(Rt)}],At=function(Rt){var q=Pt[Rt];return q&&(q.indexOf?q:q.s.concat(q.f))},wt=function(Rt,q){var ar,Ke=Pt.meridiem;if(Ke){for(var cr=1;cr<=24;cr+=1)if(Rt.indexOf(Ke(cr,0,q))>-1){ar=cr>12;break}}else ar=Rt===(q?"pm":"PM");return ar},Ge={A:[S,function(Rt){this.afternoon=wt(Rt,!1)}],a:[S,function(Rt){this.afternoon=wt(Rt,!0)}],Q:[ot,function(Rt){this.month=3*(Rt-1)+1}],S:[ot,function(Rt){this.milliseconds=100*+Rt}],SS:[ee,function(Rt){this.milliseconds=10*+Rt}],SSS:[/\d{3}/,function(Rt){this.milliseconds=+Rt}],s:[L,$("seconds")],ss:[L,$("seconds")],m:[L,$("minutes")],mm:[L,$("minutes")],H:[L,$("hours")],h:[L,$("hours")],HH:[L,$("hours")],hh:[L,$("hours")],D:[L,$("day")],DD:[ee,$("day")],Do:[S,function(Rt){var q=Pt.ordinal,ar=Rt.match(/\d+/);if(this.day=ar[0],q)for(var Ke=1;Ke<=31;Ke+=1)q(Ke).replace(/\[|\]/g,"")===Rt&&(this.day=Ke)}],w:[L,$("week")],ww:[ee,$("week")],M:[L,$("month")],MM:[ee,$("month")],MMM:[S,function(Rt){var q=At("months"),ar=(At("monthsShort")||q.map(function(Ke){return Ke.slice(0,3)})).indexOf(Rt)+1;if(ar<1)throw new Error;this.month=ar%12||ar}],MMMM:[S,function(Rt){var q=At("months").indexOf(Rt)+1;if(q<1)throw new Error;this.month=q%12||q}],Y:[/[+-]?\d+/,$("year")],YY:[ee,function(Rt){this.year=ut(Rt)}],YYYY:[/\d{4}/,$("year")],Z:A,ZZ:A};return function(Rt,q,ar){ar.p.customParseFormat=!0,Rt&&Rt.parseTwoDigitYear&&(ut=Rt.parseTwoDigitYear);var Ke=q.prototype,cr=Ke.parse;Ke.parse=function(Rr){var wr=Rr.date,Vr=Rr.utc,ra=Rr.args;this.$u=Vr;var Nr=ra[1];if("string"==typeof Nr){var Fr=!0===ra[2],Se=!0===ra[3],Or=Fr||Se,je=ra[2];Se&&(je=ra[2]),Pt=this.$locale(),!Fr&&je&&(Pt=ar.Ls[je]),this.$d=function(we,X,ae,w){try{if(["x","X"].indexOf(X)>-1)return new Date(("X"===X?1e3:1)*we);var re=function dt(Rt){var ar;ar=Pt&&Pt.formats;for(var Ke=(Rt=Rt.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(Fr,Se,Or){var je=Or&&Or.toUpperCase();return Se||ar[Or]||vr[Or]||ar[je].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(z,ft,Bt){return ft||Bt.slice(1)})})).match(R),cr=Ke.length,Rr=0;Rr<cr;Rr+=1){var wr=Ke[Rr],Vr=Ge[wr],Nr=Vr&&Vr[1];Ke[Rr]=Nr?{regex:Vr&&Vr[0],parser:Nr}:wr.replace(/^\[|\]$/g,"")}return function(Fr){for(var Se={},Or=0,je=0;Or<cr;Or+=1){var z=Ke[Or];if("string"==typeof z)je+=z.length;else{var ft=z.regex,Bt=z.parser,we=Fr.slice(je),X=ft.exec(we)[0];Bt.call(Se,X),Fr=Fr.replace(X,"")}}return function(ae){var w=ae.afternoon;if(void 0!==w){var re=ae.hours;w?re<12&&(ae.hours+=12):12===re&&(ae.hours=0),delete ae.afternoon}}(Se),Se}}(X)(we),It=re.year,qt=re.month,V=re.day,pt=re.hours,H=re.minutes,Nt=re.seconds,St=re.milliseconds,$t=re.zone,ye=re.week,le=new Date,Pe=V||(It||qt?1:le.getDate()),oe=It||le.getFullYear(),qe=0;It&&!qt||(qe=qt>0?qt-1:le.getMonth());var ze,Et=pt||0,Tt=H||0,B=Nt||0,F=St||0;return $t?new Date(Date.UTC(oe,qe,Pe,Et,Tt,B,F+60*$t.offset*1e3)):ae?new Date(Date.UTC(oe,qe,Pe,Et,Tt,B,F)):(ze=new Date(oe,qe,Pe,Et,Tt,B,F),ye&&(ze=w(ze).week(ye).toDate()),ze)}catch{return new Date("")}}(wr,Nr,Vr,ar),this.init(),je&&!0!==je&&(this.$L=this.locale(je).$L),Or&&wr!=this.format(Nr)&&(this.$d=new Date("")),Pt={}}else if(Nr instanceof Array)for(var z=Nr.length,ft=1;ft<=z;ft+=1){ra[1]=Nr[ft-1];var Bt=ar.apply(this,ra);if(Bt.isValid()){this.$d=Bt.$d,this.$L=Bt.$L,this.init();break}ft===z&&(this.$d=new Date(""))}else cr.call(this,Rr)}}}()},30362:(Ja,vr)=>{"use strict";let R;function ot(){if(void 0===R)throw new Error("No runtime abstraction layer installed");return R}Object.defineProperty(vr,"__esModule",{value:!0}),(ot||(ot={})).install=function L(S){if(void 0===S)throw new Error("No runtime abstraction layer provided");R=S},vr.default=ot},32239:(Ja,vr,R)=>{"use strict";R.d(vr,{O:()=>ee});var ee=(0,R(32303).K2)(({flowchart:L})=>{const S=L?.subGraphTitleMargin?.top??0,Pt=L?.subGraphTitleMargin?.bottom??0;return{subGraphTitleTopMargin:S,subGraphTitleBottomMargin:Pt,subGraphTitleTotalMargin:S+Pt}},"getSubGraphTitleMargins")},32303:(Ja,vr,R)=>{"use strict";R.d(vr,{He:()=>$,K2:()=>L,Rm:()=>ut,VA:()=>S});var ot=R(49645),ee=Object.defineProperty,L=(At,wt)=>ee(At,"name",{value:wt,configurable:!0}),S=(At,wt)=>{for(var Ge in wt)ee(At,Ge,{get:wt[Ge],enumerable:!0})},Pt={trace:0,debug:1,info:2,warn:3,error:4,fatal:5},ut={trace:L((...At)=>{},"trace"),debug:L((...At)=>{},"debug"),info:L((...At)=>{},"info"),warn:L((...At)=>{},"warn"),error:L((...At)=>{},"error"),fatal:L((...At)=>{},"fatal")},$=L(function(At="fatal"){let wt=Pt.fatal;"string"==typeof At?At.toLowerCase()in Pt&&(wt=Pt[At]):"number"==typeof At&&(wt=At),ut.trace=()=>{},ut.debug=()=>{},ut.info=()=>{},ut.warn=()=>{},ut.error=()=>{},ut.fatal=()=>{},wt<=Pt.fatal&&(ut.fatal=console.error?console.error.bind(console,A("FATAL"),"color: orange"):console.log.bind(console,"\x1b[35m",A("FATAL"))),wt<=Pt.error&&(ut.error=console.error?console.error.bind(console,A("ERROR"),"color: orange"):console.log.bind(console,"\x1b[31m",A("ERROR"))),wt<=Pt.warn&&(ut.warn=console.warn?console.warn.bind(console,A("WARN"),"color: orange"):console.log.bind(console,"\x1b[33m",A("WARN"))),wt<=Pt.info&&(ut.info=console.info?console.info.bind(console,A("INFO"),"color: lightblue"):console.log.bind(console,"\x1b[34m",A("INFO"))),wt<=Pt.debug&&(ut.debug=console.debug?console.debug.bind(console,A("DEBUG"),"color: lightgreen"):console.log.bind(console,"\x1b[32m",A("DEBUG"))),wt<=Pt.trace&&(ut.trace=console.debug?console.debug.bind(console,A("TRACE"),"color: lightgreen"):console.log.bind(console,"\x1b[32m",A("TRACE")))},"setLogLevel"),A=L(At=>`%c${ot().format("ss.SSS")} : ${At} : `,"format")},32699:(Ja,vr,R)=>{"use strict";R.r(vr),R.d(vr,{diagram:()=>mt});var Rt,ot=R(89204),ee=R(45027),L=R(69664),S=R(59355),Pt=R(80525),ut=R(52052),$=R(79006),A=R(32303),At=R(62233),wt=R(15363),Ge=R(10867),dt=R(40622),q={L:"left",R:"right",T:"top",B:"bottom"},ar={L:(0,A.K2)(it=>`${it},${it/2} 0,${it} 0,0`,"L"),R:(0,A.K2)(it=>`0,${it/2} ${it},0 ${it},${it}`,"R"),T:(0,A.K2)(it=>`0,0 ${it},0 ${it/2},${it}`,"T"),B:(0,A.K2)(it=>`${it/2},0 ${it},${it} 0,${it}`,"B")},Ke={L:(0,A.K2)((it,rt)=>it-rt+2,"L"),R:(0,A.K2)((it,rt)=>it-2,"R"),T:(0,A.K2)((it,rt)=>it-rt+2,"T"),B:(0,A.K2)((it,rt)=>it-2,"B")},cr=(0,A.K2)(function(it){return wr(it)?"L"===it?"R":"L":"T"===it?"B":"T"},"getOppositeArchitectureDirection"),Rr=(0,A.K2)(function(it){return"L"===it||"R"===it||"T"===it||"B"===it},"isArchitectureDirection"),wr=(0,A.K2)(function(it){return"L"===it||"R"===it},"isArchitectureDirectionX"),Vr=(0,A.K2)(function(it){return"T"===it||"B"===it},"isArchitectureDirectionY"),ra=(0,A.K2)(function(it,rt){const _t=wr(it)&&Vr(rt),ht=Vr(it)&&wr(rt);return _t||ht},"isArchitectureDirectionXY"),Nr=(0,A.K2)(function(it){const rt=it[0],_t=it[1],ht=wr(rt)&&Vr(_t),Ft=Vr(rt)&&wr(_t);return ht||Ft},"isArchitecturePairXY"),Fr=(0,A.K2)(function(it){return"LL"!==it&&"RR"!==it&&"TT"!==it&&"BB"!==it},"isValidArchitectureDirectionPair"),Se=(0,A.K2)(function(it,rt){const _t=`${it}${rt}`;return Fr(_t)?_t:void 0},"getArchitectureDirectionPair"),Or=(0,A.K2)(function([it,rt],_t){const ht=_t[0],Ft=_t[1];return wr(ht)?Vr(Ft)?[it+("L"===ht?-1:1),rt+("T"===Ft?1:-1)]:[it+("L"===ht?-1:1),rt]:wr(Ft)?[it+("L"===Ft?1:-1),rt+("T"===ht?1:-1)]:[it,rt+("T"===ht?1:-1)]},"shiftPositionByArchitectureDirectionPair"),je=(0,A.K2)(function(it){return"LT"===it||"TL"===it?[1,1]:"BL"===it||"LB"===it?[1,-1]:"BR"===it||"RB"===it?[-1,-1]:[-1,1]},"getArchitectureDirectionXYFactors"),z=(0,A.K2)(function(it,rt){return ra(it,rt)?"bend":wr(it)?"horizontal":"vertical"},"getArchitectureDirectionAlignment"),ft=(0,A.K2)(function(it){return"service"===it.type},"isArchitectureService"),Bt=(0,A.K2)(function(it){return"junction"===it.type},"isArchitectureJunction"),we=(0,A.K2)(it=>it.data(),"edgeData"),X=(0,A.K2)(it=>it.data(),"nodeData"),ae=$.UI.architecture,w=(class{constructor(){this.nodes={},this.groups={},this.edges=[],this.registeredIds={},this.elements={},this.setAccTitle=$.SV,this.getAccTitle=$.iN,this.setDiagramTitle=$.ke,this.getDiagramTitle=$.ab,this.getAccDescription=$.m7,this.setAccDescription=$.EI,this.clear()}clear(){this.nodes={},this.groups={},this.edges=[],this.registeredIds={},this.dataStructures=void 0,this.elements={},(0,$.IU)()}addService({id:it,icon:rt,in:_t,title:ht,iconText:Ft}){if(void 0!==this.registeredIds[it])throw new Error(`The service id [${it}] is already in use by another ${this.registeredIds[it]}`);if(void 0!==_t){if(it===_t)throw new Error(`The service [${it}] cannot be placed within itself`);if(void 0===this.registeredIds[_t])throw new Error(`The service [${it}]'s parent does not exist. Please make sure the parent is created before this service`);if("node"===this.registeredIds[_t])throw new Error(`The service [${it}]'s parent is not a group`)}this.registeredIds[it]="node",this.nodes[it]={id:it,type:"service",icon:rt,iconText:Ft,title:ht,edges:[],in:_t}}getServices(){return Object.values(this.nodes).filter(ft)}addJunction({id:it,in:rt}){this.registeredIds[it]="node",this.nodes[it]={id:it,type:"junction",edges:[],in:rt}}getJunctions(){return Object.values(this.nodes).filter(Bt)}getNodes(){return Object.values(this.nodes)}getNode(it){return this.nodes[it]??null}addGroup({id:it,icon:rt,in:_t,title:ht}){if(void 0!==this.registeredIds?.[it])throw new Error(`The group id [${it}] is already in use by another ${this.registeredIds[it]}`);if(void 0!==_t){if(it===_t)throw new Error(`The group [${it}] cannot be placed within itself`);if(void 0===this.registeredIds?.[_t])throw new Error(`The group [${it}]'s parent does not exist. Please make sure the parent is created before this group`);if("node"===this.registeredIds?.[_t])throw new Error(`The group [${it}]'s parent is not a group`)}this.registeredIds[it]="group",this.groups[it]={id:it,icon:rt,title:ht,in:_t}}getGroups(){return Object.values(this.groups)}addEdge({lhsId:it,rhsId:rt,lhsDir:_t,rhsDir:ht,lhsInto:Ft,rhsInto:G,lhsGroup:lt,rhsGroup:ke,title:Mt}){if(!Rr(_t))throw new Error(`Invalid direction given for left hand side of edge ${it}--${rt}. Expected (L,R,T,B) got ${String(_t)}`);if(!Rr(ht))throw new Error(`Invalid direction given for right hand side of edge ${it}--${rt}. Expected (L,R,T,B) got ${String(ht)}`);if(void 0===this.nodes[it]&&void 0===this.groups[it])throw new Error(`The left-hand id [${it}] does not yet exist. Please create the service/group before declaring an edge to it.`);if(void 0===this.nodes[rt]&&void 0===this.groups[rt])throw new Error(`The right-hand id [${rt}] does not yet exist. Please create the service/group before declaring an edge to it.`);const Zt=this.nodes[it].in,pe=this.nodes[rt].in;if(lt&&Zt&&pe&&Zt==pe)throw new Error(`The left-hand id [${it}] is modified to traverse the group boundary, but the edge does not pass through two groups.`);if(ke&&Zt&&pe&&Zt==pe)throw new Error(`The right-hand id [${rt}] is modified to traverse the group boundary, but the edge does not pass through two groups.`);this.edges.push({lhsId:it,lhsDir:_t,lhsInto:Ft,lhsGroup:lt,rhsId:rt,rhsDir:ht,rhsInto:G,rhsGroup:ke,title:Mt}),this.nodes[it]&&this.nodes[rt]&&(this.nodes[it].edges.push(this.edges[this.edges.length-1]),this.nodes[rt].edges.push(this.edges[this.edges.length-1]))}getEdges(){return this.edges}getDataStructures(){if(void 0===this.dataStructures){const it={},rt=Object.entries(this.nodes).reduce((ke,[Mt,Zt])=>(ke[Mt]=Zt.edges.reduce((pe,Re)=>{const Ze=this.getNode(Re.lhsId)?.in,de=this.getNode(Re.rhsId)?.in;if(Ze&&de&&Ze!==de){const mr=z(Re.lhsDir,Re.rhsDir);"bend"!==mr&&(it[Ze]??={},it[Ze][de]=mr,it[de]??={},it[de][Ze]=mr)}if(Re.lhsId===Mt){const mr=Se(Re.lhsDir,Re.rhsDir);mr&&(pe[mr]=Re.rhsId)}else{const mr=Se(Re.rhsDir,Re.lhsDir);mr&&(pe[mr]=Re.lhsId)}return pe},{}),ke),{}),_t=Object.keys(rt)[0],ht={[_t]:1},Ft=Object.keys(rt).reduce((ke,Mt)=>Mt===_t?ke:{...ke,[Mt]:1},{}),G=(0,A.K2)(ke=>{const Mt={[ke]:[0,0]},Zt=[ke];for(;Zt.length>0;){const pe=Zt.shift();if(pe){ht[pe]=1,delete Ft[pe];const Re=rt[pe],[Ze,de]=Mt[pe];Object.entries(Re).forEach(([mr,xr])=>{ht[xr]||(Mt[xr]=Or([Ze,de],mr),Zt.push(xr))})}}return Mt},"BFS"),lt=[G(_t)];for(;Object.keys(Ft).length>0;)lt.push(G(Object.keys(Ft)[0]));this.dataStructures={adjList:rt,spatialMaps:lt,groupAlignments:it}}return this.dataStructures}setElementForId(it,rt){this.elements[it]=rt}getElementById(it){return this.elements[it]}getConfig(){return(0,ut.$t)({...ae,...(0,$.zj)().architecture})}getConfigField(it){return this.getConfig()[it]}static#t=Rt=()=>((0,ee.A)(this,"ArchitectureDB"),(0,A.K2)(this,"ArchitectureDB"),this)},Rt()),re=(0,A.K2)((it,rt)=>{(0,Pt.S)(it,rt),it.groups.map(_t=>rt.addGroup(_t)),it.services.map(_t=>rt.addService({..._t,type:"service"})),it.junctions.map(_t=>rt.addJunction({..._t,type:"junction"})),it.edges.map(_t=>rt.addEdge(_t))},"populateDb"),It={parser:{yy:void 0},parse:(0,A.K2)(function(){var it=(0,ot.A)(function*(rt){const _t=yield(0,At.qg)("architecture",rt);A.Rm.debug(_t);const ht=It.parser?.yy;if(!(ht instanceof w))throw new Error("parser.parser?.yy was not a ArchitectureDB. This is due to a bug within Mermaid, please report this issue at https://github.com/mermaid-js/mermaid/issues.");re(_t,ht)});return function(rt){return it.apply(this,arguments)}}(),"parse")},V=(0,A.K2)(it=>`\n  .edge {\n    stroke-width: ${it.archEdgeWidth};\n    stroke: ${it.archEdgeColor};\n    fill: none;\n  }\n\n  .arrow {\n    fill: ${it.archEdgeArrowColor};\n  }\n\n  .node-bkg {\n    fill: none;\n    stroke: ${it.archGroupBorderColor};\n    stroke-width: ${it.archGroupBorderWidth};\n    stroke-dasharray: 8;\n  }\n  .node-icon-text {\n    display: flex; \n    align-items: center;\n  }\n  \n  .node-icon-text > div {\n    color: #fff;\n    margin: 1px;\n    height: fit-content;\n    text-align: center;\n    overflow: hidden;\n    display: -webkit-box;\n    -webkit-box-orient: vertical;\n  }\n`,"getStyles"),pt=(0,A.K2)(it=>`<g><rect width="80" height="80" style="fill: #087ebf; stroke-width: 0px;"/>${it}</g>`,"wrapIcon"),H={prefix:"mermaid-architecture",height:80,width:80,icons:{database:{body:pt('<path id="b" data-name="4" d="m20,57.86c0,3.94,8.95,7.14,20,7.14s20-3.2,20-7.14" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><path id="c" data-name="3" d="m20,45.95c0,3.94,8.95,7.14,20,7.14s20-3.2,20-7.14" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><path id="d" data-name="2" d="m20,34.05c0,3.94,8.95,7.14,20,7.14s20-3.2,20-7.14" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><ellipse id="e" data-name="1" cx="40" cy="22.14" rx="20" ry="7.14" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="20" y1="57.86" x2="20" y2="22.14" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="60" y1="57.86" x2="60" y2="22.14" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/>')},server:{body:pt('<rect x="17.5" y="17.5" width="45" height="45" rx="2" ry="2" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="17.5" y1="32.5" x2="62.5" y2="32.5" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="17.5" y1="47.5" x2="62.5" y2="47.5" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><g><path d="m56.25,25c0,.27-.45.5-1,.5h-10.5c-.55,0-1-.23-1-.5s.45-.5,1-.5h10.5c.55,0,1,.23,1,.5Z" style="fill: #fff; stroke-width: 0px;"/><path d="m56.25,25c0,.27-.45.5-1,.5h-10.5c-.55,0-1-.23-1-.5s.45-.5,1-.5h10.5c.55,0,1,.23,1,.5Z" style="fill: none; stroke: #fff; stroke-miterlimit: 10;"/></g><g><path d="m56.25,40c0,.27-.45.5-1,.5h-10.5c-.55,0-1-.23-1-.5s.45-.5,1-.5h10.5c.55,0,1,.23,1,.5Z" style="fill: #fff; stroke-width: 0px;"/><path d="m56.25,40c0,.27-.45.5-1,.5h-10.5c-.55,0-1-.23-1-.5s.45-.5,1-.5h10.5c.55,0,1,.23,1,.5Z" style="fill: none; stroke: #fff; stroke-miterlimit: 10;"/></g><g><path d="m56.25,55c0,.27-.45.5-1,.5h-10.5c-.55,0-1-.23-1-.5s.45-.5,1-.5h10.5c.55,0,1,.23,1,.5Z" style="fill: #fff; stroke-width: 0px;"/><path d="m56.25,55c0,.27-.45.5-1,.5h-10.5c-.55,0-1-.23-1-.5s.45-.5,1-.5h10.5c.55,0,1,.23,1,.5Z" style="fill: none; stroke: #fff; stroke-miterlimit: 10;"/></g><g><circle cx="32.5" cy="25" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/><circle cx="27.5" cy="25" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/><circle cx="22.5" cy="25" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/></g><g><circle cx="32.5" cy="40" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/><circle cx="27.5" cy="40" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/><circle cx="22.5" cy="40" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/></g><g><circle cx="32.5" cy="55" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/><circle cx="27.5" cy="55" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/><circle cx="22.5" cy="55" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/></g>')},disk:{body:pt('<rect x="20" y="15" width="40" height="50" rx="1" ry="1" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><ellipse cx="24" cy="19.17" rx=".8" ry=".83" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><ellipse cx="56" cy="19.17" rx=".8" ry=".83" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><ellipse cx="24" cy="60.83" rx=".8" ry=".83" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><ellipse cx="56" cy="60.83" rx=".8" ry=".83" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><ellipse cx="40" cy="33.75" rx="14" ry="14.58" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><ellipse cx="40" cy="33.75" rx="4" ry="4.17" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><path d="m37.51,42.52l-4.83,13.22c-.26.71-1.1,1.02-1.76.64l-4.18-2.42c-.66-.38-.81-1.26-.33-1.84l9.01-10.8c.88-1.05,2.56-.08,2.09,1.2Z" style="fill: #fff; stroke-width: 0px;"/>')},internet:{body:pt('<circle cx="40" cy="40" r="22.5" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="40" y1="17.5" x2="40" y2="62.5" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="17.5" y1="40" x2="62.5" y2="40" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><path d="m39.99,17.51c-15.28,11.1-15.28,33.88,0,44.98" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><path d="m40.01,17.51c15.28,11.1,15.28,33.88,0,44.98" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="19.75" y1="30.1" x2="60.25" y2="30.1" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="19.75" y1="49.9" x2="60.25" y2="49.9" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/>')},cloud:{body:pt('<path d="m65,47.5c0,2.76-2.24,5-5,5H20c-2.76,0-5-2.24-5-5,0-1.87,1.03-3.51,2.56-4.36-.04-.21-.06-.42-.06-.64,0-2.6,2.48-4.74,5.65-4.97,1.65-4.51,6.34-7.76,11.85-7.76.86,0,1.69.08,2.5.23,2.09-1.57,4.69-2.5,7.5-2.5,6.1,0,11.19,4.38,12.28,10.17,2.14.56,3.72,2.51,3.72,4.83,0,.03,0,.07-.01.1,2.29.46,4.01,2.48,4.01,4.9Z" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/>')},unknown:S.Gc,blank:{body:pt("")}}},Nt=(0,A.K2)(function(){var it=(0,ot.A)(function*(rt,_t,ht){const Ft=ht.getConfigField("padding"),G=ht.getConfigField("iconSize"),lt=G/2,ke=G/6,Mt=ke/2;yield Promise.all(_t.edges().map(function(){var Zt=(0,ot.A)(function*(pe){const{source:Re,sourceDir:Ze,sourceArrow:de,sourceGroup:mr,target:xr,targetDir:zt,targetArrow:Ae,targetGroup:or,label:ve}=we(pe);let{x:ce,y:Ee}=pe[0].sourceEndpoint();const{x:De,y:er}=pe[0].midpoint();let{x:Qe,y:Lr}=pe[0].targetEndpoint();const _e=Ft+4;if(mr&&(wr(Ze)?ce+="L"===Ze?-_e:_e:Ee+="T"===Ze?-_e:_e+18),or&&(wr(zt)?Qe+="L"===zt?-_e:_e:Lr+="T"===zt?-_e:_e+18),!mr&&"junction"===ht.getNode(Re)?.type&&(wr(Ze)?ce+="L"===Ze?lt:-lt:Ee+="T"===Ze?lt:-lt),!or&&"junction"===ht.getNode(xr)?.type&&(wr(zt)?Qe+="L"===zt?lt:-lt:Lr+="T"===zt?lt:-lt),pe[0]._private.rscratch){const Hr=rt.insert("g");if(Hr.insert("path").attr("d",`M ${ce},${Ee} L ${De},${er} L${Qe},${Lr} `).attr("class","edge").attr("id",(0,ut.rY)(Re,xr,{prefix:"L"})),de){const sr=wr(Ze)?Ke[Ze](ce,ke):ce-Mt,te=Vr(Ze)?Ke[Ze](Ee,ke):Ee-Mt;Hr.insert("polygon").attr("points",ar[Ze](ke)).attr("transform",`translate(${sr},${te})`).attr("class","arrow")}if(Ae){const sr=wr(zt)?Ke[zt](Qe,ke):Qe-Mt,te=Vr(zt)?Ke[zt](Lr,ke):Lr-Mt;Hr.insert("polygon").attr("points",ar[zt](ke)).attr("transform",`translate(${sr},${te})`).attr("class","arrow")}if(ve){const sr=ra(Ze,zt)?"XY":wr(Ze)?"X":"Y";let te=0;te="X"===sr?Math.abs(ce-Qe):"Y"===sr?Math.abs(Ee-Lr)/1.5:Math.abs(ce-Qe)/2;const ne=Hr.append("g");if(yield(0,S.GZ)(ne,ve,{useHtmlLabels:!1,width:te,classes:"architecture-service-label"},(0,$.D7)()),ne.attr("dy","1em").attr("alignment-baseline","middle").attr("dominant-baseline","middle").attr("text-anchor","middle"),"X"===sr)ne.attr("transform","translate("+De+", "+er+")");else if("Y"===sr)ne.attr("transform","translate("+De+", "+er+") rotate(-90)");else if("XY"===sr){const be=Se(Ze,zt);if(be&&Nr(be)){const ir=ne.node().getBoundingClientRect(),[g,y]=je(be);ne.attr("dominant-baseline","auto").attr("transform",`rotate(${-1*g*y*45})`);const E=ne.node().getBoundingClientRect();ne.attr("transform",`\n                translate(${De}, ${er-ir.height/2})\n                translate(${g*E.width/2}, ${y*E.height/2})\n                rotate(${-1*g*y*45}, 0, ${ir.height/2})\n              `)}}}}});return function(pe){return Zt.apply(this,arguments)}}()))});return function(rt,_t,ht){return it.apply(this,arguments)}}(),"drawEdges"),St=(0,A.K2)(function(){var it=(0,ot.A)(function*(rt,_t,ht){const G=.75*ht.getConfigField("padding"),lt=ht.getConfigField("fontSize"),Mt=ht.getConfigField("iconSize")/2;yield Promise.all(_t.nodes().map(function(){var Zt=(0,ot.A)(function*(pe){const Re=X(pe);if("group"===Re.type){const{h:Ze,w:de,x1:mr,y1:xr}=pe.boundingBox(),zt=rt.append("rect");zt.attr("id",`group-${Re.id}`).attr("x",mr+Mt).attr("y",xr+Mt).attr("width",de).attr("height",Ze).attr("class","node-bkg");const Ae=rt.append("g");let or=mr,ve=xr;if(Re.icon){const ce=Ae.append("g");ce.html(`<g>${yield(0,S.WY)(Re.icon,{height:G,width:G,fallbackPrefix:H.prefix})}</g>`),ce.attr("transform","translate("+(or+Mt+1)+", "+(ve+Mt+1)+")"),or+=G,ve+=lt/2-1-2}if(Re.label){const ce=Ae.append("g");yield(0,S.GZ)(ce,Re.label,{useHtmlLabels:!1,width:de,classes:"architecture-service-label"},(0,$.D7)()),ce.attr("dy","1em").attr("alignment-baseline","middle").attr("dominant-baseline","start").attr("text-anchor","start"),ce.attr("transform","translate("+(or+Mt+4)+", "+(ve+Mt+2)+")")}ht.setElementForId(Re.id,zt)}});return function(pe){return Zt.apply(this,arguments)}}()))});return function(rt,_t,ht){return it.apply(this,arguments)}}(),"drawGroups"),$t=(0,A.K2)(function(){var it=(0,ot.A)(function*(rt,_t,ht){const Ft=(0,$.D7)();for(const G of ht){const lt=_t.append("g"),ke=rt.getConfigField("iconSize");if(G.title){const Re=lt.append("g");yield(0,S.GZ)(Re,G.title,{useHtmlLabels:!1,width:1.5*ke,classes:"architecture-service-label"},Ft),Re.attr("dy","1em").attr("alignment-baseline","middle").attr("dominant-baseline","middle").attr("text-anchor","middle"),Re.attr("transform","translate("+ke/2+", "+ke+")")}const Mt=lt.append("g");if(G.icon)Mt.html(`<g>${yield(0,S.WY)(G.icon,{height:ke,width:ke,fallbackPrefix:H.prefix})}</g>`);else if(G.iconText){Mt.html(`<g>${yield(0,S.WY)("blank",{height:ke,width:ke,fallbackPrefix:H.prefix})}</g>`);const de=Mt.append("g").append("foreignObject").attr("width",ke).attr("height",ke).append("div").attr("class","node-icon-text").attr("style",`height: ${ke}px;`).append("div").html((0,$.jZ)(G.iconText,Ft)),mr=parseInt(window.getComputedStyle(de.node(),null).getPropertyValue("font-size").replace(/\D/g,""))??16;de.attr("style",`-webkit-line-clamp: ${Math.floor((ke-2)/mr)};`)}else Mt.append("path").attr("class","node-bkg").attr("id","node-"+G.id).attr("d",`M0 ${ke} v${-ke} q0,-5 5,-5 h${ke} q5,0 5,5 v${ke} H0 Z`);lt.attr("id",`service-${G.id}`).attr("class","architecture-service");const{width:Zt,height:pe}=lt.node().getBBox();G.width=Zt,G.height=pe,rt.setElementForId(G.id,lt)}return 0});return function(rt,_t,ht){return it.apply(this,arguments)}}(),"drawServices"),ye=(0,A.K2)(function(it,rt,_t){_t.forEach(ht=>{const Ft=rt.append("g"),G=it.getConfigField("iconSize");Ft.append("g").append("rect").attr("id","node-"+ht.id).attr("fill-opacity","0").attr("width",G).attr("height",G),Ft.attr("class","architecture-junction");const{width:ke,height:Mt}=Ft._groups[0][0].getBBox();Ft.width=ke,Ft.height=Mt,it.setElementForId(ht.id,Ft)})},"drawJunctions");function le(it,rt,_t){it.forEach(ht=>{rt.add({group:"nodes",data:{type:"service",id:ht.id,icon:ht.icon,label:ht.title,parent:ht.in,width:_t.getConfigField("iconSize"),height:_t.getConfigField("iconSize")},classes:"node-service"})})}function Pe(it,rt,_t){it.forEach(ht=>{rt.add({group:"nodes",data:{type:"junction",id:ht.id,parent:ht.in,width:_t.getConfigField("iconSize"),height:_t.getConfigField("iconSize")},classes:"node-junction"})})}function oe(it,rt){rt.nodes().map(_t=>{const ht=X(_t);"group"!==ht.type&&(ht.x=_t.position().x,ht.y=_t.position().y,it.getElementById(ht.id).attr("transform","translate("+(ht.x||0)+","+(ht.y||0)+")"))})}function qe(it,rt){it.forEach(_t=>{rt.add({group:"nodes",data:{type:"group",id:_t.id,icon:_t.icon,label:_t.title,parent:_t.in},classes:"node-group"})})}function ze(it,rt){it.forEach(_t=>{const{lhsId:ht,rhsId:Ft,lhsInto:G,lhsGroup:lt,rhsInto:ke,lhsDir:Mt,rhsDir:Zt,rhsGroup:pe,title:Re}=_t,Ze=ra(_t.lhsDir,_t.rhsDir)?"segments":"straight";rt.add({group:"edges",data:{id:`${ht}-${Ft}`,label:Re,source:ht,sourceDir:Mt,sourceArrow:G,sourceGroup:lt,sourceEndpoint:"L"===Mt?"0 50%":"R"===Mt?"100% 50%":"T"===Mt?"50% 0":"50% 100%",target:Ft,targetDir:Zt,targetArrow:ke,targetGroup:pe,targetEndpoint:"L"===Zt?"0 50%":"R"===Zt?"100% 50%":"T"===Zt?"50% 0":"50% 100%"},classes:Ze})})}function Et(it,rt,_t){const ht=(0,A.K2)((ke,Mt)=>Object.entries(ke).reduce((Zt,[pe,Re])=>{let Ze=0;const de=Object.entries(Re);if(1===de.length)return Zt[pe]=de[0][1],Zt;for(let mr=0;mr<de.length-1;mr++)for(let xr=mr+1;xr<de.length;xr++){const[zt,Ae]=de[mr],[or,ve]=de[xr];_t[zt]?.[or]===Mt||"default"===zt||"default"===or?(Zt[pe]??=[],Zt[pe]=[...Zt[pe],...Ae,...ve]):(Zt[`${pe}-${Ze++}`]=Ae,Zt[`${pe}-${Ze++}`]=ve)}return Zt},{}),"flattenAlignments"),Ft=rt.map(ke=>{const Mt={},Zt={};return Object.entries(ke).forEach(([pe,[Re,Ze]])=>{const de=it.getNode(pe)?.in??"default";Mt[Ze]??={},Mt[Ze][de]??=[],Mt[Ze][de].push(pe),Zt[Re]??={},Zt[Re][de]??=[],Zt[Re][de].push(pe)}),{horiz:Object.values(ht(Mt,"horizontal")).filter(pe=>pe.length>1),vert:Object.values(ht(Zt,"vertical")).filter(pe=>pe.length>1)}}),[G,lt]=Ft.reduce(([ke,Mt],{horiz:Zt,vert:pe})=>[[...ke,...Zt],[...Mt,...pe]],[[],[]]);return{horizontal:G,vertical:lt}}function Tt(it,rt){const _t=[],ht=(0,A.K2)(G=>`${G[0]},${G[1]}`,"posToStr"),Ft=(0,A.K2)(G=>G.split(",").map(lt=>parseInt(lt)),"strToPos");return it.forEach(G=>{const lt=Object.fromEntries(Object.entries(G).map(([pe,Re])=>[ht(Re),pe])),ke=[ht([0,0])],Mt={},Zt={L:[-1,0],R:[1,0],T:[0,1],B:[0,-1]};for(;ke.length>0;){const pe=ke.shift();if(pe){Mt[pe]=1;const Re=lt[pe];if(Re){const Ze=Ft(pe);Object.entries(Zt).forEach(([de,mr])=>{const xr=ht([Ze[0]+mr[0],Ze[1]+mr[1]]),zt=lt[xr];zt&&!Mt[xr]&&(ke.push(xr),_t.push({[q[de]]:zt,[q[cr(de)]]:Re,gap:1.5*rt.getConfigField("iconSize")}))})}}}}),_t}function B(it,rt,_t,ht,Ft,{spatialMaps:G,groupAlignments:lt}){return new Promise(ke=>{const Mt=(0,dt.Ltv)("body").append("div").attr("id","cy").attr("style","display:none"),Zt=(0,wt.A)({container:document.getElementById("cy"),style:[{selector:"edge",style:{"curve-style":"straight",label:"data(label)","source-endpoint":"data(sourceEndpoint)","target-endpoint":"data(targetEndpoint)"}},{selector:"edge.segments",style:{"curve-style":"segments","segment-weights":"0","segment-distances":[.5],"edge-distances":"endpoints","source-endpoint":"data(sourceEndpoint)","target-endpoint":"data(targetEndpoint)"}},{selector:"node",style:{"compound-sizing-wrt-labels":"include"}},{selector:"node[label]",style:{"text-valign":"bottom","text-halign":"center","font-size":`${Ft.getConfigField("fontSize")}px`}},{selector:".node-service",style:{label:"data(label)",width:"data(width)",height:"data(height)"}},{selector:".node-junction",style:{width:"data(width)",height:"data(height)"}},{selector:".node-group",style:{padding:`${Ft.getConfigField("padding")}px`}}],layout:{name:"grid",boundingBox:{x1:0,x2:100,y1:0,y2:100}}});Mt.remove(),qe(_t,Zt),le(it,Zt,Ft),Pe(rt,Zt,Ft),ze(ht,Zt);const pe=Et(Ft,G,lt),Re=Tt(G,Ft),Ze=Zt.layout({name:"fcose",quality:"proof",styleEnabled:!1,animate:!1,nodeDimensionsIncludeLabels:!1,idealEdgeLength(de){const[mr,xr]=de.connectedNodes(),{parent:zt}=X(mr),{parent:Ae}=X(xr);return zt===Ae?1.5*Ft.getConfigField("iconSize"):.5*Ft.getConfigField("iconSize")},edgeElasticity(de){const[mr,xr]=de.connectedNodes(),{parent:zt}=X(mr),{parent:Ae}=X(xr);return zt===Ae?.45:.001},alignmentConstraint:pe,relativePlacementConstraint:Re});Ze.one("layoutstop",()=>{function de(mr,xr,zt,Ae){let or,ve;const{x:ce,y:Ee}=mr,{x:De,y:er}=xr;ve=(Ae-Ee+(ce-zt)*(Ee-er)/(ce-De))/Math.sqrt(1+Math.pow((Ee-er)/(ce-De),2)),or=Math.sqrt(Math.pow(Ae-Ee,2)+Math.pow(zt-ce,2)-Math.pow(ve,2)),or/=Math.sqrt(Math.pow(De-ce,2)+Math.pow(er-Ee,2));let Lr=(De-ce)*(Ae-Ee)-(er-Ee)*(zt-ce);switch(!0){case Lr>=0:Lr=1;break;case Lr<0:Lr=-1}let _e=(De-ce)*(zt-ce)+(er-Ee)*(Ae-Ee);switch(!0){case _e>=0:_e=1;break;case _e<0:_e=-1}return ve=Math.abs(ve)*Lr,or*=_e,{distances:ve,weights:or}}(0,A.K2)(de,"getSegmentWeights"),Zt.startBatch();for(const mr of Object.values(Zt.edges()))if(mr.data?.()){const{x:xr,y:zt}=mr.source().position(),{x:Ae,y:or}=mr.target().position();if(xr!==Ae&&zt!==or){const ve=mr.sourceEndpoint(),ce=mr.targetEndpoint(),{sourceDir:Ee}=we(mr),[De,er]=Vr(Ee)?[ve.x,ce.y]:[ce.x,ve.y],{weights:Qe,distances:Lr}=de(ve,ce,De,er);mr.style("segment-distances",Lr),mr.style("segment-weights",Qe)}}Zt.endBatch(),Ze.run()}),Ze.run(),Zt.ready(de=>{A.Rm.info("Ready",de),ke(Zt)})})}(0,S.pC)([{name:H.prefix,icons:H}]),wt.A.use(Ge),(0,A.K2)(le,"addServices"),(0,A.K2)(Pe,"addJunctions"),(0,A.K2)(oe,"positionNodes"),(0,A.K2)(qe,"addGroups"),(0,A.K2)(ze,"addEdges"),(0,A.K2)(Et,"getAlignments"),(0,A.K2)(Tt,"getRelativeConstraints"),(0,A.K2)(B,"layoutArchitecture");var et={draw:(0,A.K2)(function(){var it=(0,ot.A)(function*(rt,_t,ht,Ft){const G=Ft.db,lt=G.getServices(),ke=G.getJunctions(),Mt=G.getGroups(),Zt=G.getEdges(),pe=G.getDataStructures(),Re=(0,L.D)(_t),Ze=Re.append("g");Ze.attr("class","architecture-edges");const de=Re.append("g");de.attr("class","architecture-services");const mr=Re.append("g");mr.attr("class","architecture-groups"),yield $t(G,de,lt),ye(G,de,ke);const xr=yield B(lt,ke,Mt,Zt,G,pe);yield Nt(Ze,xr,G),yield St(mr,xr,G),oe(G,xr),(0,$.ot)(void 0,Re,G.getConfigField("padding"),G.getConfigField("useMaxWidth"))});return function(rt,_t,ht,Ft){return it.apply(this,arguments)}}(),"draw")},mt={parser:It,get db(){return new w},renderer:et,styles:V}},32810:(Ja,vr,R)=>{"use strict";R.r(vr),R.d(vr,{diagram:()=>qt});var ot=R(89204),ee=R(69664),L=R(80525),S=R(52052),Pt=R(79006),ut=R(32303),$=R(62233),A={showLegend:!0,ticks:5,max:null,min:0,graticule:"circle"},At={axes:[],curves:[],options:A},wt=structuredClone(At),Ge=Pt.UI.radar,dt=(0,ut.K2)(()=>(0,S.$t)({...Ge,...(0,Pt.zj)().radar}),"getConfig"),Rt=(0,ut.K2)(()=>wt.axes,"getAxes"),q=(0,ut.K2)(()=>wt.curves,"getCurves"),ar=(0,ut.K2)(()=>wt.options,"getOptions"),Ke=(0,ut.K2)(V=>{wt.axes=V.map(pt=>({name:pt.name,label:pt.label??pt.name}))},"setAxes"),cr=(0,ut.K2)(V=>{wt.curves=V.map(pt=>({name:pt.name,label:pt.label??pt.name,entries:Rr(pt.entries)}))},"setCurves"),Rr=(0,ut.K2)(V=>{if(null==V[0].axis)return V.map(H=>H.value);const pt=Rt();if(0===pt.length)throw new Error("Axes must be populated before curves for reference entries");return pt.map(H=>{const Nt=V.find(St=>St.axis?.$refText===H.name);if(void 0===Nt)throw new Error("Missing entry for axis "+H.label);return Nt.value})},"computeCurveEntries"),ra={getAxes:Rt,getCurves:q,getOptions:ar,setAxes:Ke,setCurves:cr,setOptions:(0,ut.K2)(V=>{const pt=V.reduce((H,Nt)=>(H[Nt.name]=Nt,H),{});wt.options={showLegend:pt.showLegend?.value??A.showLegend,ticks:pt.ticks?.value??A.ticks,max:pt.max?.value??A.max,min:pt.min?.value??A.min,graticule:pt.graticule?.value??A.graticule}},"setOptions"),getConfig:dt,clear:(0,ut.K2)(()=>{(0,Pt.IU)(),wt=structuredClone(At)},"clear"),setAccTitle:Pt.SV,getAccTitle:Pt.iN,setDiagramTitle:Pt.ke,getDiagramTitle:Pt.ab,getAccDescription:Pt.m7,setAccDescription:Pt.EI},Nr=(0,ut.K2)(V=>{(0,L.S)(V,ra);const{axes:pt,curves:H,options:Nt}=V;ra.setAxes(pt),ra.setCurves(H),ra.setOptions(Nt)},"populate"),Fr={parse:(0,ut.K2)(function(){var V=(0,ot.A)(function*(pt){const H=yield(0,$.qg)("radar",pt);ut.Rm.debug(H),Nr(H)});return function(pt){return V.apply(this,arguments)}}(),"parse")},Se=(0,ut.K2)((V,pt,H,Nt)=>{const St=Nt.db,$t=St.getAxes(),ye=St.getCurves(),le=St.getOptions(),Pe=St.getConfig(),oe=St.getDiagramTitle(),qe=(0,ee.D)(pt),ze=Or(qe,Pe),Et=le.max??Math.max(...ye.map(F=>Math.max(...F.entries))),Tt=le.min,B=Math.min(Pe.width,Pe.height)/2;je(ze,$t,B,le.ticks,le.graticule),z(ze,$t,B,Pe),ft(ze,$t,ye,Tt,Et,le.graticule,Pe),X(ze,ye,le.showLegend,Pe),ze.append("text").attr("class","radarTitle").text(oe).attr("x",0).attr("y",-Pe.height/2-Pe.marginTop)},"draw"),Or=(0,ut.K2)((V,pt)=>{const H=pt.width+pt.marginLeft+pt.marginRight,Nt=pt.height+pt.marginTop+pt.marginBottom,St_x=pt.marginLeft+pt.width/2,St_y=pt.marginTop+pt.height/2;return V.attr("viewbox",`0 0 ${H} ${Nt}`).attr("width",H).attr("height",Nt),V.append("g").attr("transform",`translate(${St_x}, ${St_y})`)},"drawFrame"),je=(0,ut.K2)((V,pt,H,Nt,St)=>{if("circle"===St)for(let $t=0;$t<Nt;$t++){const ye=H*($t+1)/Nt;V.append("circle").attr("r",ye).attr("class","radarGraticule")}else if("polygon"===St){const $t=pt.length;for(let ye=0;ye<Nt;ye++){const le=H*(ye+1)/Nt,Pe=pt.map((oe,qe)=>{const ze=2*qe*Math.PI/$t-Math.PI/2;return`${le*Math.cos(ze)},${le*Math.sin(ze)}`}).join(" ");V.append("polygon").attr("points",Pe).attr("class","radarGraticule")}}},"drawGraticule"),z=(0,ut.K2)((V,pt,H,Nt)=>{const St=pt.length;for(let $t=0;$t<St;$t++){const ye=pt[$t].label,le=2*$t*Math.PI/St-Math.PI/2;V.append("line").attr("x1",0).attr("y1",0).attr("x2",H*Nt.axisScaleFactor*Math.cos(le)).attr("y2",H*Nt.axisScaleFactor*Math.sin(le)).attr("class","radarAxisLine"),V.append("text").text(ye).attr("x",H*Nt.axisLabelFactor*Math.cos(le)).attr("y",H*Nt.axisLabelFactor*Math.sin(le)).attr("class","radarAxisLabel")}},"drawAxes");function ft(V,pt,H,Nt,St,$t,ye){const le=pt.length,Pe=Math.min(ye.width,ye.height)/2;H.forEach((oe,qe)=>{if(oe.entries.length!==le)return;const ze=oe.entries.map((Et,Tt)=>{const B=2*Math.PI*Tt/le-Math.PI/2,F=Bt(Et,Nt,St,Pe);return{x:F*Math.cos(B),y:F*Math.sin(B)}});"circle"===$t?V.append("path").attr("d",we(ze,ye.curveTension)).attr("class",`radarCurve-${qe}`):"polygon"===$t&&V.append("polygon").attr("points",ze.map(Et=>`${Et.x},${Et.y}`).join(" ")).attr("class",`radarCurve-${qe}`)})}function Bt(V,pt,H,Nt){return Nt*(Math.min(Math.max(V,pt),H)-pt)/(H-pt)}function we(V,pt){const H=V.length;let Nt=`M${V[0].x},${V[0].y}`;for(let St=0;St<H;St++){const $t=V[(St-1+H)%H],ye=V[St],le=V[(St+1)%H],Pe=V[(St+2)%H],oe={x:ye.x+(le.x-$t.x)*pt,y:ye.y+(le.y-$t.y)*pt},qe={x:le.x-(Pe.x-ye.x)*pt,y:le.y-(Pe.y-ye.y)*pt};Nt+=` C${oe.x},${oe.y} ${qe.x},${qe.y} ${le.x},${le.y}`}return`${Nt} Z`}function X(V,pt,H,Nt){if(!H)return;const St=3*(Nt.width/2+Nt.marginRight)/4,$t=3*-(Nt.height/2+Nt.marginTop)/4;pt.forEach((le,Pe)=>{const oe=V.append("g").attr("transform",`translate(${St}, ${$t+20*Pe})`);oe.append("rect").attr("width",12).attr("height",12).attr("class",`radarLegendBox-${Pe}`),oe.append("text").attr("x",16).attr("y",0).attr("class","radarLegendText").text(le.label)})}(0,ut.K2)(ft,"drawCurves"),(0,ut.K2)(Bt,"relativeRadius"),(0,ut.K2)(we,"closedRoundCurve"),(0,ut.K2)(X,"drawLegend");var ae={draw:Se},w=(0,ut.K2)((V,pt)=>{let H="";for(let Nt=0;Nt<V.THEME_COLOR_LIMIT;Nt++){const St=V[`cScale${Nt}`];H+=`\n\t\t.radarCurve-${Nt} {\n\t\t\tcolor: ${St};\n\t\t\tfill: ${St};\n\t\t\tfill-opacity: ${pt.curveOpacity};\n\t\t\tstroke: ${St};\n\t\t\tstroke-width: ${pt.curveStrokeWidth};\n\t\t}\n\t\t.radarLegendBox-${Nt} {\n\t\t\tfill: ${St};\n\t\t\tfill-opacity: ${pt.curveOpacity};\n\t\t\tstroke: ${St};\n\t\t}\n\t\t`}return H},"genIndexStyles"),re=(0,ut.K2)(V=>{const pt=(0,Pt.P$)(),H=(0,Pt.zj)(),Nt=(0,S.$t)(pt,H.themeVariables);return{themeVariables:Nt,radarOptions:(0,S.$t)(Nt.radar,V)}},"buildRadarStyleOptions"),qt={parser:Fr,db:ra,renderer:ae,styles:(0,ut.K2)(({radar:V}={})=>{const{themeVariables:pt,radarOptions:H}=re(V);return`\n\t.radarTitle {\n\t\tfont-size: ${pt.fontSize};\n\t\tcolor: ${pt.titleColor};\n\t\tdominant-baseline: hanging;\n\t\ttext-anchor: middle;\n\t}\n\t.radarAxisLine {\n\t\tstroke: ${H.axisColor};\n\t\tstroke-width: ${H.axisStrokeWidth};\n\t}\n\t.radarAxisLabel {\n\t\tdominant-baseline: middle;\n\t\ttext-anchor: middle;\n\t\tfont-size: ${H.axisLabelFontSize}px;\n\t\tcolor: ${H.axisColor};\n\t}\n\t.radarGraticule {\n\t\tfill: ${H.graticuleColor};\n\t\tfill-opacity: ${H.graticuleOpacity};\n\t\tstroke: ${H.graticuleColor};\n\t\tstroke-width: ${H.graticuleStrokeWidth};\n\t}\n\t.radarLegendText {\n\t\ttext-anchor: start;\n\t\tfont-size: ${H.legendFontSize}px;\n\t\tdominant-baseline: hanging;\n\t}\n\t${w(pt,H)}\n\t`},"styles")}},33350:(Ja,vr,R)=>{"use strict";R.r(vr),R.d(vr,{diagram:()=>ze});var ot=R(62045),ee=R(97787),L=R(79006),S=R(32303),Pt=R(40622),ut=function(){var Et=(0,S.K2)(function(G,lt,ke,Mt){for(ke=ke||{},Mt=G.length;Mt--;ke[G[Mt]]=lt);return ke},"o"),Tt=[6,8,10,11,12,14,16,17,18],B=[1,9],F=[1,10],et=[1,11],mt=[1,12],it=[1,13],rt=[1,14],_t={trace:(0,S.K2)(function(){},"trace"),yy:{},symbols_:{error:2,start:3,journey:4,document:5,EOF:6,line:7,SPACE:8,statement:9,NEWLINE:10,title:11,acc_title:12,acc_title_value:13,acc_descr:14,acc_descr_value:15,acc_descr_multiline_value:16,section:17,taskName:18,taskData:19,$accept:0,$end:1},terminals_:{2:"error",4:"journey",6:"EOF",8:"SPACE",10:"NEWLINE",11:"title",12:"acc_title",13:"acc_title_value",14:"acc_descr",15:"acc_descr_value",16:"acc_descr_multiline_value",17:"section",18:"taskName",19:"taskData"},productions_:[0,[3,3],[5,0],[5,2],[7,2],[7,1],[7,1],[7,1],[9,1],[9,2],[9,2],[9,1],[9,1],[9,2]],performAction:(0,S.K2)(function(lt,ke,Mt,Zt,pe,Re,Ze){var de=Re.length-1;switch(pe){case 1:return Re[de-1];case 2:case 6:case 7:this.$=[];break;case 3:Re[de-1].push(Re[de]),this.$=Re[de-1];break;case 4:case 5:this.$=Re[de];break;case 8:Zt.setDiagramTitle(Re[de].substr(6)),this.$=Re[de].substr(6);break;case 9:this.$=Re[de].trim(),Zt.setAccTitle(this.$);break;case 10:case 11:this.$=Re[de].trim(),Zt.setAccDescription(this.$);break;case 12:Zt.addSection(Re[de].substr(8)),this.$=Re[de].substr(8);break;case 13:Zt.addTask(Re[de-1],Re[de]),this.$="task"}},"anonymous"),table:[{3:1,4:[1,2]},{1:[3]},Et(Tt,[2,2],{5:3}),{6:[1,4],7:5,8:[1,6],9:7,10:[1,8],11:B,12:F,14:et,16:mt,17:it,18:rt},Et(Tt,[2,7],{1:[2,1]}),Et(Tt,[2,3]),{9:15,11:B,12:F,14:et,16:mt,17:it,18:rt},Et(Tt,[2,5]),Et(Tt,[2,6]),Et(Tt,[2,8]),{13:[1,16]},{15:[1,17]},Et(Tt,[2,11]),Et(Tt,[2,12]),{19:[1,18]},Et(Tt,[2,4]),Et(Tt,[2,9]),Et(Tt,[2,10]),Et(Tt,[2,13])],defaultActions:{},parseError:(0,S.K2)(function(lt,ke){if(!ke.recoverable){var Mt=new Error(lt);throw Mt.hash=ke,Mt}this.trace(lt)},"parseError"),parse:(0,S.K2)(function(lt){var ke=this,Mt=[0],Zt=[],pe=[null],Re=[],Ze=this.table,de="",mr=0,xr=0,zt=0,ve=Re.slice.call(arguments,1),ce=Object.create(this.lexer),Ee={yy:{}};for(var De in this.yy)Object.prototype.hasOwnProperty.call(this.yy,De)&&(Ee.yy[De]=this.yy[De]);ce.setInput(lt,Ee.yy),Ee.yy.lexer=ce,Ee.yy.parser=this,typeof ce.yylloc>"u"&&(ce.yylloc={});var er=ce.yylloc;Re.push(er);var Qe=ce.options&&ce.options.ranges;function _e(){var v;return"number"!=typeof(v=Zt.pop()||ce.lex()||1)&&(v instanceof Array&&(v=(Zt=v).pop()),v=ke.symbols_[v]||v),v}this.parseError="function"==typeof Ee.yy.parseError?Ee.yy.parseError:Object.getPrototypeOf(this).parseError,(0,S.K2)(function Lr(v){Mt.length=Mt.length-2*v,pe.length=pe.length-v,Re.length=Re.length-v},"popStack"),(0,S.K2)(_e,"lex");for(var Hr,sr,te,ne,ir,y,E,m,g={};;){if(this.defaultActions[te=Mt[Mt.length-1]]?ne=this.defaultActions[te]:((null===Hr||typeof Hr>"u")&&(Hr=_e()),ne=Ze[te]&&Ze[te][Hr]),typeof ne>"u"||!ne.length||!ne[0]){var D;for(y in m=[],Ze[te])this.terminals_[y]&&y>2&&m.push("'"+this.terminals_[y]+"'");D=ce.showPosition?"Parse error on line "+(mr+1)+":\n"+ce.showPosition()+"\nExpecting "+m.join(", ")+", got '"+(this.terminals_[Hr]||Hr)+"'":"Parse error on line "+(mr+1)+": Unexpected "+(1==Hr?"end of input":"'"+(this.terminals_[Hr]||Hr)+"'"),this.parseError(D,{text:ce.match,token:this.terminals_[Hr]||Hr,line:ce.yylineno,loc:er,expected:m})}if(ne[0]instanceof Array&&ne.length>1)throw new Error("Parse Error: multiple actions possible at state: "+te+", token: "+Hr);switch(ne[0]){case 1:Mt.push(Hr),pe.push(ce.yytext),Re.push(ce.yylloc),Mt.push(ne[1]),Hr=null,sr?(Hr=sr,sr=null):(xr=ce.yyleng,de=ce.yytext,mr=ce.yylineno,er=ce.yylloc,zt>0&&zt--);break;case 2:if(g.$=pe[pe.length-(E=this.productions_[ne[1]][1])],g._$={first_line:Re[Re.length-(E||1)].first_line,last_line:Re[Re.length-1].last_line,first_column:Re[Re.length-(E||1)].first_column,last_column:Re[Re.length-1].last_column},Qe&&(g._$.range=[Re[Re.length-(E||1)].range[0],Re[Re.length-1].range[1]]),typeof(ir=this.performAction.apply(g,[de,xr,mr,Ee.yy,ne[1],pe,Re].concat(ve)))<"u")return ir;E&&(Mt=Mt.slice(0,-1*E*2),pe=pe.slice(0,-1*E),Re=Re.slice(0,-1*E)),Mt.push(this.productions_[ne[1]][0]),pe.push(g.$),Re.push(g._$),Mt.push(Ze[Mt[Mt.length-2]][Mt[Mt.length-1]]);break;case 3:return!0}}return!0},"parse")};function Ft(){this.yy={}}return _t.lexer=function(){return{EOF:1,parseError:(0,S.K2)(function(ke,Mt){if(!this.yy.parser)throw new Error(ke);this.yy.parser.parseError(ke,Mt)},"parseError"),setInput:(0,S.K2)(function(lt,ke){return this.yy=ke||this.yy||{},this._input=lt,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},"setInput"),input:(0,S.K2)(function(){var lt=this._input[0];return this.yytext+=lt,this.yyleng++,this.offset++,this.match+=lt,this.matched+=lt,lt.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),lt},"input"),unput:(0,S.K2)(function(lt){var ke=lt.length,Mt=lt.split(/(?:\r\n?|\n)/g);this._input=lt+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-ke),this.offset-=ke;var Zt=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),Mt.length-1&&(this.yylineno-=Mt.length-1);var pe=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:Mt?(Mt.length===Zt.length?this.yylloc.first_column:0)+Zt[Zt.length-Mt.length].length-Mt[0].length:this.yylloc.first_column-ke},this.options.ranges&&(this.yylloc.range=[pe[0],pe[0]+this.yyleng-ke]),this.yyleng=this.yytext.length,this},"unput"),more:(0,S.K2)(function(){return this._more=!0,this},"more"),reject:(0,S.K2)(function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},"reject"),less:(0,S.K2)(function(lt){this.unput(this.match.slice(lt))},"less"),pastInput:(0,S.K2)(function(){var lt=this.matched.substr(0,this.matched.length-this.match.length);return(lt.length>20?"...":"")+lt.substr(-20).replace(/\n/g,"")},"pastInput"),upcomingInput:(0,S.K2)(function(){var lt=this.match;return lt.length<20&&(lt+=this._input.substr(0,20-lt.length)),(lt.substr(0,20)+(lt.length>20?"...":"")).replace(/\n/g,"")},"upcomingInput"),showPosition:(0,S.K2)(function(){var lt=this.pastInput(),ke=new Array(lt.length+1).join("-");return lt+this.upcomingInput()+"\n"+ke+"^"},"showPosition"),test_match:(0,S.K2)(function(lt,ke){var Mt,Zt,pe;if(this.options.backtrack_lexer&&(pe={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(pe.yylloc.range=this.yylloc.range.slice(0))),(Zt=lt[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=Zt.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:Zt?Zt[Zt.length-1].length-Zt[Zt.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+lt[0].length},this.yytext+=lt[0],this.match+=lt[0],this.matches=lt,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(lt[0].length),this.matched+=lt[0],Mt=this.performAction.call(this,this.yy,this,ke,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),Mt)return Mt;if(this._backtrack){for(var Re in pe)this[Re]=pe[Re];return!1}return!1},"test_match"),next:(0,S.K2)(function(){if(this.done)return this.EOF;var lt,ke,Mt,Zt;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var pe=this._currentRules(),Re=0;Re<pe.length;Re++)if((Mt=this._input.match(this.rules[pe[Re]]))&&(!ke||Mt[0].length>ke[0].length)){if(ke=Mt,Zt=Re,this.options.backtrack_lexer){if(!1!==(lt=this.test_match(Mt,pe[Re])))return lt;if(this._backtrack){ke=!1;continue}return!1}if(!this.options.flex)break}return ke?!1!==(lt=this.test_match(ke,pe[Zt]))&&lt:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},"next"),lex:(0,S.K2)(function(){return this.next()||this.lex()},"lex"),begin:(0,S.K2)(function(ke){this.conditionStack.push(ke)},"begin"),popState:(0,S.K2)(function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},"popState"),_currentRules:(0,S.K2)(function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},"_currentRules"),topState:(0,S.K2)(function(ke){return(ke=this.conditionStack.length-1-Math.abs(ke||0))>=0?this.conditionStack[ke]:"INITIAL"},"topState"),pushState:(0,S.K2)(function(ke){this.begin(ke)},"pushState"),stateStackSize:(0,S.K2)(function(){return this.conditionStack.length},"stateStackSize"),options:{"case-insensitive":!0},performAction:(0,S.K2)(function(ke,Mt,Zt,pe){switch(Zt){case 0:case 1:case 3:case 4:break;case 2:return 10;case 5:return 4;case 6:return 11;case 7:return this.begin("acc_title"),12;case 8:return this.popState(),"acc_title_value";case 9:return this.begin("acc_descr"),14;case 10:return this.popState(),"acc_descr_value";case 11:this.begin("acc_descr_multiline");break;case 12:this.popState();break;case 13:return"acc_descr_multiline_value";case 14:return 17;case 15:return 18;case 16:return 19;case 17:return":";case 18:return 6;case 19:return"INVALID"}},"anonymous"),rules:[/^(?:%(?!\{)[^\n]*)/i,/^(?:[^\}]%%[^\n]*)/i,/^(?:[\n]+)/i,/^(?:\s+)/i,/^(?:#[^\n]*)/i,/^(?:journey\b)/i,/^(?:title\s[^#\n;]+)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:section\s[^#:\n;]+)/i,/^(?:[^#:\n;]+)/i,/^(?::[^#\n;]+)/i,/^(?::)/i,/^(?:$)/i,/^(?:.)/i],conditions:{acc_descr_multiline:{rules:[12,13],inclusive:!1},acc_descr:{rules:[10],inclusive:!1},acc_title:{rules:[8],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,5,6,7,9,11,14,15,16,17,18,19],inclusive:!0}}}}(),(0,S.K2)(Ft,"Parser"),Ft.prototype=_t,_t.Parser=Ft,new Ft}();ut.parser=ut;var $=ut,A="",At=[],wt=[],Ge=[],dt=(0,S.K2)(function(){At.length=0,wt.length=0,A="",Ge.length=0,(0,L.IU)()},"clear"),Rt=(0,S.K2)(function(Et){A=Et,At.push(Et)},"addSection"),q=(0,S.K2)(function(){return At},"getSections"),ar=(0,S.K2)(function(){let Et=wr(),B=0;for(;!Et&&B<100;)Et=wr(),B++;return wt.push(...Ge),wt},"getTasks"),Ke=(0,S.K2)(function(){const Et=[];return wt.forEach(B=>{B.people&&Et.push(...B.people)}),[...new Set(Et)].sort()},"updateActors"),cr=(0,S.K2)(function(Et,Tt){const B=Tt.substr(1).split(":");let F=0,et=[];1===B.length?(F=Number(B[0]),et=[]):(F=Number(B[0]),et=B[1].split(","));const mt=et.map(rt=>rt.trim());Ge.push({section:A,type:A,people:mt,task:Et,score:F})},"addTask"),Rr=(0,S.K2)(function(Et){wt.push({section:A,type:A,description:Et,task:Et,classes:[]})},"addTaskOrg"),wr=(0,S.K2)(function(){const Et=(0,S.K2)(function(B){return Ge[B].processed},"compileTask");let Tt=!0;for(const[B,F]of Ge.entries())Et(B),Tt=Tt&&F.processed;return Tt},"compileTasks"),Vr=(0,S.K2)(function(){return Ke()},"getActors"),ra={getConfig:(0,S.K2)(()=>(0,L.D7)().journey,"getConfig"),clear:dt,setDiagramTitle:L.ke,getDiagramTitle:L.ab,setAccTitle:L.SV,getAccTitle:L.iN,setAccDescription:L.EI,getAccDescription:L.m7,addSection:Rt,getSections:q,getTasks:ar,addTask:cr,addTaskOrg:Rr,getActors:Vr},Fr=(0,S.K2)(Et=>`.label {\n    font-family: ${Et.fontFamily};\n    color: ${Et.textColor};\n  }\n  .mouth {\n    stroke: #666;\n  }\n\n  line {\n    stroke: ${Et.textColor}\n  }\n\n  .legend {\n    fill: ${Et.textColor};\n    font-family: ${Et.fontFamily};\n  }\n\n  .label text {\n    fill: #333;\n  }\n  .label {\n    color: ${Et.textColor}\n  }\n\n  .face {\n    ${Et.faceColor?`fill: ${Et.faceColor}`:"fill: #FFF8DC"};\n    stroke: #999;\n  }\n\n  .node rect,\n  .node circle,\n  .node ellipse,\n  .node polygon,\n  .node path {\n    fill: ${Et.mainBkg};\n    stroke: ${Et.nodeBorder};\n    stroke-width: 1px;\n  }\n\n  .node .label {\n    text-align: center;\n  }\n  .node.clickable {\n    cursor: pointer;\n  }\n\n  .arrowheadPath {\n    fill: ${Et.arrowheadColor};\n  }\n\n  .edgePath .path {\n    stroke: ${Et.lineColor};\n    stroke-width: 1.5px;\n  }\n\n  .flowchart-link {\n    stroke: ${Et.lineColor};\n    fill: none;\n  }\n\n  .edgeLabel {\n    background-color: ${Et.edgeLabelBackground};\n    rect {\n      opacity: 0.5;\n    }\n    text-align: center;\n  }\n\n  .cluster rect {\n  }\n\n  .cluster text {\n    fill: ${Et.titleColor};\n  }\n\n  div.mermaidTooltip {\n    position: absolute;\n    text-align: center;\n    max-width: 200px;\n    padding: 2px;\n    font-family: ${Et.fontFamily};\n    font-size: 12px;\n    background: ${Et.tertiaryColor};\n    border: 1px solid ${Et.border2};\n    border-radius: 2px;\n    pointer-events: none;\n    z-index: 100;\n  }\n\n  .task-type-0, .section-type-0  {\n    ${Et.fillType0?`fill: ${Et.fillType0}`:""};\n  }\n  .task-type-1, .section-type-1  {\n    ${Et.fillType0?`fill: ${Et.fillType1}`:""};\n  }\n  .task-type-2, .section-type-2  {\n    ${Et.fillType0?`fill: ${Et.fillType2}`:""};\n  }\n  .task-type-3, .section-type-3  {\n    ${Et.fillType0?`fill: ${Et.fillType3}`:""};\n  }\n  .task-type-4, .section-type-4  {\n    ${Et.fillType0?`fill: ${Et.fillType4}`:""};\n  }\n  .task-type-5, .section-type-5  {\n    ${Et.fillType0?`fill: ${Et.fillType5}`:""};\n  }\n  .task-type-6, .section-type-6  {\n    ${Et.fillType0?`fill: ${Et.fillType6}`:""};\n  }\n  .task-type-7, .section-type-7  {\n    ${Et.fillType0?`fill: ${Et.fillType7}`:""};\n  }\n\n  .actor-0 {\n    ${Et.actor0?`fill: ${Et.actor0}`:""};\n  }\n  .actor-1 {\n    ${Et.actor1?`fill: ${Et.actor1}`:""};\n  }\n  .actor-2 {\n    ${Et.actor2?`fill: ${Et.actor2}`:""};\n  }\n  .actor-3 {\n    ${Et.actor3?`fill: ${Et.actor3}`:""};\n  }\n  .actor-4 {\n    ${Et.actor4?`fill: ${Et.actor4}`:""};\n  }\n  .actor-5 {\n    ${Et.actor5?`fill: ${Et.actor5}`:""};\n  }\n  ${(0,ee.o)()}\n`,"getStyles"),Se=(0,S.K2)(function(Et,Tt){return(0,ot.tk)(Et,Tt)},"drawRect"),Or=(0,S.K2)(function(Et,Tt){const F=Et.append("circle").attr("cx",Tt.cx).attr("cy",Tt.cy).attr("class","face").attr("r",15).attr("stroke-width",2).attr("overflow","visible"),et=Et.append("g");function mt(_t){const ht=(0,Pt.JLW)().startAngle(Math.PI/2).endAngle(Math.PI/2*3).innerRadius(7.5).outerRadius(6.8181818181818175);_t.append("path").attr("class","mouth").attr("d",ht).attr("transform","translate("+Tt.cx+","+(Tt.cy+2)+")")}function it(_t){const ht=(0,Pt.JLW)().startAngle(3*Math.PI/2).endAngle(Math.PI/2*5).innerRadius(7.5).outerRadius(6.8181818181818175);_t.append("path").attr("class","mouth").attr("d",ht).attr("transform","translate("+Tt.cx+","+(Tt.cy+7)+")")}function rt(_t){_t.append("line").attr("class","mouth").attr("stroke",2).attr("x1",Tt.cx-5).attr("y1",Tt.cy+7).attr("x2",Tt.cx+5).attr("y2",Tt.cy+7).attr("class","mouth").attr("stroke-width","1px").attr("stroke","#666")}return et.append("circle").attr("cx",Tt.cx-5).attr("cy",Tt.cy-5).attr("r",1.5).attr("stroke-width",2).attr("fill","#666").attr("stroke","#666"),et.append("circle").attr("cx",Tt.cx+5).attr("cy",Tt.cy-5).attr("r",1.5).attr("stroke-width",2).attr("fill","#666").attr("stroke","#666"),(0,S.K2)(mt,"smile"),(0,S.K2)(it,"sad"),(0,S.K2)(rt,"ambivalent"),Tt.score>3?mt(et):Tt.score<3?it(et):rt(et),F},"drawFace"),je=(0,S.K2)(function(Et,Tt){const B=Et.append("circle");return B.attr("cx",Tt.cx),B.attr("cy",Tt.cy),B.attr("class","actor-"+Tt.pos),B.attr("fill",Tt.fill),B.attr("stroke",Tt.stroke),B.attr("r",Tt.r),void 0!==B.class&&B.attr("class",B.class),void 0!==Tt.title&&B.append("title").text(Tt.title),B},"drawCircle"),z=(0,S.K2)(function(Et,Tt){return(0,ot.m)(Et,Tt)},"drawText"),ft=(0,S.K2)(function(Et,Tt){function B(et,mt,it,rt,_t){return et+","+mt+" "+(et+it)+","+mt+" "+(et+it)+","+(mt+rt-_t)+" "+(et+it-1.2*_t)+","+(mt+rt)+" "+et+","+(mt+rt)}(0,S.K2)(B,"genPoints");const F=Et.append("polygon");F.attr("points",B(Tt.x,Tt.y,50,20,7)),F.attr("class","labelBox"),Tt.y=Tt.y+Tt.labelMargin,Tt.x=Tt.x+.5*Tt.labelMargin,z(Et,Tt)},"drawLabel"),Bt=(0,S.K2)(function(Et,Tt,B){const F=Et.append("g"),et=(0,ot.PB)();et.x=Tt.x,et.y=Tt.y,et.fill=Tt.fill,et.width=B.width*Tt.taskCount+B.diagramMarginX*(Tt.taskCount-1),et.height=B.height,et.class="journey-section section-type-"+Tt.num,et.rx=3,et.ry=3,Se(F,et),w(B)(Tt.text,F,et.x,et.y,et.width,et.height,{class:"journey-section section-type-"+Tt.num},B,Tt.colour)},"drawSection"),we=-1,X=(0,S.K2)(function(Et,Tt,B){const F=Tt.x+B.width/2,et=Et.append("g");we++,et.append("line").attr("id","task"+we).attr("x1",F).attr("y1",Tt.y).attr("x2",F).attr("y2",450).attr("class","task-line").attr("stroke-width","1px").attr("stroke-dasharray","4 2").attr("stroke","#666"),Or(et,{cx:F,cy:300+30*(5-Tt.score),score:Tt.score});const it=(0,ot.PB)();it.x=Tt.x,it.y=Tt.y,it.fill=Tt.fill,it.width=B.width,it.height=B.height,it.class="task task-type-"+Tt.num,it.rx=3,it.ry=3,Se(et,it);let rt=Tt.x+14;Tt.people.forEach(_t=>{je(et,{cx:rt,cy:Tt.y,r:7,fill:Tt.actors[_t].color,stroke:"#000",title:_t,pos:Tt.actors[_t].position}),rt+=10}),w(B)(Tt.task,et,it.x,it.y,it.width,it.height,{class:"task"},B,Tt.colour)},"drawTask"),ae=(0,S.K2)(function(Et,Tt){(0,ot.lC)(Et,Tt)},"drawBackgroundRect"),w=function(){function Et(et,mt,it,rt,_t,ht,Ft,G){F(mt.append("text").attr("x",it+_t/2).attr("y",rt+ht/2+5).style("font-color",G).style("text-anchor","middle").text(et),Ft)}function Tt(et,mt,it,rt,_t,ht,Ft,G,lt){const{taskFontSize:ke,taskFontFamily:Mt}=G,Zt=et.split(/<br\s*\/?>/gi);for(let pe=0;pe<Zt.length;pe++){const Re=pe*ke-ke*(Zt.length-1)/2,Ze=mt.append("text").attr("x",it+_t/2).attr("y",rt).attr("fill",lt).style("text-anchor","middle").style("font-size",ke).style("font-family",Mt);Ze.append("tspan").attr("x",it+_t/2).attr("dy",Re).text(Zt[pe]),Ze.attr("y",rt+ht/2).attr("dominant-baseline","central").attr("alignment-baseline","central"),F(Ze,Ft)}}function B(et,mt,it,rt,_t,ht,Ft,G){const lt=mt.append("switch"),Mt=lt.append("foreignObject").attr("x",it).attr("y",rt).attr("width",_t).attr("height",ht).attr("position","fixed").append("xhtml:div").style("display","table").style("height","100%").style("width","100%");Mt.append("div").attr("class","label").style("display","table-cell").style("text-align","center").style("vertical-align","middle").text(et),Tt(et,lt,it,rt,_t,ht,Ft,G),F(Mt,Ft)}function F(et,mt){for(const it in mt)it in mt&&et.attr(it,mt[it])}return(0,S.K2)(Et,"byText"),(0,S.K2)(Tt,"byTspan"),(0,S.K2)(B,"byFo"),(0,S.K2)(F,"_setTextAttrs"),function(et){return"fo"===et.textPlacement?B:"old"===et.textPlacement?Et:Tt}}(),It={drawRect:Se,drawCircle:je,drawSection:Bt,drawText:z,drawLabel:ft,drawTask:X,drawBackgroundRect:ae,initGraphics:(0,S.K2)(function(Et){Et.append("defs").append("marker").attr("id","arrowhead").attr("refX",5).attr("refY",2).attr("markerWidth",6).attr("markerHeight",4).attr("orient","auto").append("path").attr("d","M 0,0 V 4 L6,2 Z")},"initGraphics")},qt=(0,S.K2)(function(Et){Object.keys(Et).forEach(function(B){Nt[B]=Et[B]})},"setConf"),V={},pt=0;function H(Et){const Tt=(0,L.D7)().journey,B=Tt.maxLabelWidth;pt=0;let F=60;Object.keys(V).forEach(et=>{It.drawCircle(Et,{cx:20,cy:F,r:7,fill:V[et].color,stroke:"#000",pos:V[et].position});let rt=Et.append("text").attr("visibility","hidden").text(et);const _t=rt.node().getBoundingClientRect().width;rt.remove();let ht=[];if(_t<=B)ht=[et];else{const Ft=et.split(" ");let G="";rt=Et.append("text").attr("visibility","hidden"),Ft.forEach(lt=>{const ke=G?`${G} ${lt}`:lt;if(rt.text(ke),rt.node().getBoundingClientRect().width>B){if(G&&ht.push(G),G=lt,rt.text(lt),rt.node().getBoundingClientRect().width>B){let Zt="";for(const pe of lt)Zt+=pe,rt.text(Zt+"-"),rt.node().getBoundingClientRect().width>B&&(ht.push(Zt.slice(0,-1)+"-"),Zt=pe);G=Zt}}else G=ke}),G&&ht.push(G),rt.remove()}ht.forEach((Ft,G)=>{const Mt=It.drawText(Et,{x:40,y:F+7+20*G,fill:"#666",text:Ft,textMargin:Tt.boxTextMargin??5}).node().getBoundingClientRect().width;Mt>pt&&Mt>Tt.leftMargin-Mt&&(pt=Mt)}),F+=Math.max(20,20*ht.length)})}(0,S.K2)(H,"drawActorLegend");var Nt=(0,L.D7)().journey,St=0,$t=(0,S.K2)(function(Et,Tt,B,F){const et=(0,L.D7)(),mt=et.journey.titleColor,it=et.journey.titleFontSize,rt=et.journey.titleFontFamily,_t=et.securityLevel;let ht;"sandbox"===_t&&(ht=(0,Pt.Ltv)("#i"+Tt));const Ft=(0,Pt.Ltv)("sandbox"===_t?ht.nodes()[0].contentDocument.body:"body");ye.init();const G=Ft.select("#"+Tt);It.initGraphics(G);const lt=F.db.getTasks(),ke=F.db.getDiagramTitle(),Mt=F.db.getActors();for(const mr in V)delete V[mr];let Zt=0;Mt.forEach(mr=>{V[mr]={color:Nt.actorColours[Zt%Nt.actorColours.length],position:Zt},Zt++}),H(G),ye.insert(0,0,St=Nt.leftMargin+pt,50*Object.keys(V).length),oe(G,lt,0);const pe=ye.getBounds();ke&&G.append("text").text(ke).attr("x",St).attr("font-size",it).attr("font-weight","bold").attr("y",25).attr("fill",mt).attr("font-family",rt);const Re=pe.stopy-pe.starty+2*Nt.diagramMarginY,Ze=St+pe.stopx+2*Nt.diagramMarginX;(0,L.a$)(G,Re,Ze,Nt.useMaxWidth),G.append("line").attr("x1",St).attr("y1",4*Nt.height).attr("x2",Ze-St-4).attr("y2",4*Nt.height).attr("stroke-width",4).attr("stroke","black").attr("marker-end","url(#arrowhead)");const de=ke?70:0;G.attr("viewBox",`${pe.startx} -25 ${Ze} ${Re+de}`),G.attr("preserveAspectRatio","xMinYMin meet"),G.attr("height",Re+de+25)},"draw"),ye={data:{startx:void 0,stopx:void 0,starty:void 0,stopy:void 0},verticalPos:0,sequenceItems:[],init:(0,S.K2)(function(){this.sequenceItems=[],this.data={startx:void 0,stopx:void 0,starty:void 0,stopy:void 0},this.verticalPos=0},"init"),updateVal:(0,S.K2)(function(Et,Tt,B,F){Et[Tt]=void 0===Et[Tt]?B:F(B,Et[Tt])},"updateVal"),updateBounds:(0,S.K2)(function(Et,Tt,B,F){const et=(0,L.D7)().journey,mt=this;let it=0;function rt(_t){return(0,S.K2)(function(Ft){it++;const G=mt.sequenceItems.length-it+1;mt.updateVal(Ft,"starty",Tt-G*et.boxMargin,Math.min),mt.updateVal(Ft,"stopy",F+G*et.boxMargin,Math.max),mt.updateVal(ye.data,"startx",Et-G*et.boxMargin,Math.min),mt.updateVal(ye.data,"stopx",B+G*et.boxMargin,Math.max),"activation"!==_t&&(mt.updateVal(Ft,"startx",Et-G*et.boxMargin,Math.min),mt.updateVal(Ft,"stopx",B+G*et.boxMargin,Math.max),mt.updateVal(ye.data,"starty",Tt-G*et.boxMargin,Math.min),mt.updateVal(ye.data,"stopy",F+G*et.boxMargin,Math.max))},"updateItemBounds")}(0,S.K2)(rt,"updateFn"),this.sequenceItems.forEach(rt())},"updateBounds"),insert:(0,S.K2)(function(Et,Tt,B,F){const et=Math.min(Et,B),mt=Math.max(Et,B),it=Math.min(Tt,F),rt=Math.max(Tt,F);this.updateVal(ye.data,"startx",et,Math.min),this.updateVal(ye.data,"starty",it,Math.min),this.updateVal(ye.data,"stopx",mt,Math.max),this.updateVal(ye.data,"stopy",rt,Math.max),this.updateBounds(et,it,mt,rt)},"insert"),bumpVerticalPos:(0,S.K2)(function(Et){this.verticalPos=this.verticalPos+Et,this.data.stopy=this.verticalPos},"bumpVerticalPos"),getVerticalPos:(0,S.K2)(function(){return this.verticalPos},"getVerticalPos"),getBounds:(0,S.K2)(function(){return this.data},"getBounds")},le=Nt.sectionFills,Pe=Nt.sectionColours,oe=(0,S.K2)(function(Et,Tt,B){const F=(0,L.D7)().journey;let et="";const it=B+(2*F.height+F.diagramMarginY);let rt=0,_t="#CCC",ht="black",Ft=0;for(const[G,lt]of Tt.entries()){if(et!==lt.section){_t=le[rt%le.length],Ft=rt%le.length,ht=Pe[rt%Pe.length];let Mt=0;const Zt=lt.section;for(let Re=G;Re<Tt.length&&Tt[Re].section==Zt;Re++)Mt+=1;It.drawSection(Et,{x:G*F.taskMargin+G*F.width+St,y:50,text:lt.section,fill:_t,num:Ft,colour:ht,taskCount:Mt},F),et=lt.section,rt++}const ke=lt.people.reduce((Mt,Zt)=>(V[Zt]&&(Mt[Zt]=V[Zt]),Mt),{});lt.x=G*F.taskMargin+G*F.width+St,lt.y=it,lt.width=F.diagramMarginX,lt.height=F.diagramMarginY,lt.colour=ht,lt.fill=_t,lt.num=Ft,lt.actors=ke,It.drawTask(Et,lt,F),ye.insert(lt.x,lt.y,lt.x+lt.width+F.taskMargin,450)}},"drawTasks"),qe={setConf:qt,draw:$t},ze={parser:$,db:ra,renderer:qe,styles:Fr,init:(0,S.K2)(Et=>{qe.setConf(Et.journey),ra.clear()},"init")}},36384:(Ja,vr,R)=>{"use strict";R.d(vr,{Nq:()=>L,RI:()=>ut,hq:()=>ee});var ot=R(32303),ee={aggregation:17.25,extension:17.25,composition:17.25,dependency:6,lollipop:13.5,arrow_point:4},L={arrow_point:9,arrow_cross:12.5,arrow_circle:12.5};function S($,A){if(void 0===$||void 0===A)return{angle:0,deltaX:0,deltaY:0};$=Pt($),A=Pt(A);const[At,wt]=[$.x,$.y],[Ge,dt]=[A.x,A.y],Rt=Ge-At,q=dt-wt;return{angle:Math.atan(q/Rt),deltaX:Rt,deltaY:q}}(0,ot.K2)(S,"calculateDeltaAndAngle");var Pt=(0,ot.K2)($=>Array.isArray($)?{x:$[0],y:$[1]}:$,"pointTransformer"),ut=(0,ot.K2)($=>({x:(0,ot.K2)(function(A,At,wt){let Ge=0;const dt=Pt(wt[0]).x<Pt(wt[wt.length-1]).x?"left":"right";if(0===At&&Object.hasOwn(ee,$.arrowTypeStart)){const{angle:Vr,deltaX:ra}=S(wt[0],wt[1]);Ge=ee[$.arrowTypeStart]*Math.cos(Vr)*(ra>=0?1:-1)}else if(At===wt.length-1&&Object.hasOwn(ee,$.arrowTypeEnd)){const{angle:Vr,deltaX:ra}=S(wt[wt.length-1],wt[wt.length-2]);Ge=ee[$.arrowTypeEnd]*Math.cos(Vr)*(ra>=0?1:-1)}const Rt=Math.abs(Pt(A).x-Pt(wt[wt.length-1]).x),q=Math.abs(Pt(A).y-Pt(wt[wt.length-1]).y),ar=Math.abs(Pt(A).x-Pt(wt[0]).x),Ke=Math.abs(Pt(A).y-Pt(wt[0]).y),cr=ee[$.arrowTypeStart],Rr=ee[$.arrowTypeEnd];if(Rt<Rr&&Rt>0&&q<Rr){let Vr=Rr+1-Rt;Vr*="right"===dt?-1:1,Ge-=Vr}if(ar<cr&&ar>0&&Ke<cr){let Vr=cr+1-ar;Vr*="right"===dt?-1:1,Ge+=Vr}return Pt(A).x+Ge},"x"),y:(0,ot.K2)(function(A,At,wt){let Ge=0;const dt=Pt(wt[0]).y<Pt(wt[wt.length-1]).y?"down":"up";if(0===At&&Object.hasOwn(ee,$.arrowTypeStart)){const{angle:Vr,deltaY:ra}=S(wt[0],wt[1]);Ge=ee[$.arrowTypeStart]*Math.abs(Math.sin(Vr))*(ra>=0?1:-1)}else if(At===wt.length-1&&Object.hasOwn(ee,$.arrowTypeEnd)){const{angle:Vr,deltaY:ra}=S(wt[wt.length-1],wt[wt.length-2]);Ge=ee[$.arrowTypeEnd]*Math.abs(Math.sin(Vr))*(ra>=0?1:-1)}const Rt=Math.abs(Pt(A).y-Pt(wt[wt.length-1]).y),q=Math.abs(Pt(A).x-Pt(wt[wt.length-1]).x),ar=Math.abs(Pt(A).y-Pt(wt[0]).y),Ke=Math.abs(Pt(A).x-Pt(wt[0]).x),cr=ee[$.arrowTypeStart],Rr=ee[$.arrowTypeEnd];if(Rt<Rr&&Rt>0&&q<Rr){let Vr=Rr+1-Rt;Vr*="up"===dt?-1:1,Ge-=Vr}if(ar<cr&&ar>0&&Ke<cr){let Vr=cr+1-ar;Vr*="up"===dt?-1:1,Ge+=Vr}return Pt(A).y+Ge},"y")}),"getLineFunctionsWithOffset")},37355:function(Ja){Ja.exports=function(){"use strict";return function(vr,R){var ot=R.prototype,ee=ot.format;ot.format=function(L){var S=this,Pt=this.$locale();if(!this.isValid())return ee.bind(this)(L);var ut=this.$utils(),$=(L||"YYYY-MM-DDTHH:mm:ssZ").replace(/\[([^\]]+)]|Q|wo|ww|w|WW|W|zzz|z|gggg|GGGG|Do|X|x|k{1,2}|S/g,function(A){switch(A){case"Q":return Math.ceil((S.$M+1)/3);case"Do":return Pt.ordinal(S.$D);case"gggg":return S.weekYear();case"GGGG":return S.isoWeekYear();case"wo":return Pt.ordinal(S.week(),"W");case"w":case"ww":return ut.s(S.week(),"w"===A?1:2,"0");case"W":case"WW":return ut.s(S.isoWeek(),"W"===A?1:2,"0");case"k":case"kk":return ut.s(String(0===S.$H?24:S.$H),"k"===A?1:2,"0");case"X":return Math.floor(S.$d.getTime()/1e3);case"x":return S.$d.getTime();case"z":return"["+S.offsetName()+"]";case"zzz":return"["+S.offsetName("long")+"]";default:return A}});return ee.bind(this)($)}}}()},38676:(Ja,vr,R)=>{"use strict";R.r(vr),R.d(vr,{diagram:()=>q});var ot=R(53102),Rt=(R(5675),R(8086),R(72271),R(98954),R(36384),R(87452),R(32239),R(19753),R(59355),R(52052),R(79006),R(32303)),q={parser:ot.Zk,get db(){return new ot.u4(2)},renderer:ot.q7,styles:ot.tM,init:(0,Rt.K2)(ar=>{ar.state||(ar.state={}),ar.state.arrowMarkerAbsolute=ar.arrowMarkerAbsolute},"init")}},38710:(Ja,vr,R)=>{"use strict";R.r(vr),R.d(vr,{diagram:()=>ir});var ot=R(89204),ee=R(45027),L=R(5675),S=R(8086),Pt=R(72271),Rt=(R(98954),R(36384),R(87452),R(32239),R(19753),R(59355),R(52052),R(79006)),q=R(32303);const cr=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i,ra=function Vr(g){if(!function Rr(g){return"string"==typeof g&&cr.test(g)}(g))throw TypeError("Invalid UUID");let y;return Uint8Array.of((y=parseInt(g.slice(0,8),16))>>>24,y>>>16&255,y>>>8&255,255&y,(y=parseInt(g.slice(9,13),16))>>>8,255&y,(y=parseInt(g.slice(14,18),16))>>>8,255&y,(y=parseInt(g.slice(19,23),16))>>>8,255&y,(y=parseInt(g.slice(24,36),16))/1099511627776&255,y/4294967296&255,y>>>24&255,y>>>16&255,y>>>8&255,255&y)},Nr=[];for(let g=0;g<256;++g)Nr.push((g+256).toString(16).slice(1));function Fr(g,y=0){return(Nr[g[y+0]]+Nr[g[y+1]]+Nr[g[y+2]]+Nr[g[y+3]]+"-"+Nr[g[y+4]]+Nr[g[y+5]]+"-"+Nr[g[y+6]]+Nr[g[y+7]]+"-"+Nr[g[y+8]]+Nr[g[y+9]]+"-"+Nr[g[y+10]]+Nr[g[y+11]]+Nr[g[y+12]]+Nr[g[y+13]]+Nr[g[y+14]]+Nr[g[y+15]]).toLowerCase()}let je;const z=new Uint8Array(16);function pt(g){return 14+(g+64>>>9<<4)+1}function St(g,y){const E=(65535&g)+(65535&y);return(g>>16)+(y>>16)+(E>>16)<<16|65535&E}function ye(g,y,E,I,m,D){return St(function $t(g,y){return g<<y|g>>>32-y}(St(St(y,g),St(I,D)),m),E)}function le(g,y,E,I,m,D,v){return ye(y&E|~y&I,g,y,m,D,v)}function Pe(g,y,E,I,m,D,v){return ye(y&I|E&~I,g,y,m,D,v)}function oe(g,y,E,I,m,D,v){return ye(y^E^I,g,y,m,D,v)}function qe(g,y,E,I,m,D,v){return ye(E^(y|~I),g,y,m,D,v)}const ze=function qt(g){const y=function Nt(g){if(0===g.length)return new Uint32Array;const y=new Uint32Array(pt(8*g.length)).fill(0);for(let E=0;E<g.length;E++)y[E>>2]|=(255&g[E])<<E%4*8;return y}(g);return function V(g){const y=new Uint8Array(4*g.length);for(let E=0;E<4*g.length;E++)y[E]=g[E>>2]>>>E%4*8&255;return y}(function H(g,y){const E=new Uint32Array(pt(y)).fill(0);E.set(g),E[y>>5]|=128<<y%32,E[E.length-1]=y,g=E;let I=1732584193,m=-271733879,D=-1732584194,v=271733878;for(let b=0;b<g.length;b+=16){const C=I,P=m,Q=D,xt=v;I=le(I,m,D,v,g[b],7,-680876936),v=le(v,I,m,D,g[b+1],12,-389564586),D=le(D,v,I,m,g[b+2],17,606105819),m=le(m,D,v,I,g[b+3],22,-1044525330),I=le(I,m,D,v,g[b+4],7,-176418897),v=le(v,I,m,D,g[b+5],12,1200080426),D=le(D,v,I,m,g[b+6],17,-1473231341),m=le(m,D,v,I,g[b+7],22,-45705983),I=le(I,m,D,v,g[b+8],7,1770035416),v=le(v,I,m,D,g[b+9],12,-1958414417),D=le(D,v,I,m,g[b+10],17,-42063),m=le(m,D,v,I,g[b+11],22,-1990404162),I=le(I,m,D,v,g[b+12],7,1804603682),v=le(v,I,m,D,g[b+13],12,-40341101),D=le(D,v,I,m,g[b+14],17,-1502002290),m=le(m,D,v,I,g[b+15],22,1236535329),I=Pe(I,m,D,v,g[b+1],5,-165796510),v=Pe(v,I,m,D,g[b+6],9,-1069501632),D=Pe(D,v,I,m,g[b+11],14,643717713),m=Pe(m,D,v,I,g[b],20,-373897302),I=Pe(I,m,D,v,g[b+5],5,-701558691),v=Pe(v,I,m,D,g[b+10],9,38016083),D=Pe(D,v,I,m,g[b+15],14,-660478335),m=Pe(m,D,v,I,g[b+4],20,-405537848),I=Pe(I,m,D,v,g[b+9],5,568446438),v=Pe(v,I,m,D,g[b+14],9,-1019803690),D=Pe(D,v,I,m,g[b+3],14,-187363961),m=Pe(m,D,v,I,g[b+8],20,1163531501),I=Pe(I,m,D,v,g[b+13],5,-1444681467),v=Pe(v,I,m,D,g[b+2],9,-51403784),D=Pe(D,v,I,m,g[b+7],14,1735328473),m=Pe(m,D,v,I,g[b+12],20,-1926607734),I=oe(I,m,D,v,g[b+5],4,-378558),v=oe(v,I,m,D,g[b+8],11,-2022574463),D=oe(D,v,I,m,g[b+11],16,1839030562),m=oe(m,D,v,I,g[b+14],23,-35309556),I=oe(I,m,D,v,g[b+1],4,-1530992060),v=oe(v,I,m,D,g[b+4],11,1272893353),D=oe(D,v,I,m,g[b+7],16,-155497632),m=oe(m,D,v,I,g[b+10],23,-1094730640),I=oe(I,m,D,v,g[b+13],4,681279174),v=oe(v,I,m,D,g[b],11,-358537222),D=oe(D,v,I,m,g[b+3],16,-722521979),m=oe(m,D,v,I,g[b+6],23,76029189),I=oe(I,m,D,v,g[b+9],4,-640364487),v=oe(v,I,m,D,g[b+12],11,-421815835),D=oe(D,v,I,m,g[b+15],16,530742520),m=oe(m,D,v,I,g[b+2],23,-995338651),I=qe(I,m,D,v,g[b],6,-198630844),v=qe(v,I,m,D,g[b+7],10,1126891415),D=qe(D,v,I,m,g[b+14],15,-1416354905),m=qe(m,D,v,I,g[b+5],21,-57434055),I=qe(I,m,D,v,g[b+12],6,1700485571),v=qe(v,I,m,D,g[b+3],10,-1894986606),D=qe(D,v,I,m,g[b+10],15,-1051523),m=qe(m,D,v,I,g[b+1],21,-2054922799),I=qe(I,m,D,v,g[b+8],6,1873313359),v=qe(v,I,m,D,g[b+15],10,-30611744),D=qe(D,v,I,m,g[b+6],15,-1560198380),m=qe(m,D,v,I,g[b+13],21,1309151649),I=qe(I,m,D,v,g[b+4],6,-145523070),v=qe(v,I,m,D,g[b+11],10,-1120210379),D=qe(D,v,I,m,g[b+2],15,718787259),m=qe(m,D,v,I,g[b+9],21,-343485551),I=St(I,C),m=St(m,P),D=St(D,Q),v=St(v,xt)}return Uint32Array.of(I,m,D,v)}(y,8*g.length))},Tt="6ba7b810-9dad-11d1-80b4-00c04fd430c8",B="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function F(g,y,E,I,m,D){const v="string"==typeof E?function Et(g){g=unescape(encodeURIComponent(g));const y=new Uint8Array(g.length);for(let E=0;E<g.length;++E)y[E]=g.charCodeAt(E);return y}(E):E,b="string"==typeof I?ra(I):I;if("string"==typeof I&&(I=ra(I)),16!==I?.length)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let C=new Uint8Array(16+v.length);if(C.set(b),C.set(v,b.length),C=y(C),C[6]=15&C[6]|g,C[8]=63&C[8]|128,m){D=D||0;for(let P=0;P<16;++P)m[D+P]=C[P];return m}return Fr(C)}function et(g,y,E,I){return F(48,ze,g,y,E,I)}et.DNS=Tt,et.URL=B;const rt={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)},ht=function _t(g,y,E){if(rt.randomUUID&&!y&&!g)return rt.randomUUID();const I=(g=g||{}).random??g.rng?.()??function ft(){if(!je){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");je=crypto.getRandomValues.bind(crypto)}return je(z)}();if(I.length<16)throw new Error("Random bytes length must be >= 16");if(I[6]=15&I[6]|64,I[8]=63&I[8]|128,y){if((E=E||0)<0||E+16>y.length)throw new RangeError(`UUID byte range ${E}:${E+15} is out of buffer bounds`);for(let m=0;m<16;++m)y[E+m]=I[m];return y}return Fr(I)};function Ft(g,y,E,I){switch(g){case 0:return y&E^~y&I;case 1:case 3:return y^E^I;case 2:return y&E^y&I^E&I}}function G(g,y){return g<<y|g>>>32-y}const ke=function lt(g){const y=[1518500249,1859775393,2400959708,3395469782],E=[1732584193,4023233417,2562383102,271733878,3285377520],I=new Uint8Array(g.length+1);I.set(g),I[g.length]=128,g=I;const D=Math.ceil((g.length/4+2)/16),v=new Array(D);for(let b=0;b<D;++b){const C=new Uint32Array(16);for(let P=0;P<16;++P)C[P]=g[64*b+4*P]<<24|g[64*b+4*P+1]<<16|g[64*b+4*P+2]<<8|g[64*b+4*P+3];v[b]=C}v[D-1][14]=8*(g.length-1)/Math.pow(2,32),v[D-1][14]=Math.floor(v[D-1][14]),v[D-1][15]=8*(g.length-1)&4294967295;for(let b=0;b<D;++b){const C=new Uint32Array(80);for(let Ut=0;Ut<16;++Ut)C[Ut]=v[b][Ut];for(let Ut=16;Ut<80;++Ut)C[Ut]=G(C[Ut-3]^C[Ut-8]^C[Ut-14]^C[Ut-16],1);let P=E[0],Q=E[1],xt=E[2],Vt=E[3],jt=E[4];for(let Ut=0;Ut<80;++Ut){const Wt=Math.floor(Ut/20),xe=G(P,5)+Ft(Wt,Q,xt,Vt)+jt+y[Wt]+C[Ut]>>>0;jt=Vt,Vt=xt,xt=G(Q,30)>>>0,Q=P,P=xe}E[0]=E[0]+P>>>0,E[1]=E[1]+Q>>>0,E[2]=E[2]+xt>>>0,E[3]=E[3]+Vt>>>0,E[4]=E[4]+jt>>>0}return Uint8Array.of(E[0]>>24,E[0]>>16,E[0]>>8,E[0],E[1]>>24,E[1]>>16,E[1]>>8,E[1],E[2]>>24,E[2]>>16,E[2]>>8,E[2],E[3]>>24,E[3]>>16,E[3]>>8,E[3],E[4]>>24,E[4]>>16,E[4]>>8,E[4])};function Mt(g,y,E,I){return F(80,ke,g,y,E,I)}Mt.DNS=Tt,Mt.URL=B;var De,Ee=R(79687),er=function(){var g=(0,q.K2)(function(hr,_r,$e,He){for($e=$e||{},He=hr.length;He--;$e[hr[He]]=_r);return $e},"o"),y=[1,4],E=[1,13],I=[1,12],m=[1,15],D=[1,16],v=[1,20],b=[1,19],C=[6,7,8],P=[1,26],Q=[1,24],xt=[1,25],Vt=[6,7,11],jt=[1,6,13,15,16,19,22],Ut=[1,33],Wt=[1,34],xe=[1,6,7,11,13,15,16,19,22],Xe={trace:(0,q.K2)(function(){},"trace"),yy:{},symbols_:{error:2,start:3,mindMap:4,spaceLines:5,SPACELINE:6,NL:7,MINDMAP:8,document:9,stop:10,EOF:11,statement:12,SPACELIST:13,node:14,ICON:15,CLASS:16,nodeWithId:17,nodeWithoutId:18,NODE_DSTART:19,NODE_DESCR:20,NODE_DEND:21,NODE_ID:22,$accept:0,$end:1},terminals_:{2:"error",6:"SPACELINE",7:"NL",8:"MINDMAP",11:"EOF",13:"SPACELIST",15:"ICON",16:"CLASS",19:"NODE_DSTART",20:"NODE_DESCR",21:"NODE_DEND",22:"NODE_ID"},productions_:[0,[3,1],[3,2],[5,1],[5,2],[5,2],[4,2],[4,3],[10,1],[10,1],[10,1],[10,2],[10,2],[9,3],[9,2],[12,2],[12,2],[12,2],[12,1],[12,1],[12,1],[12,1],[12,1],[14,1],[14,1],[18,3],[17,1],[17,4]],performAction:(0,q.K2)(function(_r,$e,He,Ar,kr,zr,Er){var Jr=zr.length-1;switch(kr){case 6:case 7:return Ar;case 8:Ar.getLogger().trace("Stop NL ");break;case 9:Ar.getLogger().trace("Stop EOF ");break;case 11:Ar.getLogger().trace("Stop NL2 ");break;case 12:Ar.getLogger().trace("Stop EOF2 ");break;case 15:Ar.getLogger().info("Node: ",zr[Jr].id),Ar.addNode(zr[Jr-1].length,zr[Jr].id,zr[Jr].descr,zr[Jr].type);break;case 16:Ar.getLogger().trace("Icon: ",zr[Jr]),Ar.decorateNode({icon:zr[Jr]});break;case 17:case 21:Ar.decorateNode({class:zr[Jr]});break;case 18:Ar.getLogger().trace("SPACELIST");break;case 19:Ar.getLogger().trace("Node: ",zr[Jr].id),Ar.addNode(0,zr[Jr].id,zr[Jr].descr,zr[Jr].type);break;case 20:Ar.decorateNode({icon:zr[Jr]});break;case 25:Ar.getLogger().trace("node found ..",zr[Jr-2]),this.$={id:zr[Jr-1],descr:zr[Jr-1],type:Ar.getType(zr[Jr-2],zr[Jr])};break;case 26:this.$={id:zr[Jr],descr:zr[Jr],type:Ar.nodeType.DEFAULT};break;case 27:Ar.getLogger().trace("node found ..",zr[Jr-3]),this.$={id:zr[Jr-3],descr:zr[Jr-1],type:Ar.getType(zr[Jr-2],zr[Jr])}}},"anonymous"),table:[{3:1,4:2,5:3,6:[1,5],8:y},{1:[3]},{1:[2,1]},{4:6,6:[1,7],7:[1,8],8:y},{6:E,7:[1,10],9:9,12:11,13:I,14:14,15:m,16:D,17:17,18:18,19:v,22:b},g(C,[2,3]),{1:[2,2]},g(C,[2,4]),g(C,[2,5]),{1:[2,6],6:E,12:21,13:I,14:14,15:m,16:D,17:17,18:18,19:v,22:b},{6:E,9:22,12:11,13:I,14:14,15:m,16:D,17:17,18:18,19:v,22:b},{6:P,7:Q,10:23,11:xt},g(Vt,[2,22],{17:17,18:18,14:27,15:[1,28],16:[1,29],19:v,22:b}),g(Vt,[2,18]),g(Vt,[2,19]),g(Vt,[2,20]),g(Vt,[2,21]),g(Vt,[2,23]),g(Vt,[2,24]),g(Vt,[2,26],{19:[1,30]}),{20:[1,31]},{6:P,7:Q,10:32,11:xt},{1:[2,7],6:E,12:21,13:I,14:14,15:m,16:D,17:17,18:18,19:v,22:b},g(jt,[2,14],{7:Ut,11:Wt}),g(xe,[2,8]),g(xe,[2,9]),g(xe,[2,10]),g(Vt,[2,15]),g(Vt,[2,16]),g(Vt,[2,17]),{20:[1,35]},{21:[1,36]},g(jt,[2,13],{7:Ut,11:Wt}),g(xe,[2,11]),g(xe,[2,12]),{21:[1,37]},g(Vt,[2,25]),g(Vt,[2,27])],defaultActions:{2:[2,1],6:[2,2]},parseError:(0,q.K2)(function(_r,$e){if(!$e.recoverable){var He=new Error(_r);throw He.hash=$e,He}this.trace(_r)},"parseError"),parse:(0,q.K2)(function(_r){var $e=this,He=[0],Ar=[],kr=[null],zr=[],Er=this.table,Jr="",Br=0,ha=0,ia=0,lr=zr.slice.call(arguments,1),dr=Object.create(this.lexer),W={yy:{}};for(var Yt in this.yy)Object.prototype.hasOwnProperty.call(this.yy,Yt)&&(W.yy[Yt]=this.yy[Yt]);dr.setInput(_r,W.yy),W.yy.lexer=dr,W.yy.parser=this,typeof dr.yylloc>"u"&&(dr.yylloc={});var Ye=dr.yylloc;zr.push(Ye);var Ne=dr.options&&dr.options.ranges;function yr(){var nr;return"number"!=typeof(nr=Ar.pop()||dr.lex()||1)&&(nr instanceof Array&&(nr=(Ar=nr).pop()),nr=$e.symbols_[nr]||nr),nr}this.parseError="function"==typeof W.yy.parseError?W.yy.parseError:Object.getPrototypeOf(this).parseError,(0,q.K2)(function Tr(nr){He.length=He.length-2*nr,kr.length=kr.length-nr,zr.length=zr.length-nr},"popStack"),(0,q.K2)(yr,"lex");for(var da,Pa,Ia,Wa,ba,Sa,ea,pr,sa={};;){if(this.defaultActions[Ia=He[He.length-1]]?Wa=this.defaultActions[Ia]:((null===da||typeof da>"u")&&(da=yr()),Wa=Er[Ia]&&Er[Ia][da]),typeof Wa>"u"||!Wa.length||!Wa[0]){var Ua;for(Sa in pr=[],Er[Ia])this.terminals_[Sa]&&Sa>2&&pr.push("'"+this.terminals_[Sa]+"'");Ua=dr.showPosition?"Parse error on line "+(Br+1)+":\n"+dr.showPosition()+"\nExpecting "+pr.join(", ")+", got '"+(this.terminals_[da]||da)+"'":"Parse error on line "+(Br+1)+": Unexpected "+(1==da?"end of input":"'"+(this.terminals_[da]||da)+"'"),this.parseError(Ua,{text:dr.match,token:this.terminals_[da]||da,line:dr.yylineno,loc:Ye,expected:pr})}if(Wa[0]instanceof Array&&Wa.length>1)throw new Error("Parse Error: multiple actions possible at state: "+Ia+", token: "+da);switch(Wa[0]){case 1:He.push(da),kr.push(dr.yytext),zr.push(dr.yylloc),He.push(Wa[1]),da=null,Pa?(da=Pa,Pa=null):(ha=dr.yyleng,Jr=dr.yytext,Br=dr.yylineno,Ye=dr.yylloc,ia>0&&ia--);break;case 2:if(sa.$=kr[kr.length-(ea=this.productions_[Wa[1]][1])],sa._$={first_line:zr[zr.length-(ea||1)].first_line,last_line:zr[zr.length-1].last_line,first_column:zr[zr.length-(ea||1)].first_column,last_column:zr[zr.length-1].last_column},Ne&&(sa._$.range=[zr[zr.length-(ea||1)].range[0],zr[zr.length-1].range[1]]),typeof(ba=this.performAction.apply(sa,[Jr,ha,Br,W.yy,Wa[1],kr,zr].concat(lr)))<"u")return ba;ea&&(He=He.slice(0,-1*ea*2),kr=kr.slice(0,-1*ea),zr=zr.slice(0,-1*ea)),He.push(this.productions_[Wa[1]][0]),kr.push(sa.$),zr.push(sa._$),He.push(Er[He[He.length-2]][He[He.length-1]]);break;case 3:return!0}}return!0},"parse")};function gr(){this.yy={}}return Xe.lexer=function(){return{EOF:1,parseError:(0,q.K2)(function($e,He){if(!this.yy.parser)throw new Error($e);this.yy.parser.parseError($e,He)},"parseError"),setInput:(0,q.K2)(function(_r,$e){return this.yy=$e||this.yy||{},this._input=_r,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},"setInput"),input:(0,q.K2)(function(){var _r=this._input[0];return this.yytext+=_r,this.yyleng++,this.offset++,this.match+=_r,this.matched+=_r,_r.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),_r},"input"),unput:(0,q.K2)(function(_r){var $e=_r.length,He=_r.split(/(?:\r\n?|\n)/g);this._input=_r+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-$e),this.offset-=$e;var Ar=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),He.length-1&&(this.yylineno-=He.length-1);var kr=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:He?(He.length===Ar.length?this.yylloc.first_column:0)+Ar[Ar.length-He.length].length-He[0].length:this.yylloc.first_column-$e},this.options.ranges&&(this.yylloc.range=[kr[0],kr[0]+this.yyleng-$e]),this.yyleng=this.yytext.length,this},"unput"),more:(0,q.K2)(function(){return this._more=!0,this},"more"),reject:(0,q.K2)(function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},"reject"),less:(0,q.K2)(function(_r){this.unput(this.match.slice(_r))},"less"),pastInput:(0,q.K2)(function(){var _r=this.matched.substr(0,this.matched.length-this.match.length);return(_r.length>20?"...":"")+_r.substr(-20).replace(/\n/g,"")},"pastInput"),upcomingInput:(0,q.K2)(function(){var _r=this.match;return _r.length<20&&(_r+=this._input.substr(0,20-_r.length)),(_r.substr(0,20)+(_r.length>20?"...":"")).replace(/\n/g,"")},"upcomingInput"),showPosition:(0,q.K2)(function(){var _r=this.pastInput(),$e=new Array(_r.length+1).join("-");return _r+this.upcomingInput()+"\n"+$e+"^"},"showPosition"),test_match:(0,q.K2)(function(_r,$e){var He,Ar,kr;if(this.options.backtrack_lexer&&(kr={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(kr.yylloc.range=this.yylloc.range.slice(0))),(Ar=_r[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=Ar.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:Ar?Ar[Ar.length-1].length-Ar[Ar.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+_r[0].length},this.yytext+=_r[0],this.match+=_r[0],this.matches=_r,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(_r[0].length),this.matched+=_r[0],He=this.performAction.call(this,this.yy,this,$e,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),He)return He;if(this._backtrack){for(var zr in kr)this[zr]=kr[zr];return!1}return!1},"test_match"),next:(0,q.K2)(function(){if(this.done)return this.EOF;var _r,$e,He,Ar;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var kr=this._currentRules(),zr=0;zr<kr.length;zr++)if((He=this._input.match(this.rules[kr[zr]]))&&(!$e||He[0].length>$e[0].length)){if($e=He,Ar=zr,this.options.backtrack_lexer){if(!1!==(_r=this.test_match(He,kr[zr])))return _r;if(this._backtrack){$e=!1;continue}return!1}if(!this.options.flex)break}return $e?!1!==(_r=this.test_match($e,kr[Ar]))&&_r:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},"next"),lex:(0,q.K2)(function(){return this.next()||this.lex()},"lex"),begin:(0,q.K2)(function($e){this.conditionStack.push($e)},"begin"),popState:(0,q.K2)(function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},"popState"),_currentRules:(0,q.K2)(function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},"_currentRules"),topState:(0,q.K2)(function($e){return($e=this.conditionStack.length-1-Math.abs($e||0))>=0?this.conditionStack[$e]:"INITIAL"},"topState"),pushState:(0,q.K2)(function($e){this.begin($e)},"pushState"),stateStackSize:(0,q.K2)(function(){return this.conditionStack.length},"stateStackSize"),options:{"case-insensitive":!0},performAction:(0,q.K2)(function($e,He,Ar,kr){switch(Ar){case 0:return $e.getLogger().trace("Found comment",He.yytext),6;case 1:return 8;case 2:this.begin("CLASS");break;case 3:return this.popState(),16;case 4:case 23:case 26:this.popState();break;case 5:$e.getLogger().trace("Begin icon"),this.begin("ICON");break;case 6:return $e.getLogger().trace("SPACELINE"),6;case 7:return 7;case 8:return 15;case 9:$e.getLogger().trace("end icon"),this.popState();break;case 10:return $e.getLogger().trace("Exploding node"),this.begin("NODE"),19;case 11:return $e.getLogger().trace("Cloud"),this.begin("NODE"),19;case 12:return $e.getLogger().trace("Explosion Bang"),this.begin("NODE"),19;case 13:return $e.getLogger().trace("Cloud Bang"),this.begin("NODE"),19;case 14:case 15:case 16:case 17:return this.begin("NODE"),19;case 18:return 13;case 19:return 22;case 20:return 11;case 21:this.begin("NSTR2");break;case 22:return"NODE_DESCR";case 24:$e.getLogger().trace("Starting NSTR"),this.begin("NSTR");break;case 25:return $e.getLogger().trace("description:",He.yytext),"NODE_DESCR";case 27:return this.popState(),$e.getLogger().trace("node end ))"),"NODE_DEND";case 28:return this.popState(),$e.getLogger().trace("node end )"),"NODE_DEND";case 29:return this.popState(),$e.getLogger().trace("node end ...",He.yytext),"NODE_DEND";case 30:case 33:case 34:return this.popState(),$e.getLogger().trace("node end (("),"NODE_DEND";case 31:case 32:return this.popState(),$e.getLogger().trace("node end (-"),"NODE_DEND";case 35:case 36:return $e.getLogger().trace("Long description:",He.yytext),20}},"anonymous"),rules:[/^(?:\s*%%.*)/i,/^(?:mindmap\b)/i,/^(?::::)/i,/^(?:.+)/i,/^(?:\n)/i,/^(?:::icon\()/i,/^(?:[\s]+[\n])/i,/^(?:[\n]+)/i,/^(?:[^\)]+)/i,/^(?:\))/i,/^(?:-\))/i,/^(?:\(-)/i,/^(?:\)\))/i,/^(?:\))/i,/^(?:\(\()/i,/^(?:\{\{)/i,/^(?:\()/i,/^(?:\[)/i,/^(?:[\s]+)/i,/^(?:[^\(\[\n\)\{\}]+)/i,/^(?:$)/i,/^(?:["][`])/i,/^(?:[^`"]+)/i,/^(?:[`]["])/i,/^(?:["])/i,/^(?:[^"]+)/i,/^(?:["])/i,/^(?:[\)]\))/i,/^(?:[\)])/i,/^(?:[\]])/i,/^(?:\}\})/i,/^(?:\(-)/i,/^(?:-\))/i,/^(?:\(\()/i,/^(?:\()/i,/^(?:[^\)\]\(\}]+)/i,/^(?:.+(?!\(\())/i],conditions:{CLASS:{rules:[3,4],inclusive:!1},ICON:{rules:[8,9],inclusive:!1},NSTR2:{rules:[22,23],inclusive:!1},NSTR:{rules:[25,26],inclusive:!1},NODE:{rules:[21,24,27,28,29,30,31,32,33,34,35,36],inclusive:!1},INITIAL:{rules:[0,1,2,5,6,7,10,11,12,13,14,15,16,17,18,19,20],inclusive:!0}}}}(),(0,q.K2)(gr,"Parser"),gr.prototype=Xe,Xe.Parser=gr,new gr}();er.parser=er;var Qe=er,Lr={DEFAULT:0,NO_BORDER:0,ROUNDED_RECT:1,RECT:2,CIRCLE:3,CLOUD:4,BANG:5,HEXAGON:6},_e=(class{constructor(){this.nodes=[],this.count=0,this.elements={},this.getLogger=this.getLogger.bind(this),this.nodeType=Lr,this.clear(),this.getType=this.getType.bind(this),this.getElementById=this.getElementById.bind(this),this.getParent=this.getParent.bind(this),this.getMindmap=this.getMindmap.bind(this),this.addNode=this.addNode.bind(this),this.decorateNode=this.decorateNode.bind(this)}clear(){this.nodes=[],this.count=0,this.elements={},this.baseLevel=void 0}getParent(g){for(let y=this.nodes.length-1;y>=0;y--)if(this.nodes[y].level<g)return this.nodes[y];return null}getMindmap(){return this.nodes.length>0?this.nodes[0]:null}addNode(g,y,E,I){q.Rm.info("addNode",g,y,E,I);let m=!1;0===this.nodes.length?(this.baseLevel=g,g=0,m=!0):void 0!==this.baseLevel&&(g-=this.baseLevel,m=!1);const D=(0,Rt.D7)();let v=D.mindmap?.padding??Rt.UI.mindmap.padding;switch(I){case this.nodeType.ROUNDED_RECT:case this.nodeType.RECT:case this.nodeType.HEXAGON:v*=2}const b={id:this.count++,nodeId:(0,Rt.jZ)(y,D),level:g,descr:(0,Rt.jZ)(E,D),type:I,children:[],width:D.mindmap?.maxNodeWidth??Rt.UI.mindmap.maxNodeWidth,padding:v,isRoot:m},C=this.getParent(g);if(C)C.children.push(b),this.nodes.push(b);else{if(!m)throw new Error(`There can be only one root. No parent could be found for ("${b.descr}")`);this.nodes.push(b)}}getType(g,y){switch(q.Rm.debug("In get type",g,y),g){case"[":return this.nodeType.RECT;case"(":return")"===y?this.nodeType.ROUNDED_RECT:this.nodeType.CLOUD;case"((":return this.nodeType.CIRCLE;case")":return this.nodeType.CLOUD;case"))":return this.nodeType.BANG;case"{{":return this.nodeType.HEXAGON;default:return this.nodeType.DEFAULT}}setElementForId(g,y){this.elements[g]=y}getElementById(g){return this.elements[g]}decorateNode(g){if(!g)return;const y=(0,Rt.D7)(),E=this.nodes[this.nodes.length-1];g.icon&&(E.icon=(0,Rt.jZ)(g.icon,y)),g.class&&(E.class=(0,Rt.jZ)(g.class,y))}type2Str(g){switch(g){case this.nodeType.DEFAULT:return"no-border";case this.nodeType.RECT:return"rect";case this.nodeType.ROUNDED_RECT:return"rounded-rect";case this.nodeType.CIRCLE:return"circle";case this.nodeType.CLOUD:return"cloud";case this.nodeType.BANG:return"bang";case this.nodeType.HEXAGON:return"hexgon";default:return"no-border"}}assignSections(g,y){if(g.section=0===g.level?void 0:y,g.children)for(const[E,I]of g.children.entries())this.assignSections(I,0===g.level?E:y)}flattenNodes(g,y){const E=["mindmap-node"];!0===g.isRoot?E.push("section-root","section--1"):void 0!==g.section&&E.push(`section-${g.section}`),g.class&&E.push(g.class);const I=E.join(" "),m=(0,q.K2)(v=>{switch(v){case Lr.CIRCLE:return"mindmapCircle";case Lr.RECT:return"rect";case Lr.ROUNDED_RECT:return"rounded";case Lr.CLOUD:return"cloud";case Lr.BANG:return"bang";case Lr.HEXAGON:return"hexagon";case Lr.DEFAULT:return"defaultMindmapNode";default:return"rect"}},"getShapeFromType"),D={id:g.id.toString(),domId:"node_"+g.id.toString(),label:g.descr,isGroup:!1,shape:m(g.type),width:g.width,height:g.height??0,padding:g.padding,cssClasses:I,cssStyles:[],look:"default",icon:g.icon,x:g.x,y:g.y,level:g.level,nodeId:g.nodeId,type:g.type,section:g.section};if(y.push(D),g.children)for(const v of g.children)this.flattenNodes(v,y)}generateEdges(g,y){if(g.children)for(const E of g.children){let I="edge";void 0!==E.section&&(I+=` section-edge-${E.section}`),I+=` edge-depth-${g.level+1}`;const D={id:`edge_${g.id}_${E.id}`,start:g.id.toString(),end:E.id.toString(),type:"normal",curve:"basis",thickness:"normal",look:"default",classes:I,depth:g.level,section:E.section};y.push(D),this.generateEdges(E,y)}}getData(){const g=this.getMindmap(),y=(0,Rt.D7)(),m=y;if(void 0!==(0,Rt.TM)().layout||(m.layout="cose-bilkent"),!g)return{nodes:[],edges:[],config:m};q.Rm.debug("getData: mindmapRoot",g,y),this.assignSections(g);const D=[],v=[];this.flattenNodes(g,D),this.generateEdges(g,v),q.Rm.debug(`getData: processed ${D.length} nodes and ${v.length} edges`);const b=new Map;for(const C of D)b.set(C.id,{shape:C.shape,width:C.width,height:C.height,padding:C.padding});return{nodes:D,edges:v,config:m,rootNode:g,markers:["point"],direction:"TB",nodeSpacing:50,rankSpacing:50,shapes:Object.fromEntries(b),type:"mindmap",diagramId:"mindmap-"+ht()}}getLogger(){return q.Rm}static#t=De=()=>((0,ee.A)(this,"MindmapDB"),(0,q.K2)(this,"MindmapDB"),this)},De()),sr={draw:(0,q.K2)(function(){var g=(0,ot.A)(function*(y,E,I,m){q.Rm.debug("Rendering mindmap diagram\n"+y);const D=m.db,v=D.getData(),b=(0,L.A)(E,v.config.securityLevel);v.type=m.type,v.layoutAlgorithm=(0,Pt.q7)(v.config.layout,{fallback:"cose-bilkent"}),v.diagramId=E,D.getMindmap()&&(v.nodes.forEach(P=>{"rounded"===P.shape?(P.radius=15,P.taper=15,P.stroke="none",P.width=0,P.padding=15):"circle"===P.shape?P.padding=10:"rect"===P.shape&&(P.width=0,P.padding=10)}),yield(0,Pt.XX)(v,b),(0,S.P)(b,v.config.mindmap?.padding??Rt.UI.mindmap.padding,"mindmapDiagram",v.config.mindmap?.useMaxWidth??Rt.UI.mindmap.useMaxWidth))});return function(y,E,I,m){return g.apply(this,arguments)}}(),"draw")},te=(0,q.K2)(g=>{let y="";for(let E=0;E<g.THEME_COLOR_LIMIT;E++)g["lineColor"+E]=g["lineColor"+E]||g["cScaleInv"+E],g["lineColor"+E]=(0,Ee.HD)(g["lineColor"+E])?(0,Ee.a)(g["lineColor"+E],20):(0,Ee.e$)(g["lineColor"+E],20);for(let E=0;E<g.THEME_COLOR_LIMIT;E++)y+=`\n    .section-${E-1} rect, .section-${E-1} path, .section-${E-1} circle, .section-${E-1} polygon, .section-${E-1} path  {\n      fill: ${g["cScale"+E]};\n    }\n    .section-${E-1} text {\n     fill: ${g["cScaleLabel"+E]};\n    }\n    .node-icon-${E-1} {\n      font-size: 40px;\n      color: ${g["cScaleLabel"+E]};\n    }\n    .section-edge-${E-1}{\n      stroke: ${g["cScale"+E]};\n    }\n    .edge-depth-${E-1}{\n      stroke-width: ${""+(17-3*E)};\n    }\n    .section-${E-1} line {\n      stroke: ${g["cScaleInv"+E]} ;\n      stroke-width: 3;\n    }\n\n    .disabled, .disabled circle, .disabled text {\n      fill: lightgray;\n    }\n    .disabled text {\n      fill: #efefef;\n    }\n    `;return y},"genSections"),be=(0,q.K2)(g=>`\n  .edge {\n    stroke-width: 3;\n  }\n  ${te(g)}\n  .section-root rect, .section-root path, .section-root circle, .section-root polygon  {\n    fill: ${g.git0};\n  }\n  .section-root text {\n    fill: ${g.gitBranchLabel0};\n  }\n  .section-root span {\n    color: ${g.gitBranchLabel0};\n  }\n  .section-2 span {\n    color: ${g.gitBranchLabel0};\n  }\n  .icon-container {\n    height:100%;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n  }\n  .edge {\n    fill: none;\n  }\n  .mindmap-node-label {\n    dy: 1em;\n    alignment-baseline: middle;\n    text-anchor: middle;\n    dominant-baseline: middle;\n    text-align: center;\n  }\n`,"getStyles"),ir={get db(){return new _e},renderer:sr,parser:Qe,styles:be}},40622:(Ja,vr,R)=>{"use strict";R.d(vr,{ABi:()=>je.AB,Agd:()=>je.Ag,DCK:()=>z.DC,GPZ:()=>q.GP,GZz:()=>Or.GZ,GuW:()=>je.Gu,IA3:()=>Or.IA,IrU:()=>Or.Ir,JLW:()=>Or.JL,Ltv:()=>Se.Lt,Lx9:()=>Or.Lx,Mol:()=>je.Mo,OEq:()=>Or.OE,PGM:()=>Or.PG,PGu:()=>je.PG,Q7f:()=>Or.Q7,Sk5:()=>Ke.Sk,T9B:()=>ot.T9,TUC:()=>je.TU,UAC:()=>je.UA,UMr:()=>Nr.UM,UPb:()=>Or.UP,Ui6:()=>je.Ui,WH:()=>Nr.WH,Wi0:()=>Or.Wi,Xf2:()=>Or.Xf,YPH:()=>je.YP,Yu4:()=>Or.Yu,bEH:()=>cr.bE,cVp:()=>Or.cV,dyv:()=>Or.dy,hkb:()=>Ke.hk,jkA:()=>ot.jk,l78:()=>ee.l7,lUB:()=>Or.lU,m4Y:()=>Nr.m4,n8j:()=>Or.n8,nVG:()=>Or.nV,oDi:()=>Or.oD,olC:()=>Or.ol,qrM:()=>Or.qr,rGn:()=>je.rG,rLf:()=>Or.rL,t6C:()=>je.t6,tlR:()=>ee.tl,ucG:()=>je.uc,uxU:()=>Or.ux,w7C:()=>Nr.w7,wXd:()=>je.wX,y8u:()=>Or.y8,zt:()=>Fr.zt});var ot=R(56018),ee=R(11574),q=(R(73745),R(37752),R(79494),R(91209),R(41906),R(61800),R(85173),R(79139),R(95647),R(72057),R(82709),R(66272)),Ke=(R(99848),R(87742)),cr=R(86805),Nr=(R(56366),R(26670),R(68026),R(90260),R(49979)),Fr=R(34708),Se=R(41479),Or=R(88383),je=R(52925),z=R(74275);R(25248),R(63111),R(52740)},49645:function(Ja){Ja.exports=function(){"use strict";var R=6e4,ee="millisecond",L="second",S="minute",Pt="hour",ut="day",$="week",A="month",At="quarter",wt="year",Ge="date",dt="Invalid Date",Rt=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,q=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,ar={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(z){var ft=["th","st","nd","rd"],Bt=z%100;return"["+z+(ft[(Bt-20)%10]||ft[Bt]||ft[0])+"]"}},Ke=function(z,ft,Bt){var we=String(z);return!we||we.length>=ft?z:""+Array(ft+1-we.length).join(Bt)+z},cr={s:Ke,z:function(z){var ft=-z.utcOffset(),Bt=Math.abs(ft),we=Math.floor(Bt/60),X=Bt%60;return(ft<=0?"+":"-")+Ke(we,2,"0")+":"+Ke(X,2,"0")},m:function z(ft,Bt){if(ft.date()<Bt.date())return-z(Bt,ft);var we=12*(Bt.year()-ft.year())+(Bt.month()-ft.month()),X=ft.clone().add(we,A),ae=Bt-X<0,w=ft.clone().add(we+(ae?-1:1),A);return+(-(we+(Bt-X)/(ae?X-w:w-X))||0)},a:function(z){return z<0?Math.ceil(z)||0:Math.floor(z)},p:function(z){return{M:A,y:wt,w:$,d:ut,D:Ge,h:Pt,m:S,s:L,ms:ee,Q:At}[z]||String(z||"").toLowerCase().replace(/s$/,"")},u:function(z){return void 0===z}},Rr="en",wr={};wr[Rr]=ar;var Vr="$isDayjsObject",ra=function(z){return z instanceof Or||!(!z||!z[Vr])},Nr=function z(ft,Bt,we){var X;if(!ft)return Rr;if("string"==typeof ft){var ae=ft.toLowerCase();wr[ae]&&(X=ae),Bt&&(wr[ae]=Bt,X=ae);var w=ft.split("-");if(!X&&w.length>1)return z(w[0])}else{var re=ft.name;wr[re]=ft,X=re}return!we&&X&&(Rr=X),X||!we&&Rr},Fr=function(z,ft){if(ra(z))return z.clone();var Bt="object"==typeof ft?ft:{};return Bt.date=z,Bt.args=arguments,new Or(Bt)},Se=cr;Se.l=Nr,Se.i=ra,Se.w=function(z,ft){return Fr(z,{locale:ft.$L,utc:ft.$u,x:ft.$x,$offset:ft.$offset})};var Or=function(){function z(Bt){this.$L=Nr(Bt.locale,null,!0),this.parse(Bt),this.$x=this.$x||Bt.x||{},this[Vr]=!0}var ft=z.prototype;return ft.parse=function(Bt){this.$d=function(we){var X=we.date,ae=we.utc;if(null===X)return new Date(NaN);if(Se.u(X))return new Date;if(X instanceof Date)return new Date(X);if("string"==typeof X&&!/Z$/i.test(X)){var w=X.match(Rt);if(w){var re=w[2]-1||0,It=(w[7]||"0").substring(0,3);return ae?new Date(Date.UTC(w[1],re,w[3]||1,w[4]||0,w[5]||0,w[6]||0,It)):new Date(w[1],re,w[3]||1,w[4]||0,w[5]||0,w[6]||0,It)}}return new Date(X)}(Bt),this.init()},ft.init=function(){var Bt=this.$d;this.$y=Bt.getFullYear(),this.$M=Bt.getMonth(),this.$D=Bt.getDate(),this.$W=Bt.getDay(),this.$H=Bt.getHours(),this.$m=Bt.getMinutes(),this.$s=Bt.getSeconds(),this.$ms=Bt.getMilliseconds()},ft.$utils=function(){return Se},ft.isValid=function(){return this.$d.toString()!==dt},ft.isSame=function(Bt,we){var X=Fr(Bt);return this.startOf(we)<=X&&X<=this.endOf(we)},ft.isAfter=function(Bt,we){return Fr(Bt)<this.startOf(we)},ft.isBefore=function(Bt,we){return this.endOf(we)<Fr(Bt)},ft.$g=function(Bt,we,X){return Se.u(Bt)?this[we]:this.set(X,Bt)},ft.unix=function(){return Math.floor(this.valueOf()/1e3)},ft.valueOf=function(){return this.$d.getTime()},ft.startOf=function(Bt,we){var X=this,ae=!!Se.u(we)||we,w=Se.p(Bt),re=function($t,ye){var le=Se.w(X.$u?Date.UTC(X.$y,ye,$t):new Date(X.$y,ye,$t),X);return ae?le:le.endOf(ut)},It=function($t,ye){return Se.w(X.toDate()[$t].apply(X.toDate("s"),(ae?[0,0,0,0]:[23,59,59,999]).slice(ye)),X)},qt=this.$W,V=this.$M,pt=this.$D,H="set"+(this.$u?"UTC":"");switch(w){case wt:return ae?re(1,0):re(31,11);case A:return ae?re(1,V):re(0,V+1);case $:var Nt=this.$locale().weekStart||0,St=(qt<Nt?qt+7:qt)-Nt;return re(ae?pt-St:pt+(6-St),V);case ut:case Ge:return It(H+"Hours",0);case Pt:return It(H+"Minutes",1);case S:return It(H+"Seconds",2);case L:return It(H+"Milliseconds",3);default:return this.clone()}},ft.endOf=function(Bt){return this.startOf(Bt,!1)},ft.$set=function(Bt,we){var X,ae=Se.p(Bt),w="set"+(this.$u?"UTC":""),re=(X={},X[ut]=w+"Date",X[Ge]=w+"Date",X[A]=w+"Month",X[wt]=w+"FullYear",X[Pt]=w+"Hours",X[S]=w+"Minutes",X[L]=w+"Seconds",X[ee]=w+"Milliseconds",X)[ae],It=ae===ut?this.$D+(we-this.$W):we;if(ae===A||ae===wt){var qt=this.clone().set(Ge,1);qt.$d[re](It),qt.init(),this.$d=qt.set(Ge,Math.min(this.$D,qt.daysInMonth())).$d}else re&&this.$d[re](It);return this.init(),this},ft.set=function(Bt,we){return this.clone().$set(Bt,we)},ft.get=function(Bt){return this[Se.p(Bt)]()},ft.add=function(Bt,we){var X,ae=this;Bt=Number(Bt);var w=Se.p(we),re=function(V){var pt=Fr(ae);return Se.w(pt.date(pt.date()+Math.round(V*Bt)),ae)};if(w===A)return this.set(A,this.$M+Bt);if(w===wt)return this.set(wt,this.$y+Bt);if(w===ut)return re(1);if(w===$)return re(7);var It=(X={},X[S]=R,X[Pt]=36e5,X[L]=1e3,X)[w]||1,qt=this.$d.getTime()+Bt*It;return Se.w(qt,this)},ft.subtract=function(Bt,we){return this.add(-1*Bt,we)},ft.format=function(Bt){var we=this,X=this.$locale();if(!this.isValid())return X.invalidDate||dt;var ae=Bt||"YYYY-MM-DDTHH:mm:ssZ",w=Se.z(this),re=this.$H,It=this.$m,qt=this.$M,V=X.weekdays,pt=X.months,Nt=function(ye,le,Pe,oe){return ye&&(ye[le]||ye(we,ae))||Pe[le].slice(0,oe)},St=function(ye){return Se.s(re%12||12,ye,"0")},$t=X.meridiem||function(ye,le,Pe){var oe=ye<12?"AM":"PM";return Pe?oe.toLowerCase():oe};return ae.replace(q,function(ye,le){return le||function(Pe){switch(Pe){case"YY":return String(we.$y).slice(-2);case"YYYY":return Se.s(we.$y,4,"0");case"M":return qt+1;case"MM":return Se.s(qt+1,2,"0");case"MMM":return Nt(X.monthsShort,qt,pt,3);case"MMMM":return Nt(pt,qt);case"D":return we.$D;case"DD":return Se.s(we.$D,2,"0");case"d":return String(we.$W);case"dd":return Nt(X.weekdaysMin,we.$W,V,2);case"ddd":return Nt(X.weekdaysShort,we.$W,V,3);case"dddd":return V[we.$W];case"H":return String(re);case"HH":return Se.s(re,2,"0");case"h":return St(1);case"hh":return St(2);case"a":return $t(re,It,!0);case"A":return $t(re,It,!1);case"m":return String(It);case"mm":return Se.s(It,2,"0");case"s":return String(we.$s);case"ss":return Se.s(we.$s,2,"0");case"SSS":return Se.s(we.$ms,3,"0");case"Z":return w}return null}(ye)||w.replace(":","")})},ft.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},ft.diff=function(Bt,we,X){var ae,w=this,re=Se.p(we),It=Fr(Bt),qt=(It.utcOffset()-this.utcOffset())*R,V=this-It,pt=function(){return Se.m(w,It)};switch(re){case wt:ae=pt()/12;break;case A:ae=pt();break;case At:ae=pt()/3;break;case $:ae=(V-qt)/6048e5;break;case ut:ae=(V-qt)/864e5;break;case Pt:ae=V/36e5;break;case S:ae=V/R;break;case L:ae=V/1e3;break;default:ae=V}return X?ae:Se.a(ae)},ft.daysInMonth=function(){return this.endOf(A).$D},ft.$locale=function(){return wr[this.$L]},ft.locale=function(Bt,we){if(!Bt)return this.$L;var X=this.clone(),ae=Nr(Bt,we,!0);return ae&&(X.$L=ae),X},ft.clone=function(){return Se.w(this.$d,this)},ft.toDate=function(){return new Date(this.valueOf())},ft.toJSON=function(){return this.isValid()?this.toISOString():null},ft.toISOString=function(){return this.$d.toISOString()},ft.toString=function(){return this.$d.toUTCString()},z}(),je=Or.prototype;return Fr.prototype=je,[["$ms",ee],["$s",L],["$m",S],["$H",Pt],["$W",ut],["$M",A],["$y",wt],["$D",Ge]].forEach(function(z){je[z[1]]=function(ft){return this.$g(ft,z[0],z[1])}}),Fr.extend=function(z,ft){return z.$i||(z(ft,Or,Fr),z.$i=!0),Fr},Fr.locale=Nr,Fr.isDayjs=ra,Fr.unix=function(z){return Fr(1e3*z)},Fr.en=wr[Rr],Fr.Ls=wr,Fr.p={},Fr}()},52052:(Ja,vr,R)=>{"use strict";R.d(vr,{$C:()=>ft,$t:()=>le,C4:()=>oe,I5:()=>ye,Ib:()=>Ke,KL:()=>Et,Sm:()=>qe,Un:()=>qt,_K:()=>Pe,bH:()=>w,dq:()=>St,pe:()=>At,rY:()=>ze,ru:()=>It,sM:()=>je,vU:()=>q,yT:()=>we});var A,ot=R(45027),ee=R(79006),L=R(32303),S=R(73986),Pt=R(40622),ut=R(37674),$=R(23950),At="\u200b",wt={curveBasis:Pt.qrM,curveBasisClosed:Pt.Yu4,curveBasisOpen:Pt.IA3,curveBumpX:Pt.Wi0,curveBumpY:Pt.PGM,curveBundle:Pt.OEq,curveCardinalClosed:Pt.olC,curveCardinalOpen:Pt.IrU,curveCardinal:Pt.y8u,curveCatmullRomClosed:Pt.Q7f,curveCatmullRomOpen:Pt.cVp,curveCatmullRom:Pt.oDi,curveLinear:Pt.lUB,curveLinearClosed:Pt.Lx9,curveMonotoneX:Pt.nVG,curveMonotoneY:Pt.uxU,curveNatural:Pt.Xf2,curveStep:Pt.GZz,curveStepAfter:Pt.UPb,curveStepBefore:Pt.dyv},Ge=/\s*(?:(\w+)(?=:):|(\w+))\s*(?:(\w+)|((?:(?!}%{2}).|\r?\n)*))?\s*(?:}%{2})?/gi,dt=(0,L.K2)(function(B,F){const et=Rt(B,/(?:init\b)|(?:initialize\b)/);let mt={};if(Array.isArray(et)){const _t=et.map(ht=>ht.args);(0,ee.$i)(_t),mt=(0,ee.hH)(mt,[..._t])}else mt=et.args;if(!mt)return;let it=(0,ee.Ch)(B,F);const rt="config";return void 0!==mt[rt]&&("flowchart-v2"===it&&(it="flowchart"),mt[it]=mt[rt],delete mt[rt]),mt},"detectInit"),Rt=(0,L.K2)(function(B,F=null){try{const et=new RegExp(`[%]{2}(?![{]${Ge.source})(?=[}][%]{2}).*\n`,"ig");let mt;B=B.trim().replace(et,"").replace(/'/gm,'"'),L.Rm.debug(`Detecting diagram directive${null!==F?" type:"+F:""} based on the text:${B}`);const it=[];for(;null!==(mt=ee.DB.exec(B));)if(mt.index===ee.DB.lastIndex&&ee.DB.lastIndex++,mt&&!F||F&&mt[1]?.match(F)||F&&mt[2]?.match(F)){const rt=mt[1]?mt[1]:mt[2],_t=mt[3]?mt[3].trim():mt[4]?JSON.parse(mt[4].trim()):null;it.push({type:rt,args:_t})}return 0===it.length?{type:B,args:null}:1===it.length?it[0]:it}catch(et){return L.Rm.error(`ERROR: ${et.message} - Unable to parse directive type: '${F}' based on the text: '${B}'`),{type:void 0,args:null}}},"detectDirective"),q=(0,L.K2)(function(B){return B.replace(ee.DB,"")},"removeDirectives"),ar=(0,L.K2)(function(B,F){for(const[et,mt]of F.entries())if(mt.match(B))return et;return-1},"isSubstringInArray");function Ke(B,F){if(!B)return F;const et=`curve${B.charAt(0).toUpperCase()+B.slice(1)}`;return wt[et]??F}function cr(B,F){const et=B.trim();if(et)return"loose"!==F.securityLevel?(0,S.J)(et):et}(0,L.K2)(Ke,"interpolateToCurve"),(0,L.K2)(cr,"formatUrl");var Rr=(0,L.K2)((B,...F)=>{const et=B.split("."),mt=et.length-1,it=et[mt];let rt=window;for(let _t=0;_t<mt;_t++)if(rt=rt[et[_t]],!rt)return void L.Rm.error(`Function name: ${B} not found in window`);rt[it](...F)},"runFunc");function wr(B,F){return B&&F?Math.sqrt(Math.pow(F.x-B.x,2)+Math.pow(F.y-B.y,2)):0}function Vr(B){let F,et=0;return B.forEach(it=>{et+=wr(it,F),F=it}),Fr(B,et/2)}function ra(B){return 1===B.length?B[0]:Vr(B)}(0,L.K2)(wr,"distance"),(0,L.K2)(Vr,"traverseEdge"),(0,L.K2)(ra,"calcLabelPosition");var Nr=(0,L.K2)((B,F=2)=>{const et=Math.pow(10,F);return Math.round(B*et)/et},"roundNumber"),Fr=(0,L.K2)((B,F)=>{let et,mt=F;for(const it of B){if(et){const rt=wr(it,et);if(0===rt)return et;if(rt<mt)mt-=rt;else{const _t=mt/rt;if(_t<=0)return et;if(_t>=1)return{x:it.x,y:it.y};if(_t>0&&_t<1)return{x:Nr((1-_t)*et.x+_t*it.x,5),y:Nr((1-_t)*et.y+_t*it.y,5)}}}et=it}throw new Error("Could not find a suitable point for the given distance")},"calculatePoint"),Se=(0,L.K2)((B,F,et)=>{L.Rm.info(`our points ${JSON.stringify(F)}`),F[0]!==et&&(F=F.reverse());const it=Fr(F,25),rt=B?10:5,_t=Math.atan2(F[0].y-it.y,F[0].x-it.x),ht={x:0,y:0};return ht.x=Math.sin(_t)*rt+(F[0].x+it.x)/2,ht.y=-Math.cos(_t)*rt+(F[0].y+it.y)/2,ht},"calcCardinalityPosition");function Or(B,F,et){const mt=structuredClone(et);L.Rm.info("our points",mt),"start_left"!==F&&"start_right"!==F&&mt.reverse();const rt=Fr(mt,25+B),_t=10+.5*B,ht=Math.atan2(mt[0].y-rt.y,mt[0].x-rt.x),Ft={x:0,y:0};return"start_left"===F?(Ft.x=Math.sin(ht+Math.PI)*_t+(mt[0].x+rt.x)/2,Ft.y=-Math.cos(ht+Math.PI)*_t+(mt[0].y+rt.y)/2):"end_right"===F?(Ft.x=Math.sin(ht-Math.PI)*_t+(mt[0].x+rt.x)/2-5,Ft.y=-Math.cos(ht-Math.PI)*_t+(mt[0].y+rt.y)/2-5):"end_left"===F?(Ft.x=Math.sin(ht)*_t+(mt[0].x+rt.x)/2-5,Ft.y=-Math.cos(ht)*_t+(mt[0].y+rt.y)/2-5):(Ft.x=Math.sin(ht)*_t+(mt[0].x+rt.x)/2,Ft.y=-Math.cos(ht)*_t+(mt[0].y+rt.y)/2),Ft}function je(B){let F="",et="";for(const mt of B)void 0!==mt&&(mt.startsWith("color:")||mt.startsWith("text-align:")?et=et+mt+";":F=F+mt+";");return{style:F,labelStyle:et}}(0,L.K2)(Or,"calcTerminalLabelPosition"),(0,L.K2)(je,"getStylesFromArray");var z=0,ft=(0,L.K2)(()=>(z++,"id-"+Math.random().toString(36).substr(2,12)+"-"+z),"generateId");function Bt(B){let F="";for(let it=0;it<B;it++)F+="0123456789abcdef".charAt(Math.floor(16*Math.random()));return F}(0,L.K2)(Bt,"makeRandomHex");var we=(0,L.K2)(B=>Bt(B.length),"random"),X=(0,L.K2)(function(){return{x:0,y:0,fill:void 0,anchor:"start",style:"#666",width:100,height:100,textMargin:0,rx:0,ry:0,valign:void 0,text:""}},"getTextObj"),ae=(0,L.K2)(function(B,F){const et=F.text.replace(ee.Y2.lineBreakRegex," "),[,mt]=ye(F.fontSize),it=B.append("text");it.attr("x",F.x),it.attr("y",F.y),it.style("text-anchor",F.anchor),it.style("font-family",F.fontFamily),it.style("font-size",mt),it.style("font-weight",F.fontWeight),it.attr("fill",F.fill),void 0!==F.class&&it.attr("class",F.class);const rt=it.append("tspan");return rt.attr("x",F.x+2*F.textMargin),rt.attr("fill",F.fill),rt.text(et),it},"drawSimpleText"),w=(0,ut.A)((B,F,et)=>{if(!B||(et=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial",joinWith:"<br/>"},et),ee.Y2.lineBreakRegex.test(B)))return B;const mt=B.split(" ").filter(Boolean),it=[];let rt="";return mt.forEach((_t,ht)=>{const Ft=qt(`${_t} `,et),G=qt(rt,et);if(Ft>F){const{hyphenatedStrings:Mt,remainingWord:Zt}=re(_t,F,"-",et);it.push(rt,...Mt),rt=Zt}else G+Ft>=F?(it.push(rt),rt=_t):rt=[rt,_t].filter(Boolean).join(" ");ht+1===mt.length&&it.push(rt)}),it.filter(_t=>""!==_t).join(et.joinWith)},(B,F,et)=>`${B}${F}${et.fontSize}${et.fontWeight}${et.fontFamily}${et.joinWith}`),re=(0,ut.A)((B,F,et="-",mt)=>{mt=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial",margin:0},mt);const it=[...B],rt=[];let _t="";return it.forEach((ht,Ft)=>{const G=`${_t}${ht}`;qt(G,mt)>=F?(rt.push(it.length===Ft+1?G:`${G}${et}`),_t=""):_t=G}),{hyphenatedStrings:rt,remainingWord:_t}},(B,F,et="-",mt)=>`${B}${F}${et}${mt.fontSize}${mt.fontWeight}${mt.fontFamily}`);function It(B,F){return V(B,F).height}function qt(B,F){return V(B,F).width}(0,L.K2)(It,"calculateTextHeight"),(0,L.K2)(qt,"calculateTextWidth");var H,V=(0,ut.A)((B,F)=>{const{fontSize:et=12,fontFamily:mt="Arial",fontWeight:it=400}=F;if(!B)return{width:0,height:0};const[,rt]=ye(et),_t=["sans-serif",mt],ht=B.split(ee.Y2.lineBreakRegex),Ft=[],G=(0,Pt.Ltv)("body");if(!G.remove)return{width:0,height:0,lineHeight:0};const lt=G.append("svg");for(const Mt of _t){let Zt=0;const pe={width:0,height:0,lineHeight:0};for(const Re of ht){const Ze=X();Ze.text=Re||At;const de=ae(lt,Ze).style("font-size",rt).style("font-weight",it).style("font-family",Mt),mr=(de._groups||de)[0][0].getBBox();if(0===mr.width&&0===mr.height)throw new Error("svg element not in render tree");pe.width=Math.round(Math.max(pe.width,mr.width)),Zt=Math.round(mr.height),pe.height+=Zt,pe.lineHeight=Math.round(Math.max(pe.lineHeight,Zt))}Ft.push(pe)}return lt.remove(),Ft[isNaN(Ft[1].height)||isNaN(Ft[1].width)||isNaN(Ft[1].lineHeight)||Ft[0].height>Ft[1].height&&Ft[0].width>Ft[1].width&&Ft[0].lineHeight>Ft[1].lineHeight?0:1]},(B,F)=>`${B}${F.fontSize}${F.fontWeight}${F.fontFamily}`),pt=(class{constructor(B=!1,F){this.count=0,this.count=F?F.length:0,this.next=B?()=>this.count++:()=>Date.now()}static#t=A=()=>((0,ot.A)(this,"InitIDGenerator"),(0,L.K2)(this,"InitIDGenerator"),this)},A()),Nt=(0,L.K2)(function(B){return H=H||document.createElement("div"),B=escape(B).replace(/%26/g,"&").replace(/%23/g,"#").replace(/%3B/g,";"),H.innerHTML=B,unescape(H.textContent)},"entityDecode");function St(B){return"str"in B}(0,L.K2)(St,"isDetailedError");var $t=(0,L.K2)((B,F,et,mt)=>{if(!mt)return;const it=B.node()?.getBBox();it&&B.append("text").text(mt).attr("text-anchor","middle").attr("x",it.x+it.width/2).attr("y",-et).attr("class",F)},"insertTitle"),ye=(0,L.K2)(B=>{if("number"==typeof B)return[B,B+"px"];const F=parseInt(B??"",10);return Number.isNaN(F)?[void 0,void 0]:B===String(F)?[F,B+"px"]:[F,B]},"parseFontSize");function le(B,F){return(0,$.A)({},B,F)}(0,L.K2)(le,"cleanAndMerge");var Pe={assignWithDepth:ee.hH,wrapLabel:w,calculateTextHeight:It,calculateTextWidth:qt,calculateTextDimensions:V,cleanAndMerge:le,detectInit:dt,detectDirective:Rt,isSubstringInArray:ar,interpolateToCurve:Ke,calcLabelPosition:ra,calcCardinalityPosition:Se,calcTerminalLabelPosition:Or,formatUrl:cr,getStylesFromArray:je,generateId:ft,random:we,runFunc:Rr,entityDecode:Nt,insertTitle:$t,isLabelCoordinateInPath:Tt,parseFontSize:ye,InitIDGenerator:pt},oe=(0,L.K2)(function(B){let F=B;return F=F.replace(/style.*:\S*#.*;/g,function(et){return et.substring(0,et.length-1)}),F=F.replace(/classDef.*:\S*#.*;/g,function(et){return et.substring(0,et.length-1)}),F=F.replace(/#\w+;/g,function(et){const mt=et.substring(1,et.length-1);return/^\+?\d+$/.test(mt)?"\ufb02\xb0\xb0"+mt+"\xb6\xdf":"\ufb02\xb0"+mt+"\xb6\xdf"}),F},"encodeEntities"),qe=(0,L.K2)(function(B){return B.replace(/\ufb02\xb0\xb0/g,"&#").replace(/\ufb02\xb0/g,"&").replace(/\xb6\xdf/g,";")},"decodeEntities"),ze=(0,L.K2)((B,F,{counter:et=0,prefix:mt,suffix:it},rt)=>rt||`${mt?`${mt}_`:""}${B}_${F}_${et}${it?`_${it}`:""}`,"getEdgeId");function Et(B){return B??null}function Tt(B,F){const et=Math.round(B.x),mt=Math.round(B.y),it=F.replace(/(\d+\.\d+)/g,rt=>Math.round(parseFloat(rt)).toString());return it.includes(et.toString())||it.includes(mt.toString())}(0,L.K2)(Et,"handleUndefinedAttr"),(0,L.K2)(Tt,"isLabelCoordinateInPath")},52240:(Ja,vr,R)=>{"use strict";Object.defineProperty(vr,"__esModule",{value:!0}),vr.Emitter=vr.Event=void 0;const ot=R(30362);var ee;!function(Pt){const ut={dispose(){}};Pt.None=function(){return ut}}(ee||(vr.Event=ee={}));class L{add(ut,$=null,A){this._callbacks||(this._callbacks=[],this._contexts=[]),this._callbacks.push(ut),this._contexts.push($),Array.isArray(A)&&A.push({dispose:()=>this.remove(ut,$)})}remove(ut,$=null){if(!this._callbacks)return;let A=!1;for(let At=0,wt=this._callbacks.length;At<wt;At++)if(this._callbacks[At]===ut){if(this._contexts[At]===$)return this._callbacks.splice(At,1),void this._contexts.splice(At,1);A=!0}if(A)throw new Error("When adding a listener with a context, you should remove it with the same context")}invoke(...ut){if(!this._callbacks)return[];const $=[],A=this._callbacks.slice(0),At=this._contexts.slice(0);for(let wt=0,Ge=A.length;wt<Ge;wt++)try{$.push(A[wt].apply(At[wt],ut))}catch(dt){(0,ot.default)().console.error(dt)}return $}isEmpty(){return!this._callbacks||0===this._callbacks.length}dispose(){this._callbacks=void 0,this._contexts=void 0}}class S{constructor(ut){this._options=ut}get event(){return this._event||(this._event=(ut,$,A)=>{this._callbacks||(this._callbacks=new L),this._options&&this._options.onFirstListenerAdd&&this._callbacks.isEmpty()&&this._options.onFirstListenerAdd(this),this._callbacks.add(ut,$);const At={dispose:()=>{this._callbacks&&(this._callbacks.remove(ut,$),At.dispose=S._noop,this._options&&this._options.onLastListenerRemove&&this._callbacks.isEmpty()&&this._options.onLastListenerRemove(this))}};return Array.isArray(A)&&A.push(At),At}),this._event}fire(ut){this._callbacks&&this._callbacks.invoke.call(this._callbacks,ut)}dispose(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0)}}vr.Emitter=S,S._noop=function(){}},53102:(Ja,vr,R)=>{"use strict";R.d(vr,{Zk:()=>wt,q7:()=>rt,tM:()=>or,u4:()=>zt});var ot=R(45027),ee=R(89204),L=R(5675),S=R(8086),Pt=R(72271),ut=R(52052),$=R(79006),A=R(32303),At=function(){var ve=(0,A.K2)(function(_r,$e,He,Ar){for(He=He||{},Ar=_r.length;Ar--;He[_r[Ar]]=$e);return He},"o"),ce=[1,2],Ee=[1,3],De=[1,4],er=[2,4],Qe=[1,9],Lr=[1,11],_e=[1,16],Hr=[1,17],sr=[1,18],te=[1,19],ne=[1,33],be=[1,20],ir=[1,21],g=[1,22],y=[1,23],E=[1,24],I=[1,26],m=[1,27],D=[1,28],v=[1,29],b=[1,30],C=[1,31],P=[1,32],Q=[1,35],xt=[1,36],Vt=[1,37],jt=[1,38],Ut=[1,34],Wt=[1,4,5,16,17,19,21,22,24,25,26,27,28,29,33,35,37,38,41,45,48,51,52,53,54,57],xe=[1,4,5,14,15,16,17,19,21,22,24,25,26,27,28,29,33,35,37,38,39,40,41,45,48,51,52,53,54,57],Xe=[4,5,16,17,19,21,22,24,25,26,27,28,29,33,35,37,38,41,45,48,51,52,53,54,57],We={trace:(0,A.K2)(function(){},"trace"),yy:{},symbols_:{error:2,start:3,SPACE:4,NL:5,SD:6,document:7,line:8,statement:9,classDefStatement:10,styleStatement:11,cssClassStatement:12,idStatement:13,DESCR:14,"--\x3e":15,HIDE_EMPTY:16,scale:17,WIDTH:18,COMPOSIT_STATE:19,STRUCT_START:20,STRUCT_STOP:21,STATE_DESCR:22,AS:23,ID:24,FORK:25,JOIN:26,CHOICE:27,CONCURRENT:28,note:29,notePosition:30,NOTE_TEXT:31,direction:32,acc_title:33,acc_title_value:34,acc_descr:35,acc_descr_value:36,acc_descr_multiline_value:37,CLICK:38,STRING:39,HREF:40,classDef:41,CLASSDEF_ID:42,CLASSDEF_STYLEOPTS:43,DEFAULT:44,style:45,STYLE_IDS:46,STYLEDEF_STYLEOPTS:47,class:48,CLASSENTITY_IDS:49,STYLECLASS:50,direction_tb:51,direction_bt:52,direction_rl:53,direction_lr:54,eol:55,";":56,EDGE_STATE:57,STYLE_SEPARATOR:58,left_of:59,right_of:60,$accept:0,$end:1},terminals_:{2:"error",4:"SPACE",5:"NL",6:"SD",14:"DESCR",15:"--\x3e",16:"HIDE_EMPTY",17:"scale",18:"WIDTH",19:"COMPOSIT_STATE",20:"STRUCT_START",21:"STRUCT_STOP",22:"STATE_DESCR",23:"AS",24:"ID",25:"FORK",26:"JOIN",27:"CHOICE",28:"CONCURRENT",29:"note",31:"NOTE_TEXT",33:"acc_title",34:"acc_title_value",35:"acc_descr",36:"acc_descr_value",37:"acc_descr_multiline_value",38:"CLICK",39:"STRING",40:"HREF",41:"classDef",42:"CLASSDEF_ID",43:"CLASSDEF_STYLEOPTS",44:"DEFAULT",45:"style",46:"STYLE_IDS",47:"STYLEDEF_STYLEOPTS",48:"class",49:"CLASSENTITY_IDS",50:"STYLECLASS",51:"direction_tb",52:"direction_bt",53:"direction_rl",54:"direction_lr",56:";",57:"EDGE_STATE",58:"STYLE_SEPARATOR",59:"left_of",60:"right_of"},productions_:[0,[3,2],[3,2],[3,2],[7,0],[7,2],[8,2],[8,1],[8,1],[9,1],[9,1],[9,1],[9,1],[9,2],[9,3],[9,4],[9,1],[9,2],[9,1],[9,4],[9,3],[9,6],[9,1],[9,1],[9,1],[9,1],[9,4],[9,4],[9,1],[9,2],[9,2],[9,1],[9,5],[9,5],[10,3],[10,3],[11,3],[12,3],[32,1],[32,1],[32,1],[32,1],[55,1],[55,1],[13,1],[13,1],[13,3],[13,3],[30,1],[30,1]],performAction:(0,A.K2)(function($e,He,Ar,kr,zr,Er,Jr){var Br=Er.length-1;switch(zr){case 3:return kr.setRootDoc(Er[Br]),Er[Br];case 4:this.$=[];break;case 5:"nl"!=Er[Br]&&(Er[Br-1].push(Er[Br]),this.$=Er[Br-1]);break;case 6:case 7:case 12:this.$=Er[Br];break;case 8:this.$="nl";break;case 13:const Qr=Er[Br-1];Qr.description=kr.trimColon(Er[Br]),this.$=Qr;break;case 14:this.$={stmt:"relation",state1:Er[Br-2],state2:Er[Br]};break;case 15:const lr=kr.trimColon(Er[Br]);this.$={stmt:"relation",state1:Er[Br-3],state2:Er[Br-1],description:lr};break;case 19:this.$={stmt:"state",id:Er[Br-3],type:"default",description:"",doc:Er[Br-1]};break;case 20:var ha=Er[Br],ia=Er[Br-2].trim();if(Er[Br].match(":")){var jr=Er[Br].split(":");ha=jr[0],ia=[ia,jr[1]]}this.$={stmt:"state",id:ha,type:"default",description:ia};break;case 21:this.$={stmt:"state",id:Er[Br-3],type:"default",description:Er[Br-5],doc:Er[Br-1]};break;case 22:this.$={stmt:"state",id:Er[Br],type:"fork"};break;case 23:this.$={stmt:"state",id:Er[Br],type:"join"};break;case 24:this.$={stmt:"state",id:Er[Br],type:"choice"};break;case 25:this.$={stmt:"state",id:kr.getDividerId(),type:"divider"};break;case 26:this.$={stmt:"state",id:Er[Br-1].trim(),note:{position:Er[Br-2].trim(),text:Er[Br].trim()}};break;case 29:this.$=Er[Br].trim(),kr.setAccTitle(this.$);break;case 30:case 31:this.$=Er[Br].trim(),kr.setAccDescription(this.$);break;case 32:this.$={stmt:"click",id:Er[Br-3],url:Er[Br-2],tooltip:Er[Br-1]};break;case 33:this.$={stmt:"click",id:Er[Br-3],url:Er[Br-1],tooltip:""};break;case 34:case 35:this.$={stmt:"classDef",id:Er[Br-1].trim(),classes:Er[Br].trim()};break;case 36:this.$={stmt:"style",id:Er[Br-1].trim(),styleClass:Er[Br].trim()};break;case 37:this.$={stmt:"applyClass",id:Er[Br-1].trim(),styleClass:Er[Br].trim()};break;case 38:kr.setDirection("TB"),this.$={stmt:"dir",value:"TB"};break;case 39:kr.setDirection("BT"),this.$={stmt:"dir",value:"BT"};break;case 40:kr.setDirection("RL"),this.$={stmt:"dir",value:"RL"};break;case 41:kr.setDirection("LR"),this.$={stmt:"dir",value:"LR"};break;case 44:case 45:this.$={stmt:"state",id:Er[Br].trim(),type:"default",description:""};break;case 46:case 47:this.$={stmt:"state",id:Er[Br-2].trim(),classes:[Er[Br].trim()],type:"default",description:""}}},"anonymous"),table:[{3:1,4:ce,5:Ee,6:De},{1:[3]},{3:5,4:ce,5:Ee,6:De},{3:6,4:ce,5:Ee,6:De},ve([1,4,5,16,17,19,22,24,25,26,27,28,29,33,35,37,38,41,45,48,51,52,53,54,57],er,{7:7}),{1:[2,1]},{1:[2,2]},{1:[2,3],4:Qe,5:Lr,8:8,9:10,10:12,11:13,12:14,13:15,16:_e,17:Hr,19:sr,22:te,24:ne,25:be,26:ir,27:g,28:y,29:E,32:25,33:I,35:m,37:D,38:v,41:b,45:C,48:P,51:Q,52:xt,53:Vt,54:jt,57:Ut},ve(Wt,[2,5]),{9:39,10:12,11:13,12:14,13:15,16:_e,17:Hr,19:sr,22:te,24:ne,25:be,26:ir,27:g,28:y,29:E,32:25,33:I,35:m,37:D,38:v,41:b,45:C,48:P,51:Q,52:xt,53:Vt,54:jt,57:Ut},ve(Wt,[2,7]),ve(Wt,[2,8]),ve(Wt,[2,9]),ve(Wt,[2,10]),ve(Wt,[2,11]),ve(Wt,[2,12],{14:[1,40],15:[1,41]}),ve(Wt,[2,16]),{18:[1,42]},ve(Wt,[2,18],{20:[1,43]}),{23:[1,44]},ve(Wt,[2,22]),ve(Wt,[2,23]),ve(Wt,[2,24]),ve(Wt,[2,25]),{30:45,31:[1,46],59:[1,47],60:[1,48]},ve(Wt,[2,28]),{34:[1,49]},{36:[1,50]},ve(Wt,[2,31]),{13:51,24:ne,57:Ut},{42:[1,52],44:[1,53]},{46:[1,54]},{49:[1,55]},ve(xe,[2,44],{58:[1,56]}),ve(xe,[2,45],{58:[1,57]}),ve(Wt,[2,38]),ve(Wt,[2,39]),ve(Wt,[2,40]),ve(Wt,[2,41]),ve(Wt,[2,6]),ve(Wt,[2,13]),{13:58,24:ne,57:Ut},ve(Wt,[2,17]),ve(Xe,er,{7:59}),{24:[1,60]},{24:[1,61]},{23:[1,62]},{24:[2,48]},{24:[2,49]},ve(Wt,[2,29]),ve(Wt,[2,30]),{39:[1,63],40:[1,64]},{43:[1,65]},{43:[1,66]},{47:[1,67]},{50:[1,68]},{24:[1,69]},{24:[1,70]},ve(Wt,[2,14],{14:[1,71]}),{4:Qe,5:Lr,8:8,9:10,10:12,11:13,12:14,13:15,16:_e,17:Hr,19:sr,21:[1,72],22:te,24:ne,25:be,26:ir,27:g,28:y,29:E,32:25,33:I,35:m,37:D,38:v,41:b,45:C,48:P,51:Q,52:xt,53:Vt,54:jt,57:Ut},ve(Wt,[2,20],{20:[1,73]}),{31:[1,74]},{24:[1,75]},{39:[1,76]},{39:[1,77]},ve(Wt,[2,34]),ve(Wt,[2,35]),ve(Wt,[2,36]),ve(Wt,[2,37]),ve(xe,[2,46]),ve(xe,[2,47]),ve(Wt,[2,15]),ve(Wt,[2,19]),ve(Xe,er,{7:78}),ve(Wt,[2,26]),ve(Wt,[2,27]),{5:[1,79]},{5:[1,80]},{4:Qe,5:Lr,8:8,9:10,10:12,11:13,12:14,13:15,16:_e,17:Hr,19:sr,21:[1,81],22:te,24:ne,25:be,26:ir,27:g,28:y,29:E,32:25,33:I,35:m,37:D,38:v,41:b,45:C,48:P,51:Q,52:xt,53:Vt,54:jt,57:Ut},ve(Wt,[2,32]),ve(Wt,[2,33]),ve(Wt,[2,21])],defaultActions:{5:[2,1],6:[2,2],47:[2,48],48:[2,49]},parseError:(0,A.K2)(function($e,He){if(!He.recoverable){var Ar=new Error($e);throw Ar.hash=He,Ar}this.trace($e)},"parseError"),parse:(0,A.K2)(function($e){var He=this,Ar=[0],kr=[],zr=[null],Er=[],Jr=this.table,Br="",ha=0,ia=0,jr=0,dr=Er.slice.call(arguments,1),W=Object.create(this.lexer),Yt={yy:{}};for(var Ye in this.yy)Object.prototype.hasOwnProperty.call(this.yy,Ye)&&(Yt.yy[Ye]=this.yy[Ye]);W.setInput($e,Yt.yy),Yt.yy.lexer=W,Yt.yy.parser=this,typeof W.yylloc>"u"&&(W.yylloc={});var Ne=W.yylloc;Er.push(Ne);var Tr=W.options&&W.options.ranges;function da(){var Oa;return"number"!=typeof(Oa=kr.pop()||W.lex()||1)&&(Oa instanceof Array&&(Oa=(kr=Oa).pop()),Oa=He.symbols_[Oa]||Oa),Oa}this.parseError="function"==typeof Yt.yy.parseError?Yt.yy.parseError:Object.getPrototypeOf(this).parseError,(0,A.K2)(function yr(Oa){Ar.length=Ar.length-2*Oa,zr.length=zr.length-Oa,Er.length=Er.length-Oa},"popStack"),(0,A.K2)(da,"lex");for(var Pa,Ia,Wa,Ma,sa,ea,Va,Ua,Sa={};;){if(this.defaultActions[Wa=Ar[Ar.length-1]]?Ma=this.defaultActions[Wa]:((null===Pa||typeof Pa>"u")&&(Pa=da()),Ma=Jr[Wa]&&Jr[Wa][Pa]),typeof Ma>"u"||!Ma.length||!Ma[0]){var nr;for(ea in Ua=[],Jr[Wa])this.terminals_[ea]&&ea>2&&Ua.push("'"+this.terminals_[ea]+"'");nr=W.showPosition?"Parse error on line "+(ha+1)+":\n"+W.showPosition()+"\nExpecting "+Ua.join(", ")+", got '"+(this.terminals_[Pa]||Pa)+"'":"Parse error on line "+(ha+1)+": Unexpected "+(1==Pa?"end of input":"'"+(this.terminals_[Pa]||Pa)+"'"),this.parseError(nr,{text:W.match,token:this.terminals_[Pa]||Pa,line:W.yylineno,loc:Ne,expected:Ua})}if(Ma[0]instanceof Array&&Ma.length>1)throw new Error("Parse Error: multiple actions possible at state: "+Wa+", token: "+Pa);switch(Ma[0]){case 1:Ar.push(Pa),zr.push(W.yytext),Er.push(W.yylloc),Ar.push(Ma[1]),Pa=null,Ia?(Pa=Ia,Ia=null):(ia=W.yyleng,Br=W.yytext,ha=W.yylineno,Ne=W.yylloc,jr>0&&jr--);break;case 2:if(Sa.$=zr[zr.length-(Va=this.productions_[Ma[1]][1])],Sa._$={first_line:Er[Er.length-(Va||1)].first_line,last_line:Er[Er.length-1].last_line,first_column:Er[Er.length-(Va||1)].first_column,last_column:Er[Er.length-1].last_column},Tr&&(Sa._$.range=[Er[Er.length-(Va||1)].range[0],Er[Er.length-1].range[1]]),typeof(sa=this.performAction.apply(Sa,[Br,ia,ha,Yt.yy,Ma[1],zr,Er].concat(dr)))<"u")return sa;Va&&(Ar=Ar.slice(0,-1*Va*2),zr=zr.slice(0,-1*Va),Er=Er.slice(0,-1*Va)),Ar.push(this.productions_[Ma[1]][0]),zr.push(Sa.$),Er.push(Sa._$),Ar.push(Jr[Ar[Ar.length-2]][Ar[Ar.length-1]]);break;case 3:return!0}}return!0},"parse")};function hr(){this.yy={}}return We.lexer=function(){return{EOF:1,parseError:(0,A.K2)(function(He,Ar){if(!this.yy.parser)throw new Error(He);this.yy.parser.parseError(He,Ar)},"parseError"),setInput:(0,A.K2)(function($e,He){return this.yy=He||this.yy||{},this._input=$e,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},"setInput"),input:(0,A.K2)(function(){var $e=this._input[0];return this.yytext+=$e,this.yyleng++,this.offset++,this.match+=$e,this.matched+=$e,$e.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),$e},"input"),unput:(0,A.K2)(function($e){var He=$e.length,Ar=$e.split(/(?:\r\n?|\n)/g);this._input=$e+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-He),this.offset-=He;var kr=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),Ar.length-1&&(this.yylineno-=Ar.length-1);var zr=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:Ar?(Ar.length===kr.length?this.yylloc.first_column:0)+kr[kr.length-Ar.length].length-Ar[0].length:this.yylloc.first_column-He},this.options.ranges&&(this.yylloc.range=[zr[0],zr[0]+this.yyleng-He]),this.yyleng=this.yytext.length,this},"unput"),more:(0,A.K2)(function(){return this._more=!0,this},"more"),reject:(0,A.K2)(function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},"reject"),less:(0,A.K2)(function($e){this.unput(this.match.slice($e))},"less"),pastInput:(0,A.K2)(function(){var $e=this.matched.substr(0,this.matched.length-this.match.length);return($e.length>20?"...":"")+$e.substr(-20).replace(/\n/g,"")},"pastInput"),upcomingInput:(0,A.K2)(function(){var $e=this.match;return $e.length<20&&($e+=this._input.substr(0,20-$e.length)),($e.substr(0,20)+($e.length>20?"...":"")).replace(/\n/g,"")},"upcomingInput"),showPosition:(0,A.K2)(function(){var $e=this.pastInput(),He=new Array($e.length+1).join("-");return $e+this.upcomingInput()+"\n"+He+"^"},"showPosition"),test_match:(0,A.K2)(function($e,He){var Ar,kr,zr;if(this.options.backtrack_lexer&&(zr={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(zr.yylloc.range=this.yylloc.range.slice(0))),(kr=$e[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=kr.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:kr?kr[kr.length-1].length-kr[kr.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+$e[0].length},this.yytext+=$e[0],this.match+=$e[0],this.matches=$e,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice($e[0].length),this.matched+=$e[0],Ar=this.performAction.call(this,this.yy,this,He,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),Ar)return Ar;if(this._backtrack){for(var Er in zr)this[Er]=zr[Er];return!1}return!1},"test_match"),next:(0,A.K2)(function(){if(this.done)return this.EOF;var $e,He,Ar,kr;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var zr=this._currentRules(),Er=0;Er<zr.length;Er++)if((Ar=this._input.match(this.rules[zr[Er]]))&&(!He||Ar[0].length>He[0].length)){if(He=Ar,kr=Er,this.options.backtrack_lexer){if(!1!==($e=this.test_match(Ar,zr[Er])))return $e;if(this._backtrack){He=!1;continue}return!1}if(!this.options.flex)break}return He?!1!==($e=this.test_match(He,zr[kr]))&&$e:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},"next"),lex:(0,A.K2)(function(){return this.next()||this.lex()},"lex"),begin:(0,A.K2)(function(He){this.conditionStack.push(He)},"begin"),popState:(0,A.K2)(function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},"popState"),_currentRules:(0,A.K2)(function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},"_currentRules"),topState:(0,A.K2)(function(He){return(He=this.conditionStack.length-1-Math.abs(He||0))>=0?this.conditionStack[He]:"INITIAL"},"topState"),pushState:(0,A.K2)(function(He){this.begin(He)},"pushState"),stateStackSize:(0,A.K2)(function(){return this.conditionStack.length},"stateStackSize"),options:{"case-insensitive":!0},performAction:(0,A.K2)(function(He,Ar,kr,zr){switch(kr){case 0:return 38;case 1:return 40;case 2:return 39;case 3:return 44;case 4:case 45:return 51;case 5:case 46:return 52;case 6:case 47:return 53;case 7:case 48:return 54;case 8:case 9:case 11:case 12:case 13:case 14:case 57:case 59:case 65:break;case 10:case 80:return 5;case 15:case 35:return this.pushState("SCALE"),17;case 16:case 36:return 18;case 17:case 23:case 37:case 52:case 55:this.popState();break;case 18:return this.begin("acc_title"),33;case 19:return this.popState(),"acc_title_value";case 20:return this.begin("acc_descr"),35;case 21:return this.popState(),"acc_descr_value";case 22:this.begin("acc_descr_multiline");break;case 24:return"acc_descr_multiline_value";case 25:return this.pushState("CLASSDEF"),41;case 26:return this.popState(),this.pushState("CLASSDEFID"),"DEFAULT_CLASSDEF_ID";case 27:return this.popState(),this.pushState("CLASSDEFID"),42;case 28:return this.popState(),43;case 29:return this.pushState("CLASS"),48;case 30:return this.popState(),this.pushState("CLASS_STYLE"),49;case 31:return this.popState(),50;case 32:return this.pushState("STYLE"),45;case 33:return this.popState(),this.pushState("STYLEDEF_STYLES"),46;case 34:return this.popState(),47;case 38:this.pushState("STATE");break;case 39:case 42:return this.popState(),Ar.yytext=Ar.yytext.slice(0,-8).trim(),25;case 40:case 43:return this.popState(),Ar.yytext=Ar.yytext.slice(0,-8).trim(),26;case 41:case 44:return this.popState(),Ar.yytext=Ar.yytext.slice(0,-10).trim(),27;case 49:this.pushState("STATE_STRING");break;case 50:return this.pushState("STATE_ID"),"AS";case 51:case 67:return this.popState(),"ID";case 53:return"STATE_DESCR";case 54:return 19;case 56:return this.popState(),this.pushState("struct"),20;case 58:return this.popState(),21;case 60:return this.begin("NOTE"),29;case 61:return this.popState(),this.pushState("NOTE_ID"),59;case 62:return this.popState(),this.pushState("NOTE_ID"),60;case 63:this.popState(),this.pushState("FLOATING_NOTE");break;case 64:return this.popState(),this.pushState("FLOATING_NOTE_ID"),"AS";case 66:return"NOTE_TEXT";case 68:return this.popState(),this.pushState("NOTE_TEXT"),24;case 69:return this.popState(),Ar.yytext=Ar.yytext.substr(2).trim(),31;case 70:return this.popState(),Ar.yytext=Ar.yytext.slice(0,-8).trim(),31;case 71:case 72:return 6;case 73:return 16;case 74:return 57;case 75:return 24;case 76:return Ar.yytext=Ar.yytext.trim(),14;case 77:return 15;case 78:return 28;case 79:return 58;case 81:return"INVALID"}},"anonymous"),rules:[/^(?:click\b)/i,/^(?:href\b)/i,/^(?:"[^"]*")/i,/^(?:default\b)/i,/^(?:.*direction\s+TB[^\n]*)/i,/^(?:.*direction\s+BT[^\n]*)/i,/^(?:.*direction\s+RL[^\n]*)/i,/^(?:.*direction\s+LR[^\n]*)/i,/^(?:%%(?!\{)[^\n]*)/i,/^(?:[^\}]%%[^\n]*)/i,/^(?:[\n]+)/i,/^(?:[\s]+)/i,/^(?:((?!\n)\s)+)/i,/^(?:#[^\n]*)/i,/^(?:%[^\n]*)/i,/^(?:scale\s+)/i,/^(?:\d+)/i,/^(?:\s+width\b)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:classDef\s+)/i,/^(?:DEFAULT\s+)/i,/^(?:\w+\s+)/i,/^(?:[^\n]*)/i,/^(?:class\s+)/i,/^(?:(\w+)+((,\s*\w+)*))/i,/^(?:[^\n]*)/i,/^(?:style\s+)/i,/^(?:[\w,]+\s+)/i,/^(?:[^\n]*)/i,/^(?:scale\s+)/i,/^(?:\d+)/i,/^(?:\s+width\b)/i,/^(?:state\s+)/i,/^(?:.*<<fork>>)/i,/^(?:.*<<join>>)/i,/^(?:.*<<choice>>)/i,/^(?:.*\[\[fork\]\])/i,/^(?:.*\[\[join\]\])/i,/^(?:.*\[\[choice\]\])/i,/^(?:.*direction\s+TB[^\n]*)/i,/^(?:.*direction\s+BT[^\n]*)/i,/^(?:.*direction\s+RL[^\n]*)/i,/^(?:.*direction\s+LR[^\n]*)/i,/^(?:["])/i,/^(?:\s*as\s+)/i,/^(?:[^\n\{]*)/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:[^\n\s\{]+)/i,/^(?:\n)/i,/^(?:\{)/i,/^(?:%%(?!\{)[^\n]*)/i,/^(?:\})/i,/^(?:[\n])/i,/^(?:note\s+)/i,/^(?:left of\b)/i,/^(?:right of\b)/i,/^(?:")/i,/^(?:\s*as\s*)/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:[^\n]*)/i,/^(?:\s*[^:\n\s\-]+)/i,/^(?:\s*:[^:\n;]+)/i,/^(?:[\s\S]*?end note\b)/i,/^(?:stateDiagram\s+)/i,/^(?:stateDiagram-v2\s+)/i,/^(?:hide empty description\b)/i,/^(?:\[\*\])/i,/^(?:[^:\n\s\-\{]+)/i,/^(?:\s*:[^:\n;]+)/i,/^(?:-->)/i,/^(?:--)/i,/^(?::::)/i,/^(?:$)/i,/^(?:.)/i],conditions:{LINE:{rules:[12,13],inclusive:!1},struct:{rules:[12,13,25,29,32,38,45,46,47,48,57,58,59,60,74,75,76,77,78],inclusive:!1},FLOATING_NOTE_ID:{rules:[67],inclusive:!1},FLOATING_NOTE:{rules:[64,65,66],inclusive:!1},NOTE_TEXT:{rules:[69,70],inclusive:!1},NOTE_ID:{rules:[68],inclusive:!1},NOTE:{rules:[61,62,63],inclusive:!1},STYLEDEF_STYLEOPTS:{rules:[],inclusive:!1},STYLEDEF_STYLES:{rules:[34],inclusive:!1},STYLE_IDS:{rules:[],inclusive:!1},STYLE:{rules:[33],inclusive:!1},CLASS_STYLE:{rules:[31],inclusive:!1},CLASS:{rules:[30],inclusive:!1},CLASSDEFID:{rules:[28],inclusive:!1},CLASSDEF:{rules:[26,27],inclusive:!1},acc_descr_multiline:{rules:[23,24],inclusive:!1},acc_descr:{rules:[21],inclusive:!1},acc_title:{rules:[19],inclusive:!1},SCALE:{rules:[16,17,36,37],inclusive:!1},ALIAS:{rules:[],inclusive:!1},STATE_ID:{rules:[51],inclusive:!1},STATE_STRING:{rules:[52,53],inclusive:!1},FORK_STATE:{rules:[],inclusive:!1},STATE:{rules:[12,13,39,40,41,42,43,44,49,50,54,55,56],inclusive:!1},ID:{rules:[12,13],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,13,14,15,18,20,22,25,29,32,35,38,56,60,71,72,73,74,75,76,77,79,80,81],inclusive:!0}}}}(),(0,A.K2)(hr,"Parser"),hr.prototype=We,We.Parser=hr,new hr}();At.parser=At;var wt=At,q="state",ar="root",Ke="relation",Vr="default",ra="divider",Nr="fill:none",Fr="fill: #333",z="rect",ft="rectWithTitle",X="divider",ae="roundedWithTitle",It="statediagram",V=`${It}-state`,pt="transition",St=`${pt} note-edge`,$t=`${It}-note`,le=`${It}-cluster`,oe=`${It}-cluster-alt`,Tt="----",B=`${Tt}note`,F=`${Tt}parent`,et=(0,A.K2)((ve,ce="TB")=>{if(!ve.doc)return ce;let Ee=ce;for(const De of ve.doc)"dir"===De.stmt&&(Ee=De.value);return Ee},"getDir"),rt={getClasses:(0,A.K2)(function(ve,ce){return ce.db.getClasses()},"getClasses"),draw:(0,A.K2)(function(){var ve=(0,ee.A)(function*(ce,Ee,De,er){A.Rm.info("REF0:"),A.Rm.info("Drawing state diagram (v2)",Ee);const{securityLevel:Qe,state:Lr,layout:_e}=(0,$.D7)();er.db.extract(er.db.getRootDocV2());const Hr=er.db.getData(),sr=(0,L.A)(Ee,Qe);Hr.type=er.type,Hr.layoutAlgorithm=_e,Hr.nodeSpacing=Lr?.nodeSpacing||50,Hr.rankSpacing=Lr?.rankSpacing||50,Hr.markers=["barb"],Hr.diagramId=Ee,yield(0,Pt.XX)(Hr,sr);try{("function"==typeof er.db.getLinks?er.db.getLinks():new Map).forEach((be,ir)=>{const g="string"==typeof ir?ir:"string"==typeof ir?.id?ir.id:"";if(!g)return void A.Rm.warn("\u26a0\ufe0f Invalid or missing stateId from key:",JSON.stringify(ir));const y=sr.node()?.querySelectorAll("g");let E;if(y?.forEach(v=>{v.textContent?.trim()===g&&(E=v)}),!E)return void A.Rm.warn("\u26a0\ufe0f Could not find node matching text:",g);const I=E.parentNode;if(!I)return void A.Rm.warn("\u26a0\ufe0f Node has no parent, cannot wrap:",g);const m=document.createElementNS("http://www.w3.org/2000/svg","a"),D=be.url.replace(/^"+|"+$/g,"");if(m.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",D),m.setAttribute("target","_blank"),be.tooltip){const v=be.tooltip.replace(/^"+|"+$/g,"");m.setAttribute("title",v)}I.replaceChild(m,E),m.appendChild(E),A.Rm.info("\u{1f517} Wrapped node in <a> tag for:",g,be.url)})}catch(ne){A.Rm.error("\u274c Error injecting clickable links:",ne)}ut._K.insertTitle(sr,"statediagramTitleText",Lr?.titleTopMargin??25,er.db.getDiagramTitle()),(0,S.P)(sr,8,It,Lr?.useMaxWidth??!0)});return function(ce,Ee,De,er){return ve.apply(this,arguments)}}(),"draw"),getDir:et},_t=new Map,ht=0;function Ft(ve="",ce=0,Ee="",De=Tt){return`state-${ve}${null!==Ee&&Ee.length>0?`${De}${Ee}`:""}-${ce}`}(0,A.K2)(Ft,"stateDomId");var G=(0,A.K2)((ve,ce,Ee,De,er,Qe,Lr,_e)=>{A.Rm.trace("items",ce),ce.forEach(Hr=>{switch(Hr.stmt){case q:case Vr:pe(ve,Hr,Ee,De,er,Qe,Lr,_e);break;case Ke:{pe(ve,Hr.state1,Ee,De,er,Qe,Lr,_e),pe(ve,Hr.state2,Ee,De,er,Qe,Lr,_e);const sr={id:"edge"+ht,start:Hr.state1.id,end:Hr.state2.id,arrowhead:"normal",arrowTypeEnd:"arrow_barb",style:Nr,labelStyle:"",label:$.Y2.sanitizeText(Hr.description??"",(0,$.D7)()),arrowheadStyle:Fr,labelpos:"c",labelType:"text",thickness:"normal",classes:pt,look:Lr};er.push(sr),ht++}}})},"setupDoc"),lt=(0,A.K2)((ve,ce="TB")=>{let Ee=ce;if(ve.doc)for(const De of ve.doc)"dir"===De.stmt&&(Ee=De.value);return Ee},"getDir");function ke(ve,ce,Ee){if(!ce.id||"</join></fork>"===ce.id||"</choice>"===ce.id)return;ce.cssClasses&&(Array.isArray(ce.cssCompiledStyles)||(ce.cssCompiledStyles=[]),ce.cssClasses.split(" ").forEach(er=>{const Qe=Ee.get(er);Qe&&(ce.cssCompiledStyles=[...ce.cssCompiledStyles??[],...Qe.styles])}));const De=ve.find(er=>er.id===ce.id);De?Object.assign(De,ce):ve.push(ce)}function Mt(ve){return ve?.classes?.join(" ")??""}function Zt(ve){return ve?.styles??[]}(0,A.K2)(ke,"insertOrUpdateNode"),(0,A.K2)(Mt,"getClassesFromDbInfo"),(0,A.K2)(Zt,"getStylesFromDbInfo");var pe=(0,A.K2)((ve,ce,Ee,De,er,Qe,Lr,_e)=>{const Hr=ce.id,sr=Ee.get(Hr),te=Mt(sr),ne=Zt(sr),be=(0,$.D7)();if(A.Rm.info("dataFetcher parsedItem",ce,sr,ne),"root"!==Hr){let ir=z;!0===ce.start?ir="stateStart":!1===ce.start&&(ir="stateEnd"),ce.type!==Vr&&(ir=ce.type),_t.get(Hr)||_t.set(Hr,{id:Hr,shape:ir,description:$.Y2.sanitizeText(Hr,be),cssClasses:`${te} ${V}`,cssStyles:ne});const g=_t.get(Hr);ce.description&&(Array.isArray(g.description)?(g.shape=ft,g.description.push(ce.description)):g.description?.length&&g.description.length>0?(g.shape=ft,g.description=g.description===Hr?[ce.description]:[g.description,ce.description]):(g.shape=z,g.description=ce.description),g.description=$.Y2.sanitizeTextOrArray(g.description,be)),1===g.description?.length&&g.shape===ft&&(g.shape="group"===g.type?ae:z),!g.type&&ce.doc&&(A.Rm.info("Setting cluster for XCX",Hr,lt(ce)),g.type="group",g.isGroup=!0,g.dir=lt(ce),g.shape=ce.type===ra?X:ae,g.cssClasses=`${g.cssClasses} ${le} ${Qe?oe:""}`);const y={labelStyle:"",shape:g.shape,label:g.description,cssClasses:g.cssClasses,cssCompiledStyles:[],cssStyles:g.cssStyles,id:Hr,dir:g.dir,domId:Ft(Hr,ht),type:g.type,isGroup:"group"===g.type,padding:8,rx:10,ry:10,look:Lr};if(y.shape===X&&(y.label=""),ve&&"root"!==ve.id&&(A.Rm.trace("Setting node ",Hr," to be child of its parent ",ve.id),y.parentId=ve.id),y.centerLabel=!0,ce.note){const E={labelStyle:"",shape:"note",label:ce.note.text,cssClasses:$t,cssStyles:[],cssCompiledStyles:[],id:Hr+B+"-"+ht,domId:Ft(Hr,ht,"note"),type:g.type,isGroup:"group"===g.type,padding:be.flowchart?.padding,look:Lr,position:ce.note.position},I=Hr+F,m={labelStyle:"",shape:"noteGroup",label:ce.note.text,cssClasses:g.cssClasses,cssStyles:[],id:Hr+F,domId:Ft(Hr,ht,"parent"),type:"group",isGroup:!0,padding:16,look:Lr,position:ce.note.position};ht++,m.id=I,E.parentId=I,ke(De,m,_e),ke(De,E,_e),ke(De,y,_e);let D=Hr,v=E.id;"left of"===ce.note.position&&(D=E.id,v=Hr),er.push({id:D+"-"+v,start:D,end:v,arrowhead:"none",arrowTypeEnd:"",style:Nr,labelStyle:"",classes:St,arrowheadStyle:Fr,labelpos:"c",labelType:"text",thickness:"normal",look:Lr})}else ke(De,y,_e)}ce.doc&&(A.Rm.trace("Adding nodes children "),G(ce,ce.doc,Ee,De,er,!Qe,Lr,_e))},"dataFetcher"),Re=(0,A.K2)(()=>{_t.clear(),ht=0},"reset"),de=(0,A.K2)(()=>new Map,"newClassesList"),mr=(0,A.K2)(()=>({relations:[],states:new Map,documents:{}}),"newDoc"),xr=(0,A.K2)(ve=>JSON.parse(JSON.stringify(ve)),"clone"),zt=(()=>{var ve;return class{constructor(Ee){this.version=Ee,this.nodes=[],this.edges=[],this.rootDoc=[],this.classes=de(),this.documents={root:mr()},this.currentDocument=this.documents.root,this.startEndCount=0,this.dividerCnt=0,this.links=new Map,this.getAccTitle=$.iN,this.setAccTitle=$.SV,this.getAccDescription=$.m7,this.setAccDescription=$.EI,this.setDiagramTitle=$.ke,this.getDiagramTitle=$.ab,this.clear(),this.setRootDoc=this.setRootDoc.bind(this),this.getDividerId=this.getDividerId.bind(this),this.setDirection=this.setDirection.bind(this),this.trimColon=this.trimColon.bind(this)}extract(Ee){this.clear(!0);for(const Qe of Array.isArray(Ee)?Ee:Ee.doc)switch(Qe.stmt){case q:this.addState(Qe.id.trim(),Qe.type,Qe.doc,Qe.description,Qe.note);break;case Ke:this.addRelation(Qe.state1,Qe.state2,Qe.description);break;case"classDef":this.addStyleClass(Qe.id.trim(),Qe.classes);break;case"style":this.handleStyleDef(Qe);break;case"applyClass":this.setCssClass(Qe.id.trim(),Qe.styleClass);break;case"click":this.addLink(Qe.id,Qe.url,Qe.tooltip)}const De=this.getStates(),er=(0,$.D7)();Re(),pe(void 0,this.getRootDocV2(),De,this.nodes,this.edges,!0,er.look,this.classes);for(const Qe of this.nodes)if(Array.isArray(Qe.label)){if(Qe.description=Qe.label.slice(1),Qe.isGroup&&Qe.description.length>0)throw new Error(`Group nodes can only have label. Remove the additional description for node [${Qe.id}]`);Qe.label=Qe.label[0]}}handleStyleDef(Ee){const De=Ee.id.trim().split(","),er=Ee.styleClass.split(",");for(const Qe of De){let Lr=this.getState(Qe);if(!Lr){const _e=Qe.trim();this.addState(_e),Lr=this.getState(_e)}Lr&&(Lr.styles=er.map(_e=>_e.replace(/;/g,"")?.trim()))}}setRootDoc(Ee){A.Rm.info("Setting root doc",Ee),this.rootDoc=Ee,this.extract(1===this.version?Ee:this.getRootDocV2())}docTranslator(Ee,De,er){if(De.stmt===Ke)return this.docTranslator(Ee,De.state1,!0),void this.docTranslator(Ee,De.state2,!1);if(De.stmt===q&&("[*]"===De.id?(De.id=Ee.id+(er?"_start":"_end"),De.start=er):De.id=De.id.trim()),De.stmt!==ar&&De.stmt!==q||!De.doc)return;const Qe=[];let Lr=[];for(const _e of De.doc)if(_e.type===ra){const Hr=xr(_e);Hr.doc=xr(Lr),Qe.push(Hr),Lr=[]}else Lr.push(_e);if(Qe.length>0&&Lr.length>0){const _e={stmt:q,id:(0,ut.$C)(),type:"divider",doc:xr(Lr)};Qe.push(xr(_e)),De.doc=Qe}De.doc.forEach(_e=>this.docTranslator(De,_e,!0))}getRootDocV2(){return this.docTranslator({id:ar,stmt:ar},{id:ar,stmt:ar,doc:this.rootDoc},!0),{id:ar,doc:this.rootDoc}}addState(Ee,De=Vr,er=void 0,Qe=void 0,Lr=void 0,_e=void 0,Hr=void 0,sr=void 0){const te=Ee?.trim();if(this.currentDocument.states.has(te)){const ne=this.currentDocument.states.get(te);if(!ne)throw new Error(`State not found: ${te}`);ne.doc||(ne.doc=er),ne.type||(ne.type=De)}else A.Rm.info("Adding state ",te,Qe),this.currentDocument.states.set(te,{stmt:q,id:te,descriptions:[],type:De,doc:er,note:Lr,classes:[],styles:[],textStyles:[]});if(Qe&&(A.Rm.info("Setting state description",te,Qe),(Array.isArray(Qe)?Qe:[Qe]).forEach(be=>this.addDescription(te,be.trim()))),Lr){const ne=this.currentDocument.states.get(te);if(!ne)throw new Error(`State not found: ${te}`);ne.note=Lr,ne.note.text=$.Y2.sanitizeText(ne.note.text,(0,$.D7)())}_e&&(A.Rm.info("Setting state classes",te,_e),(Array.isArray(_e)?_e:[_e]).forEach(be=>this.setCssClass(te,be.trim()))),Hr&&(A.Rm.info("Setting state styles",te,Hr),(Array.isArray(Hr)?Hr:[Hr]).forEach(be=>this.setStyle(te,be.trim()))),sr&&(A.Rm.info("Setting state styles",te,Hr),(Array.isArray(sr)?sr:[sr]).forEach(be=>this.setTextStyle(te,be.trim())))}clear(Ee){this.nodes=[],this.edges=[],this.documents={root:mr()},this.currentDocument=this.documents.root,this.startEndCount=0,this.classes=de(),Ee||(this.links=new Map,(0,$.IU)())}getState(Ee){return this.currentDocument.states.get(Ee)}getStates(){return this.currentDocument.states}logDocuments(){A.Rm.info("Documents = ",this.documents)}getRelations(){return this.currentDocument.relations}addLink(Ee,De,er){this.links.set(Ee,{url:De,tooltip:er}),A.Rm.warn("Adding link",Ee,De,er)}getLinks(){return this.links}startIdIfNeeded(Ee=""){return"[*]"===Ee?(this.startEndCount++,`start${this.startEndCount}`):Ee}startTypeIfNeeded(Ee="",De=Vr){return"[*]"===Ee?"start":De}endIdIfNeeded(Ee=""){return"[*]"===Ee?(this.startEndCount++,`end${this.startEndCount}`):Ee}endTypeIfNeeded(Ee="",De=Vr){return"[*]"===Ee?"end":De}addRelationObjs(Ee,De,er=""){const Qe=this.startIdIfNeeded(Ee.id.trim()),Lr=this.startTypeIfNeeded(Ee.id.trim(),Ee.type),_e=this.startIdIfNeeded(De.id.trim()),Hr=this.startTypeIfNeeded(De.id.trim(),De.type);this.addState(Qe,Lr,Ee.doc,Ee.description,Ee.note,Ee.classes,Ee.styles,Ee.textStyles),this.addState(_e,Hr,De.doc,De.description,De.note,De.classes,De.styles,De.textStyles),this.currentDocument.relations.push({id1:Qe,id2:_e,relationTitle:$.Y2.sanitizeText(er,(0,$.D7)())})}addRelation(Ee,De,er){if("object"==typeof Ee&&"object"==typeof De)this.addRelationObjs(Ee,De,er);else if("string"==typeof Ee&&"string"==typeof De){const Qe=this.startIdIfNeeded(Ee.trim()),Lr=this.startTypeIfNeeded(Ee),_e=this.endIdIfNeeded(De.trim()),Hr=this.endTypeIfNeeded(De);this.addState(Qe,Lr),this.addState(_e,Hr),this.currentDocument.relations.push({id1:Qe,id2:_e,relationTitle:er?$.Y2.sanitizeText(er,(0,$.D7)()):void 0})}}addDescription(Ee,De){const er=this.currentDocument.states.get(Ee),Qe=De.startsWith(":")?De.replace(":","").trim():De;er?.descriptions?.push($.Y2.sanitizeText(Qe,(0,$.D7)()))}cleanupLabel(Ee){return Ee.startsWith(":")?Ee.slice(2).trim():Ee.trim()}getDividerId(){return this.dividerCnt++,`divider-id-${this.dividerCnt}`}addStyleClass(Ee,De=""){this.classes.has(Ee)||this.classes.set(Ee,{id:Ee,styles:[],textStyles:[]});const er=this.classes.get(Ee);De&&er&&De.split(",").forEach(Qe=>{const Lr=Qe.replace(/([^;]*);/,"$1").trim();if(RegExp("color").exec(Qe)){const Hr=Lr.replace("fill","bgFill").replace("color","fill");er.textStyles.push(Hr)}er.styles.push(Lr)})}getClasses(){return this.classes}setCssClass(Ee,De){Ee.split(",").forEach(er=>{let Qe=this.getState(er);if(!Qe){const Lr=er.trim();this.addState(Lr),Qe=this.getState(Lr)}Qe?.classes?.push(De)})}setStyle(Ee,De){this.getState(Ee)?.styles?.push(De)}setTextStyle(Ee,De){this.getState(Ee)?.textStyles?.push(De)}getDirectionStatement(){return this.rootDoc.find(Ee=>"dir"===Ee.stmt)}getDirection(){return this.getDirectionStatement()?.value??"TB"}setDirection(Ee){const De=this.getDirectionStatement();De?De.value=Ee:this.rootDoc.unshift({stmt:"dir",value:Ee})}trimColon(Ee){return Ee.startsWith(":")?Ee.slice(1).trim():Ee.trim()}getData(){const Ee=(0,$.D7)();return{nodes:this.nodes,edges:this.edges,other:{},config:Ee,direction:et(this.getRootDocV2())}}getConfig(){return(0,$.D7)().state}static#t=ve=()=>((0,ot.A)(this,"StateDB"),(0,A.K2)(this,"StateDB"),this.relationType={AGGREGATION:0,EXTENSION:1,COMPOSITION:2,DEPENDENCY:3},this)},ve()})(),or=(0,A.K2)(ve=>`\ndefs #statediagram-barbEnd {\n    fill: ${ve.transitionColor};\n    stroke: ${ve.transitionColor};\n  }\ng.stateGroup text {\n  fill: ${ve.nodeBorder};\n  stroke: none;\n  font-size: 10px;\n}\ng.stateGroup text {\n  fill: ${ve.textColor};\n  stroke: none;\n  font-size: 10px;\n\n}\ng.stateGroup .state-title {\n  font-weight: bolder;\n  fill: ${ve.stateLabelColor};\n}\n\ng.stateGroup rect {\n  fill: ${ve.mainBkg};\n  stroke: ${ve.nodeBorder};\n}\n\ng.stateGroup line {\n  stroke: ${ve.lineColor};\n  stroke-width: 1;\n}\n\n.transition {\n  stroke: ${ve.transitionColor};\n  stroke-width: 1;\n  fill: none;\n}\n\n.stateGroup .composit {\n  fill: ${ve.background};\n  border-bottom: 1px\n}\n\n.stateGroup .alt-composit {\n  fill: #e0e0e0;\n  border-bottom: 1px\n}\n\n.state-note {\n  stroke: ${ve.noteBorderColor};\n  fill: ${ve.noteBkgColor};\n\n  text {\n    fill: ${ve.noteTextColor};\n    stroke: none;\n    font-size: 10px;\n  }\n}\n\n.stateLabel .box {\n  stroke: none;\n  stroke-width: 0;\n  fill: ${ve.mainBkg};\n  opacity: 0.5;\n}\n\n.edgeLabel .label rect {\n  fill: ${ve.labelBackgroundColor};\n  opacity: 0.5;\n}\n.edgeLabel {\n  background-color: ${ve.edgeLabelBackground};\n  p {\n    background-color: ${ve.edgeLabelBackground};\n  }\n  rect {\n    opacity: 0.5;\n    background-color: ${ve.edgeLabelBackground};\n    fill: ${ve.edgeLabelBackground};\n  }\n  text-align: center;\n}\n.edgeLabel .label text {\n  fill: ${ve.transitionLabelColor||ve.tertiaryTextColor};\n}\n.label div .edgeLabel {\n  color: ${ve.transitionLabelColor||ve.tertiaryTextColor};\n}\n\n.stateLabel text {\n  fill: ${ve.stateLabelColor};\n  font-size: 10px;\n  font-weight: bold;\n}\n\n.node circle.state-start {\n  fill: ${ve.specialStateColor};\n  stroke: ${ve.specialStateColor};\n}\n\n.node .fork-join {\n  fill: ${ve.specialStateColor};\n  stroke: ${ve.specialStateColor};\n}\n\n.node circle.state-end {\n  fill: ${ve.innerEndBackground};\n  stroke: ${ve.background};\n  stroke-width: 1.5\n}\n.end-state-inner {\n  fill: ${ve.compositeBackground||ve.background};\n  // stroke: ${ve.background};\n  stroke-width: 1.5\n}\n\n.node rect {\n  fill: ${ve.stateBkg||ve.mainBkg};\n  stroke: ${ve.stateBorder||ve.nodeBorder};\n  stroke-width: 1px;\n}\n.node polygon {\n  fill: ${ve.mainBkg};\n  stroke: ${ve.stateBorder||ve.nodeBorder};;\n  stroke-width: 1px;\n}\n#statediagram-barbEnd {\n  fill: ${ve.lineColor};\n}\n\n.statediagram-cluster rect {\n  fill: ${ve.compositeTitleBackground};\n  stroke: ${ve.stateBorder||ve.nodeBorder};\n  stroke-width: 1px;\n}\n\n.cluster-label, .nodeLabel {\n  color: ${ve.stateLabelColor};\n  // line-height: 1;\n}\n\n.statediagram-cluster rect.outer {\n  rx: 5px;\n  ry: 5px;\n}\n.statediagram-state .divider {\n  stroke: ${ve.stateBorder||ve.nodeBorder};\n}\n\n.statediagram-state .title-state {\n  rx: 5px;\n  ry: 5px;\n}\n.statediagram-cluster.statediagram-cluster .inner {\n  fill: ${ve.compositeBackground||ve.background};\n}\n.statediagram-cluster.statediagram-cluster-alt .inner {\n  fill: ${ve.altBackground?ve.altBackground:"#efefef"};\n}\n\n.statediagram-cluster .inner {\n  rx:0;\n  ry:0;\n}\n\n.statediagram-state rect.basic {\n  rx: 5px;\n  ry: 5px;\n}\n.statediagram-state rect.divider {\n  stroke-dasharray: 10,10;\n  fill: ${ve.altBackground?ve.altBackground:"#efefef"};\n}\n\n.note-edge {\n  stroke-dasharray: 5;\n}\n\n.statediagram-note rect {\n  fill: ${ve.noteBkgColor};\n  stroke: ${ve.noteBorderColor};\n  stroke-width: 1px;\n  rx: 0;\n  ry: 0;\n}\n.statediagram-note rect {\n  fill: ${ve.noteBkgColor};\n  stroke: ${ve.noteBorderColor};\n  stroke-width: 1px;\n  rx: 0;\n  ry: 0;\n}\n\n.statediagram-note text {\n  fill: ${ve.noteTextColor};\n}\n\n.statediagram-note .nodeLabel {\n  color: ${ve.noteTextColor};\n}\n.statediagram .edgeLabel {\n  color: red; // ${ve.noteTextColor};\n}\n\n#dependencyStart, #dependencyEnd {\n  fill: ${ve.lineColor};\n  stroke: ${ve.lineColor};\n  stroke-width: 1;\n}\n\n.statediagramTitleText {\n  text-anchor: middle;\n  font-size: 18px;\n  fill: ${ve.textColor};\n}\n`,"getStyles")},54256:(Ja,vr,R)=>{"use strict";R.d(vr,{Lh:()=>je,NM:()=>Vr,_$:()=>q,tM:()=>Nr});var Ge,dt,ot=R(89204),ee=R(45027),L=R(97787),S=R(5675),Pt=R(8086),ut=R(72271),$=R(52052),A=R(79006),At=R(32303),wt=R(40622),Rt=function(){var z=(0,At.K2)(function(g,y,E,I){for(E=E||{},I=g.length;I--;E[g[I]]=y);return E},"o"),ft=[1,18],Bt=[1,19],we=[1,20],X=[1,41],ae=[1,42],w=[1,26],re=[1,24],It=[1,25],qt=[1,32],V=[1,33],pt=[1,34],H=[1,45],Nt=[1,35],St=[1,36],$t=[1,37],ye=[1,38],le=[1,27],Pe=[1,28],oe=[1,29],qe=[1,30],ze=[1,31],Et=[1,44],Tt=[1,46],B=[1,43],F=[1,47],et=[1,9],mt=[1,8,9],it=[1,58],rt=[1,59],_t=[1,60],ht=[1,61],Ft=[1,62],G=[1,63],lt=[1,64],ke=[1,8,9,41],Mt=[1,76],Zt=[1,8,9,12,13,22,39,41,44,68,69,70,71,72,73,74,79,81],pe=[1,8,9,12,13,18,20,22,39,41,44,50,60,68,69,70,71,72,73,74,79,81,86,100,102,103],Re=[13,60,86,100,102,103],Ze=[13,60,73,74,86,100,102,103],de=[13,60,68,69,70,71,72,86,100,102,103],mr=[1,100],xr=[1,117],zt=[1,113],Ae=[1,109],or=[1,115],ve=[1,110],ce=[1,111],Ee=[1,112],De=[1,114],er=[1,116],Qe=[22,48,60,61,82,86,87,88,89,90],Lr=[1,8,9,39,41,44],_e=[1,8,9,22],Hr=[1,145],sr=[1,8,9,61],te=[1,8,9,22,48,60,61,82,86,87,88,89,90],ne={trace:(0,At.K2)(function(){},"trace"),yy:{},symbols_:{error:2,start:3,mermaidDoc:4,statements:5,graphConfig:6,CLASS_DIAGRAM:7,NEWLINE:8,EOF:9,statement:10,classLabel:11,SQS:12,STR:13,SQE:14,namespaceName:15,alphaNumToken:16,classLiteralName:17,DOT:18,className:19,GENERICTYPE:20,relationStatement:21,LABEL:22,namespaceStatement:23,classStatement:24,memberStatement:25,annotationStatement:26,clickStatement:27,styleStatement:28,cssClassStatement:29,noteStatement:30,classDefStatement:31,direction:32,acc_title:33,acc_title_value:34,acc_descr:35,acc_descr_value:36,acc_descr_multiline_value:37,namespaceIdentifier:38,STRUCT_START:39,classStatements:40,STRUCT_STOP:41,NAMESPACE:42,classIdentifier:43,STYLE_SEPARATOR:44,members:45,CLASS:46,emptyBody:47,SPACE:48,ANNOTATION_START:49,ANNOTATION_END:50,MEMBER:51,SEPARATOR:52,relation:53,NOTE_FOR:54,noteText:55,NOTE:56,CLASSDEF:57,classList:58,stylesOpt:59,ALPHA:60,COMMA:61,direction_tb:62,direction_bt:63,direction_rl:64,direction_lr:65,relationType:66,lineType:67,AGGREGATION:68,EXTENSION:69,COMPOSITION:70,DEPENDENCY:71,LOLLIPOP:72,LINE:73,DOTTED_LINE:74,CALLBACK:75,LINK:76,LINK_TARGET:77,CLICK:78,CALLBACK_NAME:79,CALLBACK_ARGS:80,HREF:81,STYLE:82,CSSCLASS:83,style:84,styleComponent:85,NUM:86,COLON:87,UNIT:88,BRKT:89,PCT:90,commentToken:91,textToken:92,graphCodeTokens:93,textNoTagsToken:94,TAGSTART:95,TAGEND:96,"==":97,"--":98,DEFAULT:99,MINUS:100,keywords:101,UNICODE_TEXT:102,BQUOTE_STR:103,$accept:0,$end:1},terminals_:{2:"error",7:"CLASS_DIAGRAM",8:"NEWLINE",9:"EOF",12:"SQS",13:"STR",14:"SQE",18:"DOT",20:"GENERICTYPE",22:"LABEL",33:"acc_title",34:"acc_title_value",35:"acc_descr",36:"acc_descr_value",37:"acc_descr_multiline_value",39:"STRUCT_START",41:"STRUCT_STOP",42:"NAMESPACE",44:"STYLE_SEPARATOR",46:"CLASS",48:"SPACE",49:"ANNOTATION_START",50:"ANNOTATION_END",51:"MEMBER",52:"SEPARATOR",54:"NOTE_FOR",56:"NOTE",57:"CLASSDEF",60:"ALPHA",61:"COMMA",62:"direction_tb",63:"direction_bt",64:"direction_rl",65:"direction_lr",68:"AGGREGATION",69:"EXTENSION",70:"COMPOSITION",71:"DEPENDENCY",72:"LOLLIPOP",73:"LINE",74:"DOTTED_LINE",75:"CALLBACK",76:"LINK",77:"LINK_TARGET",78:"CLICK",79:"CALLBACK_NAME",80:"CALLBACK_ARGS",81:"HREF",82:"STYLE",83:"CSSCLASS",86:"NUM",87:"COLON",88:"UNIT",89:"BRKT",90:"PCT",93:"graphCodeTokens",95:"TAGSTART",96:"TAGEND",97:"==",98:"--",99:"DEFAULT",100:"MINUS",101:"keywords",102:"UNICODE_TEXT",103:"BQUOTE_STR"},productions_:[0,[3,1],[3,1],[4,1],[6,4],[5,1],[5,2],[5,3],[11,3],[15,1],[15,1],[15,3],[15,2],[19,1],[19,3],[19,1],[19,2],[19,2],[19,2],[10,1],[10,2],[10,1],[10,1],[10,1],[10,1],[10,1],[10,1],[10,1],[10,1],[10,1],[10,1],[10,2],[10,2],[10,1],[23,4],[23,5],[38,2],[40,1],[40,2],[40,3],[24,1],[24,3],[24,4],[24,3],[24,6],[43,2],[43,3],[47,0],[47,2],[47,2],[26,4],[45,1],[45,2],[25,1],[25,2],[25,1],[25,1],[21,3],[21,4],[21,4],[21,5],[30,3],[30,2],[31,3],[58,1],[58,3],[32,1],[32,1],[32,1],[32,1],[53,3],[53,2],[53,2],[53,1],[66,1],[66,1],[66,1],[66,1],[66,1],[67,1],[67,1],[27,3],[27,4],[27,3],[27,4],[27,4],[27,5],[27,3],[27,4],[27,4],[27,5],[27,4],[27,5],[27,5],[27,6],[28,3],[29,3],[59,1],[59,3],[84,1],[84,2],[85,1],[85,1],[85,1],[85,1],[85,1],[85,1],[85,1],[85,1],[85,1],[91,1],[91,1],[92,1],[92,1],[92,1],[92,1],[92,1],[92,1],[92,1],[94,1],[94,1],[94,1],[94,1],[16,1],[16,1],[16,1],[16,1],[17,1],[55,1]],performAction:(0,At.K2)(function(y,E,I,m,D,v,b){var C=v.length-1;switch(D){case 8:this.$=v[C-1];break;case 9:case 10:case 13:case 15:this.$=v[C];break;case 11:case 14:this.$=v[C-2]+"."+v[C];break;case 12:case 16:case 100:this.$=v[C-1]+v[C];break;case 17:case 18:this.$=v[C-1]+"~"+v[C]+"~";break;case 19:m.addRelation(v[C]);break;case 20:v[C-1].title=m.cleanupLabel(v[C]),m.addRelation(v[C-1]);break;case 31:this.$=v[C].trim(),m.setAccTitle(this.$);break;case 32:case 33:this.$=v[C].trim(),m.setAccDescription(this.$);break;case 34:m.addClassesToNamespace(v[C-3],v[C-1]);break;case 35:m.addClassesToNamespace(v[C-4],v[C-1]);break;case 36:this.$=v[C],m.addNamespace(v[C]);break;case 37:case 51:case 64:case 97:this.$=[v[C]];break;case 38:this.$=[v[C-1]];break;case 39:v[C].unshift(v[C-2]),this.$=v[C];break;case 41:m.setCssClass(v[C-2],v[C]);break;case 42:m.addMembers(v[C-3],v[C-1]);break;case 44:m.setCssClass(v[C-5],v[C-3]),m.addMembers(v[C-5],v[C-1]);break;case 45:this.$=v[C],m.addClass(v[C]);break;case 46:this.$=v[C-1],m.addClass(v[C-1]),m.setClassLabel(v[C-1],v[C]);break;case 50:m.addAnnotation(v[C],v[C-2]);break;case 52:v[C].push(v[C-1]),this.$=v[C];break;case 53:case 55:case 56:break;case 54:m.addMember(v[C-1],m.cleanupLabel(v[C]));break;case 57:this.$={id1:v[C-2],id2:v[C],relation:v[C-1],relationTitle1:"none",relationTitle2:"none"};break;case 58:this.$={id1:v[C-3],id2:v[C],relation:v[C-1],relationTitle1:v[C-2],relationTitle2:"none"};break;case 59:this.$={id1:v[C-3],id2:v[C],relation:v[C-2],relationTitle1:"none",relationTitle2:v[C-1]};break;case 60:this.$={id1:v[C-4],id2:v[C],relation:v[C-2],relationTitle1:v[C-3],relationTitle2:v[C-1]};break;case 61:m.addNote(v[C],v[C-1]);break;case 62:m.addNote(v[C]);break;case 63:this.$=v[C-2],m.defineClass(v[C-1],v[C]);break;case 65:this.$=v[C-2].concat([v[C]]);break;case 66:m.setDirection("TB");break;case 67:m.setDirection("BT");break;case 68:m.setDirection("RL");break;case 69:m.setDirection("LR");break;case 70:this.$={type1:v[C-2],type2:v[C],lineType:v[C-1]};break;case 71:this.$={type1:"none",type2:v[C],lineType:v[C-1]};break;case 72:this.$={type1:v[C-1],type2:"none",lineType:v[C]};break;case 73:this.$={type1:"none",type2:"none",lineType:v[C]};break;case 74:this.$=m.relationType.AGGREGATION;break;case 75:this.$=m.relationType.EXTENSION;break;case 76:this.$=m.relationType.COMPOSITION;break;case 77:this.$=m.relationType.DEPENDENCY;break;case 78:this.$=m.relationType.LOLLIPOP;break;case 79:this.$=m.lineType.LINE;break;case 80:this.$=m.lineType.DOTTED_LINE;break;case 81:case 87:this.$=v[C-2],m.setClickEvent(v[C-1],v[C]);break;case 82:case 88:this.$=v[C-3],m.setClickEvent(v[C-2],v[C-1]),m.setTooltip(v[C-2],v[C]);break;case 83:this.$=v[C-2],m.setLink(v[C-1],v[C]);break;case 84:this.$=v[C-3],m.setLink(v[C-2],v[C-1],v[C]);break;case 85:this.$=v[C-3],m.setLink(v[C-2],v[C-1]),m.setTooltip(v[C-2],v[C]);break;case 86:this.$=v[C-4],m.setLink(v[C-3],v[C-2],v[C]),m.setTooltip(v[C-3],v[C-1]);break;case 89:this.$=v[C-3],m.setClickEvent(v[C-2],v[C-1],v[C]);break;case 90:this.$=v[C-4],m.setClickEvent(v[C-3],v[C-2],v[C-1]),m.setTooltip(v[C-3],v[C]);break;case 91:this.$=v[C-3],m.setLink(v[C-2],v[C]);break;case 92:this.$=v[C-4],m.setLink(v[C-3],v[C-1],v[C]);break;case 93:this.$=v[C-4],m.setLink(v[C-3],v[C-1]),m.setTooltip(v[C-3],v[C]);break;case 94:this.$=v[C-5],m.setLink(v[C-4],v[C-2],v[C]),m.setTooltip(v[C-4],v[C-1]);break;case 95:this.$=v[C-2],m.setCssStyle(v[C-1],v[C]);break;case 96:m.setCssClass(v[C-1],v[C]);break;case 98:v[C-2].push(v[C]),this.$=v[C-2]}},"anonymous"),table:[{3:1,4:2,5:3,6:4,7:[1,6],10:5,16:39,17:40,19:21,21:7,23:8,24:9,25:10,26:11,27:12,28:13,29:14,30:15,31:16,32:17,33:ft,35:Bt,37:we,38:22,42:X,43:23,46:ae,49:w,51:re,52:It,54:qt,56:V,57:pt,60:H,62:Nt,63:St,64:$t,65:ye,75:le,76:Pe,78:oe,82:qe,83:ze,86:Et,100:Tt,102:B,103:F},{1:[3]},{1:[2,1]},{1:[2,2]},{1:[2,3]},z(et,[2,5],{8:[1,48]}),{8:[1,49]},z(mt,[2,19],{22:[1,50]}),z(mt,[2,21]),z(mt,[2,22]),z(mt,[2,23]),z(mt,[2,24]),z(mt,[2,25]),z(mt,[2,26]),z(mt,[2,27]),z(mt,[2,28]),z(mt,[2,29]),z(mt,[2,30]),{34:[1,51]},{36:[1,52]},z(mt,[2,33]),z(mt,[2,53],{53:53,66:56,67:57,13:[1,54],22:[1,55],68:it,69:rt,70:_t,71:ht,72:Ft,73:G,74:lt}),{39:[1,65]},z(ke,[2,40],{39:[1,67],44:[1,66]}),z(mt,[2,55]),z(mt,[2,56]),{16:68,60:H,86:Et,100:Tt,102:B},{16:39,17:40,19:69,60:H,86:Et,100:Tt,102:B,103:F},{16:39,17:40,19:70,60:H,86:Et,100:Tt,102:B,103:F},{16:39,17:40,19:71,60:H,86:Et,100:Tt,102:B,103:F},{60:[1,72]},{13:[1,73]},{16:39,17:40,19:74,60:H,86:Et,100:Tt,102:B,103:F},{13:Mt,55:75},{58:77,60:[1,78]},z(mt,[2,66]),z(mt,[2,67]),z(mt,[2,68]),z(mt,[2,69]),z(Zt,[2,13],{16:39,17:40,19:80,18:[1,79],20:[1,81],60:H,86:Et,100:Tt,102:B,103:F}),z(Zt,[2,15],{20:[1,82]}),{15:83,16:84,17:85,60:H,86:Et,100:Tt,102:B,103:F},{16:39,17:40,19:86,60:H,86:Et,100:Tt,102:B,103:F},z(pe,[2,123]),z(pe,[2,124]),z(pe,[2,125]),z(pe,[2,126]),z([1,8,9,12,13,20,22,39,41,44,68,69,70,71,72,73,74,79,81],[2,127]),z(et,[2,6],{10:5,21:7,23:8,24:9,25:10,26:11,27:12,28:13,29:14,30:15,31:16,32:17,19:21,38:22,43:23,16:39,17:40,5:87,33:ft,35:Bt,37:we,42:X,46:ae,49:w,51:re,52:It,54:qt,56:V,57:pt,60:H,62:Nt,63:St,64:$t,65:ye,75:le,76:Pe,78:oe,82:qe,83:ze,86:Et,100:Tt,102:B,103:F}),{5:88,10:5,16:39,17:40,19:21,21:7,23:8,24:9,25:10,26:11,27:12,28:13,29:14,30:15,31:16,32:17,33:ft,35:Bt,37:we,38:22,42:X,43:23,46:ae,49:w,51:re,52:It,54:qt,56:V,57:pt,60:H,62:Nt,63:St,64:$t,65:ye,75:le,76:Pe,78:oe,82:qe,83:ze,86:Et,100:Tt,102:B,103:F},z(mt,[2,20]),z(mt,[2,31]),z(mt,[2,32]),{13:[1,90],16:39,17:40,19:89,60:H,86:Et,100:Tt,102:B,103:F},{53:91,66:56,67:57,68:it,69:rt,70:_t,71:ht,72:Ft,73:G,74:lt},z(mt,[2,54]),{67:92,73:G,74:lt},z(Re,[2,73],{66:93,68:it,69:rt,70:_t,71:ht,72:Ft}),z(Ze,[2,74]),z(Ze,[2,75]),z(Ze,[2,76]),z(Ze,[2,77]),z(Ze,[2,78]),z(de,[2,79]),z(de,[2,80]),{8:[1,95],24:96,40:94,43:23,46:ae},{16:97,60:H,86:Et,100:Tt,102:B},{41:[1,99],45:98,51:mr},{50:[1,101]},{13:[1,102]},{13:[1,103]},{79:[1,104],81:[1,105]},{22:xr,48:zt,59:106,60:Ae,82:or,84:107,85:108,86:ve,87:ce,88:Ee,89:De,90:er},{60:[1,118]},{13:Mt,55:119},z(mt,[2,62]),z(mt,[2,128]),{22:xr,48:zt,59:120,60:Ae,61:[1,121],82:or,84:107,85:108,86:ve,87:ce,88:Ee,89:De,90:er},z(Qe,[2,64]),{16:39,17:40,19:122,60:H,86:Et,100:Tt,102:B,103:F},z(Zt,[2,16]),z(Zt,[2,17]),z(Zt,[2,18]),{39:[2,36]},{15:124,16:84,17:85,18:[1,123],39:[2,9],60:H,86:Et,100:Tt,102:B,103:F},{39:[2,10]},z(Lr,[2,45],{11:125,12:[1,126]}),z(et,[2,7]),{9:[1,127]},z(_e,[2,57]),{16:39,17:40,19:128,60:H,86:Et,100:Tt,102:B,103:F},{13:[1,130],16:39,17:40,19:129,60:H,86:Et,100:Tt,102:B,103:F},z(Re,[2,72],{66:131,68:it,69:rt,70:_t,71:ht,72:Ft}),z(Re,[2,71]),{41:[1,132]},{24:96,40:133,43:23,46:ae},{8:[1,134],41:[2,37]},z(ke,[2,41],{39:[1,135]}),{41:[1,136]},z(ke,[2,43]),{41:[2,51],45:137,51:mr},{16:39,17:40,19:138,60:H,86:Et,100:Tt,102:B,103:F},z(mt,[2,81],{13:[1,139]}),z(mt,[2,83],{13:[1,141],77:[1,140]}),z(mt,[2,87],{13:[1,142],80:[1,143]}),{13:[1,144]},z(mt,[2,95],{61:Hr}),z(sr,[2,97],{85:146,22:xr,48:zt,60:Ae,82:or,86:ve,87:ce,88:Ee,89:De,90:er}),z(te,[2,99]),z(te,[2,101]),z(te,[2,102]),z(te,[2,103]),z(te,[2,104]),z(te,[2,105]),z(te,[2,106]),z(te,[2,107]),z(te,[2,108]),z(te,[2,109]),z(mt,[2,96]),z(mt,[2,61]),z(mt,[2,63],{61:Hr}),{60:[1,147]},z(Zt,[2,14]),{15:148,16:84,17:85,60:H,86:Et,100:Tt,102:B,103:F},{39:[2,12]},z(Lr,[2,46]),{13:[1,149]},{1:[2,4]},z(_e,[2,59]),z(_e,[2,58]),{16:39,17:40,19:150,60:H,86:Et,100:Tt,102:B,103:F},z(Re,[2,70]),z(mt,[2,34]),{41:[1,151]},{24:96,40:152,41:[2,38],43:23,46:ae},{45:153,51:mr},z(ke,[2,42]),{41:[2,52]},z(mt,[2,50]),z(mt,[2,82]),z(mt,[2,84]),z(mt,[2,85],{77:[1,154]}),z(mt,[2,88]),z(mt,[2,89],{13:[1,155]}),z(mt,[2,91],{13:[1,157],77:[1,156]}),{22:xr,48:zt,60:Ae,82:or,84:158,85:108,86:ve,87:ce,88:Ee,89:De,90:er},z(te,[2,100]),z(Qe,[2,65]),{39:[2,11]},{14:[1,159]},z(_e,[2,60]),z(mt,[2,35]),{41:[2,39]},{41:[1,160]},z(mt,[2,86]),z(mt,[2,90]),z(mt,[2,92]),z(mt,[2,93],{77:[1,161]}),z(sr,[2,98],{85:146,22:xr,48:zt,60:Ae,82:or,86:ve,87:ce,88:Ee,89:De,90:er}),z(Lr,[2,8]),z(ke,[2,44]),z(mt,[2,94])],defaultActions:{2:[2,1],3:[2,2],4:[2,3],83:[2,36],85:[2,10],124:[2,12],127:[2,4],137:[2,52],148:[2,11],152:[2,39]},parseError:(0,At.K2)(function(y,E){if(!E.recoverable){var I=new Error(y);throw I.hash=E,I}this.trace(y)},"parseError"),parse:(0,At.K2)(function(y){var E=this,I=[0],m=[],D=[null],v=[],b=this.table,C="",P=0,Q=0,xt=0,Ut=v.slice.call(arguments,1),Wt=Object.create(this.lexer),xe={yy:{}};for(var Xe in this.yy)Object.prototype.hasOwnProperty.call(this.yy,Xe)&&(xe.yy[Xe]=this.yy[Xe]);Wt.setInput(y,xe.yy),xe.yy.lexer=Wt,xe.yy.parser=this,typeof Wt.yylloc>"u"&&(Wt.yylloc={});var We=Wt.yylloc;v.push(We);var gr=Wt.options&&Wt.options.ranges;function _r(){var lr;return"number"!=typeof(lr=m.pop()||Wt.lex()||1)&&(lr instanceof Array&&(lr=(m=lr).pop()),lr=E.symbols_[lr]||lr),lr}this.parseError="function"==typeof xe.yy.parseError?xe.yy.parseError:Object.getPrototypeOf(this).parseError,(0,At.K2)(function hr(lr){I.length=I.length-2*lr,D.length=D.length-lr,v.length=v.length-lr},"popStack"),(0,At.K2)(_r,"lex");for(var $e,He,Ar,kr,Er,Br,ha,jr,Jr={};;){if(this.defaultActions[Ar=I[I.length-1]]?kr=this.defaultActions[Ar]:((null===$e||typeof $e>"u")&&($e=_r()),kr=b[Ar]&&b[Ar][$e]),typeof kr>"u"||!kr.length||!kr[0]){var Qr;for(Br in jr=[],b[Ar])this.terminals_[Br]&&Br>2&&jr.push("'"+this.terminals_[Br]+"'");Qr=Wt.showPosition?"Parse error on line "+(P+1)+":\n"+Wt.showPosition()+"\nExpecting "+jr.join(", ")+", got '"+(this.terminals_[$e]||$e)+"'":"Parse error on line "+(P+1)+": Unexpected "+(1==$e?"end of input":"'"+(this.terminals_[$e]||$e)+"'"),this.parseError(Qr,{text:Wt.match,token:this.terminals_[$e]||$e,line:Wt.yylineno,loc:We,expected:jr})}if(kr[0]instanceof Array&&kr.length>1)throw new Error("Parse Error: multiple actions possible at state: "+Ar+", token: "+$e);switch(kr[0]){case 1:I.push($e),D.push(Wt.yytext),v.push(Wt.yylloc),I.push(kr[1]),$e=null,He?($e=He,He=null):(Q=Wt.yyleng,C=Wt.yytext,P=Wt.yylineno,We=Wt.yylloc,xt>0&&xt--);break;case 2:if(Jr.$=D[D.length-(ha=this.productions_[kr[1]][1])],Jr._$={first_line:v[v.length-(ha||1)].first_line,last_line:v[v.length-1].last_line,first_column:v[v.length-(ha||1)].first_column,last_column:v[v.length-1].last_column},gr&&(Jr._$.range=[v[v.length-(ha||1)].range[0],v[v.length-1].range[1]]),typeof(Er=this.performAction.apply(Jr,[C,Q,P,xe.yy,kr[1],D,v].concat(Ut)))<"u")return Er;ha&&(I=I.slice(0,-1*ha*2),D=D.slice(0,-1*ha),v=v.slice(0,-1*ha)),I.push(this.productions_[kr[1]][0]),D.push(Jr.$),v.push(Jr._$),I.push(b[I[I.length-2]][I[I.length-1]]);break;case 3:return!0}}return!0},"parse")};function ir(){this.yy={}}return ne.lexer=function(){return{EOF:1,parseError:(0,At.K2)(function(E,I){if(!this.yy.parser)throw new Error(E);this.yy.parser.parseError(E,I)},"parseError"),setInput:(0,At.K2)(function(y,E){return this.yy=E||this.yy||{},this._input=y,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},"setInput"),input:(0,At.K2)(function(){var y=this._input[0];return this.yytext+=y,this.yyleng++,this.offset++,this.match+=y,this.matched+=y,y.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),y},"input"),unput:(0,At.K2)(function(y){var E=y.length,I=y.split(/(?:\r\n?|\n)/g);this._input=y+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-E),this.offset-=E;var m=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),I.length-1&&(this.yylineno-=I.length-1);var D=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:I?(I.length===m.length?this.yylloc.first_column:0)+m[m.length-I.length].length-I[0].length:this.yylloc.first_column-E},this.options.ranges&&(this.yylloc.range=[D[0],D[0]+this.yyleng-E]),this.yyleng=this.yytext.length,this},"unput"),more:(0,At.K2)(function(){return this._more=!0,this},"more"),reject:(0,At.K2)(function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},"reject"),less:(0,At.K2)(function(y){this.unput(this.match.slice(y))},"less"),pastInput:(0,At.K2)(function(){var y=this.matched.substr(0,this.matched.length-this.match.length);return(y.length>20?"...":"")+y.substr(-20).replace(/\n/g,"")},"pastInput"),upcomingInput:(0,At.K2)(function(){var y=this.match;return y.length<20&&(y+=this._input.substr(0,20-y.length)),(y.substr(0,20)+(y.length>20?"...":"")).replace(/\n/g,"")},"upcomingInput"),showPosition:(0,At.K2)(function(){var y=this.pastInput(),E=new Array(y.length+1).join("-");return y+this.upcomingInput()+"\n"+E+"^"},"showPosition"),test_match:(0,At.K2)(function(y,E){var I,m,D;if(this.options.backtrack_lexer&&(D={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(D.yylloc.range=this.yylloc.range.slice(0))),(m=y[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=m.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:m?m[m.length-1].length-m[m.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+y[0].length},this.yytext+=y[0],this.match+=y[0],this.matches=y,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(y[0].length),this.matched+=y[0],I=this.performAction.call(this,this.yy,this,E,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),I)return I;if(this._backtrack){for(var v in D)this[v]=D[v];return!1}return!1},"test_match"),next:(0,At.K2)(function(){if(this.done)return this.EOF;var y,E,I,m;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var D=this._currentRules(),v=0;v<D.length;v++)if((I=this._input.match(this.rules[D[v]]))&&(!E||I[0].length>E[0].length)){if(E=I,m=v,this.options.backtrack_lexer){if(!1!==(y=this.test_match(I,D[v])))return y;if(this._backtrack){E=!1;continue}return!1}if(!this.options.flex)break}return E?!1!==(y=this.test_match(E,D[m]))&&y:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},"next"),lex:(0,At.K2)(function(){return this.next()||this.lex()},"lex"),begin:(0,At.K2)(function(E){this.conditionStack.push(E)},"begin"),popState:(0,At.K2)(function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},"popState"),_currentRules:(0,At.K2)(function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},"_currentRules"),topState:(0,At.K2)(function(E){return(E=this.conditionStack.length-1-Math.abs(E||0))>=0?this.conditionStack[E]:"INITIAL"},"topState"),pushState:(0,At.K2)(function(E){this.begin(E)},"pushState"),stateStackSize:(0,At.K2)(function(){return this.conditionStack.length},"stateStackSize"),options:{},performAction:(0,At.K2)(function(E,I,m,D){switch(m){case 0:return 62;case 1:return 63;case 2:return 64;case 3:return 65;case 4:case 5:case 14:case 31:case 36:case 40:case 47:break;case 6:return this.begin("acc_title"),33;case 7:return this.popState(),"acc_title_value";case 8:return this.begin("acc_descr"),35;case 9:return this.popState(),"acc_descr_value";case 10:this.begin("acc_descr_multiline");break;case 11:case 19:case 22:case 24:case 58:case 61:this.popState();break;case 12:return"acc_descr_multiline_value";case 13:case 35:return 8;case 15:case 16:return 7;case 17:case 37:case 45:return"EDGE_STATE";case 18:this.begin("callback_name");break;case 20:this.popState(),this.begin("callback_args");break;case 21:return 79;case 23:return 80;case 25:return"STR";case 26:this.begin("string");break;case 27:return 82;case 28:return 57;case 29:return this.begin("namespace"),42;case 30:case 39:return this.popState(),8;case 32:return this.begin("namespace-body"),39;case 33:case 43:return this.popState(),41;case 34:case 44:return"EOF_IN_STRUCT";case 38:return this.begin("class"),46;case 41:return this.popState(),this.popState(),41;case 42:return this.begin("class-body"),39;case 46:return"OPEN_IN_STRUCT";case 48:return"MEMBER";case 49:return 83;case 50:return 75;case 51:return 76;case 52:return 78;case 53:return 54;case 54:return 56;case 55:return 49;case 56:return 50;case 57:return 81;case 59:return"GENERICTYPE";case 60:this.begin("generic");break;case 62:return"BQUOTE_STR";case 63:this.begin("bqstring");break;case 64:case 65:case 66:case 67:return 77;case 68:case 69:return 69;case 70:case 71:return 71;case 72:return 70;case 73:return 68;case 74:return 72;case 75:return 73;case 76:return 74;case 77:return 22;case 78:return 44;case 79:return 100;case 80:return 18;case 81:return"PLUS";case 82:return 87;case 83:return 61;case 84:case 85:return 89;case 86:return 90;case 87:case 88:return"EQUALS";case 89:return 60;case 90:return 12;case 91:return 14;case 92:return"PUNCTUATION";case 93:return 86;case 94:return 102;case 95:case 96:return 48;case 97:return 9}},"anonymous"),rules:[/^(?:.*direction\s+TB[^\n]*)/,/^(?:.*direction\s+BT[^\n]*)/,/^(?:.*direction\s+RL[^\n]*)/,/^(?:.*direction\s+LR[^\n]*)/,/^(?:%%(?!\{)*[^\n]*(\r?\n?)+)/,/^(?:%%[^\n]*(\r?\n)*)/,/^(?:accTitle\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*\{\s*)/,/^(?:[\}])/,/^(?:[^\}]*)/,/^(?:\s*(\r?\n)+)/,/^(?:\s+)/,/^(?:classDiagram-v2\b)/,/^(?:classDiagram\b)/,/^(?:\[\*\])/,/^(?:call[\s]+)/,/^(?:\([\s]*\))/,/^(?:\()/,/^(?:[^(]*)/,/^(?:\))/,/^(?:[^)]*)/,/^(?:["])/,/^(?:[^"]*)/,/^(?:["])/,/^(?:style\b)/,/^(?:classDef\b)/,/^(?:namespace\b)/,/^(?:\s*(\r?\n)+)/,/^(?:\s+)/,/^(?:[{])/,/^(?:[}])/,/^(?:$)/,/^(?:\s*(\r?\n)+)/,/^(?:\s+)/,/^(?:\[\*\])/,/^(?:class\b)/,/^(?:\s*(\r?\n)+)/,/^(?:\s+)/,/^(?:[}])/,/^(?:[{])/,/^(?:[}])/,/^(?:$)/,/^(?:\[\*\])/,/^(?:[{])/,/^(?:[\n])/,/^(?:[^{}\n]*)/,/^(?:cssClass\b)/,/^(?:callback\b)/,/^(?:link\b)/,/^(?:click\b)/,/^(?:note for\b)/,/^(?:note\b)/,/^(?:<<)/,/^(?:>>)/,/^(?:href\b)/,/^(?:[~])/,/^(?:[^~]*)/,/^(?:~)/,/^(?:[`])/,/^(?:[^`]+)/,/^(?:[`])/,/^(?:_self\b)/,/^(?:_blank\b)/,/^(?:_parent\b)/,/^(?:_top\b)/,/^(?:\s*<\|)/,/^(?:\s*\|>)/,/^(?:\s*>)/,/^(?:\s*<)/,/^(?:\s*\*)/,/^(?:\s*o\b)/,/^(?:\s*\(\))/,/^(?:--)/,/^(?:\.\.)/,/^(?::{1}[^:\n;]+)/,/^(?::{3})/,/^(?:-)/,/^(?:\.)/,/^(?:\+)/,/^(?::)/,/^(?:,)/,/^(?:#)/,/^(?:#)/,/^(?:%)/,/^(?:=)/,/^(?:=)/,/^(?:\w+)/,/^(?:\[)/,/^(?:\])/,/^(?:[!"#$%&'*+,-.`?\\/])/,/^(?:[0-9]+)/,/^(?:[\u00AA\u00B5\u00BA\u00C0-\u00D6\u00D8-\u00F6]|[\u00F8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377]|[\u037A-\u037D\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5]|[\u03F7-\u0481\u048A-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA]|[\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE]|[\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA]|[\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0]|[\u08A2-\u08AC\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0977]|[\u0979-\u097F\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2]|[\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A]|[\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39]|[\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8]|[\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C]|[\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C]|[\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99]|[\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0]|[\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D]|[\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3]|[\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10]|[\u0D12-\u0D3A\u0D3D\u0D4E\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1]|[\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81]|[\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3]|[\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6]|[\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A]|[\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081]|[\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D]|[\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0]|[\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310]|[\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C]|[\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u1700-\u170C\u170E-\u1711]|[\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7]|[\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191C]|[\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16]|[\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF]|[\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC]|[\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D]|[\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D]|[\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3]|[\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F]|[\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128]|[\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184]|[\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3]|[\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6]|[\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE]|[\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C]|[\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D]|[\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC]|[\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B]|[\uA640-\uA66E\uA67F-\uA697\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788]|[\uA78B-\uA78E\uA790-\uA793\uA7A0-\uA7AA\uA7F8-\uA801\uA803-\uA805]|[\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB]|[\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uAA00-\uAA28]|[\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA80-\uAAAF\uAAB1\uAAB5]|[\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4]|[\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E]|[\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D]|[\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36]|[\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D]|[\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC]|[\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF]|[\uFFD2-\uFFD7\uFFDA-\uFFDC])/,/^(?:\s)/,/^(?:\s)/,/^(?:$)/],conditions:{"namespace-body":{rules:[26,33,34,35,36,37,38,49,50,51,52,53,54,55,56,57,60,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,86,87,88,89,90,91,92,93,94,95,97],inclusive:!1},namespace:{rules:[26,29,30,31,32,49,50,51,52,53,54,55,56,57,60,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,86,87,88,89,90,91,92,93,94,95,97],inclusive:!1},"class-body":{rules:[26,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,60,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,86,87,88,89,90,91,92,93,94,95,97],inclusive:!1},class:{rules:[26,39,40,41,42,49,50,51,52,53,54,55,56,57,60,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,86,87,88,89,90,91,92,93,94,95,97],inclusive:!1},acc_descr_multiline:{rules:[11,12,26,49,50,51,52,53,54,55,56,57,60,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,86,87,88,89,90,91,92,93,94,95,97],inclusive:!1},acc_descr:{rules:[9,26,49,50,51,52,53,54,55,56,57,60,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,86,87,88,89,90,91,92,93,94,95,97],inclusive:!1},acc_title:{rules:[7,26,49,50,51,52,53,54,55,56,57,60,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,86,87,88,89,90,91,92,93,94,95,97],inclusive:!1},callback_args:{rules:[22,23,26,49,50,51,52,53,54,55,56,57,60,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,86,87,88,89,90,91,92,93,94,95,97],inclusive:!1},callback_name:{rules:[19,20,21,26,49,50,51,52,53,54,55,56,57,60,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,86,87,88,89,90,91,92,93,94,95,97],inclusive:!1},href:{rules:[26,49,50,51,52,53,54,55,56,57,60,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,86,87,88,89,90,91,92,93,94,95,97],inclusive:!1},struct:{rules:[26,49,50,51,52,53,54,55,56,57,60,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,86,87,88,89,90,91,92,93,94,95,97],inclusive:!1},generic:{rules:[26,49,50,51,52,53,54,55,56,57,58,59,60,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,86,87,88,89,90,91,92,93,94,95,97],inclusive:!1},bqstring:{rules:[26,49,50,51,52,53,54,55,56,57,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,86,87,88,89,90,91,92,93,94,95,97],inclusive:!1},string:{rules:[24,25,26,49,50,51,52,53,54,55,56,57,60,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,86,87,88,89,90,91,92,93,94,95,97],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,5,6,8,10,13,14,15,16,17,18,26,27,28,29,38,49,50,51,52,53,54,55,56,57,60,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97],inclusive:!0}}}}(),(0,At.K2)(ir,"Parser"),ir.prototype=ne,ne.Parser=ir,new ir}();Rt.parser=Rt;var q=Rt,ar=["#","+","~","-",""],Ke=(class{constructor(z,ft){this.memberType=ft,this.visibility="",this.classifier="",this.text="";const Bt=(0,A.jZ)(z,(0,A.D7)());this.parseMember(Bt)}getDisplayDetails(){let z=this.visibility+(0,A.QO)(this.id);return"method"===this.memberType&&(z+=`(${(0,A.QO)(this.parameters.trim())})`,this.returnType&&(z+=" : "+(0,A.QO)(this.returnType))),z=z.trim(),{displayText:z,cssStyle:this.parseClassifier()}}parseMember(z){let ft="";if("method"===this.memberType){const X=/([#+~-])?(.+)\((.*)\)([\s$*])?(.*)([$*])?/.exec(z);if(X){const ae=X[1]?X[1].trim():"";if(ar.includes(ae)&&(this.visibility=ae),this.id=X[2],this.parameters=X[3]?X[3].trim():"",ft=X[4]?X[4].trim():"",this.returnType=X[5]?X[5].trim():"",""===ft){const w=this.returnType.substring(this.returnType.length-1);/[$*]/.exec(w)&&(ft=w,this.returnType=this.returnType.substring(0,this.returnType.length-1))}}}else{const we=z.length,X=z.substring(0,1),ae=z.substring(we-1);ar.includes(X)&&(this.visibility=X),/[$*]/.exec(ae)&&(ft=ae),this.id=z.substring(""===this.visibility?0:1,""===ft?we:we-1)}this.classifier=ft,this.id=this.id.startsWith(" ")?" "+this.id.trim():this.id.trim();const Bt=`${this.visibility?"\\"+this.visibility:""}${(0,A.QO)(this.id)}${"method"===this.memberType?`(${(0,A.QO)(this.parameters)})${this.returnType?" : "+(0,A.QO)(this.returnType):""}`:""}`;this.text=Bt.replaceAll("<","&lt;").replaceAll(">","&gt;"),this.text.startsWith("\\&lt;")&&(this.text=this.text.replace("\\&lt;","~"))}parseClassifier(){switch(this.classifier){case"*":return"font-style:italic;";case"$":return"text-decoration:underline;";default:return""}}static#t=Ge=()=>((0,ee.A)(this,"ClassMember"),(0,At.K2)(this,"ClassMember"),this)},Ge()),cr="classId-",Rr=0,wr=(0,At.K2)(z=>A.Y2.sanitizeText(z,(0,A.D7)()),"sanitizeText"),Vr=(class{constructor(){this.relations=[],this.classes=new Map,this.styleClasses=new Map,this.notes=[],this.interfaces=[],this.namespaces=new Map,this.namespaceCounter=0,this.functions=[],this.lineType={LINE:0,DOTTED_LINE:1},this.relationType={AGGREGATION:0,EXTENSION:1,COMPOSITION:2,DEPENDENCY:3,LOLLIPOP:4},this.setupToolTips=(0,At.K2)(z=>{let ft=(0,wt.Ltv)(".mermaidTooltip");null===(ft._groups||ft)[0][0]&&(ft=(0,wt.Ltv)("body").append("div").attr("class","mermaidTooltip").style("opacity",0)),(0,wt.Ltv)(z).select("svg").selectAll("g.node").on("mouseover",X=>{const ae=(0,wt.Ltv)(X.currentTarget);if(null===ae.attr("title"))return;const re=this.getBoundingClientRect();ft.transition().duration(200).style("opacity",".9"),ft.text(ae.attr("title")).style("left",window.scrollX+re.left+(re.right-re.left)/2+"px").style("top",window.scrollY+re.top-14+document.body.scrollTop+"px"),ft.html(ft.html().replace(/&lt;br\/&gt;/g,"<br/>")),ae.classed("hover",!0)}).on("mouseout",X=>{ft.transition().duration(500).style("opacity",0),(0,wt.Ltv)(X.currentTarget).classed("hover",!1)})},"setupToolTips"),this.direction="TB",this.setAccTitle=A.SV,this.getAccTitle=A.iN,this.setAccDescription=A.EI,this.getAccDescription=A.m7,this.setDiagramTitle=A.ke,this.getDiagramTitle=A.ab,this.getConfig=(0,At.K2)(()=>(0,A.D7)().class,"getConfig"),this.functions.push(this.setupToolTips.bind(this)),this.clear(),this.addRelation=this.addRelation.bind(this),this.addClassesToNamespace=this.addClassesToNamespace.bind(this),this.addNamespace=this.addNamespace.bind(this),this.setCssClass=this.setCssClass.bind(this),this.addMembers=this.addMembers.bind(this),this.addClass=this.addClass.bind(this),this.setClassLabel=this.setClassLabel.bind(this),this.addAnnotation=this.addAnnotation.bind(this),this.addMember=this.addMember.bind(this),this.cleanupLabel=this.cleanupLabel.bind(this),this.addNote=this.addNote.bind(this),this.defineClass=this.defineClass.bind(this),this.setDirection=this.setDirection.bind(this),this.setLink=this.setLink.bind(this),this.bindFunctions=this.bindFunctions.bind(this),this.clear=this.clear.bind(this),this.setTooltip=this.setTooltip.bind(this),this.setClickEvent=this.setClickEvent.bind(this),this.setCssStyle=this.setCssStyle.bind(this)}splitClassNameAndType(z){const ft=A.Y2.sanitizeText(z,(0,A.D7)());let Bt="",we=ft;if(ft.indexOf("~")>0){const X=ft.split("~");we=wr(X[0]),Bt=wr(X[1])}return{className:we,type:Bt}}setClassLabel(z,ft){const Bt=A.Y2.sanitizeText(z,(0,A.D7)());ft&&(ft=wr(ft));const{className:we}=this.splitClassNameAndType(Bt);this.classes.get(we).label=ft,this.classes.get(we).text=`${ft}${this.classes.get(we).type?`<${this.classes.get(we).type}>`:""}`}addClass(z){const ft=A.Y2.sanitizeText(z,(0,A.D7)()),{className:Bt,type:we}=this.splitClassNameAndType(ft);if(this.classes.has(Bt))return;const X=A.Y2.sanitizeText(Bt,(0,A.D7)());this.classes.set(X,{id:X,type:we,label:X,text:`${X}${we?`&lt;${we}&gt;`:""}`,shape:"classBox",cssClasses:"default",methods:[],members:[],annotations:[],styles:[],domId:cr+X+"-"+Rr}),Rr++}addInterface(z,ft){this.interfaces.push({id:`interface${this.interfaces.length}`,label:z,classId:ft})}lookUpDomId(z){const ft=A.Y2.sanitizeText(z,(0,A.D7)());if(this.classes.has(ft))return this.classes.get(ft).domId;throw new Error("Class not found: "+ft)}clear(){this.relations=[],this.classes=new Map,this.notes=[],this.interfaces=[],this.functions=[],this.functions.push(this.setupToolTips.bind(this)),this.namespaces=new Map,this.namespaceCounter=0,this.direction="TB",(0,A.IU)()}getClass(z){return this.classes.get(z)}getClasses(){return this.classes}getRelations(){return this.relations}getNotes(){return this.notes}addRelation(z){At.Rm.debug("Adding relation: "+JSON.stringify(z));const ft=[this.relationType.LOLLIPOP,this.relationType.AGGREGATION,this.relationType.COMPOSITION,this.relationType.DEPENDENCY,this.relationType.EXTENSION];z.relation.type1!==this.relationType.LOLLIPOP||ft.includes(z.relation.type2)?z.relation.type2!==this.relationType.LOLLIPOP||ft.includes(z.relation.type1)?(this.addClass(z.id1),this.addClass(z.id2)):(this.addClass(z.id1),this.addInterface(z.id2,z.id1),z.id2="interface"+(this.interfaces.length-1)):(this.addClass(z.id2),this.addInterface(z.id1,z.id2),z.id1="interface"+(this.interfaces.length-1)),z.id1=this.splitClassNameAndType(z.id1).className,z.id2=this.splitClassNameAndType(z.id2).className,z.relationTitle1=A.Y2.sanitizeText(z.relationTitle1.trim(),(0,A.D7)()),z.relationTitle2=A.Y2.sanitizeText(z.relationTitle2.trim(),(0,A.D7)()),this.relations.push(z)}addAnnotation(z,ft){const Bt=this.splitClassNameAndType(z).className;this.classes.get(Bt).annotations.push(ft)}addMember(z,ft){this.addClass(z);const Bt=this.splitClassNameAndType(z).className,we=this.classes.get(Bt);if("string"==typeof ft){const X=ft.trim();X.startsWith("<<")&&X.endsWith(">>")?we.annotations.push(wr(X.substring(2,X.length-2))):X.indexOf(")")>0?we.methods.push(new Ke(X,"method")):X&&we.members.push(new Ke(X,"attribute"))}}addMembers(z,ft){Array.isArray(ft)&&(ft.reverse(),ft.forEach(Bt=>this.addMember(z,Bt)))}addNote(z,ft){this.notes.push({id:`note${this.notes.length}`,class:ft,text:z})}cleanupLabel(z){return z.startsWith(":")&&(z=z.substring(1)),wr(z.trim())}setCssClass(z,ft){z.split(",").forEach(Bt=>{let we=Bt;/\d/.exec(Bt[0])&&(we=cr+we);const X=this.classes.get(we);X&&(X.cssClasses+=" "+ft)})}defineClass(z,ft){for(const Bt of z){let we=this.styleClasses.get(Bt);void 0===we&&(we={id:Bt,styles:[],textStyles:[]},this.styleClasses.set(Bt,we)),ft&&ft.forEach(X=>{if(/color/.exec(X)){const ae=X.replace("fill","bgFill");we.textStyles.push(ae)}we.styles.push(X)}),this.classes.forEach(X=>{X.cssClasses.includes(Bt)&&X.styles.push(...ft.flatMap(ae=>ae.split(",")))})}}setTooltip(z,ft){z.split(",").forEach(Bt=>{void 0!==ft&&(this.classes.get(Bt).tooltip=wr(ft))})}getTooltip(z,ft){return ft&&this.namespaces.has(ft)?this.namespaces.get(ft).classes.get(z).tooltip:this.classes.get(z).tooltip}setLink(z,ft,Bt){const we=(0,A.D7)();z.split(",").forEach(X=>{let ae=X;/\d/.exec(X[0])&&(ae=cr+ae);const w=this.classes.get(ae);w&&(w.link=$._K.formatUrl(ft,we),w.linkTarget="sandbox"===we.securityLevel?"_top":"string"==typeof Bt?wr(Bt):"_blank")}),this.setCssClass(z,"clickable")}setClickEvent(z,ft,Bt){z.split(",").forEach(we=>{this.setClickFunc(we,ft,Bt),this.classes.get(we).haveCallback=!0}),this.setCssClass(z,"clickable")}setClickFunc(z,ft,Bt){const we=A.Y2.sanitizeText(z,(0,A.D7)());if("loose"!==(0,A.D7)().securityLevel||void 0===ft)return;const ae=we;if(this.classes.has(ae)){const w=this.lookUpDomId(ae);let re=[];if("string"==typeof Bt){re=Bt.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/);for(let It=0;It<re.length;It++){let qt=re[It].trim();qt.startsWith('"')&&qt.endsWith('"')&&(qt=qt.substr(1,qt.length-2)),re[It]=qt}}0===re.length&&re.push(w),this.functions.push(()=>{const It=document.querySelector(`[id="${w}"]`);null!==It&&It.addEventListener("click",()=>{$._K.runFunc(ft,...re)},!1)})}}bindFunctions(z){this.functions.forEach(ft=>{ft(z)})}getDirection(){return this.direction}setDirection(z){this.direction=z}addNamespace(z){this.namespaces.has(z)||(this.namespaces.set(z,{id:z,classes:new Map,children:{},domId:cr+z+"-"+this.namespaceCounter}),this.namespaceCounter++)}getNamespace(z){return this.namespaces.get(z)}getNamespaces(){return this.namespaces}addClassesToNamespace(z,ft){if(this.namespaces.has(z))for(const Bt of ft){const{className:we}=this.splitClassNameAndType(Bt);this.classes.get(we).parent=z,this.namespaces.get(z).classes.set(we,this.classes.get(we))}}setCssStyle(z,ft){const Bt=this.classes.get(z);if(ft&&Bt)for(const we of ft)we.includes(",")?Bt.styles.push(...we.split(",")):Bt.styles.push(we)}getArrowMarker(z){let ft;switch(z){case 0:ft="aggregation";break;case 1:ft="extension";break;case 2:ft="composition";break;case 3:ft="dependency";break;case 4:ft="lollipop";break;default:ft="none"}return ft}getData(){const z=[],ft=[],Bt=(0,A.D7)();for(const X of this.namespaces.keys()){const ae=this.namespaces.get(X);ae&&z.push({id:ae.id,label:ae.id,isGroup:!0,padding:Bt.class.padding??16,shape:"rect",cssStyles:["fill: none","stroke: black"],look:Bt.look})}for(const X of this.classes.keys()){const ae=this.classes.get(X);if(ae){const w=ae;w.parentId=ae.parent,w.look=Bt.look,z.push(w)}}let we=0;for(const X of this.notes){we++,z.push({id:X.id,label:X.text,isGroup:!1,shape:"note",padding:Bt.class.padding??6,cssStyles:["text-align: left","white-space: nowrap",`fill: ${Bt.themeVariables.noteBkgColor}`,`stroke: ${Bt.themeVariables.noteBorderColor}`],look:Bt.look});const w=this.classes.get(X.class)?.id??"";w&&ft.push({id:`edgeNote${we}`,start:X.id,end:w,type:"normal",thickness:"normal",classes:"relation",arrowTypeStart:"none",arrowTypeEnd:"none",arrowheadStyle:"",labelStyle:[""],style:["fill: none"],pattern:"dotted",look:Bt.look})}for(const X of this.interfaces)z.push({id:X.id,label:X.label,isGroup:!1,shape:"rect",cssStyles:["opacity: 0;"],look:Bt.look});we=0;for(const X of this.relations){we++;const ae={id:(0,$.rY)(X.id1,X.id2,{prefix:"id",counter:we}),start:X.id1,end:X.id2,type:"normal",label:X.title,labelpos:"c",thickness:"normal",classes:"relation",arrowTypeStart:this.getArrowMarker(X.relation.type1),arrowTypeEnd:this.getArrowMarker(X.relation.type2),startLabelRight:"none"===X.relationTitle1?"":X.relationTitle1,endLabelLeft:"none"===X.relationTitle2?"":X.relationTitle2,arrowheadStyle:"",labelStyle:["display: inline-block"],style:X.style||"",pattern:1==X.relation.lineType?"dashed":"solid",look:Bt.look};ft.push(ae)}return{nodes:z,edges:ft,other:{},config:Bt,direction:this.getDirection()}}static#t=dt=()=>((0,ee.A)(this,"ClassDB"),(0,At.K2)(this,"ClassDB"),this)},dt()),Nr=(0,At.K2)(z=>`g.classGroup text {\n  fill: ${z.nodeBorder||z.classText};\n  stroke: none;\n  font-family: ${z.fontFamily};\n  font-size: 10px;\n\n  .title {\n    font-weight: bolder;\n  }\n\n}\n\n.nodeLabel, .edgeLabel {\n  color: ${z.classText};\n}\n.edgeLabel .label rect {\n  fill: ${z.mainBkg};\n}\n.label text {\n  fill: ${z.classText};\n}\n\n.labelBkg {\n  background: ${z.mainBkg};\n}\n.edgeLabel .label span {\n  background: ${z.mainBkg};\n}\n\n.classTitle {\n  font-weight: bolder;\n}\n.node rect,\n  .node circle,\n  .node ellipse,\n  .node polygon,\n  .node path {\n    fill: ${z.mainBkg};\n    stroke: ${z.nodeBorder};\n    stroke-width: 1px;\n  }\n\n\n.divider {\n  stroke: ${z.nodeBorder};\n  stroke-width: 1;\n}\n\ng.clickable {\n  cursor: pointer;\n}\n\ng.classGroup rect {\n  fill: ${z.mainBkg};\n  stroke: ${z.nodeBorder};\n}\n\ng.classGroup line {\n  stroke: ${z.nodeBorder};\n  stroke-width: 1;\n}\n\n.classLabel .box {\n  stroke: none;\n  stroke-width: 0;\n  fill: ${z.mainBkg};\n  opacity: 0.5;\n}\n\n.classLabel .label {\n  fill: ${z.nodeBorder};\n  font-size: 10px;\n}\n\n.relation {\n  stroke: ${z.lineColor};\n  stroke-width: 1;\n  fill: none;\n}\n\n.dashed-line{\n  stroke-dasharray: 3;\n}\n\n.dotted-line{\n  stroke-dasharray: 1 2;\n}\n\n#compositionStart, .composition {\n  fill: ${z.lineColor} !important;\n  stroke: ${z.lineColor} !important;\n  stroke-width: 1;\n}\n\n#compositionEnd, .composition {\n  fill: ${z.lineColor} !important;\n  stroke: ${z.lineColor} !important;\n  stroke-width: 1;\n}\n\n#dependencyStart, .dependency {\n  fill: ${z.lineColor} !important;\n  stroke: ${z.lineColor} !important;\n  stroke-width: 1;\n}\n\n#dependencyStart, .dependency {\n  fill: ${z.lineColor} !important;\n  stroke: ${z.lineColor} !important;\n  stroke-width: 1;\n}\n\n#extensionStart, .extension {\n  fill: transparent !important;\n  stroke: ${z.lineColor} !important;\n  stroke-width: 1;\n}\n\n#extensionEnd, .extension {\n  fill: transparent !important;\n  stroke: ${z.lineColor} !important;\n  stroke-width: 1;\n}\n\n#aggregationStart, .aggregation {\n  fill: transparent !important;\n  stroke: ${z.lineColor} !important;\n  stroke-width: 1;\n}\n\n#aggregationEnd, .aggregation {\n  fill: transparent !important;\n  stroke: ${z.lineColor} !important;\n  stroke-width: 1;\n}\n\n#lollipopStart, .lollipop {\n  fill: ${z.mainBkg} !important;\n  stroke: ${z.lineColor} !important;\n  stroke-width: 1;\n}\n\n#lollipopEnd, .lollipop {\n  fill: ${z.mainBkg} !important;\n  stroke: ${z.lineColor} !important;\n  stroke-width: 1;\n}\n\n.edgeTerminals {\n  font-size: 11px;\n  line-height: initial;\n}\n\n.classTitleText {\n  text-anchor: middle;\n  font-size: 18px;\n  fill: ${z.textColor};\n}\n  ${(0,L.o)()}\n`,"getStyles"),Fr=(0,At.K2)((z,ft="TB")=>{if(!z.doc)return ft;let Bt=ft;for(const we of z.doc)"dir"===we.stmt&&(Bt=we.value);return Bt},"getDir"),je={getClasses:(0,At.K2)(function(z,ft){return ft.db.getClasses()},"getClasses"),draw:(0,At.K2)(function(){var z=(0,ot.A)(function*(ft,Bt,we,X){At.Rm.info("REF0:"),At.Rm.info("Drawing class diagram (v3)",Bt);const{securityLevel:ae,state:w,layout:re}=(0,A.D7)(),It=X.db.getData(),qt=(0,S.A)(Bt,ae);It.type=X.type,It.layoutAlgorithm=(0,ut.q7)(re),It.nodeSpacing=w?.nodeSpacing||50,It.rankSpacing=w?.rankSpacing||50,It.markers=["aggregation","extension","composition","dependency","lollipop"],It.diagramId=Bt,yield(0,ut.XX)(It,qt),$._K.insertTitle(qt,"classDiagramTitleText",w?.titleTopMargin??25,X.db.getDiagramTitle()),(0,Pt.P)(qt,8,"classDiagram",w?.useMaxWidth??!0)});return function(ft,Bt,we,X){return z.apply(this,arguments)}}(),"draw"),getDir:Fr}},55041:(Ja,vr,R)=>{"use strict";R.r(vr),R.d(vr,{diagram:()=>ar});var ot=R(54256),q=(R(97787),R(5675),R(8086),R(72271),R(98954),R(36384),R(87452),R(32239),R(19753),R(59355),R(52052),R(79006),R(32303)),ar={parser:ot._$,get db(){return new ot.NM},renderer:ot.Lh,styles:ot.tM,init:(0,q.K2)(Ke=>{Ke.class||(Ke.class={}),Ke.class.arrowMarkerAbsolute=Ke.arrowMarkerAbsolute},"init")}},55559:(Ja,vr,R)=>{"use strict";R.r(vr),R.d(vr,{diagram:()=>z});var dt,ot=R(89204),ee=R(45027),L=R(69664),S=R(8086),Pt=R(19753),ut=R(80525),$=R(52052),A=R(79006),At=R(32303),wt=R(62233),Ge=R(40622),Rt=(class{constructor(){this.nodes=[],this.levels=new Map,this.outerNodes=[],this.classes=new Map,this.setAccTitle=A.SV,this.getAccTitle=A.iN,this.setDiagramTitle=A.ke,this.getDiagramTitle=A.ab,this.getAccDescription=A.m7,this.setAccDescription=A.EI}getNodes(){return this.nodes}getConfig(){const ft=A.UI,Bt=(0,A.zj)();return(0,$.$t)({...ft.treemap,...Bt.treemap??{}})}addNode(ft,Bt){this.nodes.push(ft),this.levels.set(ft,Bt),0===Bt&&(this.outerNodes.push(ft),this.root??=ft)}getRoot(){return{name:"",children:this.outerNodes}}addClass(ft,Bt){const we=this.classes.get(ft)??{id:ft,styles:[],textStyles:[]},X=Bt.replace(/\\,/g,"\xa7\xa7\xa7").replace(/,/g,";").replace(/\xa7\xa7\xa7/g,",").split(";");X&&X.forEach(ae=>{(0,Pt.KX)(ae)&&(we?.textStyles?we.textStyles.push(ae):we.textStyles=[ae]),we?.styles?we.styles.push(ae):we.styles=[ae]}),this.classes.set(ft,we)}getClasses(){return this.classes}getStylesForClass(ft){return this.classes.get(ft)?.styles??[]}clear(){(0,A.IU)(),this.nodes=[],this.levels=new Map,this.outerNodes=[],this.classes=new Map,this.root=void 0}static#t=dt=()=>((0,ee.A)(this,"TreeMapDB"),(0,At.K2)(this,"TreeMapDB"),this)},dt());function q(ft){if(!ft.length)return[];const Bt=[],we=[];return ft.forEach(X=>{const ae={name:X.name,children:"Leaf"===X.type?void 0:[]};for(ae.classSelector=X?.classSelector,X?.cssCompiledStyles&&(ae.cssCompiledStyles=[X.cssCompiledStyles]),"Leaf"===X.type&&void 0!==X.value&&(ae.value=X.value);we.length>0&&we[we.length-1].level>=X.level;)we.pop();if(0===we.length)Bt.push(ae);else{const w=we[we.length-1].node;w.children?w.children.push(ae):w.children=[ae]}"Leaf"!==X.type&&we.push({node:ae,level:X.level})}),Bt}(0,At.K2)(q,"buildHierarchy");var ar=(0,At.K2)((ft,Bt)=>{(0,ut.S)(ft,Bt);const we=[];for(const w of ft.TreemapRows??[])"ClassDefStatement"===w.$type&&Bt.addClass(w.className??"",w.styleText??"");for(const w of ft.TreemapRows??[]){const re=w.item;if(!re)continue;const It=w.indent?parseInt(w.indent):0,qt=Ke(re),V=re.classSelector?Bt.getStylesForClass(re.classSelector):[],pt=V.length>0?V.join(";"):void 0;we.push({level:It,name:qt,type:re.$type,value:re.value,classSelector:re.classSelector,cssCompiledStyles:pt})}const X=q(we),ae=(0,At.K2)((w,re)=>{for(const It of w)Bt.addNode(It,re),It.children&&It.children.length>0&&ae(It.children,re+1)},"addNodesRecursively");ae(X,0)},"populate"),Ke=(0,At.K2)(ft=>ft.name?String(ft.name):"","getItemName"),cr={parser:{yy:void 0},parse:(0,At.K2)(function(){var ft=(0,ot.A)(function*(Bt){try{const we=wt.qg,X=yield we("treemap",Bt);At.Rm.debug("Treemap AST:",X);const ae=cr.parser?.yy;if(!(ae instanceof Rt))throw new Error("parser.parser?.yy was not a TreemapDB. This is due to a bug within Mermaid, please report this issue at https://github.com/mermaid-js/mermaid/issues.");ar(X,ae)}catch(we){throw At.Rm.error("Error parsing treemap:",we),we}});return function(Bt){return ft.apply(this,arguments)}}(),"parse")},Fr={draw:(0,At.K2)((ft,Bt,we,X)=>{const ae=X.db,w=ae.getConfig(),re=w.padding??10,It=ae.getDiagramTitle(),qt=ae.getRoot(),{themeVariables:V}=(0,A.zj)();if(!qt)return;const pt=It?30:0,H=(0,L.D)(Bt),Nt=w.nodeWidth?10*w.nodeWidth:960,St=w.nodeHeight?10*w.nodeHeight:500,$t=Nt,ye=St+pt;let le;H.attr("viewBox",`0 0 ${$t} ${ye}`),(0,A.a$)(H,ye,$t,w.useMaxWidth);try{const ht=w.valueFormat||",";if("$0,0"===ht)le=(0,At.K2)(Ft=>"$"+(0,Ge.GPZ)(",")(Ft),"valueFormat");else if(ht.startsWith("$")&&ht.includes(",")){const Ft=/\.\d+/.exec(ht),G=Ft?Ft[0]:"";le=(0,At.K2)(lt=>"$"+(0,Ge.GPZ)(","+G)(lt),"valueFormat")}else if(ht.startsWith("$")){const Ft=ht.substring(1);le=(0,At.K2)(G=>"$"+(0,Ge.GPZ)(Ft||"")(G),"valueFormat")}else le=(0,Ge.GPZ)(ht)}catch(ht){At.Rm.error("Error creating format function:",ht),le=(0,Ge.GPZ)(",")}const Pe=(0,Ge.UMr)().range(["transparent",V.cScale0,V.cScale1,V.cScale2,V.cScale3,V.cScale4,V.cScale5,V.cScale6,V.cScale7,V.cScale8,V.cScale9,V.cScale10,V.cScale11]),oe=(0,Ge.UMr)().range(["transparent",V.cScalePeer0,V.cScalePeer1,V.cScalePeer2,V.cScalePeer3,V.cScalePeer4,V.cScalePeer5,V.cScalePeer6,V.cScalePeer7,V.cScalePeer8,V.cScalePeer9,V.cScalePeer10,V.cScalePeer11]),qe=(0,Ge.UMr)().range([V.cScaleLabel0,V.cScaleLabel1,V.cScaleLabel2,V.cScaleLabel3,V.cScaleLabel4,V.cScaleLabel5,V.cScaleLabel6,V.cScaleLabel7,V.cScaleLabel8,V.cScaleLabel9,V.cScaleLabel10,V.cScaleLabel11]);It&&H.append("text").attr("x",$t/2).attr("y",pt/2).attr("class","treemapTitle").attr("text-anchor","middle").attr("dominant-baseline","middle").text(It);const ze=H.append("g").attr("transform",`translate(0, ${pt})`).attr("class","treemapContainer"),Et=(0,Ge.Sk5)(qt).sum(ht=>ht.value??0).sort((ht,Ft)=>(Ft.value??0)-(ht.value??0)),B=(0,Ge.hkb)().size([Nt,St]).paddingTop(ht=>ht.children&&ht.children.length>0?35:0).paddingInner(re).paddingLeft(ht=>ht.children&&ht.children.length>0?10:0).paddingRight(ht=>ht.children&&ht.children.length>0?10:0).paddingBottom(ht=>ht.children&&ht.children.length>0?10:0).round(!0)(Et),F=B.descendants().filter(ht=>ht.children&&ht.children.length>0),et=ze.selectAll(".treemapSection").data(F).enter().append("g").attr("class","treemapSection").attr("transform",ht=>`translate(${ht.x0},${ht.y0})`);et.append("rect").attr("width",ht=>ht.x1-ht.x0).attr("height",25).attr("class","treemapSectionHeader").attr("fill","none").attr("fill-opacity",.6).attr("stroke-width",.6).attr("style",ht=>0===ht.depth?"display: none;":""),et.append("clipPath").attr("id",(ht,Ft)=>`clip-section-${Bt}-${Ft}`).append("rect").attr("width",ht=>Math.max(0,ht.x1-ht.x0-12)).attr("height",25),et.append("rect").attr("width",ht=>ht.x1-ht.x0).attr("height",ht=>ht.y1-ht.y0).attr("class",(ht,Ft)=>`treemapSection section${Ft}`).attr("fill",ht=>Pe(ht.data.name)).attr("fill-opacity",.6).attr("stroke",ht=>oe(ht.data.name)).attr("stroke-width",2).attr("stroke-opacity",.4).attr("style",ht=>{if(0===ht.depth)return"display: none;";const Ft=(0,Pt.GX)({cssCompiledStyles:ht.data.cssCompiledStyles});return Ft.nodeStyles+";"+Ft.borderStyles.join(";")}),et.append("text").attr("class","treemapSectionLabel").attr("x",6).attr("y",12.5).attr("dominant-baseline","middle").text(ht=>0===ht.depth?"":ht.data.name).attr("font-weight","bold").attr("style",ht=>0===ht.depth?"display: none;":"dominant-baseline: middle; font-size: 12px; fill:"+qe(ht.data.name)+"; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;"+(0,Pt.GX)({cssCompiledStyles:ht.data.cssCompiledStyles}).labelStyles.replace("color:","fill:")).each(function(ht){if(0===ht.depth)return;const Ft=(0,Ge.Ltv)(this),G=ht.data.name;Ft.text(G);const lt=ht.x1-ht.x0;let Mt;Mt=!1!==w.showValues&&ht.value?lt-10-30-10-6:lt-6-6;const pe=Math.max(15,Mt),Re=Ft.node();if(Re.getComputedTextLength()>pe){let mr=G;for(;mr.length>0;){if(mr=G.substring(0,mr.length-1),0===mr.length){Ft.text("..."),Re.getComputedTextLength()>pe&&Ft.text("");break}if(Ft.text(mr+"..."),Re.getComputedTextLength()<=pe)break}}}),!1!==w.showValues&&et.append("text").attr("class","treemapSectionValue").attr("x",ht=>ht.x1-ht.x0-10).attr("y",12.5).attr("text-anchor","end").attr("dominant-baseline","middle").text(ht=>ht.value?le(ht.value):"").attr("font-style","italic").attr("style",ht=>0===ht.depth?"display: none;":"text-anchor: end; dominant-baseline: middle; font-size: 10px; fill:"+qe(ht.data.name)+"; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;"+(0,Pt.GX)({cssCompiledStyles:ht.data.cssCompiledStyles}).labelStyles.replace("color:","fill:"));const mt=B.leaves(),it=ze.selectAll(".treemapLeafGroup").data(mt).enter().append("g").attr("class",(ht,Ft)=>`treemapNode treemapLeafGroup leaf${Ft}${ht.data.classSelector?` ${ht.data.classSelector}`:""}x`).attr("transform",ht=>`translate(${ht.x0},${ht.y0})`);it.append("rect").attr("width",ht=>ht.x1-ht.x0).attr("height",ht=>ht.y1-ht.y0).attr("class","treemapLeaf").attr("fill",ht=>Pe(ht.parent?ht.parent.data.name:ht.data.name)).attr("style",ht=>(0,Pt.GX)({cssCompiledStyles:ht.data.cssCompiledStyles}).nodeStyles).attr("fill-opacity",.3).attr("stroke",ht=>Pe(ht.parent?ht.parent.data.name:ht.data.name)).attr("stroke-width",3),it.append("clipPath").attr("id",(ht,Ft)=>`clip-${Bt}-${Ft}`).append("rect").attr("width",ht=>Math.max(0,ht.x1-ht.x0-4)).attr("height",ht=>Math.max(0,ht.y1-ht.y0-4)),it.append("text").attr("class","treemapLabel").attr("x",ht=>(ht.x1-ht.x0)/2).attr("y",ht=>(ht.y1-ht.y0)/2).attr("style",ht=>"text-anchor: middle; dominant-baseline: middle; font-size: 38px;fill:"+qe(ht.data.name)+";"+(0,Pt.GX)({cssCompiledStyles:ht.data.cssCompiledStyles}).labelStyles.replace("color:","fill:")).attr("clip-path",(ht,Ft)=>`url(#clip-${Bt}-${Ft})`).text(ht=>ht.data.name).each(function(ht){const Ft=(0,Ge.Ltv)(this),G=ht.x1-ht.x0,lt=ht.y1-ht.y0,ke=Ft.node(),Zt=G-8,pe=lt-8;if(Zt<10||pe<10)return void Ft.style("display","none");let Re=parseInt(Ft.style("font-size"),10);for(;ke.getComputedTextLength()>Zt&&Re>8;)Re--,Ft.style("font-size",`${Re}px`);let Ae=Math.max(6,Math.min(28,Math.round(.6*Re))),or=Re+2+Ae;for(;or>pe&&Re>8&&(Re--,Ae=Math.max(6,Math.min(28,Math.round(.6*Re))),!(Ae<6&&8===Re));)Ft.style("font-size",`${Re}px`),or=Re+2+Ae;Ft.style("font-size",`${Re}px`),(ke.getComputedTextLength()>Zt||Re<8||pe<Re)&&Ft.style("display","none")}),!1!==w.showValues&&it.append("text").attr("class","treemapValue").attr("x",Ft=>(Ft.x1-Ft.x0)/2).attr("y",function(Ft){return(Ft.y1-Ft.y0)/2}).attr("style",Ft=>"text-anchor: middle; dominant-baseline: hanging; font-size: 28px;fill:"+qe(Ft.data.name)+";"+(0,Pt.GX)({cssCompiledStyles:Ft.data.cssCompiledStyles}).labelStyles.replace("color:","fill:")).attr("clip-path",(Ft,G)=>`url(#clip-${Bt}-${G})`).text(Ft=>Ft.value?le(Ft.value):"").each(function(Ft){const G=(0,Ge.Ltv)(this),lt=this.parentNode;if(!lt)return void G.style("display","none");const ke=(0,Ge.Ltv)(lt).select(".treemapLabel");if(ke.empty()||"none"===ke.style("display"))return void G.style("display","none");const Mt=parseFloat(ke.style("font-size")),de=Math.max(6,Math.min(28,Math.round(.6*Mt)));G.style("font-size",`${de}px`);const xr=(Ft.y1-Ft.y0)/2+Mt/2+2;G.attr("y",xr);const ve=Ft.y1-Ft.y0-4,ce=Ft.x1-Ft.x0-8;G.node().getComputedTextLength()>ce||xr+de>ve||de<6?G.style("display","none"):G.style("display",null)}),(0,S.P)(H,w.diagramPadding??8,"flowchart",w?.useMaxWidth||!1)},"draw"),getClasses:(0,At.K2)(function(ft,Bt){return Bt.db.getClasses()},"getClasses")},Se={sectionStrokeColor:"black",sectionStrokeWidth:"1",sectionFillColor:"#efefef",leafStrokeColor:"black",leafStrokeWidth:"1",leafFillColor:"#efefef",labelColor:"black",labelFontSize:"12px",valueFontSize:"10px",valueColor:"black",titleColor:"black",titleFontSize:"14px"},je=(0,At.K2)(({treemap:ft}={})=>{const Bt=(0,$.$t)(Se,ft);return`\n  .treemapNode.section {\n    stroke: ${Bt.sectionStrokeColor};\n    stroke-width: ${Bt.sectionStrokeWidth};\n    fill: ${Bt.sectionFillColor};\n  }\n  .treemapNode.leaf {\n    stroke: ${Bt.leafStrokeColor};\n    stroke-width: ${Bt.leafStrokeWidth};\n    fill: ${Bt.leafFillColor};\n  }\n  .treemapLabel {\n    fill: ${Bt.labelColor};\n    font-size: ${Bt.labelFontSize};\n  }\n  .treemapValue {\n    fill: ${Bt.valueColor};\n    font-size: ${Bt.valueFontSize};\n  }\n  .treemapTitle {\n    fill: ${Bt.titleColor};\n    font-size: ${Bt.titleFontSize};\n  }\n  `},"getStyles"),z={parser:cr,get db(){return new Rt},renderer:Fr,styles:je}},57746:(Ja,vr,R)=>{"use strict";R.r(vr),R.d(vr,{diagram:()=>we});var ut,$,ot=R(45027),ee=R(79006),L=R(32303),S=R(40622),Pt=R(76051),A=function(){var X=(0,L.K2)(function(pt,H,Nt,St){for(Nt=Nt||{},St=pt.length;St--;Nt[pt[St]]=H);return Nt},"o"),ae=[1,9],w=[1,10],re=[1,5,10,12],It={trace:(0,L.K2)(function(){},"trace"),yy:{},symbols_:{error:2,start:3,SANKEY:4,NEWLINE:5,csv:6,opt_eof:7,record:8,csv_tail:9,EOF:10,"field[source]":11,COMMA:12,"field[target]":13,"field[value]":14,field:15,escaped:16,non_escaped:17,DQUOTE:18,ESCAPED_TEXT:19,NON_ESCAPED_TEXT:20,$accept:0,$end:1},terminals_:{2:"error",4:"SANKEY",5:"NEWLINE",10:"EOF",11:"field[source]",12:"COMMA",13:"field[target]",14:"field[value]",18:"DQUOTE",19:"ESCAPED_TEXT",20:"NON_ESCAPED_TEXT"},productions_:[0,[3,4],[6,2],[9,2],[9,0],[7,1],[7,0],[8,5],[15,1],[15,1],[16,3],[17,1]],performAction:(0,L.K2)(function(H,Nt,St,$t,ye,le,Pe){var oe=le.length-1;switch(ye){case 7:const qe=$t.findOrCreateNode(le[oe-4].trim().replaceAll('""','"')),ze=$t.findOrCreateNode(le[oe-2].trim().replaceAll('""','"')),Et=parseFloat(le[oe].trim());$t.addLink(qe,ze,Et);break;case 8:case 9:case 11:this.$=le[oe];break;case 10:this.$=le[oe-1]}},"anonymous"),table:[{3:1,4:[1,2]},{1:[3]},{5:[1,3]},{6:4,8:5,15:6,16:7,17:8,18:ae,20:w},{1:[2,6],7:11,10:[1,12]},X(w,[2,4],{9:13,5:[1,14]}),{12:[1,15]},X(re,[2,8]),X(re,[2,9]),{19:[1,16]},X(re,[2,11]),{1:[2,1]},{1:[2,5]},X(w,[2,2]),{6:17,8:5,15:6,16:7,17:8,18:ae,20:w},{15:18,16:7,17:8,18:ae,20:w},{18:[1,19]},X(w,[2,3]),{12:[1,20]},X(re,[2,10]),{15:21,16:7,17:8,18:ae,20:w},X([1,5,10],[2,7])],defaultActions:{11:[2,1],12:[2,5]},parseError:(0,L.K2)(function(H,Nt){if(!Nt.recoverable){var St=new Error(H);throw St.hash=Nt,St}this.trace(H)},"parseError"),parse:(0,L.K2)(function(H){var Nt=this,St=[0],$t=[],ye=[null],le=[],Pe=this.table,oe="",qe=0,ze=0,Et=0,F=le.slice.call(arguments,1),et=Object.create(this.lexer),mt={yy:{}};for(var it in this.yy)Object.prototype.hasOwnProperty.call(this.yy,it)&&(mt.yy[it]=this.yy[it]);et.setInput(H,mt.yy),mt.yy.lexer=et,mt.yy.parser=this,typeof et.yylloc>"u"&&(et.yylloc={});var rt=et.yylloc;le.push(rt);var _t=et.options&&et.options.ranges;function Ft(){var Ae;return"number"!=typeof(Ae=$t.pop()||et.lex()||1)&&(Ae instanceof Array&&(Ae=($t=Ae).pop()),Ae=Nt.symbols_[Ae]||Ae),Ae}this.parseError="function"==typeof mt.yy.parseError?mt.yy.parseError:Object.getPrototypeOf(this).parseError,(0,L.K2)(function ht(Ae){St.length=St.length-2*Ae,ye.length=ye.length-Ae,le.length=le.length-Ae},"popStack"),(0,L.K2)(Ft,"lex");for(var G,lt,ke,Mt,pe,Ze,de,xr,Re={};;){if(this.defaultActions[ke=St[St.length-1]]?Mt=this.defaultActions[ke]:((null===G||typeof G>"u")&&(G=Ft()),Mt=Pe[ke]&&Pe[ke][G]),typeof Mt>"u"||!Mt.length||!Mt[0]){var zt;for(Ze in xr=[],Pe[ke])this.terminals_[Ze]&&Ze>2&&xr.push("'"+this.terminals_[Ze]+"'");zt=et.showPosition?"Parse error on line "+(qe+1)+":\n"+et.showPosition()+"\nExpecting "+xr.join(", ")+", got '"+(this.terminals_[G]||G)+"'":"Parse error on line "+(qe+1)+": Unexpected "+(1==G?"end of input":"'"+(this.terminals_[G]||G)+"'"),this.parseError(zt,{text:et.match,token:this.terminals_[G]||G,line:et.yylineno,loc:rt,expected:xr})}if(Mt[0]instanceof Array&&Mt.length>1)throw new Error("Parse Error: multiple actions possible at state: "+ke+", token: "+G);switch(Mt[0]){case 1:St.push(G),ye.push(et.yytext),le.push(et.yylloc),St.push(Mt[1]),G=null,lt?(G=lt,lt=null):(ze=et.yyleng,oe=et.yytext,qe=et.yylineno,rt=et.yylloc,Et>0&&Et--);break;case 2:if(Re.$=ye[ye.length-(de=this.productions_[Mt[1]][1])],Re._$={first_line:le[le.length-(de||1)].first_line,last_line:le[le.length-1].last_line,first_column:le[le.length-(de||1)].first_column,last_column:le[le.length-1].last_column},_t&&(Re._$.range=[le[le.length-(de||1)].range[0],le[le.length-1].range[1]]),typeof(pe=this.performAction.apply(Re,[oe,ze,qe,mt.yy,Mt[1],ye,le].concat(F)))<"u")return pe;de&&(St=St.slice(0,-1*de*2),ye=ye.slice(0,-1*de),le=le.slice(0,-1*de)),St.push(this.productions_[Mt[1]][0]),ye.push(Re.$),le.push(Re._$),St.push(Pe[St[St.length-2]][St[St.length-1]]);break;case 3:return!0}}return!0},"parse")};function V(){this.yy={}}return It.lexer=function(){return{EOF:1,parseError:(0,L.K2)(function(Nt,St){if(!this.yy.parser)throw new Error(Nt);this.yy.parser.parseError(Nt,St)},"parseError"),setInput:(0,L.K2)(function(H,Nt){return this.yy=Nt||this.yy||{},this._input=H,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},"setInput"),input:(0,L.K2)(function(){var H=this._input[0];return this.yytext+=H,this.yyleng++,this.offset++,this.match+=H,this.matched+=H,H.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),H},"input"),unput:(0,L.K2)(function(H){var Nt=H.length,St=H.split(/(?:\r\n?|\n)/g);this._input=H+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-Nt),this.offset-=Nt;var $t=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),St.length-1&&(this.yylineno-=St.length-1);var ye=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:St?(St.length===$t.length?this.yylloc.first_column:0)+$t[$t.length-St.length].length-St[0].length:this.yylloc.first_column-Nt},this.options.ranges&&(this.yylloc.range=[ye[0],ye[0]+this.yyleng-Nt]),this.yyleng=this.yytext.length,this},"unput"),more:(0,L.K2)(function(){return this._more=!0,this},"more"),reject:(0,L.K2)(function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},"reject"),less:(0,L.K2)(function(H){this.unput(this.match.slice(H))},"less"),pastInput:(0,L.K2)(function(){var H=this.matched.substr(0,this.matched.length-this.match.length);return(H.length>20?"...":"")+H.substr(-20).replace(/\n/g,"")},"pastInput"),upcomingInput:(0,L.K2)(function(){var H=this.match;return H.length<20&&(H+=this._input.substr(0,20-H.length)),(H.substr(0,20)+(H.length>20?"...":"")).replace(/\n/g,"")},"upcomingInput"),showPosition:(0,L.K2)(function(){var H=this.pastInput(),Nt=new Array(H.length+1).join("-");return H+this.upcomingInput()+"\n"+Nt+"^"},"showPosition"),test_match:(0,L.K2)(function(H,Nt){var St,$t,ye;if(this.options.backtrack_lexer&&(ye={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(ye.yylloc.range=this.yylloc.range.slice(0))),($t=H[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=$t.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:$t?$t[$t.length-1].length-$t[$t.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+H[0].length},this.yytext+=H[0],this.match+=H[0],this.matches=H,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(H[0].length),this.matched+=H[0],St=this.performAction.call(this,this.yy,this,Nt,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),St)return St;if(this._backtrack){for(var le in ye)this[le]=ye[le];return!1}return!1},"test_match"),next:(0,L.K2)(function(){if(this.done)return this.EOF;var H,Nt,St,$t;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var ye=this._currentRules(),le=0;le<ye.length;le++)if((St=this._input.match(this.rules[ye[le]]))&&(!Nt||St[0].length>Nt[0].length)){if(Nt=St,$t=le,this.options.backtrack_lexer){if(!1!==(H=this.test_match(St,ye[le])))return H;if(this._backtrack){Nt=!1;continue}return!1}if(!this.options.flex)break}return Nt?!1!==(H=this.test_match(Nt,ye[$t]))&&H:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},"next"),lex:(0,L.K2)(function(){return this.next()||this.lex()},"lex"),begin:(0,L.K2)(function(Nt){this.conditionStack.push(Nt)},"begin"),popState:(0,L.K2)(function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},"popState"),_currentRules:(0,L.K2)(function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},"_currentRules"),topState:(0,L.K2)(function(Nt){return(Nt=this.conditionStack.length-1-Math.abs(Nt||0))>=0?this.conditionStack[Nt]:"INITIAL"},"topState"),pushState:(0,L.K2)(function(Nt){this.begin(Nt)},"pushState"),stateStackSize:(0,L.K2)(function(){return this.conditionStack.length},"stateStackSize"),options:{"case-insensitive":!0},performAction:(0,L.K2)(function(Nt,St,$t,ye){switch($t){case 0:case 1:return this.pushState("csv"),4;case 2:return 10;case 3:return 5;case 4:return 12;case 5:return this.pushState("escaped_text"),18;case 6:return 20;case 7:return this.popState("escaped_text"),18;case 8:return 19}},"anonymous"),rules:[/^(?:sankey-beta\b)/i,/^(?:sankey\b)/i,/^(?:$)/i,/^(?:((\u000D\u000A)|(\u000A)))/i,/^(?:(\u002C))/i,/^(?:(\u0022))/i,/^(?:([\u0020-\u0021\u0023-\u002B\u002D-\u007E])*)/i,/^(?:(\u0022)(?!(\u0022)))/i,/^(?:(([\u0020-\u0021\u0023-\u002B\u002D-\u007E])|(\u002C)|(\u000D)|(\u000A)|(\u0022)(\u0022))*)/i],conditions:{csv:{rules:[2,3,4,5,6,7,8],inclusive:!1},escaped_text:{rules:[7,8],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,5,6,7,8],inclusive:!0}}}}(),(0,L.K2)(V,"Parser"),V.prototype=It,It.Parser=V,new V}();A.parser=A;var At=A,wt=[],Ge=[],dt=new Map,Rt=(0,L.K2)(()=>{wt=[],Ge=[],dt=new Map,(0,ee.IU)()},"clear"),q=(class{constructor(X,ae,w=0){this.source=X,this.target=ae,this.value=w}static#t=ut=()=>((0,ot.A)(this,"SankeyLink"),(0,L.K2)(this,"SankeyLink"),this)},ut()),ar=(0,L.K2)((X,ae,w)=>{wt.push(new q(X,ae,w))},"addLink"),Ke=(class{constructor(X){this.ID=X}static#t=$=()=>((0,ot.A)(this,"SankeyNode"),(0,L.K2)(this,"SankeyNode"),this)},$()),cr=(0,L.K2)(X=>{X=ee.Y2.sanitizeText(X,(0,ee.D7)());let ae=dt.get(X);return void 0===ae&&(ae=new Ke(X),dt.set(X,ae),Ge.push(ae)),ae},"findOrCreateNode"),Rr=(0,L.K2)(()=>Ge,"getNodes"),wr=(0,L.K2)(()=>wt,"getLinks"),Vr=(0,L.K2)(()=>({nodes:Ge.map(X=>({id:X.ID})),links:wt.map(X=>({source:X.source.ID,target:X.target.ID,value:X.value}))}),"getGraph"),ra={nodesMap:dt,getConfig:(0,L.K2)(()=>(0,ee.D7)().sankey,"getConfig"),getNodes:Rr,getLinks:wr,getGraph:Vr,addLink:ar,findOrCreateNode:cr,getAccTitle:ee.iN,setAccTitle:ee.SV,getAccDescription:ee.m7,setAccDescription:ee.EI,getDiagramTitle:ee.ab,setDiagramTitle:ee.ke,clear:Rt},Nr=(()=>{var X;return class lh{static next(re){return new lh(re+ ++lh.count)}constructor(re){this.id=re,this.href=`#${re}`}toString(){return"url("+this.href+")"}static#t=X=()=>((0,L.K2)(this,"Uid"),this.count=0,this)},X()})(),Fr={left:Pt.P9,right:Pt.yp,center:Pt.jr,justify:Pt.oT},Or={draw:(0,L.K2)(function(X,ae,w,re){const{securityLevel:It,sankey:qt}=(0,ee.D7)(),V=ee.ME.sankey;let pt;"sandbox"===It&&(pt=(0,S.Ltv)("#i"+ae));const H=(0,S.Ltv)("sandbox"===It?pt.nodes()[0].contentDocument.body:"body"),Nt="sandbox"===It?H.select(`[id="${ae}"]`):(0,S.Ltv)(`[id="${ae}"]`),St=qt?.width??V.width,$t=qt?.height??V.width,ye=qt?.useMaxWidth??V.useMaxWidth,le=qt?.nodeAlignment??V.nodeAlignment,Pe=qt?.prefix??V.prefix,oe=qt?.suffix??V.suffix,qe=qt?.showValues??V.showValues,ze=re.db.getGraph(),Et=Fr[le];(0,Pt.IZ)().nodeId(_t=>_t.id).nodeWidth(10).nodePadding(10+(qe?15:0)).nodeAlign(Et).extent([[0,0],[St,$t]])(ze);const F=(0,S.UMr)(S.zt);Nt.append("g").attr("class","nodes").selectAll(".node").data(ze.nodes).join("g").attr("class","node").attr("id",_t=>(_t.uid=Nr.next("node-")).id).attr("transform",function(_t){return"translate("+_t.x0+","+_t.y0+")"}).attr("x",_t=>_t.x0).attr("y",_t=>_t.y0).append("rect").attr("height",_t=>_t.y1-_t.y0).attr("width",_t=>_t.x1-_t.x0).attr("fill",_t=>F(_t.id));const et=(0,L.K2)(({id:_t,value:ht})=>qe?`${_t}\n${Pe}${Math.round(100*ht)/100}${oe}`:_t,"getText");Nt.append("g").attr("class","node-labels").attr("font-size",14).selectAll("text").data(ze.nodes).join("text").attr("x",_t=>_t.x0<St/2?_t.x1+6:_t.x0-6).attr("y",_t=>(_t.y1+_t.y0)/2).attr("dy",(qe?"0":"0.35")+"em").attr("text-anchor",_t=>_t.x0<St/2?"start":"end").text(et);const mt=Nt.append("g").attr("class","links").attr("fill","none").attr("stroke-opacity",.5).selectAll(".link").data(ze.links).join("g").attr("class","link").style("mix-blend-mode","multiply"),it=qt?.linkColor??"gradient";if("gradient"===it){const _t=mt.append("linearGradient").attr("id",ht=>(ht.uid=Nr.next("linearGradient-")).id).attr("gradientUnits","userSpaceOnUse").attr("x1",ht=>ht.source.x1).attr("x2",ht=>ht.target.x0);_t.append("stop").attr("offset","0%").attr("stop-color",ht=>F(ht.source.id)),_t.append("stop").attr("offset","100%").attr("stop-color",ht=>F(ht.target.id))}let rt;switch(it){case"gradient":rt=(0,L.K2)(_t=>_t.uid,"coloring");break;case"source":rt=(0,L.K2)(_t=>F(_t.source.id),"coloring");break;case"target":rt=(0,L.K2)(_t=>F(_t.target.id),"coloring");break;default:rt=it}mt.append("path").attr("d",(0,Pt.Ku)()).attr("stroke",rt).attr("stroke-width",_t=>Math.max(1,_t.width)),(0,ee.ot)(void 0,Nt,0,ye)},"draw")},je=(0,L.K2)(X=>X.replaceAll(/^[^\S\n\r]+|[^\S\n\r]+$/g,"").replaceAll(/([\n\r])+/g,"\n").trim(),"prepareTextForParsing"),ft=(0,L.K2)(X=>`.label {\n      font-family: ${X.fontFamily};\n    }`,"getStyles"),Bt=At.parse.bind(At);At.parse=X=>Bt(je(X));var we={styles:ft,parser:At,db:ra,renderer:Or}},59301:(Ja,vr,R)=>{"use strict";R.r(vr),R.d(vr,{diagram:()=>qt});var Pt,ut,ot=R(45027),ee=R(79006),L=R(32303),S=R(40622),$=function(){var V=(0,L.K2)(function(Xe,We,gr,hr){for(gr=gr||{},hr=Xe.length;hr--;gr[Xe[hr]]=We);return gr},"o"),pt=[1,3],H=[1,4],Nt=[1,5],St=[1,6],$t=[1,7],ye=[1,4,5,10,12,13,14,18,25,35,37,39,41,42,48,50,51,52,53,54,55,56,57,60,61,63,64,65,66,67],le=[1,4,5,10,12,13,14,18,25,28,35,37,39,41,42,48,50,51,52,53,54,55,56,57,60,61,63,64,65,66,67],Pe=[55,56,57],oe=[2,36],qe=[1,37],ze=[1,36],Et=[1,38],Tt=[1,35],B=[1,43],F=[1,41],et=[1,14],mt=[1,23],it=[1,18],rt=[1,19],_t=[1,20],ht=[1,21],Ft=[1,22],G=[1,24],lt=[1,25],ke=[1,26],Mt=[1,27],Zt=[1,28],pe=[1,29],Re=[1,32],Ze=[1,33],de=[1,34],mr=[1,39],xr=[1,40],zt=[1,42],Ae=[1,44],or=[1,62],ve=[1,61],ce=[4,5,8,10,12,13,14,18,44,47,49,55,56,57,63,64,65,66,67],Ee=[1,65],De=[1,66],er=[1,67],Qe=[1,68],Lr=[1,69],_e=[1,70],Hr=[1,71],sr=[1,72],te=[1,73],ne=[1,74],be=[1,75],ir=[1,76],g=[4,5,6,7,8,9,10,11,12,13,14,15,18],y=[1,90],E=[1,91],I=[1,92],m=[1,99],D=[1,93],v=[1,96],b=[1,94],C=[1,95],P=[1,97],Q=[1,98],xt=[1,102],Vt=[10,55,56,57],jt=[4,5,6,8,10,11,13,17,18,19,20,55,56,57],Ut={trace:(0,L.K2)(function(){},"trace"),yy:{},symbols_:{error:2,idStringToken:3,ALPHA:4,NUM:5,NODE_STRING:6,DOWN:7,MINUS:8,DEFAULT:9,COMMA:10,COLON:11,AMP:12,BRKT:13,MULT:14,UNICODE_TEXT:15,styleComponent:16,UNIT:17,SPACE:18,STYLE:19,PCT:20,idString:21,style:22,stylesOpt:23,classDefStatement:24,CLASSDEF:25,start:26,eol:27,QUADRANT:28,document:29,line:30,statement:31,axisDetails:32,quadrantDetails:33,points:34,title:35,title_value:36,acc_title:37,acc_title_value:38,acc_descr:39,acc_descr_value:40,acc_descr_multiline_value:41,section:42,text:43,point_start:44,point_x:45,point_y:46,class_name:47,"X-AXIS":48,"AXIS-TEXT-DELIMITER":49,"Y-AXIS":50,QUADRANT_1:51,QUADRANT_2:52,QUADRANT_3:53,QUADRANT_4:54,NEWLINE:55,SEMI:56,EOF:57,alphaNumToken:58,textNoTagsToken:59,STR:60,MD_STR:61,alphaNum:62,PUNCTUATION:63,PLUS:64,EQUALS:65,DOT:66,UNDERSCORE:67,$accept:0,$end:1},terminals_:{2:"error",4:"ALPHA",5:"NUM",6:"NODE_STRING",7:"DOWN",8:"MINUS",9:"DEFAULT",10:"COMMA",11:"COLON",12:"AMP",13:"BRKT",14:"MULT",15:"UNICODE_TEXT",17:"UNIT",18:"SPACE",19:"STYLE",20:"PCT",25:"CLASSDEF",28:"QUADRANT",35:"title",36:"title_value",37:"acc_title",38:"acc_title_value",39:"acc_descr",40:"acc_descr_value",41:"acc_descr_multiline_value",42:"section",44:"point_start",45:"point_x",46:"point_y",47:"class_name",48:"X-AXIS",49:"AXIS-TEXT-DELIMITER",50:"Y-AXIS",51:"QUADRANT_1",52:"QUADRANT_2",53:"QUADRANT_3",54:"QUADRANT_4",55:"NEWLINE",56:"SEMI",57:"EOF",60:"STR",61:"MD_STR",63:"PUNCTUATION",64:"PLUS",65:"EQUALS",66:"DOT",67:"UNDERSCORE"},productions_:[0,[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[16,1],[16,1],[16,1],[16,1],[16,1],[16,1],[16,1],[16,1],[16,1],[16,1],[21,1],[21,2],[22,1],[22,2],[23,1],[23,3],[24,5],[26,2],[26,2],[26,2],[29,0],[29,2],[30,2],[31,0],[31,1],[31,2],[31,1],[31,1],[31,1],[31,2],[31,2],[31,2],[31,1],[31,1],[34,4],[34,5],[34,5],[34,6],[32,4],[32,3],[32,2],[32,4],[32,3],[32,2],[33,2],[33,2],[33,2],[33,2],[27,1],[27,1],[27,1],[43,1],[43,2],[43,1],[43,1],[62,1],[62,2],[58,1],[58,1],[58,1],[58,1],[58,1],[58,1],[58,1],[58,1],[58,1],[58,1],[58,1],[59,1],[59,1],[59,1]],performAction:(0,L.K2)(function(We,gr,hr,_r,$e,He,Ar){var kr=He.length-1;switch($e){case 23:case 68:this.$=He[kr];break;case 24:case 69:this.$=He[kr-1]+""+He[kr];break;case 26:this.$=He[kr-1]+He[kr];break;case 27:this.$=[He[kr].trim()];break;case 28:He[kr-2].push(He[kr].trim()),this.$=He[kr-2];break;case 29:this.$=He[kr-4],_r.addClass(He[kr-2],He[kr]);break;case 37:this.$=[];break;case 42:this.$=He[kr].trim(),_r.setDiagramTitle(this.$);break;case 43:this.$=He[kr].trim(),_r.setAccTitle(this.$);break;case 44:case 45:this.$=He[kr].trim(),_r.setAccDescription(this.$);break;case 46:_r.addSection(He[kr].substr(8)),this.$=He[kr].substr(8);break;case 47:_r.addPoint(He[kr-3],"",He[kr-1],He[kr],[]);break;case 48:_r.addPoint(He[kr-4],He[kr-3],He[kr-1],He[kr],[]);break;case 49:_r.addPoint(He[kr-4],"",He[kr-2],He[kr-1],He[kr]);break;case 50:_r.addPoint(He[kr-5],He[kr-4],He[kr-2],He[kr-1],He[kr]);break;case 51:_r.setXAxisLeftText(He[kr-2]),_r.setXAxisRightText(He[kr]);break;case 52:He[kr-1].text+=" \u27f6 ",_r.setXAxisLeftText(He[kr-1]);break;case 53:_r.setXAxisLeftText(He[kr]);break;case 54:_r.setYAxisBottomText(He[kr-2]),_r.setYAxisTopText(He[kr]);break;case 55:He[kr-1].text+=" \u27f6 ",_r.setYAxisBottomText(He[kr-1]);break;case 56:_r.setYAxisBottomText(He[kr]);break;case 57:_r.setQuadrant1Text(He[kr]);break;case 58:_r.setQuadrant2Text(He[kr]);break;case 59:_r.setQuadrant3Text(He[kr]);break;case 60:_r.setQuadrant4Text(He[kr]);break;case 64:case 66:this.$={text:He[kr],type:"text"};break;case 65:this.$={text:He[kr-1].text+""+He[kr],type:He[kr-1].type};break;case 67:this.$={text:He[kr],type:"markdown"}}},"anonymous"),table:[{18:pt,26:1,27:2,28:H,55:Nt,56:St,57:$t},{1:[3]},{18:pt,26:8,27:2,28:H,55:Nt,56:St,57:$t},{18:pt,26:9,27:2,28:H,55:Nt,56:St,57:$t},V(ye,[2,33],{29:10}),V(le,[2,61]),V(le,[2,62]),V(le,[2,63]),{1:[2,30]},{1:[2,31]},V(Pe,oe,{30:11,31:12,24:13,32:15,33:16,34:17,43:30,58:31,1:[2,32],4:qe,5:ze,10:Et,12:Tt,13:B,14:F,18:et,25:mt,35:it,37:rt,39:_t,41:ht,42:Ft,48:G,50:lt,51:ke,52:Mt,53:Zt,54:pe,60:Re,61:Ze,63:de,64:mr,65:xr,66:zt,67:Ae}),V(ye,[2,34]),{27:45,55:Nt,56:St,57:$t},V(Pe,[2,37]),V(Pe,oe,{24:13,32:15,33:16,34:17,43:30,58:31,31:46,4:qe,5:ze,10:Et,12:Tt,13:B,14:F,18:et,25:mt,35:it,37:rt,39:_t,41:ht,42:Ft,48:G,50:lt,51:ke,52:Mt,53:Zt,54:pe,60:Re,61:Ze,63:de,64:mr,65:xr,66:zt,67:Ae}),V(Pe,[2,39]),V(Pe,[2,40]),V(Pe,[2,41]),{36:[1,47]},{38:[1,48]},{40:[1,49]},V(Pe,[2,45]),V(Pe,[2,46]),{18:[1,50]},{4:qe,5:ze,10:Et,12:Tt,13:B,14:F,43:51,58:31,60:Re,61:Ze,63:de,64:mr,65:xr,66:zt,67:Ae},{4:qe,5:ze,10:Et,12:Tt,13:B,14:F,43:52,58:31,60:Re,61:Ze,63:de,64:mr,65:xr,66:zt,67:Ae},{4:qe,5:ze,10:Et,12:Tt,13:B,14:F,43:53,58:31,60:Re,61:Ze,63:de,64:mr,65:xr,66:zt,67:Ae},{4:qe,5:ze,10:Et,12:Tt,13:B,14:F,43:54,58:31,60:Re,61:Ze,63:de,64:mr,65:xr,66:zt,67:Ae},{4:qe,5:ze,10:Et,12:Tt,13:B,14:F,43:55,58:31,60:Re,61:Ze,63:de,64:mr,65:xr,66:zt,67:Ae},{4:qe,5:ze,10:Et,12:Tt,13:B,14:F,43:56,58:31,60:Re,61:Ze,63:de,64:mr,65:xr,66:zt,67:Ae},{4:qe,5:ze,8:or,10:Et,12:Tt,13:B,14:F,18:ve,44:[1,57],47:[1,58],58:60,59:59,63:de,64:mr,65:xr,66:zt,67:Ae},V(ce,[2,64]),V(ce,[2,66]),V(ce,[2,67]),V(ce,[2,70]),V(ce,[2,71]),V(ce,[2,72]),V(ce,[2,73]),V(ce,[2,74]),V(ce,[2,75]),V(ce,[2,76]),V(ce,[2,77]),V(ce,[2,78]),V(ce,[2,79]),V(ce,[2,80]),V(ye,[2,35]),V(Pe,[2,38]),V(Pe,[2,42]),V(Pe,[2,43]),V(Pe,[2,44]),{3:64,4:Ee,5:De,6:er,7:Qe,8:Lr,9:_e,10:Hr,11:sr,12:te,13:ne,14:be,15:ir,21:63},V(Pe,[2,53],{59:59,58:60,4:qe,5:ze,8:or,10:Et,12:Tt,13:B,14:F,18:ve,49:[1,77],63:de,64:mr,65:xr,66:zt,67:Ae}),V(Pe,[2,56],{59:59,58:60,4:qe,5:ze,8:or,10:Et,12:Tt,13:B,14:F,18:ve,49:[1,78],63:de,64:mr,65:xr,66:zt,67:Ae}),V(Pe,[2,57],{59:59,58:60,4:qe,5:ze,8:or,10:Et,12:Tt,13:B,14:F,18:ve,63:de,64:mr,65:xr,66:zt,67:Ae}),V(Pe,[2,58],{59:59,58:60,4:qe,5:ze,8:or,10:Et,12:Tt,13:B,14:F,18:ve,63:de,64:mr,65:xr,66:zt,67:Ae}),V(Pe,[2,59],{59:59,58:60,4:qe,5:ze,8:or,10:Et,12:Tt,13:B,14:F,18:ve,63:de,64:mr,65:xr,66:zt,67:Ae}),V(Pe,[2,60],{59:59,58:60,4:qe,5:ze,8:or,10:Et,12:Tt,13:B,14:F,18:ve,63:de,64:mr,65:xr,66:zt,67:Ae}),{45:[1,79]},{44:[1,80]},V(ce,[2,65]),V(ce,[2,81]),V(ce,[2,82]),V(ce,[2,83]),{3:82,4:Ee,5:De,6:er,7:Qe,8:Lr,9:_e,10:Hr,11:sr,12:te,13:ne,14:be,15:ir,18:[1,81]},V(g,[2,23]),V(g,[2,1]),V(g,[2,2]),V(g,[2,3]),V(g,[2,4]),V(g,[2,5]),V(g,[2,6]),V(g,[2,7]),V(g,[2,8]),V(g,[2,9]),V(g,[2,10]),V(g,[2,11]),V(g,[2,12]),V(Pe,[2,52],{58:31,43:83,4:qe,5:ze,10:Et,12:Tt,13:B,14:F,60:Re,61:Ze,63:de,64:mr,65:xr,66:zt,67:Ae}),V(Pe,[2,55],{58:31,43:84,4:qe,5:ze,10:Et,12:Tt,13:B,14:F,60:Re,61:Ze,63:de,64:mr,65:xr,66:zt,67:Ae}),{46:[1,85]},{45:[1,86]},{4:y,5:E,6:I,8:m,11:D,13:v,16:89,17:b,18:C,19:P,20:Q,22:88,23:87},V(g,[2,24]),V(Pe,[2,51],{59:59,58:60,4:qe,5:ze,8:or,10:Et,12:Tt,13:B,14:F,18:ve,63:de,64:mr,65:xr,66:zt,67:Ae}),V(Pe,[2,54],{59:59,58:60,4:qe,5:ze,8:or,10:Et,12:Tt,13:B,14:F,18:ve,63:de,64:mr,65:xr,66:zt,67:Ae}),V(Pe,[2,47],{22:88,16:89,23:100,4:y,5:E,6:I,8:m,11:D,13:v,17:b,18:C,19:P,20:Q}),{46:[1,101]},V(Pe,[2,29],{10:xt}),V(Vt,[2,27],{16:103,4:y,5:E,6:I,8:m,11:D,13:v,17:b,18:C,19:P,20:Q}),V(jt,[2,25]),V(jt,[2,13]),V(jt,[2,14]),V(jt,[2,15]),V(jt,[2,16]),V(jt,[2,17]),V(jt,[2,18]),V(jt,[2,19]),V(jt,[2,20]),V(jt,[2,21]),V(jt,[2,22]),V(Pe,[2,49],{10:xt}),V(Pe,[2,48],{22:88,16:89,23:104,4:y,5:E,6:I,8:m,11:D,13:v,17:b,18:C,19:P,20:Q}),{4:y,5:E,6:I,8:m,11:D,13:v,16:89,17:b,18:C,19:P,20:Q,22:105},V(jt,[2,26]),V(Pe,[2,50],{10:xt}),V(Vt,[2,28],{16:103,4:y,5:E,6:I,8:m,11:D,13:v,17:b,18:C,19:P,20:Q})],defaultActions:{8:[2,30],9:[2,31]},parseError:(0,L.K2)(function(We,gr){if(!gr.recoverable){var hr=new Error(We);throw hr.hash=gr,hr}this.trace(We)},"parseError"),parse:(0,L.K2)(function(We){var gr=this,hr=[0],_r=[],$e=[null],He=[],Ar=this.table,kr="",zr=0,Er=0,Jr=0,ia=He.slice.call(arguments,1),jr=Object.create(this.lexer),Qr={yy:{}};for(var lr in this.yy)Object.prototype.hasOwnProperty.call(this.yy,lr)&&(Qr.yy[lr]=this.yy[lr]);jr.setInput(We,Qr.yy),Qr.yy.lexer=jr,Qr.yy.parser=this,typeof jr.yylloc>"u"&&(jr.yylloc={});var dr=jr.yylloc;He.push(dr);var W=jr.options&&jr.options.ranges;function Ye(){var Va;return"number"!=typeof(Va=_r.pop()||jr.lex()||1)&&(Va instanceof Array&&(Va=(_r=Va).pop()),Va=gr.symbols_[Va]||Va),Va}this.parseError="function"==typeof Qr.yy.parseError?Qr.yy.parseError:Object.getPrototypeOf(this).parseError,(0,L.K2)(function Yt(Va){hr.length=hr.length-2*Va,$e.length=$e.length-Va,He.length=He.length-Va},"popStack"),(0,L.K2)(Ye,"lex");for(var Ne,Tr,yr,da,Ia,Ma,ba,Sa,Wa={};;){if(this.defaultActions[yr=hr[hr.length-1]]?da=this.defaultActions[yr]:((null===Ne||typeof Ne>"u")&&(Ne=Ye()),da=Ar[yr]&&Ar[yr][Ne]),typeof da>"u"||!da.length||!da[0]){var ea;for(Ma in Sa=[],Ar[yr])this.terminals_[Ma]&&Ma>2&&Sa.push("'"+this.terminals_[Ma]+"'");ea=jr.showPosition?"Parse error on line "+(zr+1)+":\n"+jr.showPosition()+"\nExpecting "+Sa.join(", ")+", got '"+(this.terminals_[Ne]||Ne)+"'":"Parse error on line "+(zr+1)+": Unexpected "+(1==Ne?"end of input":"'"+(this.terminals_[Ne]||Ne)+"'"),this.parseError(ea,{text:jr.match,token:this.terminals_[Ne]||Ne,line:jr.yylineno,loc:dr,expected:Sa})}if(da[0]instanceof Array&&da.length>1)throw new Error("Parse Error: multiple actions possible at state: "+yr+", token: "+Ne);switch(da[0]){case 1:hr.push(Ne),$e.push(jr.yytext),He.push(jr.yylloc),hr.push(da[1]),Ne=null,Tr?(Ne=Tr,Tr=null):(Er=jr.yyleng,kr=jr.yytext,zr=jr.yylineno,dr=jr.yylloc,Jr>0&&Jr--);break;case 2:if(Wa.$=$e[$e.length-(ba=this.productions_[da[1]][1])],Wa._$={first_line:He[He.length-(ba||1)].first_line,last_line:He[He.length-1].last_line,first_column:He[He.length-(ba||1)].first_column,last_column:He[He.length-1].last_column},W&&(Wa._$.range=[He[He.length-(ba||1)].range[0],He[He.length-1].range[1]]),typeof(Ia=this.performAction.apply(Wa,[kr,Er,zr,Qr.yy,da[1],$e,He].concat(ia)))<"u")return Ia;ba&&(hr=hr.slice(0,-1*ba*2),$e=$e.slice(0,-1*ba),He=He.slice(0,-1*ba)),hr.push(this.productions_[da[1]][0]),$e.push(Wa.$),He.push(Wa._$),hr.push(Ar[hr[hr.length-2]][hr[hr.length-1]]);break;case 3:return!0}}return!0},"parse")};function xe(){this.yy={}}return Ut.lexer=function(){return{EOF:1,parseError:(0,L.K2)(function(gr,hr){if(!this.yy.parser)throw new Error(gr);this.yy.parser.parseError(gr,hr)},"parseError"),setInput:(0,L.K2)(function(We,gr){return this.yy=gr||this.yy||{},this._input=We,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},"setInput"),input:(0,L.K2)(function(){var We=this._input[0];return this.yytext+=We,this.yyleng++,this.offset++,this.match+=We,this.matched+=We,We.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),We},"input"),unput:(0,L.K2)(function(We){var gr=We.length,hr=We.split(/(?:\r\n?|\n)/g);this._input=We+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-gr),this.offset-=gr;var _r=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),hr.length-1&&(this.yylineno-=hr.length-1);var $e=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:hr?(hr.length===_r.length?this.yylloc.first_column:0)+_r[_r.length-hr.length].length-hr[0].length:this.yylloc.first_column-gr},this.options.ranges&&(this.yylloc.range=[$e[0],$e[0]+this.yyleng-gr]),this.yyleng=this.yytext.length,this},"unput"),more:(0,L.K2)(function(){return this._more=!0,this},"more"),reject:(0,L.K2)(function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},"reject"),less:(0,L.K2)(function(We){this.unput(this.match.slice(We))},"less"),pastInput:(0,L.K2)(function(){var We=this.matched.substr(0,this.matched.length-this.match.length);return(We.length>20?"...":"")+We.substr(-20).replace(/\n/g,"")},"pastInput"),upcomingInput:(0,L.K2)(function(){var We=this.match;return We.length<20&&(We+=this._input.substr(0,20-We.length)),(We.substr(0,20)+(We.length>20?"...":"")).replace(/\n/g,"")},"upcomingInput"),showPosition:(0,L.K2)(function(){var We=this.pastInput(),gr=new Array(We.length+1).join("-");return We+this.upcomingInput()+"\n"+gr+"^"},"showPosition"),test_match:(0,L.K2)(function(We,gr){var hr,_r,$e;if(this.options.backtrack_lexer&&($e={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&($e.yylloc.range=this.yylloc.range.slice(0))),(_r=We[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=_r.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:_r?_r[_r.length-1].length-_r[_r.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+We[0].length},this.yytext+=We[0],this.match+=We[0],this.matches=We,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(We[0].length),this.matched+=We[0],hr=this.performAction.call(this,this.yy,this,gr,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),hr)return hr;if(this._backtrack){for(var He in $e)this[He]=$e[He];return!1}return!1},"test_match"),next:(0,L.K2)(function(){if(this.done)return this.EOF;var We,gr,hr,_r;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var $e=this._currentRules(),He=0;He<$e.length;He++)if((hr=this._input.match(this.rules[$e[He]]))&&(!gr||hr[0].length>gr[0].length)){if(gr=hr,_r=He,this.options.backtrack_lexer){if(!1!==(We=this.test_match(hr,$e[He])))return We;if(this._backtrack){gr=!1;continue}return!1}if(!this.options.flex)break}return gr?!1!==(We=this.test_match(gr,$e[_r]))&&We:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},"next"),lex:(0,L.K2)(function(){return this.next()||this.lex()},"lex"),begin:(0,L.K2)(function(gr){this.conditionStack.push(gr)},"begin"),popState:(0,L.K2)(function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},"popState"),_currentRules:(0,L.K2)(function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},"_currentRules"),topState:(0,L.K2)(function(gr){return(gr=this.conditionStack.length-1-Math.abs(gr||0))>=0?this.conditionStack[gr]:"INITIAL"},"topState"),pushState:(0,L.K2)(function(gr){this.begin(gr)},"pushState"),stateStackSize:(0,L.K2)(function(){return this.conditionStack.length},"stateStackSize"),options:{"case-insensitive":!0},performAction:(0,L.K2)(function(gr,hr,_r,$e){switch(_r){case 0:case 1:case 3:break;case 2:return 55;case 4:return this.begin("title"),35;case 5:return this.popState(),"title_value";case 6:return this.begin("acc_title"),37;case 7:return this.popState(),"acc_title_value";case 8:return this.begin("acc_descr"),39;case 9:return this.popState(),"acc_descr_value";case 10:this.begin("acc_descr_multiline");break;case 11:case 23:case 25:case 31:this.popState();break;case 12:return"acc_descr_multiline_value";case 13:return 48;case 14:return 50;case 15:return 49;case 16:return 51;case 17:return 52;case 18:return 53;case 19:return 54;case 20:return 25;case 21:this.begin("md_string");break;case 22:return"MD_STR";case 24:this.begin("string");break;case 26:return"STR";case 27:this.begin("class_name");break;case 28:return this.popState(),47;case 29:return this.begin("point_start"),44;case 30:return this.begin("point_x"),45;case 32:this.popState(),this.begin("point_y");break;case 33:return this.popState(),46;case 34:return 28;case 35:return 4;case 36:return 11;case 37:return 64;case 38:return 10;case 39:case 40:return 65;case 41:return 14;case 42:return 13;case 43:return 67;case 44:return 66;case 45:return 12;case 46:return 8;case 47:return 5;case 48:return 18;case 49:return 56;case 50:return 63;case 51:return 57}},"anonymous"),rules:[/^(?:%%(?!\{)[^\n]*)/i,/^(?:[^\}]%%[^\n]*)/i,/^(?:[\n\r]+)/i,/^(?:%%[^\n]*)/i,/^(?:title\b)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?: *x-axis *)/i,/^(?: *y-axis *)/i,/^(?: *--+> *)/i,/^(?: *quadrant-1 *)/i,/^(?: *quadrant-2 *)/i,/^(?: *quadrant-3 *)/i,/^(?: *quadrant-4 *)/i,/^(?:classDef\b)/i,/^(?:["][`])/i,/^(?:[^`"]+)/i,/^(?:[`]["])/i,/^(?:["])/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?::::)/i,/^(?:^\w+)/i,/^(?:\s*:\s*\[\s*)/i,/^(?:(1)|(0(.\d+)?))/i,/^(?:\s*\] *)/i,/^(?:\s*,\s*)/i,/^(?:(1)|(0(.\d+)?))/i,/^(?: *quadrantChart *)/i,/^(?:[A-Za-z]+)/i,/^(?::)/i,/^(?:\+)/i,/^(?:,)/i,/^(?:=)/i,/^(?:=)/i,/^(?:\*)/i,/^(?:#)/i,/^(?:[\_])/i,/^(?:\.)/i,/^(?:&)/i,/^(?:-)/i,/^(?:[0-9]+)/i,/^(?:\s)/i,/^(?:;)/i,/^(?:[!"#$%&'*+,-.`?\\_/])/i,/^(?:$)/i],conditions:{class_name:{rules:[28],inclusive:!1},point_y:{rules:[33],inclusive:!1},point_x:{rules:[32],inclusive:!1},point_start:{rules:[30,31],inclusive:!1},acc_descr_multiline:{rules:[11,12],inclusive:!1},acc_descr:{rules:[9],inclusive:!1},acc_title:{rules:[7],inclusive:!1},title:{rules:[5],inclusive:!1},md_string:{rules:[22,23],inclusive:!1},string:{rules:[25,26],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,6,8,10,13,14,15,16,17,18,19,20,21,24,27,29,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],inclusive:!0}}}}(),(0,L.K2)(xe,"Parser"),xe.prototype=Ut,Ut.Parser=xe,new xe}();$.parser=$;var A=$,At=(0,ee.P$)(),wt=(class{constructor(){this.classes=new Map,this.config=this.getDefaultConfig(),this.themeConfig=this.getDefaultThemeConfig(),this.data=this.getDefaultData()}getDefaultData(){return{titleText:"",quadrant1Text:"",quadrant2Text:"",quadrant3Text:"",quadrant4Text:"",xAxisLeftText:"",xAxisRightText:"",yAxisBottomText:"",yAxisTopText:"",points:[]}}getDefaultConfig(){return{showXAxis:!0,showYAxis:!0,showTitle:!0,chartHeight:ee.UI.quadrantChart?.chartWidth||500,chartWidth:ee.UI.quadrantChart?.chartHeight||500,titlePadding:ee.UI.quadrantChart?.titlePadding||10,titleFontSize:ee.UI.quadrantChart?.titleFontSize||20,quadrantPadding:ee.UI.quadrantChart?.quadrantPadding||5,xAxisLabelPadding:ee.UI.quadrantChart?.xAxisLabelPadding||5,yAxisLabelPadding:ee.UI.quadrantChart?.yAxisLabelPadding||5,xAxisLabelFontSize:ee.UI.quadrantChart?.xAxisLabelFontSize||16,yAxisLabelFontSize:ee.UI.quadrantChart?.yAxisLabelFontSize||16,quadrantLabelFontSize:ee.UI.quadrantChart?.quadrantLabelFontSize||16,quadrantTextTopPadding:ee.UI.quadrantChart?.quadrantTextTopPadding||5,pointTextPadding:ee.UI.quadrantChart?.pointTextPadding||5,pointLabelFontSize:ee.UI.quadrantChart?.pointLabelFontSize||12,pointRadius:ee.UI.quadrantChart?.pointRadius||5,xAxisPosition:ee.UI.quadrantChart?.xAxisPosition||"top",yAxisPosition:ee.UI.quadrantChart?.yAxisPosition||"left",quadrantInternalBorderStrokeWidth:ee.UI.quadrantChart?.quadrantInternalBorderStrokeWidth||1,quadrantExternalBorderStrokeWidth:ee.UI.quadrantChart?.quadrantExternalBorderStrokeWidth||2}}getDefaultThemeConfig(){return{quadrant1Fill:At.quadrant1Fill,quadrant2Fill:At.quadrant2Fill,quadrant3Fill:At.quadrant3Fill,quadrant4Fill:At.quadrant4Fill,quadrant1TextFill:At.quadrant1TextFill,quadrant2TextFill:At.quadrant2TextFill,quadrant3TextFill:At.quadrant3TextFill,quadrant4TextFill:At.quadrant4TextFill,quadrantPointFill:At.quadrantPointFill,quadrantPointTextFill:At.quadrantPointTextFill,quadrantXAxisTextFill:At.quadrantXAxisTextFill,quadrantYAxisTextFill:At.quadrantYAxisTextFill,quadrantTitleFill:At.quadrantTitleFill,quadrantInternalBorderStrokeFill:At.quadrantInternalBorderStrokeFill,quadrantExternalBorderStrokeFill:At.quadrantExternalBorderStrokeFill}}clear(){this.config=this.getDefaultConfig(),this.themeConfig=this.getDefaultThemeConfig(),this.data=this.getDefaultData(),this.classes=new Map,L.Rm.info("clear called")}setData(V){this.data={...this.data,...V}}addPoints(V){this.data.points=[...V,...this.data.points]}addClass(V,pt){this.classes.set(V,pt)}setConfig(V){L.Rm.trace("setConfig called with: ",V),this.config={...this.config,...V}}setThemeConfig(V){L.Rm.trace("setThemeConfig called with: ",V),this.themeConfig={...this.themeConfig,...V}}calculateSpace(V,pt,H,Nt){const St=2*this.config.xAxisLabelPadding+this.config.xAxisLabelFontSize,$t={top:"top"===V&&pt?St:0,bottom:"bottom"===V&&pt?St:0},ye=2*this.config.yAxisLabelPadding+this.config.yAxisLabelFontSize,le={left:"left"===this.config.yAxisPosition&&H?ye:0,right:"right"===this.config.yAxisPosition&&H?ye:0},oe={top:Nt?this.config.titleFontSize+2*this.config.titlePadding:0},Et=this.config.chartWidth-2*this.config.quadrantPadding-le.left-le.right,Tt=this.config.chartHeight-2*this.config.quadrantPadding-$t.top-$t.bottom-oe.top;return{xAxisSpace:$t,yAxisSpace:le,titleSpace:oe,quadrantSpace:{quadrantLeft:this.config.quadrantPadding+le.left,quadrantTop:this.config.quadrantPadding+$t.top+oe.top,quadrantWidth:Et,quadrantHalfWidth:Et/2,quadrantHeight:Tt,quadrantHalfHeight:Tt/2}}}getAxisLabels(V,pt,H,Nt){const{quadrantSpace:St,titleSpace:$t}=Nt,{quadrantHalfHeight:ye,quadrantHeight:le,quadrantLeft:Pe,quadrantHalfWidth:oe,quadrantTop:qe,quadrantWidth:ze}=St,Et=!!this.data.xAxisRightText,Tt=!!this.data.yAxisTopText,B=[];return this.data.xAxisLeftText&&pt&&B.push({text:this.data.xAxisLeftText,fill:this.themeConfig.quadrantXAxisTextFill,x:Pe+(Et?oe/2:0),y:"top"===V?this.config.xAxisLabelPadding+$t.top:this.config.xAxisLabelPadding+qe+le+this.config.quadrantPadding,fontSize:this.config.xAxisLabelFontSize,verticalPos:Et?"center":"left",horizontalPos:"top",rotation:0}),this.data.xAxisRightText&&pt&&B.push({text:this.data.xAxisRightText,fill:this.themeConfig.quadrantXAxisTextFill,x:Pe+oe+(Et?oe/2:0),y:"top"===V?this.config.xAxisLabelPadding+$t.top:this.config.xAxisLabelPadding+qe+le+this.config.quadrantPadding,fontSize:this.config.xAxisLabelFontSize,verticalPos:Et?"center":"left",horizontalPos:"top",rotation:0}),this.data.yAxisBottomText&&H&&B.push({text:this.data.yAxisBottomText,fill:this.themeConfig.quadrantYAxisTextFill,x:"left"===this.config.yAxisPosition?this.config.yAxisLabelPadding:this.config.yAxisLabelPadding+Pe+ze+this.config.quadrantPadding,y:qe+le-(Tt?ye/2:0),fontSize:this.config.yAxisLabelFontSize,verticalPos:Tt?"center":"left",horizontalPos:"top",rotation:-90}),this.data.yAxisTopText&&H&&B.push({text:this.data.yAxisTopText,fill:this.themeConfig.quadrantYAxisTextFill,x:"left"===this.config.yAxisPosition?this.config.yAxisLabelPadding:this.config.yAxisLabelPadding+Pe+ze+this.config.quadrantPadding,y:qe+ye-(Tt?ye/2:0),fontSize:this.config.yAxisLabelFontSize,verticalPos:Tt?"center":"left",horizontalPos:"top",rotation:-90}),B}getQuadrants(V){const{quadrantSpace:pt}=V,{quadrantHalfHeight:H,quadrantLeft:Nt,quadrantHalfWidth:St,quadrantTop:$t}=pt,ye=[{text:{text:this.data.quadrant1Text,fill:this.themeConfig.quadrant1TextFill,x:0,y:0,fontSize:this.config.quadrantLabelFontSize,verticalPos:"center",horizontalPos:"middle",rotation:0},x:Nt+St,y:$t,width:St,height:H,fill:this.themeConfig.quadrant1Fill},{text:{text:this.data.quadrant2Text,fill:this.themeConfig.quadrant2TextFill,x:0,y:0,fontSize:this.config.quadrantLabelFontSize,verticalPos:"center",horizontalPos:"middle",rotation:0},x:Nt,y:$t,width:St,height:H,fill:this.themeConfig.quadrant2Fill},{text:{text:this.data.quadrant3Text,fill:this.themeConfig.quadrant3TextFill,x:0,y:0,fontSize:this.config.quadrantLabelFontSize,verticalPos:"center",horizontalPos:"middle",rotation:0},x:Nt,y:$t+H,width:St,height:H,fill:this.themeConfig.quadrant3Fill},{text:{text:this.data.quadrant4Text,fill:this.themeConfig.quadrant4TextFill,x:0,y:0,fontSize:this.config.quadrantLabelFontSize,verticalPos:"center",horizontalPos:"middle",rotation:0},x:Nt+St,y:$t+H,width:St,height:H,fill:this.themeConfig.quadrant4Fill}];for(const le of ye)le.text.x=le.x+le.width/2,0===this.data.points.length?(le.text.y=le.y+le.height/2,le.text.horizontalPos="middle"):(le.text.y=le.y+this.config.quadrantTextTopPadding,le.text.horizontalPos="top");return ye}getQuadrantPoints(V){const{quadrantSpace:pt}=V,{quadrantHeight:H,quadrantLeft:Nt,quadrantTop:St,quadrantWidth:$t}=pt,ye=(0,S.m4Y)().domain([0,1]).range([Nt,$t+Nt]),le=(0,S.m4Y)().domain([0,1]).range([H+St,St]);return this.data.points.map(oe=>{const qe=this.classes.get(oe.className);return qe&&(oe={...qe,...oe}),{x:ye(oe.x),y:le(oe.y),fill:oe.color??this.themeConfig.quadrantPointFill,radius:oe.radius??this.config.pointRadius,text:{text:oe.text,fill:this.themeConfig.quadrantPointTextFill,x:ye(oe.x),y:le(oe.y)+this.config.pointTextPadding,verticalPos:"center",horizontalPos:"top",fontSize:this.config.pointLabelFontSize,rotation:0},strokeColor:oe.strokeColor??this.themeConfig.quadrantPointFill,strokeWidth:oe.strokeWidth??"0px"}})}getBorders(V){const pt=this.config.quadrantExternalBorderStrokeWidth/2,{quadrantSpace:H}=V,{quadrantHalfHeight:Nt,quadrantHeight:St,quadrantLeft:$t,quadrantHalfWidth:ye,quadrantTop:le,quadrantWidth:Pe}=H;return[{strokeFill:this.themeConfig.quadrantExternalBorderStrokeFill,strokeWidth:this.config.quadrantExternalBorderStrokeWidth,x1:$t-pt,y1:le,x2:$t+Pe+pt,y2:le},{strokeFill:this.themeConfig.quadrantExternalBorderStrokeFill,strokeWidth:this.config.quadrantExternalBorderStrokeWidth,x1:$t+Pe,y1:le+pt,x2:$t+Pe,y2:le+St-pt},{strokeFill:this.themeConfig.quadrantExternalBorderStrokeFill,strokeWidth:this.config.quadrantExternalBorderStrokeWidth,x1:$t-pt,y1:le+St,x2:$t+Pe+pt,y2:le+St},{strokeFill:this.themeConfig.quadrantExternalBorderStrokeFill,strokeWidth:this.config.quadrantExternalBorderStrokeWidth,x1:$t,y1:le+pt,x2:$t,y2:le+St-pt},{strokeFill:this.themeConfig.quadrantInternalBorderStrokeFill,strokeWidth:this.config.quadrantInternalBorderStrokeWidth,x1:$t+ye,y1:le+pt,x2:$t+ye,y2:le+St-pt},{strokeFill:this.themeConfig.quadrantInternalBorderStrokeFill,strokeWidth:this.config.quadrantInternalBorderStrokeWidth,x1:$t+pt,y1:le+Nt,x2:$t+Pe-pt,y2:le+Nt}]}getTitle(V){if(V)return{text:this.data.titleText,fill:this.themeConfig.quadrantTitleFill,fontSize:this.config.titleFontSize,horizontalPos:"top",verticalPos:"center",rotation:0,y:this.config.titlePadding,x:this.config.chartWidth/2}}build(){const V=this.config.showXAxis&&!(!this.data.xAxisLeftText&&!this.data.xAxisRightText),pt=this.config.showYAxis&&!(!this.data.yAxisTopText&&!this.data.yAxisBottomText),H=this.config.showTitle&&!!this.data.titleText,Nt=this.data.points.length>0?"bottom":this.config.xAxisPosition,St=this.calculateSpace(Nt,V,pt,H);return{points:this.getQuadrantPoints(St),quadrants:this.getQuadrants(St),axisLabels:this.getAxisLabels(Nt,V,pt,St),borderLines:this.getBorders(St),title:this.getTitle(H)}}static#t=Pt=()=>((0,ot.A)(this,"QuadrantBuilder"),(0,L.K2)(this,"QuadrantBuilder"),this)},Pt()),Ge=(class extends Error{constructor(V,pt,H){super(`value for ${V} ${pt} is invalid, please use a valid ${H}`),this.name="InvalidStyleError"}static#t=ut=()=>((0,ot.A)(this,"InvalidStyleError"),(0,L.K2)(this,"InvalidStyleError"),this)},ut());function dt(V){return!/^#?([\dA-Fa-f]{6}|[\dA-Fa-f]{3})$/.test(V)}function Rt(V){return!/^\d+$/.test(V)}function q(V){return!/^\d+px$/.test(V)}(0,L.K2)(dt,"validateHexCode"),(0,L.K2)(Rt,"validateNumber"),(0,L.K2)(q,"validateSizeInPixels");var ar=(0,ee.D7)();function Ke(V){return(0,ee.jZ)(V.trim(),ar)}(0,L.K2)(Ke,"textSanitizer");var cr=new wt;function Rr(V){cr.setData({quadrant1Text:Ke(V.text)})}function wr(V){cr.setData({quadrant2Text:Ke(V.text)})}function Vr(V){cr.setData({quadrant3Text:Ke(V.text)})}function ra(V){cr.setData({quadrant4Text:Ke(V.text)})}function Nr(V){cr.setData({xAxisLeftText:Ke(V.text)})}function Fr(V){cr.setData({xAxisRightText:Ke(V.text)})}function Se(V){cr.setData({yAxisTopText:Ke(V.text)})}function Or(V){cr.setData({yAxisBottomText:Ke(V.text)})}function je(V){const pt={};for(const H of V){const[Nt,St]=H.trim().split(/\s*:\s*/);if("radius"===Nt){if(Rt(St))throw new Ge(Nt,St,"number");pt.radius=parseInt(St)}else if("color"===Nt){if(dt(St))throw new Ge(Nt,St,"hex code");pt.color=St}else if("stroke-color"===Nt){if(dt(St))throw new Ge(Nt,St,"hex code");pt.strokeColor=St}else{if("stroke-width"!==Nt)throw new Error(`style named ${Nt} is not supported.`);if(q(St))throw new Ge(Nt,St,"number of pixels (eg. 10px)");pt.strokeWidth=St}}return pt}function z(V,pt,H,Nt,St){const $t=je(St);cr.addPoints([{x:H,y:Nt,text:Ke(V.text),className:pt,...$t}])}function ft(V,pt){cr.addClass(V,je(pt))}function Bt(V){cr.setConfig({chartWidth:V})}function we(V){cr.setConfig({chartHeight:V})}function X(){const V=(0,ee.D7)(),{themeVariables:pt,quadrantChart:H}=V;return H&&cr.setConfig(H),cr.setThemeConfig({quadrant1Fill:pt.quadrant1Fill,quadrant2Fill:pt.quadrant2Fill,quadrant3Fill:pt.quadrant3Fill,quadrant4Fill:pt.quadrant4Fill,quadrant1TextFill:pt.quadrant1TextFill,quadrant2TextFill:pt.quadrant2TextFill,quadrant3TextFill:pt.quadrant3TextFill,quadrant4TextFill:pt.quadrant4TextFill,quadrantPointFill:pt.quadrantPointFill,quadrantPointTextFill:pt.quadrantPointTextFill,quadrantXAxisTextFill:pt.quadrantXAxisTextFill,quadrantYAxisTextFill:pt.quadrantYAxisTextFill,quadrantExternalBorderStrokeFill:pt.quadrantExternalBorderStrokeFill,quadrantInternalBorderStrokeFill:pt.quadrantInternalBorderStrokeFill,quadrantTitleFill:pt.quadrantTitleFill}),cr.setData({titleText:(0,ee.ab)()}),cr.build()}(0,L.K2)(Rr,"setQuadrant1Text"),(0,L.K2)(wr,"setQuadrant2Text"),(0,L.K2)(Vr,"setQuadrant3Text"),(0,L.K2)(ra,"setQuadrant4Text"),(0,L.K2)(Nr,"setXAxisLeftText"),(0,L.K2)(Fr,"setXAxisRightText"),(0,L.K2)(Se,"setYAxisTopText"),(0,L.K2)(Or,"setYAxisBottomText"),(0,L.K2)(je,"parseStyles"),(0,L.K2)(z,"addPoint"),(0,L.K2)(ft,"addClass"),(0,L.K2)(Bt,"setWidth"),(0,L.K2)(we,"setHeight"),(0,L.K2)(X,"getQuadrantData");var qt={parser:A,db:{setWidth:Bt,setHeight:we,setQuadrant1Text:Rr,setQuadrant2Text:wr,setQuadrant3Text:Vr,setQuadrant4Text:ra,setXAxisLeftText:Nr,setXAxisRightText:Fr,setYAxisTopText:Se,setYAxisBottomText:Or,parseStyles:je,addPoint:z,addClass:ft,getQuadrantData:X,clear:(0,L.K2)(function(){cr.clear(),(0,ee.IU)()},"clear"),setAccTitle:ee.SV,getAccTitle:ee.iN,setDiagramTitle:ee.ke,getDiagramTitle:ee.ab,getAccDescription:ee.m7,setAccDescription:ee.EI},renderer:{draw:(0,L.K2)((V,pt,H,Nt)=>{function St(lt){return"top"===lt?"hanging":"middle"}function $t(lt){return"left"===lt?"start":"middle"}function ye(lt){return`translate(${lt.x}, ${lt.y}) rotate(${lt.rotation||0})`}(0,L.K2)(St,"getDominantBaseLine"),(0,L.K2)($t,"getTextAnchor"),(0,L.K2)(ye,"getTransformation");const le=(0,ee.D7)();L.Rm.debug("Rendering quadrant chart\n"+V);const Pe=le.securityLevel;let oe;"sandbox"===Pe&&(oe=(0,S.Ltv)("#i"+pt));const ze=(0,S.Ltv)("sandbox"===Pe?oe.nodes()[0].contentDocument.body:"body").select(`[id="${pt}"]`),Et=ze.append("g").attr("class","main"),Tt=le.quadrantChart?.chartWidth??500,B=le.quadrantChart?.chartHeight??500;(0,ee.a$)(ze,B,Tt,le.quadrantChart?.useMaxWidth??!0),ze.attr("viewBox","0 0 "+Tt+" "+B),Nt.db.setHeight(B),Nt.db.setWidth(Tt);const F=Nt.db.getQuadrantData(),et=Et.append("g").attr("class","quadrants"),mt=Et.append("g").attr("class","border"),it=Et.append("g").attr("class","data-points"),rt=Et.append("g").attr("class","labels"),_t=Et.append("g").attr("class","title");F.title&&_t.append("text").attr("x",0).attr("y",0).attr("fill",F.title.fill).attr("font-size",F.title.fontSize).attr("dominant-baseline",St(F.title.horizontalPos)).attr("text-anchor",$t(F.title.verticalPos)).attr("transform",ye(F.title)).text(F.title.text),F.borderLines&&mt.selectAll("line").data(F.borderLines).enter().append("line").attr("x1",lt=>lt.x1).attr("y1",lt=>lt.y1).attr("x2",lt=>lt.x2).attr("y2",lt=>lt.y2).style("stroke",lt=>lt.strokeFill).style("stroke-width",lt=>lt.strokeWidth);const ht=et.selectAll("g.quadrant").data(F.quadrants).enter().append("g").attr("class","quadrant");ht.append("rect").attr("x",lt=>lt.x).attr("y",lt=>lt.y).attr("width",lt=>lt.width).attr("height",lt=>lt.height).attr("fill",lt=>lt.fill),ht.append("text").attr("x",0).attr("y",0).attr("fill",lt=>lt.text.fill).attr("font-size",lt=>lt.text.fontSize).attr("dominant-baseline",lt=>St(lt.text.horizontalPos)).attr("text-anchor",lt=>$t(lt.text.verticalPos)).attr("transform",lt=>ye(lt.text)).text(lt=>lt.text.text),rt.selectAll("g.label").data(F.axisLabels).enter().append("g").attr("class","label").append("text").attr("x",0).attr("y",0).text(lt=>lt.text).attr("fill",lt=>lt.fill).attr("font-size",lt=>lt.fontSize).attr("dominant-baseline",lt=>St(lt.horizontalPos)).attr("text-anchor",lt=>$t(lt.verticalPos)).attr("transform",lt=>ye(lt));const G=it.selectAll("g.data-point").data(F.points).enter().append("g").attr("class","data-point");G.append("circle").attr("cx",lt=>lt.x).attr("cy",lt=>lt.y).attr("r",lt=>lt.radius).attr("fill",lt=>lt.fill).attr("stroke",lt=>lt.strokeColor).attr("stroke-width",lt=>lt.strokeWidth),G.append("text").attr("x",0).attr("y",0).text(lt=>lt.text.text).attr("fill",lt=>lt.text.fill).attr("font-size",lt=>lt.text.fontSize).attr("dominant-baseline",lt=>St(lt.text.horizontalPos)).attr("text-anchor",lt=>$t(lt.text.verticalPos)).attr("transform",lt=>ye(lt.text))},"draw")},styles:(0,L.K2)(()=>"","styles")}},59355:(Ja,vr,R)=>{"use strict";R.d(vr,{GZ:()=>re,Gc:()=>At,W6:()=>Bt,WY:()=>ar,hE:()=>ae,pC:()=>dt});var ot=R(89204),ee=R(52052),L=R(79006),S=R(32303),Pt=R(40932),ut=R(40622),$=R(60997),A=R(98245),At={body:'<g><rect width="80" height="80" style="fill: #087ebf; stroke-width: 0px;"/><text transform="translate(21.16 64.67)" style="fill: #fff; font-family: ArialMT, Arial; font-size: 67.75px;"><tspan x="0" y="0">?</tspan></text></g>',height:80,width:80},wt=new Map,Ge=new Map,dt=(0,S.K2)(It=>{for(const qt of It){if(!qt.name)throw new Error('Invalid icon loader. Must have a "name" property with non-empty string value.');if(S.Rm.debug("Registering icon pack:",qt.name),"loader"in qt)Ge.set(qt.name,qt.loader);else{if(!("icons"in qt))throw S.Rm.error("Invalid icon loader:",qt),new Error('Invalid icon loader. Must have either "icons" or "loader" property.');wt.set(qt.name,qt.icons)}}},"registerIconPacks"),Rt=(0,S.K2)(function(){var It=(0,ot.A)(function*(qt,V){const pt=(0,Pt.L7)(qt,!0,void 0!==V);if(!pt)throw new Error(`Invalid icon name: ${qt}`);const H=pt.prefix||V;if(!H)throw new Error(`Icon name must contain a prefix: ${qt}`);let Nt=wt.get(H);if(!Nt){const $t=Ge.get(H);if(!$t)throw new Error(`Icon set not found: ${pt.prefix}`);try{Nt={...yield $t(),prefix:H},wt.set(H,Nt)}catch(ye){throw S.Rm.error(ye),new Error(`Failed to load icon set: ${pt.prefix}`)}}const St=(0,Pt.y3)(Nt,pt.name);if(!St)throw new Error(`Icon not found: ${qt}`);return St});return function(qt,V){return It.apply(this,arguments)}}(),"getRegisteredIconData"),q=(0,S.K2)(function(){var It=(0,ot.A)(function*(qt){try{return yield Rt(qt),!0}catch{return!1}});return function(qt){return It.apply(this,arguments)}}(),"isIconAvailable"),ar=(0,S.K2)(function(){var It=(0,ot.A)(function*(qt,V,pt){let H;try{H=yield Rt(qt,V?.fallbackPrefix)}catch($t){S.Rm.error($t),H=At}const Nt=(0,Pt.pu)(H,V),St=(0,Pt.U5)((0,Pt.$W)(Nt.body),{...Nt.attributes,...pt});return(0,L.jZ)(St,(0,L.zj)())});return function(qt,V,pt){return It.apply(this,arguments)}}(),"getIconSVG");function Ke(It,{markdownAutoWrap:qt}){const pt=It.replace(/<br\/>/g,"\n").replace(/\n{2,}/g,"\n"),H=(0,A.T)(pt);return!1===qt?H.replace(/ /g,"&nbsp;"):H}function cr(It,qt={}){const V=Ke(It,qt),pt=$.xI.lexer(V),H=[[]];let Nt=0;function St($t,ye="normal"){"text"===$t.type?$t.text.split("\n").forEach((Pe,oe)=>{0!==oe&&(Nt++,H.push([])),Pe.split(" ").forEach(qe=>{(qe=qe.replace(/&#39;/g,"'"))&&H[Nt].push({content:qe,type:ye})})}):"strong"===$t.type||"em"===$t.type?$t.tokens.forEach(le=>{St(le,$t.type)}):"html"===$t.type&&H[Nt].push({content:$t.text,type:"normal"})}return(0,S.K2)(St,"processNode"),pt.forEach($t=>{"paragraph"===$t.type?$t.tokens?.forEach(ye=>{St(ye)}):H[Nt].push("html"===$t.type?{content:$t.text,type:"normal"}:{content:$t.raw,type:"normal"})}),H}function Rr(It,{markdownAutoWrap:qt}={}){const V=$.xI.lexer(It);function pt(H){return"text"===H.type?!1===qt?H.text.replace(/\n */g,"<br/>").replace(/ /g,"&nbsp;"):H.text.replace(/\n */g,"<br/>"):"strong"===H.type?`<strong>${H.tokens?.map(pt).join("")}</strong>`:"em"===H.type?`<em>${H.tokens?.map(pt).join("")}</em>`:"paragraph"===H.type?`<p>${H.tokens?.map(pt).join("")}</p>`:"space"===H.type?"":"html"===H.type?`${H.text}`:"escape"===H.type?H.text:(S.Rm.warn(`Unsupported markdown: ${H.type}`),H.raw)}return(0,S.K2)(pt,"output"),V.map(pt).join("")}function wr(It){return Intl.Segmenter?[...(new Intl.Segmenter).segment(It)].map(qt=>qt.segment):[...It]}function Vr(It,qt){return ra(It,[],wr(qt.content),qt.type)}function ra(It,qt,V,pt){if(0===V.length)return[{content:qt.join(""),type:pt},{content:"",type:pt}];const[H,...Nt]=V,St=[...qt,H];return It([{content:St.join(""),type:pt}])?ra(It,St,Nt,pt):(0===qt.length&&H&&(qt.push(H),V.shift()),[{content:qt.join(""),type:pt},{content:V.join(""),type:pt}])}function Nr(It,qt){if(It.some(({content:V})=>V.includes("\n")))throw new Error("splitLineToFitWidth does not support newlines in the line");return Fr(It,qt)}function Fr(It,qt,V=[],pt=[]){if(0===It.length)return pt.length>0&&V.push(pt),V.length>0?V:[];let H="";" "===It[0].content&&(H=" ",It.shift());const Nt=It.shift()??{content:" ",type:"normal"},St=[...pt];if(""!==H&&St.push({content:H,type:"normal"}),St.push(Nt),qt(St))return Fr(It,qt,V,St);if(pt.length>0)V.push(pt),It.unshift(Nt);else if(Nt.content){const[$t,ye]=Vr(qt,Nt);V.push([$t]),ye.content&&It.unshift(ye)}return Fr(It,qt,V)}function Se(It,qt){qt&&It.attr("style",qt)}function Or(It,qt,V,pt){return je.apply(this,arguments)}function je(){return(je=(0,ot.A)(function*(It,qt,V,pt,H=!1,Nt=(0,L.zj)()){const St=It.append("foreignObject");St.attr("width",10*V+"px"),St.attr("height",10*V+"px");const $t=St.append("xhtml:div"),ye=(0,L.Wi)(qt.label)?yield(0,L.dj)(qt.label.replace(L.Y2.lineBreakRegex,"\n"),Nt):(0,L.jZ)(qt.label,Nt),le=qt.isNode?"nodeLabel":"edgeLabel",Pe=$t.append("span");Pe.html(ye),Se(Pe,qt.labelStyle),Pe.attr("class",`${le} ${pt}`),Se($t,qt.labelStyle),$t.style("display","table-cell"),$t.style("white-space","nowrap"),$t.style("line-height","1.5"),$t.style("max-width",V+"px"),$t.style("text-align","center"),$t.attr("xmlns","http://www.w3.org/1999/xhtml"),H&&$t.attr("class","labelBkg");let oe=$t.node().getBoundingClientRect();return oe.width===V&&($t.style("display","table"),$t.style("white-space","break-spaces"),$t.style("width",V+"px"),oe=$t.node().getBoundingClientRect()),St.node()})).apply(this,arguments)}function z(It,qt,V){return It.append("tspan").attr("class","text-outer-tspan").attr("x",0).attr("y",qt*V-.1+"em").attr("dy",V+"em")}function ft(It,qt,V){const pt=It.append("text"),H=z(pt,1,qt);X(H,V);const Nt=H.node().getComputedTextLength();return pt.remove(),Nt}function Bt(It,qt,V){const pt=It.append("text"),H=z(pt,1,qt);X(H,[{content:V,type:"normal"}]);const Nt=H.node()?.getBoundingClientRect();return Nt&&pt.remove(),Nt}function we(It,qt,V,pt=!1){const Nt=qt.append("g"),St=Nt.insert("rect").attr("class","background").attr("style","stroke: none"),$t=Nt.append("text").attr("y","-10.1");let ye=0;for(const le of V){const Pe=(0,S.K2)(qe=>ft(Nt,1.1,qe)<=It,"checkWidth"),oe=Pe(le)?[le]:Nr(le,Pe);for(const qe of oe)X(z($t,ye,1.1),qe),ye++}if(pt){const le=$t.node().getBBox(),Pe=2;return St.attr("x",le.x-Pe).attr("y",le.y-Pe).attr("width",le.width+2*Pe).attr("height",le.height+2*Pe),Nt.node()}return $t.node()}function X(It,qt){It.text(""),qt.forEach((V,pt)=>{It.append("tspan").attr("font-style","em"===V.type?"italic":"normal").attr("class","text-inner-tspan").attr("font-weight","strong"===V.type?"bold":"normal").text(0===pt?V.content:" "+V.content)})}function ae(It){return w.apply(this,arguments)}function w(){return(w=(0,ot.A)(function*(It,qt={}){const V=[];It.replace(/(fa[bklrs]?):fa-([\w-]+)/g,(H,Nt,St)=>(V.push((0,ot.A)(function*(){const $t=`${Nt}:${St}`;return(yield q($t))?yield ar($t,void 0,{class:"label-icon"}):`<i class='${(0,L.jZ)(H,qt).replace(":"," ")}'></i>`})()),H));const pt=yield Promise.all(V);return It.replace(/(fa[bklrs]?):fa-([\w-]+)/g,()=>pt.shift()??"")})).apply(this,arguments)}(0,S.K2)(Ke,"preprocessMarkdown"),(0,S.K2)(cr,"markdownToLines"),(0,S.K2)(Rr,"markdownToHTML"),(0,S.K2)(wr,"splitTextToChars"),(0,S.K2)(Vr,"splitWordToFitWidth"),(0,S.K2)(ra,"splitWordToFitWidthRecursion"),(0,S.K2)(Nr,"splitLineToFitWidth"),(0,S.K2)(Fr,"splitLineToFitWidthRecursion"),(0,S.K2)(Se,"applyStyle"),(0,S.K2)(Or,"addHtmlSpan"),(0,S.K2)(z,"createTspan"),(0,S.K2)(ft,"computeWidthOfText"),(0,S.K2)(Bt,"computeDimensionOfText"),(0,S.K2)(we,"createFormattedText"),(0,S.K2)(X,"updateTextContentAndStyles"),(0,S.K2)(ae,"replaceIconSubstring");var re=(0,S.K2)(function(){var It=(0,ot.A)(function*(qt,V="",{style:pt="",isTitle:H=!1,classes:Nt="",useHtmlLabels:St=!0,isNode:$t=!0,width:ye=200,addSvgBackground:le=!1}={},Pe){if(S.Rm.debug("XYZ createText",V,pt,H,Nt,St,$t,"addSvgBackground: ",le),St){const oe=Rr(V,Pe),qe=yield ae((0,ee.Sm)(oe),Pe),ze=V.replace(/\\\\/g,"\\"),Et={isNode:$t,label:(0,L.Wi)(V)?ze:qe,labelStyle:pt.replace("fill:","color:")};return yield Or(qt,Et,ye,Nt,le,Pe)}{const ze=we(ye,qt,cr(V.replace(/<br\s*\/?>/g,"<br/>").replace("<br>","<br/>"),Pe),!!V&&le);if($t){/stroke:/.exec(pt)&&(pt=pt.replace("stroke:","lineColor:"));const Et=pt.replace(/stroke:[^;]+;?/g,"").replace(/stroke-width:[^;]+;?/g,"").replace(/fill:[^;]+;?/g,"").replace(/color:/g,"fill:");(0,ut.Ltv)(ze).attr("style",Et)}else{const Et=pt.replace(/stroke:[^;]+;?/g,"").replace(/stroke-width:[^;]+;?/g,"").replace(/fill:[^;]+;?/g,"").replace(/background:/g,"fill:");(0,ut.Ltv)(ze).select("rect").attr("style",Et.replace(/background:/g,"fill:"));const Tt=pt.replace(/stroke:[^;]+;?/g,"").replace(/stroke-width:[^;]+;?/g,"").replace(/fill:[^;]+;?/g,"").replace(/color:/g,"fill:");(0,ut.Ltv)(ze).select("text").attr("style",Tt)}return ze}});return function(qt){return It.apply(this,arguments)}}(),"createText")},62033:(Ja,vr,R)=>{"use strict";R.r(vr),R.d(vr,{diagram:()=>ra});var At,ot=R(89204),ee=R(45027),L=R(69664),S=R(80525),Pt=R(52052),ut=R(79006),$=R(32303),A=R(62233),wt=ut.UI.packet,Ge=(class{constructor(){this.packet=[],this.setAccTitle=ut.SV,this.getAccTitle=ut.iN,this.setDiagramTitle=ut.ke,this.getDiagramTitle=ut.ab,this.getAccDescription=ut.m7,this.setAccDescription=ut.EI}getConfig(){const Nr=(0,Pt.$t)({...wt,...(0,ut.zj)().packet});return Nr.showBits&&(Nr.paddingY+=10),Nr}getPacket(){return this.packet}pushWord(Nr){Nr.length>0&&this.packet.push(Nr)}clear(){(0,ut.IU)(),this.packet=[]}static#t=At=()=>((0,ee.A)(this,"PacketDB"),(0,$.K2)(this,"PacketDB"),this)},At()),Rt=(0,$.K2)((Nr,Fr)=>{(0,S.S)(Nr,Fr);let Se=-1,Or=[],je=1;const{bitsPerRow:z}=Fr.getConfig();for(let{start:ft,end:Bt,bits:we,label:X}of Nr.blocks){if(void 0!==ft&&void 0!==Bt&&Bt<ft)throw new Error(`Packet block ${ft} - ${Bt} is invalid. End must be greater than start.`);if(ft??=Se+1,ft!==Se+1)throw new Error(`Packet block ${ft} - ${Bt??ft} is not contiguous. It should start from ${Se+1}.`);if(0===we)throw new Error(`Packet block ${ft} is invalid. Cannot have a zero bit field.`);for(Bt??=ft+(we??1)-1,we??=Bt-ft+1,Se=Bt,$.Rm.debug(`Packet block ${ft} - ${Se} with label ${X}`);Or.length<=z+1&&Fr.getPacket().length<1e4;){const[ae,w]=q({start:ft,end:Bt,bits:we,label:X},je,z);if(Or.push(ae),ae.end+1===je*z&&(Fr.pushWord(Or),Or=[],je++),!w)break;({start:ft,end:Bt,bits:we,label:X}=w)}}Fr.pushWord(Or)},"populate"),q=(0,$.K2)((Nr,Fr,Se)=>{if(void 0===Nr.start)throw new Error("start should have been set during first phase");if(void 0===Nr.end)throw new Error("end should have been set during first phase");if(Nr.start>Nr.end)throw new Error(`Block start ${Nr.start} is greater than block end ${Nr.end}.`);if(Nr.end+1<=Fr*Se)return[Nr,void 0];const Or=Fr*Se-1,je=Fr*Se;return[{start:Nr.start,end:Or,label:Nr.label,bits:Or-Nr.start},{start:je,end:Nr.end,label:Nr.label,bits:Nr.end-je}]},"getNextFittingBlock"),ar={parser:{yy:void 0},parse:(0,$.K2)(function(){var Nr=(0,ot.A)(function*(Fr){const Se=yield(0,A.qg)("packet",Fr),Or=ar.parser?.yy;if(!(Or instanceof Ge))throw new Error("parser.parser?.yy was not a PacketDB. This is due to a bug within Mermaid, please report this issue at https://github.com/mermaid-js/mermaid/issues.");$.Rm.debug(Se),Rt(Se,Or)});return function(Fr){return Nr.apply(this,arguments)}}(),"parse")},Ke=(0,$.K2)((Nr,Fr,Se,Or)=>{const je=Or.db,z=je.getConfig(),{rowHeight:ft,paddingY:Bt,bitWidth:we,bitsPerRow:X}=z,ae=je.getPacket(),w=je.getDiagramTitle(),re=ft+Bt,It=re*(ae.length+1)-(w?0:ft),qt=we*X+2,V=(0,L.D)(Fr);V.attr("viewbox",`0 0 ${qt} ${It}`),(0,ut.a$)(V,It,qt,z.useMaxWidth);for(const[pt,H]of ae.entries())cr(V,H,pt,z);V.append("text").text(w).attr("x",qt/2).attr("y",It-re/2).attr("dominant-baseline","middle").attr("text-anchor","middle").attr("class","packetTitle")},"draw"),cr=(0,$.K2)((Nr,Fr,Se,{rowHeight:Or,paddingX:je,paddingY:z,bitWidth:ft,bitsPerRow:Bt,showBits:we})=>{const X=Nr.append("g"),ae=Se*(Or+z)+z;for(const w of Fr){const re=w.start%Bt*ft+1,It=(w.end-w.start+1)*ft-je;if(X.append("rect").attr("x",re).attr("y",ae).attr("width",It).attr("height",Or).attr("class","packetBlock"),X.append("text").attr("x",re+It/2).attr("y",ae+Or/2).attr("class","packetLabel").attr("dominant-baseline","middle").attr("text-anchor","middle").text(w.label),!we)continue;const qt=w.end===w.start,V=ae-2;X.append("text").attr("x",re+(qt?It/2:0)).attr("y",V).attr("class","packetByte start").attr("dominant-baseline","auto").attr("text-anchor",qt?"middle":"start").text(w.start),qt||X.append("text").attr("x",re+It).attr("y",V).attr("class","packetByte end").attr("dominant-baseline","auto").attr("text-anchor","end").text(w.end)}},"drawWord"),Rr={draw:Ke},wr={byteFontSize:"10px",startByteColor:"black",endByteColor:"black",labelColor:"black",labelFontSize:"12px",titleColor:"black",titleFontSize:"14px",blockStrokeColor:"black",blockStrokeWidth:"1",blockFillColor:"#efefef"},Vr=(0,$.K2)(({packet:Nr}={})=>{const Fr=(0,Pt.$t)(wr,Nr);return`\n\t.packetByte {\n\t\tfont-size: ${Fr.byteFontSize};\n\t}\n\t.packetByte.start {\n\t\tfill: ${Fr.startByteColor};\n\t}\n\t.packetByte.end {\n\t\tfill: ${Fr.endByteColor};\n\t}\n\t.packetLabel {\n\t\tfill: ${Fr.labelColor};\n\t\tfont-size: ${Fr.labelFontSize};\n\t}\n\t.packetTitle {\n\t\tfill: ${Fr.titleColor};\n\t\tfont-size: ${Fr.titleFontSize};\n\t}\n\t.packetBlock {\n\t\tstroke: ${Fr.blockStrokeColor};\n\t\tstroke-width: ${Fr.blockStrokeWidth};\n\t\tfill: ${Fr.blockFillColor};\n\t}\n\t`},"styles"),ra={parser:ar,get db(){return new Ge},renderer:Rr,styles:Vr}},62045:(Ja,vr,R)=>{"use strict";R.d(vr,{CP:()=>A,HT:()=>wt,PB:()=>At,aC:()=>$,lC:()=>Pt,m:()=>ut,tk:()=>S});var ot=R(79006),ee=R(32303),L=R(73986),S=(0,ee.K2)((Ge,dt)=>{const Rt=Ge.append("rect");if(Rt.attr("x",dt.x),Rt.attr("y",dt.y),Rt.attr("fill",dt.fill),Rt.attr("stroke",dt.stroke),Rt.attr("width",dt.width),Rt.attr("height",dt.height),dt.name&&Rt.attr("name",dt.name),dt.rx&&Rt.attr("rx",dt.rx),dt.ry&&Rt.attr("ry",dt.ry),void 0!==dt.attrs)for(const q in dt.attrs)Rt.attr(q,dt.attrs[q]);return dt.class&&Rt.attr("class",dt.class),Rt},"drawRect"),Pt=(0,ee.K2)((Ge,dt)=>{S(Ge,{x:dt.startx,y:dt.starty,width:dt.stopx-dt.startx,height:dt.stopy-dt.starty,fill:dt.fill,stroke:dt.stroke,class:"rect"}).lower()},"drawBackgroundRect"),ut=(0,ee.K2)((Ge,dt)=>{const Rt=dt.text.replace(ot.H1," "),q=Ge.append("text");q.attr("x",dt.x),q.attr("y",dt.y),q.attr("class","legend"),q.style("text-anchor",dt.anchor),dt.class&&q.attr("class",dt.class);const ar=q.append("tspan");return ar.attr("x",dt.x+2*dt.textMargin),ar.text(Rt),q},"drawText"),$=(0,ee.K2)((Ge,dt,Rt,q)=>{const ar=Ge.append("image");ar.attr("x",dt),ar.attr("y",Rt);const Ke=(0,L.J)(q);ar.attr("xlink:href",Ke)},"drawImage"),A=(0,ee.K2)((Ge,dt,Rt,q)=>{const ar=Ge.append("use");ar.attr("x",dt),ar.attr("y",Rt);const Ke=(0,L.J)(q);ar.attr("xlink:href",`#${Ke}`)},"drawEmbeddedImage"),At=(0,ee.K2)(()=>({x:0,y:0,width:100,height:100,fill:"#EDF2AE",stroke:"#666",anchor:"start",rx:0,ry:0}),"getNoteRect"),wt=(0,ee.K2)(()=>({x:0,y:0,width:100,height:100,"text-anchor":"start",style:"#666",textMargin:0,rx:0,ry:0,tspan:!0}),"getTextObj")},63192:(Ja,vr,R)=>{"use strict";R.r(vr),R.d(vr,{diagram:()=>V});var Bt,ot=R(53102),Ge=(R(5675),R(8086),R(72271),R(98954),R(36384),R(87452),R(32239),R(19753),R(59355),R(52052)),dt=R(79006),Rt=R(32303),q=R(40622),ar=R(42335),Ke=R(61823),cr=(0,Rt.K2)(pt=>pt.append("circle").attr("class","start-state").attr("r",(0,dt.D7)().state.sizeUnit).attr("cx",(0,dt.D7)().state.padding+(0,dt.D7)().state.sizeUnit).attr("cy",(0,dt.D7)().state.padding+(0,dt.D7)().state.sizeUnit),"drawStartState"),Rr=(0,Rt.K2)(pt=>pt.append("line").style("stroke","grey").style("stroke-dasharray","3").attr("x1",(0,dt.D7)().state.textHeight).attr("class","divider").attr("x2",2*(0,dt.D7)().state.textHeight).attr("y1",0).attr("y2",0),"drawDivider"),wr=(0,Rt.K2)((pt,H)=>{const Nt=pt.append("text").attr("x",2*(0,dt.D7)().state.padding).attr("y",(0,dt.D7)().state.textHeight+2*(0,dt.D7)().state.padding).attr("font-size",(0,dt.D7)().state.fontSize).attr("class","state-title").text(H.id),St=Nt.node().getBBox();return pt.insert("rect",":first-child").attr("x",(0,dt.D7)().state.padding).attr("y",(0,dt.D7)().state.padding).attr("width",St.width+2*(0,dt.D7)().state.padding).attr("height",St.height+2*(0,dt.D7)().state.padding).attr("rx",(0,dt.D7)().state.radius),Nt},"drawSimpleState"),Vr=(0,Rt.K2)((pt,H)=>{const Nt=(0,Rt.K2)(function(Tt,B,F){const et=Tt.append("tspan").attr("x",2*(0,dt.D7)().state.padding).text(B);F||et.attr("dy",(0,dt.D7)().state.textHeight)},"addTspan"),$t=pt.append("text").attr("x",2*(0,dt.D7)().state.padding).attr("y",(0,dt.D7)().state.textHeight+1.3*(0,dt.D7)().state.padding).attr("font-size",(0,dt.D7)().state.fontSize).attr("class","state-title").text(H.descriptions[0]).node().getBBox(),ye=$t.height,le=pt.append("text").attr("x",(0,dt.D7)().state.padding).attr("y",ye+.4*(0,dt.D7)().state.padding+(0,dt.D7)().state.dividerMargin+(0,dt.D7)().state.textHeight).attr("class","state-description");let Pe=!0,oe=!0;H.descriptions.forEach(function(Tt){Pe||(Nt(le,Tt,oe),oe=!1),Pe=!1});const qe=pt.append("line").attr("x1",(0,dt.D7)().state.padding).attr("y1",(0,dt.D7)().state.padding+ye+(0,dt.D7)().state.dividerMargin/2).attr("y2",(0,dt.D7)().state.padding+ye+(0,dt.D7)().state.dividerMargin/2).attr("class","descr-divider"),ze=le.node().getBBox(),Et=Math.max(ze.width,$t.width);return qe.attr("x2",Et+3*(0,dt.D7)().state.padding),pt.insert("rect",":first-child").attr("x",(0,dt.D7)().state.padding).attr("y",(0,dt.D7)().state.padding).attr("width",Et+2*(0,dt.D7)().state.padding).attr("height",ze.height+ye+2*(0,dt.D7)().state.padding).attr("rx",(0,dt.D7)().state.radius),pt},"drawDescrState"),ra=(0,Rt.K2)((pt,H,Nt)=>{const St=(0,dt.D7)().state.padding,$t=2*(0,dt.D7)().state.padding,ye=pt.node().getBBox(),le=ye.width,Pe=ye.x,oe=pt.append("text").attr("x",0).attr("y",(0,dt.D7)().state.titleShift).attr("font-size",(0,dt.D7)().state.fontSize).attr("class","state-title").text(H.id),ze=oe.node().getBBox().width+$t;let Tt,Et=Math.max(ze,le);Et===le&&(Et+=$t);const B=pt.node().getBBox();Tt=Pe-St,ze>le&&(Tt=(le-Et)/2+St),Math.abs(Pe-B.x)<St&&ze>le&&(Tt=Pe-(ze-le)/2);const F=1-(0,dt.D7)().state.textHeight;return pt.insert("rect",":first-child").attr("x",Tt).attr("y",F).attr("class",Nt?"alt-composit":"composit").attr("width",Et).attr("height",B.height+(0,dt.D7)().state.textHeight+(0,dt.D7)().state.titleShift+1).attr("rx","0"),oe.attr("x",Tt+St),ze<=le&&oe.attr("x",Pe+(Et-$t)/2-ze/2+St),pt.insert("rect",":first-child").attr("x",Tt).attr("y",(0,dt.D7)().state.titleShift-(0,dt.D7)().state.textHeight-(0,dt.D7)().state.padding).attr("width",Et).attr("height",3*(0,dt.D7)().state.textHeight).attr("rx",(0,dt.D7)().state.radius),pt.insert("rect",":first-child").attr("x",Tt).attr("y",(0,dt.D7)().state.titleShift-(0,dt.D7)().state.textHeight-(0,dt.D7)().state.padding).attr("width",Et).attr("height",B.height+3+2*(0,dt.D7)().state.textHeight).attr("rx",(0,dt.D7)().state.radius),pt},"addTitleAndBox"),Nr=(0,Rt.K2)(pt=>(pt.append("circle").attr("class","end-state-outer").attr("r",(0,dt.D7)().state.sizeUnit+(0,dt.D7)().state.miniPadding).attr("cx",(0,dt.D7)().state.padding+(0,dt.D7)().state.sizeUnit+(0,dt.D7)().state.miniPadding).attr("cy",(0,dt.D7)().state.padding+(0,dt.D7)().state.sizeUnit+(0,dt.D7)().state.miniPadding),pt.append("circle").attr("class","end-state-inner").attr("r",(0,dt.D7)().state.sizeUnit).attr("cx",(0,dt.D7)().state.padding+(0,dt.D7)().state.sizeUnit+2).attr("cy",(0,dt.D7)().state.padding+(0,dt.D7)().state.sizeUnit+2)),"drawEndState"),Fr=(0,Rt.K2)((pt,H)=>{let Nt=(0,dt.D7)().state.forkWidth,St=(0,dt.D7)().state.forkHeight;if(H.parentId){let $t=Nt;Nt=St,St=$t}return pt.append("rect").style("stroke","black").style("fill","black").attr("width",Nt).attr("height",St).attr("x",(0,dt.D7)().state.padding).attr("y",(0,dt.D7)().state.padding)},"drawForkJoinState"),Se=(0,Rt.K2)((pt,H,Nt,St)=>{let $t=0;const ye=St.append("text");ye.style("text-anchor","start"),ye.attr("class","noteText");let le=pt.replace(/\r\n/g,"<br/>");le=le.replace(/\n/g,"<br/>");const Pe=le.split(dt.Y2.lineBreakRegex);let oe=1.25*(0,dt.D7)().state.noteMargin;for(const qe of Pe){const ze=qe.trim();if(ze.length>0){const Et=ye.append("tspan");Et.text(ze),0===oe&&(oe+=Et.node().getBBox().height),$t+=oe,Et.attr("x",H+(0,dt.D7)().state.noteMargin),Et.attr("y",Nt+$t+1.25*(0,dt.D7)().state.noteMargin)}}return{textWidth:ye.node().getBBox().width,textHeight:$t}},"_drawLongText"),Or=(0,Rt.K2)((pt,H)=>{H.attr("class","state-note");const Nt=H.append("rect").attr("x",0).attr("y",(0,dt.D7)().state.padding),St=H.append("g"),{textWidth:$t,textHeight:ye}=Se(pt,0,0,St);return Nt.attr("height",ye+2*(0,dt.D7)().state.noteMargin),Nt.attr("width",$t+2*(0,dt.D7)().state.noteMargin),Nt},"drawNote"),je=(0,Rt.K2)(function(pt,H){const Nt=H.id,St={id:Nt,label:H.id,width:0,height:0},$t=pt.append("g").attr("id",Nt).attr("class","stateGroup");"start"===H.type&&cr($t),"end"===H.type&&Nr($t),("fork"===H.type||"join"===H.type)&&Fr($t,H),"note"===H.type&&Or(H.note.text,$t),"divider"===H.type&&Rr($t),"default"===H.type&&0===H.descriptions.length&&wr($t,H),"default"===H.type&&H.descriptions.length>0&&Vr($t,H);const ye=$t.node().getBBox();return St.width=ye.width+2*(0,dt.D7)().state.padding,St.height=ye.height+2*(0,dt.D7)().state.padding,St},"drawState"),z=0,ft=(0,Rt.K2)(function(pt,H,Nt){const St=(0,Rt.K2)(function(oe){switch(oe){case ot.u4.relationType.AGGREGATION:return"aggregation";case ot.u4.relationType.EXTENSION:return"extension";case ot.u4.relationType.COMPOSITION:return"composition";case ot.u4.relationType.DEPENDENCY:return"dependency"}},"getRelationType");H.points=H.points.filter(oe=>!Number.isNaN(oe.y));const $t=H.points,ye=(0,q.n8j)().x(function(oe){return oe.x}).y(function(oe){return oe.y}).curve(q.qrM),le=pt.append("path").attr("d",ye($t)).attr("id","edge"+z).attr("class","transition");let Pe="";if((0,dt.D7)().state.arrowMarkerAbsolute&&(Pe=(0,dt.ID)(!0)),le.attr("marker-end","url("+Pe+"#"+St(ot.u4.relationType.DEPENDENCY)+"End)"),void 0!==Nt.title){const oe=pt.append("g").attr("class","stateLabel"),{x:qe,y:ze}=Ge._K.calcLabelPosition(H.points),Et=dt.Y2.getRows(Nt.title);let Tt=0;const B=[];let F=0,et=0;for(let rt=0;rt<=Et.length;rt++){const _t=oe.append("text").attr("text-anchor","middle").text(Et[rt]).attr("x",qe).attr("y",ze+Tt),ht=_t.node().getBBox();F=Math.max(F,ht.width),et=Math.min(et,ht.x),Rt.Rm.info(ht.x,qe,ze+Tt),0===Tt&&(Tt=_t.node().getBBox().height,Rt.Rm.info("Title height",Tt,ze)),B.push(_t)}let mt=Tt*Et.length;if(Et.length>1){const rt=(Et.length-1)*Tt*.5;B.forEach((_t,ht)=>_t.attr("y",ze+ht*Tt-rt)),mt=Tt*Et.length}const it=oe.node().getBBox();oe.insert("rect",":first-child").attr("class","box").attr("x",qe-F/2-(0,dt.D7)().state.padding/2).attr("y",ze-mt/2-(0,dt.D7)().state.padding/2-3.5).attr("width",F+(0,dt.D7)().state.padding).attr("height",mt+(0,dt.D7)().state.padding),Rt.Rm.info(it)}z++},"drawEdge"),we={},X=(0,Rt.K2)(function(){},"setConf"),ae=(0,Rt.K2)(function(pt){pt.append("defs").append("marker").attr("id","dependencyEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 19,7 L9,13 L14,7 L9,1 Z")},"insertMarkers"),w=(0,Rt.K2)(function(pt,H,Nt,St){Bt=(0,dt.D7)().state;const $t=(0,dt.D7)().securityLevel;let ye;"sandbox"===$t&&(ye=(0,q.Ltv)("#i"+H));const le=(0,q.Ltv)("sandbox"===$t?ye.nodes()[0].contentDocument.body:"body"),Pe="sandbox"===$t?ye.nodes()[0].contentDocument:document;Rt.Rm.debug("Rendering diagram "+pt);const oe=le.select(`[id='${H}']`);ae(oe);const qe=St.db.getRootDoc();It(qe,oe,void 0,!1,le,Pe,St);const ze=Bt.padding,Et=oe.node().getBBox(),Tt=Et.width+2*ze,B=Et.height+2*ze;(0,dt.a$)(oe,B,1.75*Tt,Bt.useMaxWidth),oe.attr("viewBox",`${Et.x-Bt.padding}  ${Et.y-Bt.padding} `+Tt+" "+B)},"draw"),re=(0,Rt.K2)(pt=>pt?pt.length*Bt.fontSizeFactor:1,"getLabelWidth"),It=(0,Rt.K2)((pt,H,Nt,St,$t,ye,le)=>{const Pe=new Ke.T({compound:!0,multigraph:!0});let oe,qe=!0;for(oe=0;oe<pt.length;oe++)if("relation"===pt[oe].stmt){qe=!1;break}Pe.setGraph(Nt?{rankdir:"LR",multigraph:!0,compound:!0,ranker:"tight-tree",ranksep:qe?1:Bt.edgeLengthFactor,nodeSep:qe?1:50,isMultiGraph:!0}:{rankdir:"TB",multigraph:!0,compound:!0,ranksep:qe?1:Bt.edgeLengthFactor,nodeSep:qe?1:50,ranker:"tight-tree",isMultiGraph:!0}),Pe.setDefaultEdgeLabel(function(){return{}});const ze=le.db.getStates(),Et=le.db.getRelations(),Tt=Object.keys(ze);for(const rt of Tt){const _t=ze[rt];let ht;if(Nt&&(_t.parentId=Nt),_t.doc){let Ft=H.append("g").attr("id",_t.id).attr("class","stateGroup");ht=It(_t.doc,Ft,_t.id,!St,$t,ye,le);{Ft=ra(Ft,_t,St);let G=Ft.node().getBBox();ht.width=G.width,ht.height=G.height+Bt.padding/2,we[_t.id]={y:Bt.compositTitleSize}}}else ht=je(H,_t,Pe);if(_t.note){const G=je(H,{descriptions:[],id:_t.id+"-note",note:_t.note,type:"note"},Pe);"left of"===_t.note.position?(Pe.setNode(ht.id+"-note",G),Pe.setNode(ht.id,ht)):(Pe.setNode(ht.id,ht),Pe.setNode(ht.id+"-note",G)),Pe.setParent(ht.id,ht.id+"-group"),Pe.setParent(ht.id+"-note",ht.id+"-group")}else Pe.setNode(ht.id,ht)}Rt.Rm.debug("Count=",Pe.nodeCount(),Pe);let F=0;Et.forEach(function(rt){F++,Rt.Rm.debug("Setting edge",rt),Pe.setEdge(rt.id1,rt.id2,{relation:rt,width:re(rt.title),height:Bt.labelHeight*dt.Y2.getRows(rt.title).length,labelpos:"c"},"id"+F)}),(0,ar.Zp)(Pe),Rt.Rm.debug("Graph after layout",Pe.nodes());const et=H.node();Pe.nodes().forEach(function(rt){void 0!==rt&&void 0!==Pe.node(rt)?(Rt.Rm.warn("Node "+rt+": "+JSON.stringify(Pe.node(rt))),$t.select("#"+et.id+" #"+rt).attr("transform","translate("+(Pe.node(rt).x-Pe.node(rt).width/2)+","+(Pe.node(rt).y+(we[rt]?we[rt].y:0)-Pe.node(rt).height/2)+" )"),$t.select("#"+et.id+" #"+rt).attr("data-x-shift",Pe.node(rt).x-Pe.node(rt).width/2),ye.querySelectorAll("#"+et.id+" #"+rt+" .divider").forEach(ht=>{const Ft=ht.parentElement;let G=0,lt=0;Ft&&(Ft.parentElement&&(G=Ft.parentElement.getBBox().width),lt=parseInt(Ft.getAttribute("data-x-shift"),10),Number.isNaN(lt)&&(lt=0)),ht.setAttribute("x1",0-lt+8),ht.setAttribute("x2",G-lt-8)})):Rt.Rm.debug("No Node "+rt+": "+JSON.stringify(Pe.node(rt)))});let mt=et.getBBox();Pe.edges().forEach(function(rt){void 0!==rt&&void 0!==Pe.edge(rt)&&(Rt.Rm.debug("Edge "+rt.v+" -> "+rt.w+": "+JSON.stringify(Pe.edge(rt))),ft(H,Pe.edge(rt),Pe.edge(rt).relation))}),mt=et.getBBox();const it={id:Nt||"root",label:Nt||"root",width:0,height:0};return it.width=mt.width+2*Bt.padding,it.height=mt.height+2*Bt.padding,Rt.Rm.debug("Doc rendered",it,Pe),it},"renderDoc"),qt={setConf:X,draw:w},V={parser:ot.Zk,get db(){return new ot.u4(1)},renderer:qt,styles:ot.tM,init:(0,Rt.K2)(pt=>{pt.state||(pt.state={}),pt.state.arrowMarkerAbsolute=pt.arrowMarkerAbsolute},"init")}},64693:function(Ja){Ja.exports=function(){"use strict";return function(R,ot,ee){var L=function(ut){return ut.add(4-ut.isoWeekday(),"day")},S=ot.prototype;S.isoWeekYear=function(){return L(this).year()},S.isoWeek=function(ut){if(!this.$utils().u(ut))return this.add(7*(ut-this.isoWeek()),"day");var $,At,wt,Ge=L(this),dt=($=this.isoWeekYear(),wt=4-(At=(this.$u?ee.utc:ee)().year($).startOf("year")).isoWeekday(),At.isoWeekday()>4&&(wt+=7),At.add(wt,"day"));return Ge.diff(dt,"week")+1},S.isoWeekday=function(ut){return this.$utils().u(ut)?this.day()||7:this.day(this.day()%7?ut:ut-7)};var Pt=S.startOf;S.startOf=function(ut,$){var A=this.$utils(),At=!!A.u($)||$;return"isoweek"===A.p(ut)?At?this.date(this.date()-(this.isoWeekday()-1)).startOf("day"):this.date(this.date()-1-(this.isoWeekday()-1)+7).endOf("day"):Pt.bind(this)(ut,$)}}}()},67040:(Ja,vr,R)=>{"use strict";R.d(vr,{m:()=>S});var L,ot=R(45027),ee=R(32303),S=(class{constructor(Pt){this.init=Pt,this.records=this.init()}reset(){this.records=this.init()}static#t=L=()=>((0,ot.A)(this,"ImperativeState"),(0,ee.K2)(this,"ImperativeState"),this)},L())},67137:(Ja,vr,R)=>{"use strict";R.r(vr),R.d(vr,{diagram:()=>xr});var A,At,wt,Ge,dt,Rt,q,ar,Ke,cr,ot=R(45027),ee=R(69664),L=R(59355),S=R(52052),Pt=R(79006),ut=R(32303),$=R(40622),Rr=function(){var zt=(0,ut.K2)(function(Ut,Wt,xe,Xe){for(xe=xe||{},Xe=Ut.length;Xe--;xe[Ut[Xe]]=Wt);return xe},"o"),Ae=[1,10,12,14,16,18,19,21,23],or=[2,6],ve=[1,3],ce=[1,5],Ee=[1,6],De=[1,7],er=[1,5,10,12,14,16,18,19,21,23,34,35,36],Qe=[1,25],Lr=[1,26],_e=[1,28],Hr=[1,29],sr=[1,30],te=[1,31],ne=[1,32],be=[1,33],ir=[1,34],g=[1,35],y=[1,36],E=[1,37],I=[1,43],m=[1,42],D=[1,47],v=[1,50],b=[1,10,12,14,16,18,19,21,23,34,35,36],C=[1,10,12,14,16,18,19,21,23,24,26,27,28,34,35,36],P=[1,10,12,14,16,18,19,21,23,24,26,27,28,34,35,36,41,42,43,44,45,46,47,48,49,50],Q=[1,64],xt={trace:(0,ut.K2)(function(){},"trace"),yy:{},symbols_:{error:2,start:3,eol:4,XYCHART:5,chartConfig:6,document:7,CHART_ORIENTATION:8,statement:9,title:10,text:11,X_AXIS:12,parseXAxis:13,Y_AXIS:14,parseYAxis:15,LINE:16,plotData:17,BAR:18,acc_title:19,acc_title_value:20,acc_descr:21,acc_descr_value:22,acc_descr_multiline_value:23,SQUARE_BRACES_START:24,commaSeparatedNumbers:25,SQUARE_BRACES_END:26,NUMBER_WITH_DECIMAL:27,COMMA:28,xAxisData:29,bandData:30,ARROW_DELIMITER:31,commaSeparatedTexts:32,yAxisData:33,NEWLINE:34,SEMI:35,EOF:36,alphaNum:37,STR:38,MD_STR:39,alphaNumToken:40,AMP:41,NUM:42,ALPHA:43,PLUS:44,EQUALS:45,MULT:46,DOT:47,BRKT:48,MINUS:49,UNDERSCORE:50,$accept:0,$end:1},terminals_:{2:"error",5:"XYCHART",8:"CHART_ORIENTATION",10:"title",12:"X_AXIS",14:"Y_AXIS",16:"LINE",18:"BAR",19:"acc_title",20:"acc_title_value",21:"acc_descr",22:"acc_descr_value",23:"acc_descr_multiline_value",24:"SQUARE_BRACES_START",26:"SQUARE_BRACES_END",27:"NUMBER_WITH_DECIMAL",28:"COMMA",31:"ARROW_DELIMITER",34:"NEWLINE",35:"SEMI",36:"EOF",38:"STR",39:"MD_STR",41:"AMP",42:"NUM",43:"ALPHA",44:"PLUS",45:"EQUALS",46:"MULT",47:"DOT",48:"BRKT",49:"MINUS",50:"UNDERSCORE"},productions_:[0,[3,2],[3,3],[3,2],[3,1],[6,1],[7,0],[7,2],[9,2],[9,2],[9,2],[9,2],[9,2],[9,3],[9,2],[9,3],[9,2],[9,2],[9,1],[17,3],[25,3],[25,1],[13,1],[13,2],[13,1],[29,1],[29,3],[30,3],[32,3],[32,1],[15,1],[15,2],[15,1],[33,3],[4,1],[4,1],[4,1],[11,1],[11,1],[11,1],[37,1],[37,2],[40,1],[40,1],[40,1],[40,1],[40,1],[40,1],[40,1],[40,1],[40,1],[40,1]],performAction:(0,ut.K2)(function(Wt,xe,Xe,We,gr,hr,_r){var $e=hr.length-1;switch(gr){case 5:We.setOrientation(hr[$e]);break;case 9:We.setDiagramTitle(hr[$e].text.trim());break;case 12:We.setLineData({text:"",type:"text"},hr[$e]);break;case 13:We.setLineData(hr[$e-1],hr[$e]);break;case 14:We.setBarData({text:"",type:"text"},hr[$e]);break;case 15:We.setBarData(hr[$e-1],hr[$e]);break;case 16:this.$=hr[$e].trim(),We.setAccTitle(this.$);break;case 17:case 18:this.$=hr[$e].trim(),We.setAccDescription(this.$);break;case 19:case 27:this.$=hr[$e-1];break;case 20:this.$=[Number(hr[$e-2]),...hr[$e]];break;case 21:this.$=[Number(hr[$e])];break;case 22:We.setXAxisTitle(hr[$e]);break;case 23:We.setXAxisTitle(hr[$e-1]);break;case 24:We.setXAxisTitle({type:"text",text:""});break;case 25:We.setXAxisBand(hr[$e]);break;case 26:We.setXAxisRangeData(Number(hr[$e-2]),Number(hr[$e]));break;case 28:this.$=[hr[$e-2],...hr[$e]];break;case 29:this.$=[hr[$e]];break;case 30:We.setYAxisTitle(hr[$e]);break;case 31:We.setYAxisTitle(hr[$e-1]);break;case 32:We.setYAxisTitle({type:"text",text:""});break;case 33:We.setYAxisRangeData(Number(hr[$e-2]),Number(hr[$e]));break;case 37:case 38:this.$={text:hr[$e],type:"text"};break;case 39:this.$={text:hr[$e],type:"markdown"};break;case 40:this.$=hr[$e];break;case 41:this.$=hr[$e-1]+""+hr[$e]}},"anonymous"),table:[zt(Ae,or,{3:1,4:2,7:4,5:ve,34:ce,35:Ee,36:De}),{1:[3]},zt(Ae,or,{4:2,7:4,3:8,5:ve,34:ce,35:Ee,36:De}),zt(Ae,or,{4:2,7:4,6:9,3:10,5:ve,8:[1,11],34:ce,35:Ee,36:De}),{1:[2,4],9:12,10:[1,13],12:[1,14],14:[1,15],16:[1,16],18:[1,17],19:[1,18],21:[1,19],23:[1,20]},zt(er,[2,34]),zt(er,[2,35]),zt(er,[2,36]),{1:[2,1]},zt(Ae,or,{4:2,7:4,3:21,5:ve,34:ce,35:Ee,36:De}),{1:[2,3]},zt(er,[2,5]),zt(Ae,[2,7],{4:22,34:ce,35:Ee,36:De}),{11:23,37:24,38:Qe,39:Lr,40:27,41:_e,42:Hr,43:sr,44:te,45:ne,46:be,47:ir,48:g,49:y,50:E},{11:39,13:38,24:I,27:m,29:40,30:41,37:24,38:Qe,39:Lr,40:27,41:_e,42:Hr,43:sr,44:te,45:ne,46:be,47:ir,48:g,49:y,50:E},{11:45,15:44,27:D,33:46,37:24,38:Qe,39:Lr,40:27,41:_e,42:Hr,43:sr,44:te,45:ne,46:be,47:ir,48:g,49:y,50:E},{11:49,17:48,24:v,37:24,38:Qe,39:Lr,40:27,41:_e,42:Hr,43:sr,44:te,45:ne,46:be,47:ir,48:g,49:y,50:E},{11:52,17:51,24:v,37:24,38:Qe,39:Lr,40:27,41:_e,42:Hr,43:sr,44:te,45:ne,46:be,47:ir,48:g,49:y,50:E},{20:[1,53]},{22:[1,54]},zt(b,[2,18]),{1:[2,2]},zt(b,[2,8]),zt(b,[2,9]),zt(C,[2,37],{40:55,41:_e,42:Hr,43:sr,44:te,45:ne,46:be,47:ir,48:g,49:y,50:E}),zt(C,[2,38]),zt(C,[2,39]),zt(P,[2,40]),zt(P,[2,42]),zt(P,[2,43]),zt(P,[2,44]),zt(P,[2,45]),zt(P,[2,46]),zt(P,[2,47]),zt(P,[2,48]),zt(P,[2,49]),zt(P,[2,50]),zt(P,[2,51]),zt(b,[2,10]),zt(b,[2,22],{30:41,29:56,24:I,27:m}),zt(b,[2,24]),zt(b,[2,25]),{31:[1,57]},{11:59,32:58,37:24,38:Qe,39:Lr,40:27,41:_e,42:Hr,43:sr,44:te,45:ne,46:be,47:ir,48:g,49:y,50:E},zt(b,[2,11]),zt(b,[2,30],{33:60,27:D}),zt(b,[2,32]),{31:[1,61]},zt(b,[2,12]),{17:62,24:v},{25:63,27:Q},zt(b,[2,14]),{17:65,24:v},zt(b,[2,16]),zt(b,[2,17]),zt(P,[2,41]),zt(b,[2,23]),{27:[1,66]},{26:[1,67]},{26:[2,29],28:[1,68]},zt(b,[2,31]),{27:[1,69]},zt(b,[2,13]),{26:[1,70]},{26:[2,21],28:[1,71]},zt(b,[2,15]),zt(b,[2,26]),zt(b,[2,27]),{11:59,32:72,37:24,38:Qe,39:Lr,40:27,41:_e,42:Hr,43:sr,44:te,45:ne,46:be,47:ir,48:g,49:y,50:E},zt(b,[2,33]),zt(b,[2,19]),{25:73,27:Q},{26:[2,28]},{26:[2,20]}],defaultActions:{8:[2,1],10:[2,3],21:[2,2],72:[2,28],73:[2,20]},parseError:(0,ut.K2)(function(Wt,xe){if(!xe.recoverable){var Xe=new Error(Wt);throw Xe.hash=xe,Xe}this.trace(Wt)},"parseError"),parse:(0,ut.K2)(function(Wt){var xe=this,Xe=[0],We=[],gr=[null],hr=[],_r=this.table,$e="",He=0,Ar=0,kr=0,Jr=hr.slice.call(arguments,1),Br=Object.create(this.lexer),ha={yy:{}};for(var ia in this.yy)Object.prototype.hasOwnProperty.call(this.yy,ia)&&(ha.yy[ia]=this.yy[ia]);Br.setInput(Wt,ha.yy),ha.yy.lexer=Br,ha.yy.parser=this,typeof Br.yylloc>"u"&&(Br.yylloc={});var jr=Br.yylloc;hr.push(jr);var Qr=Br.options&&Br.options.ranges;function dr(){var sa;return"number"!=typeof(sa=We.pop()||Br.lex()||1)&&(sa instanceof Array&&(sa=(We=sa).pop()),sa=xe.symbols_[sa]||sa),sa}this.parseError="function"==typeof ha.yy.parseError?ha.yy.parseError:Object.getPrototypeOf(this).parseError,(0,ut.K2)(function lr(sa){Xe.length=Xe.length-2*sa,gr.length=gr.length-sa,hr.length=hr.length-sa},"popStack"),(0,ut.K2)(dr,"lex");for(var W,Yt,Ye,Ne,yr,Pa,Ia,Ma,da={};;){if(this.defaultActions[Ye=Xe[Xe.length-1]]?Ne=this.defaultActions[Ye]:((null===W||typeof W>"u")&&(W=dr()),Ne=_r[Ye]&&_r[Ye][W]),typeof Ne>"u"||!Ne.length||!Ne[0]){var ba;for(Pa in Ma=[],_r[Ye])this.terminals_[Pa]&&Pa>2&&Ma.push("'"+this.terminals_[Pa]+"'");ba=Br.showPosition?"Parse error on line "+(He+1)+":\n"+Br.showPosition()+"\nExpecting "+Ma.join(", ")+", got '"+(this.terminals_[W]||W)+"'":"Parse error on line "+(He+1)+": Unexpected "+(1==W?"end of input":"'"+(this.terminals_[W]||W)+"'"),this.parseError(ba,{text:Br.match,token:this.terminals_[W]||W,line:Br.yylineno,loc:jr,expected:Ma})}if(Ne[0]instanceof Array&&Ne.length>1)throw new Error("Parse Error: multiple actions possible at state: "+Ye+", token: "+W);switch(Ne[0]){case 1:Xe.push(W),gr.push(Br.yytext),hr.push(Br.yylloc),Xe.push(Ne[1]),W=null,Yt?(W=Yt,Yt=null):(Ar=Br.yyleng,$e=Br.yytext,He=Br.yylineno,jr=Br.yylloc,kr>0&&kr--);break;case 2:if(da.$=gr[gr.length-(Ia=this.productions_[Ne[1]][1])],da._$={first_line:hr[hr.length-(Ia||1)].first_line,last_line:hr[hr.length-1].last_line,first_column:hr[hr.length-(Ia||1)].first_column,last_column:hr[hr.length-1].last_column},Qr&&(da._$.range=[hr[hr.length-(Ia||1)].range[0],hr[hr.length-1].range[1]]),typeof(yr=this.performAction.apply(da,[$e,Ar,He,ha.yy,Ne[1],gr,hr].concat(Jr)))<"u")return yr;Ia&&(Xe=Xe.slice(0,-1*Ia*2),gr=gr.slice(0,-1*Ia),hr=hr.slice(0,-1*Ia)),Xe.push(this.productions_[Ne[1]][0]),gr.push(da.$),hr.push(da._$),Xe.push(_r[Xe[Xe.length-2]][Xe[Xe.length-1]]);break;case 3:return!0}}return!0},"parse")};function jt(){this.yy={}}return xt.lexer=function(){return{EOF:1,parseError:(0,ut.K2)(function(xe,Xe){if(!this.yy.parser)throw new Error(xe);this.yy.parser.parseError(xe,Xe)},"parseError"),setInput:(0,ut.K2)(function(Wt,xe){return this.yy=xe||this.yy||{},this._input=Wt,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},"setInput"),input:(0,ut.K2)(function(){var Wt=this._input[0];return this.yytext+=Wt,this.yyleng++,this.offset++,this.match+=Wt,this.matched+=Wt,Wt.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),Wt},"input"),unput:(0,ut.K2)(function(Wt){var xe=Wt.length,Xe=Wt.split(/(?:\r\n?|\n)/g);this._input=Wt+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-xe),this.offset-=xe;var We=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),Xe.length-1&&(this.yylineno-=Xe.length-1);var gr=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:Xe?(Xe.length===We.length?this.yylloc.first_column:0)+We[We.length-Xe.length].length-Xe[0].length:this.yylloc.first_column-xe},this.options.ranges&&(this.yylloc.range=[gr[0],gr[0]+this.yyleng-xe]),this.yyleng=this.yytext.length,this},"unput"),more:(0,ut.K2)(function(){return this._more=!0,this},"more"),reject:(0,ut.K2)(function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},"reject"),less:(0,ut.K2)(function(Wt){this.unput(this.match.slice(Wt))},"less"),pastInput:(0,ut.K2)(function(){var Wt=this.matched.substr(0,this.matched.length-this.match.length);return(Wt.length>20?"...":"")+Wt.substr(-20).replace(/\n/g,"")},"pastInput"),upcomingInput:(0,ut.K2)(function(){var Wt=this.match;return Wt.length<20&&(Wt+=this._input.substr(0,20-Wt.length)),(Wt.substr(0,20)+(Wt.length>20?"...":"")).replace(/\n/g,"")},"upcomingInput"),showPosition:(0,ut.K2)(function(){var Wt=this.pastInput(),xe=new Array(Wt.length+1).join("-");return Wt+this.upcomingInput()+"\n"+xe+"^"},"showPosition"),test_match:(0,ut.K2)(function(Wt,xe){var Xe,We,gr;if(this.options.backtrack_lexer&&(gr={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(gr.yylloc.range=this.yylloc.range.slice(0))),(We=Wt[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=We.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:We?We[We.length-1].length-We[We.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+Wt[0].length},this.yytext+=Wt[0],this.match+=Wt[0],this.matches=Wt,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(Wt[0].length),this.matched+=Wt[0],Xe=this.performAction.call(this,this.yy,this,xe,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),Xe)return Xe;if(this._backtrack){for(var hr in gr)this[hr]=gr[hr];return!1}return!1},"test_match"),next:(0,ut.K2)(function(){if(this.done)return this.EOF;var Wt,xe,Xe,We;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var gr=this._currentRules(),hr=0;hr<gr.length;hr++)if((Xe=this._input.match(this.rules[gr[hr]]))&&(!xe||Xe[0].length>xe[0].length)){if(xe=Xe,We=hr,this.options.backtrack_lexer){if(!1!==(Wt=this.test_match(Xe,gr[hr])))return Wt;if(this._backtrack){xe=!1;continue}return!1}if(!this.options.flex)break}return xe?!1!==(Wt=this.test_match(xe,gr[We]))&&Wt:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},"next"),lex:(0,ut.K2)(function(){return this.next()||this.lex()},"lex"),begin:(0,ut.K2)(function(xe){this.conditionStack.push(xe)},"begin"),popState:(0,ut.K2)(function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},"popState"),_currentRules:(0,ut.K2)(function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},"_currentRules"),topState:(0,ut.K2)(function(xe){return(xe=this.conditionStack.length-1-Math.abs(xe||0))>=0?this.conditionStack[xe]:"INITIAL"},"topState"),pushState:(0,ut.K2)(function(xe){this.begin(xe)},"pushState"),stateStackSize:(0,ut.K2)(function(){return this.conditionStack.length},"stateStackSize"),options:{"case-insensitive":!0},performAction:(0,ut.K2)(function(xe,Xe,We,gr){switch(We){case 0:case 1:case 5:case 44:break;case 2:case 3:return this.popState(),34;case 4:return 34;case 6:return 10;case 7:return this.pushState("acc_title"),19;case 8:return this.popState(),"acc_title_value";case 9:return this.pushState("acc_descr"),21;case 10:return this.popState(),"acc_descr_value";case 11:this.pushState("acc_descr_multiline");break;case 12:case 26:case 28:this.popState();break;case 13:return"acc_descr_multiline_value";case 14:case 15:return 5;case 16:return 8;case 17:return this.pushState("axis_data"),"X_AXIS";case 18:return this.pushState("axis_data"),"Y_AXIS";case 19:return this.pushState("axis_band_data"),24;case 20:return 31;case 21:return this.pushState("data"),16;case 22:return this.pushState("data"),18;case 23:return this.pushState("data_inner"),24;case 24:return 27;case 25:return this.popState(),26;case 27:this.pushState("string");break;case 29:return"STR";case 30:return 24;case 31:return 26;case 32:return 43;case 33:return"COLON";case 34:return 44;case 35:return 28;case 36:return 45;case 37:return 46;case 38:return 48;case 39:return 50;case 40:return 47;case 41:return 41;case 42:return 49;case 43:return 42;case 45:return 35;case 46:return 36}},"anonymous"),rules:[/^(?:%%(?!\{)[^\n]*)/i,/^(?:[^\}]%%[^\n]*)/i,/^(?:(\r?\n))/i,/^(?:(\r?\n))/i,/^(?:[\n\r]+)/i,/^(?:%%[^\n]*)/i,/^(?:title\b)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:\{)/i,/^(?:[^\}]*)/i,/^(?:xychart-beta\b)/i,/^(?:xychart\b)/i,/^(?:(?:vertical|horizontal))/i,/^(?:x-axis\b)/i,/^(?:y-axis\b)/i,/^(?:\[)/i,/^(?:-->)/i,/^(?:line\b)/i,/^(?:bar\b)/i,/^(?:\[)/i,/^(?:[+-]?(?:\d+(?:\.\d+)?|\.\d+))/i,/^(?:\])/i,/^(?:(?:`\)                                    \{ this\.pushState\(md_string\); \}\n<md_string>\(\?:\(\?!`"\)\.\)\+                  \{ return MD_STR; \}\n<md_string>\(\?:`))/i,/^(?:["])/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:\[)/i,/^(?:\])/i,/^(?:[A-Za-z]+)/i,/^(?::)/i,/^(?:\+)/i,/^(?:,)/i,/^(?:=)/i,/^(?:\*)/i,/^(?:#)/i,/^(?:[\_])/i,/^(?:\.)/i,/^(?:&)/i,/^(?:-)/i,/^(?:[0-9]+)/i,/^(?:\s+)/i,/^(?:;)/i,/^(?:$)/i],conditions:{data_inner:{rules:[0,1,4,5,6,7,9,11,14,15,16,17,18,21,22,24,25,26,27,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46],inclusive:!0},data:{rules:[0,1,3,4,5,6,7,9,11,14,15,16,17,18,21,22,23,26,27,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46],inclusive:!0},axis_band_data:{rules:[0,1,4,5,6,7,9,11,14,15,16,17,18,21,22,25,26,27,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46],inclusive:!0},axis_data:{rules:[0,1,2,4,5,6,7,9,11,14,15,16,17,18,19,20,21,22,24,26,27,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46],inclusive:!0},acc_descr_multiline:{rules:[12,13],inclusive:!1},acc_descr:{rules:[10],inclusive:!1},acc_title:{rules:[8],inclusive:!1},title:{rules:[],inclusive:!1},md_string:{rules:[],inclusive:!1},string:{rules:[28,29],inclusive:!1},INITIAL:{rules:[0,1,4,5,6,7,9,11,14,15,16,17,18,21,22,26,27,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46],inclusive:!0}}}}(),(0,ut.K2)(jt,"Parser"),jt.prototype=xt,xt.Parser=jt,new jt}();Rr.parser=Rr;var wr=Rr;function Vr(zt){return"bar"===zt.type}function ra(zt){return"band"===zt.type}function Nr(zt){return"linear"===zt.type}(0,ut.K2)(Vr,"isBarPlot"),(0,ut.K2)(ra,"isBandAxisData"),(0,ut.K2)(Nr,"isLinearAxisData");var Fr=(class{constructor(zt){this.parentGroup=zt}getMaxDimension(zt,Ae){if(!this.parentGroup)return{width:zt.reduce((ce,Ee)=>Math.max(Ee.length,ce),0)*Ae,height:Ae};const or={width:0,height:0},ve=this.parentGroup.append("g").attr("visibility","hidden").attr("font-size",Ae);for(const ce of zt){const Ee=(0,L.W6)(ve,1,ce),er=Ee?Ee.height:Ae;or.width=Math.max(or.width,Ee?Ee.width:ce.length*Ae),or.height=Math.max(or.height,er)}return ve.remove(),or}static#t=A=()=>((0,ot.A)(this,"TextDimensionCalculatorWithFont"),(0,ut.K2)(this,"TextDimensionCalculatorWithFont"),this)},A()),je=(class{constructor(zt,Ae,or,ve){this.axisConfig=zt,this.title=Ae,this.textDimensionCalculator=or,this.axisThemeConfig=ve,this.boundingRect={x:0,y:0,width:0,height:0},this.axisPosition="left",this.showTitle=!1,this.showLabel=!1,this.showTick=!1,this.showAxisLine=!1,this.outerPadding=0,this.titleTextHeight=0,this.labelTextHeight=0,this.range=[0,10],this.boundingRect={x:0,y:0,width:0,height:0},this.axisPosition="left"}setRange(zt){this.range=zt,"left"===this.axisPosition||"right"===this.axisPosition?this.boundingRect.height=zt[1]-zt[0]:this.boundingRect.width=zt[1]-zt[0],this.recalculateScale()}getRange(){return[this.range[0]+this.outerPadding,this.range[1]-this.outerPadding]}setAxisPosition(zt){this.axisPosition=zt,this.setRange(this.range)}getTickDistance(){const zt=this.getRange();return Math.abs(zt[0]-zt[1])/this.getTickValues().length}getAxisOuterPadding(){return this.outerPadding}getLabelDimension(){return this.textDimensionCalculator.getMaxDimension(this.getTickValues().map(zt=>zt.toString()),this.axisConfig.labelFontSize)}recalculateOuterPaddingToDrawBar(){.7*this.getTickDistance()>2*this.outerPadding&&(this.outerPadding=Math.floor(.7*this.getTickDistance()/2)),this.recalculateScale()}calculateSpaceIfDrawnHorizontally(zt){let Ae=zt.height;if(this.axisConfig.showAxisLine&&Ae>this.axisConfig.axisLineWidth&&(Ae-=this.axisConfig.axisLineWidth,this.showAxisLine=!0),this.axisConfig.showLabel){const or=this.getLabelDimension();this.outerPadding=Math.min(or.width/2,.2*zt.width);const ce=or.height+2*this.axisConfig.labelPadding;this.labelTextHeight=or.height,ce<=Ae&&(Ae-=ce,this.showLabel=!0)}if(this.axisConfig.showTick&&Ae>=this.axisConfig.tickLength&&(this.showTick=!0,Ae-=this.axisConfig.tickLength),this.axisConfig.showTitle&&this.title){const or=this.textDimensionCalculator.getMaxDimension([this.title],this.axisConfig.titleFontSize),ve=or.height+2*this.axisConfig.titlePadding;this.titleTextHeight=or.height,ve<=Ae&&(Ae-=ve,this.showTitle=!0)}this.boundingRect.width=zt.width,this.boundingRect.height=zt.height-Ae}calculateSpaceIfDrawnVertical(zt){let Ae=zt.width;if(this.axisConfig.showAxisLine&&Ae>this.axisConfig.axisLineWidth&&(Ae-=this.axisConfig.axisLineWidth,this.showAxisLine=!0),this.axisConfig.showLabel){const or=this.getLabelDimension();this.outerPadding=Math.min(or.height/2,.2*zt.height);const ce=or.width+2*this.axisConfig.labelPadding;ce<=Ae&&(Ae-=ce,this.showLabel=!0)}if(this.axisConfig.showTick&&Ae>=this.axisConfig.tickLength&&(this.showTick=!0,Ae-=this.axisConfig.tickLength),this.axisConfig.showTitle&&this.title){const or=this.textDimensionCalculator.getMaxDimension([this.title],this.axisConfig.titleFontSize),ve=or.height+2*this.axisConfig.titlePadding;this.titleTextHeight=or.height,ve<=Ae&&(Ae-=ve,this.showTitle=!0)}this.boundingRect.width=zt.width-Ae,this.boundingRect.height=zt.height}calculateSpace(zt){return"left"===this.axisPosition||"right"===this.axisPosition?this.calculateSpaceIfDrawnVertical(zt):this.calculateSpaceIfDrawnHorizontally(zt),this.recalculateScale(),{width:this.boundingRect.width,height:this.boundingRect.height}}setBoundingBoxXY(zt){this.boundingRect.x=zt.x,this.boundingRect.y=zt.y}getDrawableElementsForLeftAxis(){const zt=[];if(this.showAxisLine){const Ae=this.boundingRect.x+this.boundingRect.width-this.axisConfig.axisLineWidth/2;zt.push({type:"path",groupTexts:["left-axis","axisl-line"],data:[{path:`M ${Ae},${this.boundingRect.y} L ${Ae},${this.boundingRect.y+this.boundingRect.height} `,strokeFill:this.axisThemeConfig.axisLineColor,strokeWidth:this.axisConfig.axisLineWidth}]})}if(this.showLabel&&zt.push({type:"text",groupTexts:["left-axis","label"],data:this.getTickValues().map(Ae=>({text:Ae.toString(),x:this.boundingRect.x+this.boundingRect.width-(this.showLabel?this.axisConfig.labelPadding:0)-(this.showTick?this.axisConfig.tickLength:0)-(this.showAxisLine?this.axisConfig.axisLineWidth:0),y:this.getScaleValue(Ae),fill:this.axisThemeConfig.labelColor,fontSize:this.axisConfig.labelFontSize,rotation:0,verticalPos:"middle",horizontalPos:"right"}))}),this.showTick){const Ae=this.boundingRect.x+this.boundingRect.width-(this.showAxisLine?this.axisConfig.axisLineWidth:0);zt.push({type:"path",groupTexts:["left-axis","ticks"],data:this.getTickValues().map(or=>({path:`M ${Ae},${this.getScaleValue(or)} L ${Ae-this.axisConfig.tickLength},${this.getScaleValue(or)}`,strokeFill:this.axisThemeConfig.tickColor,strokeWidth:this.axisConfig.tickWidth}))})}return this.showTitle&&zt.push({type:"text",groupTexts:["left-axis","title"],data:[{text:this.title,x:this.boundingRect.x+this.axisConfig.titlePadding,y:this.boundingRect.y+this.boundingRect.height/2,fill:this.axisThemeConfig.titleColor,fontSize:this.axisConfig.titleFontSize,rotation:270,verticalPos:"top",horizontalPos:"center"}]}),zt}getDrawableElementsForBottomAxis(){const zt=[];if(this.showAxisLine){const Ae=this.boundingRect.y+this.axisConfig.axisLineWidth/2;zt.push({type:"path",groupTexts:["bottom-axis","axis-line"],data:[{path:`M ${this.boundingRect.x},${Ae} L ${this.boundingRect.x+this.boundingRect.width},${Ae}`,strokeFill:this.axisThemeConfig.axisLineColor,strokeWidth:this.axisConfig.axisLineWidth}]})}if(this.showLabel&&zt.push({type:"text",groupTexts:["bottom-axis","label"],data:this.getTickValues().map(Ae=>({text:Ae.toString(),x:this.getScaleValue(Ae),y:this.boundingRect.y+this.axisConfig.labelPadding+(this.showTick?this.axisConfig.tickLength:0)+(this.showAxisLine?this.axisConfig.axisLineWidth:0),fill:this.axisThemeConfig.labelColor,fontSize:this.axisConfig.labelFontSize,rotation:0,verticalPos:"top",horizontalPos:"center"}))}),this.showTick){const Ae=this.boundingRect.y+(this.showAxisLine?this.axisConfig.axisLineWidth:0);zt.push({type:"path",groupTexts:["bottom-axis","ticks"],data:this.getTickValues().map(or=>({path:`M ${this.getScaleValue(or)},${Ae} L ${this.getScaleValue(or)},${Ae+this.axisConfig.tickLength}`,strokeFill:this.axisThemeConfig.tickColor,strokeWidth:this.axisConfig.tickWidth}))})}return this.showTitle&&zt.push({type:"text",groupTexts:["bottom-axis","title"],data:[{text:this.title,x:this.range[0]+(this.range[1]-this.range[0])/2,y:this.boundingRect.y+this.boundingRect.height-this.axisConfig.titlePadding-this.titleTextHeight,fill:this.axisThemeConfig.titleColor,fontSize:this.axisConfig.titleFontSize,rotation:0,verticalPos:"top",horizontalPos:"center"}]}),zt}getDrawableElementsForTopAxis(){const zt=[];if(this.showAxisLine){const Ae=this.boundingRect.y+this.boundingRect.height-this.axisConfig.axisLineWidth/2;zt.push({type:"path",groupTexts:["top-axis","axis-line"],data:[{path:`M ${this.boundingRect.x},${Ae} L ${this.boundingRect.x+this.boundingRect.width},${Ae}`,strokeFill:this.axisThemeConfig.axisLineColor,strokeWidth:this.axisConfig.axisLineWidth}]})}if(this.showLabel&&zt.push({type:"text",groupTexts:["top-axis","label"],data:this.getTickValues().map(Ae=>({text:Ae.toString(),x:this.getScaleValue(Ae),y:this.boundingRect.y+(this.showTitle?this.titleTextHeight+2*this.axisConfig.titlePadding:0)+this.axisConfig.labelPadding,fill:this.axisThemeConfig.labelColor,fontSize:this.axisConfig.labelFontSize,rotation:0,verticalPos:"top",horizontalPos:"center"}))}),this.showTick){const Ae=this.boundingRect.y;zt.push({type:"path",groupTexts:["top-axis","ticks"],data:this.getTickValues().map(or=>({path:`M ${this.getScaleValue(or)},${Ae+this.boundingRect.height-(this.showAxisLine?this.axisConfig.axisLineWidth:0)} L ${this.getScaleValue(or)},${Ae+this.boundingRect.height-this.axisConfig.tickLength-(this.showAxisLine?this.axisConfig.axisLineWidth:0)}`,strokeFill:this.axisThemeConfig.tickColor,strokeWidth:this.axisConfig.tickWidth}))})}return this.showTitle&&zt.push({type:"text",groupTexts:["top-axis","title"],data:[{text:this.title,x:this.boundingRect.x+this.boundingRect.width/2,y:this.boundingRect.y+this.axisConfig.titlePadding,fill:this.axisThemeConfig.titleColor,fontSize:this.axisConfig.titleFontSize,rotation:0,verticalPos:"top",horizontalPos:"center"}]}),zt}getDrawableElements(){if("left"===this.axisPosition)return this.getDrawableElementsForLeftAxis();if("right"===this.axisPosition)throw Error("Drawing of right axis is not implemented");return"bottom"===this.axisPosition?this.getDrawableElementsForBottomAxis():"top"===this.axisPosition?this.getDrawableElementsForTopAxis():[]}static#t=At=()=>((0,ot.A)(this,"BaseAxis"),(0,ut.K2)(this,"BaseAxis"),this)},At()),z=(class extends je{constructor(zt,Ae,or,ve,ce){super(zt,ve,ce,Ae),this.categories=or,this.scale=(0,$.WH)().domain(this.categories).range(this.getRange())}setRange(zt){super.setRange(zt)}recalculateScale(){this.scale=(0,$.WH)().domain(this.categories).range(this.getRange()).paddingInner(1).paddingOuter(0).align(.5),ut.Rm.trace("BandAxis axis final categories, range: ",this.categories,this.getRange())}getTickValues(){return this.categories}getScaleValue(zt){return this.scale(zt)??this.getRange()[0]}static#t=wt=()=>((0,ot.A)(this,"BandAxis"),(0,ut.K2)(this,"BandAxis"),this)},wt()),ft=(class extends je{constructor(zt,Ae,or,ve,ce){super(zt,ve,ce,Ae),this.domain=or,this.scale=(0,$.m4Y)().domain(this.domain).range(this.getRange())}getTickValues(){return this.scale.ticks()}recalculateScale(){const zt=[...this.domain];"left"===this.axisPosition&&zt.reverse(),this.scale=(0,$.m4Y)().domain(zt).range(this.getRange())}getScaleValue(zt){return this.scale(zt)}static#t=Ge=()=>((0,ot.A)(this,"LinearAxis"),(0,ut.K2)(this,"LinearAxis"),this)},Ge());function Bt(zt,Ae,or,ve){const ce=new Fr(ve);return ra(zt)?new z(Ae,or,zt.categories,zt.title,ce):new ft(Ae,or,[zt.min,zt.max],zt.title,ce)}(0,ut.K2)(Bt,"getAxis");var we=(class{constructor(zt,Ae,or,ve){this.textDimensionCalculator=zt,this.chartConfig=Ae,this.chartData=or,this.chartThemeConfig=ve,this.boundingRect={x:0,y:0,width:0,height:0},this.showChartTitle=!1}setBoundingBoxXY(zt){this.boundingRect.x=zt.x,this.boundingRect.y=zt.y}calculateSpace(zt){const Ae=this.textDimensionCalculator.getMaxDimension([this.chartData.title],this.chartConfig.titleFontSize),or=Math.max(Ae.width,zt.width),ve=Ae.height+2*this.chartConfig.titlePadding;return Ae.width<=or&&Ae.height<=ve&&this.chartConfig.showTitle&&this.chartData.title&&(this.boundingRect.width=or,this.boundingRect.height=ve,this.showChartTitle=!0),{width:this.boundingRect.width,height:this.boundingRect.height}}getDrawableElements(){const zt=[];return this.showChartTitle&&zt.push({groupTexts:["chart-title"],type:"text",data:[{fontSize:this.chartConfig.titleFontSize,text:this.chartData.title,verticalPos:"middle",horizontalPos:"center",x:this.boundingRect.x+this.boundingRect.width/2,y:this.boundingRect.y+this.boundingRect.height/2,fill:this.chartThemeConfig.titleColor,rotation:0}]}),zt}static#t=dt=()=>((0,ot.A)(this,"ChartTitle"),(0,ut.K2)(this,"ChartTitle"),this)},dt());function X(zt,Ae,or,ve){const ce=new Fr(ve);return new we(ce,zt,Ae,or)}(0,ut.K2)(X,"getChartTitleComponent");var ae=(class{constructor(zt,Ae,or,ve,ce){this.plotData=zt,this.xAxis=Ae,this.yAxis=or,this.orientation=ve,this.plotIndex=ce}getDrawableElement(){const zt=this.plotData.data.map(or=>[this.xAxis.getScaleValue(or[0]),this.yAxis.getScaleValue(or[1])]);let Ae;return Ae="horizontal"===this.orientation?(0,$.n8j)().y(or=>or[0]).x(or=>or[1])(zt):(0,$.n8j)().x(or=>or[0]).y(or=>or[1])(zt),Ae?[{groupTexts:["plot",`line-plot-${this.plotIndex}`],type:"path",data:[{path:Ae,strokeFill:this.plotData.strokeFill,strokeWidth:this.plotData.strokeWidth}]}]:[]}static#t=Rt=()=>((0,ot.A)(this,"LinePlot"),(0,ut.K2)(this,"LinePlot"),this)},Rt()),w=(class{constructor(zt,Ae,or,ve,ce,Ee){this.barData=zt,this.boundingRect=Ae,this.xAxis=or,this.yAxis=ve,this.orientation=ce,this.plotIndex=Ee}getDrawableElement(){const zt=this.barData.data.map(ce=>[this.xAxis.getScaleValue(ce[0]),this.yAxis.getScaleValue(ce[1])]),or=.95*Math.min(2*this.xAxis.getAxisOuterPadding(),this.xAxis.getTickDistance()),ve=or/2;return"horizontal"===this.orientation?[{groupTexts:["plot",`bar-plot-${this.plotIndex}`],type:"rect",data:zt.map(ce=>({x:this.boundingRect.x,y:ce[0]-ve,height:or,width:ce[1]-this.boundingRect.x,fill:this.barData.fill,strokeWidth:0,strokeFill:this.barData.fill}))}]:[{groupTexts:["plot",`bar-plot-${this.plotIndex}`],type:"rect",data:zt.map(ce=>({x:ce[0]-ve,y:ce[1],width:or,height:this.boundingRect.y+this.boundingRect.height-ce[1],fill:this.barData.fill,strokeWidth:0,strokeFill:this.barData.fill}))}]}static#t=q=()=>((0,ot.A)(this,"BarPlot"),(0,ut.K2)(this,"BarPlot"),this)},q()),re=(class{constructor(zt,Ae,or){this.chartConfig=zt,this.chartData=Ae,this.chartThemeConfig=or,this.boundingRect={x:0,y:0,width:0,height:0}}setAxes(zt,Ae){this.xAxis=zt,this.yAxis=Ae}setBoundingBoxXY(zt){this.boundingRect.x=zt.x,this.boundingRect.y=zt.y}calculateSpace(zt){return this.boundingRect.width=zt.width,this.boundingRect.height=zt.height,{width:this.boundingRect.width,height:this.boundingRect.height}}getDrawableElements(){if(!this.xAxis||!this.yAxis)throw Error("Axes must be passed to render Plots");const zt=[];for(const[Ae,or]of this.chartData.plots.entries())switch(or.type){case"line":{const ve=new ae(or,this.xAxis,this.yAxis,this.chartConfig.chartOrientation,Ae);zt.push(...ve.getDrawableElement())}break;case"bar":{const ve=new w(or,this.boundingRect,this.xAxis,this.yAxis,this.chartConfig.chartOrientation,Ae);zt.push(...ve.getDrawableElement())}}return zt}static#t=ar=()=>((0,ot.A)(this,"BasePlot"),(0,ut.K2)(this,"BasePlot"),this)},ar());function It(zt,Ae,or){return new re(zt,Ae,or)}(0,ut.K2)(It,"getPlotComponent");var H,qt=(class{constructor(zt,Ae,or,ve){this.chartConfig=zt,this.chartData=Ae,this.componentStore={title:X(zt,Ae,or,ve),plot:It(zt,Ae,or),xAxis:Bt(Ae.xAxis,zt.xAxis,{titleColor:or.xAxisTitleColor,labelColor:or.xAxisLabelColor,tickColor:or.xAxisTickColor,axisLineColor:or.xAxisLineColor},ve),yAxis:Bt(Ae.yAxis,zt.yAxis,{titleColor:or.yAxisTitleColor,labelColor:or.yAxisLabelColor,tickColor:or.yAxisTickColor,axisLineColor:or.yAxisLineColor},ve)}}calculateVerticalSpace(){let zt=this.chartConfig.width,Ae=this.chartConfig.height,or=0,ve=0,ce=Math.floor(zt*this.chartConfig.plotReservedSpacePercent/100),Ee=Math.floor(Ae*this.chartConfig.plotReservedSpacePercent/100),De=this.componentStore.plot.calculateSpace({width:ce,height:Ee});zt-=De.width,Ae-=De.height,De=this.componentStore.title.calculateSpace({width:this.chartConfig.width,height:Ae}),ve=De.height,Ae-=De.height,this.componentStore.xAxis.setAxisPosition("bottom"),De=this.componentStore.xAxis.calculateSpace({width:zt,height:Ae}),Ae-=De.height,this.componentStore.yAxis.setAxisPosition("left"),De=this.componentStore.yAxis.calculateSpace({width:zt,height:Ae}),or=De.width,zt-=De.width,zt>0&&(ce+=zt,zt=0),Ae>0&&(Ee+=Ae,Ae=0),this.componentStore.plot.calculateSpace({width:ce,height:Ee}),this.componentStore.plot.setBoundingBoxXY({x:or,y:ve}),this.componentStore.xAxis.setRange([or,or+ce]),this.componentStore.xAxis.setBoundingBoxXY({x:or,y:ve+Ee}),this.componentStore.yAxis.setRange([ve,ve+Ee]),this.componentStore.yAxis.setBoundingBoxXY({x:0,y:ve}),this.chartData.plots.some(er=>Vr(er))&&this.componentStore.xAxis.recalculateOuterPaddingToDrawBar()}calculateHorizontalSpace(){let zt=this.chartConfig.width,Ae=this.chartConfig.height,or=0,ve=0,ce=0,Ee=Math.floor(zt*this.chartConfig.plotReservedSpacePercent/100),De=Math.floor(Ae*this.chartConfig.plotReservedSpacePercent/100),er=this.componentStore.plot.calculateSpace({width:Ee,height:De});zt-=er.width,Ae-=er.height,er=this.componentStore.title.calculateSpace({width:this.chartConfig.width,height:Ae}),or=er.height,Ae-=er.height,this.componentStore.xAxis.setAxisPosition("left"),er=this.componentStore.xAxis.calculateSpace({width:zt,height:Ae}),zt-=er.width,ve=er.width,this.componentStore.yAxis.setAxisPosition("top"),er=this.componentStore.yAxis.calculateSpace({width:zt,height:Ae}),Ae-=er.height,ce=or+er.height,zt>0&&(Ee+=zt,zt=0),Ae>0&&(De+=Ae,Ae=0),this.componentStore.plot.calculateSpace({width:Ee,height:De}),this.componentStore.plot.setBoundingBoxXY({x:ve,y:ce}),this.componentStore.yAxis.setRange([ve,ve+Ee]),this.componentStore.yAxis.setBoundingBoxXY({x:ve,y:or}),this.componentStore.xAxis.setRange([ce,ce+De]),this.componentStore.xAxis.setBoundingBoxXY({x:0,y:ce}),this.chartData.plots.some(Qe=>Vr(Qe))&&this.componentStore.xAxis.recalculateOuterPaddingToDrawBar()}calculateSpace(){"horizontal"===this.chartConfig.chartOrientation?this.calculateHorizontalSpace():this.calculateVerticalSpace()}getDrawableElement(){this.calculateSpace();const zt=[];this.componentStore.plot.setAxes(this.componentStore.xAxis,this.componentStore.yAxis);for(const Ae of Object.values(this.componentStore))zt.push(...Ae.getDrawableElements());return zt}static#t=Ke=()=>((0,ot.A)(this,"Orchestrator"),(0,ut.K2)(this,"Orchestrator"),this)},Ke()),V=(class{static build(zt,Ae,or,ve){return new qt(zt,Ae,or,ve).getDrawableElement()}static#t=cr=()=>((0,ot.A)(this,"XYChartBuilder"),(0,ut.K2)(this,"XYChartBuilder"),this)},cr()),pt=0,Nt=qe(),St=oe(),$t={yAxis:{type:"linear",title:"",min:1/0,max:-1/0},xAxis:{type:"band",title:"",categories:[]},title:"",plots:[]},ye=St.plotColorPalette.split(",").map(zt=>zt.trim()),le=!1,Pe=!1;function oe(){const zt=(0,Pt.P$)(),Ae=(0,Pt.zj)();return(0,S.$t)(zt.xyChart,Ae.themeVariables.xyChart)}function qe(){const zt=(0,Pt.zj)();return(0,S.$t)(Pt.UI.xyChart,zt.xyChart)}function Et(zt){const Ae=(0,Pt.zj)();return(0,Pt.jZ)(zt.trim(),Ae)}function Tt(zt){H=zt}function B(zt){Nt.chartOrientation="horizontal"===zt?"horizontal":"vertical"}function F(zt){$t.xAxis.title=Et(zt.text)}function et(zt,Ae){$t.xAxis={type:"linear",title:$t.xAxis.title,min:zt,max:Ae},le=!0}function mt(zt){$t.xAxis={type:"band",title:$t.xAxis.title,categories:zt.map(Ae=>Et(Ae.text))},le=!0}function it(zt){$t.yAxis.title=Et(zt.text)}function rt(zt,Ae){$t.yAxis={type:"linear",title:$t.yAxis.title,min:zt,max:Ae},Pe=!0}function _t(zt){const Ae=Math.min(...zt),or=Math.max(...zt),ve=Nr($t.yAxis)?$t.yAxis.min:1/0,ce=Nr($t.yAxis)?$t.yAxis.max:-1/0;$t.yAxis={type:"linear",title:$t.yAxis.title,min:Math.min(ve,Ae),max:Math.max(ce,or)}}function ht(zt){let Ae=[];if(0===zt.length)return Ae;if(!le){const or=Nr($t.xAxis)?$t.xAxis.min:1/0,ve=Nr($t.xAxis)?$t.xAxis.max:-1/0;et(Math.min(or,1),Math.max(ve,zt.length))}if(Pe||_t(zt),ra($t.xAxis)&&(Ae=$t.xAxis.categories.map((or,ve)=>[or,zt[ve]])),Nr($t.xAxis)){const or=$t.xAxis.min,ve=$t.xAxis.max,ce=(ve-or)/(zt.length-1),Ee=[];for(let De=or;De<=ve;De+=ce)Ee.push(`${De}`);Ae=Ee.map((De,er)=>[De,zt[er]])}return Ae}function Ft(zt){return ye[0===zt?0:zt%ye.length]}function G(zt,Ae){const or=ht(Ae);$t.plots.push({type:"line",strokeFill:Ft(pt),strokeWidth:2,data:or}),pt++}function lt(zt,Ae){const or=ht(Ae);$t.plots.push({type:"bar",fill:Ft(pt),data:or}),pt++}function ke(){if(0===$t.plots.length)throw Error("No Plot to render, please provide a plot with some data");return $t.title=(0,Pt.ab)(),V.build(Nt,$t,St,H)}function Mt(){return St}function Zt(){return Nt}function pe(){return $t}(0,ut.K2)(oe,"getChartDefaultThemeConfig"),(0,ut.K2)(qe,"getChartDefaultConfig"),(0,ut.K2)(function ze(){return{yAxis:{type:"linear",title:"",min:1/0,max:-1/0},xAxis:{type:"band",title:"",categories:[]},title:"",plots:[]}},"getChartDefaultData"),(0,ut.K2)(Et,"textSanitizer"),(0,ut.K2)(Tt,"setTmpSVGG"),(0,ut.K2)(B,"setOrientation"),(0,ut.K2)(F,"setXAxisTitle"),(0,ut.K2)(et,"setXAxisRangeData"),(0,ut.K2)(mt,"setXAxisBand"),(0,ut.K2)(it,"setYAxisTitle"),(0,ut.K2)(rt,"setYAxisRangeData"),(0,ut.K2)(_t,"setYAxisRangeFromPlotData"),(0,ut.K2)(ht,"transformDataWithoutCategory"),(0,ut.K2)(Ft,"getPlotColorFromPalette"),(0,ut.K2)(G,"setLineData"),(0,ut.K2)(lt,"setBarData"),(0,ut.K2)(ke,"getDrawableElem"),(0,ut.K2)(Mt,"getChartThemeConfig"),(0,ut.K2)(Zt,"getChartConfig"),(0,ut.K2)(pe,"getXYChartData");var xr={parser:wr,db:{getDrawableElem:ke,clear:(0,ut.K2)(function(){(0,Pt.IU)(),pt=0,Nt=qe(),$t={yAxis:{type:"linear",title:"",min:1/0,max:-1/0},xAxis:{type:"band",title:"",categories:[]},title:"",plots:[]},St=oe(),ye=St.plotColorPalette.split(",").map(zt=>zt.trim()),le=!1,Pe=!1},"clear"),setAccTitle:Pt.SV,getAccTitle:Pt.iN,setDiagramTitle:Pt.ke,getDiagramTitle:Pt.ab,getAccDescription:Pt.m7,setAccDescription:Pt.EI,setOrientation:B,setXAxisTitle:F,setXAxisRangeData:et,setXAxisBand:mt,setYAxisTitle:it,setYAxisRangeData:rt,setLineData:G,setBarData:lt,setTmpSVGG:Tt,getChartThemeConfig:Mt,getChartConfig:Zt,getXYChartData:pe},renderer:{draw:(0,ut.K2)((zt,Ae,or,ve)=>{const ce=ve.db,Ee=ce.getChartThemeConfig(),De=ce.getChartConfig(),er=ce.getXYChartData().plots[0].data.map(E=>E[1]);function Qe(E){return"top"===E?"text-before-edge":"middle"}function Lr(E){return"left"===E?"start":"right"===E?"end":"middle"}function _e(E){return`translate(${E.x}, ${E.y}) rotate(${E.rotation||0})`}(0,ut.K2)(Qe,"getDominantBaseLine"),(0,ut.K2)(Lr,"getTextAnchor"),(0,ut.K2)(_e,"getTextTransformation"),ut.Rm.debug("Rendering xychart chart\n"+zt);const Hr=(0,ee.D)(Ae),sr=Hr.append("g").attr("class","main"),te=sr.append("rect").attr("width",De.width).attr("height",De.height).attr("class","background");(0,Pt.a$)(Hr,De.height,De.width,!0),Hr.attr("viewBox",`0 0 ${De.width} ${De.height}`),te.attr("fill",Ee.backgroundColor),ce.setTmpSVGG(Hr.append("g").attr("class","mermaid-tmp-group"));const ne=ce.getDrawableElem(),be={};function ir(E){let I=sr,m="";for(const[D]of E.entries()){let v=sr;D>0&&be[m]&&(v=be[m]),m+=E[D],I=be[m],I||(I=be[m]=v.append("g").attr("class",E[D]))}return I}(0,ut.K2)(ir,"getGroup");for(const E of ne){if(0===E.data.length)continue;const I=ir(E.groupTexts);switch(E.type){case"rect":if(I.selectAll("rect").data(E.data).enter().append("rect").attr("x",m=>m.x).attr("y",m=>m.y).attr("width",m=>m.width).attr("height",m=>m.height).attr("fill",m=>m.fill).attr("stroke",m=>m.strokeFill).attr("stroke-width",m=>m.strokeWidth),De.showDataLabel)if("horizontal"===De.chartOrientation){let m=function(P,Q){const{data:xt,label:Vt}=P;return Q*Vt.length*D<=xt.width-10};(0,ut.K2)(m,"fitsHorizontally");const D=.7,v=E.data.map((P,Q)=>({data:P,label:er[Q].toString()})).filter(P=>P.data.width>0&&P.data.height>0),b=v.map(P=>{const{data:Q}=P;let xt=.7*Q.height;for(;!m(P,xt)&&xt>0;)xt-=1;return xt}),C=Math.floor(Math.min(...b));I.selectAll("text").data(v).enter().append("text").attr("x",P=>P.data.x+P.data.width-10).attr("y",P=>P.data.y+P.data.height/2).attr("text-anchor","end").attr("dominant-baseline","middle").attr("fill","black").attr("font-size",`${C}px`).text(P=>P.label)}else{let m=function(P,Q,xt){const{data:Vt,label:jt}=P,Wt=Q*jt.length*.7,xe=Vt.x+Vt.width/2;return xe-Wt/2>=Vt.x&&xe+Wt/2<=Vt.x+Vt.width&&Vt.y+xt+Q<=Vt.y+Vt.height};(0,ut.K2)(m,"fitsInBar");const D=10,v=E.data.map((P,Q)=>({data:P,label:er[Q].toString()})).filter(P=>P.data.width>0&&P.data.height>0),b=v.map(P=>{const{data:Q,label:xt}=P;let Vt=Q.width/(.7*xt.length);for(;!m(P,Vt,D)&&Vt>0;)Vt-=1;return Vt}),C=Math.floor(Math.min(...b));I.selectAll("text").data(v).enter().append("text").attr("x",P=>P.data.x+P.data.width/2).attr("y",P=>P.data.y+D).attr("text-anchor","middle").attr("dominant-baseline","hanging").attr("fill","black").attr("font-size",`${C}px`).text(P=>P.label)}break;case"text":I.selectAll("text").data(E.data).enter().append("text").attr("x",0).attr("y",0).attr("fill",m=>m.fill).attr("font-size",m=>m.fontSize).attr("dominant-baseline",m=>Qe(m.verticalPos)).attr("text-anchor",m=>Lr(m.horizontalPos)).attr("transform",m=>_e(m)).text(m=>m.text);break;case"path":I.selectAll("path").data(E.data).enter().append("path").attr("d",m=>m.path).attr("fill",m=>m.fill?m.fill:"none").attr("stroke",m=>m.strokeFill).attr("stroke-width",m=>m.strokeWidth)}}},"draw")}}},69664:(Ja,vr,R)=>{"use strict";R.d(vr,{D:()=>S});var ot=R(79006),ee=R(32303),L=R(40622),S=(0,ee.K2)(Pt=>{const{securityLevel:ut}=(0,ot.D7)();let $=(0,L.Ltv)("body");if("sandbox"===ut){const wt=(0,L.Ltv)(`#i${Pt}`).node()?.contentDocument??document;$=(0,L.Ltv)(wt.body)}return $.select(`#${Pt}`)},"selectSvgElement")},72271:(Ja,vr,R)=>{"use strict";R.d(vr,{XX:()=>Ge,q7:()=>dt,sO:()=>At});var ot=R(89204),ee=R(98954),L=R(87452),S=R(52052),Pt=R(79006),ut=R(32303),$={common:Pt.Y2,getConfig:Pt.zj,insertCluster:L.U,insertEdge:ee.Jo,insertEdgeLabel:ee.jP,insertMarkers:ee.g0,insertNode:L.on,interpolateToCurve:S.Ib,labelHelper:L.Zk,log:ut.Rm,positionEdgeLabel:ee.T_},A={},At=(0,ut.K2)(Rt=>{for(const q of Rt)A[q.name]=q},"registerLayoutLoaders");(0,ut.K2)(()=>{At([{name:"dagre",loader:(0,ut.K2)((0,ot.A)(function*(){return yield Promise.all([R.e(911),R.e(335),R.e(865)]).then(R.bind(R,72876))}),"loader")},{name:"cose-bilkent",loader:(0,ut.K2)((0,ot.A)(function*(){return yield Promise.all([R.e(911),R.e(805)]).then(R.bind(R,8026))}),"loader")}])},"registerDefaultLayoutLoaders")();var Ge=(0,ut.K2)(function(){var Rt=(0,ot.A)(function*(q,ar){if(!(q.layoutAlgorithm in A))throw new Error(`Unknown layout algorithm: ${q.layoutAlgorithm}`);const Ke=A[q.layoutAlgorithm];return(yield Ke.loader()).render(q,ar,$,{algorithm:Ke.algorithm})});return function(q,ar){return Rt.apply(this,arguments)}}(),"render"),dt=(0,ut.K2)((Rt="",{fallback:q="dagre"}={})=>{if(Rt in A)return Rt;if(q in A)return ut.Rm.warn(`Layout algorithm ${Rt} is not registered. Using ${q} as fallback.`),q;throw new Error(`Both layout algorithms ${Rt} and ${q} are not registered.`)},"getRegisteredLayoutAlgorithm")},72635:(Ja,vr,R)=>{"use strict";R.r(vr),R.d(vr,{diagram:()=>D});var A,At,ot=R(45027),ee=R(62045),L=R(52052),S=R(79006),Pt=R(32303),ut=R(40622),$=R(73986),wt=function(){var v=(0,Pt.K2)(function(Fe,at,Ct,M){for(Ct=Ct||{},M=Fe.length;M--;Ct[Fe[M]]=at);return Ct},"o"),b=[1,24],C=[1,25],P=[1,26],Q=[1,27],xt=[1,28],Vt=[1,63],jt=[1,64],Ut=[1,65],Wt=[1,66],xe=[1,67],Xe=[1,68],We=[1,69],gr=[1,29],hr=[1,30],_r=[1,31],$e=[1,32],He=[1,33],Ar=[1,34],kr=[1,35],zr=[1,36],Er=[1,37],Jr=[1,38],Br=[1,39],ha=[1,40],ia=[1,41],jr=[1,42],Qr=[1,43],lr=[1,44],dr=[1,45],W=[1,46],Yt=[1,47],Ye=[1,48],Ne=[1,50],Tr=[1,51],yr=[1,52],da=[1,53],Pa=[1,54],Ia=[1,55],Wa=[1,56],Ma=[1,57],ba=[1,58],sa=[1,59],Sa=[1,60],ea=[14,42],Va=[14,34,36,37,38,39,40,41,42,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74],pr=[12,14,34,36,37,38,39,40,41,42,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74],Ua=[1,82],nr=[1,83],Oa=[1,84],Ka=[1,85],ti=[12,14,42],_a=[12,14,33,42],qa=[12,14,33,42,76,77,79,80],Ha=[12,33],oa=[34,36,37,38,39,40,41,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74],hi={trace:(0,Pt.K2)(function(){},"trace"),yy:{},symbols_:{error:2,start:3,mermaidDoc:4,direction:5,direction_tb:6,direction_bt:7,direction_rl:8,direction_lr:9,graphConfig:10,C4_CONTEXT:11,NEWLINE:12,statements:13,EOF:14,C4_CONTAINER:15,C4_COMPONENT:16,C4_DYNAMIC:17,C4_DEPLOYMENT:18,otherStatements:19,diagramStatements:20,otherStatement:21,title:22,accDescription:23,acc_title:24,acc_title_value:25,acc_descr:26,acc_descr_value:27,acc_descr_multiline_value:28,boundaryStatement:29,boundaryStartStatement:30,boundaryStopStatement:31,boundaryStart:32,LBRACE:33,ENTERPRISE_BOUNDARY:34,attributes:35,SYSTEM_BOUNDARY:36,BOUNDARY:37,CONTAINER_BOUNDARY:38,NODE:39,NODE_L:40,NODE_R:41,RBRACE:42,diagramStatement:43,PERSON:44,PERSON_EXT:45,SYSTEM:46,SYSTEM_DB:47,SYSTEM_QUEUE:48,SYSTEM_EXT:49,SYSTEM_EXT_DB:50,SYSTEM_EXT_QUEUE:51,CONTAINER:52,CONTAINER_DB:53,CONTAINER_QUEUE:54,CONTAINER_EXT:55,CONTAINER_EXT_DB:56,CONTAINER_EXT_QUEUE:57,COMPONENT:58,COMPONENT_DB:59,COMPONENT_QUEUE:60,COMPONENT_EXT:61,COMPONENT_EXT_DB:62,COMPONENT_EXT_QUEUE:63,REL:64,BIREL:65,REL_U:66,REL_D:67,REL_L:68,REL_R:69,REL_B:70,REL_INDEX:71,UPDATE_EL_STYLE:72,UPDATE_REL_STYLE:73,UPDATE_LAYOUT_CONFIG:74,attribute:75,STR:76,STR_KEY:77,STR_VALUE:78,ATTRIBUTE:79,ATTRIBUTE_EMPTY:80,$accept:0,$end:1},terminals_:{2:"error",6:"direction_tb",7:"direction_bt",8:"direction_rl",9:"direction_lr",11:"C4_CONTEXT",12:"NEWLINE",14:"EOF",15:"C4_CONTAINER",16:"C4_COMPONENT",17:"C4_DYNAMIC",18:"C4_DEPLOYMENT",22:"title",23:"accDescription",24:"acc_title",25:"acc_title_value",26:"acc_descr",27:"acc_descr_value",28:"acc_descr_multiline_value",33:"LBRACE",34:"ENTERPRISE_BOUNDARY",36:"SYSTEM_BOUNDARY",37:"BOUNDARY",38:"CONTAINER_BOUNDARY",39:"NODE",40:"NODE_L",41:"NODE_R",42:"RBRACE",44:"PERSON",45:"PERSON_EXT",46:"SYSTEM",47:"SYSTEM_DB",48:"SYSTEM_QUEUE",49:"SYSTEM_EXT",50:"SYSTEM_EXT_DB",51:"SYSTEM_EXT_QUEUE",52:"CONTAINER",53:"CONTAINER_DB",54:"CONTAINER_QUEUE",55:"CONTAINER_EXT",56:"CONTAINER_EXT_DB",57:"CONTAINER_EXT_QUEUE",58:"COMPONENT",59:"COMPONENT_DB",60:"COMPONENT_QUEUE",61:"COMPONENT_EXT",62:"COMPONENT_EXT_DB",63:"COMPONENT_EXT_QUEUE",64:"REL",65:"BIREL",66:"REL_U",67:"REL_D",68:"REL_L",69:"REL_R",70:"REL_B",71:"REL_INDEX",72:"UPDATE_EL_STYLE",73:"UPDATE_REL_STYLE",74:"UPDATE_LAYOUT_CONFIG",76:"STR",77:"STR_KEY",78:"STR_VALUE",79:"ATTRIBUTE",80:"ATTRIBUTE_EMPTY"},productions_:[0,[3,1],[3,1],[5,1],[5,1],[5,1],[5,1],[4,1],[10,4],[10,4],[10,4],[10,4],[10,4],[13,1],[13,1],[13,2],[19,1],[19,2],[19,3],[21,1],[21,1],[21,2],[21,2],[21,1],[29,3],[30,3],[30,3],[30,4],[32,2],[32,2],[32,2],[32,2],[32,2],[32,2],[32,2],[31,1],[20,1],[20,2],[20,3],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,1],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[35,1],[35,2],[75,1],[75,2],[75,1],[75,1]],performAction:(0,Pt.K2)(function(at,Ct,M,Jt,Ve,gt,Lt){var Kt=gt.length-1;switch(Ve){case 3:Jt.setDirection("TB");break;case 4:Jt.setDirection("BT");break;case 5:Jt.setDirection("RL");break;case 6:Jt.setDirection("LR");break;case 8:case 9:case 10:case 11:case 12:Jt.setC4Type(gt[Kt-3]);break;case 19:Jt.setTitle(gt[Kt].substring(6)),this.$=gt[Kt].substring(6);break;case 20:Jt.setAccDescription(gt[Kt].substring(15)),this.$=gt[Kt].substring(15);break;case 21:this.$=gt[Kt].trim(),Jt.setTitle(this.$);break;case 22:case 23:this.$=gt[Kt].trim(),Jt.setAccDescription(this.$);break;case 28:gt[Kt].splice(2,0,"ENTERPRISE"),Jt.addPersonOrSystemBoundary(...gt[Kt]),this.$=gt[Kt];break;case 29:gt[Kt].splice(2,0,"SYSTEM"),Jt.addPersonOrSystemBoundary(...gt[Kt]),this.$=gt[Kt];break;case 30:Jt.addPersonOrSystemBoundary(...gt[Kt]),this.$=gt[Kt];break;case 31:gt[Kt].splice(2,0,"CONTAINER"),Jt.addContainerBoundary(...gt[Kt]),this.$=gt[Kt];break;case 32:Jt.addDeploymentNode("node",...gt[Kt]),this.$=gt[Kt];break;case 33:Jt.addDeploymentNode("nodeL",...gt[Kt]),this.$=gt[Kt];break;case 34:Jt.addDeploymentNode("nodeR",...gt[Kt]),this.$=gt[Kt];break;case 35:Jt.popBoundaryParseStack();break;case 39:Jt.addPersonOrSystem("person",...gt[Kt]),this.$=gt[Kt];break;case 40:Jt.addPersonOrSystem("external_person",...gt[Kt]),this.$=gt[Kt];break;case 41:Jt.addPersonOrSystem("system",...gt[Kt]),this.$=gt[Kt];break;case 42:Jt.addPersonOrSystem("system_db",...gt[Kt]),this.$=gt[Kt];break;case 43:Jt.addPersonOrSystem("system_queue",...gt[Kt]),this.$=gt[Kt];break;case 44:Jt.addPersonOrSystem("external_system",...gt[Kt]),this.$=gt[Kt];break;case 45:Jt.addPersonOrSystem("external_system_db",...gt[Kt]),this.$=gt[Kt];break;case 46:Jt.addPersonOrSystem("external_system_queue",...gt[Kt]),this.$=gt[Kt];break;case 47:Jt.addContainer("container",...gt[Kt]),this.$=gt[Kt];break;case 48:Jt.addContainer("container_db",...gt[Kt]),this.$=gt[Kt];break;case 49:Jt.addContainer("container_queue",...gt[Kt]),this.$=gt[Kt];break;case 50:Jt.addContainer("external_container",...gt[Kt]),this.$=gt[Kt];break;case 51:Jt.addContainer("external_container_db",...gt[Kt]),this.$=gt[Kt];break;case 52:Jt.addContainer("external_container_queue",...gt[Kt]),this.$=gt[Kt];break;case 53:Jt.addComponent("component",...gt[Kt]),this.$=gt[Kt];break;case 54:Jt.addComponent("component_db",...gt[Kt]),this.$=gt[Kt];break;case 55:Jt.addComponent("component_queue",...gt[Kt]),this.$=gt[Kt];break;case 56:Jt.addComponent("external_component",...gt[Kt]),this.$=gt[Kt];break;case 57:Jt.addComponent("external_component_db",...gt[Kt]),this.$=gt[Kt];break;case 58:Jt.addComponent("external_component_queue",...gt[Kt]),this.$=gt[Kt];break;case 60:Jt.addRel("rel",...gt[Kt]),this.$=gt[Kt];break;case 61:Jt.addRel("birel",...gt[Kt]),this.$=gt[Kt];break;case 62:Jt.addRel("rel_u",...gt[Kt]),this.$=gt[Kt];break;case 63:Jt.addRel("rel_d",...gt[Kt]),this.$=gt[Kt];break;case 64:Jt.addRel("rel_l",...gt[Kt]),this.$=gt[Kt];break;case 65:Jt.addRel("rel_r",...gt[Kt]),this.$=gt[Kt];break;case 66:Jt.addRel("rel_b",...gt[Kt]),this.$=gt[Kt];break;case 67:gt[Kt].splice(0,1),Jt.addRel("rel",...gt[Kt]),this.$=gt[Kt];break;case 68:Jt.updateElStyle("update_el_style",...gt[Kt]),this.$=gt[Kt];break;case 69:Jt.updateRelStyle("update_rel_style",...gt[Kt]),this.$=gt[Kt];break;case 70:Jt.updateLayoutConfig("update_layout_config",...gt[Kt]),this.$=gt[Kt];break;case 71:this.$=[gt[Kt]];break;case 72:gt[Kt].unshift(gt[Kt-1]),this.$=gt[Kt];break;case 73:case 75:this.$=gt[Kt].trim();break;case 74:let Je={};Je[gt[Kt-1].trim()]=gt[Kt].trim(),this.$=Je;break;case 76:this.$=""}},"anonymous"),table:[{3:1,4:2,5:3,6:[1,5],7:[1,6],8:[1,7],9:[1,8],10:4,11:[1,9],15:[1,10],16:[1,11],17:[1,12],18:[1,13]},{1:[3]},{1:[2,1]},{1:[2,2]},{1:[2,7]},{1:[2,3]},{1:[2,4]},{1:[2,5]},{1:[2,6]},{12:[1,14]},{12:[1,15]},{12:[1,16]},{12:[1,17]},{12:[1,18]},{13:19,19:20,20:21,21:22,22:b,23:C,24:P,26:Q,28:xt,29:49,30:61,32:62,34:Vt,36:jt,37:Ut,38:Wt,39:xe,40:Xe,41:We,43:23,44:gr,45:hr,46:_r,47:$e,48:He,49:Ar,50:kr,51:zr,52:Er,53:Jr,54:Br,55:ha,56:ia,57:jr,58:Qr,59:lr,60:dr,61:W,62:Yt,63:Ye,64:Ne,65:Tr,66:yr,67:da,68:Pa,69:Ia,70:Wa,71:Ma,72:ba,73:sa,74:Sa},{13:70,19:20,20:21,21:22,22:b,23:C,24:P,26:Q,28:xt,29:49,30:61,32:62,34:Vt,36:jt,37:Ut,38:Wt,39:xe,40:Xe,41:We,43:23,44:gr,45:hr,46:_r,47:$e,48:He,49:Ar,50:kr,51:zr,52:Er,53:Jr,54:Br,55:ha,56:ia,57:jr,58:Qr,59:lr,60:dr,61:W,62:Yt,63:Ye,64:Ne,65:Tr,66:yr,67:da,68:Pa,69:Ia,70:Wa,71:Ma,72:ba,73:sa,74:Sa},{13:71,19:20,20:21,21:22,22:b,23:C,24:P,26:Q,28:xt,29:49,30:61,32:62,34:Vt,36:jt,37:Ut,38:Wt,39:xe,40:Xe,41:We,43:23,44:gr,45:hr,46:_r,47:$e,48:He,49:Ar,50:kr,51:zr,52:Er,53:Jr,54:Br,55:ha,56:ia,57:jr,58:Qr,59:lr,60:dr,61:W,62:Yt,63:Ye,64:Ne,65:Tr,66:yr,67:da,68:Pa,69:Ia,70:Wa,71:Ma,72:ba,73:sa,74:Sa},{13:72,19:20,20:21,21:22,22:b,23:C,24:P,26:Q,28:xt,29:49,30:61,32:62,34:Vt,36:jt,37:Ut,38:Wt,39:xe,40:Xe,41:We,43:23,44:gr,45:hr,46:_r,47:$e,48:He,49:Ar,50:kr,51:zr,52:Er,53:Jr,54:Br,55:ha,56:ia,57:jr,58:Qr,59:lr,60:dr,61:W,62:Yt,63:Ye,64:Ne,65:Tr,66:yr,67:da,68:Pa,69:Ia,70:Wa,71:Ma,72:ba,73:sa,74:Sa},{13:73,19:20,20:21,21:22,22:b,23:C,24:P,26:Q,28:xt,29:49,30:61,32:62,34:Vt,36:jt,37:Ut,38:Wt,39:xe,40:Xe,41:We,43:23,44:gr,45:hr,46:_r,47:$e,48:He,49:Ar,50:kr,51:zr,52:Er,53:Jr,54:Br,55:ha,56:ia,57:jr,58:Qr,59:lr,60:dr,61:W,62:Yt,63:Ye,64:Ne,65:Tr,66:yr,67:da,68:Pa,69:Ia,70:Wa,71:Ma,72:ba,73:sa,74:Sa},{14:[1,74]},v(ea,[2,13],{43:23,29:49,30:61,32:62,20:75,34:Vt,36:jt,37:Ut,38:Wt,39:xe,40:Xe,41:We,44:gr,45:hr,46:_r,47:$e,48:He,49:Ar,50:kr,51:zr,52:Er,53:Jr,54:Br,55:ha,56:ia,57:jr,58:Qr,59:lr,60:dr,61:W,62:Yt,63:Ye,64:Ne,65:Tr,66:yr,67:da,68:Pa,69:Ia,70:Wa,71:Ma,72:ba,73:sa,74:Sa}),v(ea,[2,14]),v(Va,[2,16],{12:[1,76]}),v(ea,[2,36],{12:[1,77]}),v(pr,[2,19]),v(pr,[2,20]),{25:[1,78]},{27:[1,79]},v(pr,[2,23]),{35:80,75:81,76:Ua,77:nr,79:Oa,80:Ka},{35:86,75:81,76:Ua,77:nr,79:Oa,80:Ka},{35:87,75:81,76:Ua,77:nr,79:Oa,80:Ka},{35:88,75:81,76:Ua,77:nr,79:Oa,80:Ka},{35:89,75:81,76:Ua,77:nr,79:Oa,80:Ka},{35:90,75:81,76:Ua,77:nr,79:Oa,80:Ka},{35:91,75:81,76:Ua,77:nr,79:Oa,80:Ka},{35:92,75:81,76:Ua,77:nr,79:Oa,80:Ka},{35:93,75:81,76:Ua,77:nr,79:Oa,80:Ka},{35:94,75:81,76:Ua,77:nr,79:Oa,80:Ka},{35:95,75:81,76:Ua,77:nr,79:Oa,80:Ka},{35:96,75:81,76:Ua,77:nr,79:Oa,80:Ka},{35:97,75:81,76:Ua,77:nr,79:Oa,80:Ka},{35:98,75:81,76:Ua,77:nr,79:Oa,80:Ka},{35:99,75:81,76:Ua,77:nr,79:Oa,80:Ka},{35:100,75:81,76:Ua,77:nr,79:Oa,80:Ka},{35:101,75:81,76:Ua,77:nr,79:Oa,80:Ka},{35:102,75:81,76:Ua,77:nr,79:Oa,80:Ka},{35:103,75:81,76:Ua,77:nr,79:Oa,80:Ka},{35:104,75:81,76:Ua,77:nr,79:Oa,80:Ka},v(ti,[2,59]),{35:105,75:81,76:Ua,77:nr,79:Oa,80:Ka},{35:106,75:81,76:Ua,77:nr,79:Oa,80:Ka},{35:107,75:81,76:Ua,77:nr,79:Oa,80:Ka},{35:108,75:81,76:Ua,77:nr,79:Oa,80:Ka},{35:109,75:81,76:Ua,77:nr,79:Oa,80:Ka},{35:110,75:81,76:Ua,77:nr,79:Oa,80:Ka},{35:111,75:81,76:Ua,77:nr,79:Oa,80:Ka},{35:112,75:81,76:Ua,77:nr,79:Oa,80:Ka},{35:113,75:81,76:Ua,77:nr,79:Oa,80:Ka},{35:114,75:81,76:Ua,77:nr,79:Oa,80:Ka},{35:115,75:81,76:Ua,77:nr,79:Oa,80:Ka},{20:116,29:49,30:61,32:62,34:Vt,36:jt,37:Ut,38:Wt,39:xe,40:Xe,41:We,43:23,44:gr,45:hr,46:_r,47:$e,48:He,49:Ar,50:kr,51:zr,52:Er,53:Jr,54:Br,55:ha,56:ia,57:jr,58:Qr,59:lr,60:dr,61:W,62:Yt,63:Ye,64:Ne,65:Tr,66:yr,67:da,68:Pa,69:Ia,70:Wa,71:Ma,72:ba,73:sa,74:Sa},{12:[1,118],33:[1,117]},{35:119,75:81,76:Ua,77:nr,79:Oa,80:Ka},{35:120,75:81,76:Ua,77:nr,79:Oa,80:Ka},{35:121,75:81,76:Ua,77:nr,79:Oa,80:Ka},{35:122,75:81,76:Ua,77:nr,79:Oa,80:Ka},{35:123,75:81,76:Ua,77:nr,79:Oa,80:Ka},{35:124,75:81,76:Ua,77:nr,79:Oa,80:Ka},{35:125,75:81,76:Ua,77:nr,79:Oa,80:Ka},{14:[1,126]},{14:[1,127]},{14:[1,128]},{14:[1,129]},{1:[2,8]},v(ea,[2,15]),v(Va,[2,17],{21:22,19:130,22:b,23:C,24:P,26:Q,28:xt}),v(ea,[2,37],{19:20,20:21,21:22,43:23,29:49,30:61,32:62,13:131,22:b,23:C,24:P,26:Q,28:xt,34:Vt,36:jt,37:Ut,38:Wt,39:xe,40:Xe,41:We,44:gr,45:hr,46:_r,47:$e,48:He,49:Ar,50:kr,51:zr,52:Er,53:Jr,54:Br,55:ha,56:ia,57:jr,58:Qr,59:lr,60:dr,61:W,62:Yt,63:Ye,64:Ne,65:Tr,66:yr,67:da,68:Pa,69:Ia,70:Wa,71:Ma,72:ba,73:sa,74:Sa}),v(pr,[2,21]),v(pr,[2,22]),v(ti,[2,39]),v(_a,[2,71],{75:81,35:132,76:Ua,77:nr,79:Oa,80:Ka}),v(qa,[2,73]),{78:[1,133]},v(qa,[2,75]),v(qa,[2,76]),v(ti,[2,40]),v(ti,[2,41]),v(ti,[2,42]),v(ti,[2,43]),v(ti,[2,44]),v(ti,[2,45]),v(ti,[2,46]),v(ti,[2,47]),v(ti,[2,48]),v(ti,[2,49]),v(ti,[2,50]),v(ti,[2,51]),v(ti,[2,52]),v(ti,[2,53]),v(ti,[2,54]),v(ti,[2,55]),v(ti,[2,56]),v(ti,[2,57]),v(ti,[2,58]),v(ti,[2,60]),v(ti,[2,61]),v(ti,[2,62]),v(ti,[2,63]),v(ti,[2,64]),v(ti,[2,65]),v(ti,[2,66]),v(ti,[2,67]),v(ti,[2,68]),v(ti,[2,69]),v(ti,[2,70]),{31:134,42:[1,135]},{12:[1,136]},{33:[1,137]},v(Ha,[2,28]),v(Ha,[2,29]),v(Ha,[2,30]),v(Ha,[2,31]),v(Ha,[2,32]),v(Ha,[2,33]),v(Ha,[2,34]),{1:[2,9]},{1:[2,10]},{1:[2,11]},{1:[2,12]},v(Va,[2,18]),v(ea,[2,38]),v(_a,[2,72]),v(qa,[2,74]),v(ti,[2,24]),v(ti,[2,35]),v(oa,[2,25]),v(oa,[2,26],{12:[1,138]}),v(oa,[2,27])],defaultActions:{2:[2,1],3:[2,2],4:[2,7],5:[2,3],6:[2,4],7:[2,5],8:[2,6],74:[2,8],126:[2,9],127:[2,10],128:[2,11],129:[2,12]},parseError:(0,Pt.K2)(function(at,Ct){if(!Ct.recoverable){var M=new Error(at);throw M.hash=Ct,M}this.trace(at)},"parseError"),parse:(0,Pt.K2)(function(at){var Ct=this,M=[0],Jt=[],Ve=[null],gt=[],Lt=this.table,Kt="",Je=0,Xr=0,Gr=0,fa=gt.slice.call(arguments,1),wa=Object.create(this.lexer),ja={yy:{}};for(var $a in this.yy)Object.prototype.hasOwnProperty.call(this.yy,$a)&&(ja.yy[$a]=this.yy[$a]);wa.setInput(at,ja.yy),ja.yy.lexer=wa,ja.yy.parser=this,typeof wa.yylloc>"u"&&(wa.yylloc={});var yi=wa.yylloc;gt.push(yi);var Ei=wa.options&&wa.options.ranges;function Fa(){var Oi;return"number"!=typeof(Oi=Jt.pop()||wa.lex()||1)&&(Oi instanceof Array&&(Oi=(Jt=Oi).pop()),Oi=Ct.symbols_[Oi]||Oi),Oi}this.parseError="function"==typeof ja.yy.parseError?ja.yy.parseError:Object.getPrototypeOf(this).parseError,(0,Pt.K2)(function mi(Oi){M.length=M.length-2*Oi,Ve.length=Ve.length-Oi,gt.length=gt.length-Oi},"popStack"),(0,Pt.K2)(Fa,"lex");for(var Pr,ya,Ya,ni,Pi,ki,Bi,ln,ua={};;){if(this.defaultActions[Ya=M[M.length-1]]?ni=this.defaultActions[Ya]:((null===Pr||typeof Pr>"u")&&(Pr=Fa()),ni=Lt[Ya]&&Lt[Ya][Pr]),typeof ni>"u"||!ni.length||!ni[0]){var Ji;for(ki in ln=[],Lt[Ya])this.terminals_[ki]&&ki>2&&ln.push("'"+this.terminals_[ki]+"'");Ji=wa.showPosition?"Parse error on line "+(Je+1)+":\n"+wa.showPosition()+"\nExpecting "+ln.join(", ")+", got '"+(this.terminals_[Pr]||Pr)+"'":"Parse error on line "+(Je+1)+": Unexpected "+(1==Pr?"end of input":"'"+(this.terminals_[Pr]||Pr)+"'"),this.parseError(Ji,{text:wa.match,token:this.terminals_[Pr]||Pr,line:wa.yylineno,loc:yi,expected:ln})}if(ni[0]instanceof Array&&ni.length>1)throw new Error("Parse Error: multiple actions possible at state: "+Ya+", token: "+Pr);switch(ni[0]){case 1:M.push(Pr),Ve.push(wa.yytext),gt.push(wa.yylloc),M.push(ni[1]),Pr=null,ya?(Pr=ya,ya=null):(Xr=wa.yyleng,Kt=wa.yytext,Je=wa.yylineno,yi=wa.yylloc,Gr>0&&Gr--);break;case 2:if(ua.$=Ve[Ve.length-(Bi=this.productions_[ni[1]][1])],ua._$={first_line:gt[gt.length-(Bi||1)].first_line,last_line:gt[gt.length-1].last_line,first_column:gt[gt.length-(Bi||1)].first_column,last_column:gt[gt.length-1].last_column},Ei&&(ua._$.range=[gt[gt.length-(Bi||1)].range[0],gt[gt.length-1].range[1]]),typeof(Pi=this.performAction.apply(ua,[Kt,Xr,Je,ja.yy,ni[1],Ve,gt].concat(fa)))<"u")return Pi;Bi&&(M=M.slice(0,-1*Bi*2),Ve=Ve.slice(0,-1*Bi),gt=gt.slice(0,-1*Bi)),M.push(this.productions_[ni[1]][0]),Ve.push(ua.$),gt.push(ua._$),M.push(Lt[M[M.length-2]][M[M.length-1]]);break;case 3:return!0}}return!0},"parse")};function Ri(){this.yy={}}return hi.lexer=function(){return{EOF:1,parseError:(0,Pt.K2)(function(Ct,M){if(!this.yy.parser)throw new Error(Ct);this.yy.parser.parseError(Ct,M)},"parseError"),setInput:(0,Pt.K2)(function(at,Ct){return this.yy=Ct||this.yy||{},this._input=at,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},"setInput"),input:(0,Pt.K2)(function(){var at=this._input[0];return this.yytext+=at,this.yyleng++,this.offset++,this.match+=at,this.matched+=at,at.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),at},"input"),unput:(0,Pt.K2)(function(at){var Ct=at.length,M=at.split(/(?:\r\n?|\n)/g);this._input=at+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-Ct),this.offset-=Ct;var Jt=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),M.length-1&&(this.yylineno-=M.length-1);var Ve=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:M?(M.length===Jt.length?this.yylloc.first_column:0)+Jt[Jt.length-M.length].length-M[0].length:this.yylloc.first_column-Ct},this.options.ranges&&(this.yylloc.range=[Ve[0],Ve[0]+this.yyleng-Ct]),this.yyleng=this.yytext.length,this},"unput"),more:(0,Pt.K2)(function(){return this._more=!0,this},"more"),reject:(0,Pt.K2)(function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},"reject"),less:(0,Pt.K2)(function(at){this.unput(this.match.slice(at))},"less"),pastInput:(0,Pt.K2)(function(){var at=this.matched.substr(0,this.matched.length-this.match.length);return(at.length>20?"...":"")+at.substr(-20).replace(/\n/g,"")},"pastInput"),upcomingInput:(0,Pt.K2)(function(){var at=this.match;return at.length<20&&(at+=this._input.substr(0,20-at.length)),(at.substr(0,20)+(at.length>20?"...":"")).replace(/\n/g,"")},"upcomingInput"),showPosition:(0,Pt.K2)(function(){var at=this.pastInput(),Ct=new Array(at.length+1).join("-");return at+this.upcomingInput()+"\n"+Ct+"^"},"showPosition"),test_match:(0,Pt.K2)(function(at,Ct){var M,Jt,Ve;if(this.options.backtrack_lexer&&(Ve={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(Ve.yylloc.range=this.yylloc.range.slice(0))),(Jt=at[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=Jt.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:Jt?Jt[Jt.length-1].length-Jt[Jt.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+at[0].length},this.yytext+=at[0],this.match+=at[0],this.matches=at,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(at[0].length),this.matched+=at[0],M=this.performAction.call(this,this.yy,this,Ct,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),M)return M;if(this._backtrack){for(var gt in Ve)this[gt]=Ve[gt];return!1}return!1},"test_match"),next:(0,Pt.K2)(function(){if(this.done)return this.EOF;var at,Ct,M,Jt;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var Ve=this._currentRules(),gt=0;gt<Ve.length;gt++)if((M=this._input.match(this.rules[Ve[gt]]))&&(!Ct||M[0].length>Ct[0].length)){if(Ct=M,Jt=gt,this.options.backtrack_lexer){if(!1!==(at=this.test_match(M,Ve[gt])))return at;if(this._backtrack){Ct=!1;continue}return!1}if(!this.options.flex)break}return Ct?!1!==(at=this.test_match(Ct,Ve[Jt]))&&at:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},"next"),lex:(0,Pt.K2)(function(){return this.next()||this.lex()},"lex"),begin:(0,Pt.K2)(function(Ct){this.conditionStack.push(Ct)},"begin"),popState:(0,Pt.K2)(function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},"popState"),_currentRules:(0,Pt.K2)(function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},"_currentRules"),topState:(0,Pt.K2)(function(Ct){return(Ct=this.conditionStack.length-1-Math.abs(Ct||0))>=0?this.conditionStack[Ct]:"INITIAL"},"topState"),pushState:(0,Pt.K2)(function(Ct){this.begin(Ct)},"pushState"),stateStackSize:(0,Pt.K2)(function(){return this.conditionStack.length},"stateStackSize"),options:{},performAction:(0,Pt.K2)(function(Ct,M,Jt,Ve){switch(Jt){case 0:return 6;case 1:return 7;case 2:return 8;case 3:return 9;case 4:return 22;case 5:return 23;case 6:return this.begin("acc_title"),24;case 7:return this.popState(),"acc_title_value";case 8:return this.begin("acc_descr"),26;case 9:return this.popState(),"acc_descr_value";case 10:this.begin("acc_descr_multiline");break;case 11:case 73:this.popState();break;case 12:return"acc_descr_multiline_value";case 13:case 16:case 70:break;case 14:c;break;case 15:return 12;case 17:return 11;case 18:return 15;case 19:return 16;case 20:return 17;case 21:return 18;case 22:return this.begin("person_ext"),45;case 23:return this.begin("person"),44;case 24:return this.begin("system_ext_queue"),51;case 25:return this.begin("system_ext_db"),50;case 26:return this.begin("system_ext"),49;case 27:return this.begin("system_queue"),48;case 28:return this.begin("system_db"),47;case 29:return this.begin("system"),46;case 30:return this.begin("boundary"),37;case 31:return this.begin("enterprise_boundary"),34;case 32:return this.begin("system_boundary"),36;case 33:return this.begin("container_ext_queue"),57;case 34:return this.begin("container_ext_db"),56;case 35:return this.begin("container_ext"),55;case 36:return this.begin("container_queue"),54;case 37:return this.begin("container_db"),53;case 38:return this.begin("container"),52;case 39:return this.begin("container_boundary"),38;case 40:return this.begin("component_ext_queue"),63;case 41:return this.begin("component_ext_db"),62;case 42:return this.begin("component_ext"),61;case 43:return this.begin("component_queue"),60;case 44:return this.begin("component_db"),59;case 45:return this.begin("component"),58;case 46:case 47:return this.begin("node"),39;case 48:return this.begin("node_l"),40;case 49:return this.begin("node_r"),41;case 50:return this.begin("rel"),64;case 51:return this.begin("birel"),65;case 52:case 53:return this.begin("rel_u"),66;case 54:case 55:return this.begin("rel_d"),67;case 56:case 57:return this.begin("rel_l"),68;case 58:case 59:return this.begin("rel_r"),69;case 60:return this.begin("rel_b"),70;case 61:return this.begin("rel_index"),71;case 62:return this.begin("update_el_style"),72;case 63:return this.begin("update_rel_style"),73;case 64:return this.begin("update_layout_config"),74;case 65:return"EOF_IN_STRUCT";case 66:return this.begin("attribute"),"ATTRIBUTE_EMPTY";case 67:this.begin("attribute");break;case 68:case 79:this.popState(),this.popState();break;case 69:case 71:return 80;case 72:this.begin("string");break;case 74:case 80:return"STR";case 75:this.begin("string_kv");break;case 76:return this.begin("string_kv_key"),"STR_KEY";case 77:this.popState(),this.begin("string_kv_value");break;case 78:return"STR_VALUE";case 81:return"LBRACE";case 82:return"RBRACE";case 83:return"SPACE";case 84:return"EOL";case 85:return 14}},"anonymous"),rules:[/^(?:.*direction\s+TB[^\n]*)/,/^(?:.*direction\s+BT[^\n]*)/,/^(?:.*direction\s+RL[^\n]*)/,/^(?:.*direction\s+LR[^\n]*)/,/^(?:title\s[^#\n;]+)/,/^(?:accDescription\s[^#\n;]+)/,/^(?:accTitle\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*\{\s*)/,/^(?:[\}])/,/^(?:[^\}]*)/,/^(?:%%(?!\{)*[^\n]*(\r?\n?)+)/,/^(?:%%[^\n]*(\r?\n)*)/,/^(?:\s*(\r?\n)+)/,/^(?:\s+)/,/^(?:C4Context\b)/,/^(?:C4Container\b)/,/^(?:C4Component\b)/,/^(?:C4Dynamic\b)/,/^(?:C4Deployment\b)/,/^(?:Person_Ext\b)/,/^(?:Person\b)/,/^(?:SystemQueue_Ext\b)/,/^(?:SystemDb_Ext\b)/,/^(?:System_Ext\b)/,/^(?:SystemQueue\b)/,/^(?:SystemDb\b)/,/^(?:System\b)/,/^(?:Boundary\b)/,/^(?:Enterprise_Boundary\b)/,/^(?:System_Boundary\b)/,/^(?:ContainerQueue_Ext\b)/,/^(?:ContainerDb_Ext\b)/,/^(?:Container_Ext\b)/,/^(?:ContainerQueue\b)/,/^(?:ContainerDb\b)/,/^(?:Container\b)/,/^(?:Container_Boundary\b)/,/^(?:ComponentQueue_Ext\b)/,/^(?:ComponentDb_Ext\b)/,/^(?:Component_Ext\b)/,/^(?:ComponentQueue\b)/,/^(?:ComponentDb\b)/,/^(?:Component\b)/,/^(?:Deployment_Node\b)/,/^(?:Node\b)/,/^(?:Node_L\b)/,/^(?:Node_R\b)/,/^(?:Rel\b)/,/^(?:BiRel\b)/,/^(?:Rel_Up\b)/,/^(?:Rel_U\b)/,/^(?:Rel_Down\b)/,/^(?:Rel_D\b)/,/^(?:Rel_Left\b)/,/^(?:Rel_L\b)/,/^(?:Rel_Right\b)/,/^(?:Rel_R\b)/,/^(?:Rel_Back\b)/,/^(?:RelIndex\b)/,/^(?:UpdateElementStyle\b)/,/^(?:UpdateRelStyle\b)/,/^(?:UpdateLayoutConfig\b)/,/^(?:$)/,/^(?:[(][ ]*[,])/,/^(?:[(])/,/^(?:[)])/,/^(?:,,)/,/^(?:,)/,/^(?:[ ]*["]["])/,/^(?:[ ]*["])/,/^(?:["])/,/^(?:[^"]*)/,/^(?:[ ]*[\$])/,/^(?:[^=]*)/,/^(?:[=][ ]*["])/,/^(?:[^"]+)/,/^(?:["])/,/^(?:[^,]+)/,/^(?:\{)/,/^(?:\})/,/^(?:[\s]+)/,/^(?:[\n\r]+)/,/^(?:$)/],conditions:{acc_descr_multiline:{rules:[11,12],inclusive:!1},acc_descr:{rules:[9],inclusive:!1},acc_title:{rules:[7],inclusive:!1},string_kv_value:{rules:[78,79],inclusive:!1},string_kv_key:{rules:[77],inclusive:!1},string_kv:{rules:[76],inclusive:!1},string:{rules:[73,74],inclusive:!1},attribute:{rules:[68,69,70,71,72,75,80],inclusive:!1},update_layout_config:{rules:[65,66,67,68],inclusive:!1},update_rel_style:{rules:[65,66,67,68],inclusive:!1},update_el_style:{rules:[65,66,67,68],inclusive:!1},rel_b:{rules:[65,66,67,68],inclusive:!1},rel_r:{rules:[65,66,67,68],inclusive:!1},rel_l:{rules:[65,66,67,68],inclusive:!1},rel_d:{rules:[65,66,67,68],inclusive:!1},rel_u:{rules:[65,66,67,68],inclusive:!1},rel_bi:{rules:[],inclusive:!1},rel:{rules:[65,66,67,68],inclusive:!1},node_r:{rules:[65,66,67,68],inclusive:!1},node_l:{rules:[65,66,67,68],inclusive:!1},node:{rules:[65,66,67,68],inclusive:!1},index:{rules:[],inclusive:!1},rel_index:{rules:[65,66,67,68],inclusive:!1},component_ext_queue:{rules:[],inclusive:!1},component_ext_db:{rules:[65,66,67,68],inclusive:!1},component_ext:{rules:[65,66,67,68],inclusive:!1},component_queue:{rules:[65,66,67,68],inclusive:!1},component_db:{rules:[65,66,67,68],inclusive:!1},component:{rules:[65,66,67,68],inclusive:!1},container_boundary:{rules:[65,66,67,68],inclusive:!1},container_ext_queue:{rules:[65,66,67,68],inclusive:!1},container_ext_db:{rules:[65,66,67,68],inclusive:!1},container_ext:{rules:[65,66,67,68],inclusive:!1},container_queue:{rules:[65,66,67,68],inclusive:!1},container_db:{rules:[65,66,67,68],inclusive:!1},container:{rules:[65,66,67,68],inclusive:!1},birel:{rules:[65,66,67,68],inclusive:!1},system_boundary:{rules:[65,66,67,68],inclusive:!1},enterprise_boundary:{rules:[65,66,67,68],inclusive:!1},boundary:{rules:[65,66,67,68],inclusive:!1},system_ext_queue:{rules:[65,66,67,68],inclusive:!1},system_ext_db:{rules:[65,66,67,68],inclusive:!1},system_ext:{rules:[65,66,67,68],inclusive:!1},system_queue:{rules:[65,66,67,68],inclusive:!1},system_db:{rules:[65,66,67,68],inclusive:!1},system:{rules:[65,66,67,68],inclusive:!1},person_ext:{rules:[65,66,67,68],inclusive:!1},person:{rules:[65,66,67,68],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,5,6,8,10,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,81,82,83,84,85],inclusive:!0}}}}(),(0,Pt.K2)(Ri,"Parser"),Ri.prototype=hi,hi.Parser=Ri,new Ri}();wt.parser=wt;var Nr,Ge=wt,dt=[],Rt=[""],q="global",ar="",Ke=[{alias:"global",label:{text:"global"},type:{text:"global"},tags:null,link:null,parentBoundary:""}],cr=[],Rr="",wr=!1,Vr=4,ra=2,Fr=(0,Pt.K2)(function(){return Nr},"getC4Type"),Se=(0,Pt.K2)(function(v){Nr=(0,S.jZ)(v,(0,S.D7)())},"setC4Type"),Or=(0,Pt.K2)(function(v,b,C,P,Q,xt,Vt,jt,Ut){if(null==v||null==b||null==C||null==P)return;let Wt={};const xe=cr.find(Xe=>Xe.from===b&&Xe.to===C);if(xe?Wt=xe:cr.push(Wt),Wt.type=v,Wt.from=b,Wt.to=C,Wt.label={text:P},null==Q)Wt.techn={text:""};else if("object"==typeof Q){let[Xe,We]=Object.entries(Q)[0];Wt[Xe]={text:We}}else Wt.techn={text:Q};if(null==xt)Wt.descr={text:""};else if("object"==typeof xt){let[Xe,We]=Object.entries(xt)[0];Wt[Xe]={text:We}}else Wt.descr={text:xt};if("object"==typeof Vt){let[Xe,We]=Object.entries(Vt)[0];Wt[Xe]=We}else Wt.sprite=Vt;if("object"==typeof jt){let[Xe,We]=Object.entries(jt)[0];Wt[Xe]=We}else Wt.tags=jt;if("object"==typeof Ut){let[Xe,We]=Object.entries(Ut)[0];Wt[Xe]=We}else Wt.link=Ut;Wt.wrap=ze()},"addRel"),je=(0,Pt.K2)(function(v,b,C,P,Q,xt,Vt){if(null===b||null===C)return;let jt={};const Ut=dt.find(Wt=>Wt.alias===b);if(Ut&&b===Ut.alias?jt=Ut:(jt.alias=b,dt.push(jt)),jt.label=null==C?{text:""}:{text:C},null==P)jt.descr={text:""};else if("object"==typeof P){let[Wt,xe]=Object.entries(P)[0];jt[Wt]={text:xe}}else jt.descr={text:P};if("object"==typeof Q){let[Wt,xe]=Object.entries(Q)[0];jt[Wt]=xe}else jt.sprite=Q;if("object"==typeof xt){let[Wt,xe]=Object.entries(xt)[0];jt[Wt]=xe}else jt.tags=xt;if("object"==typeof Vt){let[Wt,xe]=Object.entries(Vt)[0];jt[Wt]=xe}else jt.link=Vt;jt.typeC4Shape={text:v},jt.parentBoundary=q,jt.wrap=ze()},"addPersonOrSystem"),z=(0,Pt.K2)(function(v,b,C,P,Q,xt,Vt,jt){if(null===b||null===C)return;let Ut={};const Wt=dt.find(xe=>xe.alias===b);if(Wt&&b===Wt.alias?Ut=Wt:(Ut.alias=b,dt.push(Ut)),Ut.label=null==C?{text:""}:{text:C},null==P)Ut.techn={text:""};else if("object"==typeof P){let[xe,Xe]=Object.entries(P)[0];Ut[xe]={text:Xe}}else Ut.techn={text:P};if(null==Q)Ut.descr={text:""};else if("object"==typeof Q){let[xe,Xe]=Object.entries(Q)[0];Ut[xe]={text:Xe}}else Ut.descr={text:Q};if("object"==typeof xt){let[xe,Xe]=Object.entries(xt)[0];Ut[xe]=Xe}else Ut.sprite=xt;if("object"==typeof Vt){let[xe,Xe]=Object.entries(Vt)[0];Ut[xe]=Xe}else Ut.tags=Vt;if("object"==typeof jt){let[xe,Xe]=Object.entries(jt)[0];Ut[xe]=Xe}else Ut.link=jt;Ut.wrap=ze(),Ut.typeC4Shape={text:v},Ut.parentBoundary=q},"addContainer"),ft=(0,Pt.K2)(function(v,b,C,P,Q,xt,Vt,jt){if(null===b||null===C)return;let Ut={};const Wt=dt.find(xe=>xe.alias===b);if(Wt&&b===Wt.alias?Ut=Wt:(Ut.alias=b,dt.push(Ut)),Ut.label=null==C?{text:""}:{text:C},null==P)Ut.techn={text:""};else if("object"==typeof P){let[xe,Xe]=Object.entries(P)[0];Ut[xe]={text:Xe}}else Ut.techn={text:P};if(null==Q)Ut.descr={text:""};else if("object"==typeof Q){let[xe,Xe]=Object.entries(Q)[0];Ut[xe]={text:Xe}}else Ut.descr={text:Q};if("object"==typeof xt){let[xe,Xe]=Object.entries(xt)[0];Ut[xe]=Xe}else Ut.sprite=xt;if("object"==typeof Vt){let[xe,Xe]=Object.entries(Vt)[0];Ut[xe]=Xe}else Ut.tags=Vt;if("object"==typeof jt){let[xe,Xe]=Object.entries(jt)[0];Ut[xe]=Xe}else Ut.link=jt;Ut.wrap=ze(),Ut.typeC4Shape={text:v},Ut.parentBoundary=q},"addComponent"),Bt=(0,Pt.K2)(function(v,b,C,P,Q){if(null===v||null===b)return;let xt={};const Vt=Ke.find(jt=>jt.alias===v);if(Vt&&v===Vt.alias?xt=Vt:(xt.alias=v,Ke.push(xt)),xt.label=null==b?{text:""}:{text:b},null==C)xt.type={text:"system"};else if("object"==typeof C){let[jt,Ut]=Object.entries(C)[0];xt[jt]={text:Ut}}else xt.type={text:C};if("object"==typeof P){let[jt,Ut]=Object.entries(P)[0];xt[jt]=Ut}else xt.tags=P;if("object"==typeof Q){let[jt,Ut]=Object.entries(Q)[0];xt[jt]=Ut}else xt.link=Q;xt.parentBoundary=q,xt.wrap=ze(),ar=q,q=v,Rt.push(ar)},"addPersonOrSystemBoundary"),we=(0,Pt.K2)(function(v,b,C,P,Q){if(null===v||null===b)return;let xt={};const Vt=Ke.find(jt=>jt.alias===v);if(Vt&&v===Vt.alias?xt=Vt:(xt.alias=v,Ke.push(xt)),xt.label=null==b?{text:""}:{text:b},null==C)xt.type={text:"container"};else if("object"==typeof C){let[jt,Ut]=Object.entries(C)[0];xt[jt]={text:Ut}}else xt.type={text:C};if("object"==typeof P){let[jt,Ut]=Object.entries(P)[0];xt[jt]=Ut}else xt.tags=P;if("object"==typeof Q){let[jt,Ut]=Object.entries(Q)[0];xt[jt]=Ut}else xt.link=Q;xt.parentBoundary=q,xt.wrap=ze(),ar=q,q=v,Rt.push(ar)},"addContainerBoundary"),X=(0,Pt.K2)(function(v,b,C,P,Q,xt,Vt,jt){if(null===b||null===C)return;let Ut={};const Wt=Ke.find(xe=>xe.alias===b);if(Wt&&b===Wt.alias?Ut=Wt:(Ut.alias=b,Ke.push(Ut)),Ut.label=null==C?{text:""}:{text:C},null==P)Ut.type={text:"node"};else if("object"==typeof P){let[xe,Xe]=Object.entries(P)[0];Ut[xe]={text:Xe}}else Ut.type={text:P};if(null==Q)Ut.descr={text:""};else if("object"==typeof Q){let[xe,Xe]=Object.entries(Q)[0];Ut[xe]={text:Xe}}else Ut.descr={text:Q};if("object"==typeof Vt){let[xe,Xe]=Object.entries(Vt)[0];Ut[xe]=Xe}else Ut.tags=Vt;if("object"==typeof jt){let[xe,Xe]=Object.entries(jt)[0];Ut[xe]=Xe}else Ut.link=jt;Ut.nodeType=v,Ut.parentBoundary=q,Ut.wrap=ze(),ar=q,q=b,Rt.push(ar)},"addDeploymentNode"),ae=(0,Pt.K2)(function(){q=ar,Rt.pop(),ar=Rt.pop(),Rt.push(ar)},"popBoundaryParseStack"),w=(0,Pt.K2)(function(v,b,C,P,Q,xt,Vt,jt,Ut,Wt,xe){let Xe=dt.find(We=>We.alias===b);if(void 0!==Xe||(Xe=Ke.find(We=>We.alias===b),void 0!==Xe)){if(null!=C)if("object"==typeof C){let[We,gr]=Object.entries(C)[0];Xe[We]=gr}else Xe.bgColor=C;if(null!=P)if("object"==typeof P){let[We,gr]=Object.entries(P)[0];Xe[We]=gr}else Xe.fontColor=P;if(null!=Q)if("object"==typeof Q){let[We,gr]=Object.entries(Q)[0];Xe[We]=gr}else Xe.borderColor=Q;if(null!=xt)if("object"==typeof xt){let[We,gr]=Object.entries(xt)[0];Xe[We]=gr}else Xe.shadowing=xt;if(null!=Vt)if("object"==typeof Vt){let[We,gr]=Object.entries(Vt)[0];Xe[We]=gr}else Xe.shape=Vt;if(null!=jt)if("object"==typeof jt){let[We,gr]=Object.entries(jt)[0];Xe[We]=gr}else Xe.sprite=jt;if(null!=Ut)if("object"==typeof Ut){let[We,gr]=Object.entries(Ut)[0];Xe[We]=gr}else Xe.techn=Ut;if(null!=Wt)if("object"==typeof Wt){let[We,gr]=Object.entries(Wt)[0];Xe[We]=gr}else Xe.legendText=Wt;if(null!=xe)if("object"==typeof xe){let[We,gr]=Object.entries(xe)[0];Xe[We]=gr}else Xe.legendSprite=xe}},"updateElStyle"),re=(0,Pt.K2)(function(v,b,C,P,Q,xt,Vt){const jt=cr.find(Ut=>Ut.from===b&&Ut.to===C);if(void 0!==jt){if(null!=P)if("object"==typeof P){let[Ut,Wt]=Object.entries(P)[0];jt[Ut]=Wt}else jt.textColor=P;if(null!=Q)if("object"==typeof Q){let[Ut,Wt]=Object.entries(Q)[0];jt[Ut]=Wt}else jt.lineColor=Q;if(null!=xt)if("object"==typeof xt){let[Ut,Wt]=Object.entries(xt)[0];jt[Ut]=parseInt(Wt)}else jt.offsetX=parseInt(xt);if(null!=Vt)if("object"==typeof Vt){let[Ut,Wt]=Object.entries(Vt)[0];jt[Ut]=parseInt(Wt)}else jt.offsetY=parseInt(Vt)}},"updateRelStyle"),It=(0,Pt.K2)(function(v,b,C){let P=Vr,Q=ra;if("object"==typeof b){const xt=Object.values(b)[0];P=parseInt(xt)}else P=parseInt(b);if("object"==typeof C){const xt=Object.values(C)[0];Q=parseInt(xt)}else Q=parseInt(C);P>=1&&(Vr=P),Q>=1&&(ra=Q)},"updateLayoutConfig"),qt=(0,Pt.K2)(function(){return Vr},"getC4ShapeInRow"),V=(0,Pt.K2)(function(){return ra},"getC4BoundaryInRow"),pt=(0,Pt.K2)(function(){return q},"getCurrentBoundaryParse"),H=(0,Pt.K2)(function(){return ar},"getParentBoundaryParse"),Nt=(0,Pt.K2)(function(v){return null==v?dt:dt.filter(b=>b.parentBoundary===v)},"getC4ShapeArray"),St=(0,Pt.K2)(function(v){return dt.find(b=>b.alias===v)},"getC4Shape"),$t=(0,Pt.K2)(function(v){return Object.keys(Nt(v))},"getC4ShapeKeys"),ye=(0,Pt.K2)(function(v){return null==v?Ke:Ke.filter(b=>b.parentBoundary===v)},"getBoundaries"),le=ye,Pe=(0,Pt.K2)(function(){return cr},"getRels"),oe=(0,Pt.K2)(function(){return Rr},"getTitle"),qe=(0,Pt.K2)(function(v){wr=v},"setWrap"),ze=(0,Pt.K2)(function(){return wr},"autoWrap"),Et=(0,Pt.K2)(function(){dt=[],Ke=[{alias:"global",label:{text:"global"},type:{text:"global"},tags:null,link:null,parentBoundary:""}],ar="",q="global",Rt=[""],cr=[],Rt=[""],Rr="",wr=!1,Vr=4,ra=2},"clear"),et=(0,Pt.K2)(function(v){Rr=(0,S.jZ)(v,(0,S.D7)())},"setTitle"),mt={addPersonOrSystem:je,addPersonOrSystemBoundary:Bt,addContainer:z,addContainerBoundary:we,addComponent:ft,addDeploymentNode:X,popBoundaryParseStack:ae,addRel:Or,updateElStyle:w,updateRelStyle:re,updateLayoutConfig:It,autoWrap:ze,setWrap:qe,getC4ShapeArray:Nt,getC4Shape:St,getC4ShapeKeys:$t,getBoundaries:ye,getBoundarys:le,getCurrentBoundaryParse:pt,getParentBoundaryParse:H,getRels:Pe,getTitle:oe,getC4Type:Fr,getC4ShapeInRow:qt,getC4BoundaryInRow:V,setAccTitle:S.SV,getAccTitle:S.iN,getAccDescription:S.m7,setAccDescription:S.EI,getConfig:(0,Pt.K2)(()=>(0,S.D7)().c4,"getConfig"),clear:Et,LINETYPE:{SOLID:0,DOTTED:1,NOTE:2,SOLID_CROSS:3,DOTTED_CROSS:4,SOLID_OPEN:5,DOTTED_OPEN:6,LOOP_START:10,LOOP_END:11,ALT_START:12,ALT_ELSE:13,ALT_END:14,OPT_START:15,OPT_END:16,ACTIVE_START:17,ACTIVE_END:18,PAR_START:19,PAR_AND:20,PAR_END:21,RECT_START:22,RECT_END:23,SOLID_POINT:24,DOTTED_POINT:25},ARROWTYPE:{FILLED:0,OPEN:1},PLACEMENT:{LEFTOF:0,RIGHTOF:1,OVER:2},setTitle:et,setC4Type:Se},it=(0,Pt.K2)(function(v,b){return(0,ee.tk)(v,b)},"drawRect"),rt=(0,Pt.K2)(function(v,b,C,P,Q,xt){const Vt=v.append("image");Vt.attr("width",b),Vt.attr("height",C),Vt.attr("x",P),Vt.attr("y",Q);let jt=xt.startsWith("data:image/png;base64")?xt:(0,$.J)(xt);Vt.attr("xlink:href",jt)},"drawImage"),_t=(0,Pt.K2)((v,b,C)=>{const P=v.append("g");let Q=0;for(let xt of b){let Vt=xt.textColor?xt.textColor:"#444444",jt=xt.lineColor?xt.lineColor:"#444444",Ut=xt.offsetX?parseInt(xt.offsetX):0,Wt=xt.offsetY?parseInt(xt.offsetY):0,xe="";if(0===Q){let We=P.append("line");We.attr("x1",xt.startPoint.x),We.attr("y1",xt.startPoint.y),We.attr("x2",xt.endPoint.x),We.attr("y2",xt.endPoint.y),We.attr("stroke-width","1"),We.attr("stroke",jt),We.style("fill","none"),"rel_b"!==xt.type&&We.attr("marker-end","url("+xe+"#arrowhead)"),("birel"===xt.type||"rel_b"===xt.type)&&We.attr("marker-start","url("+xe+"#arrowend)"),Q=-1}else{let We=P.append("path");We.attr("fill","none").attr("stroke-width","1").attr("stroke",jt).attr("d","Mstartx,starty Qcontrolx,controly stopx,stopy ".replaceAll("startx",xt.startPoint.x).replaceAll("starty",xt.startPoint.y).replaceAll("controlx",xt.startPoint.x+(xt.endPoint.x-xt.startPoint.x)/2-(xt.endPoint.x-xt.startPoint.x)/4).replaceAll("controly",xt.startPoint.y+(xt.endPoint.y-xt.startPoint.y)/2).replaceAll("stopx",xt.endPoint.x).replaceAll("stopy",xt.endPoint.y)),"rel_b"!==xt.type&&We.attr("marker-end","url("+xe+"#arrowhead)"),("birel"===xt.type||"rel_b"===xt.type)&&We.attr("marker-start","url("+xe+"#arrowend)")}let Xe=C.messageFont();mr(C)(xt.label.text,P,Math.min(xt.startPoint.x,xt.endPoint.x)+Math.abs(xt.endPoint.x-xt.startPoint.x)/2+Ut,Math.min(xt.startPoint.y,xt.endPoint.y)+Math.abs(xt.endPoint.y-xt.startPoint.y)/2+Wt,xt.label.width,xt.label.height,{fill:Vt},Xe),xt.techn&&""!==xt.techn.text&&(Xe=C.messageFont(),mr(C)("["+xt.techn.text+"]",P,Math.min(xt.startPoint.x,xt.endPoint.x)+Math.abs(xt.endPoint.x-xt.startPoint.x)/2+Ut,Math.min(xt.startPoint.y,xt.endPoint.y)+Math.abs(xt.endPoint.y-xt.startPoint.y)/2+C.messageFontSize+5+Wt,Math.max(xt.label.width,xt.techn.width),xt.techn.height,{fill:Vt,"font-style":"italic"},Xe))}},"drawRels"),ht=(0,Pt.K2)(function(v,b,C){const P=v.append("g");let Vt=b.fontColor?b.fontColor:"black",jt={"stroke-width":1,"stroke-dasharray":"7.0,7.0"};b.nodeType&&(jt={"stroke-width":1}),it(P,{x:b.x,y:b.y,fill:b.bgColor?b.bgColor:"none",stroke:b.borderColor?b.borderColor:"#444444",width:b.width,height:b.height,rx:2.5,ry:2.5,attrs:jt});let Wt=C.boundaryFont();Wt.fontWeight="bold",Wt.fontSize=Wt.fontSize+2,Wt.fontColor=Vt,mr(C)(b.label.text,P,b.x,b.y+b.label.Y,b.width,b.height,{fill:"#444444"},Wt),b.type&&""!==b.type.text&&(Wt=C.boundaryFont(),Wt.fontColor=Vt,mr(C)(b.type.text,P,b.x,b.y+b.type.Y,b.width,b.height,{fill:"#444444"},Wt)),b.descr&&""!==b.descr.text&&(Wt=C.boundaryFont(),Wt.fontSize=Wt.fontSize-2,Wt.fontColor=Vt,mr(C)(b.descr.text,P,b.x,b.y+b.descr.Y,b.width,b.height,{fill:"#444444"},Wt))},"drawBoundary"),Ft=(0,Pt.K2)(function(v,b,C){let P=b.bgColor?b.bgColor:C[b.typeC4Shape.text+"_bg_color"],Q=b.borderColor?b.borderColor:C[b.typeC4Shape.text+"_border_color"],xt=b.fontColor?b.fontColor:"#FFFFFF",Vt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAIAAADYYG7QAAACD0lEQVR4Xu2YoU4EMRCGT+4j8Ai8AhaH4QHgAUjQuFMECUgMIUgwJAgMhgQsAYUiJCiQIBBY+EITsjfTdme6V24v4c8vyGbb+ZjOtN0bNcvjQXmkH83WvYBWto6PLm6v7p7uH1/w2fXD+PBycX1Pv2l3IdDm/vn7x+dXQiAubRzoURa7gRZWd0iGRIiJbOnhnfYBQZNJjNbuyY2eJG8fkDE3bbG4ep6MHUAsgYxmE3nVs6VsBWJSGccsOlFPmLIViMzLOB7pCVO2AtHJMohH7Fh6zqitQK7m0rJvAVYgGcEpe//PLdDz65sM4pF9N7ICcXDKIB5Nv6j7tD0NoSdM2QrU9Gg0ewE1LqBhHR3BBdvj2vapnidjHxD/q6vd7Pvhr31AwcY8eXMTXAKECZZJFXuEq27aLgQK5uLMohCenGGuGewOxSjBvYBqeG6B+Nqiblggdjnc+ZXDy+FNFpFzw76O3UBAROuXh6FoiAcf5g9eTvUgzy0nWg6I8cXHRUpg5bOVBCo+KDpFajOf23GgPme7RSQ+lacIENUgJ6gg1k6HjgOlqnLqip4tEuhv0hNEMXUD0clyXE3p6pZA0S2nnvTlXwLJEZWlb7cTQH1+USgTN4VhAenm/wea1OCAOmqo6fE1WCb9WSKBah+rbUWPWAmE2Rvk0ApiB45eOyNAzU8xcTvj8KvkKEoOaIYeHNA3ZuygAvFMUO0AAAAASUVORK5CYII=";switch(b.typeC4Shape.text){case"person":Vt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAIAAADYYG7QAAACD0lEQVR4Xu2YoU4EMRCGT+4j8Ai8AhaH4QHgAUjQuFMECUgMIUgwJAgMhgQsAYUiJCiQIBBY+EITsjfTdme6V24v4c8vyGbb+ZjOtN0bNcvjQXmkH83WvYBWto6PLm6v7p7uH1/w2fXD+PBycX1Pv2l3IdDm/vn7x+dXQiAubRzoURa7gRZWd0iGRIiJbOnhnfYBQZNJjNbuyY2eJG8fkDE3bbG4ep6MHUAsgYxmE3nVs6VsBWJSGccsOlFPmLIViMzLOB7pCVO2AtHJMohH7Fh6zqitQK7m0rJvAVYgGcEpe//PLdDz65sM4pF9N7ICcXDKIB5Nv6j7tD0NoSdM2QrU9Gg0ewE1LqBhHR3BBdvj2vapnidjHxD/q6vd7Pvhr31AwcY8eXMTXAKECZZJFXuEq27aLgQK5uLMohCenGGuGewOxSjBvYBqeG6B+Nqiblggdjnc+ZXDy+FNFpFzw76O3UBAROuXh6FoiAcf5g9eTvUgzy0nWg6I8cXHRUpg5bOVBCo+KDpFajOf23GgPme7RSQ+lacIENUgJ6gg1k6HjgOlqnLqip4tEuhv0hNEMXUD0clyXE3p6pZA0S2nnvTlXwLJEZWlb7cTQH1+USgTN4VhAenm/wea1OCAOmqo6fE1WCb9WSKBah+rbUWPWAmE2Rvk0ApiB45eOyNAzU8xcTvj8KvkKEoOaIYeHNA3ZuygAvFMUO0AAAAASUVORK5CYII=";break;case"external_person":Vt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAIAAADYYG7QAAAB6ElEQVR4Xu2YLY+EMBCG9+dWr0aj0Wg0Go1Go0+j8Xdv2uTCvv1gpt0ebHKPuhDaeW4605Z9mJvx4AdXUyTUdd08z+u6flmWZRnHsWkafk9DptAwDPu+f0eAYtu2PEaGWuj5fCIZrBAC2eLBAnRCsEkkxmeaJp7iDJ2QMDdHsLg8SxKFEJaAo8lAXnmuOFIhTMpxxKATebo4UiFknuNo4OniSIXQyRxEA3YsnjGCVEjVXD7yLUAqxBGUyPv/Y4W2beMgGuS7kVQIBycH0fD+oi5pezQETxdHKmQKGk1eQEYldK+jw5GxPfZ9z7Mk0Qnhf1W1m3w//EUn5BDmSZsbR44QQLBEqrBHqOrmSKaQAxdnLArCrxZcM7A7ZKs4ioRq8LFC+NpC3WCBJsvpVw5edm9iEXFuyNfxXAgSwfrFQ1c0iNda8AdejvUgnktOtJQQxmcfFzGglc5WVCj7oDgFqU18boeFSs52CUh8LE8BIVQDT1ABrB0HtgSEYlX5doJnCwv9TXocKCaKbnwhdDKPq4lf3SwU3HLq4V/+WYhHVMa/3b4IlfyikAduCkcBc7mQ3/z/Qq/cTuikhkzB12Ae/mcJC9U+Vo8Ej1gWAtgbeGgFsAMHr50BIWOLCbezvhpBFUdY6EJuJ/QDW0XoMX60zZ0AAAAASUVORK5CYII="}const jt=v.append("g");jt.attr("class","person-man");const Ut=(0,ee.PB)();switch(b.typeC4Shape.text){case"person":case"external_person":case"system":case"external_system":case"container":case"external_container":case"component":case"external_component":Ut.x=b.x,Ut.y=b.y,Ut.fill=P,Ut.width=b.width,Ut.height=b.height,Ut.stroke=Q,Ut.rx=2.5,Ut.ry=2.5,Ut.attrs={"stroke-width":.5},it(jt,Ut);break;case"system_db":case"external_system_db":case"container_db":case"external_container_db":case"component_db":case"external_component_db":jt.append("path").attr("fill",P).attr("stroke-width","0.5").attr("stroke",Q).attr("d","Mstartx,startyc0,-10 half,-10 half,-10c0,0 half,0 half,10l0,heightc0,10 -half,10 -half,10c0,0 -half,0 -half,-10l0,-height".replaceAll("startx",b.x).replaceAll("starty",b.y).replaceAll("half",b.width/2).replaceAll("height",b.height)),jt.append("path").attr("fill","none").attr("stroke-width","0.5").attr("stroke",Q).attr("d","Mstartx,startyc0,10 half,10 half,10c0,0 half,0 half,-10".replaceAll("startx",b.x).replaceAll("starty",b.y).replaceAll("half",b.width/2));break;case"system_queue":case"external_system_queue":case"container_queue":case"external_container_queue":case"component_queue":case"external_component_queue":jt.append("path").attr("fill",P).attr("stroke-width","0.5").attr("stroke",Q).attr("d","Mstartx,startylwidth,0c5,0 5,half 5,halfc0,0 0,half -5,halfl-width,0c-5,0 -5,-half -5,-halfc0,0 0,-half 5,-half".replaceAll("startx",b.x).replaceAll("starty",b.y).replaceAll("width",b.width).replaceAll("half",b.height/2)),jt.append("path").attr("fill","none").attr("stroke-width","0.5").attr("stroke",Q).attr("d","Mstartx,startyc-5,0 -5,half -5,halfc0,half 5,half 5,half".replaceAll("startx",b.x+b.width).replaceAll("starty",b.y).replaceAll("half",b.height/2))}let Wt=de(C,b.typeC4Shape.text);switch(jt.append("text").attr("fill",xt).attr("font-family",Wt.fontFamily).attr("font-size",Wt.fontSize-2).attr("font-style","italic").attr("lengthAdjust","spacing").attr("textLength",b.typeC4Shape.width).attr("x",b.x+b.width/2-b.typeC4Shape.width/2).attr("y",b.y+b.typeC4Shape.Y).text("<<"+b.typeC4Shape.text+">>"),b.typeC4Shape.text){case"person":case"external_person":rt(jt,48,48,b.x+b.width/2-24,b.y+b.image.Y,Vt)}let xe=C[b.typeC4Shape.text+"Font"]();return xe.fontWeight="bold",xe.fontSize=xe.fontSize+2,xe.fontColor=xt,mr(C)(b.label.text,jt,b.x,b.y+b.label.Y,b.width,b.height,{fill:xt},xe),xe=C[b.typeC4Shape.text+"Font"](),xe.fontColor=xt,b.techn&&""!==b.techn?.text?mr(C)(b.techn.text,jt,b.x,b.y+b.techn.Y,b.width,b.height,{fill:xt,"font-style":"italic"},xe):b.type&&""!==b.type.text&&mr(C)(b.type.text,jt,b.x,b.y+b.type.Y,b.width,b.height,{fill:xt,"font-style":"italic"},xe),b.descr&&""!==b.descr.text&&(xe=C.personFont(),xe.fontColor=xt,mr(C)(b.descr.text,jt,b.x,b.y+b.descr.Y,b.width,b.height,{fill:xt},xe)),b.height},"drawC4Shape"),G=(0,Pt.K2)(function(v){v.append("defs").append("symbol").attr("id","database").attr("fill-rule","evenodd").attr("clip-rule","evenodd").append("path").attr("transform","scale(.5)").attr("d","M12.258.001l.256.004.255.005.253.008.251.01.249.012.247.015.246.016.242.019.241.02.239.023.236.024.233.027.231.028.229.031.225.032.223.034.22.036.217.038.214.04.211.041.208.043.205.045.201.046.198.048.194.05.191.051.187.053.183.054.18.056.175.057.172.059.168.06.163.061.16.063.155.064.15.066.074.033.073.033.071.034.07.034.069.035.068.035.067.035.066.035.064.036.064.036.062.036.06.036.06.037.058.037.058.037.055.038.055.038.053.038.052.038.051.039.05.039.048.039.047.039.045.04.044.04.043.04.041.04.04.041.039.041.037.041.036.041.034.041.033.042.032.042.03.042.029.042.027.042.026.043.024.043.023.043.021.043.02.043.018.044.017.043.015.044.013.044.012.044.011.045.009.044.007.045.006.045.004.045.002.045.001.045v17l-.001.045-.002.045-.004.045-.006.045-.007.045-.009.044-.011.045-.012.044-.013.044-.015.044-.017.043-.018.044-.02.043-.021.043-.023.043-.024.043-.026.043-.027.042-.029.042-.03.042-.032.042-.033.042-.034.041-.036.041-.037.041-.039.041-.04.041-.041.04-.043.04-.044.04-.045.04-.047.039-.048.039-.05.039-.051.039-.052.038-.053.038-.055.038-.055.038-.058.037-.058.037-.06.037-.06.036-.062.036-.064.036-.064.036-.066.035-.067.035-.068.035-.069.035-.07.034-.071.034-.073.033-.074.033-.15.066-.155.064-.16.063-.163.061-.168.06-.172.059-.175.057-.18.056-.183.054-.187.053-.191.051-.194.05-.198.048-.201.046-.205.045-.208.043-.211.041-.214.04-.217.038-.22.036-.223.034-.225.032-.229.031-.231.028-.233.027-.236.024-.239.023-.241.02-.242.019-.246.016-.247.015-.249.012-.251.01-.253.008-.255.005-.256.004-.258.001-.258-.001-.256-.004-.255-.005-.253-.008-.251-.01-.249-.012-.247-.015-.245-.016-.243-.019-.241-.02-.238-.023-.236-.024-.234-.027-.231-.028-.228-.031-.226-.032-.223-.034-.22-.036-.217-.038-.214-.04-.211-.041-.208-.043-.204-.045-.201-.046-.198-.048-.195-.05-.19-.051-.187-.053-.184-.054-.179-.056-.176-.057-.172-.059-.167-.06-.164-.061-.159-.063-.155-.064-.151-.066-.074-.033-.072-.033-.072-.034-.07-.034-.069-.035-.068-.035-.067-.035-.066-.035-.064-.036-.063-.036-.062-.036-.061-.036-.06-.037-.058-.037-.057-.037-.056-.038-.055-.038-.053-.038-.052-.038-.051-.039-.049-.039-.049-.039-.046-.039-.046-.04-.044-.04-.043-.04-.041-.04-.04-.041-.039-.041-.037-.041-.036-.041-.034-.041-.033-.042-.032-.042-.03-.042-.029-.042-.027-.042-.026-.043-.024-.043-.023-.043-.021-.043-.02-.043-.018-.044-.017-.043-.015-.044-.013-.044-.012-.044-.011-.045-.009-.044-.007-.045-.006-.045-.004-.045-.002-.045-.001-.045v-17l.001-.045.002-.045.004-.045.006-.045.007-.045.009-.044.011-.045.012-.044.013-.044.015-.044.017-.043.018-.044.02-.043.021-.043.023-.043.024-.043.026-.043.027-.042.029-.042.03-.042.032-.042.033-.042.034-.041.036-.041.037-.041.039-.041.04-.041.041-.04.043-.04.044-.04.046-.04.046-.039.049-.039.049-.039.051-.039.052-.038.053-.038.055-.038.056-.038.057-.037.058-.037.06-.037.061-.036.062-.036.063-.036.064-.036.066-.035.067-.035.068-.035.069-.035.07-.034.072-.034.072-.033.074-.033.151-.066.155-.064.159-.063.164-.061.167-.06.172-.059.176-.057.179-.056.184-.054.187-.053.19-.051.195-.05.198-.048.201-.046.204-.045.208-.043.211-.041.214-.04.217-.038.22-.036.223-.034.226-.032.228-.031.231-.028.234-.027.236-.024.238-.023.241-.02.243-.019.245-.016.247-.015.249-.012.251-.01.253-.008.255-.005.256-.004.258-.001.258.001zm-9.258 20.499v.01l.001.021.003.021.004.022.005.021.006.022.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.023.018.024.019.024.021.024.022.025.023.024.024.025.052.049.056.05.061.051.066.051.07.051.075.051.079.052.084.052.088.052.092.052.097.052.102.051.105.052.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.048.144.049.147.047.152.047.155.047.16.045.163.045.167.043.171.043.176.041.178.041.183.039.187.039.19.037.194.035.197.035.202.033.204.031.209.03.212.029.216.027.219.025.222.024.226.021.23.02.233.018.236.016.24.015.243.012.246.01.249.008.253.005.256.004.259.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.021.224-.024.22-.026.216-.027.212-.028.21-.031.205-.031.202-.034.198-.034.194-.036.191-.037.187-.039.183-.04.179-.04.175-.042.172-.043.168-.044.163-.045.16-.046.155-.046.152-.047.148-.048.143-.049.139-.049.136-.05.131-.05.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.053.083-.051.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.05.023-.024.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.023.01-.022.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.127l-.077.055-.08.053-.083.054-.085.053-.087.052-.09.052-.093.051-.095.05-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.045-.118.044-.12.043-.122.042-.124.042-.126.041-.128.04-.13.04-.132.038-.134.038-.135.037-.138.037-.139.035-.142.035-.143.034-.144.033-.147.032-.148.031-.15.03-.151.03-.153.029-.154.027-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.01-.179.008-.179.008-.181.006-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.006-.179-.008-.179-.008-.178-.01-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.027-.153-.029-.151-.03-.15-.03-.148-.031-.146-.032-.145-.033-.143-.034-.141-.035-.14-.035-.137-.037-.136-.037-.134-.038-.132-.038-.13-.04-.128-.04-.126-.041-.124-.042-.122-.042-.12-.044-.117-.043-.116-.045-.113-.045-.112-.046-.109-.047-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.05-.093-.052-.09-.051-.087-.052-.085-.053-.083-.054-.08-.054-.077-.054v4.127zm0-5.654v.011l.001.021.003.021.004.021.005.022.006.022.007.022.009.022.01.022.011.023.012.023.013.023.015.024.016.023.017.024.018.024.019.024.021.024.022.024.023.025.024.024.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.052.11.051.114.051.119.052.123.05.127.051.131.05.135.049.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.044.171.042.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.022.23.02.233.018.236.016.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.012.241-.015.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.048.139-.05.136-.049.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.051.051-.049.023-.025.023-.024.021-.025.02-.024.019-.024.018-.024.017-.024.015-.023.014-.023.013-.024.012-.022.01-.023.01-.023.008-.022.006-.022.006-.022.004-.021.004-.022.001-.021.001-.021v-4.139l-.077.054-.08.054-.083.054-.085.052-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.044-.118.044-.12.044-.122.042-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.035-.143.033-.144.033-.147.033-.148.031-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.009-.179.009-.179.007-.181.007-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.007-.179-.007-.179-.009-.178-.009-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.031-.146-.033-.145-.033-.143-.033-.141-.035-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.04-.126-.041-.124-.042-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.051-.093-.051-.09-.051-.087-.053-.085-.052-.083-.054-.08-.054-.077-.054v4.139zm0-5.666v.011l.001.02.003.022.004.021.005.022.006.021.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.024.018.023.019.024.021.025.022.024.023.024.024.025.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.051.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.043.171.043.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.021.23.02.233.018.236.017.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.013.241-.014.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.049.139-.049.136-.049.131-.051.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.049.023-.025.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.022.01-.023.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.153l-.077.054-.08.054-.083.053-.085.053-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.048-.105.048-.106.048-.109.046-.111.046-.114.046-.115.044-.118.044-.12.043-.122.043-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.034-.143.034-.144.033-.147.032-.148.032-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.024-.161.024-.162.023-.163.023-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.01-.178.01-.179.009-.179.007-.181.006-.182.006-.182.004-.184.003-.184.001-.185.001-.185-.001-.184-.001-.184-.003-.182-.004-.182-.006-.181-.006-.179-.007-.179-.009-.178-.01-.176-.01-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.023-.162-.023-.161-.024-.159-.024-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.032-.146-.032-.145-.033-.143-.034-.141-.034-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.041-.126-.041-.124-.041-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.048-.105-.048-.102-.048-.1-.05-.097-.049-.095-.051-.093-.051-.09-.052-.087-.052-.085-.053-.083-.053-.08-.054-.077-.054v4.153zm8.74-8.179l-.257.004-.254.005-.25.008-.247.011-.244.012-.241.014-.237.016-.233.018-.231.021-.226.022-.224.023-.22.026-.216.027-.212.028-.21.031-.205.032-.202.033-.198.034-.194.036-.191.038-.187.038-.183.04-.179.041-.175.042-.172.043-.168.043-.163.045-.16.046-.155.046-.152.048-.148.048-.143.048-.139.049-.136.05-.131.05-.126.051-.123.051-.118.051-.114.052-.11.052-.106.052-.101.052-.096.052-.092.052-.088.052-.083.052-.079.052-.074.051-.07.052-.065.051-.06.05-.056.05-.051.05-.023.025-.023.024-.021.024-.02.025-.019.024-.018.024-.017.023-.015.024-.014.023-.013.023-.012.023-.01.023-.01.022-.008.022-.006.023-.006.021-.004.022-.004.021-.001.021-.001.021.001.021.001.021.004.021.004.022.006.021.006.023.008.022.01.022.01.023.012.023.013.023.014.023.015.024.017.023.018.024.019.024.02.025.021.024.023.024.023.025.051.05.056.05.06.05.065.051.07.052.074.051.079.052.083.052.088.052.092.052.096.052.101.052.106.052.11.052.114.052.118.051.123.051.126.051.131.05.136.05.139.049.143.048.148.048.152.048.155.046.16.046.163.045.168.043.172.043.175.042.179.041.183.04.187.038.191.038.194.036.198.034.202.033.205.032.21.031.212.028.216.027.22.026.224.023.226.022.231.021.233.018.237.016.241.014.244.012.247.011.25.008.254.005.257.004.26.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.022.224-.023.22-.026.216-.027.212-.028.21-.031.205-.032.202-.033.198-.034.194-.036.191-.038.187-.038.183-.04.179-.041.175-.042.172-.043.168-.043.163-.045.16-.046.155-.046.152-.048.148-.048.143-.048.139-.049.136-.05.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.05.051-.05.023-.025.023-.024.021-.024.02-.025.019-.024.018-.024.017-.023.015-.024.014-.023.013-.023.012-.023.01-.023.01-.022.008-.022.006-.023.006-.021.004-.022.004-.021.001-.021.001-.021-.001-.021-.001-.021-.004-.021-.004-.022-.006-.021-.006-.023-.008-.022-.01-.022-.01-.023-.012-.023-.013-.023-.014-.023-.015-.024-.017-.023-.018-.024-.019-.024-.02-.025-.021-.024-.023-.024-.023-.025-.051-.05-.056-.05-.06-.05-.065-.051-.07-.052-.074-.051-.079-.052-.083-.052-.088-.052-.092-.052-.096-.052-.101-.052-.106-.052-.11-.052-.114-.052-.118-.051-.123-.051-.126-.051-.131-.05-.136-.05-.139-.049-.143-.048-.148-.048-.152-.048-.155-.046-.16-.046-.163-.045-.168-.043-.172-.043-.175-.042-.179-.041-.183-.04-.187-.038-.191-.038-.194-.036-.198-.034-.202-.033-.205-.032-.21-.031-.212-.028-.216-.027-.22-.026-.224-.023-.226-.022-.231-.021-.233-.018-.237-.016-.241-.014-.244-.012-.247-.011-.25-.008-.254-.005-.257-.004-.26-.001-.26.001z")},"insertDatabaseIcon"),lt=(0,Pt.K2)(function(v){v.append("defs").append("symbol").attr("id","computer").attr("width","24").attr("height","24").append("path").attr("transform","scale(.5)").attr("d","M2 2v13h20v-13h-20zm18 11h-16v-9h16v9zm-10.228 6l.466-1h3.524l.467 1h-4.457zm14.228 3h-24l2-6h2.104l-1.33 4h18.45l-1.297-4h2.073l2 6zm-5-10h-14v-7h14v7z")},"insertComputerIcon"),ke=(0,Pt.K2)(function(v){v.append("defs").append("symbol").attr("id","clock").attr("width","24").attr("height","24").append("path").attr("transform","scale(.5)").attr("d","M12 2c5.514 0 10 4.486 10 10s-4.486 10-10 10-10-4.486-10-10 4.486-10 10-10zm0-2c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm5.848 12.459c.202.038.202.333.001.372-1.907.361-6.045 1.111-6.547 1.111-.719 0-1.301-.582-1.301-1.301 0-.512.77-5.447 1.125-7.445.034-.192.312-.181.343.014l.985 6.238 5.394 1.011z")},"insertClockIcon"),Mt=(0,Pt.K2)(function(v){v.append("defs").append("marker").attr("id","arrowhead").attr("refX",9).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z")},"insertArrowHead"),Zt=(0,Pt.K2)(function(v){v.append("defs").append("marker").attr("id","arrowend").attr("refX",1).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 10 0 L 0 5 L 10 10 z")},"insertArrowEnd"),pe=(0,Pt.K2)(function(v){v.append("defs").append("marker").attr("id","filled-head").attr("refX",18).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")},"insertArrowFilledHead"),Re=(0,Pt.K2)(function(v){v.append("defs").append("marker").attr("id","sequencenumber").attr("refX",15).attr("refY",15).attr("markerWidth",60).attr("markerHeight",40).attr("orient","auto").append("circle").attr("cx",15).attr("cy",15).attr("r",6)},"insertDynamicNumber"),Ze=(0,Pt.K2)(function(v){const C=v.append("defs").append("marker").attr("id","crosshead").attr("markerWidth",15).attr("markerHeight",8).attr("orient","auto").attr("refX",16).attr("refY",4);C.append("path").attr("fill","black").attr("stroke","#000000").style("stroke-dasharray","0, 0").attr("stroke-width","1px").attr("d","M 9,2 V 6 L16,4 Z"),C.append("path").attr("fill","none").attr("stroke","#000000").style("stroke-dasharray","0, 0").attr("stroke-width","1px").attr("d","M 0,1 L 6,7 M 6,1 L 0,7")},"insertArrowCrossHead"),de=(0,Pt.K2)((v,b)=>({fontFamily:v[b+"FontFamily"],fontSize:v[b+"FontSize"],fontWeight:v[b+"FontWeight"]}),"getC4ShapeFont"),mr=function(){function v(Q,xt,Vt,jt,Ut,Wt,xe){P(xt.append("text").attr("x",Vt+Ut/2).attr("y",jt+Wt/2+5).style("text-anchor","middle").text(Q),xe)}function b(Q,xt,Vt,jt,Ut,Wt,xe,Xe){const{fontSize:We,fontFamily:gr,fontWeight:hr}=Xe,_r=Q.split(S.Y2.lineBreakRegex);for(let $e=0;$e<_r.length;$e++){const He=$e*We-We*(_r.length-1)/2,Ar=xt.append("text").attr("x",Vt+Ut/2).attr("y",jt).style("text-anchor","middle").attr("dominant-baseline","middle").style("font-size",We).style("font-weight",hr).style("font-family",gr);Ar.append("tspan").attr("dy",He).text(_r[$e]).attr("alignment-baseline","mathematical"),P(Ar,xe)}}function C(Q,xt,Vt,jt,Ut,Wt,xe,Xe){const We=xt.append("switch"),hr=We.append("foreignObject").attr("x",Vt).attr("y",jt).attr("width",Ut).attr("height",Wt).append("xhtml:div").style("display","table").style("height","100%").style("width","100%");hr.append("div").style("display","table-cell").style("text-align","center").style("vertical-align","middle").text(Q),b(Q,We,Vt,jt,Ut,0,xe,Xe),P(hr,xe)}function P(Q,xt){for(const Vt in xt)xt.hasOwnProperty(Vt)&&Q.attr(Vt,xt[Vt])}return(0,Pt.K2)(v,"byText"),(0,Pt.K2)(b,"byTspan"),(0,Pt.K2)(C,"byFo"),(0,Pt.K2)(P,"_setTextAttrs"),function(Q){return"fo"===Q.textPlacement?C:"old"===Q.textPlacement?v:b}}(),xr={drawRect:it,drawBoundary:ht,drawC4Shape:Ft,drawRels:_t,drawImage:rt,insertArrowHead:Mt,insertArrowEnd:Zt,insertArrowFilledHead:pe,insertDynamicNumber:Re,insertArrowCrossHead:Ze,insertDatabaseIcon:G,insertComputerIcon:lt,insertClockIcon:ke},zt=0,Ae=0,or=4,ve=2;wt.yy=mt;var ce={},Ee=(class{constructor(v){this.name="",this.data={},this.data.startx=void 0,this.data.stopx=void 0,this.data.starty=void 0,this.data.stopy=void 0,this.data.widthLimit=void 0,this.nextData={},this.nextData.startx=void 0,this.nextData.stopx=void 0,this.nextData.starty=void 0,this.nextData.stopy=void 0,this.nextData.cnt=0,De(v.db.getConfig())}setData(v,b,C,P){this.nextData.startx=this.data.startx=v,this.nextData.stopx=this.data.stopx=b,this.nextData.starty=this.data.starty=C,this.nextData.stopy=this.data.stopy=P}updateVal(v,b,C,P){v[b]=void 0===v[b]?C:P(C,v[b])}insert(v){this.nextData.cnt=this.nextData.cnt+1;let b=this.nextData.startx===this.nextData.stopx?this.nextData.stopx+v.margin:this.nextData.stopx+2*v.margin,C=b+v.width,P=this.nextData.starty+2*v.margin,Q=P+v.height;(b>=this.data.widthLimit||C>=this.data.widthLimit||this.nextData.cnt>or)&&(b=this.nextData.startx+v.margin+ce.nextLinePaddingX,P=this.nextData.stopy+2*v.margin,this.nextData.stopx=C=b+v.width,this.nextData.starty=this.nextData.stopy,this.nextData.stopy=Q=P+v.height,this.nextData.cnt=1),v.x=b,v.y=P,this.updateVal(this.data,"startx",b,Math.min),this.updateVal(this.data,"starty",P,Math.min),this.updateVal(this.data,"stopx",C,Math.max),this.updateVal(this.data,"stopy",Q,Math.max),this.updateVal(this.nextData,"startx",b,Math.min),this.updateVal(this.nextData,"starty",P,Math.min),this.updateVal(this.nextData,"stopx",C,Math.max),this.updateVal(this.nextData,"stopy",Q,Math.max)}init(v){this.name="",this.data={startx:void 0,stopx:void 0,starty:void 0,stopy:void 0,widthLimit:void 0},this.nextData={startx:void 0,stopx:void 0,starty:void 0,stopy:void 0,cnt:0},De(v.db.getConfig())}bumpLastMargin(v){this.data.stopx+=v,this.data.stopy+=v}static#t=A=()=>((0,ot.A)(this,"Bounds"),(0,Pt.K2)(this,"Bounds"),this)},A()),De=(0,Pt.K2)(function(v){(0,S.hH)(ce,v),v.fontFamily&&(ce.personFontFamily=ce.systemFontFamily=ce.messageFontFamily=v.fontFamily),v.fontSize&&(ce.personFontSize=ce.systemFontSize=ce.messageFontSize=v.fontSize),v.fontWeight&&(ce.personFontWeight=ce.systemFontWeight=ce.messageFontWeight=v.fontWeight)},"setConf"),er=(0,Pt.K2)((v,b)=>({fontFamily:v[b+"FontFamily"],fontSize:v[b+"FontSize"],fontWeight:v[b+"FontWeight"]}),"c4ShapeFont"),Qe=(0,Pt.K2)(v=>({fontFamily:v.boundaryFontFamily,fontSize:v.boundaryFontSize,fontWeight:v.boundaryFontWeight}),"boundaryFont"),Lr=(0,Pt.K2)(v=>({fontFamily:v.messageFontFamily,fontSize:v.messageFontSize,fontWeight:v.messageFontWeight}),"messageFont");function _e(v,b,C,P,Q){if(!b[v].width)if(C)b[v].text=(0,L.bH)(b[v].text,Q,P),b[v].textLines=b[v].text.split(S.Y2.lineBreakRegex).length,b[v].width=Q,b[v].height=(0,L.ru)(b[v].text,P);else{let xt=b[v].text.split(S.Y2.lineBreakRegex);b[v].textLines=xt.length;let Vt=0;b[v].height=0,b[v].width=0;for(const jt of xt)b[v].width=Math.max((0,L.Un)(jt,P),b[v].width),Vt=(0,L.ru)(jt,P),b[v].height=b[v].height+Vt}}(0,Pt.K2)(_e,"calcC4ShapeTextWH");var Hr=(0,Pt.K2)(function(v,b,C){b.x=C.data.startx,b.y=C.data.starty,b.width=C.data.stopx-C.data.startx,b.height=C.data.stopy-C.data.starty,b.label.y=ce.c4ShapeMargin-35;let P=b.wrap&&ce.wrap,Q=Qe(ce);Q.fontSize=Q.fontSize+2,Q.fontWeight="bold",_e("label",b,P,Q,(0,L.Un)(b.label.text,Q)),xr.drawBoundary(v,b,ce)},"drawBoundary"),sr=(0,Pt.K2)(function(v,b,C,P){let Q=0;for(const xt of P){Q=0;const Vt=C[xt];let jt=er(ce,Vt.typeC4Shape.text);switch(jt.fontSize=jt.fontSize-2,Vt.typeC4Shape.width=(0,L.Un)("\xab"+Vt.typeC4Shape.text+"\xbb",jt),Vt.typeC4Shape.height=jt.fontSize+2,Vt.typeC4Shape.Y=ce.c4ShapePadding,Q=Vt.typeC4Shape.Y+Vt.typeC4Shape.height-4,Vt.image={width:0,height:0,Y:0},Vt.typeC4Shape.text){case"person":case"external_person":Vt.image.width=48,Vt.image.height=48,Vt.image.Y=Q,Q=Vt.image.Y+Vt.image.height}Vt.sprite&&(Vt.image.width=48,Vt.image.height=48,Vt.image.Y=Q,Q=Vt.image.Y+Vt.image.height);let Ut=Vt.wrap&&ce.wrap,Wt=ce.width-2*ce.c4ShapePadding,xe=er(ce,Vt.typeC4Shape.text);xe.fontSize=xe.fontSize+2,xe.fontWeight="bold",_e("label",Vt,Ut,xe,Wt),Vt.label.Y=Q+8,Q=Vt.label.Y+Vt.label.height,Vt.type&&""!==Vt.type.text?(Vt.type.text="["+Vt.type.text+"]",_e("type",Vt,Ut,er(ce,Vt.typeC4Shape.text),Wt),Vt.type.Y=Q+5,Q=Vt.type.Y+Vt.type.height):Vt.techn&&""!==Vt.techn.text&&(Vt.techn.text="["+Vt.techn.text+"]",_e("techn",Vt,Ut,er(ce,Vt.techn.text),Wt),Vt.techn.Y=Q+5,Q=Vt.techn.Y+Vt.techn.height);let Xe=Q,We=Vt.label.width;Vt.descr&&""!==Vt.descr.text&&(_e("descr",Vt,Ut,er(ce,Vt.typeC4Shape.text),Wt),Vt.descr.Y=Q+20,Q=Vt.descr.Y+Vt.descr.height,We=Math.max(Vt.label.width,Vt.descr.width),Xe=Q-5*Vt.descr.textLines),We+=ce.c4ShapePadding,Vt.width=Math.max(Vt.width||ce.width,We,ce.width),Vt.height=Math.max(Vt.height||ce.height,Xe,ce.height),Vt.margin=Vt.margin||ce.c4ShapeMargin,v.insert(Vt),xr.drawC4Shape(b,Vt,ce)}v.bumpLastMargin(ce.c4ShapeMargin)},"drawC4ShapeArray"),te=(class{constructor(v,b){this.x=v,this.y=b}static#t=At=()=>((0,ot.A)(this,"Point"),(0,Pt.K2)(this,"Point"),this)},At()),ne=(0,Pt.K2)(function(v,b){let C=v.x,P=v.y,Q=b.x,xt=b.y,Vt=C+v.width/2,jt=P+v.height/2,Ut=Math.abs(C-Q),Wt=Math.abs(P-xt),xe=Wt/Ut,Xe=v.height/v.width,We=null;return P==xt&&C<Q?We=new te(C+v.width,jt):P==xt&&C>Q?We=new te(C,jt):C==Q&&P<xt?We=new te(Vt,P+v.height):C==Q&&P>xt&&(We=new te(Vt,P)),C>Q&&P<xt?We=Xe>=xe?new te(C,jt+xe*v.width/2):new te(Vt-Ut/Wt*v.height/2,P+v.height):C<Q&&P<xt?We=Xe>=xe?new te(C+v.width,jt+xe*v.width/2):new te(Vt+Ut/Wt*v.height/2,P+v.height):C<Q&&P>xt?We=Xe>=xe?new te(C+v.width,jt-xe*v.width/2):new te(Vt+v.height/2*Ut/Wt,P):C>Q&&P>xt&&(We=Xe>=xe?new te(C,jt-v.width/2*xe):new te(Vt-v.height/2*Ut/Wt,P)),We},"getIntersectPoint"),be=(0,Pt.K2)(function(v,b){let C={x:0,y:0};C.x=b.x+b.width/2,C.y=b.y+b.height/2;let P=ne(v,C);return C.x=v.x+v.width/2,C.y=v.y+v.height/2,{startPoint:P,endPoint:ne(b,C)}},"getIntersectPoints"),ir=(0,Pt.K2)(function(v,b,C,P){let Q=0;for(let xt of b){Q+=1;let Vt=xt.wrap&&ce.wrap,jt=Lr(ce);"C4Dynamic"===P.db.getC4Type()&&(xt.label.text=Q+": "+xt.label.text);let Wt=(0,L.Un)(xt.label.text,jt);_e("label",xt,Vt,jt,Wt),xt.techn&&""!==xt.techn.text&&(Wt=(0,L.Un)(xt.techn.text,jt),_e("techn",xt,Vt,jt,Wt)),xt.descr&&""!==xt.descr.text&&(Wt=(0,L.Un)(xt.descr.text,jt),_e("descr",xt,Vt,jt,Wt));let xe=C(xt.from),Xe=C(xt.to),We=be(xe,Xe);xt.startPoint=We.startPoint,xt.endPoint=We.endPoint}xr.drawRels(v,b,ce)},"drawRels");function g(v,b,C,P,Q){let xt=new Ee(Q);xt.data.widthLimit=C.data.widthLimit/Math.min(ve,P.length);for(let[Vt,jt]of P.entries()){let Ut=0;jt.image={width:0,height:0,Y:0},jt.sprite&&(jt.image.width=48,jt.image.height=48,jt.image.Y=Ut,Ut=jt.image.Y+jt.image.height);let Wt=jt.wrap&&ce.wrap,xe=Qe(ce);if(xe.fontSize=xe.fontSize+2,xe.fontWeight="bold",_e("label",jt,Wt,xe,xt.data.widthLimit),jt.label.Y=Ut+8,Ut=jt.label.Y+jt.label.height,jt.type&&""!==jt.type.text&&(jt.type.text="["+jt.type.text+"]",_e("type",jt,Wt,Qe(ce),xt.data.widthLimit),jt.type.Y=Ut+5,Ut=jt.type.Y+jt.type.height),jt.descr&&""!==jt.descr.text){let hr=Qe(ce);hr.fontSize=hr.fontSize-2,_e("descr",jt,Wt,hr,xt.data.widthLimit),jt.descr.Y=Ut+20,Ut=jt.descr.Y+jt.descr.height}if(0==Vt||Vt%ve===0){let hr=C.data.startx+ce.diagramMarginX,_r=C.data.stopy+ce.diagramMarginY+Ut;xt.setData(hr,hr,_r,_r)}else{let hr=xt.data.stopx!==xt.data.startx?xt.data.stopx+ce.diagramMarginX:xt.data.startx,_r=xt.data.starty;xt.setData(hr,hr,_r,_r)}xt.name=jt.alias;let Xe=Q.db.getC4ShapeArray(jt.alias),We=Q.db.getC4ShapeKeys(jt.alias);We.length>0&&sr(xt,v,Xe,We);let gr=Q.db.getBoundaries(b=jt.alias);gr.length>0&&g(v,b,xt,gr,Q),"global"!==jt.alias&&Hr(v,jt,xt),C.data.stopy=Math.max(xt.data.stopy+ce.c4ShapeMargin,C.data.stopy),C.data.stopx=Math.max(xt.data.stopx+ce.c4ShapeMargin,C.data.stopx),zt=Math.max(zt,C.data.stopx),Ae=Math.max(Ae,C.data.stopy)}}(0,Pt.K2)(g,"drawInsideBoundary");var E={drawPersonOrSystemArray:sr,drawBoundary:Hr,setConf:De,draw:(0,Pt.K2)(function(v,b,C,P){ce=(0,S.D7)().c4;const Q=(0,S.D7)().securityLevel;let xt;"sandbox"===Q&&(xt=(0,ut.Ltv)("#i"+b));const Vt=(0,ut.Ltv)("sandbox"===Q?xt.nodes()[0].contentDocument.body:"body");let jt=P.db;P.db.setWrap(ce.wrap),or=jt.getC4ShapeInRow(),ve=jt.getC4BoundaryInRow(),Pt.Rm.debug(`C:${JSON.stringify(ce,null,2)}`);const Ut="sandbox"===Q?Vt.select(`[id="${b}"]`):(0,ut.Ltv)(`[id="${b}"]`);xr.insertComputerIcon(Ut),xr.insertDatabaseIcon(Ut),xr.insertClockIcon(Ut);let Wt=new Ee(P);Wt.setData(ce.diagramMarginX,ce.diagramMarginX,ce.diagramMarginY,ce.diagramMarginY),Wt.data.widthLimit=screen.availWidth,zt=ce.diagramMarginX,Ae=ce.diagramMarginY;const xe=P.db.getTitle();g(Ut,"",Wt,P.db.getBoundaries(""),P),xr.insertArrowHead(Ut),xr.insertArrowEnd(Ut),xr.insertArrowCrossHead(Ut),xr.insertArrowFilledHead(Ut),ir(Ut,P.db.getRels(),P.db.getC4Shape,P),Wt.data.stopx=zt,Wt.data.stopy=Ae;const We=Wt.data;let hr=We.stopy-We.starty+2*ce.diagramMarginY;const $e=We.stopx-We.startx+2*ce.diagramMarginX;xe&&Ut.append("text").text(xe).attr("x",(We.stopx-We.startx)/2-4*ce.diagramMarginX).attr("y",We.starty+ce.diagramMarginY),(0,S.a$)(Ut,hr,$e,ce.useMaxWidth);const He=xe?60:0;Ut.attr("viewBox",We.startx-ce.diagramMarginX+" -"+(ce.diagramMarginY+He)+" "+$e+" "+(hr+He)),Pt.Rm.debug("models:",We)},"draw")},D={parser:Ge,db:mt,renderer:E,styles:(0,Pt.K2)(v=>`.person {\n    stroke: ${v.personBorder};\n    fill: ${v.personBkg};\n  }\n`,"getStyles"),init:(0,Pt.K2)(({c4:v,wrap:b})=>{E.setConf(v),mt.setWrap(b)},"init")}},72876:(Ja,vr,R)=>{"use strict";R.r(vr),R.d(vr,{render:()=>we});var ot=R(89204),ee=R(98954),S=(R(36384),R(87452)),Pt=R(32239),At=(R(19753),R(59355),R(52052),R(79006)),wt=R(32303),Ge=R(42335),dt=R(46865),Rt=R(61823),q=new Map,ar=new Map,Ke=new Map,cr=(0,wt.K2)(()=>{ar.clear(),Ke.clear(),q.clear()},"clear"),Rr=(0,wt.K2)((X,ae)=>{const w=ar.get(ae)||[];return wt.Rm.trace("In isDescendant",ae," ",X," = ",w.includes(X)),w.includes(X)},"isDescendant"),wr=(0,wt.K2)((X,ae)=>{const w=ar.get(ae)||[];return wt.Rm.info("Descendants of ",ae," is ",w),wt.Rm.info("Edge is ",X),X.v!==ae&&X.w!==ae&&(w?w.includes(X.v)||Rr(X.v,ae)||Rr(X.w,ae)||w.includes(X.w):(wt.Rm.debug("Tilt, ",ae,",not in descendants"),!1))},"edgeInCluster"),Vr=(0,wt.K2)((X,ae,w,re)=>{wt.Rm.warn("Copying children of ",X,"root",re,"data",ae.node(X),re);const It=ae.children(X)||[];X!==re&&It.push(X),wt.Rm.warn("Copying (nodes) clusterId",X,"nodes",It),It.forEach(qt=>{if(ae.children(qt).length>0)Vr(qt,ae,w,re);else{const V=ae.node(qt);wt.Rm.info("cp ",qt," to ",re," with parent ",X),w.setNode(qt,V),re!==ae.parent(qt)&&(wt.Rm.warn("Setting parent",qt,ae.parent(qt)),w.setParent(qt,ae.parent(qt))),X!==re&&qt!==X?(wt.Rm.debug("Setting parent",qt,X),w.setParent(qt,X)):(wt.Rm.info("In copy ",X,"root",re,"data",ae.node(X),re),wt.Rm.debug("Not Setting parent for node=",qt,"cluster!==rootId",X!==re,"node!==clusterId",qt!==X));const pt=ae.edges(qt);wt.Rm.debug("Copying Edges",pt),pt.forEach(H=>{wt.Rm.info("Edge",H);const Nt=ae.edge(H.v,H.w,H.name);wt.Rm.info("Edge data",Nt,re);try{wr(H,re)?(wt.Rm.info("Copying as ",H.v,H.w,Nt,H.name),w.setEdge(H.v,H.w,Nt,H.name),wt.Rm.info("newGraph edges ",w.edges(),w.edge(w.edges()[0]))):wt.Rm.info("Skipping copy of edge ",H.v,"--\x3e",H.w," rootId: ",re," clusterId:",X)}catch(St){wt.Rm.error(St)}})}wt.Rm.debug("Removing node",qt),ae.removeNode(qt)})},"copy"),ra=(0,wt.K2)((X,ae)=>{const w=ae.children(X);let re=[...w];for(const It of w)Ke.set(It,X),re=[...re,...ra(It,ae)];return re},"extractDescendants"),Nr=(0,wt.K2)((X,ae,w)=>{const re=X.edges().filter(H=>H.v===ae||H.w===ae),It=X.edges().filter(H=>H.v===w||H.w===w),qt=re.map(H=>({v:H.v===ae?w:H.v,w:H.w===ae?ae:H.w})),V=It.map(H=>({v:H.v,w:H.w}));return qt.filter(H=>V.some(Nt=>H.v===Nt.v&&H.w===Nt.w))},"findCommonEdges"),Fr=(0,wt.K2)((X,ae,w)=>{const re=ae.children(X);if(wt.Rm.trace("Searching children of id ",X,re),re.length<1)return X;let It;for(const qt of re){const V=Fr(qt,ae,w),pt=Nr(ae,w,V);if(V){if(!(pt.length>0))return V;It=V}}return It},"findNonClusterChild"),Se=(0,wt.K2)(X=>q.has(X)&&q.get(X).externalConnections&&q.has(X)?q.get(X).id:X,"getAnchorId"),Or=(0,wt.K2)((X,ae)=>{if(!X||ae>10)wt.Rm.debug("Opting out, no graph ");else{wt.Rm.debug("Opting in, graph "),X.nodes().forEach(function(w){X.children(w).length>0&&(wt.Rm.warn("Cluster identified",w," Replacement id in edges: ",Fr(w,X,w)),ar.set(w,ra(w,X)),q.set(w,{id:Fr(w,X,w),clusterData:X.node(w)}))}),X.nodes().forEach(function(w){const re=X.children(w),It=X.edges();re.length>0?(wt.Rm.debug("Cluster identified",w,ar),It.forEach(qt=>{Rr(qt.v,w)^Rr(qt.w,w)&&(wt.Rm.warn("Edge: ",qt," leaves cluster ",w),wt.Rm.warn("Descendants of XXX ",w,": ",ar.get(w)),q.get(w).externalConnections=!0)})):wt.Rm.debug("Not a cluster ",w,ar)});for(let w of q.keys()){const re=q.get(w).id,It=X.parent(re);It!==w&&q.has(It)&&!q.get(It).externalConnections&&(q.get(w).id=It)}X.edges().forEach(function(w){const re=X.edge(w);wt.Rm.warn("Edge "+w.v+" -> "+w.w+": "+JSON.stringify(w)),wt.Rm.warn("Edge "+w.v+" -> "+w.w+": "+JSON.stringify(X.edge(w)));let It=w.v,qt=w.w;if(wt.Rm.warn("Fix XXX",q,"ids:",w.v,w.w,"Translating: ",q.get(w.v)," --- ",q.get(w.w)),q.get(w.v)||q.get(w.w)){if(wt.Rm.warn("Fixing and trying - removing XXX",w.v,w.w,w.name),It=Se(w.v),qt=Se(w.w),X.removeEdge(w.v,w.w,w.name),It!==w.v){const V=X.parent(It);q.get(V).externalConnections=!0,re.fromCluster=w.v}if(qt!==w.w){const V=X.parent(qt);q.get(V).externalConnections=!0,re.toCluster=w.w}wt.Rm.warn("Fix Replacing with XXX",It,qt,w.name),X.setEdge(It,qt,re,w.name)}}),wt.Rm.warn("Adjusted Graph",dt.M(X)),je(X,0),wt.Rm.trace(q)}},"adjustClustersAndEdges"),je=(0,wt.K2)((X,ae)=>{if(wt.Rm.warn("extractor - ",ae,dt.M(X),X.children("D")),ae>10)return void wt.Rm.error("Bailing out");let w=X.nodes(),re=!1;for(const It of w){const qt=X.children(It);re=re||qt.length>0}if(re){wt.Rm.debug("Nodes = ",w,ae);for(const It of w)if(wt.Rm.debug("Extracting node",It,q,q.has(It)&&!q.get(It).externalConnections,!X.parent(It),X.node(It),X.children("D")," Depth ",ae),q.has(It))if(!q.get(It).externalConnections&&X.children(It)&&X.children(It).length>0){wt.Rm.warn("Cluster without external connections, without a parent and with children",It,ae);let V="TB"===X.graph().rankdir?"LR":"TB";q.get(It)?.clusterData?.dir&&(V=q.get(It).clusterData.dir,wt.Rm.warn("Fixing dir",q.get(It).clusterData.dir,V));const pt=new Rt.T({multigraph:!0,compound:!0}).setGraph({rankdir:V,nodesep:50,ranksep:50,marginx:8,marginy:8}).setDefaultEdgeLabel(function(){return{}});wt.Rm.warn("Old graph before copy",dt.M(X)),Vr(It,X,pt,It),X.setNode(It,{clusterNode:!0,id:It,clusterData:q.get(It).clusterData,label:q.get(It).label,graph:pt}),wt.Rm.warn("New graph after copy node: (",It,")",dt.M(pt)),wt.Rm.debug("Old graph after copy",dt.M(X))}else wt.Rm.warn("Cluster ** ",It," **not meeting the criteria !externalConnections:",!q.get(It).externalConnections," no parent: ",!X.parent(It)," children ",X.children(It)&&X.children(It).length>0,X.children("D"),ae),wt.Rm.debug(q);else wt.Rm.debug("Not a cluster",It,ae);w=X.nodes(),wt.Rm.warn("New list of nodes",w);for(const It of w){const qt=X.node(It);wt.Rm.warn(" Now next level",It,qt),qt?.clusterNode&&je(qt.graph,ae+1)}}else wt.Rm.debug("Done, no node has children",X.nodes())},"extractor"),z=(0,wt.K2)((X,ae)=>{if(0===ae.length)return[];let w=Object.assign([],ae);return ae.forEach(re=>{const It=X.children(re),qt=z(X,It);w=[...w,...qt]}),w},"sorter"),ft=(0,wt.K2)(X=>z(X,X.children()),"sortNodesByHierarchy"),Bt=(0,wt.K2)(function(){var X=(0,ot.A)(function*(ae,w,re,It,qt,V){wt.Rm.warn("Graph in recursive render:XAX",dt.M(w),qt);const pt=w.graph().rankdir;wt.Rm.trace("Dir in recursive render - dir:",pt);const H=ae.insert("g").attr("class","root");w.nodes()?wt.Rm.info("Recursive render XXX",w.nodes()):wt.Rm.info("No nodes found for",w),w.edges().length>0&&wt.Rm.info("Recursive edges",w.edge(w.edges()[0]));const Nt=H.insert("g").attr("class","clusters"),St=H.insert("g").attr("class","edgePaths"),$t=H.insert("g").attr("class","edgeLabels"),ye=H.insert("g").attr("class","nodes");yield Promise.all(w.nodes().map(function(){var qe=(0,ot.A)(function*(ze){const Et=w.node(ze);if(void 0!==qt){const Tt=JSON.parse(JSON.stringify(qt.clusterData));wt.Rm.trace("Setting data for parent cluster XXX\n Node.id = ",ze,"\n data=",Tt.height,"\nParent cluster",qt.height),w.setNode(qt.id,Tt),w.parent(ze)||(wt.Rm.trace("Setting parent",ze,qt.id),w.setParent(ze,qt.id,Tt))}if(wt.Rm.info("(Insert) Node XXX"+ze+": "+JSON.stringify(w.node(ze))),Et?.clusterNode){wt.Rm.info("Cluster identified XBX",ze,Et.width,w.node(ze));const{ranksep:Tt,nodesep:B}=w.graph();Et.graph.setGraph({...Et.graph.graph(),ranksep:Tt+25,nodesep:B});const F=yield Bt(ye,Et.graph,re,It,w.node(ze),V),et=F.elem;(0,S.lC)(Et,et),Et.diff=F.diff||0,wt.Rm.info("New compound node after recursive render XAX",ze,"width",Et.width,"height",Et.height),(0,S.U7)(et,Et)}else w.children(ze).length>0?(wt.Rm.trace("Cluster - the non recursive path XBX",ze,Et.id,Et,Et.width,"Graph:",w),wt.Rm.trace(Fr(Et.id,w)),q.set(Et.id,{id:Fr(Et.id,w),node:Et})):(wt.Rm.trace("Node - the non recursive path XAX",ze,ye,w.node(ze),pt),yield(0,S.on)(ye,w.node(ze),{config:V,dir:pt}))});return function(ze){return qe.apply(this,arguments)}}())),yield(0,wt.K2)((0,ot.A)(function*(){const qe=w.edges().map(function(){var ze=(0,ot.A)(function*(Et){const Tt=w.edge(Et.v,Et.w,Et.name);wt.Rm.info("Edge "+Et.v+" -> "+Et.w+": "+JSON.stringify(Et)),wt.Rm.info("Edge "+Et.v+" -> "+Et.w+": ",Et," ",JSON.stringify(w.edge(Et))),wt.Rm.info("Fix",q,"ids:",Et.v,Et.w,"Translating: ",q.get(Et.v),q.get(Et.w)),yield(0,ee.jP)($t,Tt)});return function(Et){return ze.apply(this,arguments)}}());yield Promise.all(qe)}),"processEdges")(),wt.Rm.info("Graph before layout:",JSON.stringify(dt.M(w))),wt.Rm.info("############################################# XXX"),wt.Rm.info("###                Layout                 ### XXX"),wt.Rm.info("############################################# XXX"),(0,Ge.Zp)(w),wt.Rm.info("Graph after layout:",JSON.stringify(dt.M(w)));let Pe=0,{subGraphTitleTotalMargin:oe}=(0,Pt.O)(V);return yield Promise.all(ft(w).map(function(){var qe=(0,ot.A)(function*(ze){const Et=w.node(ze);if(wt.Rm.info("Position XBX => "+ze+": ("+Et.x,","+Et.y,") width: ",Et.width," height: ",Et.height),Et?.clusterNode)Et.y+=oe,wt.Rm.info("A tainted cluster node XBX1",ze,Et.id,Et.width,Et.height,Et.x,Et.y,w.parent(ze)),q.get(Et.id).node=Et,(0,S.U_)(Et);else if(w.children(ze).length>0){wt.Rm.info("A pure cluster node XBX1",ze,Et.id,Et.x,Et.y,Et.width,Et.height,w.parent(ze)),Et.height+=oe,w.node(Et.parentId);const Tt=Et?.padding/2||0,B=Et?.labelBBox?.height||0;wt.Rm.debug("OffsetY",B-Tt||0,"labelHeight",B,"halfPadding",Tt),yield(0,S.U)(Nt,Et),q.get(Et.id).node=Et}else{const Tt=w.node(Et.parentId);Et.y+=oe/2,wt.Rm.info("A regular node XBX1 - using the padding",Et.id,"parent",Et.parentId,Et.width,Et.height,Et.x,Et.y,"offsetY",Et.offsetY,"parent",Tt,Tt?.offsetY,Et),(0,S.U_)(Et)}});return function(ze){return qe.apply(this,arguments)}}())),w.edges().forEach(function(qe){const ze=w.edge(qe);wt.Rm.info("Edge "+qe.v+" -> "+qe.w+": "+JSON.stringify(ze),ze),ze.points.forEach(F=>F.y+=oe/2);const Et=w.node(qe.v);var Tt=w.node(qe.w);const B=(0,ee.Jo)(St,ze,q,re,Et,Tt,It);(0,ee.T_)(ze,B)}),w.nodes().forEach(function(qe){const ze=w.node(qe);wt.Rm.info(qe,ze.type,ze.diff),ze.isGroup&&(Pe=ze.diff)}),wt.Rm.warn("Returning from recursive render XAX",H,Pe),{elem:H,diff:Pe}});return function(ae,w,re,It,qt,V){return X.apply(this,arguments)}}(),"recursiveRender"),we=(0,wt.K2)(function(){var X=(0,ot.A)(function*(ae,w){const re=new Rt.T({multigraph:!0,compound:!0}).setGraph({rankdir:ae.direction,nodesep:ae.config?.nodeSpacing||ae.config?.flowchart?.nodeSpacing||ae.nodeSpacing,ranksep:ae.config?.rankSpacing||ae.config?.flowchart?.rankSpacing||ae.rankSpacing,marginx:8,marginy:8}).setDefaultEdgeLabel(function(){return{}}),It=w.select("g");(0,ee.g0)(It,ae.markers,ae.type,ae.diagramId),(0,S.gh)(),(0,ee.IU)(),(0,S.IU)(),cr(),ae.nodes.forEach(V=>{re.setNode(V.id,{...V}),V.parentId&&re.setParent(V.id,V.parentId)}),wt.Rm.debug("Edges:",ae.edges),ae.edges.forEach(V=>{if(V.start===V.end){const pt=V.start,H=pt+"---"+pt+"---1",Nt=pt+"---"+pt+"---2",St=re.node(pt);re.setNode(H,{domId:H,id:H,parentId:St.parentId,labelStyle:"",label:"",padding:0,shape:"labelRect",style:"",width:10,height:10}),re.setParent(H,St.parentId),re.setNode(Nt,{domId:Nt,id:Nt,parentId:St.parentId,labelStyle:"",padding:0,shape:"labelRect",label:"",style:"",width:10,height:10}),re.setParent(Nt,St.parentId);const $t=structuredClone(V),ye=structuredClone(V),le=structuredClone(V);$t.label="",$t.arrowTypeEnd="none",$t.id=pt+"-cyclic-special-1",ye.arrowTypeStart="none",ye.arrowTypeEnd="none",ye.id=pt+"-cyclic-special-mid",le.label="",St.isGroup&&($t.fromCluster=pt,le.toCluster=pt),le.id=pt+"-cyclic-special-2",le.arrowTypeStart="none",re.setEdge(pt,H,$t,pt+"-cyclic-special-0"),re.setEdge(H,Nt,ye,pt+"-cyclic-special-1"),re.setEdge(Nt,pt,le,pt+"-cyc<lic-special-2")}else re.setEdge(V.start,V.end,{...V},V.id)}),wt.Rm.warn("Graph at first:",JSON.stringify(dt.M(re))),Or(re),wt.Rm.warn("Graph after XAX:",JSON.stringify(dt.M(re)));const qt=(0,At.D7)();yield Bt(It,re,ae.type,ae.diagramId,void 0,qt)});return function(ae,w){return X.apply(this,arguments)}}(),"render")},73302:(Ja,vr,R)=>{"use strict";vr.Qi=vr.XO=void 0;const ee=R(30362),L=R(94221),S=R(52240);var Pt,At;(At=Pt||(vr.XO=Pt={})).None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:S.Event.None}),At.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:S.Event.None}),At.is=function wt(Ge){const dt=Ge;return dt&&(dt===At.None||dt===At.Cancelled||L.boolean(dt.isCancellationRequested)&&!!dt.onCancellationRequested)};const ut=Object.freeze(function(At,wt){const Ge=(0,ee.default)().timer.setTimeout(At.bind(wt),0);return{dispose(){Ge.dispose()}}});class ${constructor(){this._isCancelled=!1}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?ut:(this._emitter||(this._emitter=new S.Emitter),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=void 0)}}vr.Qi=class A{get token(){return this._token||(this._token=new $),this._token}cancel(){this._token?this._token.cancel():this._token=Pt.Cancelled}dispose(){this._token?this._token instanceof $&&this._token.dispose():this._token=Pt.None}}},73362:(Ja,vr,R)=>{"use strict";R.r(vr),R.d(vr,{diagram:()=>Rt});var ot=R(89204),ee=R(95721),L=R(69664),S=R(79006),Pt=R(32303),ut=R(62233),A={version:ee.n.version+""},Rt={parser:{parse:(0,Pt.K2)(function(){var q=(0,ot.A)(function*(ar){const Ke=yield(0,ut.qg)("info",ar);Pt.Rm.debug(Ke)});return function(ar){return q.apply(this,arguments)}}(),"parse")},db:{getVersion:(0,Pt.K2)(()=>A.version,"getVersion")},renderer:{draw:(0,Pt.K2)((q,ar,Ke)=>{Pt.Rm.debug("rendering info diagram\n"+q);const cr=(0,L.D)(ar);(0,S.a$)(cr,100,400,!0),cr.append("g").append("text").attr("x",100).attr("y",40).attr("class","version").attr("font-size",32).style("text-anchor","middle").text(`v${Ke}`)},"draw")}}},73986:(Ja,vr,R)=>{"use strict";vr.J=void 0;var ee=R(4787);function S(A){return A.replace(ee.ctrlCharactersRegex,"").replace(ee.htmlEntitiesRegex,function(wt,Ge){return String.fromCharCode(Ge)})}function ut(A){try{return decodeURIComponent(A)}catch{return A}}vr.J=function $(A){if(!A)return ee.BLANK_URL;var At,wt=ut(A.trim());do{At=(wt=ut(wt=S(wt).replace(ee.htmlCtrlEntityRegex,"").replace(ee.ctrlCharactersRegex,"").replace(ee.whitespaceEscapeCharsRegex,"").trim())).match(ee.ctrlCharactersRegex)||wt.match(ee.htmlEntitiesRegex)||wt.match(ee.htmlCtrlEntityRegex)||wt.match(ee.whitespaceEscapeCharsRegex)}while(At&&At.length>0);var Ge=wt;if(!Ge)return ee.BLANK_URL;if(function L(A){return ee.relativeFirstCharacters.indexOf(A[0])>-1}(Ge))return Ge;var dt=Ge.trimStart(),Rt=dt.match(ee.urlSchemeRegex);if(!Rt)return Ge;var q=Rt[0].toLowerCase().trim();if(ee.invalidProtocolRegex.test(q))return ee.BLANK_URL;var ar=dt.replace(/\\/g,"/");if("mailto:"===q||q.includes("://"))return ar;if("http:"===q||"https:"===q){if(!function Pt(A){return URL.canParse(A)}(ar))return ee.BLANK_URL;var Ke=new URL(ar);return Ke.protocol=Ke.protocol.toLowerCase(),Ke.hostname=Ke.hostname.toLowerCase(),Ke.toString()}return ar}},76765:(Ja,vr,R)=>{"use strict";R.r(vr),R.d(vr,{diagram:()=>I});var ot=R(52052),ee=R(79006),L=R(32303),S=R(73986),Pt=R(49645),ut=R(64693),$=R(30001),A=R(37355),At=R(40622),wt=function(){var m=(0,L.K2)(function(Qr,lr,dr,W){for(dr=dr||{},W=Qr.length;W--;dr[Qr[W]]=lr);return dr},"o"),D=[6,8,10,12,13,14,15,16,17,18,20,21,22,23,24,25,26,27,28,29,30,31,33,35,36,38,40],v=[1,26],b=[1,27],C=[1,28],P=[1,29],Q=[1,30],xt=[1,31],Vt=[1,32],jt=[1,33],Ut=[1,34],Wt=[1,9],xe=[1,10],Xe=[1,11],We=[1,12],gr=[1,13],hr=[1,14],_r=[1,15],$e=[1,16],He=[1,19],Ar=[1,20],kr=[1,21],zr=[1,22],Er=[1,23],Jr=[1,25],Br=[1,35],ha={trace:(0,L.K2)(function(){},"trace"),yy:{},symbols_:{error:2,start:3,gantt:4,document:5,EOF:6,line:7,SPACE:8,statement:9,NL:10,weekday:11,weekday_monday:12,weekday_tuesday:13,weekday_wednesday:14,weekday_thursday:15,weekday_friday:16,weekday_saturday:17,weekday_sunday:18,weekend:19,weekend_friday:20,weekend_saturday:21,dateFormat:22,inclusiveEndDates:23,topAxis:24,axisFormat:25,tickInterval:26,excludes:27,includes:28,todayMarker:29,title:30,acc_title:31,acc_title_value:32,acc_descr:33,acc_descr_value:34,acc_descr_multiline_value:35,section:36,clickStatement:37,taskTxt:38,taskData:39,click:40,callbackname:41,callbackargs:42,href:43,clickStatementDebug:44,$accept:0,$end:1},terminals_:{2:"error",4:"gantt",6:"EOF",8:"SPACE",10:"NL",12:"weekday_monday",13:"weekday_tuesday",14:"weekday_wednesday",15:"weekday_thursday",16:"weekday_friday",17:"weekday_saturday",18:"weekday_sunday",20:"weekend_friday",21:"weekend_saturday",22:"dateFormat",23:"inclusiveEndDates",24:"topAxis",25:"axisFormat",26:"tickInterval",27:"excludes",28:"includes",29:"todayMarker",30:"title",31:"acc_title",32:"acc_title_value",33:"acc_descr",34:"acc_descr_value",35:"acc_descr_multiline_value",36:"section",38:"taskTxt",39:"taskData",40:"click",41:"callbackname",42:"callbackargs",43:"href"},productions_:[0,[3,3],[5,0],[5,2],[7,2],[7,1],[7,1],[7,1],[11,1],[11,1],[11,1],[11,1],[11,1],[11,1],[11,1],[19,1],[19,1],[9,1],[9,1],[9,1],[9,1],[9,1],[9,1],[9,1],[9,1],[9,1],[9,1],[9,1],[9,2],[9,2],[9,1],[9,1],[9,1],[9,2],[37,2],[37,3],[37,3],[37,4],[37,3],[37,4],[37,2],[44,2],[44,3],[44,3],[44,4],[44,3],[44,4],[44,2]],performAction:(0,L.K2)(function(lr,dr,W,Yt,Ye,Ne,Tr){var yr=Ne.length-1;switch(Ye){case 1:return Ne[yr-1];case 2:case 6:case 7:this.$=[];break;case 3:Ne[yr-1].push(Ne[yr]),this.$=Ne[yr-1];break;case 4:case 5:this.$=Ne[yr];break;case 8:Yt.setWeekday("monday");break;case 9:Yt.setWeekday("tuesday");break;case 10:Yt.setWeekday("wednesday");break;case 11:Yt.setWeekday("thursday");break;case 12:Yt.setWeekday("friday");break;case 13:Yt.setWeekday("saturday");break;case 14:Yt.setWeekday("sunday");break;case 15:Yt.setWeekend("friday");break;case 16:Yt.setWeekend("saturday");break;case 17:Yt.setDateFormat(Ne[yr].substr(11)),this.$=Ne[yr].substr(11);break;case 18:Yt.enableInclusiveEndDates(),this.$=Ne[yr].substr(18);break;case 19:Yt.TopAxis(),this.$=Ne[yr].substr(8);break;case 20:Yt.setAxisFormat(Ne[yr].substr(11)),this.$=Ne[yr].substr(11);break;case 21:Yt.setTickInterval(Ne[yr].substr(13)),this.$=Ne[yr].substr(13);break;case 22:Yt.setExcludes(Ne[yr].substr(9)),this.$=Ne[yr].substr(9);break;case 23:Yt.setIncludes(Ne[yr].substr(9)),this.$=Ne[yr].substr(9);break;case 24:Yt.setTodayMarker(Ne[yr].substr(12)),this.$=Ne[yr].substr(12);break;case 27:Yt.setDiagramTitle(Ne[yr].substr(6)),this.$=Ne[yr].substr(6);break;case 28:this.$=Ne[yr].trim(),Yt.setAccTitle(this.$);break;case 29:case 30:this.$=Ne[yr].trim(),Yt.setAccDescription(this.$);break;case 31:Yt.addSection(Ne[yr].substr(8)),this.$=Ne[yr].substr(8);break;case 33:Yt.addTask(Ne[yr-1],Ne[yr]),this.$="task";break;case 34:this.$=Ne[yr-1],Yt.setClickEvent(Ne[yr-1],Ne[yr],null);break;case 35:this.$=Ne[yr-2],Yt.setClickEvent(Ne[yr-2],Ne[yr-1],Ne[yr]);break;case 36:this.$=Ne[yr-2],Yt.setClickEvent(Ne[yr-2],Ne[yr-1],null),Yt.setLink(Ne[yr-2],Ne[yr]);break;case 37:this.$=Ne[yr-3],Yt.setClickEvent(Ne[yr-3],Ne[yr-2],Ne[yr-1]),Yt.setLink(Ne[yr-3],Ne[yr]);break;case 38:this.$=Ne[yr-2],Yt.setClickEvent(Ne[yr-2],Ne[yr],null),Yt.setLink(Ne[yr-2],Ne[yr-1]);break;case 39:this.$=Ne[yr-3],Yt.setClickEvent(Ne[yr-3],Ne[yr-1],Ne[yr]),Yt.setLink(Ne[yr-3],Ne[yr-2]);break;case 40:this.$=Ne[yr-1],Yt.setLink(Ne[yr-1],Ne[yr]);break;case 41:case 47:this.$=Ne[yr-1]+" "+Ne[yr];break;case 42:case 43:case 45:this.$=Ne[yr-2]+" "+Ne[yr-1]+" "+Ne[yr];break;case 44:case 46:this.$=Ne[yr-3]+" "+Ne[yr-2]+" "+Ne[yr-1]+" "+Ne[yr]}},"anonymous"),table:[{3:1,4:[1,2]},{1:[3]},m(D,[2,2],{5:3}),{6:[1,4],7:5,8:[1,6],9:7,10:[1,8],11:17,12:v,13:b,14:C,15:P,16:Q,17:xt,18:Vt,19:18,20:jt,21:Ut,22:Wt,23:xe,24:Xe,25:We,26:gr,27:hr,28:_r,29:$e,30:He,31:Ar,33:kr,35:zr,36:Er,37:24,38:Jr,40:Br},m(D,[2,7],{1:[2,1]}),m(D,[2,3]),{9:36,11:17,12:v,13:b,14:C,15:P,16:Q,17:xt,18:Vt,19:18,20:jt,21:Ut,22:Wt,23:xe,24:Xe,25:We,26:gr,27:hr,28:_r,29:$e,30:He,31:Ar,33:kr,35:zr,36:Er,37:24,38:Jr,40:Br},m(D,[2,5]),m(D,[2,6]),m(D,[2,17]),m(D,[2,18]),m(D,[2,19]),m(D,[2,20]),m(D,[2,21]),m(D,[2,22]),m(D,[2,23]),m(D,[2,24]),m(D,[2,25]),m(D,[2,26]),m(D,[2,27]),{32:[1,37]},{34:[1,38]},m(D,[2,30]),m(D,[2,31]),m(D,[2,32]),{39:[1,39]},m(D,[2,8]),m(D,[2,9]),m(D,[2,10]),m(D,[2,11]),m(D,[2,12]),m(D,[2,13]),m(D,[2,14]),m(D,[2,15]),m(D,[2,16]),{41:[1,40],43:[1,41]},m(D,[2,4]),m(D,[2,28]),m(D,[2,29]),m(D,[2,33]),m(D,[2,34],{42:[1,42],43:[1,43]}),m(D,[2,40],{41:[1,44]}),m(D,[2,35],{43:[1,45]}),m(D,[2,36]),m(D,[2,38],{42:[1,46]}),m(D,[2,37]),m(D,[2,39])],defaultActions:{},parseError:(0,L.K2)(function(lr,dr){if(!dr.recoverable){var W=new Error(lr);throw W.hash=dr,W}this.trace(lr)},"parseError"),parse:(0,L.K2)(function(lr){var dr=this,W=[0],Yt=[],Ye=[null],Ne=[],Tr=this.table,yr="",da=0,Pa=0,Ia=0,ba=Ne.slice.call(arguments,1),sa=Object.create(this.lexer),Sa={yy:{}};for(var ea in this.yy)Object.prototype.hasOwnProperty.call(this.yy,ea)&&(Sa.yy[ea]=this.yy[ea]);sa.setInput(lr,Sa.yy),Sa.yy.lexer=sa,Sa.yy.parser=this,typeof sa.yylloc>"u"&&(sa.yylloc={});var Va=sa.yylloc;Ne.push(Va);var pr=sa.options&&sa.options.ranges;function nr(){var Ct;return"number"!=typeof(Ct=Yt.pop()||sa.lex()||1)&&(Ct instanceof Array&&(Ct=(Yt=Ct).pop()),Ct=dr.symbols_[Ct]||Ct),Ct}this.parseError="function"==typeof Sa.yy.parseError?Sa.yy.parseError:Object.getPrototypeOf(this).parseError,(0,L.K2)(function Ua(Ct){W.length=W.length-2*Ct,Ye.length=Ye.length-Ct,Ne.length=Ne.length-Ct},"popStack"),(0,L.K2)(nr,"lex");for(var Oa,Ka,ti,_a,Ha,hi,Ce,Fe,oa={};;){if(this.defaultActions[ti=W[W.length-1]]?_a=this.defaultActions[ti]:((null===Oa||typeof Oa>"u")&&(Oa=nr()),_a=Tr[ti]&&Tr[ti][Oa]),typeof _a>"u"||!_a.length||!_a[0]){var at;for(hi in Fe=[],Tr[ti])this.terminals_[hi]&&hi>2&&Fe.push("'"+this.terminals_[hi]+"'");at=sa.showPosition?"Parse error on line "+(da+1)+":\n"+sa.showPosition()+"\nExpecting "+Fe.join(", ")+", got '"+(this.terminals_[Oa]||Oa)+"'":"Parse error on line "+(da+1)+": Unexpected "+(1==Oa?"end of input":"'"+(this.terminals_[Oa]||Oa)+"'"),this.parseError(at,{text:sa.match,token:this.terminals_[Oa]||Oa,line:sa.yylineno,loc:Va,expected:Fe})}if(_a[0]instanceof Array&&_a.length>1)throw new Error("Parse Error: multiple actions possible at state: "+ti+", token: "+Oa);switch(_a[0]){case 1:W.push(Oa),Ye.push(sa.yytext),Ne.push(sa.yylloc),W.push(_a[1]),Oa=null,Ka?(Oa=Ka,Ka=null):(Pa=sa.yyleng,yr=sa.yytext,da=sa.yylineno,Va=sa.yylloc,Ia>0&&Ia--);break;case 2:if(oa.$=Ye[Ye.length-(Ce=this.productions_[_a[1]][1])],oa._$={first_line:Ne[Ne.length-(Ce||1)].first_line,last_line:Ne[Ne.length-1].last_line,first_column:Ne[Ne.length-(Ce||1)].first_column,last_column:Ne[Ne.length-1].last_column},pr&&(oa._$.range=[Ne[Ne.length-(Ce||1)].range[0],Ne[Ne.length-1].range[1]]),typeof(Ha=this.performAction.apply(oa,[yr,Pa,da,Sa.yy,_a[1],Ye,Ne].concat(ba)))<"u")return Ha;Ce&&(W=W.slice(0,-1*Ce*2),Ye=Ye.slice(0,-1*Ce),Ne=Ne.slice(0,-1*Ce)),W.push(this.productions_[_a[1]][0]),Ye.push(oa.$),Ne.push(oa._$),W.push(Tr[W[W.length-2]][W[W.length-1]]);break;case 3:return!0}}return!0},"parse")};function jr(){this.yy={}}return ha.lexer=function(){return{EOF:1,parseError:(0,L.K2)(function(dr,W){if(!this.yy.parser)throw new Error(dr);this.yy.parser.parseError(dr,W)},"parseError"),setInput:(0,L.K2)(function(lr,dr){return this.yy=dr||this.yy||{},this._input=lr,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},"setInput"),input:(0,L.K2)(function(){var lr=this._input[0];return this.yytext+=lr,this.yyleng++,this.offset++,this.match+=lr,this.matched+=lr,lr.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),lr},"input"),unput:(0,L.K2)(function(lr){var dr=lr.length,W=lr.split(/(?:\r\n?|\n)/g);this._input=lr+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-dr),this.offset-=dr;var Yt=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),W.length-1&&(this.yylineno-=W.length-1);var Ye=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:W?(W.length===Yt.length?this.yylloc.first_column:0)+Yt[Yt.length-W.length].length-W[0].length:this.yylloc.first_column-dr},this.options.ranges&&(this.yylloc.range=[Ye[0],Ye[0]+this.yyleng-dr]),this.yyleng=this.yytext.length,this},"unput"),more:(0,L.K2)(function(){return this._more=!0,this},"more"),reject:(0,L.K2)(function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},"reject"),less:(0,L.K2)(function(lr){this.unput(this.match.slice(lr))},"less"),pastInput:(0,L.K2)(function(){var lr=this.matched.substr(0,this.matched.length-this.match.length);return(lr.length>20?"...":"")+lr.substr(-20).replace(/\n/g,"")},"pastInput"),upcomingInput:(0,L.K2)(function(){var lr=this.match;return lr.length<20&&(lr+=this._input.substr(0,20-lr.length)),(lr.substr(0,20)+(lr.length>20?"...":"")).replace(/\n/g,"")},"upcomingInput"),showPosition:(0,L.K2)(function(){var lr=this.pastInput(),dr=new Array(lr.length+1).join("-");return lr+this.upcomingInput()+"\n"+dr+"^"},"showPosition"),test_match:(0,L.K2)(function(lr,dr){var W,Yt,Ye;if(this.options.backtrack_lexer&&(Ye={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(Ye.yylloc.range=this.yylloc.range.slice(0))),(Yt=lr[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=Yt.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:Yt?Yt[Yt.length-1].length-Yt[Yt.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+lr[0].length},this.yytext+=lr[0],this.match+=lr[0],this.matches=lr,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(lr[0].length),this.matched+=lr[0],W=this.performAction.call(this,this.yy,this,dr,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),W)return W;if(this._backtrack){for(var Ne in Ye)this[Ne]=Ye[Ne];return!1}return!1},"test_match"),next:(0,L.K2)(function(){if(this.done)return this.EOF;var lr,dr,W,Yt;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var Ye=this._currentRules(),Ne=0;Ne<Ye.length;Ne++)if((W=this._input.match(this.rules[Ye[Ne]]))&&(!dr||W[0].length>dr[0].length)){if(dr=W,Yt=Ne,this.options.backtrack_lexer){if(!1!==(lr=this.test_match(W,Ye[Ne])))return lr;if(this._backtrack){dr=!1;continue}return!1}if(!this.options.flex)break}return dr?!1!==(lr=this.test_match(dr,Ye[Yt]))&&lr:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},"next"),lex:(0,L.K2)(function(){return this.next()||this.lex()},"lex"),begin:(0,L.K2)(function(dr){this.conditionStack.push(dr)},"begin"),popState:(0,L.K2)(function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},"popState"),_currentRules:(0,L.K2)(function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},"_currentRules"),topState:(0,L.K2)(function(dr){return(dr=this.conditionStack.length-1-Math.abs(dr||0))>=0?this.conditionStack[dr]:"INITIAL"},"topState"),pushState:(0,L.K2)(function(dr){this.begin(dr)},"pushState"),stateStackSize:(0,L.K2)(function(){return this.conditionStack.length},"stateStackSize"),options:{"case-insensitive":!0},performAction:(0,L.K2)(function(dr,W,Yt,Ye){switch(Yt){case 0:return this.begin("open_directive"),"open_directive";case 1:return this.begin("acc_title"),31;case 2:return this.popState(),"acc_title_value";case 3:return this.begin("acc_descr"),33;case 4:return this.popState(),"acc_descr_value";case 5:this.begin("acc_descr_multiline");break;case 6:case 15:case 18:case 21:case 24:this.popState();break;case 7:return"acc_descr_multiline_value";case 8:case 9:case 10:case 12:case 13:break;case 11:return 10;case 14:this.begin("href");break;case 16:return 43;case 17:this.begin("callbackname");break;case 19:this.popState(),this.begin("callbackargs");break;case 20:return 41;case 22:return 42;case 23:this.begin("click");break;case 25:return 40;case 26:return 4;case 27:return 22;case 28:return 23;case 29:return 24;case 30:return 25;case 31:return 26;case 32:return 28;case 33:return 27;case 34:return 29;case 35:return 12;case 36:return 13;case 37:return 14;case 38:return 15;case 39:return 16;case 40:return 17;case 41:return 18;case 42:return 20;case 43:return 21;case 44:return"date";case 45:return 30;case 46:return"accDescription";case 47:return 36;case 48:return 38;case 49:return 39;case 50:return":";case 51:return 6;case 52:return"INVALID"}},"anonymous"),rules:[/^(?:%%\{)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:%%(?!\{)*[^\n]*)/i,/^(?:[^\}]%%*[^\n]*)/i,/^(?:%%*[^\n]*[\n]*)/i,/^(?:[\n]+)/i,/^(?:\s+)/i,/^(?:%[^\n]*)/i,/^(?:href[\s]+["])/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:call[\s]+)/i,/^(?:\([\s]*\))/i,/^(?:\()/i,/^(?:[^(]*)/i,/^(?:\))/i,/^(?:[^)]*)/i,/^(?:click[\s]+)/i,/^(?:[\s\n])/i,/^(?:[^\s\n]*)/i,/^(?:gantt\b)/i,/^(?:dateFormat\s[^#\n;]+)/i,/^(?:inclusiveEndDates\b)/i,/^(?:topAxis\b)/i,/^(?:axisFormat\s[^#\n;]+)/i,/^(?:tickInterval\s[^#\n;]+)/i,/^(?:includes\s[^#\n;]+)/i,/^(?:excludes\s[^#\n;]+)/i,/^(?:todayMarker\s[^\n;]+)/i,/^(?:weekday\s+monday\b)/i,/^(?:weekday\s+tuesday\b)/i,/^(?:weekday\s+wednesday\b)/i,/^(?:weekday\s+thursday\b)/i,/^(?:weekday\s+friday\b)/i,/^(?:weekday\s+saturday\b)/i,/^(?:weekday\s+sunday\b)/i,/^(?:weekend\s+friday\b)/i,/^(?:weekend\s+saturday\b)/i,/^(?:\d\d\d\d-\d\d-\d\d\b)/i,/^(?:title\s[^\n]+)/i,/^(?:accDescription\s[^#\n;]+)/i,/^(?:section\s[^\n]+)/i,/^(?:[^:\n]+)/i,/^(?::[^#\n;]+)/i,/^(?::)/i,/^(?:$)/i,/^(?:.)/i],conditions:{acc_descr_multiline:{rules:[6,7],inclusive:!1},acc_descr:{rules:[4],inclusive:!1},acc_title:{rules:[2],inclusive:!1},callbackargs:{rules:[21,22],inclusive:!1},callbackname:{rules:[18,19,20],inclusive:!1},href:{rules:[15,16],inclusive:!1},click:{rules:[24,25],inclusive:!1},INITIAL:{rules:[0,1,3,5,8,9,10,11,12,13,14,17,23,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52],inclusive:!0}}}}(),(0,L.K2)(jr,"Parser"),jr.prototype=ha,ha.Parser=jr,new jr}();wt.parser=wt;var Ge=wt;Pt.extend(ut),Pt.extend($),Pt.extend(A);var Ze,de,dt={friday:5,saturday:6},Rt="",q="",ar=void 0,Ke="",cr=[],Rr=[],wr=new Map,Vr=[],ra=[],Nr="",Fr="",Se=["active","done","crit","milestone","vert"],Or=[],je=!1,z=!1,ft="sunday",Bt="saturday",we=0,X=(0,L.K2)(function(){Vr=[],ra=[],Nr="",Or=[],Mt=0,Ze=void 0,de=void 0,mr=[],Rt="",q="",Fr="",ar=void 0,Ke="",cr=[],Rr=[],je=!1,z=!1,we=0,wr=new Map,(0,ee.IU)(),ft="sunday",Bt="saturday"},"clear"),ae=(0,L.K2)(function(m){q=m},"setAxisFormat"),w=(0,L.K2)(function(){return q},"getAxisFormat"),re=(0,L.K2)(function(m){ar=m},"setTickInterval"),It=(0,L.K2)(function(){return ar},"getTickInterval"),qt=(0,L.K2)(function(m){Ke=m},"setTodayMarker"),V=(0,L.K2)(function(){return Ke},"getTodayMarker"),pt=(0,L.K2)(function(m){Rt=m},"setDateFormat"),H=(0,L.K2)(function(){je=!0},"enableInclusiveEndDates"),Nt=(0,L.K2)(function(){return je},"endDatesAreInclusive"),St=(0,L.K2)(function(){z=!0},"enableTopAxis"),$t=(0,L.K2)(function(){return z},"topAxisEnabled"),ye=(0,L.K2)(function(m){Fr=m},"setDisplayMode"),le=(0,L.K2)(function(){return Fr},"getDisplayMode"),Pe=(0,L.K2)(function(){return Rt},"getDateFormat"),oe=(0,L.K2)(function(m){cr=m.toLowerCase().split(/[\s,]+/)},"setIncludes"),qe=(0,L.K2)(function(){return cr},"getIncludes"),ze=(0,L.K2)(function(m){Rr=m.toLowerCase().split(/[\s,]+/)},"setExcludes"),Et=(0,L.K2)(function(){return Rr},"getExcludes"),Tt=(0,L.K2)(function(){return wr},"getLinks"),B=(0,L.K2)(function(m){Nr=m,Vr.push(m)},"addSection"),F=(0,L.K2)(function(){return Vr},"getSections"),et=(0,L.K2)(function(){let m=ve(),v=0;for(;!m&&v<10;)m=ve(),v++;return ra=mr},"getTasks"),mt=(0,L.K2)(function(m,D,v,b){const C=m.format(D.trim()),P=m.format("YYYY-MM-DD");return!b.includes(C)&&!b.includes(P)&&(!((!v.includes("weekends")||m.isoWeekday()!==dt[Bt]&&m.isoWeekday()!==dt[Bt]+1)&&!v.includes(m.format("dddd").toLowerCase()))||v.includes(C)||v.includes(P))},"isInvalidDate"),it=(0,L.K2)(function(m){ft=m},"setWeekday"),rt=(0,L.K2)(function(){return ft},"getWeekday"),_t=(0,L.K2)(function(m){Bt=m},"setWeekend"),ht=(0,L.K2)(function(m,D,v,b){if(!v.length||m.manualEndTime)return;let C,P;C=m.startTime instanceof Date?Pt(m.startTime):Pt(m.startTime,D,!0),C=C.add(1,"d"),P=m.endTime instanceof Date?Pt(m.endTime):Pt(m.endTime,D,!0);const[Q,xt]=Ft(C,P,D,v,b);m.endTime=Q.toDate(),m.renderEndTime=xt},"checkTaskDates"),Ft=(0,L.K2)(function(m,D,v,b,C){let P=!1,Q=null;for(;m<=D;)P||(Q=D.toDate()),P=mt(m,v,b,C),P&&(D=D.add(1,"d")),m=m.add(1,"d");return[D,Q]},"fixTaskDates"),G=(0,L.K2)(function(m,D,v){if(v=v.trim(),("x"===D.trim()||"X"===D.trim())&&/^\d+$/.test(v))return new Date(Number(v));const C=/^after\s+(?<ids>[\d\w- ]+)/.exec(v);if(null!==C){let Q=null;for(const Vt of C.groups.ids.split(" ")){let jt=Ae(Vt);void 0!==jt&&(!Q||jt.endTime>Q.endTime)&&(Q=jt)}if(Q)return Q.endTime;const xt=new Date;return xt.setHours(0,0,0,0),xt}let P=Pt(v,D.trim(),!0);if(P.isValid())return P.toDate();{L.Rm.debug("Invalid date:"+v),L.Rm.debug("With date format:"+D.trim());const Q=new Date(v);if(void 0===Q||isNaN(Q.getTime())||Q.getFullYear()<-1e4||Q.getFullYear()>1e4)throw new Error("Invalid date:"+v);return Q}},"getStartDate"),lt=(0,L.K2)(function(m){const D=/^(\d+(?:\.\d+)?)([Mdhmswy]|ms)$/.exec(m.trim());return null!==D?[Number.parseFloat(D[1]),D[2]]:[NaN,"ms"]},"parseDuration"),ke=(0,L.K2)(function(m,D,v,b=!1){v=v.trim();const P=/^until\s+(?<ids>[\d\w- ]+)/.exec(v);if(null!==P){let Ut=null;for(const xe of P.groups.ids.split(" ")){let Xe=Ae(xe);void 0!==Xe&&(!Ut||Xe.startTime<Ut.startTime)&&(Ut=Xe)}if(Ut)return Ut.startTime;const Wt=new Date;return Wt.setHours(0,0,0,0),Wt}let Q=Pt(v,D.trim(),!0);if(Q.isValid())return b&&(Q=Q.add(1,"d")),Q.toDate();let xt=Pt(m);const[Vt,jt]=lt(v);if(!Number.isNaN(Vt)){const Ut=xt.add(Vt,jt);Ut.isValid()&&(xt=Ut)}return xt.toDate()},"getEndDate"),Mt=0,Zt=(0,L.K2)(function(m){return void 0===m?"task"+(Mt+=1):m},"parseId"),pe=(0,L.K2)(function(m,D){let v;v=":"===D.substr(0,1)?D.substr(1,D.length):D;const b=v.split(","),C={};Hr(b,C,Se);for(let Q=0;Q<b.length;Q++)b[Q]=b[Q].trim();let P="";switch(b.length){case 1:C.id=Zt(),C.startTime=m.endTime,P=b[0];break;case 2:C.id=Zt(),C.startTime=G(void 0,Rt,b[0]),P=b[1];break;case 3:C.id=Zt(b[0]),C.startTime=G(void 0,Rt,b[1]),P=b[2]}return P&&(C.endTime=ke(C.startTime,Rt,P,je),C.manualEndTime=Pt(P,"YYYY-MM-DD",!0).isValid(),ht(C,Rt,Rr,cr)),C},"compileData"),Re=(0,L.K2)(function(m,D){let v;v=":"===D.substr(0,1)?D.substr(1,D.length):D;const b=v.split(","),C={};Hr(b,C,Se);for(let P=0;P<b.length;P++)b[P]=b[P].trim();switch(b.length){case 1:C.id=Zt(),C.startTime={type:"prevTaskEnd",id:m},C.endTime={data:b[0]};break;case 2:C.id=Zt(),C.startTime={type:"getStartDate",startData:b[0]},C.endTime={data:b[1]};break;case 3:C.id=Zt(b[0]),C.startTime={type:"getStartDate",startData:b[1]},C.endTime={data:b[2]}}return C},"parseData"),mr=[],xr={},zt=(0,L.K2)(function(m,D){const v={section:Nr,type:Nr,processed:!1,manualEndTime:!1,renderEndTime:null,raw:{data:D},task:m,classes:[]},b=Re(de,D);v.raw.startTime=b.startTime,v.raw.endTime=b.endTime,v.id=b.id,v.prevTaskId=de,v.active=b.active,v.done=b.done,v.crit=b.crit,v.milestone=b.milestone,v.vert=b.vert,v.order=we,we++;const C=mr.push(v);de=v.id,xr[v.id]=C-1},"addTask"),Ae=(0,L.K2)(function(m){return mr[xr[m]]},"findTaskById"),or=(0,L.K2)(function(m,D){const v={section:Nr,type:Nr,description:m,task:m,classes:[]},b=pe(Ze,D);v.startTime=b.startTime,v.endTime=b.endTime,v.id=b.id,v.active=b.active,v.done=b.done,v.crit=b.crit,v.milestone=b.milestone,v.vert=b.vert,Ze=v,ra.push(v)},"addTaskOrg"),ve=(0,L.K2)(function(){const m=(0,L.K2)(function(v){const b=mr[v];let C="";switch(mr[v].raw.startTime.type){case"prevTaskEnd":{const P=Ae(b.prevTaskId);b.startTime=P.endTime;break}case"getStartDate":C=G(void 0,Rt,mr[v].raw.startTime.startData),C&&(mr[v].startTime=C)}return mr[v].startTime&&(mr[v].endTime=ke(mr[v].startTime,Rt,mr[v].raw.endTime.data,je),mr[v].endTime&&(mr[v].processed=!0,mr[v].manualEndTime=Pt(mr[v].raw.endTime.data,"YYYY-MM-DD",!0).isValid(),ht(mr[v],Rt,Rr,cr))),mr[v].processed},"compileTask");let D=!0;for(const[v,b]of mr.entries())m(v),D=D&&b.processed;return D},"compileTasks"),ce=(0,L.K2)(function(m,D){let v=D;"loose"!==(0,ee.D7)().securityLevel&&(v=(0,S.J)(D)),m.split(",").forEach(function(b){void 0!==Ae(b)&&(er(b,()=>{window.open(v,"_self")}),wr.set(b,v))}),Ee(m,"clickable")},"setLink"),Ee=(0,L.K2)(function(m,D){m.split(",").forEach(function(v){let b=Ae(v);void 0!==b&&b.classes.push(D)})},"setClass"),De=(0,L.K2)(function(m,D,v){if("loose"!==(0,ee.D7)().securityLevel||void 0===D)return;let b=[];if("string"==typeof v){b=v.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/);for(let P=0;P<b.length;P++){let Q=b[P].trim();Q.startsWith('"')&&Q.endsWith('"')&&(Q=Q.substr(1,Q.length-2)),b[P]=Q}}0===b.length&&b.push(m),void 0!==Ae(m)&&er(m,()=>{ot._K.runFunc(D,...b)})},"setClickFun"),er=(0,L.K2)(function(m,D){Or.push(function(){const v=document.querySelector(`[id="${m}"]`);null!==v&&v.addEventListener("click",function(){D()})},function(){const v=document.querySelector(`[id="${m}-text"]`);null!==v&&v.addEventListener("click",function(){D()})})},"pushFun"),Qe=(0,L.K2)(function(m,D,v){m.split(",").forEach(function(b){De(b,D,v)}),Ee(m,"clickable")},"setClickEvent"),Lr=(0,L.K2)(function(m){Or.forEach(function(D){D(m)})},"bindFunctions"),_e={getConfig:(0,L.K2)(()=>(0,ee.D7)().gantt,"getConfig"),clear:X,setDateFormat:pt,getDateFormat:Pe,enableInclusiveEndDates:H,endDatesAreInclusive:Nt,enableTopAxis:St,topAxisEnabled:$t,setAxisFormat:ae,getAxisFormat:w,setTickInterval:re,getTickInterval:It,setTodayMarker:qt,getTodayMarker:V,setAccTitle:ee.SV,getAccTitle:ee.iN,setDiagramTitle:ee.ke,getDiagramTitle:ee.ab,setDisplayMode:ye,getDisplayMode:le,setAccDescription:ee.EI,getAccDescription:ee.m7,addSection:B,getSections:F,getTasks:et,addTask:zt,findTaskById:Ae,addTaskOrg:or,setIncludes:oe,getIncludes:qe,setExcludes:ze,getExcludes:Et,setClickEvent:Qe,setLink:ce,getLinks:Tt,bindFunctions:Lr,parseDuration:lt,isInvalidDate:mt,setWeekday:it,getWeekday:rt,setWeekend:_t};function Hr(m,D,v){let b=!0;for(;b;)b=!1,v.forEach(function(C){const Q=new RegExp("^\\s*"+C+"\\s*$");m[0].match(Q)&&(D[C]=!0,m.shift(1),b=!0)})}(0,L.K2)(Hr,"getTaskTags");var be,sr=(0,L.K2)(function(){L.Rm.debug("Something is calling, setConf, remove the call")},"setConf"),te={monday:At.ABi,tuesday:At.PGu,wednesday:At.GuW,thursday:At.Mol,friday:At.TUC,saturday:At.rGn,sunday:At.YPH},ne=(0,L.K2)((m,D)=>{let v=[...m].map(()=>-1/0),b=[...m].sort((P,Q)=>P.startTime-Q.startTime||P.order-Q.order),C=0;for(const P of b)for(let Q=0;Q<v.length;Q++)if(P.startTime>=v[Q]){v[Q]=P.endTime,P.order=Q+D,Q>C&&(C=Q);break}return C},"getMaxIntersections"),I={parser:Ge,db:_e,renderer:{setConf:sr,draw:(0,L.K2)(function(m,D,v,b){const C=(0,ee.D7)().gantt,P=(0,ee.D7)().securityLevel;let Q;"sandbox"===P&&(Q=(0,At.Ltv)("#i"+D));const xt=(0,At.Ltv)("sandbox"===P?Q.nodes()[0].contentDocument.body:"body"),Vt="sandbox"===P?Q.nodes()[0].contentDocument:document,jt=Vt.getElementById(D);void 0===(be=jt.parentElement.offsetWidth)&&(be=1200),void 0!==C.useWidth&&(be=C.useWidth);const Ut=b.db.getTasks();let Wt=[];for(const Jr of Ut)Wt.push(Jr.type);Wt=Er(Wt);const xe={};let Xe=2*C.topPadding;if("compact"===b.db.getDisplayMode()||"compact"===C.displayMode){const Jr={};for(const ha of Ut)void 0===Jr[ha.section]?Jr[ha.section]=[ha]:Jr[ha.section].push(ha);let Br=0;for(const ha of Object.keys(Jr)){const ia=ne(Jr[ha],Br)+1;Br+=ia,Xe+=ia*(C.barHeight+C.barGap),xe[ha]=ia}}else{Xe+=Ut.length*(C.barHeight+C.barGap);for(const Jr of Wt)xe[Jr]=Ut.filter(Br=>Br.type===Jr).length}jt.setAttribute("viewBox","0 0 "+be+" "+Xe);const We=xt.select(`[id="${D}"]`),gr=(0,At.w7C)().domain([(0,At.jkA)(Ut,function(Jr){return Jr.startTime}),(0,At.T9B)(Ut,function(Jr){return Jr.endTime})]).rangeRound([0,be-C.leftPadding-C.rightPadding]);function hr(Jr,Br){const ha=Jr.startTime,ia=Br.startTime;let jr=0;return ha>ia?jr=1:ha<ia&&(jr=-1),jr}function _r(Jr,Br,ha){const ia=C.barHeight,jr=ia+C.barGap,Qr=C.topPadding,lr=C.leftPadding;(0,At.m4Y)().domain([0,Wt.length]).range(["#00B9FA","#F95002"]).interpolate(At.bEH);He(jr,Qr,lr,0,ha,Jr,b.db.getExcludes(),b.db.getIncludes()),Ar(lr,Qr,0,ha),$e(Jr,jr,Qr,lr,ia,0,Br),kr(jr,Qr),zr(lr,0,0,ha)}function $e(Jr,Br,ha,ia,jr,Qr,lr){Jr.sort((Tr,yr)=>Tr.vert===yr.vert?0:Tr.vert?1:-1);const W=[...new Set(Jr.map(Tr=>Tr.order))].map(Tr=>Jr.find(yr=>yr.order===Tr));We.append("g").selectAll("rect").data(W).enter().append("rect").attr("x",0).attr("y",function(Tr,yr){return Tr.order*Br+ha-2}).attr("width",function(){return lr-C.rightPadding/2}).attr("height",Br).attr("class",function(Tr){for(const[yr,da]of Wt.entries())if(Tr.type===da)return"section section"+yr%C.numberSectionStyles;return"section section0"}).enter();const Yt=We.append("g").selectAll("rect").data(Jr).enter(),Ye=b.db.getLinks();if(Yt.append("rect").attr("id",function(Tr){return Tr.id}).attr("rx",3).attr("ry",3).attr("x",function(Tr){return Tr.milestone?gr(Tr.startTime)+ia+.5*(gr(Tr.endTime)-gr(Tr.startTime))-.5*jr:gr(Tr.startTime)+ia}).attr("y",function(Tr,yr){return Tr.vert?C.gridLineStartPadding:Tr.order*Br+ha}).attr("width",function(Tr){return Tr.milestone?jr:Tr.vert?.08*jr:gr(Tr.renderEndTime||Tr.endTime)-gr(Tr.startTime)}).attr("height",function(Tr){return Tr.vert?Ut.length*(C.barHeight+C.barGap)+2*C.barHeight:jr}).attr("transform-origin",function(Tr,yr){return yr=Tr.order,(gr(Tr.startTime)+ia+.5*(gr(Tr.endTime)-gr(Tr.startTime))).toString()+"px "+(yr*Br+ha+.5*jr).toString()+"px"}).attr("class",function(Tr){let da="";Tr.classes.length>0&&(da=Tr.classes.join(" "));let Pa=0;for(const[Wa,Ma]of Wt.entries())Tr.type===Ma&&(Pa=Wa%C.numberSectionStyles);let Ia="";return Tr.active?Tr.crit?Ia+=" activeCrit":Ia=" active":Tr.done?Ia=Tr.crit?" doneCrit":" done":Tr.crit&&(Ia+=" crit"),0===Ia.length&&(Ia=" task"),Tr.milestone&&(Ia=" milestone "+Ia),Tr.vert&&(Ia=" vert "+Ia),Ia+=Pa,Ia+=" "+da,"task"+Ia}),Yt.append("text").attr("id",function(Tr){return Tr.id+"-text"}).text(function(Tr){return Tr.task}).attr("font-size",C.fontSize).attr("x",function(Tr){let yr=gr(Tr.startTime),da=gr(Tr.renderEndTime||Tr.endTime);if(Tr.milestone&&(yr+=.5*(gr(Tr.endTime)-gr(Tr.startTime))-.5*jr,da=yr+jr),Tr.vert)return gr(Tr.startTime)+ia;const Pa=this.getBBox().width;return Pa>da-yr?da+Pa+1.5*C.leftPadding>lr?yr+ia-5:da+ia+5:(da-yr)/2+yr+ia}).attr("y",function(Tr,yr){return Tr.vert?C.gridLineStartPadding+Ut.length*(C.barHeight+C.barGap)+60:Tr.order*Br+C.barHeight/2+(C.fontSize/2-2)+ha}).attr("text-height",jr).attr("class",function(Tr){const yr=gr(Tr.startTime);let da=gr(Tr.endTime);Tr.milestone&&(da=yr+jr);const Pa=this.getBBox().width;let Ia="";Tr.classes.length>0&&(Ia=Tr.classes.join(" "));let Wa=0;for(const[ba,sa]of Wt.entries())Tr.type===sa&&(Wa=ba%C.numberSectionStyles);let Ma="";return Tr.active&&(Ma=Tr.crit?"activeCritText"+Wa:"activeText"+Wa),Tr.done?Ma=Tr.crit?Ma+" doneCritText"+Wa:Ma+" doneText"+Wa:Tr.crit&&(Ma=Ma+" critText"+Wa),Tr.milestone&&(Ma+=" milestoneText"),Tr.vert&&(Ma+=" vertText"),Pa>da-yr?da+Pa+1.5*C.leftPadding>lr?Ia+" taskTextOutsideLeft taskTextOutside"+Wa+" "+Ma:Ia+" taskTextOutsideRight taskTextOutside"+Wa+" "+Ma+" width-"+Pa:Ia+" taskText taskText"+Wa+" "+Ma+" width-"+Pa}),"sandbox"===(0,ee.D7)().securityLevel){let Tr;Tr=(0,At.Ltv)("#i"+D);const yr=Tr.nodes()[0].contentDocument;Yt.filter(function(da){return Ye.has(da.id)}).each(function(da){var Pa=yr.querySelector("#"+da.id),Ia=yr.querySelector("#"+da.id+"-text");const Wa=Pa.parentNode;var Ma=yr.createElement("a");Ma.setAttribute("xlink:href",Ye.get(da.id)),Ma.setAttribute("target","_top"),Wa.appendChild(Ma),Ma.appendChild(Pa),Ma.appendChild(Ia)})}}function He(Jr,Br,ha,ia,jr,Qr,lr,dr){if(0===lr.length&&0===dr.length)return;let W,Yt;for(const{startTime:Pa,endTime:Ia}of Qr)(void 0===W||Pa<W)&&(W=Pa),(void 0===Yt||Ia>Yt)&&(Yt=Ia);if(!W||!Yt)return;if(Pt(Yt).diff(Pt(W),"year")>5)return void L.Rm.warn("The difference between the min and max time is more than 5 years. This will cause performance issues. Skipping drawing exclude days.");const Ye=b.db.getDateFormat(),Ne=[];let Tr=null,yr=Pt(W);for(;yr.valueOf()<=Yt;)b.db.isInvalidDate(yr,Ye,lr,dr)?Tr?Tr.end=yr:Tr={start:yr,end:yr}:Tr&&(Ne.push(Tr),Tr=null),yr=yr.add(1,"d");We.append("g").selectAll("rect").data(Ne).enter().append("rect").attr("id",Pa=>"exclude-"+Pa.start.format("YYYY-MM-DD")).attr("x",Pa=>gr(Pa.start.startOf("day"))+ha).attr("y",C.gridLineStartPadding).attr("width",Pa=>gr(Pa.end.endOf("day"))-gr(Pa.start.startOf("day"))).attr("height",jr-Br-C.gridLineStartPadding).attr("transform-origin",function(Pa,Ia){return(gr(Pa.start)+ha+.5*(gr(Pa.end)-gr(Pa.start))).toString()+"px "+(Ia*Jr+.5*jr).toString()+"px"}).attr("class","exclude-range")}function Ar(Jr,Br,ha,ia){const jr=b.db.getDateFormat();let lr;lr=b.db.getAxisFormat()||("D"===jr?"%d":C.axisFormat??"%Y-%m-%d");let dr=(0,At.l78)(gr).tickSize(-ia+Br+C.gridLineStartPadding).tickFormat((0,At.DCK)(lr));const Yt=/^([1-9]\d*)(millisecond|second|minute|hour|day|week|month)$/.exec(b.db.getTickInterval()||C.tickInterval);if(null!==Yt){const Ye=Yt[1],Ne=Yt[2],Tr=b.db.getWeekday()||C.weekday;switch(Ne){case"millisecond":dr.ticks(At.t6C.every(Ye));break;case"second":dr.ticks(At.ucG.every(Ye));break;case"minute":dr.ticks(At.wXd.every(Ye));break;case"hour":dr.ticks(At.Agd.every(Ye));break;case"day":dr.ticks(At.UAC.every(Ye));break;case"week":dr.ticks(te[Tr].every(Ye));break;case"month":dr.ticks(At.Ui6.every(Ye))}}if(We.append("g").attr("class","grid").attr("transform","translate("+Jr+", "+(ia-50)+")").call(dr).selectAll("text").style("text-anchor","middle").attr("fill","#000").attr("stroke","none").attr("font-size",10).attr("dy","1em"),b.db.topAxisEnabled()||C.topAxis){let Ye=(0,At.tlR)(gr).tickSize(-ia+Br+C.gridLineStartPadding).tickFormat((0,At.DCK)(lr));if(null!==Yt){const Ne=Yt[1],Tr=Yt[2],yr=b.db.getWeekday()||C.weekday;switch(Tr){case"millisecond":Ye.ticks(At.t6C.every(Ne));break;case"second":Ye.ticks(At.ucG.every(Ne));break;case"minute":Ye.ticks(At.wXd.every(Ne));break;case"hour":Ye.ticks(At.Agd.every(Ne));break;case"day":Ye.ticks(At.UAC.every(Ne));break;case"week":Ye.ticks(te[yr].every(Ne));break;case"month":Ye.ticks(At.Ui6.every(Ne))}}We.append("g").attr("class","grid").attr("transform","translate("+Jr+", "+Br+")").call(Ye).selectAll("text").style("text-anchor","middle").attr("fill","#000").attr("stroke","none").attr("font-size",10)}}function kr(Jr,Br){let ha=0;const ia=Object.keys(xe).map(jr=>[jr,xe[jr]]);We.append("g").selectAll("text").data(ia).enter().append(function(jr){const Qr=jr[0].split(ee.Y2.lineBreakRegex),lr=-(Qr.length-1)/2,dr=Vt.createElementNS("http://www.w3.org/2000/svg","text");dr.setAttribute("dy",lr+"em");for(const[W,Yt]of Qr.entries()){const Ye=Vt.createElementNS("http://www.w3.org/2000/svg","tspan");Ye.setAttribute("alignment-baseline","central"),Ye.setAttribute("x","10"),W>0&&Ye.setAttribute("dy","1em"),Ye.textContent=Yt,dr.appendChild(Ye)}return dr}).attr("x",10).attr("y",function(jr,Qr){if(!(Qr>0))return jr[1]*Jr/2+Br;for(let lr=0;lr<Qr;lr++)return ha+=ia[Qr-1][1],jr[1]*Jr/2+ha*Jr+Br}).attr("font-size",C.sectionFontSize).attr("class",function(jr){for(const[Qr,lr]of Wt.entries())if(jr[0]===lr)return"sectionTitle sectionTitle"+Qr%C.numberSectionStyles;return"sectionTitle"})}function zr(Jr,Br,ha,ia){const jr=b.db.getTodayMarker();if("off"===jr)return;const Qr=We.append("g").attr("class","today"),lr=new Date,dr=Qr.append("line");dr.attr("x1",gr(lr)+Jr).attr("x2",gr(lr)+Jr).attr("y1",C.titleTopMargin).attr("y2",ia-C.titleTopMargin).attr("class","today"),""!==jr&&dr.attr("style",jr.replace(/,/g,";"))}function Er(Jr){const Br={},ha=[];for(let ia=0,jr=Jr.length;ia<jr;++ia)Object.prototype.hasOwnProperty.call(Br,Jr[ia])||(Br[Jr[ia]]=!0,ha.push(Jr[ia]));return ha}(0,L.K2)(hr,"taskCompare"),Ut.sort(hr),_r(Ut,be,Xe),(0,ee.a$)(We,Xe,be,C.useMaxWidth),We.append("text").text(b.db.getDiagramTitle()).attr("x",be/2).attr("y",C.titleTopMargin).attr("class","titleText"),(0,L.K2)(_r,"makeGantt"),(0,L.K2)($e,"drawRects"),(0,L.K2)(He,"drawExcludeDays"),(0,L.K2)(Ar,"makeGrid"),(0,L.K2)(kr,"vertLabels"),(0,L.K2)(zr,"drawToday"),(0,L.K2)(Er,"checkUnique")},"draw")},styles:(0,L.K2)(m=>`\n  .mermaid-main-font {\n        font-family: ${m.fontFamily};\n  }\n\n  .exclude-range {\n    fill: ${m.excludeBkgColor};\n  }\n\n  .section {\n    stroke: none;\n    opacity: 0.2;\n  }\n\n  .section0 {\n    fill: ${m.sectionBkgColor};\n  }\n\n  .section2 {\n    fill: ${m.sectionBkgColor2};\n  }\n\n  .section1,\n  .section3 {\n    fill: ${m.altSectionBkgColor};\n    opacity: 0.2;\n  }\n\n  .sectionTitle0 {\n    fill: ${m.titleColor};\n  }\n\n  .sectionTitle1 {\n    fill: ${m.titleColor};\n  }\n\n  .sectionTitle2 {\n    fill: ${m.titleColor};\n  }\n\n  .sectionTitle3 {\n    fill: ${m.titleColor};\n  }\n\n  .sectionTitle {\n    text-anchor: start;\n    font-family: ${m.fontFamily};\n  }\n\n\n  /* Grid and axis */\n\n  .grid .tick {\n    stroke: ${m.gridColor};\n    opacity: 0.8;\n    shape-rendering: crispEdges;\n  }\n\n  .grid .tick text {\n    font-family: ${m.fontFamily};\n    fill: ${m.textColor};\n  }\n\n  .grid path {\n    stroke-width: 0;\n  }\n\n\n  /* Today line */\n\n  .today {\n    fill: none;\n    stroke: ${m.todayLineColor};\n    stroke-width: 2px;\n  }\n\n\n  /* Task styling */\n\n  /* Default task */\n\n  .task {\n    stroke-width: 2;\n  }\n\n  .taskText {\n    text-anchor: middle;\n    font-family: ${m.fontFamily};\n  }\n\n  .taskTextOutsideRight {\n    fill: ${m.taskTextDarkColor};\n    text-anchor: start;\n    font-family: ${m.fontFamily};\n  }\n\n  .taskTextOutsideLeft {\n    fill: ${m.taskTextDarkColor};\n    text-anchor: end;\n  }\n\n\n  /* Special case clickable */\n\n  .task.clickable {\n    cursor: pointer;\n  }\n\n  .taskText.clickable {\n    cursor: pointer;\n    fill: ${m.taskTextClickableColor} !important;\n    font-weight: bold;\n  }\n\n  .taskTextOutsideLeft.clickable {\n    cursor: pointer;\n    fill: ${m.taskTextClickableColor} !important;\n    font-weight: bold;\n  }\n\n  .taskTextOutsideRight.clickable {\n    cursor: pointer;\n    fill: ${m.taskTextClickableColor} !important;\n    font-weight: bold;\n  }\n\n\n  /* Specific task settings for the sections*/\n\n  .taskText0,\n  .taskText1,\n  .taskText2,\n  .taskText3 {\n    fill: ${m.taskTextColor};\n  }\n\n  .task0,\n  .task1,\n  .task2,\n  .task3 {\n    fill: ${m.taskBkgColor};\n    stroke: ${m.taskBorderColor};\n  }\n\n  .taskTextOutside0,\n  .taskTextOutside2\n  {\n    fill: ${m.taskTextOutsideColor};\n  }\n\n  .taskTextOutside1,\n  .taskTextOutside3 {\n    fill: ${m.taskTextOutsideColor};\n  }\n\n\n  /* Active task */\n\n  .active0,\n  .active1,\n  .active2,\n  .active3 {\n    fill: ${m.activeTaskBkgColor};\n    stroke: ${m.activeTaskBorderColor};\n  }\n\n  .activeText0,\n  .activeText1,\n  .activeText2,\n  .activeText3 {\n    fill: ${m.taskTextDarkColor} !important;\n  }\n\n\n  /* Completed task */\n\n  .done0,\n  .done1,\n  .done2,\n  .done3 {\n    stroke: ${m.doneTaskBorderColor};\n    fill: ${m.doneTaskBkgColor};\n    stroke-width: 2;\n  }\n\n  .doneText0,\n  .doneText1,\n  .doneText2,\n  .doneText3 {\n    fill: ${m.taskTextDarkColor} !important;\n  }\n\n\n  /* Tasks on the critical line */\n\n  .crit0,\n  .crit1,\n  .crit2,\n  .crit3 {\n    stroke: ${m.critBorderColor};\n    fill: ${m.critBkgColor};\n    stroke-width: 2;\n  }\n\n  .activeCrit0,\n  .activeCrit1,\n  .activeCrit2,\n  .activeCrit3 {\n    stroke: ${m.critBorderColor};\n    fill: ${m.activeTaskBkgColor};\n    stroke-width: 2;\n  }\n\n  .doneCrit0,\n  .doneCrit1,\n  .doneCrit2,\n  .doneCrit3 {\n    stroke: ${m.critBorderColor};\n    fill: ${m.doneTaskBkgColor};\n    stroke-width: 2;\n    cursor: pointer;\n    shape-rendering: crispEdges;\n  }\n\n  .milestone {\n    transform: rotate(45deg) scale(0.8,0.8);\n  }\n\n  .milestoneText {\n    font-style: italic;\n  }\n  .doneCritText0,\n  .doneCritText1,\n  .doneCritText2,\n  .doneCritText3 {\n    fill: ${m.taskTextDarkColor} !important;\n  }\n\n  .vert {\n    stroke: ${m.vertLineColor};\n  }\n\n  .vertText {\n    font-size: 15px;\n    text-anchor: middle;\n    fill: ${m.vertLineColor} !important;\n  }\n\n  .activeCritText0,\n  .activeCritText1,\n  .activeCritText2,\n  .activeCritText3 {\n    fill: ${m.taskTextDarkColor} !important;\n  }\n\n  .titleText {\n    text-anchor: middle;\n    font-size: 18px;\n    fill: ${m.titleColor||m.textColor};\n    font-family: ${m.fontFamily};\n  }\n`,"getStyles")}},79006:(Ja,vr,R)=>{"use strict";R.d(vr,{$i:()=>ye,B6:()=>et,C0:()=>Ke,Ch:()=>Rr,D7:()=>zr,DB:()=>q,Dl:()=>g,EI:()=>hr,EJ:()=>Rt,Gs:()=>lr,H$:()=>V,H1:()=>pe,ID:()=>De,IU:()=>Xe,J$:()=>ra,Js:()=>Qr,ME:()=>Jr,Nk:()=>it,P$:()=>ae,Q2:()=>mt,QO:()=>_e,SV:()=>We,TM:()=>Zt,UI:()=>$t,UU:()=>B,Wi:()=>ir,Wt:()=>Vt,XV:()=>Er,Xd:()=>wr,Y2:()=>I,_3:()=>er,a$:()=>v,ab:()=>He,cL:()=>Ft,dj:()=>E,hH:()=>Fr,iN:()=>gr,jZ:()=>zt,ke:()=>$e,m7:()=>_r,mW:()=>cr,mj:()=>ha,oB:()=>Br,ot:()=>b,sb:()=>Pe,tM:()=>xt,wZ:()=>F,xA:()=>ht,zj:()=>rt});var ut,$,A,At,wt,Ge,dt,qe,ot=R(89204),ee=R(45027),L=R(32303),S=R(79687),Pt=R(99708),Rt=/^-{3}\s*[\n\r](.*?)[\n\r]-{3}\s*[\n\r]+/s,q=/%{2}{\s*(?:(\w+)\s*:|(\w+))\s*(?:(\w+)|((?:(?!}%{2}).|\r?\n)*))?\s*(?:}%{2})?/gi,ar=/\s*%%.*\n/gm,Ke=(class extends Error{constructor(W){super(W),this.name="UnknownDiagramError"}static#t=ut=()=>((0,ee.A)(this,"UnknownDiagramError"),(0,L.K2)(this,"UnknownDiagramError"),this)},ut()),cr={},Rr=(0,L.K2)(function(W,Yt){W=W.replace(Rt,"").replace(q,"").replace(ar,"\n");for(const[Ye,{detector:Ne}]of Object.entries(cr))if(Ne(W,Yt))return Ye;throw new Ke(`No diagram type detected matching given configuration for text: ${W}`)},"detectType"),wr=(0,L.K2)((...W)=>{for(const{id:Yt,detector:Ye,loader:Ne}of W)Vr(Yt,Ye,Ne)},"registerLazyLoadedDiagrams"),Vr=(0,L.K2)((W,Yt,Ye)=>{cr[W]&&L.Rm.warn(`Detector with key ${W} already exists. Overwriting.`),cr[W]={detector:Yt,loader:Ye},L.Rm.debug(`Detector with key ${W} added${Ye?" with loader":""}`)},"addDetector"),ra=(0,L.K2)(W=>cr[W].loader,"getDiagramLoader"),Nr=(0,L.K2)((W,Yt,{depth:Ye=2,clobber:Ne=!1}={})=>{const Tr={depth:Ye,clobber:Ne};return Array.isArray(Yt)&&!Array.isArray(W)?(Yt.forEach(yr=>Nr(W,yr,Tr)),W):Array.isArray(Yt)&&Array.isArray(W)?(Yt.forEach(yr=>{W.includes(yr)||W.push(yr)}),W):void 0===W||Ye<=0?null!=W&&"object"==typeof W&&"object"==typeof Yt?Object.assign(W,Yt):Yt:(void 0!==Yt&&"object"==typeof W&&"object"==typeof Yt&&Object.keys(Yt).forEach(yr=>{"object"!=typeof Yt[yr]||void 0!==W[yr]&&"object"!=typeof W[yr]?(Ne||"object"!=typeof W[yr]&&"object"!=typeof Yt[yr])&&(W[yr]=Yt[yr]):(void 0===W[yr]&&(W[yr]=Array.isArray(Yt[yr])?[]:{}),W[yr]=Nr(W[yr],Yt[yr],{depth:Ye-1,clobber:Ne}))}),W)},"assignWithDepth"),Fr=Nr,Se="#ffffff",Or="#f2f2f2",je=(0,L.K2)((W,Yt)=>(0,S.Ai)(W,Yt?{s:-40,l:10}:{s:-40,l:-10}),"mkBorder"),z=(class{constructor(){this.background="#f4f4f4",this.primaryColor="#fff4dd",this.noteBkgColor="#fff5ad",this.noteTextColor="#333",this.THEME_COLOR_LIMIT=12,this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px"}updateColors(){if(this.primaryTextColor=this.primaryTextColor||(this.darkMode?"#eee":"#333"),this.secondaryColor=this.secondaryColor||(0,S.Ai)(this.primaryColor,{h:-120}),this.tertiaryColor=this.tertiaryColor||(0,S.Ai)(this.primaryColor,{h:180,l:5}),this.primaryBorderColor=this.primaryBorderColor||je(this.primaryColor,this.darkMode),this.secondaryBorderColor=this.secondaryBorderColor||je(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=this.tertiaryBorderColor||je(this.tertiaryColor,this.darkMode),this.noteBorderColor=this.noteBorderColor||je(this.noteBkgColor,this.darkMode),this.noteBkgColor=this.noteBkgColor||"#fff5ad",this.noteTextColor=this.noteTextColor||"#333",this.secondaryTextColor=this.secondaryTextColor||(0,S.B8)(this.secondaryColor),this.tertiaryTextColor=this.tertiaryTextColor||(0,S.B8)(this.tertiaryColor),this.lineColor=this.lineColor||(0,S.B8)(this.background),this.arrowheadColor=this.arrowheadColor||(0,S.B8)(this.background),this.textColor=this.textColor||this.primaryTextColor,this.border2=this.border2||this.tertiaryBorderColor,this.nodeBkg=this.nodeBkg||this.primaryColor,this.mainBkg=this.mainBkg||this.primaryColor,this.nodeBorder=this.nodeBorder||this.primaryBorderColor,this.clusterBkg=this.clusterBkg||this.tertiaryColor,this.clusterBorder=this.clusterBorder||this.tertiaryBorderColor,this.defaultLinkColor=this.defaultLinkColor||this.lineColor,this.titleColor=this.titleColor||this.tertiaryTextColor,this.edgeLabelBackground=this.edgeLabelBackground||(this.darkMode?(0,S.e$)(this.secondaryColor,30):this.secondaryColor),this.nodeTextColor=this.nodeTextColor||this.primaryTextColor,this.actorBorder=this.actorBorder||this.primaryBorderColor,this.actorBkg=this.actorBkg||this.mainBkg,this.actorTextColor=this.actorTextColor||this.primaryTextColor,this.actorLineColor=this.actorLineColor||this.actorBorder,this.labelBoxBkgColor=this.labelBoxBkgColor||this.actorBkg,this.signalColor=this.signalColor||this.textColor,this.signalTextColor=this.signalTextColor||this.textColor,this.labelBoxBorderColor=this.labelBoxBorderColor||this.actorBorder,this.labelTextColor=this.labelTextColor||this.actorTextColor,this.loopTextColor=this.loopTextColor||this.actorTextColor,this.activationBorderColor=this.activationBorderColor||(0,S.e$)(this.secondaryColor,10),this.activationBkgColor=this.activationBkgColor||this.secondaryColor,this.sequenceNumberColor=this.sequenceNumberColor||(0,S.B8)(this.lineColor),this.sectionBkgColor=this.sectionBkgColor||this.tertiaryColor,this.altSectionBkgColor=this.altSectionBkgColor||"white",this.sectionBkgColor=this.sectionBkgColor||this.secondaryColor,this.sectionBkgColor2=this.sectionBkgColor2||this.primaryColor,this.excludeBkgColor=this.excludeBkgColor||"#eeeeee",this.taskBorderColor=this.taskBorderColor||this.primaryBorderColor,this.taskBkgColor=this.taskBkgColor||this.primaryColor,this.activeTaskBorderColor=this.activeTaskBorderColor||this.primaryColor,this.activeTaskBkgColor=this.activeTaskBkgColor||(0,S.a)(this.primaryColor,23),this.gridColor=this.gridColor||"lightgrey",this.doneTaskBkgColor=this.doneTaskBkgColor||"lightgrey",this.doneTaskBorderColor=this.doneTaskBorderColor||"grey",this.critBorderColor=this.critBorderColor||"#ff8888",this.critBkgColor=this.critBkgColor||"red",this.todayLineColor=this.todayLineColor||"red",this.vertLineColor=this.vertLineColor||"navy",this.taskTextColor=this.taskTextColor||this.textColor,this.taskTextOutsideColor=this.taskTextOutsideColor||this.textColor,this.taskTextLightColor=this.taskTextLightColor||this.textColor,this.taskTextColor=this.taskTextColor||this.primaryTextColor,this.taskTextDarkColor=this.taskTextDarkColor||this.textColor,this.taskTextClickableColor=this.taskTextClickableColor||"#003163",this.personBorder=this.personBorder||this.primaryBorderColor,this.personBkg=this.personBkg||this.mainBkg,this.darkMode?(this.rowOdd=this.rowOdd||(0,S.e$)(this.mainBkg,5)||"#ffffff",this.rowEven=this.rowEven||(0,S.e$)(this.mainBkg,10)):(this.rowOdd=this.rowOdd||(0,S.a)(this.mainBkg,75)||"#ffffff",this.rowEven=this.rowEven||(0,S.a)(this.mainBkg,5)),this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||this.tertiaryColor,this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.nodeBorder,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.specialStateColor=this.lineColor,this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||(0,S.Ai)(this.primaryColor,{h:30}),this.cScale4=this.cScale4||(0,S.Ai)(this.primaryColor,{h:60}),this.cScale5=this.cScale5||(0,S.Ai)(this.primaryColor,{h:90}),this.cScale6=this.cScale6||(0,S.Ai)(this.primaryColor,{h:120}),this.cScale7=this.cScale7||(0,S.Ai)(this.primaryColor,{h:150}),this.cScale8=this.cScale8||(0,S.Ai)(this.primaryColor,{h:210,l:150}),this.cScale9=this.cScale9||(0,S.Ai)(this.primaryColor,{h:270}),this.cScale10=this.cScale10||(0,S.Ai)(this.primaryColor,{h:300}),this.cScale11=this.cScale11||(0,S.Ai)(this.primaryColor,{h:330}),this.darkMode)for(let Yt=0;Yt<this.THEME_COLOR_LIMIT;Yt++)this["cScale"+Yt]=(0,S.e$)(this["cScale"+Yt],75);else for(let Yt=0;Yt<this.THEME_COLOR_LIMIT;Yt++)this["cScale"+Yt]=(0,S.e$)(this["cScale"+Yt],25);for(let Yt=0;Yt<this.THEME_COLOR_LIMIT;Yt++)this["cScaleInv"+Yt]=this["cScaleInv"+Yt]||(0,S.B8)(this["cScale"+Yt]);for(let Yt=0;Yt<this.THEME_COLOR_LIMIT;Yt++)this["cScalePeer"+Yt]=this.darkMode?this["cScalePeer"+Yt]||(0,S.a)(this["cScale"+Yt],10):this["cScalePeer"+Yt]||(0,S.e$)(this["cScale"+Yt],10);this.scaleLabelColor=this.scaleLabelColor||this.labelTextColor;for(let Yt=0;Yt<this.THEME_COLOR_LIMIT;Yt++)this["cScaleLabel"+Yt]=this["cScaleLabel"+Yt]||this.scaleLabelColor;const W=this.darkMode?-4:-1;for(let Yt=0;Yt<5;Yt++)this["surface"+Yt]=this["surface"+Yt]||(0,S.Ai)(this.mainBkg,{h:180,s:-15,l:W*(5+3*Yt)}),this["surfacePeer"+Yt]=this["surfacePeer"+Yt]||(0,S.Ai)(this.mainBkg,{h:180,s:-15,l:W*(8+3*Yt)});this.classText=this.classText||this.textColor,this.fillType0=this.fillType0||this.primaryColor,this.fillType1=this.fillType1||this.secondaryColor,this.fillType2=this.fillType2||(0,S.Ai)(this.primaryColor,{h:64}),this.fillType3=this.fillType3||(0,S.Ai)(this.secondaryColor,{h:64}),this.fillType4=this.fillType4||(0,S.Ai)(this.primaryColor,{h:-64}),this.fillType5=this.fillType5||(0,S.Ai)(this.secondaryColor,{h:-64}),this.fillType6=this.fillType6||(0,S.Ai)(this.primaryColor,{h:128}),this.fillType7=this.fillType7||(0,S.Ai)(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||this.tertiaryColor,this.pie4=this.pie4||(0,S.Ai)(this.primaryColor,{l:-10}),this.pie5=this.pie5||(0,S.Ai)(this.secondaryColor,{l:-10}),this.pie6=this.pie6||(0,S.Ai)(this.tertiaryColor,{l:-10}),this.pie7=this.pie7||(0,S.Ai)(this.primaryColor,{h:60,l:-10}),this.pie8=this.pie8||(0,S.Ai)(this.primaryColor,{h:-60,l:-10}),this.pie9=this.pie9||(0,S.Ai)(this.primaryColor,{h:120,l:0}),this.pie10=this.pie10||(0,S.Ai)(this.primaryColor,{h:60,l:-20}),this.pie11=this.pie11||(0,S.Ai)(this.primaryColor,{h:-60,l:-20}),this.pie12=this.pie12||(0,S.Ai)(this.primaryColor,{h:120,l:-10}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.radar={axisColor:this.radar?.axisColor||this.lineColor,axisStrokeWidth:this.radar?.axisStrokeWidth||2,axisLabelFontSize:this.radar?.axisLabelFontSize||12,curveOpacity:this.radar?.curveOpacity||.5,curveStrokeWidth:this.radar?.curveStrokeWidth||2,graticuleColor:this.radar?.graticuleColor||"#DEDEDE",graticuleStrokeWidth:this.radar?.graticuleStrokeWidth||1,graticuleOpacity:this.radar?.graticuleOpacity||.3,legendBoxSize:this.radar?.legendBoxSize||12,legendFontSize:this.radar?.legendFontSize||12},this.archEdgeColor=this.archEdgeColor||"#777",this.archEdgeArrowColor=this.archEdgeArrowColor||"#777",this.archEdgeWidth=this.archEdgeWidth||"3",this.archGroupBorderColor=this.archGroupBorderColor||"#000",this.archGroupBorderWidth=this.archGroupBorderWidth||"2px",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||(0,S.Ai)(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||(0,S.Ai)(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||(0,S.Ai)(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||(0,S.Ai)(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||(0,S.Ai)(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||(0,S.Ai)(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||(0,S.HD)(this.quadrant1Fill)?(0,S.a)(this.quadrant1Fill):(0,S.e$)(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:this.xyChart?.backgroundColor||this.background,titleColor:this.xyChart?.titleColor||this.primaryTextColor,xAxisTitleColor:this.xyChart?.xAxisTitleColor||this.primaryTextColor,xAxisLabelColor:this.xyChart?.xAxisLabelColor||this.primaryTextColor,xAxisTickColor:this.xyChart?.xAxisTickColor||this.primaryTextColor,xAxisLineColor:this.xyChart?.xAxisLineColor||this.primaryTextColor,yAxisTitleColor:this.xyChart?.yAxisTitleColor||this.primaryTextColor,yAxisLabelColor:this.xyChart?.yAxisLabelColor||this.primaryTextColor,yAxisTickColor:this.xyChart?.yAxisTickColor||this.primaryTextColor,yAxisLineColor:this.xyChart?.yAxisLineColor||this.primaryTextColor,plotColorPalette:this.xyChart?.plotColorPalette||"#FFF4DD,#FFD8B1,#FFA07A,#ECEFF1,#D6DBDF,#C3E0A8,#FFB6A4,#FFD74D,#738FA7,#FFFFF0"},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||(this.darkMode?(0,S.e$)(this.secondaryColor,30):this.secondaryColor),this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||(0,S.Ai)(this.primaryColor,{h:-30}),this.git4=this.git4||(0,S.Ai)(this.primaryColor,{h:-60}),this.git5=this.git5||(0,S.Ai)(this.primaryColor,{h:-90}),this.git6=this.git6||(0,S.Ai)(this.primaryColor,{h:60}),this.git7=this.git7||(0,S.Ai)(this.primaryColor,{h:120}),this.darkMode?(this.git0=(0,S.a)(this.git0,25),this.git1=(0,S.a)(this.git1,25),this.git2=(0,S.a)(this.git2,25),this.git3=(0,S.a)(this.git3,25),this.git4=(0,S.a)(this.git4,25),this.git5=(0,S.a)(this.git5,25),this.git6=(0,S.a)(this.git6,25),this.git7=(0,S.a)(this.git7,25)):(this.git0=(0,S.e$)(this.git0,25),this.git1=(0,S.e$)(this.git1,25),this.git2=(0,S.e$)(this.git2,25),this.git3=(0,S.e$)(this.git3,25),this.git4=(0,S.e$)(this.git4,25),this.git5=(0,S.e$)(this.git5,25),this.git6=(0,S.e$)(this.git6,25),this.git7=(0,S.e$)(this.git7,25)),this.gitInv0=this.gitInv0||(0,S.B8)(this.git0),this.gitInv1=this.gitInv1||(0,S.B8)(this.git1),this.gitInv2=this.gitInv2||(0,S.B8)(this.git2),this.gitInv3=this.gitInv3||(0,S.B8)(this.git3),this.gitInv4=this.gitInv4||(0,S.B8)(this.git4),this.gitInv5=this.gitInv5||(0,S.B8)(this.git5),this.gitInv6=this.gitInv6||(0,S.B8)(this.git6),this.gitInv7=this.gitInv7||(0,S.B8)(this.git7),this.branchLabelColor=this.branchLabelColor||(this.darkMode?"black":this.labelTextColor),this.gitBranchLabel0=this.gitBranchLabel0||this.branchLabelColor,this.gitBranchLabel1=this.gitBranchLabel1||this.branchLabelColor,this.gitBranchLabel2=this.gitBranchLabel2||this.branchLabelColor,this.gitBranchLabel3=this.gitBranchLabel3||this.branchLabelColor,this.gitBranchLabel4=this.gitBranchLabel4||this.branchLabelColor,this.gitBranchLabel5=this.gitBranchLabel5||this.branchLabelColor,this.gitBranchLabel6=this.gitBranchLabel6||this.branchLabelColor,this.gitBranchLabel7=this.gitBranchLabel7||this.branchLabelColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||Se,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||Or}calculate(W){if("object"!=typeof W)return void this.updateColors();const Yt=Object.keys(W);Yt.forEach(Ye=>{this[Ye]=W[Ye]}),this.updateColors(),Yt.forEach(Ye=>{this[Ye]=W[Ye]})}static#t=$=()=>((0,ee.A)(this,"Theme"),(0,L.K2)(this,"Theme"),this)},$()),ft=(0,L.K2)(W=>{const Yt=new z;return Yt.calculate(W),Yt},"getThemeVariables"),Bt=(class{constructor(){this.background="#333",this.primaryColor="#1f2020",this.secondaryColor=(0,S.a)(this.primaryColor,16),this.tertiaryColor=(0,S.Ai)(this.primaryColor,{h:-160}),this.primaryBorderColor=(0,S.B8)(this.background),this.secondaryBorderColor=je(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=je(this.tertiaryColor,this.darkMode),this.primaryTextColor=(0,S.B8)(this.primaryColor),this.secondaryTextColor=(0,S.B8)(this.secondaryColor),this.tertiaryTextColor=(0,S.B8)(this.tertiaryColor),this.lineColor=(0,S.B8)(this.background),this.textColor=(0,S.B8)(this.background),this.mainBkg="#1f2020",this.secondBkg="calculated",this.mainContrastColor="lightgrey",this.darkTextColor=(0,S.a)((0,S.B8)("#323D47"),10),this.lineColor="calculated",this.border1="#ccc",this.border2=(0,S.B3)(255,255,255,.25),this.arrowheadColor="calculated",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.labelBackground="#181818",this.textColor="#ccc",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="#F9FFFE",this.edgeLabelBackground="calculated",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="calculated",this.actorLineColor="calculated",this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="calculated",this.activationBkgColor="calculated",this.sequenceNumberColor="black",this.sectionBkgColor=(0,S.e$)("#EAE8D9",30),this.altSectionBkgColor="calculated",this.sectionBkgColor2="#EAE8D9",this.excludeBkgColor=(0,S.e$)(this.sectionBkgColor,10),this.taskBorderColor=(0,S.B3)(255,255,255,70),this.taskBkgColor="calculated",this.taskTextColor="calculated",this.taskTextLightColor="calculated",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor=(0,S.B3)(255,255,255,50),this.activeTaskBkgColor="#81B1DB",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="grey",this.critBorderColor="#E83737",this.critBkgColor="#E83737",this.taskTextDarkColor="calculated",this.todayLineColor="#DB5757",this.vertLineColor="#00BFFF",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.archEdgeColor="calculated",this.archEdgeArrowColor="calculated",this.archEdgeWidth="3",this.archGroupBorderColor=this.primaryBorderColor,this.archGroupBorderWidth="2px",this.rowOdd=this.rowOdd||(0,S.a)(this.mainBkg,5)||"#ffffff",this.rowEven=this.rowEven||(0,S.e$)(this.mainBkg,10),this.labelColor="calculated",this.errorBkgColor="#a44141",this.errorTextColor="#ddd"}updateColors(){this.secondBkg=(0,S.a)(this.mainBkg,16),this.lineColor=this.mainContrastColor,this.arrowheadColor=this.mainContrastColor,this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.edgeLabelBackground=(0,S.a)(this.labelBackground,25),this.actorBorder=this.border1,this.actorBkg=this.mainBkg,this.actorTextColor=this.mainContrastColor,this.actorLineColor=this.actorBorder,this.signalColor=this.mainContrastColor,this.signalTextColor=this.mainContrastColor,this.labelBoxBkgColor=this.actorBkg,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.mainContrastColor,this.loopTextColor=this.mainContrastColor,this.noteBorderColor=this.secondaryBorderColor,this.noteBkgColor=this.secondBkg,this.noteTextColor=this.secondaryTextColor,this.activationBorderColor=this.border1,this.activationBkgColor=this.secondBkg,this.altSectionBkgColor=this.background,this.taskBkgColor=(0,S.a)(this.mainBkg,23),this.taskTextColor=this.darkTextColor,this.taskTextLightColor=this.mainContrastColor,this.taskTextOutsideColor=this.taskTextLightColor,this.gridColor=this.mainContrastColor,this.doneTaskBkgColor=this.mainContrastColor,this.taskTextDarkColor=this.darkTextColor,this.archEdgeColor=this.lineColor,this.archEdgeArrowColor=this.lineColor,this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#555",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.primaryBorderColor,this.specialStateColor="#f4f4f4",this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=(0,S.Ai)(this.primaryColor,{h:64}),this.fillType3=(0,S.Ai)(this.secondaryColor,{h:64}),this.fillType4=(0,S.Ai)(this.primaryColor,{h:-64}),this.fillType5=(0,S.Ai)(this.secondaryColor,{h:-64}),this.fillType6=(0,S.Ai)(this.primaryColor,{h:128}),this.fillType7=(0,S.Ai)(this.secondaryColor,{h:128}),this.cScale1=this.cScale1||"#0b0000",this.cScale2=this.cScale2||"#4d1037",this.cScale3=this.cScale3||"#3f5258",this.cScale4=this.cScale4||"#4f2f1b",this.cScale5=this.cScale5||"#6e0a0a",this.cScale6=this.cScale6||"#3b0048",this.cScale7=this.cScale7||"#995a01",this.cScale8=this.cScale8||"#154706",this.cScale9=this.cScale9||"#161722",this.cScale10=this.cScale10||"#00296f",this.cScale11=this.cScale11||"#01629c",this.cScale12=this.cScale12||"#010029",this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||(0,S.Ai)(this.primaryColor,{h:30}),this.cScale4=this.cScale4||(0,S.Ai)(this.primaryColor,{h:60}),this.cScale5=this.cScale5||(0,S.Ai)(this.primaryColor,{h:90}),this.cScale6=this.cScale6||(0,S.Ai)(this.primaryColor,{h:120}),this.cScale7=this.cScale7||(0,S.Ai)(this.primaryColor,{h:150}),this.cScale8=this.cScale8||(0,S.Ai)(this.primaryColor,{h:210}),this.cScale9=this.cScale9||(0,S.Ai)(this.primaryColor,{h:270}),this.cScale10=this.cScale10||(0,S.Ai)(this.primaryColor,{h:300}),this.cScale11=this.cScale11||(0,S.Ai)(this.primaryColor,{h:330});for(let W=0;W<this.THEME_COLOR_LIMIT;W++)this["cScaleInv"+W]=this["cScaleInv"+W]||(0,S.B8)(this["cScale"+W]);for(let W=0;W<this.THEME_COLOR_LIMIT;W++)this["cScalePeer"+W]=this["cScalePeer"+W]||(0,S.a)(this["cScale"+W],10);for(let W=0;W<5;W++)this["surface"+W]=this["surface"+W]||(0,S.Ai)(this.mainBkg,{h:30,s:-30,l:-(4*W-10)}),this["surfacePeer"+W]=this["surfacePeer"+W]||(0,S.Ai)(this.mainBkg,{h:30,s:-30,l:-(4*W-7)});this.scaleLabelColor=this.scaleLabelColor||(this.darkMode?"black":this.labelTextColor);for(let W=0;W<this.THEME_COLOR_LIMIT;W++)this["cScaleLabel"+W]=this["cScaleLabel"+W]||this.scaleLabelColor;for(let W=0;W<this.THEME_COLOR_LIMIT;W++)this["pie"+W]=this["cScale"+W];this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||(0,S.Ai)(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||(0,S.Ai)(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||(0,S.Ai)(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||(0,S.Ai)(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||(0,S.Ai)(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||(0,S.Ai)(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||(0,S.HD)(this.quadrant1Fill)?(0,S.a)(this.quadrant1Fill):(0,S.e$)(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:this.xyChart?.backgroundColor||this.background,titleColor:this.xyChart?.titleColor||this.primaryTextColor,xAxisTitleColor:this.xyChart?.xAxisTitleColor||this.primaryTextColor,xAxisLabelColor:this.xyChart?.xAxisLabelColor||this.primaryTextColor,xAxisTickColor:this.xyChart?.xAxisTickColor||this.primaryTextColor,xAxisLineColor:this.xyChart?.xAxisLineColor||this.primaryTextColor,yAxisTitleColor:this.xyChart?.yAxisTitleColor||this.primaryTextColor,yAxisLabelColor:this.xyChart?.yAxisLabelColor||this.primaryTextColor,yAxisTickColor:this.xyChart?.yAxisTickColor||this.primaryTextColor,yAxisLineColor:this.xyChart?.yAxisLineColor||this.primaryTextColor,plotColorPalette:this.xyChart?.plotColorPalette||"#3498db,#2ecc71,#e74c3c,#f1c40f,#bdc3c7,#ffffff,#34495e,#9b59b6,#1abc9c,#e67e22"},this.packet={startByteColor:this.primaryTextColor,endByteColor:this.primaryTextColor,labelColor:this.primaryTextColor,titleColor:this.primaryTextColor,blockStrokeColor:this.primaryTextColor,blockFillColor:this.background},this.radar={axisColor:this.radar?.axisColor||this.lineColor,axisStrokeWidth:this.radar?.axisStrokeWidth||2,axisLabelFontSize:this.radar?.axisLabelFontSize||12,curveOpacity:this.radar?.curveOpacity||.5,curveStrokeWidth:this.radar?.curveStrokeWidth||2,graticuleColor:this.radar?.graticuleColor||"#DEDEDE",graticuleStrokeWidth:this.radar?.graticuleStrokeWidth||1,graticuleOpacity:this.radar?.graticuleOpacity||.3,legendBoxSize:this.radar?.legendBoxSize||12,legendFontSize:this.radar?.legendFontSize||12},this.classText=this.primaryTextColor,this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||(this.darkMode?(0,S.e$)(this.secondaryColor,30):this.secondaryColor),this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=(0,S.a)(this.secondaryColor,20),this.git1=(0,S.a)(this.pie2||this.secondaryColor,20),this.git2=(0,S.a)(this.pie3||this.tertiaryColor,20),this.git3=(0,S.a)(this.pie4||(0,S.Ai)(this.primaryColor,{h:-30}),20),this.git4=(0,S.a)(this.pie5||(0,S.Ai)(this.primaryColor,{h:-60}),20),this.git5=(0,S.a)(this.pie6||(0,S.Ai)(this.primaryColor,{h:-90}),10),this.git6=(0,S.a)(this.pie7||(0,S.Ai)(this.primaryColor,{h:60}),10),this.git7=(0,S.a)(this.pie8||(0,S.Ai)(this.primaryColor,{h:120}),20),this.gitInv0=this.gitInv0||(0,S.B8)(this.git0),this.gitInv1=this.gitInv1||(0,S.B8)(this.git1),this.gitInv2=this.gitInv2||(0,S.B8)(this.git2),this.gitInv3=this.gitInv3||(0,S.B8)(this.git3),this.gitInv4=this.gitInv4||(0,S.B8)(this.git4),this.gitInv5=this.gitInv5||(0,S.B8)(this.git5),this.gitInv6=this.gitInv6||(0,S.B8)(this.git6),this.gitInv7=this.gitInv7||(0,S.B8)(this.git7),this.gitBranchLabel0=this.gitBranchLabel0||(0,S.B8)(this.labelTextColor),this.gitBranchLabel1=this.gitBranchLabel1||this.labelTextColor,this.gitBranchLabel2=this.gitBranchLabel2||this.labelTextColor,this.gitBranchLabel3=this.gitBranchLabel3||(0,S.B8)(this.labelTextColor),this.gitBranchLabel4=this.gitBranchLabel4||this.labelTextColor,this.gitBranchLabel5=this.gitBranchLabel5||this.labelTextColor,this.gitBranchLabel6=this.gitBranchLabel6||this.labelTextColor,this.gitBranchLabel7=this.gitBranchLabel7||this.labelTextColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||(0,S.a)(this.background,12),this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||(0,S.a)(this.background,2),this.nodeBorder=this.nodeBorder||"#999"}calculate(W){if("object"!=typeof W)return void this.updateColors();const Yt=Object.keys(W);Yt.forEach(Ye=>{this[Ye]=W[Ye]}),this.updateColors(),Yt.forEach(Ye=>{this[Ye]=W[Ye]})}static#t=A=()=>((0,ee.A)(this,"Theme2"),(0,L.K2)(this,"Theme"),this)},A()),we=(0,L.K2)(W=>{const Yt=new Bt;return Yt.calculate(W),Yt},"getThemeVariables"),X=(class{constructor(){this.background="#f4f4f4",this.primaryColor="#ECECFF",this.secondaryColor=(0,S.Ai)(this.primaryColor,{h:120}),this.secondaryColor="#ffffde",this.tertiaryColor=(0,S.Ai)(this.primaryColor,{h:-160}),this.primaryBorderColor=je(this.primaryColor,this.darkMode),this.secondaryBorderColor=je(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=je(this.tertiaryColor,this.darkMode),this.primaryTextColor=(0,S.B8)(this.primaryColor),this.secondaryTextColor=(0,S.B8)(this.secondaryColor),this.tertiaryTextColor=(0,S.B8)(this.tertiaryColor),this.lineColor=(0,S.B8)(this.background),this.textColor=(0,S.B8)(this.background),this.background="white",this.mainBkg="#ECECFF",this.secondBkg="#ffffde",this.lineColor="#333333",this.border1="#9370DB",this.border2="#aaaa33",this.arrowheadColor="#333333",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.labelBackground="rgba(232,232,232, 0.8)",this.textColor="#333",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="calculated",this.edgeLabelBackground="calculated",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="black",this.actorLineColor="calculated",this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="calculated",this.altSectionBkgColor="calculated",this.sectionBkgColor2="calculated",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="calculated",this.taskTextLightColor="calculated",this.taskTextColor=this.taskTextLightColor,this.taskTextDarkColor="calculated",this.taskTextOutsideColor=this.taskTextDarkColor,this.taskTextClickableColor="calculated",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="calculated",this.critBorderColor="calculated",this.critBkgColor="calculated",this.todayLineColor="calculated",this.vertLineColor="calculated",this.sectionBkgColor=(0,S.B3)(102,102,255,.49),this.altSectionBkgColor="white",this.sectionBkgColor2="#fff400",this.taskBorderColor="#534fbc",this.taskBkgColor="#8a90dd",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="black",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="#534fbc",this.activeTaskBkgColor="#bfc7ff",this.gridColor="lightgrey",this.doneTaskBkgColor="lightgrey",this.doneTaskBorderColor="grey",this.critBorderColor="#ff8888",this.critBkgColor="red",this.todayLineColor="red",this.vertLineColor="navy",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.archEdgeColor="calculated",this.archEdgeArrowColor="calculated",this.archEdgeWidth="3",this.archGroupBorderColor=this.primaryBorderColor,this.archGroupBorderWidth="2px",this.rowOdd="calculated",this.rowEven="calculated",this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222",this.updateColors()}updateColors(){this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||(0,S.Ai)(this.primaryColor,{h:30}),this.cScale4=this.cScale4||(0,S.Ai)(this.primaryColor,{h:60}),this.cScale5=this.cScale5||(0,S.Ai)(this.primaryColor,{h:90}),this.cScale6=this.cScale6||(0,S.Ai)(this.primaryColor,{h:120}),this.cScale7=this.cScale7||(0,S.Ai)(this.primaryColor,{h:150}),this.cScale8=this.cScale8||(0,S.Ai)(this.primaryColor,{h:210}),this.cScale9=this.cScale9||(0,S.Ai)(this.primaryColor,{h:270}),this.cScale10=this.cScale10||(0,S.Ai)(this.primaryColor,{h:300}),this.cScale11=this.cScale11||(0,S.Ai)(this.primaryColor,{h:330}),this.cScalePeer1=this.cScalePeer1||(0,S.e$)(this.secondaryColor,45),this.cScalePeer2=this.cScalePeer2||(0,S.e$)(this.tertiaryColor,40);for(let W=0;W<this.THEME_COLOR_LIMIT;W++)this["cScale"+W]=(0,S.e$)(this["cScale"+W],10),this["cScalePeer"+W]=this["cScalePeer"+W]||(0,S.e$)(this["cScale"+W],25);for(let W=0;W<this.THEME_COLOR_LIMIT;W++)this["cScaleInv"+W]=this["cScaleInv"+W]||(0,S.Ai)(this["cScale"+W],{h:180});for(let W=0;W<5;W++)this["surface"+W]=this["surface"+W]||(0,S.Ai)(this.mainBkg,{h:30,l:-(5+5*W)}),this["surfacePeer"+W]=this["surfacePeer"+W]||(0,S.Ai)(this.mainBkg,{h:30,l:-(7+5*W)});if(this.scaleLabelColor="calculated"!==this.scaleLabelColor&&this.scaleLabelColor?this.scaleLabelColor:this.labelTextColor,"calculated"!==this.labelTextColor){this.cScaleLabel0=this.cScaleLabel0||(0,S.B8)(this.labelTextColor),this.cScaleLabel3=this.cScaleLabel3||(0,S.B8)(this.labelTextColor);for(let W=0;W<this.THEME_COLOR_LIMIT;W++)this["cScaleLabel"+W]=this["cScaleLabel"+W]||this.labelTextColor}this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.titleColor=this.textColor,this.edgeLabelBackground=this.labelBackground,this.actorBorder=(0,S.a)(this.border1,23),this.actorBkg=this.mainBkg,this.labelBoxBkgColor=this.actorBkg,this.signalColor=this.textColor,this.signalTextColor=this.textColor,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.actorTextColor,this.loopTextColor=this.actorTextColor,this.noteBorderColor=this.border2,this.noteTextColor=this.actorTextColor,this.actorLineColor=this.actorBorder,this.taskTextColor=this.taskTextLightColor,this.taskTextOutsideColor=this.taskTextDarkColor,this.archEdgeColor=this.lineColor,this.archEdgeArrowColor=this.lineColor,this.rowOdd=this.rowOdd||(0,S.a)(this.primaryColor,75)||"#ffffff",this.rowEven=this.rowEven||(0,S.a)(this.primaryColor,1),this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f0f0f0",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.nodeBorder,this.specialStateColor=this.lineColor,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=(0,S.Ai)(this.primaryColor,{h:64}),this.fillType3=(0,S.Ai)(this.secondaryColor,{h:64}),this.fillType4=(0,S.Ai)(this.primaryColor,{h:-64}),this.fillType5=(0,S.Ai)(this.secondaryColor,{h:-64}),this.fillType6=(0,S.Ai)(this.primaryColor,{h:128}),this.fillType7=(0,S.Ai)(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||(0,S.Ai)(this.tertiaryColor,{l:-40}),this.pie4=this.pie4||(0,S.Ai)(this.primaryColor,{l:-10}),this.pie5=this.pie5||(0,S.Ai)(this.secondaryColor,{l:-30}),this.pie6=this.pie6||(0,S.Ai)(this.tertiaryColor,{l:-20}),this.pie7=this.pie7||(0,S.Ai)(this.primaryColor,{h:60,l:-20}),this.pie8=this.pie8||(0,S.Ai)(this.primaryColor,{h:-60,l:-40}),this.pie9=this.pie9||(0,S.Ai)(this.primaryColor,{h:120,l:-40}),this.pie10=this.pie10||(0,S.Ai)(this.primaryColor,{h:60,l:-40}),this.pie11=this.pie11||(0,S.Ai)(this.primaryColor,{h:-90,l:-40}),this.pie12=this.pie12||(0,S.Ai)(this.primaryColor,{h:120,l:-30}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||(0,S.Ai)(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||(0,S.Ai)(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||(0,S.Ai)(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||(0,S.Ai)(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||(0,S.Ai)(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||(0,S.Ai)(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||(0,S.HD)(this.quadrant1Fill)?(0,S.a)(this.quadrant1Fill):(0,S.e$)(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.radar={axisColor:this.radar?.axisColor||this.lineColor,axisStrokeWidth:this.radar?.axisStrokeWidth||2,axisLabelFontSize:this.radar?.axisLabelFontSize||12,curveOpacity:this.radar?.curveOpacity||.5,curveStrokeWidth:this.radar?.curveStrokeWidth||2,graticuleColor:this.radar?.graticuleColor||"#DEDEDE",graticuleStrokeWidth:this.radar?.graticuleStrokeWidth||1,graticuleOpacity:this.radar?.graticuleOpacity||.3,legendBoxSize:this.radar?.legendBoxSize||12,legendFontSize:this.radar?.legendFontSize||12},this.xyChart={backgroundColor:this.xyChart?.backgroundColor||this.background,titleColor:this.xyChart?.titleColor||this.primaryTextColor,xAxisTitleColor:this.xyChart?.xAxisTitleColor||this.primaryTextColor,xAxisLabelColor:this.xyChart?.xAxisLabelColor||this.primaryTextColor,xAxisTickColor:this.xyChart?.xAxisTickColor||this.primaryTextColor,xAxisLineColor:this.xyChart?.xAxisLineColor||this.primaryTextColor,yAxisTitleColor:this.xyChart?.yAxisTitleColor||this.primaryTextColor,yAxisLabelColor:this.xyChart?.yAxisLabelColor||this.primaryTextColor,yAxisTickColor:this.xyChart?.yAxisTickColor||this.primaryTextColor,yAxisLineColor:this.xyChart?.yAxisLineColor||this.primaryTextColor,plotColorPalette:this.xyChart?.plotColorPalette||"#ECECFF,#8493A6,#FFC3A0,#DCDDE1,#B8E994,#D1A36F,#C3CDE6,#FFB6C1,#496078,#F8F3E3"},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.labelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||(0,S.Ai)(this.primaryColor,{h:-30}),this.git4=this.git4||(0,S.Ai)(this.primaryColor,{h:-60}),this.git5=this.git5||(0,S.Ai)(this.primaryColor,{h:-90}),this.git6=this.git6||(0,S.Ai)(this.primaryColor,{h:60}),this.git7=this.git7||(0,S.Ai)(this.primaryColor,{h:120}),this.darkMode?(this.git0=(0,S.a)(this.git0,25),this.git1=(0,S.a)(this.git1,25),this.git2=(0,S.a)(this.git2,25),this.git3=(0,S.a)(this.git3,25),this.git4=(0,S.a)(this.git4,25),this.git5=(0,S.a)(this.git5,25),this.git6=(0,S.a)(this.git6,25),this.git7=(0,S.a)(this.git7,25)):(this.git0=(0,S.e$)(this.git0,25),this.git1=(0,S.e$)(this.git1,25),this.git2=(0,S.e$)(this.git2,25),this.git3=(0,S.e$)(this.git3,25),this.git4=(0,S.e$)(this.git4,25),this.git5=(0,S.e$)(this.git5,25),this.git6=(0,S.e$)(this.git6,25),this.git7=(0,S.e$)(this.git7,25)),this.gitInv0=this.gitInv0||(0,S.e$)((0,S.B8)(this.git0),25),this.gitInv1=this.gitInv1||(0,S.B8)(this.git1),this.gitInv2=this.gitInv2||(0,S.B8)(this.git2),this.gitInv3=this.gitInv3||(0,S.B8)(this.git3),this.gitInv4=this.gitInv4||(0,S.B8)(this.git4),this.gitInv5=this.gitInv5||(0,S.B8)(this.git5),this.gitInv6=this.gitInv6||(0,S.B8)(this.git6),this.gitInv7=this.gitInv7||(0,S.B8)(this.git7),this.gitBranchLabel0=this.gitBranchLabel0||(0,S.B8)(this.labelTextColor),this.gitBranchLabel1=this.gitBranchLabel1||this.labelTextColor,this.gitBranchLabel2=this.gitBranchLabel2||this.labelTextColor,this.gitBranchLabel3=this.gitBranchLabel3||(0,S.B8)(this.labelTextColor),this.gitBranchLabel4=this.gitBranchLabel4||this.labelTextColor,this.gitBranchLabel5=this.gitBranchLabel5||this.labelTextColor,this.gitBranchLabel6=this.gitBranchLabel6||this.labelTextColor,this.gitBranchLabel7=this.gitBranchLabel7||this.labelTextColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||Se,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||Or}calculate(W){if(Object.keys(this).forEach(Ye=>{"calculated"===this[Ye]&&(this[Ye]=void 0)}),"object"!=typeof W)return void this.updateColors();const Yt=Object.keys(W);Yt.forEach(Ye=>{this[Ye]=W[Ye]}),this.updateColors(),Yt.forEach(Ye=>{this[Ye]=W[Ye]})}static#t=At=()=>((0,ee.A)(this,"Theme3"),(0,L.K2)(this,"Theme"),this)},At()),ae=(0,L.K2)(W=>{const Yt=new X;return Yt.calculate(W),Yt},"getThemeVariables"),w=(class{constructor(){this.background="#f4f4f4",this.primaryColor="#cde498",this.secondaryColor="#cdffb2",this.background="white",this.mainBkg="#cde498",this.secondBkg="#cdffb2",this.lineColor="green",this.border1="#13540c",this.border2="#6eaa49",this.arrowheadColor="green",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.tertiaryColor=(0,S.a)("#cde498",10),this.primaryBorderColor=je(this.primaryColor,this.darkMode),this.secondaryBorderColor=je(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=je(this.tertiaryColor,this.darkMode),this.primaryTextColor=(0,S.B8)(this.primaryColor),this.secondaryTextColor=(0,S.B8)(this.secondaryColor),this.tertiaryTextColor=(0,S.B8)(this.primaryColor),this.lineColor=(0,S.B8)(this.background),this.textColor=(0,S.B8)(this.background),this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="#333",this.edgeLabelBackground="#e8e8e8",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="black",this.actorLineColor="calculated",this.signalColor="#333",this.signalTextColor="#333",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="#326932",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="#6eaa49",this.altSectionBkgColor="white",this.sectionBkgColor2="#6eaa49",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="#487e3a",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="black",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="lightgrey",this.doneTaskBkgColor="lightgrey",this.doneTaskBorderColor="grey",this.critBorderColor="#ff8888",this.critBkgColor="red",this.todayLineColor="red",this.vertLineColor="#00BFFF",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.archEdgeColor="calculated",this.archEdgeArrowColor="calculated",this.archEdgeWidth="3",this.archGroupBorderColor=this.primaryBorderColor,this.archGroupBorderWidth="2px",this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222"}updateColors(){this.actorBorder=(0,S.e$)(this.mainBkg,20),this.actorBkg=this.mainBkg,this.labelBoxBkgColor=this.actorBkg,this.labelTextColor=this.actorTextColor,this.loopTextColor=this.actorTextColor,this.noteBorderColor=this.border2,this.noteTextColor=this.actorTextColor,this.actorLineColor=this.actorBorder,this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||(0,S.Ai)(this.primaryColor,{h:30}),this.cScale4=this.cScale4||(0,S.Ai)(this.primaryColor,{h:60}),this.cScale5=this.cScale5||(0,S.Ai)(this.primaryColor,{h:90}),this.cScale6=this.cScale6||(0,S.Ai)(this.primaryColor,{h:120}),this.cScale7=this.cScale7||(0,S.Ai)(this.primaryColor,{h:150}),this.cScale8=this.cScale8||(0,S.Ai)(this.primaryColor,{h:210}),this.cScale9=this.cScale9||(0,S.Ai)(this.primaryColor,{h:270}),this.cScale10=this.cScale10||(0,S.Ai)(this.primaryColor,{h:300}),this.cScale11=this.cScale11||(0,S.Ai)(this.primaryColor,{h:330}),this.cScalePeer1=this.cScalePeer1||(0,S.e$)(this.secondaryColor,45),this.cScalePeer2=this.cScalePeer2||(0,S.e$)(this.tertiaryColor,40);for(let W=0;W<this.THEME_COLOR_LIMIT;W++)this["cScale"+W]=(0,S.e$)(this["cScale"+W],10),this["cScalePeer"+W]=this["cScalePeer"+W]||(0,S.e$)(this["cScale"+W],25);for(let W=0;W<this.THEME_COLOR_LIMIT;W++)this["cScaleInv"+W]=this["cScaleInv"+W]||(0,S.Ai)(this["cScale"+W],{h:180});this.scaleLabelColor="calculated"!==this.scaleLabelColor&&this.scaleLabelColor?this.scaleLabelColor:this.labelTextColor;for(let W=0;W<this.THEME_COLOR_LIMIT;W++)this["cScaleLabel"+W]=this["cScaleLabel"+W]||this.scaleLabelColor;for(let W=0;W<5;W++)this["surface"+W]=this["surface"+W]||(0,S.Ai)(this.mainBkg,{h:30,s:-30,l:-(5+5*W)}),this["surfacePeer"+W]=this["surfacePeer"+W]||(0,S.Ai)(this.mainBkg,{h:30,s:-30,l:-(8+5*W)});this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.taskBorderColor=this.border1,this.taskTextColor=this.taskTextLightColor,this.taskTextOutsideColor=this.taskTextDarkColor,this.activeTaskBorderColor=this.taskBorderColor,this.activeTaskBkgColor=this.mainBkg,this.archEdgeColor=this.lineColor,this.archEdgeArrowColor=this.lineColor,this.rowOdd=this.rowOdd||(0,S.a)(this.mainBkg,75)||"#ffffff",this.rowEven=this.rowEven||(0,S.a)(this.mainBkg,20),this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f0f0f0",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.primaryBorderColor,this.specialStateColor=this.lineColor,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=(0,S.Ai)(this.primaryColor,{h:64}),this.fillType3=(0,S.Ai)(this.secondaryColor,{h:64}),this.fillType4=(0,S.Ai)(this.primaryColor,{h:-64}),this.fillType5=(0,S.Ai)(this.secondaryColor,{h:-64}),this.fillType6=(0,S.Ai)(this.primaryColor,{h:128}),this.fillType7=(0,S.Ai)(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||this.tertiaryColor,this.pie4=this.pie4||(0,S.Ai)(this.primaryColor,{l:-30}),this.pie5=this.pie5||(0,S.Ai)(this.secondaryColor,{l:-30}),this.pie6=this.pie6||(0,S.Ai)(this.tertiaryColor,{h:40,l:-40}),this.pie7=this.pie7||(0,S.Ai)(this.primaryColor,{h:60,l:-10}),this.pie8=this.pie8||(0,S.Ai)(this.primaryColor,{h:-60,l:-10}),this.pie9=this.pie9||(0,S.Ai)(this.primaryColor,{h:120,l:0}),this.pie10=this.pie10||(0,S.Ai)(this.primaryColor,{h:60,l:-50}),this.pie11=this.pie11||(0,S.Ai)(this.primaryColor,{h:-60,l:-50}),this.pie12=this.pie12||(0,S.Ai)(this.primaryColor,{h:120,l:-50}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||(0,S.Ai)(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||(0,S.Ai)(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||(0,S.Ai)(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||(0,S.Ai)(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||(0,S.Ai)(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||(0,S.Ai)(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||(0,S.HD)(this.quadrant1Fill)?(0,S.a)(this.quadrant1Fill):(0,S.e$)(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.packet={startByteColor:this.primaryTextColor,endByteColor:this.primaryTextColor,labelColor:this.primaryTextColor,titleColor:this.primaryTextColor,blockStrokeColor:this.primaryTextColor,blockFillColor:this.mainBkg},this.radar={axisColor:this.radar?.axisColor||this.lineColor,axisStrokeWidth:this.radar?.axisStrokeWidth||2,axisLabelFontSize:this.radar?.axisLabelFontSize||12,curveOpacity:this.radar?.curveOpacity||.5,curveStrokeWidth:this.radar?.curveStrokeWidth||2,graticuleColor:this.radar?.graticuleColor||"#DEDEDE",graticuleStrokeWidth:this.radar?.graticuleStrokeWidth||1,graticuleOpacity:this.radar?.graticuleOpacity||.3,legendBoxSize:this.radar?.legendBoxSize||12,legendFontSize:this.radar?.legendFontSize||12},this.xyChart={backgroundColor:this.xyChart?.backgroundColor||this.background,titleColor:this.xyChart?.titleColor||this.primaryTextColor,xAxisTitleColor:this.xyChart?.xAxisTitleColor||this.primaryTextColor,xAxisLabelColor:this.xyChart?.xAxisLabelColor||this.primaryTextColor,xAxisTickColor:this.xyChart?.xAxisTickColor||this.primaryTextColor,xAxisLineColor:this.xyChart?.xAxisLineColor||this.primaryTextColor,yAxisTitleColor:this.xyChart?.yAxisTitleColor||this.primaryTextColor,yAxisLabelColor:this.xyChart?.yAxisLabelColor||this.primaryTextColor,yAxisTickColor:this.xyChart?.yAxisTickColor||this.primaryTextColor,yAxisLineColor:this.xyChart?.yAxisLineColor||this.primaryTextColor,plotColorPalette:this.xyChart?.plotColorPalette||"#CDE498,#FF6B6B,#A0D2DB,#D7BDE2,#F0F0F0,#FFC3A0,#7FD8BE,#FF9A8B,#FAF3E0,#FFF176"},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.edgeLabelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||(0,S.Ai)(this.primaryColor,{h:-30}),this.git4=this.git4||(0,S.Ai)(this.primaryColor,{h:-60}),this.git5=this.git5||(0,S.Ai)(this.primaryColor,{h:-90}),this.git6=this.git6||(0,S.Ai)(this.primaryColor,{h:60}),this.git7=this.git7||(0,S.Ai)(this.primaryColor,{h:120}),this.darkMode?(this.git0=(0,S.a)(this.git0,25),this.git1=(0,S.a)(this.git1,25),this.git2=(0,S.a)(this.git2,25),this.git3=(0,S.a)(this.git3,25),this.git4=(0,S.a)(this.git4,25),this.git5=(0,S.a)(this.git5,25),this.git6=(0,S.a)(this.git6,25),this.git7=(0,S.a)(this.git7,25)):(this.git0=(0,S.e$)(this.git0,25),this.git1=(0,S.e$)(this.git1,25),this.git2=(0,S.e$)(this.git2,25),this.git3=(0,S.e$)(this.git3,25),this.git4=(0,S.e$)(this.git4,25),this.git5=(0,S.e$)(this.git5,25),this.git6=(0,S.e$)(this.git6,25),this.git7=(0,S.e$)(this.git7,25)),this.gitInv0=this.gitInv0||(0,S.B8)(this.git0),this.gitInv1=this.gitInv1||(0,S.B8)(this.git1),this.gitInv2=this.gitInv2||(0,S.B8)(this.git2),this.gitInv3=this.gitInv3||(0,S.B8)(this.git3),this.gitInv4=this.gitInv4||(0,S.B8)(this.git4),this.gitInv5=this.gitInv5||(0,S.B8)(this.git5),this.gitInv6=this.gitInv6||(0,S.B8)(this.git6),this.gitInv7=this.gitInv7||(0,S.B8)(this.git7),this.gitBranchLabel0=this.gitBranchLabel0||(0,S.B8)(this.labelTextColor),this.gitBranchLabel1=this.gitBranchLabel1||this.labelTextColor,this.gitBranchLabel2=this.gitBranchLabel2||this.labelTextColor,this.gitBranchLabel3=this.gitBranchLabel3||(0,S.B8)(this.labelTextColor),this.gitBranchLabel4=this.gitBranchLabel4||this.labelTextColor,this.gitBranchLabel5=this.gitBranchLabel5||this.labelTextColor,this.gitBranchLabel6=this.gitBranchLabel6||this.labelTextColor,this.gitBranchLabel7=this.gitBranchLabel7||this.labelTextColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||Se,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||Or}calculate(W){if("object"!=typeof W)return void this.updateColors();const Yt=Object.keys(W);Yt.forEach(Ye=>{this[Ye]=W[Ye]}),this.updateColors(),Yt.forEach(Ye=>{this[Ye]=W[Ye]})}static#t=wt=()=>((0,ee.A)(this,"Theme4"),(0,L.K2)(this,"Theme"),this)},wt()),re=(0,L.K2)(W=>{const Yt=new w;return Yt.calculate(W),Yt},"getThemeVariables"),It=(class{constructor(){this.primaryColor="#eee",this.contrast="#707070",this.secondaryColor=(0,S.a)(this.contrast,55),this.background="#ffffff",this.tertiaryColor=(0,S.Ai)(this.primaryColor,{h:-160}),this.primaryBorderColor=je(this.primaryColor,this.darkMode),this.secondaryBorderColor=je(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=je(this.tertiaryColor,this.darkMode),this.primaryTextColor=(0,S.B8)(this.primaryColor),this.secondaryTextColor=(0,S.B8)(this.secondaryColor),this.tertiaryTextColor=(0,S.B8)(this.tertiaryColor),this.lineColor=(0,S.B8)(this.background),this.textColor=(0,S.B8)(this.background),this.mainBkg="#eee",this.secondBkg="calculated",this.lineColor="#666",this.border1="#999",this.border2="calculated",this.note="#ffa",this.text="#333",this.critical="#d42",this.done="#bbb",this.arrowheadColor="#333333",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="calculated",this.edgeLabelBackground="white",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="calculated",this.actorLineColor=this.actorBorder,this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="calculated",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="calculated",this.altSectionBkgColor="white",this.sectionBkgColor2="calculated",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="calculated",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="calculated",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="calculated",this.critBkgColor="calculated",this.critBorderColor="calculated",this.todayLineColor="calculated",this.vertLineColor="calculated",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.archEdgeColor="calculated",this.archEdgeArrowColor="calculated",this.archEdgeWidth="3",this.archGroupBorderColor=this.primaryBorderColor,this.archGroupBorderWidth="2px",this.rowOdd=this.rowOdd||(0,S.a)(this.mainBkg,75)||"#ffffff",this.rowEven=this.rowEven||"#f4f4f4",this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222"}updateColors(){this.secondBkg=(0,S.a)(this.contrast,55),this.border2=this.contrast,this.actorBorder=(0,S.a)(this.border1,23),this.actorBkg=this.mainBkg,this.actorTextColor=this.text,this.actorLineColor=this.actorBorder,this.signalColor=this.text,this.signalTextColor=this.text,this.labelBoxBkgColor=this.actorBkg,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.text,this.loopTextColor=this.text,this.noteBorderColor="#999",this.noteBkgColor="#666",this.noteTextColor="#fff",this.cScale0=this.cScale0||"#555",this.cScale1=this.cScale1||"#F4F4F4",this.cScale2=this.cScale2||"#555",this.cScale3=this.cScale3||"#BBB",this.cScale4=this.cScale4||"#777",this.cScale5=this.cScale5||"#999",this.cScale6=this.cScale6||"#DDD",this.cScale7=this.cScale7||"#FFF",this.cScale8=this.cScale8||"#DDD",this.cScale9=this.cScale9||"#BBB",this.cScale10=this.cScale10||"#999",this.cScale11=this.cScale11||"#777";for(let W=0;W<this.THEME_COLOR_LIMIT;W++)this["cScaleInv"+W]=this["cScaleInv"+W]||(0,S.B8)(this["cScale"+W]);for(let W=0;W<this.THEME_COLOR_LIMIT;W++)this["cScalePeer"+W]=this.darkMode?this["cScalePeer"+W]||(0,S.a)(this["cScale"+W],10):this["cScalePeer"+W]||(0,S.e$)(this["cScale"+W],10);this.scaleLabelColor=this.scaleLabelColor||(this.darkMode?"black":this.labelTextColor),this.cScaleLabel0=this.cScaleLabel0||this.cScale1,this.cScaleLabel2=this.cScaleLabel2||this.cScale1;for(let W=0;W<this.THEME_COLOR_LIMIT;W++)this["cScaleLabel"+W]=this["cScaleLabel"+W]||this.scaleLabelColor;for(let W=0;W<5;W++)this["surface"+W]=this["surface"+W]||(0,S.Ai)(this.mainBkg,{l:-(5+5*W)}),this["surfacePeer"+W]=this["surfacePeer"+W]||(0,S.Ai)(this.mainBkg,{l:-(8+5*W)});this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.titleColor=this.text,this.sectionBkgColor=(0,S.a)(this.contrast,30),this.sectionBkgColor2=(0,S.a)(this.contrast,30),this.taskBorderColor=(0,S.e$)(this.contrast,10),this.taskBkgColor=this.contrast,this.taskTextColor=this.taskTextLightColor,this.taskTextDarkColor=this.text,this.taskTextOutsideColor=this.taskTextDarkColor,this.activeTaskBorderColor=this.taskBorderColor,this.activeTaskBkgColor=this.mainBkg,this.gridColor=(0,S.a)(this.border1,30),this.doneTaskBkgColor=this.done,this.doneTaskBorderColor=this.lineColor,this.critBkgColor=this.critical,this.critBorderColor=(0,S.e$)(this.critBkgColor,10),this.todayLineColor=this.critBkgColor,this.vertLineColor=this.critBkgColor,this.archEdgeColor=this.lineColor,this.archEdgeArrowColor=this.lineColor,this.transitionColor=this.transitionColor||"#000",this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f4f4f4",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.stateBorder=this.stateBorder||"#000",this.innerEndBackground=this.primaryBorderColor,this.specialStateColor="#222",this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=(0,S.Ai)(this.primaryColor,{h:64}),this.fillType3=(0,S.Ai)(this.secondaryColor,{h:64}),this.fillType4=(0,S.Ai)(this.primaryColor,{h:-64}),this.fillType5=(0,S.Ai)(this.secondaryColor,{h:-64}),this.fillType6=(0,S.Ai)(this.primaryColor,{h:128}),this.fillType7=(0,S.Ai)(this.secondaryColor,{h:128});for(let W=0;W<this.THEME_COLOR_LIMIT;W++)this["pie"+W]=this["cScale"+W];this.pie12=this.pie0,this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||(0,S.Ai)(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||(0,S.Ai)(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||(0,S.Ai)(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||(0,S.Ai)(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||(0,S.Ai)(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||(0,S.Ai)(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||(0,S.HD)(this.quadrant1Fill)?(0,S.a)(this.quadrant1Fill):(0,S.e$)(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:this.xyChart?.backgroundColor||this.background,titleColor:this.xyChart?.titleColor||this.primaryTextColor,xAxisTitleColor:this.xyChart?.xAxisTitleColor||this.primaryTextColor,xAxisLabelColor:this.xyChart?.xAxisLabelColor||this.primaryTextColor,xAxisTickColor:this.xyChart?.xAxisTickColor||this.primaryTextColor,xAxisLineColor:this.xyChart?.xAxisLineColor||this.primaryTextColor,yAxisTitleColor:this.xyChart?.yAxisTitleColor||this.primaryTextColor,yAxisLabelColor:this.xyChart?.yAxisLabelColor||this.primaryTextColor,yAxisTickColor:this.xyChart?.yAxisTickColor||this.primaryTextColor,yAxisLineColor:this.xyChart?.yAxisLineColor||this.primaryTextColor,plotColorPalette:this.xyChart?.plotColorPalette||"#EEE,#6BB8E4,#8ACB88,#C7ACD6,#E8DCC2,#FFB2A8,#FFF380,#7E8D91,#FFD8B1,#FAF3E0"},this.radar={axisColor:this.radar?.axisColor||this.lineColor,axisStrokeWidth:this.radar?.axisStrokeWidth||2,axisLabelFontSize:this.radar?.axisLabelFontSize||12,curveOpacity:this.radar?.curveOpacity||.5,curveStrokeWidth:this.radar?.curveStrokeWidth||2,graticuleColor:this.radar?.graticuleColor||"#DEDEDE",graticuleStrokeWidth:this.radar?.graticuleStrokeWidth||1,graticuleOpacity:this.radar?.graticuleOpacity||.3,legendBoxSize:this.radar?.legendBoxSize||12,legendFontSize:this.radar?.legendFontSize||12},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.edgeLabelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=(0,S.e$)(this.pie1,25)||this.primaryColor,this.git1=this.pie2||this.secondaryColor,this.git2=this.pie3||this.tertiaryColor,this.git3=this.pie4||(0,S.Ai)(this.primaryColor,{h:-30}),this.git4=this.pie5||(0,S.Ai)(this.primaryColor,{h:-60}),this.git5=this.pie6||(0,S.Ai)(this.primaryColor,{h:-90}),this.git6=this.pie7||(0,S.Ai)(this.primaryColor,{h:60}),this.git7=this.pie8||(0,S.Ai)(this.primaryColor,{h:120}),this.gitInv0=this.gitInv0||(0,S.B8)(this.git0),this.gitInv1=this.gitInv1||(0,S.B8)(this.git1),this.gitInv2=this.gitInv2||(0,S.B8)(this.git2),this.gitInv3=this.gitInv3||(0,S.B8)(this.git3),this.gitInv4=this.gitInv4||(0,S.B8)(this.git4),this.gitInv5=this.gitInv5||(0,S.B8)(this.git5),this.gitInv6=this.gitInv6||(0,S.B8)(this.git6),this.gitInv7=this.gitInv7||(0,S.B8)(this.git7),this.branchLabelColor=this.branchLabelColor||this.labelTextColor,this.gitBranchLabel0=this.branchLabelColor,this.gitBranchLabel1="white",this.gitBranchLabel2=this.branchLabelColor,this.gitBranchLabel3="white",this.gitBranchLabel4=this.branchLabelColor,this.gitBranchLabel5=this.branchLabelColor,this.gitBranchLabel6=this.branchLabelColor,this.gitBranchLabel7=this.branchLabelColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||Se,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||Or}calculate(W){if("object"!=typeof W)return void this.updateColors();const Yt=Object.keys(W);Yt.forEach(Ye=>{this[Ye]=W[Ye]}),this.updateColors(),Yt.forEach(Ye=>{this[Ye]=W[Ye]})}static#t=Ge=()=>((0,ee.A)(this,"Theme5"),(0,L.K2)(this,"Theme"),this)},Ge()),V={base:{getThemeVariables:ft},dark:{getThemeVariables:we},default:{getThemeVariables:ae},forest:{getThemeVariables:re},neutral:{getThemeVariables:(0,L.K2)(W=>{const Yt=new It;return Yt.calculate(W),Yt},"getThemeVariables")}},pt={flowchart:{useMaxWidth:!0,titleTopMargin:25,subGraphTitleMargin:{top:0,bottom:0},diagramPadding:8,htmlLabels:!0,nodeSpacing:50,rankSpacing:50,curve:"basis",padding:15,defaultRenderer:"dagre-wrapper",wrappingWidth:200,inheritDir:!1},sequence:{useMaxWidth:!0,hideUnusedParticipants:!1,activationWidth:10,diagramMarginX:50,diagramMarginY:10,actorMargin:50,width:150,height:65,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",mirrorActors:!0,forceMenus:!1,bottomMarginAdj:1,rightAngles:!1,showSequenceNumbers:!1,actorFontSize:14,actorFontFamily:'"Open Sans", sans-serif',actorFontWeight:400,noteFontSize:14,noteFontFamily:'"trebuchet ms", verdana, arial, sans-serif',noteFontWeight:400,noteAlign:"center",messageFontSize:16,messageFontFamily:'"trebuchet ms", verdana, arial, sans-serif',messageFontWeight:400,wrap:!1,wrapPadding:10,labelBoxWidth:50,labelBoxHeight:20},gantt:{useMaxWidth:!0,titleTopMargin:25,barHeight:20,barGap:4,topPadding:50,rightPadding:75,leftPadding:75,gridLineStartPadding:35,fontSize:11,sectionFontSize:11,numberSectionStyles:4,axisFormat:"%Y-%m-%d",topAxis:!1,displayMode:"",weekday:"sunday"},journey:{useMaxWidth:!0,diagramMarginX:50,diagramMarginY:10,leftMargin:150,maxLabelWidth:360,width:150,height:50,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",bottomMarginAdj:1,rightAngles:!1,taskFontSize:14,taskFontFamily:'"Open Sans", sans-serif',taskMargin:50,activationWidth:10,textPlacement:"fo",actorColours:["#8FBC8F","#7CFC00","#00FFFF","#20B2AA","#B0E0E6","#FFFFE0"],sectionFills:["#191970","#8B008B","#4B0082","#2F4F4F","#800000","#8B4513","#00008B"],sectionColours:["#fff"],titleColor:"",titleFontFamily:'"trebuchet ms", verdana, arial, sans-serif',titleFontSize:"4ex"},class:{useMaxWidth:!0,titleTopMargin:25,arrowMarkerAbsolute:!1,dividerMargin:10,padding:5,textHeight:10,defaultRenderer:"dagre-wrapper",htmlLabels:!1,hideEmptyMembersBox:!1},state:{useMaxWidth:!0,titleTopMargin:25,dividerMargin:10,sizeUnit:5,padding:8,textHeight:10,titleShift:-15,noteMargin:10,forkWidth:70,forkHeight:7,miniPadding:2,fontSizeFactor:5.02,fontSize:24,labelHeight:16,edgeLengthFactor:"20",compositTitleSize:35,radius:5,defaultRenderer:"dagre-wrapper"},er:{useMaxWidth:!0,titleTopMargin:25,diagramPadding:20,layoutDirection:"TB",minEntityWidth:100,minEntityHeight:75,entityPadding:15,nodeSpacing:140,rankSpacing:80,stroke:"gray",fill:"honeydew",fontSize:12},pie:{useMaxWidth:!0,textPosition:.75},quadrantChart:{useMaxWidth:!0,chartWidth:500,chartHeight:500,titleFontSize:20,titlePadding:10,quadrantPadding:5,xAxisLabelPadding:5,yAxisLabelPadding:5,xAxisLabelFontSize:16,yAxisLabelFontSize:16,quadrantLabelFontSize:16,quadrantTextTopPadding:5,pointTextPadding:5,pointLabelFontSize:12,pointRadius:5,xAxisPosition:"top",yAxisPosition:"left",quadrantInternalBorderStrokeWidth:1,quadrantExternalBorderStrokeWidth:2},xyChart:{useMaxWidth:!0,width:700,height:500,titleFontSize:20,titlePadding:10,showDataLabel:!1,showTitle:!0,xAxis:{$ref:"#/$defs/XYChartAxisConfig",showLabel:!0,labelFontSize:14,labelPadding:5,showTitle:!0,titleFontSize:16,titlePadding:5,showTick:!0,tickLength:5,tickWidth:2,showAxisLine:!0,axisLineWidth:2},yAxis:{$ref:"#/$defs/XYChartAxisConfig",showLabel:!0,labelFontSize:14,labelPadding:5,showTitle:!0,titleFontSize:16,titlePadding:5,showTick:!0,tickLength:5,tickWidth:2,showAxisLine:!0,axisLineWidth:2},chartOrientation:"vertical",plotReservedSpacePercent:50},requirement:{useMaxWidth:!0,rect_fill:"#f9f9f9",text_color:"#333",rect_border_size:"0.5px",rect_border_color:"#bbb",rect_min_width:200,rect_min_height:200,fontSize:14,rect_padding:10,line_height:20},mindmap:{useMaxWidth:!0,padding:10,maxNodeWidth:200,layoutAlgorithm:"cose-bilkent"},kanban:{useMaxWidth:!0,padding:8,sectionWidth:200,ticketBaseUrl:""},timeline:{useMaxWidth:!0,diagramMarginX:50,diagramMarginY:10,leftMargin:150,width:150,height:50,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",bottomMarginAdj:1,rightAngles:!1,taskFontSize:14,taskFontFamily:'"Open Sans", sans-serif',taskMargin:50,activationWidth:10,textPlacement:"fo",actorColours:["#8FBC8F","#7CFC00","#00FFFF","#20B2AA","#B0E0E6","#FFFFE0"],sectionFills:["#191970","#8B008B","#4B0082","#2F4F4F","#800000","#8B4513","#00008B"],sectionColours:["#fff"],disableMulticolor:!1},gitGraph:{useMaxWidth:!0,titleTopMargin:25,diagramPadding:8,nodeLabel:{width:75,height:100,x:-25,y:0},mainBranchName:"main",mainBranchOrder:0,showCommitLabel:!0,showBranches:!0,rotateCommitLabel:!0,parallelCommits:!1,arrowMarkerAbsolute:!1},c4:{useMaxWidth:!0,diagramMarginX:50,diagramMarginY:10,c4ShapeMargin:50,c4ShapePadding:20,width:216,height:60,boxMargin:10,c4ShapeInRow:4,nextLinePaddingX:0,c4BoundaryInRow:2,personFontSize:14,personFontFamily:'"Open Sans", sans-serif',personFontWeight:"normal",external_personFontSize:14,external_personFontFamily:'"Open Sans", sans-serif',external_personFontWeight:"normal",systemFontSize:14,systemFontFamily:'"Open Sans", sans-serif',systemFontWeight:"normal",external_systemFontSize:14,external_systemFontFamily:'"Open Sans", sans-serif',external_systemFontWeight:"normal",system_dbFontSize:14,system_dbFontFamily:'"Open Sans", sans-serif',system_dbFontWeight:"normal",external_system_dbFontSize:14,external_system_dbFontFamily:'"Open Sans", sans-serif',external_system_dbFontWeight:"normal",system_queueFontSize:14,system_queueFontFamily:'"Open Sans", sans-serif',system_queueFontWeight:"normal",external_system_queueFontSize:14,external_system_queueFontFamily:'"Open Sans", sans-serif',external_system_queueFontWeight:"normal",boundaryFontSize:14,boundaryFontFamily:'"Open Sans", sans-serif',boundaryFontWeight:"normal",messageFontSize:12,messageFontFamily:'"Open Sans", sans-serif',messageFontWeight:"normal",containerFontSize:14,containerFontFamily:'"Open Sans", sans-serif',containerFontWeight:"normal",external_containerFontSize:14,external_containerFontFamily:'"Open Sans", sans-serif',external_containerFontWeight:"normal",container_dbFontSize:14,container_dbFontFamily:'"Open Sans", sans-serif',container_dbFontWeight:"normal",external_container_dbFontSize:14,external_container_dbFontFamily:'"Open Sans", sans-serif',external_container_dbFontWeight:"normal",container_queueFontSize:14,container_queueFontFamily:'"Open Sans", sans-serif',container_queueFontWeight:"normal",external_container_queueFontSize:14,external_container_queueFontFamily:'"Open Sans", sans-serif',external_container_queueFontWeight:"normal",componentFontSize:14,componentFontFamily:'"Open Sans", sans-serif',componentFontWeight:"normal",external_componentFontSize:14,external_componentFontFamily:'"Open Sans", sans-serif',external_componentFontWeight:"normal",component_dbFontSize:14,component_dbFontFamily:'"Open Sans", sans-serif',component_dbFontWeight:"normal",external_component_dbFontSize:14,external_component_dbFontFamily:'"Open Sans", sans-serif',external_component_dbFontWeight:"normal",component_queueFontSize:14,component_queueFontFamily:'"Open Sans", sans-serif',component_queueFontWeight:"normal",external_component_queueFontSize:14,external_component_queueFontFamily:'"Open Sans", sans-serif',external_component_queueFontWeight:"normal",wrap:!0,wrapPadding:10,person_bg_color:"#08427B",person_border_color:"#073B6F",external_person_bg_color:"#686868",external_person_border_color:"#8A8A8A",system_bg_color:"#1168BD",system_border_color:"#3C7FC0",system_db_bg_color:"#1168BD",system_db_border_color:"#3C7FC0",system_queue_bg_color:"#1168BD",system_queue_border_color:"#3C7FC0",external_system_bg_color:"#999999",external_system_border_color:"#8A8A8A",external_system_db_bg_color:"#999999",external_system_db_border_color:"#8A8A8A",external_system_queue_bg_color:"#999999",external_system_queue_border_color:"#8A8A8A",container_bg_color:"#438DD5",container_border_color:"#3C7FC0",container_db_bg_color:"#438DD5",container_db_border_color:"#3C7FC0",container_queue_bg_color:"#438DD5",container_queue_border_color:"#3C7FC0",external_container_bg_color:"#B3B3B3",external_container_border_color:"#A6A6A6",external_container_db_bg_color:"#B3B3B3",external_container_db_border_color:"#A6A6A6",external_container_queue_bg_color:"#B3B3B3",external_container_queue_border_color:"#A6A6A6",component_bg_color:"#85BBF0",component_border_color:"#78A8D8",component_db_bg_color:"#85BBF0",component_db_border_color:"#78A8D8",component_queue_bg_color:"#85BBF0",component_queue_border_color:"#78A8D8",external_component_bg_color:"#CCCCCC",external_component_border_color:"#BFBFBF",external_component_db_bg_color:"#CCCCCC",external_component_db_border_color:"#BFBFBF",external_component_queue_bg_color:"#CCCCCC",external_component_queue_border_color:"#BFBFBF"},sankey:{useMaxWidth:!0,width:600,height:400,linkColor:"gradient",nodeAlignment:"justify",showValues:!0,prefix:"",suffix:""},block:{useMaxWidth:!0,padding:8},packet:{useMaxWidth:!0,rowHeight:32,bitWidth:32,bitsPerRow:32,showBits:!0,paddingX:5,paddingY:5},architecture:{useMaxWidth:!0,padding:40,iconSize:80,fontSize:16},radar:{useMaxWidth:!0,width:600,height:600,marginTop:50,marginRight:50,marginBottom:50,marginLeft:50,axisScaleFactor:1,axisLabelFactor:1.05,curveTension:.17},theme:"default",look:"classic",handDrawnSeed:0,layout:"dagre",maxTextSize:5e4,maxEdges:500,darkMode:!1,fontFamily:'"trebuchet ms", verdana, arial, sans-serif;',logLevel:5,securityLevel:"strict",startOnLoad:!0,arrowMarkerAbsolute:!1,secure:["secure","securityLevel","startOnLoad","maxTextSize","suppressErrorRendering","maxEdges"],legacyMathML:!1,forceLegacyMathML:!1,deterministicIds:!1,fontSize:16,markdownAutoWrap:!0,suppressErrorRendering:!1},H={...pt,deterministicIDSeed:void 0,elk:{mergeEdges:!1,nodePlacementStrategy:"BRANDES_KOEPF",forceNodeModelOrder:!1,considerModelOrder:"NODES_AND_EDGES"},themeCSS:void 0,themeVariables:V.default.getThemeVariables(),sequence:{...pt.sequence,messageFont:(0,L.K2)(function(){return{fontFamily:this.messageFontFamily,fontSize:this.messageFontSize,fontWeight:this.messageFontWeight}},"messageFont"),noteFont:(0,L.K2)(function(){return{fontFamily:this.noteFontFamily,fontSize:this.noteFontSize,fontWeight:this.noteFontWeight}},"noteFont"),actorFont:(0,L.K2)(function(){return{fontFamily:this.actorFontFamily,fontSize:this.actorFontSize,fontWeight:this.actorFontWeight}},"actorFont")},class:{hideEmptyMembersBox:!1},gantt:{...pt.gantt,tickInterval:void 0,useWidth:void 0},c4:{...pt.c4,useWidth:void 0,personFont:(0,L.K2)(function(){return{fontFamily:this.personFontFamily,fontSize:this.personFontSize,fontWeight:this.personFontWeight}},"personFont"),flowchart:{...pt.flowchart,inheritDir:!1},external_personFont:(0,L.K2)(function(){return{fontFamily:this.external_personFontFamily,fontSize:this.external_personFontSize,fontWeight:this.external_personFontWeight}},"external_personFont"),systemFont:(0,L.K2)(function(){return{fontFamily:this.systemFontFamily,fontSize:this.systemFontSize,fontWeight:this.systemFontWeight}},"systemFont"),external_systemFont:(0,L.K2)(function(){return{fontFamily:this.external_systemFontFamily,fontSize:this.external_systemFontSize,fontWeight:this.external_systemFontWeight}},"external_systemFont"),system_dbFont:(0,L.K2)(function(){return{fontFamily:this.system_dbFontFamily,fontSize:this.system_dbFontSize,fontWeight:this.system_dbFontWeight}},"system_dbFont"),external_system_dbFont:(0,L.K2)(function(){return{fontFamily:this.external_system_dbFontFamily,fontSize:this.external_system_dbFontSize,fontWeight:this.external_system_dbFontWeight}},"external_system_dbFont"),system_queueFont:(0,L.K2)(function(){return{fontFamily:this.system_queueFontFamily,fontSize:this.system_queueFontSize,fontWeight:this.system_queueFontWeight}},"system_queueFont"),external_system_queueFont:(0,L.K2)(function(){return{fontFamily:this.external_system_queueFontFamily,fontSize:this.external_system_queueFontSize,fontWeight:this.external_system_queueFontWeight}},"external_system_queueFont"),containerFont:(0,L.K2)(function(){return{fontFamily:this.containerFontFamily,fontSize:this.containerFontSize,fontWeight:this.containerFontWeight}},"containerFont"),external_containerFont:(0,L.K2)(function(){return{fontFamily:this.external_containerFontFamily,fontSize:this.external_containerFontSize,fontWeight:this.external_containerFontWeight}},"external_containerFont"),container_dbFont:(0,L.K2)(function(){return{fontFamily:this.container_dbFontFamily,fontSize:this.container_dbFontSize,fontWeight:this.container_dbFontWeight}},"container_dbFont"),external_container_dbFont:(0,L.K2)(function(){return{fontFamily:this.external_container_dbFontFamily,fontSize:this.external_container_dbFontSize,fontWeight:this.external_container_dbFontWeight}},"external_container_dbFont"),container_queueFont:(0,L.K2)(function(){return{fontFamily:this.container_queueFontFamily,fontSize:this.container_queueFontSize,fontWeight:this.container_queueFontWeight}},"container_queueFont"),external_container_queueFont:(0,L.K2)(function(){return{fontFamily:this.external_container_queueFontFamily,fontSize:this.external_container_queueFontSize,fontWeight:this.external_container_queueFontWeight}},"external_container_queueFont"),componentFont:(0,L.K2)(function(){return{fontFamily:this.componentFontFamily,fontSize:this.componentFontSize,fontWeight:this.componentFontWeight}},"componentFont"),external_componentFont:(0,L.K2)(function(){return{fontFamily:this.external_componentFontFamily,fontSize:this.external_componentFontSize,fontWeight:this.external_componentFontWeight}},"external_componentFont"),component_dbFont:(0,L.K2)(function(){return{fontFamily:this.component_dbFontFamily,fontSize:this.component_dbFontSize,fontWeight:this.component_dbFontWeight}},"component_dbFont"),external_component_dbFont:(0,L.K2)(function(){return{fontFamily:this.external_component_dbFontFamily,fontSize:this.external_component_dbFontSize,fontWeight:this.external_component_dbFontWeight}},"external_component_dbFont"),component_queueFont:(0,L.K2)(function(){return{fontFamily:this.component_queueFontFamily,fontSize:this.component_queueFontSize,fontWeight:this.component_queueFontWeight}},"component_queueFont"),external_component_queueFont:(0,L.K2)(function(){return{fontFamily:this.external_component_queueFontFamily,fontSize:this.external_component_queueFontSize,fontWeight:this.external_component_queueFontWeight}},"external_component_queueFont"),boundaryFont:(0,L.K2)(function(){return{fontFamily:this.boundaryFontFamily,fontSize:this.boundaryFontSize,fontWeight:this.boundaryFontWeight}},"boundaryFont"),messageFont:(0,L.K2)(function(){return{fontFamily:this.messageFontFamily,fontSize:this.messageFontSize,fontWeight:this.messageFontWeight}},"messageFont")},pie:{...pt.pie,useWidth:984},xyChart:{...pt.xyChart,useWidth:void 0},requirement:{...pt.requirement,useWidth:void 0},packet:{...pt.packet},radar:{...pt.radar},treemap:{useMaxWidth:!0,padding:10,diagramPadding:8,showValues:!0,nodeWidth:100,nodeHeight:40,borderWidth:1,valueFontSize:12,labelFontSize:14,valueFormat:","}},Nt=(0,L.K2)((W,Yt="")=>Object.keys(W).reduce((Ye,Ne)=>Array.isArray(W[Ne])?Ye:"object"==typeof W[Ne]&&null!==W[Ne]?[...Ye,Yt+Ne,...Nt(W[Ne],"")]:[...Ye,Yt+Ne],[]),"keyify"),St=new Set(Nt(H,"")),$t=H,ye=(0,L.K2)(W=>{if(L.Rm.debug("sanitizeDirective called with",W),"object"==typeof W&&null!=W){if(Array.isArray(W))return void W.forEach(Yt=>ye(Yt));for(const Yt of Object.keys(W)){if(L.Rm.debug("Checking key",Yt),Yt.startsWith("__")||Yt.includes("proto")||Yt.includes("constr")||!St.has(Yt)||null==W[Yt]){L.Rm.debug("sanitize deleting key: ",Yt),delete W[Yt];continue}if("object"==typeof W[Yt]){L.Rm.debug("sanitizing object",Yt),ye(W[Yt]);continue}const Ye=["themeCSS","fontFamily","altFontFamily"];for(const Ne of Ye)Yt.includes(Ne)&&(L.Rm.debug("sanitizing css option",Yt),W[Yt]=le(W[Yt]))}if(W.themeVariables)for(const Yt of Object.keys(W.themeVariables)){const Ye=W.themeVariables[Yt];Ye?.match&&!Ye.match(/^[\d "#%(),.;A-Za-z]+$/)&&(W.themeVariables[Yt]="")}L.Rm.debug("After sanitization",W)}},"sanitizeDirective"),le=(0,L.K2)(W=>{let Yt=0,Ye=0;for(const Ne of W){if(Yt<Ye)return"{ /* ERROR: Unbalanced CSS */ }";"{"===Ne?Yt++:"}"===Ne&&Ye++}return Yt!==Ye?"{ /* ERROR: Unbalanced CSS */ }":W},"sanitizeCss"),Pe=Object.freeze($t),oe=Fr({},Pe),ze=[],Et=Fr({},Pe),Tt=(0,L.K2)((W,Yt)=>{let Ye=Fr({},W),Ne={};for(const Tr of Yt)_t(Tr),Ne=Fr(Ne,Tr);if(Ye=Fr(Ye,Ne),Ne.theme&&Ne.theme in V){const Tr=Fr({},qe),yr=Fr(Tr.themeVariables||{},Ne.themeVariables);Ye.theme&&Ye.theme in V&&(Ye.themeVariables=V[Ye.theme].getThemeVariables(yr))}return Mt(Et=Ye),Et},"updateCurrentConfig"),B=(0,L.K2)(W=>(oe=Fr({},Pe),oe=Fr(oe,W),W.theme&&V[W.theme]&&(oe.themeVariables=V[W.theme].getThemeVariables(W.themeVariables)),Tt(oe,ze),oe),"setSiteConfig"),F=(0,L.K2)(W=>{qe=Fr({},W)},"saveConfigFromInitialize"),et=(0,L.K2)(W=>(oe=Fr(oe,W),Tt(oe,ze),oe),"updateSiteConfig"),mt=(0,L.K2)(()=>Fr({},oe),"getSiteConfig"),it=(0,L.K2)(W=>(Mt(W),Fr(Et,W),rt()),"setConfig"),rt=(0,L.K2)(()=>Fr({},Et),"getConfig"),_t=(0,L.K2)(W=>{W&&(["secure",...oe.secure??[]].forEach(Yt=>{Object.hasOwn(W,Yt)&&(L.Rm.debug(`Denied attempt to modify a secure key ${Yt}`,W[Yt]),delete W[Yt])}),Object.keys(W).forEach(Yt=>{Yt.startsWith("__")&&delete W[Yt]}),Object.keys(W).forEach(Yt=>{"string"==typeof W[Yt]&&(W[Yt].includes("<")||W[Yt].includes(">")||W[Yt].includes("url(data:"))&&delete W[Yt],"object"==typeof W[Yt]&&_t(W[Yt])}))},"sanitize"),ht=(0,L.K2)(W=>{ye(W),W.fontFamily&&!W.themeVariables?.fontFamily&&(W.themeVariables={...W.themeVariables,fontFamily:W.fontFamily}),ze.push(W),Tt(oe,ze)},"addDirective"),Ft=(0,L.K2)((W=oe)=>{Tt(W,ze=[])},"reset"),G={LAZY_LOAD_DEPRECATED:"The configuration options lazyLoadedDiagrams and loadExternalDiagramsAtStartup are deprecated. Please use registerExternalDiagrams instead."},lt={},ke=(0,L.K2)(W=>{lt[W]||(L.Rm.warn(G[W]),lt[W]=!0)},"issueWarning"),Mt=(0,L.K2)(W=>{W&&(W.lazyLoadedDiagrams||W.loadExternalDiagramsAtStartup)&&ke("LAZY_LOAD_DEPRECATED")},"checkConfig"),Zt=(0,L.K2)(()=>{let W={};qe&&(W=Fr(W,qe));for(const Yt of ze)W=Fr(W,Yt);return W},"getUserDefinedConfig"),pe=/<br\s*\/?>/gi,Re=(0,L.K2)(W=>W?Ee(W).replace(/\\n/g,"#br#").split("#br#"):[""],"getRows"),Ze=(()=>{let W=!1;return()=>{W||(de(),W=!0)}})();function de(){const W="data-temp-href-target";Pt.A.addHook("beforeSanitizeAttributes",Yt=>{"A"===Yt.tagName&&Yt.hasAttribute("target")&&Yt.setAttribute(W,Yt.getAttribute("target")??"")}),Pt.A.addHook("afterSanitizeAttributes",Yt=>{"A"===Yt.tagName&&Yt.hasAttribute(W)&&(Yt.setAttribute("target",Yt.getAttribute(W)??""),Yt.removeAttribute(W),"_blank"===Yt.getAttribute("target")&&Yt.setAttribute("rel","noopener"))})}(0,L.K2)(de,"setupDompurifyHooks");var mr=(0,L.K2)(W=>(Ze(),Pt.A.sanitize(W)),"removeScript"),xr=(0,L.K2)((W,Yt)=>{if(!1!==Yt.flowchart?.htmlLabels){const Ye=Yt.securityLevel;"antiscript"===Ye||"strict"===Ye?W=mr(W):"loose"!==Ye&&(W=(W=(W=Ee(W)).replace(/</g,"&lt;").replace(/>/g,"&gt;")).replace(/=/g,"&equals;"),W=ce(W))}return W},"sanitizeMore"),zt=(0,L.K2)((W,Yt)=>W&&(Yt.dompurifyConfig?Pt.A.sanitize(xr(W,Yt),Yt.dompurifyConfig).toString():Pt.A.sanitize(xr(W,Yt),{FORBID_TAGS:["style"]}).toString()),"sanitizeText"),Ae=(0,L.K2)((W,Yt)=>"string"==typeof W?zt(W,Yt):W.flat().map(Ye=>zt(Ye,Yt)),"sanitizeTextOrArray"),or=(0,L.K2)(W=>pe.test(W),"hasBreaks"),ve=(0,L.K2)(W=>W.split(pe),"splitBreaks"),ce=(0,L.K2)(W=>W.replace(/#br#/g,"<br/>"),"placeholderToBreak"),Ee=(0,L.K2)(W=>W.replace(pe,"#br#"),"breakToPlaceholder"),De=(0,L.K2)(W=>{let Yt="";return W&&(Yt=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,Yt=CSS.escape(Yt)),Yt},"getUrl"),er=(0,L.K2)(W=>!(!1===W||["false","null","0"].includes(String(W).trim().toLowerCase())),"evaluate"),Qe=(0,L.K2)(function(...W){const Yt=W.filter(Ye=>!isNaN(Ye));return Math.max(...Yt)},"getMax"),Lr=(0,L.K2)(function(...W){const Yt=W.filter(Ye=>!isNaN(Ye));return Math.min(...Yt)},"getMin"),_e=(0,L.K2)(function(W){const Yt=W.split(/(,)/),Ye=[];for(let Ne=0;Ne<Yt.length;Ne++){let Tr=Yt[Ne];if(","===Tr&&Ne>0&&Ne+1<Yt.length){const yr=Yt[Ne-1],da=Yt[Ne+1];sr(yr,da)&&(Tr=yr+","+da,Ne++,Ye.pop())}Ye.push(te(Tr))}return Ye.join("")},"parseGenericTypes"),Hr=(0,L.K2)((W,Yt)=>Math.max(0,W.split(Yt).length-1),"countOccurrence"),sr=(0,L.K2)((W,Yt)=>{const Ye=Hr(W,"~"),Ne=Hr(Yt,"~");return 1===Ye&&1===Ne},"shouldCombineSets"),te=(0,L.K2)(W=>{const Yt=Hr(W,"~");let Ye=!1;if(Yt<=1)return W;Yt%2!=0&&W.startsWith("~")&&(W=W.substring(1),Ye=!0);const Ne=[...W];let Tr=Ne.indexOf("~"),yr=Ne.lastIndexOf("~");for(;-1!==Tr&&-1!==yr&&Tr!==yr;)Ne[Tr]="<",Ne[yr]=">",Tr=Ne.indexOf("~"),yr=Ne.lastIndexOf("~");return Ye&&Ne.unshift("~"),Ne.join("")},"processSet"),ne=(0,L.K2)(()=>void 0!==window.MathMLElement,"isMathMLSupported"),be=/\$\$(.*)\$\$/g,ir=(0,L.K2)(W=>(W.match(be)?.length??0)>0,"hasKatex"),g=(0,L.K2)(function(){var W=(0,ot.A)(function*(Yt,Ye){const Ne=document.createElement("div");Ne.innerHTML=yield E(Yt,Ye),Ne.id="katex-temp",Ne.style.visibility="hidden",Ne.style.position="absolute",Ne.style.top="0",document.querySelector("body")?.insertAdjacentElement("beforeend",Ne);const yr={width:Ne.clientWidth,height:Ne.clientHeight};return Ne.remove(),yr});return function(Yt,Ye){return W.apply(this,arguments)}}(),"calculateMathMLDimensions"),y=(0,L.K2)(function(){var W=(0,ot.A)(function*(Yt,Ye){if(!ir(Yt))return Yt;if(!(ne()||Ye.legacyMathML||Ye.forceLegacyMathML))return Yt.replace(be,"MathML is unsupported in this environment.");{const{default:Ne}=yield R.e(256).then(R.bind(R,97256)),Tr=Ye.forceLegacyMathML||!ne()&&Ye.legacyMathML?"htmlAndMathml":"mathml";return Yt.split(pe).map(yr=>ir(yr)?`<div style="display: flex; align-items: center; justify-content: center; white-space: nowrap;">${yr}</div>`:`<div>${yr}</div>`).join("").replace(be,(yr,da)=>Ne.renderToString(da,{throwOnError:!0,displayMode:!0,output:Tr}).replace(/\n/g," ").replace(/<annotation.*<\/annotation>/g,""))}});return function(Yt,Ye){return W.apply(this,arguments)}}(),"renderKatexUnsanitized"),E=(0,L.K2)(function(){var W=(0,ot.A)(function*(Yt,Ye){return zt(yield y(Yt,Ye),Ye)});return function(Yt,Ye){return W.apply(this,arguments)}}(),"renderKatexSanitized"),I={getRows:Re,sanitizeText:zt,sanitizeTextOrArray:Ae,hasBreaks:or,splitBreaks:ve,lineBreakRegex:pe,removeScript:mr,getUrl:De,evaluate:er,getMax:Qe,getMin:Lr},m=(0,L.K2)(function(W,Yt){for(let Ye of Yt)W.attr(Ye[0],Ye[1])},"d3Attrs"),D=(0,L.K2)(function(W,Yt,Ye){let Ne=new Map;return Ye?(Ne.set("width","100%"),Ne.set("style",`max-width: ${Yt}px;`)):(Ne.set("height",W),Ne.set("width",Yt)),Ne},"calculateSvgSizeAttrs"),v=(0,L.K2)(function(W,Yt,Ye,Ne){const Tr=D(Yt,Ye,Ne);m(W,Tr)},"configureSvgSize"),b=(0,L.K2)(function(W,Yt,Ye,Ne){const Tr=Yt.node().getBBox(),yr=Tr.width,da=Tr.height;L.Rm.info(`SVG bounds: ${yr}x${da}`,Tr);let Pa=0,Ia=0;L.Rm.info(`Graph bounds: ${Pa}x${Ia}`,W),Pa=yr+2*Ye,Ia=da+2*Ye,L.Rm.info(`Calculated bounds: ${Pa}x${Ia}`),v(Yt,Ia,Pa,Ne),Yt.attr("viewBox",`${Tr.x-Ye} ${Tr.y-Ye} ${Tr.width+2*Ye} ${Tr.height+2*Ye}`)},"setupGraphViewbox"),C={},P=(0,L.K2)((W,Yt,Ye)=>{let Ne="";return W in C&&C[W]?Ne=C[W](Ye):L.Rm.warn(`No theme found for ${W}`),` & {\n    font-family: ${Ye.fontFamily};\n    font-size: ${Ye.fontSize};\n    fill: ${Ye.textColor}\n  }\n  @keyframes edge-animation-frame {\n    from {\n      stroke-dashoffset: 0;\n    }\n  }\n  @keyframes dash {\n    to {\n      stroke-dashoffset: 0;\n    }\n  }\n  & .edge-animation-slow {\n    stroke-dasharray: 9,5 !important;\n    stroke-dashoffset: 900;\n    animation: dash 50s linear infinite;\n    stroke-linecap: round;\n  }\n  & .edge-animation-fast {\n    stroke-dasharray: 9,5 !important;\n    stroke-dashoffset: 900;\n    animation: dash 20s linear infinite;\n    stroke-linecap: round;\n  }\n  /* Classes common for multiple diagrams */\n\n  & .error-icon {\n    fill: ${Ye.errorBkgColor};\n  }\n  & .error-text {\n    fill: ${Ye.errorTextColor};\n    stroke: ${Ye.errorTextColor};\n  }\n\n  & .edge-thickness-normal {\n    stroke-width: 1px;\n  }\n  & .edge-thickness-thick {\n    stroke-width: 3.5px\n  }\n  & .edge-pattern-solid {\n    stroke-dasharray: 0;\n  }\n  & .edge-thickness-invisible {\n    stroke-width: 0;\n    fill: none;\n  }\n  & .edge-pattern-dashed{\n    stroke-dasharray: 3;\n  }\n  .edge-pattern-dotted {\n    stroke-dasharray: 2;\n  }\n\n  & .marker {\n    fill: ${Ye.lineColor};\n    stroke: ${Ye.lineColor};\n  }\n  & .marker.cross {\n    stroke: ${Ye.lineColor};\n  }\n\n  & svg {\n    font-family: ${Ye.fontFamily};\n    font-size: ${Ye.fontSize};\n  }\n   & p {\n    margin: 0\n   }\n\n  ${Ne}\n\n  ${Yt}\n`},"getStyles"),Q=(0,L.K2)((W,Yt)=>{void 0!==Yt&&(C[W]=Yt)},"addStylesForDiagram"),xt=P,Vt={};(0,L.VA)(Vt,{clear:()=>Xe,getAccDescription:()=>_r,getAccTitle:()=>gr,getDiagramTitle:()=>He,setAccDescription:()=>hr,setAccTitle:()=>We,setDiagramTitle:()=>$e});var jt="",Ut="",Wt="",xe=(0,L.K2)(W=>zt(W,rt()),"sanitizeText"),Xe=(0,L.K2)(()=>{jt="",Wt="",Ut=""},"clear"),We=(0,L.K2)(W=>{jt=xe(W).replace(/^\s+/g,"")},"setAccTitle"),gr=(0,L.K2)(()=>jt,"getAccTitle"),hr=(0,L.K2)(W=>{Wt=xe(W).replace(/\n\s+/g,"\n")},"setAccDescription"),_r=(0,L.K2)(()=>Wt,"getAccDescription"),$e=(0,L.K2)(W=>{Ut=xe(W)},"setDiagramTitle"),He=(0,L.K2)(()=>Ut,"getDiagramTitle"),Ar=L.Rm,kr=L.He,zr=rt,Er=it,Jr=Pe,Br=(0,L.K2)(W=>zt(W,zr()),"sanitizeText"),ha=b,ia=(0,L.K2)(()=>Vt,"getCommonDb"),jr={},Qr=(0,L.K2)((W,Yt,Ye)=>{jr[W]&&Ar.warn(`Diagram with id ${W} already registered. Overwriting.`),jr[W]=Yt,Ye&&Vr(W,Ye),Q(W,Yt.styles),Yt.injectUtils?.(Ar,kr,zr,Br,ha,ia(),()=>{})},"registerDiagram"),lr=(0,L.K2)(W=>{if(W in jr)return jr[W];throw new dr(W)},"getDiagram"),dr=(class extends Error{constructor(W){super(`Diagram ${W} not found.`)}static#t=dt=()=>((0,ee.A)(this,"DiagramNotFoundError"),(0,L.K2)(this,"DiagramNotFoundError"),this)},dt())},79158:(Ja,vr,R)=>{"use strict";R.r(vr),R.d(vr,{diagram:()=>je});var cr,ot=R(89204),ee=R(45027),L=R(5675),S=R(8086),Pt=R(72271),dt=(R(98954),R(36384),R(87452),R(32239),R(19753),R(59355),R(52052)),Rt=R(79006),q=R(32303),ar=R(40622),Ke=R(79687),Rr=function(){var z=(0,q.K2)(function(ce,Ee,De,er){for(De=De||{},er=ce.length;er--;De[ce[er]]=Ee);return De},"o"),ft=[6,8,10,22,24,26,28,33,34,35,36,37,40,43,44,50],Bt=[1,10],we=[1,11],X=[1,12],ae=[1,13],w=[1,20],re=[1,21],It=[1,22],qt=[1,23],V=[1,24],pt=[1,19],H=[1,25],Nt=[1,26],St=[1,18],$t=[1,33],ye=[1,34],le=[1,35],Pe=[1,36],oe=[1,37],qe=[6,8,10,13,15,17,20,21,22,24,26,28,33,34,35,36,37,40,43,44,50,63,64,65,66,67],ze=[1,42],Et=[1,43],Tt=[1,52],B=[40,50,68,69],F=[1,63],et=[1,61],mt=[1,58],it=[1,62],rt=[1,64],_t=[6,8,10,13,17,22,24,26,28,33,34,35,36,37,40,41,42,43,44,48,49,50,63,64,65,66,67],ht=[63,64,65,66,67],Ft=[1,81],G=[1,80],lt=[1,78],ke=[1,79],Mt=[6,10,42,47],Zt=[6,10,13,41,42,47,48,49],pe=[1,89],Re=[1,88],Ze=[1,87],de=[19,56],mr=[1,98],xr=[1,97],zt=[19,56,58,60],Ae={trace:(0,q.K2)(function(){},"trace"),yy:{},symbols_:{error:2,start:3,ER_DIAGRAM:4,document:5,EOF:6,line:7,SPACE:8,statement:9,NEWLINE:10,entityName:11,relSpec:12,COLON:13,role:14,STYLE_SEPARATOR:15,idList:16,BLOCK_START:17,attributes:18,BLOCK_STOP:19,SQS:20,SQE:21,title:22,title_value:23,acc_title:24,acc_title_value:25,acc_descr:26,acc_descr_value:27,acc_descr_multiline_value:28,direction:29,classDefStatement:30,classStatement:31,styleStatement:32,direction_tb:33,direction_bt:34,direction_rl:35,direction_lr:36,CLASSDEF:37,stylesOpt:38,separator:39,UNICODE_TEXT:40,STYLE_TEXT:41,COMMA:42,CLASS:43,STYLE:44,style:45,styleComponent:46,SEMI:47,NUM:48,BRKT:49,ENTITY_NAME:50,attribute:51,attributeType:52,attributeName:53,attributeKeyTypeList:54,attributeComment:55,ATTRIBUTE_WORD:56,attributeKeyType:57,",":58,ATTRIBUTE_KEY:59,COMMENT:60,cardinality:61,relType:62,ZERO_OR_ONE:63,ZERO_OR_MORE:64,ONE_OR_MORE:65,ONLY_ONE:66,MD_PARENT:67,NON_IDENTIFYING:68,IDENTIFYING:69,WORD:70,$accept:0,$end:1},terminals_:{2:"error",4:"ER_DIAGRAM",6:"EOF",8:"SPACE",10:"NEWLINE",13:"COLON",15:"STYLE_SEPARATOR",17:"BLOCK_START",19:"BLOCK_STOP",20:"SQS",21:"SQE",22:"title",23:"title_value",24:"acc_title",25:"acc_title_value",26:"acc_descr",27:"acc_descr_value",28:"acc_descr_multiline_value",33:"direction_tb",34:"direction_bt",35:"direction_rl",36:"direction_lr",37:"CLASSDEF",40:"UNICODE_TEXT",41:"STYLE_TEXT",42:"COMMA",43:"CLASS",44:"STYLE",47:"SEMI",48:"NUM",49:"BRKT",50:"ENTITY_NAME",56:"ATTRIBUTE_WORD",58:",",59:"ATTRIBUTE_KEY",60:"COMMENT",63:"ZERO_OR_ONE",64:"ZERO_OR_MORE",65:"ONE_OR_MORE",66:"ONLY_ONE",67:"MD_PARENT",68:"NON_IDENTIFYING",69:"IDENTIFYING",70:"WORD"},productions_:[0,[3,3],[5,0],[5,2],[7,2],[7,1],[7,1],[7,1],[9,5],[9,9],[9,7],[9,7],[9,4],[9,6],[9,3],[9,5],[9,1],[9,3],[9,7],[9,9],[9,6],[9,8],[9,4],[9,6],[9,2],[9,2],[9,2],[9,1],[9,1],[9,1],[9,1],[9,1],[29,1],[29,1],[29,1],[29,1],[30,4],[16,1],[16,1],[16,3],[16,3],[31,3],[32,4],[38,1],[38,3],[45,1],[45,2],[39,1],[39,1],[39,1],[46,1],[46,1],[46,1],[46,1],[11,1],[11,1],[18,1],[18,2],[51,2],[51,3],[51,3],[51,4],[52,1],[53,1],[54,1],[54,3],[57,1],[55,1],[12,3],[61,1],[61,1],[61,1],[61,1],[61,1],[62,1],[62,1],[14,1],[14,1],[14,1]],performAction:(0,q.K2)(function(Ee,De,er,Qe,Lr,_e,Hr){var sr=_e.length-1;switch(Lr){case 1:break;case 2:case 6:case 7:this.$=[];break;case 3:_e[sr-1].push(_e[sr]),this.$=_e[sr-1];break;case 4:case 5:case 55:case 78:case 62:case 63:case 66:this.$=_e[sr];break;case 8:Qe.addEntity(_e[sr-4]),Qe.addEntity(_e[sr-2]),Qe.addRelationship(_e[sr-4],_e[sr],_e[sr-2],_e[sr-3]);break;case 9:Qe.addEntity(_e[sr-8]),Qe.addEntity(_e[sr-4]),Qe.addRelationship(_e[sr-8],_e[sr],_e[sr-4],_e[sr-5]),Qe.setClass([_e[sr-8]],_e[sr-6]),Qe.setClass([_e[sr-4]],_e[sr-2]);break;case 10:Qe.addEntity(_e[sr-6]),Qe.addEntity(_e[sr-2]),Qe.addRelationship(_e[sr-6],_e[sr],_e[sr-2],_e[sr-3]),Qe.setClass([_e[sr-6]],_e[sr-4]);break;case 11:Qe.addEntity(_e[sr-6]),Qe.addEntity(_e[sr-4]),Qe.addRelationship(_e[sr-6],_e[sr],_e[sr-4],_e[sr-5]),Qe.setClass([_e[sr-4]],_e[sr-2]);break;case 12:Qe.addEntity(_e[sr-3]),Qe.addAttributes(_e[sr-3],_e[sr-1]);break;case 13:Qe.addEntity(_e[sr-5]),Qe.addAttributes(_e[sr-5],_e[sr-1]),Qe.setClass([_e[sr-5]],_e[sr-3]);break;case 14:Qe.addEntity(_e[sr-2]);break;case 15:Qe.addEntity(_e[sr-4]),Qe.setClass([_e[sr-4]],_e[sr-2]);break;case 16:Qe.addEntity(_e[sr]);break;case 17:Qe.addEntity(_e[sr-2]),Qe.setClass([_e[sr-2]],_e[sr]);break;case 18:Qe.addEntity(_e[sr-6],_e[sr-4]),Qe.addAttributes(_e[sr-6],_e[sr-1]);break;case 19:Qe.addEntity(_e[sr-8],_e[sr-6]),Qe.addAttributes(_e[sr-8],_e[sr-1]),Qe.setClass([_e[sr-8]],_e[sr-3]);break;case 20:Qe.addEntity(_e[sr-5],_e[sr-3]);break;case 21:Qe.addEntity(_e[sr-7],_e[sr-5]),Qe.setClass([_e[sr-7]],_e[sr-2]);break;case 22:Qe.addEntity(_e[sr-3],_e[sr-1]);break;case 23:Qe.addEntity(_e[sr-5],_e[sr-3]),Qe.setClass([_e[sr-5]],_e[sr]);break;case 24:case 25:this.$=_e[sr].trim(),Qe.setAccTitle(this.$);break;case 26:case 27:this.$=_e[sr].trim(),Qe.setAccDescription(this.$);break;case 32:Qe.setDirection("TB");break;case 33:Qe.setDirection("BT");break;case 34:Qe.setDirection("RL");break;case 35:Qe.setDirection("LR");break;case 36:this.$=_e[sr-3],Qe.addClass(_e[sr-2],_e[sr-1]);break;case 37:case 38:case 56:case 64:case 43:this.$=[_e[sr]];break;case 39:case 40:this.$=_e[sr-2].concat([_e[sr]]);break;case 41:this.$=_e[sr-2],Qe.setClass(_e[sr-1],_e[sr]);break;case 42:this.$=_e[sr-3],Qe.addCssStyles(_e[sr-2],_e[sr-1]);break;case 44:case 65:_e[sr-2].push(_e[sr]),this.$=_e[sr-2];break;case 46:this.$=_e[sr-1]+_e[sr];break;case 54:case 76:case 77:case 67:this.$=_e[sr].replace(/"/g,"");break;case 57:_e[sr].push(_e[sr-1]),this.$=_e[sr];break;case 58:this.$={type:_e[sr-1],name:_e[sr]};break;case 59:this.$={type:_e[sr-2],name:_e[sr-1],keys:_e[sr]};break;case 60:this.$={type:_e[sr-2],name:_e[sr-1],comment:_e[sr]};break;case 61:this.$={type:_e[sr-3],name:_e[sr-2],keys:_e[sr-1],comment:_e[sr]};break;case 68:this.$={cardA:_e[sr],relType:_e[sr-1],cardB:_e[sr-2]};break;case 69:this.$=Qe.Cardinality.ZERO_OR_ONE;break;case 70:this.$=Qe.Cardinality.ZERO_OR_MORE;break;case 71:this.$=Qe.Cardinality.ONE_OR_MORE;break;case 72:this.$=Qe.Cardinality.ONLY_ONE;break;case 73:this.$=Qe.Cardinality.MD_PARENT;break;case 74:this.$=Qe.Identification.NON_IDENTIFYING;break;case 75:this.$=Qe.Identification.IDENTIFYING}},"anonymous"),table:[{3:1,4:[1,2]},{1:[3]},z(ft,[2,2],{5:3}),{6:[1,4],7:5,8:[1,6],9:7,10:[1,8],11:9,22:Bt,24:we,26:X,28:ae,29:14,30:15,31:16,32:17,33:w,34:re,35:It,36:qt,37:V,40:pt,43:H,44:Nt,50:St},z(ft,[2,7],{1:[2,1]}),z(ft,[2,3]),{9:27,11:9,22:Bt,24:we,26:X,28:ae,29:14,30:15,31:16,32:17,33:w,34:re,35:It,36:qt,37:V,40:pt,43:H,44:Nt,50:St},z(ft,[2,5]),z(ft,[2,6]),z(ft,[2,16],{12:28,61:32,15:[1,29],17:[1,30],20:[1,31],63:$t,64:ye,65:le,66:Pe,67:oe}),{23:[1,38]},{25:[1,39]},{27:[1,40]},z(ft,[2,27]),z(ft,[2,28]),z(ft,[2,29]),z(ft,[2,30]),z(ft,[2,31]),z(qe,[2,54]),z(qe,[2,55]),z(ft,[2,32]),z(ft,[2,33]),z(ft,[2,34]),z(ft,[2,35]),{16:41,40:ze,41:Et},{16:44,40:ze,41:Et},{16:45,40:ze,41:Et},z(ft,[2,4]),{11:46,40:pt,50:St},{16:47,40:ze,41:Et},{18:48,19:[1,49],51:50,52:51,56:Tt},{11:53,40:pt,50:St},{62:54,68:[1,55],69:[1,56]},z(B,[2,69]),z(B,[2,70]),z(B,[2,71]),z(B,[2,72]),z(B,[2,73]),z(ft,[2,24]),z(ft,[2,25]),z(ft,[2,26]),{13:F,38:57,41:et,42:mt,45:59,46:60,48:it,49:rt},z(_t,[2,37]),z(_t,[2,38]),{16:65,40:ze,41:Et,42:mt},{13:F,38:66,41:et,42:mt,45:59,46:60,48:it,49:rt},{13:[1,67],15:[1,68]},z(ft,[2,17],{61:32,12:69,17:[1,70],42:mt,63:$t,64:ye,65:le,66:Pe,67:oe}),{19:[1,71]},z(ft,[2,14]),{18:72,19:[2,56],51:50,52:51,56:Tt},{53:73,56:[1,74]},{56:[2,62]},{21:[1,75]},{61:76,63:$t,64:ye,65:le,66:Pe,67:oe},z(ht,[2,74]),z(ht,[2,75]),{6:Ft,10:G,39:77,42:lt,47:ke},{40:[1,82],41:[1,83]},z(Mt,[2,43],{46:84,13:F,41:et,48:it,49:rt}),z(Zt,[2,45]),z(Zt,[2,50]),z(Zt,[2,51]),z(Zt,[2,52]),z(Zt,[2,53]),z(ft,[2,41],{42:mt}),{6:Ft,10:G,39:85,42:lt,47:ke},{14:86,40:pe,50:Re,70:Ze},{16:90,40:ze,41:Et},{11:91,40:pt,50:St},{18:92,19:[1,93],51:50,52:51,56:Tt},z(ft,[2,12]),{19:[2,57]},z(de,[2,58],{54:94,55:95,57:96,59:mr,60:xr}),z([19,56,59,60],[2,63]),z(ft,[2,22],{15:[1,100],17:[1,99]}),z([40,50],[2,68]),z(ft,[2,36]),{13:F,41:et,45:101,46:60,48:it,49:rt},z(ft,[2,47]),z(ft,[2,48]),z(ft,[2,49]),z(_t,[2,39]),z(_t,[2,40]),z(Zt,[2,46]),z(ft,[2,42]),z(ft,[2,8]),z(ft,[2,76]),z(ft,[2,77]),z(ft,[2,78]),{13:[1,102],42:mt},{13:[1,104],15:[1,103]},{19:[1,105]},z(ft,[2,15]),z(de,[2,59],{55:106,58:[1,107],60:xr}),z(de,[2,60]),z(zt,[2,64]),z(de,[2,67]),z(zt,[2,66]),{18:108,19:[1,109],51:50,52:51,56:Tt},{16:110,40:ze,41:Et},z(Mt,[2,44],{46:84,13:F,41:et,48:it,49:rt}),{14:111,40:pe,50:Re,70:Ze},{16:112,40:ze,41:Et},{14:113,40:pe,50:Re,70:Ze},z(ft,[2,13]),z(de,[2,61]),{57:114,59:mr},{19:[1,115]},z(ft,[2,20]),z(ft,[2,23],{17:[1,116],42:mt}),z(ft,[2,11]),{13:[1,117],42:mt},z(ft,[2,10]),z(zt,[2,65]),z(ft,[2,18]),{18:118,19:[1,119],51:50,52:51,56:Tt},{14:120,40:pe,50:Re,70:Ze},{19:[1,121]},z(ft,[2,21]),z(ft,[2,9]),z(ft,[2,19])],defaultActions:{52:[2,62],72:[2,57]},parseError:(0,q.K2)(function(Ee,De){if(!De.recoverable){var er=new Error(Ee);throw er.hash=De,er}this.trace(Ee)},"parseError"),parse:(0,q.K2)(function(Ee){var De=this,er=[0],Qe=[],Lr=[null],_e=[],Hr=this.table,sr="",te=0,ne=0,be=0,y=_e.slice.call(arguments,1),E=Object.create(this.lexer),I={yy:{}};for(var m in this.yy)Object.prototype.hasOwnProperty.call(this.yy,m)&&(I.yy[m]=this.yy[m]);E.setInput(Ee,I.yy),I.yy.lexer=E,I.yy.parser=this,typeof E.yylloc>"u"&&(E.yylloc={});var D=E.yylloc;_e.push(D);var v=E.options&&E.options.ranges;function C(){var _r;return"number"!=typeof(_r=Qe.pop()||E.lex()||1)&&(_r instanceof Array&&(_r=(Qe=_r).pop()),_r=De.symbols_[_r]||_r),_r}this.parseError="function"==typeof I.yy.parseError?I.yy.parseError:Object.getPrototypeOf(this).parseError,(0,q.K2)(function b(_r){er.length=er.length-2*_r,Lr.length=Lr.length-_r,_e.length=_e.length-_r},"popStack"),(0,q.K2)(C,"lex");for(var P,Q,xt,Vt,Ut,xe,Xe,gr,Wt={};;){if(this.defaultActions[xt=er[er.length-1]]?Vt=this.defaultActions[xt]:((null===P||typeof P>"u")&&(P=C()),Vt=Hr[xt]&&Hr[xt][P]),typeof Vt>"u"||!Vt.length||!Vt[0]){var hr;for(xe in gr=[],Hr[xt])this.terminals_[xe]&&xe>2&&gr.push("'"+this.terminals_[xe]+"'");hr=E.showPosition?"Parse error on line "+(te+1)+":\n"+E.showPosition()+"\nExpecting "+gr.join(", ")+", got '"+(this.terminals_[P]||P)+"'":"Parse error on line "+(te+1)+": Unexpected "+(1==P?"end of input":"'"+(this.terminals_[P]||P)+"'"),this.parseError(hr,{text:E.match,token:this.terminals_[P]||P,line:E.yylineno,loc:D,expected:gr})}if(Vt[0]instanceof Array&&Vt.length>1)throw new Error("Parse Error: multiple actions possible at state: "+xt+", token: "+P);switch(Vt[0]){case 1:er.push(P),Lr.push(E.yytext),_e.push(E.yylloc),er.push(Vt[1]),P=null,Q?(P=Q,Q=null):(ne=E.yyleng,sr=E.yytext,te=E.yylineno,D=E.yylloc,be>0&&be--);break;case 2:if(Wt.$=Lr[Lr.length-(Xe=this.productions_[Vt[1]][1])],Wt._$={first_line:_e[_e.length-(Xe||1)].first_line,last_line:_e[_e.length-1].last_line,first_column:_e[_e.length-(Xe||1)].first_column,last_column:_e[_e.length-1].last_column},v&&(Wt._$.range=[_e[_e.length-(Xe||1)].range[0],_e[_e.length-1].range[1]]),typeof(Ut=this.performAction.apply(Wt,[sr,ne,te,I.yy,Vt[1],Lr,_e].concat(y)))<"u")return Ut;Xe&&(er=er.slice(0,-1*Xe*2),Lr=Lr.slice(0,-1*Xe),_e=_e.slice(0,-1*Xe)),er.push(this.productions_[Vt[1]][0]),Lr.push(Wt.$),_e.push(Wt._$),er.push(Hr[er[er.length-2]][er[er.length-1]]);break;case 3:return!0}}return!0},"parse")};function ve(){this.yy={}}return Ae.lexer=function(){return{EOF:1,parseError:(0,q.K2)(function(De,er){if(!this.yy.parser)throw new Error(De);this.yy.parser.parseError(De,er)},"parseError"),setInput:(0,q.K2)(function(Ee,De){return this.yy=De||this.yy||{},this._input=Ee,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},"setInput"),input:(0,q.K2)(function(){var Ee=this._input[0];return this.yytext+=Ee,this.yyleng++,this.offset++,this.match+=Ee,this.matched+=Ee,Ee.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),Ee},"input"),unput:(0,q.K2)(function(Ee){var De=Ee.length,er=Ee.split(/(?:\r\n?|\n)/g);this._input=Ee+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-De),this.offset-=De;var Qe=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),er.length-1&&(this.yylineno-=er.length-1);var Lr=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:er?(er.length===Qe.length?this.yylloc.first_column:0)+Qe[Qe.length-er.length].length-er[0].length:this.yylloc.first_column-De},this.options.ranges&&(this.yylloc.range=[Lr[0],Lr[0]+this.yyleng-De]),this.yyleng=this.yytext.length,this},"unput"),more:(0,q.K2)(function(){return this._more=!0,this},"more"),reject:(0,q.K2)(function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},"reject"),less:(0,q.K2)(function(Ee){this.unput(this.match.slice(Ee))},"less"),pastInput:(0,q.K2)(function(){var Ee=this.matched.substr(0,this.matched.length-this.match.length);return(Ee.length>20?"...":"")+Ee.substr(-20).replace(/\n/g,"")},"pastInput"),upcomingInput:(0,q.K2)(function(){var Ee=this.match;return Ee.length<20&&(Ee+=this._input.substr(0,20-Ee.length)),(Ee.substr(0,20)+(Ee.length>20?"...":"")).replace(/\n/g,"")},"upcomingInput"),showPosition:(0,q.K2)(function(){var Ee=this.pastInput(),De=new Array(Ee.length+1).join("-");return Ee+this.upcomingInput()+"\n"+De+"^"},"showPosition"),test_match:(0,q.K2)(function(Ee,De){var er,Qe,Lr;if(this.options.backtrack_lexer&&(Lr={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(Lr.yylloc.range=this.yylloc.range.slice(0))),(Qe=Ee[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=Qe.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:Qe?Qe[Qe.length-1].length-Qe[Qe.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+Ee[0].length},this.yytext+=Ee[0],this.match+=Ee[0],this.matches=Ee,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(Ee[0].length),this.matched+=Ee[0],er=this.performAction.call(this,this.yy,this,De,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),er)return er;if(this._backtrack){for(var _e in Lr)this[_e]=Lr[_e];return!1}return!1},"test_match"),next:(0,q.K2)(function(){if(this.done)return this.EOF;var Ee,De,er,Qe;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var Lr=this._currentRules(),_e=0;_e<Lr.length;_e++)if((er=this._input.match(this.rules[Lr[_e]]))&&(!De||er[0].length>De[0].length)){if(De=er,Qe=_e,this.options.backtrack_lexer){if(!1!==(Ee=this.test_match(er,Lr[_e])))return Ee;if(this._backtrack){De=!1;continue}return!1}if(!this.options.flex)break}return De?!1!==(Ee=this.test_match(De,Lr[Qe]))&&Ee:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},"next"),lex:(0,q.K2)(function(){return this.next()||this.lex()},"lex"),begin:(0,q.K2)(function(De){this.conditionStack.push(De)},"begin"),popState:(0,q.K2)(function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},"popState"),_currentRules:(0,q.K2)(function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},"_currentRules"),topState:(0,q.K2)(function(De){return(De=this.conditionStack.length-1-Math.abs(De||0))>=0?this.conditionStack[De]:"INITIAL"},"topState"),pushState:(0,q.K2)(function(De){this.begin(De)},"pushState"),stateStackSize:(0,q.K2)(function(){return this.conditionStack.length},"stateStackSize"),options:{"case-insensitive":!0},performAction:(0,q.K2)(function(De,er,Qe,Lr){switch(Qe){case 0:return this.begin("acc_title"),24;case 1:return this.popState(),"acc_title_value";case 2:return this.begin("acc_descr"),26;case 3:return this.popState(),"acc_descr_value";case 4:this.begin("acc_descr_multiline");break;case 5:this.popState();break;case 6:return"acc_descr_multiline_value";case 7:return 33;case 8:return 34;case 9:return 35;case 10:return 36;case 11:return 10;case 12:case 23:case 28:case 35:break;case 13:return 8;case 14:return 50;case 15:return 70;case 16:return 4;case 17:return this.begin("block"),17;case 18:case 19:case 38:return 49;case 20:case 37:return 42;case 21:return 15;case 22:case 36:return 13;case 24:return 59;case 25:case 26:return 56;case 27:return 60;case 29:return this.popState(),19;case 30:case 73:return er.yytext[0];case 31:return 20;case 32:return 21;case 33:return this.begin("style"),44;case 34:return this.popState(),10;case 39:return this.begin("style"),37;case 40:return 43;case 41:case 45:case 46:case 59:return 63;case 42:case 43:case 44:case 52:case 54:case 61:return 65;case 47:case 48:case 49:case 50:case 51:case 53:case 60:return 64;case 55:case 56:case 57:case 58:return 66;case 62:return 67;case 63:case 66:case 67:case 68:return 68;case 64:case 65:return 69;case 69:return 41;case 70:return 47;case 71:return 40;case 72:return 48;case 74:return 6}},"anonymous"),rules:[/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:.*direction\s+TB[^\n]*)/i,/^(?:.*direction\s+BT[^\n]*)/i,/^(?:.*direction\s+RL[^\n]*)/i,/^(?:.*direction\s+LR[^\n]*)/i,/^(?:[\n]+)/i,/^(?:\s+)/i,/^(?:[\s]+)/i,/^(?:"[^"%\r\n\v\b\\]+")/i,/^(?:"[^"]*")/i,/^(?:erDiagram\b)/i,/^(?:\{)/i,/^(?:#)/i,/^(?:#)/i,/^(?:,)/i,/^(?::::)/i,/^(?::)/i,/^(?:\s+)/i,/^(?:\b((?:PK)|(?:FK)|(?:UK))\b)/i,/^(?:([^\s]*)[~].*[~]([^\s]*))/i,/^(?:([\*A-Za-z_\u00C0-\uFFFF][A-Za-z0-9\-\_\[\]\(\)\u00C0-\uFFFF\*]*))/i,/^(?:"[^"]*")/i,/^(?:[\n]+)/i,/^(?:\})/i,/^(?:.)/i,/^(?:\[)/i,/^(?:\])/i,/^(?:style\b)/i,/^(?:[\n]+)/i,/^(?:\s+)/i,/^(?::)/i,/^(?:,)/i,/^(?:#)/i,/^(?:classDef\b)/i,/^(?:class\b)/i,/^(?:one or zero\b)/i,/^(?:one or more\b)/i,/^(?:one or many\b)/i,/^(?:1\+)/i,/^(?:\|o\b)/i,/^(?:zero or one\b)/i,/^(?:zero or more\b)/i,/^(?:zero or many\b)/i,/^(?:0\+)/i,/^(?:\}o\b)/i,/^(?:many\(0\))/i,/^(?:many\(1\))/i,/^(?:many\b)/i,/^(?:\}\|)/i,/^(?:one\b)/i,/^(?:only one\b)/i,/^(?:1\b)/i,/^(?:\|\|)/i,/^(?:o\|)/i,/^(?:o\{)/i,/^(?:\|\{)/i,/^(?:\s*u\b)/i,/^(?:\.\.)/i,/^(?:--)/i,/^(?:to\b)/i,/^(?:optionally to\b)/i,/^(?:\.-)/i,/^(?:-\.)/i,/^(?:([^\x00-\x7F]|\w|-|\*)+)/i,/^(?:;)/i,/^(?:([^\x00-\x7F]|\w|-|\*)+)/i,/^(?:[0-9])/i,/^(?:.)/i,/^(?:$)/i],conditions:{style:{rules:[34,35,36,37,38,69,70],inclusive:!1},acc_descr_multiline:{rules:[5,6],inclusive:!1},acc_descr:{rules:[3],inclusive:!1},acc_title:{rules:[1],inclusive:!1},block:{rules:[23,24,25,26,27,28,29,30],inclusive:!1},INITIAL:{rules:[0,2,4,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,31,32,33,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,71,72,73,74],inclusive:!0}}}}(),(0,q.K2)(ve,"Parser"),ve.prototype=Ae,Ae.Parser=ve,new ve}();Rr.parser=Rr;var wr=Rr,Vr=(class{constructor(){this.entities=new Map,this.relationships=[],this.classes=new Map,this.direction="TB",this.Cardinality={ZERO_OR_ONE:"ZERO_OR_ONE",ZERO_OR_MORE:"ZERO_OR_MORE",ONE_OR_MORE:"ONE_OR_MORE",ONLY_ONE:"ONLY_ONE",MD_PARENT:"MD_PARENT"},this.Identification={NON_IDENTIFYING:"NON_IDENTIFYING",IDENTIFYING:"IDENTIFYING"},this.setAccTitle=Rt.SV,this.getAccTitle=Rt.iN,this.setAccDescription=Rt.EI,this.getAccDescription=Rt.m7,this.setDiagramTitle=Rt.ke,this.getDiagramTitle=Rt.ab,this.getConfig=(0,q.K2)(()=>(0,Rt.D7)().er,"getConfig"),this.clear(),this.addEntity=this.addEntity.bind(this),this.addAttributes=this.addAttributes.bind(this),this.addRelationship=this.addRelationship.bind(this),this.setDirection=this.setDirection.bind(this),this.addCssStyles=this.addCssStyles.bind(this),this.addClass=this.addClass.bind(this),this.setClass=this.setClass.bind(this),this.setAccTitle=this.setAccTitle.bind(this),this.setAccDescription=this.setAccDescription.bind(this)}addEntity(z,ft=""){return this.entities.has(z)?!this.entities.get(z)?.alias&&ft&&(this.entities.get(z).alias=ft,q.Rm.info(`Add alias '${ft}' to entity '${z}'`)):(this.entities.set(z,{id:`entity-${z}-${this.entities.size}`,label:z,attributes:[],alias:ft,shape:"erBox",look:(0,Rt.D7)().look??"default",cssClasses:"default",cssStyles:[]}),q.Rm.info("Added new entity :",z)),this.entities.get(z)}getEntity(z){return this.entities.get(z)}getEntities(){return this.entities}getClasses(){return this.classes}addAttributes(z,ft){const Bt=this.addEntity(z);let we;for(we=ft.length-1;we>=0;we--)ft[we].keys||(ft[we].keys=[]),ft[we].comment||(ft[we].comment=""),Bt.attributes.push(ft[we]),q.Rm.debug("Added attribute ",ft[we].name)}addRelationship(z,ft,Bt,we){const X=this.entities.get(z),ae=this.entities.get(Bt);if(!X||!ae)return;const w={entityA:X.id,roleA:ft,entityB:ae.id,relSpec:we};this.relationships.push(w),q.Rm.debug("Added new relationship :",w)}getRelationships(){return this.relationships}getDirection(){return this.direction}setDirection(z){this.direction=z}getCompiledStyles(z){let ft=[];for(const Bt of z){const we=this.classes.get(Bt);we?.styles&&(ft=[...ft,...we.styles??[]].map(X=>X.trim())),we?.textStyles&&(ft=[...ft,...we.textStyles??[]].map(X=>X.trim()))}return ft}addCssStyles(z,ft){for(const Bt of z){const we=this.entities.get(Bt);if(!ft||!we)return;for(const X of ft)we.cssStyles.push(X)}}addClass(z,ft){z.forEach(Bt=>{let we=this.classes.get(Bt);void 0===we&&(we={id:Bt,styles:[],textStyles:[]},this.classes.set(Bt,we)),ft&&ft.forEach(function(X){if(/color/.exec(X)){const ae=X.replace("fill","bgFill");we.textStyles.push(ae)}we.styles.push(X)})})}setClass(z,ft){for(const Bt of z){const we=this.entities.get(Bt);if(we)for(const X of ft)we.cssClasses+=" "+X}}clear(){this.entities=new Map,this.classes=new Map,this.relationships=[],(0,Rt.IU)()}getData(){const z=[],ft=[],Bt=(0,Rt.D7)();for(const X of this.entities.keys()){const ae=this.entities.get(X);ae&&(ae.cssCompiledStyles=this.getCompiledStyles(ae.cssClasses.split(" ")),z.push(ae))}let we=0;for(const X of this.relationships){const ae={id:(0,dt.rY)(X.entityA,X.entityB,{prefix:"id",counter:we++}),type:"normal",curve:"basis",start:X.entityA,end:X.entityB,label:X.roleA,labelpos:"c",thickness:"normal",classes:"relationshipLine",arrowTypeStart:X.relSpec.cardB.toLowerCase(),arrowTypeEnd:X.relSpec.cardA.toLowerCase(),pattern:"IDENTIFYING"==X.relSpec.relType?"solid":"dashed",look:Bt.look};ft.push(ae)}return{nodes:z,edges:ft,other:{},config:Bt,direction:"TB"}}static#t=cr=()=>((0,ee.A)(this,"ErDB"),(0,q.K2)(this,"ErDB"),this)},cr()),ra={};(0,q.VA)(ra,{draw:()=>Nr});var Nr=(0,q.K2)(function(){var z=(0,ot.A)(function*(ft,Bt,we,X){q.Rm.info("REF0:"),q.Rm.info("Drawing er diagram (unified)",Bt);const{securityLevel:ae,er:w,layout:re}=(0,Rt.D7)(),It=X.db.getData(),qt=(0,L.A)(Bt,ae);It.type=X.type,It.layoutAlgorithm=(0,Pt.q7)(re),It.config.flowchart.nodeSpacing=w?.nodeSpacing||140,It.config.flowchart.rankSpacing=w?.rankSpacing||80,It.direction=X.db.getDirection(),It.markers=["only_one","zero_or_one","one_or_more","zero_or_more"],It.diagramId=Bt,yield(0,Pt.XX)(It,qt),"elk"===It.layoutAlgorithm&&qt.select(".edges").lower();const V=qt.selectAll('[id*="-background"]');Array.from(V).length>0&&V.each(function(){const H=(0,ar.Ltv)(this),St=H.attr("id").replace("-background",""),$t=qt.select(`#${CSS.escape(St)}`);if(!$t.empty()){const ye=$t.attr("transform");H.attr("transform",ye)}}),dt._K.insertTitle(qt,"erDiagramTitleText",w?.titleTopMargin??25,X.db.getDiagramTitle()),(0,S.P)(qt,8,"erDiagram",w?.useMaxWidth??!0)});return function(ft,Bt,we,X){return z.apply(this,arguments)}}(),"draw"),Fr=(0,q.K2)((z,ft)=>{const Bt=Ke.Ix,we=Bt(z,"r"),X=Bt(z,"g"),ae=Bt(z,"b");return Ke.B3(we,X,ae,ft)},"fade"),Or=(0,q.K2)(z=>`\n  .entityBox {\n    fill: ${z.mainBkg};\n    stroke: ${z.nodeBorder};\n  }\n\n  .relationshipLabelBox {\n    fill: ${z.tertiaryColor};\n    opacity: 0.7;\n    background-color: ${z.tertiaryColor};\n      rect {\n        opacity: 0.5;\n      }\n  }\n\n  .labelBkg {\n    background-color: ${Fr(z.tertiaryColor,.5)};\n  }\n\n  .edgeLabel .label {\n    fill: ${z.nodeBorder};\n    font-size: 14px;\n  }\n\n  .label {\n    font-family: ${z.fontFamily};\n    color: ${z.nodeTextColor||z.textColor};\n  }\n\n  .edge-pattern-dashed {\n    stroke-dasharray: 8,8;\n  }\n\n  .node rect,\n  .node circle,\n  .node ellipse,\n  .node polygon\n  {\n    fill: ${z.mainBkg};\n    stroke: ${z.nodeBorder};\n    stroke-width: 1px;\n  }\n\n  .relationshipLine {\n    stroke: ${z.lineColor};\n    stroke-width: 1;\n    fill: none;\n  }\n\n  .marker {\n    fill: none !important;\n    stroke: ${z.lineColor} !important;\n    stroke-width: 1;\n  }\n`,"getStyles"),je={parser:wr,get db(){return new Vr},renderer:ra,styles:Or}},80525:(Ja,vr,R)=>{"use strict";function ee(L,S){L.accDescr&&S.setAccDescription?.(L.accDescr),L.accTitle&&S.setAccTitle?.(L.accTitle),L.title&&S.setDiagramTitle?.(L.title)}R.d(vr,{S:()=>ee}),(0,R(32303).K2)(ee,"populateCommonDb")},84545:(Ja,vr,R)=>{"use strict";R.r(vr),R.d(vr,{diagram:()=>ae});var wr,ot=R(89204),ee=R(45027),L=R(97787),S=R(24715),Pt=R(5675),ut=R(8086),$=R(72271),wt=(R(98954),R(36384),R(87452)),q=(R(32239),R(19753),R(59355),R(52052)),ar=R(79006),Ke=R(32303),cr=R(40622),Rr=R(79687),ra=(class{constructor(){this.vertexCounter=0,this.config=(0,ar.D7)(),this.vertices=new Map,this.edges=[],this.classes=new Map,this.subGraphs=[],this.subGraphLookup=new Map,this.tooltips=new Map,this.subCount=0,this.firstGraphFlag=!0,this.secCount=-1,this.posCrossRef=[],this.funs=[],this.setAccTitle=ar.SV,this.setAccDescription=ar.EI,this.setDiagramTitle=ar.ke,this.getAccTitle=ar.iN,this.getAccDescription=ar.m7,this.getDiagramTitle=ar.ab,this.funs.push(this.setupToolTips.bind(this)),this.addVertex=this.addVertex.bind(this),this.firstGraph=this.firstGraph.bind(this),this.setDirection=this.setDirection.bind(this),this.addSubGraph=this.addSubGraph.bind(this),this.addLink=this.addLink.bind(this),this.setLink=this.setLink.bind(this),this.updateLink=this.updateLink.bind(this),this.addClass=this.addClass.bind(this),this.setClass=this.setClass.bind(this),this.destructLink=this.destructLink.bind(this),this.setClickEvent=this.setClickEvent.bind(this),this.setTooltip=this.setTooltip.bind(this),this.updateLinkInterpolate=this.updateLinkInterpolate.bind(this),this.setClickFun=this.setClickFun.bind(this),this.bindFunctions=this.bindFunctions.bind(this),this.lex={firstGraph:this.firstGraph.bind(this)},this.clear(),this.setGen("gen-2")}sanitizeText(w){return ar.Y2.sanitizeText(w,this.config)}lookUpDomId(w){for(const re of this.vertices.values())if(re.id===w)return re.domId;return w}addVertex(w,re,It,qt,V,pt,H={},Nt){if(!w||0===w.trim().length)return;let St;if(void 0!==Nt){let Pe;Pe=Nt.includes("\n")?Nt+"\n":"{\n"+Nt+"\n}",St=(0,S.H)(Pe,{schema:S.r})}const $t=this.edges.find(Pe=>Pe.id===w);if($t){const Pe=St;return void 0!==Pe?.animate&&($t.animate=Pe.animate),void 0!==Pe?.animation&&($t.animation=Pe.animation),void(void 0!==Pe?.curve&&($t.interpolate=Pe.curve))}let ye,le=this.vertices.get(w);if(void 0===le&&(le={id:w,labelType:"text",domId:"flowchart-"+w+"-"+this.vertexCounter,styles:[],classes:[]},this.vertices.set(w,le)),this.vertexCounter++,void 0!==re?(this.config=(0,ar.D7)(),ye=this.sanitizeText(re.text.trim()),le.labelType=re.type,ye.startsWith('"')&&ye.endsWith('"')&&(ye=ye.substring(1,ye.length-1)),le.text=ye):void 0===le.text&&(le.text=w),void 0!==It&&(le.type=It),qt?.forEach(Pe=>{le.styles.push(Pe)}),V?.forEach(Pe=>{le.classes.push(Pe)}),void 0!==pt&&(le.dir=pt),void 0===le.props?le.props=H:void 0!==H&&Object.assign(le.props,H),void 0!==St){if(St.shape){if(St.shape!==St.shape.toLowerCase()||St.shape.includes("_"))throw new Error(`No such shape: ${St.shape}. Shape names should be lowercase.`);if(!(0,wt.aP)(St.shape))throw new Error(`No such shape: ${St.shape}.`);le.type=St?.shape}St?.label&&(le.text=St?.label),St?.icon&&(le.icon=St?.icon,!St.label?.trim()&&le.text===w&&(le.text="")),St?.form&&(le.form=St?.form),St?.pos&&(le.pos=St?.pos),St?.img&&(le.img=St?.img,!St.label?.trim()&&le.text===w&&(le.text="")),St?.constraint&&(le.constraint=St.constraint),St.w&&(le.assetWidth=Number(St.w)),St.h&&(le.assetHeight=Number(St.h))}}addSingleLink(w,re,It,qt){const H={start:w,end:re,type:void 0,text:"",labelType:"text",classes:[],isUserDefinedId:!1,interpolate:this.edges.defaultInterpolate};Ke.Rm.info("abc78 Got edge...",H);const Nt=It.text;if(void 0!==Nt&&(H.text=this.sanitizeText(Nt.text.trim()),H.text.startsWith('"')&&H.text.endsWith('"')&&(H.text=H.text.substring(1,H.text.length-1)),H.labelType=Nt.type),void 0!==It&&(H.type=It.type,H.stroke=It.stroke,H.length=It.length>10?10:It.length),qt&&!this.edges.some(St=>St.id===qt))H.id=qt,H.isUserDefinedId=!0;else{const St=this.edges.filter($t=>$t.start===H.start&&$t.end===H.end);H.id=(0,q.rY)(H.start,H.end,0===St.length?{counter:0,prefix:"L"}:{counter:St.length+1,prefix:"L"})}if(!(this.edges.length<(this.config.maxEdges??500)))throw new Error(`Edge limit exceeded. ${this.edges.length} edges found, but the limit is ${this.config.maxEdges}.\n\nInitialize mermaid with maxEdges set to a higher number to allow more edges.\nYou cannot set this config via configuration inside the diagram as it is a secure config.\nYou have to call mermaid.initialize.`);Ke.Rm.info("Pushing edge..."),this.edges.push(H)}isLinkData(w){return null!==w&&"object"==typeof w&&"id"in w&&"string"==typeof w.id}addLink(w,re,It){const qt=this.isLinkData(It)?It.id.replace("@",""):void 0;Ke.Rm.info("addLink",w,re,qt);for(const V of w)for(const pt of re)this.addSingleLink(V,pt,It,V===w[w.length-1]&&pt===re[0]?qt:void 0)}updateLinkInterpolate(w,re){w.forEach(It=>{"default"===It?this.edges.defaultInterpolate=re:this.edges[It].interpolate=re})}updateLink(w,re){w.forEach(It=>{if("number"==typeof It&&It>=this.edges.length)throw new Error(`The index ${It} for linkStyle is out of bounds. Valid indices for linkStyle are between 0 and ${this.edges.length-1}. (Help: Ensure that the index is within the range of existing edges.)`);"default"===It?this.edges.defaultStyle=re:(this.edges[It].style=re,(this.edges[It]?.style?.length??0)>0&&!this.edges[It]?.style?.some(qt=>qt?.startsWith("fill"))&&this.edges[It]?.style?.push("fill:none"))})}addClass(w,re){const It=re.join().replace(/\\,/g,"\xa7\xa7\xa7").replace(/,/g,";").replace(/\xa7\xa7\xa7/g,",").split(";");w.split(",").forEach(qt=>{let V=this.classes.get(qt);void 0===V&&(V={id:qt,styles:[],textStyles:[]},this.classes.set(qt,V)),It?.forEach(pt=>{if(/color/.exec(pt)){const H=pt.replace("fill","bgFill");V.textStyles.push(H)}V.styles.push(pt)})})}setDirection(w){this.direction=w.trim(),/.*</.exec(this.direction)&&(this.direction="RL"),/.*\^/.exec(this.direction)&&(this.direction="BT"),/.*>/.exec(this.direction)&&(this.direction="LR"),/.*v/.exec(this.direction)&&(this.direction="TB"),"TD"===this.direction&&(this.direction="TB")}setClass(w,re){for(const It of w.split(",")){const qt=this.vertices.get(It);qt&&qt.classes.push(re);const V=this.edges.find(H=>H.id===It);V&&V.classes.push(re);const pt=this.subGraphLookup.get(It);pt&&pt.classes.push(re)}}setTooltip(w,re){if(void 0!==re){re=this.sanitizeText(re);for(const It of w.split(","))this.tooltips.set("gen-1"===this.version?this.lookUpDomId(It):It,re)}}setClickFun(w,re,It){const qt=this.lookUpDomId(w);if("loose"!==(0,ar.D7)().securityLevel||void 0===re)return;let V=[];if("string"==typeof It){V=It.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/);for(let H=0;H<V.length;H++){let Nt=V[H].trim();Nt.startsWith('"')&&Nt.endsWith('"')&&(Nt=Nt.substr(1,Nt.length-2)),V[H]=Nt}}0===V.length&&V.push(w);const pt=this.vertices.get(w);pt&&(pt.haveCallback=!0,this.funs.push(()=>{const H=document.querySelector(`[id="${qt}"]`);null!==H&&H.addEventListener("click",()=>{q._K.runFunc(re,...V)},!1)}))}setLink(w,re,It){w.split(",").forEach(qt=>{const V=this.vertices.get(qt);void 0!==V&&(V.link=q._K.formatUrl(re,this.config),V.linkTarget=It)}),this.setClass(w,"clickable")}getTooltip(w){return this.tooltips.get(w)}setClickEvent(w,re,It){w.split(",").forEach(qt=>{this.setClickFun(qt,re,It)}),this.setClass(w,"clickable")}bindFunctions(w){this.funs.forEach(re=>{re(w)})}getDirection(){return this.direction?.trim()}getVertices(){return this.vertices}getEdges(){return this.edges}getClasses(){return this.classes}setupToolTips(w){let re=(0,cr.Ltv)(".mermaidTooltip");null===(re._groups||re)[0][0]&&(re=(0,cr.Ltv)("body").append("div").attr("class","mermaidTooltip").style("opacity",0)),(0,cr.Ltv)(w).select("svg").selectAll("g.node").on("mouseover",V=>{const pt=(0,cr.Ltv)(V.currentTarget);if(null===pt.attr("title"))return;const Nt=V.currentTarget?.getBoundingClientRect();re.transition().duration(200).style("opacity",".9"),re.text(pt.attr("title")).style("left",window.scrollX+Nt.left+(Nt.right-Nt.left)/2+"px").style("top",window.scrollY+Nt.bottom+"px"),re.html(re.html().replace(/&lt;br\/&gt;/g,"<br/>")),pt.classed("hover",!0)}).on("mouseout",V=>{re.transition().duration(500).style("opacity",0),(0,cr.Ltv)(V.currentTarget).classed("hover",!1)})}clear(w="gen-2"){this.vertices=new Map,this.classes=new Map,this.edges=[],this.funs=[this.setupToolTips.bind(this)],this.subGraphs=[],this.subGraphLookup=new Map,this.subCount=0,this.tooltips=new Map,this.firstGraphFlag=!0,this.version=w,this.config=(0,ar.D7)(),(0,ar.IU)()}setGen(w){this.version=w||"gen-2"}defaultStyle(){return"fill:#ffa;stroke: #f66; stroke-width: 3px; stroke-dasharray: 5, 5;fill:#ffa;stroke: #666;"}addSubGraph(w,re,It){let qt=w.text.trim(),V=It.text;w===It&&/\s/.exec(It.text)&&(qt=void 0);const H=(0,Ke.K2)(le=>{const Pe={boolean:{},number:{},string:{}},oe=[];let qe;return{nodeList:le.filter(function(Et){const Tt=typeof Et;return Et.stmt&&"dir"===Et.stmt?(qe=Et.value,!1):""!==Et.trim()&&(Tt in Pe?!Pe[Tt].hasOwnProperty(Et)&&(Pe[Tt][Et]=!0):!oe.includes(Et)&&oe.push(Et))}),dir:qe}},"uniq")(re.flat()),Nt=H.nodeList;let St=H.dir;const $t=(0,ar.D7)().flowchart??{};if(St=St??($t.inheritDir?this.getDirection()??(0,ar.D7)().direction??void 0:void 0),"gen-1"===this.version)for(let le=0;le<Nt.length;le++)Nt[le]=this.lookUpDomId(Nt[le]);qt=qt??"subGraph"+this.subCount,V=V||"",V=this.sanitizeText(V),this.subCount=this.subCount+1;const ye={id:qt,nodes:Nt,title:V.trim(),classes:[],dir:St,labelType:It.type};return Ke.Rm.info("Adding",ye.id,ye.nodes,ye.dir),ye.nodes=this.makeUniq(ye,this.subGraphs).nodes,this.subGraphs.push(ye),this.subGraphLookup.set(qt,ye),qt}getPosForId(w){for(const[re,It]of this.subGraphs.entries())if(It.id===w)return re;return-1}indexNodes2(w,re){const It=this.subGraphs[re].nodes;if(this.secCount=this.secCount+1,this.secCount>2e3)return{result:!1,count:0};if(this.posCrossRef[this.secCount]=re,this.subGraphs[re].id===w)return{result:!0,count:0};let qt=0,V=1;for(;qt<It.length;){const pt=this.getPosForId(It[qt]);if(pt>=0){const H=this.indexNodes2(w,pt);if(H.result)return{result:!0,count:V+H.count};V+=H.count}qt+=1}return{result:!1,count:V}}getDepthFirstPos(w){return this.posCrossRef[w]}indexNodes(){this.secCount=-1,this.subGraphs.length>0&&this.indexNodes2("none",this.subGraphs.length-1)}getSubGraphs(){return this.subGraphs}firstGraph(){return!!this.firstGraphFlag&&(this.firstGraphFlag=!1,!0)}destructStartLink(w){let re=w.trim(),It="arrow_open";switch(re[0]){case"<":It="arrow_point",re=re.slice(1);break;case"x":It="arrow_cross",re=re.slice(1);break;case"o":It="arrow_circle",re=re.slice(1)}let qt="normal";return re.includes("=")&&(qt="thick"),re.includes(".")&&(qt="dotted"),{type:It,stroke:qt}}countChar(w,re){const It=re.length;let qt=0;for(let V=0;V<It;++V)re[V]===w&&++qt;return qt}destructEndLink(w){const re=w.trim();let It=re.slice(0,-1),qt="arrow_open";switch(re.slice(-1)){case"x":qt="arrow_cross",re.startsWith("x")&&(qt="double_"+qt,It=It.slice(1));break;case">":qt="arrow_point",re.startsWith("<")&&(qt="double_"+qt,It=It.slice(1));break;case"o":qt="arrow_circle",re.startsWith("o")&&(qt="double_"+qt,It=It.slice(1))}let V="normal",pt=It.length-1;It.startsWith("=")&&(V="thick"),It.startsWith("~")&&(V="invisible");const H=this.countChar(".",It);return H&&(V="dotted",pt=H),{type:qt,stroke:V,length:pt}}destructLink(w,re){const It=this.destructEndLink(w);let qt;if(re){if(qt=this.destructStartLink(re),qt.stroke!==It.stroke)return{type:"INVALID",stroke:"INVALID"};if("arrow_open"===qt.type)qt.type=It.type;else{if(qt.type!==It.type)return{type:"INVALID",stroke:"INVALID"};qt.type="double_"+qt.type}return"double_arrow"===qt.type&&(qt.type="double_arrow_point"),qt.length=It.length,qt}return It}exists(w,re){for(const It of w)if(It.nodes.includes(re))return!0;return!1}makeUniq(w,re){const It=[];return w.nodes.forEach((qt,V)=>{this.exists(re,qt)||It.push(w.nodes[V])}),{nodes:It}}getTypeFromVertex(w){if(w.img)return"imageSquare";if(w.icon)return"circle"===w.form?"iconCircle":"square"===w.form?"iconSquare":"rounded"===w.form?"iconRounded":"icon";switch(w.type){case"square":case void 0:return"squareRect";case"round":return"roundedRect";case"ellipse":return"ellipse";default:return w.type}}findNode(w,re){return w.find(It=>It.id===re)}destructEdgeType(w){let re="none",It="arrow_point";switch(w){case"arrow_point":case"arrow_circle":case"arrow_cross":It=w;break;case"double_arrow_point":case"double_arrow_circle":case"double_arrow_cross":re=w.replace("double_",""),It=re}return{arrowTypeStart:re,arrowTypeEnd:It}}addNodeFromVertex(w,re,It,qt,V,pt){const H=It.get(w.id),Nt=qt.get(w.id)??!1,St=this.findNode(re,w.id);if(St)St.cssStyles=w.styles,St.cssCompiledStyles=this.getCompiledStyles(w.classes),St.cssClasses=w.classes.join(" ");else{const $t={id:w.id,label:w.text,labelStyle:"",parentId:H,padding:V.flowchart?.padding||8,cssStyles:w.styles,cssCompiledStyles:this.getCompiledStyles(["default","node",...w.classes]),cssClasses:"default "+w.classes.join(" "),dir:w.dir,domId:w.domId,look:pt,link:w.link,linkTarget:w.linkTarget,tooltip:this.getTooltip(w.id),icon:w.icon,pos:w.pos,img:w.img,assetWidth:w.assetWidth,assetHeight:w.assetHeight,constraint:w.constraint};re.push(Nt?{...$t,isGroup:!0,shape:"rect"}:{...$t,isGroup:!1,shape:this.getTypeFromVertex(w)})}}getCompiledStyles(w){let re=[];for(const It of w){const qt=this.classes.get(It);qt?.styles&&(re=[...re,...qt.styles??[]].map(V=>V.trim())),qt?.textStyles&&(re=[...re,...qt.textStyles??[]].map(V=>V.trim()))}return re}getData(){const w=(0,ar.D7)(),re=[],It=[],qt=this.getSubGraphs(),V=new Map,pt=new Map;for(let St=qt.length-1;St>=0;St--){const $t=qt[St];$t.nodes.length>0&&pt.set($t.id,!0);for(const ye of $t.nodes)V.set(ye,$t.id)}for(let St=qt.length-1;St>=0;St--){const $t=qt[St];re.push({id:$t.id,label:$t.title,labelStyle:"",parentId:V.get($t.id),padding:8,cssCompiledStyles:this.getCompiledStyles($t.classes),cssClasses:$t.classes.join(" "),shape:"rect",dir:$t.dir,isGroup:!0,look:w.look})}this.getVertices().forEach(St=>{this.addNodeFromVertex(St,re,V,pt,w,w.look||"classic")});const Nt=this.getEdges();return Nt.forEach((St,$t)=>{const{arrowTypeStart:ye,arrowTypeEnd:le}=this.destructEdgeType(St.type),Pe=[...Nt.defaultStyle??[]];St.style&&Pe.push(...St.style);const oe={id:(0,q.rY)(St.start,St.end,{counter:$t,prefix:"L"},St.id),isUserDefinedId:St.isUserDefinedId,start:St.start,end:St.end,type:St.type??"normal",label:St.text,labelpos:"c",thickness:St.stroke,minlen:St.length,classes:"invisible"===St?.stroke?"":"edge-thickness-normal edge-pattern-solid flowchart-link",arrowTypeStart:"invisible"===St?.stroke||"arrow_open"===St?.type?"none":ye,arrowTypeEnd:"invisible"===St?.stroke||"arrow_open"===St?.type?"none":le,arrowheadStyle:"fill: #333",cssCompiledStyles:this.getCompiledStyles(St.classes),labelStyle:Pe,style:Pe,pattern:St.stroke,look:w.look,animate:St.animate,animation:St.animation,curve:St.interpolate||this.edges.defaultInterpolate||w.flowchart?.curve};It.push(oe)}),{nodes:re,edges:It,other:{},config:w}}defaultConfig(){return ar.ME.flowchart}static#t=wr=()=>((0,ee.A)(this,"FlowDB"),(0,Ke.K2)(this,"FlowDB"),this)},wr()),Se={getClasses:(0,Ke.K2)(function(w,re){return re.db.getClasses()},"getClasses"),draw:(0,Ke.K2)(function(){var w=(0,ot.A)(function*(re,It,qt,V){Ke.Rm.info("REF0:"),Ke.Rm.info("Drawing state diagram (v2)",It);const{securityLevel:pt,flowchart:H,layout:Nt}=(0,ar.D7)();let St;"sandbox"===pt&&(St=(0,cr.Ltv)("#i"+It));const $t="sandbox"===pt?St.nodes()[0].contentDocument:document;Ke.Rm.debug("Before getData: ");const ye=V.db.getData();Ke.Rm.debug("Data: ",ye);const le=(0,Pt.A)(It,pt),Pe=V.db.getDirection();ye.type=V.type,ye.layoutAlgorithm=(0,$.q7)(Nt),"dagre"===ye.layoutAlgorithm&&"elk"===Nt&&Ke.Rm.warn("flowchart-elk was moved to an external package in Mermaid v11. Please refer [release notes](https://github.com/mermaid-js/mermaid/releases/tag/v11.0.0) for more details. This diagram will be rendered using `dagre` layout as a fallback."),ye.direction=Pe,ye.nodeSpacing=H?.nodeSpacing||50,ye.rankSpacing=H?.rankSpacing||50,ye.markers=["point","circle","cross"],ye.diagramId=It,Ke.Rm.debug("REF1:",ye),yield(0,$.XX)(ye,le);const oe=ye.config.flowchart?.diagramPadding??8;q._K.insertTitle(le,"flowchartTitleText",H?.titleTopMargin||0,V.db.getDiagramTitle()),(0,ut.P)(le,oe,"flowchart",H?.useMaxWidth||!1);for(const qe of ye.nodes){const ze=(0,cr.Ltv)(`#${It} [id="${qe.id}"]`);if(!ze||!qe.link)continue;const Et=$t.createElementNS("http://www.w3.org/2000/svg","a");Et.setAttributeNS("http://www.w3.org/2000/svg","class",qe.cssClasses),Et.setAttributeNS("http://www.w3.org/2000/svg","rel","noopener"),"sandbox"===pt?Et.setAttributeNS("http://www.w3.org/2000/svg","target","_top"):qe.linkTarget&&Et.setAttributeNS("http://www.w3.org/2000/svg","target",qe.linkTarget);const Tt=ze.insert(function(){return Et},":first-child"),B=ze.select(".label-container");B&&Tt.append(function(){return B.node()});const F=ze.select(".label");F&&Tt.append(function(){return F.node()})}});return function(re,It,qt,V){return w.apply(this,arguments)}}(),"draw")},Or=function(){var w=(0,Ke.K2)(function(ti,_a,qa,Ha){for(qa=qa||{},Ha=ti.length;Ha--;qa[ti[Ha]]=_a);return qa},"o"),re=[1,4],It=[1,3],qt=[1,5],V=[1,8,9,10,11,27,34,36,38,44,60,84,85,86,87,88,89,102,105,106,109,111,114,115,116,121,122,123,124],pt=[2,2],H=[1,13],Nt=[1,14],St=[1,15],$t=[1,16],ye=[1,23],le=[1,25],Pe=[1,26],oe=[1,27],qe=[1,49],ze=[1,48],Et=[1,29],Tt=[1,30],B=[1,31],F=[1,32],et=[1,33],mt=[1,44],it=[1,46],rt=[1,42],_t=[1,47],ht=[1,43],Ft=[1,50],G=[1,45],lt=[1,51],ke=[1,52],Mt=[1,34],Zt=[1,35],pe=[1,36],Re=[1,37],Ze=[1,57],de=[1,8,9,10,11,27,32,34,36,38,44,60,84,85,86,87,88,89,102,105,106,109,111,114,115,116,121,122,123,124],mr=[1,61],xr=[1,60],zt=[1,62],Ae=[8,9,11,75,77,78],or=[1,78],ve=[1,91],ce=[1,96],Ee=[1,95],De=[1,92],er=[1,88],Qe=[1,94],Lr=[1,90],_e=[1,97],Hr=[1,93],sr=[1,98],te=[1,89],ne=[8,9,10,11,40,75,77,78],be=[8,9,10,11,40,46,75,77,78],ir=[8,9,10,11,29,40,44,46,48,50,52,54,56,58,60,63,65,67,68,70,75,77,78,89,102,105,106,109,111,114,115,116],g=[8,9,11,44,60,75,77,78,89,102,105,106,109,111,114,115,116],y=[44,60,89,102,105,106,109,111,114,115,116],E=[1,121],I=[1,122],m=[1,124],D=[1,123],v=[44,60,62,74,89,102,105,106,109,111,114,115,116],b=[1,133],C=[1,147],P=[1,148],Q=[1,149],xt=[1,150],Vt=[1,135],jt=[1,137],Ut=[1,141],Wt=[1,142],xe=[1,143],Xe=[1,144],We=[1,145],gr=[1,146],hr=[1,151],_r=[1,152],$e=[1,131],He=[1,132],Ar=[1,139],kr=[1,134],zr=[1,138],Er=[1,136],Jr=[8,9,10,11,27,32,34,36,38,44,60,84,85,86,87,88,89,102,105,106,109,111,114,115,116,121,122,123,124],Br=[1,154],ha=[1,156],ia=[8,9,11],jr=[8,9,10,11,14,44,60,89,105,106,109,111,114,115,116],Qr=[1,176],lr=[1,172],dr=[1,173],W=[1,177],Yt=[1,174],Ye=[1,175],Ne=[77,116,119],Tr=[8,9,10,11,12,14,27,29,32,44,60,75,84,85,86,87,88,89,90,105,109,111,114,115,116],yr=[10,106],da=[31,49,51,53,55,57,62,64,66,67,69,71,116,117,118],Pa=[1,247],Ia=[1,245],Wa=[1,249],Ma=[1,243],ba=[1,244],sa=[1,246],Sa=[1,248],ea=[1,250],Va=[1,268],pr=[8,9,11,106],Ua=[8,9,10,11,60,84,105,106,109,110,111,112],nr={trace:(0,Ke.K2)(function(){},"trace"),yy:{},symbols_:{error:2,start:3,graphConfig:4,document:5,line:6,statement:7,SEMI:8,NEWLINE:9,SPACE:10,EOF:11,GRAPH:12,NODIR:13,DIR:14,FirstStmtSeparator:15,ending:16,endToken:17,spaceList:18,spaceListNewline:19,vertexStatement:20,separator:21,styleStatement:22,linkStyleStatement:23,classDefStatement:24,classStatement:25,clickStatement:26,subgraph:27,textNoTags:28,SQS:29,text:30,SQE:31,end:32,direction:33,acc_title:34,acc_title_value:35,acc_descr:36,acc_descr_value:37,acc_descr_multiline_value:38,shapeData:39,SHAPE_DATA:40,link:41,node:42,styledVertex:43,AMP:44,vertex:45,STYLE_SEPARATOR:46,idString:47,DOUBLECIRCLESTART:48,DOUBLECIRCLEEND:49,PS:50,PE:51,"(-":52,"-)":53,STADIUMSTART:54,STADIUMEND:55,SUBROUTINESTART:56,SUBROUTINEEND:57,VERTEX_WITH_PROPS_START:58,"NODE_STRING[field]":59,COLON:60,"NODE_STRING[value]":61,PIPE:62,CYLINDERSTART:63,CYLINDEREND:64,DIAMOND_START:65,DIAMOND_STOP:66,TAGEND:67,TRAPSTART:68,TRAPEND:69,INVTRAPSTART:70,INVTRAPEND:71,linkStatement:72,arrowText:73,TESTSTR:74,START_LINK:75,edgeText:76,LINK:77,LINK_ID:78,edgeTextToken:79,STR:80,MD_STR:81,textToken:82,keywords:83,STYLE:84,LINKSTYLE:85,CLASSDEF:86,CLASS:87,CLICK:88,DOWN:89,UP:90,textNoTagsToken:91,stylesOpt:92,"idString[vertex]":93,"idString[class]":94,CALLBACKNAME:95,CALLBACKARGS:96,HREF:97,LINK_TARGET:98,"STR[link]":99,"STR[tooltip]":100,alphaNum:101,DEFAULT:102,numList:103,INTERPOLATE:104,NUM:105,COMMA:106,style:107,styleComponent:108,NODE_STRING:109,UNIT:110,BRKT:111,PCT:112,idStringToken:113,MINUS:114,MULT:115,UNICODE_TEXT:116,TEXT:117,TAGSTART:118,EDGE_TEXT:119,alphaNumToken:120,direction_tb:121,direction_bt:122,direction_rl:123,direction_lr:124,$accept:0,$end:1},terminals_:{2:"error",8:"SEMI",9:"NEWLINE",10:"SPACE",11:"EOF",12:"GRAPH",13:"NODIR",14:"DIR",27:"subgraph",29:"SQS",31:"SQE",32:"end",34:"acc_title",35:"acc_title_value",36:"acc_descr",37:"acc_descr_value",38:"acc_descr_multiline_value",40:"SHAPE_DATA",44:"AMP",46:"STYLE_SEPARATOR",48:"DOUBLECIRCLESTART",49:"DOUBLECIRCLEEND",50:"PS",51:"PE",52:"(-",53:"-)",54:"STADIUMSTART",55:"STADIUMEND",56:"SUBROUTINESTART",57:"SUBROUTINEEND",58:"VERTEX_WITH_PROPS_START",59:"NODE_STRING[field]",60:"COLON",61:"NODE_STRING[value]",62:"PIPE",63:"CYLINDERSTART",64:"CYLINDEREND",65:"DIAMOND_START",66:"DIAMOND_STOP",67:"TAGEND",68:"TRAPSTART",69:"TRAPEND",70:"INVTRAPSTART",71:"INVTRAPEND",74:"TESTSTR",75:"START_LINK",77:"LINK",78:"LINK_ID",80:"STR",81:"MD_STR",84:"STYLE",85:"LINKSTYLE",86:"CLASSDEF",87:"CLASS",88:"CLICK",89:"DOWN",90:"UP",93:"idString[vertex]",94:"idString[class]",95:"CALLBACKNAME",96:"CALLBACKARGS",97:"HREF",98:"LINK_TARGET",99:"STR[link]",100:"STR[tooltip]",102:"DEFAULT",104:"INTERPOLATE",105:"NUM",106:"COMMA",109:"NODE_STRING",110:"UNIT",111:"BRKT",112:"PCT",114:"MINUS",115:"MULT",116:"UNICODE_TEXT",117:"TEXT",118:"TAGSTART",119:"EDGE_TEXT",121:"direction_tb",122:"direction_bt",123:"direction_rl",124:"direction_lr"},productions_:[0,[3,2],[5,0],[5,2],[6,1],[6,1],[6,1],[6,1],[6,1],[4,2],[4,2],[4,2],[4,3],[16,2],[16,1],[17,1],[17,1],[17,1],[15,1],[15,1],[15,2],[19,2],[19,2],[19,1],[19,1],[18,2],[18,1],[7,2],[7,2],[7,2],[7,2],[7,2],[7,2],[7,9],[7,6],[7,4],[7,1],[7,2],[7,2],[7,1],[21,1],[21,1],[21,1],[39,2],[39,1],[20,4],[20,3],[20,4],[20,2],[20,2],[20,1],[42,1],[42,6],[42,5],[43,1],[43,3],[45,4],[45,4],[45,6],[45,4],[45,4],[45,4],[45,8],[45,4],[45,4],[45,4],[45,6],[45,4],[45,4],[45,4],[45,4],[45,4],[45,1],[41,2],[41,3],[41,3],[41,1],[41,3],[41,4],[76,1],[76,2],[76,1],[76,1],[72,1],[72,2],[73,3],[30,1],[30,2],[30,1],[30,1],[83,1],[83,1],[83,1],[83,1],[83,1],[83,1],[83,1],[83,1],[83,1],[83,1],[83,1],[28,1],[28,2],[28,1],[28,1],[24,5],[25,5],[26,2],[26,4],[26,3],[26,5],[26,3],[26,5],[26,5],[26,7],[26,2],[26,4],[26,2],[26,4],[26,4],[26,6],[22,5],[23,5],[23,5],[23,9],[23,9],[23,7],[23,7],[103,1],[103,3],[92,1],[92,3],[107,1],[107,2],[108,1],[108,1],[108,1],[108,1],[108,1],[108,1],[108,1],[108,1],[113,1],[113,1],[113,1],[113,1],[113,1],[113,1],[113,1],[113,1],[113,1],[113,1],[113,1],[82,1],[82,1],[82,1],[82,1],[91,1],[91,1],[91,1],[91,1],[91,1],[91,1],[91,1],[91,1],[91,1],[91,1],[91,1],[79,1],[79,1],[120,1],[120,1],[120,1],[120,1],[120,1],[120,1],[120,1],[120,1],[120,1],[120,1],[120,1],[47,1],[47,2],[101,1],[101,2],[33,1],[33,1],[33,1],[33,1]],performAction:(0,Ke.K2)(function(_a,qa,Ha,oa,hi,Ce,Ri){var Fe=Ce.length-1;switch(hi){case 2:case 28:case 29:case 30:case 31:case 32:this.$=[];break;case 3:(!Array.isArray(Ce[Fe])||Ce[Fe].length>0)&&Ce[Fe-1].push(Ce[Fe]),this.$=Ce[Fe-1];break;case 4:case 183:case 44:case 54:case 76:case 181:this.$=Ce[Fe];break;case 11:oa.setDirection("TB"),this.$="TB";break;case 12:oa.setDirection(Ce[Fe-1]),this.$=Ce[Fe-1];break;case 27:this.$=Ce[Fe-1].nodes;break;case 33:this.$=oa.addSubGraph(Ce[Fe-6],Ce[Fe-1],Ce[Fe-4]);break;case 34:this.$=oa.addSubGraph(Ce[Fe-3],Ce[Fe-1],Ce[Fe-3]);break;case 35:this.$=oa.addSubGraph(void 0,Ce[Fe-1],void 0);break;case 37:this.$=Ce[Fe].trim(),oa.setAccTitle(this.$);break;case 38:case 39:this.$=Ce[Fe].trim(),oa.setAccDescription(this.$);break;case 43:case 133:this.$=Ce[Fe-1]+Ce[Fe];break;case 45:oa.addVertex(Ce[Fe-1][Ce[Fe-1].length-1],void 0,void 0,void 0,void 0,void 0,void 0,Ce[Fe]),oa.addLink(Ce[Fe-3].stmt,Ce[Fe-1],Ce[Fe-2]),this.$={stmt:Ce[Fe-1],nodes:Ce[Fe-1].concat(Ce[Fe-3].nodes)};break;case 46:oa.addLink(Ce[Fe-2].stmt,Ce[Fe],Ce[Fe-1]),this.$={stmt:Ce[Fe],nodes:Ce[Fe].concat(Ce[Fe-2].nodes)};break;case 47:oa.addLink(Ce[Fe-3].stmt,Ce[Fe-1],Ce[Fe-2]),this.$={stmt:Ce[Fe-1],nodes:Ce[Fe-1].concat(Ce[Fe-3].nodes)};break;case 48:this.$={stmt:Ce[Fe-1],nodes:Ce[Fe-1]};break;case 49:oa.addVertex(Ce[Fe-1][Ce[Fe-1].length-1],void 0,void 0,void 0,void 0,void 0,void 0,Ce[Fe]),this.$={stmt:Ce[Fe-1],nodes:Ce[Fe-1],shapeData:Ce[Fe]};break;case 50:this.$={stmt:Ce[Fe],nodes:Ce[Fe]};break;case 51:case 128:case 130:this.$=[Ce[Fe]];break;case 52:oa.addVertex(Ce[Fe-5][Ce[Fe-5].length-1],void 0,void 0,void 0,void 0,void 0,void 0,Ce[Fe-4]),this.$=Ce[Fe-5].concat(Ce[Fe]);break;case 53:this.$=Ce[Fe-4].concat(Ce[Fe]);break;case 55:this.$=Ce[Fe-2],oa.setClass(Ce[Fe-2],Ce[Fe]);break;case 56:this.$=Ce[Fe-3],oa.addVertex(Ce[Fe-3],Ce[Fe-1],"square");break;case 57:this.$=Ce[Fe-3],oa.addVertex(Ce[Fe-3],Ce[Fe-1],"doublecircle");break;case 58:this.$=Ce[Fe-5],oa.addVertex(Ce[Fe-5],Ce[Fe-2],"circle");break;case 59:this.$=Ce[Fe-3],oa.addVertex(Ce[Fe-3],Ce[Fe-1],"ellipse");break;case 60:this.$=Ce[Fe-3],oa.addVertex(Ce[Fe-3],Ce[Fe-1],"stadium");break;case 61:this.$=Ce[Fe-3],oa.addVertex(Ce[Fe-3],Ce[Fe-1],"subroutine");break;case 62:this.$=Ce[Fe-7],oa.addVertex(Ce[Fe-7],Ce[Fe-1],"rect",void 0,void 0,void 0,Object.fromEntries([[Ce[Fe-5],Ce[Fe-3]]]));break;case 63:this.$=Ce[Fe-3],oa.addVertex(Ce[Fe-3],Ce[Fe-1],"cylinder");break;case 64:this.$=Ce[Fe-3],oa.addVertex(Ce[Fe-3],Ce[Fe-1],"round");break;case 65:this.$=Ce[Fe-3],oa.addVertex(Ce[Fe-3],Ce[Fe-1],"diamond");break;case 66:this.$=Ce[Fe-5],oa.addVertex(Ce[Fe-5],Ce[Fe-2],"hexagon");break;case 67:this.$=Ce[Fe-3],oa.addVertex(Ce[Fe-3],Ce[Fe-1],"odd");break;case 68:this.$=Ce[Fe-3],oa.addVertex(Ce[Fe-3],Ce[Fe-1],"trapezoid");break;case 69:this.$=Ce[Fe-3],oa.addVertex(Ce[Fe-3],Ce[Fe-1],"inv_trapezoid");break;case 70:this.$=Ce[Fe-3],oa.addVertex(Ce[Fe-3],Ce[Fe-1],"lean_right");break;case 71:this.$=Ce[Fe-3],oa.addVertex(Ce[Fe-3],Ce[Fe-1],"lean_left");break;case 72:this.$=Ce[Fe],oa.addVertex(Ce[Fe]);break;case 73:Ce[Fe-1].text=Ce[Fe],this.$=Ce[Fe-1];break;case 74:case 75:Ce[Fe-2].text=Ce[Fe-1],this.$=Ce[Fe-2];break;case 77:var at=oa.destructLink(Ce[Fe],Ce[Fe-2]);this.$={type:at.type,stroke:at.stroke,length:at.length,text:Ce[Fe-1]};break;case 78:at=oa.destructLink(Ce[Fe],Ce[Fe-2]),this.$={type:at.type,stroke:at.stroke,length:at.length,text:Ce[Fe-1],id:Ce[Fe-3]};break;case 79:case 86:case 101:case 103:this.$={text:Ce[Fe],type:"text"};break;case 80:case 87:case 102:this.$={text:Ce[Fe-1].text+""+Ce[Fe],type:Ce[Fe-1].type};break;case 81:case 88:this.$={text:Ce[Fe],type:"string"};break;case 82:case 89:case 104:this.$={text:Ce[Fe],type:"markdown"};break;case 83:at=oa.destructLink(Ce[Fe]),this.$={type:at.type,stroke:at.stroke,length:at.length};break;case 84:at=oa.destructLink(Ce[Fe]),this.$={type:at.type,stroke:at.stroke,length:at.length,id:Ce[Fe-1]};break;case 85:this.$=Ce[Fe-1];break;case 105:this.$=Ce[Fe-4],oa.addClass(Ce[Fe-2],Ce[Fe]);break;case 106:this.$=Ce[Fe-4],oa.setClass(Ce[Fe-2],Ce[Fe]);break;case 107:case 115:this.$=Ce[Fe-1],oa.setClickEvent(Ce[Fe-1],Ce[Fe]);break;case 108:case 116:this.$=Ce[Fe-3],oa.setClickEvent(Ce[Fe-3],Ce[Fe-2]),oa.setTooltip(Ce[Fe-3],Ce[Fe]);break;case 109:this.$=Ce[Fe-2],oa.setClickEvent(Ce[Fe-2],Ce[Fe-1],Ce[Fe]);break;case 110:this.$=Ce[Fe-4],oa.setClickEvent(Ce[Fe-4],Ce[Fe-3],Ce[Fe-2]),oa.setTooltip(Ce[Fe-4],Ce[Fe]);break;case 111:this.$=Ce[Fe-2],oa.setLink(Ce[Fe-2],Ce[Fe]);break;case 112:this.$=Ce[Fe-4],oa.setLink(Ce[Fe-4],Ce[Fe-2]),oa.setTooltip(Ce[Fe-4],Ce[Fe]);break;case 113:this.$=Ce[Fe-4],oa.setLink(Ce[Fe-4],Ce[Fe-2],Ce[Fe]);break;case 114:this.$=Ce[Fe-6],oa.setLink(Ce[Fe-6],Ce[Fe-4],Ce[Fe]),oa.setTooltip(Ce[Fe-6],Ce[Fe-2]);break;case 117:this.$=Ce[Fe-1],oa.setLink(Ce[Fe-1],Ce[Fe]);break;case 118:this.$=Ce[Fe-3],oa.setLink(Ce[Fe-3],Ce[Fe-2]),oa.setTooltip(Ce[Fe-3],Ce[Fe]);break;case 119:this.$=Ce[Fe-3],oa.setLink(Ce[Fe-3],Ce[Fe-2],Ce[Fe]);break;case 120:this.$=Ce[Fe-5],oa.setLink(Ce[Fe-5],Ce[Fe-4],Ce[Fe]),oa.setTooltip(Ce[Fe-5],Ce[Fe-2]);break;case 121:this.$=Ce[Fe-4],oa.addVertex(Ce[Fe-2],void 0,void 0,Ce[Fe]);break;case 122:this.$=Ce[Fe-4],oa.updateLink([Ce[Fe-2]],Ce[Fe]);break;case 123:this.$=Ce[Fe-4],oa.updateLink(Ce[Fe-2],Ce[Fe]);break;case 124:this.$=Ce[Fe-8],oa.updateLinkInterpolate([Ce[Fe-6]],Ce[Fe-2]),oa.updateLink([Ce[Fe-6]],Ce[Fe]);break;case 125:this.$=Ce[Fe-8],oa.updateLinkInterpolate(Ce[Fe-6],Ce[Fe-2]),oa.updateLink(Ce[Fe-6],Ce[Fe]);break;case 126:this.$=Ce[Fe-6],oa.updateLinkInterpolate([Ce[Fe-4]],Ce[Fe]);break;case 127:this.$=Ce[Fe-6],oa.updateLinkInterpolate(Ce[Fe-4],Ce[Fe]);break;case 129:case 131:Ce[Fe-2].push(Ce[Fe]),this.$=Ce[Fe-2];break;case 182:case 184:this.$=Ce[Fe-1]+""+Ce[Fe];break;case 185:this.$={stmt:"dir",value:"TB"};break;case 186:this.$={stmt:"dir",value:"BT"};break;case 187:this.$={stmt:"dir",value:"RL"};break;case 188:this.$={stmt:"dir",value:"LR"}}},"anonymous"),table:[{3:1,4:2,9:re,10:It,12:qt},{1:[3]},w(V,pt,{5:6}),{4:7,9:re,10:It,12:qt},{4:8,9:re,10:It,12:qt},{13:[1,9],14:[1,10]},{1:[2,1],6:11,7:12,8:H,9:Nt,10:St,11:$t,20:17,22:18,23:19,24:20,25:21,26:22,27:ye,33:24,34:le,36:Pe,38:oe,42:28,43:38,44:qe,45:39,47:40,60:ze,84:Et,85:Tt,86:B,87:F,88:et,89:mt,102:it,105:rt,106:_t,109:ht,111:Ft,113:41,114:G,115:lt,116:ke,121:Mt,122:Zt,123:pe,124:Re},w(V,[2,9]),w(V,[2,10]),w(V,[2,11]),{8:[1,54],9:[1,55],10:Ze,15:53,18:56},w(de,[2,3]),w(de,[2,4]),w(de,[2,5]),w(de,[2,6]),w(de,[2,7]),w(de,[2,8]),{8:mr,9:xr,11:zt,21:58,41:59,72:63,75:[1,64],77:[1,66],78:[1,65]},{8:mr,9:xr,11:zt,21:67},{8:mr,9:xr,11:zt,21:68},{8:mr,9:xr,11:zt,21:69},{8:mr,9:xr,11:zt,21:70},{8:mr,9:xr,11:zt,21:71},{8:mr,9:xr,10:[1,72],11:zt,21:73},w(de,[2,36]),{35:[1,74]},{37:[1,75]},w(de,[2,39]),w(Ae,[2,50],{18:76,39:77,10:Ze,40:or}),{10:[1,79]},{10:[1,80]},{10:[1,81]},{10:[1,82]},{14:ve,44:ce,60:Ee,80:[1,86],89:De,95:[1,83],97:[1,84],101:85,105:er,106:Qe,109:Lr,111:_e,114:Hr,115:sr,116:te,120:87},w(de,[2,185]),w(de,[2,186]),w(de,[2,187]),w(de,[2,188]),w(ne,[2,51]),w(ne,[2,54],{46:[1,99]}),w(be,[2,72],{113:112,29:[1,100],44:qe,48:[1,101],50:[1,102],52:[1,103],54:[1,104],56:[1,105],58:[1,106],60:ze,63:[1,107],65:[1,108],67:[1,109],68:[1,110],70:[1,111],89:mt,102:it,105:rt,106:_t,109:ht,111:Ft,114:G,115:lt,116:ke}),w(ir,[2,181]),w(ir,[2,142]),w(ir,[2,143]),w(ir,[2,144]),w(ir,[2,145]),w(ir,[2,146]),w(ir,[2,147]),w(ir,[2,148]),w(ir,[2,149]),w(ir,[2,150]),w(ir,[2,151]),w(ir,[2,152]),w(V,[2,12]),w(V,[2,18]),w(V,[2,19]),{9:[1,113]},w(g,[2,26],{18:114,10:Ze}),w(de,[2,27]),{42:115,43:38,44:qe,45:39,47:40,60:ze,89:mt,102:it,105:rt,106:_t,109:ht,111:Ft,113:41,114:G,115:lt,116:ke},w(de,[2,40]),w(de,[2,41]),w(de,[2,42]),w(y,[2,76],{73:116,62:[1,118],74:[1,117]}),{76:119,79:120,80:E,81:I,116:m,119:D},{75:[1,125],77:[1,126]},w(v,[2,83]),w(de,[2,28]),w(de,[2,29]),w(de,[2,30]),w(de,[2,31]),w(de,[2,32]),{10:b,12:C,14:P,27:Q,28:127,32:xt,44:Vt,60:jt,75:Ut,80:[1,129],81:[1,130],83:140,84:Wt,85:xe,86:Xe,87:We,88:gr,89:hr,90:_r,91:128,105:$e,109:He,111:Ar,114:kr,115:zr,116:Er},w(Jr,pt,{5:153}),w(de,[2,37]),w(de,[2,38]),w(Ae,[2,48],{44:Br}),w(Ae,[2,49],{18:155,10:Ze,40:ha}),w(ne,[2,44]),{44:qe,47:157,60:ze,89:mt,102:it,105:rt,106:_t,109:ht,111:Ft,113:41,114:G,115:lt,116:ke},{102:[1,158],103:159,105:[1,160]},{44:qe,47:161,60:ze,89:mt,102:it,105:rt,106:_t,109:ht,111:Ft,113:41,114:G,115:lt,116:ke},{44:qe,47:162,60:ze,89:mt,102:it,105:rt,106:_t,109:ht,111:Ft,113:41,114:G,115:lt,116:ke},w(ia,[2,107],{10:[1,163],96:[1,164]}),{80:[1,165]},w(ia,[2,115],{120:167,10:[1,166],14:ve,44:ce,60:Ee,89:De,105:er,106:Qe,109:Lr,111:_e,114:Hr,115:sr,116:te}),w(ia,[2,117],{10:[1,168]}),w(jr,[2,183]),w(jr,[2,170]),w(jr,[2,171]),w(jr,[2,172]),w(jr,[2,173]),w(jr,[2,174]),w(jr,[2,175]),w(jr,[2,176]),w(jr,[2,177]),w(jr,[2,178]),w(jr,[2,179]),w(jr,[2,180]),{44:qe,47:169,60:ze,89:mt,102:it,105:rt,106:_t,109:ht,111:Ft,113:41,114:G,115:lt,116:ke},{30:170,67:Qr,80:lr,81:dr,82:171,116:W,117:Yt,118:Ye},{30:178,67:Qr,80:lr,81:dr,82:171,116:W,117:Yt,118:Ye},{30:180,50:[1,179],67:Qr,80:lr,81:dr,82:171,116:W,117:Yt,118:Ye},{30:181,67:Qr,80:lr,81:dr,82:171,116:W,117:Yt,118:Ye},{30:182,67:Qr,80:lr,81:dr,82:171,116:W,117:Yt,118:Ye},{30:183,67:Qr,80:lr,81:dr,82:171,116:W,117:Yt,118:Ye},{109:[1,184]},{30:185,67:Qr,80:lr,81:dr,82:171,116:W,117:Yt,118:Ye},{30:186,65:[1,187],67:Qr,80:lr,81:dr,82:171,116:W,117:Yt,118:Ye},{30:188,67:Qr,80:lr,81:dr,82:171,116:W,117:Yt,118:Ye},{30:189,67:Qr,80:lr,81:dr,82:171,116:W,117:Yt,118:Ye},{30:190,67:Qr,80:lr,81:dr,82:171,116:W,117:Yt,118:Ye},w(ir,[2,182]),w(V,[2,20]),w(g,[2,25]),w(Ae,[2,46],{39:191,18:192,10:Ze,40:or}),w(y,[2,73],{10:[1,193]}),{10:[1,194]},{30:195,67:Qr,80:lr,81:dr,82:171,116:W,117:Yt,118:Ye},{77:[1,196],79:197,116:m,119:D},w(Ne,[2,79]),w(Ne,[2,81]),w(Ne,[2,82]),w(Ne,[2,168]),w(Ne,[2,169]),{76:198,79:120,80:E,81:I,116:m,119:D},w(v,[2,84]),{8:mr,9:xr,10:b,11:zt,12:C,14:P,21:200,27:Q,29:[1,199],32:xt,44:Vt,60:jt,75:Ut,83:140,84:Wt,85:xe,86:Xe,87:We,88:gr,89:hr,90:_r,91:201,105:$e,109:He,111:Ar,114:kr,115:zr,116:Er},w(Tr,[2,101]),w(Tr,[2,103]),w(Tr,[2,104]),w(Tr,[2,157]),w(Tr,[2,158]),w(Tr,[2,159]),w(Tr,[2,160]),w(Tr,[2,161]),w(Tr,[2,162]),w(Tr,[2,163]),w(Tr,[2,164]),w(Tr,[2,165]),w(Tr,[2,166]),w(Tr,[2,167]),w(Tr,[2,90]),w(Tr,[2,91]),w(Tr,[2,92]),w(Tr,[2,93]),w(Tr,[2,94]),w(Tr,[2,95]),w(Tr,[2,96]),w(Tr,[2,97]),w(Tr,[2,98]),w(Tr,[2,99]),w(Tr,[2,100]),{6:11,7:12,8:H,9:Nt,10:St,11:$t,20:17,22:18,23:19,24:20,25:21,26:22,27:ye,32:[1,202],33:24,34:le,36:Pe,38:oe,42:28,43:38,44:qe,45:39,47:40,60:ze,84:Et,85:Tt,86:B,87:F,88:et,89:mt,102:it,105:rt,106:_t,109:ht,111:Ft,113:41,114:G,115:lt,116:ke,121:Mt,122:Zt,123:pe,124:Re},{10:Ze,18:203},{44:[1,204]},w(ne,[2,43]),{10:[1,205],44:qe,60:ze,89:mt,102:it,105:rt,106:_t,109:ht,111:Ft,113:112,114:G,115:lt,116:ke},{10:[1,206]},{10:[1,207],106:[1,208]},w(yr,[2,128]),{10:[1,209],44:qe,60:ze,89:mt,102:it,105:rt,106:_t,109:ht,111:Ft,113:112,114:G,115:lt,116:ke},{10:[1,210],44:qe,60:ze,89:mt,102:it,105:rt,106:_t,109:ht,111:Ft,113:112,114:G,115:lt,116:ke},{80:[1,211]},w(ia,[2,109],{10:[1,212]}),w(ia,[2,111],{10:[1,213]}),{80:[1,214]},w(jr,[2,184]),{80:[1,215],98:[1,216]},w(ne,[2,55],{113:112,44:qe,60:ze,89:mt,102:it,105:rt,106:_t,109:ht,111:Ft,114:G,115:lt,116:ke}),{31:[1,217],67:Qr,82:218,116:W,117:Yt,118:Ye},w(da,[2,86]),w(da,[2,88]),w(da,[2,89]),w(da,[2,153]),w(da,[2,154]),w(da,[2,155]),w(da,[2,156]),{49:[1,219],67:Qr,82:218,116:W,117:Yt,118:Ye},{30:220,67:Qr,80:lr,81:dr,82:171,116:W,117:Yt,118:Ye},{51:[1,221],67:Qr,82:218,116:W,117:Yt,118:Ye},{53:[1,222],67:Qr,82:218,116:W,117:Yt,118:Ye},{55:[1,223],67:Qr,82:218,116:W,117:Yt,118:Ye},{57:[1,224],67:Qr,82:218,116:W,117:Yt,118:Ye},{60:[1,225]},{64:[1,226],67:Qr,82:218,116:W,117:Yt,118:Ye},{66:[1,227],67:Qr,82:218,116:W,117:Yt,118:Ye},{30:228,67:Qr,80:lr,81:dr,82:171,116:W,117:Yt,118:Ye},{31:[1,229],67:Qr,82:218,116:W,117:Yt,118:Ye},{67:Qr,69:[1,230],71:[1,231],82:218,116:W,117:Yt,118:Ye},{67:Qr,69:[1,233],71:[1,232],82:218,116:W,117:Yt,118:Ye},w(Ae,[2,45],{18:155,10:Ze,40:ha}),w(Ae,[2,47],{44:Br}),w(y,[2,75]),w(y,[2,74]),{62:[1,234],67:Qr,82:218,116:W,117:Yt,118:Ye},w(y,[2,77]),w(Ne,[2,80]),{77:[1,235],79:197,116:m,119:D},{30:236,67:Qr,80:lr,81:dr,82:171,116:W,117:Yt,118:Ye},w(Jr,pt,{5:237}),w(Tr,[2,102]),w(de,[2,35]),{43:238,44:qe,45:39,47:40,60:ze,89:mt,102:it,105:rt,106:_t,109:ht,111:Ft,113:41,114:G,115:lt,116:ke},{10:Ze,18:239},{10:Pa,60:Ia,84:Wa,92:240,105:Ma,107:241,108:242,109:ba,110:sa,111:Sa,112:ea},{10:Pa,60:Ia,84:Wa,92:251,104:[1,252],105:Ma,107:241,108:242,109:ba,110:sa,111:Sa,112:ea},{10:Pa,60:Ia,84:Wa,92:253,104:[1,254],105:Ma,107:241,108:242,109:ba,110:sa,111:Sa,112:ea},{105:[1,255]},{10:Pa,60:Ia,84:Wa,92:256,105:Ma,107:241,108:242,109:ba,110:sa,111:Sa,112:ea},{44:qe,47:257,60:ze,89:mt,102:it,105:rt,106:_t,109:ht,111:Ft,113:41,114:G,115:lt,116:ke},w(ia,[2,108]),{80:[1,258]},{80:[1,259],98:[1,260]},w(ia,[2,116]),w(ia,[2,118],{10:[1,261]}),w(ia,[2,119]),w(be,[2,56]),w(da,[2,87]),w(be,[2,57]),{51:[1,262],67:Qr,82:218,116:W,117:Yt,118:Ye},w(be,[2,64]),w(be,[2,59]),w(be,[2,60]),w(be,[2,61]),{109:[1,263]},w(be,[2,63]),w(be,[2,65]),{66:[1,264],67:Qr,82:218,116:W,117:Yt,118:Ye},w(be,[2,67]),w(be,[2,68]),w(be,[2,70]),w(be,[2,69]),w(be,[2,71]),w([10,44,60,89,102,105,106,109,111,114,115,116],[2,85]),w(y,[2,78]),{31:[1,265],67:Qr,82:218,116:W,117:Yt,118:Ye},{6:11,7:12,8:H,9:Nt,10:St,11:$t,20:17,22:18,23:19,24:20,25:21,26:22,27:ye,32:[1,266],33:24,34:le,36:Pe,38:oe,42:28,43:38,44:qe,45:39,47:40,60:ze,84:Et,85:Tt,86:B,87:F,88:et,89:mt,102:it,105:rt,106:_t,109:ht,111:Ft,113:41,114:G,115:lt,116:ke,121:Mt,122:Zt,123:pe,124:Re},w(ne,[2,53]),{43:267,44:qe,45:39,47:40,60:ze,89:mt,102:it,105:rt,106:_t,109:ht,111:Ft,113:41,114:G,115:lt,116:ke},w(ia,[2,121],{106:Va}),w(pr,[2,130],{108:269,10:Pa,60:Ia,84:Wa,105:Ma,109:ba,110:sa,111:Sa,112:ea}),w(Ua,[2,132]),w(Ua,[2,134]),w(Ua,[2,135]),w(Ua,[2,136]),w(Ua,[2,137]),w(Ua,[2,138]),w(Ua,[2,139]),w(Ua,[2,140]),w(Ua,[2,141]),w(ia,[2,122],{106:Va}),{10:[1,270]},w(ia,[2,123],{106:Va}),{10:[1,271]},w(yr,[2,129]),w(ia,[2,105],{106:Va}),w(ia,[2,106],{113:112,44:qe,60:ze,89:mt,102:it,105:rt,106:_t,109:ht,111:Ft,114:G,115:lt,116:ke}),w(ia,[2,110]),w(ia,[2,112],{10:[1,272]}),w(ia,[2,113]),{98:[1,273]},{51:[1,274]},{62:[1,275]},{66:[1,276]},{8:mr,9:xr,11:zt,21:277},w(de,[2,34]),w(ne,[2,52]),{10:Pa,60:Ia,84:Wa,105:Ma,107:278,108:242,109:ba,110:sa,111:Sa,112:ea},w(Ua,[2,133]),{14:ve,44:ce,60:Ee,89:De,101:279,105:er,106:Qe,109:Lr,111:_e,114:Hr,115:sr,116:te,120:87},{14:ve,44:ce,60:Ee,89:De,101:280,105:er,106:Qe,109:Lr,111:_e,114:Hr,115:sr,116:te,120:87},{98:[1,281]},w(ia,[2,120]),w(be,[2,58]),{30:282,67:Qr,80:lr,81:dr,82:171,116:W,117:Yt,118:Ye},w(be,[2,66]),w(Jr,pt,{5:283}),w(pr,[2,131],{108:269,10:Pa,60:Ia,84:Wa,105:Ma,109:ba,110:sa,111:Sa,112:ea}),w(ia,[2,126],{120:167,10:[1,284],14:ve,44:ce,60:Ee,89:De,105:er,106:Qe,109:Lr,111:_e,114:Hr,115:sr,116:te}),w(ia,[2,127],{120:167,10:[1,285],14:ve,44:ce,60:Ee,89:De,105:er,106:Qe,109:Lr,111:_e,114:Hr,115:sr,116:te}),w(ia,[2,114]),{31:[1,286],67:Qr,82:218,116:W,117:Yt,118:Ye},{6:11,7:12,8:H,9:Nt,10:St,11:$t,20:17,22:18,23:19,24:20,25:21,26:22,27:ye,32:[1,287],33:24,34:le,36:Pe,38:oe,42:28,43:38,44:qe,45:39,47:40,60:ze,84:Et,85:Tt,86:B,87:F,88:et,89:mt,102:it,105:rt,106:_t,109:ht,111:Ft,113:41,114:G,115:lt,116:ke,121:Mt,122:Zt,123:pe,124:Re},{10:Pa,60:Ia,84:Wa,92:288,105:Ma,107:241,108:242,109:ba,110:sa,111:Sa,112:ea},{10:Pa,60:Ia,84:Wa,92:289,105:Ma,107:241,108:242,109:ba,110:sa,111:Sa,112:ea},w(be,[2,62]),w(de,[2,33]),w(ia,[2,124],{106:Va}),w(ia,[2,125],{106:Va})],defaultActions:{},parseError:(0,Ke.K2)(function(_a,qa){if(!qa.recoverable){var Ha=new Error(_a);throw Ha.hash=qa,Ha}this.trace(_a)},"parseError"),parse:(0,Ke.K2)(function(_a){var qa=this,Ha=[0],oa=[],hi=[null],Ce=[],Ri=this.table,Fe="",at=0,Ct=0,M=0,gt=Ce.slice.call(arguments,1),Lt=Object.create(this.lexer),Kt={yy:{}};for(var Je in this.yy)Object.prototype.hasOwnProperty.call(this.yy,Je)&&(Kt.yy[Je]=this.yy[Je]);Lt.setInput(_a,Kt.yy),Kt.yy.lexer=Lt,Kt.yy.parser=this,typeof Lt.yylloc>"u"&&(Lt.yylloc={});var Xr=Lt.yylloc;Ce.push(Xr);var Gr=Lt.options&&Lt.options.ranges;function La(){var Mr;return"number"!=typeof(Mr=oa.pop()||Lt.lex()||1)&&(Mr instanceof Array&&(Mr=(oa=Mr).pop()),Mr=qa.symbols_[Mr]||Mr),Mr}this.parseError="function"==typeof Kt.yy.parseError?Kt.yy.parseError:Object.getPrototypeOf(this).parseError,(0,Ke.K2)(function aa(Mr){Ha.length=Ha.length-2*Mr,hi.length=hi.length-Mr,Ce.length=Ce.length-Mr},"popStack"),(0,Ke.K2)(La,"lex");for(var fa,wa,ja,$a,Ei,Fa,Pr,Ya,mi={};;){if(this.defaultActions[ja=Ha[Ha.length-1]]?$a=this.defaultActions[ja]:((null===fa||typeof fa>"u")&&(fa=La()),$a=Ri[ja]&&Ri[ja][fa]),typeof $a>"u"||!$a.length||!$a[0]){var ni;for(Fa in Ya=[],Ri[ja])this.terminals_[Fa]&&Fa>2&&Ya.push("'"+this.terminals_[Fa]+"'");ni=Lt.showPosition?"Parse error on line "+(at+1)+":\n"+Lt.showPosition()+"\nExpecting "+Ya.join(", ")+", got '"+(this.terminals_[fa]||fa)+"'":"Parse error on line "+(at+1)+": Unexpected "+(1==fa?"end of input":"'"+(this.terminals_[fa]||fa)+"'"),this.parseError(ni,{text:Lt.match,token:this.terminals_[fa]||fa,line:Lt.yylineno,loc:Xr,expected:Ya})}if($a[0]instanceof Array&&$a.length>1)throw new Error("Parse Error: multiple actions possible at state: "+ja+", token: "+fa);switch($a[0]){case 1:Ha.push(fa),hi.push(Lt.yytext),Ce.push(Lt.yylloc),Ha.push($a[1]),fa=null,wa?(fa=wa,wa=null):(Ct=Lt.yyleng,Fe=Lt.yytext,at=Lt.yylineno,Xr=Lt.yylloc,M>0&&M--);break;case 2:if(mi.$=hi[hi.length-(Pr=this.productions_[$a[1]][1])],mi._$={first_line:Ce[Ce.length-(Pr||1)].first_line,last_line:Ce[Ce.length-1].last_line,first_column:Ce[Ce.length-(Pr||1)].first_column,last_column:Ce[Ce.length-1].last_column},Gr&&(mi._$.range=[Ce[Ce.length-(Pr||1)].range[0],Ce[Ce.length-1].range[1]]),typeof(Ei=this.performAction.apply(mi,[Fe,Ct,at,Kt.yy,$a[1],hi,Ce].concat(gt)))<"u")return Ei;Pr&&(Ha=Ha.slice(0,-1*Pr*2),hi=hi.slice(0,-1*Pr),Ce=Ce.slice(0,-1*Pr)),Ha.push(this.productions_[$a[1]][0]),hi.push(mi.$),Ce.push(mi._$),Ha.push(Ri[Ha[Ha.length-2]][Ha[Ha.length-1]]);break;case 3:return!0}}return!0},"parse")};function Ka(){this.yy={}}return nr.lexer=function(){return{EOF:1,parseError:(0,Ke.K2)(function(qa,Ha){if(!this.yy.parser)throw new Error(qa);this.yy.parser.parseError(qa,Ha)},"parseError"),setInput:(0,Ke.K2)(function(_a,qa){return this.yy=qa||this.yy||{},this._input=_a,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},"setInput"),input:(0,Ke.K2)(function(){var _a=this._input[0];return this.yytext+=_a,this.yyleng++,this.offset++,this.match+=_a,this.matched+=_a,_a.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),_a},"input"),unput:(0,Ke.K2)(function(_a){var qa=_a.length,Ha=_a.split(/(?:\r\n?|\n)/g);this._input=_a+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-qa),this.offset-=qa;var oa=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),Ha.length-1&&(this.yylineno-=Ha.length-1);var hi=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:Ha?(Ha.length===oa.length?this.yylloc.first_column:0)+oa[oa.length-Ha.length].length-Ha[0].length:this.yylloc.first_column-qa},this.options.ranges&&(this.yylloc.range=[hi[0],hi[0]+this.yyleng-qa]),this.yyleng=this.yytext.length,this},"unput"),more:(0,Ke.K2)(function(){return this._more=!0,this},"more"),reject:(0,Ke.K2)(function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},"reject"),less:(0,Ke.K2)(function(_a){this.unput(this.match.slice(_a))},"less"),pastInput:(0,Ke.K2)(function(){var _a=this.matched.substr(0,this.matched.length-this.match.length);return(_a.length>20?"...":"")+_a.substr(-20).replace(/\n/g,"")},"pastInput"),upcomingInput:(0,Ke.K2)(function(){var _a=this.match;return _a.length<20&&(_a+=this._input.substr(0,20-_a.length)),(_a.substr(0,20)+(_a.length>20?"...":"")).replace(/\n/g,"")},"upcomingInput"),showPosition:(0,Ke.K2)(function(){var _a=this.pastInput(),qa=new Array(_a.length+1).join("-");return _a+this.upcomingInput()+"\n"+qa+"^"},"showPosition"),test_match:(0,Ke.K2)(function(_a,qa){var Ha,oa,hi;if(this.options.backtrack_lexer&&(hi={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(hi.yylloc.range=this.yylloc.range.slice(0))),(oa=_a[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=oa.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:oa?oa[oa.length-1].length-oa[oa.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+_a[0].length},this.yytext+=_a[0],this.match+=_a[0],this.matches=_a,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(_a[0].length),this.matched+=_a[0],Ha=this.performAction.call(this,this.yy,this,qa,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),Ha)return Ha;if(this._backtrack){for(var Ce in hi)this[Ce]=hi[Ce];return!1}return!1},"test_match"),next:(0,Ke.K2)(function(){if(this.done)return this.EOF;var _a,qa,Ha,oa;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var hi=this._currentRules(),Ce=0;Ce<hi.length;Ce++)if((Ha=this._input.match(this.rules[hi[Ce]]))&&(!qa||Ha[0].length>qa[0].length)){if(qa=Ha,oa=Ce,this.options.backtrack_lexer){if(!1!==(_a=this.test_match(Ha,hi[Ce])))return _a;if(this._backtrack){qa=!1;continue}return!1}if(!this.options.flex)break}return qa?!1!==(_a=this.test_match(qa,hi[oa]))&&_a:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},"next"),lex:(0,Ke.K2)(function(){return this.next()||this.lex()},"lex"),begin:(0,Ke.K2)(function(qa){this.conditionStack.push(qa)},"begin"),popState:(0,Ke.K2)(function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},"popState"),_currentRules:(0,Ke.K2)(function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},"_currentRules"),topState:(0,Ke.K2)(function(qa){return(qa=this.conditionStack.length-1-Math.abs(qa||0))>=0?this.conditionStack[qa]:"INITIAL"},"topState"),pushState:(0,Ke.K2)(function(qa){this.begin(qa)},"pushState"),stateStackSize:(0,Ke.K2)(function(){return this.conditionStack.length},"stateStackSize"),options:{},performAction:(0,Ke.K2)(function(qa,Ha,oa,hi){switch(oa){case 0:return this.begin("acc_title"),34;case 1:return this.popState(),"acc_title_value";case 2:return this.begin("acc_descr"),36;case 3:return this.popState(),"acc_descr_value";case 4:this.begin("acc_descr_multiline");break;case 5:case 12:case 14:case 17:case 20:case 23:case 33:this.popState();break;case 6:return"acc_descr_multiline_value";case 7:return this.pushState("shapeData"),Ha.yytext="",40;case 8:return this.pushState("shapeDataStr"),40;case 9:return this.popState(),40;case 10:return Ha.yytext=Ha.yytext.replace(/\n\s*/g,"<br/>"),40;case 11:return 40;case 13:this.begin("callbackname");break;case 15:this.popState(),this.begin("callbackargs");break;case 16:return 95;case 18:return 96;case 19:return"MD_STR";case 21:this.begin("md_string");break;case 22:return"STR";case 24:this.pushState("string");break;case 25:return 84;case 26:return 102;case 27:return 85;case 28:return 104;case 29:return 86;case 30:return 87;case 31:return 97;case 32:this.begin("click");break;case 34:return 88;case 35:case 36:case 37:return qa.lex.firstGraph()&&this.begin("dir"),12;case 38:return 27;case 39:return 32;case 40:case 41:case 42:case 43:return 98;case 44:return this.popState(),13;case 45:case 46:case 47:case 48:case 49:case 50:case 51:case 52:case 53:case 54:return this.popState(),14;case 55:return 121;case 56:return 122;case 57:return 123;case 58:return 124;case 59:return 78;case 60:return 105;case 61:case 102:return 111;case 62:return 46;case 63:return 60;case 64:case 103:return 44;case 65:return 8;case 66:return 106;case 67:case 101:return 115;case 68:case 71:case 74:return this.popState(),77;case 69:return this.pushState("edgeText"),75;case 70:case 73:case 76:return 119;case 72:return this.pushState("thickEdgeText"),75;case 75:return this.pushState("dottedEdgeText"),75;case 77:return 77;case 78:return this.popState(),53;case 79:case 115:return"TEXT";case 80:return this.pushState("ellipseText"),52;case 81:return this.popState(),55;case 82:return this.pushState("text"),54;case 83:return this.popState(),57;case 84:return this.pushState("text"),56;case 85:return 58;case 86:return this.pushState("text"),67;case 87:return this.popState(),64;case 88:return this.pushState("text"),63;case 89:return this.popState(),49;case 90:return this.pushState("text"),48;case 91:return this.popState(),69;case 92:return this.popState(),71;case 93:return 117;case 94:return this.pushState("trapText"),68;case 95:return this.pushState("trapText"),70;case 96:return 118;case 97:return 67;case 98:return 90;case 99:return"SEP";case 100:return 89;case 104:return 109;case 105:return 114;case 106:return 116;case 107:return this.popState(),62;case 108:return this.pushState("text"),62;case 109:return this.popState(),51;case 110:return this.pushState("text"),50;case 111:return this.popState(),31;case 112:return this.pushState("text"),29;case 113:return this.popState(),66;case 114:return this.pushState("text"),65;case 116:return"QUOTE";case 117:return 9;case 118:return 10;case 119:return 11}},"anonymous"),rules:[/^(?:accTitle\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*\{\s*)/,/^(?:[\}])/,/^(?:[^\}]*)/,/^(?:@\{)/,/^(?:["])/,/^(?:["])/,/^(?:[^\"]+)/,/^(?:[^}^"]+)/,/^(?:\})/,/^(?:call[\s]+)/,/^(?:\([\s]*\))/,/^(?:\()/,/^(?:[^(]*)/,/^(?:\))/,/^(?:[^)]*)/,/^(?:[^`"]+)/,/^(?:[`]["])/,/^(?:["][`])/,/^(?:[^"]+)/,/^(?:["])/,/^(?:["])/,/^(?:style\b)/,/^(?:default\b)/,/^(?:linkStyle\b)/,/^(?:interpolate\b)/,/^(?:classDef\b)/,/^(?:class\b)/,/^(?:href[\s])/,/^(?:click[\s]+)/,/^(?:[\s\n])/,/^(?:[^\s\n]*)/,/^(?:flowchart-elk\b)/,/^(?:graph\b)/,/^(?:flowchart\b)/,/^(?:subgraph\b)/,/^(?:end\b\s*)/,/^(?:_self\b)/,/^(?:_blank\b)/,/^(?:_parent\b)/,/^(?:_top\b)/,/^(?:(\r?\n)*\s*\n)/,/^(?:\s*LR\b)/,/^(?:\s*RL\b)/,/^(?:\s*TB\b)/,/^(?:\s*BT\b)/,/^(?:\s*TD\b)/,/^(?:\s*BR\b)/,/^(?:\s*<)/,/^(?:\s*>)/,/^(?:\s*\^)/,/^(?:\s*v\b)/,/^(?:.*direction\s+TB[^\n]*)/,/^(?:.*direction\s+BT[^\n]*)/,/^(?:.*direction\s+RL[^\n]*)/,/^(?:.*direction\s+LR[^\n]*)/,/^(?:[^\s\"]+@(?=[^\{\"]))/,/^(?:[0-9]+)/,/^(?:#)/,/^(?::::)/,/^(?::)/,/^(?:&)/,/^(?:;)/,/^(?:,)/,/^(?:\*)/,/^(?:\s*[xo<]?--+[-xo>]\s*)/,/^(?:\s*[xo<]?--\s*)/,/^(?:[^-]|-(?!-)+)/,/^(?:\s*[xo<]?==+[=xo>]\s*)/,/^(?:\s*[xo<]?==\s*)/,/^(?:[^=]|=(?!))/,/^(?:\s*[xo<]?-?\.+-[xo>]?\s*)/,/^(?:\s*[xo<]?-\.\s*)/,/^(?:[^\.]|\.(?!))/,/^(?:\s*~~[\~]+\s*)/,/^(?:[-/\)][\)])/,/^(?:[^\(\)\[\]\{\}]|!\)+)/,/^(?:\(-)/,/^(?:\]\))/,/^(?:\(\[)/,/^(?:\]\])/,/^(?:\[\[)/,/^(?:\[\|)/,/^(?:>)/,/^(?:\)\])/,/^(?:\[\()/,/^(?:\)\)\))/,/^(?:\(\(\()/,/^(?:[\\(?=\])][\]])/,/^(?:\/(?=\])\])/,/^(?:\/(?!\])|\\(?!\])|[^\\\[\]\(\)\{\}\/]+)/,/^(?:\[\/)/,/^(?:\[\\)/,/^(?:<)/,/^(?:>)/,/^(?:\^)/,/^(?:\\\|)/,/^(?:v\b)/,/^(?:\*)/,/^(?:#)/,/^(?:&)/,/^(?:([A-Za-z0-9!"\#$%&'*+\.`?\\_\/]|-(?=[^\>\-\.])|(?!))+)/,/^(?:-)/,/^(?:[\u00AA\u00B5\u00BA\u00C0-\u00D6\u00D8-\u00F6]|[\u00F8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377]|[\u037A-\u037D\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5]|[\u03F7-\u0481\u048A-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA]|[\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE]|[\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA]|[\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0]|[\u08A2-\u08AC\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0977]|[\u0979-\u097F\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2]|[\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A]|[\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39]|[\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8]|[\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C]|[\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C]|[\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99]|[\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0]|[\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D]|[\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3]|[\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10]|[\u0D12-\u0D3A\u0D3D\u0D4E\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1]|[\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81]|[\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3]|[\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6]|[\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A]|[\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081]|[\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D]|[\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0]|[\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310]|[\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C]|[\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u1700-\u170C\u170E-\u1711]|[\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7]|[\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191C]|[\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16]|[\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF]|[\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC]|[\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D]|[\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D]|[\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3]|[\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F]|[\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128]|[\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184]|[\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3]|[\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6]|[\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE]|[\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C]|[\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D]|[\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC]|[\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B]|[\uA640-\uA66E\uA67F-\uA697\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788]|[\uA78B-\uA78E\uA790-\uA793\uA7A0-\uA7AA\uA7F8-\uA801\uA803-\uA805]|[\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB]|[\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uAA00-\uAA28]|[\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA80-\uAAAF\uAAB1\uAAB5]|[\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4]|[\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E]|[\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D]|[\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36]|[\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D]|[\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC]|[\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF]|[\uFFD2-\uFFD7\uFFDA-\uFFDC])/,/^(?:\|)/,/^(?:\|)/,/^(?:\))/,/^(?:\()/,/^(?:\])/,/^(?:\[)/,/^(?:(\}))/,/^(?:\{)/,/^(?:[^\[\]\(\)\{\}\|\"]+)/,/^(?:")/,/^(?:(\r?\n)+)/,/^(?:\s)/,/^(?:$)/],conditions:{shapeDataEndBracket:{rules:[21,24,77,80,82,84,88,90,94,95,108,110,112,114],inclusive:!1},shapeDataStr:{rules:[9,10,21,24,77,80,82,84,88,90,94,95,108,110,112,114],inclusive:!1},shapeData:{rules:[8,11,12,21,24,77,80,82,84,88,90,94,95,108,110,112,114],inclusive:!1},callbackargs:{rules:[17,18,21,24,77,80,82,84,88,90,94,95,108,110,112,114],inclusive:!1},callbackname:{rules:[14,15,16,21,24,77,80,82,84,88,90,94,95,108,110,112,114],inclusive:!1},href:{rules:[21,24,77,80,82,84,88,90,94,95,108,110,112,114],inclusive:!1},click:{rules:[21,24,33,34,77,80,82,84,88,90,94,95,108,110,112,114],inclusive:!1},dottedEdgeText:{rules:[21,24,74,76,77,80,82,84,88,90,94,95,108,110,112,114],inclusive:!1},thickEdgeText:{rules:[21,24,71,73,77,80,82,84,88,90,94,95,108,110,112,114],inclusive:!1},edgeText:{rules:[21,24,68,70,77,80,82,84,88,90,94,95,108,110,112,114],inclusive:!1},trapText:{rules:[21,24,77,80,82,84,88,90,91,92,93,94,95,108,110,112,114],inclusive:!1},ellipseText:{rules:[21,24,77,78,79,80,82,84,88,90,94,95,108,110,112,114],inclusive:!1},text:{rules:[21,24,77,80,81,82,83,84,87,88,89,90,94,95,107,108,109,110,111,112,113,114,115],inclusive:!1},vertex:{rules:[21,24,77,80,82,84,88,90,94,95,108,110,112,114],inclusive:!1},dir:{rules:[21,24,44,45,46,47,48,49,50,51,52,53,54,77,80,82,84,88,90,94,95,108,110,112,114],inclusive:!1},acc_descr_multiline:{rules:[5,6,21,24,77,80,82,84,88,90,94,95,108,110,112,114],inclusive:!1},acc_descr:{rules:[3,21,24,77,80,82,84,88,90,94,95,108,110,112,114],inclusive:!1},acc_title:{rules:[1,21,24,77,80,82,84,88,90,94,95,108,110,112,114],inclusive:!1},md_string:{rules:[19,20,21,24,77,80,82,84,88,90,94,95,108,110,112,114],inclusive:!1},string:{rules:[21,22,23,24,77,80,82,84,88,90,94,95,108,110,112,114],inclusive:!1},INITIAL:{rules:[0,2,4,7,13,21,24,25,26,27,28,29,30,31,32,35,36,37,38,39,40,41,42,43,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,71,72,74,75,77,80,82,84,85,86,88,90,94,95,96,97,98,99,100,101,102,103,104,105,106,108,110,112,114,116,117,118,119],inclusive:!0}}}}(),(0,Ke.K2)(Ka,"Parser"),Ka.prototype=nr,nr.Parser=Ka,new Ka}();Or.parser=Or;var je=Or,z=Object.assign({},je);z.parse=w=>{const re=w.replace(/}\s*\n/g,"}\n");return je.parse(re)};var ft=z,Bt=(0,Ke.K2)((w,re)=>{const It=Rr.Ix,qt=It(w,"r"),V=It(w,"g"),pt=It(w,"b");return Rr.B3(qt,V,pt,re)},"fade"),X=(0,Ke.K2)(w=>`.label {\n    font-family: ${w.fontFamily};\n    color: ${w.nodeTextColor||w.textColor};\n  }\n  .cluster-label text {\n    fill: ${w.titleColor};\n  }\n  .cluster-label span {\n    color: ${w.titleColor};\n  }\n  .cluster-label span p {\n    background-color: transparent;\n  }\n\n  .label text,span {\n    fill: ${w.nodeTextColor||w.textColor};\n    color: ${w.nodeTextColor||w.textColor};\n  }\n\n  .node rect,\n  .node circle,\n  .node ellipse,\n  .node polygon,\n  .node path {\n    fill: ${w.mainBkg};\n    stroke: ${w.nodeBorder};\n    stroke-width: 1px;\n  }\n  .rough-node .label text , .node .label text, .image-shape .label, .icon-shape .label {\n    text-anchor: middle;\n  }\n  // .flowchart-label .text-outer-tspan {\n  //   text-anchor: middle;\n  // }\n  // .flowchart-label .text-inner-tspan {\n  //   text-anchor: start;\n  // }\n\n  .node .katex path {\n    fill: #000;\n    stroke: #000;\n    stroke-width: 1px;\n  }\n\n  .rough-node .label,.node .label, .image-shape .label, .icon-shape .label {\n    text-align: center;\n  }\n  .node.clickable {\n    cursor: pointer;\n  }\n\n\n  .root .anchor path {\n    fill: ${w.lineColor} !important;\n    stroke-width: 0;\n    stroke: ${w.lineColor};\n  }\n\n  .arrowheadPath {\n    fill: ${w.arrowheadColor};\n  }\n\n  .edgePath .path {\n    stroke: ${w.lineColor};\n    stroke-width: 2.0px;\n  }\n\n  .flowchart-link {\n    stroke: ${w.lineColor};\n    fill: none;\n  }\n\n  .edgeLabel {\n    background-color: ${w.edgeLabelBackground};\n    p {\n      background-color: ${w.edgeLabelBackground};\n    }\n    rect {\n      opacity: 0.5;\n      background-color: ${w.edgeLabelBackground};\n      fill: ${w.edgeLabelBackground};\n    }\n    text-align: center;\n  }\n\n  /* For html labels only */\n  .labelBkg {\n    background-color: ${Bt(w.edgeLabelBackground,.5)};\n    // background-color:\n  }\n\n  .cluster rect {\n    fill: ${w.clusterBkg};\n    stroke: ${w.clusterBorder};\n    stroke-width: 1px;\n  }\n\n  .cluster text {\n    fill: ${w.titleColor};\n  }\n\n  .cluster span {\n    color: ${w.titleColor};\n  }\n  /* .cluster div {\n    color: ${w.titleColor};\n  } */\n\n  div.mermaidTooltip {\n    position: absolute;\n    text-align: center;\n    max-width: 200px;\n    padding: 2px;\n    font-family: ${w.fontFamily};\n    font-size: 12px;\n    background: ${w.tertiaryColor};\n    border: 1px solid ${w.border2};\n    border-radius: 2px;\n    pointer-events: none;\n    z-index: 100;\n  }\n\n  .flowchartTitleText {\n    text-anchor: middle;\n    font-size: 18px;\n    fill: ${w.textColor};\n  }\n\n  rect.text {\n    fill: none;\n    stroke-width: 0;\n  }\n\n  .icon-shape, .image-shape {\n    background-color: ${w.edgeLabelBackground};\n    p {\n      background-color: ${w.edgeLabelBackground};\n      padding: 2px;\n    }\n    rect {\n      opacity: 0.5;\n      background-color: ${w.edgeLabelBackground};\n      fill: ${w.edgeLabelBackground};\n    }\n    text-align: center;\n  }\n  ${(0,L.o)()}\n`,"getStyles"),ae={parser:ft,get db(){return new ra},renderer:Se,styles:X,init:(0,Ke.K2)(w=>{w.flowchart||(w.flowchart={}),w.layout&&(0,ar.XV)({layout:w.layout}),w.flowchart.arrowMarkerAbsolute=w.arrowMarkerAbsolute,(0,ar.XV)({flowchart:{arrowMarkerAbsolute:w.arrowMarkerAbsolute}})},"init")}},86976:(Ja,vr,R)=>{"use strict";R.r(vr),R.d(vr,{diagram:()=>ar});var ot=R(54256),q=(R(97787),R(5675),R(8086),R(72271),R(98954),R(36384),R(87452),R(32239),R(19753),R(59355),R(52052),R(79006),R(32303)),ar={parser:ot._$,get db(){return new ot.NM},renderer:ot.Lh,styles:ot.tM,init:(0,q.K2)(Ke=>{Ke.class||(Ke.class={}),Ke.class.arrowMarkerAbsolute=Ke.arrowMarkerAbsolute},"init")}},87452:(Ja,vr,R)=>{"use strict";R.d(vr,{DA:()=>Fr,IU:()=>re,U:()=>w,U7:()=>Xi,U_:()=>Yn,Zk:()=>wt,aP:()=>nn,gh:()=>rn,lC:()=>dt,on:()=>Rn});var ot=R(89204),ee=R(32239),L=R(19753),S=R(59355),Pt=R(52052),ut=R(79006),$=R(32303),A=R(40622),At=R(93654),wt=(0,$.K2)(function(){var Gt=(0,ot.A)(function*(d,ct,Xt){let kt;const vt=ct.useHtmlLabels||(0,ut._3)((0,ut.D7)()?.htmlLabels);kt=Xt||"node default";const ue=d.insert("g").attr("class",kt).attr("id",ct.domId||ct.id),nt=ue.insert("g").attr("class","label").attr("style",(0,Pt.KL)(ct.labelStyle));let Dt;Dt=void 0===ct.label?"":"string"==typeof ct.label?ct.label:ct.label[0];const J=yield(0,S.GZ)(nt,(0,ut.jZ)((0,Pt.Sm)(Dt),(0,ut.D7)()),{useHtmlLabels:vt,width:ct.width||(0,ut.D7)().flowchart?.wrappingWidth,cssClasses:"markdown-node-label",style:ct.labelStyle,addSvgBackground:!!ct.icon||!!ct.img});let Z=J.getBBox();const Ot=(ct?.padding??0)/2;if(vt){const fe=J.children[0],Le=(0,A.Ltv)(J),tt=fe.getElementsByTagName("img");if(tt){const l=""===Dt.replace(/<img[^>]*>/g,"").trim();yield Promise.all([...tt].map(T=>new Promise(N=>{function st(){if(T.style.display="flex",T.style.flexDirection="column",l){const bt=(0,ut.D7)().fontSize?(0,ut.D7)().fontSize:window.getComputedStyle(document.body).fontSize,Ie=5,[Qt=ut.UI.fontSize]=(0,Pt.I5)(bt),Ue=Qt*Ie+"px";T.style.minWidth=Ue,T.style.maxWidth=Ue}else T.style.width="100%";N(T)}(0,$.K2)(st,"setupImage"),setTimeout(()=>{T.complete&&st()}),T.addEventListener("error",st),T.addEventListener("load",st)})))}Z=fe.getBoundingClientRect(),Le.attr("width",Z.width),Le.attr("height",Z.height)}return nt.attr("transform",vt?"translate("+-Z.width/2+", "+-Z.height/2+")":"translate(0, "+-Z.height/2+")"),ct.centerLabel&&nt.attr("transform","translate("+-Z.width/2+", "+-Z.height/2+")"),nt.insert("rect",":first-child"),{shapeSvg:ue,bbox:Z,halfPadding:Ot,label:nt}});return function(d,ct,Xt){return Gt.apply(this,arguments)}}(),"labelHelper"),Ge=(0,$.K2)(function(){var Gt=(0,ot.A)(function*(d,ct,Xt){const kt=Xt.useHtmlLabels||(0,ut._3)((0,ut.D7)()?.flowchart?.htmlLabels),vt=d.insert("g").attr("class","label").attr("style",Xt.labelStyle||""),ue=yield(0,S.GZ)(vt,(0,ut.jZ)((0,Pt.Sm)(ct),(0,ut.D7)()),{useHtmlLabels:kt,width:Xt.width||(0,ut.D7)()?.flowchart?.wrappingWidth,style:Xt.labelStyle,addSvgBackground:!!Xt.icon||!!Xt.img});let nt=ue.getBBox();const Dt=Xt.padding/2;if((0,ut._3)((0,ut.D7)()?.flowchart?.htmlLabels)){const J=ue.children[0],Z=(0,A.Ltv)(ue);nt=J.getBoundingClientRect(),Z.attr("width",nt.width),Z.attr("height",nt.height)}return vt.attr("transform",kt?"translate("+-nt.width/2+", "+-nt.height/2+")":"translate(0, "+-nt.height/2+")"),Xt.centerLabel&&vt.attr("transform","translate("+-nt.width/2+", "+-nt.height/2+")"),vt.insert("rect",":first-child"),{shapeSvg:d,bbox:nt,halfPadding:Dt,label:vt}});return function(d,ct,Xt){return Gt.apply(this,arguments)}}(),"insertLabel"),dt=(0,$.K2)((Gt,d)=>{const ct=d.node().getBBox();Gt.width=ct.width,Gt.height=ct.height},"updateNodeBounds"),Rt=(0,$.K2)((Gt,d)=>("handDrawn"===Gt.look?"rough-node":"node")+" "+Gt.cssClasses+" "+(d||""),"getNodeClasses");function q(Gt){const d=Gt.map((ct,Xt)=>`${0===Xt?"M":"L"}${ct.x},${ct.y}`);return d.push("Z"),d.join(" ")}function ar(Gt,d,ct,Xt,kt,vt){const ue=[],Dt=ct-Gt,Ot=2*Math.PI/(Dt/vt),fe=d+(Xt-d)/2;for(let Le=0;Le<=50;Le++){const l=Gt+Le/50*Dt,T=fe+kt*Math.sin(Ot*(l-Gt));ue.push({x:l,y:T})}return ue}function Ke(Gt,d,ct,Xt,kt,vt){const ue=[],nt=kt*Math.PI/180,Z=(vt*Math.PI/180-nt)/(Xt-1);for(let Ot=0;Ot<Xt;Ot++){const fe=nt+Ot*Z,Le=Gt+ct*Math.cos(fe),tt=d+ct*Math.sin(fe);ue.push({x:-Le,y:-tt})}return ue}(0,$.K2)(q,"createPathFromPoints"),(0,$.K2)(ar,"generateFullSineWavePoints"),(0,$.K2)(Ke,"generateCirclePoints");var Rr=(0,$.K2)((Gt,d)=>{var Dt,J,ct=Gt.x,Xt=Gt.y,kt=d.x-ct,vt=d.y-Xt,ue=Gt.width/2,nt=Gt.height/2;return Math.abs(vt)*ue>Math.abs(kt)*nt?(vt<0&&(nt=-nt),Dt=0===vt?0:nt*kt/vt,J=nt):(kt<0&&(ue=-ue),Dt=ue,J=0===kt?0:ue*vt/kt),{x:ct+Dt,y:Xt+J}},"intersectRect");function wr(Gt,d){d&&Gt.attr("style",d)}function Vr(Gt){return ra.apply(this,arguments)}function ra(){return(ra=(0,ot.A)(function*(Gt){const d=(0,A.Ltv)(document.createElementNS("http://www.w3.org/2000/svg","foreignObject")),ct=d.append("xhtml:div"),Xt=(0,ut.D7)();let kt=Gt.label;return Gt.label&&(0,ut.Wi)(Gt.label)&&(kt=yield(0,ut.dj)(Gt.label.replace(ut.Y2.lineBreakRegex,"\n"),Xt)),ct.html((0,ut.jZ)('<span class="'+(Gt.isNode?"nodeLabel":"edgeLabel")+'" '+(Gt.labelStyle?'style="'+Gt.labelStyle+'"':"")+">"+kt+"</span>",Xt)),wr(ct,Gt.labelStyle),ct.style("display","inline-block"),ct.style("padding-right","1px"),ct.style("white-space","nowrap"),ct.attr("xmlns","http://www.w3.org/1999/xhtml"),d.node()})).apply(this,arguments)}(0,$.K2)(wr,"applyStyle"),(0,$.K2)(Vr,"addHtmlLabel");var Fr=(0,$.K2)(function(){var Gt=(0,ot.A)(function*(d,ct,Xt,kt){let vt=d||"";if("object"==typeof vt&&(vt=vt[0]),(0,ut._3)((0,ut.D7)().flowchart.htmlLabels)){vt=vt.replace(/\\n|\n/g,"<br />"),$.Rm.info("vertexText"+vt);const ue={isNode:kt,label:(0,Pt.Sm)(vt).replace(/fa[blrs]?:fa-[\w-]+/g,Dt=>`<i class='${Dt.replace(":"," ")}'></i>`),labelStyle:ct&&ct.replace("fill:","color:")};return yield Vr(ue)}{const ue=document.createElementNS("http://www.w3.org/2000/svg","text");ue.setAttribute("style",ct.replace("color:","fill:"));let nt=[];nt="string"==typeof vt?vt.split(/\\n|\n|<br\s*\/?>/gi):Array.isArray(vt)?vt:[];for(const Dt of nt){const J=document.createElementNS("http://www.w3.org/2000/svg","tspan");J.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),J.setAttribute("dy","1em"),J.setAttribute("x","0"),J.setAttribute("class",Xt?"title-row":"row"),J.textContent=Dt.trim(),ue.appendChild(J)}return ue}});return function(d,ct,Xt,kt){return Gt.apply(this,arguments)}}(),"createLabel"),Se=(0,$.K2)((Gt,d,ct,Xt,kt)=>["M",Gt+kt,d,"H",Gt+ct-kt,"A",kt,kt,0,0,1,Gt+ct,d+kt,"V",d+Xt-kt,"A",kt,kt,0,0,1,Gt+ct-kt,d+Xt,"H",Gt+kt,"A",kt,kt,0,0,1,Gt,d+Xt-kt,"V",d+kt,"A",kt,kt,0,0,1,Gt+kt,d,"Z"].join(" "),"createRoundedRectPathD"),Or=(0,$.K2)(function(){var Gt=(0,ot.A)(function*(d,ct){$.Rm.info("Creating subgraph rect for ",ct.id,ct);const Xt=(0,ut.D7)(),{themeVariables:kt,handDrawnSeed:vt}=Xt,{clusterBkg:ue,clusterBorder:nt}=kt,{labelStyles:Dt,nodeStyles:J,borderStyles:Z,backgroundStyles:Ot}=(0,L.GX)(ct),fe=d.insert("g").attr("class","cluster "+ct.cssClasses).attr("id",ct.id).attr("data-look",ct.look),Le=(0,ut._3)(Xt.flowchart.htmlLabels),tt=fe.insert("g").attr("class","cluster-label "),l=yield(0,S.GZ)(tt,ct.label,{style:ct.labelStyle,useHtmlLabels:Le,isNode:!0});let T=l.getBBox();if((0,ut._3)(Xt.flowchart.htmlLabels)){const Sr=l.children[0],ta=(0,A.Ltv)(l);T=Sr.getBoundingClientRect(),ta.attr("width",T.width),ta.attr("height",T.height)}const N=ct.width<=T.width+ct.padding?T.width+ct.padding:ct.width;ct.diff=ct.width<=T.width+ct.padding?(N-ct.width)/2-ct.padding:-ct.padding;const st=ct.height,bt=ct.x-N/2,Ie=ct.y-st/2;let Qt;if($.Rm.trace("Data ",ct,JSON.stringify(ct)),"handDrawn"===ct.look){const Sr=At.A.svg(fe),ta=(0,L.Fr)(ct,{roughness:.7,fill:ue,stroke:nt,fillWeight:3,seed:vt}),Ir=Sr.path(Se(bt,Ie,N,st,0),ta);Qt=fe.insert(()=>($.Rm.debug("Rough node insert CXC",Ir),Ir),":first-child"),Qt.select("path:nth-child(2)").attr("style",Z.join(";")),Qt.select("path").attr("style",Ot.join(";").replace("fill","stroke"))}else Qt=fe.insert("rect",":first-child"),Qt.attr("style",J).attr("rx",ct.rx).attr("ry",ct.ry).attr("x",bt).attr("y",Ie).attr("width",N).attr("height",st);const{subGraphTitleTopMargin:Ue}=(0,ee.O)(Xt);if(tt.attr("transform",`translate(${ct.x-T.width/2}, ${ct.y-ct.height/2+Ue})`),Dt){const Sr=tt.select("span");Sr&&Sr.attr("style",Dt)}const br=Qt.node().getBBox();return ct.offsetX=0,ct.width=br.width,ct.height=br.height,ct.offsetY=T.height-ct.padding/2,ct.intersect=function(Sr){return Rr(ct,Sr)},{cluster:fe,labelBBox:T}});return function(d,ct){return Gt.apply(this,arguments)}}(),"rect"),je=(0,$.K2)((Gt,d)=>{const ct=Gt.insert("g").attr("class","note-cluster").attr("id",d.id),Xt=ct.insert("rect",":first-child"),kt=0*d.padding,vt=kt/2;Xt.attr("rx",d.rx).attr("ry",d.ry).attr("x",d.x-d.width/2-vt).attr("y",d.y-d.height/2-vt).attr("width",d.width+kt).attr("height",d.height+kt).attr("fill","none");const ue=Xt.node().getBBox();return d.width=ue.width,d.height=ue.height,d.intersect=function(nt){return Rr(d,nt)},{cluster:ct,labelBBox:{width:0,height:0}}},"noteGroup"),z=(0,$.K2)(function(){var Gt=(0,ot.A)(function*(d,ct){const Xt=(0,ut.D7)(),{themeVariables:kt,handDrawnSeed:vt}=Xt,{altBackground:ue,compositeBackground:nt,compositeTitleBackground:Dt,nodeBorder:J}=kt,Z=d.insert("g").attr("class",ct.cssClasses).attr("id",ct.id).attr("data-id",ct.id).attr("data-look",ct.look),Ot=Z.insert("g",":first-child"),fe=Z.insert("g").attr("class","cluster-label");let Le=Z.append("rect");const tt=fe.node().appendChild(yield Fr(ct.label,ct.labelStyle,void 0,!0));let l=tt.getBBox();if((0,ut._3)(Xt.flowchart.htmlLabels)){const Ir=tt.children[0],la=(0,A.Ltv)(tt);l=Ir.getBoundingClientRect(),la.attr("width",l.width),la.attr("height",l.height)}const T=0*ct.padding,N=T/2,st=(ct.width<=l.width+ct.padding?l.width+ct.padding:ct.width)+T;ct.diff=ct.width<=l.width+ct.padding?(st-ct.width)/2-ct.padding:-ct.padding;const bt=ct.height+T,Ie=ct.height+T-l.height-6,Qt=ct.x-st/2,Ue=ct.y-bt/2;ct.width=st;const br=ct.y-ct.height/2-N+l.height+2;let Sr;if("handDrawn"===ct.look){const Ir=ct.cssClasses.includes("statediagram-cluster-alt"),la=At.A.svg(Z),Ca=ct.rx||ct.ry?la.path(Se(Qt,Ue,st,bt,10),{roughness:.7,fill:Dt,fillStyle:"solid",stroke:J,seed:vt}):la.rectangle(Qt,Ue,st,bt,{seed:vt});Sr=Z.insert(()=>Ca,":first-child");const ka=la.rectangle(Qt,br,st,Ie,{fill:Ir?ue:nt,fillStyle:Ir?"hachure":"solid",stroke:J,seed:vt});Sr=Z.insert(()=>Ca,":first-child"),Le=Z.insert(()=>ka)}else Sr=Ot.insert("rect",":first-child"),Sr.attr("class","outer").attr("x",Qt).attr("y",Ue).attr("width",st).attr("height",bt).attr("data-look",ct.look),Le.attr("class","inner").attr("x",Qt).attr("y",br).attr("width",st).attr("height",Ie);fe.attr("transform",`translate(${ct.x-l.width/2}, ${Ue+1-((0,ut._3)(Xt.flowchart.htmlLabels)?0:3)})`);const ta=Sr.node().getBBox();return ct.height=ta.height,ct.offsetX=0,ct.offsetY=l.height-ct.padding/2,ct.labelBBox=l,ct.intersect=function(Ir){return Rr(ct,Ir)},{cluster:Z,labelBBox:l}});return function(d,ct){return Gt.apply(this,arguments)}}(),"roundedWithTitle"),ft=(0,$.K2)(function(){var Gt=(0,ot.A)(function*(d,ct){$.Rm.info("Creating subgraph rect for ",ct.id,ct);const Xt=(0,ut.D7)(),{themeVariables:kt,handDrawnSeed:vt}=Xt,{clusterBkg:ue,clusterBorder:nt}=kt,{labelStyles:Dt,nodeStyles:J,borderStyles:Z,backgroundStyles:Ot}=(0,L.GX)(ct),fe=d.insert("g").attr("class","cluster "+ct.cssClasses).attr("id",ct.id).attr("data-look",ct.look),Le=(0,ut._3)(Xt.flowchart.htmlLabels),tt=fe.insert("g").attr("class","cluster-label "),l=yield(0,S.GZ)(tt,ct.label,{style:ct.labelStyle,useHtmlLabels:Le,isNode:!0,width:ct.width});let T=l.getBBox();if((0,ut._3)(Xt.flowchart.htmlLabels)){const Sr=l.children[0],ta=(0,A.Ltv)(l);T=Sr.getBoundingClientRect(),ta.attr("width",T.width),ta.attr("height",T.height)}const N=ct.width<=T.width+ct.padding?T.width+ct.padding:ct.width;ct.diff=ct.width<=T.width+ct.padding?(N-ct.width)/2-ct.padding:-ct.padding;const st=ct.height,bt=ct.x-N/2,Ie=ct.y-st/2;let Qt;if($.Rm.trace("Data ",ct,JSON.stringify(ct)),"handDrawn"===ct.look){const Sr=At.A.svg(fe),ta=(0,L.Fr)(ct,{roughness:.7,fill:ue,stroke:nt,fillWeight:4,seed:vt}),Ir=Sr.path(Se(bt,Ie,N,st,ct.rx),ta);Qt=fe.insert(()=>($.Rm.debug("Rough node insert CXC",Ir),Ir),":first-child"),Qt.select("path:nth-child(2)").attr("style",Z.join(";")),Qt.select("path").attr("style",Ot.join(";").replace("fill","stroke"))}else Qt=fe.insert("rect",":first-child"),Qt.attr("style",J).attr("rx",ct.rx).attr("ry",ct.ry).attr("x",bt).attr("y",Ie).attr("width",N).attr("height",st);const{subGraphTitleTopMargin:Ue}=(0,ee.O)(Xt);if(tt.attr("transform",`translate(${ct.x-T.width/2}, ${ct.y-ct.height/2+Ue})`),Dt){const Sr=tt.select("span");Sr&&Sr.attr("style",Dt)}const br=Qt.node().getBBox();return ct.offsetX=0,ct.width=br.width,ct.height=br.height,ct.offsetY=T.height-ct.padding/2,ct.intersect=function(Sr){return Rr(ct,Sr)},{cluster:fe,labelBBox:T}});return function(d,ct){return Gt.apply(this,arguments)}}(),"kanbanSection"),X={rect:Or,squareRect:Or,roundedWithTitle:z,noteGroup:je,divider:(0,$.K2)((Gt,d)=>{const ct=(0,ut.D7)(),{themeVariables:Xt,handDrawnSeed:kt}=ct,{nodeBorder:vt}=Xt,ue=Gt.insert("g").attr("class",d.cssClasses).attr("id",d.id).attr("data-look",d.look),nt=ue.insert("g",":first-child"),Dt=0*d.padding,J=d.width+Dt;d.diff=-d.padding;const Z=d.height+Dt,Ot=d.x-J/2,fe=d.y-Z/2;let Le;if(d.width=J,"handDrawn"===d.look){const T=At.A.svg(ue).rectangle(Ot,fe,J,Z,{fill:"lightgrey",roughness:.5,strokeLineDash:[5],stroke:vt,seed:kt});Le=ue.insert(()=>T,":first-child")}else Le=nt.insert("rect",":first-child"),Le.attr("class","divider").attr("x",Ot).attr("y",fe).attr("width",J).attr("height",Z).attr("data-look",d.look);const tt=Le.node().getBBox();return d.height=tt.height,d.offsetX=0,d.offsetY=0,d.intersect=function(l){return Rr(d,l)},{cluster:ue,labelBBox:{}}},"divider"),kanbanSection:ft},ae=new Map,w=(0,$.K2)(function(){var Gt=(0,ot.A)(function*(d,ct){const Xt=ct.shape||"rect",kt=yield X[Xt](d,ct);return ae.set(ct.id,kt),kt});return function(d,ct){return Gt.apply(this,arguments)}}(),"insertCluster"),re=(0,$.K2)(()=>{ae=new Map},"clear");function It(Gt,d){return Gt.intersect(d)}(0,$.K2)(It,"intersectNode");var qt=It;function V(Gt,d,ct,Xt){var kt=Gt.x,vt=Gt.y,ue=kt-Xt.x,nt=vt-Xt.y,Dt=Math.sqrt(d*d*nt*nt+ct*ct*ue*ue),J=Math.abs(d*ct*ue/Dt);Xt.x<kt&&(J=-J);var Z=Math.abs(d*ct*nt/Dt);return Xt.y<vt&&(Z=-Z),{x:kt+J,y:vt+Z}}(0,$.K2)(V,"intersectEllipse");var pt=V;function H(Gt,d,ct){return pt(Gt,d,d,ct)}(0,$.K2)(H,"intersectCircle");var Nt=H;function St(Gt,d,ct,Xt){{const kt=d.y-Gt.y,vt=Gt.x-d.x,ue=d.x*Gt.y-Gt.x*d.y,nt=kt*ct.x+vt*ct.y+ue,Dt=kt*Xt.x+vt*Xt.y+ue,J=1e-6;if(0!==nt&&0!==Dt&&$t(nt,Dt))return;const Z=Xt.y-ct.y,Ot=ct.x-Xt.x,fe=Xt.x*ct.y-ct.x*Xt.y,Le=Z*Gt.x+Ot*Gt.y+fe,tt=Z*d.x+Ot*d.y+fe;if(Math.abs(Le)<J&&Math.abs(tt)<J&&$t(Le,tt))return;const l=kt*Ot-Z*vt;if(0===l)return;const T=Math.abs(l/2);let N=vt*fe-Ot*ue;const st=N<0?(N-T)/l:(N+T)/l;return N=Z*ue-kt*fe,{x:st,y:N<0?(N-T)/l:(N+T)/l}}}function $t(Gt,d){return Gt*d>0}(0,$.K2)(St,"intersectLine"),(0,$.K2)($t,"sameSign");var ye=St;function le(Gt,d,ct){let Xt=Gt.x,kt=Gt.y,vt=[],ue=Number.POSITIVE_INFINITY,nt=Number.POSITIVE_INFINITY;"function"==typeof d.forEach?d.forEach(function(Z){ue=Math.min(ue,Z.x),nt=Math.min(nt,Z.y)}):(ue=Math.min(ue,d.x),nt=Math.min(nt,d.y));let Dt=Xt-Gt.width/2-ue,J=kt-Gt.height/2-nt;for(let Z=0;Z<d.length;Z++){let Ot=d[Z],fe=d[Z<d.length-1?Z+1:0],Le=ye(Gt,ct,{x:Dt+Ot.x,y:J+Ot.y},{x:Dt+fe.x,y:J+fe.y});Le&&vt.push(Le)}return vt.length?(vt.length>1&&vt.sort(function(Z,Ot){let fe=Z.x-ct.x,Le=Z.y-ct.y,tt=Math.sqrt(fe*fe+Le*Le),l=Ot.x-ct.x,T=Ot.y-ct.y,N=Math.sqrt(l*l+T*T);return tt<N?-1:tt===N?0:1}),vt[0]):Gt}(0,$.K2)(le,"intersectPolygon");var oe={node:qt,circle:Nt,ellipse:pt,polygon:le,rect:Rr};function qe(Gt,d){const{labelStyles:ct}=(0,L.GX)(d);d.labelStyle=ct;const Xt=Rt(d);let kt=Xt;Xt||(kt="anchor");const vt=Gt.insert("g").attr("class",kt).attr("id",d.domId||d.id),{cssStyles:nt}=d,Dt=At.A.svg(vt),J=(0,L.Fr)(d,{fill:"black",stroke:"none",fillStyle:"solid"});"handDrawn"!==d.look&&(J.roughness=0);const Z=Dt.circle(0,0,2,J),Ot=vt.insert(()=>Z,":first-child");return Ot.attr("class","anchor").attr("style",(0,Pt.KL)(nt)),dt(d,Ot),d.intersect=function(fe){return $.Rm.info("Circle intersect",d,1,fe),oe.circle(d,1,fe)},vt}function ze(Gt,d,ct,Xt,kt,vt,ue){const Dt=(Gt+ct)/2,J=(d+Xt)/2,Z=Math.atan2(Xt-d,ct-Gt),l=Math.sqrt(((ct-Gt)/2/kt)**2+((Xt-d)/2/vt)**2);if(l>1)throw new Error("The given radii are too small to create an arc between the points.");const T=Math.sqrt(1-l**2),N=Dt+T*vt*Math.sin(Z)*(ue?-1:1),st=J-T*kt*Math.cos(Z)*(ue?-1:1),bt=Math.atan2((d-st)/vt,(Gt-N)/kt);let Qt=Math.atan2((Xt-st)/vt,(ct-N)/kt)-bt;ue&&Qt<0&&(Qt+=2*Math.PI),!ue&&Qt>0&&(Qt-=2*Math.PI);const Ue=[];for(let br=0;br<20;br++){const ta=bt+br/19*Qt,Ir=N+kt*Math.cos(ta),la=st+vt*Math.sin(ta);Ue.push({x:Ir,y:la})}return Ue}function Et(Gt,d){return Tt.apply(this,arguments)}function Tt(){return(Tt=(0,ot.A)(function*(Gt,d){const{labelStyles:ct,nodeStyles:Xt}=(0,L.GX)(d);d.labelStyle=ct;const{shapeSvg:kt,bbox:vt}=yield wt(Gt,d,Rt(d)),ue=vt.width+d.padding+20,nt=vt.height+d.padding,Dt=nt/2,J=Dt/(2.5+nt/50),{cssStyles:Z}=d,Ot=[{x:ue/2,y:-nt/2},{x:-ue/2,y:-nt/2},...ze(-ue/2,-nt/2,-ue/2,nt/2,J,Dt,!1),{x:ue/2,y:nt/2},...ze(ue/2,nt/2,ue/2,-nt/2,J,Dt,!0)],fe=At.A.svg(kt),Le=(0,L.Fr)(d,{});"handDrawn"!==d.look&&(Le.roughness=0,Le.fillStyle="solid");const tt=q(Ot),l=fe.path(tt,Le),T=kt.insert(()=>l,":first-child");return T.attr("class","basic label-container"),Z&&"handDrawn"!==d.look&&T.selectAll("path").attr("style",Z),Xt&&"handDrawn"!==d.look&&T.selectAll("path").attr("style",Xt),T.attr("transform",`translate(${J/2}, 0)`),dt(d,T),d.intersect=function(N){return oe.polygon(d,Ot,N)},kt})).apply(this,arguments)}function B(Gt,d,ct,Xt){return Gt.insert("polygon",":first-child").attr("points",Xt.map(function(kt){return kt.x+","+kt.y}).join(" ")).attr("class","label-container").attr("transform","translate("+-d/2+","+ct/2+")")}function F(Gt,d){return et.apply(this,arguments)}function et(){return(et=(0,ot.A)(function*(Gt,d){const{labelStyles:ct,nodeStyles:Xt}=(0,L.GX)(d);d.labelStyle=ct;const{shapeSvg:kt,bbox:vt}=yield wt(Gt,d,Rt(d)),ue=vt.height+d.padding,Dt=vt.width+d.padding+12,Ot=-ue,Le=[{x:12,y:Ot},{x:Dt,y:Ot},{x:Dt,y:0},{x:0,y:0},{x:0,y:Ot+12},{x:12,y:Ot}];let tt;const{cssStyles:l}=d;if("handDrawn"===d.look){const T=At.A.svg(kt),N=(0,L.Fr)(d,{}),st=q(Le),bt=T.path(st,N);tt=kt.insert(()=>bt,":first-child").attr("transform",`translate(${-Dt/2}, ${ue/2})`),l&&tt.attr("style",l)}else tt=B(kt,Dt,ue,Le);return Xt&&tt.attr("style",Xt),dt(d,tt),d.intersect=function(T){return oe.polygon(d,Le,T)},kt})).apply(this,arguments)}function mt(Gt,d){const{nodeStyles:ct}=(0,L.GX)(d);d.label="";const Xt=Gt.insert("g").attr("class",Rt(d)).attr("id",d.domId??d.id),{cssStyles:kt}=d,vt=Math.max(28,d.width??0),ue=[{x:0,y:vt/2},{x:vt/2,y:0},{x:0,y:-vt/2},{x:-vt/2,y:0}],nt=At.A.svg(Xt),Dt=(0,L.Fr)(d,{});"handDrawn"!==d.look&&(Dt.roughness=0,Dt.fillStyle="solid");const J=q(ue),Z=nt.path(J,Dt),Ot=Xt.insert(()=>Z,":first-child");return kt&&"handDrawn"!==d.look&&Ot.selectAll("path").attr("style",kt),ct&&"handDrawn"!==d.look&&Ot.selectAll("path").attr("style",ct),d.width=28,d.height=28,d.intersect=function(fe){return oe.polygon(d,ue,fe)},Xt}function it(Gt,d,ct){return rt.apply(this,arguments)}function rt(){return(rt=(0,ot.A)(function*(Gt,d,ct){const{labelStyles:Xt,nodeStyles:kt}=(0,L.GX)(d);d.labelStyle=Xt;const{shapeSvg:vt,bbox:ue,halfPadding:nt}=yield wt(Gt,d,Rt(d)),J=ue.width/2+(ct?.padding??nt);let Z;const{cssStyles:Ot}=d;if("handDrawn"===d.look){const fe=At.A.svg(vt),Le=(0,L.Fr)(d,{}),tt=fe.circle(0,0,2*J,Le);Z=vt.insert(()=>tt,":first-child"),Z.attr("class","basic label-container").attr("style",(0,Pt.KL)(Ot))}else Z=vt.insert("circle",":first-child").attr("class","basic label-container").attr("style",kt).attr("r",J).attr("cx",0).attr("cy",0);return dt(d,Z),d.calcIntersect=function(fe,Le){return oe.circle(fe,fe.width/2,Le)},d.intersect=function(fe){return $.Rm.info("Circle intersect",d,J,fe),oe.circle(d,J,fe)},vt})).apply(this,arguments)}function _t(Gt){const d=Math.cos(Math.PI/4),ct=Math.sin(Math.PI/4),Xt=2*Gt;return`M ${-Xt/2*d},${Xt/2*ct} L ${Xt/2*d},${-Xt/2*ct}\n                   M ${Xt/2*d},${Xt/2*ct} L ${-Xt/2*d},${-Xt/2*ct}`}function ht(Gt,d){const{labelStyles:ct,nodeStyles:Xt}=(0,L.GX)(d);d.labelStyle=ct,d.label="";const kt=Gt.insert("g").attr("class",Rt(d)).attr("id",d.domId??d.id),vt=Math.max(30,d?.width??0),{cssStyles:ue}=d,nt=At.A.svg(kt),Dt=(0,L.Fr)(d,{});"handDrawn"!==d.look&&(Dt.roughness=0,Dt.fillStyle="solid");const J=nt.circle(0,0,2*vt,Dt),Z=_t(vt),Ot=nt.path(Z,Dt),fe=kt.insert(()=>J,":first-child");return fe.insert(()=>Ot),ue&&"handDrawn"!==d.look&&fe.selectAll("path").attr("style",ue),Xt&&"handDrawn"!==d.look&&fe.selectAll("path").attr("style",Xt),dt(d,fe),d.intersect=function(Le){return $.Rm.info("crossedCircle intersect",d,{radius:vt,point:Le}),oe.circle(d,vt,Le)},kt}function Ft(Gt,d,ct,Xt=100,kt=0,vt=180){const ue=[],nt=kt*Math.PI/180,Z=(vt*Math.PI/180-nt)/(Xt-1);for(let Ot=0;Ot<Xt;Ot++){const fe=nt+Ot*Z,Le=Gt+ct*Math.cos(fe),tt=d+ct*Math.sin(fe);ue.push({x:-Le,y:-tt})}return ue}function G(Gt,d){return lt.apply(this,arguments)}function lt(){return(lt=(0,ot.A)(function*(Gt,d){const{labelStyles:ct,nodeStyles:Xt}=(0,L.GX)(d);d.labelStyle=ct;const{shapeSvg:kt,bbox:vt,label:ue}=yield wt(Gt,d,Rt(d)),nt=vt.width+(d.padding??0),Dt=vt.height+(d.padding??0),J=Math.max(5,.1*Dt),{cssStyles:Z}=d,Ot=[...Ft(nt/2,-Dt/2,J,30,-90,0),{x:-nt/2-J,y:J},...Ft(nt/2+2*J,-J,J,20,-180,-270),...Ft(nt/2+2*J,J,J,20,-90,-180),{x:-nt/2-J,y:-Dt/2},...Ft(nt/2,Dt/2,J,20,0,90)],fe=[{x:nt/2,y:-Dt/2-J},{x:-nt/2,y:-Dt/2-J},...Ft(nt/2,-Dt/2,J,20,-90,0),{x:-nt/2-J,y:-J},...Ft(nt/2+.1*nt,-J,J,20,-180,-270),...Ft(nt/2+.1*nt,J,J,20,-90,-180),{x:-nt/2-J,y:Dt/2},...Ft(nt/2,Dt/2,J,20,0,90),{x:-nt/2,y:Dt/2+J},{x:nt/2,y:Dt/2+J}],Le=At.A.svg(kt),tt=(0,L.Fr)(d,{fill:"none"});"handDrawn"!==d.look&&(tt.roughness=0,tt.fillStyle="solid");const T=q(Ot).replace("Z",""),N=Le.path(T,tt),st=q(fe),bt=Le.path(st,{...tt}),Ie=kt.insert("g",":first-child");return Ie.insert(()=>bt,":first-child").attr("stroke-opacity",0),Ie.insert(()=>N,":first-child"),Ie.attr("class","text"),Z&&"handDrawn"!==d.look&&Ie.selectAll("path").attr("style",Z),Xt&&"handDrawn"!==d.look&&Ie.selectAll("path").attr("style",Xt),Ie.attr("transform",`translate(${J}, 0)`),ue.attr("transform",`translate(${-nt/2+J-(vt.x-(vt.left??0))},${-Dt/2+(d.padding??0)/2-(vt.y-(vt.top??0))})`),dt(d,Ie),d.intersect=function(Qt){return oe.polygon(d,fe,Qt)},kt})).apply(this,arguments)}function ke(Gt,d,ct,Xt=100,kt=0,vt=180){const ue=[],nt=kt*Math.PI/180,Z=(vt*Math.PI/180-nt)/(Xt-1);for(let Ot=0;Ot<Xt;Ot++){const fe=nt+Ot*Z,Le=Gt+ct*Math.cos(fe),tt=d+ct*Math.sin(fe);ue.push({x:Le,y:tt})}return ue}function Mt(Gt,d){return Zt.apply(this,arguments)}function Zt(){return(Zt=(0,ot.A)(function*(Gt,d){const{labelStyles:ct,nodeStyles:Xt}=(0,L.GX)(d);d.labelStyle=ct;const{shapeSvg:kt,bbox:vt,label:ue}=yield wt(Gt,d,Rt(d)),nt=vt.width+(d.padding??0),Dt=vt.height+(d.padding??0),J=Math.max(5,.1*Dt),{cssStyles:Z}=d,Ot=[...ke(nt/2,-Dt/2,J,20,-90,0),{x:nt/2+J,y:-J},...ke(nt/2+2*J,-J,J,20,-180,-270),...ke(nt/2+2*J,J,J,20,-90,-180),{x:nt/2+J,y:Dt/2},...ke(nt/2,Dt/2,J,20,0,90)],fe=[{x:-nt/2,y:-Dt/2-J},{x:nt/2,y:-Dt/2-J},...ke(nt/2,-Dt/2,J,20,-90,0),{x:nt/2+J,y:-J},...ke(nt/2+2*J,-J,J,20,-180,-270),...ke(nt/2+2*J,J,J,20,-90,-180),{x:nt/2+J,y:Dt/2},...ke(nt/2,Dt/2,J,20,0,90),{x:nt/2,y:Dt/2+J},{x:-nt/2,y:Dt/2+J}],Le=At.A.svg(kt),tt=(0,L.Fr)(d,{fill:"none"});"handDrawn"!==d.look&&(tt.roughness=0,tt.fillStyle="solid");const T=q(Ot).replace("Z",""),N=Le.path(T,tt),st=q(fe),bt=Le.path(st,{...tt}),Ie=kt.insert("g",":first-child");return Ie.insert(()=>bt,":first-child").attr("stroke-opacity",0),Ie.insert(()=>N,":first-child"),Ie.attr("class","text"),Z&&"handDrawn"!==d.look&&Ie.selectAll("path").attr("style",Z),Xt&&"handDrawn"!==d.look&&Ie.selectAll("path").attr("style",Xt),Ie.attr("transform",`translate(${-J}, 0)`),ue.attr("transform",`translate(${-nt/2+(d.padding??0)/2-(vt.x-(vt.left??0))},${-Dt/2+(d.padding??0)/2-(vt.y-(vt.top??0))})`),dt(d,Ie),d.intersect=function(Qt){return oe.polygon(d,fe,Qt)},kt})).apply(this,arguments)}function pe(Gt,d,ct,Xt=100,kt=0,vt=180){const ue=[],nt=kt*Math.PI/180,Z=(vt*Math.PI/180-nt)/(Xt-1);for(let Ot=0;Ot<Xt;Ot++){const fe=nt+Ot*Z,Le=Gt+ct*Math.cos(fe),tt=d+ct*Math.sin(fe);ue.push({x:-Le,y:-tt})}return ue}function Re(Gt,d){return Ze.apply(this,arguments)}function Ze(){return(Ze=(0,ot.A)(function*(Gt,d){const{labelStyles:ct,nodeStyles:Xt}=(0,L.GX)(d);d.labelStyle=ct;const{shapeSvg:kt,bbox:vt,label:ue}=yield wt(Gt,d,Rt(d)),nt=vt.width+(d.padding??0),Dt=vt.height+(d.padding??0),J=Math.max(5,.1*Dt),{cssStyles:Z}=d,Ot=[...pe(nt/2,-Dt/2,J,30,-90,0),{x:-nt/2-J,y:J},...pe(nt/2+2*J,-J,J,20,-180,-270),...pe(nt/2+2*J,J,J,20,-90,-180),{x:-nt/2-J,y:-Dt/2},...pe(nt/2,Dt/2,J,20,0,90)],fe=[...pe(-nt/2+J+J/2,-Dt/2,J,20,-90,-180),{x:nt/2-J/2,y:J},...pe(-nt/2-J/2,-J,J,20,0,90),...pe(-nt/2-J/2,J,J,20,-90,0),{x:nt/2-J/2,y:-J},...pe(-nt/2+J+J/2,Dt/2,J,30,-180,-270)],Le=[{x:nt/2,y:-Dt/2-J},{x:-nt/2,y:-Dt/2-J},...pe(nt/2,-Dt/2,J,20,-90,0),{x:-nt/2-J,y:-J},...pe(nt/2+2*J,-J,J,20,-180,-270),...pe(nt/2+2*J,J,J,20,-90,-180),{x:-nt/2-J,y:Dt/2},...pe(nt/2,Dt/2,J,20,0,90),{x:-nt/2,y:Dt/2+J},{x:nt/2-J-J/2,y:Dt/2+J},...pe(-nt/2+J+J/2,-Dt/2,J,20,-90,-180),{x:nt/2-J/2,y:J},...pe(-nt/2-J/2,-J,J,20,0,90),...pe(-nt/2-J/2,J,J,20,-90,0),{x:nt/2-J/2,y:-J},...pe(-nt/2+J+J/2,Dt/2,J,30,-180,-270)],tt=At.A.svg(kt),l=(0,L.Fr)(d,{fill:"none"});"handDrawn"!==d.look&&(l.roughness=0,l.fillStyle="solid");const N=q(Ot).replace("Z",""),st=tt.path(N,l),Ie=q(fe).replace("Z",""),Qt=tt.path(Ie,l),Ue=q(Le),br=tt.path(Ue,{...l}),Sr=kt.insert("g",":first-child");return Sr.insert(()=>br,":first-child").attr("stroke-opacity",0),Sr.insert(()=>st,":first-child"),Sr.insert(()=>Qt,":first-child"),Sr.attr("class","text"),Z&&"handDrawn"!==d.look&&Sr.selectAll("path").attr("style",Z),Xt&&"handDrawn"!==d.look&&Sr.selectAll("path").attr("style",Xt),Sr.attr("transform",`translate(${J-J/4}, 0)`),ue.attr("transform",`translate(${-nt/2+(d.padding??0)/2-(vt.x-(vt.left??0))},${-Dt/2+(d.padding??0)/2-(vt.y-(vt.top??0))})`),dt(d,Sr),d.intersect=function(ta){return oe.polygon(d,Le,ta)},kt})).apply(this,arguments)}function de(Gt,d){return mr.apply(this,arguments)}function mr(){return(mr=(0,ot.A)(function*(Gt,d){const{labelStyles:ct,nodeStyles:Xt}=(0,L.GX)(d);d.labelStyle=ct;const{shapeSvg:kt,bbox:vt}=yield wt(Gt,d,Rt(d)),Dt=Math.max(80,1.25*(vt.width+2*(d.padding??0)),d?.width??0),J=Math.max(20,vt.height+2*(d.padding??0),d?.height??0),Z=J/2,{cssStyles:Ot}=d,fe=At.A.svg(kt),Le=(0,L.Fr)(d,{});"handDrawn"!==d.look&&(Le.roughness=0,Le.fillStyle="solid");const T=Dt-Z,N=J/4,st=[{x:T,y:0},{x:N,y:0},{x:0,y:J/2},{x:N,y:J},{x:T,y:J},...Ke(-T,-J/2,Z,50,270,90)],bt=q(st),Ie=fe.path(bt,Le),Qt=kt.insert(()=>Ie,":first-child");return Qt.attr("class","basic label-container"),Ot&&"handDrawn"!==d.look&&Qt.selectChildren("path").attr("style",Ot),Xt&&"handDrawn"!==d.look&&Qt.selectChildren("path").attr("style",Xt),Qt.attr("transform",`translate(${-Dt/2}, ${-J/2})`),dt(d,Qt),d.intersect=function(Ue){return oe.polygon(d,st,Ue)},kt})).apply(this,arguments)}(0,$.K2)(qe,"anchor"),(0,$.K2)(ze,"generateArcPoints"),(0,$.K2)(Et,"bowTieRect"),(0,$.K2)(B,"insertPolygonShape"),(0,$.K2)(F,"card"),(0,$.K2)(mt,"choice"),(0,$.K2)(it,"circle"),(0,$.K2)(_t,"createLine"),(0,$.K2)(ht,"crossedCircle"),(0,$.K2)(Ft,"generateCirclePoints"),(0,$.K2)(G,"curlyBraceLeft"),(0,$.K2)(ke,"generateCirclePoints"),(0,$.K2)(Mt,"curlyBraceRight"),(0,$.K2)(pe,"generateCirclePoints"),(0,$.K2)(Re,"curlyBraces"),(0,$.K2)(de,"curvedTrapezoid");var xr=(0,$.K2)((Gt,d,ct,Xt,kt,vt)=>[`M${Gt},${d+vt}`,`a${kt},${vt} 0,0,0 ${ct},0`,`a${kt},${vt} 0,0,0 ${-ct},0`,`l0,${Xt}`,`a${kt},${vt} 0,0,0 ${ct},0`,"l0,"+-Xt].join(" "),"createCylinderPathD"),zt=(0,$.K2)((Gt,d,ct,Xt,kt,vt)=>[`M${Gt},${d+vt}`,`M${Gt+ct},${d+vt}`,`a${kt},${vt} 0,0,0 ${-ct},0`,`l0,${Xt}`,`a${kt},${vt} 0,0,0 ${ct},0`,"l0,"+-Xt].join(" "),"createOuterCylinderPathD"),Ae=(0,$.K2)((Gt,d,ct,Xt,kt,vt)=>[`M${Gt-ct/2},${-Xt/2}`,`a${kt},${vt} 0,0,0 ${ct},0`].join(" "),"createInnerCylinderPathD");function or(Gt,d){return ve.apply(this,arguments)}function ve(){return(ve=(0,ot.A)(function*(Gt,d){const{labelStyles:ct,nodeStyles:Xt}=(0,L.GX)(d);d.labelStyle=ct;const{shapeSvg:kt,bbox:vt,label:ue}=yield wt(Gt,d,Rt(d)),nt=Math.max(vt.width+d.padding,d.width??0),Dt=nt/2,J=Dt/(2.5+nt/50),Z=Math.max(vt.height+J+d.padding,d.height??0);let Ot;const{cssStyles:fe}=d;if("handDrawn"===d.look){const Le=At.A.svg(kt),tt=zt(0,0,nt,Z,Dt,J),l=Ae(0,J,nt,Z,Dt,J),T=Le.path(tt,(0,L.Fr)(d,{})),N=Le.path(l,(0,L.Fr)(d,{fill:"none"}));Ot=kt.insert(()=>N,":first-child"),Ot=kt.insert(()=>T,":first-child"),Ot.attr("class","basic label-container"),fe&&Ot.attr("style",fe)}else{const Le=xr(0,0,nt,Z,Dt,J);Ot=kt.insert("path",":first-child").attr("d",Le).attr("class","basic label-container").attr("style",(0,Pt.KL)(fe)).attr("style",Xt)}return Ot.attr("label-offset-y",J),Ot.attr("transform",`translate(${-nt/2}, ${-(Z/2+J)})`),dt(d,Ot),ue.attr("transform",`translate(${-vt.width/2-(vt.x-(vt.left??0))}, ${-vt.height/2+(d.padding??0)/1.5-(vt.y-(vt.top??0))})`),d.intersect=function(Le){const tt=oe.rect(d,Le),l=tt.x-(d.x??0);if(0!=Dt&&(Math.abs(l)<(d.width??0)/2||Math.abs(l)==(d.width??0)/2&&Math.abs(tt.y-(d.y??0))>(d.height??0)/2-J)){let T=J*J*(1-l*l/(Dt*Dt));T>0&&(T=Math.sqrt(T)),T=J-T,Le.y-(d.y??0)>0&&(T=-T),tt.y+=T}return tt},kt})).apply(this,arguments)}function ce(Gt,d){return Ee.apply(this,arguments)}function Ee(){return(Ee=(0,ot.A)(function*(Gt,d){const{labelStyles:ct,nodeStyles:Xt}=(0,L.GX)(d);d.labelStyle=ct;const{shapeSvg:kt,bbox:vt,label:ue}=yield wt(Gt,d,Rt(d)),Dt=vt.height+d.padding,J=.2*Dt,Z=-(vt.width+d.padding)/2,Ot=-Dt/2-J/2,{cssStyles:fe}=d,Le=At.A.svg(kt),tt=(0,L.Fr)(d,{});"handDrawn"!==d.look&&(tt.roughness=0,tt.fillStyle="solid");const T=Le.polygon([{x:Z,y:Ot+J},{x:-Z,y:Ot+J},{x:-Z,y:-Ot},{x:Z,y:-Ot},{x:Z,y:Ot},{x:-Z,y:Ot},{x:-Z,y:Ot+J}].map(st=>[st.x,st.y]),tt),N=kt.insert(()=>T,":first-child");return N.attr("class","basic label-container"),fe&&"handDrawn"!==d.look&&N.selectAll("path").attr("style",fe),Xt&&"handDrawn"!==d.look&&N.selectAll("path").attr("style",Xt),ue.attr("transform",`translate(${Z+(d.padding??0)/2-(vt.x-(vt.left??0))}, ${Ot+J+(d.padding??0)/2-(vt.y-(vt.top??0))})`),dt(d,N),d.intersect=function(st){return oe.rect(d,st)},kt})).apply(this,arguments)}function De(Gt,d){return er.apply(this,arguments)}function er(){return(er=(0,ot.A)(function*(Gt,d){const{labelStyles:ct,nodeStyles:Xt}=(0,L.GX)(d);d.labelStyle=ct;const{shapeSvg:kt,bbox:vt,halfPadding:ue}=yield wt(Gt,d,Rt(d)),Dt=vt.width/2+ue+5,J=vt.width/2+ue;let Z;const{cssStyles:Ot}=d;if("handDrawn"===d.look){const fe=At.A.svg(kt),Le=(0,L.Fr)(d,{roughness:.2,strokeWidth:2.5}),tt=(0,L.Fr)(d,{roughness:.2,strokeWidth:1.5}),l=fe.circle(0,0,2*Dt,Le),T=fe.circle(0,0,2*J,tt);Z=kt.insert("g",":first-child"),Z.attr("class",(0,Pt.KL)(d.cssClasses)).attr("style",(0,Pt.KL)(Ot)),Z.node()?.appendChild(l),Z.node()?.appendChild(T)}else{Z=kt.insert("g",":first-child");const fe=Z.insert("circle",":first-child"),Le=Z.insert("circle");Z.attr("class","basic label-container").attr("style",Xt),fe.attr("class","outer-circle").attr("style",Xt).attr("r",Dt).attr("cx",0).attr("cy",0),Le.attr("class","inner-circle").attr("style",Xt).attr("r",J).attr("cx",0).attr("cy",0)}return dt(d,Z),d.intersect=function(fe){return $.Rm.info("DoubleCircle intersect",d,Dt,fe),oe.circle(d,Dt,fe)},kt})).apply(this,arguments)}function Qe(Gt,d,{config:{themeVariables:ct}}){const{labelStyles:Xt,nodeStyles:kt}=(0,L.GX)(d);d.label="",d.labelStyle=Xt;const vt=Gt.insert("g").attr("class",Rt(d)).attr("id",d.domId??d.id),{cssStyles:nt}=d,Dt=At.A.svg(vt),{nodeBorder:J}=ct,Z=(0,L.Fr)(d,{fillStyle:"solid"});"handDrawn"!==d.look&&(Z.roughness=0);const Ot=Dt.circle(0,0,14,Z),fe=vt.insert(()=>Ot,":first-child");return fe.selectAll("path").attr("style",`fill: ${J} !important;`),nt&&nt.length>0&&"handDrawn"!==d.look&&fe.selectAll("path").attr("style",nt),kt&&"handDrawn"!==d.look&&fe.selectAll("path").attr("style",kt),dt(d,fe),d.intersect=function(Le){return $.Rm.info("filledCircle intersect",d,{radius:7,point:Le}),oe.circle(d,7,Le)},vt}function Lr(Gt,d){return _e.apply(this,arguments)}function _e(){return(_e=(0,ot.A)(function*(Gt,d){const{labelStyles:ct,nodeStyles:Xt}=(0,L.GX)(d);d.labelStyle=ct;const{shapeSvg:kt,bbox:vt,label:ue}=yield wt(Gt,d,Rt(d)),nt=vt.width+(d.padding??0),Dt=nt+vt.height,J=nt+vt.height,Z=[{x:0,y:-Dt},{x:J,y:-Dt},{x:J/2,y:0}],{cssStyles:Ot}=d,fe=At.A.svg(kt),Le=(0,L.Fr)(d,{});"handDrawn"!==d.look&&(Le.roughness=0,Le.fillStyle="solid");const tt=q(Z),l=fe.path(tt,Le),T=kt.insert(()=>l,":first-child").attr("transform",`translate(${-Dt/2}, ${Dt/2})`);return Ot&&"handDrawn"!==d.look&&T.selectChildren("path").attr("style",Ot),Xt&&"handDrawn"!==d.look&&T.selectChildren("path").attr("style",Xt),d.width=nt,d.height=Dt,dt(d,T),ue.attr("transform",`translate(${-vt.width/2-(vt.x-(vt.left??0))}, ${-Dt/2+(d.padding??0)/2+(vt.y-(vt.top??0))})`),d.intersect=function(N){return $.Rm.info("Triangle intersect",d,Z,N),oe.polygon(d,Z,N)},kt})).apply(this,arguments)}function Hr(Gt,d,{dir:ct,config:{state:Xt,themeVariables:kt}}){const{nodeStyles:vt}=(0,L.GX)(d);d.label="";const ue=Gt.insert("g").attr("class",Rt(d)).attr("id",d.domId??d.id),{cssStyles:nt}=d;let Dt=Math.max(70,d?.width??0),J=Math.max(10,d?.height??0);"LR"===ct&&(Dt=Math.max(10,d?.width??0),J=Math.max(70,d?.height??0));const Z=-1*Dt/2,Ot=-1*J/2,fe=At.A.svg(ue),Le=(0,L.Fr)(d,{stroke:kt.lineColor,fill:kt.lineColor});"handDrawn"!==d.look&&(Le.roughness=0,Le.fillStyle="solid");const tt=fe.rectangle(Z,Ot,Dt,J,Le),l=ue.insert(()=>tt,":first-child");nt&&"handDrawn"!==d.look&&l.selectAll("path").attr("style",nt),vt&&"handDrawn"!==d.look&&l.selectAll("path").attr("style",vt),dt(d,l);const T=Xt?.padding??0;return d.width&&d.height&&(d.width+=T/2||0,d.height+=T/2||0),d.intersect=function(N){return oe.rect(d,N)},ue}function sr(Gt,d){return te.apply(this,arguments)}function te(){return(te=(0,ot.A)(function*(Gt,d){const{labelStyles:ct,nodeStyles:Xt}=(0,L.GX)(d);d.labelStyle=ct;const{shapeSvg:ue,bbox:nt}=yield wt(Gt,d,Rt(d)),Dt=Math.max(80,nt.width+2*(d.padding??0),d?.width??0),J=Math.max(50,nt.height+2*(d.padding??0),d?.height??0),Z=J/2,{cssStyles:Ot}=d,fe=At.A.svg(ue),Le=(0,L.Fr)(d,{});"handDrawn"!==d.look&&(Le.roughness=0,Le.fillStyle="solid");const tt=[{x:-Dt/2,y:-J/2},{x:Dt/2-Z,y:-J/2},...Ke(-Dt/2+Z,0,Z,50,90,270),{x:Dt/2-Z,y:J/2},{x:-Dt/2,y:J/2}],l=q(tt),T=fe.path(l,Le),N=ue.insert(()=>T,":first-child");return N.attr("class","basic label-container"),Ot&&"handDrawn"!==d.look&&N.selectChildren("path").attr("style",Ot),Xt&&"handDrawn"!==d.look&&N.selectChildren("path").attr("style",Xt),dt(d,N),d.intersect=function(st){return $.Rm.info("Pill intersect",d,{radius:Z,point:st}),oe.polygon(d,tt,st)},ue})).apply(this,arguments)}function ne(Gt,d){return be.apply(this,arguments)}function be(){return(be=(0,ot.A)(function*(Gt,d){const{labelStyles:ct,nodeStyles:Xt}=(0,L.GX)(d);d.labelStyle=ct;const{shapeSvg:kt,bbox:vt}=yield wt(Gt,d,Rt(d)),ue=vt.height+(d.padding??0),nt=vt.width+2.5*(d.padding??0),{cssStyles:Dt}=d,J=At.A.svg(kt),Z=(0,L.Fr)(d,{});"handDrawn"!==d.look&&(Z.roughness=0,Z.fillStyle="solid");let Ot=nt/2;Ot+=Ot/6;const Le=ue/2,l=Ot-Le/2,T=[{x:-l,y:-Le},{x:0,y:-Le},{x:l,y:-Le},{x:Ot,y:0},{x:l,y:Le},{x:0,y:Le},{x:-l,y:Le},{x:-Ot,y:0}],N=q(T),st=J.path(N,Z),bt=kt.insert(()=>st,":first-child");return bt.attr("class","basic label-container"),Dt&&"handDrawn"!==d.look&&bt.selectChildren("path").attr("style",Dt),Xt&&"handDrawn"!==d.look&&bt.selectChildren("path").attr("style",Xt),d.width=nt,d.height=ue,dt(d,bt),d.intersect=function(Ie){return oe.polygon(d,T,Ie)},kt})).apply(this,arguments)}function ir(Gt,d){return g.apply(this,arguments)}function g(){return(g=(0,ot.A)(function*(Gt,d){const{labelStyles:ct,nodeStyles:Xt}=(0,L.GX)(d);d.label="",d.labelStyle=ct;const{shapeSvg:kt}=yield wt(Gt,d,Rt(d)),vt=Math.max(30,d?.width??0),ue=Math.max(30,d?.height??0),{cssStyles:nt}=d,Dt=At.A.svg(kt),J=(0,L.Fr)(d,{});"handDrawn"!==d.look&&(J.roughness=0,J.fillStyle="solid");const Z=[{x:0,y:0},{x:vt,y:0},{x:0,y:ue},{x:vt,y:ue}],Ot=q(Z),fe=Dt.path(Ot,J),Le=kt.insert(()=>fe,":first-child");return Le.attr("class","basic label-container"),nt&&"handDrawn"!==d.look&&Le.selectChildren("path").attr("style",nt),Xt&&"handDrawn"!==d.look&&Le.selectChildren("path").attr("style",Xt),Le.attr("transform",`translate(${-vt/2}, ${-ue/2})`),dt(d,Le),d.intersect=function(tt){return $.Rm.info("Pill intersect",d,{points:Z}),oe.polygon(d,Z,tt)},kt})).apply(this,arguments)}function y(Gt,d,ct){return E.apply(this,arguments)}function E(){return(E=(0,ot.A)(function*(Gt,d,{config:{themeVariables:ct,flowchart:Xt}}){const{labelStyles:kt}=(0,L.GX)(d);d.labelStyle=kt;const nt=Math.max(d.assetHeight??48,d.assetWidth??48),Dt=Xt?.wrappingWidth;d.width=Math.max(nt,Dt??0);const{shapeSvg:J,bbox:Z,label:Ot}=yield wt(Gt,d,"icon-shape default"),fe="t"===d.pos,Le=nt,tt=nt,{nodeBorder:l}=ct,{stylesMap:T}=(0,L.WW)(d),N=-tt/2,st=-Le/2,bt=d.label?8:0,Ie=At.A.svg(J),Qt=(0,L.Fr)(d,{stroke:"none",fill:"none"});"handDrawn"!==d.look&&(Qt.roughness=0,Qt.fillStyle="solid");const Ue=Ie.rectangle(N,st,tt,Le,Qt),br=Math.max(tt,Z.width),Sr=Le+Z.height+bt,ta=Ie.rectangle(-br/2,-Sr/2,br,Sr,{...Qt,fill:"transparent",stroke:"none"}),Ir=J.insert(()=>Ue,":first-child"),la=J.insert(()=>ta);if(d.icon){const Ca=J.append("g");Ca.html(`<g>${yield(0,S.WY)(d.icon,{height:nt,width:nt,fallbackPrefix:""})}</g>`);const ka=Ca.node().getBBox(),Xa=ka.height,Na=ka.y;Ca.attr("transform",`translate(${-ka.width/2-ka.x},${fe?Z.height/2+bt/2-Xa/2-Na:-Z.height/2-bt/2-Xa/2-Na})`),Ca.attr("style",`color: ${T.get("stroke")??l};`)}return Ot.attr("transform",`translate(${-Z.width/2-(Z.x-(Z.left??0))},${fe?-Sr/2:Sr/2-Z.height})`),Ir.attr("transform",`translate(0,${fe?Z.height/2+bt/2:-Z.height/2-bt/2})`),dt(d,la),d.intersect=function(Ca){if($.Rm.info("iconSquare intersect",d,Ca),!d.label)return oe.rect(d,Ca);const ka=d.x??0,Ba=d.y??0,Xa=d.height??0;let za=[];return za=fe?[{x:ka-Z.width/2,y:Ba-Xa/2},{x:ka+Z.width/2,y:Ba-Xa/2},{x:ka+Z.width/2,y:Ba-Xa/2+Z.height+bt},{x:ka+tt/2,y:Ba-Xa/2+Z.height+bt},{x:ka+tt/2,y:Ba+Xa/2},{x:ka-tt/2,y:Ba+Xa/2},{x:ka-tt/2,y:Ba-Xa/2+Z.height+bt},{x:ka-Z.width/2,y:Ba-Xa/2+Z.height+bt}]:[{x:ka-tt/2,y:Ba-Xa/2},{x:ka+tt/2,y:Ba-Xa/2},{x:ka+tt/2,y:Ba-Xa/2+Le},{x:ka+Z.width/2,y:Ba-Xa/2+Le},{x:ka+Z.width/2/2,y:Ba+Xa/2},{x:ka-Z.width/2,y:Ba+Xa/2},{x:ka-Z.width/2,y:Ba-Xa/2+Le},{x:ka-tt/2,y:Ba-Xa/2+Le}],oe.polygon(d,za,Ca)},J})).apply(this,arguments)}function I(Gt,d,ct){return m.apply(this,arguments)}function m(){return(m=(0,ot.A)(function*(Gt,d,{config:{themeVariables:ct,flowchart:Xt}}){const{labelStyles:kt}=(0,L.GX)(d);d.labelStyle=kt;const nt=Math.max(d.assetHeight??48,d.assetWidth??48),Dt=Xt?.wrappingWidth;d.width=Math.max(nt,Dt??0);const{shapeSvg:J,bbox:Z,label:Ot}=yield wt(Gt,d,"icon-shape default"),Le=d.label?8:0,tt="t"===d.pos,{nodeBorder:l,mainBkg:T}=ct,{stylesMap:N}=(0,L.WW)(d),st=At.A.svg(J),bt=(0,L.Fr)(d,{});"handDrawn"!==d.look&&(bt.roughness=0,bt.fillStyle="solid");const Ie=N.get("fill");bt.stroke=Ie??T;const Qt=J.append("g");d.icon&&Qt.html(`<g>${yield(0,S.WY)(d.icon,{height:nt,width:nt,fallbackPrefix:""})}</g>`);const Ue=Qt.node().getBBox(),br=Ue.width,Sr=Ue.height,ta=Ue.x,Ir=Ue.y,la=Math.max(br,Sr)*Math.SQRT2+40,Ca=st.circle(0,0,la,bt),ka=Math.max(la,Z.width),Ba=la+Z.height+Le,Xa=st.rectangle(-ka/2,-Ba/2,ka,Ba,{...bt,fill:"transparent",stroke:"none"}),za=J.insert(()=>Ca,":first-child"),Na=J.insert(()=>Xa);return Qt.attr("transform",`translate(${-br/2-ta},${tt?Z.height/2+Le/2-Sr/2-Ir:-Z.height/2-Le/2-Sr/2-Ir})`),Qt.attr("style",`color: ${N.get("stroke")??l};`),Ot.attr("transform",`translate(${-Z.width/2-(Z.x-(Z.left??0))},${tt?-Ba/2:Ba/2-Z.height})`),za.attr("transform",`translate(0,${tt?Z.height/2+Le/2:-Z.height/2-Le/2})`),dt(d,Na),d.intersect=function(ui){return $.Rm.info("iconSquare intersect",d,ui),oe.rect(d,ui)},J})).apply(this,arguments)}function D(Gt,d,ct){return v.apply(this,arguments)}function v(){return(v=(0,ot.A)(function*(Gt,d,{config:{themeVariables:ct,flowchart:Xt}}){const{labelStyles:kt}=(0,L.GX)(d);d.labelStyle=kt;const nt=Math.max(d.assetHeight??48,d.assetWidth??48),Dt=Xt?.wrappingWidth;d.width=Math.max(nt,Dt??0);const{shapeSvg:J,bbox:Z,halfPadding:Ot,label:fe}=yield wt(Gt,d,"icon-shape default"),Le="t"===d.pos,tt=nt+2*Ot,l=nt+2*Ot,{nodeBorder:T,mainBkg:N}=ct,{stylesMap:st}=(0,L.WW)(d),bt=-l/2,Ie=-tt/2,Qt=d.label?8:0,Ue=At.A.svg(J),br=(0,L.Fr)(d,{});"handDrawn"!==d.look&&(br.roughness=0,br.fillStyle="solid");const Sr=st.get("fill");br.stroke=Sr??N;const ta=Ue.path(Se(bt,Ie,l,tt,5),br),Ir=Math.max(l,Z.width),la=tt+Z.height+Qt,Ca=Ue.rectangle(-Ir/2,-la/2,Ir,la,{...br,fill:"transparent",stroke:"none"}),ka=J.insert(()=>ta,":first-child").attr("class","icon-shape2"),Ba=J.insert(()=>Ca);if(d.icon){const Xa=J.append("g");Xa.html(`<g>${yield(0,S.WY)(d.icon,{height:nt,width:nt,fallbackPrefix:""})}</g>`);const za=Xa.node().getBBox(),ui=za.height,$n=za.y;Xa.attr("transform",`translate(${-za.width/2-za.x},${Le?Z.height/2+Qt/2-ui/2-$n:-Z.height/2-Qt/2-ui/2-$n})`),Xa.attr("style",`color: ${st.get("stroke")??T};`)}return fe.attr("transform",`translate(${-Z.width/2-(Z.x-(Z.left??0))},${Le?-la/2:la/2-Z.height})`),ka.attr("transform",`translate(0,${Le?Z.height/2+Qt/2:-Z.height/2-Qt/2})`),dt(d,Ba),d.intersect=function(Xa){if($.Rm.info("iconSquare intersect",d,Xa),!d.label)return oe.rect(d,Xa);const za=d.x??0,Na=d.y??0,ui=d.height??0;let ji=[];return ji=Le?[{x:za-Z.width/2,y:Na-ui/2},{x:za+Z.width/2,y:Na-ui/2},{x:za+Z.width/2,y:Na-ui/2+Z.height+Qt},{x:za+l/2,y:Na-ui/2+Z.height+Qt},{x:za+l/2,y:Na+ui/2},{x:za-l/2,y:Na+ui/2},{x:za-l/2,y:Na-ui/2+Z.height+Qt},{x:za-Z.width/2,y:Na-ui/2+Z.height+Qt}]:[{x:za-l/2,y:Na-ui/2},{x:za+l/2,y:Na-ui/2},{x:za+l/2,y:Na-ui/2+tt},{x:za+Z.width/2,y:Na-ui/2+tt},{x:za+Z.width/2/2,y:Na+ui/2},{x:za-Z.width/2,y:Na+ui/2},{x:za-Z.width/2,y:Na-ui/2+tt},{x:za-l/2,y:Na-ui/2+tt}],oe.polygon(d,ji,Xa)},J})).apply(this,arguments)}function b(Gt,d,ct){return C.apply(this,arguments)}function C(){return(C=(0,ot.A)(function*(Gt,d,{config:{themeVariables:ct,flowchart:Xt}}){const{labelStyles:kt}=(0,L.GX)(d);d.labelStyle=kt;const nt=Math.max(d.assetHeight??48,d.assetWidth??48),Dt=Xt?.wrappingWidth;d.width=Math.max(nt,Dt??0);const{shapeSvg:J,bbox:Z,halfPadding:Ot,label:fe}=yield wt(Gt,d,"icon-shape default"),Le="t"===d.pos,tt=nt+2*Ot,l=nt+2*Ot,{nodeBorder:T,mainBkg:N}=ct,{stylesMap:st}=(0,L.WW)(d),bt=-l/2,Ie=-tt/2,Qt=d.label?8:0,Ue=At.A.svg(J),br=(0,L.Fr)(d,{});"handDrawn"!==d.look&&(br.roughness=0,br.fillStyle="solid");const Sr=st.get("fill");br.stroke=Sr??N;const ta=Ue.path(Se(bt,Ie,l,tt,.1),br),Ir=Math.max(l,Z.width),la=tt+Z.height+Qt,Ca=Ue.rectangle(-Ir/2,-la/2,Ir,la,{...br,fill:"transparent",stroke:"none"}),ka=J.insert(()=>ta,":first-child"),Ba=J.insert(()=>Ca);if(d.icon){const Xa=J.append("g");Xa.html(`<g>${yield(0,S.WY)(d.icon,{height:nt,width:nt,fallbackPrefix:""})}</g>`);const za=Xa.node().getBBox(),ui=za.height,$n=za.y;Xa.attr("transform",`translate(${-za.width/2-za.x},${Le?Z.height/2+Qt/2-ui/2-$n:-Z.height/2-Qt/2-ui/2-$n})`),Xa.attr("style",`color: ${st.get("stroke")??T};`)}return fe.attr("transform",`translate(${-Z.width/2-(Z.x-(Z.left??0))},${Le?-la/2:la/2-Z.height})`),ka.attr("transform",`translate(0,${Le?Z.height/2+Qt/2:-Z.height/2-Qt/2})`),dt(d,Ba),d.intersect=function(Xa){if($.Rm.info("iconSquare intersect",d,Xa),!d.label)return oe.rect(d,Xa);const za=d.x??0,Na=d.y??0,ui=d.height??0;let ji=[];return ji=Le?[{x:za-Z.width/2,y:Na-ui/2},{x:za+Z.width/2,y:Na-ui/2},{x:za+Z.width/2,y:Na-ui/2+Z.height+Qt},{x:za+l/2,y:Na-ui/2+Z.height+Qt},{x:za+l/2,y:Na+ui/2},{x:za-l/2,y:Na+ui/2},{x:za-l/2,y:Na-ui/2+Z.height+Qt},{x:za-Z.width/2,y:Na-ui/2+Z.height+Qt}]:[{x:za-l/2,y:Na-ui/2},{x:za+l/2,y:Na-ui/2},{x:za+l/2,y:Na-ui/2+tt},{x:za+Z.width/2,y:Na-ui/2+tt},{x:za+Z.width/2/2,y:Na+ui/2},{x:za-Z.width/2,y:Na+ui/2},{x:za-Z.width/2,y:Na-ui/2+tt},{x:za-l/2,y:Na-ui/2+tt}],oe.polygon(d,ji,Xa)},J})).apply(this,arguments)}function P(Gt,d,ct){return Q.apply(this,arguments)}function Q(){return(Q=(0,ot.A)(function*(Gt,d,{config:{flowchart:ct}}){const Xt=new Image;Xt.src=d?.img??"",yield Xt.decode();const kt=Number(Xt.naturalWidth.toString().replace("px","")),vt=Number(Xt.naturalHeight.toString().replace("px",""));d.imageAspectRatio=kt/vt;const{labelStyles:ue}=(0,L.GX)(d);d.labelStyle=ue;const nt=ct?.wrappingWidth;d.defaultWidth=ct?.wrappingWidth;const Dt=Math.max(d.label?nt??0:0,d?.assetWidth??kt),J="on"===d.constraint&&d?.assetHeight?d.assetHeight*d.imageAspectRatio:Dt,Z="on"===d.constraint?J/d.imageAspectRatio:d?.assetHeight??vt;d.width=Math.max(J,nt??0);const{shapeSvg:Ot,bbox:fe,label:Le}=yield wt(Gt,d,"image-shape default"),tt="t"===d.pos,l=-J/2,T=-Z/2,N=d.label?8:0,st=At.A.svg(Ot),bt=(0,L.Fr)(d,{});"handDrawn"!==d.look&&(bt.roughness=0,bt.fillStyle="solid");const Ie=st.rectangle(l,T,J,Z,bt),Qt=Math.max(J,fe.width),Ue=Z+fe.height+N,br=st.rectangle(-Qt/2,-Ue/2,Qt,Ue,{...bt,fill:"none",stroke:"none"}),Sr=Ot.insert(()=>Ie,":first-child"),ta=Ot.insert(()=>br);if(d.img){const Ir=Ot.append("image");Ir.attr("href",d.img),Ir.attr("width",J),Ir.attr("height",Z),Ir.attr("preserveAspectRatio","none"),Ir.attr("transform",`translate(${-J/2},${tt?Ue/2-Z:-Ue/2})`)}return Le.attr("transform",`translate(${-fe.width/2-(fe.x-(fe.left??0))},${tt?-Z/2-fe.height/2-N/2:Z/2-fe.height/2+N/2})`),Sr.attr("transform",`translate(0,${tt?fe.height/2+N/2:-fe.height/2-N/2})`),dt(d,ta),d.intersect=function(Ir){if($.Rm.info("iconSquare intersect",d,Ir),!d.label)return oe.rect(d,Ir);const la=d.x??0,Ca=d.y??0,ka=d.height??0;let Ba=[];return Ba=tt?[{x:la-fe.width/2,y:Ca-ka/2},{x:la+fe.width/2,y:Ca-ka/2},{x:la+fe.width/2,y:Ca-ka/2+fe.height+N},{x:la+J/2,y:Ca-ka/2+fe.height+N},{x:la+J/2,y:Ca+ka/2},{x:la-J/2,y:Ca+ka/2},{x:la-J/2,y:Ca-ka/2+fe.height+N},{x:la-fe.width/2,y:Ca-ka/2+fe.height+N}]:[{x:la-J/2,y:Ca-ka/2},{x:la+J/2,y:Ca-ka/2},{x:la+J/2,y:Ca-ka/2+Z},{x:la+fe.width/2,y:Ca-ka/2+Z},{x:la+fe.width/2/2,y:Ca+ka/2},{x:la-fe.width/2,y:Ca+ka/2},{x:la-fe.width/2,y:Ca-ka/2+Z},{x:la-J/2,y:Ca-ka/2+Z}],oe.polygon(d,Ba,Ir)},Ot})).apply(this,arguments)}function xt(Gt,d){return Vt.apply(this,arguments)}function Vt(){return(Vt=(0,ot.A)(function*(Gt,d){const{labelStyles:ct,nodeStyles:Xt}=(0,L.GX)(d);d.labelStyle=ct;const{shapeSvg:kt,bbox:vt}=yield wt(Gt,d,Rt(d)),ue=Math.max(vt.width+2*(d.padding??0),d?.width??0),nt=Math.max(vt.height+2*(d.padding??0),d?.height??0),Dt=[{x:0,y:0},{x:ue,y:0},{x:ue+3*nt/6,y:-nt},{x:-3*nt/6,y:-nt}];let J;const{cssStyles:Z}=d;if("handDrawn"===d.look){const Ot=At.A.svg(kt),fe=(0,L.Fr)(d,{}),Le=q(Dt),tt=Ot.path(Le,fe);J=kt.insert(()=>tt,":first-child").attr("transform",`translate(${-ue/2}, ${nt/2})`),Z&&J.attr("style",Z)}else J=B(kt,ue,nt,Dt);return Xt&&J.attr("style",Xt),d.width=ue,d.height=nt,dt(d,J),d.intersect=function(Ot){return oe.polygon(d,Dt,Ot)},kt})).apply(this,arguments)}function jt(Gt,d,ct){return Ut.apply(this,arguments)}function Ut(){return(Ut=(0,ot.A)(function*(Gt,d,ct){const{labelStyles:Xt,nodeStyles:kt}=(0,L.GX)(d);d.labelStyle=Xt;const{shapeSvg:vt,bbox:ue}=yield wt(Gt,d,Rt(d)),nt=Math.max(ue.width+2*ct.labelPaddingX,d?.width||0),Dt=Math.max(ue.height+2*ct.labelPaddingY,d?.height||0),J=-nt/2,Z=-Dt/2;let Ot,{rx:fe,ry:Le}=d;const{cssStyles:tt}=d;if(ct?.rx&&ct.ry&&(fe=ct.rx,Le=ct.ry),"handDrawn"===d.look){const l=At.A.svg(vt),T=(0,L.Fr)(d,{}),N=fe||Le?l.path(Se(J,Z,nt,Dt,fe||0),T):l.rectangle(J,Z,nt,Dt,T);Ot=vt.insert(()=>N,":first-child"),Ot.attr("class","basic label-container").attr("style",(0,Pt.KL)(tt))}else Ot=vt.insert("rect",":first-child"),Ot.attr("class","basic label-container").attr("style",kt).attr("rx",(0,Pt.KL)(fe)).attr("ry",(0,Pt.KL)(Le)).attr("x",J).attr("y",Z).attr("width",nt).attr("height",Dt);return dt(d,Ot),d.calcIntersect=function(l,T){return oe.rect(l,T)},d.intersect=function(l){return oe.rect(d,l)},vt})).apply(this,arguments)}function Wt(Gt,d){return xe.apply(this,arguments)}function xe(){return(xe=(0,ot.A)(function*(Gt,d){const{shapeSvg:ct,bbox:Xt,label:kt}=yield wt(Gt,d,"label"),vt=ct.insert("rect",":first-child");return vt.attr("width",.1).attr("height",.1),ct.attr("class","label edgeLabel"),kt.attr("transform",`translate(${-Xt.width/2-(Xt.x-(Xt.left??0))}, ${-Xt.height/2-(Xt.y-(Xt.top??0))})`),dt(d,vt),d.intersect=function(Dt){return oe.rect(d,Dt)},ct})).apply(this,arguments)}function Xe(Gt,d){return We.apply(this,arguments)}function We(){return(We=(0,ot.A)(function*(Gt,d){const{labelStyles:ct,nodeStyles:Xt}=(0,L.GX)(d);d.labelStyle=ct;const{shapeSvg:kt,bbox:vt}=yield wt(Gt,d,Rt(d)),ue=Math.max(vt.width+(d.padding??0),d?.width??0),nt=Math.max(vt.height+(d.padding??0),d?.height??0),Dt=[{x:0,y:0},{x:ue+3*nt/6,y:0},{x:ue,y:-nt},{x:-3*nt/6,y:-nt}];let J;const{cssStyles:Z}=d;if("handDrawn"===d.look){const Ot=At.A.svg(kt),fe=(0,L.Fr)(d,{}),Le=q(Dt),tt=Ot.path(Le,fe);J=kt.insert(()=>tt,":first-child").attr("transform",`translate(${-ue/2}, ${nt/2})`),Z&&J.attr("style",Z)}else J=B(kt,ue,nt,Dt);return Xt&&J.attr("style",Xt),d.width=ue,d.height=nt,dt(d,J),d.intersect=function(Ot){return oe.polygon(d,Dt,Ot)},kt})).apply(this,arguments)}function gr(Gt,d){return hr.apply(this,arguments)}function hr(){return(hr=(0,ot.A)(function*(Gt,d){const{labelStyles:ct,nodeStyles:Xt}=(0,L.GX)(d);d.labelStyle=ct;const{shapeSvg:kt,bbox:vt}=yield wt(Gt,d,Rt(d)),ue=Math.max(vt.width+(d.padding??0),d?.width??0),nt=Math.max(vt.height+(d.padding??0),d?.height??0),Dt=[{x:-3*nt/6,y:0},{x:ue,y:0},{x:ue+3*nt/6,y:-nt},{x:0,y:-nt}];let J;const{cssStyles:Z}=d;if("handDrawn"===d.look){const Ot=At.A.svg(kt),fe=(0,L.Fr)(d,{}),Le=q(Dt),tt=Ot.path(Le,fe);J=kt.insert(()=>tt,":first-child").attr("transform",`translate(${-ue/2}, ${nt/2})`),Z&&J.attr("style",Z)}else J=B(kt,ue,nt,Dt);return Xt&&J.attr("style",Xt),d.width=ue,d.height=nt,dt(d,J),d.intersect=function(Ot){return oe.polygon(d,Dt,Ot)},kt})).apply(this,arguments)}function _r(Gt,d){const{labelStyles:ct,nodeStyles:Xt}=(0,L.GX)(d);d.label="",d.labelStyle=ct;const kt=Gt.insert("g").attr("class",Rt(d)).attr("id",d.domId??d.id),{cssStyles:vt}=d,ue=Math.max(35,d?.width??0),nt=Math.max(35,d?.height??0),J=[{x:ue,y:0},{x:0,y:nt+3.5},{x:ue-14,y:nt+3.5},{x:0,y:2*nt},{x:ue,y:nt-3.5},{x:14,y:nt-3.5}],Z=At.A.svg(kt),Ot=(0,L.Fr)(d,{});"handDrawn"!==d.look&&(Ot.roughness=0,Ot.fillStyle="solid");const fe=q(J),Le=Z.path(fe,Ot),tt=kt.insert(()=>Le,":first-child");return vt&&"handDrawn"!==d.look&&tt.selectAll("path").attr("style",vt),Xt&&"handDrawn"!==d.look&&tt.selectAll("path").attr("style",Xt),tt.attr("transform",`translate(-${ue/2},${-nt})`),dt(d,tt),d.intersect=function(l){return $.Rm.info("lightningBolt intersect",d,l),oe.polygon(d,J,l)},kt}(0,$.K2)(or,"cylinder"),(0,$.K2)(ce,"dividedRectangle"),(0,$.K2)(De,"doublecircle"),(0,$.K2)(Qe,"filledCircle"),(0,$.K2)(Lr,"flippedTriangle"),(0,$.K2)(Hr,"forkJoin"),(0,$.K2)(sr,"halfRoundedRectangle"),(0,$.K2)(ne,"hexagon"),(0,$.K2)(ir,"hourglass"),(0,$.K2)(y,"icon"),(0,$.K2)(I,"iconCircle"),(0,$.K2)(D,"iconRounded"),(0,$.K2)(b,"iconSquare"),(0,$.K2)(P,"imageSquare"),(0,$.K2)(xt,"inv_trapezoid"),(0,$.K2)(jt,"drawRect"),(0,$.K2)(Wt,"labelRect"),(0,$.K2)(Xe,"lean_left"),(0,$.K2)(gr,"lean_right"),(0,$.K2)(_r,"lightningBolt");var $e=(0,$.K2)((Gt,d,ct,Xt,kt,vt,ue)=>[`M${Gt},${d+vt}`,`a${kt},${vt} 0,0,0 ${ct},0`,`a${kt},${vt} 0,0,0 ${-ct},0`,`l0,${Xt}`,`a${kt},${vt} 0,0,0 ${ct},0`,"l0,"+-Xt,`M${Gt},${d+vt+ue}`,`a${kt},${vt} 0,0,0 ${ct},0`].join(" "),"createCylinderPathD"),He=(0,$.K2)((Gt,d,ct,Xt,kt,vt,ue)=>[`M${Gt},${d+vt}`,`M${Gt+ct},${d+vt}`,`a${kt},${vt} 0,0,0 ${-ct},0`,`l0,${Xt}`,`a${kt},${vt} 0,0,0 ${ct},0`,"l0,"+-Xt,`M${Gt},${d+vt+ue}`,`a${kt},${vt} 0,0,0 ${ct},0`].join(" "),"createOuterCylinderPathD"),Ar=(0,$.K2)((Gt,d,ct,Xt,kt,vt)=>[`M${Gt-ct/2},${-Xt/2}`,`a${kt},${vt} 0,0,0 ${ct},0`].join(" "),"createInnerCylinderPathD");function kr(Gt,d){return zr.apply(this,arguments)}function zr(){return(zr=(0,ot.A)(function*(Gt,d){const{labelStyles:ct,nodeStyles:Xt}=(0,L.GX)(d);d.labelStyle=ct;const{shapeSvg:kt,bbox:vt,label:ue}=yield wt(Gt,d,Rt(d)),nt=Math.max(vt.width+(d.padding??0),d.width??0),Dt=nt/2,J=Dt/(2.5+nt/50),Z=Math.max(vt.height+J+(d.padding??0),d.height??0),Ot=.1*Z;let fe;const{cssStyles:Le}=d;if("handDrawn"===d.look){const tt=At.A.svg(kt),l=He(0,0,nt,Z,Dt,J,Ot),T=Ar(0,J,nt,Z,Dt,J),N=(0,L.Fr)(d,{}),st=tt.path(l,N),bt=tt.path(T,N);kt.insert(()=>bt,":first-child").attr("class","line"),fe=kt.insert(()=>st,":first-child"),fe.attr("class","basic label-container"),Le&&fe.attr("style",Le)}else{const tt=$e(0,0,nt,Z,Dt,J,Ot);fe=kt.insert("path",":first-child").attr("d",tt).attr("class","basic label-container").attr("style",(0,Pt.KL)(Le)).attr("style",Xt)}return fe.attr("label-offset-y",J),fe.attr("transform",`translate(${-nt/2}, ${-(Z/2+J)})`),dt(d,fe),ue.attr("transform",`translate(${-vt.width/2-(vt.x-(vt.left??0))}, ${-vt.height/2+J-(vt.y-(vt.top??0))})`),d.intersect=function(tt){const l=oe.rect(d,tt),T=l.x-(d.x??0);if(0!=Dt&&(Math.abs(T)<(d.width??0)/2||Math.abs(T)==(d.width??0)/2&&Math.abs(l.y-(d.y??0))>(d.height??0)/2-J)){let N=J*J*(1-T*T/(Dt*Dt));N>0&&(N=Math.sqrt(N)),N=J-N,tt.y-(d.y??0)>0&&(N=-N),l.y+=N}return l},kt})).apply(this,arguments)}function Er(Gt,d){return Jr.apply(this,arguments)}function Jr(){return(Jr=(0,ot.A)(function*(Gt,d){const{labelStyles:ct,nodeStyles:Xt}=(0,L.GX)(d);d.labelStyle=ct;const{shapeSvg:kt,bbox:vt,label:ue}=yield wt(Gt,d,Rt(d)),nt=Math.max(vt.width+2*(d.padding??0),d?.width??0),Dt=Math.max(vt.height+2*(d.padding??0),d?.height??0),J=Dt/4,Z=Dt+J,{cssStyles:Ot}=d,fe=At.A.svg(kt),Le=(0,L.Fr)(d,{});"handDrawn"!==d.look&&(Le.roughness=0,Le.fillStyle="solid");const tt=[{x:-nt/2-nt/2*.1,y:-Z/2},{x:-nt/2-nt/2*.1,y:Z/2},...ar(-nt/2-nt/2*.1,Z/2,nt/2+nt/2*.1,Z/2,J,.8),{x:nt/2+nt/2*.1,y:-Z/2},{x:-nt/2-nt/2*.1,y:-Z/2},{x:-nt/2,y:-Z/2},{x:-nt/2,y:Z/2*1.1},{x:-nt/2,y:-Z/2}],l=fe.polygon(tt.map(N=>[N.x,N.y]),Le),T=kt.insert(()=>l,":first-child");return T.attr("class","basic label-container"),Ot&&"handDrawn"!==d.look&&T.selectAll("path").attr("style",Ot),Xt&&"handDrawn"!==d.look&&T.selectAll("path").attr("style",Xt),T.attr("transform",`translate(0,${-J/2})`),ue.attr("transform",`translate(${-nt/2+(d.padding??0)+nt/2*.1/2-(vt.x-(vt.left??0))},${-Dt/2+(d.padding??0)-J/2-(vt.y-(vt.top??0))})`),dt(d,T),d.intersect=function(N){return oe.polygon(d,tt,N)},kt})).apply(this,arguments)}function Br(Gt,d){return ha.apply(this,arguments)}function ha(){return(ha=(0,ot.A)(function*(Gt,d){const{labelStyles:ct,nodeStyles:Xt}=(0,L.GX)(d);d.labelStyle=ct;const{shapeSvg:kt,bbox:vt,label:ue}=yield wt(Gt,d,Rt(d)),nt=Math.max(vt.width+2*(d.padding??0),d?.width??0),Dt=Math.max(vt.height+2*(d.padding??0),d?.height??0),Z=-nt/2,Ot=-Dt/2,{cssStyles:fe}=d,Le=At.A.svg(kt),tt=(0,L.Fr)(d,{}),l=[{x:Z-5,y:Ot+5},{x:Z-5,y:Ot+Dt+5},{x:Z+nt-5,y:Ot+Dt+5},{x:Z+nt-5,y:Ot+Dt},{x:Z+nt,y:Ot+Dt},{x:Z+nt,y:Ot+Dt-5},{x:Z+nt+5,y:Ot+Dt-5},{x:Z+nt+5,y:Ot-5},{x:Z+5,y:Ot-5},{x:Z+5,y:Ot},{x:Z,y:Ot},{x:Z,y:Ot+5}],T=[{x:Z,y:Ot+5},{x:Z+nt-5,y:Ot+5},{x:Z+nt-5,y:Ot+Dt},{x:Z+nt,y:Ot+Dt},{x:Z+nt,y:Ot},{x:Z,y:Ot}];"handDrawn"!==d.look&&(tt.roughness=0,tt.fillStyle="solid");const N=q(l),st=Le.path(N,tt),bt=q(T),Ie=Le.path(bt,{...tt,fill:"none"}),Qt=kt.insert(()=>Ie,":first-child");return Qt.insert(()=>st,":first-child"),Qt.attr("class","basic label-container"),fe&&"handDrawn"!==d.look&&Qt.selectAll("path").attr("style",fe),Xt&&"handDrawn"!==d.look&&Qt.selectAll("path").attr("style",Xt),ue.attr("transform",`translate(${-vt.width/2-5-(vt.x-(vt.left??0))}, ${-vt.height/2+5-(vt.y-(vt.top??0))})`),dt(d,Qt),d.intersect=function(Ue){return oe.polygon(d,l,Ue)},kt})).apply(this,arguments)}function ia(Gt,d){return jr.apply(this,arguments)}function jr(){return(jr=(0,ot.A)(function*(Gt,d){const{labelStyles:ct,nodeStyles:Xt}=(0,L.GX)(d);d.labelStyle=ct;const{shapeSvg:kt,bbox:vt,label:ue}=yield wt(Gt,d,Rt(d)),nt=Math.max(vt.width+2*(d.padding??0),d?.width??0),Dt=Math.max(vt.height+2*(d.padding??0),d?.height??0),J=Dt/4,Z=Dt+J,Ot=-nt/2,fe=-Z/2,{cssStyles:tt}=d,l=ar(Ot-5,fe+Z+5,Ot+nt-5,fe+Z+5,J,.8),T=l?.[l.length-1],N=[{x:Ot-5,y:fe+5},{x:Ot-5,y:fe+Z+5},...l,{x:Ot+nt-5,y:T.y-5},{x:Ot+nt,y:T.y-5},{x:Ot+nt,y:T.y-10},{x:Ot+nt+5,y:T.y-10},{x:Ot+nt+5,y:fe-5},{x:Ot+5,y:fe-5},{x:Ot+5,y:fe},{x:Ot,y:fe},{x:Ot,y:fe+5}],st=[{x:Ot,y:fe+5},{x:Ot+nt-5,y:fe+5},{x:Ot+nt-5,y:T.y-5},{x:Ot+nt,y:T.y-5},{x:Ot+nt,y:fe},{x:Ot,y:fe}],bt=At.A.svg(kt),Ie=(0,L.Fr)(d,{});"handDrawn"!==d.look&&(Ie.roughness=0,Ie.fillStyle="solid");const Qt=q(N),Ue=bt.path(Qt,Ie),br=q(st),Sr=bt.path(br,Ie),ta=kt.insert(()=>Ue,":first-child");return ta.insert(()=>Sr),ta.attr("class","basic label-container"),tt&&"handDrawn"!==d.look&&ta.selectAll("path").attr("style",tt),Xt&&"handDrawn"!==d.look&&ta.selectAll("path").attr("style",Xt),ta.attr("transform",`translate(0,${-J/2})`),ue.attr("transform",`translate(${-vt.width/2-5-(vt.x-(vt.left??0))}, ${-vt.height/2+5-J/2-(vt.y-(vt.top??0))})`),dt(d,ta),d.intersect=function(Ir){return oe.polygon(d,N,Ir)},kt})).apply(this,arguments)}function Qr(Gt,d,ct){return lr.apply(this,arguments)}function lr(){return(lr=(0,ot.A)(function*(Gt,d,{config:{themeVariables:ct}}){const{labelStyles:Xt,nodeStyles:kt}=(0,L.GX)(d);d.labelStyle=Xt,d.useHtmlLabels||!1!==(0,ut.zj)().flowchart?.htmlLabels||(d.centerLabel=!0);const{shapeSvg:ue,bbox:nt,label:Dt}=yield wt(Gt,d,Rt(d)),J=Math.max(nt.width+2*(d.padding??0),d?.width??0),Z=Math.max(nt.height+2*(d.padding??0),d?.height??0),Ot=-J/2,fe=-Z/2,{cssStyles:Le}=d,tt=At.A.svg(ue),l=(0,L.Fr)(d,{fill:ct.noteBkgColor,stroke:ct.noteBorderColor});"handDrawn"!==d.look&&(l.roughness=0,l.fillStyle="solid");const T=tt.rectangle(Ot,fe,J,Z,l),N=ue.insert(()=>T,":first-child");return N.attr("class","basic label-container"),Le&&"handDrawn"!==d.look&&N.selectAll("path").attr("style",Le),kt&&"handDrawn"!==d.look&&N.selectAll("path").attr("style",kt),Dt.attr("transform",`translate(${-nt.width/2-(nt.x-(nt.left??0))}, ${-nt.height/2-(nt.y-(nt.top??0))})`),dt(d,N),d.intersect=function(st){return oe.rect(d,st)},ue})).apply(this,arguments)}(0,$.K2)(kr,"linedCylinder"),(0,$.K2)(Er,"linedWaveEdgedRect"),(0,$.K2)(Br,"multiRect"),(0,$.K2)(ia,"multiWaveEdgedRectangle"),(0,$.K2)(Qr,"note");var dr=(0,$.K2)((Gt,d,ct)=>[`M${Gt+ct/2},${d}`,`L${Gt+ct},${d-ct/2}`,`L${Gt+ct/2},${d-ct}`,`L${Gt},${d-ct/2}`,"Z"].join(" "),"createDecisionBoxPathD");function W(Gt,d){return Yt.apply(this,arguments)}function Yt(){return(Yt=(0,ot.A)(function*(Gt,d){const{labelStyles:ct,nodeStyles:Xt}=(0,L.GX)(d);d.labelStyle=ct;const{shapeSvg:kt,bbox:vt}=yield wt(Gt,d,Rt(d)),Dt=vt.width+d.padding+(vt.height+d.padding),Z=[{x:Dt/2,y:0},{x:Dt,y:-Dt/2},{x:Dt/2,y:-Dt},{x:0,y:-Dt/2}];let Ot;const{cssStyles:fe}=d;if("handDrawn"===d.look){const Le=At.A.svg(kt),tt=(0,L.Fr)(d,{}),l=dr(0,0,Dt),T=Le.path(l,tt);Ot=kt.insert(()=>T,":first-child").attr("transform",`translate(${-Dt/2+.5}, ${Dt/2})`),fe&&Ot.attr("style",fe)}else Ot=B(kt,Dt,Dt,Z),Ot.attr("transform",`translate(${-Dt/2+.5}, ${Dt/2})`);return Xt&&Ot.attr("style",Xt),dt(d,Ot),d.calcIntersect=function(Le,tt){const l=Le.width,N=oe.polygon(Le,[{x:l/2,y:0},{x:l,y:-l/2},{x:l/2,y:-l},{x:0,y:-l/2}],tt);return{x:N.x-.5,y:N.y-.5}},d.intersect=function(Le){return this.calcIntersect(d,Le)},kt})).apply(this,arguments)}function Ye(Gt,d){return Ne.apply(this,arguments)}function Ne(){return(Ne=(0,ot.A)(function*(Gt,d){const{labelStyles:ct,nodeStyles:Xt}=(0,L.GX)(d);d.labelStyle=ct;const{shapeSvg:kt,bbox:vt,label:ue}=yield wt(Gt,d,Rt(d)),J=-Math.max(vt.width+(d.padding??0),d?.width??0)/2,Z=-Math.max(vt.height+(d.padding??0),d?.height??0)/2,Ot=Z/2,fe=[{x:J+Ot,y:Z},{x:J,y:0},{x:J+Ot,y:-Z},{x:-J,y:-Z},{x:-J,y:Z}],{cssStyles:Le}=d,tt=At.A.svg(kt),l=(0,L.Fr)(d,{});"handDrawn"!==d.look&&(l.roughness=0,l.fillStyle="solid");const T=q(fe),N=tt.path(T,l),st=kt.insert(()=>N,":first-child");return st.attr("class","basic label-container"),Le&&"handDrawn"!==d.look&&st.selectAll("path").attr("style",Le),Xt&&"handDrawn"!==d.look&&st.selectAll("path").attr("style",Xt),st.attr("transform",`translate(${-Ot/2},0)`),ue.attr("transform",`translate(${-Ot/2-vt.width/2-(vt.x-(vt.left??0))}, ${-vt.height/2-(vt.y-(vt.top??0))})`),dt(d,st),d.intersect=function(bt){return oe.polygon(d,fe,bt)},kt})).apply(this,arguments)}function Tr(Gt,d){return yr.apply(this,arguments)}function yr(){return(yr=(0,ot.A)(function*(Gt,d){const{labelStyles:ct,nodeStyles:Xt}=(0,L.GX)(d);let kt;d.labelStyle=ct,kt=d.cssClasses?"node "+d.cssClasses:"node default";const vt=Gt.insert("g").attr("class",kt).attr("id",d.domId||d.id),ue=vt.insert("g"),nt=vt.insert("g").attr("class","label").attr("style",Xt),Dt=d.description,J=d.label,Z=nt.node().appendChild(yield Fr(J,d.labelStyle,!0,!0));let Ot={width:0,height:0};if((0,ut._3)((0,ut.D7)()?.flowchart?.htmlLabels)){const Sr=Z.children[0],ta=(0,A.Ltv)(Z);Ot=Sr.getBoundingClientRect(),ta.attr("width",Ot.width),ta.attr("height",Ot.height)}$.Rm.info("Text 2",Dt);const fe=Dt||[],Le=Z.getBBox(),tt=nt.node().appendChild(yield Fr(fe.join?fe.join("<br/>"):fe,d.labelStyle,!0,!0)),l=tt.children[0],T=(0,A.Ltv)(tt);Ot=l.getBoundingClientRect(),T.attr("width",Ot.width),T.attr("height",Ot.height);const N=(d.padding||0)/2;(0,A.Ltv)(tt).attr("transform","translate( "+(Ot.width>Le.width?0:(Le.width-Ot.width)/2)+", "+(Le.height+N+5)+")"),(0,A.Ltv)(Z).attr("transform","translate( "+(Ot.width<Le.width?0:-(Le.width-Ot.width)/2)+", 0)"),Ot=nt.node().getBBox(),nt.attr("transform","translate("+-Ot.width/2+", "+(-Ot.height/2-N+3)+")");const st=Ot.width+(d.padding||0),bt=Ot.height+(d.padding||0),Ie=-Ot.width/2-N,Qt=-Ot.height/2-N;let Ue,br;if("handDrawn"===d.look){const Sr=At.A.svg(vt),ta=(0,L.Fr)(d,{}),Ir=Sr.path(Se(Ie,Qt,st,bt,d.rx||0),ta),la=Sr.line(-Ot.width/2-N,-Ot.height/2-N+Le.height+N,Ot.width/2+N,-Ot.height/2-N+Le.height+N,ta);br=vt.insert(()=>($.Rm.debug("Rough node insert CXC",Ir),la),":first-child"),Ue=vt.insert(()=>($.Rm.debug("Rough node insert CXC",Ir),Ir),":first-child")}else Ue=ue.insert("rect",":first-child"),br=ue.insert("line"),Ue.attr("class","outer title-state").attr("style",Xt).attr("x",-Ot.width/2-N).attr("y",-Ot.height/2-N).attr("width",Ot.width+(d.padding||0)).attr("height",Ot.height+(d.padding||0)),br.attr("class","divider").attr("x1",-Ot.width/2-N).attr("x2",Ot.width/2+N).attr("y1",-Ot.height/2-N+Le.height+N).attr("y2",-Ot.height/2-N+Le.height+N);return dt(d,Ue),d.intersect=function(Sr){return oe.rect(d,Sr)},vt})).apply(this,arguments)}function da(Gt,d,ct,Xt,kt,vt,ue){const Dt=(Gt+ct)/2,J=(d+Xt)/2,Z=Math.atan2(Xt-d,ct-Gt),l=Math.sqrt(((ct-Gt)/2/kt)**2+((Xt-d)/2/vt)**2);if(l>1)throw new Error("The given radii are too small to create an arc between the points.");const T=Math.sqrt(1-l**2),N=Dt+T*vt*Math.sin(Z)*(ue?-1:1),st=J-T*kt*Math.cos(Z)*(ue?-1:1),bt=Math.atan2((d-st)/vt,(Gt-N)/kt);let Qt=Math.atan2((Xt-st)/vt,(ct-N)/kt)-bt;ue&&Qt<0&&(Qt+=2*Math.PI),!ue&&Qt>0&&(Qt-=2*Math.PI);const Ue=[];for(let br=0;br<20;br++){const ta=bt+br/19*Qt,Ir=N+kt*Math.cos(ta),la=st+vt*Math.sin(ta);Ue.push({x:Ir,y:la})}return Ue}function Pa(Gt,d){return Ia.apply(this,arguments)}function Ia(){return(Ia=(0,ot.A)(function*(Gt,d){const{labelStyles:ct,nodeStyles:Xt}=(0,L.GX)(d);d.labelStyle=ct;const{shapeSvg:kt,bbox:vt}=yield wt(Gt,d,Rt(d)),ue=d?.padding??0,nt=d?.padding??0,Dt=(d?.width?d?.width:vt.width)+2*ue,J=(d?.height?d?.height:vt.height)+2*nt,Z=d.radius||5,Ot=d.taper||5,{cssStyles:fe}=d,Le=At.A.svg(kt),tt=(0,L.Fr)(d,{});d.stroke&&(tt.stroke=d.stroke),"handDrawn"!==d.look&&(tt.roughness=0,tt.fillStyle="solid");const l=[{x:-Dt/2+Ot,y:-J/2},{x:Dt/2-Ot,y:-J/2},...da(Dt/2-Ot,-J/2,Dt/2,-J/2+Ot,Z,Z,!0),{x:Dt/2,y:-J/2+Ot},{x:Dt/2,y:J/2-Ot},...da(Dt/2,J/2-Ot,Dt/2-Ot,J/2,Z,Z,!0),{x:Dt/2-Ot,y:J/2},{x:-Dt/2+Ot,y:J/2},...da(-Dt/2+Ot,J/2,-Dt/2,J/2-Ot,Z,Z,!0),{x:-Dt/2,y:J/2-Ot},{x:-Dt/2,y:-J/2+Ot},...da(-Dt/2,-J/2+Ot,-Dt/2+Ot,-J/2,Z,Z,!0)],T=q(l),N=Le.path(T,tt),st=kt.insert(()=>N,":first-child");return st.attr("class","basic label-container outer-path"),fe&&"handDrawn"!==d.look&&st.selectChildren("path").attr("style",fe),Xt&&"handDrawn"!==d.look&&st.selectChildren("path").attr("style",Xt),dt(d,st),d.intersect=function(bt){return oe.polygon(d,l,bt)},kt})).apply(this,arguments)}function Wa(Gt,d){return Ma.apply(this,arguments)}function Ma(){return(Ma=(0,ot.A)(function*(Gt,d){const{labelStyles:ct,nodeStyles:Xt}=(0,L.GX)(d);d.labelStyle=ct;const{shapeSvg:kt,bbox:vt,label:ue}=yield wt(Gt,d,Rt(d)),nt=d?.padding??0,Dt=Math.max(vt.width+2*(d.padding??0),d?.width??0),J=Math.max(vt.height+2*(d.padding??0),d?.height??0),Z=-vt.width/2-nt,Ot=-vt.height/2-nt,{cssStyles:fe}=d,Le=At.A.svg(kt),tt=(0,L.Fr)(d,{});"handDrawn"!==d.look&&(tt.roughness=0,tt.fillStyle="solid");const T=Le.polygon([{x:Z,y:Ot},{x:Z+Dt+8,y:Ot},{x:Z+Dt+8,y:Ot+J},{x:Z-8,y:Ot+J},{x:Z-8,y:Ot},{x:Z,y:Ot},{x:Z,y:Ot+J}].map(st=>[st.x,st.y]),tt),N=kt.insert(()=>T,":first-child");return N.attr("class","basic label-container").attr("style",(0,Pt.KL)(fe)),Xt&&"handDrawn"!==d.look&&N.selectAll("path").attr("style",Xt),fe&&"handDrawn"!==d.look&&N.selectAll("path").attr("style",Xt),ue.attr("transform",`translate(${-Dt/2+4+(d.padding??0)-(vt.x-(vt.left??0))},${-J/2+(d.padding??0)-(vt.y-(vt.top??0))})`),dt(d,N),d.intersect=function(st){return oe.rect(d,st)},kt})).apply(this,arguments)}function ba(Gt,d){return sa.apply(this,arguments)}function sa(){return(sa=(0,ot.A)(function*(Gt,d){const{labelStyles:ct,nodeStyles:Xt}=(0,L.GX)(d);d.labelStyle=ct;const{shapeSvg:kt,bbox:vt,label:ue}=yield wt(Gt,d,Rt(d)),nt=Math.max(vt.width+2*(d.padding??0),d?.width??0),Dt=Math.max(vt.height+2*(d.padding??0),d?.height??0),J=-nt/2,Z=-Dt/2,{cssStyles:Ot}=d,fe=At.A.svg(kt),Le=(0,L.Fr)(d,{});"handDrawn"!==d.look&&(Le.roughness=0,Le.fillStyle="solid");const tt=[{x:J,y:Z},{x:J,y:Z+Dt},{x:J+nt,y:Z+Dt},{x:J+nt,y:Z-Dt/2}],l=q(tt),T=fe.path(l,Le),N=kt.insert(()=>T,":first-child");return N.attr("class","basic label-container"),Ot&&"handDrawn"!==d.look&&N.selectChildren("path").attr("style",Ot),Xt&&"handDrawn"!==d.look&&N.selectChildren("path").attr("style",Xt),N.attr("transform",`translate(0, ${Dt/4})`),ue.attr("transform",`translate(${-nt/2+(d.padding??0)-(vt.x-(vt.left??0))}, ${-Dt/4+(d.padding??0)-(vt.y-(vt.top??0))})`),dt(d,N),d.intersect=function(st){return oe.polygon(d,tt,st)},kt})).apply(this,arguments)}function Sa(Gt,d){return ea.apply(this,arguments)}function ea(){return(ea=(0,ot.A)(function*(Gt,d){return jt(Gt,d,{rx:0,ry:0,classes:"",labelPaddingX:d.labelPaddingX??2*(d?.padding||0),labelPaddingY:1*(d?.padding||0)})})).apply(this,arguments)}function Va(Gt,d){return pr.apply(this,arguments)}function pr(){return(pr=(0,ot.A)(function*(Gt,d){const{labelStyles:ct,nodeStyles:Xt}=(0,L.GX)(d);d.labelStyle=ct;const{shapeSvg:kt,bbox:vt}=yield wt(Gt,d,Rt(d)),ue=vt.height+d.padding,nt=vt.width+ue/4+d.padding,Dt=ue/2,{cssStyles:J}=d,Z=At.A.svg(kt),Ot=(0,L.Fr)(d,{});"handDrawn"!==d.look&&(Ot.roughness=0,Ot.fillStyle="solid");const fe=[{x:-nt/2+Dt,y:-ue/2},{x:nt/2-Dt,y:-ue/2},...Ke(-nt/2+Dt,0,Dt,50,90,270),{x:nt/2-Dt,y:ue/2},...Ke(nt/2-Dt,0,Dt,50,270,450)],Le=q(fe),tt=Z.path(Le,Ot),l=kt.insert(()=>tt,":first-child");return l.attr("class","basic label-container outer-path"),J&&"handDrawn"!==d.look&&l.selectChildren("path").attr("style",J),Xt&&"handDrawn"!==d.look&&l.selectChildren("path").attr("style",Xt),dt(d,l),d.intersect=function(T){return oe.polygon(d,fe,T)},kt})).apply(this,arguments)}function Ua(Gt,d){return nr.apply(this,arguments)}function nr(){return(nr=(0,ot.A)(function*(Gt,d){return jt(Gt,d,{rx:5,ry:5,classes:"flowchart-node"})})).apply(this,arguments)}function Oa(Gt,d,{config:{themeVariables:ct}}){const{labelStyles:Xt,nodeStyles:kt}=(0,L.GX)(d);d.labelStyle=Xt;const{cssStyles:vt}=d,{lineColor:ue,stateBorder:nt,nodeBorder:Dt}=ct,J=Gt.insert("g").attr("class","node default").attr("id",d.domId||d.id),Z=At.A.svg(J),Ot=(0,L.Fr)(d,{});"handDrawn"!==d.look&&(Ot.roughness=0,Ot.fillStyle="solid");const fe=Z.circle(0,0,14,{...Ot,stroke:ue,strokeWidth:2}),Le=nt??Dt,tt=Z.circle(0,0,5,{...Ot,fill:Le,stroke:Le,strokeWidth:2,fillStyle:"solid"}),l=J.insert(()=>fe,":first-child");return l.insert(()=>tt),vt&&l.selectAll("path").attr("style",vt),kt&&l.selectAll("path").attr("style",kt),dt(d,l),d.intersect=function(T){return oe.circle(d,7,T)},J}function Ka(Gt,d,{config:{themeVariables:ct}}){const{lineColor:Xt}=ct,kt=Gt.insert("g").attr("class","node default").attr("id",d.domId||d.id);let vt;if("handDrawn"===d.look){const nt=At.A.svg(kt).circle(0,0,14,(0,L.ue)(Xt));vt=kt.insert(()=>nt),vt.attr("class","state-start").attr("r",7).attr("width",14).attr("height",14)}else vt=kt.insert("circle",":first-child"),vt.attr("class","state-start").attr("r",7).attr("width",14).attr("height",14);return dt(d,vt),d.intersect=function(ue){return oe.circle(d,7,ue)},kt}function ti(Gt,d){return _a.apply(this,arguments)}function _a(){return(_a=(0,ot.A)(function*(Gt,d){const{labelStyles:ct,nodeStyles:Xt}=(0,L.GX)(d);d.labelStyle=ct;const{shapeSvg:kt,bbox:vt}=yield wt(Gt,d,Rt(d)),ue=(d?.padding||0)/2,nt=vt.width+d.padding,Dt=vt.height+d.padding,J=-vt.width/2-ue,Z=-vt.height/2-ue,Ot=[{x:0,y:0},{x:nt,y:0},{x:nt,y:-Dt},{x:0,y:-Dt},{x:0,y:0},{x:-8,y:0},{x:nt+8,y:0},{x:nt+8,y:-Dt},{x:-8,y:-Dt},{x:-8,y:0}];if("handDrawn"===d.look){const fe=At.A.svg(kt),Le=(0,L.Fr)(d,{}),tt=fe.rectangle(J-8,Z,nt+16,Dt,Le),l=fe.line(J,Z,J,Z+Dt,Le),T=fe.line(J+nt,Z,J+nt,Z+Dt,Le);kt.insert(()=>l,":first-child"),kt.insert(()=>T,":first-child");const N=kt.insert(()=>tt,":first-child"),{cssStyles:st}=d;N.attr("class","basic label-container").attr("style",(0,Pt.KL)(st)),dt(d,N)}else{const fe=B(kt,nt,Dt,Ot);Xt&&fe.attr("style",Xt),dt(d,fe)}return d.intersect=function(fe){return oe.polygon(d,Ot,fe)},kt})).apply(this,arguments)}function qa(Gt,d){return Ha.apply(this,arguments)}function Ha(){return(Ha=(0,ot.A)(function*(Gt,d){const{labelStyles:ct,nodeStyles:Xt}=(0,L.GX)(d);d.labelStyle=ct;const{shapeSvg:kt,bbox:vt}=yield wt(Gt,d,Rt(d)),ue=Math.max(vt.width+2*(d.padding??0),d?.width??0),nt=Math.max(vt.height+2*(d.padding??0),d?.height??0),Dt=-ue/2,J=-nt/2,Z=.2*nt,Ot=.2*nt,{cssStyles:fe}=d,Le=At.A.svg(kt),tt=(0,L.Fr)(d,{}),l=[{x:Dt-Z/2,y:J},{x:Dt+ue+Z/2,y:J},{x:Dt+ue+Z/2,y:J+nt},{x:Dt-Z/2,y:J+nt}],T=[{x:Dt+ue-Z/2,y:J+nt},{x:Dt+ue+Z/2,y:J+nt},{x:Dt+ue+Z/2,y:J+nt-Ot}];"handDrawn"!==d.look&&(tt.roughness=0,tt.fillStyle="solid");const N=q(l),st=Le.path(N,tt),bt=q(T),Ie=Le.path(bt,{...tt,fillStyle:"solid"}),Qt=kt.insert(()=>Ie,":first-child");return Qt.insert(()=>st,":first-child"),Qt.attr("class","basic label-container"),fe&&"handDrawn"!==d.look&&Qt.selectAll("path").attr("style",fe),Xt&&"handDrawn"!==d.look&&Qt.selectAll("path").attr("style",Xt),dt(d,Qt),d.intersect=function(Ue){return oe.polygon(d,l,Ue)},kt})).apply(this,arguments)}function oa(Gt,d){return hi.apply(this,arguments)}function hi(){return(hi=(0,ot.A)(function*(Gt,d){const{labelStyles:ct,nodeStyles:Xt}=(0,L.GX)(d);d.labelStyle=ct;const{shapeSvg:kt,bbox:vt,label:ue}=yield wt(Gt,d,Rt(d)),nt=Math.max(vt.width+2*(d.padding??0),d?.width??0),Dt=Math.max(vt.height+2*(d.padding??0),d?.height??0),J=Dt/4,Z=.2*nt,Ot=.2*Dt,fe=Dt+J,{cssStyles:Le}=d,tt=At.A.svg(kt),l=(0,L.Fr)(d,{});"handDrawn"!==d.look&&(l.roughness=0,l.fillStyle="solid");const T=[{x:-nt/2-nt/2*.1,y:fe/2},...ar(-nt/2-nt/2*.1,fe/2,nt/2+nt/2*.1,fe/2,J,.8),{x:nt/2+nt/2*.1,y:-fe/2},{x:-nt/2-nt/2*.1,y:-fe/2}],N=-nt/2+nt/2*.1,st=-fe/2-.4*Ot,bt=[{x:N+nt-Z,y:1.4*(st+Dt)},{x:N+nt,y:st+Dt-Ot},{x:N+nt,y:.9*(st+Dt)},...ar(N+nt,1.3*(st+Dt),N+nt-Z,1.5*(st+Dt),.03*-Dt,.5)],Ie=q(T),Qt=tt.path(Ie,l),Ue=q(bt),br=tt.path(Ue,{...l,fillStyle:"solid"}),Sr=kt.insert(()=>br,":first-child");return Sr.insert(()=>Qt,":first-child"),Sr.attr("class","basic label-container"),Le&&"handDrawn"!==d.look&&Sr.selectAll("path").attr("style",Le),Xt&&"handDrawn"!==d.look&&Sr.selectAll("path").attr("style",Xt),Sr.attr("transform",`translate(0,${-J/2})`),ue.attr("transform",`translate(${-nt/2+(d.padding??0)-(vt.x-(vt.left??0))},${-Dt/2+(d.padding??0)-J/2-(vt.y-(vt.top??0))})`),dt(d,Sr),d.intersect=function(ta){return oe.polygon(d,T,ta)},kt})).apply(this,arguments)}function Ce(Gt,d){return Ri.apply(this,arguments)}function Ri(){return(Ri=(0,ot.A)(function*(Gt,d){const{labelStyles:ct,nodeStyles:Xt}=(0,L.GX)(d);d.labelStyle=ct;const{shapeSvg:kt,bbox:vt}=yield wt(Gt,d,Rt(d)),ue=Math.max(vt.width+d.padding,d?.width||0),nt=Math.max(vt.height+d.padding,d?.height||0),Dt=-ue/2,J=-nt/2,Z=kt.insert("rect",":first-child");return Z.attr("class","text").attr("style",Xt).attr("rx",0).attr("ry",0).attr("x",Dt).attr("y",J).attr("width",ue).attr("height",nt),dt(d,Z),d.intersect=function(Ot){return oe.rect(d,Ot)},kt})).apply(this,arguments)}(0,$.K2)(W,"question"),(0,$.K2)(Ye,"rect_left_inv_arrow"),(0,$.K2)(Tr,"rectWithTitle"),(0,$.K2)(da,"generateArcPoints"),(0,$.K2)(Pa,"roundedRect"),(0,$.K2)(Wa,"shadedProcess"),(0,$.K2)(ba,"slopedRect"),(0,$.K2)(Sa,"squareRect"),(0,$.K2)(Va,"stadium"),(0,$.K2)(Ua,"state"),(0,$.K2)(Oa,"stateEnd"),(0,$.K2)(Ka,"stateStart"),(0,$.K2)(ti,"subroutine"),(0,$.K2)(qa,"taggedRect"),(0,$.K2)(oa,"taggedWaveEdgedRectangle"),(0,$.K2)(Ce,"text");var Fe=(0,$.K2)((Gt,d,ct,Xt,kt,vt)=>`M${Gt},${d}\n    a${kt},${vt} 0,0,1 0,${-Xt}\n    l${ct},0\n    a${kt},${vt} 0,0,1 0,${Xt}\n    M${ct},${-Xt}\n    a${kt},${vt} 0,0,0 0,${Xt}\n    l${-ct},0`,"createCylinderPathD"),at=(0,$.K2)((Gt,d,ct,Xt,kt,vt)=>[`M${Gt},${d}`,`M${Gt+ct},${d}`,`a${kt},${vt} 0,0,0 0,${-Xt}`,`l${-ct},0`,`a${kt},${vt} 0,0,0 0,${Xt}`,`l${ct},0`].join(" "),"createOuterCylinderPathD"),Ct=(0,$.K2)((Gt,d,ct,Xt,kt,vt)=>[`M${Gt+ct/2},${-Xt/2}`,`a${kt},${vt} 0,0,0 0,${Xt}`].join(" "),"createInnerCylinderPathD");function M(Gt,d){return Jt.apply(this,arguments)}function Jt(){return(Jt=(0,ot.A)(function*(Gt,d){const{labelStyles:ct,nodeStyles:Xt}=(0,L.GX)(d);d.labelStyle=ct;const{shapeSvg:kt,bbox:vt,label:ue,halfPadding:nt}=yield wt(Gt,d,Rt(d)),Dt="neo"===d.look?2*nt:nt,J=vt.height+Dt,Z=J/2,Ot=Z/(2.5+J/50),fe=vt.width+Ot+Dt,{cssStyles:Le}=d;let tt;if("handDrawn"===d.look){const l=At.A.svg(kt),T=at(0,0,fe,J,Ot,Z),N=Ct(0,0,fe,J,Ot,Z),st=l.path(T,(0,L.Fr)(d,{})),bt=l.path(N,(0,L.Fr)(d,{fill:"none"}));tt=kt.insert(()=>bt,":first-child"),tt=kt.insert(()=>st,":first-child"),tt.attr("class","basic label-container"),Le&&tt.attr("style",Le)}else{const l=Fe(0,0,fe,J,Ot,Z);tt=kt.insert("path",":first-child").attr("d",l).attr("class","basic label-container").attr("style",(0,Pt.KL)(Le)).attr("style",Xt),tt.attr("class","basic label-container"),Le&&tt.selectAll("path").attr("style",Le),Xt&&tt.selectAll("path").attr("style",Xt)}return tt.attr("label-offset-x",Ot),tt.attr("transform",`translate(${-fe/2}, ${J/2} )`),ue.attr("transform",`translate(${-vt.width/2-Ot-(vt.x-(vt.left??0))}, ${-vt.height/2-(vt.y-(vt.top??0))})`),dt(d,tt),d.intersect=function(l){const T=oe.rect(d,l),N=T.y-(d.y??0);if(0!=Z&&(Math.abs(N)<(d.height??0)/2||Math.abs(N)==(d.height??0)/2&&Math.abs(T.x-(d.x??0))>(d.width??0)/2-Ot)){let st=Ot*Ot*(1-N*N/(Z*Z));0!=st&&(st=Math.sqrt(Math.abs(st))),st=Ot-st,l.x-(d.x??0)>0&&(st=-st),T.x+=st}return T},kt})).apply(this,arguments)}function Ve(Gt,d){return gt.apply(this,arguments)}function gt(){return(gt=(0,ot.A)(function*(Gt,d){const{labelStyles:ct,nodeStyles:Xt}=(0,L.GX)(d);d.labelStyle=ct;const{shapeSvg:kt,bbox:vt}=yield wt(Gt,d,Rt(d)),ue=vt.width+d.padding,nt=vt.height+d.padding,Dt=[{x:-3*nt/6,y:0},{x:ue+3*nt/6,y:0},{x:ue,y:-nt},{x:0,y:-nt}];let J;const{cssStyles:Z}=d;if("handDrawn"===d.look){const Ot=At.A.svg(kt),fe=(0,L.Fr)(d,{}),Le=q(Dt),tt=Ot.path(Le,fe);J=kt.insert(()=>tt,":first-child").attr("transform",`translate(${-ue/2}, ${nt/2})`),Z&&J.attr("style",Z)}else J=B(kt,ue,nt,Dt);return Xt&&J.attr("style",Xt),d.width=ue,d.height=nt,dt(d,J),d.intersect=function(Ot){return oe.polygon(d,Dt,Ot)},kt})).apply(this,arguments)}function Lt(Gt,d){return Kt.apply(this,arguments)}function Kt(){return(Kt=(0,ot.A)(function*(Gt,d){const{labelStyles:ct,nodeStyles:Xt}=(0,L.GX)(d);d.labelStyle=ct;const{shapeSvg:kt,bbox:vt}=yield wt(Gt,d,Rt(d)),Dt=Math.max(60,vt.width+2*(d.padding??0),d?.width??0),J=Math.max(20,vt.height+2*(d.padding??0),d?.height??0),{cssStyles:Z}=d,Ot=At.A.svg(kt),fe=(0,L.Fr)(d,{});"handDrawn"!==d.look&&(fe.roughness=0,fe.fillStyle="solid");const Le=[{x:-Dt/2*.8,y:-J/2},{x:Dt/2*.8,y:-J/2},{x:Dt/2,y:-J/2*.6},{x:Dt/2,y:J/2},{x:-Dt/2,y:J/2},{x:-Dt/2,y:-J/2*.6}],tt=q(Le),l=Ot.path(tt,fe),T=kt.insert(()=>l,":first-child");return T.attr("class","basic label-container"),Z&&"handDrawn"!==d.look&&T.selectChildren("path").attr("style",Z),Xt&&"handDrawn"!==d.look&&T.selectChildren("path").attr("style",Xt),dt(d,T),d.intersect=function(N){return oe.polygon(d,Le,N)},kt})).apply(this,arguments)}function Je(Gt,d){return Xr.apply(this,arguments)}function Xr(){return(Xr=(0,ot.A)(function*(Gt,d){const{labelStyles:ct,nodeStyles:Xt}=(0,L.GX)(d);d.labelStyle=ct;const{shapeSvg:kt,bbox:vt,label:ue}=yield wt(Gt,d,Rt(d)),nt=(0,ut._3)((0,ut.D7)().flowchart?.htmlLabels),Dt=vt.width+(d.padding??0),J=Dt+vt.height,Z=Dt+vt.height,Ot=[{x:0,y:0},{x:Z,y:0},{x:Z/2,y:-J}],{cssStyles:fe}=d,Le=At.A.svg(kt),tt=(0,L.Fr)(d,{});"handDrawn"!==d.look&&(tt.roughness=0,tt.fillStyle="solid");const l=q(Ot),T=Le.path(l,tt),N=kt.insert(()=>T,":first-child").attr("transform",`translate(${-J/2}, ${J/2})`);return fe&&"handDrawn"!==d.look&&N.selectChildren("path").attr("style",fe),Xt&&"handDrawn"!==d.look&&N.selectChildren("path").attr("style",Xt),d.width=Dt,d.height=J,dt(d,N),ue.attr("transform",`translate(${-vt.width/2-(vt.x-(vt.left??0))}, ${J/2-(vt.height+(d.padding??0)/(nt?2:1)-(vt.y-(vt.top??0)))})`),d.intersect=function(st){return $.Rm.info("Triangle intersect",d,Ot,st),oe.polygon(d,Ot,st)},kt})).apply(this,arguments)}function Gr(Gt,d){return aa.apply(this,arguments)}function aa(){return(aa=(0,ot.A)(function*(Gt,d){const{labelStyles:ct,nodeStyles:Xt}=(0,L.GX)(d);d.labelStyle=ct;const{shapeSvg:kt,bbox:vt,label:ue}=yield wt(Gt,d,Rt(d)),nt=Math.max(vt.width+2*(d.padding??0),d?.width??0),Dt=Math.max(vt.height+2*(d.padding??0),d?.height??0),J=Dt/8,Z=Dt+J,{cssStyles:Ot}=d,Le=70-nt,tt=Le>0?Le/2:0,l=At.A.svg(kt),T=(0,L.Fr)(d,{});"handDrawn"!==d.look&&(T.roughness=0,T.fillStyle="solid");const N=[{x:-nt/2-tt,y:Z/2},...ar(-nt/2-tt,Z/2,nt/2+tt,Z/2,J,.8),{x:nt/2+tt,y:-Z/2},{x:-nt/2-tt,y:-Z/2}],st=q(N),bt=l.path(st,T),Ie=kt.insert(()=>bt,":first-child");return Ie.attr("class","basic label-container"),Ot&&"handDrawn"!==d.look&&Ie.selectAll("path").attr("style",Ot),Xt&&"handDrawn"!==d.look&&Ie.selectAll("path").attr("style",Xt),Ie.attr("transform",`translate(0,${-J/2})`),ue.attr("transform",`translate(${-nt/2+(d.padding??0)-(vt.x-(vt.left??0))},${-Dt/2+(d.padding??0)-J-(vt.y-(vt.top??0))})`),dt(d,Ie),d.intersect=function(Qt){return oe.polygon(d,N,Qt)},kt})).apply(this,arguments)}function La(Gt,d){return fa.apply(this,arguments)}function fa(){return(fa=(0,ot.A)(function*(Gt,d){const{labelStyles:ct,nodeStyles:Xt}=(0,L.GX)(d);d.labelStyle=ct;const{shapeSvg:kt,bbox:vt}=yield wt(Gt,d,Rt(d)),Dt=Math.max(vt.width+2*(d.padding??0),d?.width??0),J=Math.max(vt.height+2*(d.padding??0),d?.height??0),Z=Dt/J;let Ot=Dt,fe=J;Ot>fe*Z?fe=Ot/Z:Ot=fe*Z,Ot=Math.max(Ot,100),fe=Math.max(fe,50);const Le=Math.min(.2*fe,fe/4),tt=fe+2*Le,{cssStyles:l}=d,T=At.A.svg(kt),N=(0,L.Fr)(d,{});"handDrawn"!==d.look&&(N.roughness=0,N.fillStyle="solid");const st=[{x:-Ot/2,y:tt/2},...ar(-Ot/2,tt/2,Ot/2,tt/2,Le,1),{x:Ot/2,y:-tt/2},...ar(Ot/2,-tt/2,-Ot/2,-tt/2,Le,-1)],bt=q(st),Ie=T.path(bt,N),Qt=kt.insert(()=>Ie,":first-child");return Qt.attr("class","basic label-container"),l&&"handDrawn"!==d.look&&Qt.selectAll("path").attr("style",l),Xt&&"handDrawn"!==d.look&&Qt.selectAll("path").attr("style",Xt),dt(d,Qt),d.intersect=function(Ue){return oe.polygon(d,st,Ue)},kt})).apply(this,arguments)}function wa(Gt,d){return ja.apply(this,arguments)}function ja(){return(ja=(0,ot.A)(function*(Gt,d){const{labelStyles:ct,nodeStyles:Xt}=(0,L.GX)(d);d.labelStyle=ct;const{shapeSvg:kt,bbox:vt,label:ue}=yield wt(Gt,d,Rt(d)),nt=Math.max(vt.width+2*(d.padding??0),d?.width??0),Dt=Math.max(vt.height+2*(d.padding??0),d?.height??0),Z=-nt/2,Ot=-Dt/2,{cssStyles:fe}=d,Le=At.A.svg(kt),tt=(0,L.Fr)(d,{}),l=[{x:Z-5,y:Ot-5},{x:Z-5,y:Ot+Dt},{x:Z+nt,y:Ot+Dt},{x:Z+nt,y:Ot-5}],T=`M${Z-5},${Ot-5} L${Z+nt},${Ot-5} L${Z+nt},${Ot+Dt} L${Z-5},${Ot+Dt} L${Z-5},${Ot-5}\n                M${Z-5},${Ot} L${Z+nt},${Ot}\n                M${Z},${Ot-5} L${Z},${Ot+Dt}`;"handDrawn"!==d.look&&(tt.roughness=0,tt.fillStyle="solid");const N=Le.path(T,tt),st=kt.insert(()=>N,":first-child");return st.attr("transform","translate(2.5, 2.5)"),st.attr("class","basic label-container"),fe&&"handDrawn"!==d.look&&st.selectAll("path").attr("style",fe),Xt&&"handDrawn"!==d.look&&st.selectAll("path").attr("style",Xt),ue.attr("transform",`translate(${-vt.width/2+2.5-(vt.x-(vt.left??0))}, ${-vt.height/2+2.5-(vt.y-(vt.top??0))})`),dt(d,st),d.intersect=function(bt){return oe.polygon(d,l,bt)},kt})).apply(this,arguments)}function $a(Gt,d){return yi.apply(this,arguments)}function yi(){return(yi=(0,ot.A)(function*(Gt,d){const ct=d;if(ct.alias&&(d.label=ct.alias),"handDrawn"===d.look){const{themeVariables:Vi}=(0,ut.zj)(),{background:an}=Vi,Ni={...d,id:d.id+"-background",look:"default",cssStyles:["stroke: none",`fill: ${an}`]};yield $a(Gt,Ni)}const Xt=(0,ut.zj)();d.useHtmlLabels=Xt.htmlLabels;let kt=Xt.er?.diagramPadding??10,vt=Xt.er?.entityPadding??6;const{cssStyles:ue}=d,{labelStyles:nt,nodeStyles:Dt}=(0,L.GX)(d);if(0===ct.attributes.length&&d.label){const Vi={rx:0,ry:0,labelPaddingX:kt,labelPaddingY:1.5*kt,classes:""};(0,Pt.Un)(d.label,Xt)+2*Vi.labelPaddingX<Xt.er.minEntityWidth&&(d.width=Xt.er.minEntityWidth);const an=yield jt(Gt,d,Vi);if(!(0,ut._3)(Xt.htmlLabels)){const Ni=an.select("text"),bn=Ni.node()?.getBBox();Ni.attr("transform",`translate(${-bn.width/2}, 0)`)}return an}Xt.htmlLabels||(kt*=1.25,vt*=1.25);let J=Rt(d);J||(J="node default");const Z=Gt.insert("g").attr("class",J).attr("id",d.domId||d.id),Ot=yield Ei(Z,d.label??"",Xt,0,0,["name"],nt);Ot.height+=vt;let fe=0;const Le=[],tt=[];let l=0,T=0,N=0,st=0,bt=!0,Ie=!0;for(const Vi of ct.attributes){const an=yield Ei(Z,Vi.type,Xt,0,fe,["attribute-type"],nt);l=Math.max(l,an.width+kt);const Ni=yield Ei(Z,Vi.name,Xt,0,fe,["attribute-name"],nt);T=Math.max(T,Ni.width+kt);const bn=yield Ei(Z,Vi.keys.join(),Xt,0,fe,["attribute-keys"],nt);N=Math.max(N,bn.width+kt);const pn=yield Ei(Z,Vi.comment,Xt,0,fe,["attribute-comment"],nt);st=Math.max(st,pn.width+kt);const Ui=Math.max(an.height,Ni.height,bn.height,pn.height)+vt;tt.push({yOffset:fe,rowHeight:Ui}),fe+=Ui}let Qt=4;N<=kt&&(bt=!1,N=0,Qt--),st<=kt&&(Ie=!1,st=0,Qt--);const Ue=Z.node().getBBox();if(Ot.width+2*kt-(l+T+N+st)>0){const Vi=Ot.width+2*kt-(l+T+N+st);l+=Vi/Qt,T+=Vi/Qt,N>0&&(N+=Vi/Qt),st>0&&(st+=Vi/Qt)}const br=l+T+N+st,Sr=At.A.svg(Z),ta=(0,L.Fr)(d,{});"handDrawn"!==d.look&&(ta.roughness=0,ta.fillStyle="solid");let Ir=0;tt.length>0&&(Ir=tt.reduce((Vi,an)=>Vi+(an?.rowHeight??0),0));const la=Math.max(Ue.width+2*kt,d?.width||0,br),Ca=Math.max((Ir??0)+Ot.height,d?.height||0),ka=-la/2,Ba=-Ca/2;Z.selectAll("g:not(:first-child)").each((Vi,an,Ni)=>{const bn=(0,A.Ltv)(Ni[an]),pn=bn.attr("transform");let Ui=0,os=0;if(pn){const ro=RegExp(/translate\(([^,]+),([^)]+)\)/).exec(pn);ro&&(Ui=parseFloat(ro[1]),os=parseFloat(ro[2]),bn.attr("class").includes("attribute-name")?Ui+=l:bn.attr("class").includes("attribute-keys")?Ui+=l+T:bn.attr("class").includes("attribute-comment")&&(Ui+=l+T+N))}bn.attr("transform",`translate(${ka+kt/2+Ui}, ${os+Ba+Ot.height+vt/2})`)}),Z.select(".name").attr("transform","translate("+-Ot.width/2+", "+(Ba+vt/2)+")");const Xa=Sr.rectangle(ka,Ba,la,Ca,ta),za=Z.insert(()=>Xa,":first-child").attr("style",ue.join("")),{themeVariables:Na}=(0,ut.zj)(),{rowEven:ui,rowOdd:ji,nodeBorder:$n}=Na;Le.push(0);for(const[Vi,an]of tt.entries()){const bn=(Vi+1)%2==0&&0!==an.yOffset,pn=Sr.rectangle(ka,Ot.height+Ba+an?.yOffset,la,an?.rowHeight,{...ta,fill:bn?ui:ji,stroke:$n});Z.insert(()=>pn,"g.label").attr("style",ue.join("")).attr("class","row-rect-"+(bn?"even":"odd"))}let Tn=Sr.line(ka,Ot.height+Ba,la+ka,Ot.height+Ba,ta);Z.insert(()=>Tn).attr("class","divider"),Tn=Sr.line(l+ka,Ot.height+Ba,l+ka,Ca+Ba,ta),Z.insert(()=>Tn).attr("class","divider"),bt&&(Tn=Sr.line(l+T+ka,Ot.height+Ba,l+T+ka,Ca+Ba,ta),Z.insert(()=>Tn).attr("class","divider")),Ie&&(Tn=Sr.line(l+T+N+ka,Ot.height+Ba,l+T+N+ka,Ca+Ba,ta),Z.insert(()=>Tn).attr("class","divider"));for(const Vi of Le)Tn=Sr.line(ka,Ot.height+Ba+Vi,la+ka,Ot.height+Ba+Vi,ta),Z.insert(()=>Tn).attr("class","divider");if(dt(d,za),Dt&&"handDrawn"!==d.look){const an=Dt.split(";")?.filter(Ni=>Ni.includes("stroke"))?.map(Ni=>`${Ni}`).join("; ");Z.selectAll("path").attr("style",an??""),Z.selectAll(".row-rect-even path").attr("style",Dt)}return d.intersect=function(Vi){return oe.rect(d,Vi)},Z})).apply(this,arguments)}function Ei(Gt,d,ct){return mi.apply(this,arguments)}function mi(){return(mi=(0,ot.A)(function*(Gt,d,ct,Xt=0,kt=0,vt=[],ue=""){const nt=Gt.insert("g").attr("class",`label ${vt.join(" ")}`).attr("transform",`translate(${Xt}, ${kt})`).attr("style",ue);d!==(0,ut.QO)(d)&&(d=(d=(0,ut.QO)(d)).replaceAll("<","&lt;").replaceAll(">","&gt;"));const Dt=nt.node().appendChild(yield(0,S.GZ)(nt,d,{width:(0,Pt.Un)(d,ct)+100,style:ue,useHtmlLabels:ct.htmlLabels},ct));if(d.includes("&lt;")||d.includes("&gt;")){let Z=Dt.children[0];for(Z.textContent=Z.textContent.replaceAll("&lt;","<").replaceAll("&gt;",">");Z.childNodes[0];)Z=Z.childNodes[0],Z.textContent=Z.textContent.replaceAll("&lt;","<").replaceAll("&gt;",">")}let J=Dt.getBBox();if((0,ut._3)(ct.htmlLabels)){const Z=Dt.children[0];Z.style.textAlign="start";const Ot=(0,A.Ltv)(Dt);J=Z.getBoundingClientRect(),Ot.attr("width",J.width),Ot.attr("height",J.height)}return J})).apply(this,arguments)}function Fa(Gt,d,ct,Xt){return Pr.apply(this,arguments)}function Pr(){return(Pr=(0,ot.A)(function*(Gt,d,ct,Xt,kt=ct.class.padding??12){const vt=Xt?0:3,ue=Gt.insert("g").attr("class",Rt(d)).attr("id",d.domId||d.id);let nt=null,Dt=null,J=null,Z=null,Ot=0,fe=0,Le=0;if(nt=ue.insert("g").attr("class","annotation-group text"),d.annotations.length>0){const st=d.annotations[0];yield ya(nt,{text:`\xab${st}\xbb`},0),Ot=nt.node().getBBox().height}Dt=ue.insert("g").attr("class","label-group text"),yield ya(Dt,d,0,["font-weight: bolder"]);const tt=Dt.node().getBBox();fe=tt.height,J=ue.insert("g").attr("class","members-group text");let l=0;for(const st of d.members)l+=(yield ya(J,st,l,[st.parseClassifier()]))+vt;Le=J.node().getBBox().height,Le<=0&&(Le=kt/2),Z=ue.insert("g").attr("class","methods-group text");let T=0;for(const st of d.methods)T+=(yield ya(Z,st,T,[st.parseClassifier()]))+vt;let N=ue.node().getBBox();if(null!==nt){const st=nt.node().getBBox();nt.attr("transform",`translate(${-st.width/2})`)}return Dt.attr("transform",`translate(${-tt.width/2}, ${Ot})`),N=ue.node().getBBox(),J.attr("transform",`translate(0, ${Ot+fe+2*kt})`),N=ue.node().getBBox(),Z.attr("transform",`translate(0, ${Ot+fe+(Le?Le+4*kt:2*kt)})`),N=ue.node().getBBox(),{shapeSvg:ue,bbox:N}})).apply(this,arguments)}function ya(Gt,d,ct){return Ya.apply(this,arguments)}function Ya(){return(Ya=(0,ot.A)(function*(Gt,d,ct,Xt=[]){const kt=Gt.insert("g").attr("class","label").attr("style",Xt.join("; ")),vt=(0,ut.zj)();let ue="useHtmlLabels"in d?d.useHtmlLabels:(0,ut._3)(vt.htmlLabels)??!0,nt="";nt="text"in d?d.text:d.label,!ue&&nt.startsWith("\\")&&(nt=nt.substring(1)),(0,ut.Wi)(nt)&&(ue=!0);const Dt=yield(0,S.GZ)(kt,(0,ut.oB)((0,Pt.Sm)(nt)),{width:(0,Pt.Un)(nt,vt)+50,classes:"markdown-node-label",useHtmlLabels:ue},vt);let J,Z=1;if(ue){const Ot=Dt.children[0],fe=(0,A.Ltv)(Dt);Z=Ot.innerHTML.split("<br>").length,Ot.innerHTML.includes("</math>")&&(Z+=Ot.innerHTML.split("<mrow>").length-1);const Le=Ot.getElementsByTagName("img");if(Le){const tt=""===nt.replace(/<img[^>]*>/g,"").trim();yield Promise.all([...Le].map(l=>new Promise(T=>{function N(){if(l.style.display="flex",l.style.flexDirection="column",tt){const st=vt.fontSize?.toString()??window.getComputedStyle(document.body).fontSize,Ie=5*parseInt(st,10)+"px";l.style.minWidth=Ie,l.style.maxWidth=Ie}else l.style.width="100%";T(l)}(0,$.K2)(N,"setupImage"),setTimeout(()=>{l.complete&&N()}),l.addEventListener("error",N),l.addEventListener("load",N)})))}J=Ot.getBoundingClientRect(),fe.attr("width",J.width),fe.attr("height",J.height)}else{Xt.includes("font-weight: bolder")&&(0,A.Ltv)(Dt).selectAll("tspan").attr("font-weight",""),Z=Dt.children.length;const Ot=Dt.children[0];(""===Dt.textContent||Dt.textContent.includes("&gt"))&&(Ot.textContent=nt[0]+nt.substring(1).replaceAll("&gt;",">").replaceAll("&lt;","<").trim()," "===nt[1]&&(Ot.textContent=Ot.textContent[0]+" "+Ot.textContent.substring(1))),"undefined"===Ot.textContent&&(Ot.textContent=""),J=Dt.getBBox()}return kt.attr("transform","translate(0,"+(-J.height/(2*Z)+ct)+")"),J.height})).apply(this,arguments)}function ni(Gt,d){return Mr.apply(this,arguments)}function Mr(){return(Mr=(0,ot.A)(function*(Gt,d){const ct=(0,ut.D7)(),Xt=ct.class.padding??12,kt=Xt,vt=d.useHtmlLabels??(0,ut._3)(ct.htmlLabels)??!0,ue=d;ue.annotations=ue.annotations??[],ue.members=ue.members??[],ue.methods=ue.methods??[];const{shapeSvg:nt,bbox:Dt}=yield Fa(Gt,d,ct,vt,kt),{labelStyles:J,nodeStyles:Z}=(0,L.GX)(d);d.labelStyle=J,d.cssStyles=ue.styles||"";const Ot=ue.styles?.join(";")||Z||"";d.cssStyles||(d.cssStyles=Ot.replaceAll("!important","").split(";"));const fe=0===ue.members.length&&0===ue.methods.length&&!ct.class?.hideEmptyMembersBox,Le=At.A.svg(nt),tt=(0,L.Fr)(d,{});"handDrawn"!==d.look&&(tt.roughness=0,tt.fillStyle="solid");const l=Dt.width;let T=Dt.height;0===ue.members.length&&0===ue.methods.length?T+=kt:ue.members.length>0&&0===ue.methods.length&&(T+=2*kt);const N=-l/2,st=-T/2,bt=Le.rectangle(N-Xt,st-Xt-(fe?Xt:0===ue.members.length&&0===ue.methods.length?-Xt/2:0),l+2*Xt,T+2*Xt+(fe?2*Xt:0===ue.members.length&&0===ue.methods.length?-Xt:0),tt),Ie=nt.insert(()=>bt,":first-child");Ie.attr("class","basic label-container");const Qt=Ie.node().getBBox();nt.selectAll(".text").each((ta,Ir,la)=>{const Ca=(0,A.Ltv)(la[Ir]),ka=Ca.attr("transform");let Ba=0;if(ka){const ui=RegExp(/translate\(([^,]+),([^)]+)\)/).exec(ka);ui&&(Ba=parseFloat(ui[2]))}let Xa=Ba+st+Xt-(fe?Xt:0===ue.members.length&&0===ue.methods.length?-Xt/2:0);vt||(Xa-=4);let za=N;(Ca.attr("class").includes("label-group")||Ca.attr("class").includes("annotation-group"))&&(za=-Ca.node()?.getBBox().width/2||0,nt.selectAll("text").each(function(Na,ui,ji){"middle"===window.getComputedStyle(ji[ui]).textAnchor&&(za=0)})),Ca.attr("transform",`translate(${za}, ${Xa})`)});const Ue=nt.select(".annotation-group").node().getBBox().height-(fe?Xt/2:0)||0,br=nt.select(".label-group").node().getBBox().height-(fe?Xt/2:0)||0,Sr=nt.select(".members-group").node().getBBox().height-(fe?Xt/2:0)||0;if(ue.members.length>0||ue.methods.length>0||fe){const ta=Le.line(Qt.x,Ue+br+st+Xt,Qt.x+Qt.width,Ue+br+st+Xt,tt);nt.insert(()=>ta).attr("class","divider").attr("style",Ot)}if(fe||ue.members.length>0||ue.methods.length>0){const ta=Le.line(Qt.x,Ue+br+Sr+st+2*kt+Xt,Qt.x+Qt.width,Ue+br+Sr+st+Xt+2*kt,tt);nt.insert(()=>ta).attr("class","divider").attr("style",Ot)}if("handDrawn"!==ue.look&&nt.selectAll("path").attr("style",Ot),Ie.select(":nth-child(2)").attr("style",Ot),nt.selectAll(".divider").select("path").attr("style",Ot),d.labelStyle?nt.selectAll("span").attr("style",d.labelStyle):nt.selectAll("span").attr("style",Ot),!vt){const ta=RegExp(/color\s*:\s*([^;]*)/),Ir=ta.exec(Ot);if(Ir){const la=Ir[0].replace("color","fill");nt.selectAll("tspan").attr("style",la)}else if(J){const la=ta.exec(J);if(la){const Ca=la[0].replace("color","fill");nt.selectAll("tspan").attr("style",Ca)}}}return dt(d,Ie),d.intersect=function(ta){return oe.rect(d,ta)},nt})).apply(this,arguments)}function Pi(Gt,d){return ua.apply(this,arguments)}function ua(){return(ua=(0,ot.A)(function*(Gt,d){const{labelStyles:ct,nodeStyles:Xt}=(0,L.GX)(d);d.labelStyle=ct;const kt=d,vt=d,Dt="verifyMethod"in d,J=Rt(d),Z=Gt.insert("g").attr("class",J).attr("id",d.domId??d.id);let Ot;Ot=Dt?yield ki(Z,`&lt;&lt;${kt.type}&gt;&gt;`,0,d.labelStyle):yield ki(Z,"&lt;&lt;Element&gt;&gt;",0,d.labelStyle);let fe=Ot;const Le=yield ki(Z,kt.name,fe,d.labelStyle+"; font-weight: bold;");fe+=Le+20,Dt?(fe+=(yield ki(Z,kt.requirementId?`ID: ${kt.requirementId}`:"",fe,d.labelStyle)),fe+=(yield ki(Z,kt.text?`Text: ${kt.text}`:"",fe,d.labelStyle)),fe+=(yield ki(Z,kt.risk?`Risk: ${kt.risk}`:"",fe,d.labelStyle)),yield ki(Z,kt.verifyMethod?`Verification: ${kt.verifyMethod}`:"",fe,d.labelStyle)):(fe+=(yield ki(Z,vt.type?`Type: ${vt.type}`:"",fe,d.labelStyle)),yield ki(Z,vt.docRef?`Doc Ref: ${vt.docRef}`:"",fe,d.labelStyle));const tt=(Z.node()?.getBBox().width??200)+20,l=(Z.node()?.getBBox().height??200)+20,T=-tt/2,N=-l/2,st=At.A.svg(Z),bt=(0,L.Fr)(d,{});"handDrawn"!==d.look&&(bt.roughness=0,bt.fillStyle="solid");const Ie=st.rectangle(T,N,tt,l,bt),Qt=Z.insert(()=>Ie,":first-child");if(Qt.attr("class","basic label-container").attr("style",Xt),Z.selectAll(".label").each((Ue,br,Sr)=>{const ta=(0,A.Ltv)(Sr[br]),Ir=ta.attr("transform");let la=0,Ca=0;if(Ir){const za=RegExp(/translate\(([^,]+),([^)]+)\)/).exec(Ir);za&&(la=parseFloat(za[1]),Ca=parseFloat(za[2]))}let Ba=T+10;(0===br||1===br)&&(Ba=la),ta.attr("transform",`translate(${Ba}, ${Ca-l/2+20})`)}),fe>Ot+Le+20){const Ue=st.line(T,N+Ot+Le+20,T+tt,N+Ot+Le+20,bt);Z.insert(()=>Ue).attr("style",Xt)}return dt(d,Qt),d.intersect=function(Ue){return oe.rect(d,Ue)},Z})).apply(this,arguments)}function ki(Gt,d,ct){return Bi.apply(this,arguments)}function Bi(){return(Bi=(0,ot.A)(function*(Gt,d,ct,Xt=""){if(""===d)return 0;const kt=Gt.insert("g").attr("class","label").attr("style",Xt),vt=(0,ut.D7)(),ue=vt.htmlLabels??!0,nt=yield(0,S.GZ)(kt,(0,ut.oB)((0,Pt.Sm)(d)),{width:(0,Pt.Un)(d,vt)+50,classes:"markdown-node-label",useHtmlLabels:ue,style:Xt},vt);let Dt;if(ue){const J=nt.children[0],Z=(0,A.Ltv)(nt);Dt=J.getBoundingClientRect(),Z.attr("width",Dt.width),Z.attr("height",Dt.height)}else{const J=nt.children[0];for(const Z of J.children)Z.textContent=Z.textContent.replaceAll("&gt;",">").replaceAll("&lt;","<"),Xt&&Z.setAttribute("style",Xt);Dt=nt.getBBox(),Dt.height+=6}return kt.attr("transform",`translate(${-Dt.width/2},${-Dt.height/2+ct})`),Dt.height})).apply(this,arguments)}(0,$.K2)(M,"tiltedCylinder"),(0,$.K2)(Ve,"trapezoid"),(0,$.K2)(Lt,"trapezoidalPentagon"),(0,$.K2)(Je,"triangle"),(0,$.K2)(Gr,"waveEdgedRectangle"),(0,$.K2)(La,"waveRectangle"),(0,$.K2)(wa,"windowPane"),(0,$.K2)($a,"erBox"),(0,$.K2)(Ei,"addText"),(0,$.K2)(Fa,"textHelper"),(0,$.K2)(ya,"addText"),(0,$.K2)(ni,"classBox"),(0,$.K2)(Pi,"requirementBox"),(0,$.K2)(ki,"addText");var Wi=(0,$.K2)(Gt=>{switch(Gt){case"Very High":return"red";case"High":return"orange";case"Medium":return null;case"Low":return"blue";case"Very Low":return"lightblue"}},"colorFromPriority");function ln(Gt,d,ct){return Ji.apply(this,arguments)}function Ji(){return(Ji=(0,ot.A)(function*(Gt,d,{config:ct}){const{labelStyles:Xt,nodeStyles:kt}=(0,L.GX)(d);d.labelStyle=Xt||"";const ue=d.width;d.width=(d.width??200)-10;const{shapeSvg:nt,bbox:Dt,label:J}=yield wt(Gt,d,Rt(d)),Z=d.padding||10;let fe,Ot="";"ticket"in d&&d.ticket&&ct?.kanban?.ticketBaseUrl&&(Ot=ct?.kanban?.ticketBaseUrl.replace("#TICKET#",d.ticket),fe=nt.insert("svg:a",":first-child").attr("class","kanban-ticket-link").attr("xlink:href",Ot).attr("target","_blank"));const Le={useHtmlLabels:d.useHtmlLabels,labelStyle:d.labelStyle||"",width:d.width,img:d.img,padding:d.padding||8,centerLabel:!1};let tt,l;({label:tt,bbox:l}=fe?yield Ge(fe,"ticket"in d&&d.ticket||"",Le):yield Ge(nt,"ticket"in d&&d.ticket||"",Le));const{label:T,bbox:N}=yield Ge(nt,"assigned"in d&&d.assigned||"",Le);d.width=ue;const bt=d?.width||0,Ie=Math.max(l.height,N.height)/2,Qt=Math.max(Dt.height+20,d?.height||0)+Ie,Ue=-bt/2,br=-Qt/2;let Sr;J.attr("transform","translate("+(Z-bt/2)+", "+(-Ie-Dt.height/2)+")"),tt.attr("transform","translate("+(Z-bt/2)+", "+(Dt.height/2-Ie)+")"),T.attr("transform","translate("+(Z+bt/2-N.width-20)+", "+(Dt.height/2-Ie)+")");const{rx:ta,ry:Ir}=d,{cssStyles:la}=d;if("handDrawn"===d.look){const Ca=At.A.svg(nt),ka=(0,L.Fr)(d,{}),Ba=ta||Ir?Ca.path(Se(Ue,br,bt,Qt,ta||0),ka):Ca.rectangle(Ue,br,bt,Qt,ka);Sr=nt.insert(()=>Ba,":first-child"),Sr.attr("class","basic label-container").attr("style",la||null)}else{Sr=nt.insert("rect",":first-child"),Sr.attr("class","basic label-container __APA__").attr("style",kt).attr("rx",ta??5).attr("ry",Ir??5).attr("x",Ue).attr("y",br).attr("width",bt).attr("height",Qt);const Ca="priority"in d&&d.priority;if(Ca){const ka=nt.append("line"),Ba=Ue+2,Xa=br+Math.floor((ta??0)/2),za=br+Qt-Math.floor((ta??0)/2);ka.attr("x1",Ba).attr("y1",Xa).attr("x2",Ba).attr("y2",za).attr("stroke-width","4").attr("stroke",Wi(Ca))}}return dt(d,Sr),d.height=Qt,d.intersect=function(Ca){return oe.rect(d,Ca)},nt})).apply(this,arguments)}function Oi(Gt,d){return zi.apply(this,arguments)}function zi(){return(zi=(0,ot.A)(function*(Gt,d){const{labelStyles:ct,nodeStyles:Xt}=(0,L.GX)(d);d.labelStyle=ct;const{shapeSvg:kt,bbox:vt,halfPadding:ue,label:nt}=yield wt(Gt,d,Rt(d)),Dt=vt.width+10*ue,J=vt.height+8*ue,Z=.15*Dt,{cssStyles:Ot}=d,Le=vt.height+20,tt=Math.max(Dt,vt.width+20),l=Math.max(J,Le);let T;nt.attr("transform",`translate(${-vt.width/2}, ${-vt.height/2})`);const N=`M0 0 \n    a${Z},${Z} 1 0,0 ${.25*tt},${-1*l*.1}\n    a${Z},${Z} 1 0,0 ${.25*tt},0\n    a${Z},${Z} 1 0,0 ${.25*tt},0\n    a${Z},${Z} 1 0,0 ${.25*tt},${.1*l}\n\n    a${Z},${Z} 1 0,0 ${.15*tt},${.33*l}\n    a${.8*Z},${.8*Z} 1 0,0 0,${.34*l}\n    a${Z},${Z} 1 0,0 ${-1*tt*.15},${.33*l}\n\n    a${Z},${Z} 1 0,0 ${-1*tt*.25},${.15*l}\n    a${Z},${Z} 1 0,0 ${-1*tt*.25},0\n    a${Z},${Z} 1 0,0 ${-1*tt*.25},0\n    a${Z},${Z} 1 0,0 ${-1*tt*.25},${-1*l*.15}\n\n    a${Z},${Z} 1 0,0 ${-1*tt*.1},${-1*l*.33}\n    a${.8*Z},${.8*Z} 1 0,0 0,${-1*l*.34}\n    a${Z},${Z} 1 0,0 ${.1*tt},${-1*l*.33}\n  H0 V0 Z`;if("handDrawn"===d.look){const st=At.A.svg(kt),bt=(0,L.Fr)(d,{}),Ie=st.path(N,bt);T=kt.insert(()=>Ie,":first-child"),T.attr("class","basic label-container").attr("style",(0,Pt.KL)(Ot))}else T=kt.insert("path",":first-child").attr("class","basic label-container").attr("style",Xt).attr("d",N);return T.attr("transform",`translate(${-tt/2}, ${-l/2})`),dt(d,T),d.calcIntersect=function(st,bt){return oe.rect(st,bt)},d.intersect=function(st){return $.Rm.info("Bang intersect",d,st),oe.rect(d,st)},kt})).apply(this,arguments)}function cn(Gt,d){return Ln.apply(this,arguments)}function Ln(){return(Ln=(0,ot.A)(function*(Gt,d){const{labelStyles:ct,nodeStyles:Xt}=(0,L.GX)(d);d.labelStyle=ct;const{shapeSvg:kt,bbox:vt,halfPadding:ue,label:nt}=yield wt(Gt,d,Rt(d)),Dt=vt.width+2*ue,J=vt.height+2*ue,Z=.15*Dt,Ot=.25*Dt,fe=.35*Dt,Le=.2*Dt,{cssStyles:tt}=d;let l;const T=`M0 0 \n    a${Z},${Z} 0 0,1 ${.25*Dt},${-1*Dt*.1}\n    a${fe},${fe} 1 0,1 ${.4*Dt},${-1*Dt*.1}\n    a${Ot},${Ot} 1 0,1 ${.35*Dt},${.2*Dt}\n\n    a${Z},${Z} 1 0,1 ${.15*Dt},${.35*J}\n    a${Le},${Le} 1 0,1 ${-1*Dt*.15},${.65*J}\n\n    a${Ot},${Z} 1 0,1 ${-1*Dt*.25},${.15*Dt}\n    a${fe},${fe} 1 0,1 ${-1*Dt*.5},0\n    a${Z},${Z} 1 0,1 ${-1*Dt*.25},${-1*Dt*.15}\n\n    a${Z},${Z} 1 0,1 ${-1*Dt*.1},${-1*J*.35}\n    a${Le},${Le} 1 0,1 ${.1*Dt},${-1*J*.65}\n  H0 V0 Z`;if("handDrawn"===d.look){const N=At.A.svg(kt),st=(0,L.Fr)(d,{}),bt=N.path(T,st);l=kt.insert(()=>bt,":first-child"),l.attr("class","basic label-container").attr("style",(0,Pt.KL)(tt))}else l=kt.insert("path",":first-child").attr("class","basic label-container").attr("style",Xt).attr("d",T);return nt.attr("transform",`translate(${-vt.width/2}, ${-vt.height/2})`),l.attr("transform",`translate(${-Dt/2}, ${-J/2})`),dt(d,l),d.calcIntersect=function(N,st){return oe.rect(N,st)},d.intersect=function(N){return $.Rm.info("Cloud intersect",d,N),oe.rect(d,N)},kt})).apply(this,arguments)}function Bn(Gt,d){return Vn.apply(this,arguments)}function Vn(){return(Vn=(0,ot.A)(function*(Gt,d){const{labelStyles:ct,nodeStyles:Xt}=(0,L.GX)(d);d.labelStyle=ct;const{shapeSvg:kt,bbox:vt,halfPadding:ue,label:nt}=yield wt(Gt,d,Rt(d)),Dt=vt.width+8*ue,J=vt.height+2*ue,Ot=`\n    M${-Dt/2} ${J/2-5}\n    v${10-J}\n    q0,-5 5,-5\n    h${Dt-10}\n    q5,0 5,5\n    v${J-10}\n    q0,5 -5,5\n    h${10-Dt}\n    q-5,0 -5,-5\n    Z\n  `,fe=kt.append("path").attr("id","node-"+d.id).attr("class","node-bkg node-"+d.type).attr("style",Xt).attr("d",Ot);return kt.append("line").attr("class","node-line-").attr("x1",-Dt/2).attr("y1",J/2).attr("x2",Dt/2).attr("y2",J/2),nt.attr("transform",`translate(${-vt.width/2}, ${-vt.height/2})`),kt.append(()=>nt.node()),dt(d,fe),d.calcIntersect=function(Le,tt){return oe.rect(Le,tt)},d.intersect=function(Le){return oe.rect(d,Le)},kt})).apply(this,arguments)}function hn(Gt,d){return Un.apply(this,arguments)}function Un(){return(Un=(0,ot.A)(function*(Gt,d){return it(Gt,d,{padding:d.padding??0})})).apply(this,arguments)}(0,$.K2)(ln,"kanbanItem"),(0,$.K2)(Oi,"bang"),(0,$.K2)(cn,"cloud"),(0,$.K2)(Bn,"defaultMindmapNode"),(0,$.K2)(hn,"mindmapCircle");var tn=[{semanticName:"Process",name:"Rectangle",shortName:"rect",description:"Standard process shape",aliases:["proc","process","rectangle"],internalAliases:["squareRect"],handler:Sa},{semanticName:"Event",name:"Rounded Rectangle",shortName:"rounded",description:"Represents an event",aliases:["event"],internalAliases:["roundedRect"],handler:Pa},{semanticName:"Terminal Point",name:"Stadium",shortName:"stadium",description:"Terminal point",aliases:["terminal","pill"],handler:Va},{semanticName:"Subprocess",name:"Framed Rectangle",shortName:"fr-rect",description:"Subprocess",aliases:["subprocess","subproc","framed-rectangle","subroutine"],handler:ti},{semanticName:"Database",name:"Cylinder",shortName:"cyl",description:"Database storage",aliases:["db","database","cylinder"],handler:or},{semanticName:"Start",name:"Circle",shortName:"circle",description:"Starting point",aliases:["circ"],handler:it},{semanticName:"Bang",name:"Bang",shortName:"bang",description:"Bang",aliases:["bang"],handler:Oi},{semanticName:"Cloud",name:"Cloud",shortName:"cloud",description:"cloud",aliases:["cloud"],handler:cn},{semanticName:"Decision",name:"Diamond",shortName:"diam",description:"Decision-making step",aliases:["decision","diamond","question"],handler:W},{semanticName:"Prepare Conditional",name:"Hexagon",shortName:"hex",description:"Preparation or condition step",aliases:["hexagon","prepare"],handler:ne},{semanticName:"Data Input/Output",name:"Lean Right",shortName:"lean-r",description:"Represents input or output",aliases:["lean-right","in-out"],internalAliases:["lean_right"],handler:gr},{semanticName:"Data Input/Output",name:"Lean Left",shortName:"lean-l",description:"Represents output or input",aliases:["lean-left","out-in"],internalAliases:["lean_left"],handler:Xe},{semanticName:"Priority Action",name:"Trapezoid Base Bottom",shortName:"trap-b",description:"Priority action",aliases:["priority","trapezoid-bottom","trapezoid"],handler:Ve},{semanticName:"Manual Operation",name:"Trapezoid Base Top",shortName:"trap-t",description:"Represents a manual task",aliases:["manual","trapezoid-top","inv-trapezoid"],internalAliases:["inv_trapezoid"],handler:xt},{semanticName:"Stop",name:"Double Circle",shortName:"dbl-circ",description:"Represents a stop point",aliases:["double-circle"],internalAliases:["doublecircle"],handler:De},{semanticName:"Text Block",name:"Text Block",shortName:"text",description:"Text block",handler:Ce},{semanticName:"Card",name:"Notched Rectangle",shortName:"notch-rect",description:"Represents a card",aliases:["card","notched-rectangle"],handler:F},{semanticName:"Lined/Shaded Process",name:"Lined Rectangle",shortName:"lin-rect",description:"Lined process shape",aliases:["lined-rectangle","lined-process","lin-proc","shaded-process"],handler:Wa},{semanticName:"Start",name:"Small Circle",shortName:"sm-circ",description:"Small starting point",aliases:["start","small-circle"],internalAliases:["stateStart"],handler:Ka},{semanticName:"Stop",name:"Framed Circle",shortName:"fr-circ",description:"Stop point",aliases:["stop","framed-circle"],internalAliases:["stateEnd"],handler:Oa},{semanticName:"Fork/Join",name:"Filled Rectangle",shortName:"fork",description:"Fork or join in process flow",aliases:["join"],internalAliases:["forkJoin"],handler:Hr},{semanticName:"Collate",name:"Hourglass",shortName:"hourglass",description:"Represents a collate operation",aliases:["hourglass","collate"],handler:ir},{semanticName:"Comment",name:"Curly Brace",shortName:"brace",description:"Adds a comment",aliases:["comment","brace-l"],handler:G},{semanticName:"Comment Right",name:"Curly Brace",shortName:"brace-r",description:"Adds a comment",handler:Mt},{semanticName:"Comment with braces on both sides",name:"Curly Braces",shortName:"braces",description:"Adds a comment",handler:Re},{semanticName:"Com Link",name:"Lightning Bolt",shortName:"bolt",description:"Communication link",aliases:["com-link","lightning-bolt"],handler:_r},{semanticName:"Document",name:"Document",shortName:"doc",description:"Represents a document",aliases:["doc","document"],handler:Gr},{semanticName:"Delay",name:"Half-Rounded Rectangle",shortName:"delay",description:"Represents a delay",aliases:["half-rounded-rectangle"],handler:sr},{semanticName:"Direct Access Storage",name:"Horizontal Cylinder",shortName:"h-cyl",description:"Direct access storage",aliases:["das","horizontal-cylinder"],handler:M},{semanticName:"Disk Storage",name:"Lined Cylinder",shortName:"lin-cyl",description:"Disk storage",aliases:["disk","lined-cylinder"],handler:kr},{semanticName:"Display",name:"Curved Trapezoid",shortName:"curv-trap",description:"Represents a display",aliases:["curved-trapezoid","display"],handler:de},{semanticName:"Divided Process",name:"Divided Rectangle",shortName:"div-rect",description:"Divided process shape",aliases:["div-proc","divided-rectangle","divided-process"],handler:ce},{semanticName:"Extract",name:"Triangle",shortName:"tri",description:"Extraction process",aliases:["extract","triangle"],handler:Je},{semanticName:"Internal Storage",name:"Window Pane",shortName:"win-pane",description:"Internal storage",aliases:["internal-storage","window-pane"],handler:wa},{semanticName:"Junction",name:"Filled Circle",shortName:"f-circ",description:"Junction point",aliases:["junction","filled-circle"],handler:Qe},{semanticName:"Loop Limit",name:"Trapezoidal Pentagon",shortName:"notch-pent",description:"Loop limit step",aliases:["loop-limit","notched-pentagon"],handler:Lt},{semanticName:"Manual File",name:"Flipped Triangle",shortName:"flip-tri",description:"Manual file operation",aliases:["manual-file","flipped-triangle"],handler:Lr},{semanticName:"Manual Input",name:"Sloped Rectangle",shortName:"sl-rect",description:"Manual input step",aliases:["manual-input","sloped-rectangle"],handler:ba},{semanticName:"Multi-Document",name:"Stacked Document",shortName:"docs",description:"Multiple documents",aliases:["documents","st-doc","stacked-document"],handler:ia},{semanticName:"Multi-Process",name:"Stacked Rectangle",shortName:"st-rect",description:"Multiple processes",aliases:["procs","processes","stacked-rectangle"],handler:Br},{semanticName:"Stored Data",name:"Bow Tie Rectangle",shortName:"bow-rect",description:"Stored data",aliases:["stored-data","bow-tie-rectangle"],handler:Et},{semanticName:"Summary",name:"Crossed Circle",shortName:"cross-circ",description:"Summary",aliases:["summary","crossed-circle"],handler:ht},{semanticName:"Tagged Document",name:"Tagged Document",shortName:"tag-doc",description:"Tagged document",aliases:["tag-doc","tagged-document"],handler:oa},{semanticName:"Tagged Process",name:"Tagged Rectangle",shortName:"tag-rect",description:"Tagged process",aliases:["tagged-rectangle","tag-proc","tagged-process"],handler:qa},{semanticName:"Paper Tape",name:"Flag",shortName:"flag",description:"Paper tape",aliases:["paper-tape"],handler:La},{semanticName:"Odd",name:"Odd",shortName:"odd",description:"Odd shape",internalAliases:["rect_left_inv_arrow"],handler:Ye},{semanticName:"Lined Document",name:"Lined Document",shortName:"lin-doc",description:"Lined document",aliases:["lined-document"],handler:Er}],xn=(0,$.K2)(()=>{const d=[...Object.entries({state:Ua,choice:mt,note:Qr,rectWithTitle:Tr,labelRect:Wt,iconSquare:b,iconCircle:I,icon:y,iconRounded:D,imageSquare:P,anchor:qe,kanbanItem:ln,mindmapCircle:hn,defaultMindmapNode:Bn,classBox:ni,erBox:$a,requirementBox:Pi}),...tn.flatMap(ct=>[ct.shortName,..."aliases"in ct?ct.aliases:[],..."internalAliases"in ct?ct.internalAliases:[]].map(kt=>[kt,ct.handler]))];return Object.fromEntries(d)},"generateShapeMap")();function nn(Gt){return Gt in xn}(0,$.K2)(nn,"isValidShape");var kn=new Map;function Rn(Gt,d,ct){return un.apply(this,arguments)}function un(){return(un=(0,ot.A)(function*(Gt,d,ct){let Xt,kt;"rect"===d.shape&&(d.shape=d.rx&&d.ry?"roundedRect":"squareRect");const vt=d.shape?xn[d.shape]:void 0;if(!vt)throw new Error(`No such shape: ${d.shape}. Please check your syntax.`);if(d.link){let ue;"sandbox"===ct.config.securityLevel?ue="_top":d.linkTarget&&(ue=d.linkTarget||"_blank"),Xt=Gt.insert("svg:a").attr("xlink:href",d.link).attr("target",ue??null),kt=yield vt(Xt,d,ct)}else kt=yield vt(Gt,d,ct),Xt=kt;return d.tooltip&&kt.attr("title",d.tooltip),kn.set(d.id,Xt),d.haveCallback&&Xt.attr("class",Xt.attr("class")+" clickable"),Xt})).apply(this,arguments)}(0,$.K2)(Rn,"insertNode");var Xi=(0,$.K2)((Gt,d)=>{kn.set(d.id,Gt)},"setNodeElem"),rn=(0,$.K2)(()=>{kn.clear()},"clear"),Yn=(0,$.K2)(Gt=>{const d=kn.get(Gt.id);$.Rm.trace("Transforming node",Gt.diff,Gt,"translate("+(Gt.x-Gt.width/2-5)+", "+Gt.width/2+")");const Xt=Gt.diff||0;return d.attr("transform",Gt.clusterNode?"translate("+(Gt.x+Xt-Gt.width/2)+", "+(Gt.y-Gt.height/2-8)+")":"translate("+Gt.x+", "+Gt.y+")"),Xt},"positionNode")},90543:(Ja,vr,R)=>{"use strict";R.r(vr),R.d(vr,{diagram:()=>pt});var ot=R(89204),ee=R(69664),L=R(97787),S=R(24715),Pt=R(87452),wt=(R(32239),R(19753),R(59355),R(52052),R(79006)),Ge=R(32303),dt=R(79687),Rt=function(){var H=(0,Ge.K2)(function(ke,Mt,Zt,pe){for(Zt=Zt||{},pe=ke.length;pe--;Zt[ke[pe]]=Mt);return Zt},"o"),Nt=[1,4],St=[1,13],$t=[1,12],ye=[1,15],le=[1,16],Pe=[1,20],oe=[1,19],qe=[6,7,8],ze=[1,26],Et=[1,24],Tt=[1,25],B=[6,7,11],F=[1,31],et=[6,7,11,24],mt=[1,6,13,16,17,20,23],it=[1,35],rt=[1,36],_t=[1,6,7,11,13,16,17,20,23],ht=[1,38],Ft={trace:(0,Ge.K2)(function(){},"trace"),yy:{},symbols_:{error:2,start:3,mindMap:4,spaceLines:5,SPACELINE:6,NL:7,KANBAN:8,document:9,stop:10,EOF:11,statement:12,SPACELIST:13,node:14,shapeData:15,ICON:16,CLASS:17,nodeWithId:18,nodeWithoutId:19,NODE_DSTART:20,NODE_DESCR:21,NODE_DEND:22,NODE_ID:23,SHAPE_DATA:24,$accept:0,$end:1},terminals_:{2:"error",6:"SPACELINE",7:"NL",8:"KANBAN",11:"EOF",13:"SPACELIST",16:"ICON",17:"CLASS",20:"NODE_DSTART",21:"NODE_DESCR",22:"NODE_DEND",23:"NODE_ID",24:"SHAPE_DATA"},productions_:[0,[3,1],[3,2],[5,1],[5,2],[5,2],[4,2],[4,3],[10,1],[10,1],[10,1],[10,2],[10,2],[9,3],[9,2],[12,3],[12,2],[12,2],[12,2],[12,1],[12,2],[12,1],[12,1],[12,1],[12,1],[14,1],[14,1],[19,3],[18,1],[18,4],[15,2],[15,1]],performAction:(0,Ge.K2)(function(Mt,Zt,pe,Re,Ze,de,mr){var xr=de.length-1;switch(Ze){case 6:case 7:return Re;case 8:Re.getLogger().trace("Stop NL ");break;case 9:Re.getLogger().trace("Stop EOF ");break;case 11:Re.getLogger().trace("Stop NL2 ");break;case 12:Re.getLogger().trace("Stop EOF2 ");break;case 15:Re.getLogger().info("Node: ",de[xr-1].id),Re.addNode(de[xr-2].length,de[xr-1].id,de[xr-1].descr,de[xr-1].type,de[xr]);break;case 16:Re.getLogger().info("Node: ",de[xr].id),Re.addNode(de[xr-1].length,de[xr].id,de[xr].descr,de[xr].type);break;case 17:Re.getLogger().trace("Icon: ",de[xr]),Re.decorateNode({icon:de[xr]});break;case 18:case 23:Re.decorateNode({class:de[xr]});break;case 19:Re.getLogger().trace("SPACELIST");break;case 20:Re.getLogger().trace("Node: ",de[xr-1].id),Re.addNode(0,de[xr-1].id,de[xr-1].descr,de[xr-1].type,de[xr]);break;case 21:Re.getLogger().trace("Node: ",de[xr].id),Re.addNode(0,de[xr].id,de[xr].descr,de[xr].type);break;case 22:Re.decorateNode({icon:de[xr]});break;case 27:Re.getLogger().trace("node found ..",de[xr-2]),this.$={id:de[xr-1],descr:de[xr-1],type:Re.getType(de[xr-2],de[xr])};break;case 28:this.$={id:de[xr],descr:de[xr],type:0};break;case 29:Re.getLogger().trace("node found ..",de[xr-3]),this.$={id:de[xr-3],descr:de[xr-1],type:Re.getType(de[xr-2],de[xr])};break;case 30:this.$=de[xr-1]+de[xr];break;case 31:this.$=de[xr]}},"anonymous"),table:[{3:1,4:2,5:3,6:[1,5],8:Nt},{1:[3]},{1:[2,1]},{4:6,6:[1,7],7:[1,8],8:Nt},{6:St,7:[1,10],9:9,12:11,13:$t,14:14,16:ye,17:le,18:17,19:18,20:Pe,23:oe},H(qe,[2,3]),{1:[2,2]},H(qe,[2,4]),H(qe,[2,5]),{1:[2,6],6:St,12:21,13:$t,14:14,16:ye,17:le,18:17,19:18,20:Pe,23:oe},{6:St,9:22,12:11,13:$t,14:14,16:ye,17:le,18:17,19:18,20:Pe,23:oe},{6:ze,7:Et,10:23,11:Tt},H(B,[2,24],{18:17,19:18,14:27,16:[1,28],17:[1,29],20:Pe,23:oe}),H(B,[2,19]),H(B,[2,21],{15:30,24:F}),H(B,[2,22]),H(B,[2,23]),H(et,[2,25]),H(et,[2,26]),H(et,[2,28],{20:[1,32]}),{21:[1,33]},{6:ze,7:Et,10:34,11:Tt},{1:[2,7],6:St,12:21,13:$t,14:14,16:ye,17:le,18:17,19:18,20:Pe,23:oe},H(mt,[2,14],{7:it,11:rt}),H(_t,[2,8]),H(_t,[2,9]),H(_t,[2,10]),H(B,[2,16],{15:37,24:F}),H(B,[2,17]),H(B,[2,18]),H(B,[2,20],{24:ht}),H(et,[2,31]),{21:[1,39]},{22:[1,40]},H(mt,[2,13],{7:it,11:rt}),H(_t,[2,11]),H(_t,[2,12]),H(B,[2,15],{24:ht}),H(et,[2,30]),{22:[1,41]},H(et,[2,27]),H(et,[2,29])],defaultActions:{2:[2,1],6:[2,2]},parseError:(0,Ge.K2)(function(Mt,Zt){if(!Zt.recoverable){var pe=new Error(Mt);throw pe.hash=Zt,pe}this.trace(Mt)},"parseError"),parse:(0,Ge.K2)(function(Mt){var Zt=this,pe=[0],Re=[],Ze=[null],de=[],mr=this.table,xr="",zt=0,Ae=0,or=0,Ee=de.slice.call(arguments,1),De=Object.create(this.lexer),er={yy:{}};for(var Qe in this.yy)Object.prototype.hasOwnProperty.call(this.yy,Qe)&&(er.yy[Qe]=this.yy[Qe]);De.setInput(Mt,er.yy),er.yy.lexer=De,er.yy.parser=this,typeof De.yylloc>"u"&&(De.yylloc={});var Lr=De.yylloc;de.push(Lr);var _e=De.options&&De.options.ranges;function sr(){var C;return"number"!=typeof(C=Re.pop()||De.lex()||1)&&(C instanceof Array&&(C=(Re=C).pop()),C=Zt.symbols_[C]||C),C}this.parseError="function"==typeof er.yy.parseError?er.yy.parseError:Object.getPrototypeOf(this).parseError,(0,Ge.K2)(function Hr(C){pe.length=pe.length-2*C,Ze.length=Ze.length-C,de.length=de.length-C},"popStack"),(0,Ge.K2)(sr,"lex");for(var te,ne,be,ir,y,I,m,v,E={};;){if(this.defaultActions[be=pe[pe.length-1]]?ir=this.defaultActions[be]:((null===te||typeof te>"u")&&(te=sr()),ir=mr[be]&&mr[be][te]),typeof ir>"u"||!ir.length||!ir[0]){var b;for(I in v=[],mr[be])this.terminals_[I]&&I>2&&v.push("'"+this.terminals_[I]+"'");b=De.showPosition?"Parse error on line "+(zt+1)+":\n"+De.showPosition()+"\nExpecting "+v.join(", ")+", got '"+(this.terminals_[te]||te)+"'":"Parse error on line "+(zt+1)+": Unexpected "+(1==te?"end of input":"'"+(this.terminals_[te]||te)+"'"),this.parseError(b,{text:De.match,token:this.terminals_[te]||te,line:De.yylineno,loc:Lr,expected:v})}if(ir[0]instanceof Array&&ir.length>1)throw new Error("Parse Error: multiple actions possible at state: "+be+", token: "+te);switch(ir[0]){case 1:pe.push(te),Ze.push(De.yytext),de.push(De.yylloc),pe.push(ir[1]),te=null,ne?(te=ne,ne=null):(Ae=De.yyleng,xr=De.yytext,zt=De.yylineno,Lr=De.yylloc,or>0&&or--);break;case 2:if(E.$=Ze[Ze.length-(m=this.productions_[ir[1]][1])],E._$={first_line:de[de.length-(m||1)].first_line,last_line:de[de.length-1].last_line,first_column:de[de.length-(m||1)].first_column,last_column:de[de.length-1].last_column},_e&&(E._$.range=[de[de.length-(m||1)].range[0],de[de.length-1].range[1]]),typeof(y=this.performAction.apply(E,[xr,Ae,zt,er.yy,ir[1],Ze,de].concat(Ee)))<"u")return y;m&&(pe=pe.slice(0,-1*m*2),Ze=Ze.slice(0,-1*m),de=de.slice(0,-1*m)),pe.push(this.productions_[ir[1]][0]),Ze.push(E.$),de.push(E._$),pe.push(mr[pe[pe.length-2]][pe[pe.length-1]]);break;case 3:return!0}}return!0},"parse")};function lt(){this.yy={}}return Ft.lexer=function(){return{EOF:1,parseError:(0,Ge.K2)(function(Zt,pe){if(!this.yy.parser)throw new Error(Zt);this.yy.parser.parseError(Zt,pe)},"parseError"),setInput:(0,Ge.K2)(function(Mt,Zt){return this.yy=Zt||this.yy||{},this._input=Mt,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},"setInput"),input:(0,Ge.K2)(function(){var Mt=this._input[0];return this.yytext+=Mt,this.yyleng++,this.offset++,this.match+=Mt,this.matched+=Mt,Mt.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),Mt},"input"),unput:(0,Ge.K2)(function(Mt){var Zt=Mt.length,pe=Mt.split(/(?:\r\n?|\n)/g);this._input=Mt+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-Zt),this.offset-=Zt;var Re=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),pe.length-1&&(this.yylineno-=pe.length-1);var Ze=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:pe?(pe.length===Re.length?this.yylloc.first_column:0)+Re[Re.length-pe.length].length-pe[0].length:this.yylloc.first_column-Zt},this.options.ranges&&(this.yylloc.range=[Ze[0],Ze[0]+this.yyleng-Zt]),this.yyleng=this.yytext.length,this},"unput"),more:(0,Ge.K2)(function(){return this._more=!0,this},"more"),reject:(0,Ge.K2)(function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},"reject"),less:(0,Ge.K2)(function(Mt){this.unput(this.match.slice(Mt))},"less"),pastInput:(0,Ge.K2)(function(){var Mt=this.matched.substr(0,this.matched.length-this.match.length);return(Mt.length>20?"...":"")+Mt.substr(-20).replace(/\n/g,"")},"pastInput"),upcomingInput:(0,Ge.K2)(function(){var Mt=this.match;return Mt.length<20&&(Mt+=this._input.substr(0,20-Mt.length)),(Mt.substr(0,20)+(Mt.length>20?"...":"")).replace(/\n/g,"")},"upcomingInput"),showPosition:(0,Ge.K2)(function(){var Mt=this.pastInput(),Zt=new Array(Mt.length+1).join("-");return Mt+this.upcomingInput()+"\n"+Zt+"^"},"showPosition"),test_match:(0,Ge.K2)(function(Mt,Zt){var pe,Re,Ze;if(this.options.backtrack_lexer&&(Ze={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(Ze.yylloc.range=this.yylloc.range.slice(0))),(Re=Mt[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=Re.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:Re?Re[Re.length-1].length-Re[Re.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+Mt[0].length},this.yytext+=Mt[0],this.match+=Mt[0],this.matches=Mt,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(Mt[0].length),this.matched+=Mt[0],pe=this.performAction.call(this,this.yy,this,Zt,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),pe)return pe;if(this._backtrack){for(var de in Ze)this[de]=Ze[de];return!1}return!1},"test_match"),next:(0,Ge.K2)(function(){if(this.done)return this.EOF;var Mt,Zt,pe,Re;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var Ze=this._currentRules(),de=0;de<Ze.length;de++)if((pe=this._input.match(this.rules[Ze[de]]))&&(!Zt||pe[0].length>Zt[0].length)){if(Zt=pe,Re=de,this.options.backtrack_lexer){if(!1!==(Mt=this.test_match(pe,Ze[de])))return Mt;if(this._backtrack){Zt=!1;continue}return!1}if(!this.options.flex)break}return Zt?!1!==(Mt=this.test_match(Zt,Ze[Re]))&&Mt:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},"next"),lex:(0,Ge.K2)(function(){return this.next()||this.lex()},"lex"),begin:(0,Ge.K2)(function(Zt){this.conditionStack.push(Zt)},"begin"),popState:(0,Ge.K2)(function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},"popState"),_currentRules:(0,Ge.K2)(function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},"_currentRules"),topState:(0,Ge.K2)(function(Zt){return(Zt=this.conditionStack.length-1-Math.abs(Zt||0))>=0?this.conditionStack[Zt]:"INITIAL"},"topState"),pushState:(0,Ge.K2)(function(Zt){this.begin(Zt)},"pushState"),stateStackSize:(0,Ge.K2)(function(){return this.conditionStack.length},"stateStackSize"),options:{"case-insensitive":!0},performAction:(0,Ge.K2)(function(Zt,pe,Re,Ze){switch(Re){case 0:return this.pushState("shapeData"),pe.yytext="",24;case 1:return this.pushState("shapeDataStr"),24;case 2:return this.popState(),24;case 3:return pe.yytext=pe.yytext.replace(/\n\s*/g,"<br/>"),24;case 4:return 24;case 5:case 10:case 29:case 32:this.popState();break;case 6:return Zt.getLogger().trace("Found comment",pe.yytext),6;case 7:return 8;case 8:this.begin("CLASS");break;case 9:return this.popState(),17;case 11:Zt.getLogger().trace("Begin icon"),this.begin("ICON");break;case 12:return Zt.getLogger().trace("SPACELINE"),6;case 13:return 7;case 14:return 16;case 15:Zt.getLogger().trace("end icon"),this.popState();break;case 16:return Zt.getLogger().trace("Exploding node"),this.begin("NODE"),20;case 17:return Zt.getLogger().trace("Cloud"),this.begin("NODE"),20;case 18:return Zt.getLogger().trace("Explosion Bang"),this.begin("NODE"),20;case 19:return Zt.getLogger().trace("Cloud Bang"),this.begin("NODE"),20;case 20:case 21:case 22:case 23:return this.begin("NODE"),20;case 24:return 13;case 25:return 23;case 26:return 11;case 27:this.begin("NSTR2");break;case 28:return"NODE_DESCR";case 30:Zt.getLogger().trace("Starting NSTR"),this.begin("NSTR");break;case 31:return Zt.getLogger().trace("description:",pe.yytext),"NODE_DESCR";case 33:return this.popState(),Zt.getLogger().trace("node end ))"),"NODE_DEND";case 34:return this.popState(),Zt.getLogger().trace("node end )"),"NODE_DEND";case 35:return this.popState(),Zt.getLogger().trace("node end ...",pe.yytext),"NODE_DEND";case 36:case 39:case 40:return this.popState(),Zt.getLogger().trace("node end (("),"NODE_DEND";case 37:case 38:return this.popState(),Zt.getLogger().trace("node end (-"),"NODE_DEND";case 41:case 42:return Zt.getLogger().trace("Long description:",pe.yytext),21}},"anonymous"),rules:[/^(?:@\{)/i,/^(?:["])/i,/^(?:["])/i,/^(?:[^\"]+)/i,/^(?:[^}^"]+)/i,/^(?:\})/i,/^(?:\s*%%.*)/i,/^(?:kanban\b)/i,/^(?::::)/i,/^(?:.+)/i,/^(?:\n)/i,/^(?:::icon\()/i,/^(?:[\s]+[\n])/i,/^(?:[\n]+)/i,/^(?:[^\)]+)/i,/^(?:\))/i,/^(?:-\))/i,/^(?:\(-)/i,/^(?:\)\))/i,/^(?:\))/i,/^(?:\(\()/i,/^(?:\{\{)/i,/^(?:\()/i,/^(?:\[)/i,/^(?:[\s]+)/i,/^(?:[^\(\[\n\)\{\}@]+)/i,/^(?:$)/i,/^(?:["][`])/i,/^(?:[^`"]+)/i,/^(?:[`]["])/i,/^(?:["])/i,/^(?:[^"]+)/i,/^(?:["])/i,/^(?:[\)]\))/i,/^(?:[\)])/i,/^(?:[\]])/i,/^(?:\}\})/i,/^(?:\(-)/i,/^(?:-\))/i,/^(?:\(\()/i,/^(?:\()/i,/^(?:[^\)\]\(\}]+)/i,/^(?:.+(?!\(\())/i],conditions:{shapeDataEndBracket:{rules:[],inclusive:!1},shapeDataStr:{rules:[2,3],inclusive:!1},shapeData:{rules:[1,4,5],inclusive:!1},CLASS:{rules:[9,10],inclusive:!1},ICON:{rules:[14,15],inclusive:!1},NSTR2:{rules:[28,29],inclusive:!1},NSTR:{rules:[31,32],inclusive:!1},NODE:{rules:[27,30,33,34,35,36,37,38,39,40,41,42],inclusive:!1},INITIAL:{rules:[0,6,7,8,11,12,13,16,17,18,19,20,21,22,23,24,25,26],inclusive:!0}}}}(),(0,Ge.K2)(lt,"Parser"),lt.prototype=Ft,Ft.Parser=lt,new lt}();Rt.parser=Rt;var q=Rt,ar=[],Ke=[],cr=0,Rr={},wr=(0,Ge.K2)(()=>{ar=[],Ke=[],cr=0,Rr={}},"clear"),Vr=(0,Ge.K2)(H=>{if(0===ar.length)return null;const Nt=ar[0].level;let St=null;for(let $t=ar.length-1;$t>=0;$t--)if(ar[$t].level===Nt&&!St&&(St=ar[$t]),ar[$t].level<Nt)throw new Error('Items without section detected, found section ("'+ar[$t].label+'")');return H===St?.level?null:St},"getSection"),ra=(0,Ge.K2)(function(){return Ke},"getSections"),Nr=(0,Ge.K2)(function(){const Nt=[],St=ra(),$t=(0,wt.D7)();for(const ye of St){const le={id:ye.id,label:(0,wt.jZ)(ye.label??"",$t),isGroup:!0,ticket:ye.ticket,shape:"kanbanSection",level:ye.level,look:$t.look};Nt.push(le);const Pe=ar.filter(oe=>oe.parentId===ye.id);for(const oe of Pe){const qe={id:oe.id,parentId:ye.id,label:(0,wt.jZ)(oe.label??"",$t),isGroup:!1,ticket:oe?.ticket,priority:oe?.priority,assigned:oe?.assigned,icon:oe?.icon,shape:"kanbanItem",level:oe.level,rx:5,ry:5,cssStyles:["text-align: left"]};Nt.push(qe)}}return{nodes:Nt,edges:[],other:{},config:(0,wt.D7)()}},"getData"),Fr=(0,Ge.K2)((H,Nt,St,$t,ye)=>{const le=(0,wt.D7)();let Pe=le.mindmap?.padding??wt.UI.mindmap.padding;switch($t){case Se.ROUNDED_RECT:case Se.RECT:case Se.HEXAGON:Pe*=2}const oe={id:(0,wt.jZ)(Nt,le)||"kbn"+cr++,level:H,label:(0,wt.jZ)(St,le),width:le.mindmap?.maxNodeWidth??wt.UI.mindmap.maxNodeWidth,padding:Pe,isGroup:!1};if(void 0!==ye){let ze;ze=ye.includes("\n")?ye+"\n":"{\n"+ye+"\n}";const Et=(0,S.H)(ze,{schema:S.r});if(Et.shape&&(Et.shape!==Et.shape.toLowerCase()||Et.shape.includes("_")))throw new Error(`No such shape: ${Et.shape}. Shape names should be lowercase.`);Et?.shape&&"kanbanItem"===Et.shape&&(oe.shape=Et?.shape),Et?.label&&(oe.label=Et?.label),Et?.icon&&(oe.icon=Et?.icon.toString()),Et?.assigned&&(oe.assigned=Et?.assigned.toString()),Et?.ticket&&(oe.ticket=Et?.ticket.toString()),Et?.priority&&(oe.priority=Et?.priority)}const qe=Vr(H);qe?oe.parentId=qe.id||"kbn"+cr++:Ke.push(oe),ar.push(oe)},"addNode"),Se={DEFAULT:0,NO_BORDER:0,ROUNDED_RECT:1,RECT:2,CIRCLE:3,CLOUD:4,BANG:5,HEXAGON:6},ae={clear:wr,addNode:Fr,getSections:ra,getData:Nr,nodeType:Se,getType:(0,Ge.K2)((H,Nt)=>{switch(Ge.Rm.debug("In get type",H,Nt),H){case"[":return Se.RECT;case"(":return")"===Nt?Se.ROUNDED_RECT:Se.CLOUD;case"((":return Se.CIRCLE;case")":return Se.CLOUD;case"))":return Se.BANG;case"{{":return Se.HEXAGON;default:return Se.DEFAULT}},"getType"),setElementForId:(0,Ge.K2)((H,Nt)=>{Rr[H]=Nt},"setElementForId"),decorateNode:(0,Ge.K2)(H=>{if(!H)return;const Nt=(0,wt.D7)(),St=ar[ar.length-1];H.icon&&(St.icon=(0,wt.jZ)(H.icon,Nt)),H.class&&(St.cssClasses=(0,wt.jZ)(H.class,Nt))},"decorateNode"),type2Str:(0,Ge.K2)(H=>{switch(H){case Se.DEFAULT:return"no-border";case Se.RECT:return"rect";case Se.ROUNDED_RECT:return"rounded-rect";case Se.CIRCLE:return"circle";case Se.CLOUD:return"cloud";case Se.BANG:return"bang";case Se.HEXAGON:return"hexgon";default:return"no-border"}},"type2Str"),getLogger:(0,Ge.K2)(()=>Ge.Rm,"getLogger"),getElementById:(0,Ge.K2)(H=>Rr[H],"getElementById")},re={draw:(0,Ge.K2)(function(){var H=(0,ot.A)(function*(Nt,St,$t,ye){Ge.Rm.debug("Rendering kanban diagram\n"+Nt);const Pe=ye.db.getData(),oe=(0,wt.D7)();oe.htmlLabels=!1;const qe=(0,ee.D)(St),ze=qe.append("g");ze.attr("class","sections");const Et=qe.append("g");Et.attr("class","items");const Tt=Pe.nodes.filter(rt=>rt.isGroup);let B=0;const et=[];let mt=25;for(const rt of Tt){const _t=oe?.kanban?.sectionWidth||200;B+=1,rt.x=_t*B+10*(B-1)/2,rt.width=_t,rt.y=0,rt.height=3*_t,rt.rx=5,rt.ry=5,rt.cssClasses=rt.cssClasses+" section-"+B;const ht=yield(0,Pt.U)(ze,rt);mt=Math.max(mt,ht?.labelBBox?.height),et.push(ht)}let it=0;for(const rt of Tt){const _t=et[it];it+=1;const ht=oe?.kanban?.sectionWidth||200,Ft=3*-ht/2+mt;let G=Ft;const lt=Pe.nodes.filter(Zt=>Zt.parentId===rt.id);for(const Zt of lt){if(Zt.isGroup)throw new Error("Groups within groups are not allowed in Kanban diagrams");Zt.x=rt.x,Zt.width=ht-15;const Re=(yield(0,Pt.on)(Et,Zt,{config:oe})).node().getBBox();Zt.y=G+Re.height/2,yield(0,Pt.U_)(Zt),G=Zt.y+Re.height/2+5}const ke=_t.cluster.select("rect"),Mt=Math.max(G-Ft+30,50)+(mt-25);ke.attr("height",Mt)}(0,wt.ot)(void 0,qe,oe.mindmap?.padding??wt.UI.kanban.padding,oe.mindmap?.useMaxWidth??wt.UI.kanban.useMaxWidth)});return function(Nt,St,$t,ye){return H.apply(this,arguments)}}(),"draw")},It=(0,Ge.K2)(H=>{let Nt="";for(let $t=0;$t<H.THEME_COLOR_LIMIT;$t++)H["lineColor"+$t]=H["lineColor"+$t]||H["cScaleInv"+$t],H["lineColor"+$t]=(0,dt.HD)(H["lineColor"+$t])?(0,dt.a)(H["lineColor"+$t],20):(0,dt.e$)(H["lineColor"+$t],20);const St=(0,Ge.K2)(($t,ye)=>H.darkMode?(0,dt.e$)($t,ye):(0,dt.a)($t,ye),"adjuster");for(let $t=0;$t<H.THEME_COLOR_LIMIT;$t++){const ye=""+(17-3*$t);Nt+=`\n    .section-${$t-1} rect, .section-${$t-1} path, .section-${$t-1} circle, .section-${$t-1} polygon, .section-${$t-1} path  {\n      fill: ${St(H["cScale"+$t],10)};\n      stroke: ${St(H["cScale"+$t],10)};\n\n    }\n    .section-${$t-1} text {\n     fill: ${H["cScaleLabel"+$t]};\n    }\n    .node-icon-${$t-1} {\n      font-size: 40px;\n      color: ${H["cScaleLabel"+$t]};\n    }\n    .section-edge-${$t-1}{\n      stroke: ${H["cScale"+$t]};\n    }\n    .edge-depth-${$t-1}{\n      stroke-width: ${ye};\n    }\n    .section-${$t-1} line {\n      stroke: ${H["cScaleInv"+$t]} ;\n      stroke-width: 3;\n    }\n\n    .disabled, .disabled circle, .disabled text {\n      fill: lightgray;\n    }\n    .disabled text {\n      fill: #efefef;\n    }\n\n  .node rect,\n  .node circle,\n  .node ellipse,\n  .node polygon,\n  .node path {\n    fill: ${H.background};\n    stroke: ${H.nodeBorder};\n    stroke-width: 1px;\n  }\n\n  .kanban-ticket-link {\n    fill: ${H.background};\n    stroke: ${H.nodeBorder};\n    text-decoration: underline;\n  }\n    `}return Nt},"genSections"),pt={db:ae,renderer:re,parser:q,styles:(0,Ge.K2)(H=>`\n  .edge {\n    stroke-width: 3;\n  }\n  ${It(H)}\n  .section-root rect, .section-root path, .section-root circle, .section-root polygon  {\n    fill: ${H.git0};\n  }\n  .section-root text {\n    fill: ${H.gitBranchLabel0};\n  }\n  .icon-container {\n    height:100%;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n  }\n  .edge {\n    fill: none;\n  }\n  .cluster-label, .label {\n    color: ${H.textColor};\n    fill: ${H.textColor};\n    }\n  .kanban-label {\n    dy: 1em;\n    alignment-baseline: middle;\n    text-anchor: middle;\n    dominant-baseline: middle;\n    text-align: center;\n  }\n    ${(0,L.o)()}\n`,"getStyles")}},91634:(Ja,vr,R)=>{"use strict";R.r(vr),R.d(vr,{diagram:()=>ft});var ot=R(89204),ee=R(69664),L=R(80525),S=R(52052),Pt=R(79006),ut=R(32303),$=R(62233),A=R(40622),At=Pt.UI.pie,wt={sections:new Map,showData:!1,config:At},Ge=wt.sections,dt=wt.showData,Rt=structuredClone(At),Vr={getConfig:(0,ut.K2)(()=>structuredClone(Rt),"getConfig"),clear:(0,ut.K2)(()=>{Ge=new Map,dt=wt.showData,(0,Pt.IU)()},"clear"),setDiagramTitle:Pt.ke,getDiagramTitle:Pt.ab,setAccTitle:Pt.SV,getAccTitle:Pt.iN,setAccDescription:Pt.EI,getAccDescription:Pt.m7,addSection:(0,ut.K2)(({label:Bt,value:we})=>{if(we<0)throw new Error(`"${Bt}" has invalid value: ${we}. Negative values are not allowed in pie charts. All slice values must be >= 0.`);Ge.has(Bt)||(Ge.set(Bt,we),ut.Rm.debug(`added new section: ${Bt}, with value: ${we}`))},"addSection"),getSections:(0,ut.K2)(()=>Ge,"getSections"),setShowData:(0,ut.K2)(Bt=>{dt=Bt},"setShowData"),getShowData:(0,ut.K2)(()=>dt,"getShowData")},ra=(0,ut.K2)((Bt,we)=>{(0,L.S)(Bt,we),we.setShowData(Bt.showData),Bt.sections.map(we.addSection)},"populateDb"),Nr={parse:(0,ut.K2)(function(){var Bt=(0,ot.A)(function*(we){const X=yield(0,$.qg)("pie",we);ut.Rm.debug(X),ra(X,Vr)});return function(we){return Bt.apply(this,arguments)}}(),"parse")},Se=(0,ut.K2)(Bt=>`\n  .pieCircle{\n    stroke: ${Bt.pieStrokeColor};\n    stroke-width : ${Bt.pieStrokeWidth};\n    opacity : ${Bt.pieOpacity};\n  }\n  .pieOuterCircle{\n    stroke: ${Bt.pieOuterStrokeColor};\n    stroke-width: ${Bt.pieOuterStrokeWidth};\n    fill: none;\n  }\n  .pieTitleText {\n    text-anchor: middle;\n    font-size: ${Bt.pieTitleTextSize};\n    fill: ${Bt.pieTitleTextColor};\n    font-family: ${Bt.fontFamily};\n  }\n  .slice {\n    font-family: ${Bt.fontFamily};\n    fill: ${Bt.pieSectionTextColor};\n    font-size:${Bt.pieSectionTextSize};\n    // fill: white;\n  }\n  .legend text {\n    fill: ${Bt.pieLegendTextColor};\n    font-family: ${Bt.fontFamily};\n    font-size: ${Bt.pieLegendTextSize};\n  }\n`,"getStyles"),Or=(0,ut.K2)(Bt=>{const we=[...Bt.values()].reduce((w,re)=>w+re,0),X=[...Bt.entries()].map(([w,re])=>({label:w,value:re})).filter(w=>w.value/we*100>=1).sort((w,re)=>re.value-w.value);return(0,A.rLf)().value(w=>w.value)(X)},"createPieArcs"),ft={parser:Nr,db:Vr,renderer:{draw:(0,ut.K2)((Bt,we,X,ae)=>{ut.Rm.debug("rendering pie chart\n"+Bt);const w=ae.db,re=(0,Pt.D7)(),It=(0,S.$t)(w.getConfig(),re.pie),St=(0,ee.D)(we),$t=St.append("g");$t.attr("transform","translate(225,225)");const{themeVariables:ye}=re;let[le]=(0,S.I5)(ye.pieOuterStrokeWidth);le??=2;const Pe=It.textPosition,oe=Math.min(450,450)/2-40,qe=(0,A.JLW)().innerRadius(0).outerRadius(oe),ze=(0,A.JLW)().innerRadius(oe*Pe).outerRadius(oe*Pe);$t.append("circle").attr("cx",0).attr("cy",0).attr("r",oe+le/2).attr("class","pieOuterCircle");const Et=w.getSections(),Tt=Or(Et),B=[ye.pie1,ye.pie2,ye.pie3,ye.pie4,ye.pie5,ye.pie6,ye.pie7,ye.pie8,ye.pie9,ye.pie10,ye.pie11,ye.pie12];let F=0;Et.forEach(Ft=>{F+=Ft});const et=Tt.filter(Ft=>"0"!==(Ft.data.value/F*100).toFixed(0)),mt=(0,A.UMr)(B);$t.selectAll("mySlices").data(et).enter().append("path").attr("d",qe).attr("fill",Ft=>mt(Ft.data.label)).attr("class","pieCircle"),$t.selectAll("mySlices").data(et).enter().append("text").text(Ft=>(Ft.data.value/F*100).toFixed(0)+"%").attr("transform",Ft=>"translate("+ze.centroid(Ft)+")").style("text-anchor","middle").attr("class","slice"),$t.append("text").text(w.getDiagramTitle()).attr("x",0).attr("y",-200).attr("class","pieTitleText");const it=[...Et.entries()].map(([Ft,G])=>({label:Ft,value:G})),rt=$t.selectAll(".legend").data(it).enter().append("g").attr("class","legend").attr("transform",(Ft,G)=>"translate(216,"+(22*G-22*it.length/2)+")");rt.append("rect").attr("width",18).attr("height",18).style("fill",Ft=>mt(Ft.label)).style("stroke",Ft=>mt(Ft.label)),rt.append("text").attr("x",22).attr("y",14).text(Ft=>w.getShowData()?`${Ft.label} [${Ft.value}]`:Ft.label);const ht=512+Math.max(...rt.selectAll("text").nodes().map(Ft=>Ft?.getBoundingClientRect().width??0));St.attr("viewBox",`0 0 ${ht} 450`),(0,Pt.a$)(St,450,ht,It.useMaxWidth)},"draw")},styles:Se}},91820:(Ja,vr,R)=>{Ja.exports=function ot(ee){function S(dt){let Rt,ar,Ke,q=null;function cr(...Rr){if(!cr.enabled)return;const wr=cr,Vr=Number(new Date);wr.diff=Vr-(Rt||Vr),wr.prev=Rt,wr.curr=Vr,Rt=Vr,Rr[0]=S.coerce(Rr[0]),"string"!=typeof Rr[0]&&Rr.unshift("%O");let Nr=0;Rr[0]=Rr[0].replace(/%([a-zA-Z%])/g,(Se,Or)=>{if("%%"===Se)return"%";Nr++;const je=S.formatters[Or];return"function"==typeof je&&(Se=je.call(wr,Rr[Nr]),Rr.splice(Nr,1),Nr--),Se}),S.formatArgs.call(wr,Rr),(wr.log||S.log).apply(wr,Rr)}return cr.namespace=dt,cr.useColors=S.useColors(),cr.color=S.selectColor(dt),cr.extend=Pt,cr.destroy=S.destroy,Object.defineProperty(cr,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==q?q:(ar!==S.namespaces&&(ar=S.namespaces,Ke=S.enabled(dt)),Ke),set:Rr=>{q=Rr}}),"function"==typeof S.init&&S.init(cr),cr}function Pt(dt,Rt){const q=S(this.namespace+(typeof Rt>"u"?":":Rt)+dt);return q.log=this.log,q}function $(dt,Rt){let q=0,ar=0,Ke=-1,cr=0;for(;q<dt.length;)if(ar<Rt.length&&(Rt[ar]===dt[q]||"*"===Rt[ar]))"*"===Rt[ar]?(Ke=ar,cr=q,ar++):(q++,ar++);else{if(-1===Ke)return!1;ar=Ke+1,cr++,q=cr}for(;ar<Rt.length&&"*"===Rt[ar];)ar++;return ar===Rt.length}return S.debug=S,S.default=S,S.coerce=function wt(dt){return dt instanceof Error?dt.stack||dt.message:dt},S.disable=function A(){const dt=[...S.names,...S.skips.map(Rt=>"-"+Rt)].join(",");return S.enable(""),dt},S.enable=function ut(dt){S.save(dt),S.namespaces=dt,S.names=[],S.skips=[];const Rt=("string"==typeof dt?dt:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(const q of Rt)"-"===q[0]?S.skips.push(q.slice(1)):S.names.push(q)},S.enabled=function At(dt){for(const Rt of S.skips)if($(dt,Rt))return!1;for(const Rt of S.names)if($(dt,Rt))return!0;return!1},S.humanize=R(65269),S.destroy=function Ge(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(ee).forEach(dt=>{S[dt]=ee[dt]}),S.names=[],S.skips=[],S.formatters={},S.selectColor=function L(dt){let Rt=0;for(let q=0;q<dt.length;q++)Rt=(Rt<<5)-Rt+dt.charCodeAt(q),Rt|=0;return S.colors[Math.abs(Rt)%S.colors.length]},S.enable(S.load()),S}},94221:(Ja,vr)=>{"use strict";function ot($){return"string"==typeof $||$ instanceof String}function Pt($){return Array.isArray($)}Object.defineProperty(vr,"__esModule",{value:!0}),vr.stringArray=vr.array=vr.func=vr.error=vr.number=vr.string=vr.boolean=void 0,vr.boolean=function R($){return!0===$||!1===$},vr.string=ot,vr.number=function ee($){return"number"==typeof $||$ instanceof Number},vr.error=function L($){return $ instanceof Error},vr.func=function S($){return"function"==typeof $},vr.array=Pt,vr.stringArray=function ut($){return Pt($)&&$.every(A=>ot(A))}},95721:(Ja,vr,R)=>{"use strict";R.d(vr,{n:()=>ot});var ot={name:"mermaid",version:"11.12.0",description:"Markdown-ish syntax for generating flowcharts, mindmaps, sequence diagrams, class diagrams, gantt charts, git graphs and more.",type:"module",module:"./dist/mermaid.core.mjs",types:"./dist/mermaid.d.ts",exports:{".":{types:"./dist/mermaid.d.ts",import:"./dist/mermaid.core.mjs",default:"./dist/mermaid.core.mjs"},"./*":"./*"},keywords:["diagram","markdown","flowchart","sequence diagram","gantt","class diagram","git graph","mindmap","packet diagram","c4 diagram","er diagram","pie chart","pie diagram","quadrant chart","requirement diagram","graph"],scripts:{clean:"rimraf dist",dev:"pnpm -w dev","docs:code":"typedoc src/defaultConfig.ts src/config.ts src/mermaid.ts && prettier --write ./src/docs/config/setup","docs:build":"rimraf ../../docs && pnpm docs:code && pnpm docs:spellcheck && tsx scripts/docs.cli.mts","docs:verify":"pnpm docs:code && pnpm docs:spellcheck && tsx scripts/docs.cli.mts --verify","docs:pre:vitepress":"pnpm --filter ./src/docs prefetch && rimraf src/vitepress && pnpm docs:code && tsx scripts/docs.cli.mts --vitepress && pnpm --filter ./src/vitepress install --no-frozen-lockfile --ignore-scripts","docs:build:vitepress":"pnpm docs:pre:vitepress && (cd src/vitepress && pnpm run build) && cpy --flat src/docs/landing/ ./src/vitepress/.vitepress/dist/landing","docs:dev":'pnpm docs:pre:vitepress && concurrently "pnpm --filter ./src/vitepress dev" "tsx scripts/docs.cli.mts --watch --vitepress"',"docs:dev:docker":'pnpm docs:pre:vitepress && concurrently "pnpm --filter ./src/vitepress dev:docker" "tsx scripts/docs.cli.mts --watch --vitepress"',"docs:serve":"pnpm docs:build:vitepress && vitepress serve src/vitepress","docs:spellcheck":'cspell "src/docs/**/*.md"',"docs:release-version":"tsx scripts/update-release-version.mts","docs:verify-version":"tsx scripts/update-release-version.mts --verify","types:build-config":"tsx scripts/create-types-from-json-schema.mts","types:verify-config":"tsx scripts/create-types-from-json-schema.mts --verify",checkCircle:"npx madge --circular ./src",prepublishOnly:"pnpm docs:verify-version"},repository:{type:"git",url:"https://github.com/mermaid-js/mermaid"},author:"Knut Sveidqvist",license:"MIT",standard:{ignore:["**/parser/*.js","dist/**/*.js","cypress/**/*.js"],globals:["page"]},dependencies:{"@braintree/sanitize-url":"^7.1.1","@iconify/utils":"^3.0.1","@mermaid-js/parser":"workspace:^","@types/d3":"^7.4.3",cytoscape:"^3.29.3","cytoscape-cose-bilkent":"^4.1.0","cytoscape-fcose":"^2.2.0",d3:"^7.9.0","d3-sankey":"^0.12.3","dagre-d3-es":"7.0.11",dayjs:"^1.11.18",dompurify:"^3.2.5",katex:"^0.16.22",khroma:"^2.1.0","lodash-es":"^4.17.21",marked:"^16.2.1",roughjs:"^4.6.6",stylis:"^4.3.6","ts-dedent":"^2.2.0",uuid:"^11.1.0"},devDependencies:{"@adobe/jsonschema2md":"^8.0.5","@iconify/types":"^2.0.0","@types/cytoscape":"^3.21.9","@types/cytoscape-fcose":"^2.2.4","@types/d3-sankey":"^0.12.4","@types/d3-scale":"^4.0.9","@types/d3-scale-chromatic":"^3.1.0","@types/d3-selection":"^3.0.11","@types/d3-shape":"^3.1.7","@types/jsdom":"^21.1.7","@types/katex":"^0.16.7","@types/lodash-es":"^4.17.12","@types/micromatch":"^4.0.9","@types/stylis":"^4.2.7","@types/uuid":"^10.0.0",ajv:"^8.17.1",canvas:"^3.1.2",chokidar:"3.6.0",concurrently:"^9.1.2","csstree-validator":"^4.0.1",globby:"^14.1.0",jison:"^0.4.18","js-base64":"^3.7.8",jsdom:"^26.1.0","json-schema-to-typescript":"^15.0.4",micromatch:"^4.0.8","path-browserify":"^1.0.1",prettier:"^3.5.3",remark:"^15.0.1","remark-frontmatter":"^5.0.0","remark-gfm":"^4.0.1",rimraf:"^6.0.1","start-server-and-test":"^2.0.13","type-fest":"^4.35.0",typedoc:"^0.28.12","typedoc-plugin-markdown":"^4.8.1",typescript:"~5.7.3","unist-util-flatmap":"^1.0.0","unist-util-visit":"^5.0.0",vitepress:"^1.6.4","vitepress-plugin-search":"1.0.4-alpha.22"},files:["dist/","README.md"],publishConfig:{access:"public"}}},96434:(Ja,vr,R)=>{"use strict";R.r(vr),R.d(vr,{diagram:()=>ir});var Ge,ot=R(89204),ee=R(45027),L=R(62045),S=R(24715),Pt=R(67040),ut=R(52052),$=R(79006),A=R(32303),At=R(40622),wt=R(73986),dt=function(){var g=(0,A.K2)(function(Ma,ba,sa,Sa){for(sa=sa||{},Sa=Ma.length;Sa--;sa[Ma[Sa]]=ba);return sa},"o"),y=[1,2],E=[1,3],I=[1,4],m=[2,4],D=[1,9],v=[1,11],b=[1,13],C=[1,14],P=[1,16],Q=[1,17],xt=[1,18],Vt=[1,24],jt=[1,25],Ut=[1,26],Wt=[1,27],xe=[1,28],Xe=[1,29],We=[1,30],gr=[1,31],hr=[1,32],_r=[1,33],$e=[1,34],He=[1,35],Ar=[1,36],kr=[1,37],zr=[1,38],Er=[1,39],Jr=[1,41],Br=[1,42],ha=[1,43],ia=[1,44],jr=[1,45],Qr=[1,46],lr=[1,4,5,13,14,16,18,21,23,29,30,31,33,35,36,37,38,39,41,43,44,46,47,48,49,50,52,53,55,60,61,62,63,71],dr=[2,71],W=[4,5,16,50,52,53],Yt=[4,5,13,14,16,18,21,23,29,30,31,33,35,36,37,38,39,41,43,44,46,50,52,53,55,60,61,62,63,71],Ye=[4,5,13,14,16,18,21,23,29,30,31,33,35,36,37,38,39,41,43,44,46,49,50,52,53,55,60,61,62,63,71],Ne=[4,5,13,14,16,18,21,23,29,30,31,33,35,36,37,38,39,41,43,44,46,48,50,52,53,55,60,61,62,63,71],Tr=[4,5,13,14,16,18,21,23,29,30,31,33,35,36,37,38,39,41,43,44,46,47,50,52,53,55,60,61,62,63,71],yr=[69,70,71],da=[1,127],Pa={trace:(0,A.K2)(function(){},"trace"),yy:{},symbols_:{error:2,start:3,SPACE:4,NEWLINE:5,SD:6,document:7,line:8,statement:9,box_section:10,box_line:11,participant_statement:12,create:13,box:14,restOfLine:15,end:16,signal:17,autonumber:18,NUM:19,off:20,activate:21,actor:22,deactivate:23,note_statement:24,links_statement:25,link_statement:26,properties_statement:27,details_statement:28,title:29,legacy_title:30,acc_title:31,acc_title_value:32,acc_descr:33,acc_descr_value:34,acc_descr_multiline_value:35,loop:36,rect:37,opt:38,alt:39,else_sections:40,par:41,par_sections:42,par_over:43,critical:44,option_sections:45,break:46,option:47,and:48,else:49,participant:50,AS:51,participant_actor:52,destroy:53,actor_with_config:54,note:55,placement:56,text2:57,over:58,actor_pair:59,links:60,link:61,properties:62,details:63,spaceList:64,",":65,left_of:66,right_of:67,signaltype:68,"+":69,"-":70,ACTOR:71,config_object:72,CONFIG_START:73,CONFIG_CONTENT:74,CONFIG_END:75,SOLID_OPEN_ARROW:76,DOTTED_OPEN_ARROW:77,SOLID_ARROW:78,BIDIRECTIONAL_SOLID_ARROW:79,DOTTED_ARROW:80,BIDIRECTIONAL_DOTTED_ARROW:81,SOLID_CROSS:82,DOTTED_CROSS:83,SOLID_POINT:84,DOTTED_POINT:85,TXT:86,$accept:0,$end:1},terminals_:{2:"error",4:"SPACE",5:"NEWLINE",6:"SD",13:"create",14:"box",15:"restOfLine",16:"end",18:"autonumber",19:"NUM",20:"off",21:"activate",23:"deactivate",29:"title",30:"legacy_title",31:"acc_title",32:"acc_title_value",33:"acc_descr",34:"acc_descr_value",35:"acc_descr_multiline_value",36:"loop",37:"rect",38:"opt",39:"alt",41:"par",43:"par_over",44:"critical",46:"break",47:"option",48:"and",49:"else",50:"participant",51:"AS",52:"participant_actor",53:"destroy",55:"note",58:"over",60:"links",61:"link",62:"properties",63:"details",65:",",66:"left_of",67:"right_of",69:"+",70:"-",71:"ACTOR",73:"CONFIG_START",74:"CONFIG_CONTENT",75:"CONFIG_END",76:"SOLID_OPEN_ARROW",77:"DOTTED_OPEN_ARROW",78:"SOLID_ARROW",79:"BIDIRECTIONAL_SOLID_ARROW",80:"DOTTED_ARROW",81:"BIDIRECTIONAL_DOTTED_ARROW",82:"SOLID_CROSS",83:"DOTTED_CROSS",84:"SOLID_POINT",85:"DOTTED_POINT",86:"TXT"},productions_:[0,[3,2],[3,2],[3,2],[7,0],[7,2],[8,2],[8,1],[8,1],[10,0],[10,2],[11,2],[11,1],[11,1],[9,1],[9,2],[9,4],[9,2],[9,4],[9,3],[9,3],[9,2],[9,3],[9,3],[9,2],[9,2],[9,2],[9,2],[9,2],[9,1],[9,1],[9,2],[9,2],[9,1],[9,4],[9,4],[9,4],[9,4],[9,4],[9,4],[9,4],[9,4],[45,1],[45,4],[42,1],[42,4],[40,1],[40,4],[12,5],[12,3],[12,5],[12,3],[12,3],[12,3],[24,4],[24,4],[25,3],[26,3],[27,3],[28,3],[64,2],[64,1],[59,3],[59,1],[56,1],[56,1],[17,5],[17,5],[17,4],[54,2],[72,3],[22,1],[68,1],[68,1],[68,1],[68,1],[68,1],[68,1],[68,1],[68,1],[68,1],[68,1],[57,1]],performAction:(0,A.K2)(function(ba,sa,Sa,ea,Va,pr,Ua){var nr=pr.length-1;switch(Va){case 3:return ea.apply(pr[nr]),pr[nr];case 4:case 9:case 8:case 13:this.$=[];break;case 5:case 10:pr[nr-1].push(pr[nr]),this.$=pr[nr-1];break;case 6:case 7:case 11:case 12:case 63:this.$=pr[nr];break;case 15:pr[nr].type="createParticipant",this.$=pr[nr];break;case 16:pr[nr-1].unshift({type:"boxStart",boxData:ea.parseBoxData(pr[nr-2])}),pr[nr-1].push({type:"boxEnd",boxText:pr[nr-2]}),this.$=pr[nr-1];break;case 18:this.$={type:"sequenceIndex",sequenceIndex:Number(pr[nr-2]),sequenceIndexStep:Number(pr[nr-1]),sequenceVisible:!0,signalType:ea.LINETYPE.AUTONUMBER};break;case 19:this.$={type:"sequenceIndex",sequenceIndex:Number(pr[nr-1]),sequenceIndexStep:1,sequenceVisible:!0,signalType:ea.LINETYPE.AUTONUMBER};break;case 20:this.$={type:"sequenceIndex",sequenceVisible:!1,signalType:ea.LINETYPE.AUTONUMBER};break;case 21:this.$={type:"sequenceIndex",sequenceVisible:!0,signalType:ea.LINETYPE.AUTONUMBER};break;case 22:this.$={type:"activeStart",signalType:ea.LINETYPE.ACTIVE_START,actor:pr[nr-1].actor};break;case 23:this.$={type:"activeEnd",signalType:ea.LINETYPE.ACTIVE_END,actor:pr[nr-1].actor};break;case 29:ea.setDiagramTitle(pr[nr].substring(6)),this.$=pr[nr].substring(6);break;case 30:ea.setDiagramTitle(pr[nr].substring(7)),this.$=pr[nr].substring(7);break;case 31:this.$=pr[nr].trim(),ea.setAccTitle(this.$);break;case 32:case 33:this.$=pr[nr].trim(),ea.setAccDescription(this.$);break;case 34:pr[nr-1].unshift({type:"loopStart",loopText:ea.parseMessage(pr[nr-2]),signalType:ea.LINETYPE.LOOP_START}),pr[nr-1].push({type:"loopEnd",loopText:pr[nr-2],signalType:ea.LINETYPE.LOOP_END}),this.$=pr[nr-1];break;case 35:pr[nr-1].unshift({type:"rectStart",color:ea.parseMessage(pr[nr-2]),signalType:ea.LINETYPE.RECT_START}),pr[nr-1].push({type:"rectEnd",color:ea.parseMessage(pr[nr-2]),signalType:ea.LINETYPE.RECT_END}),this.$=pr[nr-1];break;case 36:pr[nr-1].unshift({type:"optStart",optText:ea.parseMessage(pr[nr-2]),signalType:ea.LINETYPE.OPT_START}),pr[nr-1].push({type:"optEnd",optText:ea.parseMessage(pr[nr-2]),signalType:ea.LINETYPE.OPT_END}),this.$=pr[nr-1];break;case 37:pr[nr-1].unshift({type:"altStart",altText:ea.parseMessage(pr[nr-2]),signalType:ea.LINETYPE.ALT_START}),pr[nr-1].push({type:"altEnd",signalType:ea.LINETYPE.ALT_END}),this.$=pr[nr-1];break;case 38:pr[nr-1].unshift({type:"parStart",parText:ea.parseMessage(pr[nr-2]),signalType:ea.LINETYPE.PAR_START}),pr[nr-1].push({type:"parEnd",signalType:ea.LINETYPE.PAR_END}),this.$=pr[nr-1];break;case 39:pr[nr-1].unshift({type:"parStart",parText:ea.parseMessage(pr[nr-2]),signalType:ea.LINETYPE.PAR_OVER_START}),pr[nr-1].push({type:"parEnd",signalType:ea.LINETYPE.PAR_END}),this.$=pr[nr-1];break;case 40:pr[nr-1].unshift({type:"criticalStart",criticalText:ea.parseMessage(pr[nr-2]),signalType:ea.LINETYPE.CRITICAL_START}),pr[nr-1].push({type:"criticalEnd",signalType:ea.LINETYPE.CRITICAL_END}),this.$=pr[nr-1];break;case 41:pr[nr-1].unshift({type:"breakStart",breakText:ea.parseMessage(pr[nr-2]),signalType:ea.LINETYPE.BREAK_START}),pr[nr-1].push({type:"breakEnd",optText:ea.parseMessage(pr[nr-2]),signalType:ea.LINETYPE.BREAK_END}),this.$=pr[nr-1];break;case 43:this.$=pr[nr-3].concat([{type:"option",optionText:ea.parseMessage(pr[nr-1]),signalType:ea.LINETYPE.CRITICAL_OPTION},pr[nr]]);break;case 45:this.$=pr[nr-3].concat([{type:"and",parText:ea.parseMessage(pr[nr-1]),signalType:ea.LINETYPE.PAR_AND},pr[nr]]);break;case 47:this.$=pr[nr-3].concat([{type:"else",altText:ea.parseMessage(pr[nr-1]),signalType:ea.LINETYPE.ALT_ELSE},pr[nr]]);break;case 48:pr[nr-3].draw="participant",pr[nr-3].type="addParticipant",pr[nr-3].description=ea.parseMessage(pr[nr-1]),this.$=pr[nr-3];break;case 49:case 53:pr[nr-1].draw="participant",pr[nr-1].type="addParticipant",this.$=pr[nr-1];break;case 50:pr[nr-3].draw="actor",pr[nr-3].type="addParticipant",pr[nr-3].description=ea.parseMessage(pr[nr-1]),this.$=pr[nr-3];break;case 51:pr[nr-1].draw="actor",pr[nr-1].type="addParticipant",this.$=pr[nr-1];break;case 52:pr[nr-1].type="destroyParticipant",this.$=pr[nr-1];break;case 54:this.$=[pr[nr-1],{type:"addNote",placement:pr[nr-2],actor:pr[nr-1].actor,text:pr[nr]}];break;case 55:pr[nr-2]=[].concat(pr[nr-1],pr[nr-1]).slice(0,2),pr[nr-2][0]=pr[nr-2][0].actor,pr[nr-2][1]=pr[nr-2][1].actor,this.$=[pr[nr-1],{type:"addNote",placement:ea.PLACEMENT.OVER,actor:pr[nr-2].slice(0,2),text:pr[nr]}];break;case 56:this.$=[pr[nr-1],{type:"addLinks",actor:pr[nr-1].actor,text:pr[nr]}];break;case 57:this.$=[pr[nr-1],{type:"addALink",actor:pr[nr-1].actor,text:pr[nr]}];break;case 58:this.$=[pr[nr-1],{type:"addProperties",actor:pr[nr-1].actor,text:pr[nr]}];break;case 59:this.$=[pr[nr-1],{type:"addDetails",actor:pr[nr-1].actor,text:pr[nr]}];break;case 62:this.$=[pr[nr-2],pr[nr]];break;case 64:this.$=ea.PLACEMENT.LEFTOF;break;case 65:this.$=ea.PLACEMENT.RIGHTOF;break;case 66:this.$=[pr[nr-4],pr[nr-1],{type:"addMessage",from:pr[nr-4].actor,to:pr[nr-1].actor,signalType:pr[nr-3],msg:pr[nr],activate:!0},{type:"activeStart",signalType:ea.LINETYPE.ACTIVE_START,actor:pr[nr-1].actor}];break;case 67:this.$=[pr[nr-4],pr[nr-1],{type:"addMessage",from:pr[nr-4].actor,to:pr[nr-1].actor,signalType:pr[nr-3],msg:pr[nr]},{type:"activeEnd",signalType:ea.LINETYPE.ACTIVE_END,actor:pr[nr-4].actor}];break;case 68:this.$=[pr[nr-3],pr[nr-1],{type:"addMessage",from:pr[nr-3].actor,to:pr[nr-1].actor,signalType:pr[nr-2],msg:pr[nr]}];break;case 69:this.$={type:"addParticipant",actor:pr[nr-1],config:pr[nr]};break;case 70:this.$=pr[nr-1].trim();break;case 71:this.$={type:"addParticipant",actor:pr[nr]};break;case 72:this.$=ea.LINETYPE.SOLID_OPEN;break;case 73:this.$=ea.LINETYPE.DOTTED_OPEN;break;case 74:this.$=ea.LINETYPE.SOLID;break;case 75:this.$=ea.LINETYPE.BIDIRECTIONAL_SOLID;break;case 76:this.$=ea.LINETYPE.DOTTED;break;case 77:this.$=ea.LINETYPE.BIDIRECTIONAL_DOTTED;break;case 78:this.$=ea.LINETYPE.SOLID_CROSS;break;case 79:this.$=ea.LINETYPE.DOTTED_CROSS;break;case 80:this.$=ea.LINETYPE.SOLID_POINT;break;case 81:this.$=ea.LINETYPE.DOTTED_POINT;break;case 82:this.$=ea.parseMessage(pr[nr].trim().substring(1))}},"anonymous"),table:[{3:1,4:y,5:E,6:I},{1:[3]},{3:5,4:y,5:E,6:I},{3:6,4:y,5:E,6:I},g([1,4,5,13,14,18,21,23,29,30,31,33,35,36,37,38,39,41,43,44,46,50,52,53,55,60,61,62,63,71],m,{7:7}),{1:[2,1]},{1:[2,2]},{1:[2,3],4:D,5:v,8:8,9:10,12:12,13:b,14:C,17:15,18:P,21:Q,22:40,23:xt,24:19,25:20,26:21,27:22,28:23,29:Vt,30:jt,31:Ut,33:Wt,35:xe,36:Xe,37:We,38:gr,39:hr,41:_r,43:$e,44:He,46:Ar,50:kr,52:zr,53:Er,55:Jr,60:Br,61:ha,62:ia,63:jr,71:Qr},g(lr,[2,5]),{9:47,12:12,13:b,14:C,17:15,18:P,21:Q,22:40,23:xt,24:19,25:20,26:21,27:22,28:23,29:Vt,30:jt,31:Ut,33:Wt,35:xe,36:Xe,37:We,38:gr,39:hr,41:_r,43:$e,44:He,46:Ar,50:kr,52:zr,53:Er,55:Jr,60:Br,61:ha,62:ia,63:jr,71:Qr},g(lr,[2,7]),g(lr,[2,8]),g(lr,[2,14]),{12:48,50:kr,52:zr,53:Er},{15:[1,49]},{5:[1,50]},{5:[1,53],19:[1,51],20:[1,52]},{22:54,71:Qr},{22:55,71:Qr},{5:[1,56]},{5:[1,57]},{5:[1,58]},{5:[1,59]},{5:[1,60]},g(lr,[2,29]),g(lr,[2,30]),{32:[1,61]},{34:[1,62]},g(lr,[2,33]),{15:[1,63]},{15:[1,64]},{15:[1,65]},{15:[1,66]},{15:[1,67]},{15:[1,68]},{15:[1,69]},{15:[1,70]},{22:71,54:72,71:[1,73]},{22:74,71:Qr},{22:75,71:Qr},{68:76,76:[1,77],77:[1,78],78:[1,79],79:[1,80],80:[1,81],81:[1,82],82:[1,83],83:[1,84],84:[1,85],85:[1,86]},{56:87,58:[1,88],66:[1,89],67:[1,90]},{22:91,71:Qr},{22:92,71:Qr},{22:93,71:Qr},{22:94,71:Qr},g([5,51,65,76,77,78,79,80,81,82,83,84,85,86],dr),g(lr,[2,6]),g(lr,[2,15]),g(W,[2,9],{10:95}),g(lr,[2,17]),{5:[1,97],19:[1,96]},{5:[1,98]},g(lr,[2,21]),{5:[1,99]},{5:[1,100]},g(lr,[2,24]),g(lr,[2,25]),g(lr,[2,26]),g(lr,[2,27]),g(lr,[2,28]),g(lr,[2,31]),g(lr,[2,32]),g(Yt,m,{7:101}),g(Yt,m,{7:102}),g(Yt,m,{7:103}),g(Ye,m,{40:104,7:105}),g(Ne,m,{42:106,7:107}),g(Ne,m,{7:107,42:108}),g(Tr,m,{45:109,7:110}),g(Yt,m,{7:111}),{5:[1,113],51:[1,112]},{5:[1,114]},g([5,51],dr,{72:115,73:[1,116]}),{5:[1,118],51:[1,117]},{5:[1,119]},{22:122,69:[1,120],70:[1,121],71:Qr},g(yr,[2,72]),g(yr,[2,73]),g(yr,[2,74]),g(yr,[2,75]),g(yr,[2,76]),g(yr,[2,77]),g(yr,[2,78]),g(yr,[2,79]),g(yr,[2,80]),g(yr,[2,81]),{22:123,71:Qr},{22:125,59:124,71:Qr},{71:[2,64]},{71:[2,65]},{57:126,86:da},{57:128,86:da},{57:129,86:da},{57:130,86:da},{4:[1,133],5:[1,135],11:132,12:134,16:[1,131],50:kr,52:zr,53:Er},{5:[1,136]},g(lr,[2,19]),g(lr,[2,20]),g(lr,[2,22]),g(lr,[2,23]),{4:D,5:v,8:8,9:10,12:12,13:b,14:C,16:[1,137],17:15,18:P,21:Q,22:40,23:xt,24:19,25:20,26:21,27:22,28:23,29:Vt,30:jt,31:Ut,33:Wt,35:xe,36:Xe,37:We,38:gr,39:hr,41:_r,43:$e,44:He,46:Ar,50:kr,52:zr,53:Er,55:Jr,60:Br,61:ha,62:ia,63:jr,71:Qr},{4:D,5:v,8:8,9:10,12:12,13:b,14:C,16:[1,138],17:15,18:P,21:Q,22:40,23:xt,24:19,25:20,26:21,27:22,28:23,29:Vt,30:jt,31:Ut,33:Wt,35:xe,36:Xe,37:We,38:gr,39:hr,41:_r,43:$e,44:He,46:Ar,50:kr,52:zr,53:Er,55:Jr,60:Br,61:ha,62:ia,63:jr,71:Qr},{4:D,5:v,8:8,9:10,12:12,13:b,14:C,16:[1,139],17:15,18:P,21:Q,22:40,23:xt,24:19,25:20,26:21,27:22,28:23,29:Vt,30:jt,31:Ut,33:Wt,35:xe,36:Xe,37:We,38:gr,39:hr,41:_r,43:$e,44:He,46:Ar,50:kr,52:zr,53:Er,55:Jr,60:Br,61:ha,62:ia,63:jr,71:Qr},{16:[1,140]},{4:D,5:v,8:8,9:10,12:12,13:b,14:C,16:[2,46],17:15,18:P,21:Q,22:40,23:xt,24:19,25:20,26:21,27:22,28:23,29:Vt,30:jt,31:Ut,33:Wt,35:xe,36:Xe,37:We,38:gr,39:hr,41:_r,43:$e,44:He,46:Ar,49:[1,141],50:kr,52:zr,53:Er,55:Jr,60:Br,61:ha,62:ia,63:jr,71:Qr},{16:[1,142]},{4:D,5:v,8:8,9:10,12:12,13:b,14:C,16:[2,44],17:15,18:P,21:Q,22:40,23:xt,24:19,25:20,26:21,27:22,28:23,29:Vt,30:jt,31:Ut,33:Wt,35:xe,36:Xe,37:We,38:gr,39:hr,41:_r,43:$e,44:He,46:Ar,48:[1,143],50:kr,52:zr,53:Er,55:Jr,60:Br,61:ha,62:ia,63:jr,71:Qr},{16:[1,144]},{16:[1,145]},{4:D,5:v,8:8,9:10,12:12,13:b,14:C,16:[2,42],17:15,18:P,21:Q,22:40,23:xt,24:19,25:20,26:21,27:22,28:23,29:Vt,30:jt,31:Ut,33:Wt,35:xe,36:Xe,37:We,38:gr,39:hr,41:_r,43:$e,44:He,46:Ar,47:[1,146],50:kr,52:zr,53:Er,55:Jr,60:Br,61:ha,62:ia,63:jr,71:Qr},{4:D,5:v,8:8,9:10,12:12,13:b,14:C,16:[1,147],17:15,18:P,21:Q,22:40,23:xt,24:19,25:20,26:21,27:22,28:23,29:Vt,30:jt,31:Ut,33:Wt,35:xe,36:Xe,37:We,38:gr,39:hr,41:_r,43:$e,44:He,46:Ar,50:kr,52:zr,53:Er,55:Jr,60:Br,61:ha,62:ia,63:jr,71:Qr},{15:[1,148]},g(lr,[2,49]),g(lr,[2,53]),{5:[2,69]},{74:[1,149]},{15:[1,150]},g(lr,[2,51]),g(lr,[2,52]),{22:151,71:Qr},{22:152,71:Qr},{57:153,86:da},{57:154,86:da},{57:155,86:da},{65:[1,156],86:[2,63]},{5:[2,56]},{5:[2,82]},{5:[2,57]},{5:[2,58]},{5:[2,59]},g(lr,[2,16]),g(W,[2,10]),{12:157,50:kr,52:zr,53:Er},g(W,[2,12]),g(W,[2,13]),g(lr,[2,18]),g(lr,[2,34]),g(lr,[2,35]),g(lr,[2,36]),g(lr,[2,37]),{15:[1,158]},g(lr,[2,38]),{15:[1,159]},g(lr,[2,39]),g(lr,[2,40]),{15:[1,160]},g(lr,[2,41]),{5:[1,161]},{75:[1,162]},{5:[1,163]},{57:164,86:da},{57:165,86:da},{5:[2,68]},{5:[2,54]},{5:[2,55]},{22:166,71:Qr},g(W,[2,11]),g(Ye,m,{7:105,40:167}),g(Ne,m,{7:107,42:168}),g(Tr,m,{7:110,45:169}),g(lr,[2,48]),{5:[2,70]},g(lr,[2,50]),{5:[2,66]},{5:[2,67]},{86:[2,62]},{16:[2,47]},{16:[2,45]},{16:[2,43]}],defaultActions:{5:[2,1],6:[2,2],89:[2,64],90:[2,65],115:[2,69],126:[2,56],127:[2,82],128:[2,57],129:[2,58],130:[2,59],153:[2,68],154:[2,54],155:[2,55],162:[2,70],164:[2,66],165:[2,67],166:[2,62],167:[2,47],168:[2,45],169:[2,43]},parseError:(0,A.K2)(function(ba,sa){if(!sa.recoverable){var Sa=new Error(ba);throw Sa.hash=sa,Sa}this.trace(ba)},"parseError"),parse:(0,A.K2)(function(ba){var sa=this,Sa=[0],ea=[],Va=[null],pr=[],Ua=this.table,nr="",Oa=0,Ka=0,ti=0,Ha=pr.slice.call(arguments,1),oa=Object.create(this.lexer),hi={yy:{}};for(var Ce in this.yy)Object.prototype.hasOwnProperty.call(this.yy,Ce)&&(hi.yy[Ce]=this.yy[Ce]);oa.setInput(ba,hi.yy),hi.yy.lexer=oa,hi.yy.parser=this,typeof oa.yylloc>"u"&&(oa.yylloc={});var Ri=oa.yylloc;pr.push(Ri);var Fe=oa.options&&oa.options.ranges;function Ct(){var wa;return"number"!=typeof(wa=ea.pop()||oa.lex()||1)&&(wa instanceof Array&&(wa=(ea=wa).pop()),wa=sa.symbols_[wa]||wa),wa}this.parseError="function"==typeof hi.yy.parseError?hi.yy.parseError:Object.getPrototypeOf(this).parseError,(0,A.K2)(function at(wa){Sa.length=Sa.length-2*wa,Va.length=Va.length-wa,pr.length=pr.length-wa},"popStack"),(0,A.K2)(Ct,"lex");for(var M,Jt,Ve,gt,Kt,Xr,Gr,La,Je={};;){if(this.defaultActions[Ve=Sa[Sa.length-1]]?gt=this.defaultActions[Ve]:((null===M||typeof M>"u")&&(M=Ct()),gt=Ua[Ve]&&Ua[Ve][M]),typeof gt>"u"||!gt.length||!gt[0]){var fa;for(Xr in La=[],Ua[Ve])this.terminals_[Xr]&&Xr>2&&La.push("'"+this.terminals_[Xr]+"'");fa=oa.showPosition?"Parse error on line "+(Oa+1)+":\n"+oa.showPosition()+"\nExpecting "+La.join(", ")+", got '"+(this.terminals_[M]||M)+"'":"Parse error on line "+(Oa+1)+": Unexpected "+(1==M?"end of input":"'"+(this.terminals_[M]||M)+"'"),this.parseError(fa,{text:oa.match,token:this.terminals_[M]||M,line:oa.yylineno,loc:Ri,expected:La})}if(gt[0]instanceof Array&&gt.length>1)throw new Error("Parse Error: multiple actions possible at state: "+Ve+", token: "+M);switch(gt[0]){case 1:Sa.push(M),Va.push(oa.yytext),pr.push(oa.yylloc),Sa.push(gt[1]),M=null,Jt?(M=Jt,Jt=null):(Ka=oa.yyleng,nr=oa.yytext,Oa=oa.yylineno,Ri=oa.yylloc,ti>0&&ti--);break;case 2:if(Je.$=Va[Va.length-(Gr=this.productions_[gt[1]][1])],Je._$={first_line:pr[pr.length-(Gr||1)].first_line,last_line:pr[pr.length-1].last_line,first_column:pr[pr.length-(Gr||1)].first_column,last_column:pr[pr.length-1].last_column},Fe&&(Je._$.range=[pr[pr.length-(Gr||1)].range[0],pr[pr.length-1].range[1]]),typeof(Kt=this.performAction.apply(Je,[nr,Ka,Oa,hi.yy,gt[1],Va,pr].concat(Ha)))<"u")return Kt;Gr&&(Sa=Sa.slice(0,-1*Gr*2),Va=Va.slice(0,-1*Gr),pr=pr.slice(0,-1*Gr)),Sa.push(this.productions_[gt[1]][0]),Va.push(Je.$),pr.push(Je._$),Sa.push(Ua[Sa[Sa.length-2]][Sa[Sa.length-1]]);break;case 3:return!0}}return!0},"parse")};function Wa(){this.yy={}}return Pa.lexer=function(){return{EOF:1,parseError:(0,A.K2)(function(sa,Sa){if(!this.yy.parser)throw new Error(sa);this.yy.parser.parseError(sa,Sa)},"parseError"),setInput:(0,A.K2)(function(ba,sa){return this.yy=sa||this.yy||{},this._input=ba,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},"setInput"),input:(0,A.K2)(function(){var ba=this._input[0];return this.yytext+=ba,this.yyleng++,this.offset++,this.match+=ba,this.matched+=ba,ba.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),ba},"input"),unput:(0,A.K2)(function(ba){var sa=ba.length,Sa=ba.split(/(?:\r\n?|\n)/g);this._input=ba+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-sa),this.offset-=sa;var ea=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),Sa.length-1&&(this.yylineno-=Sa.length-1);var Va=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:Sa?(Sa.length===ea.length?this.yylloc.first_column:0)+ea[ea.length-Sa.length].length-Sa[0].length:this.yylloc.first_column-sa},this.options.ranges&&(this.yylloc.range=[Va[0],Va[0]+this.yyleng-sa]),this.yyleng=this.yytext.length,this},"unput"),more:(0,A.K2)(function(){return this._more=!0,this},"more"),reject:(0,A.K2)(function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},"reject"),less:(0,A.K2)(function(ba){this.unput(this.match.slice(ba))},"less"),pastInput:(0,A.K2)(function(){var ba=this.matched.substr(0,this.matched.length-this.match.length);return(ba.length>20?"...":"")+ba.substr(-20).replace(/\n/g,"")},"pastInput"),upcomingInput:(0,A.K2)(function(){var ba=this.match;return ba.length<20&&(ba+=this._input.substr(0,20-ba.length)),(ba.substr(0,20)+(ba.length>20?"...":"")).replace(/\n/g,"")},"upcomingInput"),showPosition:(0,A.K2)(function(){var ba=this.pastInput(),sa=new Array(ba.length+1).join("-");return ba+this.upcomingInput()+"\n"+sa+"^"},"showPosition"),test_match:(0,A.K2)(function(ba,sa){var Sa,ea,Va;if(this.options.backtrack_lexer&&(Va={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(Va.yylloc.range=this.yylloc.range.slice(0))),(ea=ba[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=ea.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:ea?ea[ea.length-1].length-ea[ea.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+ba[0].length},this.yytext+=ba[0],this.match+=ba[0],this.matches=ba,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(ba[0].length),this.matched+=ba[0],Sa=this.performAction.call(this,this.yy,this,sa,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),Sa)return Sa;if(this._backtrack){for(var pr in Va)this[pr]=Va[pr];return!1}return!1},"test_match"),next:(0,A.K2)(function(){if(this.done)return this.EOF;var ba,sa,Sa,ea;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var Va=this._currentRules(),pr=0;pr<Va.length;pr++)if((Sa=this._input.match(this.rules[Va[pr]]))&&(!sa||Sa[0].length>sa[0].length)){if(sa=Sa,ea=pr,this.options.backtrack_lexer){if(!1!==(ba=this.test_match(Sa,Va[pr])))return ba;if(this._backtrack){sa=!1;continue}return!1}if(!this.options.flex)break}return sa?!1!==(ba=this.test_match(sa,Va[ea]))&&ba:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},"next"),lex:(0,A.K2)(function(){return this.next()||this.lex()},"lex"),begin:(0,A.K2)(function(sa){this.conditionStack.push(sa)},"begin"),popState:(0,A.K2)(function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},"popState"),_currentRules:(0,A.K2)(function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},"_currentRules"),topState:(0,A.K2)(function(sa){return(sa=this.conditionStack.length-1-Math.abs(sa||0))>=0?this.conditionStack[sa]:"INITIAL"},"topState"),pushState:(0,A.K2)(function(sa){this.begin(sa)},"pushState"),stateStackSize:(0,A.K2)(function(){return this.conditionStack.length},"stateStackSize"),options:{"case-insensitive":!0},performAction:(0,A.K2)(function(sa,Sa,ea,Va){switch(ea){case 0:case 56:case 72:return 5;case 1:case 2:case 3:case 4:case 5:break;case 6:return 19;case 7:return this.begin("CONFIG"),73;case 8:return 74;case 9:return this.popState(),this.popState(),75;case 10:case 57:return Sa.yytext=Sa.yytext.trim(),71;case 11:case 17:return Sa.yytext=Sa.yytext.trim(),this.begin("ALIAS"),71;case 12:return this.begin("LINE"),14;case 13:return this.begin("ID"),50;case 14:return this.begin("ID"),52;case 15:return 13;case 16:return this.begin("ID"),53;case 18:return this.popState(),this.popState(),this.begin("LINE"),51;case 19:return this.popState(),this.popState(),5;case 20:return this.begin("LINE"),36;case 21:return this.begin("LINE"),37;case 22:return this.begin("LINE"),38;case 23:return this.begin("LINE"),39;case 24:return this.begin("LINE"),49;case 25:return this.begin("LINE"),41;case 26:return this.begin("LINE"),43;case 27:return this.begin("LINE"),48;case 28:return this.begin("LINE"),44;case 29:return this.begin("LINE"),47;case 30:return this.begin("LINE"),46;case 31:return this.popState(),15;case 32:return 16;case 33:return 66;case 34:return 67;case 35:return 60;case 36:return 61;case 37:return 62;case 38:return 63;case 39:return 58;case 40:return 55;case 41:return this.begin("ID"),21;case 42:return this.begin("ID"),23;case 43:return 29;case 44:return 30;case 45:return this.begin("acc_title"),31;case 46:return this.popState(),"acc_title_value";case 47:return this.begin("acc_descr"),33;case 48:return this.popState(),"acc_descr_value";case 49:this.begin("acc_descr_multiline");break;case 50:this.popState();break;case 51:return"acc_descr_multiline_value";case 52:return 6;case 53:return 18;case 54:return 20;case 55:return 65;case 58:return 78;case 59:return 79;case 60:return 80;case 61:return 81;case 62:return 76;case 63:return 77;case 64:return 82;case 65:return 83;case 66:return 84;case 67:return 85;case 68:case 69:return 86;case 70:return 69;case 71:return 70;case 73:return"INVALID"}},"anonymous"),rules:[/^(?:[\n]+)/i,/^(?:\s+)/i,/^(?:((?!\n)\s)+)/i,/^(?:#[^\n]*)/i,/^(?:%(?!\{)[^\n]*)/i,/^(?:[^\}]%%[^\n]*)/i,/^(?:[0-9]+(?=[ \n]+))/i,/^(?:@\{)/i,/^(?:[^\}]+)/i,/^(?:\})/i,/^(?:[^\<->\->:\n,;@\s]+(?=@\{))/i,/^(?:[^\<->\->:\n,;@]+?([\-]*[^\<->\->:\n,;@]+?)*?(?=((?!\n)\s)+as(?!\n)\s|[#\n;]|$))/i,/^(?:box\b)/i,/^(?:participant\b)/i,/^(?:actor\b)/i,/^(?:create\b)/i,/^(?:destroy\b)/i,/^(?:[^<\->\->:\n,;]+?([\-]*[^<\->\->:\n,;]+?)*?(?=((?!\n)\s)+as(?!\n)\s|[#\n;]|$))/i,/^(?:as\b)/i,/^(?:(?:))/i,/^(?:loop\b)/i,/^(?:rect\b)/i,/^(?:opt\b)/i,/^(?:alt\b)/i,/^(?:else\b)/i,/^(?:par\b)/i,/^(?:par_over\b)/i,/^(?:and\b)/i,/^(?:critical\b)/i,/^(?:option\b)/i,/^(?:break\b)/i,/^(?:(?:[:]?(?:no)?wrap)?[^#\n;]*)/i,/^(?:end\b)/i,/^(?:left of\b)/i,/^(?:right of\b)/i,/^(?:links\b)/i,/^(?:link\b)/i,/^(?:properties\b)/i,/^(?:details\b)/i,/^(?:over\b)/i,/^(?:note\b)/i,/^(?:activate\b)/i,/^(?:deactivate\b)/i,/^(?:title\s[^#\n;]+)/i,/^(?:title:\s[^#\n;]+)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:sequenceDiagram\b)/i,/^(?:autonumber\b)/i,/^(?:off\b)/i,/^(?:,)/i,/^(?:;)/i,/^(?:[^+<\->\->:\n,;]+((?!(-x|--x|-\)|--\)))[\-]*[^\+<\->\->:\n,;]+)*)/i,/^(?:->>)/i,/^(?:<<->>)/i,/^(?:-->>)/i,/^(?:<<-->>)/i,/^(?:->)/i,/^(?:-->)/i,/^(?:-[x])/i,/^(?:--[x])/i,/^(?:-[\)])/i,/^(?:--[\)])/i,/^(?::(?:(?:no)?wrap)?[^#\n;]*)/i,/^(?::)/i,/^(?:\+)/i,/^(?:-)/i,/^(?:$)/i,/^(?:.)/i],conditions:{acc_descr_multiline:{rules:[50,51],inclusive:!1},acc_descr:{rules:[48],inclusive:!1},acc_title:{rules:[46],inclusive:!1},ID:{rules:[2,3,7,10,11,17],inclusive:!1},ALIAS:{rules:[2,3,18,19],inclusive:!1},LINE:{rules:[2,3,31],inclusive:!1},CONFIG:{rules:[8,9],inclusive:!1},CONFIG_DATA:{rules:[],inclusive:!1},INITIAL:{rules:[0,1,3,4,5,6,12,13,14,15,16,20,21,22,23,24,25,26,27,28,29,30,32,33,34,35,36,37,38,39,40,41,42,43,44,45,47,49,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73],inclusive:!0}}}}(),(0,A.K2)(Wa,"Parser"),Wa.prototype=Pa,Pa.Parser=Wa,new Wa}();dt.parser=dt;var Rt=dt,q={SOLID:0,DOTTED:1,NOTE:2,SOLID_CROSS:3,DOTTED_CROSS:4,SOLID_OPEN:5,DOTTED_OPEN:6,LOOP_START:10,LOOP_END:11,ALT_START:12,ALT_ELSE:13,ALT_END:14,OPT_START:15,OPT_END:16,ACTIVE_START:17,ACTIVE_END:18,PAR_START:19,PAR_AND:20,PAR_END:21,RECT_START:22,RECT_END:23,SOLID_POINT:24,DOTTED_POINT:25,AUTONUMBER:26,CRITICAL_START:27,CRITICAL_OPTION:28,CRITICAL_END:29,BREAK_START:30,BREAK_END:31,PAR_OVER_START:32,BIDIRECTIONAL_SOLID:33,BIDIRECTIONAL_DOTTED:34},ar={FILLED:0,OPEN:1},Ke={LEFTOF:0,RIGHTOF:1,OVER:2},Rr=(class{constructor(){this.state=new Pt.m(()=>({prevActor:void 0,actors:new Map,createdActors:new Map,destroyedActors:new Map,boxes:[],messages:[],notes:[],sequenceNumbersEnabled:!1,wrapEnabled:void 0,currentBox:void 0,lastCreated:void 0,lastDestroyed:void 0})),this.setAccTitle=$.SV,this.setAccDescription=$.EI,this.setDiagramTitle=$.ke,this.getAccTitle=$.iN,this.getAccDescription=$.m7,this.getDiagramTitle=$.ab,this.apply=this.apply.bind(this),this.parseBoxData=this.parseBoxData.bind(this),this.parseMessage=this.parseMessage.bind(this),this.clear(),this.setWrap((0,$.D7)().wrap),this.LINETYPE=q,this.ARROWTYPE=ar,this.PLACEMENT=Ke}addBox(g){this.state.records.boxes.push({name:g.text,wrap:g.wrap??this.autoWrap(),fill:g.color,actorKeys:[]}),this.state.records.currentBox=this.state.records.boxes.slice(-1)[0]}addActor(g,y,E,I,m){let v,D=this.state.records.currentBox;if(void 0!==m){let C;C=m.includes("\n")?m+"\n":"{\n"+m+"\n}",v=(0,S.H)(C,{schema:S.r})}I=v?.type??I;const b=this.state.records.actors.get(g);if(b){if(this.state.records.currentBox&&b.box&&this.state.records.currentBox!==b.box)throw new Error(`A same participant should only be defined in one Box: ${b.name} can't be in '${b.box.name}' and in '${this.state.records.currentBox.name}' at the same time.`);if(D=b.box?b.box:this.state.records.currentBox,b.box=D,b&&y===b.name&&null==E)return}if(null==E?.text&&(E={text:y,type:I}),(null==I||null==E.text)&&(E={text:y,type:I}),this.state.records.actors.set(g,{box:D,name:y,description:E.text,wrap:E.wrap??this.autoWrap(),prevActor:this.state.records.prevActor,links:{},properties:{},actorCnt:null,rectData:null,type:I??"participant"}),this.state.records.prevActor){const C=this.state.records.actors.get(this.state.records.prevActor);C&&(C.nextActor=g)}this.state.records.currentBox&&this.state.records.currentBox.actorKeys.push(g),this.state.records.prevActor=g}activationCount(g){let y,E=0;if(!g)return 0;for(y=0;y<this.state.records.messages.length;y++)this.state.records.messages[y].type===this.LINETYPE.ACTIVE_START&&this.state.records.messages[y].from===g&&E++,this.state.records.messages[y].type===this.LINETYPE.ACTIVE_END&&this.state.records.messages[y].from===g&&E--;return E}addMessage(g,y,E,I){this.state.records.messages.push({id:this.state.records.messages.length.toString(),from:g,to:y,message:E.text,wrap:E.wrap??this.autoWrap(),answer:I})}addSignal(g,y,E,I,m=!1){if(I===this.LINETYPE.ACTIVE_END&&this.activationCount(g??"")<1){const v=new Error("Trying to inactivate an inactive participant ("+g+")");throw v.hash={text:"->>-",token:"->>-",line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["'ACTIVE_PARTICIPANT'"]},v}return this.state.records.messages.push({id:this.state.records.messages.length.toString(),from:g,to:y,message:E?.text??"",wrap:E?.wrap??this.autoWrap(),type:I,activate:m}),!0}hasAtLeastOneBox(){return this.state.records.boxes.length>0}hasAtLeastOneBoxWithTitle(){return this.state.records.boxes.some(g=>g.name)}getMessages(){return this.state.records.messages}getBoxes(){return this.state.records.boxes}getActors(){return this.state.records.actors}getCreatedActors(){return this.state.records.createdActors}getDestroyedActors(){return this.state.records.destroyedActors}getActor(g){return this.state.records.actors.get(g)}getActorKeys(){return[...this.state.records.actors.keys()]}enableSequenceNumbers(){this.state.records.sequenceNumbersEnabled=!0}disableSequenceNumbers(){this.state.records.sequenceNumbersEnabled=!1}showSequenceNumbers(){return this.state.records.sequenceNumbersEnabled}setWrap(g){this.state.records.wrapEnabled=g}extractWrap(g){if(void 0===g)return{};g=g.trim();const y=null!==/^:?wrap:/.exec(g)||null===/^:?nowrap:/.exec(g)&&void 0;return{cleanedText:(void 0===y?g:g.replace(/^:?(?:no)?wrap:/,"")).trim(),wrap:y}}autoWrap(){return void 0!==this.state.records.wrapEnabled?this.state.records.wrapEnabled:(0,$.D7)().sequence?.wrap??!1}clear(){this.state.reset(),(0,$.IU)()}parseMessage(g){const y=g.trim(),{wrap:E,cleanedText:I}=this.extractWrap(y),m={text:I,wrap:E};return A.Rm.debug(`parseMessage: ${JSON.stringify(m)}`),m}parseBoxData(g){const y=/^((?:rgba?|hsla?)\s*\(.*\)|\w*)(.*)$/.exec(g);let E=y?.[1]?y[1].trim():"transparent",I=y?.[2]?y[2].trim():void 0;if(window?.CSS)window.CSS.supports("color",E)||(E="transparent",I=g.trim());else{const v=(new Option).style;v.color=E,v.color!==E&&(E="transparent",I=g.trim())}const{wrap:m,cleanedText:D}=this.extractWrap(I);return{text:D?(0,$.jZ)(D,(0,$.D7)()):void 0,color:E,wrap:m}}addNote(g,y,E){const I={actor:g,placement:y,message:E.text,wrap:E.wrap??this.autoWrap()},m=[].concat(g,g);this.state.records.notes.push(I),this.state.records.messages.push({id:this.state.records.messages.length.toString(),from:m[0],to:m[1],message:E.text,wrap:E.wrap??this.autoWrap(),type:this.LINETYPE.NOTE,placement:y})}addLinks(g,y){const E=this.getActor(g);try{let I=(0,$.jZ)(y.text,(0,$.D7)());I=I.replace(/&equals;/g,"="),I=I.replace(/&amp;/g,"&");const m=JSON.parse(I);this.insertLinks(E,m)}catch(I){A.Rm.error("error while parsing actor link text",I)}}addALink(g,y){const E=this.getActor(g);try{const I={};let m=(0,$.jZ)(y.text,(0,$.D7)());const D=m.indexOf("@");m=m.replace(/&equals;/g,"="),m=m.replace(/&amp;/g,"&");const v=m.slice(0,D-1).trim(),b=m.slice(D+1).trim();I[v]=b,this.insertLinks(E,I)}catch(I){A.Rm.error("error while parsing actor link text",I)}}insertLinks(g,y){if(null==g.links)g.links=y;else for(const E in y)g.links[E]=y[E]}addProperties(g,y){const E=this.getActor(g);try{const I=(0,$.jZ)(y.text,(0,$.D7)()),m=JSON.parse(I);this.insertProperties(E,m)}catch(I){A.Rm.error("error while parsing actor properties text",I)}}insertProperties(g,y){if(null==g.properties)g.properties=y;else for(const E in y)g.properties[E]=y[E]}boxEnd(){this.state.records.currentBox=void 0}addDetails(g,y){const E=this.getActor(g),I=document.getElementById(y.text);try{const D=JSON.parse(I.innerHTML);D.properties&&this.insertProperties(E,D.properties),D.links&&this.insertLinks(E,D.links)}catch(m){A.Rm.error("error while parsing actor details text",m)}}getActorProperty(g,y){if(void 0!==g?.properties)return g.properties[y]}apply(g){if(Array.isArray(g))g.forEach(y=>{this.apply(y)});else switch(g.type){case"sequenceIndex":this.state.records.messages.push({id:this.state.records.messages.length.toString(),from:void 0,to:void 0,message:{start:g.sequenceIndex,step:g.sequenceIndexStep,visible:g.sequenceVisible},wrap:!1,type:g.signalType});break;case"addParticipant":this.addActor(g.actor,g.actor,g.description,g.draw,g.config);break;case"createParticipant":if(this.state.records.actors.has(g.actor))throw new Error("It is not possible to have actors with the same id, even if one is destroyed before the next is created. Use 'AS' aliases to simulate the behavior");this.state.records.lastCreated=g.actor,this.addActor(g.actor,g.actor,g.description,g.draw,g.config),this.state.records.createdActors.set(g.actor,this.state.records.messages.length);break;case"destroyParticipant":this.state.records.lastDestroyed=g.actor,this.state.records.destroyedActors.set(g.actor,this.state.records.messages.length);break;case"activeStart":case"activeEnd":this.addSignal(g.actor,void 0,void 0,g.signalType);break;case"addNote":this.addNote(g.actor,g.placement,g.text);break;case"addLinks":this.addLinks(g.actor,g.text);break;case"addALink":this.addALink(g.actor,g.text);break;case"addProperties":this.addProperties(g.actor,g.text);break;case"addDetails":this.addDetails(g.actor,g.text);break;case"addMessage":if(this.state.records.lastCreated){if(g.to!==this.state.records.lastCreated)throw new Error("The created participant "+this.state.records.lastCreated.name+" does not have an associated creating message after its declaration. Please check the sequence diagram.");this.state.records.lastCreated=void 0}else if(this.state.records.lastDestroyed){if(g.to!==this.state.records.lastDestroyed&&g.from!==this.state.records.lastDestroyed)throw new Error("The destroyed participant "+this.state.records.lastDestroyed.name+" does not have an associated destroying message after its declaration. Please check the sequence diagram.");this.state.records.lastDestroyed=void 0}this.addSignal(g.from,g.to,g.msg,g.signalType,g.activate);break;case"boxStart":this.addBox(g.boxData);break;case"boxEnd":this.boxEnd();break;case"loopStart":this.addSignal(void 0,void 0,g.loopText,g.signalType);break;case"loopEnd":case"rectEnd":case"optEnd":case"altEnd":case"parEnd":case"criticalEnd":case"breakEnd":this.addSignal(void 0,void 0,void 0,g.signalType);break;case"rectStart":this.addSignal(void 0,void 0,g.color,g.signalType);break;case"optStart":this.addSignal(void 0,void 0,g.optText,g.signalType);break;case"altStart":case"else":this.addSignal(void 0,void 0,g.altText,g.signalType);break;case"setAccTitle":(0,$.SV)(g.text);break;case"parStart":case"and":this.addSignal(void 0,void 0,g.parText,g.signalType);break;case"criticalStart":this.addSignal(void 0,void 0,g.criticalText,g.signalType);break;case"option":this.addSignal(void 0,void 0,g.optionText,g.signalType);break;case"breakStart":this.addSignal(void 0,void 0,g.breakText,g.signalType)}}getConfig(){return(0,$.D7)().sequence}static#t=Ge=()=>((0,ee.A)(this,"SequenceDB"),(0,A.K2)(this,"SequenceDB"),this)},Ge()),Vr=(0,A.K2)(g=>`.actor {\n    stroke: ${g.actorBorder};\n    fill: ${g.actorBkg};\n  }\n\n  text.actor > tspan {\n    fill: ${g.actorTextColor};\n    stroke: none;\n  }\n\n  .actor-line {\n    stroke: ${g.actorLineColor};\n  }\n  \n  .innerArc {\n    stroke-width: 1.5;\n    stroke-dasharray: none;\n  }\n\n  .messageLine0 {\n    stroke-width: 1.5;\n    stroke-dasharray: none;\n    stroke: ${g.signalColor};\n  }\n\n  .messageLine1 {\n    stroke-width: 1.5;\n    stroke-dasharray: 2, 2;\n    stroke: ${g.signalColor};\n  }\n\n  #arrowhead path {\n    fill: ${g.signalColor};\n    stroke: ${g.signalColor};\n  }\n\n  .sequenceNumber {\n    fill: ${g.sequenceNumberColor};\n  }\n\n  #sequencenumber {\n    fill: ${g.signalColor};\n  }\n\n  #crosshead path {\n    fill: ${g.signalColor};\n    stroke: ${g.signalColor};\n  }\n\n  .messageText {\n    fill: ${g.signalTextColor};\n    stroke: none;\n  }\n\n  .labelBox {\n    stroke: ${g.labelBoxBorderColor};\n    fill: ${g.labelBoxBkgColor};\n  }\n\n  .labelText, .labelText > tspan {\n    fill: ${g.labelTextColor};\n    stroke: none;\n  }\n\n  .loopText, .loopText > tspan {\n    fill: ${g.loopTextColor};\n    stroke: none;\n  }\n\n  .loopLine {\n    stroke-width: 2px;\n    stroke-dasharray: 2, 2;\n    stroke: ${g.labelBoxBorderColor};\n    fill: ${g.labelBoxBorderColor};\n  }\n\n  .note {\n    //stroke: #decc93;\n    stroke: ${g.noteBorderColor};\n    fill: ${g.noteBkgColor};\n  }\n\n  .noteText, .noteText > tspan {\n    fill: ${g.noteTextColor};\n    stroke: none;\n  }\n\n  .activation0 {\n    fill: ${g.activationBkgColor};\n    stroke: ${g.activationBorderColor};\n  }\n\n  .activation1 {\n    fill: ${g.activationBkgColor};\n    stroke: ${g.activationBorderColor};\n  }\n\n  .activation2 {\n    fill: ${g.activationBkgColor};\n    stroke: ${g.activationBorderColor};\n  }\n\n  .actorPopupMenu {\n    position: absolute;\n  }\n\n  .actorPopupMenuPanel {\n    position: absolute;\n    fill: ${g.actorBkg};\n    box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);\n    filter: drop-shadow(3px 5px 2px rgb(0 0 0 / 0.4));\n}\n  .actor-man line {\n    stroke: ${g.actorBorder};\n    fill: ${g.actorBkg};\n  }\n  .actor-man circle, line {\n    stroke: ${g.actorBorder};\n    fill: ${g.actorBkg};\n    stroke-width: 2px;\n  }\n\n`,"getStyles"),Nr="actor-top",Fr="actor-bottom",Se="actor-box",Or="actor-man",je=(0,A.K2)(function(g,y){return(0,L.tk)(g,y)},"drawRect"),z=(0,A.K2)(function(g,y,E,I,m){if(null==y.links||0===Object.keys(y.links).length)return{height:0,width:0};const D=y.links,v=y.actorCnt,b=y.rectData;var C="none";m&&(C="block !important");const P=g.append("g");P.attr("id","actor"+v+"_popup"),P.attr("class","actorPopupMenu"),P.attr("display",C);var Q="";void 0!==b.class&&(Q=" "+b.class);let xt=b.width>E?b.width:E;const Vt=P.append("rect");if(Vt.attr("class","actorPopupMenuPanel"+Q),Vt.attr("x",b.x),Vt.attr("y",b.height),Vt.attr("fill",b.fill),Vt.attr("stroke",b.stroke),Vt.attr("width",xt),Vt.attr("height",b.height),Vt.attr("rx",b.rx),Vt.attr("ry",b.ry),null!=D){var jt=20;for(let xe in D){var Ut=P.append("a"),Wt=(0,wt.J)(D[xe]);Ut.attr("xlink:href",Wt),Ut.attr("target","_blank"),ht(I)(xe,Ut,b.x+10,b.height+jt,xt,20,{class:"actor"},I),jt+=30}}return Vt.attr("height",jt),{height:b.height+jt,width:xt}},"drawPopup"),ft=(0,A.K2)(function(g){return"var pu = document.getElementById('"+g+"'); if (pu != null) { pu.style.display = pu.style.display == 'block' ? 'none' : 'block'; }"},"popupMenuToggle"),Bt=(0,A.K2)(function(){var g=(0,ot.A)(function*(y,E,I=null){let m=y.append("foreignObject");const D=yield(0,$.dj)(E.text,(0,$.zj)()),b=m.append("xhtml:div").attr("style","width: fit-content;").attr("xmlns","http://www.w3.org/1999/xhtml").html(D).node().getBoundingClientRect();if(m.attr("height",Math.round(b.height)).attr("width",Math.round(b.width)),"noteText"===E.class){const C=y.node().firstChild;C.setAttribute("height",b.height+2*E.textMargin);const P=C.getBBox();m.attr("x",Math.round(P.x+P.width/2-b.width/2)).attr("y",Math.round(P.y+P.height/2-b.height/2))}else if(I){let{startx:C,stopx:P,starty:Q}=I;if(C>P){const xt=C;C=P,P=xt}m.attr("x",Math.round(C+Math.abs(C-P)/2-b.width/2)),m.attr("y","loopText"===E.class?Math.round(Q):Math.round(Q-b.height))}return[m]});return function(y,E){return g.apply(this,arguments)}}(),"drawKatex"),we=(0,A.K2)(function(g,y){let E=0,I=0;const m=y.text.split($.Y2.lineBreakRegex),[D,v]=(0,ut.I5)(y.fontSize);let b=[],C=0,P=(0,A.K2)(()=>y.y,"yfunc");if(void 0!==y.valign&&void 0!==y.textMargin&&y.textMargin>0)switch(y.valign){case"top":case"start":P=(0,A.K2)(()=>Math.round(y.y+y.textMargin),"yfunc");break;case"middle":case"center":P=(0,A.K2)(()=>Math.round(y.y+(E+I+y.textMargin)/2),"yfunc");break;case"bottom":case"end":P=(0,A.K2)(()=>Math.round(y.y+(E+I+2*y.textMargin)-y.textMargin),"yfunc")}if(void 0!==y.anchor&&void 0!==y.textMargin&&void 0!==y.width)switch(y.anchor){case"left":case"start":y.x=Math.round(y.x+y.textMargin),y.anchor="start",y.dominantBaseline="middle",y.alignmentBaseline="middle";break;case"middle":case"center":y.x=Math.round(y.x+y.width/2),y.anchor="middle",y.dominantBaseline="middle",y.alignmentBaseline="middle";break;case"right":case"end":y.x=Math.round(y.x+y.width-y.textMargin),y.anchor="end",y.dominantBaseline="middle",y.alignmentBaseline="middle"}for(let[Q,xt]of m.entries()){void 0!==y.textMargin&&0===y.textMargin&&void 0!==D&&(C=Q*D);const Vt=g.append("text");Vt.attr("x",y.x),Vt.attr("y",P()),void 0!==y.anchor&&Vt.attr("text-anchor",y.anchor).attr("dominant-baseline",y.dominantBaseline).attr("alignment-baseline",y.alignmentBaseline),void 0!==y.fontFamily&&Vt.style("font-family",y.fontFamily),void 0!==v&&Vt.style("font-size",v),void 0!==y.fontWeight&&Vt.style("font-weight",y.fontWeight),void 0!==y.fill&&Vt.attr("fill",y.fill),void 0!==y.class&&Vt.attr("class",y.class),void 0!==y.dy?Vt.attr("dy",y.dy):0!==C&&Vt.attr("dy",C);const jt=xt||ut.pe;if(y.tspan){const Ut=Vt.append("tspan");Ut.attr("x",y.x),void 0!==y.fill&&Ut.attr("fill",y.fill),Ut.text(jt)}else Vt.text(jt);void 0!==y.valign&&void 0!==y.textMargin&&y.textMargin>0&&(I+=(Vt._groups||Vt)[0][0].getBBox().height,E=I),b.push(Vt)}return b},"drawText"),X=(0,A.K2)(function(g,y){function E(m,D,v,b,C){return m+","+D+" "+(m+v)+","+D+" "+(m+v)+","+(D+b-C)+" "+(m+v-1.2*C)+","+(D+b)+" "+m+","+(D+b)}(0,A.K2)(E,"genPoints");const I=g.append("polygon");return I.attr("points",E(y.x,y.y,y.width,y.height,7)),I.attr("class","labelBox"),y.y=y.y+y.height/2,we(g,y),I},"drawLabel"),ae=-1,w=(0,A.K2)((g,y,E,I)=>{g.select&&E.forEach(m=>{const D=y.get(m),v=g.select("#actor"+D.actorCnt);!I.mirrorActors&&D.stopy?v.attr("y2",D.stopy+D.height/2):I.mirrorActors&&v.attr("y2",D.stopy)})},"fixLifeLineHeights"),re=(0,A.K2)(function(g,y,E,I){const m=I?y.stopy:y.starty,D=y.x+y.width/2,v=m+y.height,b=g.append("g").lower();var C=b;I||(ae++,Object.keys(y.links||{}).length&&!E.forceMenus&&C.attr("onclick",ft(`actor${ae}_popup`)).attr("cursor","pointer"),C.append("line").attr("id","actor"+ae).attr("x1",D).attr("y1",v).attr("x2",D).attr("y2",2e3).attr("class","actor-line 200").attr("stroke-width","0.5px").attr("stroke","#999").attr("name",y.name),C=b.append("g"),y.actorCnt=ae,null!=y.links&&C.attr("id","root-"+ae));const P=(0,L.PB)();var Q="actor";y.properties?.class?Q=y.properties.class:P.fill="#eaeaea",Q+=I?` ${Fr}`:` ${Nr}`,P.x=y.x,P.y=m,P.width=y.width,P.height=y.height,P.class=Q,P.rx=3,P.ry=3,P.name=y.name;const xt=je(C,P);if(y.rectData=P,y.properties?.icon){const jt=y.properties.icon.trim();"@"===jt.charAt(0)?(0,L.CP)(C,P.x+P.width-20,P.y+10,jt.substr(1)):(0,L.aC)(C,P.x+P.width-20,P.y+10,jt)}_t(E,(0,$.Wi)(y.description))(y.description,C,P.x,P.y,P.width,P.height,{class:`actor ${Se}`},E);let Vt=y.height;if(xt.node){const jt=xt.node().getBBox();y.height=jt.height,Vt=jt.height}return Vt},"drawActorTypeParticipant"),It=(0,A.K2)(function(g,y,E,I){const m=I?y.stopy:y.starty,D=y.x+y.width/2,v=m+y.height,b=g.append("g").lower();var C=b;I||(ae++,Object.keys(y.links||{}).length&&!E.forceMenus&&C.attr("onclick",ft(`actor${ae}_popup`)).attr("cursor","pointer"),C.append("line").attr("id","actor"+ae).attr("x1",D).attr("y1",v).attr("x2",D).attr("y2",2e3).attr("class","actor-line 200").attr("stroke-width","0.5px").attr("stroke","#999").attr("name",y.name),C=b.append("g"),y.actorCnt=ae,null!=y.links&&C.attr("id","root-"+ae));const P=(0,L.PB)();var Q="actor";y.properties?.class?Q=y.properties.class:P.fill="#eaeaea",Q+=I?` ${Fr}`:` ${Nr}`,P.x=y.x,P.y=m,P.width=y.width,P.height=y.height,P.class=Q,P.name=y.name;const Vt={...P,x:P.x+-6,y:P.y+6,class:"actor"},jt=je(C,P);if(je(C,Vt),y.rectData=P,y.properties?.icon){const Wt=y.properties.icon.trim();"@"===Wt.charAt(0)?(0,L.CP)(C,P.x+P.width-20,P.y+10,Wt.substr(1)):(0,L.aC)(C,P.x+P.width-20,P.y+10,Wt)}_t(E,(0,$.Wi)(y.description))(y.description,C,P.x-6,P.y+6,P.width,P.height,{class:`actor ${Se}`},E);let Ut=y.height;if(jt.node){const Wt=jt.node().getBBox();y.height=Wt.height,Ut=Wt.height}return Ut},"drawActorTypeCollections"),qt=(0,A.K2)(function(g,y,E,I){const m=I?y.stopy:y.starty,D=y.x+y.width/2,v=m+y.height,b=g.append("g").lower();let C=b;I||(ae++,Object.keys(y.links||{}).length&&!E.forceMenus&&C.attr("onclick",ft(`actor${ae}_popup`)).attr("cursor","pointer"),C.append("line").attr("id","actor"+ae).attr("x1",D).attr("y1",v).attr("x2",D).attr("y2",2e3).attr("class","actor-line 200").attr("stroke-width","0.5px").attr("stroke","#999").attr("name",y.name),C=b.append("g"),y.actorCnt=ae,null!=y.links&&C.attr("id","root-"+ae));const P=(0,L.PB)();let Q="actor";y.properties?.class?Q=y.properties.class:P.fill="#eaeaea",Q+=I?` ${Fr}`:` ${Nr}`,P.x=y.x,P.y=m,P.width=y.width,P.height=y.height,P.class=Q,P.name=y.name;const xt=P.height/2,Vt=xt/(2.5+P.height/50),jt=C.append("g"),Ut=C.append("g");if(jt.append("path").attr("d",`M ${P.x},${P.y+xt}\n    a ${Vt},${xt} 0 0 0 0,${P.height}\n    h ${P.width-2*Vt}\n    a ${Vt},${xt} 0 0 0 0,-${P.height}\n    Z\n  `).attr("class",Q),Ut.append("path").attr("d",`M ${P.x},${P.y+xt}\n      a ${Vt},${xt} 0 0 0 0,${P.height}`).attr("stroke","#666").attr("stroke-width","1px").attr("class",Q),jt.attr("transform",`translate(${Vt}, ${-P.height/2})`),Ut.attr("transform",`translate(${P.width-Vt}, ${-P.height/2})`),y.rectData=P,y.properties?.icon){const Xe=y.properties.icon.trim(),We=P.x+P.width-20,gr=P.y+10;"@"===Xe.charAt(0)?(0,L.CP)(C,We,gr,Xe.substr(1)):(0,L.aC)(C,We,gr,Xe)}_t(E,(0,$.Wi)(y.description))(y.description,C,P.x,P.y,P.width,P.height,{class:`actor ${Se}`},E);let Wt=y.height;const xe=jt.select("path:last-child");if(xe.node()){const Xe=xe.node().getBBox();y.height=Xe.height,Wt=Xe.height}return Wt},"drawActorTypeQueue"),V=(0,A.K2)(function(g,y,E,I){const m=I?y.stopy:y.starty,D=y.x+y.width/2,v=m+75,b=g.append("g").lower();I||(ae++,b.append("line").attr("id","actor"+ae).attr("x1",D).attr("y1",v).attr("x2",D).attr("y2",2e3).attr("class","actor-line 200").attr("stroke-width","0.5px").attr("stroke","#999").attr("name",y.name),y.actorCnt=ae);const C=g.append("g");let P=Or;P+=I?` ${Fr}`:` ${Nr}`,C.attr("class",P),C.attr("name",y.name);const Q=(0,L.PB)();Q.x=y.x,Q.y=m,Q.fill="#eaeaea",Q.width=y.width,Q.height=y.height,Q.class="actor";const xt=y.x+y.width/2,Vt=m+30;C.append("defs").append("marker").attr("id","filled-head-control").attr("refX",11).attr("refY",5.8).attr("markerWidth",20).attr("markerHeight",28).attr("orient","172.5").append("path").attr("d","M 14.4 5.6 L 7.2 10.4 L 8.8 5.6 L 7.2 0.8 Z"),C.append("circle").attr("cx",xt).attr("cy",Vt).attr("r",18).attr("fill","#eaeaf7").attr("stroke","#666").attr("stroke-width",1.2),C.append("line").attr("marker-end","url(#filled-head-control)").attr("transform",`translate(${xt}, ${Vt-18})`);const Ut=C.node().getBBox();return y.height=Ut.height+2*(E?.sequence?.labelBoxHeight??0),_t(E,(0,$.Wi)(y.description))(y.description,C,Q.x,Q.y+18+(I?5:10),Q.width,Q.height,{class:`actor ${Or}`},E),y.height},"drawActorTypeControl"),pt=(0,A.K2)(function(g,y,E,I){const m=I?y.stopy:y.starty,D=y.x+y.width/2,v=m+75,b=g.append("g").lower(),C=g.append("g");let P=Or;P+=I?` ${Fr}`:` ${Nr}`,C.attr("class",P),C.attr("name",y.name);const Q=(0,L.PB)();Q.x=y.x,Q.y=m,Q.fill="#eaeaea",Q.width=y.width,Q.height=y.height,Q.class="actor";const xt=y.x+y.width/2,Vt=m+(I?10:25);C.append("circle").attr("cx",xt).attr("cy",Vt).attr("r",18).attr("width",y.width).attr("height",y.height),C.append("line").attr("x1",xt-18).attr("x2",xt+18).attr("y1",Vt+18).attr("y2",Vt+18).attr("stroke","#333").attr("stroke-width",2);const Ut=C.node().getBBox();return y.height=Ut.height+(E?.sequence?.labelBoxHeight??0),I||(ae++,b.append("line").attr("id","actor"+ae).attr("x1",D).attr("y1",v).attr("x2",D).attr("y2",2e3).attr("class","actor-line 200").attr("stroke-width","0.5px").attr("stroke","#999").attr("name",y.name),y.actorCnt=ae),_t(E,(0,$.Wi)(y.description))(y.description,C,Q.x,Q.y+(I?(Vt-m+18-5)/2:(Vt+18-m)/2),Q.width,Q.height,{class:`actor ${Or}`},E),C.attr("transform","translate(0, 9)"),y.height},"drawActorTypeEntity"),H=(0,A.K2)(function(g,y,E,I){const m=I?y.stopy:y.starty,D=y.x+y.width/2,v=m+y.height+2*E.boxTextMargin,b=g.append("g").lower();let C=b;I||(ae++,Object.keys(y.links||{}).length&&!E.forceMenus&&C.attr("onclick",ft(`actor${ae}_popup`)).attr("cursor","pointer"),C.append("line").attr("id","actor"+ae).attr("x1",D).attr("y1",v).attr("x2",D).attr("y2",2e3).attr("class","actor-line 200").attr("stroke-width","0.5px").attr("stroke","#999").attr("name",y.name),C=b.append("g"),y.actorCnt=ae,null!=y.links&&C.attr("id","root-"+ae));const P=(0,L.PB)();let Q="actor";y.properties?.class?Q=y.properties.class:P.fill="#eaeaea",Q+=I?` ${Fr}`:` ${Nr}`,P.x=y.x,P.y=m,P.width=y.width,P.height=y.height,P.class=Q,P.name=y.name,P.x=y.x,P.y=m;const xt=P.width/4,Vt=P.width/4,jt=xt/2,Ut=jt/(2.5+xt/50),Wt=C.append("g"),xe=`\n  M ${P.x},${P.y+Ut}\n  a ${jt},${Ut} 0 0 0 ${xt},0\n  a ${jt},${Ut} 0 0 0 -${xt},0\n  l 0,${Vt-2*Ut}\n  a ${jt},${Ut} 0 0 0 ${xt},0\n  l 0,-${Vt-2*Ut}\n`;Wt.append("path").attr("d",xe).attr("fill","#eaeaea").attr("stroke","#000").attr("stroke-width",1).attr("class",Q),Wt.attr("transform",I?`translate(${1.5*xt}, ${P.height/4-2*Ut})`:`translate(${1.5*xt}, ${(P.height+Ut)/4})`),y.rectData=P,_t(E,(0,$.Wi)(y.description))(y.description,C,P.x,P.y+(I?(P.height+Vt)/4:(P.height+Ut)/2),P.width,P.height,{class:`actor ${Se}`},E);const Xe=Wt.select("path:last-child");if(Xe.node()){const We=Xe.node().getBBox();y.height=We.height+(E.sequence.labelBoxHeight??0)}return y.height},"drawActorTypeDatabase"),Nt=(0,A.K2)(function(g,y,E,I){const m=I?y.stopy:y.starty,D=y.x+y.width/2,v=m+80,C=g.append("g").lower();I||(ae++,C.append("line").attr("id","actor"+ae).attr("x1",D).attr("y1",v).attr("x2",D).attr("y2",2e3).attr("class","actor-line 200").attr("stroke-width","0.5px").attr("stroke","#999").attr("name",y.name),y.actorCnt=ae);const P=g.append("g");let Q=Or;Q+=I?` ${Fr}`:` ${Nr}`,P.attr("class",Q),P.attr("name",y.name);const xt=(0,L.PB)();xt.x=y.x,xt.y=m,xt.fill="#eaeaea",xt.width=y.width,xt.height=y.height,xt.class="actor",P.append("line").attr("id","actor-man-torso"+ae).attr("x1",y.x+y.width/2-75).attr("y1",m+10).attr("x2",y.x+y.width/2-15).attr("y2",m+10),P.append("line").attr("id","actor-man-arms"+ae).attr("x1",y.x+y.width/2-75).attr("y1",m+0).attr("x2",y.x+y.width/2-75).attr("y2",m+20),P.append("circle").attr("cx",y.x+y.width/2).attr("cy",m+10).attr("r",30);const Vt=P.node().getBBox();return y.height=Vt.height+(E.sequence.labelBoxHeight??0),_t(E,(0,$.Wi)(y.description))(y.description,P,xt.x,xt.y+(I?11:18),xt.width,xt.height,{class:`actor ${Or}`},E),P.attr("transform","translate(0,22)"),y.height},"drawActorTypeBoundary"),St=(0,A.K2)(function(g,y,E,I){const m=I?y.stopy:y.starty,D=y.x+y.width/2,v=m+80,b=g.append("g").lower();I||(ae++,b.append("line").attr("id","actor"+ae).attr("x1",D).attr("y1",v).attr("x2",D).attr("y2",2e3).attr("class","actor-line 200").attr("stroke-width","0.5px").attr("stroke","#999").attr("name",y.name),y.actorCnt=ae);const C=g.append("g");let P=Or;P+=I?` ${Fr}`:` ${Nr}`,C.attr("class",P),C.attr("name",y.name);const Q=(0,L.PB)();Q.x=y.x,Q.y=m,Q.fill="#eaeaea",Q.width=y.width,Q.height=y.height,Q.class="actor",Q.rx=3,Q.ry=3,C.append("line").attr("id","actor-man-torso"+ae).attr("x1",D).attr("y1",m+25).attr("x2",D).attr("y2",m+45),C.append("line").attr("id","actor-man-arms"+ae).attr("x1",D-18).attr("y1",m+33).attr("x2",D+18).attr("y2",m+33),C.append("line").attr("x1",D-18).attr("y1",m+60).attr("x2",D).attr("y2",m+45),C.append("line").attr("x1",D).attr("y1",m+45).attr("x2",D+18-2).attr("y2",m+60);const xt=C.append("circle");xt.attr("cx",y.x+y.width/2),xt.attr("cy",m+10),xt.attr("r",15),xt.attr("width",y.width),xt.attr("height",y.height);const Vt=C.node().getBBox();return y.height=Vt.height,_t(E,(0,$.Wi)(y.description))(y.description,C,Q.x,Q.y+35,Q.width,Q.height,{class:`actor ${Or}`},E),y.height},"drawActorTypeActor"),$t=(0,A.K2)(function(){var g=(0,ot.A)(function*(y,E,I,m){switch(E.type){case"actor":return yield St(y,E,I,m);case"participant":return yield re(y,E,I,m);case"boundary":return yield Nt(y,E,I,m);case"control":return yield V(y,E,I,m);case"entity":return yield pt(y,E,I,m);case"database":return yield H(y,E,I,m);case"collections":return yield It(y,E,I,m);case"queue":return yield qt(y,E,I,m)}});return function(y,E,I,m){return g.apply(this,arguments)}}(),"drawActor"),ye=(0,A.K2)(function(g,y,E){const m=g.append("g");qe(m,y),y.name&&_t(E)(y.name,m,y.x,y.y+E.boxTextMargin+(y.textMaxHeight||0)/2,y.width,0,{class:"text"},E),m.lower()},"drawBox"),le=(0,A.K2)(function(g){return g.append("g")},"anchorElement"),Pe=(0,A.K2)(function(g,y,E,I,m){const D=(0,L.PB)(),v=y.anchored;D.x=y.startx,D.y=y.starty,D.class="activation"+m%3,D.width=y.stopx-y.startx,D.height=E-y.starty,je(v,D)},"drawActivation"),oe=(0,A.K2)(function(){var g=(0,ot.A)(function*(y,E,I,m){const{boxMargin:D,boxTextMargin:v,labelBoxHeight:b,labelBoxWidth:C,messageFontFamily:P,messageFontSize:Q,messageFontWeight:xt}=m,Vt=y.append("g"),jt=(0,A.K2)(function(xe,Xe,We,gr){return Vt.append("line").attr("x1",xe).attr("y1",Xe).attr("x2",We).attr("y2",gr).attr("class","loopLine")},"drawLoopLine");jt(E.startx,E.starty,E.stopx,E.starty),jt(E.stopx,E.starty,E.stopx,E.stopy),jt(E.startx,E.stopy,E.stopx,E.stopy),jt(E.startx,E.starty,E.startx,E.stopy),void 0!==E.sections&&E.sections.forEach(function(xe){jt(E.startx,xe.y,E.stopx,xe.y).style("stroke-dasharray","3, 3")});let Ut=(0,L.HT)();Ut.text=I,Ut.x=E.startx,Ut.y=E.starty,Ut.fontFamily=P,Ut.fontSize=Q,Ut.fontWeight=xt,Ut.anchor="middle",Ut.valign="middle",Ut.tspan=!1,Ut.width=C||50,Ut.height=b||20,Ut.textMargin=v,Ut.class="labelText",X(Vt,Ut),Ut=it(),Ut.text=E.title,Ut.x=E.startx+C/2+(E.stopx-E.startx)/2,Ut.y=E.starty+D+v,Ut.anchor="middle",Ut.valign="middle",Ut.textMargin=v,Ut.class="loopText",Ut.fontFamily=P,Ut.fontSize=Q,Ut.fontWeight=xt,Ut.wrap=!0;let Wt=(0,$.Wi)(Ut.text)?yield Bt(Vt,Ut,E):we(Vt,Ut);if(void 0!==E.sectionTitles)for(const[xe,Xe]of Object.entries(E.sectionTitles))if(Xe.message){Ut.text=Xe.message,Ut.x=E.startx+(E.stopx-E.startx)/2,Ut.y=E.sections[xe].y+D+v,Ut.class="loopText",Ut.anchor="middle",Ut.valign="middle",Ut.tspan=!1,Ut.fontFamily=P,Ut.fontSize=Q,Ut.fontWeight=xt,Ut.wrap=E.wrap,(0,$.Wi)(Ut.text)?(E.starty=E.sections[xe].y,yield Bt(Vt,Ut,E)):we(Vt,Ut);let We=Math.round(Wt.map(gr=>(gr._groups||gr)[0][0].getBBox().height).reduce((gr,hr)=>gr+hr));E.sections[xe].height+=We-(D+v)}return E.height=Math.round(E.stopy-E.starty),Vt});return function(y,E,I,m){return g.apply(this,arguments)}}(),"drawLoop"),qe=(0,A.K2)(function(g,y){(0,L.lC)(g,y)},"drawBackgroundRect"),ze=(0,A.K2)(function(g){g.append("defs").append("symbol").attr("id","database").attr("fill-rule","evenodd").attr("clip-rule","evenodd").append("path").attr("transform","scale(.5)").attr("d","M12.258.001l.256.004.255.005.253.008.251.01.249.012.247.015.246.016.242.019.241.02.239.023.236.024.233.027.231.028.229.031.225.032.223.034.22.036.217.038.214.04.211.041.208.043.205.045.201.046.198.048.194.05.191.051.187.053.183.054.18.056.175.057.172.059.168.06.163.061.16.063.155.064.15.066.074.033.073.033.071.034.07.034.069.035.068.035.067.035.066.035.064.036.064.036.062.036.06.036.06.037.058.037.058.037.055.038.055.038.053.038.052.038.051.039.05.039.048.039.047.039.045.04.044.04.043.04.041.04.04.041.039.041.037.041.036.041.034.041.033.042.032.042.03.042.029.042.027.042.026.043.024.043.023.043.021.043.02.043.018.044.017.043.015.044.013.044.012.044.011.045.009.044.007.045.006.045.004.045.002.045.001.045v17l-.001.045-.002.045-.004.045-.006.045-.007.045-.009.044-.011.045-.012.044-.013.044-.015.044-.017.043-.018.044-.02.043-.021.043-.023.043-.024.043-.026.043-.027.042-.029.042-.03.042-.032.042-.033.042-.034.041-.036.041-.037.041-.039.041-.04.041-.041.04-.043.04-.044.04-.045.04-.047.039-.048.039-.05.039-.051.039-.052.038-.053.038-.055.038-.055.038-.058.037-.058.037-.06.037-.06.036-.062.036-.064.036-.064.036-.066.035-.067.035-.068.035-.069.035-.07.034-.071.034-.073.033-.074.033-.15.066-.155.064-.16.063-.163.061-.168.06-.172.059-.175.057-.18.056-.183.054-.187.053-.191.051-.194.05-.198.048-.201.046-.205.045-.208.043-.211.041-.214.04-.217.038-.22.036-.223.034-.225.032-.229.031-.231.028-.233.027-.236.024-.239.023-.241.02-.242.019-.246.016-.247.015-.249.012-.251.01-.253.008-.255.005-.256.004-.258.001-.258-.001-.256-.004-.255-.005-.253-.008-.251-.01-.249-.012-.247-.015-.245-.016-.243-.019-.241-.02-.238-.023-.236-.024-.234-.027-.231-.028-.228-.031-.226-.032-.223-.034-.22-.036-.217-.038-.214-.04-.211-.041-.208-.043-.204-.045-.201-.046-.198-.048-.195-.05-.19-.051-.187-.053-.184-.054-.179-.056-.176-.057-.172-.059-.167-.06-.164-.061-.159-.063-.155-.064-.151-.066-.074-.033-.072-.033-.072-.034-.07-.034-.069-.035-.068-.035-.067-.035-.066-.035-.064-.036-.063-.036-.062-.036-.061-.036-.06-.037-.058-.037-.057-.037-.056-.038-.055-.038-.053-.038-.052-.038-.051-.039-.049-.039-.049-.039-.046-.039-.046-.04-.044-.04-.043-.04-.041-.04-.04-.041-.039-.041-.037-.041-.036-.041-.034-.041-.033-.042-.032-.042-.03-.042-.029-.042-.027-.042-.026-.043-.024-.043-.023-.043-.021-.043-.02-.043-.018-.044-.017-.043-.015-.044-.013-.044-.012-.044-.011-.045-.009-.044-.007-.045-.006-.045-.004-.045-.002-.045-.001-.045v-17l.001-.045.002-.045.004-.045.006-.045.007-.045.009-.044.011-.045.012-.044.013-.044.015-.044.017-.043.018-.044.02-.043.021-.043.023-.043.024-.043.026-.043.027-.042.029-.042.03-.042.032-.042.033-.042.034-.041.036-.041.037-.041.039-.041.04-.041.041-.04.043-.04.044-.04.046-.04.046-.039.049-.039.049-.039.051-.039.052-.038.053-.038.055-.038.056-.038.057-.037.058-.037.06-.037.061-.036.062-.036.063-.036.064-.036.066-.035.067-.035.068-.035.069-.035.07-.034.072-.034.072-.033.074-.033.151-.066.155-.064.159-.063.164-.061.167-.06.172-.059.176-.057.179-.056.184-.054.187-.053.19-.051.195-.05.198-.048.201-.046.204-.045.208-.043.211-.041.214-.04.217-.038.22-.036.223-.034.226-.032.228-.031.231-.028.234-.027.236-.024.238-.023.241-.02.243-.019.245-.016.247-.015.249-.012.251-.01.253-.008.255-.005.256-.004.258-.001.258.001zm-9.258 20.499v.01l.001.021.003.021.004.022.005.021.006.022.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.023.018.024.019.024.021.024.022.025.023.024.024.025.052.049.056.05.061.051.066.051.07.051.075.051.079.052.084.052.088.052.092.052.097.052.102.051.105.052.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.048.144.049.147.047.152.047.155.047.16.045.163.045.167.043.171.043.176.041.178.041.183.039.187.039.19.037.194.035.197.035.202.033.204.031.209.03.212.029.216.027.219.025.222.024.226.021.23.02.233.018.236.016.24.015.243.012.246.01.249.008.253.005.256.004.259.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.021.224-.024.22-.026.216-.027.212-.028.21-.031.205-.031.202-.034.198-.034.194-.036.191-.037.187-.039.183-.04.179-.04.175-.042.172-.043.168-.044.163-.045.16-.046.155-.046.152-.047.148-.048.143-.049.139-.049.136-.05.131-.05.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.053.083-.051.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.05.023-.024.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.023.01-.022.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.127l-.077.055-.08.053-.083.054-.085.053-.087.052-.09.052-.093.051-.095.05-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.045-.118.044-.12.043-.122.042-.124.042-.126.041-.128.04-.13.04-.132.038-.134.038-.135.037-.138.037-.139.035-.142.035-.143.034-.144.033-.147.032-.148.031-.15.03-.151.03-.153.029-.154.027-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.01-.179.008-.179.008-.181.006-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.006-.179-.008-.179-.008-.178-.01-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.027-.153-.029-.151-.03-.15-.03-.148-.031-.146-.032-.145-.033-.143-.034-.141-.035-.14-.035-.137-.037-.136-.037-.134-.038-.132-.038-.13-.04-.128-.04-.126-.041-.124-.042-.122-.042-.12-.044-.117-.043-.116-.045-.113-.045-.112-.046-.109-.047-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.05-.093-.052-.09-.051-.087-.052-.085-.053-.083-.054-.08-.054-.077-.054v4.127zm0-5.654v.011l.001.021.003.021.004.021.005.022.006.022.007.022.009.022.01.022.011.023.012.023.013.023.015.024.016.023.017.024.018.024.019.024.021.024.022.024.023.025.024.024.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.052.11.051.114.051.119.052.123.05.127.051.131.05.135.049.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.044.171.042.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.022.23.02.233.018.236.016.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.012.241-.015.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.048.139-.05.136-.049.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.051.051-.049.023-.025.023-.024.021-.025.02-.024.019-.024.018-.024.017-.024.015-.023.014-.023.013-.024.012-.022.01-.023.01-.023.008-.022.006-.022.006-.022.004-.021.004-.022.001-.021.001-.021v-4.139l-.077.054-.08.054-.083.054-.085.052-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.044-.118.044-.12.044-.122.042-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.035-.143.033-.144.033-.147.033-.148.031-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.009-.179.009-.179.007-.181.007-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.007-.179-.007-.179-.009-.178-.009-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.031-.146-.033-.145-.033-.143-.033-.141-.035-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.04-.126-.041-.124-.042-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.051-.093-.051-.09-.051-.087-.053-.085-.052-.083-.054-.08-.054-.077-.054v4.139zm0-5.666v.011l.001.02.003.022.004.021.005.022.006.021.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.024.018.023.019.024.021.025.022.024.023.024.024.025.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.051.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.043.171.043.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.021.23.02.233.018.236.017.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.013.241-.014.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.049.139-.049.136-.049.131-.051.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.049.023-.025.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.022.01-.023.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.153l-.077.054-.08.054-.083.053-.085.053-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.048-.105.048-.106.048-.109.046-.111.046-.114.046-.115.044-.118.044-.12.043-.122.043-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.034-.143.034-.144.033-.147.032-.148.032-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.024-.161.024-.162.023-.163.023-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.01-.178.01-.179.009-.179.007-.181.006-.182.006-.182.004-.184.003-.184.001-.185.001-.185-.001-.184-.001-.184-.003-.182-.004-.182-.006-.181-.006-.179-.007-.179-.009-.178-.01-.176-.01-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.023-.162-.023-.161-.024-.159-.024-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.032-.146-.032-.145-.033-.143-.034-.141-.034-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.041-.126-.041-.124-.041-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.048-.105-.048-.102-.048-.1-.05-.097-.049-.095-.051-.093-.051-.09-.052-.087-.052-.085-.053-.083-.053-.08-.054-.077-.054v4.153zm8.74-8.179l-.257.004-.254.005-.25.008-.247.011-.244.012-.241.014-.237.016-.233.018-.231.021-.226.022-.224.023-.22.026-.216.027-.212.028-.21.031-.205.032-.202.033-.198.034-.194.036-.191.038-.187.038-.183.04-.179.041-.175.042-.172.043-.168.043-.163.045-.16.046-.155.046-.152.048-.148.048-.143.048-.139.049-.136.05-.131.05-.126.051-.123.051-.118.051-.114.052-.11.052-.106.052-.101.052-.096.052-.092.052-.088.052-.083.052-.079.052-.074.051-.07.052-.065.051-.06.05-.056.05-.051.05-.023.025-.023.024-.021.024-.02.025-.019.024-.018.024-.017.023-.015.024-.014.023-.013.023-.012.023-.01.023-.01.022-.008.022-.006.023-.006.021-.004.022-.004.021-.001.021-.001.021.001.021.001.021.004.021.004.022.006.021.006.023.008.022.01.022.01.023.012.023.013.023.014.023.015.024.017.023.018.024.019.024.02.025.021.024.023.024.023.025.051.05.056.05.06.05.065.051.07.052.074.051.079.052.083.052.088.052.092.052.096.052.101.052.106.052.11.052.114.052.118.051.123.051.126.051.131.05.136.05.139.049.143.048.148.048.152.048.155.046.16.046.163.045.168.043.172.043.175.042.179.041.183.04.187.038.191.038.194.036.198.034.202.033.205.032.21.031.212.028.216.027.22.026.224.023.226.022.231.021.233.018.237.016.241.014.244.012.247.011.25.008.254.005.257.004.26.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.022.224-.023.22-.026.216-.027.212-.028.21-.031.205-.032.202-.033.198-.034.194-.036.191-.038.187-.038.183-.04.179-.041.175-.042.172-.043.168-.043.163-.045.16-.046.155-.046.152-.048.148-.048.143-.048.139-.049.136-.05.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.05.051-.05.023-.025.023-.024.021-.024.02-.025.019-.024.018-.024.017-.023.015-.024.014-.023.013-.023.012-.023.01-.023.01-.022.008-.022.006-.023.006-.021.004-.022.004-.021.001-.021.001-.021-.001-.021-.001-.021-.004-.021-.004-.022-.006-.021-.006-.023-.008-.022-.01-.022-.01-.023-.012-.023-.013-.023-.014-.023-.015-.024-.017-.023-.018-.024-.019-.024-.02-.025-.021-.024-.023-.024-.023-.025-.051-.05-.056-.05-.06-.05-.065-.051-.07-.052-.074-.051-.079-.052-.083-.052-.088-.052-.092-.052-.096-.052-.101-.052-.106-.052-.11-.052-.114-.052-.118-.051-.123-.051-.126-.051-.131-.05-.136-.05-.139-.049-.143-.048-.148-.048-.152-.048-.155-.046-.16-.046-.163-.045-.168-.043-.172-.043-.175-.042-.179-.041-.183-.04-.187-.038-.191-.038-.194-.036-.198-.034-.202-.033-.205-.032-.21-.031-.212-.028-.216-.027-.22-.026-.224-.023-.226-.022-.231-.021-.233-.018-.237-.016-.241-.014-.244-.012-.247-.011-.25-.008-.254-.005-.257-.004-.26-.001-.26.001z")},"insertDatabaseIcon"),Et=(0,A.K2)(function(g){g.append("defs").append("symbol").attr("id","computer").attr("width","24").attr("height","24").append("path").attr("transform","scale(.5)").attr("d","M2 2v13h20v-13h-20zm18 11h-16v-9h16v9zm-10.228 6l.466-1h3.524l.467 1h-4.457zm14.228 3h-24l2-6h2.104l-1.33 4h18.45l-1.297-4h2.073l2 6zm-5-10h-14v-7h14v7z")},"insertComputerIcon"),Tt=(0,A.K2)(function(g){g.append("defs").append("symbol").attr("id","clock").attr("width","24").attr("height","24").append("path").attr("transform","scale(.5)").attr("d","M12 2c5.514 0 10 4.486 10 10s-4.486 10-10 10-10-4.486-10-10 4.486-10 10-10zm0-2c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm5.848 12.459c.202.038.202.333.001.372-1.907.361-6.045 1.111-6.547 1.111-.719 0-1.301-.582-1.301-1.301 0-.512.77-5.447 1.125-7.445.034-.192.312-.181.343.014l.985 6.238 5.394 1.011z")},"insertClockIcon"),B=(0,A.K2)(function(g){g.append("defs").append("marker").attr("id","arrowhead").attr("refX",7.9).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto-start-reverse").append("path").attr("d","M -1 0 L 10 5 L 0 10 z")},"insertArrowHead"),F=(0,A.K2)(function(g){g.append("defs").append("marker").attr("id","filled-head").attr("refX",15.5).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")},"insertArrowFilledHead"),et=(0,A.K2)(function(g){g.append("defs").append("marker").attr("id","sequencenumber").attr("refX",15).attr("refY",15).attr("markerWidth",60).attr("markerHeight",40).attr("orient","auto").append("circle").attr("cx",15).attr("cy",15).attr("r",6)},"insertSequenceNumber"),mt=(0,A.K2)(function(g){g.append("defs").append("marker").attr("id","crosshead").attr("markerWidth",15).attr("markerHeight",8).attr("orient","auto").attr("refX",4).attr("refY",4.5).append("path").attr("fill","none").attr("stroke","#000000").style("stroke-dasharray","0, 0").attr("stroke-width","1pt").attr("d","M 1,2 L 6,7 M 6,2 L 1,7")},"insertArrowCrossHead"),it=(0,A.K2)(function(){return{x:0,y:0,fill:void 0,anchor:void 0,style:"#666",width:void 0,height:void 0,textMargin:0,rx:0,ry:0,tspan:!0,valign:void 0}},"getTextObj"),rt=(0,A.K2)(function(){return{x:0,y:0,fill:"#EDF2AE",stroke:"#666",width:100,anchor:"start",height:100,rx:0,ry:0}},"getNoteRect"),_t=function(){function g(v,b,C,P,Q,xt,Vt){D(b.append("text").attr("x",C+Q/2).attr("y",P+xt/2+5).style("text-anchor","middle").text(v),Vt)}function y(v,b,C,P,Q,xt,Vt,jt){const{actorFontSize:Ut,actorFontFamily:Wt,actorFontWeight:xe}=jt,[Xe,We]=(0,ut.I5)(Ut),gr=v.split($.Y2.lineBreakRegex);for(let hr=0;hr<gr.length;hr++){const _r=hr*Xe-Xe*(gr.length-1)/2,$e=b.append("text").attr("x",C+Q/2).attr("y",P).style("text-anchor","middle").style("font-size",We).style("font-weight",xe).style("font-family",Wt);$e.append("tspan").attr("x",C+Q/2).attr("dy",_r).text(gr[hr]),$e.attr("y",P+xt/2).attr("dominant-baseline","central").attr("alignment-baseline","central"),D($e,Vt)}}function E(v,b,C,P,Q,xt,Vt,jt){const Ut=b.append("switch"),xe=Ut.append("foreignObject").attr("x",C).attr("y",P).attr("width",Q).attr("height",xt).append("xhtml:div").style("display","table").style("height","100%").style("width","100%");xe.append("div").style("display","table-cell").style("text-align","center").style("vertical-align","middle").text(v),y(v,Ut,C,P,Q,xt,Vt,jt),D(xe,Vt)}function I(v,b,C,P,Q,xt,Vt,jt){return m.apply(this,arguments)}function m(){return(m=(0,ot.A)(function*(v,b,C,P,Q,xt,Vt,jt){const Ut=yield(0,$.Dl)(v,(0,$.zj)()),Wt=b.append("switch"),Xe=Wt.append("foreignObject").attr("x",C+Q/2-Ut.width/2).attr("y",P+xt/2-Ut.height/2).attr("width",Ut.width).attr("height",Ut.height).append("xhtml:div").style("height","100%").style("width","100%");Xe.append("div").style("text-align","center").style("vertical-align","middle").html(yield(0,$.dj)(v,(0,$.zj)())),y(v,Wt,C,P,Q,xt,Vt,jt),D(Xe,Vt)})).apply(this,arguments)}function D(v,b){for(const C in b)b.hasOwnProperty(C)&&v.attr(C,b[C])}return(0,A.K2)(g,"byText"),(0,A.K2)(y,"byTspan"),(0,A.K2)(E,"byFo"),(0,A.K2)(I,"byKatex"),(0,A.K2)(D,"_setTextAttrs"),function(v,b=!1){return b?I:"fo"===v.textPlacement?E:"old"===v.textPlacement?g:y}}(),ht=function(){function g(m,D,v,b,C,P,Q){I(D.append("text").attr("x",v).attr("y",b).style("text-anchor","start").text(m),Q)}function y(m,D,v,b,C,P,Q,xt){const{actorFontSize:Vt,actorFontFamily:jt,actorFontWeight:Ut}=xt,Wt=m.split($.Y2.lineBreakRegex);for(let xe=0;xe<Wt.length;xe++){const Xe=xe*Vt-Vt*(Wt.length-1)/2,We=D.append("text").attr("x",v).attr("y",b).style("text-anchor","start").style("font-size",Vt).style("font-weight",Ut).style("font-family",jt);We.append("tspan").attr("x",v).attr("dy",Xe).text(Wt[xe]),We.attr("y",b+P/2).attr("dominant-baseline","central").attr("alignment-baseline","central"),I(We,Q)}}function E(m,D,v,b,C,P,Q,xt){const Vt=D.append("switch"),Ut=Vt.append("foreignObject").attr("x",v).attr("y",b).attr("width",C).attr("height",P).append("xhtml:div").style("display","table").style("height","100%").style("width","100%");Ut.append("div").style("display","table-cell").style("text-align","center").style("vertical-align","middle").text(m),y(m,Vt,v,b,0,P,Q,xt),I(Ut,Q)}function I(m,D){for(const v in D)D.hasOwnProperty(v)&&m.attr(v,D[v])}return(0,A.K2)(g,"byText"),(0,A.K2)(y,"byTspan"),(0,A.K2)(E,"byFo"),(0,A.K2)(I,"_setTextAttrs"),function(m){return"fo"===m.textPlacement?E:"old"===m.textPlacement?g:y}}(),Ft={drawRect:je,drawText:we,drawLabel:X,drawActor:$t,drawBox:ye,drawPopup:z,anchorElement:le,drawActivation:Pe,drawLoop:oe,drawBackgroundRect:qe,insertArrowHead:B,insertArrowFilledHead:F,insertSequenceNumber:et,insertArrowCrossHead:mt,insertDatabaseIcon:ze,insertComputerIcon:Et,insertClockIcon:Tt,getTextObj:it,getNoteRect:rt,fixLifeLineHeights:w,sanitizeUrl:wt.J},G={},lt={data:{startx:void 0,stopx:void 0,starty:void 0,stopy:void 0},verticalPos:0,sequenceItems:[],activations:[],models:{getHeight:(0,A.K2)(function(){return Math.max.apply(null,0===this.actors.length?[0]:this.actors.map(g=>g.height||0))+(0===this.loops.length?0:this.loops.map(g=>g.height||0).reduce((g,y)=>g+y))+(0===this.messages.length?0:this.messages.map(g=>g.height||0).reduce((g,y)=>g+y))+(0===this.notes.length?0:this.notes.map(g=>g.height||0).reduce((g,y)=>g+y))},"getHeight"),clear:(0,A.K2)(function(){this.actors=[],this.boxes=[],this.loops=[],this.messages=[],this.notes=[]},"clear"),addBox:(0,A.K2)(function(g){this.boxes.push(g)},"addBox"),addActor:(0,A.K2)(function(g){this.actors.push(g)},"addActor"),addLoop:(0,A.K2)(function(g){this.loops.push(g)},"addLoop"),addMessage:(0,A.K2)(function(g){this.messages.push(g)},"addMessage"),addNote:(0,A.K2)(function(g){this.notes.push(g)},"addNote"),lastActor:(0,A.K2)(function(){return this.actors[this.actors.length-1]},"lastActor"),lastLoop:(0,A.K2)(function(){return this.loops[this.loops.length-1]},"lastLoop"),lastMessage:(0,A.K2)(function(){return this.messages[this.messages.length-1]},"lastMessage"),lastNote:(0,A.K2)(function(){return this.notes[this.notes.length-1]},"lastNote"),actors:[],boxes:[],loops:[],messages:[],notes:[]},init:(0,A.K2)(function(){this.sequenceItems=[],this.activations=[],this.models.clear(),this.data={startx:void 0,stopx:void 0,starty:void 0,stopy:void 0},this.verticalPos=0,Ae((0,$.D7)())},"init"),updateVal:(0,A.K2)(function(g,y,E,I){g[y]=void 0===g[y]?E:I(E,g[y])},"updateVal"),updateBounds:(0,A.K2)(function(g,y,E,I){const m=this;let D=0;function v(b){return(0,A.K2)(function(P){D++;const Q=m.sequenceItems.length-D+1;m.updateVal(P,"starty",y-Q*G.boxMargin,Math.min),m.updateVal(P,"stopy",I+Q*G.boxMargin,Math.max),m.updateVal(lt.data,"startx",g-Q*G.boxMargin,Math.min),m.updateVal(lt.data,"stopx",E+Q*G.boxMargin,Math.max),"activation"!==b&&(m.updateVal(P,"startx",g-Q*G.boxMargin,Math.min),m.updateVal(P,"stopx",E+Q*G.boxMargin,Math.max),m.updateVal(lt.data,"starty",y-Q*G.boxMargin,Math.min),m.updateVal(lt.data,"stopy",I+Q*G.boxMargin,Math.max))},"updateItemBounds")}(0,A.K2)(v,"updateFn"),this.sequenceItems.forEach(v()),this.activations.forEach(v("activation"))},"updateBounds"),insert:(0,A.K2)(function(g,y,E,I){const m=$.Y2.getMin(g,E),D=$.Y2.getMax(g,E),v=$.Y2.getMin(y,I),b=$.Y2.getMax(y,I);this.updateVal(lt.data,"startx",m,Math.min),this.updateVal(lt.data,"starty",v,Math.min),this.updateVal(lt.data,"stopx",D,Math.max),this.updateVal(lt.data,"stopy",b,Math.max),this.updateBounds(m,v,D,b)},"insert"),newActivation:(0,A.K2)(function(g,y,E){const I=E.get(g.from),m=or(g.from).length||0,D=I.x+I.width/2+(m-1)*G.activationWidth/2;this.activations.push({startx:D,starty:this.verticalPos+2,stopx:D+G.activationWidth,stopy:void 0,actor:g.from,anchored:Ft.anchorElement(y)})},"newActivation"),endActivation:(0,A.K2)(function(g){const y=this.activations.map(function(E){return E.actor}).lastIndexOf(g.from);return this.activations.splice(y,1)[0]},"endActivation"),createLoop:(0,A.K2)(function(g={message:void 0,wrap:!1,width:void 0},y){return{startx:void 0,starty:this.verticalPos,stopx:void 0,stopy:void 0,title:g.message,wrap:g.wrap,width:g.width,height:0,fill:y}},"createLoop"),newLoop:(0,A.K2)(function(g={message:void 0,wrap:!1,width:void 0},y){this.sequenceItems.push(this.createLoop(g,y))},"newLoop"),endLoop:(0,A.K2)(function(){return this.sequenceItems.pop()},"endLoop"),isLoopOverlap:(0,A.K2)(function(){return!!this.sequenceItems.length&&this.sequenceItems[this.sequenceItems.length-1].overlap},"isLoopOverlap"),addSectionToLoop:(0,A.K2)(function(g){const y=this.sequenceItems.pop();y.sections=y.sections||[],y.sectionTitles=y.sectionTitles||[],y.sections.push({y:lt.getVerticalPos(),height:0}),y.sectionTitles.push(g),this.sequenceItems.push(y)},"addSectionToLoop"),saveVerticalPos:(0,A.K2)(function(){this.isLoopOverlap()&&(this.savedVerticalPos=this.verticalPos)},"saveVerticalPos"),resetVerticalPos:(0,A.K2)(function(){this.isLoopOverlap()&&(this.verticalPos=this.savedVerticalPos)},"resetVerticalPos"),bumpVerticalPos:(0,A.K2)(function(g){this.verticalPos=this.verticalPos+g,this.data.stopy=$.Y2.getMax(this.data.stopy,this.verticalPos)},"bumpVerticalPos"),getVerticalPos:(0,A.K2)(function(){return this.verticalPos},"getVerticalPos"),getBounds:(0,A.K2)(function(){return{bounds:this.data,models:this.models}},"getBounds")},ke=(0,A.K2)(function(){var g=(0,ot.A)(function*(y,E){lt.bumpVerticalPos(G.boxMargin),E.height=G.boxMargin,E.starty=lt.getVerticalPos();const I=(0,L.PB)();I.x=E.startx,I.y=E.starty,I.width=E.width||G.width,I.class="note";const m=y.append("g"),D=Ft.drawRect(m,I),v=(0,L.HT)();v.x=E.startx,v.y=E.starty,v.width=I.width,v.dy="1em",v.text=E.message,v.class="noteText",v.fontFamily=G.noteFontFamily,v.fontSize=G.noteFontSize,v.fontWeight=G.noteFontWeight,v.anchor=G.noteAlign,v.textMargin=G.noteMargin,v.valign="center";const b=(0,$.Wi)(v.text)?yield Bt(m,v):we(m,v),C=Math.round(b.map(P=>(P._groups||P)[0][0].getBBox().height).reduce((P,Q)=>P+Q));D.attr("height",C+2*G.noteMargin),E.height+=C+2*G.noteMargin,lt.bumpVerticalPos(C+2*G.noteMargin),E.stopy=E.starty+C+2*G.noteMargin,E.stopx=E.startx+I.width,lt.insert(E.startx,E.starty,E.stopx,E.stopy),lt.models.addNote(E)});return function(y,E){return g.apply(this,arguments)}}(),"drawNote"),Mt=(0,A.K2)(g=>({fontFamily:g.messageFontFamily,fontSize:g.messageFontSize,fontWeight:g.messageFontWeight}),"messageFont"),Zt=(0,A.K2)(g=>({fontFamily:g.noteFontFamily,fontSize:g.noteFontSize,fontWeight:g.noteFontWeight}),"noteFont"),pe=(0,A.K2)(g=>({fontFamily:g.actorFontFamily,fontSize:g.actorFontSize,fontWeight:g.actorFontWeight}),"actorFont");function Re(g,y){return Ze.apply(this,arguments)}function Ze(){return(Ze=(0,ot.A)(function*(g,y){lt.bumpVerticalPos(10);const{startx:E,stopx:I,message:m}=y,D=$.Y2.splitBreaks(m).length,v=(0,$.Wi)(m),b=v?yield(0,$.Dl)(m,(0,$.D7)()):ut._K.calculateTextDimensions(m,Mt(G));if(!v){const xt=b.height/D;y.height+=xt,lt.bumpVerticalPos(xt)}let C,P=b.height-10;const Q=b.width;if(E===I){C=lt.getVerticalPos()+P,G.rightAngles||(P+=G.boxMargin,C=lt.getVerticalPos()+P),P+=30;const xt=$.Y2.getMax(Q/2,G.width/2);lt.insert(E-xt,lt.getVerticalPos()-10+P,I+xt,lt.getVerticalPos()+30+P)}else P+=G.boxMargin,C=lt.getVerticalPos()+P,lt.insert(E,C-10,I,C);return lt.bumpVerticalPos(P),y.height+=P,y.stopy=y.starty+y.height,lt.insert(y.fromBounds,y.starty,y.toBounds,y.stopy),C})).apply(this,arguments)}(0,A.K2)(Re,"boundMessage");var de=(0,A.K2)(function(){var g=(0,ot.A)(function*(y,E,I,m){const{startx:D,stopx:v,starty:b,message:C,type:P,sequenceIndex:Q,sequenceVisible:xt}=E,Vt=ut._K.calculateTextDimensions(C,Mt(G)),jt=(0,L.HT)();jt.x=D,jt.y=b+10,jt.width=v-D,jt.class="messageText",jt.dy="1em",jt.text=C,jt.fontFamily=G.messageFontFamily,jt.fontSize=G.messageFontSize,jt.fontWeight=G.messageFontWeight,jt.anchor=G.messageAlign,jt.valign="center",jt.textMargin=G.wrapPadding,jt.tspan=!1,(0,$.Wi)(jt.text)?yield Bt(y,jt,{startx:D,stopx:v,starty:I}):we(y,jt);const Ut=Vt.width;let Wt;D===v?Wt=G.rightAngles?y.append("path").attr("d",`M  ${D},${I} H ${D+$.Y2.getMax(G.width/2,Ut/2)} V ${I+25} H ${D}`):y.append("path").attr("d","M "+D+","+I+" C "+(D+60)+","+(I-10)+" "+(D+60)+","+(I+30)+" "+D+","+(I+20)):(Wt=y.append("line"),Wt.attr("x1",D),Wt.attr("y1",I),Wt.attr("x2",v),Wt.attr("y2",I)),P===m.db.LINETYPE.DOTTED||P===m.db.LINETYPE.DOTTED_CROSS||P===m.db.LINETYPE.DOTTED_POINT||P===m.db.LINETYPE.DOTTED_OPEN||P===m.db.LINETYPE.BIDIRECTIONAL_DOTTED?(Wt.style("stroke-dasharray","3, 3"),Wt.attr("class","messageLine1")):Wt.attr("class","messageLine0");let xe="";G.arrowMarkerAbsolute&&(xe=(0,$.ID)(!0)),Wt.attr("stroke-width",2),Wt.attr("stroke","none"),Wt.style("fill","none"),(P===m.db.LINETYPE.SOLID||P===m.db.LINETYPE.DOTTED)&&Wt.attr("marker-end","url("+xe+"#arrowhead)"),(P===m.db.LINETYPE.BIDIRECTIONAL_SOLID||P===m.db.LINETYPE.BIDIRECTIONAL_DOTTED)&&(Wt.attr("marker-start","url("+xe+"#arrowhead)"),Wt.attr("marker-end","url("+xe+"#arrowhead)")),(P===m.db.LINETYPE.SOLID_POINT||P===m.db.LINETYPE.DOTTED_POINT)&&Wt.attr("marker-end","url("+xe+"#filled-head)"),(P===m.db.LINETYPE.SOLID_CROSS||P===m.db.LINETYPE.DOTTED_CROSS)&&Wt.attr("marker-end","url("+xe+"#crosshead)"),(xt||G.showSequenceNumbers)&&((P===m.db.LINETYPE.BIDIRECTIONAL_SOLID||P===m.db.LINETYPE.BIDIRECTIONAL_DOTTED)&&Wt.attr("x1",D<v?D+12:D+6),y.append("line").attr("x1",D).attr("y1",I).attr("x2",D).attr("y2",I).attr("stroke-width",0).attr("marker-start","url("+xe+"#sequencenumber)"),y.append("text").attr("x",D).attr("y",I+4).attr("font-family","sans-serif").attr("font-size","12px").attr("text-anchor","middle").attr("class","sequenceNumber").text(Q))});return function(y,E,I,m){return g.apply(this,arguments)}}(),"drawMessage"),mr=(0,A.K2)(function(g,y,E,I,m,D,v){let P,b=0,C=0,Q=0;for(const xt of I){const Vt=y.get(xt),jt=Vt.box;P&&P!=jt&&(v||lt.models.addBox(P),C+=G.boxMargin+P.margin),jt&&jt!=P&&(v||(jt.x=b+C,jt.y=m),C+=jt.margin),Vt.width=Vt.width||G.width,Vt.height=$.Y2.getMax(Vt.height||G.height,G.height),Vt.margin=Vt.margin||G.actorMargin,Q=$.Y2.getMax(Q,Vt.height),E.get(Vt.name)&&(C+=Vt.width/2),Vt.x=b+C,Vt.starty=lt.getVerticalPos(),lt.insert(Vt.x,m,Vt.x+Vt.width,Vt.height),b+=Vt.width+C,Vt.box&&(Vt.box.width=b+jt.margin-Vt.box.x),C=Vt.margin,P=Vt.box,lt.models.addActor(Vt)}P&&!v&&lt.models.addBox(P),lt.bumpVerticalPos(Q)},"addActorRenderingData"),xr=(0,A.K2)(function(){var g=(0,ot.A)(function*(y,E,I,m){if(m){let D=0;lt.bumpVerticalPos(2*G.boxMargin);for(const v of I){const b=E.get(v);b.stopy||(b.stopy=lt.getVerticalPos());const C=yield Ft.drawActor(y,b,G,!0);D=$.Y2.getMax(D,C)}lt.bumpVerticalPos(D+G.boxMargin)}else for(const D of I){const v=E.get(D);yield Ft.drawActor(y,v,G,!1)}});return function(y,E,I,m){return g.apply(this,arguments)}}(),"drawActors"),zt=(0,A.K2)(function(g,y,E,I){let m=0,D=0;for(const v of E){const b=y.get(v),C=Lr(b),P=Ft.drawPopup(g,b,C,G,G.forceMenus,I);P.height>m&&(m=P.height),P.width+b.x>D&&(D=P.width+b.x)}return{maxHeight:m,maxWidth:D}},"drawActorsPopup"),Ae=(0,A.K2)(function(g){(0,$.hH)(G,g),g.fontFamily&&(G.actorFontFamily=G.noteFontFamily=G.messageFontFamily=g.fontFamily),g.fontSize&&(G.actorFontSize=G.noteFontSize=G.messageFontSize=g.fontSize),g.fontWeight&&(G.actorFontWeight=G.noteFontWeight=G.messageFontWeight=g.fontWeight)},"setConf"),or=(0,A.K2)(function(g){return lt.activations.filter(function(y){return y.actor===g})},"actorActivations"),ve=(0,A.K2)(function(g,y){const E=y.get(g),I=or(g);return[I.reduce(function(v,b){return $.Y2.getMin(v,b.startx)},E.x+E.width/2-1),I.reduce(function(v,b){return $.Y2.getMax(v,b.stopx)},E.x+E.width/2+1)]},"activationBounds");function ce(g,y,E,I,m){lt.bumpVerticalPos(E);let D=I;if(y.id&&y.message&&g[y.id]){const v=g[y.id].width,b=Mt(G);y.message=ut._K.wrapLabel(`[${y.message}]`,v-2*G.wrapPadding,b),y.width=v,y.wrap=!0;const C=ut._K.calculateTextDimensions(y.message,b),P=$.Y2.getMax(C.height,G.labelBoxHeight);D=I+P,A.Rm.debug(`${P} - ${y.message}`)}m(y),lt.bumpVerticalPos(D)}function Ee(g,y,E,I,m,D,v){function b(Q,xt){Q.x<m.get(g.from).x?(lt.insert(y.stopx-xt,y.starty,y.startx,y.stopy+Q.height/2+G.noteMargin),y.stopx=y.stopx+xt):(lt.insert(y.startx,y.starty,y.stopx+xt,y.stopy+Q.height/2+G.noteMargin),y.stopx=y.stopx-xt)}function C(Q,xt){Q.x<m.get(g.to).x?(lt.insert(y.startx-xt,y.starty,y.stopx,y.stopy+Q.height/2+G.noteMargin),y.startx=y.startx+xt):(lt.insert(y.stopx,y.starty,y.startx+xt,y.stopy+Q.height/2+G.noteMargin),y.startx=y.startx-xt)}(0,A.K2)(b,"receiverAdjustment"),(0,A.K2)(C,"senderAdjustment");const P=["actor","control","entity","database"];if(D.get(g.to)==I){const Q=m.get(g.to);b(Q,P.includes(Q.type)?21:Q.width/2+3),Q.starty=E-Q.height/2,lt.bumpVerticalPos(Q.height/2)}else if(v.get(g.from)==I){const Q=m.get(g.from);G.mirrorActors&&C(Q,P.includes(Q.type)?18:Q.width/2),Q.stopy=E-Q.height/2,lt.bumpVerticalPos(Q.height/2)}else if(v.get(g.to)==I){const Q=m.get(g.to);G.mirrorActors&&b(Q,P.includes(Q.type)?21:Q.width/2+3),Q.stopy=E-Q.height/2,lt.bumpVerticalPos(Q.height/2)}}(0,A.K2)(ce,"adjustLoopHeightForWrap"),(0,A.K2)(Ee,"adjustCreatedDestroyedData");var De=(0,A.K2)(function(){var g=(0,ot.A)(function*(y,E,I,m){const{securityLevel:D,sequence:v}=(0,$.D7)();let b;G=v,"sandbox"===D&&(b=(0,At.Ltv)("#i"+E));const C=(0,At.Ltv)("sandbox"===D?b.nodes()[0].contentDocument.body:"body"),P="sandbox"===D?b.nodes()[0].contentDocument:document;lt.init(),A.Rm.debug(m.db);const Q="sandbox"===D?C.select(`[id="${E}"]`):(0,At.Ltv)(`[id="${E}"]`),xt=m.db.getActors(),Vt=m.db.getCreatedActors(),jt=m.db.getDestroyedActors(),Ut=m.db.getBoxes();let Wt=m.db.getActorKeys();const xe=m.db.getMessages(),Xe=m.db.getDiagramTitle(),We=m.db.hasAtLeastOneBox(),gr=m.db.hasAtLeastOneBoxWithTitle(),hr=yield er(xt,xe,m);if(G.height=yield _e(xt,hr,Ut),Ft.insertComputerIcon(Q),Ft.insertDatabaseIcon(Q),Ft.insertClockIcon(Q),We&&(lt.bumpVerticalPos(G.boxMargin),gr&&lt.bumpVerticalPos(Ut[0].textMaxHeight)),!0===G.hideUnusedParticipants){const dr=new Set;xe.forEach(W=>{dr.add(W.from),dr.add(W.to)}),Wt=Wt.filter(W=>dr.has(W))}mr(Q,xt,Vt,Wt,0,xe,!1);const _r=yield ne(xe,xt,hr,m);function $e(dr,W){const Yt=lt.endActivation(dr);Yt.starty+18>W&&(Yt.starty=W-6,W+=12),Ft.drawActivation(Q,Yt,W,G,or(dr.from).length),lt.insert(Yt.startx,W-10,Yt.stopx,W)}Ft.insertArrowHead(Q),Ft.insertArrowCrossHead(Q),Ft.insertArrowFilledHead(Q),Ft.insertSequenceNumber(Q),(0,A.K2)($e,"activeEnd");let He=1,Ar=1;const kr=[],zr=[];let Er=0;for(const dr of xe){let W,Yt,Ye;switch(dr.type){case m.db.LINETYPE.NOTE:lt.resetVerticalPos(),Yt=dr.noteModel,yield ke(Q,Yt);break;case m.db.LINETYPE.ACTIVE_START:lt.newActivation(dr,Q,xt);break;case m.db.LINETYPE.ACTIVE_END:$e(dr,lt.getVerticalPos());break;case m.db.LINETYPE.LOOP_START:ce(_r,dr,G.boxMargin,G.boxMargin+G.boxTextMargin,Ne=>lt.newLoop(Ne));break;case m.db.LINETYPE.LOOP_END:W=lt.endLoop(),yield Ft.drawLoop(Q,W,"loop",G),lt.bumpVerticalPos(W.stopy-lt.getVerticalPos()),lt.models.addLoop(W);break;case m.db.LINETYPE.RECT_START:ce(_r,dr,G.boxMargin,G.boxMargin,Ne=>lt.newLoop(void 0,Ne.message));break;case m.db.LINETYPE.RECT_END:W=lt.endLoop(),zr.push(W),lt.models.addLoop(W),lt.bumpVerticalPos(W.stopy-lt.getVerticalPos());break;case m.db.LINETYPE.OPT_START:ce(_r,dr,G.boxMargin,G.boxMargin+G.boxTextMargin,Ne=>lt.newLoop(Ne));break;case m.db.LINETYPE.OPT_END:W=lt.endLoop(),yield Ft.drawLoop(Q,W,"opt",G),lt.bumpVerticalPos(W.stopy-lt.getVerticalPos()),lt.models.addLoop(W);break;case m.db.LINETYPE.ALT_START:ce(_r,dr,G.boxMargin,G.boxMargin+G.boxTextMargin,Ne=>lt.newLoop(Ne));break;case m.db.LINETYPE.ALT_ELSE:ce(_r,dr,G.boxMargin+G.boxTextMargin,G.boxMargin,Ne=>lt.addSectionToLoop(Ne));break;case m.db.LINETYPE.ALT_END:W=lt.endLoop(),yield Ft.drawLoop(Q,W,"alt",G),lt.bumpVerticalPos(W.stopy-lt.getVerticalPos()),lt.models.addLoop(W);break;case m.db.LINETYPE.PAR_START:case m.db.LINETYPE.PAR_OVER_START:ce(_r,dr,G.boxMargin,G.boxMargin+G.boxTextMargin,Ne=>lt.newLoop(Ne)),lt.saveVerticalPos();break;case m.db.LINETYPE.PAR_AND:ce(_r,dr,G.boxMargin+G.boxTextMargin,G.boxMargin,Ne=>lt.addSectionToLoop(Ne));break;case m.db.LINETYPE.PAR_END:W=lt.endLoop(),yield Ft.drawLoop(Q,W,"par",G),lt.bumpVerticalPos(W.stopy-lt.getVerticalPos()),lt.models.addLoop(W);break;case m.db.LINETYPE.AUTONUMBER:He=dr.message.start||He,Ar=dr.message.step||Ar,dr.message.visible?m.db.enableSequenceNumbers():m.db.disableSequenceNumbers();break;case m.db.LINETYPE.CRITICAL_START:ce(_r,dr,G.boxMargin,G.boxMargin+G.boxTextMargin,Ne=>lt.newLoop(Ne));break;case m.db.LINETYPE.CRITICAL_OPTION:ce(_r,dr,G.boxMargin+G.boxTextMargin,G.boxMargin,Ne=>lt.addSectionToLoop(Ne));break;case m.db.LINETYPE.CRITICAL_END:W=lt.endLoop(),yield Ft.drawLoop(Q,W,"critical",G),lt.bumpVerticalPos(W.stopy-lt.getVerticalPos()),lt.models.addLoop(W);break;case m.db.LINETYPE.BREAK_START:ce(_r,dr,G.boxMargin,G.boxMargin+G.boxTextMargin,Ne=>lt.newLoop(Ne));break;case m.db.LINETYPE.BREAK_END:W=lt.endLoop(),yield Ft.drawLoop(Q,W,"break",G),lt.bumpVerticalPos(W.stopy-lt.getVerticalPos()),lt.models.addLoop(W);break;default:try{Ye=dr.msgModel,Ye.starty=lt.getVerticalPos(),Ye.sequenceIndex=He,Ye.sequenceVisible=m.db.showSequenceNumbers();const Ne=yield Re(Q,Ye);Ee(dr,Ye,Ne,Er,xt,Vt,jt),kr.push({messageModel:Ye,lineStartY:Ne}),lt.models.addMessage(Ye)}catch(Ne){A.Rm.error("error while drawing message",Ne)}}[m.db.LINETYPE.SOLID_OPEN,m.db.LINETYPE.DOTTED_OPEN,m.db.LINETYPE.SOLID,m.db.LINETYPE.DOTTED,m.db.LINETYPE.SOLID_CROSS,m.db.LINETYPE.DOTTED_CROSS,m.db.LINETYPE.SOLID_POINT,m.db.LINETYPE.DOTTED_POINT,m.db.LINETYPE.BIDIRECTIONAL_SOLID,m.db.LINETYPE.BIDIRECTIONAL_DOTTED].includes(dr.type)&&(He+=Ar),Er++}A.Rm.debug("createdActors",Vt),A.Rm.debug("destroyedActors",jt),yield xr(Q,xt,Wt,!1);for(const dr of kr)yield de(Q,dr.messageModel,dr.lineStartY,m);G.mirrorActors&&(yield xr(Q,xt,Wt,!0)),zr.forEach(dr=>Ft.drawBackgroundRect(Q,dr)),w(Q,xt,Wt,G);for(const dr of lt.models.boxes){dr.height=lt.getVerticalPos()-dr.y,lt.insert(dr.x,dr.y,dr.x+dr.width,dr.height);const W=2*G.boxMargin;dr.startx=dr.x-W,dr.starty=dr.y-.25*W,dr.stopx=dr.startx+dr.width+2*W,dr.stopy=dr.starty+dr.height+.75*W,dr.stroke="rgb(0,0,0, 0.5)",Ft.drawBox(Q,dr,G)}We&&lt.bumpVerticalPos(G.boxMargin);const Jr=zt(Q,xt,Wt,P),{bounds:Br}=lt.getBounds();void 0===Br.startx&&(Br.startx=0),void 0===Br.starty&&(Br.starty=0),void 0===Br.stopx&&(Br.stopx=0),void 0===Br.stopy&&(Br.stopy=0);let ha=Br.stopy-Br.starty;ha<Jr.maxHeight&&(ha=Jr.maxHeight);let ia=ha+2*G.diagramMarginY;G.mirrorActors&&(ia=ia-G.boxMargin+G.bottomMarginAdj);let jr=Br.stopx-Br.startx;jr<Jr.maxWidth&&(jr=Jr.maxWidth);const Qr=jr+2*G.diagramMarginX;Xe&&Q.append("text").text(Xe).attr("x",(Br.stopx-Br.startx)/2-2*G.diagramMarginX).attr("y",-25),(0,$.a$)(Q,ia,Qr,G.useMaxWidth);const lr=Xe?40:0;Q.attr("viewBox",Br.startx-G.diagramMarginX+" -"+(G.diagramMarginY+lr)+" "+Qr+" "+(ia+lr)),A.Rm.debug("models:",lt.models)});return function(y,E,I,m){return g.apply(this,arguments)}}(),"draw");function er(g,y,E){return Qe.apply(this,arguments)}function Qe(){return(Qe=(0,ot.A)(function*(g,y,E){const I={};for(const m of y)if(g.get(m.to)&&g.get(m.from)){const D=g.get(m.to);if(m.placement===E.db.PLACEMENT.LEFTOF&&!D.prevActor||m.placement===E.db.PLACEMENT.RIGHTOF&&!D.nextActor)continue;const v=void 0!==m.placement,b=!v,C=v?Zt(G):Mt(G),P=m.wrap?ut._K.wrapLabel(m.message,G.width-2*G.wrapPadding,C):m.message,xt=((0,$.Wi)(P)?yield(0,$.Dl)(m.message,(0,$.D7)()):ut._K.calculateTextDimensions(P,C)).width+2*G.wrapPadding;b&&m.from===D.nextActor?I[m.to]=$.Y2.getMax(I[m.to]||0,xt):b&&m.from===D.prevActor?I[m.from]=$.Y2.getMax(I[m.from]||0,xt):b&&m.from===m.to?(I[m.from]=$.Y2.getMax(I[m.from]||0,xt/2),I[m.to]=$.Y2.getMax(I[m.to]||0,xt/2)):m.placement===E.db.PLACEMENT.RIGHTOF?I[m.from]=$.Y2.getMax(I[m.from]||0,xt):m.placement===E.db.PLACEMENT.LEFTOF?I[D.prevActor]=$.Y2.getMax(I[D.prevActor]||0,xt):m.placement===E.db.PLACEMENT.OVER&&(D.prevActor&&(I[D.prevActor]=$.Y2.getMax(I[D.prevActor]||0,xt/2)),D.nextActor&&(I[m.from]=$.Y2.getMax(I[m.from]||0,xt/2)))}return A.Rm.debug("maxMessageWidthPerActor:",I),I})).apply(this,arguments)}(0,A.K2)(er,"getMaxMessageWidthPerActor");var Lr=(0,A.K2)(function(g){let y=0;const E=pe(G);for(const I in g.links){const D=ut._K.calculateTextDimensions(I,E).width+2*G.wrapPadding+2*G.boxMargin;y<D&&(y=D)}return y},"getRequiredPopupWidth");function _e(g,y,E){return Hr.apply(this,arguments)}function Hr(){return(Hr=(0,ot.A)(function*(g,y,E){let I=0;for(const D of g.keys()){const v=g.get(D);v.wrap&&(v.description=ut._K.wrapLabel(v.description,G.width-2*G.wrapPadding,pe(G)));const b=(0,$.Wi)(v.description)?yield(0,$.Dl)(v.description,(0,$.D7)()):ut._K.calculateTextDimensions(v.description,pe(G));v.width=v.wrap?G.width:$.Y2.getMax(G.width,b.width+2*G.wrapPadding),v.height=v.wrap?$.Y2.getMax(b.height,G.height):G.height,I=$.Y2.getMax(I,v.height)}for(const D in y){const v=g.get(D);if(!v)continue;const b=g.get(v.nextActor);b?v.margin=$.Y2.getMax(y[D]+G.actorMargin-v.width/2-b.width/2,G.actorMargin):v.margin=$.Y2.getMax(y[D]+G.actorMargin-v.width/2,G.actorMargin)}let m=0;return E.forEach(D=>{const v=Mt(G);let b=D.actorKeys.reduce((xt,Vt)=>xt+(g.get(Vt).width+(g.get(Vt).margin||0)),0);b+=8*G.boxMargin,b-=2*G.boxTextMargin,D.wrap&&(D.name=ut._K.wrapLabel(D.name,b-2*G.wrapPadding,v));const P=ut._K.calculateTextDimensions(D.name,v);m=$.Y2.getMax(P.height,m);const Q=$.Y2.getMax(b,P.width+2*G.wrapPadding);D.margin=G.boxTextMargin,b<Q&&(D.margin+=(Q-b)/2)}),E.forEach(D=>D.textMaxHeight=m),$.Y2.getMax(I,G.height)})).apply(this,arguments)}(0,A.K2)(_e,"calculateActorMargins");var sr=(0,A.K2)(function(){var g=(0,ot.A)(function*(y,E,I){const m=E.get(y.from),D=E.get(y.to),v=m.x,b=D.x,C=y.wrap&&y.message;let P=(0,$.Wi)(y.message)?yield(0,$.Dl)(y.message,(0,$.D7)()):ut._K.calculateTextDimensions(C?ut._K.wrapLabel(y.message,G.width,Zt(G)):y.message,Zt(G));const Q={width:C?G.width:$.Y2.getMax(G.width,P.width+2*G.noteMargin),height:0,startx:m.x,stopx:0,starty:0,stopy:0,message:y.message};return y.placement===I.db.PLACEMENT.RIGHTOF?(Q.width=C?$.Y2.getMax(G.width,P.width):$.Y2.getMax(m.width/2+D.width/2,P.width+2*G.noteMargin),Q.startx=v+(m.width+G.actorMargin)/2):y.placement===I.db.PLACEMENT.LEFTOF?(Q.width=$.Y2.getMax(C?G.width:m.width/2+D.width/2,P.width+2*G.noteMargin),Q.startx=v-Q.width+(m.width-G.actorMargin)/2):y.to===y.from?(P=ut._K.calculateTextDimensions(C?ut._K.wrapLabel(y.message,$.Y2.getMax(G.width,m.width),Zt(G)):y.message,Zt(G)),Q.width=C?$.Y2.getMax(G.width,m.width):$.Y2.getMax(m.width,G.width,P.width+2*G.noteMargin),Q.startx=v+(m.width-Q.width)/2):(Q.width=Math.abs(v+m.width/2-(b+D.width/2))+G.actorMargin,Q.startx=v<b?v+m.width/2-G.actorMargin/2:b+D.width/2-G.actorMargin/2),C&&(Q.message=ut._K.wrapLabel(y.message,Q.width-2*G.wrapPadding,Zt(G))),A.Rm.debug(`NM:[${Q.startx},${Q.stopx},${Q.starty},${Q.stopy}:${Q.width},${Q.height}=${y.message}]`),Q});return function(y,E,I){return g.apply(this,arguments)}}(),"buildNoteModel"),te=(0,A.K2)(function(g,y,E){if(![E.db.LINETYPE.SOLID_OPEN,E.db.LINETYPE.DOTTED_OPEN,E.db.LINETYPE.SOLID,E.db.LINETYPE.DOTTED,E.db.LINETYPE.SOLID_CROSS,E.db.LINETYPE.DOTTED_CROSS,E.db.LINETYPE.SOLID_POINT,E.db.LINETYPE.DOTTED_POINT,E.db.LINETYPE.BIDIRECTIONAL_SOLID,E.db.LINETYPE.BIDIRECTIONAL_DOTTED].includes(g.type))return{};const[I,m]=ve(g.from,y),[D,v]=ve(g.to,y),b=I<=D;let C=b?m:I,P=b?D:v;const Q=Math.abs(D-v)>2,xt=(0,A.K2)(Wt=>b?-Wt:Wt,"adjustValue");g.from===g.to?P=C:(g.activate&&!Q&&(P+=xt(G.activationWidth/2-1)),[E.db.LINETYPE.SOLID_OPEN,E.db.LINETYPE.DOTTED_OPEN].includes(g.type)||(P+=xt(3)),[E.db.LINETYPE.BIDIRECTIONAL_SOLID,E.db.LINETYPE.BIDIRECTIONAL_DOTTED].includes(g.type)&&(C-=xt(3)));const Vt=[I,m,D,v],jt=Math.abs(C-P);g.wrap&&g.message&&(g.message=ut._K.wrapLabel(g.message,$.Y2.getMax(jt+2*G.wrapPadding,G.width),Mt(G)));const Ut=ut._K.calculateTextDimensions(g.message,Mt(G));return{width:$.Y2.getMax(g.wrap?0:Ut.width+2*G.wrapPadding,jt+2*G.wrapPadding,G.width),height:0,startx:C,stopx:P,starty:0,stopy:0,message:g.message,type:g.type,wrap:g.wrap,fromBounds:Math.min.apply(null,Vt),toBounds:Math.max.apply(null,Vt)}},"buildMessageModel"),ne=(0,A.K2)(function(){var g=(0,ot.A)(function*(y,E,I,m){const D={},v=[];let b,C,P;for(const Q of y){switch(Q.type){case m.db.LINETYPE.LOOP_START:case m.db.LINETYPE.ALT_START:case m.db.LINETYPE.OPT_START:case m.db.LINETYPE.PAR_START:case m.db.LINETYPE.PAR_OVER_START:case m.db.LINETYPE.CRITICAL_START:case m.db.LINETYPE.BREAK_START:v.push({id:Q.id,msg:Q.message,from:Number.MAX_SAFE_INTEGER,to:Number.MIN_SAFE_INTEGER,width:0});break;case m.db.LINETYPE.ALT_ELSE:case m.db.LINETYPE.PAR_AND:case m.db.LINETYPE.CRITICAL_OPTION:Q.message&&(b=v.pop(),D[b.id]=b,D[Q.id]=b,v.push(b));break;case m.db.LINETYPE.LOOP_END:case m.db.LINETYPE.ALT_END:case m.db.LINETYPE.OPT_END:case m.db.LINETYPE.PAR_END:case m.db.LINETYPE.CRITICAL_END:case m.db.LINETYPE.BREAK_END:b=v.pop(),D[b.id]=b;break;case m.db.LINETYPE.ACTIVE_START:{const Vt=E.get(Q.from?Q.from:Q.to.actor),jt=or(Q.from?Q.from:Q.to.actor).length,Ut=Vt.x+Vt.width/2+(jt-1)*G.activationWidth/2;lt.activations.push({startx:Ut,stopx:Ut+G.activationWidth,actor:Q.from,enabled:!0})}break;case m.db.LINETYPE.ACTIVE_END:{const Vt=lt.activations.map(jt=>jt.actor).lastIndexOf(Q.from);lt.activations.splice(Vt,1).splice(0,1)}}void 0!==Q.placement?(C=yield sr(Q,E,m),Q.noteModel=C,v.forEach(Vt=>{b=Vt,b.from=$.Y2.getMin(b.from,C.startx),b.to=$.Y2.getMax(b.to,C.startx+C.width),b.width=$.Y2.getMax(b.width,Math.abs(b.from-b.to))-G.labelBoxWidth})):(P=te(Q,E,m),Q.msgModel=P,P.startx&&P.stopx&&v.length>0&&v.forEach(Vt=>{if(b=Vt,P.startx===P.stopx){const jt=E.get(Q.from),Ut=E.get(Q.to);b.from=$.Y2.getMin(jt.x-P.width/2,jt.x-jt.width/2,b.from),b.to=$.Y2.getMax(Ut.x+P.width/2,Ut.x+jt.width/2,b.to),b.width=$.Y2.getMax(b.width,Math.abs(b.to-b.from))-G.labelBoxWidth}else b.from=$.Y2.getMin(P.startx,b.from),b.to=$.Y2.getMax(P.stopx,b.to),b.width=$.Y2.getMax(b.width,P.width)-G.labelBoxWidth}))}return lt.activations=[],A.Rm.debug("Loop type widths:",D),D});return function(y,E,I,m){return g.apply(this,arguments)}}(),"calculateLoopBounds"),be={bounds:lt,drawActors:xr,drawActorsPopup:zt,setConf:Ae,draw:De},ir={parser:Rt,get db(){return new Rr},renderer:be,styles:Vr,init:(0,A.K2)(g=>{g.sequence||(g.sequence={}),g.wrap&&(g.sequence.wrap=g.wrap,(0,$.XV)({sequence:{wrap:g.wrap}}))},"init")}},97787:(Ja,vr,R)=>{"use strict";R.d(vr,{o:()=>ee});var ee=(0,R(32303).K2)(()=>"\n  /* Font Awesome icon styling - consolidated */\n  .label-icon {\n    display: inline-block;\n    height: 1em;\n    overflow: visible;\n    vertical-align: -0.125em;\n  }\n  \n  .node .label-icon path {\n    fill: currentColor;\n    stroke: revert;\n    stroke-width: revert;\n  }\n","getIconStyles")},98954:(Ja,vr,R)=>{"use strict";R.d(vr,{IU:()=>cr,Jo:()=>Bt,T_:()=>ra,g0:()=>Tt,jP:()=>wr});var ot=R(89204),ee=R(36384),L=R(87452),S=R(32239),Pt=R(19753),ut=R(59355),$=R(52052),A=R(79006),At=R(32303),wt=R(40622),Ge=R(93654),dt=(0,At.K2)((B,F,et,mt,it,rt)=>{F.arrowTypeStart&&q(B,"start",F.arrowTypeStart,et,mt,it,rt),F.arrowTypeEnd&&q(B,"end",F.arrowTypeEnd,et,mt,it,rt)},"addEdgeMarkers"),Rt={arrow_cross:{type:"cross",fill:!1},arrow_point:{type:"point",fill:!0},arrow_barb:{type:"barb",fill:!0},arrow_circle:{type:"circle",fill:!1},aggregation:{type:"aggregation",fill:!1},extension:{type:"extension",fill:!1},composition:{type:"composition",fill:!0},dependency:{type:"dependency",fill:!0},lollipop:{type:"lollipop",fill:!1},only_one:{type:"onlyOne",fill:!1},zero_or_one:{type:"zeroOrOne",fill:!1},one_or_more:{type:"oneOrMore",fill:!1},zero_or_more:{type:"zeroOrMore",fill:!1},requirement_arrow:{type:"requirement_arrow",fill:!1},requirement_contains:{type:"requirement_contains",fill:!1}},q=(0,At.K2)((B,F,et,mt,it,rt,_t)=>{const ht=Rt[et];if(!ht)return void At.Rm.warn(`Unknown arrow type: ${et}`);const lt=`${it}_${rt}-${ht.type}${"start"===F?"Start":"End"}`;if(_t&&""!==_t.trim()){const Mt=`${lt}_${_t.replace(/[^\dA-Za-z]/g,"_")}`;if(!document.getElementById(Mt)){const Zt=document.getElementById(lt);if(Zt){const pe=Zt.cloneNode(!0);pe.id=Mt,pe.querySelectorAll("path, circle, line").forEach(Ze=>{Ze.setAttribute("stroke",_t),ht.fill&&Ze.setAttribute("fill",_t)}),Zt.parentNode?.appendChild(pe)}}B.attr(`marker-${F}`,`url(${mt}#${Mt})`)}else B.attr(`marker-${F}`,`url(${mt}#${lt})`)},"addEdgeMarker"),ar=new Map,Ke=new Map,cr=(0,At.K2)(()=>{ar.clear(),Ke.clear()},"clear"),Rr=(0,At.K2)(B=>B?B.reduce((et,mt)=>et+";"+mt,""):"","getLabelStyles"),wr=(0,At.K2)(function(){var B=(0,ot.A)(function*(F,et){let mt=(0,A._3)((0,A.D7)().flowchart.htmlLabels);const{labelStyles:it}=(0,Pt.GX)(et);et.labelStyle=it;const rt=yield(0,ut.GZ)(F,et.label,{style:et.labelStyle,useHtmlLabels:mt,addSvgBackground:!0,isNode:!1});At.Rm.info("abc82",et,et.labelType);const _t=F.insert("g").attr("class","edgeLabel"),ht=_t.insert("g").attr("class","label").attr("data-id",et.id);ht.node().appendChild(rt);let G,Ft=rt.getBBox();if(mt){const lt=rt.children[0],ke=(0,wt.Ltv)(rt);Ft=lt.getBoundingClientRect(),ke.attr("width",Ft.width),ke.attr("height",Ft.height)}if(ht.attr("transform","translate("+-Ft.width/2+", "+-Ft.height/2+")"),ar.set(et.id,_t),et.width=Ft.width,et.height=Ft.height,et.startLabelLeft){const lt=yield(0,L.DA)(et.startLabelLeft,Rr(et.labelStyle)),ke=F.insert("g").attr("class","edgeTerminals"),Mt=ke.insert("g").attr("class","inner");G=Mt.node().appendChild(lt);const Zt=lt.getBBox();Mt.attr("transform","translate("+-Zt.width/2+", "+-Zt.height/2+")"),Ke.get(et.id)||Ke.set(et.id,{}),Ke.get(et.id).startLeft=ke,Vr(G,et.startLabelLeft)}if(et.startLabelRight){const lt=yield(0,L.DA)(et.startLabelRight,Rr(et.labelStyle)),ke=F.insert("g").attr("class","edgeTerminals"),Mt=ke.insert("g").attr("class","inner");G=ke.node().appendChild(lt),Mt.node().appendChild(lt);const Zt=lt.getBBox();Mt.attr("transform","translate("+-Zt.width/2+", "+-Zt.height/2+")"),Ke.get(et.id)||Ke.set(et.id,{}),Ke.get(et.id).startRight=ke,Vr(G,et.startLabelRight)}if(et.endLabelLeft){const lt=yield(0,L.DA)(et.endLabelLeft,Rr(et.labelStyle)),ke=F.insert("g").attr("class","edgeTerminals"),Mt=ke.insert("g").attr("class","inner");G=Mt.node().appendChild(lt);const Zt=lt.getBBox();Mt.attr("transform","translate("+-Zt.width/2+", "+-Zt.height/2+")"),ke.node().appendChild(lt),Ke.get(et.id)||Ke.set(et.id,{}),Ke.get(et.id).endLeft=ke,Vr(G,et.endLabelLeft)}if(et.endLabelRight){const lt=yield(0,L.DA)(et.endLabelRight,Rr(et.labelStyle)),ke=F.insert("g").attr("class","edgeTerminals"),Mt=ke.insert("g").attr("class","inner");G=Mt.node().appendChild(lt);const Zt=lt.getBBox();Mt.attr("transform","translate("+-Zt.width/2+", "+-Zt.height/2+")"),ke.node().appendChild(lt),Ke.get(et.id)||Ke.set(et.id,{}),Ke.get(et.id).endRight=ke,Vr(G,et.endLabelRight)}return rt});return function(F,et){return B.apply(this,arguments)}}(),"insertEdgeLabel");function Vr(B,F){(0,A.D7)().flowchart.htmlLabels&&B&&(B.style.width=9*F.length+"px",B.style.height="12px")}(0,At.K2)(Vr,"setTerminalWidth");var ra=(0,At.K2)((B,F)=>{At.Rm.debug("Moving label abc88 ",B.id,B.label,ar.get(B.id),F);let et=F.updatedPath?F.updatedPath:F.originalPath;const mt=(0,A.D7)(),{subGraphTitleTotalMargin:it}=(0,S.O)(mt);if(B.label){const rt=ar.get(B.id);let _t=B.x,ht=B.y;if(et){const Ft=$._K.calcLabelPosition(et);At.Rm.debug("Moving label "+B.label+" from (",_t,",",ht,") to (",Ft.x,",",Ft.y,") abc88"),F.updatedPath&&(_t=Ft.x,ht=Ft.y)}rt.attr("transform",`translate(${_t}, ${ht+it/2})`)}if(B.startLabelLeft){const rt=Ke.get(B.id).startLeft;let _t=B.x,ht=B.y;if(et){const Ft=$._K.calcTerminalLabelPosition(B.arrowTypeStart?10:0,"start_left",et);_t=Ft.x,ht=Ft.y}rt.attr("transform",`translate(${_t}, ${ht})`)}if(B.startLabelRight){const rt=Ke.get(B.id).startRight;let _t=B.x,ht=B.y;if(et){const Ft=$._K.calcTerminalLabelPosition(B.arrowTypeStart?10:0,"start_right",et);_t=Ft.x,ht=Ft.y}rt.attr("transform",`translate(${_t}, ${ht})`)}if(B.endLabelLeft){const rt=Ke.get(B.id).endLeft;let _t=B.x,ht=B.y;if(et){const Ft=$._K.calcTerminalLabelPosition(B.arrowTypeEnd?10:0,"end_left",et);_t=Ft.x,ht=Ft.y}rt.attr("transform",`translate(${_t}, ${ht})`)}if(B.endLabelRight){const rt=Ke.get(B.id).endRight;let _t=B.x,ht=B.y;if(et){const Ft=$._K.calcTerminalLabelPosition(B.arrowTypeEnd?10:0,"end_right",et);_t=Ft.x,ht=Ft.y}rt.attr("transform",`translate(${_t}, ${ht})`)}},"positionEdgeLabel"),Nr=(0,At.K2)((B,F)=>{const mt=B.y,it=Math.abs(F.x-B.x),rt=Math.abs(F.y-mt);return it>=B.width/2||rt>=B.height/2},"outsideNode"),Fr=(0,At.K2)((B,F,et)=>{At.Rm.debug(`intersection calc abc89:\n  outsidePoint: ${JSON.stringify(F)}\n  insidePoint : ${JSON.stringify(et)}\n  node        : x:${B.x} y:${B.y} w:${B.width} h:${B.height}`);const mt=B.x,it=B.y,rt=Math.abs(mt-et.x),_t=B.width/2;let ht=et.x<F.x?_t-rt:_t+rt;const Ft=B.height/2,G=Math.abs(F.y-et.y),lt=Math.abs(F.x-et.x);if(Math.abs(it-F.y)*_t>Math.abs(mt-F.x)*Ft){let ke=et.y<F.y?F.y-Ft-it:it-Ft-F.y;ht=lt*ke/G;const Mt={x:et.x<F.x?et.x+ht:et.x-lt+ht,y:et.y<F.y?et.y+G-ke:et.y-G+ke};return 0===ht&&(Mt.x=F.x,Mt.y=F.y),0===lt&&(Mt.x=F.x),0===G&&(Mt.y=F.y),At.Rm.debug(`abc89 top/bottom calc, Q ${G}, q ${ke}, R ${lt}, r ${ht}`,Mt),Mt}{ht=et.x<F.x?F.x-_t-mt:mt-_t-F.x;let ke=G*ht/lt,Mt=et.x<F.x?et.x+lt-ht:et.x-lt+ht,Zt=et.y<F.y?et.y+ke:et.y-ke;return At.Rm.debug(`sides calc abc89, Q ${G}, q ${ke}, R ${lt}, r ${ht}`,{_x:Mt,_y:Zt}),0===ht&&(Mt=F.x,Zt=F.y),0===lt&&(Mt=F.x),0===G&&(Zt=F.y),{x:Mt,y:Zt}}},"intersection"),Se=(0,At.K2)((B,F)=>{At.Rm.warn("abc88 cutPathAtIntersect",B,F);let et=[],mt=B[0],it=!1;return B.forEach(rt=>{if(At.Rm.info("abc88 checking point",rt,F),Nr(F,rt)||it)At.Rm.warn("abc88 outside",rt,mt),mt=rt,it||et.push(rt);else{const _t=Fr(F,mt,rt);At.Rm.debug("abc88 inside",rt,mt,_t),At.Rm.debug("abc88 intersection",_t,F);let ht=!1;et.forEach(Ft=>{ht=ht||Ft.x===_t.x&&Ft.y===_t.y}),et.some(Ft=>Ft.x===_t.x&&Ft.y===_t.y)?At.Rm.warn("abc88 no intersect",_t,et):et.push(_t),it=!0}}),At.Rm.debug("returning points",et),et},"cutPathAtIntersect");function Or(B){const F=[],et=[];for(let mt=1;mt<B.length-1;mt++){const it=B[mt-1],rt=B[mt],_t=B[mt+1];(it.x===rt.x&&rt.y===_t.y&&Math.abs(rt.x-_t.x)>5&&Math.abs(rt.y-it.y)>5||it.y===rt.y&&rt.x===_t.x&&Math.abs(rt.x-it.x)>5&&Math.abs(rt.y-_t.y)>5)&&(F.push(rt),et.push(mt))}return{cornerPoints:F,cornerPointPositions:et}}(0,At.K2)(Or,"extractCornerPoints");var je=(0,At.K2)(function(B,F,et){const mt=F.x-B.x,it=F.y-B.y,_t=et/Math.sqrt(mt*mt+it*it);return{x:F.x-_t*mt,y:F.y-_t*it}},"findAdjacentPoint"),z=(0,At.K2)(function(B){const{cornerPointPositions:F}=Or(B),et=[];for(let mt=0;mt<B.length;mt++)if(F.includes(mt)){const it=B[mt-1],rt=B[mt+1],_t=B[mt],ht=je(it,_t,5),Ft=je(rt,_t,5),G=Ft.x-ht.x,lt=Ft.y-ht.y;et.push(ht);const ke=2*Math.sqrt(2);let Mt={x:_t.x,y:_t.y};if(Math.abs(rt.x-it.x)>10&&Math.abs(rt.y-it.y)>=10){At.Rm.debug("Corner point fixing",Math.abs(rt.x-it.x),Math.abs(rt.y-it.y));const Zt=5;Mt=_t.x===ht.x?{x:G<0?ht.x-Zt+ke:ht.x+Zt-ke,y:lt<0?ht.y-ke:ht.y+ke}:{x:G<0?ht.x-ke:ht.x+ke,y:lt<0?ht.y-Zt+ke:ht.y+Zt-ke}}else At.Rm.debug("Corner point skipping fixing",Math.abs(rt.x-it.x),Math.abs(rt.y-it.y));et.push(Mt,Ft)}else et.push(B[mt]);return et},"fixCorners"),ft=(0,At.K2)((B,F,et)=>{const ht=Math.floor((B-F-et)/4);return`0 ${F} ${Array(ht).fill("2 2").join(" ")} ${et}`},"generateDashArray"),Bt=(0,At.K2)(function(B,F,et,mt,it,rt,_t,ht=!1){const{handDrawnSeed:Ft}=(0,A.D7)();let G=F.points,lt=!1;const ke=it;var Mt=rt;const Zt=[];for(const _e in F.cssCompiledStyles)(0,Pt.KX)(_e)||Zt.push(F.cssCompiledStyles[_e]);At.Rm.debug("UIO intersect check",F.points,Mt.x,ke.x),Mt.intersect&&ke.intersect&&!ht&&(G=G.slice(1,F.points.length-1),G.unshift(ke.intersect(G[0])),At.Rm.debug("Last point UIO",F.start,"--\x3e",F.end,G[G.length-1],Mt,Mt.intersect(G[G.length-1])),G.push(Mt.intersect(G[G.length-1])));const pe=btoa(JSON.stringify(G));F.toCluster&&(At.Rm.info("to cluster abc88",et.get(F.toCluster)),G=Se(F.points,et.get(F.toCluster).node),lt=!0),F.fromCluster&&(At.Rm.debug("from cluster abc88",et.get(F.fromCluster),JSON.stringify(G,null,2)),G=Se(G.reverse(),et.get(F.fromCluster).node).reverse(),lt=!0);let Re=G.filter(_e=>!Number.isNaN(_e.y));Re=z(Re);let Ze=wt.qrM;switch(Ze=wt.lUB,F.curve){case"linear":Ze=wt.lUB;break;case"basis":default:Ze=wt.qrM;break;case"cardinal":Ze=wt.y8u;break;case"bumpX":Ze=wt.Wi0;break;case"bumpY":Ze=wt.PGM;break;case"catmullRom":Ze=wt.oDi;break;case"monotoneX":Ze=wt.nVG;break;case"monotoneY":Ze=wt.uxU;break;case"natural":Ze=wt.Xf2;break;case"step":Ze=wt.GZz;break;case"stepAfter":Ze=wt.UPb;break;case"stepBefore":Ze=wt.dyv}const{x:de,y:mr}=(0,ee.RI)(F),xr=(0,wt.n8j)().x(de).y(mr).curve(Ze);let zt;switch(F.thickness){case"normal":default:zt="edge-thickness-normal";break;case"thick":zt="edge-thickness-thick";break;case"invisible":zt="edge-thickness-invisible"}switch(F.pattern){case"solid":default:zt+=" edge-pattern-solid";break;case"dotted":zt+=" edge-pattern-dotted";break;case"dashed":zt+=" edge-pattern-dashed"}let Ae,or="rounded"===F.curve?we(ae(Re,F),5):xr(Re);const ve=Array.isArray(F.style)?F.style:[F.style];let ce=ve.find(_e=>_e?.startsWith("stroke:")),Ee=!1;if("handDrawn"===F.look){const _e=Ge.A.svg(B);Object.assign([],Re);const Hr=_e.path(or,{roughness:.3,seed:Ft});zt+=" transition",Ae=(0,wt.Ltv)(Hr).select("path").attr("id",F.id).attr("class"," "+zt+(F.classes?" "+F.classes:"")).attr("style",ve?ve.reduce((te,ne)=>te+";"+ne,""):"");let sr=Ae.attr("d");Ae.attr("d",sr),B.node().appendChild(Ae.node())}else{const _e=Zt.join(";"),Hr=ve?ve.reduce((y,E)=>y+E+";",""):"";let sr="";F.animate&&(sr=" edge-animation-fast"),F.animation&&(sr=" edge-animation-"+F.animation);const te=(_e?_e+";"+Hr+";":Hr)+";"+(ve?ve.reduce((y,E)=>y+";"+E,""):"");Ae=B.append("path").attr("d",or).attr("id",F.id).attr("class"," "+zt+(F.classes?" "+F.classes:"")+(sr??"")).attr("style",te),ce=te.match(/stroke:([^;]+)/)?.[1],Ee=!0===F.animate||!!F.animation||_e.includes("animation");const ne=Ae.node(),be="function"==typeof ne.getTotalLength?ne.getTotalLength():0,ir=ee.Nq[F.arrowTypeStart]||0,g=ee.Nq[F.arrowTypeEnd]||0;if("neo"===F.look&&!Ee){const E=`stroke-dasharray: ${"dotted"===F.pattern||"dashed"===F.pattern?ft(be,ir,g):`0 ${ir} ${be-ir-g} ${g}`}; stroke-dashoffset: 0;`;Ae.attr("style",E+Ae.attr("style"))}}Ae.attr("data-edge",!0),Ae.attr("data-et","edge"),Ae.attr("data-id",F.id),Ae.attr("data-points",pe),F.showPoints&&Re.forEach(_e=>{B.append("circle").style("stroke","red").style("fill","red").attr("r",1).attr("cx",_e.x).attr("cy",_e.y)});let De="";((0,A.D7)().flowchart.arrowMarkerAbsolute||(0,A.D7)().state.arrowMarkerAbsolute)&&(De=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,De=De.replace(/\(/g,"\\(").replace(/\)/g,"\\)")),At.Rm.info("arrowTypeStart",F.arrowTypeStart),At.Rm.info("arrowTypeEnd",F.arrowTypeEnd),dt(Ae,F,De,_t,mt,ce);const er=Math.floor(G.length/2);$._K.isLabelCoordinateInPath(G[er],Ae.attr("d"))||(lt=!0);let Lr={};return lt&&(Lr.updatedPath=G),Lr.originalPath=F.points,Lr},"insertEdge");function we(B,F){if(B.length<2)return"";let et="";const mt=B.length,it=1e-5;for(let rt=0;rt<mt;rt++){const _t=B[rt],ht=B[rt-1],Ft=B[rt+1];if(0===rt)et+=`M${_t.x},${_t.y}`;else if(rt===mt-1)et+=`L${_t.x},${_t.y}`;else{const G=_t.x-ht.x,lt=_t.y-ht.y,ke=Ft.x-_t.x,Mt=Ft.y-_t.y,Zt=Math.hypot(G,lt),pe=Math.hypot(ke,Mt);if(Zt<it||pe<it){et+=`L${_t.x},${_t.y}`;continue}const Re=G/Zt,Ze=lt/Zt,de=ke/pe,mr=Mt/pe,zt=Math.max(-1,Math.min(1,Re*de+Ze*mr)),Ae=Math.acos(zt);if(Ae<it||Math.abs(Math.PI-Ae)<it){et+=`L${_t.x},${_t.y}`;continue}const or=Math.min(F/Math.sin(Ae/2),Zt/2,pe/2);et+=`L${_t.x-Re*or},${_t.y-Ze*or}`,et+=`Q${_t.x},${_t.y} ${_t.x+de*or},${_t.y+mr*or}`}}return et}function X(B,F){if(!B||!F)return{angle:0,deltaX:0,deltaY:0};const et=F.x-B.x,mt=F.y-B.y;return{angle:Math.atan2(mt,et),deltaX:et,deltaY:mt}}function ae(B,F){const et=B.map(it=>({...it}));if(B.length>=2&&ee.hq[F.arrowTypeStart]){const it=ee.hq[F.arrowTypeStart],rt=B[0],_t=B[1],{angle:ht}=X(rt,_t),Ft=it*Math.cos(ht),G=it*Math.sin(ht);et[0].x=rt.x+Ft,et[0].y=rt.y+G}const mt=B.length;if(mt>=2&&ee.hq[F.arrowTypeEnd]){const it=ee.hq[F.arrowTypeEnd],rt=B[mt-1],_t=B[mt-2],{angle:ht}=X(_t,rt),Ft=it*Math.cos(ht),G=it*Math.sin(ht);et[mt-1].x=rt.x-Ft,et[mt-1].y=rt.y-G}return et}(0,At.K2)(we,"generateRoundedPath"),(0,At.K2)(X,"calculateDeltaAndAngle"),(0,At.K2)(ae,"applyMarkerOffsetsToPoints");var w=(0,At.K2)((B,F,et,mt)=>{F.forEach(it=>{Et[it](B,et,mt)})},"insertMarkers"),Et={extension:(0,At.K2)((B,F,et)=>{At.Rm.trace("Making markers for ",et),B.append("defs").append("marker").attr("id",et+"_"+F+"-extensionStart").attr("class","marker extension "+F).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 1,7 L18,13 V 1 Z"),B.append("defs").append("marker").attr("id",et+"_"+F+"-extensionEnd").attr("class","marker extension "+F).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 1,1 V 13 L18,7 Z")},"extension"),composition:(0,At.K2)((B,F,et)=>{B.append("defs").append("marker").attr("id",et+"_"+F+"-compositionStart").attr("class","marker composition "+F).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),B.append("defs").append("marker").attr("id",et+"_"+F+"-compositionEnd").attr("class","marker composition "+F).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")},"composition"),aggregation:(0,At.K2)((B,F,et)=>{B.append("defs").append("marker").attr("id",et+"_"+F+"-aggregationStart").attr("class","marker aggregation "+F).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),B.append("defs").append("marker").attr("id",et+"_"+F+"-aggregationEnd").attr("class","marker aggregation "+F).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")},"aggregation"),dependency:(0,At.K2)((B,F,et)=>{B.append("defs").append("marker").attr("id",et+"_"+F+"-dependencyStart").attr("class","marker dependency "+F).attr("refX",6).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 5,7 L9,13 L1,7 L9,1 Z"),B.append("defs").append("marker").attr("id",et+"_"+F+"-dependencyEnd").attr("class","marker dependency "+F).attr("refX",13).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")},"dependency"),lollipop:(0,At.K2)((B,F,et)=>{B.append("defs").append("marker").attr("id",et+"_"+F+"-lollipopStart").attr("class","marker lollipop "+F).attr("refX",13).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("circle").attr("stroke","black").attr("fill","transparent").attr("cx",7).attr("cy",7).attr("r",6),B.append("defs").append("marker").attr("id",et+"_"+F+"-lollipopEnd").attr("class","marker lollipop "+F).attr("refX",1).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("circle").attr("stroke","black").attr("fill","transparent").attr("cx",7).attr("cy",7).attr("r",6)},"lollipop"),point:(0,At.K2)((B,F,et)=>{B.append("marker").attr("id",et+"_"+F+"-pointEnd").attr("class","marker "+F).attr("viewBox","0 0 10 10").attr("refX",5).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",8).attr("markerHeight",8).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),B.append("marker").attr("id",et+"_"+F+"-pointStart").attr("class","marker "+F).attr("viewBox","0 0 10 10").attr("refX",4.5).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",8).attr("markerHeight",8).attr("orient","auto").append("path").attr("d","M 0 5 L 10 10 L 10 0 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")},"point"),circle:(0,At.K2)((B,F,et)=>{B.append("marker").attr("id",et+"_"+F+"-circleEnd").attr("class","marker "+F).attr("viewBox","0 0 10 10").attr("refX",11).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),B.append("marker").attr("id",et+"_"+F+"-circleStart").attr("class","marker "+F).attr("viewBox","0 0 10 10").attr("refX",-1).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")},"circle"),cross:(0,At.K2)((B,F,et)=>{B.append("marker").attr("id",et+"_"+F+"-crossEnd").attr("class","marker cross "+F).attr("viewBox","0 0 11 11").attr("refX",12).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0"),B.append("marker").attr("id",et+"_"+F+"-crossStart").attr("class","marker cross "+F).attr("viewBox","0 0 11 11").attr("refX",-1).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0")},"cross"),barb:(0,At.K2)((B,F,et)=>{B.append("defs").append("marker").attr("id",et+"_"+F+"-barbEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",14).attr("markerUnits","userSpaceOnUse").attr("orient","auto").append("path").attr("d","M 19,7 L9,13 L14,7 L9,1 Z")},"barb"),only_one:(0,At.K2)((B,F,et)=>{B.append("defs").append("marker").attr("id",et+"_"+F+"-onlyOneStart").attr("class","marker onlyOne "+F).attr("refX",0).attr("refY",9).attr("markerWidth",18).attr("markerHeight",18).attr("orient","auto").append("path").attr("d","M9,0 L9,18 M15,0 L15,18"),B.append("defs").append("marker").attr("id",et+"_"+F+"-onlyOneEnd").attr("class","marker onlyOne "+F).attr("refX",18).attr("refY",9).attr("markerWidth",18).attr("markerHeight",18).attr("orient","auto").append("path").attr("d","M3,0 L3,18 M9,0 L9,18")},"only_one"),zero_or_one:(0,At.K2)((B,F,et)=>{const mt=B.append("defs").append("marker").attr("id",et+"_"+F+"-zeroOrOneStart").attr("class","marker zeroOrOne "+F).attr("refX",0).attr("refY",9).attr("markerWidth",30).attr("markerHeight",18).attr("orient","auto");mt.append("circle").attr("fill","white").attr("cx",21).attr("cy",9).attr("r",6),mt.append("path").attr("d","M9,0 L9,18");const it=B.append("defs").append("marker").attr("id",et+"_"+F+"-zeroOrOneEnd").attr("class","marker zeroOrOne "+F).attr("refX",30).attr("refY",9).attr("markerWidth",30).attr("markerHeight",18).attr("orient","auto");it.append("circle").attr("fill","white").attr("cx",9).attr("cy",9).attr("r",6),it.append("path").attr("d","M21,0 L21,18")},"zero_or_one"),one_or_more:(0,At.K2)((B,F,et)=>{B.append("defs").append("marker").attr("id",et+"_"+F+"-oneOrMoreStart").attr("class","marker oneOrMore "+F).attr("refX",18).attr("refY",18).attr("markerWidth",45).attr("markerHeight",36).attr("orient","auto").append("path").attr("d","M0,18 Q 18,0 36,18 Q 18,36 0,18 M42,9 L42,27"),B.append("defs").append("marker").attr("id",et+"_"+F+"-oneOrMoreEnd").attr("class","marker oneOrMore "+F).attr("refX",27).attr("refY",18).attr("markerWidth",45).attr("markerHeight",36).attr("orient","auto").append("path").attr("d","M3,9 L3,27 M9,18 Q27,0 45,18 Q27,36 9,18")},"one_or_more"),zero_or_more:(0,At.K2)((B,F,et)=>{const mt=B.append("defs").append("marker").attr("id",et+"_"+F+"-zeroOrMoreStart").attr("class","marker zeroOrMore "+F).attr("refX",18).attr("refY",18).attr("markerWidth",57).attr("markerHeight",36).attr("orient","auto");mt.append("circle").attr("fill","white").attr("cx",48).attr("cy",18).attr("r",6),mt.append("path").attr("d","M0,18 Q18,0 36,18 Q18,36 0,18");const it=B.append("defs").append("marker").attr("id",et+"_"+F+"-zeroOrMoreEnd").attr("class","marker zeroOrMore "+F).attr("refX",39).attr("refY",18).attr("markerWidth",57).attr("markerHeight",36).attr("orient","auto");it.append("circle").attr("fill","white").attr("cx",9).attr("cy",18).attr("r",6),it.append("path").attr("d","M21,18 Q39,0 57,18 Q39,36 21,18")},"zero_or_more"),requirement_arrow:(0,At.K2)((B,F,et)=>{B.append("defs").append("marker").attr("id",et+"_"+F+"-requirement_arrowEnd").attr("refX",20).attr("refY",10).attr("markerWidth",20).attr("markerHeight",20).attr("orient","auto").append("path").attr("d","M0,0\n      L20,10\n      M20,10\n      L0,20")},"requirement_arrow"),requirement_contains:(0,At.K2)((B,F,et)=>{const mt=B.append("defs").append("marker").attr("id",et+"_"+F+"-requirement_containsStart").attr("refX",0).attr("refY",10).attr("markerWidth",20).attr("markerHeight",20).attr("orient","auto").append("g");mt.append("circle").attr("cx",10).attr("cy",10).attr("r",9).attr("fill","none"),mt.append("line").attr("x1",1).attr("x2",19).attr("y1",10).attr("y2",10),mt.append("line").attr("y1",1).attr("y2",19).attr("x1",10).attr("x2",10)},"requirement_contains")},Tt=w}}]);
//# sourceMappingURL=mermaid-vendor.3d96af9da11c89cd.js.map