(self.webpackChunkgloomhavensecretariat=self.webpackChunkgloomhavensecretariat||[]).push([[911],{3939:(ti,_r,B)=>{"use strict";B.r(_r),B.d(_r,{default:()=>Ae});var mr,lt=B(89204),ee=B(72774),L=B(69664),D=B(24715),Rt=B(72271),Ye=(B(98954),B(36384),B(87452),B(32239),B(19753),B(59355)),bt=B(52052),Xt=B(79006),j=B(32303),fr=B(98245),Fe=B(40622),vr=B(52323),zr=B(99708),br=B(93551),Br={id:"c4",detector:(0,j.K2)(tt=>/^\s*C4Context|C4Container|C4Component|C4Dynamic|C4Deployment/.test(tt),"detector"),loader:(0,j.K2)((0,lt.A)(function*(){const{diagram:tt}=yield B.e(911).then(B.bind(B,72635));return{id:"c4",diagram:tt}}),"loader")},Ge="flowchart",_e={id:Ge,detector:(0,j.K2)((tt,l)=>"dagre-wrapper"!==l?.flowchart?.defaultRenderer&&"elk"!==l?.flowchart?.defaultRenderer&&/^\s*graph/.test(tt),"detector"),loader:(0,j.K2)((0,lt.A)(function*(){const{diagram:tt}=yield B.e(911).then(B.bind(B,84545));return{id:Ge,diagram:tt}}),"loader")},Z="flowchart-v2",Pt={id:Z,detector:(0,j.K2)((tt,l)=>"dagre-d3"!==l?.flowchart?.defaultRenderer&&("elk"===l?.flowchart?.defaultRenderer&&(l.layout="elk"),!(!/^\s*graph/.test(tt)||"dagre-wrapper"!==l?.flowchart?.defaultRenderer)||/^\s*flowchart/.test(tt)),"detector"),loader:(0,j.K2)((0,lt.A)(function*(){const{diagram:tt}=yield B.e(911).then(B.bind(B,84545));return{id:Z,diagram:tt}}),"loader")},Nt={id:"er",detector:(0,j.K2)(tt=>/^\s*erDiagram/.test(tt),"detector"),loader:(0,j.K2)((0,lt.A)(function*(){const{diagram:tt}=yield B.e(911).then(B.bind(B,79158));return{id:"er",diagram:tt}}),"loader")},wt="gitGraph",Re={id:wt,detector:(0,j.K2)(tt=>/^\s*gitGraph/.test(tt),"detector"),loader:(0,j.K2)((0,lt.A)(function*(){const{diagram:tt}=yield Promise.all([B.e(911),B.e(233)]).then(B.bind(B,18617));return{id:wt,diagram:tt}}),"loader")},St={id:"gantt",detector:(0,j.K2)(tt=>/^\s*gantt/.test(tt),"detector"),loader:(0,j.K2)((0,lt.A)(function*(){const{diagram:tt}=yield B.e(911).then(B.bind(B,42282));return{id:"gantt",diagram:tt}}),"loader")},R="info",xt={id:R,detector:(0,j.K2)(tt=>/^\s*info/.test(tt),"detector"),loader:(0,j.K2)((0,lt.A)(function*(){const{diagram:tt}=yield Promise.all([B.e(911),B.e(233)]).then(B.bind(B,58431));return{id:R,diagram:tt}}),"loader")},ut={id:"pie",detector:(0,j.K2)(tt=>/^\s*pie/.test(tt),"detector"),loader:(0,j.K2)((0,lt.A)(function*(){const{diagram:tt}=yield Promise.all([B.e(911),B.e(233)]).then(B.bind(B,91634));return{id:"pie",diagram:tt}}),"loader")},It="quadrantChart",Ot={id:It,detector:(0,j.K2)(tt=>/^\s*quadrantChart/.test(tt),"detector"),loader:(0,j.K2)((0,lt.A)(function*(){const{diagram:tt}=yield B.e(911).then(B.bind(B,59301));return{id:It,diagram:tt}}),"loader")},Jt="xychart",ye={id:Jt,detector:(0,j.K2)(tt=>/^\s*xychart(-beta)?/.test(tt),"detector"),loader:(0,j.K2)((0,lt.A)(function*(){const{diagram:tt}=yield B.e(911).then(B.bind(B,67137));return{id:Jt,diagram:tt}}),"loader")},kr="requirement",ir={id:kr,detector:(0,j.K2)(tt=>/^\s*requirement(Diagram)?/.test(tt),"detector"),loader:(0,j.K2)((0,lt.A)(function*(){const{diagram:tt}=yield B.e(911).then(B.bind(B,29062));return{id:kr,diagram:tt}}),"loader")},me="sequence",er={id:me,detector:(0,j.K2)(tt=>/^\s*sequenceDiagram/.test(tt),"detector"),loader:(0,j.K2)((0,lt.A)(function*(){const{diagram:tt}=yield B.e(911).then(B.bind(B,96434));return{id:me,diagram:tt}}),"loader")},nr={id:"class",detector:(0,j.K2)((tt,l)=>"dagre-wrapper"!==l?.class?.defaultRenderer&&/^\s*classDiagram/.test(tt),"detector"),loader:(0,j.K2)((0,lt.A)(function*(){const{diagram:tt}=yield B.e(911).then(B.bind(B,86976));return{id:"class",diagram:tt}}),"loader")},te="classDiagram",g={id:te,detector:(0,j.K2)((tt,l)=>!(!/^\s*classDiagram/.test(tt)||"dagre-wrapper"!==l?.class?.defaultRenderer)||/^\s*classDiagram-v2/.test(tt),"detector"),loader:(0,j.K2)((0,lt.A)(function*(){const{diagram:tt}=yield B.e(911).then(B.bind(B,55041));return{id:te,diagram:tt}}),"loader")},y="state",z={id:y,detector:(0,j.K2)((tt,l)=>"dagre-wrapper"!==l?.state?.defaultRenderer&&/^\s*stateDiagram/.test(tt),"detector"),loader:(0,j.K2)((0,lt.A)(function*(){const{diagram:tt}=yield Promise.all([B.e(911),B.e(335)]).then(B.bind(B,63192));return{id:y,diagram:tt}}),"loader")},p="stateDiagram",$={id:p,detector:(0,j.K2)((tt,l)=>!!(/^\s*stateDiagram-v2/.test(tt)||/^\s*stateDiagram/.test(tt)&&"dagre-wrapper"===l?.state?.defaultRenderer),"detector"),loader:(0,j.K2)((0,lt.A)(function*(){const{diagram:tt}=yield B.e(911).then(B.bind(B,38676));return{id:p,diagram:tt}}),"loader")},ct="journey",zt={id:ct,detector:(0,j.K2)(tt=>/^\s*journey/.test(tt),"detector"),loader:(0,j.K2)((0,lt.A)(function*(){const{diagram:tt}=yield B.e(911).then(B.bind(B,33350));return{id:ct,diagram:tt}}),"loader")},je={draw:(0,j.K2)((tt,l,T)=>{j.Rm.debug("rendering svg for syntax error\n");const F=(0,L.D)(l),ot=F.append("g");F.attr("viewBox","0 0 2412 512"),(0,Xt.a$)(F,100,512,!0),ot.append("path").attr("class","error-icon").attr("d","m411.313,123.313c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32-9.375,9.375-20.688-20.688c-12.484-12.5-32.766-12.5-45.25,0l-16,16c-1.261,1.261-2.304,2.648-3.31,4.051-21.739-8.561-45.324-13.426-70.065-13.426-105.867,0-192,86.133-192,192s86.133,192 192,192 192-86.133 192-192c0-24.741-4.864-48.327-13.426-70.065 1.402-1.007 2.79-2.049 4.051-3.31l16-16c12.5-12.492 12.5-32.758 0-45.25l-20.688-20.688 9.375-9.375 32.001-31.999zm-219.313,100.687c-52.938,0-96,43.063-96,96 0,8.836-7.164,16-16,16s-16-7.164-16-16c0-70.578 57.422-128 128-128 8.836,0 16,7.164 16,16s-7.164,16-16,16z"),ot.append("path").attr("class","error-icon").attr("d","m459.02,148.98c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l16,16c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16.001-16z"),ot.append("path").attr("class","error-icon").attr("d","m340.395,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16-16c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l15.999,16z"),ot.append("path").attr("class","error-icon").attr("d","m400,64c8.844,0 16-7.164 16-16v-32c0-8.836-7.156-16-16-16-8.844,0-16,7.164-16,16v32c0,8.836 7.156,16 16,16z"),ot.append("path").attr("class","error-icon").attr("d","m496,96.586h-32c-8.844,0-16,7.164-16,16 0,8.836 7.156,16 16,16h32c8.844,0 16-7.164 16-16 0-8.836-7.156-16-16-16z"),ot.append("path").attr("class","error-icon").attr("d","m436.98,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688l32-32c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32c-6.251,6.25-6.251,16.375-0.001,22.625z"),ot.append("text").attr("class","error-text").attr("x",1440).attr("y",250).attr("font-size","150px").style("text-anchor","middle").text("Syntax error in text"),ot.append("text").attr("class","error-text").attr("x",1250).attr("y",400).attr("font-size","100px").style("text-anchor","middle").text(`mermaid version ${T}`)},"draw")},ze=je,cr={db:{},renderer:je,parser:{parse:(0,j.K2)(()=>{},"parse")}},sr="flowchart-elk",wr={id:sr,detector:(0,j.K2)((tt,l={})=>!!(/^\s*flowchart-elk/.test(tt)||/^\s*(flowchart|graph)/.test(tt)&&"elk"===l?.flowchart?.defaultRenderer)&&(l.layout="elk",!0),"detector"),loader:(0,j.K2)((0,lt.A)(function*(){const{diagram:tt}=yield B.e(911).then(B.bind(B,84545));return{id:sr,diagram:tt}}),"loader")},Vr="timeline",Oa={id:Vr,detector:(0,j.K2)(tt=>/^\s*timeline/.test(tt),"detector"),loader:(0,j.K2)((0,lt.A)(function*(){const{diagram:tt}=yield B.e(911).then(B.bind(B,28957));return{id:Vr,diagram:tt}}),"loader")},Qr="mindmap",Tr={id:Qr,detector:(0,j.K2)(tt=>/^\s*mindmap/.test(tt),"detector"),loader:(0,j.K2)((0,lt.A)(function*(){const{diagram:tt}=yield B.e(911).then(B.bind(B,38710));return{id:Qr,diagram:tt}}),"loader")},N="kanban",ia={id:N,detector:(0,j.K2)(tt=>/^\s*kanban/.test(tt),"detector"),loader:(0,j.K2)((0,lt.A)(function*(){const{diagram:tt}=yield B.e(911).then(B.bind(B,90543));return{id:N,diagram:tt}}),"loader")},Ma={id:"sankey",detector:(0,j.K2)(tt=>/^\s*sankey(-beta)?/.test(tt),"detector"),loader:(0,j.K2)((0,lt.A)(function*(){const{diagram:tt}=yield Promise.all([B.e(911),B.e(51)]).then(B.bind(B,57746));return{id:"sankey",diagram:tt}}),"loader")},ha={id:"packet",detector:(0,j.K2)(tt=>/^\s*packet(-beta)?/.test(tt),"detector"),loader:(0,j.K2)((0,lt.A)(function*(){const{diagram:tt}=yield Promise.all([B.e(911),B.e(233)]).then(B.bind(B,62033));return{id:"packet",diagram:tt}}),"loader")},Va={id:"radar",detector:(0,j.K2)(tt=>/^\s*radar-beta/.test(tt),"detector"),loader:(0,j.K2)((0,lt.A)(function*(){const{diagram:tt}=yield Promise.all([B.e(911),B.e(233)]).then(B.bind(B,32810));return{id:"radar",diagram:tt}}),"loader")},Sa={id:"block",detector:(0,j.K2)(tt=>/^\s*block(-beta)?/.test(tt),"detector"),loader:(0,j.K2)((0,lt.A)(function*(){const{diagram:tt}=yield Promise.all([B.e(911),B.e(823)]).then(B.bind(B,28642));return{id:"block",diagram:tt}}),"loader")},Ua="architecture",we={id:Ua,detector:(0,j.K2)(tt=>/^\s*architecture/.test(tt),"detector"),loader:(0,j.K2)((0,lt.A)(function*(){const{diagram:tt}=yield Promise.all([B.e(911),B.e(233),B.e(867)]).then(B.bind(B,32699));return{id:Ua,diagram:tt}}),"loader")},Li="treemap",Dt={id:Li,detector:(0,j.K2)(tt=>/^\s*treemap/.test(tt),"detector"),loader:(0,j.K2)((0,lt.A)(function*(){const{diagram:tt}=yield Promise.all([B.e(911),B.e(233)]).then(B.bind(B,55559));return{id:Li,diagram:tt}}),"loader")},M=!1,jt=(0,j.K2)(()=>{M||(M=!0,(0,Xt.Js)("error",cr,tt=>"error"===tt.toLowerCase().trim()),(0,Xt.Js)("---",{db:{clear:(0,j.K2)(()=>{},"clear")},styles:{},renderer:{draw:(0,j.K2)(()=>{},"draw")},parser:{parse:(0,j.K2)(()=>{throw new Error("Diagrams beginning with --- are not valid. If you were trying to use a YAML front-matter, please ensure that you've correctly opened and closed the YAML front-matter with un-indented `---` blocks")},"parse")},init:(0,j.K2)(()=>null,"init")},tt=>tt.toLowerCase().trimStart().startsWith("---")),(0,Xt.Xd)(wr,Tr,we),(0,Xt.Xd)(Br,ia,g,nr,Nt,St,xt,ut,ir,er,Pt,_e,Oa,Re,$,z,zt,Ot,Ma,ha,ye,Sa,Va,Dt))},"addDiagrams"),Ve=(0,j.K2)((0,lt.A)(function*(){j.Rm.debug("Loading registered diagrams");const l=(yield Promise.allSettled(Object.entries(Xt.mW).map(function(){var T=(0,lt.A)(function*([F,{detector:ot,loader:_t}]){if(_t)try{(0,Xt.Gs)(F)}catch{try{const{diagram:Ie,id:Qt}=yield _t();(0,Xt.Js)(Qt,Ie,ot)}catch(Ie){throw j.Rm.error(`Failed to load external diagram with key ${F}. Removing from detectors.`),delete Xt.mW[F],Ie}}});return function(F){return T.apply(this,arguments)}}()))).filter(T=>"rejected"===T.status);if(l.length>0){j.Rm.error(`Failed to load ${l.length} external diagrams`);for(const T of l)j.Rm.error(T);throw new Error(`Failed to load ${l.length} external diagrams`)}}),"loadRegisteredDiagrams");function Lt(tt,l){tt.attr("role","graphics-document document"),""!==l&&tt.attr("aria-roledescription",l)}function Ft(tt,l,T,F){if(void 0!==tt.insert){if(T){const ot=`chart-desc-${F}`;tt.attr("aria-describedby",ot),tt.insert("desc",":first-child").attr("id",ot).text(T)}if(l){const ot=`chart-title-${F}`;tt.attr("aria-labelledby",ot),tt.insert("title",":first-child").attr("id",ot).text(l)}}}(0,j.K2)(Lt,"setA11yDiagramInfo"),(0,j.K2)(Ft,"addSVGa11yTitleDescription");var Qe=(class N0{constructor(l,T,F,ot,_t){this.type=l,this.text=T,this.db=F,this.parser=ot,this.renderer=_t}static fromText(l){return(0,lt.A)(function*(T,F={}){const ot=(0,Xt.zj)(),_t=(0,Xt.Ch)(T,ot);T=(0,bt.C4)(T)+"\n";try{(0,Xt.Gs)(_t)}catch{const Dr=(0,Xt.J$)(_t);if(!Dr)throw new Xt.C0(`Diagram ${_t} not found.`);const{id:aa,diagram:Nr}=yield Dr();(0,Xt.Js)(aa,Nr)}const{db:Ie,parser:Qt,renderer:Ue,init:yr}=(0,Xt.Gs)(_t);return Qt.parser&&(Qt.parser.yy=Ie),Ie.clear?.(),yr?.(ot),F.title&&Ie.setDiagramTitle?.(F.title),yield Qt.parse(T),new N0(_t,T,Ie,Qt,Ue)}).apply(this,arguments)}render(l,T){var F=this;return(0,lt.A)(function*(){yield F.renderer.draw(F.text,l,T,F)})()}getParser(){return this.parser}getType(){return this.type}static#t=mr=()=>((0,j.K2)(this,"Diagram"),this)},mr()),ta=[],Gr=(0,j.K2)(()=>{ta.forEach(tt=>{tt()}),ta=[]},"attachFunctions"),na=(0,j.K2)(tt=>tt.replace(/^\s*%%(?!{)[^\n]+\n?/gm,"").trimStart(),"cleanupComments");function La(tt){const l=tt.match(Xt.EJ);if(!l)return{text:tt,metadata:{}};let T=(0,D.H)(l[1],{schema:D.r})??{};T="object"!=typeof T||Array.isArray(T)?{}:T;const F={};return T.displayMode&&(F.displayMode=T.displayMode.toString()),T.title&&(F.title=T.title.toString()),T.config&&(F.config=T.config),{text:tt.slice(l[0].length),metadata:F}}(0,j.K2)(La,"extractFrontMatter");var da=(0,j.K2)(tt=>tt.replace(/\r\n?/g,"\n").replace(/<(\w+)([^>]*)>/g,(l,T,F)=>"<"+T+F.replace(/="([^"]*)"/g,"='$1'")+">"),"cleanupText"),wa=(0,j.K2)(tt=>{const{text:l,metadata:T}=La(tt),{displayMode:F,title:ot,config:_t={}}=T;return F&&(_t.gantt||(_t.gantt={}),_t.gantt.displayMode=F),{title:ot,config:_t,text:l}},"processFrontmatter"),Xa=(0,j.K2)(tt=>{const l=bt._K.detectInit(tt)??{},T=bt._K.detectDirective(tt,"wrap");return Array.isArray(T)?l.wrap=T.some(({type:F})=>"wrap"===F):"wrap"===T?.type&&(l.wrap=!0),{text:(0,bt.vU)(tt),directive:l}},"processDirectives");function Ya(tt){const l=da(tt),T=wa(l),F=Xa(T.text),ot=(0,bt.$t)(T.config,F.directive);return{code:tt=na(F.text),title:T.title,config:ot}}function yi(tt){const l=(new TextEncoder).encode(tt),T=Array.from(l,F=>String.fromCodePoint(F)).join("");return btoa(T)}(0,j.K2)(Ya,"preprocessDiagram"),(0,j.K2)(yi,"toBase64");var ln=["foreignobject"],Ji=["dominant-baseline"];function Oi(tt){const l=Ya(tt);return(0,Xt.cL)(),(0,Xt.xA)(l.config??{}),l}function zi(tt,l){return cn.apply(this,arguments)}function cn(){return(cn=(0,lt.A)(function*(tt,l){jt();try{const{code:T,config:F}=Oi(tt);return{diagramType:(yield Rn(T)).type,config:F}}catch(T){if(l?.suppressErrors)return!1;throw T}})).apply(this,arguments)}(0,j.K2)(Oi,"processAndSetConfigs"),(0,j.K2)(zi,"parse");var Ln=(0,j.K2)((tt,l,T=[])=>`\n.${tt} ${l} { ${T.join(" !important; ")} !important; }`,"cssImportantStyles"),Bn=(0,j.K2)((tt,l=new Map)=>{let T="";if(void 0!==tt.themeCSS&&(T+=`\n${tt.themeCSS}`),void 0!==tt.fontFamily&&(T+=`\n:root { --mermaid-font-family: ${tt.fontFamily}}`),void 0!==tt.altFontFamily&&(T+=`\n:root { --mermaid-alt-font-family: ${tt.altFontFamily}}`),l instanceof Map){const Ie=tt.htmlLabels??tt.flowchart?.htmlLabels?["> *","span"]:["rect","polygon","ellipse","circle","path"];l.forEach(Qt=>{(0,br.A)(Qt.styles)||Ie.forEach(Ue=>{T+=Ln(Qt.id,Ue,Qt.styles)}),(0,br.A)(Qt.textStyles)||(T+=Ln(Qt.id,"tspan",(Qt?.textStyles||[]).map(Ue=>Ue.replace("color","fill"))))})}return T},"createCssStyles"),Vn=(0,j.K2)((tt,l,T,F)=>{const ot=Bn(tt,T),_t=(0,Xt.tM)(l,ot,tt.themeVariables);return(0,vr.lK)((0,vr.wE)(`${F}{${_t}}`),vr.As)},"createUserStyles"),hn=(0,j.K2)((tt="",l,T)=>{let F=tt;return!T&&!l&&(F=F.replace(/marker-end="url\([\d+./:=?A-Za-z-]*?#/g,'marker-end="url(#')),F=(0,bt.Sm)(F),F=F.replace(/<br>/g,"<br/>"),F},"cleanUpSvgCode"),Un=(0,j.K2)((tt="",l)=>`<iframe style="width:100%;height:${l?.viewBox?.baseVal?.height?l.viewBox.baseVal.height+"px":"100%"};border:0;margin:0;" src="data:text/html;charset=UTF-8;base64,${yi(`<body style="margin:0">${tt}</body>`)}" sandbox="allow-top-navigation-by-user-activation allow-popups">\n  The "iframe" tag is not supported by your browser.\n</iframe>`,"putIntoIFrame"),tn=(0,j.K2)((tt,l,T,F,ot)=>{const _t=tt.append("div");_t.attr("id",T),F&&_t.attr("style",F);const Ie=_t.append("svg").attr("id",l).attr("width","100%").attr("xmlns","http://www.w3.org/2000/svg");return ot&&Ie.attr("xmlns:xlink",ot),Ie.append("g"),tt},"appendDivSvgG");function Nn(tt,l){return tt.append("iframe").attr("id",l).attr("style","width: 100%; height: 100%;").attr("sandbox","")}(0,j.K2)(Nn,"sandboxedIframe");var xn=(0,j.K2)((tt,l,T,F)=>{tt.getElementById(l)?.remove(),tt.getElementById(T)?.remove(),tt.getElementById(F)?.remove()},"removeExistingElements"),nn=(0,j.K2)(function(){var tt=(0,lt.A)(function*(l,T,F){jt();const ot=Oi(T);T=ot.code;const _t=(0,Xt.zj)();j.Rm.debug(_t),T.length>(_t?.maxTextSize??5e4)&&(T="graph TB;a[Maximum text size in diagram exceeded];style a fill:#faa");const Ie="#"+l,Qt="i"+l,Ue="#"+Qt,yr="d"+l,Dr="#"+yr,aa=(0,j.K2)(()=>{const os=(0,Fe.Ltv)(oa?Ue:Dr).node();os&&"remove"in os&&os.remove()},"removeTempElements");let Nr=(0,Fe.Ltv)("body");const oa="sandbox"===_t.securityLevel,Ca="loose"===_t.securityLevel,ka=_t.fontFamily;if(void 0!==F){if(F&&(F.innerHTML=""),oa){const Ui=Nn((0,Fe.Ltv)(F),Qt);Nr=(0,Fe.Ltv)(Ui.nodes()[0].contentDocument.body),Nr.node().style.margin=0}else Nr=(0,Fe.Ltv)(F);tn(Nr,l,yr,`font-family: ${ka}`,"http://www.w3.org/1999/xlink")}else{if(xn(document,l,yr,Qt),oa){const Ui=Nn((0,Fe.Ltv)("body"),Qt);Nr=(0,Fe.Ltv)(Ui.nodes()[0].contentDocument.body),Nr.node().style.margin=0}else Nr=(0,Fe.Ltv)("body");tn(Nr,l,yr)}let Pa,Za;try{Pa=yield Qe.fromText(T,{title:ot.title})}catch(Ui){if(_t.suppressErrorRendering)throw aa(),Ui;Pa=yield Qe.fromText("error"),Za=Ui}const $a=Nr.select(Dr).node(),Wa=Pa.type,hi=$a.firstChild,ji=hi.firstChild,$n=Pa.renderer.getClasses?.(T,Pa),Tn=Vn(_t,Wa,$n,Ie),Vi=document.createElement("style");Vi.innerHTML=Tn,hi.insertBefore(Vi,ji);try{yield Pa.renderer.draw(T,l,ee.n.version,Pa)}catch(Ui){throw _t.suppressErrorRendering?aa():ze.draw(T,l,ee.n.version),Ui}const an=Nr.select(`${Dr} svg`),Fi=Pa.db.getAccTitle?.(),bn=Pa.db.getAccDescription?.();un(Wa,an,Fi,bn),Nr.select(`[id="${l}"]`).selectAll("foreignobject > *").attr("xmlns","http://www.w3.org/1999/xhtml");let pn=Nr.select(Dr).node().innerHTML;if(j.Rm.debug("config.arrowMarkerAbsolute",_t.arrowMarkerAbsolute),pn=hn(pn,oa,(0,Xt._3)(_t.arrowMarkerAbsolute)),oa){const Ui=Nr.select(Dr+" svg").node();pn=Un(pn,Ui)}else Ca||(pn=zr.A.sanitize(pn,{ADD_TAGS:ln,ADD_ATTR:Ji,HTML_INTEGRATION_POINTS:{foreignobject:!0}}));if(Gr(),Za)throw Za;return aa(),{diagramType:Wa,svg:pn,bindFunctions:Pa.db.bindFunctions}});return function(l,T,F){return tt.apply(this,arguments)}}(),"render");function kn(tt={}){const l=(0,Xt.hH)({},tt);l?.fontFamily&&!l.themeVariables?.fontFamily&&(l.themeVariables||(l.themeVariables={}),l.themeVariables.fontFamily=l.fontFamily),(0,Xt.wZ)(l),l?.theme&&l.theme in Xt.H$?l.themeVariables=Xt.H$[l.theme].getThemeVariables(l.themeVariables):l&&(l.themeVariables=Xt.H$.default.getThemeVariables(l.themeVariables));const T="object"==typeof l?(0,Xt.UU)(l):(0,Xt.Q2)();(0,j.He)(T.logLevel),jt()}(0,j.K2)(kn,"initialize");var Rn=(0,j.K2)((tt,l={})=>{const{code:T}=Ya(tt);return Qe.fromText(T,l)},"getDiagramFromText");function un(tt,l,T,F){Lt(l,tt),Ft(l,T,F,l.attr("id"))}(0,j.K2)(un,"addA11yInfo");var Xi=Object.freeze({render:nn,parse:zi,getDiagramFromText:Rn,initialize:kn,getConfig:Xt.zj,setConfig:Xt.Nk,getSiteConfig:Xt.Q2,updateSiteConfig:Xt.B6,reset:(0,j.K2)(()=>{(0,Xt.cL)()},"reset"),globalReset:(0,j.K2)(()=>{(0,Xt.cL)(Xt.sb)},"globalReset"),defaultConfig:Xt.sb});(0,j.He)((0,Xt.zj)().logLevel),(0,Xt.cL)((0,Xt.zj)());var rn=(0,j.K2)((tt,l,T)=>{j.Rm.warn(tt),(0,bt.dq)(tt)?(T&&T(tt.str,tt.hash),l.push({...tt,message:tt.str,error:tt})):(T&&T(tt),tt instanceof Error&&l.push({str:tt.message,message:tt.message,hash:tt.name,error:tt}))},"handleError"),Yn=(0,j.K2)((0,lt.A)(function*(tt={querySelector:".mermaid"}){try{yield Gt(tt)}catch(l){if((0,bt.dq)(l)&&j.Rm.error(l.str),pe.parseError&&pe.parseError(l),!tt.suppressErrors)throw j.Rm.error("Use the suppressErrors option to suppress these errors"),l}}),"run"),Gt=(0,j.K2)((0,lt.A)(function*({postRenderCallback:tt,querySelector:l,nodes:T}={querySelector:".mermaid"}){const F=Xi.getConfig();let ot;if(j.Rm.debug((tt?"":"No ")+"Callback function found"),T)ot=T;else{if(!l)throw new Error("Nodes and querySelector are both undefined");ot=document.querySelectorAll(l)}j.Rm.debug(`Found ${ot.length} diagrams`),void 0!==F?.startOnLoad&&(j.Rm.debug("Start On Load: "+F?.startOnLoad),Xi.updateSiteConfig({startOnLoad:F?.startOnLoad}));const _t=new bt._K.InitIDGenerator(F.deterministicIds,F.deterministicIDSeed);let Ie;const Qt=[];for(const Ue of Array.from(ot)){if(j.Rm.info("Rendering diagram: "+Ue.id),Ue.getAttribute("data-processed"))continue;Ue.setAttribute("data-processed","true");const yr=`mermaid-${_t.next()}`;Ie=Ue.innerHTML,Ie=(0,fr.T)(bt._K.entityDecode(Ie)).trim().replace(/<br\s*\/?>/gi,"<br/>");const Dr=bt._K.detectInit(Ie);Dr&&j.Rm.debug("Detected early reinit: ",Dr);try{const{svg:aa,bindFunctions:Nr}=yield Q(yr,Ie,Ue);Ue.innerHTML=aa,tt&&(yield tt(yr)),Nr&&Nr(Ue)}catch(aa){rn(aa,Qt,pe.parseError)}}if(Qt.length>0)throw Qt[0]}),"runThrowsErrors"),d=(0,j.K2)(function(tt){Xi.initialize(tt)},"initialize"),ht=(0,j.K2)(function(){var tt=(0,lt.A)(function*(l,T,F){j.Rm.warn("mermaid.init is deprecated. Please use run instead."),l&&d(l);const ot={postRenderCallback:F,querySelector:".mermaid"};"string"==typeof T?ot.querySelector=T:T&&(ot.nodes=T instanceof HTMLElement?[T]:T),yield Yn(ot)});return function(l,T,F){return tt.apply(this,arguments)}}(),"init"),Zt=(0,j.K2)(function(){var tt=(0,lt.A)(function*(l,{lazyLoad:T=!0}={}){jt(),(0,Xt.Xd)(...l),!1===T&&(yield Ve())});return function(l){return tt.apply(this,arguments)}}(),"registerExternalDiagrams"),Tt=(0,j.K2)(function(){if(pe.startOnLoad){const{startOnLoad:tt}=Xi.getConfig();tt&&pe.run().catch(l=>j.Rm.error("Mermaid failed to initialize",l))}},"contentLoaded");typeof document<"u"&&window.addEventListener("load",Tt,!1);var vt=(0,j.K2)(function(tt){pe.parseError=tt},"setParseErrorHandler"),de=[],nt=!1,At=(0,j.K2)((0,lt.A)(function*(){if(!nt){for(nt=!0;de.length>0;){const tt=de.shift();if(tt)try{yield tt()}catch(l){j.Rm.error("Error executing queue",l)}}nt=!1}}),"executeQueue"),J=(0,j.K2)(function(){var tt=(0,lt.A)(function*(l,T){return new Promise((F,ot)=>{de.push((0,j.K2)(()=>new Promise((Ie,Qt)=>{Xi.parse(l,T).then(Ue=>{Ie(Ue),F(Ue)},Ue=>{j.Rm.error("Error parsing",Ue),pe.parseError?.(Ue),Qt(Ue),ot(Ue)})}),"performCall")),At().catch(ot)})});return function(l,T){return tt.apply(this,arguments)}}(),"parse"),Q=(0,j.K2)((tt,l,T)=>new Promise((F,ot)=>{de.push((0,j.K2)(()=>new Promise((Ie,Qt)=>{Xi.render(tt,l,T).then(Ue=>{Ie(Ue),F(Ue)},Ue=>{j.Rm.error("Error parsing",Ue),pe.parseError?.(Ue),Qt(Ue),ot(Ue)})}),"performCall")),At().catch(ot)}),"render"),pe={startOnLoad:!0,mermaidAPI:Xi,parse:J,render:Q,init:ht,run:Yn,registerExternalDiagrams:Zt,registerLayoutLoaders:Rt.sO,initialize:d,parseError:void 0,contentLoaded:Tt,setParseErrorHandler:vt,detectType:Xt.Ch,registerIconPacks:Ye.pC,getRegisteredDiagramsMetadata:(0,j.K2)(()=>Object.keys(Xt.mW).map(tt=>({id:tt})),"getRegisteredDiagramsMetadata")},Ae=pe;
/*! Check if previously processed */
/*!
       * Wait for document loaded before starting the execution
       */},4787:(ti,_r)=>{"use strict";Object.defineProperty(_r,"__esModule",{value:!0}),_r.BLANK_URL=_r.relativeFirstCharacters=_r.whitespaceEscapeCharsRegex=_r.urlSchemeRegex=_r.ctrlCharactersRegex=_r.htmlCtrlEntityRegex=_r.htmlEntitiesRegex=_r.invalidProtocolRegex=void 0,_r.invalidProtocolRegex=/^([^\w]*)(javascript|data|vbscript)/im,_r.htmlEntitiesRegex=/&#(\w+)(^\w|;)?/g,_r.htmlCtrlEntityRegex=/&(newline|tab);/gi,_r.ctrlCharactersRegex=/[\u0000-\u001F\u007F-\u009F\u2000-\u200D\uFEFF]/gim,_r.urlSchemeRegex=/^.+(:|&colon;)/gim,_r.whitespaceEscapeCharsRegex=/(\\|%5[cC])((%(6[eE]|72|74))|[nrt])/g,_r.relativeFirstCharacters=[".","/"],_r.BLANK_URL="about:blank"},5675:(ti,_r,B)=>{"use strict";B.d(_r,{A:()=>L});var lt=B(32303),ee=B(40622),L=(0,lt.K2)((D,Rt)=>{let dt;return"sandbox"===Rt&&(dt=(0,ee.Ltv)("#i"+D)),(0,ee.Ltv)("sandbox"===Rt?dt.nodes()[0].contentDocument.body:"body").select(`[id="${D}"]`)},"getDiagramElement")},8026:(ti,_r,B)=>{"use strict";B.r(_r),B.d(_r,{render:()=>fr});var lt=B(89204),ee=B(32303),L=B(15363),D=B(76805),Rt=B(40622);function dt(Fe,vr){Fe.forEach(zr=>{const br={id:zr.id,labelText:zr.label,height:zr.height,width:zr.width,padding:zr.padding??0};Object.keys(zr).forEach(mr=>{["id","label","height","width","padding","x","y"].includes(mr)||(br[mr]=zr[mr])}),vr.add({group:"nodes",data:br,position:{x:zr.x??0,y:zr.y??0}})})}function q(Fe,vr){Fe.forEach(zr=>{const br={id:zr.id,source:zr.start,target:zr.end};Object.keys(zr).forEach(mr=>{["id","start","end"].includes(mr)||(br[mr]=zr[mr])}),vr.add({group:"edges",data:br})})}function A(Fe){return new Promise(vr=>{const zr=(0,Rt.Ltv)("body").append("div").attr("id","cy").attr("style","display:none"),br=(0,L.A)({container:document.getElementById("cy"),style:[{selector:"edge",style:{"curve-style":"bezier"}}]});zr.remove(),dt(Fe.nodes,br),q(Fe.edges,br),br.nodes().forEach(function(Er){Er.layoutDimensions=()=>{const Lr=Er.data();return{w:Lr.width,h:Lr.height}}}),br.layout({name:"cose-bilkent",quality:"proof",styleEnabled:!1,animate:!1}).run(),br.ready(Er=>{ee.Rm.info("Cytoscape ready",Er),vr(br)})})}function $t(Fe){return Fe.nodes().map(vr=>{const zr=vr.data(),br=vr.position(),mr={id:zr.id,x:br.x,y:br.y};return Object.keys(zr).forEach(Er=>{"id"!==Er&&(mr[Er]=zr[Er])}),mr})}function yt(Fe){return Fe.edges().map(vr=>{const zr=vr.data(),br=vr._private.rscratch,mr={id:zr.id,source:zr.source,target:zr.target,startX:br.startX,startY:br.startY,midX:br.midX,midY:br.midY,endX:br.endX,endY:br.endY};return Object.keys(zr).forEach(Er=>{["id","source","target"].includes(Er)||(mr[Er]=zr[Er])}),mr})}function Ye(Fe,vr){return bt.apply(this,arguments)}function bt(){return(bt=(0,lt.A)(function*(Fe,vr){ee.Rm.debug("Starting cose-bilkent layout algorithm");try{Xt(Fe);const zr=yield A(Fe),br=$t(zr),mr=yt(zr);return ee.Rm.debug(`Layout completed: ${br.length} nodes, ${mr.length} edges`),{nodes:br,edges:mr}}catch(zr){throw ee.Rm.error("Error in cose-bilkent layout algorithm:",zr),zr}})).apply(this,arguments)}function Xt(Fe){if(!Fe)throw new Error("Layout data is required");if(!Fe.config)throw new Error("Configuration is required in layout data");if(!Fe.rootNode)throw new Error("Root node is required");if(!Fe.nodes||!Array.isArray(Fe.nodes))throw new Error("No nodes found in layout data");if(!Array.isArray(Fe.edges))throw new Error("Edges array is required in layout data");return!0}L.A.use(D),(0,ee.K2)(dt,"addNodes"),(0,ee.K2)(q,"addEdges"),(0,ee.K2)(A,"createCytoscapeInstance"),(0,ee.K2)($t,"extractPositionedNodes"),(0,ee.K2)(yt,"extractPositionedEdges"),(0,ee.K2)(Ye,"executeCoseBilkentLayout"),(0,ee.K2)(Xt,"validateLayoutData");var fr=(0,ee.K2)(function(){var Fe=(0,lt.A)(function*(vr,zr,{insertCluster:br,insertEdge:mr,insertEdgeLabel:Er,insertMarkers:Lr,insertNode:Ar,log:ge,positionEdgeLabel:Br},{}){const W={},ft={},Bt=zr.select("g");Lr(Bt,vr.markers,vr.type,vr.diagramId);const _e=Bt.insert("g").attr("class","subgraphs"),Z=Bt.insert("g").attr("class","edgePaths"),ae=Bt.insert("g").attr("class","edgeLabels"),S=Bt.insert("g").attr("class","nodes");ge.debug("Inserting nodes into DOM for dimension calculation"),yield Promise.all(vr.nodes.map(function(){var qt=(0,lt.A)(function*(V){if(V.isGroup){const pt={...V};ft[V.id]=pt,W[V.id]=pt,yield br(_e,V)}else{const pt={...V};W[V.id]=pt;const H=yield Ar(S,V,{config:vr.config,dir:vr.direction||"TB"}),Nt=H.node().getBBox();pt.width=Nt.width,pt.height=Nt.height,pt.domId=H,ge.debug(`Node ${V.id} dimensions: ${Nt.width}x${Nt.height}`)}});return function(V){return qt.apply(this,arguments)}}())),ge.debug("Running cose-bilkent layout algorithm");const re={...vr,nodes:vr.nodes.map(qt=>{const V=W[qt.id];return{...qt,width:V.width,height:V.height}})},Pt=yield Ye(re,vr.config);ge.debug("Positioning nodes based on layout results"),Pt.nodes.forEach(qt=>{const V=W[qt.id];V?.domId&&(V.domId.attr("transform",`translate(${qt.x}, ${qt.y})`),V.x=qt.x,V.y=qt.y,ge.debug(`Positioned node ${V.id} at center (${qt.x}, ${qt.y})`))}),Pt.edges.forEach(qt=>{const V=vr.edges.find(pt=>pt.id===qt.id);V&&(V.points=[{x:qt.startX,y:qt.startY},{x:qt.midX,y:qt.midY},{x:qt.endX,y:qt.endY}])}),ge.debug("Inserting and positioning edges"),yield Promise.all(vr.edges.map(function(){var qt=(0,lt.A)(function*(V){yield Er(ae,V);const H=W[V.start??""],Nt=W[V.end??""];if(H&&Nt){const wt=Pt.edges.find(Wt=>Wt.id===V.id);if(wt){ge.debug("APA01 positionedEdge",wt);const Wt={...V},xe=mr(Z,Wt,ft,vr.type,H,Nt,vr.diagramId);Br(Wt,xe)}else{const Wt={...V,points:[{x:H.x||0,y:H.y||0},{x:Nt.x||0,y:Nt.y||0}]},xe=mr(Z,Wt,ft,vr.type,H,Nt,vr.diagramId);Br(Wt,xe)}}});return function(V){return qt.apply(this,arguments)}}())),ge.debug("Cose-bilkent rendering completed")});return function(vr,zr,br,mr){return Fe.apply(this,arguments)}}(),"render")},8086:(ti,_r,B)=>{"use strict";B.d(_r,{P:()=>L});var lt=B(79006),ee=B(32303),L=(0,ee.K2)((dt,q,A,$t)=>{dt.attr("class",A);const{width:yt,height:Ye,x:bt,y:Xt}=D(dt,q);(0,lt.a$)(dt,Ye,yt,$t);const j=Rt(bt,Xt,yt,Ye,q);dt.attr("viewBox",j),ee.Rm.debug(`viewBox configured: ${j} with padding: ${q}`)},"setupViewPortForSVG"),D=(0,ee.K2)((dt,q)=>{const A=dt.node()?.getBBox()||{width:0,height:0,x:0,y:0};return{width:A.width+2*q,height:A.height+2*q,x:A.x,y:A.y}},"calculateDimensionsWithPadding"),Rt=(0,ee.K2)((dt,q,A,$t,yt)=>`${dt-yt} ${q-yt} ${A} ${$t}`,"createViewBox")},15363:(ti,_r,B)=>{"use strict";function lt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=Array(t);r<t;r++)a[r]=e[r];return a}function D(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function dt(e,t,r){return t&&function Rt(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,Fe(a.key),a)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function q(e,t){var r=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=zr(e))||t){r&&(e=r);var a=0,i=function(){};return{s:i,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(u){throw u},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,s=!0,o=!1;return{s:function(){r=r.call(e)},n:function(){var u=r.next();return s=u.done,u},e:function(u){o=!0,n=u},f:function(){try{s||null==r.return||r.return()}finally{if(o)throw n}}}}function A(e,t,r){return(t=Fe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Xt(e,t){return function ee(e){if(Array.isArray(e))return e}(e)||function yt(e,t){var r=null==e?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var a,i,n,s,o=[],u=!0,h=!1;try{if(n=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(a=n.call(r)).done)&&(o.push(a.value),o.length!==t);u=!0);}catch(f){h=!0,i=f}finally{try{if(!u&&null!=r.return&&(s=r.return(),Object(s)!==s))return}finally{if(h)throw i}}return o}}(e,t)||zr(e,t)||function Ye(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(e){return function L(e){if(Array.isArray(e))return lt(e)}(e)||function $t(e){if(typeof Symbol<"u"&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||zr(e)||function bt(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Fe(e){var t=function fr(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t);if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}function vr(e){return(vr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function zr(e,t){if(e){if("string"==typeof e)return lt(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?lt(e,t):void 0}}B.d(_r,{A:()=>Ps});var Kt,Pe,me,ce,Te,er,Ir,Ee,nr,te,Le,tr,y,E,b,z,x,C,$,ct,Ut,Ht,ue,je,Cr,cr,$e,He,br=typeof window>"u"?null:window,mr=br?br.navigator:null,Er=vr(""),Lr=vr({}),Ar=vr(function(){}),ge=typeof HTMLElement>"u"?"undefined":vr(HTMLElement),Br=function(t){return t&&t.instanceString&&W(t.instanceString)?t.instanceString():null},Ge=function(t){return null!=t&&vr(t)==Er},W=function(t){return null!=t&&vr(t)===Ar},ft=function(t){return!re(t)&&(Array.isArray?Array.isArray(t):null!=t&&t instanceof Array)},Bt=function(t){return null!=t&&vr(t)===Lr&&!ft(t)&&t.constructor===Object},Z=function(t){return null!=t&&vr(t)===vr(1)&&!isNaN(t)},S=function(t){if("undefined"!==ge)return null!=t&&t instanceof HTMLElement},re=function(t){return Pt(t)||qt(t)},Pt=function(t){return"collection"===Br(t)&&t._private.single},qt=function(t){return"collection"===Br(t)&&!t._private.single},V=function(t){return"core"===Br(t)},pt=function(t){return"stylesheet"===Br(t)},Nt=function(t){return null==t||!(""!==t&&!t.match(/^\s+$/))},xe=function(t){return function(t){return null!=t&&vr(t)===Lr}(t)&&W(t.then)},Re=function(t,r){r||(r=function(){if(1===arguments.length)return arguments[0];if(0===arguments.length)return"undefined";for(var n=[],s=0;s<arguments.length;s++)n.push(arguments[s]);return n.join("$")});var a=function(){var o,s=arguments,u=r.apply(this,s),h=a.cache;return(o=h[u])||(o=h[u]=t.apply(this,s)),o};return a.cache={},a},oe=Re(function(e){return e.replace(/([A-Z])/g,function(t){return"-"+t.toLowerCase()})}),qe=Re(function(e){return e.replace(/(-\w)/g,function(t){return t[1].toUpperCase()})}),We=Re(function(e,t){return e+t[0].toUpperCase()+t.substring(1)},function(e,t){return e+"$"+t}),Ct=function(t){return Nt(t)?t:t.charAt(0).toUpperCase()+t.substring(1)},St=function(t,r){return t.slice(-1*r.length)===r},R="(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))",O="rgb[a]?\\(("+R+"[%]?)\\s*,\\s*("+R+"[%]?)\\s*,\\s*("+R+"[%]?)(?:\\s*,\\s*("+R+"))?\\)",et="rgb[a]?\\((?:"+R+"[%]?)\\s*,\\s*(?:"+R+"[%]?)\\s*,\\s*(?:"+R+"[%]?)(?:\\s*,\\s*(?:"+R+"))?\\)",xt="hsl[a]?\\(("+R+")\\s*,\\s*("+R+"[%])\\s*,\\s*("+R+"[%])(?:\\s*,\\s*("+R+"))?\\)",it="hsl[a]?\\((?:"+R+")\\s*,\\s*(?:"+R+"[%])\\s*,\\s*(?:"+R+"[%])(?:\\s*,\\s*(?:"+R+"))?\\)",ut=function(t,r){return t<r?-1:t>r?1:0},G=null!=Object.assign?Object.assign.bind(Object):function(e){for(var t=arguments,r=1;r<t.length;r++){var a=t[r];if(null!=a)for(var i=Object.keys(a),n=0;n<i.length;n++){var s=i[n];e[s]=a[s]}}return e},fe=function(t){return(ft(t)?t:null)||function(t){return Be[t.toLowerCase()]}(t)||function(t){if((4===t.length||7===t.length)&&"#"===t[0]){var a,i,n,s=16;return 4===t.length?(a=parseInt(t[1]+t[1],s),i=parseInt(t[2]+t[2],s),n=parseInt(t[3]+t[3],s)):(a=parseInt(t[1]+t[2],s),i=parseInt(t[3]+t[4],s),n=parseInt(t[5]+t[6],s)),[a,i,n]}}(t)||function(t){var r,a=new RegExp("^"+O+"$").exec(t);if(a){r=[];for(var i=[],n=1;n<=3;n++){var s=a[n];if("%"===s[s.length-1]&&(i[n]=!0),s=parseFloat(s),i[n]&&(s=s/100*255),s<0||s>255)return;r.push(Math.floor(s))}if((i[1]||i[2]||i[3])&&!(i[1]&&i[2]&&i[3]))return;var h=a[4];if(void 0!==h){if((h=parseFloat(h))<0||h>1)return;r.push(h)}}return r}(t)||function(t){var r,a,i,n,s,o,u,h;function f(_,U,I){return I<0&&(I+=1),I>1&&(I-=1),I<1/6?_+6*(U-_)*I:I<.5?U:I<2/3?_+(U-_)*(2/3-I)*6:_}var v=new RegExp("^"+xt+"$").exec(t);if(v){if((a=parseInt(v[1]))<0?a=(360- -1*a%360)%360:a>360&&(a%=360),a/=360,(i=parseFloat(v[2]))<0||i>100||(i/=100,(n=parseFloat(v[3]))<0||n>100)||(n/=100,void 0!==(s=v[4])&&((s=parseFloat(s))<0||s>1)))return;if(0===i)o=u=h=Math.round(255*n);else{var m=n<.5?n*(1+i):n+i-n*i,k=2*n-m;o=Math.round(255*f(k,m,a+1/3)),u=Math.round(255*f(k,m,a)),h=Math.round(255*f(k,m,a-1/3))}r=[o,u,h,s]}return r}(t)},Be={transparent:[0,0,0,0],aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},Ze=function(t){for(var r=t.map,a=t.keys,i=a.length,n=0;n<i;n++){var s=a[n];if(Bt(s))throw Error("Tried to set map with object key");n<a.length-1?(null==r[s]&&(r[s]={}),r=r[s]):r[s]=t.value}},ye=function(t){for(var r=t.map,a=t.keys,i=a.length,n=0;n<i;n++){var s=a[n];if(Bt(s))throw Error("Tried to get map with object key");if(null==(r=r[s]))return r}return r},kr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ur(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function ir(){return Pe?Kt:(Pe=1,Kt=function e(t){var r=typeof t;return null!=t&&("object"==r||"function"==r)})}function Xe(){if(er)return Te;er=1;var e=function ke(){return ce?me:(ce=1,me="object"==typeof kr&&kr&&kr.Object===Object&&kr)}(),t="object"==typeof self&&self&&self.Object===Object&&self,r=e||t||Function("return this")();return Te=r}function P(){if(E)return y;E=1;var e=Xe();return y=e.Symbol}function kt(){if(ct)return $;ct=1;var e=P(),t=function p(){if(z)return b;z=1;var e=P(),t=Object.prototype,r=t.hasOwnProperty,a=t.toString,i=e?e.toStringTag:void 0;return b=function n(s){var o=r.call(s,i),u=s[i];try{s[i]=void 0;var h=!0}catch{}var f=a.call(s);return h&&(o?s[i]=u:delete s[i]),f}}(),r=function w(){if(C)return x;C=1;var t=Object.prototype.toString;return x=function r(a){return t.call(a)}}(),n=e?e.toStringTag:void 0;return $=function s(o){return null==o?void 0===o?"[object Undefined]":"[object Null]":n&&n in Object(o)?t(o):r(o)}}function ze(){if(je)return ue;je=1;var e=kt(),t=function zt(){return Ht?Ut:(Ht=1,Ut=function e(t){return null!=t&&"object"==typeof t})}();return ue=function a(i){return"symbol"==typeof i||t(i)&&"[object Symbol]"==e(i)}}var wr=function Pr(){if(He)return $e;He=1;var e=ir(),t=function qr(){if(Ee)return Ir;Ee=1;var e=Xe();return Ir=function(){return e.Date.now()}}(),r=function sr(){if(cr)return Cr;cr=1;var e=function g(){if(tr)return Le;tr=1;var e=function ne(){if(te)return nr;te=1;var e=/\s/;return nr=function t(r){for(var a=r.length;a--&&e.test(r.charAt(a)););return a}}(),t=/^\s+/;return Le=function r(a){return a&&a.slice(0,e(a)+1).replace(t,"")}}(),t=ir(),r=ze(),i=/^[-+]0x[0-9a-f]+$/i,n=/^0b[01]+$/i,s=/^0o[0-7]+$/i,o=parseInt;return Cr=function u(h){if("number"==typeof h)return h;if(r(h))return NaN;if(t(h)){var f="function"==typeof h.valueOf?h.valueOf():h;h=t(f)?f+"":f}if("string"!=typeof h)return 0===h?h:+h;h=e(h);var v=n.test(h);return v||s.test(h)?o(h.slice(2),v?2:8):i.test(h)?NaN:+h}}(),i=Math.max,n=Math.min;return $e=function s(o,u,h){var f,v,m,k,_,U,I=0,K=!1,Y=!1,X=!0;if("function"!=typeof o)throw new TypeError("Expected a function");function mt(Ne){var Je=f,dr=v;return f=v=void 0,I=Ne,k=o.apply(dr,Je)}function Yt(Ne){var Je=Ne-U;return void 0===U||Je>=u||Je<0||Y&&Ne-I>=m}function he(){var Ne=t();if(Yt(Ne))return be(Ne);_=setTimeout(he,function se(Ne){var gr=u-(Ne-U);return Y?n(gr,m-(Ne-I)):gr}(Ne))}function be(Ne){return _=void 0,X&&f?mt(Ne):(f=v=void 0,k)}function Oe(){var Ne=t(),Je=Yt(Ne);if(f=arguments,v=this,U=Ne,Je){if(void 0===_)return function ie(Ne){return I=Ne,_=setTimeout(he,u),K?mt(Ne):k}(U);if(Y)return clearTimeout(_),_=setTimeout(he,u),mt(U)}return void 0===_&&(_=setTimeout(he,u)),k}return u=r(u)||0,e(h)&&(K=!!h.leading,m=(Y="maxWait"in h)?i(r(h.maxWait)||0,u):m,X="trailing"in h?!!h.trailing:X),Oe.cancel=function Se(){void 0!==_&&clearTimeout(_),I=0,f=U=v=_=void 0},Oe.flush=function De(){return void 0===_?k:be(t())},Oe}}(),Vr=ur(wr),xr=br?br.performance:null,Ba=xr&&xr.now?function(){return xr.now()}:function(){return Date.now()},Zr=function(){if(br){if(br.requestAnimationFrame)return function(e){br.requestAnimationFrame(e)};if(br.mozRequestAnimationFrame)return function(e){br.mozRequestAnimationFrame(e)};if(br.webkitRequestAnimationFrame)return function(e){br.webkitRequestAnimationFrame(e)};if(br.msRequestAnimationFrame)return function(e){br.msRequestAnimationFrame(e)}}return function(e){e&&setTimeout(function(){e(Ba())},1e3/60)}}(),Oa=function(t){return Zr(t)},Qr=Ba,ra=9261,Rr=5381,Tr=function(t){for(var i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ra;!(i=t.next()).done;)a=65599*a+i.value|0;return a},N=function(t){return 65599*(arguments.length>1&&void 0!==arguments[1]?arguments[1]:ra)+t|0},Vt=function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Rr;return(r<<5)+r+t|0},rr=function(t){return 2097152*t[0]+t[1]},ia=function(t,r){return[N(t[0],r[0]),Vt(t[1],r[1])]},hr=function(t,r){var a={value:0,done:!1},i=0,n=t.length;return Tr({next:function(){return i<n?a.value=t[i++]:a.done=!0,a}},r)},ga=function(t,r){var a={value:0,done:!1},i=0,n=t.length;return Tr({next:function(){return i<n?a.value=t.charCodeAt(i++):a.done=!0,a}},r)},or=function(){return _a(arguments)},_a=function(t){for(var r,a=0;a<t.length;a++){var i=t[a];r=0===a?ga(i):ga(i,r)}return r};var ca=!0,ha=null!=console.warn,Yr=null!=console.trace,Fa=Number.MAX_SAFE_INTEGER||9007199254740991,pr=function(){return!0},Va=function(){return!1},lr=function(){return 0},qa=function(){},za=function(t){throw new Error(t)},ja=function(t){if(void 0===t)return ca;ca=!!t},Sa=function(t){ja()&&(ha?console.warn(t):(console.log(t),Yr&&console.trace()))},Ka=function(t){return null==t?t:ft(t)?t.slice():Bt(t)?function(t){return G({},t)}(t):t},di=function(t,r){for(r=t="";t++<36;r+=51*t&52?(15^t?8^Math.random()*(20^t?16:4):4).toString(16):"-");return r},we={},Li=function(){return we},Me=function(t){var r=Object.keys(t);return function(a){for(var i={},n=0;n<r.length;n++){var s=r[n],o=a?.[s];i[s]=void 0===o?t[s]:o}return i}},at=function(t,r,a){for(var i=t.length-1;i>=0;i--)t[i]===r&&t.splice(i,1)},Dt=function(t){t.splice(0,t.length)},jt=function(t,r,a){return a&&(r=We(a,r)),t[r]},Ve=function(t,r,a,i){a&&(r=We(a,r)),t[r]=i},Lt=typeof Map<"u"?Map:function(){return dt(function e(){D(this,e),this._obj={}},[{key:"set",value:function(r,a){return this._obj[r]=a,this}},{key:"delete",value:function(r){return this._obj[r]=void 0,this}},{key:"clear",value:function(){this._obj={}}},{key:"has",value:function(r){return void 0!==this._obj[r]}},{key:"get",value:function(r){return this._obj[r]}}])}(),Qe=function(){return dt(function e(t){if(D(this,e),this._obj=Object.create(null),this.size=0,null!=t){var r;r=null!=t.instanceString&&t.instanceString()===this.instanceString()?t.toArray():t;for(var a=0;a<r.length;a++)this.add(r[a])}},[{key:"instanceString",value:function(){return"set"}},{key:"add",value:function(r){var a=this._obj;1!==a[r]&&(a[r]=1,this.size++)}},{key:"delete",value:function(r){var a=this._obj;1===a[r]&&(a[r]=0,this.size--)}},{key:"clear",value:function(){this._obj=Object.create(null)}},{key:"has",value:function(r){return 1===this._obj[r]}},{key:"toArray",value:function(){var r=this;return Object.keys(this._obj).filter(function(a){return r.has(a)})}},{key:"forEach",value:function(r,a){return this.toArray().forEach(r,a)}}])}(),ta="undefined"!==(typeof Set>"u"?"undefined":vr(Set))?Set:Qe,Gr=function(t,r){var a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(void 0!==t&&void 0!==r&&V(t)){var i=r.group;if(null==i&&(i=r.data&&null!=r.data.source&&null!=r.data.target?"edges":"nodes"),"nodes"===i||"edges"===i){this.length=1,this[0]=this;var n=this._private={cy:t,single:!0,data:r.data||{},position:r.position||{x:0,y:0},autoWidth:void 0,autoHeight:void 0,autoPadding:void 0,compoundBoundsClean:!1,listeners:[],group:i,style:{},rstyle:{},styleCxts:[],styleKeys:{},removed:!0,selected:!!r.selected,selectable:void 0===r.selectable||!!r.selectable,locked:!!r.locked,grabbed:!1,grabbable:void 0===r.grabbable||!!r.grabbable,pannable:void 0===r.pannable?"edges"===i:!!r.pannable,active:!1,classes:new ta,animation:{current:[],queue:[]},rscratch:{},scratch:r.scratch||{},edges:[],children:[],parent:r.parent&&r.parent.isNode()?r.parent:null,traversalCache:{},backgrounding:!1,bbCache:null,bbCacheShift:{x:0,y:0},bodyBounds:null,overlayBounds:null,labelBounds:{all:null,source:null,target:null,main:null},arrowBounds:{source:null,target:null,"mid-source":null,"mid-target":null}};if(null==n.position.x&&(n.position.x=0),null==n.position.y&&(n.position.y=0),r.renderedPosition){var s=r.renderedPosition,o=t.pan(),u=t.zoom();n.position={x:(s.x-o.x)/u,y:(s.y-o.y)/u}}var h=[];ft(r.classes)?h=r.classes:Ge(r.classes)&&(h=r.classes.split(/\s+/));for(var f=0,v=h.length;f<v;f++){var m=h[f];!m||""===m||n.classes.add(m)}this.createEmitter(),(void 0===a||a)&&this.restore();var k=r.style||r.css;k&&(Sa("Setting a `style` bypass at element creation should be done only when absolutely necessary.  Try to use the stylesheet instead."),this.style(k))}else za("An element must be of type `nodes` or `edges`; you specified `"+i+"`")}else za("An element must have a core reference and parameters set")},na=function(t){return t={bfs:t.bfs||!t.dfs,dfs:t.dfs||!t.bfs},function(a,i,n){var s;Bt(a)&&!re(a)&&(a=(s=a).roots||s.root,i=s.visit,n=s.directed),n=2!==arguments.length||W(i)?n:i,i=W(i)?i:function(){};for(var U,o=this._private.cy,u=a=Ge(a)?this.filter(a):a,h=[],f=[],v={},m={},k={},_=0,I=this.byGroup(),K=I.nodes,Y=I.edges,X=0;X<u.length;X++){var mt=u[X],ie=mt.id();mt.isNode()&&(h.unshift(mt),t.bfs&&(k[ie]=!0,f.push(mt)),m[ie]=0)}for(var Yt,se=function(){var Ne=t.bfs?h.shift():h.pop(),Je=Ne.id();if(t.dfs){if(k[Je])return 0;k[Je]=!0,f.push(Ne)}var jr,dr=m[Je],gr=v[Je],ar=null!=gr?gr.source():null,Sr=null!=gr?gr.target():null,Ur=null==gr?void 0:Ne.same(ar)?Sr[0]:ar[0];if(!0===(jr=i(Ne,gr,Ur,_++,dr)))return U=Ne,1;if(!1===jr)return 1;for(var Mr=Ne.connectedEdges().filter(function(Aa){return(!n||Aa.source().same(Ne))&&Y.has(Aa)}),Wr=0;Wr<Mr.length;Wr++){var pa=Mr[Wr],Ea=pa.connectedNodes().filter(function(Aa){return!Aa.same(Ne)&&K.has(Aa)}),va=Ea.id();0!==Ea.length&&!k[va]&&(h.push(Ea=Ea[0]),t.bfs&&(k[va]=!0,f.push(Ea)),v[va]=pa,m[va]=m[Je]+1)}};0!==h.length&&(0===(Yt=se())||1!==Yt););for(var he=o.collection(),be=0;be<f.length;be++){var Se=f[be],De=v[Se.id()];null!=De&&he.push(De),he.push(Se)}return{path:o.collection(he),found:o.collection(U)}}},La={breadthFirstSearch:na({bfs:!0}),depthFirstSearch:na({dfs:!0})};La.bfs=La.breadthFirstSearch,La.dfs=La.depthFirstSearch;var Xa,yi,Ei,da={exports:{}},wa=da.exports;var cn,Or=ur(function mi(){return Ei||(Ei=1,yi=function Ya(){return Xa||(Xa=1,e=da,function(){var r,a,i,n,s,o,u,h,f,v,m,k,_,U,I;i=Math.floor,v=Math.min,a=function(K,Y){return K<Y?-1:K>Y?1:0},f=function(K,Y,X,mt,ie){var se;if(null==X&&(X=0),null==ie&&(ie=a),X<0)throw new Error("lo must be non-negative");for(null==mt&&(mt=K.length);X<mt;)ie(Y,K[se=i((X+mt)/2)])<0?mt=se:X=se+1;return[].splice.apply(K,[X,X-X].concat(Y)),Y},o=function(K,Y,X){return null==X&&(X=a),K.push(Y),U(K,0,K.length-1,X)},s=function(K,Y){var X,mt;return null==Y&&(Y=a),X=K.pop(),K.length?(mt=K[0],K[0]=X,I(K,0,Y)):mt=X,mt},h=function(K,Y,X){var mt;return null==X&&(X=a),mt=K[0],K[0]=Y,I(K,0,X),mt},u=function(K,Y,X){var mt;return null==X&&(X=a),K.length&&X(K[0],Y)<0&&(Y=(mt=[K[0],Y])[0],K[0]=mt[1],I(K,0,X)),Y},n=function(K,Y){var mt,ie,se,Yt,he;for(null==Y&&(Y=a),Yt=[],mt=0,ie=(se=function(){he=[];for(var be=0,Se=i(K.length/2);0<=Se?be<Se:be>Se;0<=Se?be++:be--)he.push(be);return he}.apply(this).reverse()).length;mt<ie;mt++)Yt.push(I(K,se[mt],Y));return Yt},_=function(K,Y,X){var mt;if(null==X&&(X=a),-1!==(mt=K.indexOf(Y)))return U(K,0,mt,X),I(K,mt,X)},m=function(K,Y,X){var ie,se,Yt,he;if(null==X&&(X=a),!(ie=K.slice(0,Y)).length)return ie;for(n(ie,X),se=0,Yt=(he=K.slice(Y)).length;se<Yt;se++)u(ie,he[se],X);return ie.sort(X).reverse()},k=function(K,Y,X){var mt,ie,se,Yt,he,be,Se,De,Oe;if(null==X&&(X=a),10*Y<=K.length){if(!(se=K.slice(0,Y).sort(X)).length)return se;for(ie=se[se.length-1],Yt=0,be=(Se=K.slice(Y)).length;Yt<be;Yt++)X(mt=Se[Yt],ie)<0&&(f(se,mt,0,null,X),se.pop(),ie=se[se.length-1]);return se}for(n(K,X),Oe=[],he=0,De=v(Y,K.length);0<=De?he<De:he>De;0<=De?++he:--he)Oe.push(s(K,X));return Oe},U=function(K,Y,X,mt){var ie,se,Yt;for(null==mt&&(mt=a),ie=K[X];X>Y&&mt(ie,se=K[Yt=X-1>>1])<0;)K[X]=se,X=Yt;return K[X]=ie},I=function(K,Y,X){var mt,ie,se,Yt,he;for(null==X&&(X=a),ie=K.length,he=Y,se=K[Y],mt=2*Y+1;mt<ie;)(Yt=mt+1)<ie&&!(X(K[mt],K[Yt])<0)&&(mt=Yt),K[Y]=K[mt],mt=2*(Y=mt)+1;return K[Y]=se,U(K,he,Y,X)},r=function(){function K(Y){this.cmp=Y??a,this.nodes=[]}return K.push=o,K.pop=s,K.replace=h,K.pushpop=u,K.heapify=n,K.updateItem=_,K.nlargest=m,K.nsmallest=k,K.prototype.push=function(Y){return o(this.nodes,Y,this.cmp)},K.prototype.pop=function(){return s(this.nodes,this.cmp)},K.prototype.peek=function(){return this.nodes[0]},K.prototype.contains=function(Y){return-1!==this.nodes.indexOf(Y)},K.prototype.replace=function(Y){return h(this.nodes,Y,this.cmp)},K.prototype.pushpop=function(Y){return u(this.nodes,Y,this.cmp)},K.prototype.heapify=function(){return n(this.nodes,this.cmp)},K.prototype.updateItem=function(Y){return _(this.nodes,Y,this.cmp)},K.prototype.clear=function(){return this.nodes=[]},K.prototype.empty=function(){return 0===this.nodes.length},K.prototype.size=function(){return this.nodes.length},K.prototype.clone=function(){var Y;return(Y=new K).nodes=this.nodes.slice(0),Y},K.prototype.toArray=function(){return this.nodes.slice(0)},K.prototype.insert=K.prototype.push,K.prototype.top=K.prototype.peek,K.prototype.front=K.prototype.peek,K.prototype.has=K.prototype.contains,K.prototype.copy=K.prototype.clone,K}(),e.exports=r}.call(wa)),da.exports;var e}()),yi}()),ma=Me({root:null,weight:function(t){return 1},directed:!1}),Ha={dijkstra:function(t){if(!Bt(t)){var r=arguments;t={root:r[0],weight:r[1],directed:r[2]}}var a=ma(t),i=a.root,s=a.directed,o=this,u=a.weight,h=Ge(i)?this.filter(i)[0]:i[0],f={},v={},m={},k=this.byGroup(),_=k.nodes,U=k.edges;U.unmergeBy(function(dr){return dr.isLoop()});for(var I=function(gr){return f[gr.id()]},K=function(gr,ar){f[gr.id()]=ar,Y.updateItem(gr)},Y=new Or(function(dr,gr){return I(dr)-I(gr)}),X=0;X<_.length;X++){var mt=_[X];f[mt.id()]=mt.same(h)?0:1/0,Y.push(mt)}for(var ie=function(gr,ar){for(var jr,Sr=(s?gr.edgesTo(ar):gr.edgesWith(ar)).intersect(U),Ur=1/0,Mr=0;Mr<Sr.length;Mr++){var Wr=Sr[Mr],pa=u(Wr);(pa<Ur||!jr)&&(Ur=pa,jr=Wr)}return{edge:jr,dist:Ur}};Y.size()>0;){var se=Y.pop(),Yt=I(se),he=se.id();if(m[he]=Yt,Yt!==1/0)for(var be=se.neighborhood().intersect(_),Se=0;Se<be.length;Se++){var De=be[Se],Oe=De.id(),Ne=ie(se,De),Je=Yt+Ne.dist;Je<I(De)&&(K(De,Je),v[Oe]={node:se,edge:Ne.edge})}}return{distanceTo:function(gr){var ar=Ge(gr)?_.filter(gr)[0]:gr[0];return m[ar.id()]},pathTo:function(gr){var ar=Ge(gr)?_.filter(gr)[0]:gr[0],Sr=[],Ur=ar,jr=Ur.id();if(ar.length>0)for(Sr.unshift(ar);v[jr];){var Mr=v[jr];Sr.unshift(Mr.edge),Sr.unshift(Mr.node),jr=(Ur=Mr.node).id()}return o.spawn(Sr)}}}},ni={kruskal:function(t){t=t||function(X){return 1};for(var r=this.byGroup(),a=r.nodes,i=r.edges,n=a.length,s=new Array(n),o=a,u=function(mt){for(var ie=0;ie<s.length;ie++)if(s[ie].has(mt))return ie},h=0;h<n;h++)s[h]=this.spawn(a[h]);for(var f=i.sort(function(X,mt){return t(X)-t(mt)}),v=0;v<f.length;v++){var m=f[v],k=m.source()[0],_=m.target()[0],U=u(k),I=u(_),K=s[U],Y=s[I];U!==I&&(o.merge(m),K.merge(Y),s.splice(I,1))}return o}},Fr=Me({root:null,goal:null,weight:function(t){return 1},heuristic:function(t){return 0},directed:!1}),Pi={aStar:function(t){var r=this.cy(),a=Fr(t),i=a.root,n=a.goal,s=a.heuristic,o=a.directed,u=a.weight;i=r.collection(i)[0],n=r.collection(n)[0];var X,mt,h=i.id(),f=n.id(),v={},m={},k={},_=new Or(function(jr,Mr){return m[jr.id()]-m[Mr.id()]}),U=new ta,I={},K={},Y=function(Mr,Wr){_.push(Mr),U.add(Wr)},ie=function(){X=_.pop(),mt=X.id(),U.delete(mt)},se=function(Mr){return U.has(Mr)};Y(i,h),v[h]=0,m[h]=s(i);for(var Yt=0;_.size()>0;){if(ie(),Yt++,mt===f){for(var he=[],be=n,Se=f,De=K[Se];he.unshift(be),null!=De&&he.unshift(De),null!=(be=I[Se]);)De=K[Se=be.id()];return{found:!0,distance:v[mt],path:this.spawn(he),steps:Yt}}k[mt]=!0;for(var Oe=X._private.edges,Ne=0;Ne<Oe.length;Ne++){var Je=Oe[Ne];if(this.hasElementWithId(Je.id())&&(!o||Je.data("source")===mt)){var dr=Je.source(),gr=Je.target(),ar=dr.id()!==mt?dr:gr,Sr=ar.id();if(this.hasElementWithId(Sr)&&!k[Sr]){var Ur=v[mt]+u(Je);if(!se(Sr)){v[Sr]=Ur,m[Sr]=Ur+s(ar),Y(ar,Sr),I[Sr]=X,K[Sr]=Je;continue}Ur<v[Sr]&&(v[Sr]=Ur,m[Sr]=Ur+s(ar),I[Sr]=X,K[Sr]=Je)}}}}return{found:!1,distance:void 0,path:void 0,steps:Yt}}},ua=Me({weight:function(t){return 1},directed:!1}),ki={floydWarshall:function(t){for(var r=this.cy(),a=ua(t),n=a.directed,s=a.weight,o=this.byGroup(),u=o.nodes,h=o.edges,f=u.length,v=f*f,m=function(pa){return u.indexOf(pa)},k=function(pa){return u[pa]},_=new Array(v),U=0;U<v;U++){var I=U%f;_[U]=(U-I)/f===I?0:1/0}for(var Y=new Array(v),X=new Array(v),mt=0;mt<h.length;mt++){var ie=h[mt],se=ie.source()[0],Yt=ie.target()[0];if(se!==Yt){var he=m(se),be=m(Yt),Se=he*f+be,De=s(ie);if(_[Se]>De&&(_[Se]=De,Y[Se]=be,X[Se]=ie),!n){var Oe=be*f+he;!n&&_[Oe]>De&&(_[Oe]=De,Y[Oe]=he,X[Oe]=ie)}}}for(var Ne=0;Ne<f;Ne++)for(var Je=0;Je<f;Je++)for(var dr=Je*f+Ne,gr=0;gr<f;gr++){var ar=Je*f+gr,Sr=Ne*f+gr;_[dr]+_[Sr]<_[ar]&&(_[ar]=_[dr]+_[Sr],Y[ar]=Y[dr])}var jr=function(pa){return m(function(pa){return(Ge(pa)?r.filter(pa):pa)[0]}(pa))};return{distance:function(pa,Ea){var va=jr(pa),Aa=jr(Ea);return _[va*f+Aa]},path:function(pa,Ea){var va=jr(pa),Aa=jr(Ea),Ia=k(va);if(va===Aa)return Ia.collection();if(null==Y[va*f+Aa])return r.collection();var Qa=r.collection();for(Qa.merge(Ia);va!==Aa;)Qa.merge(X[va*f+(va=Y[va*f+Aa])]),Qa.merge(k(va));return Qa}}}},Ri=Me({weight:function(t){return 1},directed:!1,root:null}),Wi={bellmanFord:function(t){var r=this,a=Ri(t),n=a.directed,s=a.root,o=a.weight,u=this,h=this.cy(),f=this.byGroup(),v=f.edges,m=f.nodes,k=m.length,_=new Lt,U=!1,I=[];s=h.collection(s)[0],v.unmergeBy(function(Ci){return Ci.isLoop()});for(var K=v.length,Y=function(xi){var gi=_.get(xi.id());return gi||(gi={},_.set(xi.id(),gi)),gi},X=function(xi){return(Ge(xi)?h.$(xi):xi)[0]},se=0;se<k;se++){var Yt=m[se],he=Y(Yt);he.dist=Yt.same(s)?0:1/0,he.pred=null,he.edge=null}for(var be=!1,Se=function(xi,gi,Ja,ci,ui,_i){var fi=ci.dist+_i;fi<ui.dist&&!Ja.same(ci.edge)&&(ui.dist=fi,ui.pred=xi,ui.edge=Ja,be=!0)},De=1;De<k;De++){be=!1;for(var Oe=0;Oe<K;Oe++){var Ne=v[Oe],Je=Ne.source(),dr=Ne.target(),gr=o(Ne),ar=Y(Je),Sr=Y(dr);Se(Je,0,Ne,ar,Sr,gr),n||Se(dr,0,Ne,Sr,ar,gr)}if(!be)break}if(be)for(var Ur=[],jr=0;jr<K;jr++){var Mr=v[jr],Wr=Mr.source(),pa=Mr.target(),Ea=o(Mr),va=Y(Wr).dist,Aa=Y(pa).dist;if(va+Ea<Aa||!n&&Aa+Ea<va){if(U||(Sa("Graph contains a negative weight cycle for Bellman-Ford"),U=!0),!1===t.findNegativeWeightCycles)break;var Ia=[];va+Ea<Aa&&Ia.push(Wr),!n&&Aa+Ea<va&&Ia.push(pa);for(var Qa=Ia.length,Ta=0;Ta<Qa;Ta++){var Kr=Ia[Ta],$r=[Kr];$r.push(Y(Kr).edge);for(var ea=Y(Kr).pred;-1===$r.indexOf(ea);)$r.push(ea),$r.push(Y(ea).edge),ea=Y(ea).pred;for(var xa=($r=$r.slice($r.indexOf(ea)))[0].id(),Ga=0,li=2;li<$r.length;li+=2)$r[li].id()<xa&&(xa=$r[li].id(),Ga=li);($r=$r.slice(Ga).concat($r.slice(0,Ga))).push($r[0]);var Mi=$r.map(function(Ci){return Ci.id()}).join(",");-1===Ur.indexOf(Mi)&&(I.push(u.spawn($r)),Ur.push(Mi))}}}return{distanceTo:function(xi){return Y(X(xi)).dist},pathTo:function(xi){for(var gi=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s,ci=[],ui=X(xi);;){if(null==ui)return r.spawn();var _i=Y(ui),fi=_i.edge,wi=_i.pred;if(ci.unshift(ui[0]),ui.same(gi)&&ci.length>0)break;null!=fi&&ci.unshift(fi),ui=wi}return u.spawn(ci)},hasNegativeWeightCycle:U,negativeWeightCycles:I}}},ln=Math.sqrt(2),Ji=function(t,r,a){0===a.length&&za("Karger-Stein must be run on a connected (sub)graph");for(var i=a[t],o=r[i[1]],u=r[i[2]],h=a,f=h.length-1;f>=0;f--){var v=h[f],m=v[1],k=v[2];(r[m]===o&&r[k]===u||r[m]===u&&r[k]===o)&&h.splice(f,1)}for(var _=0;_<h.length;_++){var U=h[_];U[1]===u?(h[_]=U.slice(),h[_][1]=o):U[2]===u&&(h[_]=U.slice(),h[_][2]=o)}for(var I=0;I<r.length;I++)r[I]===u&&(r[I]=o);return h},Oi=function(t,r,a,i){for(;a>i;){var n=Math.floor(Math.random()*r.length);r=Ji(n,t,r),a--}return r},zi={kargerStein:function(){var t=this,r=this.byGroup(),a=r.nodes,i=r.edges;i.unmergeBy(function(Sr){return Sr.isLoop()});var n=a.length,s=i.length,o=Math.ceil(Math.pow(Math.log(n)/Math.LN2,2)),u=Math.floor(n/ln);if(!(n<2)){for(var h=[],f=0;f<s;f++){var v=i[f];h.push([f,a.indexOf(v.source()),a.indexOf(v.target())])}for(var m=1/0,k=[],_=new Array(n),U=new Array(n),I=new Array(n),K=function(Ur,jr){for(var Mr=0;Mr<n;Mr++)jr[Mr]=Ur[Mr]},Y=0;Y<=o;Y++){for(var X=0;X<n;X++)U[X]=X;var mt=Oi(U,h.slice(),n,u),ie=mt.slice();K(U,I);var se=Oi(U,mt,u,2),Yt=Oi(I,ie,u,2);se.length<=Yt.length&&se.length<m?(m=se.length,k=se,K(U,_)):Yt.length<=se.length&&Yt.length<m&&(m=Yt.length,k=Yt,K(I,_))}for(var he=this.spawn(k.map(function(Sr){return i[Sr[0]]})),be=this.spawn(),Se=this.spawn(),De=_[0],Oe=0;Oe<_.length;Oe++){var Je=a[Oe];_[Oe]===De?be.merge(Je):Se.merge(Je)}var dr=function(Ur){var jr=t.spawn();return Ur.forEach(function(Mr){jr.merge(Mr),Mr.connectedEdges().forEach(function(Wr){t.contains(Wr)&&!he.contains(Wr)&&jr.merge(Wr)})}),jr},gr=[dr(be),dr(Se)];return{cut:he,components:gr,partition1:be,partition2:Se}}za("At least 2 nodes are required for Karger-Stein algorithm")}},Bn=function(t,r,a){return{x:t.x*r+a.x,y:t.y*r+a.y}},Vn=function(t,r,a){return{x:(t.x-a.x)/r,y:(t.y-a.y)/r}},hn=function(t){return{x:t[0],y:t[1]}},kn=function(t,r){return Math.atan2(r,t)-Math.PI/2},Rn=Math.log2||function(e){return Math.log(e)/Math.log(2)},un=function(t){return t>0?1:t<0?-1:0},Xi=function(t,r){return Math.sqrt(rn(t,r))},rn=function(t,r){var a=r.x-t.x,i=r.y-t.y;return a*a+i*i},Yn=function(t){for(var r=t.length,a=0,i=0;i<r;i++)a+=t[i];for(var n=0;n<r;n++)t[n]=t[n]/a;return t},Gt=function(t,r,a,i){return(1-i)*(1-i)*t+2*(1-i)*i*r+i*i*a},d=function(t,r,a,i){return{x:Gt(t.x,r.x,a.x,i),y:Gt(t.y,r.y,a.y,i)}},Zt=function(t,r,a){return Math.max(t,Math.min(a,r))},Tt=function(t){if(null==t)return{x1:1/0,y1:1/0,x2:-1/0,y2:-1/0,w:0,h:0};if(null!=t.x1&&null!=t.y1){if(null!=t.x2&&null!=t.y2&&t.x2>=t.x1&&t.y2>=t.y1)return{x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2,w:t.x2-t.x1,h:t.y2-t.y1};if(null!=t.w&&null!=t.h&&t.w>=0&&t.h>=0)return{x1:t.x1,y1:t.y1,x2:t.x1+t.w,y2:t.y1+t.h,w:t.w,h:t.h}}},nt=function(t,r){t.x1=Math.min(t.x1,r.x1),t.x2=Math.max(t.x2,r.x2),t.w=t.x2-t.x1,t.y1=Math.min(t.y1,r.y1),t.y2=Math.max(t.y2,r.y2),t.h=t.y2-t.y1},At=function(t,r,a){t.x1=Math.min(t.x1,r),t.x2=Math.max(t.x2,r),t.w=t.x2-t.x1,t.y1=Math.min(t.y1,a),t.y2=Math.max(t.y2,a),t.h=t.y2-t.y1},J=function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t.x1-=r,t.x2+=r,t.y1-=r,t.y2+=r,t.w=t.x2-t.x1,t.h=t.y2-t.y1,t},Q=function(t){var a,i,n,s,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0];if(1===r.length)a=i=n=s=r[0];else if(2===r.length)a=n=r[0],s=i=r[1];else if(4===r.length){var o=Xt(r,4);a=o[0],i=o[1],n=o[2],s=o[3]}return t.x1-=s,t.x2+=i,t.y1-=a,t.y2+=n,t.w=t.x2-t.x1,t.h=t.y2-t.y1,t},Mt=function(t,r){t.x1=r.x1,t.y1=r.y1,t.x2=r.x2,t.y2=r.y2,t.w=t.x2-t.x1,t.h=t.y2-t.y1},pe=function(t,r){return!(t.x1>r.x2||r.x1>t.x2||t.x2<r.x1||r.x2<t.x1||t.y2<r.y1||r.y2<t.y1||t.y1>r.y2||r.y1>t.y2)},Ae=function(t,r,a){return t.x1<=r&&r<=t.x2&&t.y1<=a&&a<=t.y2},tt=function(t,r){return Ae(t,r.x,r.y)},l=function(t,r){return Ae(t,r.x1,r.y1)&&Ae(t,r.x2,r.y2)},T=null!==(cn=Math.hypot)&&void 0!==cn?cn:function(e,t){return Math.sqrt(e*e+t*t)};var _t=function(t,r,a,i,n,s,o){var _,dr,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"auto",h="auto"===u?Ui(n,s):u,f=n/2,v=s/2,m=(h=Math.min(h,f,v))!==f,k=h!==v;if(m){var I=i-v-o;if((_=ji(t,r,a,i,a-f+h-o,I,a+f-h+o,I,!1)).length>0)return _}if(k){var X=a+f+o;if((_=ji(t,r,a,i,X,i-v+h-o,X,i+v-h+o,!1)).length>0)return _}if(m){var he=i+v+o;if((_=ji(t,r,a,i,a-f+h-o,he,a+f-h+o,he,!1)).length>0)return _}if(k){var De=a-f-o;if((_=ji(t,r,a,i,De,i-v+h-o,De,i+v-h+o,!1)).length>0)return _}var gr=a-f+h,ar=i-v+h;if((dr=Wa(t,r,a,i,gr,ar,h+o)).length>0&&dr[0]<=gr&&dr[1]<=ar)return[dr[0],dr[1]];var Sr=a+f-h,Ur=i-v+h;if((dr=Wa(t,r,a,i,Sr,Ur,h+o)).length>0&&dr[0]>=Sr&&dr[1]<=Ur)return[dr[0],dr[1]];var jr=a+f-h,Mr=i+v-h;if((dr=Wa(t,r,a,i,jr,Mr,h+o)).length>0&&dr[0]>=jr&&dr[1]>=Mr)return[dr[0],dr[1]];var Wr=a-f+h,pa=i+v-h;return(dr=Wa(t,r,a,i,Wr,pa,h+o)).length>0&&dr[0]<=Wr&&dr[1]>=pa?[dr[0],dr[1]]:[]},Ie=function(t,r,a,i,n,s,o){var u=o,h=Math.min(a,n),f=Math.max(a,n),v=Math.min(i,s),m=Math.max(i,s);return h-u<=t&&t<=f+u&&v-u<=r&&r<=m+u},Qt=function(t,r,a,i,n,s,o,u,h){var f_x1=Math.min(a,o,n)-h,f_x2=Math.max(a,o,n)+h,f_y1=Math.min(i,u,s)-h,f_y2=Math.max(i,u,s)+h;return!(t<f_x1||t>f_x2||r<f_y1||r>f_y2)},Dr=function(t,r,a,i,n,s,o,u){var k=[];!function(t,r,a,i,n){var o,u,h,f,v,m,k,_;0===t&&(t=1e-5),h=-27*(i/=t)+(r/=t)*(9*(a/=t)-r*r*2),o=(u=(3*a-r*r)/9)*u*u+(h/=54)*h,n[1]=0,k=r/3,o>0?(v=(v=h+Math.sqrt(o))<0?-Math.pow(-v,1/3):Math.pow(v,1/3),m=(m=h-Math.sqrt(o))<0?-Math.pow(-m,1/3):Math.pow(m,1/3),n[0]=-k+v+m,n[4]=n[2]=-(k+=(v+m)/2),k=Math.sqrt(3)*(-m+v)/2,n[3]=k,n[5]=-k):(n[5]=n[3]=0,0===o?(_=h<0?-Math.pow(-h,1/3):Math.pow(h,1/3),n[0]=2*_-k,n[4]=n[2]=-(_+k)):(f=(u=-u)*u*u,f=Math.acos(h/Math.sqrt(f)),_=2*Math.sqrt(u),n[0]=-k+_*Math.cos(f/3),n[2]=-k+_*Math.cos((f+2*Math.PI)/3),n[4]=-k+_*Math.cos((f+4*Math.PI)/3)))}(1*a*a-4*a*n+2*a*o+4*n*n-4*n*o+o*o+i*i-4*i*s+2*i*u+4*s*s-4*s*u+u*u,9*a*n-3*a*a-3*a*o-6*n*n+3*n*o+9*i*s-3*i*i-3*i*u-6*s*s+3*s*u,3*a*a-6*a*n+a*o-a*t+2*n*n+2*n*t-o*t+3*i*i-6*i*s+i*u-i*r+2*s*s+2*s*r-u*r,1*a*n-a*a+a*t-n*t+i*s-i*i+i*r-s*r,k);for(var U=[],I=0;I<6;I+=2)Math.abs(k[I+1])<1e-7&&k[I]>=0&&k[I]<=1&&U.push(k[I]);U.push(1),U.push(0);for(var Y,X,mt,K=-1,ie=0;ie<U.length;ie++)Y=Math.pow(1-U[ie],2)*a+2*(1-U[ie])*U[ie]*n+U[ie]*U[ie]*o,X=Math.pow(1-U[ie],2)*i+2*(1-U[ie])*U[ie]*s+U[ie]*U[ie]*u,mt=Math.pow(Y-t,2)+Math.pow(X-r,2),K>=0?mt<K&&(K=mt):K=mt;return K},aa=function(t,r,a,i,n,s){var o=[t-a,r-i],u=[n-a,s-i],h=u[0]*u[0]+u[1]*u[1],f=o[0]*o[0]+o[1]*o[1],v=o[0]*u[0]+o[1]*u[1],m=v*v/h;return v<0?f:m>h?(t-n)*(t-n)+(r-s)*(r-s):f-m},Nr=function(t,r,a){for(var i,n,s,o,h=0,f=0;f<a.length/2;f++)if(n=a[2*f+1],f+1<a.length/2?(s=a[2*(f+1)],o=a[2*(f+1)+1]):(s=a[2*(f+1-a.length/2)],o=a[2*(f+1-a.length/2)+1]),(i=a[2*f])!=t||s!=t){if(!(i>=t&&t>=s||i<=t&&t<=s))continue;(t-i)/(s-i)*(o-n)+n>r&&h++}return h%2!=0},oa=function(t,r,a,i,n,s,o,u,h){var v,U,f=new Array(a.length);null!=u[0]?(v=Math.atan(u[1]/u[0]),u[0]<0?v+=Math.PI/2:v=-v-Math.PI/2):v=u;for(var m=Math.cos(-v),k=Math.sin(-v),_=0;_<f.length/2;_++)f[2*_]=s/2*(a[2*_]*m-a[2*_+1]*k),f[2*_+1]=o/2*(a[2*_+1]*m+a[2*_]*k),f[2*_]+=i,f[2*_+1]+=n;if(h>0){var I=Pa(f,-h);U=ka(I)}else U=f;return Nr(t,r,U)},ka=function(t){for(var o,u,h,f,r=new Array(t.length/2),v=0;v<t.length/4;v++){v<t.length/4-1?(o=t[4*(v+1)],u=t[4*(v+1)+1],h=t[4*(v+1)+2],f=t[4*(v+1)+3]):(o=t[0],u=t[1],h=t[2],f=t[3]);var m=ji(t[4*v],t[4*v+1],t[4*v+2],t[4*v+3],o,u,h,f,!0);r[2*v]=m[0],r[2*v+1]=m[1]}return r},Pa=function(t,r){for(var i,n,s,o,a=new Array(2*t.length),u=0;u<t.length/2;u++){u<t.length/2-1?(s=t[2*(u+1)],o=t[2*(u+1)+1]):(s=t[0],o=t[1]);var h=o-(n=t[2*u+1]),f=-(s-(i=t[2*u])),v=Math.sqrt(h*h+f*f),m=h/v,k=f/v;a[4*u]=i+m*r,a[4*u+1]=n+k*r,a[4*u+2]=s+m*r,a[4*u+3]=o+k*r}return a},$a=function(t,r,a,i,n,s,o){return t-=n,r-=s,(t/=a/2+o)*t+(r/=i/2+o)*r<=1},Wa=function(t,r,a,i,n,s,o){var u=[a-t,i-r],h=[t-n,r-s],f=u[0]*u[0]+u[1]*u[1],v=2*(h[0]*u[0]+h[1]*u[1]),k=v*v-4*f*(h[0]*h[0]+h[1]*h[1]-o*o);if(k<0)return[];var _=(-v+Math.sqrt(k))/(2*f),U=(-v-Math.sqrt(k))/(2*f),I=Math.min(_,U),K=Math.max(_,U),Y=[];if(I>=0&&I<=1&&Y.push(I),K>=0&&K<=1&&Y.push(K),0===Y.length)return[];var X=Y[0]*u[0]+t,mt=Y[0]*u[1]+r;return Y.length>1?Y[0]==Y[1]?[X,mt]:[X,mt,Y[1]*u[0]+t,Y[1]*u[1]+r]:[X,mt]},hi=function(t,r,a){return r<=t&&t<=a||a<=t&&t<=r?t:t<=r&&r<=a||a<=r&&r<=t?r:a},ji=function(t,r,a,i,n,s,o,u,h){var f=t-n,v=a-t,m=o-n,k=r-s,_=i-r,U=u-s,I=m*k-U*f,K=v*k-_*f,Y=U*v-m*_;if(0!==Y){var X=I/Y,mt=K/Y;return-.001<=X&&X<=1.001&&-.001<=mt&&mt<=1.001||h?[t+X*v,r+X*_]:[]}return 0===I||0===K?hi(t,a,o)===o?[o,u]:hi(t,a,n)===n?[n,s]:hi(n,o,a)===a?[a,i]:[]:[]},$n=function(t,r,a,i,n){var s=[],o=i/2,u=n/2,h=r,f=a;s.push({x:h+o*t[0],y:f+u*t[1]});for(var v=1;v<t.length/2;v++)s.push({x:h+o*t[2*v],y:f+u*t[2*v+1]});return s},Tn=function(t,r,a,i,n,s,o,u){var f,k,h=[],v=new Array(a.length),m=!0;if(null==s&&(m=!1),m){for(var _=0;_<v.length/2;_++)v[2*_]=a[2*_]*s+i,v[2*_+1]=a[2*_+1]*o+n;if(u>0){var U=Pa(v,-u);k=ka(U)}else k=v}else k=a;for(var Y,X,mt=0;mt<k.length/2;mt++)mt<k.length/2-1?(Y=k[2*(mt+1)],X=k[2*(mt+1)+1]):(Y=k[0],X=k[1]),0!==(f=ji(t,r,i,n,k[2*mt],k[2*mt+1],Y,X)).length&&h.push(f[0],f[1]);return h},an=function(t,r,a){var i=[t[0]-r[0],t[1]-r[1]],n=Math.sqrt(i[0]*i[0]+i[1]*i[1]),s=(n-a)/n;return s<0&&(s=1e-5),[r[0]+s*i[0],r[1]+s*i[1]]},Fi=function(t,r){var a=pn(t,r);return bn(a)},bn=function(t){for(var r,a,i=t.length/2,n=1/0,s=1/0,o=-1/0,u=-1/0,h=0;h<i;h++)r=t[2*h],a=t[2*h+1],n=Math.min(n,r),o=Math.max(o,r),s=Math.min(s,a),u=Math.max(u,a);for(var f=2/(o-n),v=2/(u-s),m=0;m<i;m++)r=t[2*m]=t[2*m]*f,a=t[2*m+1]=t[2*m+1]*v,n=Math.min(n,r),o=Math.max(o,r),s=Math.min(s,a),u=Math.max(u,a);if(s<-1)for(var k=0;k<i;k++)a=t[2*k+1]=t[2*k+1]+(-1-s);return t},pn=function(t,r){var a=1/t*2*Math.PI,i=t%2==0?Math.PI/2+a/2:Math.PI/2;i+=r;for(var s,n=new Array(2*t),o=0;o<t;o++)s=o*a+i,n[2*o]=Math.cos(s),n[2*o+1]=Math.sin(-s);return n},Ui=function(t,r){return Math.min(t/4,r/4,8)},os=function(t,r){return Math.min(t/10,r/10,8)},yl=function(t,r){return{heightOffset:Math.min(15,.05*r),widthOffset:Math.min(100,.25*t),ctrlPtOffsetPct:.05}};function ml(e,t){function r(v){for(var m=[],k=0;k<v.length;k++){var _=v[k],U=v[(k+1)%v.length],I={x:U.x-_.x,y:U.y-_.y},K={x:-I.y,y:I.x},Y=Math.sqrt(K.x*K.x+K.y*K.y);m.push({x:K.x/Y,y:K.y/Y})}return m}function a(v,m){var I,k=1/0,_=-1/0,U=q(v);try{for(U.s();!(I=U.n()).done;){var K=I.value,Y=K.x*m.x+K.y*m.y;k=Math.min(k,Y),_=Math.max(_,Y)}}catch(X){U.e(X)}finally{U.f()}return{min:k,max:_}}function i(v,m){return!(v.max<m.min||m.max<v.min)}var o,s=q([].concat(j(r(e)),j(r(t))));try{for(s.s();!(o=s.n()).done;){var u=o.value;if(!i(a(e,u),a(t,u)))return!1}}catch(v){s.e(v)}finally{s.f()}return!0}var F0=Me({dampingFactor:.8,precision:1e-6,iterations:200,weight:function(t){return 1}}),K0={pageRank:function(t){for(var r=F0(t),a=r.dampingFactor,i=r.precision,n=r.iterations,s=r.weight,o=this._private.cy,u=this.byGroup(),h=u.nodes,f=u.edges,v=h.length,k=f.length,_=new Array(v*v),U=new Array(v),I=(1-a)/v,K=0;K<v;K++){for(var Y=0;Y<v;Y++)_[K*v+Y]=0;U[K]=0}for(var mt=0;mt<k;mt++){var ie=f[mt],se=ie.data("source"),Yt=ie.data("target");if(se!==Yt){var he=h.indexOfId(se),be=h.indexOfId(Yt),Se=s(ie);_[be*v+he]+=Se,U[he]+=Se}}for(var Oe=1/v+I,Ne=0;Ne<v;Ne++)if(0===U[Ne])for(var Je=0;Je<v;Je++)_[Je*v+Ne]=Oe;else for(var gr=0;gr<v;gr++){var ar=gr*v+Ne;_[ar]=_[ar]/U[Ne]+I}for(var jr,Sr=new Array(v),Ur=new Array(v),Mr=0;Mr<v;Mr++)Sr[Mr]=1;for(var Wr=0;Wr<n;Wr++){for(var pa=0;pa<v;pa++)Ur[pa]=0;for(var Ea=0;Ea<v;Ea++)for(var va=0;va<v;va++)Ur[Ea]+=_[Ea*v+va]*Sr[va];Yn(Ur),jr=Sr,Sr=Ur,Ur=jr;for(var Ia=0,Qa=0;Qa<v;Qa++){var Ta=jr[Qa]-Sr[Qa];Ia+=Ta*Ta}if(Ia<i)break}return{rank:function(ea){return ea=o.collection(ea)[0],Sr[h.indexOf(ea)]}}}},ch=Me({root:null,weight:function(t){return 1},directed:!1,alpha:0}),Is={degreeCentralityNormalized:function(t){t=ch(t);var r=this.cy(),a=this.nodes(),i=a.length;if(t.directed){for(var f={},v={},m=0,k=0,_=0;_<i;_++){var U=a[_],I=U.id();t.root=U;var K=this.degreeCentrality(t);m<K.indegree&&(m=K.indegree),k<K.outdegree&&(k=K.outdegree),f[I]=K.indegree,v[I]=K.outdegree}return{indegree:function(X){return 0==m?0:(Ge(X)&&(X=r.filter(X)),f[X.id()]/m)},outdegree:function(X){return 0===k?0:(Ge(X)&&(X=r.filter(X)),v[X.id()]/k)}}}for(var n={},s=0,o=0;o<i;o++){var u=a[o];t.root=u;var h=this.degreeCentrality(t);s<h.degree&&(s=h.degree),n[u.id()]=h.degree}return{degree:function(X){return 0===s?0:(Ge(X)&&(X=r.filter(X)),n[X.id()]/s)}}},degreeCentrality:function(t){t=ch(t);var r=this.cy(),a=this,n=t.root,s=t.weight,o=t.directed,u=t.alpha;if(n=r.collection(n)[0],o){for(var k=n.connectedEdges(),_=k.filter(function(se){return se.target().same(n)&&a.has(se)}),U=k.filter(function(se){return se.source().same(n)&&a.has(se)}),I=_.length,K=U.length,Y=0,X=0,mt=0;mt<_.length;mt++)Y+=s(_[mt]);for(var ie=0;ie<U.length;ie++)X+=s(U[ie]);return{indegree:Math.pow(I,1-u)*Math.pow(Y,u),outdegree:Math.pow(K,1-u)*Math.pow(X,u)}}for(var h=n.connectedEdges().intersection(a),f=h.length,v=0,m=0;m<h.length;m++)v+=s(h[m]);return{degree:Math.pow(f,1-u)*Math.pow(v,u)}}};Is.dc=Is.degreeCentrality,Is.dcn=Is.degreeCentralityNormalised=Is.degreeCentralityNormalized;var hh=Me({harmonic:!0,weight:function(){return 1},directed:!1,root:null}),Os={closenessCentralityNormalized:function(t){for(var r=hh(t),a=r.harmonic,i=r.weight,n=r.directed,s=this.cy(),o={},u=0,h=this.nodes(),f=this.floydWarshall({weight:i,directed:n}),v=0;v<h.length;v++){for(var m=0,k=h[v],_=0;_<h.length;_++)if(v!==_){var U=f.distance(k,h[_]);m+=a?1/U:U}a||(m=1/m),u<m&&(u=m),o[k.id()]=m}return{closeness:function(K){return 0==u?0:(K=Ge(K)?s.filter(K)[0].id():K.id(),o[K]/u)}}},closenessCentrality:function(t){var r=hh(t),a=r.root,i=r.weight,n=r.directed,s=r.harmonic;a=this.filter(a)[0];for(var o=this.dijkstra({root:a,weight:i,directed:n}),u=0,h=this.nodes(),f=0;f<h.length;f++){var v=h[f];if(!v.same(a)){var m=o.distanceTo(v);u+=s?1/m:m}}return s?u:1/u}};Os.cc=Os.closenessCentrality,Os.ccn=Os.closenessCentralityNormalised=Os.closenessCentralityNormalized;var W0=Me({weight:null,directed:!1}),xl={betweennessCentrality:function(t){for(var r=W0(t),a=r.directed,i=r.weight,n=null!=i,s=this.cy(),o=this.nodes(),u={},h={},f=0,v={set:function(X,mt){h[X]=mt,mt>f&&(f=mt)},get:function(X){return h[X]}},m=0;m<o.length;m++){var k=o[m],_=k.id();u[_]=a?k.outgoers().nodes():k.openNeighborhood().nodes(),v.set(_,0)}for(var U=function(){for(var X=o[I].id(),mt=[],ie={},se={},Yt={},he=new Or(function(Ea,va){return Yt[Ea]-Yt[va]}),be=0;be<o.length;be++){var Se=o[be].id();ie[Se]=[],se[Se]=0,Yt[Se]=1/0}for(se[X]=1,Yt[X]=0,he.push(X);!he.empty();){var De=he.pop();if(mt.push(De),n)for(var Oe=0;Oe<u[De].length;Oe++){var dr,Ne=u[De][Oe],Je=s.getElementById(De);dr=Je.edgesTo(Ne).length>0?Je.edgesTo(Ne)[0]:Ne.edgesTo(Je)[0];var gr=i(dr);Ne=Ne.id(),Yt[Ne]>Yt[De]+gr&&(Yt[Ne]=Yt[De]+gr,he.nodes.indexOf(Ne)<0?he.push(Ne):he.updateItem(Ne),se[Ne]=0,ie[Ne]=[]),Yt[Ne]==Yt[De]+gr&&(se[Ne]=se[Ne]+se[De],ie[Ne].push(De))}else for(var ar=0;ar<u[De].length;ar++){var Sr=u[De][ar].id();Yt[Sr]==1/0&&(he.push(Sr),Yt[Sr]=Yt[De]+1),Yt[Sr]==Yt[De]+1&&(se[Sr]=se[Sr]+se[De],ie[Sr].push(De))}}for(var Ur={},jr=0;jr<o.length;jr++)Ur[o[jr].id()]=0;for(;mt.length>0;){for(var Mr=mt.pop(),Wr=0;Wr<ie[Mr].length;Wr++){var pa=ie[Mr][Wr];Ur[pa]=Ur[pa]+se[pa]/se[Mr]*(1+Ur[Mr])}Mr!=o[I].id()&&v.set(Mr,v.get(Mr)+Ur[Mr])}},I=0;I<o.length;I++)U();var K={betweenness:function(X){var mt=s.collection(X).id();return v.get(mt)},betweennessNormalized:function(X){if(0==f)return 0;var mt=s.collection(X).id();return v.get(mt)/f}};return K.betweennessNormalised=K.betweennessNormalized,K}};xl.bc=xl.betweennessCentrality;var z0=Me({expandFactor:2,inflateFactor:2,multFactor:1,maxIterations:20,attributes:[function(e){return 1}]}),U0=function(t,r){for(var a=0,i=0;i<r.length;i++)a+=r[i](t);return a},uh=function(t,r){for(var a,i=0;i<r;i++){a=0;for(var n=0;n<r;n++)a+=t[n*r+i];for(var s=0;s<r;s++)t[s*r+i]=t[s*r+i]/a}},Y0=function(t,r,a){for(var i=new Array(a*a),n=0;n<a;n++){for(var s=0;s<a;s++)i[n*a+s]=0;for(var o=0;o<a;o++)for(var u=0;u<a;u++)i[n*a+u]+=t[n*a+o]*r[o*a+u]}return i},H0=function(t,r,a){for(var i=t.slice(0),n=1;n<a;n++)t=Y0(t,i,r);return t},G0=function(t,r,a){for(var i=new Array(r*r),n=0;n<r*r;n++)i[n]=Math.pow(t[n],a);return uh(i,r),i},q0=function(t,r,a,i){for(var n=0;n<a;n++)if(Math.round(t[n]*Math.pow(10,i))/Math.pow(10,i)!==Math.round(r[n]*Math.pow(10,i))/Math.pow(10,i))return!1;return!0},X0=function(t,r){for(var a=0;a<t.length;a++)if(!r[a]||t[a].id()!==r[a].id())return!1;return!0},dh=function(t){for(var r=this.nodes(),a=this.edges(),i=this.cy(),n=function(t){return z0(t)}(t),s={},o=0;o<r.length;o++)s[r[o].id()]=o;for(var v,u=r.length,h=u*u,f=new Array(h),m=0;m<h;m++)f[m]=0;for(var k=0;k<a.length;k++){var _=a[k],U=s[_.source().id()],I=s[_.target().id()],K=U0(_,n.attributes);f[U*u+I]+=K,f[I*u+U]+=K}(function(t,r,a){for(var i=0;i<r;i++)t[i*r+i]=a})(f,u,n.multFactor),uh(f,u);for(var Y=!0,X=0;Y&&X<n.maxIterations;)Y=!1,v=H0(f,u,n.expandFactor),f=G0(v,u,n.inflateFactor),q0(f,v,h,4)||(Y=!0),X++;var mt=function(t,r,a,i){for(var n=[],s=0;s<r;s++){for(var o=[],u=0;u<r;u++)Math.round(1e3*t[s*r+u])/1e3>0&&o.push(a[u]);0!==o.length&&n.push(i.collection(o))}return n}(f,u,r,i);return mt=function(t){for(var r=0;r<t.length;r++)for(var a=0;a<t.length;a++)r!=a&&X0(t[r],t[a])&&t.splice(a,1);return t}(mt),mt},Q0={markovClustering:dh,mcl:dh},J0=function(t){return t},fh=function(t,r){return Math.abs(r-t)},gh=function(t,r,a){return t+fh(r,a)},ph=function(t,r,a){return t+Math.pow(a-r,2)},tf=function(t){return Math.sqrt(t)},ef=function(t,r,a){return Math.max(t,fh(r,a))},ao=function(t,r,a,i,n){for(var s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:J0,o=i,f=0;f<t;f++)o=n(o,r(f),a(f));return s(o)},Ns={euclidean:function(t,r,a){return t>=2?ao(t,r,a,0,ph,tf):ao(t,r,a,0,gh)},squaredEuclidean:function(t,r,a){return ao(t,r,a,0,ph)},manhattan:function(t,r,a){return ao(t,r,a,0,gh)},max:function(t,r,a){return ao(t,r,a,-1/0,ef)}};function Lo(e,t,r,a,i,n){var s;return s=W(e)?e:Ns[e]||Ns.euclidean,0===t&&W(e)?s(i,n):s(t,r,a,i,n)}Ns["squared-euclidean"]=Ns.squaredEuclidean,Ns.squaredeuclidean=Ns.squaredEuclidean;var rf=Me({k:2,m:2,sensitivityThreshold:1e-4,distance:"euclidean",maxIterations:10,attributes:[],testMode:!1,testCentroids:null}),bl=function(t){return rf(t)},Bo=function(t,r,a,i,n){var o="kMedoids"!==n?function(v){return a[v]}:function(v){return i[v](a)};return Lo(t,i.length,o,function(m){return i[m](r)},a,r)},_l=function(t,r,a){for(var i=a.length,n=new Array(i),s=new Array(i),o=new Array(r),u=null,h=0;h<i;h++)n[h]=t.min(a[h]).value,s[h]=t.max(a[h]).value;for(var f=0;f<r;f++){u=[];for(var v=0;v<i;v++)u[v]=Math.random()*(s[v]-n[v])+n[v];o[f]=u}return o},vh=function(t,r,a,i,n){for(var s=1/0,o=0,u=0;u<r.length;u++){var h=Bo(a,t,r[u],i,n);h<s&&(s=h,o=u)}return o},yh=function(t,r,a){for(var i=[],n=null,s=0;s<r.length;s++)a[(n=r[s]).id()]===t&&i.push(n);return i},af=function(t,r,a){return Math.abs(r-t)<=a},nf=function(t,r,a){for(var i=0;i<t.length;i++)for(var n=0;n<t[i].length;n++)if(Math.abs(t[i][n]-r[i][n])>a)return!1;return!0},sf=function(t,r,a){for(var i=0;i<a;i++)if(t===r[i])return!0;return!1},mh=function(t,r){var a=new Array(r);if(t.length<50)for(var i=0;i<r;i++){for(var n=t[Math.floor(Math.random()*t.length)];sf(n,a,i);)n=t[Math.floor(Math.random()*t.length)];a[i]=n}else for(var s=0;s<r;s++)a[s]=t[Math.floor(Math.random()*t.length)];return a},xh=function(t,r,a){for(var i=0,n=0;n<r.length;n++)i+=Bo("manhattan",r[n],t,a,"kMedoids");return i},cf=function(t,r,a,i,n){for(var s,o,u=0;u<r.length;u++)for(var h=0;h<t.length;h++)i[u][h]=Math.pow(a[u][h],n.m);for(var f=0;f<t.length;f++)for(var v=0;v<n.attributes.length;v++){s=0,o=0;for(var m=0;m<r.length;m++)s+=i[m][f]*n.attributes[v](r[m]),o+=i[m][f];t[f][v]=s/o}},hf=function(t,r,a,i,n){for(var s=0;s<t.length;s++)r[s]=t[s].slice();for(var o,u,h,f=2/(n.m-1),v=0;v<a.length;v++)for(var m=0;m<i.length;m++){o=0;for(var k=0;k<a.length;k++)u=Bo(n.distance,i[m],a[v],n.attributes,"cmeans"),h=Bo(n.distance,i[m],a[k],n.attributes,"cmeans"),o+=Math.pow(u/h,f);t[m][v]=1/o}},bh=function(t){var n,s,o,u,h,r=this.cy(),a=this.nodes(),i=bl(t);u=new Array(a.length);for(var f=0;f<a.length;f++)u[f]=new Array(i.k);o=new Array(a.length);for(var v=0;v<a.length;v++)o[v]=new Array(i.k);for(var m=0;m<a.length;m++){for(var k=0,_=0;_<i.k;_++)o[m][_]=Math.random(),k+=o[m][_];for(var U=0;U<i.k;U++)o[m][U]=o[m][U]/k}s=new Array(i.k);for(var I=0;I<i.k;I++)s[I]=new Array(i.attributes.length);h=new Array(a.length);for(var K=0;K<a.length;K++)h[K]=new Array(i.k);for(var Y=!0,X=0;Y&&X<i.maxIterations;)Y=!1,cf(s,a,o,h,i),hf(o,u,s,a,i),nf(o,u,i.sensitivityThreshold)||(Y=!0),X++;return n=function(t,r,a,i){for(var n=new Array(a.k),s=0;s<n.length;s++)n[s]=[];for(var o,u,h=0;h<r.length;h++){o=-1/0,u=-1;for(var f=0;f<r[0].length;f++)r[h][f]>o&&(o=r[h][f],u=f);n[u].push(t[h])}for(var v=0;v<n.length;v++)n[v]=i.collection(n[v]);return n}(a,o,i,r),{clusters:n,degreeOfMembership:o}},df={kMeans:function(t){var u,r=this.cy(),a=this.nodes(),i=null,n=bl(t),s=new Array(n.k),o={};u=n.testMode?"number"==typeof n.testCentroids?_l(a,n.k,n.attributes):"object"===vr(n.testCentroids)?n.testCentroids:_l(a,n.k,n.attributes):_l(a,n.k,n.attributes);for(var h=!0,f=0;h&&f<n.maxIterations;){for(var v=0;v<a.length;v++)o[(i=a[v]).id()]=vh(i,u,n.distance,n.attributes,"kMeans");h=!1;for(var m=0;m<n.k;m++){var k=yh(m,a,o);if(0!==k.length){for(var _=n.attributes.length,U=u[m],I=new Array(_),K=new Array(_),Y=0;Y<_;Y++){K[Y]=0;for(var X=0;X<k.length;X++)K[Y]+=n.attributes[Y](i=k[X]);I[Y]=K[Y]/k.length,af(I[Y],U[Y],n.sensitivityThreshold)||(h=!0)}u[m]=I,s[m]=r.collection(k)}}f++}return s},kMedoids:function(t){var o,h,r=this.cy(),a=this.nodes(),i=null,n=bl(t),s=new Array(n.k),u={},f=new Array(n.k);n.testMode?"number"==typeof n.testCentroids||(o="object"===vr(n.testCentroids)?n.testCentroids:mh(a,n.k)):o=mh(a,n.k);for(var v=!0,m=0;v&&m<n.maxIterations;){for(var k=0;k<a.length;k++)u[(i=a[k]).id()]=vh(i,o,n.distance,n.attributes,"kMedoids");v=!1;for(var _=0;_<o.length;_++){var U=yh(_,a,u);if(0!==U.length){f[_]=xh(o[_],U,n.attributes);for(var I=0;I<U.length;I++)(h=xh(U[I],U,n.attributes))<f[_]&&(f[_]=h,o[_]=U[I],v=!0);s[_]=r.collection(U)}}m++}return s},fuzzyCMeans:bh,fcm:bh},ff=Me({distance:"euclidean",linkage:"min",mode:"threshold",threshold:1/0,addDendrogram:!1,dendrogramDepth:0,attributes:[]}),gf={single:"min",complete:"max"},_h=function(t,r,a,i,n){for(var u,s=0,o=1/0,h=n.attributes,f=function(be,Se){return Lo(n.distance,h.length,function(De){return h[De](be)},function(De){return h[De](Se)},be,Se)},v=0;v<t.length;v++){var m=t[v].key,k=a[m][i[m]];k<o&&(s=m,o=k)}if("threshold"===n.mode&&o>=n.threshold||"dendrogram"===n.mode&&1===t.length)return!1;var I,_=r[s],U=r[i[s]];I="dendrogram"===n.mode?{left:_,right:U,key:_.key}:{value:_.value.concat(U.value),key:_.key},t[_.index]=I,t.splice(U.index,1),r[_.key]=I;for(var K=0;K<t.length;K++){var Y=t[K];_.key===Y.key?u=1/0:"min"===n.linkage?(u=a[_.key][Y.key],a[_.key][Y.key]>a[U.key][Y.key]&&(u=a[U.key][Y.key])):"max"===n.linkage?(u=a[_.key][Y.key],a[_.key][Y.key]<a[U.key][Y.key]&&(u=a[U.key][Y.key])):u="mean"===n.linkage?(a[_.key][Y.key]*_.size+a[U.key][Y.key]*U.size)/(_.size+U.size):"dendrogram"===n.mode?f(Y.value,_.value):f(Y.value[0],_.value[0]),a[_.key][Y.key]=a[Y.key][_.key]=u}for(var X=0;X<t.length;X++){var mt=t[X].key;if(i[mt]===_.key||i[mt]===U.key){for(var ie=mt,se=0;se<t.length;se++){var Yt=t[se].key;a[mt][Yt]<a[mt][ie]&&(ie=Yt)}i[mt]=ie}t[X].index=X}return _.key=U.key=_.index=U.index=null,!0},Fs=function(t,r,a){t&&(t.value?r.push(t.value):(t.left&&Fs(t.left,r),t.right&&Fs(t.right,r)))},El=function(t,r){if(!t)return"";if(t.left&&t.right){var a=El(t.left,r),i=El(t.right,r),n=r.add({group:"nodes",data:{id:a+","+i}});return r.add({group:"edges",data:{source:a,target:n.id()}}),r.add({group:"edges",data:{source:i,target:n.id()}}),n.id()}return t.value?t.value.id():void 0},Cl=function(t,r,a){if(!t)return[];var i=[],n=[],s=[];return 0===r?(t.left&&Fs(t.left,i),t.right&&Fs(t.right,n),s=i.concat(n),[a.collection(s)]):1===r?t.value?[a.collection(t.value)]:(t.left&&Fs(t.left,i),t.right&&Fs(t.right,n),[a.collection(i),a.collection(n)]):t.value?[a.collection(t.value)]:(t.left&&(i=Cl(t.left,r-1,a)),t.right&&(n=Cl(t.right,r-1,a)),i.concat(n))},Eh=function(t){for(var r=this.cy(),a=this.nodes(),i=function(t){var r=ff(t),a=gf[r.linkage];return null!=a&&(r.linkage=a),r}(t),n=i.attributes,s=function(X,mt){return Lo(i.distance,n.length,function(ie){return n[ie](X)},function(ie){return n[ie](mt)},X,mt)},o=[],u=[],h=[],f=[],v=0;v<a.length;v++){var m={value:"dendrogram"===i.mode?a[v]:[a[v]],key:v,index:v};o[v]=m,f[v]=m,u[v]=[],h[v]=0}for(var k=0;k<o.length;k++)for(var _=0;_<=k;_++){var U;U="dendrogram"===i.mode?k===_?1/0:s(o[k].value,o[_].value):k===_?1/0:s(o[k].value[0],o[_].value[0]),u[k][_]=U,u[_][k]=U,U<u[k][h[k]]&&(h[k]=_)}for(var I=_h(o,f,u,h,i);I;)I=_h(o,f,u,h,i);var K;return"dendrogram"===i.mode?(K=Cl(o[0],i.dendrogramDepth,r),i.addDendrogram&&El(o[0],r)):(K=new Array(o.length),o.forEach(function(Y,X){Y.key=Y.index=null,K[X]=r.collection(Y.value)})),K},vf={hierarchicalClustering:Eh,hca:Eh},yf=Me({distance:"euclidean",preference:"median",damping:.8,maxIterations:1e3,minIterations:100,attributes:[]}),xf=function(t,r,a,i){var n=function(o,u){return i[u](o)};return-Lo(t,i.length,function(s){return n(r,s)},function(s){return n(a,s)},r,a)},Ch=function(t,r,a){for(var i=[],n=0;n<t;n++){for(var s=-1,o=-1/0,u=0;u<a.length;u++){var h=a[u];r[n*t+h]>o&&(s=h,o=r[n*t+h])}s>0&&i.push(s)}for(var f=0;f<a.length;f++)i[a[f]]=a[f];return i},kh=function(t){for(var r=this.cy(),a=this.nodes(),i=function(t){var r=t.damping,a=t.preference;.5<=r&&r<1||za("Damping must range on [0.5, 1).  Got: ".concat(r));var i=["median","mean","min","max"];return i.some(function(n){return n===a})||Z(a)||za("Preference must be one of [".concat(i.map(function(n){return"'".concat(n,"'")}).join(", "),"] or a number.  Got: ").concat(a)),yf(t)}(t),n={},s=0;s<a.length;s++)n[a[s].id()]=s;var o,u,h,f,v,m,be;u=(o=a.length)*o,h=new Array(u);for(var k=0;k<u;k++)h[k]=-1/0;for(var _=0;_<o;_++)for(var U=0;U<o;U++)_!==U&&(h[_*o+U]=xf(i.distance,a[_],a[U],i.attributes));f=function(t,r){var a;return a="median"===r?function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.length,n=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],s=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];arguments.length>3&&void 0!==arguments[3]&&!arguments[3]?(a<t.length&&t.splice(a,t.length-a),r>0&&t.splice(0,r)):t=t.slice(r,a);for(var o=0,u=t.length-1;u>=0;u--)s?isFinite(t[u])||(t[u]=-1/0,o++):t.splice(u,1);n&&t.sort(function(m,k){return m-k});var f=t.length,v=Math.floor(f/2);return f%2!=0?t[v+1+o]:(t[v-1+o]+t[v+o])/2}(t):"mean"===r?function(t){for(var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.length,i=0,n=0,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;s<a;s++){var o=t[s];isFinite(o)&&(i+=o,n++)}return i/n}(t):"min"===r?function(t){for(var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.length,i=1/0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;n<a;n++){var s=t[n];isFinite(s)&&(i=Math.min(s,i))}return i}(t):"max"===r?function(t){for(var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.length,i=-1/0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;n<a;n++){var s=t[n];isFinite(s)&&(i=Math.max(s,i))}return i}(t):r,a}(h,i.preference);for(var I=0;I<o;I++)h[I*o+I]=f;v=new Array(u);for(var K=0;K<u;K++)v[K]=0;m=new Array(u);for(var Y=0;Y<u;Y++)m[Y]=0;for(var X=new Array(o),mt=new Array(o),ie=new Array(o),se=0;se<o;se++)X[se]=0,mt[se]=0,ie[se]=0;for(var Yt=new Array(o*i.minIterations),he=0;he<Yt.length;he++)Yt[he]=0;for(be=0;be<i.maxIterations;be++){for(var Se=0;Se<o;Se++){for(var De=-1/0,Oe=-1/0,Ne=-1,Je=0,dr=0;dr<o;dr++)X[dr]=v[Se*o+dr],(Je=m[Se*o+dr]+h[Se*o+dr])>=De?(Oe=De,De=Je,Ne=dr):Je>Oe&&(Oe=Je);for(var gr=0;gr<o;gr++)v[Se*o+gr]=(1-i.damping)*(h[Se*o+gr]-De)+i.damping*X[gr];v[Se*o+Ne]=(1-i.damping)*(h[Se*o+Ne]-Oe)+i.damping*X[Ne]}for(var ar=0;ar<o;ar++){for(var Sr=0,Ur=0;Ur<o;Ur++)X[Ur]=m[Ur*o+ar],mt[Ur]=Math.max(0,v[Ur*o+ar]),Sr+=mt[Ur];Sr-=mt[ar],mt[ar]=v[ar*o+ar],Sr+=mt[ar];for(var jr=0;jr<o;jr++)m[jr*o+ar]=(1-i.damping)*Math.min(0,Sr-mt[jr])+i.damping*X[jr];m[ar*o+ar]=(1-i.damping)*(Sr-mt[ar])+i.damping*X[ar]}for(var Mr=0,Wr=0;Wr<o;Wr++){var pa=m[Wr*o+Wr]+v[Wr*o+Wr]>0?1:0;Yt[be%i.minIterations*o+Wr]=pa,Mr+=pa}if(Mr>0&&(be>=i.minIterations-1||be==i.maxIterations-1)){for(var Ea=0,va=0;va<o;va++){ie[va]=0;for(var Aa=0;Aa<i.minIterations;Aa++)ie[va]+=Yt[Aa*o+va];(0===ie[va]||ie[va]===i.minIterations)&&Ea++}if(Ea===o)break}}for(var Ia=function(t,r,a){for(var i=[],n=0;n<t;n++)r[n*t+n]+a[n*t+n]>0&&i.push(n);return i}(o,v,m),Qa=function(t,r,a){for(var i=Ch(t,r,a),n=0;n<a.length;n++){for(var s=[],o=0;o<i.length;o++)i[o]===a[n]&&s.push(o);for(var u=-1,h=-1/0,f=0;f<s.length;f++){for(var v=0,m=0;m<s.length;m++)v+=r[s[m]*t+s[f]];v>h&&(u=f,h=v)}a[n]=s[u]}return Ch(t,r,a)}(o,h,Ia),Ta={},Kr=0;Kr<Ia.length;Kr++)Ta[Ia[Kr]]=[];for(var $r=0;$r<a.length;$r++){var xa=Qa[n[a[$r].id()]];null!=xa&&Ta[xa].push(a[$r])}for(var Ga=new Array(Ia.length),li=0;li<Ia.length;li++)Ga[li]=r.collection(Ta[Ia[li]]);return Ga},Cf={affinityPropagation:kh,ap:kh},kf=Me({root:void 0,directed:!1}),Tf={hierholzer:function(t){if(!Bt(t)){var r=arguments;t={root:r[0],directed:r[1]}}var u,h,f,a=kf(t),i=a.root,n=a.directed,s=this,o=!1;i&&(f=Ge(i)?this.filter(i)[0].id():i[0].id());var v={},m={};s.forEach(n?function(Y){var X=Y.id();if(Y.isNode()){var mt=Y.indegree(!0),ie=Y.outdegree(!0),se=mt-ie,Yt=ie-mt;1==se?u?o=!0:u=X:1==Yt?h?o=!0:h=X:(Yt>1||se>1)&&(o=!0),v[X]=[],Y.outgoers().forEach(function(he){he.isEdge()&&v[X].push(he.id())})}else m[X]=[void 0,Y.target().id()]}:function(Y){var X=Y.id();Y.isNode()?(Y.degree(!0)%2&&(u?h?o=!0:h=X:u=X),v[X]=[],Y.connectedEdges().forEach(function(ie){return v[X].push(ie.id())})):m[X]=[Y.source().id(),Y.target().id()]});var k={found:!1,trail:void 0};if(o)return k;if(h&&u)if(n){if(f&&h!=f)return k;f=h}else{if(f&&h!=f&&u!=f)return k;f||(f=h)}else f||(f=s[0].id());var _=function(X){for(var se,Yt,he,mt=X,ie=[X];v[mt].length;)se=v[mt].shift(),Yt=m[se][0],mt!=(he=m[se][1])?(v[he]=v[he].filter(function(be){return be!=se}),mt=he):!n&&mt!=Yt&&(v[Yt]=v[Yt].filter(function(be){return be!=se}),mt=Yt),ie.unshift(se),ie.unshift(mt);return ie},U=[],I=[];for(I=_(f);1!=I.length;)0==v[I[0]].length?(U.unshift(s.getElementById(I.shift())),U.unshift(s.getElementById(I.shift()))):I=_(I.shift()).concat(I);for(var K in U.unshift(s.getElementById(I.shift())),v)if(v[K].length)return k;return k.found=!0,k.trail=this.spawn(U,!0),k}},Ro=function(){var t=this,r={},a=0,i=0,n=[],s=[],o={},h=function(m,k,_){m===_&&(i+=1),r[k]={id:a,low:a++,cutVertex:!1};var I,K,Y,X,U=t.getElementById(k).connectedEdges().intersection(t);0===U.size()?n.push(t.spawn(t.getElementById(k))):U.forEach(function(mt){I=mt.source().id(),K=mt.target().id(),(Y=I===k?K:I)!==_&&(X=mt.id(),o[X]||(o[X]=!0,s.push({x:k,y:Y,edge:mt})),Y in r?r[k].low=Math.min(r[k].low,r[Y].id):(h(m,Y,k),r[k].low=Math.min(r[k].low,r[Y].low),r[k].id<=r[Y].low&&(r[k].cutVertex=!0,function(m,k){for(var _=s.length-1,U=[],I=t.spawn();s[_].x!=m||s[_].y!=k;)U.push(s.pop().edge),_--;U.push(s.pop().edge),U.forEach(function(K){var Y=K.connectedNodes().intersection(t);I.merge(K),Y.forEach(function(X){var mt=X.id(),ie=X.connectedEdges().intersection(t);I.merge(X),I.merge(r[mt].cutVertex?ie.filter(function(se){return se.isLoop()}):ie)})}),n.push(I)}(k,Y))))})};t.forEach(function(v){if(v.isNode()){var m=v.id();m in r||(i=0,h(m,m),r[m].cutVertex=i>1)}});var f=Object.keys(r).filter(function(v){return r[v].cutVertex}).map(function(v){return t.getElementById(v)});return{cut:t.spawn(f),components:n}},Po=function(){var t=this,r={},a=0,i=[],n=[],s=t.spawn(t),o=function(h){if(n.push(h),r[h]={index:a,low:a++,explored:!1},t.getElementById(h).connectedEdges().intersection(t).forEach(function(U){var I=U.target().id();I!==h&&(I in r||o(I),r[I].explored||(r[h].low=Math.min(r[h].low,r[I].low)))}),r[h].index===r[h].low){for(var v=t.spawn();;){var m=n.pop();if(v.merge(t.getElementById(m)),r[m].low=r[h].index,r[m].explored=!0,m===h)break}var k=v.edgesWith(v),_=v.merge(k);i.push(_),s=s.difference(_)}};return t.forEach(function(u){if(u.isNode()){var h=u.id();h in r||o(h)}}),{cut:s,components:i}},Th={};[La,Ha,ni,Pi,ki,Wi,zi,K0,Is,Os,xl,Q0,df,vf,Cf,Tf,{hopcroftTarjanBiconnected:Ro,htbc:Ro,htb:Ro,hopcroftTarjanBiconnectedComponents:Ro},{tarjanStronglyConnected:Po,tsc:Po,tscc:Po,tarjanStronglyConnectedComponents:Po}].forEach(function(e){G(Th,e)});
/*!
      Embeddable Minimum Strictly-Compliant Promises/A+ 1.1.1 Thenable
      Copyright (c) 2013-2014 Ralf S. Engelschall (http://engelschall.com)
      Licensed under The MIT License (http://opensource.org/licenses/MIT)
      */
var Xn=function(t){if(!(this instanceof Xn))return new Xn(t);this.id="Thenable/1.0.7",this.state=0,this.fulfillValue=void 0,this.rejectReason=void 0,this.onFulfilled=[],this.onRejected=[],this.proxy={then:this.then.bind(this)},"function"==typeof t&&t.call(this,this.fulfill.bind(this),this.reject.bind(this))};Xn.prototype={fulfill:function(t){return Dh(this,1,"fulfillValue",t)},reject:function(t){return Dh(this,2,"rejectReason",t)},then:function(t,r){var a=this,i=new Xn;return a.onFulfilled.push(Rh(t,i,"fulfill")),a.onRejected.push(Rh(r,i,"reject")),Lh(a),i.proxy}};var Dh=function(t,r,a,i){return 0===t.state&&(t.state=r,t[a]=i,Lh(t)),t},Lh=function(t){1===t.state?Bh(t,"onFulfilled",t.fulfillValue):2===t.state&&Bh(t,"onRejected",t.rejectReason)},Bh=function(t,r,a){if(0!==t[r].length){var i=t[r];t[r]=[];var n=function(){for(var o=0;o<i.length;o++)i[o](a)};"function"==typeof setImmediate?setImmediate(n):setTimeout(n,0)}},Rh=function(t,r,a){return function(i){if("function"!=typeof t)r[a].call(r,i);else{var n;try{n=t(i)}catch(s){return void r.reject(s)}Ph(r,n)}}},Ph=function(t,r){if(t!==r&&t.proxy!==r){var a;if("object"===vr(r)&&null!==r||"function"==typeof r)try{a=r.then}catch(n){return void t.reject(n)}if("function"!=typeof a)t.fulfill(r);else{var i=!1;try{a.call(r,function(n){i||(i=!0,n===r?t.reject(new TypeError("circular thenable chain")):Ph(t,n))},function(n){i||(i=!0,t.reject(n))})}catch(n){i||t.reject(n)}}}else t.reject(new TypeError("cannot resolve promise with itself"))};Xn.all=function(e){return new Xn(function(t,r){for(var a=new Array(e.length),i=0,n=function(u,h){a[u]=h,++i===e.length&&t(a)},s=0;s<e.length;s++)(function(o){var u=e[o];null!=u&&null!=u.then?u.then(function(v){n(o,v)},function(v){r(v)}):n(o,u)})(s)})},Xn.resolve=function(e){return new Xn(function(t,r){t(e)})},Xn.reject=function(e){return new Xn(function(t,r){r(e)})};var Ks=typeof Promise<"u"?Promise:Xn,kl=function(t,r,a){var i=V(t),n=!i,s=this._private=G({duration:1e3},r,a);if(s.target=t,s.style=s.style||s.css,s.started=!1,s.playing=!1,s.hooked=!1,s.applying=!1,s.progress=0,s.completes=[],s.frames=[],s.complete&&W(s.complete)&&s.completes.push(s.complete),n){var o=t.position();s.startPosition=s.startPosition||{x:o.x,y:o.y},s.startStyle=s.startStyle||t.cy().style().getAnimationStartStyle(t,s.style)}if(i){var u=t.pan();s.startPan={x:u.x,y:u.y},s.startZoom=t.zoom()}this.length=1,this[0]=this},ks=kl.prototype;G(ks,{instanceString:function(){return"animation"},hook:function(){var t=this._private;if(!t.hooked){var a=t.target._private.animation;(t.queue?a.queue:a.current).push(this),re(t.target)&&t.target.cy().addToAnimationPool(t.target),t.hooked=!0}return this},play:function(){var t=this._private;return 1===t.progress&&(t.progress=0),t.playing=!0,t.started=!1,t.stopped=!1,this.hook(),this},playing:function(){return this._private.playing},apply:function(){var t=this._private;return t.applying=!0,t.started=!1,t.stopped=!1,this.hook(),this},applying:function(){return this._private.applying},pause:function(){var t=this._private;return t.playing=!1,t.started=!1,this},stop:function(){var t=this._private;return t.playing=!1,t.started=!1,t.stopped=!0,this},rewind:function(){return this.progress(0)},fastforward:function(){return this.progress(1)},time:function(t){var r=this._private;return void 0===t?r.progress*r.duration:this.progress(t/r.duration)},progress:function(t){var r=this._private,a=r.playing;return void 0===t?r.progress:(a&&this.pause(),r.progress=t,r.started=!1,a&&this.play(),this)},completed:function(){return 1===this._private.progress},reverse:function(){var t=this._private,r=t.playing;r&&this.pause(),t.progress=1-t.progress,t.started=!1;var a=function(h,f){var v=t[h];null!=v&&(t[h]=t[f],t[f]=v)};if(a("zoom","startZoom"),a("pan","startPan"),a("position","startPosition"),t.style)for(var i=0;i<t.style.length;i++){var n=t.style[i],s=n.name,o=t.startStyle[s];t.startStyle[s]=n,t.style[i]=o}return r&&this.play(),this},promise:function(t){var a,r=this._private;return a="frame"===t?r.frames:r.completes,new Ks(function(i,n){a.push(function(){i()})})}}),ks.complete=ks.completed,ks.run=ks.play,ks.running=ks.playing;var Tl,Mh,Sl,Ih,wl,Oh,Al,Nh,Dl,Fh,Ll,Kh,Bl,Wh,Rl,zh,Pl,Vh,Il,Uh,Ol,$h,Nl,Yh,Fl,Hh,Kl,Gh,Wl,qh,zl,jh,Vl,Xh,Ul,Zh,$l,Jh,Yl,tu,Hl,eu,Gl,ru,ql,au,jl,iu,Xl,nu,Zl,su,Ql,ou,Jl,lu,tc,cu,ec,hu,rc,uu,ac,du,ic,fu,nc,gu,sc,pu,oc,vu,lc,mu,cc,bu,hc,_u,uc,Cu,dc,Tu,gc,Su,pc,wu,Af={animated:function(){return function(){var r=this,i=void 0!==r.length?r:[r];if(!(this._private.cy||this).styleEnabled())return!1;var s=i[0];return s?s._private.animation.current.length>0:void 0}},clearQueue:function(){return function(){var r=this,i=void 0!==r.length?r:[r];if(!(this._private.cy||this).styleEnabled())return this;for(var s=0;s<i.length;s++)i[s]._private.animation.queue=[];return this}},delay:function(){return function(r,a){return(this._private.cy||this).styleEnabled()?this.animate({delay:r,duration:r,complete:a}):this}},delayAnimation:function(){return function(r,a){return(this._private.cy||this).styleEnabled()?this.animation({delay:r,duration:r,complete:a}):this}},animation:function(){return function(r,a){var i=this,n=void 0!==i.length,s=n?i:[i],o=this._private.cy||this,u=!n,h=!u;if(!o.styleEnabled())return this;var f=o.style();if(r=G({},r,a),0===Object.keys(r).length)return new kl(s[0],r);switch(void 0===r.duration&&(r.duration=400),r.duration){case"slow":r.duration=600;break;case"fast":r.duration=200}if(h&&(r.style=f.getPropsList(r.style||r.css),r.css=void 0),h&&null!=r.renderedPosition){var m=r.renderedPosition,k=o.pan(),_=o.zoom();r.position=Vn(m,_,k)}if(u&&null!=r.panBy){var U=r.panBy,I=o.pan();r.pan={x:I.x+U.x,y:I.y+U.y}}var K=r.center||r.centre;if(u&&null!=K){var Y=o.getCenterPan(K.eles,r.zoom);null!=Y&&(r.pan=Y)}if(u&&null!=r.fit){var X=r.fit,mt=o.getFitViewport(X.eles||X.boundingBox,X.padding);null!=mt&&(r.pan=mt.pan,r.zoom=mt.zoom)}if(u&&Bt(r.zoom)){var ie=o.getZoomedViewport(r.zoom);null!=ie?(ie.zoomed&&(r.zoom=ie.zoom),ie.panned&&(r.pan=ie.pan)):r.zoom=null}return new kl(s[0],r)}},animate:function(){return function(r,a){var i=this,s=void 0!==i.length?i:[i];if(!(this._private.cy||this).styleEnabled())return this;a&&(r=G({},r,a));for(var u=0;u<s.length;u++){var h=s[u],f=h.animated()&&(void 0===r.queue||r.queue);h.animation(r,f?{queue:!0}:void 0).play()}return this}},stop:function(){return function(r,a){var i=this,s=void 0!==i.length?i:[i],o=this._private.cy||this;if(!o.styleEnabled())return this;for(var u=0;u<s.length;u++){for(var f=s[u]._private,v=f.animation.current,m=0;m<v.length;m++)a&&(v[m]._private.duration=0);r&&(f.animation.queue=[]),a||(f.animation.current=[])}return o.notify("draw"),this}}};function Mo(){return Mh?Tl:(Mh=1,Tl=Array.isArray)}function Mf(){if(Wh)return Bl;Wh=1;var e=function Lf(){if(Oh)return wl;Oh=1;var e=kt(),t=ir();return wl=function s(o){if(!t(o))return!1;var u=e(o);return"[object Function]"==u||"[object GeneratorFunction]"==u||"[object AsyncFunction]"==u||"[object Proxy]"==u}}(),t=function Rf(){if(Fh)return Dl;Fh=1;var a,e=function Bf(){if(Nh)return Al;Nh=1;var e=Xe();return Al=e["__core-js_shared__"]}(),t=(a=/[^.]+$/.exec(e&&e.keys&&e.keys.IE_PROTO||""))?"Symbol(src)_1."+a:"";return Dl=function r(a){return!!t&&t in a},Dl}(),r=ir(),a=function Pf(){if(Kh)return Ll;Kh=1;var t=Function.prototype.toString;return Ll=function r(a){if(null!=a){try{return t.call(a)}catch{}try{return a+""}catch{}}return""}}(),n=/^\[object .+?Constructor\]$/,f=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");return Bl=function v(m){return!(!r(m)||t(m))&&(e(m)?f:n).test(a(m))}}function Ml(){if(Vh)return Pl;Vh=1;var e=Mf(),t=function If(){return zh?Rl:(zh=1,Rl=function e(t,r){return t?.[r]})}();return Pl=function r(a,i){var n=t(a,i);return e(n)?n:void 0}}function Io(){if(Uh)return Il;Uh=1;var t=Ml()(Object,"create");return Il=t}function Qh(){return Zh?Ul:(Zh=1,Ul=function e(t,r){return t===r||t!=t&&r!=r})}function Oo(){if(Jh)return $l;Jh=1;var e=Qh();return $l=function t(r,a){for(var i=r.length;i--;)if(e(r[i][0],a))return i;return-1}}function jf(){if(su)return Zl;su=1;var e=function zf(){if(jh)return zl;jh=1;var e=function Of(){if($h)return Ol;$h=1;var e=Io();return Ol=function t(){this.__data__=e?e(null):{},this.size=0}}(),t=function Nf(){return Yh?Nl:(Yh=1,Nl=function e(t){var r=this.has(t)&&delete this.__data__[t];return this.size-=r?1:0,r})}(),r=function Ff(){if(Hh)return Fl;Hh=1;var e=Io(),a=Object.prototype.hasOwnProperty;return Fl=function i(n){var s=this.__data__;if(e){var o=s[n];return"__lodash_hash_undefined__"===o?void 0:o}return a.call(s,n)?s[n]:void 0}}(),a=function Kf(){if(Gh)return Kl;Gh=1;var e=Io(),r=Object.prototype.hasOwnProperty;return Kl=function a(i){var n=this.__data__;return e?void 0!==n[i]:r.call(n,i)}}(),i=function Wf(){if(qh)return Wl;qh=1;var e=Io();return Wl=function r(a,i){var n=this.__data__;return this.size+=this.has(a)?0:1,n[a]=e&&void 0===i?"__lodash_hash_undefined__":i,this}}();function n(s){var o=-1,u=null==s?0:s.length;for(this.clear();++o<u;){var h=s[o];this.set(h[0],h[1])}}return n.prototype.clear=e,n.prototype.delete=t,n.prototype.get=r,n.prototype.has=a,n.prototype.set=i,zl=n}(),t=function Gf(){if(iu)return jl;iu=1;var e=function Vf(){return Xh?Vl:(Xh=1,Vl=function e(){this.__data__=[],this.size=0})}(),t=function Uf(){if(tu)return Yl;tu=1;var e=Oo(),r=Array.prototype.splice;return Yl=function a(i){var n=this.__data__,s=e(n,i);return!(s<0||(s==n.length-1?n.pop():r.call(n,s,1),--this.size,0))}}(),r=function $f(){if(eu)return Hl;eu=1;var e=Oo();return Hl=function t(r){var a=this.__data__,i=e(a,r);return i<0?void 0:a[i][1]}}(),a=function Yf(){if(ru)return Gl;ru=1;var e=Oo();return Gl=function t(r){return e(this.__data__,r)>-1}}(),i=function Hf(){if(au)return ql;au=1;var e=Oo();return ql=function t(r,a){var i=this.__data__,n=e(i,r);return n<0?(++this.size,i.push([r,a])):i[n][1]=a,this}}();function n(s){var o=-1,u=null==s?0:s.length;for(this.clear();++o<u;){var h=s[o];this.set(h[0],h[1])}}return n.prototype.clear=e,n.prototype.delete=t,n.prototype.get=r,n.prototype.has=a,n.prototype.set=i,jl=n}(),r=function qf(){if(nu)return Xl;nu=1;var r=Ml()(Xe(),"Map");return Xl=r}();return Zl=function a(){this.size=0,this.__data__={hash:new e,map:new(r||t),string:new e}}}function No(){if(lu)return Jl;lu=1;var e=function Xf(){return ou?Ql:(ou=1,Ql=function e(t){var r=typeof t;return"string"==r||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==t:null===t})}();return Jl=function t(r,a){var i=r.__data__;return e(a)?i["string"==typeof a?"string":"hash"]:i.map}}function ag(){if(pu)return sc;pu=1;var e=function rg(){if(gu)return nc;gu=1;var e=function eg(){if(fu)return ic;fu=1;var e=jf(),t=function Zf(){if(cu)return tc;cu=1;var e=No();return tc=function t(r){var a=e(this,r).delete(r);return this.size-=a?1:0,a}}(),r=function Qf(){if(hu)return ec;hu=1;var e=No();return ec=function t(r){return e(this,r).get(r)}}(),a=function Jf(){if(uu)return rc;uu=1;var e=No();return rc=function t(r){return e(this,r).has(r)}}(),i=function tg(){if(du)return ac;du=1;var e=No();return ac=function t(r,a){var i=e(this,r),n=i.size;return i.set(r,a),this.size+=i.size==n?0:1,this}}();function n(s){var o=-1,u=null==s?0:s.length;for(this.clear();++o<u;){var h=s[o];this.set(h[0],h[1])}}return n.prototype.clear=e,n.prototype.delete=t,n.prototype.get=r,n.prototype.has=a,n.prototype.set=i,ic=n}();function r(a,i){if("function"!=typeof a||null!=i&&"function"!=typeof i)throw new TypeError("Expected a function");var n=function(){var s=arguments,o=i?i.apply(this,s):s[0],u=n.cache;if(u.has(o))return u.get(o);var h=a.apply(this,s);return n.cache=u.set(o,h)||u,h};return n.cache=new(r.Cache||e),n}return r.Cache=e,nc=r}();return sc=function r(a){var i=e(a,function(s){return 500===n.size&&n.clear(),s}),n=i.cache;return i}}function yu(){if(vu)return oc;vu=1;var e=ag(),t=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,r=/\\(\\)?/g,a=e(function(i){var n=[];return 46===i.charCodeAt(0)&&n.push(""),i.replace(t,function(s,o,u,h){n.push(u?h.replace(r,"$1"):o||s)}),n});return oc=a}function xu(){return mu?lc:(mu=1,lc=function e(t,r){for(var a=-1,i=null==t?0:t.length,n=Array(i);++a<i;)n[a]=r(t[a],a,t);return n})}function Eu(){if(_u)return hc;_u=1;var e=function ig(){if(bu)return cc;bu=1;var e=P(),t=xu(),r=Mo(),a=ze(),i=e?e.prototype:void 0,n=i?i.toString:void 0;return cc=function s(o){if("string"==typeof o)return o;if(r(o))return t(o,s)+"";if(a(o))return n?n.call(o):"";var u=o+"";return"0"==u&&1/o==-1/0?"-0":u}}();return hc=function t(r){return null==r?"":e(r)}}function ku(){if(Cu)return uc;Cu=1;var e=Mo(),t=function Df(){if(Ih)return Sl;Ih=1;var e=Mo(),t=ze(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;return Sl=function i(n,s){if(e(n))return!1;var o=typeof n;return!("number"!=o&&"symbol"!=o&&"boolean"!=o&&null!=n&&!t(n))||a.test(n)||!r.test(n)||null!=s&&n in Object(s)}}(),r=yu(),a=Eu();return uc=function i(n,s){return e(n)?n:t(n,s)?[n]:r(a(n))}}function fc(){if(Tu)return dc;Tu=1;var e=ze();return dc=function t(r){if("string"==typeof r||e(r))return r;var a=r+"";return"0"==a&&1/r==-1/0?"-0":a}}var vc,Au,yc,Du,mc,Lu,xc,Bu,bc,Ru,_c,Pu,og=function sg(){if(wu)return pc;wu=1;var e=function ng(){if(Su)return gc;Su=1;var e=ku(),t=fc();return gc=function r(a,i){for(var n=0,s=(i=e(i,a)).length;null!=a&&n<s;)a=a[t(i[n++])];return n&&n==s?a:void 0}}();return pc=function t(r,a,i){var n=null==r?void 0:e(r,a);return void 0===n?i:n}}(),lg=ur(og);function fg(){if(Ru)return bc;Ru=1;var e=function ug(){if(Lu)return mc;Lu=1;var e=function hg(){if(Du)return yc;Du=1;var e=function cg(){if(Au)return vc;Au=1;var e=Ml(),t=function(){try{var r=e(Object,"defineProperty");return r({},"",{}),r}catch{}}();return vc=t}();return yc=function t(r,a,i){"__proto__"==a&&e?e(r,a,{configurable:!0,enumerable:!0,value:i,writable:!0}):r[a]=i}}(),t=Qh(),a=Object.prototype.hasOwnProperty;return mc=function i(n,s,o){var u=n[s];(!a.call(n,s)||!t(u,o)||void 0===o&&!(s in n))&&e(n,s,o)}}(),t=ku(),r=function dg(){if(Bu)return xc;Bu=1;var t=/^(?:0|[1-9]\d*)$/;return xc=function r(a,i){var n=typeof a;return!!(i=i??9007199254740991)&&("number"==n||"symbol"!=n&&t.test(a))&&a>-1&&a%1==0&&a<i}}(),a=ir(),i=fc();return bc=function n(s,o,u,h){if(!a(s))return s;for(var f=-1,v=(o=t(o,s)).length,m=v-1,k=s;null!=k&&++f<v;){var _=i(o[f]),U=u;if("__proto__"===_||"constructor"===_||"prototype"===_)return s;if(f!=m){var I=k[_];void 0===(U=h?h(I,_,k):void 0)&&(U=a(I)?I:r(o[f+1])?[]:{})}e(k,_,U),k=k[_]}return s}}var Ec,Mu,Cc,Iu,vg=ur(function gg(){if(Pu)return _c;Pu=1;var e=fg();return _c=function t(r,a,i){return null==r?r:e(r,a,i)}}()),xg=function mg(){if(Iu)return Cc;Iu=1;var e=xu(),t=function yg(){return Mu?Ec:(Mu=1,Ec=function e(t,r){var a=-1,i=t.length;for(r||(r=Array(i));++a<i;)r[a]=t[a];return r})}(),r=Mo(),a=ze(),i=yu(),n=fc(),s=Eu();return Cc=function o(u){return r(u)?e(u,n):a(u)?[u]:t(i(s(u)))}}(),bg=ur(xg),_g={data:function(t){return t=G({},{field:"data",bindingEvent:"data",allowBinding:!1,allowSetting:!1,allowGetting:!1,settingEvent:"data",settingTriggersEvent:!1,triggerFnName:"trigger",immutableKeys:{},updateStyle:!1,beforeGet:function(i){},beforeSet:function(i,n){},onSet:function(i){},canSet:function(i){return!0}},t),function(i,n){var s=t,o=this,u=void 0!==o.length,h=u?o:[o],f=u?o[0]:o;if(Ge(i)){var k,m=-1!==i.indexOf(".")&&bg(i);if(s.allowGetting&&void 0===n)return f&&(s.beforeGet(f),k=m&&void 0===f._private[s.field][i]?lg(f._private[s.field],m):f._private[s.field][i]),k;if(s.allowSetting&&void 0!==n&&!s.immutableKeys[i]){var U=A({},i,n);s.beforeSet(o,U);for(var I=0,K=h.length;I<K;I++){var Y=h[I];s.canSet(Y)&&(m&&void 0===f._private[s.field][i]?vg(Y._private[s.field],m,n):Y._private[s.field][i]=n)}s.updateStyle&&o.updateStyle(),s.onSet(o),s.settingTriggersEvent&&o[s.triggerFnName](s.settingEvent)}}else if(s.allowSetting&&Bt(i)){var mt,ie,X=i,se=Object.keys(X);s.beforeSet(o,X);for(var Yt=0;Yt<se.length;Yt++)if(ie=X[mt=se[Yt]],!s.immutableKeys[mt])for(var be=0;be<h.length;be++){var Se=h[be];s.canSet(Se)&&(Se._private[s.field][mt]=ie)}s.updateStyle&&o.updateStyle(),s.onSet(o),s.settingTriggersEvent&&o[s.triggerFnName](s.settingEvent)}else if(s.allowBinding&&W(i))o.on(s.bindingEvent,i);else if(s.allowGetting&&void 0===i){var Oe;return f&&(s.beforeGet(f),Oe=f._private[s.field]),Oe}return o}},removeData:function(t){return t=G({},{field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!1,immutableKeys:{}},t),function(i){var n=t,s=this,u=void 0!==s.length?s:[s];if(Ge(i)){for(var h=i.split(/\s+/),f=h.length,v=0;v<f;v++){var m=h[v];if(!Nt(m)&&!n.immutableKeys[m])for(var _=0,U=u.length;_<U;_++)u[_]._private[n.field][m]=void 0}n.triggerEvent&&s[n.triggerFnName](n.event)}else if(void 0===i){for(var I=0,K=u.length;I<K;I++)for(var Y=u[I]._private[n.field],X=Object.keys(Y),mt=0;mt<X.length;mt++){var ie=X[mt];!n.immutableKeys[ie]&&(Y[ie]=void 0)}n.triggerEvent&&s[n.triggerFnName](n.event)}return s}}},Eg={eventAliasesOn:function(t){var r=t;r.addListener=r.listen=r.bind=r.on,r.unlisten=r.unbind=r.off=r.removeListener,r.trigger=r.emit,r.pon=r.promiseOn=function(a,i){var n=this,s=Array.prototype.slice.call(arguments,0);return new Ks(function(o,u){var f=s.concat([function(k){n.off.apply(n,v),o(k)}]),v=f.concat([]);n.on.apply(n,f)})}}},$i={};[Af,_g,Eg].forEach(function(e){G($i,e)});var Cg={animate:$i.animate(),animation:$i.animation(),animated:$i.animated(),clearQueue:$i.clearQueue(),delay:$i.delay(),delayAnimation:$i.delayAnimation(),stop:$i.stop()},Fo={classes:function(t){var r=this;if(void 0===t){var a=[];return r[0]._private.classes.forEach(function(_){return a.push(_)}),a}ft(t)||(t=(t||"").match(/\S+/g)||[]);for(var i=[],n=new ta(t),s=0;s<r.length;s++){for(var o=r[s],u=o._private,h=u.classes,f=!1,v=0;v<t.length;v++)if(!h.has(t[v])){f=!0;break}f||(f=h.size!==t.length),f&&(u.classes=n,i.push(o))}return i.length>0&&this.spawn(i).updateStyle().emit("class"),r},addClass:function(t){return this.toggleClass(t,!0)},hasClass:function(t){var r=this[0];return null!=r&&r._private.classes.has(t)},toggleClass:function(t,r){ft(t)||(t=t.match(/\S+/g)||[]);for(var a=this,i=void 0===r,n=[],s=0,o=a.length;s<o;s++)for(var u=a[s],h=u._private.classes,f=!1,v=0;v<t.length;v++){var m=t[v],k=h.has(m),_=!1;r||i&&!k?(h.add(m),_=!0):(!r||i&&k)&&(h.delete(m),_=!0),!f&&_&&(n.push(u),f=!0)}return n.length>0&&this.spawn(n).updateStyle().emit("class"),a},removeClass:function(t){return this.toggleClass(t,!1)},flashClass:function(t,r){var a=this;if(null==r)r=250;else if(0===r)return a;return a.addClass(t),setTimeout(function(){a.removeClass(t)},r),a}};Fo.className=Fo.classNames=Fo.classes;var Ni={metaChar:"[\\!\\\"\\#\\$\\%\\&\\'\\(\\)\\*\\+\\,\\.\\/\\:\\;\\<\\=\\>\\?\\@\\[\\]\\^\\`\\{\\|\\}\\~]",comparatorOp:"=|\\!=|>|>=|<|<=|\\$=|\\^=|\\*=",boolOp:"\\?|\\!|\\^",string:"\"(?:\\\\\"|[^\"])*\"|'(?:\\\\'|[^'])*'",number:R,meta:"degree|indegree|outdegree",separator:"\\s*,\\s*",descendant:"\\s+",child:"\\s+>\\s+",subject:"\\$",group:"node|edge|\\*",directedEdge:"\\s+->\\s+",undirectedEdge:"\\s+<->\\s+"};Ni.variable="(?:[\\w-.]|(?:\\\\"+Ni.metaChar+"))+",Ni.className="(?:[\\w-]|(?:\\\\"+Ni.metaChar+"))+",Ni.value=Ni.string+"|"+Ni.number,Ni.id=Ni.variable,function(){var e,t,r;for(e=Ni.comparatorOp.split("|"),r=0;r<e.length;r++)Ni.comparatorOp+="|@"+(t=e[r]);for(e=Ni.comparatorOp.split("|"),r=0;r<e.length;r++)!((t=e[r]).indexOf("!")>=0)&&"="!==t&&(Ni.comparatorOp+="|\\!"+t)}();var kc=[{selector:":selected",matches:function(t){return t.selected()}},{selector:":unselected",matches:function(t){return!t.selected()}},{selector:":selectable",matches:function(t){return t.selectable()}},{selector:":unselectable",matches:function(t){return!t.selectable()}},{selector:":locked",matches:function(t){return t.locked()}},{selector:":unlocked",matches:function(t){return!t.locked()}},{selector:":visible",matches:function(t){return t.visible()}},{selector:":hidden",matches:function(t){return!t.visible()}},{selector:":transparent",matches:function(t){return t.transparent()}},{selector:":grabbed",matches:function(t){return t.grabbed()}},{selector:":free",matches:function(t){return!t.grabbed()}},{selector:":removed",matches:function(t){return t.removed()}},{selector:":inside",matches:function(t){return!t.removed()}},{selector:":grabbable",matches:function(t){return t.grabbable()}},{selector:":ungrabbable",matches:function(t){return!t.grabbable()}},{selector:":animated",matches:function(t){return t.animated()}},{selector:":unanimated",matches:function(t){return!t.animated()}},{selector:":parent",matches:function(t){return t.isParent()}},{selector:":childless",matches:function(t){return t.isChildless()}},{selector:":child",matches:function(t){return t.isChild()}},{selector:":orphan",matches:function(t){return t.isOrphan()}},{selector:":nonorphan",matches:function(t){return t.isChild()}},{selector:":compound",matches:function(t){return t.isNode()?t.isParent():t.source().isParent()||t.target().isParent()}},{selector:":loop",matches:function(t){return t.isLoop()}},{selector:":simple",matches:function(t){return t.isSimple()}},{selector:":active",matches:function(t){return t.active()}},{selector:":inactive",matches:function(t){return!t.active()}},{selector:":backgrounding",matches:function(t){return t.backgrounding()}},{selector:":nonbackgrounding",matches:function(t){return!t.backgrounding()}}].sort(function(e,t){return function(t,r){return-1*ut(t,r)}(e.selector,t.selector)}),kg=function(){for(var t,e={},r=0;r<kc.length;r++)e[(t=kc[r]).selector]=t.matches;return e}(),Sg="("+kc.map(function(e){return e.selector}).join("|")+")",Ws=function(t){return t.replace(new RegExp("\\\\("+Ni.metaChar+")","g"),function(r,a){return a})},fs=function(t,r,a){t[t.length-1]=a},Tc=[{name:"group",query:!0,regex:"("+Ni.group+")",populate:function(t,r,a){var n=Xt(a,1)[0];r.checks.push({type:0,value:"*"===n?n:n+"s"})}},{name:"state",query:!0,regex:Sg,populate:function(t,r,a){var i=Xt(a,1);r.checks.push({type:7,value:i[0]})}},{name:"id",query:!0,regex:"\\#("+Ni.id+")",populate:function(t,r,a){var i=Xt(a,1);r.checks.push({type:8,value:Ws(i[0])})}},{name:"className",query:!0,regex:"\\.("+Ni.className+")",populate:function(t,r,a){var i=Xt(a,1);r.checks.push({type:9,value:Ws(i[0])})}},{name:"dataExists",query:!0,regex:"\\[\\s*("+Ni.variable+")\\s*\\]",populate:function(t,r,a){var i=Xt(a,1);r.checks.push({type:4,field:Ws(i[0])})}},{name:"dataCompare",query:!0,regex:"\\[\\s*("+Ni.variable+")\\s*("+Ni.comparatorOp+")\\s*("+Ni.value+")\\s*\\]",populate:function(t,r,a){var i=Xt(a,3),n=i[0],s=i[1],o=i[2];o=null!=new RegExp("^"+Ni.string+"$").exec(o)?o.substring(1,o.length-1):parseFloat(o),r.checks.push({type:3,field:Ws(n),operator:s,value:o})}},{name:"dataBool",query:!0,regex:"\\[\\s*("+Ni.boolOp+")\\s*("+Ni.variable+")\\s*\\]",populate:function(t,r,a){var i=Xt(a,2),n=i[0];r.checks.push({type:5,field:Ws(i[1]),operator:n})}},{name:"metaCompare",query:!0,regex:"\\[\\[\\s*("+Ni.meta+")\\s*("+Ni.comparatorOp+")\\s*("+Ni.number+")\\s*\\]\\]",populate:function(t,r,a){var i=Xt(a,3),s=i[1],o=i[2];r.checks.push({type:6,field:Ws(i[0]),operator:s,value:parseFloat(o)})}},{name:"nextQuery",separator:!0,regex:Ni.separator,populate:function(t,r){var a=t.currentSubject,i=t.edgeCount,n=t.compoundCount,s=t[t.length-1];return null!=a&&(s.subject=a,t.currentSubject=null),s.edgeCount=i,s.compoundCount=n,t.edgeCount=0,t.compoundCount=0,t[t.length++]={checks:[]}}},{name:"directedEdge",separator:!0,regex:Ni.directedEdge,populate:function(t,r){if(null==t.currentSubject){var a={checks:[]},n={checks:[]};return a.checks.push({type:11,source:r,target:n}),fs(t,0,a),t.edgeCount++,n}var s={checks:[]},u={checks:[]};return s.checks.push({type:12,source:r,target:u}),fs(t,0,s),t.edgeCount++,u}},{name:"undirectedEdge",separator:!0,regex:Ni.undirectedEdge,populate:function(t,r){if(null==t.currentSubject){var a={checks:[]},n={checks:[]};return a.checks.push({type:10,nodes:[r,n]}),fs(t,0,a),t.edgeCount++,n}var s={checks:[]},u={checks:[]};return s.checks.push({type:14,node:r,neighbor:u}),fs(t,0,s),u}},{name:"child",separator:!0,regex:Ni.child,populate:function(t,r){if(null==t.currentSubject){var a={checks:[]},i={checks:[]};return a.checks.push({type:15,parent:t[t.length-1],child:i}),fs(t,0,a),t.compoundCount++,i}if(t.currentSubject===r){var s={checks:[]},u={checks:[]},h={checks:[]},f={checks:[]},v={checks:[]};return s.checks.push({type:19,left:t[t.length-1],right:u,subject:h}),h.checks=r.checks,r.checks=[{type:20}],v.checks.push({type:20}),u.checks.push({type:17,parent:v,child:f}),fs(t,0,s),t.currentSubject=h,t.compoundCount++,f}var m={checks:[]},k={checks:[]},_=[{type:17,parent:m,child:k}];return m.checks=r.checks,r.checks=_,t.compoundCount++,k}},{name:"descendant",separator:!0,regex:Ni.descendant,populate:function(t,r){if(null==t.currentSubject){var a={checks:[]},i={checks:[]};return a.checks.push({type:16,ancestor:t[t.length-1],descendant:i}),fs(t,0,a),t.compoundCount++,i}if(t.currentSubject===r){var s={checks:[]},u={checks:[]},h={checks:[]},f={checks:[]},v={checks:[]};return s.checks.push({type:19,left:t[t.length-1],right:u,subject:h}),h.checks=r.checks,r.checks=[{type:20}],v.checks.push({type:20}),u.checks.push({type:18,ancestor:v,descendant:f}),fs(t,0,s),t.currentSubject=h,t.compoundCount++,f}var m={checks:[]},k={checks:[]},_=[{type:18,ancestor:m,descendant:k}];return m.checks=r.checks,r.checks=_,t.compoundCount++,k}},{name:"subject",modifier:!0,regex:Ni.subject,populate:function(t,r){if(null!=t.currentSubject&&t.currentSubject!==r)return Sa("Redefinition of subject in selector `"+t.toString()+"`"),!1;t.currentSubject=r;var i=t[t.length-1].checks[0],n=null==i?null:i.type;11===n?i.type=13:10===n&&(i.type=14,i.node=i.nodes[1],i.neighbor=i.nodes[0],i.nodes=null)}}];Tc.forEach(function(e){return e.regexObj=new RegExp("^"+e.regex)});var wg=function(t){for(var r,a,i,n=0;n<Tc.length;n++){var s=Tc[n],o=s.name,u=t.match(s.regexObj);if(null!=u){a=u,r=s,i=o,t=t.substring(u[0].length);break}}return{expr:r,match:a,name:i,remaining:t}},Bg={parse:function(t){var r=this,a=r.inputText=t,i=r[0]={checks:[]};for(r.length=1,a=function(t){var r=t.match(/^\s+/);return r&&(t=t.substring(r[0].length)),t}(a);;){var n=wg(a);if(null==n.expr)return Sa("The selector `"+t+"`is invalid"),!1;var s=n.match.slice(1),o=n.expr.populate(r,i,s);if(!1===o)return!1;if(null!=o&&(i=o),(a=n.remaining).match(/^\s*$/))break}var u=r[r.length-1];null!=r.currentSubject&&(u.subject=r.currentSubject),u.edgeCount=r.edgeCount,u.compoundCount=r.compoundCount;for(var h=0;h<r.length;h++){var f=r[h];if(f.compoundCount>0&&f.edgeCount>0)return Sa("The selector `"+t+"` is invalid because it uses both a compound selector and an edge selector"),!1;if(f.edgeCount>1)return Sa("The selector `"+t+"` is invalid because it uses multiple edge selectors"),!1;1===f.edgeCount&&Sa("The selector `"+t+"` is deprecated.  Edge selectors do not take effect on changes to source and target nodes after an edge is added, for performance reasons.  Use a class or data selector on edges instead, updating the class or data of an edge when your app detects a change in source or target nodes.")}return!0},toString:function(){if(null!=this.toStringCache)return this.toStringCache;for(var t=function(f){return f??""},r=function(f){return Ge(f)?'"'+f+'"':t(f)},a=function(f){return" "+f+" "},n=function(f,v){return f.checks.reduce(function(m,k,_){return m+(v===f&&0===_?"$":"")+function(f,v){var k=f.value;switch(f.type){case 0:var _=t(k);return _.substring(0,_.length-1);case 3:return"["+f.field+a(t(f.operator))+r(k)+"]";case 5:var Y=f.field;return"["+t(f.operator)+Y+"]";case 4:return"["+f.field+"]";case 6:return"[["+f.field+a(t(f.operator))+r(k)+"]]";case 7:return k;case 8:return"#"+k;case 9:return"."+k;case 17:case 15:return n(f.parent,v)+a(">")+n(f.child,v);case 18:case 16:return n(f.ancestor,v)+" "+n(f.descendant,v);case 19:var se=n(f.left,v),Yt=n(f.subject,v),he=n(f.right,v);return se+(se.length>0?" ":"")+Yt+he;case 20:return""}}(k,v)},"")},s="",o=0;o<this.length;o++){var u=this[o];s+=n(u,u.subject),this.length>1&&o<this.length-1&&(s+=", ")}return this.toStringCache=s,s}},Ou=function(t,r,a){var i,u,h,n=Ge(t),s=Z(t),o=Ge(a),f=!1,v=!1,m=!1;switch(r.indexOf("!")>=0&&(r=r.replace("!",""),v=!0),r.indexOf("@")>=0&&(r=r.replace("@",""),f=!0),(n||o||f)&&(u=n||s?""+t:"",h=""+a),f&&(t=u=u.toLowerCase(),a=h=h.toLowerCase()),r){case"*=":i=u.indexOf(h)>=0;break;case"$=":i=u.indexOf(h,u.length-h.length)>=0;break;case"^=":i=0===u.indexOf(h);break;case"=":i=t===a;break;case">":m=!0,i=t>a;break;case">=":m=!0,i=t>=a;break;case"<":m=!0,i=t<a;break;case"<=":m=!0,i=t<=a;break;default:i=!1}return v&&(null!=t||!m)&&(i=!i),i},Sc=function(t,r){return t.data(r)},sn=[],en=function(t,r){return t.checks.every(function(a){return sn[a.type](a,r)})};sn[0]=function(e,t){var r=e.value;return"*"===r||r===t.group()},sn[7]=function(e,t){return function(t,r){return kg[t](r)}(e.value,t)},sn[8]=function(e,t){var r=e.value;return t.id()===r},sn[9]=function(e,t){return t.hasClass(e.value)},sn[6]=function(e,t){var a=e.operator,i=e.value;return Ou(function(t,r){return t[r]()}(t,e.field),a,i)},sn[3]=function(e,t){var a=e.operator,i=e.value;return Ou(Sc(t,e.field),a,i)},sn[5]=function(e,t){var a=e.operator;return function(t,r){switch(r){case"?":return!!t;case"!":return!t;case"^":return void 0===t}}(Sc(t,e.field),a)},sn[4]=function(e,t){return function(t){return void 0!==t}(Sc(t,e.field))},sn[10]=function(e,t){var r=e.nodes[0],a=e.nodes[1],i=t.source(),n=t.target();return en(r,i)&&en(a,n)||en(a,i)&&en(r,n)},sn[14]=function(e,t){return en(e.node,t)&&t.neighborhood().some(function(r){return r.isNode()&&en(e.neighbor,r)})},sn[11]=function(e,t){return en(e.source,t.source())&&en(e.target,t.target())},sn[12]=function(e,t){return en(e.source,t)&&t.outgoers().some(function(r){return r.isNode()&&en(e.target,r)})},sn[13]=function(e,t){return en(e.target,t)&&t.incomers().some(function(r){return r.isNode()&&en(e.source,r)})},sn[15]=function(e,t){return en(e.child,t)&&en(e.parent,t.parent())},sn[17]=function(e,t){return en(e.parent,t)&&t.children().some(function(r){return en(e.child,r)})},sn[16]=function(e,t){return en(e.descendant,t)&&t.ancestors().some(function(r){return en(e.ancestor,r)})},sn[18]=function(e,t){return en(e.ancestor,t)&&t.descendants().some(function(r){return en(e.descendant,r)})},sn[19]=function(e,t){return en(e.subject,t)&&en(e.left,t)&&en(e.right,t)},sn[20]=function(){return!0},sn[1]=function(e,t){return e.value.has(t)},sn[2]=function(e,t){return(0,e.value)(t)};var Ng={matches:function(t){for(var a=0;a<this.length;a++)if(en(this[a],t))return!0;return!1},filter:function(t){var r=this;if(1===r.length&&1===r[0].checks.length&&8===r[0].checks[0].type)return t.getElementById(r[0].checks[0].value).collection();var a=function(n){for(var s=0;s<r.length;s++)if(en(r[s],n))return!0;return!1};return null==r.text()&&(a=function(){return!0}),t.filter(a)}},gs=function(t){this.inputText=t,this.currentSubject=null,this.compoundCount=0,this.edgeCount=0,this.length=0,null==t||Ge(t)&&t.match(/^\s*$/)||(re(t)?this.addQuery({checks:[{type:1,value:t.collection()}]}):W(t)?this.addQuery({checks:[{type:2,value:t}]}):Ge(t)?this.parse(t)||(this.invalid=!0):za("A selector must be created from a string; found "))},ps=gs.prototype;[Bg,Ng].forEach(function(e){return G(ps,e)}),ps.text=function(){return this.inputText},ps.size=function(){return this.length},ps.eq=function(e){return this[e]},ps.sameText=function(e){return!this.invalid&&!e.invalid&&this.text()===e.text()},ps.addQuery=function(e){this[this.length++]=e},ps.selector=ps.toString;var vs={allAre:function(t){var r=new gs(t);return this.every(function(a){return r.matches(a)})},is:function(t){var r=new gs(t);return this.some(function(a){return r.matches(a)})},some:function(t,r){for(var a=0;a<this.length;a++)if(r?t.apply(r,[this[a],a,this]):t(this[a],a,this))return!0;return!1},every:function(t,r){for(var a=0;a<this.length;a++)if(!(r?t.apply(r,[this[a],a,this]):t(this[a],a,this)))return!1;return!0},same:function(t){if(this===t)return!0;t=this.cy().collection(t);var r=this.length;return r===t.length&&(1===r?this[0]===t[0]:this.every(function(i){return t.hasElementWithId(i.id())}))},anySame:function(t){return t=this.cy().collection(t),this.some(function(r){return t.hasElementWithId(r.id())})},allAreNeighbors:function(t){t=this.cy().collection(t);var r=this.neighborhood();return t.every(function(a){return r.hasElementWithId(a.id())})},contains:function(t){t=this.cy().collection(t);var r=this;return t.every(function(a){return r.hasElementWithId(a.id())})}};vs.allAreNeighbours=vs.allAreNeighbors,vs.has=vs.contains,vs.equal=vs.equals=vs.same;var io,Ku,Hn=function(t,r){return function(i,n,s,o){var f,u=i,h=this;if(null==u?f="":re(u)&&1===u.length&&(f=u.id()),1===h.length&&f){var v=h[0]._private,m=v.traversalCache=v.traversalCache||{},k=m[r]=m[r]||[],_=ga(f);return k[_]||(k[_]=t.call(h,i,n,s,o))}return t.call(h,i,n,s,o)}},zs={parent:function(t){var r=[];if(1===this.length){var a=this[0]._private.parent;if(a)return a}for(var i=0;i<this.length;i++){var s=this[i]._private.parent;s&&r.push(s)}return this.spawn(r,!0).filter(t)},parents:function(t){for(var r=[],a=this.parent();a.nonempty();){for(var i=0;i<a.length;i++)r.push(a[i]);a=a.parent()}return this.spawn(r,!0).filter(t)},commonAncestors:function(t){for(var r,a=0;a<this.length;a++){var n=this[a].parents();r=(r=r||n).intersect(n)}return r.filter(t)},orphans:function(t){return this.stdFilter(function(r){return r.isOrphan()}).filter(t)},nonorphans:function(t){return this.stdFilter(function(r){return r.isChild()}).filter(t)},children:Hn(function(e){for(var t=[],r=0;r<this.length;r++)for(var i=this[r]._private.children,n=0;n<i.length;n++)t.push(i[n]);return this.spawn(t,!0).filter(e)},"children"),siblings:function(t){return this.parent().children().not(this).filter(t)},isParent:function(){var t=this[0];if(t)return t.isNode()&&0!==t._private.children.length},isChildless:function(){var t=this[0];if(t)return t.isNode()&&0===t._private.children.length},isChild:function(){var t=this[0];if(t)return t.isNode()&&null!=t._private.parent},isOrphan:function(){var t=this[0];if(t)return t.isNode()&&null==t._private.parent},descendants:function(t){var r=[];return function a(i){for(var n=0;n<i.length;n++){var s=i[n];r.push(s),s.children().nonempty()&&a(s.children())}}(this.children()),this.spawn(r,!0).filter(t)}};function wc(e,t,r,a){for(var i=[],n=new ta,o=e.cy().hasCompoundNodes(),u=0;u<e.length;u++){var h=e[u];r?i.push(h):o&&a(i,n,h)}for(;i.length>0;){var f=i.shift();t(f),n.add(f.id()),o&&a(i,n,f)}return e}function Nu(e,t,r){if(r.isParent())for(var a=r._private.children,i=0;i<a.length;i++){var n=a[i];t.has(n.id())||e.push(n)}}function Fu(e,t,r){if(r.isChild()){var a=r._private.parent;t.has(a.id())||e.push(a)}}function Fg(e,t,r){Fu(e,t,r),Nu(e,t,r)}zs.forEachDown=function(e){return wc(this,e,!(arguments.length>1&&void 0!==arguments[1])||arguments[1],Nu)},zs.forEachUp=function(e){return wc(this,e,!(arguments.length>1&&void 0!==arguments[1])||arguments[1],Fu)},zs.forEachUpAndDown=function(e){return wc(this,e,!(arguments.length>1&&void 0!==arguments[1])||arguments[1],Fg)},zs.ancestors=zs.parents,io=Ku={data:$i.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),removeData:$i.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),scratch:$i.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:$i.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),rscratch:$i.data({field:"rscratch",allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!0}),removeRscratch:$i.removeData({field:"rscratch",triggerEvent:!1}),id:function(){var t=this[0];if(t)return t._private.data.id}},io.attr=io.data,io.removeAttr=io.removeData;var Kg=Ku,Ko={};function Ac(e){return function(t){var r=this;if(void 0===t&&(t=!0),0===r.length);else if(r.isNode()&&!r.removed()){for(var a=0,i=r[0],n=i._private.edges,s=0;s<n.length;s++){var o=n[s];!t&&o.isLoop()||(a+=e(i,o))}return a}}}function Vs(e,t){return function(r){for(var a,i=this.nodes(),n=0;n<i.length;n++){var o=i[n][e](r);void 0!==o&&(void 0===a||t(o,a))&&(a=o)}return a}}G(Ko,{degree:Ac(function(e,t){return t.source().same(t.target())?2:1}),indegree:Ac(function(e,t){return t.target().same(e)?1:0}),outdegree:Ac(function(e,t){return t.source().same(e)?1:0})}),G(Ko,{minDegree:Vs("degree",function(e,t){return e<t}),maxDegree:Vs("degree",function(e,t){return e>t}),minIndegree:Vs("indegree",function(e,t){return e<t}),maxIndegree:Vs("indegree",function(e,t){return e>t}),minOutdegree:Vs("outdegree",function(e,t){return e<t}),maxOutdegree:Vs("outdegree",function(e,t){return e>t})}),G(Ko,{totalDegree:function(t){for(var r=0,a=this.nodes(),i=0;i<a.length;i++)r+=a[i].degree(t);return r}});var Zn,Wu,zu=function(t,r,a){for(var i=0;i<t.length;i++){var n=t[i];if(!n.locked()){var s=n._private.position,o={x:null!=r.x?r.x-s.x:0,y:null!=r.y?r.y-s.y:0};n.isParent()&&!(0===o.x&&0===o.y)&&n.children().shift(o,a),n.dirtyBoundingBoxCache()}}},Vu={field:"position",bindingEvent:"position",allowBinding:!0,allowSetting:!0,settingEvent:"position",settingTriggersEvent:!0,triggerFnName:"emitAndNotify",allowGetting:!0,validKeys:["x","y"],beforeGet:function(t){t.updateCompoundBounds()},beforeSet:function(t,r){zu(t,r,!1)},onSet:function(t){t.dirtyCompoundBoundsCache()},canSet:function(t){return!t.locked()}};Zn=Wu={position:$i.data(Vu),silentPosition:$i.data(G({},Vu,{allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!1,beforeSet:function(t,r){zu(t,r,!0)},onSet:function(t){t.dirtyCompoundBoundsCache()}})),positions:function(t,r){if(Bt(t))r?this.silentPosition(t):this.position(t);else if(W(t)){var a=t,i=this.cy();i.startBatch();for(var n=0;n<this.length;n++){var o,s=this[n];(o=a(s,n))&&(r?s.silentPosition(o):s.position(o))}i.endBatch()}return this},silentPositions:function(t){return this.positions(t,!0)},shift:function(t,r,a){var i;if(Bt(t)?(i={x:Z(t.x)?t.x:0,y:Z(t.y)?t.y:0},a=r):Ge(t)&&Z(r)&&((i={x:0,y:0})[t]=r),null!=i){var n=this.cy();n.startBatch();for(var s=0;s<this.length;s++){var o=this[s];if(!(n.hasCompoundNodes()&&o.isChild()&&o.ancestors().anySame(this))){var u=o.position(),h={x:u.x+i.x,y:u.y+i.y};a?o.silentPosition(h):o.position(h)}}n.endBatch()}return this},silentShift:function(t,r){return Bt(t)?this.shift(t,!0):Ge(t)&&Z(r)&&this.shift(t,r,!0),this},renderedPosition:function(t,r){var a=this[0],i=this.cy(),n=i.zoom(),s=i.pan(),o=Bt(t)?t:void 0,u=void 0!==o||void 0!==r&&Ge(t);if(a&&a.isNode()){if(!u){var v=a.position();return o=Bn(v,n,s),void 0===t?o:o[t]}for(var h=0;h<this.length;h++){var f=this[h];void 0!==r?f.position(t,(r-s[t])/n):void 0!==o&&f.position(Vn(o,n,s))}}else if(!u)return;return this},relativePosition:function(t,r){var a=this[0],i=this.cy(),n=Bt(t)?t:void 0,s=void 0!==n||void 0!==r&&Ge(t),o=i.hasCompoundNodes();if(a&&a.isNode()){if(!s){var _=a.position(),U=o?a.parent():null,I=U&&U.length>0;I&&(U=U[0]);var Y=I?U.position():{x:0,y:0};return n={x:_.x-Y.x,y:_.y-Y.y},void 0===t?n:n[t]}for(var u=0;u<this.length;u++){var h=this[u],f=o?h.parent():null,v=f&&f.length>0;v&&(f=f[0]);var k=v?f.position():{x:0,y:0};void 0!==r?h.position(t,r+k[t]):void 0!==n&&h.position({x:n.x+k.x,y:n.y+k.y})}}else if(!s)return;return this}},Zn.modelPosition=Zn.point=Zn.position,Zn.modelPositions=Zn.points=Zn.positions,Zn.renderedPoint=Zn.renderedPosition,Zn.relativePoint=Zn.relativePosition;var Us,ys,Wg=Wu;Us=ys={},ys.renderedBoundingBox=function(e){var t=this.boundingBox(e),r=this.cy(),a=r.zoom(),i=r.pan(),n=t.x1*a+i.x,s=t.x2*a+i.x,o=t.y1*a+i.y,u=t.y2*a+i.y;return{x1:n,x2:s,y1:o,y2:u,w:s-n,h:u-o}},ys.dirtyCompoundBoundsCache=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.cy();return t.styleEnabled()&&t.hasCompoundNodes()?(this.forEachUp(function(r){if(r.isParent()){var a=r._private;a.compoundBoundsClean=!1,a.bbCache=null,e||r.emitAndNotify("bounds")}}),this):this},ys.updateCompoundBounds=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.cy();if(!t.styleEnabled()||!t.hasCompoundNodes())return this;if(!e&&t.batching())return this;function r(s){if(s.isParent()){var o=s._private,u=s.children(),h="include"===s.pstyle("compound-sizing-wrt-labels").value,f={width:{val:s.pstyle("min-width").pfValue,left:s.pstyle("min-width-bias-left"),right:s.pstyle("min-width-bias-right")},height:{val:s.pstyle("min-height").pfValue,top:s.pstyle("min-height-bias-top"),bottom:s.pstyle("min-height-bias-bottom")}},v=u.boundingBox({includeLabels:h,includeOverlays:!1,useCache:!1}),m=o.position;(0===v.w||0===v.h)&&((v={w:s.pstyle("width").pfValue,h:s.pstyle("height").pfValue}).x1=m.x-v.w/2,v.x2=m.x+v.w/2,v.y1=m.y-v.h/2,v.y2=m.y+v.h/2);var U=f.width.left.value;"px"===f.width.left.units&&f.width.val>0&&(U=100*U/f.width.val);var I=f.width.right.value;"px"===f.width.right.units&&f.width.val>0&&(I=100*I/f.width.val);var K=f.height.top.value;"px"===f.height.top.units&&f.height.val>0&&(K=100*K/f.height.val);var Y=f.height.bottom.value;"px"===f.height.bottom.units&&f.height.val>0&&(Y=100*Y/f.height.val);var X=k(f.width.val-v.w,U,I),mt=X.biasDiff,ie=X.biasComplementDiff,se=k(f.height.val-v.h,K,Y),Yt=se.biasDiff,he=se.biasComplementDiff;o.autoPadding=function _(be,Se,De,Oe){if("%"!==De.units)return"px"===De.units?De.pfValue:0;switch(Oe){case"width":return be>0?De.pfValue*be:0;case"height":return Se>0?De.pfValue*Se:0;case"average":return be>0&&Se>0?De.pfValue*(be+Se)/2:0;case"min":return be>0&&Se>0?be>Se?De.pfValue*Se:De.pfValue*be:0;case"max":return be>0&&Se>0?be>Se?De.pfValue*be:De.pfValue*Se:0;default:return 0}}(v.w,v.h,s.pstyle("padding"),s.pstyle("padding-relative-to").value),o.autoWidth=Math.max(v.w,f.width.val),m.x=(-mt+v.x1+v.x2+ie)/2,o.autoHeight=Math.max(v.h,f.height.val),m.y=(-Yt+v.y1+v.y2+he)/2}function k(be,Se,De){var Oe=0,Ne=0,Je=Se+De;return be>0&&Je>0&&(Oe=Se/Je*be,Ne=De/Je*be),{biasDiff:Oe,biasComplementDiff:Ne}}}for(var a=0;a<this.length;a++){var i=this[a],n=i._private;(!n.compoundBoundsClean||e)&&(r(i),t.batching()||(n.compoundBoundsClean=!0))}return this};var Gn=function(t){return t===1/0||t===-1/0?0:t},Qn=function(t,r,a,i,n){i-r===0||n-a===0||null==r||null==a||null==i||null==n||(t.x1=r<t.x1?r:t.x1,t.x2=i>t.x2?i:t.x2,t.y1=a<t.y1?a:t.y1,t.y2=n>t.y2?n:t.y2,t.w=t.x2-t.x1,t.h=t.y2-t.y1)},ms=function(t,r){return null==r?t:Qn(t,r.x1,r.y1,r.x2,r.y2)},no=function(t,r,a){return jt(t,r,a)},Wo=function(t,r,a){if(!r.cy().headless()){var u,h,i=r._private,n=i.rstyle,s=n.arrowWidth/2;if("none"!==r.pstyle(a+"-arrow-shape").value){"source"===a?(u=n.srcX,h=n.srcY):"target"===a?(u=n.tgtX,h=n.tgtY):(u=n.midX,h=n.midY);var f=i.arrowBounds=i.arrowBounds||{},v=f[a]=f[a]||{};v.x1=u-s,v.y1=h-s,v.x2=u+s,v.y2=h+s,v.w=v.x2-v.x1,v.h=v.y2-v.y1,J(v,1),Qn(t,v.x1,v.y1,v.x2,v.y2)}}},Dc=function(t,r,a){if(!r.cy().headless()){var i,n=r._private,s=n.rstyle;if(r.pstyle((i=a?a+"-":"")+"label").strValue){var De,Oe,Ne,Je,u=r.pstyle("text-halign"),h=r.pstyle("text-valign"),f=no(s,"labelWidth",a),v=no(s,"labelHeight",a),m=no(s,"labelX",a),k=no(s,"labelY",a),_=r.pstyle(i+"text-margin-x").pfValue,U=r.pstyle(i+"text-margin-y").pfValue,I=r.isEdge(),K=r.pstyle(i+"text-rotation"),Y=r.pstyle("text-outline-width").pfValue,mt=r.pstyle("text-border-width").pfValue/2,ie=r.pstyle("text-background-padding").pfValue,Yt=v,he=f,be=he/2,Se=Yt/2;if(I)De=m-be,Oe=m+be,Ne=k-Se,Je=k+Se;else{switch(u.value){case"left":De=m-he,Oe=m;break;case"center":De=m-be,Oe=m+be;break;case"right":De=m,Oe=m+he}switch(h.value){case"top":Ne=k-Yt,Je=k;break;case"center":Ne=k-Se,Je=k+Se;break;case"bottom":Ne=k,Je=k+Yt}}var dr=_-Math.max(Y,mt)-ie-2,gr=_+Math.max(Y,mt)+ie+2,ar=U-Math.max(Y,mt)-ie-2,Sr=U+Math.max(Y,mt)+ie+2;De+=dr,Oe+=gr,Ne+=ar,Je+=Sr;var Ur=a||"main",jr=n.labelBounds,Mr=jr[Ur]=jr[Ur]||{};Mr.x1=De,Mr.y1=Ne,Mr.x2=Oe,Mr.y2=Je,Mr.w=Oe-De,Mr.h=Je-Ne,Mr.leftPad=dr,Mr.rightPad=gr,Mr.topPad=ar,Mr.botPad=Sr;var Wr=I&&"autorotate"===K.strValue;if(Wr||null!=K.pfValue&&0!==K.pfValue){var Ea=Wr?no(n.rstyle,"labelAngle",a):K.pfValue,va=Math.cos(Ea),Aa=Math.sin(Ea),Ia=(De+Oe)/2,Qa=(Ne+Je)/2;if(!I){switch(u.value){case"left":Ia=Oe;break;case"right":Ia=De}switch(h.value){case"top":Qa=Je;break;case"bottom":Qa=Ne}}var Ta=function(Ci,xi){return{x:(Ci-=Ia)*va-(xi-=Qa)*Aa+Ia,y:Ci*Aa+xi*va+Qa}},Kr=Ta(De,Ne),$r=Ta(De,Je),ea=Ta(Oe,Ne),xa=Ta(Oe,Je);De=Math.min(Kr.x,$r.x,ea.x,xa.x),Oe=Math.max(Kr.x,$r.x,ea.x,xa.x),Ne=Math.min(Kr.y,$r.y,ea.y,xa.y),Je=Math.max(Kr.y,$r.y,ea.y,xa.y)}var Ga=Ur+"Rot",li=jr[Ga]=jr[Ga]||{};li.x1=De,li.y1=Ne,li.x2=Oe,li.y2=Je,li.w=Oe-De,li.h=Je-Ne,Qn(t,De,Ne,Oe,Je),Qn(n.labelBounds.all,De,Ne,Oe,Je)}return t}},Uu=function(t,r){if(!r.cy().headless()){var a=r.pstyle("outline-opacity").value,s=r.pstyle("outline-width").value+r.pstyle("outline-offset").value;$u(t,r,a,s,"outside",s/2)}},$u=function(t,r,a,i,n,s){if(!(0===a||i<=0||"inside"===n)){var o=r.cy(),u=r.pstyle("shape").value,h=o.renderer().nodeShapes[u],f=r.position(),v=f.x,m=f.y,k=r.width(),_=r.height();if(h.hasMiterBounds){"center"===n&&(i/=2);var U=h.miterBounds(v,m,k,_,i);ms(t,U)}else null!=s&&s>0&&Q(t,[s,s,s,s])}},Yu=function(t){var r=0,a=function(s){return(s?1:0)<<r++},i=0;return i+=a(t.incudeNodes),i+=a(t.includeEdges),i+=a(t.includeLabels),i+=a(t.includeMainLabels),i+=a(t.includeSourceLabels),i+=a(t.includeTargetLabels),(i+=a(t.includeOverlays))+a(t.includeOutlines)},Hu=function(t){var r=function(o){return Math.round(o)};if(t.isEdge()){var a=t.source().position(),i=t.target().position();return hr([r(a.x),r(a.y),r(i.x),r(i.y)])}var n=t.position();return hr([r(n.x),r(n.y)])},Gu=function(t,r){var i,a=t._private,n=t.isEdge(),o=(null==r?qu:Yu(r))===qu;if(null==a.bbCache?(i=function(t,r){var f,v,m,k,_,U,a=t._private.cy,i=a.styleEnabled(),n=a.headless(),s=Tt(),o=t._private,u=t.isNode(),h=t.isEdge(),I=o.rstyle,K=u&&i?t.pstyle("bounds-expansion").pfValue:[0],Y=function(Mi){return"none"!==Mi.pstyle("display").value},X=!i||Y(t)&&(!h||Y(t.source())&&Y(t.target()));if(X){var ie=0;i&&r.includeOverlays&&0!==t.pstyle("overlay-opacity").value&&(ie=t.pstyle("overlay-padding").value);var Yt=0;i&&r.includeUnderlays&&0!==t.pstyle("underlay-opacity").value&&(Yt=t.pstyle("underlay-padding").value);var he=Math.max(ie,Yt),Se=0;if(i&&(Se=t.pstyle("width").pfValue/2),u&&r.includeNodes){var De=t.position();_=De.x,U=De.y;var Ne=t.outerWidth()/2,dr=t.outerHeight()/2;Qn(s,f=_-Ne,m=U-dr,v=_+Ne,k=U+dr),i&&Uu(s,t),i&&r.includeOutlines&&!n&&Uu(s,t),i&&function(t,r){if(!r.cy().headless()){var a=r.pstyle("border-opacity").value,i=r.pstyle("border-width").pfValue,n=r.pstyle("border-position").value;$u(t,r,a,i,n)}}(s,t)}else if(h&&r.includeEdges)if(i&&!n){var gr=t.pstyle("curve-style").strValue;if(f=Math.min(I.srcX,I.midX,I.tgtX),v=Math.max(I.srcX,I.midX,I.tgtX),m=Math.min(I.srcY,I.midY,I.tgtY),k=Math.max(I.srcY,I.midY,I.tgtY),Qn(s,f-=Se,m-=Se,v+=Se,k+=Se),"haystack"===gr){var ar=I.haystackPts;if(ar&&2===ar.length){if((f=ar[0].x)>(v=ar[1].x)){var Sr=f;f=v,v=Sr}if((m=ar[0].y)>(k=ar[1].y)){var Ur=m;m=k,k=Ur}Qn(s,f-Se,m-Se,v+Se,k+Se)}}else if("bezier"===gr||"unbundled-bezier"===gr||St(gr,"segments")||St(gr,"taxi")){var jr;switch(gr){case"bezier":case"unbundled-bezier":jr=I.bezierPts;break;case"segments":case"taxi":case"round-segments":case"round-taxi":jr=I.linePts}if(null!=jr)for(var Mr=0;Mr<jr.length;Mr++){var Wr=jr[Mr];Qn(s,f=Wr.x-Se,m=Wr.y-Se,v=Wr.x+Se,k=Wr.y+Se)}}}else{var Ea=t.source().position(),Aa=t.target().position();if((f=Ea.x)>(v=Aa.x)){var Ia=f;f=v,v=Ia}if((m=Ea.y)>(k=Aa.y)){var Qa=m;m=k,k=Qa}Qn(s,f-=Se,m-=Se,v+=Se,k+=Se)}if(i&&r.includeEdges&&h&&(Wo(s,t,"mid-source"),Wo(s,t,"mid-target"),Wo(s,t,"source"),Wo(s,t,"target")),i&&"yes"===t.pstyle("ghost").value){var Kr=t.pstyle("ghost-offset-x").pfValue,$r=t.pstyle("ghost-offset-y").pfValue;Qn(s,s.x1+Kr,s.y1+$r,s.x2+Kr,s.y2+$r)}var ea=o.bodyBounds=o.bodyBounds||{};Mt(ea,s),Q(ea,K),J(ea,1),i&&Qn(s,(f=s.x1)-he,(m=s.y1)-he,(v=s.x2)+he,(k=s.y2)+he);var xa=o.overlayBounds=o.overlayBounds||{};Mt(xa,s),Q(xa,K),J(xa,1);var Ga=o.labelBounds=o.labelBounds||{};null!=Ga.all?function(t){t.x1=1/0,t.y1=1/0,t.x2=-1/0,t.y2=-1/0,t.w=0,t.h=0}(Ga.all):Ga.all=Tt(),i&&r.includeLabels&&(r.includeMainLabels&&Dc(s,t,null),h&&(r.includeSourceLabels&&Dc(s,t,"source"),r.includeTargetLabels&&Dc(s,t,"target")))}return s.x1=Gn(s.x1),s.y1=Gn(s.y1),s.x2=Gn(s.x2),s.y2=Gn(s.y2),s.w=Gn(s.x2-s.x1),s.h=Gn(s.y2-s.y1),s.w>0&&s.h>0&&X&&(Q(s,K),J(s,1)),s}(t,so),a.bbCache=i,a.bbCachePosKey=Hu(t)):i=a.bbCache,!o){var u=t.isNode();i=Tt(),(r.includeNodes&&u||r.includeEdges&&!u)&&ms(i,r.includeOverlays?a.overlayBounds:a.bodyBounds),r.includeLabels&&(r.includeMainLabels&&(!n||r.includeSourceLabels&&r.includeTargetLabels)?ms(i,a.labelBounds.all):(r.includeMainLabels&&ms(i,a.labelBounds.mainRot),r.includeSourceLabels&&ms(i,a.labelBounds.sourceRot),r.includeTargetLabels&&ms(i,a.labelBounds.targetRot))),i.w=i.x2-i.x1,i.h=i.y2-i.y1}return i},so={includeNodes:!0,includeEdges:!0,includeLabels:!0,includeMainLabels:!0,includeSourceLabels:!0,includeTargetLabels:!0,includeOverlays:!0,includeUnderlays:!0,includeOutlines:!0,useCache:!0},qu=Yu(so),ju=Me(so);ys.boundingBox=function(e){var t,r=void 0===e||void 0===e.useCache||!0===e.useCache,a=Re(function(f){var v=f._private;return null==v.bbCache||v.styleDirty||v.bbCachePosKey!==Hu(f)},function(f){return f.id()});if(r&&1===this.length&&!a(this[0]))e=void 0===e?so:ju(e),t=Gu(this[0],e);else{t=Tt();var i=ju(e=e||so),n=this,o=n.cy().styleEnabled();this.edges().forEach(a),this.nodes().forEach(a),o&&this.recalculateRenderedStyle(r),this.updateCompoundBounds(!r);for(var u=0;u<n.length;u++){var h=n[u];a(h)&&h.dirtyBoundingBoxCache(),ms(t,Gu(h,i))}}return t.x1=Gn(t.x1),t.y1=Gn(t.y1),t.x2=Gn(t.x2),t.y2=Gn(t.y2),t.w=Gn(t.x2-t.x1),t.h=Gn(t.y2-t.y1),t},ys.dirtyBoundingBoxCache=function(){for(var e=0;e<this.length;e++){var t=this[e]._private;t.bbCache=null,t.bbCachePosKey=null,t.bodyBounds=null,t.overlayBounds=null,t.labelBounds.all=null,t.labelBounds.source=null,t.labelBounds.target=null,t.labelBounds.main=null,t.labelBounds.sourceRot=null,t.labelBounds.targetRot=null,t.labelBounds.mainRot=null,t.arrowBounds.source=null,t.arrowBounds.target=null,t.arrowBounds["mid-source"]=null,t.arrowBounds["mid-target"]=null}return this.emitAndNotify("bounds"),this},ys.boundingBoxAt=function(e){var t=this.nodes(),r=this.cy(),a=r.hasCompoundNodes(),i=r.collection();if(a&&(i=t.filter(function(h){return h.isParent()}),t=t.not(i)),Bt(e)){var n=e;e=function(){return n}}r.startBatch(),t.forEach(function(f,v){return f._private.bbAtOldPos=e(f,v)}).silentPositions(e),a&&(i.dirtyCompoundBoundsCache(),i.dirtyBoundingBoxCache(),i.updateCompoundBounds(!0));var u=function(t){return{x1:t.x1,x2:t.x2,w:t.w,y1:t.y1,y2:t.y2,h:t.h}}(this.boundingBox({useCache:!1}));return t.silentPositions(function(f){return f._private.bbAtOldPos}),a&&(i.dirtyCompoundBoundsCache(),i.dirtyBoundingBoxCache(),i.updateCompoundBounds(!0)),r.endBatch(),u},Us.boundingbox=Us.bb=Us.boundingBox,Us.renderedBoundingbox=Us.renderedBoundingBox;var oo,lo,Ug=ys;oo=lo={};var Xu=function(t){t.uppercaseName=Ct(t.name),t.autoName="auto"+t.uppercaseName,t.labelName="label"+t.uppercaseName,t.outerName="outer"+t.uppercaseName,t.uppercaseOuterName=Ct(t.outerName),oo[t.name]=function(){var a=this[0],i=a._private;if(a){if(i.cy._private.styleEnabled){if(a.isParent())return a.updateCompoundBounds(),i[t.autoName]||0;var o=a.pstyle(t.name);return"label"===o.strValue?(a.recalculateRenderedStyle(),i.rstyle[t.labelName]||0):o.pfValue}return 1}},oo["outer"+t.uppercaseName]=function(){var a=this[0];if(a){if(a._private.cy._private.styleEnabled){var o=a[t.name](),u=a.pstyle("border-position").value;return o+("center"===u?a.pstyle("border-width").pfValue:"outside"===u?2*a.pstyle("border-width").pfValue:0)+2*a.padding()}return 1}},oo["rendered"+t.uppercaseName]=function(){var a=this[0];if(a)return a[t.name]()*this.cy().zoom()},oo["rendered"+t.uppercaseOuterName]=function(){var a=this[0];if(a)return a[t.outerName]()*this.cy().zoom()}};Xu({name:"width"}),Xu({name:"height"}),lo.padding=function(){var e=this[0],t=e._private;return e.isParent()?(e.updateCompoundBounds(),void 0!==t.autoPadding?t.autoPadding:e.pstyle("padding").pfValue):e.pstyle("padding").pfValue},lo.paddedHeight=function(){var e=this[0];return e.height()+2*e.padding()},lo.paddedWidth=function(){var e=this[0];return e.width()+2*e.padding()};var $g=lo,Zu={controlPoints:{get:function(t){return t.renderer().getControlPoints(t)},mult:!0},segmentPoints:{get:function(t){return t.renderer().getSegmentPoints(t)},mult:!0},sourceEndpoint:{get:function(t){return t.renderer().getSourceEndpoint(t)}},targetEndpoint:{get:function(t){return t.renderer().getTargetEndpoint(t)}},midpoint:{get:function(t){return t.renderer().getEdgeMidpoint(t)}}},t1=Object.keys(Zu).reduce(function(e,t){var r=Zu[t],a=function(t){return"rendered"+t[0].toUpperCase()+t.substr(1)}(t);return e[t]=function(){return function(t,r){if(t.isEdge()&&t.takesUpSpace())return r(t)}(this,r.get)},e[a]=r.mult?function(){return function(t,r){if(t.isEdge()&&t.takesUpSpace()){var a=t.cy(),i=a.pan(),n=a.zoom();return r(t).map(function(s){return Bn(s,n,i)})}}(this,r.get)}:function(){return function(t,r){if(t.isEdge()&&t.takesUpSpace()){var a=t.cy();return Bn(r(t),a.zoom(),a.pan())}}(this,r.get)},e},{}),e1=G({},Wg,Ug,$g,t1),Qu=function(t,r){this.recycle(t,r)};
/*!
      Event object based on jQuery events, MIT license
      
      https://jquery.org/license/
      https://tldrlegal.com/license/mit-license
      https://github.com/jquery/jquery/blob/master/src/event.js
      */function co(){return!1}function zo(){return!0}Qu.prototype={instanceString:function(){return"event"},recycle:function(t,r){if(this.isImmediatePropagationStopped=this.isPropagationStopped=this.isDefaultPrevented=co,null!=t&&t.preventDefault?(this.type=t.type,this.isDefaultPrevented=t.defaultPrevented?zo:co):null!=t&&t.type?r=t:this.type=t,null!=r&&(this.originalEvent=r.originalEvent,this.type=null!=r.type?r.type:this.type,this.cy=r.cy,this.target=r.target,this.position=r.position,this.renderedPosition=r.renderedPosition,this.namespace=r.namespace,this.layout=r.layout),null!=this.cy&&null!=this.position&&null==this.renderedPosition){var a=this.position,i=this.cy.zoom(),n=this.cy.pan();this.renderedPosition={x:a.x*i+n.x,y:a.y*i+n.y}}this.timeStamp=t&&t.timeStamp||Date.now()},preventDefault:function(){this.isDefaultPrevented=zo;var t=this.originalEvent;t&&t.preventDefault&&t.preventDefault()},stopPropagation:function(){this.isPropagationStopped=zo;var t=this.originalEvent;t&&t.stopPropagation&&t.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=zo,this.stopPropagation()},isDefaultPrevented:co,isPropagationStopped:co,isImmediatePropagationStopped:co};var Ju=/^([^.]+)(\.(?:[^.]+))?$/,td={qualifierCompare:function(t,r){return t===r},eventMatches:function(){return!0},addEventFields:function(){},callbackContext:function(t){return t},beforeEmit:function(){},afterEmit:function(){},bubble:function(){return!1},parent:function(){return null},context:null},ed=Object.keys(td),a1={};function Vo(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a1,t=arguments.length>1?arguments[1]:void 0,r=0;r<ed.length;r++){var a=ed[r];this[a]=e[a]||td[a]}this.context=t||this.context,this.listeners=[],this.emitting=0}var xs=Vo.prototype,rd=function(t,r,a,i,n,s,o){W(i)&&(n=i,i=null),o&&(s=null==s?o:G({},s,o));for(var u=ft(a)?a:a.split(/\s+/),h=0;h<u.length;h++){var f=u[h];if(!Nt(f)){var v=f.match(Ju);if(v&&!1===r(t,f,v[1],v[2]?v[2]:null,i,n,s))break}}},ad=function(t,r){return t.addEventFields(t.context,r),new Qu(r.type,r)};xs.on=xs.addListener=function(e,t,r,a,i){return rd(this,function(n,s,o,u,h,f,v){W(f)&&n.listeners.push({event:s,callback:f,type:o,namespace:u,qualifier:h,conf:v})},e,t,r,a,i),this},xs.one=function(e,t,r,a){return this.on(e,t,r,a,{one:!0})},xs.removeListener=xs.off=function(e,t,r,a){var i=this;0!==this.emitting&&(this.listeners=function(t){return t.slice()}(this.listeners));for(var n=this.listeners,s=function(h){var f=n[h];rd(i,function(v,m,k,_,U,I){if((f.type===k||"*"===e)&&(!_&&".*"!==f.namespace||f.namespace===_)&&(!U||v.qualifierCompare(f.qualifier,U))&&(!I||f.callback===I))return n.splice(h,1),!1},e,t,r,a)},o=n.length-1;o>=0;o--)s(o);return this},xs.removeAllListeners=function(){return this.removeListener("*")},xs.emit=xs.trigger=function(e,t,r){var a=this.listeners,i=a.length;return this.emitting++,ft(t)||(t=[t]),function(t,r,a){if(function(t){return"event"===Br(t)}(a))r(t,a);else if(Bt(a))r(t,ad(t,a));else for(var i=ft(a)?a:a.split(/\s+/),n=0;n<i.length;n++){var s=i[n];if(!Nt(s)){var o=s.match(Ju);o&&r(t,ad(t,{type:o[1],namespace:o[2]?o[2]:null,target:t.context}))}}}(this,function(n,s){null!=r&&(i=(a=[{event:s.event,type:s.type,namespace:s.namespace,callback:r}]).length);for(var o=function(){var f=a[u];if(f.type===s.type&&(!f.namespace||f.namespace===s.namespace||".*"===f.namespace)&&n.eventMatches(n.context,f,s)){var v=[s];null!=t&&function(t,r){for(var a=0;a<r.length;a++)t.push(r[a])}(v,t),n.beforeEmit(n.context,f,s),f.conf&&f.conf.one&&(n.listeners=n.listeners.filter(function(_){return _!==f}));var m=n.callbackContext(n.context,f,s),k=f.callback.apply(m,v);n.afterEmit(n.context,f,s),!1===k&&(s.stopPropagation(),s.preventDefault())}},u=0;u<i;u++)o();n.bubble(n.context)&&!s.isPropagationStopped()&&n.parent(n.context).emit(s,t)},e),this.emitting--,this};var n1={qualifierCompare:function(t,r){return null==t||null==r?null==t&&null==r:t.sameText(r)},eventMatches:function(t,r,a){var i=r.qualifier;return null==i||t!==a.target&&Pt(a.target)&&i.matches(a.target)},addEventFields:function(t,r){r.cy=t.cy(),r.target=t},callbackContext:function(t,r,a){return null!=r.qualifier?a.target:t},beforeEmit:function(t,r){r.conf&&r.conf.once&&r.conf.onceCollection.removeListener(r.event,r.qualifier,r.callback)},bubble:function(){return!0},parent:function(t){return t.isChild()?t.parent():t.cy()}},Uo=function(t){return Ge(t)?new gs(t):t},id={createEmitter:function(){for(var t=0;t<this.length;t++){var r=this[t],a=r._private;a.emitter||(a.emitter=new Vo(n1,r))}return this},emitter:function(){return this._private.emitter},on:function(t,r,a){for(var i=Uo(r),n=0;n<this.length;n++)this[n].emitter().on(t,i,a);return this},removeListener:function(t,r,a){for(var i=Uo(r),n=0;n<this.length;n++)this[n].emitter().removeListener(t,i,a);return this},removeAllListeners:function(){for(var t=0;t<this.length;t++)this[t].emitter().removeAllListeners();return this},one:function(t,r,a){for(var i=Uo(r),n=0;n<this.length;n++)this[n].emitter().one(t,i,a);return this},once:function(t,r,a){for(var i=Uo(r),n=0;n<this.length;n++)this[n].emitter().on(t,i,a,{once:!0,onceCollection:this})},emit:function(t,r){for(var a=0;a<this.length;a++)this[a].emitter().emit(t,r);return this},emitAndNotify:function(t,r){if(0!==this.length)return this.cy().notify(t,this),this.emit(t,r),this}};$i.eventAliasesOn(id);var nd={nodes:function(t){return this.filter(function(r){return r.isNode()}).filter(t)},edges:function(t){return this.filter(function(r){return r.isEdge()}).filter(t)},byGroup:function(){for(var t=this.spawn(),r=this.spawn(),a=0;a<this.length;a++){var i=this[a];i.isNode()?t.push(i):r.push(i)}return{nodes:t,edges:r}},filter:function(t,r){if(void 0===t)return this;if(Ge(t)||re(t))return new gs(t).filter(this);if(W(t)){for(var a=this.spawn(),i=this,n=0;n<i.length;n++){var s=i[n];(r?t.apply(r,[s,n,i]):t(s,n,i))&&a.push(s)}return a}return this.spawn()},not:function(t){if(t){Ge(t)&&(t=this.filter(t));for(var r=this.spawn(),a=0;a<this.length;a++){var i=this[a];t.has(i)||r.push(i)}return r}return this},absoluteComplement:function(){return this.cy().mutableElements().not(this)},intersect:function(t){if(Ge(t))return this.filter(t);for(var a=this.spawn(),s=this.length<t.length,o=s?this:t,u=s?t:this,h=0;h<o.length;h++){var f=o[h];u.has(f)&&a.push(f)}return a},xor:function(t){var r=this._private.cy;Ge(t)&&(t=r.$(t));var a=this.spawn(),n=t,s=function(u,h){for(var f=0;f<u.length;f++){var v=u[f];h.hasElementWithId(v._private.data.id)||a.push(v)}};return s(this,n),s(n,this),a},diff:function(t){var r=this._private.cy;Ge(t)&&(t=r.$(t));var a=this.spawn(),i=this.spawn(),n=this.spawn(),o=t,u=function(f,v,m){for(var k=0;k<f.length;k++){var _=f[k];v.hasElementWithId(_._private.data.id)?n.merge(_):m.push(_)}};return u(this,o,a),u(o,this,i),{left:a,right:i,both:n}},add:function(t){var r=this._private.cy;if(!t)return this;if(Ge(t)){var a=t;t=r.mutableElements().filter(a)}for(var i=this.spawnSelf(),n=0;n<t.length;n++){var s=t[n];!this.has(s)&&i.push(s)}return i},merge:function(t){var r=this._private,a=r.cy;if(!t)return this;if(t&&Ge(t)){var i=t;t=a.mutableElements().filter(i)}for(var n=r.map,s=0;s<t.length;s++){var o=t[s],u=o._private.data.id;if(!n.has(u)){var f=this.length++;this[f]=o,n.set(u,{ele:o,index:f})}}return this},unmergeAt:function(t){var a=this[t].id(),n=this._private.map;if(this[t]=void 0,n.delete(a),this.length>1&&t!==this.length-1){var o=this.length-1,u=this[o],h=u._private.data.id;this[o]=void 0,this[t]=u,n.set(h,{ele:u,index:t})}return this.length--,this},unmergeOne:function(t){var n=this._private.map.get((t=t[0])._private.data.id);return n?(this.unmergeAt(n.index),this):this},unmerge:function(t){var r=this._private.cy;if(!t)return this;if(t&&Ge(t)){var a=t;t=r.mutableElements().filter(a)}for(var i=0;i<t.length;i++)this.unmergeOne(t[i]);return this},unmergeBy:function(t){for(var r=this.length-1;r>=0;r--)t(this[r])&&this.unmergeAt(r);return this},map:function(t,r){for(var a=[],i=this,n=0;n<i.length;n++){var s=i[n],o=r?t.apply(r,[s,n,i]):t(s,n,i);a.push(o)}return a},reduce:function(t,r){for(var a=r,i=this,n=0;n<i.length;n++)a=t(a,i[n],n,i);return a},max:function(t,r){for(var i,a=-1/0,n=this,s=0;s<n.length;s++){var o=n[s],u=r?t.apply(r,[o,s,n]):t(o,s,n);u>a&&(a=u,i=o)}return{value:a,ele:i}},min:function(t,r){for(var i,a=1/0,n=this,s=0;s<n.length;s++){var o=n[s],u=r?t.apply(r,[o,s,n]):t(o,s,n);u<a&&(a=u,i=o)}return{value:a,ele:i}}},Ki=nd;Ki.u=Ki["|"]=Ki["+"]=Ki.union=Ki.or=Ki.add,Ki["\\"]=Ki["!"]=Ki["-"]=Ki.difference=Ki.relativeComplement=Ki.subtract=Ki.not,Ki.n=Ki["&"]=Ki["."]=Ki.and=Ki.intersection=Ki.intersect,Ki["^"]=Ki["(+)"]=Ki["(-)"]=Ki.symmetricDifference=Ki.symdiff=Ki.xor,Ki.fnFilter=Ki.filterFn=Ki.stdFilter=Ki.filter,Ki.complement=Ki.abscomp=Ki.absoluteComplement;var t,sd=function(t,r){var i=t.cy().hasCompoundNodes();function n(f){var v=f.pstyle("z-compound-depth");return"auto"===v.value?i?f.zDepth():0:"bottom"===v.value?-1:"top"===v.value?Fa:0}var s=n(t)-n(r);if(0!==s)return s;function o(f){return"auto"===f.pstyle("z-index-compare").value&&f.isNode()?1:0}var u=o(t)-o(r);if(0!==u)return u;var h=t.pstyle("z-index").value-r.pstyle("z-index").value;return 0!==h?h:t.poolIndex()-r.poolIndex()},$o={forEach:function(t,r){if(W(t))for(var a=this.length,i=0;i<a;i++){var n=this[i];if(!1===(r?t.apply(r,[n,i,this]):t(n,i,this)))break}return this},toArray:function(){for(var t=[],r=0;r<this.length;r++)t.push(this[r]);return t},slice:function(t,r){var a=[],i=this.length;null==r&&(r=i),null==t&&(t=0),t<0&&(t=i+t),r<0&&(r=i+r);for(var n=t;n>=0&&n<r&&n<i;n++)a.push(this[n]);return this.spawn(a)},size:function(){return this.length},eq:function(t){return this[t]||this.spawn()},first:function(){return this[0]||this.spawn()},last:function(){return this[this.length-1]||this.spawn()},empty:function(){return 0===this.length},nonempty:function(){return!this.empty()},sort:function(t){if(!W(t))return this;var r=this.toArray().sort(t);return this.spawn(r)},sortByZIndex:function(){return this.sort(sd)},zDepth:function(){var t=this[0];if(t){var r=t._private;if("nodes"===r.group){var i=r.data.parent?t.parents().size():0;return t.isParent()?i:Fa-1}var s=r.target,o=r.source.zDepth(),u=s.zDepth();return Math.max(o,u,0)}}};$o.each=$o.forEach,t="undefined",(typeof Symbol>"u"?"undefined":vr(Symbol))!=t&&vr(Symbol.iterator)!=t&&($o[Symbol.iterator]=function(){var a=this,i={value:void 0,done:!1},n=0,s=this.length;return A({next:function(){return n<s?i.value=a[n++]:(i.value=void 0,i.done=!0),i}},Symbol.iterator,function(){return this})});var l1=Me({nodeDimensionsIncludeLabels:!1}),Yo={layoutDimensions:function(t){var r;if(t=l1(t),this.takesUpSpace())if(t.nodeDimensionsIncludeLabels){var a=this.boundingBox();r={w:a.w,h:a.h}}else r={w:this.outerWidth(),h:this.outerHeight()};else r={w:0,h:0};return(0===r.w||0===r.h)&&(r.w=r.h=1),r},layoutPositions:function(t,r,a){var i=this.nodes().filter(function(ie){return!ie.isParent()}),n=this.cy(),s=r.eles,o=function(se){return se.id()},u=Re(a,o);t.emit({type:"layoutstart",layout:t}),t.animations=[];var f=r.spacingFactor&&1!==r.spacingFactor,m=function(){if(!f)return null;for(var se=Tt(),Yt=0;Yt<i.length;Yt++){var be=u(i[Yt],Yt);At(se,be.x,be.y)}return se}(),k=Re(function(ie,se){var Yt=u(ie,se);return f&&(Yt=function(se,Yt,he){var be_x=Yt.x1+Yt.w/2,be_y=Yt.y1+Yt.h/2;return{x:be_x+(he.x-be_x)*se,y:be_y+(he.y-be_y)*se}}(Math.abs(r.spacingFactor),m,Yt)),null!=r.transform&&(Yt=r.transform(ie,Yt)),Yt},o);if(r.animate){for(var _=0;_<i.length;_++){var U=i[_],I=k(U,_);if(null==r.animateFilter||r.animateFilter(U,_)){var Y=U.animation({position:I,duration:r.animationDuration,easing:r.animationEasing});t.animations.push(Y)}else U.position(I)}if(r.fit){var X=n.animation({fit:{boundingBox:s.boundingBoxAt(k),padding:r.padding},duration:r.animationDuration,easing:r.animationEasing});t.animations.push(X)}else if(void 0!==r.zoom&&void 0!==r.pan){var mt=n.animation({zoom:r.zoom,pan:r.pan,duration:r.animationDuration,easing:r.animationEasing});t.animations.push(mt)}t.animations.forEach(function(ie){return ie.play()}),t.one("layoutready",r.ready),t.emit({type:"layoutready",layout:t}),Ks.all(t.animations.map(function(ie){return ie.promise()})).then(function(){t.one("layoutstop",r.stop),t.emit({type:"layoutstop",layout:t})})}else i.positions(k),r.fit&&n.fit(r.eles,r.padding),null!=r.zoom&&n.zoom(r.zoom),r.pan&&n.pan(r.pan),t.one("layoutready",r.ready),t.emit({type:"layoutready",layout:t}),t.one("layoutstop",r.stop),t.emit({type:"layoutstop",layout:t});return this},layout:function(t){return this.cy().makeLayout(G({},t,{eles:this}))}};function od(e,t,r){var n,a=r._private,i=a.styleCache=a.styleCache||[];return null!=(n=i[e])||(n=i[e]=t(r)),n}function Ho(e,t){return e=ga(e),function(a){return od(e,t,a)}}function Go(e,t){e=ga(e);var r=function(i){return t.call(i)};return function(){var i=this[0];if(i)return od(e,r,i)}}Yo.createLayout=Yo.makeLayout=Yo.layout;var Sn={recalculateRenderedStyle:function(t){var r=this.cy(),a=r.renderer(),i=r.styleEnabled();return a&&i&&a.recalculateRenderedStyle(this,t),this},dirtyStyleCache:function(){var a,t=this.cy(),r=function(n){return n._private.styleCache=null};return t.hasCompoundNodes()?((a=this.spawnSelf().merge(this.descendants()).merge(this.parents())).merge(a.connectedEdges()),a.forEach(r)):this.forEach(function(i){r(i),i.connectedEdges().forEach(r)}),this},updateStyle:function(t){var r=this._private.cy;if(!r.styleEnabled())return this;if(r.batching())return r._private.batchStyleEles.merge(this),this;var n=this;t=!(!t&&void 0!==t),r.hasCompoundNodes()&&(n=this.spawnSelf().merge(this.descendants()).merge(this.parents()));var s=n;return t?s.emitAndNotify("style"):s.emit("style"),n.forEach(function(o){return o._private.styleDirty=!0}),this},cleanStyle:function(){var t=this.cy();if(t.styleEnabled())for(var r=0;r<this.length;r++){var a=this[r];a._private.styleDirty&&(a._private.styleDirty=!1,t.style().apply(a))}},parsedStyle:function(t){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=this[0],i=a.cy();if(i.styleEnabled()&&a)return a._private.styleDirty&&(a._private.styleDirty=!1,i.style().apply(a)),a._private.style[t]??(r?i.style().getDefaultProperty(t):null)},numericStyle:function(t){var r=this[0];if(r.cy().styleEnabled()&&r){var a=r.pstyle(t);return void 0!==a.pfValue?a.pfValue:a.value}},numericStyleUnits:function(t){var r=this[0];if(r.cy().styleEnabled()&&r)return r.pstyle(t).units},renderedStyle:function(t){var r=this.cy();if(!r.styleEnabled())return this;var a=this[0];return a?r.style().getRenderedStyle(a,t):void 0},style:function(t,r){var a=this.cy();if(!a.styleEnabled())return this;var i=!1,n=a.style();if(Bt(t))n.applyBypass(this,t,i),this.emitAndNotify("style");else if(Ge(t)){if(void 0===r){var o=this[0];return o?n.getStylePropertyValue(o,t):void 0}n.applyBypass(this,t,r,i),this.emitAndNotify("style")}else if(void 0===t){var u=this[0];return u?n.getRawStyle(u):void 0}return this},removeStyle:function(t){var r=this.cy();if(!r.styleEnabled())return this;var a=!1,i=r.style(),n=this;if(void 0===t)for(var s=0;s<n.length;s++)i.removeAllBypasses(n[s],a);else{t=t.split(/\s+/);for(var u=0;u<n.length;u++)i.removeBypasses(n[u],t,a)}return this.emitAndNotify("style"),this},show:function(){return this.css("display","element"),this},hide:function(){return this.css("display","none"),this},effectiveOpacity:function(){var t=this.cy();if(!t.styleEnabled())return 1;var r=t.hasCompoundNodes(),a=this[0];if(a){var i=a._private,n=a.pstyle("opacity").value;if(!r)return n;var s=i.data.parent?a.parents():null;if(s)for(var o=0;o<s.length;o++)n*=s[o].pstyle("opacity").value;return n}},transparent:function(){if(!this.cy().styleEnabled())return!1;var r=this[0],a=r.cy().hasCompoundNodes();return r?a?0===r.effectiveOpacity():0===r.pstyle("opacity").value:void 0},backgrounding:function(){return!!this.cy().styleEnabled()&&!!this[0]._private.backgrounding}};function Lc(e,t){var a=e._private.data.parent?e.parents():null;if(a)for(var i=0;i<a.length;i++)if(!t(a[i]))return!1;return!0}function Bc(e){var t=e.ok,r=e.edgeOkViaNode||e.ok,a=e.parentOk||e.ok;return function(){var i=this.cy();if(!i.styleEnabled())return!0;var n=this[0],s=i.hasCompoundNodes();if(n){var o=n._private;if(!t(n))return!1;if(n.isNode())return!s||Lc(n,a);var u=o.source,h=o.target;return r(u)&&(!s||Lc(u,r))&&(u===h||r(h)&&(!s||Lc(h,r)))}}}var $s=Ho("eleTakesUpSpace",function(e){return"element"===e.pstyle("display").value&&0!==e.width()&&(!e.isNode()||0!==e.height())});Sn.takesUpSpace=Go("takesUpSpace",Bc({ok:$s}));var c1=Ho("eleInteractive",function(e){return"yes"===e.pstyle("events").value&&"visible"===e.pstyle("visibility").value&&$s(e)}),h1=Ho("parentInteractive",function(e){return"visible"===e.pstyle("visibility").value&&$s(e)});Sn.interactive=Go("interactive",Bc({ok:c1,parentOk:h1,edgeOkViaNode:$s})),Sn.noninteractive=function(){var e=this[0];if(e)return!e.interactive()};var u1=Ho("eleVisible",function(e){return"visible"===e.pstyle("visibility").value&&0!==e.pstyle("opacity").pfValue&&$s(e)});Sn.visible=Go("visible",Bc({ok:u1,edgeOkViaNode:$s})),Sn.hidden=function(){var e=this[0];if(e)return!e.visible()},Sn.isBundledBezier=Go("isBundledBezier",function(){return!!this.cy().styleEnabled()&&!this.removed()&&"bezier"===this.pstyle("curve-style").value&&this.takesUpSpace()}),Sn.bypass=Sn.css=Sn.style,Sn.renderedCss=Sn.renderedStyle,Sn.removeBypass=Sn.removeCss=Sn.removeStyle,Sn.pstyle=Sn.parsedStyle;var bs={};function ld(e){return function(){var t=arguments,r=[];if(2===t.length)this.on(e.event,t[0],t[1]);else if(1===t.length&&W(t[0]))this.on(e.event,t[0]);else if(0===t.length||1===t.length&&ft(t[0])){for(var s=1===t.length?t[0]:null,o=0;o<this.length;o++){var u=this[o],h=!e.ableField||u._private[e.ableField],f=u._private[e.field]!=e.value;if(e.overrideAble){var v=e.overrideAble(u);if(void 0!==v&&(h=v,!v))return this}h&&(u._private[e.field]=e.value,f&&r.push(u))}var m=this.spawn(r);m.updateStyle(),m.emit(e.event),s&&m.emit(s)}return this}}function Ys(e){bs[e.field]=function(){var t=this[0];if(t){if(e.overrideField){var r=e.overrideField(t);if(void 0!==r)return r}return t._private[e.field]}},bs[e.on]=ld({event:e.on,field:e.field,ableField:e.ableField,overrideAble:e.overrideAble,value:!0}),bs[e.off]=ld({event:e.off,field:e.field,ableField:e.ableField,overrideAble:e.overrideAble,value:!1})}Ys({field:"locked",overrideField:function(t){return!!t.cy().autolock()||void 0},on:"lock",off:"unlock"}),Ys({field:"grabbable",overrideField:function(t){return!t.cy().autoungrabify()&&!t.pannable()&&void 0},on:"grabify",off:"ungrabify"}),Ys({field:"selected",ableField:"selectable",overrideAble:function(t){return!t.cy().autounselectify()&&void 0},on:"select",off:"unselect"}),Ys({field:"selectable",overrideField:function(t){return!t.cy().autounselectify()&&void 0},on:"selectify",off:"unselectify"}),bs.deselect=bs.unselect,bs.grabbed=function(){var e=this[0];if(e)return e._private.grabbed},Ys({field:"active",on:"activate",off:"unactivate"}),Ys({field:"pannable",on:"panify",off:"unpanify"}),bs.inactive=function(){var e=this[0];if(e)return!e._private.active};var Pn={},cd=function(t){return function(a){for(var n=[],s=0;s<this.length;s++){var o=this[s];if(o.isNode()){for(var u=!1,h=o.connectedEdges(),f=0;f<h.length;f++){var v=h[f],m=v.source(),k=v.target();if(t.noIncomingEdges&&k===o&&m!==o||t.noOutgoingEdges&&m===o&&k!==o){u=!0;break}}u||n.push(o)}}return this.spawn(n,!0).filter(a)}},hd=function(t){return function(r){for(var i=[],n=0;n<this.length;n++){var s=this[n];if(s.isNode())for(var o=s.connectedEdges(),u=0;u<o.length;u++){var h=o[u],f=h.source(),v=h.target();t.outgoing&&f===s?(i.push(h),i.push(v)):t.incoming&&v===s&&(i.push(h),i.push(f))}}return this.spawn(i,!0).filter(r)}},ud=function(t){return function(r){for(var a=this,i=[],n={};;){var s=t.outgoing?a.outgoers():a.incomers();if(0===s.length)break;for(var o=!1,u=0;u<s.length;u++){var h=s[u],f=h.id();n[f]||(n[f]=!0,i.push(h),o=!0)}if(!o)break;a=s}return this.spawn(i,!0).filter(r)}};function dd(e){return function(r){for(var a=[],i=0;i<this.length;i++){var s=this[i]._private[e.attr];s&&a.push(s)}return this.spawn(a,!0).filter(r)}}function fd(e){return function(r){var a=[],i=this._private.cy,n=e||{};Ge(r)&&(r=i.$(r));for(var s=0;s<r.length;s++)for(var o=r[s]._private.edges,u=0;u<o.length;u++){var h=o[u],f=h._private.data,v=this.hasElementWithId(f.source)&&r.hasElementWithId(f.target),m=r.hasElementWithId(f.source)&&this.hasElementWithId(f.target);(v||m)&&((n.thisIsSrc||n.thisIsTgt)&&(n.thisIsSrc&&!v||n.thisIsTgt&&!m)||a.push(h))}return this.spawn(a,!0)}}function gd(e){return e=G({},{codirected:!1},e),function(a){for(var i=[],n=this.edges(),s=e,o=0;o<n.length;o++)for(var h=n[o]._private,f=h.source,v=f._private.data.id,m=h.data.target,k=f._private.edges,_=0;_<k.length;_++){var U=k[_],I=U._private.data,K=I.target,Y=I.source,X=K===m&&Y===v;(s.codirected&&X||!s.codirected&&(X||v===K&&m===Y))&&i.push(U)}return this.spawn(i,!0).filter(a)}}Pn.clearTraversalCache=function(){for(var e=0;e<this.length;e++)this[e]._private.traversalCache=null},G(Pn,{roots:cd({noIncomingEdges:!0}),leaves:cd({noOutgoingEdges:!0}),outgoers:Hn(hd({outgoing:!0}),"outgoers"),successors:ud({outgoing:!0}),incomers:Hn(hd({incoming:!0}),"incomers"),predecessors:ud({})}),G(Pn,{neighborhood:Hn(function(e){for(var t=[],r=this.nodes(),a=0;a<r.length;a++)for(var i=r[a],n=i.connectedEdges(),s=0;s<n.length;s++){var o=n[s],u=o.source(),h=o.target(),f=i===u?h:u;f.length>0&&t.push(f[0]),t.push(o[0])}return this.spawn(t,!0).filter(e)},"neighborhood"),closedNeighborhood:function(t){return this.neighborhood().add(this).filter(t)},openNeighborhood:function(t){return this.neighborhood(t)}}),Pn.neighbourhood=Pn.neighborhood,Pn.closedNeighbourhood=Pn.closedNeighborhood,Pn.openNeighbourhood=Pn.openNeighborhood,G(Pn,{source:Hn(function(t){var a,r=this[0];return r&&(a=r._private.source||r.cy().collection()),a&&t?a.filter(t):a},"source"),target:Hn(function(t){var a,r=this[0];return r&&(a=r._private.target||r.cy().collection()),a&&t?a.filter(t):a},"target"),sources:dd({attr:"source"}),targets:dd({attr:"target"})}),G(Pn,{edgesWith:Hn(fd(),"edgesWith"),edgesTo:Hn(fd({thisIsSrc:!0}),"edgesTo")}),G(Pn,{connectedEdges:Hn(function(e){for(var t=[],a=0;a<this.length;a++){var i=this[a];if(i.isNode())for(var n=i._private.edges,s=0;s<n.length;s++)t.push(n[s])}return this.spawn(t,!0).filter(e)},"connectedEdges"),connectedNodes:Hn(function(e){for(var t=[],a=0;a<this.length;a++){var i=this[a];i.isEdge()&&(t.push(i.source()[0]),t.push(i.target()[0]))}return this.spawn(t,!0).filter(e)},"connectedNodes"),parallelEdges:Hn(gd(),"parallelEdges"),codirectedEdges:Hn(gd({codirected:!0}),"codirectedEdges")}),G(Pn,{components:function(t){var r=this,a=r.cy(),i=a.collection(),n=null==t?r.nodes():t.nodes(),s=[];null!=t&&n.empty()&&(n=t.sources());var o=function(f,v){i.merge(f),n.unmerge(f),v.merge(f)};if(n.empty())return r.spawn();var u=function(){var f=a.collection();s.push(f);var v=n[0];o(v,f),r.bfs({directed:!1,roots:v,visit:function(k){return o(k,f)}}),f.forEach(function(m){m.connectedEdges().forEach(function(k){r.has(k)&&f.has(k.source())&&f.has(k.target())&&f.merge(k)})})};do{u()}while(n.length>0);return s},component:function(){var t=this[0];return t.cy().mutableElements().components(t)[0]}}),Pn.componentsOf=Pn.components;var wn=function(t,r){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(void 0!==t){var n=new Lt,s=!1;if(r){if(r.length>0&&Bt(r[0])&&!Pt(r[0])){s=!0;for(var o=[],u=new ta,h=0,f=r.length;h<f;h++){var v=r[h];null==v.data&&(v.data={});var m=v.data;if(null==m.id)m.id=di();else if(t.hasElementWithId(m.id)||u.has(m.id))continue;var k=new Gr(t,v,!1);o.push(k),u.add(m.id)}r=o}}else r=[];this.length=0;for(var _=0,U=r.length;_<U;_++){var I=r[_][0];if(null!=I){var K=I._private.data.id;(!a||!n.has(K))&&(a&&n.set(K,{index:this.length,ele:I}),this[this.length]=I,this.length++)}}this._private={eles:this,cy:t,get map(){return null==this.lazyMap&&this.rebuildMap(),this.lazyMap},set map(Y){this.lazyMap=Y},rebuildMap:function(){for(var X=this.lazyMap=new Lt,mt=this.eles,ie=0;ie<mt.length;ie++){var se=mt[ie];X.set(se.id(),{index:ie,ele:se})}}},a&&(this._private.map=n),s&&!i&&this.restore()}else za("A collection must have a reference to the core")},Zi=Gr.prototype=wn.prototype=Object.create(Array.prototype);Zi.instanceString=function(){return"collection"},Zi.spawn=function(e,t){return new wn(this.cy(),e,t)},Zi.spawnSelf=function(){return this.spawn(this)},Zi.cy=function(){return this._private.cy},Zi.renderer=function(){return this._private.cy.renderer()},Zi.element=function(){return this[0]},Zi.collection=function(){return qt(this)?this:new wn(this._private.cy,[this])},Zi.unique=function(){return new wn(this._private.cy,this,!0)},Zi.hasElementWithId=function(e){return this._private.map.has(e=""+e)},Zi.getElementById=function(e){var t=this._private.cy,r=this._private.map.get(e=""+e);return r?r.ele:new wn(t)},Zi.$id=Zi.getElementById,Zi.poolIndex=function(){return this._private.cy._private.elements._private.map.get(this[0]._private.data.id).index},Zi.indexOf=function(e){return this._private.map.get(e[0]._private.data.id).index},Zi.indexOfId=function(e){return this._private.map.get(e=""+e).index},Zi.json=function(e){var t=this.element(),r=this.cy();if(null==t&&e)return this;if(null!=t){var a=t._private;if(Bt(e)){if(r.startBatch(),e.data){t.data(e.data);var i=a.data;if(t.isEdge()){var n=!1,s={},o=e.data.source,u=e.data.target;null!=o&&o!=i.source&&(s.source=""+o,n=!0),null!=u&&u!=i.target&&(s.target=""+u,n=!0),n&&(t=t.move(s))}else{var f=e.data.parent;"parent"in e.data&&(null!=f||null!=i.parent)&&f!=i.parent&&(void 0===f&&(f=null),null!=f&&(f=""+f),t=t.move({parent:f}))}}e.position&&t.position(e.position);var v=function(U,I,K){var Y=e[U];null!=Y&&Y!==a[U]&&(Y?t[I]():t[K]())};return v("removed","remove","restore"),v("selected","select","unselect"),v("selectable","selectify","unselectify"),v("locked","lock","unlock"),v("grabbable","grabify","ungrabify"),v("pannable","panify","unpanify"),null!=e.classes&&t.classes(e.classes),r.endBatch(),this}if(void 0===e){var m={data:Ka(a.data),position:Ka(a.position),group:a.group,removed:a.removed,selected:a.selected,selectable:a.selectable,locked:a.locked,grabbable:a.grabbable,pannable:a.pannable,classes:""},k=0;return a.classes.forEach(function(_){return m.classes+=0===k++?_:" "+_}),m}}},Zi.jsons=function(){for(var e=[],t=0;t<this.length;t++){var a=this[t].json();e.push(a)}return e},Zi.clone=function(){for(var e=this.cy(),t=[],r=0;r<this.length;r++){var i=this[r].json(),n=new Gr(e,i,!1);t.push(n)}return new wn(e,t)},Zi.copy=Zi.clone,Zi.restore=function(){for(var o,e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=this,a=r.cy(),i=a._private,n=[],s=[],u=0,h=r.length;u<h;u++){var f=r[u];t&&!f.removed()||(f.isNode()?n.push(f):s.push(f))}o=n.concat(s);var v,m=function(){o.splice(v,1),v--};for(v=0;v<o.length;v++){var k=o[v],_=k._private,U=_.data;if(k.clearTraversalCache(),t||_.removed)if(void 0===U.id)U.id=di();else if(Z(U.id))U.id=""+U.id;else{if(Nt(U.id)||!Ge(U.id)){za("Can not create element with invalid string ID `"+U.id+"`"),m();continue}if(a.hasElementWithId(U.id)){za("Can not create second element with ID `"+U.id+"`"),m();continue}}var I=U.id;if(k.isNode()){var K=_.position;null==K.x&&(K.x=0),null==K.y&&(K.y=0)}if(k.isEdge()){for(var Y=k,X=["source","target"],mt=X.length,ie=!1,se=0;se<mt;se++){var Yt=X[se],he=U[Yt];Z(he)&&(he=U[Yt]=""+U[Yt]),null==he||""===he?(za("Can not create edge `"+I+"` with unspecified "+Yt),ie=!0):a.hasElementWithId(he)||(za("Can not create edge `"+I+"` with nonexistant "+Yt+" `"+he+"`"),ie=!0)}if(ie){m();continue}var be=a.getElementById(U.source),Se=a.getElementById(U.target);be.same(Se)?be._private.edges.push(Y):(be._private.edges.push(Y),Se._private.edges.push(Y)),Y._private.source=be,Y._private.target=Se}_.map=new Lt,_.map.set(I,{ele:k,index:0}),_.removed=!1,t&&a.addToPool(k)}for(var De=0;De<n.length;De++){var Oe=n[De],Ne=Oe._private.data;Z(Ne.parent)&&(Ne.parent=""+Ne.parent);var Je=Ne.parent;if(null!=Je||Oe._private.parent){var gr=Oe._private.parent?a.collection().merge(Oe._private.parent):a.getElementById(Je);if(gr.empty())Ne.parent=void 0;else if(gr[0].removed())Sa("Node added with missing parent, reference to parent removed"),Ne.parent=void 0,Oe._private.parent=null;else{for(var ar=!1,Sr=gr;!Sr.empty();){if(Oe.same(Sr)){ar=!0,Ne.parent=void 0;break}Sr=Sr.parent()}ar||(gr[0]._private.children.push(Oe),Oe._private.parent=gr[0],i.hasCompoundNodes=!0)}}}if(o.length>0){for(var Ur=o.length===r.length?r:new wn(a,o),jr=0;jr<Ur.length;jr++){var Mr=Ur[jr];Mr.isNode()||(Mr.parallelEdges().clearTraversalCache(),Mr.source().clearTraversalCache(),Mr.target().clearTraversalCache())}(i.hasCompoundNodes?a.collection().merge(Ur).merge(Ur.connectedNodes()).merge(Ur.parent()):Ur).dirtyCompoundBoundsCache().dirtyBoundingBoxCache().updateStyle(e),e?Ur.emitAndNotify("add"):t&&Ur.emit("add")}return r},Zi.removed=function(){var e=this[0];return e&&e._private.removed},Zi.inside=function(){var e=this[0];return e&&!e._private.removed},Zi.remove=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=this,a=[],i={},n=r._private.cy;function u(Je){var dr=i[Je.id()];t&&Je.removed()||dr||(i[Je.id()]=!0,Je.isNode()?(a.push(Je),function s(Je){for(var dr=Je._private.edges,gr=0;gr<dr.length;gr++)u(dr[gr])}(Je),function o(Je){for(var dr=Je._private.children,gr=0;gr<dr.length;gr++)u(dr[gr])}(Je)):a.unshift(Je))}for(var h=0,f=r.length;h<f;h++)u(r[h]);function m(Je,dr){at(Je._private.edges,dr),Je.clearTraversalCache()}function k(Je){Je.clearTraversalCache()}var _=[];function U(Je,dr){dr=dr[0];var gr=(Je=Je[0])._private.children,ar=Je.id();at(gr,dr),dr._private.parent=null,_.ids[ar]||(_.ids[ar]=!0,_.push(Je))}_.ids={},r.dirtyCompoundBoundsCache(),t&&n.removeFromPool(a);for(var I=0;I<a.length;I++){var K=a[I];if(K.isEdge()){var Y=K.source()[0],X=K.target()[0];m(Y,K),m(X,K);for(var mt=K.parallelEdges(),ie=0;ie<mt.length;ie++){var se=mt[ie];k(se),se.isBundledBezier()&&se.dirtyBoundingBoxCache()}}else{var Yt=K.parent();0!==Yt.length&&U(Yt,K)}t&&(K._private.removed=!0)}var he=n._private.elements;n._private.hasCompoundNodes=!1;for(var be=0;be<he.length;be++)if(he[be].isParent()){n._private.hasCompoundNodes=!0;break}var De=new wn(this.cy(),a);De.size()>0&&(e?De.emitAndNotify("remove"):t&&De.emit("remove"));for(var Oe=0;Oe<_.length;Oe++){var Ne=_[Oe];(!t||!Ne.removed())&&Ne.updateStyle()}return De},Zi.move=function(e){var t=this._private.cy,r=this,a=!1,i=!1,n=function(_){return null==_?_:""+_};if(void 0!==e.source||void 0!==e.target){var s=n(e.source),o=n(e.target),u=null!=s&&t.hasElementWithId(s),h=null!=o&&t.hasElementWithId(o);(u||h)&&(t.batch(function(){r.remove(a,i),r.emitAndNotify("moveout");for(var k=0;k<r.length;k++){var _=r[k],U=_._private.data;_.isEdge()&&(u&&(U.source=s),h&&(U.target=o))}r.restore(a,i)}),r.emitAndNotify("move"))}else if(void 0!==e.parent){var f=n(e.parent);if(null===f||t.hasElementWithId(f)){var m=null===f?void 0:f;t.batch(function(){var k=r.remove(a,i);k.emitAndNotify("moveout");for(var _=0;_<r.length;_++){var U=r[_],I=U._private.data;U.isNode()&&(I.parent=m)}k.restore(a,i)}),r.emitAndNotify("move")}}return this},[Th,Cg,Fo,vs,zs,Kg,Ko,e1,id,nd,{isNode:function(){return"nodes"===this.group()},isEdge:function(){return"edges"===this.group()},isLoop:function(){return this.isEdge()&&this.source()[0]===this.target()[0]},isSimple:function(){return this.isEdge()&&this.source()[0]!==this.target()[0]},group:function(){var t=this[0];if(t)return t._private.group}},$o,Yo,Sn,bs,Pn].forEach(function(e){G(Zi,e)});var f1={add:function(t){var r,a=this;if(re(t)){var i=t;if(i._private.cy===a)r=i.restore();else{for(var n=[],s=0;s<i.length;s++)n.push(i[s].json());r=new wn(a,n)}}else if(ft(t))r=new wn(a,t);else if(Bt(t)&&(ft(t.nodes)||ft(t.edges))){for(var h=t,f=[],v=["nodes","edges"],m=0,k=v.length;m<k;m++){var _=v[m],U=h[_];if(ft(U))for(var I=0,K=U.length;I<K;I++){var Y=G({group:_},U[I]);f.push(Y)}}r=new wn(a,f)}else r=new Gr(a,t).collection();return r},remove:function(t){return re(t)||Ge(t)&&(t=this.$(t)),t.remove()}};
/*! Bezier curve function generator. Copyright Gaetan Renaudeau. MIT License: http://en.wikipedia.org/wiki/MIT_License */function g1(e,t,r,a){var h=.1,f=typeof Float32Array<"u";if(4!==arguments.length)return!1;for(var v=0;v<4;++v)if("number"!=typeof arguments[v]||isNaN(arguments[v])||!isFinite(arguments[v]))return!1;e=Math.min(e,1),r=Math.min(r,1),e=Math.max(e,0),r=Math.max(r,0);var m=f?new Float32Array(11):new Array(11);function k(Se,De){return 1-3*De+3*Se}function _(Se,De){return 3*De-6*Se}function U(Se){return 3*Se}function I(Se,De,Oe){return((k(De,Oe)*Se+_(De,Oe))*Se+U(De))*Se}function K(Se,De,Oe){return 3*k(De,Oe)*Se*Se+2*_(De,Oe)*Se+U(De)}var se=!1;var he=function(De){return se||function Yt(){se=!0,(e!==t||r!==a)&&function X(){for(var Se=0;Se<11;++Se)m[Se]=I(Se*h,e,r)}()}(),e===t&&r===a?De:0===De?0:1===De?1:I(function ie(Se){for(var De=0,Oe=1;10!==Oe&&m[Oe]<=Se;++Oe)De+=h;--Oe;var dr=De+(Se-m[Oe])/(m[Oe+1]-m[Oe])*h,gr=K(dr,e,r);return gr>=.001?function Y(Se,De){for(var Oe=0;Oe<4;++Oe){var Ne=K(De,e,r);if(0===Ne)return De;De-=(I(De,e,r)-Se)/Ne}return De}(Se,dr):0===gr?dr:function mt(Se,De,Oe){var Ne,Je,dr=0;do{(Ne=I(Je=De+(Oe-De)/2,e,r)-Se)>0?Oe=Je:De=Je}while(Math.abs(Ne)>1e-7&&++dr<10);return Je}(Se,De,De+h)}(De),t,a)};he.getControlPoints=function(){return[{x:e,y:t},{x:r,y:a}]};var be="generateBezier("+[e,t,r,a]+")";return he.toString=function(){return be},he
/*! Runge-Kutta spring physics function generator. Adapted from Framer.js, copyright Koen Bok. MIT License: http://en.wikipedia.org/wiki/MIT_License */}var p1=function(){function e(a){return-a.tension*a.x-a.friction*a.v}function t(a,i,n){var s={x:a.x+n.dx*i,v:a.v+n.dv*i,tension:a.tension,friction:a.friction};return{dx:s.v,dv:e(s)}}function r(a,i){var n={dx:a.v,dv:e(a)},s=t(a,.5*i,n),o=t(a,.5*i,s),u=t(a,i,o),f=1/6*(n.dv+2*(s.dv+o.dv)+u.dv);return a.x=a.x+1/6*(n.dx+2*(s.dx+o.dx)+u.dx)*i,a.v=a.v+f*i,a}return function a(i,n,s){var m,k,_,o={x:-1,v:0,tension:null,friction:null},u=[0],h=0,f=1e-4;for(i=parseFloat(i)||500,n=parseFloat(n)||20,s=s||null,o.tension=i,o.friction=n,k=(m=null!==s)?(h=a(i,n))/s*.016:.016;_=r(_||o,k),u.push(1+_.x),h+=16,Math.abs(_.x)>f&&Math.abs(_.v)>f;);return m?function(U){return u[U*(u.length-1)|0]}:h}}(),Qi=function(t,r,a,i){var n=g1(t,r,a,i);return function(s,o,u){return s+(o-s)*n(u)}},qo={linear:function(t,r,a){return t+(r-t)*a},ease:Qi(.25,.1,.25,1),"ease-in":Qi(.42,0,1,1),"ease-out":Qi(0,0,.58,1),"ease-in-out":Qi(.42,0,.58,1),"ease-in-sine":Qi(.47,0,.745,.715),"ease-out-sine":Qi(.39,.575,.565,1),"ease-in-out-sine":Qi(.445,.05,.55,.95),"ease-in-quad":Qi(.55,.085,.68,.53),"ease-out-quad":Qi(.25,.46,.45,.94),"ease-in-out-quad":Qi(.455,.03,.515,.955),"ease-in-cubic":Qi(.55,.055,.675,.19),"ease-out-cubic":Qi(.215,.61,.355,1),"ease-in-out-cubic":Qi(.645,.045,.355,1),"ease-in-quart":Qi(.895,.03,.685,.22),"ease-out-quart":Qi(.165,.84,.44,1),"ease-in-out-quart":Qi(.77,0,.175,1),"ease-in-quint":Qi(.755,.05,.855,.06),"ease-out-quint":Qi(.23,1,.32,1),"ease-in-out-quint":Qi(.86,0,.07,1),"ease-in-expo":Qi(.95,.05,.795,.035),"ease-out-expo":Qi(.19,1,.22,1),"ease-in-out-expo":Qi(1,0,0,1),"ease-in-circ":Qi(.6,.04,.98,.335),"ease-out-circ":Qi(.075,.82,.165,1),"ease-in-out-circ":Qi(.785,.135,.15,.86),spring:function(t,r,a){if(0===a)return qo.linear;var i=p1(t,r,a);return function(n,s,o){return n+(s-n)*i(o)}},"cubic-bezier":Qi};function pd(e,t,r,a,i){if(1===a||t===r)return r;var n=i(t,r,a);return null==e||((e.roundValue||e.color)&&(n=Math.round(n)),void 0!==e.min&&(n=Math.max(n,e.min)),void 0!==e.max&&(n=Math.min(n,e.max))),n}function vd(e,t){return null!=e.pfValue||null!=e.value?null==e.pfValue||null!=t&&"%"===t.type.units?e.value:e.pfValue:e}function Hs(e,t,r,a,i){var n=null!=i?i.type:null;r<0?r=0:r>1&&(r=1);var s=vd(e,i),o=vd(t,i);if(Z(s)&&Z(o))return pd(n,s,o,r,a);if(ft(s)&&ft(o)){for(var u=[],h=0;h<o.length;h++){var f=s[h],v=o[h];if(null!=f&&null!=v){var m=pd(n,f,v,r,a);u.push(m)}else u.push(v)}return u}}function y1(e,t,r,a){var i=!a,n=e._private,s=t._private,o=s.easing,u=s.startTime,f=(a?e:e.cy()).style();if(!s.easingImpl)if(null==o)s.easingImpl=qo.linear;else{var v,k,_;v=Ge(o)?f.parse("transition-timing-function",o).value:o,Ge(v)?(k=v,_=[]):(k=v[1],_=v.slice(2).map(function(Ur){return+Ur})),_.length>0?("spring"===k&&_.push(s.duration),s.easingImpl=qo[k].apply(null,_)):s.easingImpl=qo[k]}var I,U=s.easingImpl;if(I=0===s.duration?1:(r-u)/s.duration,s.applying&&(I=s.progress),I<0?I=0:I>1&&(I=1),null==s.delay){var K=s.startPosition,Y=s.position;if(Y&&i&&!e.locked()){var X={};ho(K.x,Y.x)&&(X.x=Hs(K.x,Y.x,I,U)),ho(K.y,Y.y)&&(X.y=Hs(K.y,Y.y,I,U)),e.position(X)}var mt=s.startPan,ie=s.pan,se=n.pan,Yt=null!=ie&&a;Yt&&(ho(mt.x,ie.x)&&(se.x=Hs(mt.x,ie.x,I,U)),ho(mt.y,ie.y)&&(se.y=Hs(mt.y,ie.y,I,U)),e.emit("pan"));var he=s.startZoom,be=s.zoom,Se=null!=be&&a;Se&&(ho(he,be)&&(n.zoom=Zt(n.minZoom,Hs(he,be,I,U),n.maxZoom)),e.emit("zoom")),(Yt||Se)&&e.emit("viewport");var De=s.style;if(De&&De.length>0&&i){for(var Oe=0;Oe<De.length;Oe++){var Ne=De[Oe],Je=Ne.name,gr=s.startStyle[Je],Sr=Hs(gr,Ne,I,U,f.properties[gr.name]);f.overrideBypass(e,Je,Sr)}e.emit("style")}}return s.progress=I,I}function ho(e,t){return!!(null!=e&&null!=t&&(Z(e)&&Z(t)||e&&t))}function m1(e,t,r,a){var i=t._private;i.started=!0,i.startTime=r-i.progress*i.duration}function yd(e,t){var r=t._private.aniEles,a=[];function i(f,v){var m=f._private,k=m.animation.current,_=m.animation.queue,U=!1;if(0===k.length){var I=_.shift();I&&k.push(I)}for(var K=function(se){for(var Yt=se.length-1;Yt>=0;Yt--)(0,se[Yt])();se.splice(0,se.length)},Y=k.length-1;Y>=0;Y--){var X=k[Y],mt=X._private;mt.stopped?(k.splice(Y,1),mt.hooked=!1,mt.playing=!1,mt.started=!1,K(mt.frames)):!mt.playing&&!mt.applying||(mt.playing&&mt.applying&&(mt.applying=!1),mt.started||m1(0,X,e),y1(f,X,e,v),mt.applying&&(mt.applying=!1),K(mt.frames),null!=mt.step&&mt.step(e),X.completed()&&(k.splice(Y,1),mt.hooked=!1,mt.playing=!1,mt.started=!1,K(mt.completes)),U=!0)}return!v&&0===k.length&&0===_.length&&a.push(f),U}for(var n=!1,s=0;s<r.length;s++){var u=i(r[s]);n=n||u}var h=i(t,!0);(n||h)&&(r.length>0?t.notify("draw",r):t.notify("draw")),r.unmerge(a),t.emit("step")}var x1={animate:$i.animate(),animation:$i.animation(),animated:$i.animated(),clearQueue:$i.clearQueue(),delay:$i.delay(),delayAnimation:$i.delayAnimation(),stop:$i.stop(),addToAnimationPool:function(t){this.styleEnabled()&&this._private.aniEles.merge(t)},stopAnimationLoop:function(){this._private.animationsRunning=!1},startAnimationLoop:function(){var t=this;if(t._private.animationsRunning=!0,t.styleEnabled()){var a=t.renderer();a&&a.beforeRender?a.beforeRender(function(n,s){yd(s,t)},a.beforeRenderPriorities.animations):function r(){t._private.animationsRunning&&Oa(function(n){yd(n,t),r()})}()}}},b1={qualifierCompare:function(t,r){return null==t||null==r?null==t&&null==r:t.sameText(r)},eventMatches:function(t,r,a){var i=r.qualifier;return null==i||t!==a.target&&Pt(a.target)&&i.matches(a.target)},addEventFields:function(t,r){r.cy=t,r.target=t},callbackContext:function(t,r,a){return null!=r.qualifier?a.target:t}},jo=function(t){return Ge(t)?new gs(t):t},md={createEmitter:function(){var t=this._private;return t.emitter||(t.emitter=new Vo(b1,this)),this},emitter:function(){return this._private.emitter},on:function(t,r,a){return this.emitter().on(t,jo(r),a),this},removeListener:function(t,r,a){return this.emitter().removeListener(t,jo(r),a),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},one:function(t,r,a){return this.emitter().one(t,jo(r),a),this},once:function(t,r,a){return this.emitter().one(t,jo(r),a),this},emit:function(t,r){return this.emitter().emit(t,r),this},emitAndNotify:function(t,r){return this.emit(t),this.notify(t,r),this}};$i.eventAliasesOn(md);var Rc={png:function(t){return this._private.renderer.png(t=t||{})},jpg:function(t){var r=this._private.renderer;return(t=t||{}).bg=t.bg||"#fff",r.jpg(t)}};Rc.jpeg=Rc.jpg;var Xo={layout:function(t){var r=this;if(null!=t)if(null!=t.name){var n,a=t.name,i=r.extension("layout",a);if(null!=i)return n=Ge(t.eles)?r.$(t.eles):null!=t.eles?t.eles:r.$(),new i(G({},t,{cy:r,eles:n}));za("No such layout `"+a+"` found.  Did you forget to import it and `cytoscape.use()` it?")}else za("A `name` must be specified to make a layout");else za("Layout options must be specified to make a layout")}};Xo.createLayout=Xo.makeLayout=Xo.layout;var _1={notify:function(t,r){var a=this._private;if(this.batching()){a.batchNotifications=a.batchNotifications||{};var i=a.batchNotifications[t]=a.batchNotifications[t]||this.collection();null!=r&&i.merge(r)}else if(a.notificationsEnabled){var n=this.renderer();this.destroyed()||!n||n.notify(t,r)}},notifications:function(t){var r=this._private;return void 0===t?r.notificationsEnabled:(r.notificationsEnabled=!!t,this)},noNotifications:function(t){this.notifications(!1),t(),this.notifications(!0)},batching:function(){return this._private.batchCount>0},startBatch:function(){var t=this._private;return null==t.batchCount&&(t.batchCount=0),0===t.batchCount&&(t.batchStyleEles=this.collection(),t.batchNotifications={}),t.batchCount++,this},endBatch:function(){var t=this._private;if(0===t.batchCount)return this;if(t.batchCount--,0===t.batchCount){t.batchStyleEles.updateStyle();var r=this.renderer();Object.keys(t.batchNotifications).forEach(function(a){var i=t.batchNotifications[a];i.empty()?r.notify(a):r.notify(a,i)})}return this},batch:function(t){return this.startBatch(),t(),this.endBatch(),this},batchData:function(t){var r=this;return this.batch(function(){for(var a=Object.keys(t),i=0;i<a.length;i++){var n=a[i],s=t[n];r.getElementById(n).data(s)}})}},E1=Me({hideEdgesOnViewport:!1,textureOnViewport:!1,motionBlur:!1,motionBlurOpacity:.05,pixelRatio:void 0,desktopTapThreshold:4,touchTapThreshold:8,wheelSensitivity:1,debug:!1,showFps:!1,webgl:!1,webglDebug:!1,webglDebugShowAtlases:!1,webglTexSize:2048,webglTexRows:36,webglTexRowsNodes:18,webglBatchSize:2048,webglTexPerBatch:14,webglBgColor:[255,255,255]}),Pc={renderTo:function(t,r,a,i){return this._private.renderer.renderTo(t,r,a,i),this},renderer:function(){return this._private.renderer},forceRender:function(){return this.notify("draw"),this},resize:function(){return this.invalidateSize(),this.emitAndNotify("resize"),this},initRenderer:function(t){var r=this,a=r.extension("renderer",t.name);if(null!=a){void 0!==t.wheelSensitivity&&Sa("You have set a custom wheel sensitivity.  This will make your app zoom unnaturally when using mainstream mice.  You should change this value from the default only if you can guarantee that all your users will use the same hardware and OS configuration as your current machine.");var i=E1(t);i.cy=r,r._private.renderer=new a(i),this.notify("init")}else za("Can not initialise: No such renderer `".concat(t.name,"` found. Did you forget to import it and `cytoscape.use()` it?"))},destroyRenderer:function(){var t=this;t.notify("destroy");var r=t.container();if(r)for(r._cyreg=null;r.childNodes.length>0;)r.removeChild(r.childNodes[0]);t._private.renderer=null,t.mutableElements().forEach(function(a){var i=a._private;i.rscratch={},i.rstyle={},i.animation.current=[],i.animation.queue=[]})},onRender:function(t){return this.on("render",t)},offRender:function(t){return this.off("render",t)}};Pc.invalidateDimensions=Pc.resize;var Zo={collection:function(t,r){return Ge(t)?this.$(t):re(t)?t.collection():ft(t)?(r||(r={}),new wn(this,t,r.unique,r.removed)):new wn(this)},nodes:function(t){var r=this.$(function(a){return a.isNode()});return t?r.filter(t):r},edges:function(t){var r=this.$(function(a){return a.isEdge()});return t?r.filter(t):r},$:function(t){var r=this._private.elements;return t?r.filter(t):r.spawnSelf()},mutableElements:function(){return this._private.elements}};Zo.elements=Zo.filter=Zo.$;var _n={apply:function(e){for(var t=this,i=t._private.cy.collection(),n=0;n<e.length;n++){var s=e[n],o=t.getContextMeta(s);if(!o.empty){var u=t.getContextStyle(o),h=t.applyContextStyle(o,u,s);s._private.appliedInitStyle?t.updateTransitions(s,h.diffProps):s._private.appliedInitStyle=!0,t.updateStyleHints(s)&&i.push(s)}}return i},getPropertiesDiff:function(e,t){var r=this,a=r._private.propDiffs=r._private.propDiffs||{},i=e+"-"+t,n=a[i];if(n)return n;for(var s=[],o={},u=0;u<r.length;u++){var h=r[u],v="t"===t[u],m="t"===e[u]!==v,k=h.mappedProperties.length>0;if(m||v&&k){var _=void 0;m&&k||m?_=h.properties:k&&(_=h.mappedProperties);for(var U=0;U<_.length;U++){for(var I=_[U],K=I.name,Y=!1,X=u+1;X<r.length&&("t"!==t[X]||!(Y=null!=r[X].properties[I.name]));X++);!o[K]&&!Y&&(o[K]=!0,s.push(K))}}}return a[i]=s,s},getContextMeta:function(e){for(var a,t=this,r="",i=e._private.styleCxtKey||"",n=0;n<t.length;n++){var s=t[n];r+=s.selector&&s.selector.matches(e)?"t":"f"}return a=t.getPropertiesDiff(i,r),e._private.styleCxtKey=r,{key:r,diffPropNames:a,empty:0===a.length}},getContextStyle:function(e){var t=e.key,a=this._private.contextStyles=this._private.contextStyles||{};if(a[t])return a[t];for(var i={_private:{key:t}},n=0;n<this.length;n++){var s=this[n];if("t"===t[n])for(var u=0;u<s.properties.length;u++){var h=s.properties[u];i[h.name]=h}}return a[t]=i,i},applyContextStyle:function(e,t,r){for(var i=e.diffPropNames,n={},s=this.types,o=0;o<i.length;o++){var u=i[o],h=t[u],f=r.pstyle(u);if(!h){if(!f)continue;h=f.bypass?{name:u,deleteBypassed:!0}:{name:u,delete:!0}}if(f!==h){if(h.mapped===s.fn&&null!=f&&null!=f.mapping&&f.mapping.value===h.value){var v=f.mapping;if((v.fnValue=h.value(r))===v.prevFnValue)continue}var k=n[u]={prev:f};this.applyParsedProperty(r,h),k.next=r.pstyle(u),k.next&&k.next.bypass&&(k.next=k.next.bypassed)}}return{diffProps:n}},updateStyleHints:function(e){var a,t=e._private,r=this,i=r.propertyGroupKeys,n=function(ea,xa,Ga){return r.getPropertiesHash(ea,xa,Ga)},s=t.styleKey;if(e.removed())return!1;var o="nodes"===t.group,u=e._private.style;a=Object.keys(u);for(var h=0;h<i.length;h++)t.styleKeys[i[h]]=[ra,Rr];for(var v=function(ea,xa){return t.styleKeys[xa][0]=N(ea,t.styleKeys[xa][0])},m=function(ea,xa){return t.styleKeys[xa][1]=Vt(ea,t.styleKeys[xa][1])},k=function(ea,xa){v(ea,xa),m(ea,xa)},_=function(ea,xa){for(var Ga=0;Ga<ea.length;Ga++){var li=ea.charCodeAt(Ga);v(li,xa),m(li,xa)}},I=function(ea){return-128<ea&&ea<128&&Math.floor(ea)!==ea?2e9-(1024*ea|0):ea},K=0;K<a.length;K++){var Y=a[K],X=u[Y];if(null!=X){var mt=this.properties[Y],ie=mt.type,se=mt.groupKey,Yt=void 0;null!=mt.hashOverride?Yt=mt.hashOverride(e,X):null!=X.pfValue&&(Yt=X.pfValue);var he=null==mt.enums?X.value:null,be=null!=Yt,Oe=X.units;!ie.number||!be&&null==he||ie.multiple?_(X.strValue,se):(k(I(be?Yt:he),se),!be&&null!=Oe&&_(Oe,se))}}for(var Je=[ra,Rr],dr=0;dr<i.length;dr++){var ar=t.styleKeys[i[dr]];Je[0]=N(ar[0],Je[0]),Je[1]=Vt(ar[1],Je[1])}t.styleKey=function(t,r){return 2097152*t+r}(Je[0],Je[1]);var Sr=t.styleKeys;t.labelDimsKey=rr(Sr.labelDimensions);var Ur=n(e,["label"],Sr.labelDimensions);if(t.labelKey=rr(Ur),t.labelStyleKey=rr(ia(Sr.commonLabel,Ur)),!o){var jr=n(e,["source-label"],Sr.labelDimensions);t.sourceLabelKey=rr(jr),t.sourceLabelStyleKey=rr(ia(Sr.commonLabel,jr));var Mr=n(e,["target-label"],Sr.labelDimensions);t.targetLabelKey=rr(Mr),t.targetLabelStyleKey=rr(ia(Sr.commonLabel,Mr))}if(o){var Wr=t.styleKeys,Qa=Wr.pie,Ta=Wr.stripe,Kr=[Wr.nodeBody,Wr.nodeBorder,Wr.nodeOutline,Wr.backgroundImage,Wr.compound,Qa,Ta].filter(function($r){return null!=$r}).reduce(ia,[ra,Rr]);t.nodeKey=rr(Kr),t.hasPie=null!=Qa&&Qa[0]!==ra&&Qa[1]!==Rr,t.hasStripe=null!=Ta&&Ta[0]!==ra&&Ta[1]!==Rr}return s!==t.styleKey},clearStyleHints:function(e){var t=e._private;t.styleCxtKey="",t.styleKeys={},t.styleKey=null,t.labelKey=null,t.labelStyleKey=null,t.sourceLabelKey=null,t.sourceLabelStyleKey=null,t.targetLabelKey=null,t.targetLabelStyleKey=null,t.nodeKey=null,t.hasPie=null,t.hasStripe=null},applyParsedProperty:function(e,t){var n,r=this,a=t,i=e._private.style,s=r.types,o=r.properties[a.name].type,u=a.bypass,h=i[a.name],f=h&&h.bypass,v=e._private,m="mapping",k=function(pa){return null==pa?null:null!=pa.pfValue?pa.pfValue:pa.value},_=function(){var pa=k(h),Ea=k(a);r.checkTriggers(e,a.name,pa,Ea)};if("curve-style"===t.name&&e.isEdge()&&("bezier"!==t.value&&e.isLoop()||"haystack"===t.value&&(e.source().isParent()||e.target().isParent()))&&(a=t=this.parse(t.name,"bezier",u)),a.delete)return i[a.name]=void 0,_(),!0;if(a.deleteBypassed)return h?!!h.bypass&&(h.bypassed=void 0,_(),!0):(_(),!0);if(a.deleteBypass)return h?!!h.bypass&&(i[a.name]=h.bypassed,_(),!0):(_(),!0);var U=function(){Sa("Do not assign mappings to elements without corresponding data (i.e. ele `"+e.id()+"` has no mapping for property `"+a.name+"` with data field `"+a.field+"`); try a `["+a.field+"]` selector to limit scope to elements with `"+a.field+"` defined")};switch(a.mapped){case s.mapData:for(var I=a.field.split("."),K=v.data,Y=0;Y<I.length&&K;Y++)K=K[I[Y]];if(null==K)return U(),!1;var mt;if(!Z(K))return Sa("Do not use continuous mappers without specifying numeric data (i.e. `"+a.field+": "+K+"` for `"+e.id()+"` is non-numeric)"),!1;var ie=a.fieldMax-a.fieldMin;if((mt=0===ie?0:(K-a.fieldMin)/ie)<0?mt=0:mt>1&&(mt=1),o.color){var se=a.valueMin[0],he=a.valueMin[1],be=a.valueMax[1],Se=a.valueMin[2],De=a.valueMax[2],Oe=null==a.valueMin[3]?1:a.valueMin[3],Ne=null==a.valueMax[3]?1:a.valueMax[3],Je=[Math.round(se+(a.valueMax[0]-se)*mt),Math.round(he+(be-he)*mt),Math.round(Se+(De-Se)*mt),Math.round(Oe+(Ne-Oe)*mt)];n={bypass:a.bypass,name:a.name,value:Je,strValue:"rgb("+Je[0]+", "+Je[1]+", "+Je[2]+")"}}else{if(!o.number)return!1;n=this.parse(a.name,a.valueMin+(a.valueMax-a.valueMin)*mt,a.bypass,m)}if(!n)return U(),!1;n.mapping=a,a=n;break;case s.data:for(var gr=a.field.split("."),ar=v.data,Sr=0;Sr<gr.length&&ar;Sr++)ar=ar[gr[Sr]];if(null!=ar&&(n=this.parse(a.name,ar,a.bypass,m)),!n)return U(),!1;n.mapping=a,a=n;break;case s.fn:var Mr=null!=a.fnValue?a.fnValue:(0,a.value)(e);if(a.prevFnValue=Mr,null==Mr)return Sa("Custom function mappers may not return null (i.e. `"+a.name+"` for ele `"+e.id()+"` is null)"),!1;if(!(n=this.parse(a.name,Mr,a.bypass,m)))return Sa("Custom function mappers may not return invalid values for the property type (i.e. `"+a.name+"` for ele `"+e.id()+"` is invalid)"),!1;n.mapping=Ka(a),a=n;break;case void 0:break;default:return!1}return u?(a.bypassed=f?h.bypassed:h,i[a.name]=a):f?h.bypassed=a:i[a.name]=a,_(),!0},cleanElements:function(e,t){for(var r=0;r<e.length;r++){var a=e[r];if(this.clearStyleHints(a),a.dirtyCompoundBoundsCache(),a.dirtyBoundingBoxCache(),t)for(var i=a._private.style,n=Object.keys(i),s=0;s<n.length;s++){var o=n[s],u=i[o];null!=u&&(u.bypass?u.bypassed=null:i[o]=null)}else a._private.style={}}},update:function(){this._private.cy.mutableElements().updateStyle()},updateTransitions:function(e,t){var r=this,a=e._private,i=e.pstyle("transition-property").value,n=e.pstyle("transition-duration").pfValue,s=e.pstyle("transition-delay").pfValue;if(i.length>0&&n>0){for(var o={},u=!1,h=0;h<i.length;h++){var f=i[h],v=e.pstyle(f),m=t[f];if(m){var _=m.prev,U=null!=m.next?m.next:v,I=!1,K=void 0,Y=1e-6;_&&(Z(_.pfValue)&&Z(U.pfValue)?K=_.pfValue+Y*(I=U.pfValue-_.pfValue):Z(_.value)&&Z(U.value)?K=_.value+Y*(I=U.value-_.value):ft(_.value)&&ft(U.value)&&(I=_.value[0]!==U.value[0]||_.value[1]!==U.value[1]||_.value[2]!==U.value[2],K=_.strValue),I&&(o[f]=U.strValue,this.applyBypass(e,f,K),u=!0))}}if(!u)return;a.transitioning=!0,new Ks(function(X){s>0?e.delayAnimation(s).play().promise().then(X):X()}).then(function(){return e.animation({style:o,duration:n,easing:e.pstyle("transition-timing-function").value,queue:!1}).play().promise()}).then(function(){r.removeBypasses(e,i),e.emitAndNotify("style"),a.transitioning=!1})}else a.transitioning&&(this.removeBypasses(e,i),e.emitAndNotify("style"),a.transitioning=!1)},checkTrigger:function(e,t,r,a,i,n){var s=this.properties[t],o=i(s);e.removed()||null!=o&&o(r,a,e)&&n(s)},checkZOrderTrigger:function(e,t,r,a){var i=this;this.checkTrigger(e,t,r,a,function(n){return n.triggersZOrder},function(){i._private.cy.notify("zorder",e)})},checkBoundsTrigger:function(e,t,r,a){this.checkTrigger(e,t,r,a,function(i){return i.triggersBounds},function(i){e.dirtyCompoundBoundsCache(),e.dirtyBoundingBoxCache()})},checkConnectedEdgesBoundsTrigger:function(e,t,r,a){this.checkTrigger(e,t,r,a,function(i){return i.triggersBoundsOfConnectedEdges},function(i){e.connectedEdges().forEach(function(n){n.dirtyBoundingBoxCache()})})},checkParallelEdgesBoundsTrigger:function(e,t,r,a){this.checkTrigger(e,t,r,a,function(i){return i.triggersBoundsOfParallelEdges},function(i){e.parallelEdges().forEach(function(n){n.dirtyBoundingBoxCache()})})},checkTriggers:function(e,t,r,a){e.dirtyStyleCache(),this.checkZOrderTrigger(e,t,r,a),this.checkBoundsTrigger(e,t,r,a),this.checkConnectedEdgesBoundsTrigger(e,t,r,a),this.checkParallelEdgesBoundsTrigger(e,t,r,a)}},fo={applyBypass:function(e,t,r,a){var n=[];if("*"===t||"**"===t){if(void 0!==r)for(var o=0;o<this.properties.length;o++){var f=this.parse(this.properties[o].name,r,!0);f&&n.push(f)}}else if(Ge(t)){var v=this.parse(t,r,!0);v&&n.push(v)}else{if(!Bt(t))return!1;var m=t;a=r;for(var k=Object.keys(m),_=0;_<k.length;_++){var U=k[_],I=m[U];if(void 0===I&&(I=m[qe(U)]),void 0!==I){var K=this.parse(U,I,!0);K&&n.push(K)}}}if(0===n.length)return!1;for(var Y=!1,X=0;X<e.length;X++){for(var mt=e[X],ie={},se=void 0,Yt=0;Yt<n.length;Yt++){var he=n[Yt];if(a){var be=mt.pstyle(he.name);se=ie[he.name]={prev:be}}Y=this.applyParsedProperty(mt,Ka(he))||Y,a&&(se.next=mt.pstyle(he.name))}Y&&this.updateStyleHints(mt),a&&this.updateTransitions(mt,ie,!0)}return Y},overrideBypass:function(e,t,r){t=oe(t);for(var a=0;a<e.length;a++){var i=e[a],n=i._private.style[t],s=this.properties[t].type,o=s.color,u=s.mutiple,h=n?null!=n.pfValue?n.pfValue:n.value:null;n&&n.bypass?(n.value=r,null!=n.pfValue&&(n.pfValue=r),n.strValue=o?"rgb("+r.join(",")+")":u?r.join(" "):""+r,this.updateStyleHints(i)):this.applyBypass(i,t,r),this.checkTriggers(i,t,h,r)}},removeAllBypasses:function(e,t){return this.removeBypasses(e,this.propertyNames,t)},removeBypasses:function(e,t,r){for(var i=0;i<e.length;i++){for(var n=e[i],s={},o=0;o<t.length;o++){var u=t[o],h=this.properties[u],f=n.pstyle(h.name);if(f&&f.bypass){var m=this.parse(u,"",!0),k=s[h.name]={prev:f};this.applyParsedProperty(n,m),k.next=n.pstyle(h.name)}}this.updateStyleHints(n),r&&this.updateTransitions(n,s,!0)}}},Mc={getEmSizeInPixels:function(){var e=this.containerCss("font-size");return null!=e?parseFloat(e):1},containerCss:function(e){var t=this._private.cy,r=t.container(),a=t.window();if(a&&r&&a.getComputedStyle)return a.getComputedStyle(r).getPropertyValue(e)}},es={getRenderedStyle:function(e,t){return t?this.getStylePropertyValue(e,t,!0):this.getRawStyle(e,!0)},getRawStyle:function(e,t){var r=this;if(e=e[0]){for(var a={},i=0;i<r.properties.length;i++){var n=r.properties[i],s=r.getStylePropertyValue(e,n.name,t);null!=s&&(a[n.name]=s,a[qe(n.name)]=s)}return a}},getIndexedStyle:function(e,t,r,a){return e.pstyle(t)[r][a]??e.cy().style().getDefaultProperty(t)[r][0]},getStylePropertyValue:function(e,t,r){if(e=e[0]){var i=this.properties[t];i.alias&&(i=i.pointsTo);var n=i.type,s=e.pstyle(i.name);if(s){var o=s.value,u=s.units,h=s.strValue;if(r&&n.number&&null!=o&&Z(o)){var f=e.cy().zoom(),v=function(I){return I*f},m=function(I,K){return v(I)+K},k=ft(o);return(k?u.every(function(U){return null!=U}):null!=u)?k?o.map(function(U,I){return m(U,u[I])}).join(" "):m(o,u):k?o.map(function(U){return Ge(U)?U:""+v(U)}).join(" "):""+v(o)}if(null!=h)return h}return null}},getAnimationStartStyle:function(e,t){for(var r={},a=0;a<t.length;a++){var n=t[a].name,s=e.pstyle(n);void 0!==s&&(s=Bt(s)?this.parse(n,s.strValue):this.parse(n,s)),s&&(r[n]=s)}return r},getPropsList:function(e){var r=[],a=e,i=this.properties;if(a)for(var n=Object.keys(a),s=0;s<n.length;s++){var o=n[s],u=a[o],h=i[o]||i[oe(o)],f=this.parse(h.name,u);f&&r.push(f)}return r},getNonDefaultPropertiesHash:function(e,t,r){var n,s,o,u,h,a=r.slice();for(u=0;u<t.length;u++)if(null!=(n=e.pstyle(t[u],!1)))if(null!=n.pfValue)a[0]=N(o,a[0]),a[1]=Vt(o,a[1]);else for(s=n.strValue,h=0;h<s.length;h++)o=s.charCodeAt(h),a[0]=N(o,a[0]),a[1]=Vt(o,a[1]);return a}};es.getPropertiesHash=es.getNonDefaultPropertiesHash;var Qo={appendFromJson:function(e){for(var t=this,r=0;r<e.length;r++){var a=e[r],i=a.selector,n=a.style||a.css,s=Object.keys(n);t.selector(i);for(var o=0;o<s.length;o++){var u=s[o];t.css(u,n[u])}}return t},fromJson:function(e){var t=this;return t.resetToDefault(),t.appendFromJson(e),t},json:function(){for(var e=[],t=this.defaultLength;t<this.length;t++){for(var r=this[t],a=r.selector,i=r.properties,n={},s=0;s<i.length;s++){var o=i[s];n[o.name]=o.strValue}e.push({selector:a?a.toString():"core",style:n})}return e}},Ic={appendFromString:function(e){var i,n,s,r=this,a=""+e;function o(){a=a.length>i.length?a.substr(i.length):""}function u(){n=n.length>s.length?n.substr(s.length):""}for(a=a.replace(/[/][*](\s|.)+?[*][/]/g,"");!a.match(/^\s*$/);){var f=a.match(/^\s*((?:.|\s)+?)\s*\{((?:.|\s)+?)\}/);if(!f){Sa("Halting stylesheet parsing: String stylesheet contains more to parse but no selector and block found in: "+a);break}i=f[0];var v=f[1];if("core"!==v&&new gs(v).invalid)Sa("Skipping parsing of block: Invalid selector found in string stylesheet: "+v),o();else{var k=f[2],_=!1;n=k;for(var U=[];!n.match(/^\s*$/);){var K=n.match(/^\s*(.+?)\s*:\s*(.+?)(?:\s*;|\s*$)/);if(!K){Sa("Skipping parsing of block: Invalid formatting of style property and value definitions found in:"+k),_=!0;break}s=K[0];var Y=K[1],X=K[2];this.properties[Y]?r.parse(Y,X)?(U.push({name:Y,val:X}),u()):(Sa("Skipping property: Invalid property definition in: "+s),u()):(Sa("Skipping property: Invalid property name in: "+s),u())}if(_){o();break}r.selector(v);for(var se=0;se<U.length;se++){var Yt=U[se];r.css(Yt.name,Yt.val)}o()}}return r},fromString:function(e){var t=this;return t.resetToDefault(),t.appendFromString(e),t}},dn={};(function(){var e=R,t=et,r=it,n=function($r){return"^"+$r+"\\s*\\(\\s*([\\w\\.]+)\\s*\\)$"},s=function($r){var ea=e+"|\\w+|"+t+"|"+r+"|\\#[0-9a-fA-F]{3}|\\#[0-9a-fA-F]{6}";return"^"+$r+"\\s*\\(([\\w\\.]+)\\s*\\,\\s*("+e+")\\s*\\,\\s*("+e+")\\s*,\\s*("+ea+")\\s*\\,\\s*("+ea+")\\)$"},o=["^url\\s*\\(\\s*['\"]?(.+?)['\"]?\\s*\\)$","^(none)$","^(.+)$"];dn.types={time:{number:!0,min:0,units:"s|ms",implicitUnits:"ms"},percent:{number:!0,min:0,max:100,units:"%",implicitUnits:"%"},percentages:{number:!0,min:0,max:100,units:"%",implicitUnits:"%",multiple:!0},zeroOneNumber:{number:!0,min:0,max:1,unitless:!0},zeroOneNumbers:{number:!0,min:0,max:1,unitless:!0,multiple:!0},nOneOneNumber:{number:!0,min:-1,max:1,unitless:!0},nonNegativeInt:{number:!0,min:0,integer:!0,unitless:!0},nonNegativeNumber:{number:!0,min:0,unitless:!0},position:{enums:["parent","origin"]},nodeSize:{number:!0,min:0,enums:["label"]},number:{number:!0,unitless:!0},numbers:{number:!0,unitless:!0,multiple:!0},positiveNumber:{number:!0,unitless:!0,min:0,strictMin:!0},size:{number:!0,min:0},bidirectionalSize:{number:!0},bidirectionalSizeMaybePercent:{number:!0,allowPercent:!0},bidirectionalSizes:{number:!0,multiple:!0},sizeMaybePercent:{number:!0,min:0,allowPercent:!0},axisDirection:{enums:["horizontal","leftward","rightward","vertical","upward","downward","auto"]},axisDirectionExplicit:{enums:["leftward","rightward","upward","downward"]},axisDirectionPrimary:{enums:["horizontal","vertical"]},paddingRelativeTo:{enums:["width","height","average","min","max"]},bgWH:{number:!0,min:0,allowPercent:!0,enums:["auto"],multiple:!0},bgPos:{number:!0,allowPercent:!0,multiple:!0},bgRelativeTo:{enums:["inner","include-padding"],multiple:!0},bgRepeat:{enums:["repeat","repeat-x","repeat-y","no-repeat"],multiple:!0},bgFit:{enums:["none","contain","cover"],multiple:!0},bgCrossOrigin:{enums:["anonymous","use-credentials","null"],multiple:!0},bgClip:{enums:["none","node"],multiple:!0},bgContainment:{enums:["inside","over"],multiple:!0},boxSelection:{enums:["contain","overlap","none"]},color:{color:!0},colors:{color:!0,multiple:!0},fill:{enums:["solid","linear-gradient","radial-gradient"]},bool:{enums:["yes","no"]},bools:{enums:["yes","no"],multiple:!0},lineStyle:{enums:["solid","dotted","dashed"]},lineCap:{enums:["butt","round","square"]},linePosition:{enums:["center","inside","outside"]},lineJoin:{enums:["round","bevel","miter"]},borderStyle:{enums:["solid","dotted","dashed","double"]},curveStyle:{enums:["bezier","unbundled-bezier","haystack","segments","straight","straight-triangle","taxi","round-segments","round-taxi"]},radiusType:{enums:["arc-radius","influence-radius"],multiple:!0},fontFamily:{regex:'^([\\w- \\"]+(?:\\s*,\\s*[\\w- \\"]+)*)$'},fontStyle:{enums:["italic","normal","oblique"]},fontWeight:{enums:["normal","bold","bolder","lighter","100","200","300","400","500","600","800","900",100,200,300,400,500,600,700,800,900]},textDecoration:{enums:["none","underline","overline","line-through"]},textTransform:{enums:["none","uppercase","lowercase"]},textWrap:{enums:["none","wrap","ellipsis"]},textOverflowWrap:{enums:["whitespace","anywhere"]},textBackgroundShape:{enums:["rectangle","roundrectangle","round-rectangle","circle"]},nodeShape:{enums:["rectangle","roundrectangle","round-rectangle","cutrectangle","cut-rectangle","bottomroundrectangle","bottom-round-rectangle","barrel","ellipse","triangle","round-triangle","square","pentagon","round-pentagon","hexagon","round-hexagon","concavehexagon","concave-hexagon","heptagon","round-heptagon","octagon","round-octagon","tag","round-tag","star","diamond","round-diamond","vee","rhomboid","right-rhomboid","polygon"]},overlayShape:{enums:["roundrectangle","round-rectangle","ellipse"]},cornerRadius:{number:!0,min:0,units:"px|em",implicitUnits:"px",enums:["auto"]},compoundIncludeLabels:{enums:["include","exclude"]},arrowShape:{enums:["tee","triangle","triangle-tee","circle-triangle","triangle-cross","triangle-backcurve","vee","square","circle","diamond","chevron","none"]},arrowFill:{enums:["filled","hollow"]},arrowWidth:{number:!0,units:"%|px|em",implicitUnits:"px",enums:["match-line"]},display:{enums:["element","none"]},visibility:{enums:["hidden","visible"]},zCompoundDepth:{enums:["bottom","orphan","auto","top"]},zIndexCompare:{enums:["auto","manual"]},valign:{enums:["top","center","bottom"]},halign:{enums:["left","center","right"]},justification:{enums:["left","center","right","auto"]},text:{string:!0},data:{mapping:!0,regex:n("data")},layoutData:{mapping:!0,regex:n("layoutData")},scratch:{mapping:!0,regex:n("scratch")},mapData:{mapping:!0,regex:s("mapData")},mapLayoutData:{mapping:!0,regex:s("mapLayoutData")},mapScratch:{mapping:!0,regex:s("mapScratch")},fn:{mapping:!0,fn:!0},url:{regexes:o,singleRegexMatchValue:!0},urls:{regexes:o,singleRegexMatchValue:!0,multiple:!0},propList:{propList:!0},angle:{number:!0,units:"deg|rad",implicitUnits:"rad"},textRotation:{number:!0,units:"deg|rad",implicitUnits:"rad",enums:["none","autorotate"]},polygonPointList:{number:!0,multiple:!0,evenMultiple:!0,min:-1,max:1,unitless:!0},edgeDistances:{enums:["intersection","node-position","endpoints"]},edgeEndpoint:{number:!0,multiple:!0,units:"%|px|em|deg|rad",implicitUnits:"px",enums:["inside-to-node","outside-to-node","outside-to-node-or-label","outside-to-line","outside-to-line-or-label"],singleEnum:!0,validate:function($r,ea){switch($r.length){case 2:return"deg"!==ea[0]&&"rad"!==ea[0]&&"deg"!==ea[1]&&"rad"!==ea[1];case 1:return Ge($r[0])||"deg"===ea[0]||"rad"===ea[0];default:return!1}}},easing:{regexes:["^(spring)\\s*\\(\\s*("+e+")\\s*,\\s*("+e+")\\s*\\)$","^(cubic-bezier)\\s*\\(\\s*("+e+")\\s*,\\s*("+e+")\\s*,\\s*("+e+")\\s*,\\s*("+e+")\\s*\\)$"],enums:["linear","ease","ease-in","ease-out","ease-in-out","ease-in-sine","ease-out-sine","ease-in-out-sine","ease-in-quad","ease-out-quad","ease-in-out-quad","ease-in-cubic","ease-out-cubic","ease-in-out-cubic","ease-in-quart","ease-out-quart","ease-in-out-quart","ease-in-quint","ease-out-quint","ease-in-out-quint","ease-in-expo","ease-out-expo","ease-in-out-expo","ease-in-circ","ease-out-circ","ease-in-out-circ"]},gradientDirection:{enums:["to-bottom","to-top","to-left","to-right","to-bottom-right","to-bottom-left","to-top-right","to-top-left","to-right-bottom","to-left-bottom","to-right-top","to-left-top"]},boundsExpansion:{number:!0,multiple:!0,min:0,validate:function($r){var ea=$r.length;return 1===ea||2===ea||4===ea}}};var u={zeroNonZero:function($r,ea){return(null==$r||null==ea)&&$r!==ea||0==$r&&0!=ea||0!=$r&&0==ea},any:function($r,ea){return $r!=ea},emptyNonEmpty:function($r,ea){var xa=Nt($r),Ga=Nt(ea);return xa&&!Ga||!xa&&Ga}},h=dn.types,f=[{name:"label",type:h.text,triggersBounds:u.any,triggersZOrder:u.emptyNonEmpty},{name:"text-rotation",type:h.textRotation,triggersBounds:u.any},{name:"text-margin-x",type:h.bidirectionalSize,triggersBounds:u.any},{name:"text-margin-y",type:h.bidirectionalSize,triggersBounds:u.any}],v=[{name:"source-label",type:h.text,triggersBounds:u.any},{name:"source-text-rotation",type:h.textRotation,triggersBounds:u.any},{name:"source-text-margin-x",type:h.bidirectionalSize,triggersBounds:u.any},{name:"source-text-margin-y",type:h.bidirectionalSize,triggersBounds:u.any},{name:"source-text-offset",type:h.size,triggersBounds:u.any}],m=[{name:"target-label",type:h.text,triggersBounds:u.any},{name:"target-text-rotation",type:h.textRotation,triggersBounds:u.any},{name:"target-text-margin-x",type:h.bidirectionalSize,triggersBounds:u.any},{name:"target-text-margin-y",type:h.bidirectionalSize,triggersBounds:u.any},{name:"target-text-offset",type:h.size,triggersBounds:u.any}],k=[{name:"font-family",type:h.fontFamily,triggersBounds:u.any},{name:"font-style",type:h.fontStyle,triggersBounds:u.any},{name:"font-weight",type:h.fontWeight,triggersBounds:u.any},{name:"font-size",type:h.size,triggersBounds:u.any},{name:"text-transform",type:h.textTransform,triggersBounds:u.any},{name:"text-wrap",type:h.textWrap,triggersBounds:u.any},{name:"text-overflow-wrap",type:h.textOverflowWrap,triggersBounds:u.any},{name:"text-max-width",type:h.size,triggersBounds:u.any},{name:"text-outline-width",type:h.size,triggersBounds:u.any},{name:"line-height",type:h.positiveNumber,triggersBounds:u.any}],_=[{name:"text-valign",type:h.valign,triggersBounds:u.any},{name:"text-halign",type:h.halign,triggersBounds:u.any},{name:"color",type:h.color},{name:"text-outline-color",type:h.color},{name:"text-outline-opacity",type:h.zeroOneNumber},{name:"text-background-color",type:h.color},{name:"text-background-opacity",type:h.zeroOneNumber},{name:"text-background-padding",type:h.size,triggersBounds:u.any},{name:"text-border-opacity",type:h.zeroOneNumber},{name:"text-border-color",type:h.color},{name:"text-border-width",type:h.size,triggersBounds:u.any},{name:"text-border-style",type:h.borderStyle,triggersBounds:u.any},{name:"text-background-shape",type:h.textBackgroundShape,triggersBounds:u.any},{name:"text-justification",type:h.justification},{name:"box-select-labels",type:h.bool,triggersBounds:u.any}],U=[{name:"events",type:h.bool,triggersZOrder:u.any},{name:"text-events",type:h.bool,triggersZOrder:u.any},{name:"box-selection",type:h.boxSelection,triggersZOrder:u.any}],I=[{name:"display",type:h.display,triggersZOrder:u.any,triggersBounds:u.any,triggersBoundsOfConnectedEdges:u.any,triggersBoundsOfParallelEdges:function($r,ea,xa){return $r!==ea&&"bezier"===xa.pstyle("curve-style").value}},{name:"visibility",type:h.visibility,triggersZOrder:u.any},{name:"opacity",type:h.zeroOneNumber,triggersZOrder:u.zeroNonZero},{name:"text-opacity",type:h.zeroOneNumber},{name:"min-zoomed-font-size",type:h.size},{name:"z-compound-depth",type:h.zCompoundDepth,triggersZOrder:u.any},{name:"z-index-compare",type:h.zIndexCompare,triggersZOrder:u.any},{name:"z-index",type:h.number,triggersZOrder:u.any}],K=[{name:"overlay-padding",type:h.size,triggersBounds:u.any},{name:"overlay-color",type:h.color},{name:"overlay-opacity",type:h.zeroOneNumber,triggersBounds:u.zeroNonZero},{name:"overlay-shape",type:h.overlayShape,triggersBounds:u.any},{name:"overlay-corner-radius",type:h.cornerRadius}],Y=[{name:"underlay-padding",type:h.size,triggersBounds:u.any},{name:"underlay-color",type:h.color},{name:"underlay-opacity",type:h.zeroOneNumber,triggersBounds:u.zeroNonZero},{name:"underlay-shape",type:h.overlayShape,triggersBounds:u.any},{name:"underlay-corner-radius",type:h.cornerRadius}],X=[{name:"transition-property",type:h.propList},{name:"transition-duration",type:h.time},{name:"transition-delay",type:h.time},{name:"transition-timing-function",type:h.easing}],mt=function($r,ea){return"label"===ea.value?-$r.poolIndex():ea.pfValue},ie=[{name:"height",type:h.nodeSize,triggersBounds:u.any,hashOverride:mt},{name:"width",type:h.nodeSize,triggersBounds:u.any,hashOverride:mt},{name:"shape",type:h.nodeShape,triggersBounds:u.any},{name:"shape-polygon-points",type:h.polygonPointList,triggersBounds:u.any},{name:"corner-radius",type:h.cornerRadius},{name:"background-color",type:h.color},{name:"background-fill",type:h.fill},{name:"background-opacity",type:h.zeroOneNumber},{name:"background-blacken",type:h.nOneOneNumber},{name:"background-gradient-stop-colors",type:h.colors},{name:"background-gradient-stop-positions",type:h.percentages},{name:"background-gradient-direction",type:h.gradientDirection},{name:"padding",type:h.sizeMaybePercent,triggersBounds:u.any},{name:"padding-relative-to",type:h.paddingRelativeTo,triggersBounds:u.any},{name:"bounds-expansion",type:h.boundsExpansion,triggersBounds:u.any}],se=[{name:"border-color",type:h.color},{name:"border-opacity",type:h.zeroOneNumber},{name:"border-width",type:h.size,triggersBounds:u.any},{name:"border-style",type:h.borderStyle},{name:"border-cap",type:h.lineCap},{name:"border-join",type:h.lineJoin},{name:"border-dash-pattern",type:h.numbers},{name:"border-dash-offset",type:h.number},{name:"border-position",type:h.linePosition}],Yt=[{name:"outline-color",type:h.color},{name:"outline-opacity",type:h.zeroOneNumber},{name:"outline-width",type:h.size,triggersBounds:u.any},{name:"outline-style",type:h.borderStyle},{name:"outline-offset",type:h.size,triggersBounds:u.any}],he=[{name:"background-image",type:h.urls},{name:"background-image-crossorigin",type:h.bgCrossOrigin},{name:"background-image-opacity",type:h.zeroOneNumbers},{name:"background-image-containment",type:h.bgContainment},{name:"background-image-smoothing",type:h.bools},{name:"background-position-x",type:h.bgPos},{name:"background-position-y",type:h.bgPos},{name:"background-width-relative-to",type:h.bgRelativeTo},{name:"background-height-relative-to",type:h.bgRelativeTo},{name:"background-repeat",type:h.bgRepeat},{name:"background-fit",type:h.bgFit},{name:"background-clip",type:h.bgClip},{name:"background-width",type:h.bgWH},{name:"background-height",type:h.bgWH},{name:"background-offset-x",type:h.bgPos},{name:"background-offset-y",type:h.bgPos}],be=[{name:"position",type:h.position,triggersBounds:u.any},{name:"compound-sizing-wrt-labels",type:h.compoundIncludeLabels,triggersBounds:u.any},{name:"min-width",type:h.size,triggersBounds:u.any},{name:"min-width-bias-left",type:h.sizeMaybePercent,triggersBounds:u.any},{name:"min-width-bias-right",type:h.sizeMaybePercent,triggersBounds:u.any},{name:"min-height",type:h.size,triggersBounds:u.any},{name:"min-height-bias-top",type:h.sizeMaybePercent,triggersBounds:u.any},{name:"min-height-bias-bottom",type:h.sizeMaybePercent,triggersBounds:u.any}],Se=[{name:"line-style",type:h.lineStyle},{name:"line-color",type:h.color},{name:"line-fill",type:h.fill},{name:"line-cap",type:h.lineCap},{name:"line-opacity",type:h.zeroOneNumber},{name:"line-dash-pattern",type:h.numbers},{name:"line-dash-offset",type:h.number},{name:"line-outline-width",type:h.size},{name:"line-outline-color",type:h.color},{name:"line-gradient-stop-colors",type:h.colors},{name:"line-gradient-stop-positions",type:h.percentages},{name:"curve-style",type:h.curveStyle,triggersBounds:u.any,triggersBoundsOfParallelEdges:function($r,ea){return $r!==ea&&("bezier"===$r||"bezier"===ea)}},{name:"haystack-radius",type:h.zeroOneNumber,triggersBounds:u.any},{name:"source-endpoint",type:h.edgeEndpoint,triggersBounds:u.any},{name:"target-endpoint",type:h.edgeEndpoint,triggersBounds:u.any},{name:"control-point-step-size",type:h.size,triggersBounds:u.any},{name:"control-point-distances",type:h.bidirectionalSizes,triggersBounds:u.any},{name:"control-point-weights",type:h.numbers,triggersBounds:u.any},{name:"segment-distances",type:h.bidirectionalSizes,triggersBounds:u.any},{name:"segment-weights",type:h.numbers,triggersBounds:u.any},{name:"segment-radii",type:h.numbers,triggersBounds:u.any},{name:"radius-type",type:h.radiusType,triggersBounds:u.any},{name:"taxi-turn",type:h.bidirectionalSizeMaybePercent,triggersBounds:u.any},{name:"taxi-turn-min-distance",type:h.size,triggersBounds:u.any},{name:"taxi-direction",type:h.axisDirection,triggersBounds:u.any},{name:"taxi-radius",type:h.number,triggersBounds:u.any},{name:"edge-distances",type:h.edgeDistances,triggersBounds:u.any},{name:"arrow-scale",type:h.positiveNumber,triggersBounds:u.any},{name:"loop-direction",type:h.angle,triggersBounds:u.any},{name:"loop-sweep",type:h.angle,triggersBounds:u.any},{name:"source-distance-from-node",type:h.size,triggersBounds:u.any},{name:"target-distance-from-node",type:h.size,triggersBounds:u.any}],De=[{name:"ghost",type:h.bool,triggersBounds:u.any},{name:"ghost-offset-x",type:h.bidirectionalSize,triggersBounds:u.any},{name:"ghost-offset-y",type:h.bidirectionalSize,triggersBounds:u.any},{name:"ghost-opacity",type:h.zeroOneNumber}],Oe=[{name:"selection-box-color",type:h.color},{name:"selection-box-opacity",type:h.zeroOneNumber},{name:"selection-box-border-color",type:h.color},{name:"selection-box-border-width",type:h.size},{name:"active-bg-color",type:h.color},{name:"active-bg-opacity",type:h.zeroOneNumber},{name:"active-bg-size",type:h.size},{name:"outside-texture-bg-color",type:h.color},{name:"outside-texture-bg-opacity",type:h.zeroOneNumber}],Ne=[];dn.pieBackgroundN=16,Ne.push({name:"pie-size",type:h.sizeMaybePercent}),Ne.push({name:"pie-hole",type:h.sizeMaybePercent}),Ne.push({name:"pie-start-angle",type:h.angle});for(var Je=1;Je<=dn.pieBackgroundN;Je++)Ne.push({name:"pie-"+Je+"-background-color",type:h.color}),Ne.push({name:"pie-"+Je+"-background-size",type:h.percent}),Ne.push({name:"pie-"+Je+"-background-opacity",type:h.zeroOneNumber});var dr=[];dn.stripeBackgroundN=16,dr.push({name:"stripe-size",type:h.sizeMaybePercent}),dr.push({name:"stripe-direction",type:h.axisDirectionPrimary});for(var gr=1;gr<=dn.stripeBackgroundN;gr++)dr.push({name:"stripe-"+gr+"-background-color",type:h.color}),dr.push({name:"stripe-"+gr+"-background-size",type:h.percent}),dr.push({name:"stripe-"+gr+"-background-opacity",type:h.zeroOneNumber});var ar=[],Sr=dn.arrowPrefixes=["source","mid-source","target","mid-target"];[{name:"arrow-shape",type:h.arrowShape,triggersBounds:u.any},{name:"arrow-color",type:h.color},{name:"arrow-fill",type:h.arrowFill},{name:"arrow-width",type:h.arrowWidth}].forEach(function(Kr){Sr.forEach(function($r){ar.push({name:$r+"-"+Kr.name,type:Kr.type,triggersBounds:Kr.triggersBounds})})},{});var Ur=dn.properties=[].concat(U,X,I,K,Y,De,_,k,f,v,m,ie,se,Yt,he,Ne,dr,be,Se,ar,Oe),jr=dn.propertyGroups={behavior:U,transition:X,visibility:I,overlay:K,underlay:Y,ghost:De,commonLabel:_,labelDimensions:k,mainLabel:f,sourceLabel:v,targetLabel:m,nodeBody:ie,nodeBorder:se,nodeOutline:Yt,backgroundImage:he,pie:Ne,stripe:dr,compound:be,edgeLine:Se,edgeArrow:ar,core:Oe},Mr=dn.propertyGroupNames={};(dn.propertyGroupKeys=Object.keys(jr)).forEach(function(Kr){Mr[Kr]=jr[Kr].map(function($r){return $r.name}),jr[Kr].forEach(function($r){return $r.groupKey=Kr})});var pa=dn.aliases=[{name:"content",pointsTo:"label"},{name:"control-point-distance",pointsTo:"control-point-distances"},{name:"control-point-weight",pointsTo:"control-point-weights"},{name:"segment-distance",pointsTo:"segment-distances"},{name:"segment-weight",pointsTo:"segment-weights"},{name:"segment-radius",pointsTo:"segment-radii"},{name:"edge-text-rotation",pointsTo:"text-rotation"},{name:"padding-left",pointsTo:"padding"},{name:"padding-right",pointsTo:"padding"},{name:"padding-top",pointsTo:"padding"},{name:"padding-bottom",pointsTo:"padding"}];dn.propertyNames=Ur.map(function(Kr){return Kr.name});for(var Ea=0;Ea<Ur.length;Ea++){var va=Ur[Ea];Ur[va.name]=va}for(var Aa=0;Aa<pa.length;Aa++){var Ia=pa[Aa],Ta={name:Ia.name,alias:!0,pointsTo:Ur[Ia.pointsTo]};Ur.push(Ta),Ur[Ia.name]=Ta}})(),dn.getDefaultProperty=function(e){return this.getDefaultProperties()[e]},dn.getDefaultProperties=function(){var e=this._private;if(null!=e.defaultProperties)return e.defaultProperties;for(var t=G({"selection-box-color":"#ddd","selection-box-opacity":.65,"selection-box-border-color":"#aaa","selection-box-border-width":1,"active-bg-color":"black","active-bg-opacity":.15,"active-bg-size":30,"outside-texture-bg-color":"#000","outside-texture-bg-opacity":.125,events:"yes","text-events":"no","text-valign":"top","text-halign":"center","text-justification":"auto","line-height":1,color:"#000","box-selection":"contain","text-outline-color":"#000","text-outline-width":0,"text-outline-opacity":1,"text-opacity":1,"text-decoration":"none","text-transform":"none","text-wrap":"none","text-overflow-wrap":"whitespace","text-max-width":9999,"text-background-color":"#000","text-background-opacity":0,"text-background-shape":"rectangle","text-background-padding":0,"text-border-opacity":0,"text-border-width":0,"text-border-style":"solid","text-border-color":"#000","font-family":"Helvetica Neue, Helvetica, sans-serif","font-style":"normal","font-weight":"normal","font-size":16,"min-zoomed-font-size":0,"text-rotation":"none","source-text-rotation":"none","target-text-rotation":"none",visibility:"visible",display:"element",opacity:1,"z-compound-depth":"auto","z-index-compare":"auto","z-index":0,label:"","text-margin-x":0,"text-margin-y":0,"source-label":"","source-text-offset":0,"source-text-margin-x":0,"source-text-margin-y":0,"target-label":"","target-text-offset":0,"target-text-margin-x":0,"target-text-margin-y":0,"overlay-opacity":0,"overlay-color":"#000","overlay-padding":10,"overlay-shape":"round-rectangle","overlay-corner-radius":"auto","underlay-opacity":0,"underlay-color":"#000","underlay-padding":10,"underlay-shape":"round-rectangle","underlay-corner-radius":"auto","transition-property":"none","transition-duration":0,"transition-delay":0,"transition-timing-function":"linear","box-select-labels":"no","background-blacken":0,"background-color":"#999","background-fill":"solid","background-opacity":1,"background-image":"none","background-image-crossorigin":"anonymous","background-image-opacity":1,"background-image-containment":"inside","background-image-smoothing":"yes","background-position-x":"50%","background-position-y":"50%","background-offset-x":0,"background-offset-y":0,"background-width-relative-to":"include-padding","background-height-relative-to":"include-padding","background-repeat":"no-repeat","background-fit":"none","background-clip":"node","background-width":"auto","background-height":"auto","border-color":"#000","border-opacity":1,"border-width":0,"border-style":"solid","border-dash-pattern":[4,2],"border-dash-offset":0,"border-cap":"butt","border-join":"miter","border-position":"center","outline-color":"#999","outline-opacity":1,"outline-width":0,"outline-offset":0,"outline-style":"solid",height:30,width:30,shape:"ellipse","shape-polygon-points":"-1, -1,   1, -1,   1, 1,   -1, 1","corner-radius":"auto","bounds-expansion":0,"background-gradient-direction":"to-bottom","background-gradient-stop-colors":"#999","background-gradient-stop-positions":"0%",ghost:"no","ghost-offset-y":0,"ghost-offset-x":0,"ghost-opacity":0,padding:0,"padding-relative-to":"width",position:"origin","compound-sizing-wrt-labels":"include","min-width":0,"min-width-bias-left":0,"min-width-bias-right":0,"min-height":0,"min-height-bias-top":0,"min-height-bias-bottom":0},{"pie-size":"100%","pie-hole":0,"pie-start-angle":"0deg"},[{name:"pie-{{i}}-background-color",value:"black"},{name:"pie-{{i}}-background-size",value:"0%"},{name:"pie-{{i}}-background-opacity",value:1}].reduce(function(u,h){for(var f=1;f<=dn.pieBackgroundN;f++)u[h.name.replace("{{i}}",f)]=h.value;return u},{}),{"stripe-size":"100%","stripe-direction":"horizontal"},[{name:"stripe-{{i}}-background-color",value:"black"},{name:"stripe-{{i}}-background-size",value:"0%"},{name:"stripe-{{i}}-background-opacity",value:1}].reduce(function(u,h){for(var f=1;f<=dn.stripeBackgroundN;f++)u[h.name.replace("{{i}}",f)]=h.value;return u},{}),{"line-style":"solid","line-color":"#999","line-fill":"solid","line-cap":"butt","line-opacity":1,"line-outline-width":0,"line-outline-color":"#000","line-gradient-stop-colors":"#999","line-gradient-stop-positions":"0%","control-point-step-size":40,"control-point-weights":.5,"segment-weights":.5,"segment-distances":20,"segment-radii":15,"radius-type":"arc-radius","taxi-turn":"50%","taxi-radius":15,"taxi-turn-min-distance":10,"taxi-direction":"auto","edge-distances":"intersection","curve-style":"haystack","haystack-radius":0,"arrow-scale":1,"loop-direction":"-45deg","loop-sweep":"-90deg","source-distance-from-node":0,"target-distance-from-node":0,"source-endpoint":"outside-to-node","target-endpoint":"outside-to-node","line-dash-pattern":[6,3],"line-dash-offset":0},[{name:"arrow-shape",value:"none"},{name:"arrow-color",value:"#999"},{name:"arrow-fill",value:"filled"},{name:"arrow-width",value:1}].reduce(function(u,h){return dn.arrowPrefixes.forEach(function(f){u[f+"-"+h.name]=h.value}),u},{})),r={},a=0;a<this.properties.length;a++){var i=this.properties[a];if(!i.pointsTo){var n=i.name,o=this.parse(n,t[n]);r[n]=o}}return e.defaultProperties=r,e.defaultProperties},dn.addDefaultStylesheet=function(){this.selector(":parent").css({shape:"rectangle",padding:10,"background-color":"#eee","border-color":"#ccc","border-width":1}).selector("edge").css({width:3}).selector(":loop").css({"curve-style":"bezier"}).selector("edge:compound").css({"curve-style":"bezier","source-endpoint":"outside-to-line","target-endpoint":"outside-to-line"}).selector(":selected").css({"background-color":"#0169D9","line-color":"#0169D9","source-arrow-color":"#0169D9","target-arrow-color":"#0169D9","mid-source-arrow-color":"#0169D9","mid-target-arrow-color":"#0169D9"}).selector(":parent:selected").css({"background-color":"#CCE1F9","border-color":"#aec8e5"}).selector(":active").css({"overlay-color":"black","overlay-padding":10,"overlay-opacity":.25}),this.defaultLength=this.length};var Jo={parse:function(e,t,r,a){var i=this;if(W(t))return i.parseImplWarn(e,t,r,a);var f,u=or(e,""+t,r?"t":"f","mapping"===a||!0===a||!1===a||null==a?"dontcare":a),h=i.propCache=i.propCache||[];return(f=h[u])||(f=h[u]=i.parseImplWarn(e,t,r,a)),(r||"mapping"===a)&&(f=Ka(f))&&(f.value=Ka(f.value)),f},parseImplWarn:function(e,t,r,a){var i=this.parseImpl(e,t,r,a);return!i&&null!=t&&Sa("The style property `".concat(e,": ").concat(t,"` is invalid")),i&&("width"===i.name||"height"===i.name)&&"label"===t&&Sa("The style value of `label` is deprecated for `"+i.name+"`"),i},parseImpl:function(e,t,r,a){var i=this;e=oe(e);var n=i.properties[e],s=t,o=i.types;if(!n||void 0===t)return null;n.alias&&(e=(n=n.pointsTo).name);var u=Ge(t);u&&(t=t.trim());var f,v,h=n.type;if(!h)return null;if(r&&(""===t||null===t))return{name:e,value:t,bypass:!0,deleteBypass:!0};if(W(t))return{name:e,value:t,strValue:"fn",mapped:o.fn,bypass:r};if(!(!u||a||t.length<7||"a"!==t[1])){if(t.length>=7&&"d"===t[0]&&(f=new RegExp(o.data.regex).exec(t)))return!r&&{name:e,value:f,strValue:""+t,mapped:o.data,field:f[1],bypass:r};if(t.length>=10&&"m"===t[0]&&(v=new RegExp(o.mapData.regex).exec(t))){if(r||h.multiple)return!1;var k=o.mapData;if(!h.color&&!h.number)return!1;var _=this.parse(e,v[4]);if(!_||_.mapped)return!1;var U=this.parse(e,v[5]);if(!U||U.mapped)return!1;if(_.pfValue===U.pfValue||_.strValue===U.strValue)return Sa("`"+e+": "+t+"` is not a valid mapper because the output range is zero; converting to `"+e+": "+_.strValue+"`"),this.parse(e,_.strValue);if(h.color){var I=_.value,K=U.value;if(!(I[0]!==K[0]||I[1]!==K[1]||I[2]!==K[2]||I[3]!==K[3]&&(null!=I[3]&&1!==I[3]||null!=K[3]&&1!==K[3])))return!1}return{name:e,value:v,strValue:""+t,mapped:k,field:v[1],fieldMin:parseFloat(v[2]),fieldMax:parseFloat(v[3]),valueMin:_.value,valueMax:U.value,bypass:r}}}if(h.multiple&&"multiple"!==a){var X;if(X=u?t.split(/\s+/):ft(t)?t:[t],h.evenMultiple&&X.length%2!=0)return null;for(var mt=[],ie=[],se=[],Yt="",he=!1,be=0;be<X.length;be++){var Se=i.parse(e,X[be],r,"multiple");he=he||Ge(Se.value),mt.push(Se.value),se.push(null!=Se.pfValue?Se.pfValue:Se.value),ie.push(Se.units),Yt+=(be>0?" ":"")+Se.strValue}return h.validate&&!h.validate(mt,ie)?null:h.singleEnum&&he?1===mt.length&&Ge(mt[0])?{name:e,value:mt[0],strValue:mt[0],bypass:r}:null:{name:e,value:mt,pfValue:se,strValue:Yt,bypass:r,units:ie}}var De=function(){for(var Ta=0;Ta<h.enums.length;Ta++)if(h.enums[Ta]===t)return{name:e,value:t,strValue:""+t,bypass:r};return null};if(h.number){var Oe,Ne="px";if(h.units&&(Oe=h.units),h.implicitUnits&&(Ne=h.implicitUnits),!h.unitless)if(u){var Je="px|em"+(h.allowPercent?"|\\%":"");Oe&&(Je=Oe);var dr=t.match("^("+R+")("+Je+")?$");dr&&(t=dr[1],Oe=dr[2]||Ne)}else(!Oe||h.implicitUnits)&&(Oe=Ne);if(t=parseFloat(t),isNaN(t)&&void 0===h.enums)return null;if(isNaN(t)&&void 0!==h.enums)return t=s,De();if(h.integer&&!function(t){return Z(t)&&Math.floor(t)===t}(t)||void 0!==h.min&&(t<h.min||h.strictMin&&t===h.min)||void 0!==h.max&&(t>h.max||h.strictMax&&t===h.max))return null;var gr={name:e,value:t,strValue:""+t+(Oe||""),units:Oe,bypass:r};return gr.pfValue=h.unitless||"px"!==Oe&&"em"!==Oe?t:"px"!==Oe&&Oe?this.getEmSizeInPixels()*t:t,("ms"===Oe||"s"===Oe)&&(gr.pfValue="ms"===Oe?t:1e3*t),("deg"===Oe||"rad"===Oe)&&(gr.pfValue="rad"===Oe?t:function(t){return Math.PI*t/180}(t)),"%"===Oe&&(gr.pfValue=t/100),gr}if(h.propList){var ar=[],Sr=""+t;if("none"!==Sr){for(var Ur=Sr.split(/\s*,\s*|\s+/),jr=0;jr<Ur.length;jr++){var Mr=Ur[jr].trim();i.properties[Mr]?ar.push(Mr):Sa("`"+Mr+"` is not a valid property name")}if(0===ar.length)return null}return{name:e,value:ar,strValue:0===ar.length?"none":ar.join(" "),bypass:r}}if(h.color){var Wr=fe(t);return Wr?{name:e,value:Wr,pfValue:Wr,strValue:"rgb("+Wr[0]+","+Wr[1]+","+Wr[2]+")",bypass:r}:null}if(h.regex||h.regexes){if(h.enums){var pa=De();if(pa)return pa}for(var Ea=h.regexes?h.regexes:[h.regex],va=0;va<Ea.length;va++){var Ia=new RegExp(Ea[va]).exec(t);if(Ia)return{name:e,value:h.singleRegexMatchValue?Ia[1]:Ia,strValue:""+t,bypass:r}}return null}return h.string?{name:e,value:""+t,strValue:""+t,bypass:r}:h.enums?De():null}},En=function(t){if(!(this instanceof En))return new En(t);V(t)?(this._private={cy:t,coreStyle:{}},this.length=0,this.resetToDefault()):za("A style must have a core reference")},Mn=En.prototype;Mn.instanceString=function(){return"style"},Mn.clear=function(){for(var e=this._private,r=e.cy.elements(),a=0;a<this.length;a++)this[a]=void 0;return this.length=0,e.contextStyles={},e.propDiffs={},this.cleanElements(r,!0),r.forEach(function(i){var n=i[0]._private;n.styleDirty=!0,n.appliedInitStyle=!1}),this},Mn.resetToDefault=function(){return this.clear(),this.addDefaultStylesheet(),this},Mn.core=function(e){return this._private.coreStyle[e]||this.getDefaultProperty(e)},Mn.selector=function(e){var t="core"===e?null:new gs(e),r=this.length++;return this[r]={selector:t,properties:[],mappedProperties:[],index:r},this},Mn.css=function(){var t=arguments;if(1===t.length)for(var r=t[0],a=0;a<this.properties.length;a++){var i=this.properties[a],n=r[i.name];void 0===n&&(n=r[qe(i.name)]),void 0!==n&&this.cssRule(i.name,n)}else 2===t.length&&this.cssRule(t[0],t[1]);return this},Mn.style=Mn.css,Mn.cssRule=function(e,t){var r=this.parse(e,t);if(r){var a=this.length-1;this[a].properties.push(r),this[a].properties[r.name]=r,r.name.match(/pie-(\d+)-background-size/)&&r.value&&(this._private.hasPie=!0),r.name.match(/stripe-(\d+)-background-size/)&&r.value&&(this._private.hasStripe=!0),r.mapped&&this[a].mappedProperties.push(r),!this[a].selector&&(this._private.coreStyle[r.name]=r)}return this},Mn.append=function(e){return pt(e)?e.appendToStyle(this):ft(e)?this.appendFromJson(e):Ge(e)&&this.appendFromString(e),this},En.fromJson=function(e,t){var r=new En(e);return r.fromJson(t),r},En.fromString=function(e,t){return new En(e).fromString(t)},[_n,fo,Mc,es,Qo,Ic,dn,Jo].forEach(function(e){G(Mn,e)}),En.types=Mn.types,En.properties=Mn.properties,En.propertyGroups=Mn.propertyGroups,En.propertyGroupNames=Mn.propertyGroupNames,En.propertyGroupKeys=Mn.propertyGroupKeys;var k1={style:function(t){return t&&this.setStyle(t).update(),this._private.style},setStyle:function(t){var r=this._private;return r.style=pt(t)?t.generateStyle(this):ft(t)?En.fromJson(this,t):Ge(t)?En.fromString(this,t):En(this),r.style},updateStyle:function(){this.mutableElements().updateStyle()}},Ts={autolock:function(t){return void 0===t?this._private.autolock:(this._private.autolock=!!t,this)},autoungrabify:function(t){return void 0===t?this._private.autoungrabify:(this._private.autoungrabify=!!t,this)},autounselectify:function(t){return void 0===t?this._private.autounselectify:(this._private.autounselectify=!!t,this)},selectionType:function(t){var r=this._private;return null==r.selectionType&&(r.selectionType="single"),void 0===t?r.selectionType:(("additive"===t||"single"===t)&&(r.selectionType=t),this)},panningEnabled:function(t){return void 0===t?this._private.panningEnabled:(this._private.panningEnabled=!!t,this)},userPanningEnabled:function(t){return void 0===t?this._private.userPanningEnabled:(this._private.userPanningEnabled=!!t,this)},zoomingEnabled:function(t){return void 0===t?this._private.zoomingEnabled:(this._private.zoomingEnabled=!!t,this)},userZoomingEnabled:function(t){return void 0===t?this._private.userZoomingEnabled:(this._private.userZoomingEnabled=!!t,this)},boxSelectionEnabled:function(t){return void 0===t?this._private.boxSelectionEnabled:(this._private.boxSelectionEnabled=!!t,this)},pan:function(){var a,i,n,s,o,t=arguments,r=this._private.pan;switch(t.length){case 0:return r;case 1:if(Ge(t[0]))return r[a=t[0]];if(Bt(t[0])){if(!this._private.panningEnabled)return this;o=(n=t[0]).y,Z(s=n.x)&&(r.x=s),Z(o)&&(r.y=o),this.emit("pan viewport")}break;case 2:if(!this._private.panningEnabled)return this;i=t[1],("x"===(a=t[0])||"y"===a)&&Z(i)&&(r[a]=i),this.emit("pan viewport")}return this.notify("viewport"),this},panBy:function(t,r){var n,s,o,u,h,a=arguments,i=this._private.pan;if(!this._private.panningEnabled)return this;switch(a.length){case 1:Bt(t)&&(h=(o=a[0]).y,Z(u=o.x)&&(i.x+=u),Z(h)&&(i.y+=h),this.emit("pan viewport"));break;case 2:s=r,("x"===(n=t)||"y"===n)&&Z(s)&&(i[n]+=s),this.emit("pan viewport")}return this.notify("viewport"),this},gc:function(){this.notify("gc")},fit:function(t,r){var a=this.getFitViewport(t,r);if(a){var i=this._private;i.zoom=a.zoom,i.pan=a.pan,this.emit("pan zoom viewport"),this.notify("viewport")}return this},getFitViewport:function(t,r){var a;if((Z(t)&&void 0===r&&(r=t,t=void 0),this._private.panningEnabled&&this._private.zoomingEnabled)&&(Ge(t)?t=this.$(t):!function(t){return Bt(t)&&Z(t.x1)&&Z(t.x2)&&Z(t.y1)&&Z(t.y2)}(t)?re(t)||(t=this.mutableElements()):((a={x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2}).w=a.x2-a.x1,a.h=a.y2-a.y1),!re(t)||!t.empty())){a=a||t.boundingBox();var u,s=this.width(),o=this.height();if(r=Z(r)?r:0,!isNaN(s)&&!isNaN(o)&&s>0&&o>0&&!isNaN(a.w)&&!isNaN(a.h)&&a.w>0&&a.h>0)return{zoom:u=(u=(u=Math.min((s-2*r)/a.w,(o-2*r)/a.h))>this._private.maxZoom?this._private.maxZoom:u)<this._private.minZoom?this._private.minZoom:u,pan:{x:(s-u*(a.x1+a.x2))/2,y:(o-u*(a.y1+a.y2))/2}}}},zoomRange:function(t,r){var a=this._private;if(null==r){var i=t;t=i.min,r=i.max}return Z(t)&&Z(r)&&t<=r?(a.minZoom=t,a.maxZoom=r):Z(t)&&void 0===r&&t<=a.maxZoom?a.minZoom=t:Z(r)&&void 0===t&&r>=a.minZoom&&(a.maxZoom=r),this},minZoom:function(t){return void 0===t?this._private.minZoom:this.zoomRange({min:t})},maxZoom:function(t){return void 0===t?this._private.maxZoom:this.zoomRange({max:t})},getZoomedViewport:function(t){var n,s,r=this._private,a=r.pan,i=r.zoom,o=!1;return r.zoomingEnabled||(o=!0),Z(t)?s=t:Bt(t)&&(s=t.level,null!=t.position?n=Bn(t.position,i,a):null!=t.renderedPosition&&(n=t.renderedPosition),null!=n&&!r.panningEnabled&&(o=!0)),s=(s=s>r.maxZoom?r.maxZoom:s)<r.minZoom?r.minZoom:s,!o&&Z(s)&&s!==i&&(null==n||Z(n.x)&&Z(n.y))?null!=n?{zoomed:!0,panned:!0,zoom:s,pan:{x:-s/i*(n.x-a.x)+n.x,y:-s/i*(n.y-a.y)+n.y}}:{zoomed:!0,panned:!1,zoom:s,pan:a}:null},zoom:function(t){if(void 0===t)return this._private.zoom;var r=this.getZoomedViewport(t),a=this._private;return null!=r&&r.zoomed?(a.zoom=r.zoom,r.panned&&(a.pan.x=r.pan.x,a.pan.y=r.pan.y),this.emit("zoom"+(r.panned?" pan":"")+" viewport"),this.notify("viewport"),this):this},viewport:function(t){var r=this._private,a=!0,i=!0,n=[],s=!1,o=!1;if(!t)return this;if(Z(t.zoom)||(a=!1),Bt(t.pan)||(i=!1),!a&&!i)return this;if(a){var u=t.zoom;u<r.minZoom||u>r.maxZoom||!r.zoomingEnabled?s=!0:(r.zoom=u,n.push("zoom"))}if(i&&(!s||!t.cancelOnFailedZoom)&&r.panningEnabled){var h=t.pan;Z(h.x)&&(r.pan.x=h.x,o=!1),Z(h.y)&&(r.pan.y=h.y,o=!1),o||n.push("pan")}return n.length>0&&(n.push("viewport"),this.emit(n.join(" ")),this.notify("viewport")),this},center:function(t){var r=this.getCenterPan(t);return r&&(this._private.pan=r,this.emit("pan viewport"),this.notify("viewport")),this},getCenterPan:function(t,r){if(this._private.panningEnabled){if(Ge(t)){var a=t;t=this.mutableElements().filter(a)}else re(t)||(t=this.mutableElements());if(0!==t.length){var i=t.boundingBox(),n=this.width(),s=this.height();return{x:(n-(r=void 0===r?this._private.zoom:r)*(i.x1+i.x2))/2,y:(s-r*(i.y1+i.y2))/2}}}},reset:function(){return this._private.panningEnabled&&this._private.zoomingEnabled?(this.viewport({pan:{x:0,y:0},zoom:1}),this):this},invalidateSize:function(){this._private.sizeCache=null},size:function(){var i,n,t=this._private,r=t.container;return t.sizeCache=t.sizeCache||(r?(i=this.window().getComputedStyle(r),{width:r.clientWidth-(n=function(o){return parseFloat(i.getPropertyValue(o))})("padding-left")-n("padding-right"),height:r.clientHeight-n("padding-top")-n("padding-bottom")}):{width:1,height:1})},width:function(){return this.size().width},height:function(){return this.size().height},extent:function(){var t=this._private.pan,r=this._private.zoom,a=this.renderedExtent(),i={x1:(a.x1-t.x)/r,x2:(a.x2-t.x)/r,y1:(a.y1-t.y)/r,y2:(a.y2-t.y)/r};return i.w=i.x2-i.x1,i.h=i.y2-i.y1,i},renderedExtent:function(){var t=this.width(),r=this.height();return{x1:0,y1:0,x2:t,y2:r,w:t,h:r}},multiClickDebounceTime:function(t){return t?(this._private.multiClickDebounceTime=t,this):this._private.multiClickDebounceTime}};Ts.centre=Ts.center,Ts.autolockNodes=Ts.autolock,Ts.autoungrabifyNodes=Ts.autoungrabify;var go={data:$i.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeData:$i.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),scratch:$i.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:$i.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0})};go.attr=go.data,go.removeAttr=go.removeData;var po=function(t){var r=this,a=(t=G({},t)).container;a&&!S(a)&&S(a[0])&&(a=a[0]);var i=a?a._cyreg:null;(i=i||{})&&i.cy&&(i.cy.destroy(),i={});var n=i.readies=i.readies||[];a&&(a._cyreg=i),i.cy=r;var s=void 0!==br&&void 0!==a&&!t.headless,o=t;o.layout=G({name:s?"grid":"null"},o.layout),o.renderer=G({name:s?"canvas":"null"},o.renderer);var u=function(_,U,I){return void 0!==U?U:void 0!==I?I:_},h=this._private={container:a,ready:!1,options:o,elements:new wn(this),listeners:[],aniEles:new wn(this),data:o.data||{},scratch:{},layout:null,renderer:null,destroyed:!1,notificationsEnabled:!0,minZoom:1e-50,maxZoom:1e50,zoomingEnabled:u(!0,o.zoomingEnabled),userZoomingEnabled:u(!0,o.userZoomingEnabled),panningEnabled:u(!0,o.panningEnabled),userPanningEnabled:u(!0,o.userPanningEnabled),boxSelectionEnabled:u(!0,o.boxSelectionEnabled),autolock:u(!1,o.autolock,o.autolockNodes),autoungrabify:u(!1,o.autoungrabify,o.autoungrabifyNodes),autounselectify:u(!1,o.autounselectify),styleEnabled:void 0===o.styleEnabled?s:o.styleEnabled,zoom:Z(o.zoom)?o.zoom:1,pan:{x:Bt(o.pan)&&Z(o.pan.x)?o.pan.x:0,y:Bt(o.pan)&&Z(o.pan.y)?o.pan.y:0},animation:{current:[],queue:[]},hasCompoundNodes:!1,multiClickDebounceTime:u(250,o.multiClickDebounceTime)};this.createEmitter(),this.selectionType(o.selectionType),this.zoomRange({min:o.minZoom,max:o.maxZoom}),h.styleEnabled&&r.setStyle([]);var v=G({},o,o.renderer);r.initRenderer(v),function(_,U){if(_.some(xe))return Ks.all(_).then(U);U(_)}([o.style,o.elements],function(k){var _=k[0],U=k[1];h.styleEnabled&&r.style().append(_),function(_,U,I){r.notifications(!1);var K=r.mutableElements();K.length>0&&K.remove(),null!=_&&(Bt(_)||ft(_))&&r.add(_),r.one("layoutready",function(X){r.notifications(!0),r.emit(X),r.one("load",U),r.emitAndNotify("load")}).one("layoutstop",function(){r.one("done",I),r.emit("done")});var Y=G({},r._private.options.layout);Y.eles=r.elements(),r.layout(Y).run()}(U,function(){r.startAnimationLoop(),h.ready=!0,W(o.ready)&&r.on("ready",o.ready);for(var I=0;I<n.length;I++)r.on("ready",n[I]);i&&(i.readies=[]),r.emit("ready")},o.done)})},tl=po.prototype;G(tl,{instanceString:function(){return"core"},isReady:function(){return this._private.ready},destroyed:function(){return this._private.destroyed},ready:function(t){return this.isReady()?this.emitter().emit("ready",[],t):this.on("ready",t),this},destroy:function(){var t=this;if(!t.destroyed())return t.stopAnimationLoop(),t.destroyRenderer(),this.emit("destroy"),t._private.destroyed=!0,t},hasElementWithId:function(t){return this._private.elements.hasElementWithId(t)},getElementById:function(t){return this._private.elements.getElementById(t)},hasCompoundNodes:function(){return this._private.hasCompoundNodes},headless:function(){return this._private.renderer.isHeadless()},styleEnabled:function(){return this._private.styleEnabled},addToPool:function(t){return this._private.elements.merge(t),this},removeFromPool:function(t){return this._private.elements.unmerge(t),this},container:function(){return this._private.container||null},window:function(){if(null==this._private.container)return br;var r=this._private.container.ownerDocument;return void 0===r||null==r?br:r.defaultView||br},mount:function(t){if(null!=t){var r=this,a=r._private,i=a.options;return!S(t)&&S(t[0])&&(t=t[0]),r.stopAnimationLoop(),r.destroyRenderer(),a.container=t,a.styleEnabled=!0,r.invalidateSize(),r.initRenderer(G({},i,i.renderer,{name:"null"===i.renderer.name?"canvas":i.renderer.name})),r.startAnimationLoop(),r.style(i.style),r.emit("mount"),r}},unmount:function(){var t=this;return t.stopAnimationLoop(),t.destroyRenderer(),t.initRenderer({name:"null"}),t.emit("unmount"),t},options:function(){return Ka(this._private.options)},json:function(t){var r=this,a=r._private,i=r.mutableElements();if(Bt(t)){if(r.startBatch(),t.elements){var s={},o=function(mt,ie){for(var se=[],Yt=[],he=0;he<mt.length;he++){var be=mt[he];if(be.data.id){var Se=""+be.data.id,De=r.getElementById(Se);s[Se]=!0,0!==De.length?Yt.push({ele:De,json:be}):(ie&&(be.group=ie),se.push(be))}else Sa("cy.json() cannot handle elements without an ID attribute")}r.add(se);for(var Oe=0;Oe<Yt.length;Oe++){var Ne=Yt[Oe];Ne.ele.json(Ne.json)}};if(ft(t.elements))o(t.elements);else for(var u=["nodes","edges"],h=0;h<u.length;h++){var f=u[h],v=t.elements[f];ft(v)&&o(v,f)}var m=r.collection();i.filter(function(X){return!s[X.id()]}).forEach(function(X){X.isParent()?m.merge(X):X.remove()}),m.forEach(function(X){return X.children().move({parent:null})}),m.forEach(function(X){return(mt=X,r.getElementById(mt.id())).remove();var mt})}t.style&&r.style(t.style),null!=t.zoom&&t.zoom!==a.zoom&&r.zoom(t.zoom),t.pan&&(t.pan.x!==a.pan.x||t.pan.y!==a.pan.y)&&r.pan(t.pan),t.data&&r.data(t.data);for(var k=["minZoom","maxZoom","zoomingEnabled","userZoomingEnabled","panningEnabled","userPanningEnabled","boxSelectionEnabled","autolock","autoungrabify","autounselectify","multiClickDebounceTime"],_=0;_<k.length;_++){var U=k[_];null!=t[U]&&r[U](t[U])}return r.endBatch(),this}var K={};t?K.elements=this.elements().map(function(X){return X.json()}):(K.elements={},i.forEach(function(X){var mt=X.group();K.elements[mt]||(K.elements[mt]=[]),K.elements[mt].push(X.json())})),this._private.styleEnabled&&(K.style=r.style().json()),K.data=Ka(r.data());var Y=a.options;return K.zoomingEnabled=a.zoomingEnabled,K.userZoomingEnabled=a.userZoomingEnabled,K.zoom=a.zoom,K.minZoom=a.minZoom,K.maxZoom=a.maxZoom,K.panningEnabled=a.panningEnabled,K.userPanningEnabled=a.userPanningEnabled,K.pan=Ka(a.pan),K.boxSelectionEnabled=a.boxSelectionEnabled,K.renderer=Ka(Y.renderer),K.hideEdgesOnViewport=Y.hideEdgesOnViewport,K.textureOnViewport=Y.textureOnViewport,K.wheelSensitivity=Y.wheelSensitivity,K.motionBlur=Y.motionBlur,K.multiClickDebounceTime=Y.multiClickDebounceTime,K}}),tl.$id=tl.getElementById,[f1,x1,md,Rc,Xo,_1,Pc,Zo,k1,Ts,go].forEach(function(e){G(tl,e)});var S1={fit:!0,directed:!1,direction:"downward",padding:30,circle:!1,grid:!1,spacingFactor:1.75,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,roots:void 0,depthSort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(t,r){return!0},ready:void 0,stop:void 0,transform:function(t,r){return r}},w1={maximal:!1,acyclic:!1},Gs=function(t){return t.scratch("breadthfirst")},xd=function(t,r){return t.scratch("breadthfirst",r)};function bd(e){this.options=G({},S1,w1,e)}bd.prototype.run=function(){var h,e=this.options,t=e.cy,r=e.eles,a=r.nodes().filter(function(gi){return gi.isChildless()}),i=r,n=e.directed,s=e.acyclic||e.maximal||e.maximalAdjustments>0,o=!!e.boundingBox,u=Tt(o?e.boundingBox:structuredClone(t.extent()));if(re(e.roots))h=e.roots;else if(ft(e.roots)){for(var f=[],v=0;v<e.roots.length;v++){var k=t.getElementById(e.roots[v]);f.push(k)}h=t.collection(f)}else if(Ge(e.roots))h=t.$(e.roots);else if(n)h=a.roots();else{var _=r.components();h=t.collection();for(var U=function(){var Ja=_[I],ci=Ja.maxDegree(!1),ui=Ja.filter(function(_i){return _i.degree(!1)===ci});h=h.add(ui)},I=0;I<_.length;I++)U()}var K=[],Y={},X=function(Ja,ci){null==K[ci]&&(K[ci]=[]);var ui=K[ci].length;K[ci].push(Ja),xd(Ja,{index:ui,depth:ci})};i.bfs({roots:h,directed:e.directed,visit:function(Ja,ci,ui,_i,fi){var wi=Ja[0],Ii=wi.id();wi.isChildless()&&X(wi,fi),Y[Ii]=!0}});for(var ie=[],se=0;se<a.length;se++){var Yt=a[se];Y[Yt.id()]||ie.push(Yt)}var he=function(Ja){for(var ci=K[Ja],ui=0;ui<ci.length;ui++){var _i=ci[ui];null!=_i?xd(_i,{depth:Ja,index:ui}):(ci.splice(ui,1),ui--)}},be=function(Ja,ci){for(var ui=Gs(Ja),_i=Ja.incomers().filter(function(bi){return bi.isNode()&&r.has(bi)}),fi=-1,wi=Ja.id(),Ii=0;Ii<_i.length;Ii++){var Hi=Gs(_i[Ii]);fi=Math.max(fi,Hi.depth)}if(ui.depth<=fi){if(!e.acyclic&&ci[wi])return null;var Gi=fi+1;return function(Ja,ci){var ui=Gs(Ja);K[ui.depth][ui.index]=null,Ja.isChildless()&&X(Ja,ci)}(Ja,Gi),ci[wi]=Gi,!0}return!1};if(n&&s){var Se=[],De={},Oe=function(Ja){return Se.push(Ja)},Ne=function(){return Se.shift()};for(a.forEach(function(gi){return Se.push(gi)});Se.length>0;){var Je=Ne(),dr=be(Je,De);if(dr)Je.outgoers().filter(function(gi){return gi.isNode()&&r.has(gi)}).forEach(Oe);else if(null===dr){Sa("Detected double maximal shift for node `"+Je.id()+"`.  Bailing maximal adjustment due to cycle.  Use `options.maximal: true` only on DAGs.");break}}}var gr=0;if(e.avoidOverlap)for(var ar=0;ar<a.length;ar++){var Ur=a[ar].layoutDimensions(e);gr=Math.max(gr,Ur.w,Ur.h)}var Wr={},pa=function(Ja){if(Wr[Ja.id()])return Wr[Ja.id()];for(var ci=Gs(Ja).depth,ui=Ja.neighborhood(),_i=0,fi=0,wi=0;wi<ui.length;wi++){var Ii=ui[wi];if(!Ii.isEdge()&&!Ii.isParent()&&a.has(Ii)){var Yi=Gs(Ii);if(null!=Yi){var Hi=Yi.index,Gi=Yi.depth;null!=Hi&&null!=Gi&&Gi<ci&&(_i+=Hi/K[Gi].length,fi++)}}}return _i/=fi=Math.max(1,fi),0===fi&&(_i=0),Wr[Ja.id()]=_i,_i},Ea=function(Ja,ci){var fi=pa(Ja)-pa(ci);return 0===fi?ut(Ja.id(),ci.id()):fi};void 0!==e.depthSort&&(Ea=e.depthSort);for(var va=K.length,Aa=0;Aa<va;Aa++)K[Aa].sort(Ea),he(Aa);for(var Ia=[],Qa=0;Qa<ie.length;Qa++)Ia.push(ie[Qa]);Ia.length&&(K.unshift(Ia),va=K.length,function(){for(var Ja=0;Ja<va;Ja++)he(Ja)}());for(var Kr=0,$r=0;$r<va;$r++)Kr=Math.max(K[$r].length,Kr);var ea_x=u.x1+u.w/2,ea_y=u.y1+u.h/2,xa=a.reduce(function(gi,Ja){return ci=Ja.boundingBox({includeLabels:e.nodeDimensionsIncludeLabels}),{w:-1===gi.w?ci.w:(gi.w+ci.w)/2,h:-1===gi.h?ci.h:(gi.h+ci.h)/2};var ci},{w:-1,h:-1}),Ga=Math.max(1===va?0:o?(u.h-2*e.padding-xa.h)/(va-1):(u.h-2*e.padding-xa.h)/(va+1),gr),li=K.reduce(function(gi,Ja){return Math.max(gi,Ja.length)},0),Ci={downward:0,leftward:90,upward:180,rightward:-90};return-1===Object.keys(Ci).indexOf(e.direction)&&za("Invalid direction '".concat(e.direction,"' specified for breadthfirst layout. Valid values are: ").concat(Object.keys(Ci).join(", "))),r.nodes().layoutPositions(this,e,function(Ja){return function Jr(e,t,r){if(0===r)return e;var a=(t.x1+t.x2)/2,i=(t.y1+t.y2)/2,n=t.w/t.h,s=1/n,o=function Ma(e,t,r,a,i){var n=i*Math.PI/180;return{x:Math.cos(n)*(e-r)-Math.sin(n)*(t-a)+r,y:Math.sin(n)*(e-r)+Math.cos(n)*(t-a)+a}}(e.x,e.y,a,i,r),u=function(t,r,a,i,n,s){return{x:(t-a)*n+a,y:(r-i)*s+i}}(o.x,o.y,a,i,n,s);return{x:u.x,y:u.y}}(function(Ja){var ci=Gs(Ja),ui=ci.depth,_i=ci.index;if(e.circle){var fi=Math.min(u.w/2/va,u.h/2/va),wi=(fi=Math.max(fi,gr))*ui+fi-(va>0&&K[0].length<=3?fi/2:0),Ii=2*Math.PI/K[ui].length*_i;return 0===ui&&1===K[0].length&&(wi=1),{x:ea_x+wi*Math.cos(Ii),y:ea_y+wi*Math.sin(Ii)}}var Yi=K[ui].length,Hi=Math.max(1===Yi?0:o?(u.w-2*e.padding-xa.w)/((e.grid?li:Yi)-1):(u.w-2*e.padding-xa.w)/((e.grid?li:Yi)+1),gr);return{x:ea_x+(_i+1-(Yi+1)/2)*Hi,y:ea_y+(ui+1-(va+1)/2)*Ga}}(Ja),u,Ci[e.direction])}),this};var A1={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,radius:void 0,startAngle:1.5*Math.PI,sweep:void 0,clockwise:!0,sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(t,r){return!0},ready:void 0,stop:void 0,transform:function(t,r){return r}};function _d(e){this.options=G({},A1,e)}_d.prototype.run=function(){var e=this.options,t=e,r=e.cy,a=t.eles,i=void 0!==t.counterclockwise?!t.counterclockwise:t.clockwise,n=a.nodes().not(":parent");t.sort&&(n=n.sort(t.sort));for(var f,s=Tt(t.boundingBox?t.boundingBox:{x1:0,y1:0,w:r.width(),h:r.height()}),o={x:s.x1+s.w/2,y:s.y1+s.h/2},h=(void 0===t.sweep?2*Math.PI-2*Math.PI/n.length:t.sweep)/Math.max(1,n.length-1),v=0,m=0;m<n.length;m++){var _=n[m].layoutDimensions(t);v=Math.max(v,_.w,_.h)}if(f=Z(t.radius)?t.radius:n.length<=1?0:Math.min(s.h,s.w)/2-v,n.length>1&&t.avoidOverlap){v*=1.75;var K=Math.cos(h)-Math.cos(0),Y=Math.sin(h)-Math.sin(0),X=Math.sqrt(v*v/(K*K+Y*Y));f=Math.max(X,f)}return a.nodes().layoutPositions(this,t,function(se,Yt){var he=t.startAngle+Yt*h*(i?1:-1),be=f*Math.cos(he),Se=f*Math.sin(he);return{x:o.x+be,y:o.y+Se}}),this};var D1={fit:!0,padding:30,startAngle:1.5*Math.PI,sweep:void 0,clockwise:!0,equidistant:!1,minNodeSpacing:10,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,height:void 0,width:void 0,spacingFactor:void 0,concentric:function(t){return t.degree()},levelWidth:function(t){return t.maxDegree()/4},animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(t,r){return!0},ready:void 0,stop:void 0,transform:function(t,r){return r}};function Ed(e){this.options=G({},D1,e)}Ed.prototype.run=function(){for(var e=this.options,t=e,r=void 0!==t.counterclockwise?!t.counterclockwise:t.clockwise,a=e.cy,i=t.eles,n=i.nodes().not(":parent"),s=Tt(t.boundingBox?t.boundingBox:{x1:0,y1:0,w:a.width(),h:a.height()}),o={x:s.x1+s.w/2,y:s.y1+s.h/2},u=[],h=0,f=0;f<n.length;f++){var m,v=n[f];m=t.concentric(v),u.push({value:m,node:v}),v._private.scratch.concentric=m}n.updateStyle();for(var k=0;k<n.length;k++){var U=n[k].layoutDimensions(t);h=Math.max(h,U.w,U.h)}u.sort(function(Ga,li){return li.value-Ga.value});for(var I=t.levelWidth(n),K=[[]],Y=K[0],X=0;X<u.length;X++){var mt=u[X];Y.length>0&&Math.abs(Y[0].value-mt.value)>=I&&K.push(Y=[]),Y.push(mt)}var se=h+t.minNodeSpacing;if(!t.avoidOverlap){var Yt=K.length>0&&K[0].length>1,he=Math.min(s.w,s.h)/2-se;se=Math.min(se,he/(K.length+Yt?1:0))}for(var Se=0,De=0;De<K.length;De++){var Oe=K[De],Ne=void 0===t.sweep?2*Math.PI-2*Math.PI/Oe.length:t.sweep,Je=Oe.dTheta=Ne/Math.max(1,Oe.length-1);if(Oe.length>1&&t.avoidOverlap){var dr=Math.cos(Je)-Math.cos(0),gr=Math.sin(Je)-Math.sin(0),ar=Math.sqrt(se*se/(dr*dr+gr*gr));Se=Math.max(ar,Se)}Oe.r=Se,Se+=se}if(t.equidistant){for(var Sr=0,Ur=0,jr=0;jr<K.length;jr++)Sr=Math.max(Sr,K[jr].r-Ur);Ur=0;for(var pa=0;pa<K.length;pa++){var Ea=K[pa];0===pa&&(Ur=Ea.r),Ea.r=Ur,Ur+=Sr}}for(var va={},Aa=0;Aa<K.length;Aa++)for(var Ia=K[Aa],Qa=Ia.dTheta,Ta=Ia.r,Kr=0;Kr<Ia.length;Kr++){var $r=Ia[Kr],ea=t.startAngle+(r?1:-1)*Qa*Kr,xa={x:o.x+Ta*Math.cos(ea),y:o.y+Ta*Math.sin(ea)};va[$r.node.id()]=xa}return i.nodes().layoutPositions(this,t,function(Ga){var li=Ga.id();return va[li]}),this};var Oc,L1={ready:function(){},stop:function(){},animate:!0,animationEasing:void 0,animationDuration:void 0,animateFilter:function(t,r){return!0},animationThreshold:250,refresh:20,fit:!0,padding:30,boundingBox:void 0,nodeDimensionsIncludeLabels:!1,randomize:!1,componentSpacing:40,nodeRepulsion:function(t){return 2048},nodeOverlap:4,idealEdgeLength:function(t){return 32},edgeElasticity:function(t){return 32},nestingFactor:1.2,gravity:1,numIter:1e3,initialTemp:1e3,coolingFactor:.99,minTemp:1};function el(e){this.options=G({},L1,e),this.options.layout=this;var t=this.options.eles.nodes(),a=this.options.eles.edges().filter(function(i){var n=i.source().data("id"),s=i.target().data("id"),o=t.some(function(h){return h.data("id")===n}),u=t.some(function(h){return h.data("id")===s});return!o||!u});this.options.eles=this.options.eles.not(a)}el.prototype.run=function(){var e=this.options,t=e.cy,r=this;r.stopped=!1,(!0===e.animate||!1===e.animate)&&r.emit({type:"layoutstart",layout:r}),Oc=!0===e.debug;var a=B1(t,r,e);Oc&&(void 0)(a),e.randomize&&M1(a);var i=Qr(),n=function(){I1(a,t,e),!0===e.fit&&t.fit(e.padding)},s=function(m){return!(r.stopped||m>=e.numIter||(O1(a,e),a.temperature=a.temperature*e.coolingFactor,a.temperature<e.minTemp))},o=function(){if(!0===e.animate||!1===e.animate)n(),r.one("layoutstop",e.stop),r.emit({type:"layoutstop",layout:r});else{var m=e.eles.nodes(),k=kd(a,e,m);m.layoutPositions(r,e,k)}},u=0,h=!0;if(!0===e.animate){var f=function(){for(var m=0;h&&m<e.refresh;)h=s(u),u++,m++;h?(Qr()-i>=e.animationThreshold&&n(),Oa(f)):(wd(a,e),o())};f()}else{for(;h;)h=s(u),u++;wd(a,e),o()}return this},el.prototype.stop=function(){return this.stopped=!0,this.thread&&this.thread.stop(),this.emit("layoutstop"),this},el.prototype.destroy=function(){return this.thread&&this.thread.stop(),this};var B1=function(t,r,a){for(var i=a.eles.edges(),n=a.eles.nodes(),s=Tt(a.boundingBox?a.boundingBox:{x1:0,y1:0,w:t.width(),h:t.height()}),o={isCompound:t.hasCompoundNodes(),layoutNodes:[],idToIndex:{},nodeSize:n.size(),graphSet:[],indexToGraph:[],layoutEdges:[],edgeSize:i.size(),temperature:a.initialTemp,clientWidth:s.w,clientHeight:s.h,boundingBox:s},u=a.eles.components(),h={},f=0;f<u.length;f++)for(var v=u[f],m=0;m<v.length;m++)h[v[m].id()]=f;for(f=0;f<o.nodeSize;f++){var U=(_=n[f]).layoutDimensions(a);(I={}).isLocked=_.locked(),I.id=_.data("id"),I.parentId=_.data("parent"),I.cmptId=h[_.id()],I.children=[],I.positionX=_.position("x"),I.positionY=_.position("y"),I.offsetX=0,I.offsetY=0,I.height=U.w,I.width=U.h,I.maxX=I.positionX+I.width/2,I.minX=I.positionX-I.width/2,I.maxY=I.positionY+I.height/2,I.minY=I.positionY-I.height/2,I.padLeft=parseFloat(_.style("padding")),I.padRight=parseFloat(_.style("padding")),I.padTop=parseFloat(_.style("padding")),I.padBottom=parseFloat(_.style("padding")),I.nodeRepulsion=W(a.nodeRepulsion)?a.nodeRepulsion(_):a.nodeRepulsion,o.layoutNodes.push(I),o.idToIndex[I.id]=f}var K=[],Y=0,X=-1,mt=[];for(f=0;f<o.nodeSize;f++){var _,ie=(_=o.layoutNodes[f]).parentId;null!=ie?o.layoutNodes[o.idToIndex[ie]].children.push(_.id):(K[++X]=_.id,mt.push(_.id))}for(o.graphSet.push(mt);Y<=X;){var se=K[Y++],he=o.layoutNodes[o.idToIndex[se]].children;if(he.length>0)for(o.graphSet.push(he),f=0;f<he.length;f++)K[++X]=he[f]}for(f=0;f<o.graphSet.length;f++){var be=o.graphSet[f];for(m=0;m<be.length;m++)o.indexToGraph[o.idToIndex[be[m]]]=f}for(f=0;f<o.edgeSize;f++){var De=i[f],Oe={};Oe.id=De.data("id"),Oe.sourceId=De.data("source"),Oe.targetId=De.data("target");var Ne=W(a.idealEdgeLength)?a.idealEdgeLength(De):a.idealEdgeLength,Je=W(a.edgeElasticity)?a.edgeElasticity(De):a.edgeElasticity,dr=o.idToIndex[Oe.sourceId],gr=o.idToIndex[Oe.targetId];if(o.indexToGraph[dr]!=o.indexToGraph[gr]){for(var Ur=R1(Oe.sourceId,Oe.targetId,o),jr=o.graphSet[Ur],Mr=0,I=o.layoutNodes[dr];-1===jr.indexOf(I.id);)I=o.layoutNodes[o.idToIndex[I.parentId]],Mr++;for(I=o.layoutNodes[gr];-1===jr.indexOf(I.id);)I=o.layoutNodes[o.idToIndex[I.parentId]],Mr++;Ne*=Mr*a.nestingFactor}Oe.idealLength=Ne,Oe.elasticity=Je,o.layoutEdges.push(Oe)}return o},R1=function(t,r,a){var i=Cd(t,r,0,a);return 2>i.count?0:i.graph},Cd=function(t,r,a,i){var n=i.graphSet[a];if(-1<n.indexOf(t)&&-1<n.indexOf(r))return{count:2,graph:a};for(var s=0,o=0;o<n.length;o++){var f=i.layoutNodes[i.idToIndex[n[o]]].children;if(0!==f.length){var m=Cd(t,r,i.indexToGraph[i.idToIndex[f[0]]],i);if(0!==m.count){if(1!==m.count)return m;if(2===++s)break}}}return{count:s,graph:a}},M1=function(t,r){for(var a=t.clientWidth,i=t.clientHeight,n=0;n<t.nodeSize;n++){var s=t.layoutNodes[n];0===s.children.length&&!s.isLocked&&(s.positionX=Math.random()*a,s.positionY=Math.random()*i)}},kd=function(t,r,a){var i=t.boundingBox,n={x1:1/0,x2:-1/0,y1:1/0,y2:-1/0};return r.boundingBox&&(a.forEach(function(s){var o=t.layoutNodes[t.idToIndex[s.data("id")]];n.x1=Math.min(n.x1,o.positionX),n.x2=Math.max(n.x2,o.positionX),n.y1=Math.min(n.y1,o.positionY),n.y2=Math.max(n.y2,o.positionY)}),n.w=n.x2-n.x1,n.h=n.y2-n.y1),function(s,o){var u=t.layoutNodes[t.idToIndex[s.data("id")]];return r.boundingBox?{x:i.x1+(0===n.w?.5:(u.positionX-n.x1)/n.w)*i.w,y:i.y1+(0===n.h?.5:(u.positionY-n.y1)/n.h)*i.h}:{x:u.positionX,y:u.positionY}}},I1=function(t,r,a){var i=a.layout,n=a.eles.nodes(),s=kd(t,a,n);n.positions(s),!0!==t.ready&&(t.ready=!0,i.one("layoutready",a.ready),i.emit({type:"layoutready",layout:this}))},O1=function(t,r,a){N1(t,r),W1(t),z1(t,r),V1(t),U1(t)},N1=function(t,r){for(var a=0;a<t.graphSet.length;a++)for(var i=t.graphSet[a],n=i.length,s=0;s<n;s++)for(var o=t.layoutNodes[t.idToIndex[i[s]]],u=s+1;u<n;u++)F1(o,t.layoutNodes[t.idToIndex[i[u]]],t,r)},Td=function(t){return 2*t*Math.random()-1},F1=function(t,r,a,i){if(t.cmptId===r.cmptId||a.isCompound){var o=r.positionX-t.positionX,u=r.positionY-t.positionY;0===o&&0===u&&(o=Td(1),u=Td(1));var f=K1(t,r,o,u);if(f>0)var k=(v=i.nodeOverlap*f)*o/(m=Math.sqrt(o*o+u*u)),_=v*u/m;else{var v,U=rl(t,o,u),I=rl(r,-1*o,-1*u),K=I.x-U.x,Y=I.y-U.y,X=K*K+Y*Y,m=Math.sqrt(X);k=(v=(t.nodeRepulsion+r.nodeRepulsion)/X)*K/m,_=v*Y/m}t.isLocked||(t.offsetX-=k,t.offsetY-=_),r.isLocked||(r.offsetX+=k,r.offsetY+=_)}},K1=function(t,r,a,i){if(a>0)var n=t.maxX-r.minX;else n=r.maxX-t.minX;if(i>0)var s=t.maxY-r.minY;else s=r.maxY-t.minY;return n>=0&&s>=0?Math.sqrt(n*n+s*s):0},rl=function(t,r,a){var i=t.positionX,n=t.positionY,s=t.height||1,o=t.width||1,u=a/r,h=s/o,f={};return 0===r&&0<a||0===r&&0>a?(f.x=i,f.y=n+s/2,f):0<r&&-1*h<=u&&u<=h?(f.x=i+o/2,f.y=n+o*a/2/r,f):0>r&&-1*h<=u&&u<=h?(f.x=i-o/2,f.y=n-o*a/2/r,f):0<a&&(u<=-1*h||u>=h)?(f.x=i+s*r/2/a,f.y=n+s/2,f):(0>a&&(u<=-1*h||u>=h)&&(f.x=i-s*r/2/a,f.y=n-s/2),f)},W1=function(t,r){for(var a=0;a<t.edgeSize;a++){var i=t.layoutEdges[a],s=t.layoutNodes[t.idToIndex[i.sourceId]],u=t.layoutNodes[t.idToIndex[i.targetId]],h=u.positionX-s.positionX,f=u.positionY-s.positionY;if(0!==h||0!==f){var v=rl(s,h,f),m=rl(u,-1*h,-1*f),k=m.x-v.x,_=m.y-v.y,U=Math.sqrt(k*k+_*_),I=Math.pow(i.idealLength-U,2)/i.elasticity;if(0!==U)var K=I*k/U,Y=I*_/U;else K=0,Y=0;s.isLocked||(s.offsetX+=K,s.offsetY+=Y),u.isLocked||(u.offsetX-=K,u.offsetY-=Y)}}},z1=function(t,r){if(0!==r.gravity)for(var i=0;i<t.graphSet.length;i++){var n=t.graphSet[i],s=n.length;if(0===i)var o=t.clientHeight/2,u=t.clientWidth/2;else{var f=t.layoutNodes[t.idToIndex[t.layoutNodes[t.idToIndex[n[0]]].parentId]];o=f.positionX,u=f.positionY}for(var v=0;v<s;v++){var m=t.layoutNodes[t.idToIndex[n[v]]];if(!m.isLocked){var k=o-m.positionX,_=u-m.positionY,U=Math.sqrt(k*k+_*_);if(U>1){var K=r.gravity*_/U;m.offsetX+=r.gravity*k/U,m.offsetY+=K}}}}},V1=function(t,r){var a=[],i=0,n=-1;for(a.push.apply(a,t.graphSet[0]),n+=t.graphSet[0].length;i<=n;){var s=a[i++],u=t.layoutNodes[t.idToIndex[s]],h=u.children;if(0<h.length&&!u.isLocked){for(var f=u.offsetX,v=u.offsetY,m=0;m<h.length;m++){var k=t.layoutNodes[t.idToIndex[h[m]]];k.offsetX+=f,k.offsetY+=v,a[++n]=h[m]}u.offsetX=0,u.offsetY=0}}},U1=function(t,r){for(var a=0;a<t.nodeSize;a++)0<(i=t.layoutNodes[a]).children.length&&(i.maxX=void 0,i.minX=void 0,i.maxY=void 0,i.minY=void 0);for(a=0;a<t.nodeSize;a++)if(!(0<(i=t.layoutNodes[a]).children.length||i.isLocked)){var n=$1(i.offsetX,i.offsetY,t.temperature);i.positionX+=n.x,i.positionY+=n.y,i.offsetX=0,i.offsetY=0,i.minX=i.positionX-i.width,i.maxX=i.positionX+i.width,i.minY=i.positionY-i.height,i.maxY=i.positionY+i.height,Sd(i,t)}for(a=0;a<t.nodeSize;a++){var i;0<(i=t.layoutNodes[a]).children.length&&!i.isLocked&&(i.positionX=(i.maxX+i.minX)/2,i.positionY=(i.maxY+i.minY)/2,i.width=i.maxX-i.minX,i.height=i.maxY-i.minY)}},$1=function(t,r,a){var i=Math.sqrt(t*t+r*r);if(i>a)var n={x:a*t/i,y:a*r/i};else n={x:t,y:r};return n},Sd=function(t,r){var a=t.parentId;if(null!=a){var i=r.layoutNodes[r.idToIndex[a]],n=!1;if((null==i.maxX||t.maxX+i.padRight>i.maxX)&&(i.maxX=t.maxX+i.padRight,n=!0),(null==i.minX||t.minX-i.padLeft<i.minX)&&(i.minX=t.minX-i.padLeft,n=!0),(null==i.maxY||t.maxY+i.padBottom>i.maxY)&&(i.maxY=t.maxY+i.padBottom,n=!0),(null==i.minY||t.minY-i.padTop<i.minY)&&(i.minY=t.minY-i.padTop,n=!0),n)return Sd(i,r)}},wd=function(t,r){for(var a=t.layoutNodes,i=[],n=0;n<a.length;n++){var s=a[n],o=s.cmptId;(i[o]=i[o]||[]).push(s)}var h=0;for(n=0;n<i.length;n++)if(f=i[n]){f.x1=1/0,f.x2=-1/0,f.y1=1/0,f.y2=-1/0;for(var v=0;v<f.length;v++){var m=f[v];f.x1=Math.min(f.x1,m.positionX-m.width/2),f.x2=Math.max(f.x2,m.positionX+m.width/2),f.y1=Math.min(f.y1,m.positionY-m.height/2),f.y2=Math.max(f.y2,m.positionY+m.height/2)}f.w=f.x2-f.x1,f.h=f.y2-f.y1,h+=f.w*f.h}i.sort(function(Y,X){return X.w*X.h-Y.w*Y.h});var k=0,_=0,U=0,I=0,K=Math.sqrt(h)*t.clientWidth/t.clientHeight;for(n=0;n<i.length;n++){var f;if(f=i[n]){for(v=0;v<f.length;v++)(m=f[v]).isLocked||(m.positionX+=k-f.x1,m.positionY+=_-f.y1);k+=f.w+r.componentSpacing,U+=f.w+r.componentSpacing,I=Math.max(I,f.h),U>K&&(_+=I+r.componentSpacing,k=0,U=0,I=0)}}},Y1={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,avoidOverlapPadding:10,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,condense:!1,rows:void 0,cols:void 0,position:function(t){},sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(t,r){return!0},ready:void 0,stop:void 0,transform:function(t,r){return r}};function Ad(e){this.options=G({},Y1,e)}Ad.prototype.run=function(){var e=this.options,t=e,r=e.cy,a=t.eles,i=a.nodes().not(":parent");t.sort&&(i=i.sort(t.sort));var n=Tt(t.boundingBox?t.boundingBox:{x1:0,y1:0,w:r.width(),h:r.height()});if(0===n.h||0===n.w)a.nodes().layoutPositions(this,t,function(pa){return{x:n.x1,y:n.y1}});else{var s=i.size(),o=Math.sqrt(s*n.h/n.w),u=Math.round(o),h=Math.round(n.w/n.h*o),f=function(Ea){if(null==Ea)return Math.min(u,h);Math.min(u,h)==u?u=Ea:h=Ea},v=function(Ea){if(null==Ea)return Math.max(u,h);Math.max(u,h)==u?u=Ea:h=Ea},m=t.rows,k=null!=t.cols?t.cols:t.columns;if(null!=m&&null!=k)u=m,h=k;else if(null!=m&&null==k)u=m,h=Math.ceil(s/u);else if(null==m&&null!=k)h=k,u=Math.ceil(s/h);else if(h*u>s){var _=f(),U=v();(_-1)*U>=s?f(_-1):(U-1)*_>=s&&v(U-1)}else for(;h*u<s;){var I=f(),K=v();(K+1)*I>=s?v(K+1):f(I+1)}var Y=n.w/h,X=n.h/u;if(t.condense&&(Y=0,X=0),t.avoidOverlap)for(var mt=0;mt<i.length;mt++){var ie=i[mt],se=ie._private.position;(null==se.x||null==se.y)&&(se.x=0,se.y=0);var Yt=ie.layoutDimensions(t),he=t.avoidOverlapPadding,Se=Yt.h+he;Y=Math.max(Y,Yt.w+he),X=Math.max(X,Se)}for(var De={},Oe=function(Ea,va){return!!De["c-"+Ea+"-"+va]},Ne=function(Ea,va){De["c-"+Ea+"-"+va]=!0},Je=0,dr=0,gr=function(){++dr>=h&&(dr=0,Je++)},ar={},Sr=0;Sr<i.length;Sr++){var Ur=i[Sr],jr=t.position(Ur);if(jr&&(void 0!==jr.row||void 0!==jr.col)){var Mr={row:jr.row,col:jr.col};if(void 0===Mr.col)for(Mr.col=0;Oe(Mr.row,Mr.col);)Mr.col++;else if(void 0===Mr.row)for(Mr.row=0;Oe(Mr.row,Mr.col);)Mr.row++;ar[Ur.id()]=Mr,Ne(Mr.row,Mr.col)}}i.layoutPositions(this,t,function(Ea,va){var Aa,Ia;if(Ea.locked()||Ea.isParent())return!1;var Qa=ar[Ea.id()];if(Qa)Aa=Qa.col*Y+Y/2+n.x1,Ia=Qa.row*X+X/2+n.y1;else{for(;Oe(Je,dr);)gr();Aa=dr*Y+Y/2+n.x1,Ia=Je*X+X/2+n.y1,Ne(Je,dr),gr()}return{x:Aa,y:Ia}})}return this};var H1={ready:function(){},stop:function(){}};function Nc(e){this.options=G({},H1,e)}Nc.prototype.run=function(){var e=this.options,t=e.eles,r=this;return r.emit("layoutstart"),t.nodes().positions(function(){return{x:0,y:0}}),r.one("layoutready",e.ready),r.emit("layoutready"),r.one("layoutstop",e.stop),r.emit("layoutstop"),this},Nc.prototype.stop=function(){return this};var G1={positions:void 0,zoom:void 0,pan:void 0,fit:!0,padding:30,spacingFactor:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(t,r){return!0},ready:void 0,stop:void 0,transform:function(t,r){return r}};function Dd(e){this.options=G({},G1,e)}Dd.prototype.run=function(){var e=this.options,r=e.eles.nodes(),a=W(e.positions);return r.layoutPositions(this,e,function(n,s){var o=function i(n){return null==e.positions?function(t){return{x:t.x,y:t.y}}(n.position()):a?e.positions(n):e.positions[n._private.data.id]??null}(n);return!n.locked()&&null!=o&&o}),this};var q1={fit:!0,padding:30,boundingBox:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(t,r){return!0},ready:void 0,stop:void 0,transform:function(t,r){return r}};function Ld(e){this.options=G({},q1,e)}Ld.prototype.run=function(){var e=this.options,t=e.cy,r=e.eles,a=Tt(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:t.width(),h:t.height()});return r.nodes().layoutPositions(this,e,function(s,o){return{x:a.x1+Math.round(Math.random()*a.w),y:a.y1+Math.round(Math.random()*a.h)}}),this};var j1=[{name:"breadthfirst",impl:bd},{name:"circle",impl:_d},{name:"concentric",impl:Ed},{name:"cose",impl:el},{name:"grid",impl:Ad},{name:"null",impl:Nc},{name:"preset",impl:Dd},{name:"random",impl:Ld}];function Bd(e){this.options=e,this.notifications=0}var Rd=function(){},Pd=function(){throw new Error("A headless instance can not render images")};Bd.prototype={recalculateRenderedStyle:Rd,notify:function(){this.notifications++},init:Rd,isHeadless:function(){return!0},png:Pd,jpg:Pd};var Fc={arrowShapeWidth:.3,registerArrowShapes:function(){var e=this.arrowShapes={},t=this,r=function(h,f,v,m,k,_,U){return k.x-v/2-U<=h&&h<=k.x+v/2+U&&k.y-v/2-U<=f&&f<=k.y+v/2+U},a=function(h,f,v,m,k){var _=h*Math.cos(m)-f*Math.sin(m),U=h*Math.sin(m)+f*Math.cos(m);return{x:_*v+k.x,y:U*v+k.y}},i=function(h,f,v,m){for(var k=[],_=0;_<h.length;_+=2)k.push(a(h[_],h[_+1],f,v,m));return k},n=function(h){for(var f=[],v=0;v<h.length;v++){var m=h[v];f.push(m.x,m.y)}return f},s=function(h){return h.pstyle("width").pfValue*h.pstyle("arrow-scale").pfValue*2},o=function(h,f){Ge(f)&&(f=e[f]),e[h]=G({name:h,points:[-.15,-.3,.15,-.3,.15,.3,-.15,.3],collide:function(m,k,_,U,I,K){var Y=n(i(this.points,_+2*K,U,I));return Nr(m,k,Y)},roughCollide:r,draw:function(m,k,_,U){var I=i(this.points,k,_,U);t.arrowShapeImpl("polygon")(m,I)},spacing:function(m){return 0},gap:s},f)};o("none",{collide:Va,roughCollide:Va,draw:qa,spacing:lr,gap:lr}),o("triangle",{points:[-.15,-.3,0,0,.15,-.3]}),o("arrow","triangle"),o("triangle-backcurve",{points:e.triangle.points,controlPoint:[0,-.15],roughCollide:r,draw:function(h,f,v,m,k){var _=i(this.points,f,v,m),U=this.controlPoint,I=a(U[0],U[1],f,v,m);t.arrowShapeImpl(this.name)(h,_,I)},gap:function(h){return.8*s(h)}}),o("triangle-tee",{points:[0,0,.15,-.3,-.15,-.3,0,0],pointsTee:[-.15,-.4,-.15,-.5,.15,-.5,.15,-.4],collide:function(h,f,v,m,k,_,U){var I=n(i(this.points,v+2*U,m,k)),K=n(i(this.pointsTee,v+2*U,m,k));return Nr(h,f,I)||Nr(h,f,K)},draw:function(h,f,v,m,k){var _=i(this.points,f,v,m),U=i(this.pointsTee,f,v,m);t.arrowShapeImpl(this.name)(h,_,U)}}),o("circle-triangle",{radius:.15,pointsTr:[0,-.15,.15,-.45,-.15,-.45,0,-.15],collide:function(h,f,v,m,k,_,U){var I=k,K=Math.pow(I.x-h,2)+Math.pow(I.y-f,2)<=Math.pow((v+2*U)*this.radius,2),Y=n(i(this.points,v+2*U,m,k));return Nr(h,f,Y)||K},draw:function(h,f,v,m,k){var _=i(this.pointsTr,f,v,m);t.arrowShapeImpl(this.name)(h,_,m.x,m.y,this.radius*f)},spacing:function(h){return t.getArrowWidth(h.pstyle("width").pfValue,h.pstyle("arrow-scale").value)*this.radius}}),o("triangle-cross",{points:[0,0,.15,-.3,-.15,-.3,0,0],baseCrossLinePts:[-.15,-.4,-.15,-.4,.15,-.4,.15,-.4],crossLinePts:function(h,f){var v=this.baseCrossLinePts.slice(),m=f/h;return v[3]=v[3]-m,v[5]=v[5]-m,v},collide:function(h,f,v,m,k,_,U){var I=n(i(this.points,v+2*U,m,k)),K=n(i(this.crossLinePts(v,_),v+2*U,m,k));return Nr(h,f,I)||Nr(h,f,K)},draw:function(h,f,v,m,k){var _=i(this.points,f,v,m),U=i(this.crossLinePts(f,k),f,v,m);t.arrowShapeImpl(this.name)(h,_,U)}}),o("vee",{points:[-.15,-.3,0,0,.15,-.3,0,-.15],gap:function(h){return.525*s(h)}}),o("circle",{radius:.15,collide:function(h,f,v,m,k,_,U){var I=k;return Math.pow(I.x-h,2)+Math.pow(I.y-f,2)<=Math.pow((v+2*U)*this.radius,2)},draw:function(h,f,v,m,k){t.arrowShapeImpl(this.name)(h,m.x,m.y,this.radius*f)},spacing:function(h){return t.getArrowWidth(h.pstyle("width").pfValue,h.pstyle("arrow-scale").value)*this.radius}}),o("tee",{points:[-.15,0,-.15,-.1,.15,-.1,.15,0],spacing:function(h){return 1},gap:function(h){return 1}}),o("square",{points:[-.15,0,.15,0,.15,-.3,-.15,-.3]}),o("diamond",{points:[-.15,-.15,0,-.3,.15,-.15,0,0],gap:function(h){return h.pstyle("width").pfValue*h.pstyle("arrow-scale").value}}),o("chevron",{points:[0,0,-.15,-.15,-.1,-.2,0,-.1,.1,-.2,.15,-.15],gap:function(h){return.95*h.pstyle("width").pfValue*h.pstyle("arrow-scale").value}})}},Ss={projectIntoViewport:function(e,t){var r=this.cy,a=this.findContainerClientCoords(),i=a[0],n=a[1],s=a[4],o=r.pan(),u=r.zoom();return[((e-i)/s-o.x)/u,((t-n)/s-o.y)/u]},findContainerClientCoords:function(){if(this.containerBB)return this.containerBB;var e=this.container,t=e.getBoundingClientRect(),r=this.cy.window().getComputedStyle(e),a=function(K){return parseFloat(r.getPropertyValue(K))},i_left=a("padding-left"),i_right=a("padding-right"),i_top=a("padding-top"),i_bottom=a("padding-bottom"),n_left=a("border-left-width"),n_right=a("border-right-width"),n_top=a("border-top-width"),s=(a("border-bottom-width"),e.clientWidth);return this.containerBB=[t.left+i_left+n_left,t.top+i_top+n_top,s-(i_left+i_right),e.clientHeight-(i_top+i_bottom),t.width/(s+(n_left+n_right))]},invalidateContainerClientCoordsCache:function(){this.containerBB=null},findNearestElement:function(e,t,r,a){return this.findNearestElements(e,t,r,a)[0]},findNearestElements:function(e,t,r,a){var _,U,i=this,n=this,s=n.getCachedZSortedEles(),o=[],u=n.cy.zoom(),h=n.cy.hasCompoundNodes(),f=(a?24:8)/u,v=(a?8:2)/u,m=(a?8:2)/u,k=1/0;function I(Yt,he){if(Yt.isNode()){if(U)return;U=Yt,o.push(Yt)}if(Yt.isEdge()&&(null==he||he<k))if(_){if(_.pstyle("z-compound-depth").value===Yt.pstyle("z-compound-depth").value&&_.pstyle("z-compound-depth").value===Yt.pstyle("z-compound-depth").value)for(var be=0;be<o.length;be++)if(o[be].isEdge()){o[be]=Yt,_=Yt,k=he??k;break}}else o.push(Yt),_=Yt,k=he??k}function K(Yt){var he=Yt.outerWidth()+2*v,be=Yt.outerHeight()+2*v,Se=he/2,De=be/2,Oe=Yt.position(),Ne="auto"===Yt.pstyle("corner-radius").value?"auto":Yt.pstyle("corner-radius").pfValue,Je=Yt._private.rscratch;if(Oe.x-Se<=e&&e<=Oe.x+Se&&Oe.y-De<=t&&t<=Oe.y+De&&n.nodeShapes[i.getNodeShape(Yt)].checkPoint(e,t,0,he,be,Oe.x,Oe.y,Ne,Je))return I(Yt,0),!0}function Y(Yt){var dr,he=Yt._private,be=he.rscratch,Se=Yt.pstyle("width").pfValue,De=Yt.pstyle("arrow-scale").value,Oe=Se/2+f,Ne=Oe*Oe,Je=2*Oe,Sr=he.source,Ur=he.target;if("segments"===be.edgeType||"straight"===be.edgeType||"haystack"===be.edgeType){for(var gr=be.allpts,ar=0;ar+3<gr.length;ar+=2)if(Ie(e,t,gr[ar],gr[ar+1],gr[ar+2],gr[ar+3],Je)&&Ne>(dr=aa(e,t,gr[ar],gr[ar+1],gr[ar+2],gr[ar+3])))return I(Yt,dr),!0}else if("bezier"===be.edgeType||"multibezier"===be.edgeType||"self"===be.edgeType||"compound"===be.edgeType)for(gr=be.allpts,ar=0;ar+5<be.allpts.length;ar+=4)if(Qt(e,t,gr[ar],gr[ar+1],gr[ar+2],gr[ar+3],gr[ar+4],gr[ar+5],Je)&&Ne>(dr=Dr(e,t,gr[ar],gr[ar+1],gr[ar+2],gr[ar+3],gr[ar+4],gr[ar+5])))return I(Yt,dr),!0;Sr=Sr||he.source,Ur=Ur||he.target;var jr=i.getArrowWidth(Se,De),Mr=[{name:"source",x:be.arrowStartX,y:be.arrowStartY,angle:be.srcArrowAngle},{name:"target",x:be.arrowEndX,y:be.arrowEndY,angle:be.tgtArrowAngle},{name:"mid-source",x:be.midX,y:be.midY,angle:be.midsrcArrowAngle},{name:"mid-target",x:be.midX,y:be.midY,angle:be.midtgtArrowAngle}];for(ar=0;ar<Mr.length;ar++){var Wr=Mr[ar],pa=n.arrowShapes[Yt.pstyle(Wr.name+"-arrow-shape").value],Ea=Yt.pstyle("width").pfValue;if(pa.roughCollide(e,t,jr,Wr.angle,{x:Wr.x,y:Wr.y},Ea,f)&&pa.collide(e,t,jr,Wr.angle,{x:Wr.x,y:Wr.y},Ea,f))return I(Yt),!0}h&&o.length>0&&(K(Sr),K(Ur))}function X(Yt,he,be){return jt(Yt,he,be)}function mt(Yt,he){var De,be=Yt._private,Se=m;De=he?he+"-":"",Yt.boundingBox();var Oe=be.labelBounds[he||"main"],Ne=Yt.pstyle(De+"label").value;if("yes"===Yt.pstyle("text-events").strValue&&Ne){var dr=X(be.rscratch,"labelX",he),gr=X(be.rscratch,"labelY",he),ar=X(be.rscratch,"labelAngle",he),Sr=Yt.pstyle(De+"text-margin-x").pfValue,Ur=Yt.pstyle(De+"text-margin-y").pfValue,jr=Oe.x1-Se-Sr,Mr=Oe.x2+Se-Sr,Wr=Oe.y1-Se-Ur,pa=Oe.y2+Se-Ur;if(ar){var Ea=Math.cos(ar),va=Math.sin(ar),Aa=function(xa,Ga){return{x:(xa-=dr)*Ea-(Ga-=gr)*va+dr,y:xa*va+Ga*Ea+gr}},Ia=Aa(jr,Wr),Qa=Aa(jr,pa),Ta=Aa(Mr,Wr),Kr=Aa(Mr,pa);if(Nr(e,t,[Ia.x+Sr,Ia.y+Ur,Ta.x+Sr,Ta.y+Ur,Kr.x+Sr,Kr.y+Ur,Qa.x+Sr,Qa.y+Ur]))return I(Yt),!0}else if(Ae(Oe,e,t))return I(Yt),!0}}r&&(s=s.interactive);for(var ie=s.length-1;ie>=0;ie--){var se=s[ie];se.isNode()?K(se)||mt(se):Y(se)||mt(se)||mt(se,"source")||mt(se,"target")}return o},getAllInBox:function(e,t,r,a){var i=this.getCachedZSortedEles().interactive,s=2/this.cy.zoom(),o=[],u=Math.min(e,r),h=Math.max(e,r),f=Math.min(t,a),v=Math.max(t,a),m=Tt({x1:e=u,y1:t=f,x2:r=h,y2:a=v}),k=[{x:m.x1,y:m.y1},{x:m.x2,y:m.y1},{x:m.x2,y:m.y2},{x:m.x1,y:m.y2}],_=[[k[0],k[1]],[k[1],k[2]],[k[2],k[3]],[k[3],k[0]]];function U(xa,Ga,li){return jt(xa,Ga,li)}function I(xa,Ga){var li=xa._private,Mi=s;xa.boundingBox();var xi=li.labelBounds.main;if(!xi)return null;var gi=U(li.rscratch,"labelX",Ga),Ja=U(li.rscratch,"labelY",Ga),ci=U(li.rscratch,"labelAngle",Ga),ui=xa.pstyle("text-margin-x").pfValue,_i=xa.pstyle("text-margin-y").pfValue,fi=xi.x1-Mi-ui,wi=xi.x2+Mi-ui,Ii=xi.y1-Mi-_i,Yi=xi.y2+Mi-_i;if(ci){var Hi=Math.cos(ci),Gi=Math.sin(ci),bi=function(ya,ve){return{x:(ya-=gi)*Hi-(ve-=Ja)*Gi+gi,y:ya*Gi+ve*Hi+Ja}};return[bi(fi,Ii),bi(wi,Ii),bi(wi,Yi),bi(fi,Yi)]}return[{x:fi,y:Ii},{x:wi,y:Ii},{x:wi,y:Yi},{x:fi,y:Yi}]}function K(xa,Ga,li,Mi){function Ci(xi,gi,Ja){return(Ja.y-xi.y)*(gi.x-xi.x)>(gi.y-xi.y)*(Ja.x-xi.x)}return Ci(xa,li,Mi)!==Ci(Ga,li,Mi)&&Ci(xa,Ga,li)!==Ci(xa,Ga,Mi)}for(var Y=0;Y<i.length;Y++){var X=i[Y];if(X.isNode()){var mt=X,ie="yes"===mt.pstyle("text-events").strValue,se=mt.pstyle("box-selection").strValue,Yt="yes"===mt.pstyle("box-select-labels").strValue;if("none"===se)continue;var be=mt.boundingBox({includeNodes:!0,includeEdges:!1,includeLabels:("overlap"===se||Yt)&&ie});if("contain"===se){var Se=!1;if(Yt&&ie){var De=I(mt);De&&ml(De,k)&&(o.push(mt),Se=!0)}!Se&&l(m,be)&&o.push(mt)}else if("overlap"===se&&pe(m,be)){var Oe=mt.boundingBox({includeNodes:!0,includeEdges:!0,includeLabels:!1,includeMainLabels:!1,includeSourceLabels:!1,includeTargetLabels:!1});if(ml([{x:Oe.x1,y:Oe.y1},{x:Oe.x2,y:Oe.y1},{x:Oe.x2,y:Oe.y2},{x:Oe.x1,y:Oe.y2}],k))o.push(mt);else{var Je=I(mt);Je&&ml(Je,k)&&o.push(mt)}}}else{var dr=X,gr=dr._private,ar=gr.rscratch,Sr=dr.pstyle("box-selection").strValue;if("none"===Sr)continue;if("contain"===Sr){if(null!=ar.startX&&null!=ar.startY&&!Ae(m,ar.startX,ar.startY)||null!=ar.endX&&null!=ar.endY&&!Ae(m,ar.endX,ar.endY))continue;if("bezier"===ar.edgeType||"multibezier"===ar.edgeType||"self"===ar.edgeType||"compound"===ar.edgeType||"segments"===ar.edgeType||"haystack"===ar.edgeType){for(var Ur=gr.rstyle.bezierPts||gr.rstyle.linePts||gr.rstyle.haystackPts,jr=!0,Mr=0;Mr<Ur.length;Mr++)if(!tt(m,Ur[Mr])){jr=!1;break}jr&&o.push(dr)}else"straight"===ar.edgeType&&o.push(dr)}else if("overlap"===Sr){var Wr=!1;if(null!=ar.startX&&null!=ar.startY&&null!=ar.endX&&null!=ar.endY&&(Ae(m,ar.startX,ar.startY)||Ae(m,ar.endX,ar.endY)))o.push(dr),Wr=!0;else if(!Wr&&"haystack"===ar.edgeType)for(var pa=gr.rstyle.haystackPts,Ea=0;Ea<pa.length;Ea++)if(tt(m,pa[Ea])){o.push(dr),Wr=!0;break}if(!Wr){var va=gr.rstyle.bezierPts||gr.rstyle.linePts||gr.rstyle.haystackPts;if((!va||va.length<2)&&"straight"===ar.edgeType&&null!=ar.startX&&null!=ar.startY&&null!=ar.endX&&null!=ar.endY&&(va=[{x:ar.startX,y:ar.startY},{x:ar.endX,y:ar.endY}]),!va||va.length<2)continue;for(var Aa=0;Aa<va.length-1;Aa++){for(var Ia=va[Aa],Qa=va[Aa+1],Ta=0;Ta<_.length;Ta++){var Kr=Xt(_[Ta],2);if(K(Ia,Qa,Kr[0],Kr[1])){o.push(dr),Wr=!0;break}}if(Wr)break}}}}}return o}},al={calculateArrowAngles:function(e){var u,h,f,v,m,k,t=e._private.rscratch,r="haystack"===t.edgeType,a="bezier"===t.edgeType,i="multibezier"===t.edgeType,n="segments"===t.edgeType,s="compound"===t.edgeType,o="self"===t.edgeType;r?(f=t.haystackPts[0],v=t.haystackPts[1],m=t.haystackPts[2],k=t.haystackPts[3]):(f=t.arrowStartX,v=t.arrowStartY,m=t.arrowEndX,k=t.arrowEndY),K=t.midX,Y=t.midY,n?(u=f-t.segpts[0],h=v-t.segpts[1]):i||s||o||a?(u=f-Gt((_=t.allpts)[0],_[2],_[4],.1),h=v-Gt(_[1],_[3],_[5],.1)):(u=f-K,h=v-Y),t.srcArrowAngle=kn(u,h);var K=t.midX,Y=t.midY;if(r&&(K=(f+m)/2,Y=(v+k)/2),u=m-f,h=k-v,n)if((_=t.allpts).length/2%2==0)u=_[X=_.length/2]-_[mt=X-2],h=_[X+1]-_[mt+1];else if(t.isRound)u=t.midVector[1],h=-t.midVector[0];else{var mt;u=_[X=_.length/2-1]-_[mt=X-2],h=_[X+1]-_[mt+1]}else if(i||s||o){var se,Yt,he,be,De,Se,Oe,_=t.allpts;t.ctrlpts.length/2%2==0?(se=Gt(_[Se=_.length/2-1],_[De=Se+2],_[Oe=De+2],0),Yt=Gt(_[Se+1],_[De+1],_[Oe+1],0),he=Gt(_[Se],_[De],_[Oe],1e-4),be=Gt(_[Se+1],_[De+1],_[Oe+1],1e-4)):(se=Gt(_[Se=(De=_.length/2-1)-2],_[De],_[Oe=De+2],.4999),Yt=Gt(_[Se+1],_[De+1],_[Oe+1],.4999),he=Gt(_[Se],_[De],_[Oe],.5),be=Gt(_[Se+1],_[De+1],_[Oe+1],.5)),u=he-se,h=be-Yt}if(t.midtgtArrowAngle=kn(u,h),t.midDispX=u,t.midDispY=h,u*=-1,h*=-1,n&&(_=t.allpts).length/2%2!=0&&!t.isRound){var X,Ne=2+(X=_.length/2-1);u=-(_[Ne]-_[X]),h=-(_[Ne+1]-_[X+1])}if(t.midsrcArrowAngle=kn(u,h),n)u=m-t.segpts[t.segpts.length-2],h=k-t.segpts[t.segpts.length-1];else if(i||s||o||a){var Je=(_=t.allpts).length;u=m-Gt(_[Je-6],_[Je-4],_[Je-2],.9),h=k-Gt(_[Je-5],_[Je-3],_[Je-1],.9)}else u=m-K,h=k-Y;t.tgtArrowAngle=kn(u,h)}};al.getArrowWidth=al.getArrowHeight=function(e,t){var r=this.arrowWidthCache=this.arrowWidthCache||{},a=r[e+", "+t];return a||(a=Math.max(Math.pow(13.37*e,.9),29)*t,r[e+", "+t]=a,a)};var Kc,Wc,Id,ws,il,ls,As,Ds,as,qs,nl,Od,Nd,zc,Vc,Fd,rs={},qn={},Kd=function(t,r,a){a.x=r.x-t.x,a.y=r.y-t.y,a.len=Math.sqrt(a.x*a.x+a.y*a.y),a.nx=a.x/a.len,a.ny=a.y/a.len,a.ang=Math.atan2(a.ny,a.nx)};function Wd(e,t){0===t.radius?e.lineTo(t.cx,t.cy):e.arc(t.cx,t.cy,t.radius,t.startAngle,t.endAngle,t.counterClockwise)}function Uc(e,t,r,a){return 0===a||0===t.radius?{cx:t.x,cy:t.y,radius:0,startX:t.x,startY:t.y,stopX:t.x,stopY:t.y,startAngle:void 0,endAngle:void 0,counterClockwise:void 0}:(function(t,r,a,i,n){if(t!==Fd?Kd(r,t,rs):function(t,r){r.x=-1*t.x,r.y=-1*t.y,r.nx=-1*t.nx,r.ny=-1*t.ny,r.ang=t.ang>0?-(Math.PI-t.ang):Math.PI+t.ang}(qn,rs),Kd(r,a,qn),Id=rs.nx*qn.nx-rs.ny*-qn.ny,ls=Math.asin(Math.max(-1,Math.min(1,rs.nx*qn.ny-rs.ny*qn.nx))),Math.abs(ls)<1e-6)return Kc=r.x,Wc=r.y,void(Ds=qs=0);ws=1,il=!1,Id<0?ls<0?ls=Math.PI+ls:(ls=Math.PI-ls,ws=-1,il=!0):ls>0&&(ws=-1,il=!0),qs=void 0!==r.radius?r.radius:i,As=ls/2,nl=Math.min(rs.len/2,qn.len/2),n?(as=Math.abs(Math.cos(As)*qs/Math.sin(As)))>nl?(as=nl,Ds=Math.abs(as*Math.sin(As)/Math.cos(As))):Ds=qs:(as=Math.min(nl,qs),Ds=Math.abs(as*Math.sin(As)/Math.cos(As))),Kc=(zc=r.x+qn.nx*as)-qn.ny*Ds*ws,Wc=(Vc=r.y+qn.ny*as)+qn.nx*Ds*ws,Od=r.x+rs.nx*as,Nd=r.y+rs.ny*as,Fd=r}(e,t,r,a,!(arguments.length>4&&void 0!==arguments[4])||arguments[4]),{cx:Kc,cy:Wc,radius:Ds,startX:Od,startY:Nd,stopX:zc,stopY:Vc,startAngle:rs.ang+Math.PI/2*ws,endAngle:qn.ang-Math.PI/2*ws,counterClockwise:il})}var Q1=Math.sqrt(.02),In={};function zd(e){var t=[];if(null!=e){for(var r=0;r<e.length;r+=2)t.push({x:e[r],y:e[r+1]});return t}}In.findMidptPtsEtc=function(e,t){var n,be,Se,De,r=t.posPts,a=t.intersectionPts,i=t.vectorNormInverse,s=e.pstyle("source-endpoint"),o=e.pstyle("target-endpoint"),u=null!=s.units&&null!=o.units;switch(e.pstyle("edge-distances").value){case"node-position":n=r;break;case"intersection":n=a;break;case"endpoints":if(u){var m=Xt(this.manualEndptToPx(e.source()[0],s),2),k=m[0],_=m[1],I=Xt(this.manualEndptToPx(e.target()[0],o),2),K=I[0],Y=I[1],X={x1:k,y1:_,x2:K,y2:Y};Se=K-k,i={x:-(be=Y-_)/(De=Math.sqrt(Se*Se+be*be)),y:Se/De},n=X}else Sa("Edge ".concat(e.id()," has edge-distances:endpoints specified without manual endpoints specified via source-endpoint and target-endpoint.  Falling back on edge-distances:intersection (default).")),n=a}return{midptPts:n,vectorNormInverse:i}},In.findHaystackPoints=function(e){for(var t=0;t<e.length;t++){var r=e[t],a=r._private,i=a.rscratch;if(!i.haystack){var n=2*Math.random()*Math.PI;i.source={x:Math.cos(n),y:Math.sin(n)},n=2*Math.random()*Math.PI,i.target={x:Math.cos(n),y:Math.sin(n)}}var s=a.source,o=a.target,u=s.position(),h=o.position(),f=s.width(),v=o.width(),m=s.height(),k=o.height(),U=r.pstyle("haystack-radius").value/2;i.haystackPts=i.allpts=[i.source.x*f*U+u.x,i.source.y*m*U+u.y,i.target.x*v*U+h.x,i.target.y*k*U+h.y],i.midX=(i.allpts[0]+i.allpts[2])/2,i.midY=(i.allpts[1]+i.allpts[3])/2,i.edgeType="haystack",i.haystack=!0,this.storeEdgeProjections(r),this.calculateArrowAngles(r),this.recalculateEdgeLabelProjections(r),this.calculateLabelAngles(r)}},In.findSegmentsPoints=function(e,t){var r=e._private.rscratch,a=e.pstyle("segment-weights"),i=e.pstyle("segment-distances"),n=e.pstyle("segment-radii"),s=e.pstyle("radius-type"),o=Math.min(a.pfValue.length,i.pfValue.length),u=n.pfValue[n.pfValue.length-1],h=s.pfValue[s.pfValue.length-1];r.edgeType="segments",r.segpts=[],r.radii=[],r.isArcRadius=[];for(var f=0;f<o;f++){var v=a.pfValue[f],m=i.pfValue[f],k=1-v,_=v,U=this.findMidptPtsEtc(e,t),I=U.midptPts,K=U.vectorNormInverse,Y={x:I.x1*k+I.x2*_,y:I.y1*k+I.y2*_};r.segpts.push(Y.x+K.x*m,Y.y+K.y*m),r.radii.push(void 0!==n.pfValue[f]?n.pfValue[f]:u),r.isArcRadius.push("arc-radius"===(void 0!==s.pfValue[f]?s.pfValue[f]:h))}},In.findLoopPoints=function(e,t,r,a){var i=e._private.rscratch,n=t.dirCounts,s=t.srcPos,o=e.pstyle("control-point-distances"),u=o?o.pfValue[0]:void 0,h=e.pstyle("loop-direction").pfValue,f=e.pstyle("loop-sweep").pfValue,v=e.pstyle("control-point-step-size").pfValue;i.edgeType="self";var m=r,k=v;a&&(m=0,k=u);var _=h-Math.PI/2,U=_-f/2,I=_+f/2,K=h+"_"+f;m=void 0===n[K]?n[K]=0:++n[K],i.ctrlpts=[s.x+1.4*Math.cos(U)*k*(m/3+1),s.y+1.4*Math.sin(U)*k*(m/3+1),s.x+1.4*Math.cos(I)*k*(m/3+1),s.y+1.4*Math.sin(I)*k*(m/3+1)]},In.findCompoundLoopPoints=function(e,t,r,a){var i=e._private.rscratch;i.edgeType="compound";var n=t.srcPos,s=t.tgtPos,o=t.srcW,u=t.srcH,h=t.tgtW,f=t.tgtH,v=e.pstyle("control-point-step-size").pfValue,m=e.pstyle("control-point-distances"),_=r,U=v;a&&(_=0,U=m?m.pfValue[0]:void 0);var K={x:n.x-o/2,y:n.y-u/2},Y={x:s.x-h/2,y:s.y-f/2},X={x:Math.min(K.x,Y.x),y:Math.min(K.y,Y.y)},ie=Math.max(.5,Math.log(.01*o)),se=Math.max(.5,Math.log(.01*h));i.ctrlpts=[X.x,X.y-(1+Math.pow(50,1.12)/100)*U*(_/3+1)*ie,X.x-(1+Math.pow(50,1.12)/100)*U*(_/3+1)*se,X.y]},In.findStraightEdgePoints=function(e){e._private.rscratch.edgeType="straight"},In.findBezierPoints=function(e,t,r,a,i){var n=e._private.rscratch,s=e.pstyle("control-point-step-size").pfValue,o=e.pstyle("control-point-distances"),u=e.pstyle("control-point-weights"),h=o&&u?Math.min(o.value.length,u.value.length):1,f=o?o.pfValue[0]:void 0,v=u.value[0],m=a;n.edgeType=m?"multibezier":"bezier",n.ctrlpts=[];for(var k=0;k<h;k++){var U,_=(.5-t.eles.length/2+r)*s*(i?-1:1),I=un(_);m&&(f=o?o.pfValue[k]:s,v=u.value[k]);var K=void 0!==(U=a?f:void 0!==f?I*f:void 0)?U:_,Y=1-v,X=v,mt=this.findMidptPtsEtc(e,t),ie=mt.midptPts,se=mt.vectorNormInverse,Yt={x:ie.x1*Y+ie.x2*X,y:ie.y1*Y+ie.y2*X};n.ctrlpts.push(Yt.x+se.x*K,Yt.y+se.y*K)}},In.findTaxiPoints=function(e,t){var r=e._private.rscratch;r.edgeType="segments";var a="vertical",i="horizontal",n="leftward",s="rightward",o="downward",u="upward",f=t.posPts,v=t.srcW,m=t.srcH,k=t.tgtW,_=t.tgtH,I="node-position"!==e.pstyle("edge-distances").value,K=e.pstyle("taxi-direction").value,Y=K,X=e.pstyle("taxi-turn"),mt="%"===X.units,ie=X.pfValue,se=ie<0,Yt=e.pstyle("taxi-turn-min-distance").pfValue,be=I?(m+_)/2:0,Se=f.x2-f.x1,De=f.y2-f.y1,Oe=function(ve,Hr){return ve>0?Math.max(ve-Hr,0):Math.min(ve+Hr,0)},Ne=Oe(Se,I?(v+k)/2:0),Je=Oe(De,be),dr=!1;"auto"===Y?K=Math.abs(Ne)>Math.abs(Je)?i:a:Y===u||Y===o?(K=a,dr=!0):(Y===n||Y===s)&&(K=i,dr=!0);var Mr,gr=K===a,ar=gr?Je:Ne,Sr=gr?De:Se,Ur=un(Sr),jr=!1;(!dr||!mt&&!se)&&(Y===o&&Sr<0||Y===u&&Sr>0||Y===n&&Sr>0||Y===s&&Sr<0)&&(ar=(Ur*=-1)*Math.abs(ar),jr=!0);var Ea=function(ve){return Math.abs(ve)<Yt||Math.abs(ve)>=Math.abs(ar)},va=Ea(Mr=mt?(ie<0?1+ie:ie)*ar:(ie<0?ar:0)+ie*Ur),Aa=Ea(Math.abs(ar)-Math.abs(Mr));if(!va&&!Aa||jr)if(gr){var fi=f.y1+Mr+(I?m/2*Ur:0);r.segpts=[f.x1,fi,f.x2,fi]}else{var Yi=f.x1+Mr+(I?v/2*Ur:0);r.segpts=[Yi,f.y1,Yi,f.y2]}else if(gr){var Qa=Math.abs(Sr)<=m/2,Ta=Math.abs(Se)<=k/2;if(Qa){var Kr=(f.x1+f.x2)/2;r.segpts=[Kr,f.y1,Kr,f.y2]}else if(Ta){var xa=(f.y1+f.y2)/2;r.segpts=[f.x1,xa,f.x2,xa]}else r.segpts=[f.x1,f.y2]}else{var Mi=Math.abs(Sr)<=v/2,Ci=Math.abs(De)<=_/2;if(Mi){var xi=(f.y1+f.y2)/2;r.segpts=[f.x1,xi,f.x2,xi]}else if(Ci){var ci=(f.x1+f.x2)/2;r.segpts=[ci,f.y1,ci,f.y2]}else r.segpts=[f.x2,f.y1]}if(r.isRound){var bi=e.pstyle("taxi-radius").value,ai="arc-radius"===e.pstyle("radius-type").value[0];r.radii=new Array(r.segpts.length/2).fill(bi),r.isArcRadius=new Array(r.segpts.length/2).fill(ai)}},In.tryToCorrectInvalidPoints=function(e,t){var r=e._private.rscratch;if("bezier"===r.edgeType){var a=t.srcPos,i=t.tgtPos,n=t.srcW,s=t.srcH,o=t.tgtW,u=t.tgtH,h=t.srcShape,f=t.tgtShape,v=t.srcCornerRadius,m=t.tgtCornerRadius,k=t.srcRs,_=t.tgtRs,U=!Z(r.startX)||!Z(r.startY),I=!Z(r.arrowStartX)||!Z(r.arrowStartY),K=!Z(r.endX)||!Z(r.endY),Y=!Z(r.arrowEndX)||!Z(r.arrowEndY),ie=this.getArrowWidth(e.pstyle("width").pfValue,e.pstyle("arrow-scale").value)*this.arrowShapeWidth*3,se=Xi({x:r.ctrlpts[0],y:r.ctrlpts[1]},{x:r.startX,y:r.startY}),Yt=se<ie,he=Xi({x:r.ctrlpts[0],y:r.ctrlpts[1]},{x:r.endX,y:r.endY}),be=he<ie,Se=!1;if(U||I||Yt){Se=!0;var De={x:r.ctrlpts[0]-a.x,y:r.ctrlpts[1]-a.y},Oe=Math.sqrt(De.x*De.x+De.y*De.y),Ne={x:De.x/Oe,y:De.y/Oe},Je=Math.max(n,s),dr={x:r.ctrlpts[0]+2*Ne.x*Je,y:r.ctrlpts[1]+2*Ne.y*Je},gr=h.intersectLine(a.x,a.y,n,s,dr.x,dr.y,0,v,k);Yt?(r.ctrlpts[0]=r.ctrlpts[0]+Ne.x*(ie-se),r.ctrlpts[1]=r.ctrlpts[1]+Ne.y*(ie-se)):(r.ctrlpts[0]=gr[0]+Ne.x*ie,r.ctrlpts[1]=gr[1]+Ne.y*ie)}if(K||Y||be){Se=!0;var ar={x:r.ctrlpts[0]-i.x,y:r.ctrlpts[1]-i.y},Sr=Math.sqrt(ar.x*ar.x+ar.y*ar.y),Ur={x:ar.x/Sr,y:ar.y/Sr},jr=Math.max(n,s),Mr={x:r.ctrlpts[0]+2*Ur.x*jr,y:r.ctrlpts[1]+2*Ur.y*jr},Wr=f.intersectLine(i.x,i.y,o,u,Mr.x,Mr.y,0,m,_);be?(r.ctrlpts[0]=r.ctrlpts[0]+Ur.x*(ie-he),r.ctrlpts[1]=r.ctrlpts[1]+Ur.y*(ie-he)):(r.ctrlpts[0]=Wr[0]+Ur.x*ie,r.ctrlpts[1]=Wr[1]+Ur.y*ie)}Se&&this.findEndpoints(e)}},In.storeAllpts=function(e){var t=e._private.rscratch;if("multibezier"===t.edgeType||"bezier"===t.edgeType||"self"===t.edgeType||"compound"===t.edgeType){t.allpts=[],t.allpts.push(t.startX,t.startY);for(var r=0;r+1<t.ctrlpts.length;r+=2)t.allpts.push(t.ctrlpts[r],t.ctrlpts[r+1]),r+3<t.ctrlpts.length&&t.allpts.push((t.ctrlpts[r]+t.ctrlpts[r+2])/2,(t.ctrlpts[r+1]+t.ctrlpts[r+3])/2);var a;t.allpts.push(t.endX,t.endY),t.ctrlpts.length/2%2==0?(t.midX=t.allpts[a=t.allpts.length/2-1],t.midY=t.allpts[a+1]):(t.midX=Gt(t.allpts[a=t.allpts.length/2-3],t.allpts[a+2],t.allpts[a+4],.5),t.midY=Gt(t.allpts[a+1],t.allpts[a+3],t.allpts[a+5],.5))}else if("straight"===t.edgeType)t.allpts=[t.startX,t.startY,t.endX,t.endY],t.midX=(t.startX+t.endX+t.arrowStartX+t.arrowEndX)/4,t.midY=(t.startY+t.endY+t.arrowStartY+t.arrowEndY)/4;else if("segments"===t.edgeType){if(t.allpts=[],t.allpts.push(t.startX,t.startY),t.allpts.push.apply(t.allpts,t.segpts),t.allpts.push(t.endX,t.endY),t.isRound){t.roundCorners=[];for(var n=2;n+3<t.allpts.length;n+=2){var s=t.radii[n/2-1];t.roundCorners.push(Uc({x:t.allpts[n-2],y:t.allpts[n-1]},{x:t.allpts[n],y:t.allpts[n+1],radius:s},{x:t.allpts[n+2],y:t.allpts[n+3]},s,t.isArcRadius[n/2-1]))}}if(t.segpts.length%4==0){var u=t.segpts.length/2,h=u-2;t.midX=(t.segpts[h]+t.segpts[u])/2,t.midY=(t.segpts[h+1]+t.segpts[u+1])/2}else{var f=t.segpts.length/2-1;if(t.isRound){var v={x:t.segpts[f],y:t.segpts[f+1]},m=t.roundCorners[f/2];if(0===m.radius){var k={x:t.segpts[f+2],y:t.segpts[f+3]};t.midX=v.x,t.midY=v.y,t.midVector=[v.y-k.y,k.x-v.x]}else{var _=[v.x-m.cx,v.y-m.cy],U=m.radius/Math.sqrt(Math.pow(_[0],2)+Math.pow(_[1],2));_=_.map(function(I){return I*U}),t.midX=m.cx+_[0],t.midY=m.cy+_[1],t.midVector=_}}else t.midX=t.segpts[f],t.midY=t.segpts[f+1]}}},In.checkForInvalidEdgeWarning=function(e){var t=e[0]._private.rscratch;t.nodesOverlap||Z(t.startX)&&Z(t.startY)&&Z(t.endX)&&Z(t.endY)?t.loggedErr=!1:t.loggedErr||(t.loggedErr=!0,Sa("Edge `"+e.id()+"` has invalid endpoints and so it is impossible to draw.  Adjust your edge style (e.g. control points) accordingly or use an alternative edge type.  This is expected behaviour when the source node and the target node overlap."))},In.findEdgeControlPoints=function(e){var t=this;if(e&&0!==e.length){for(var r=this,i=r.cy.hasCompoundNodes(),n=new Lt,s=function(be,Se){return[].concat(j(be),[Se?1:0]).join("-")},o=[],u=[],h=0;h<e.length;h++){var f=e[h],v=f._private,m=f.pstyle("curve-style").value;if(!f.removed()&&f.takesUpSpace()){if("haystack"===m){u.push(f);continue}var k="unbundled-bezier"===m||St(m,"segments")||"straight"===m||"straight-triangle"===m||St(m,"taxi"),_="unbundled-bezier"===m||"bezier"===m,I=v.target,X=[v.source.poolIndex(),I.poolIndex()].sort(),mt=s(X,k),ie=n.get(mt);null==ie&&(ie={eles:[]},o.push({pairId:X,edgeIsUnbundled:k}),n.set(mt,ie)),ie.eles.push(f),k&&(ie.hasUnbundled=!0),_&&(ie.hasBezier=!0)}}for(var se=function(){var Je,be=o[Yt],Oe=s(be.pairId,be.edgeIsUnbundled),Ne=n.get(Oe);if(!Ne.hasUnbundled){var dr=Ne.eles[0].parallelEdges().filter(function(ai){return ai.isBundledBezier()});Dt(Ne.eles),dr.forEach(function(ai){return Ne.eles.push(ai)}),Ne.eles.sort(function(ai,ya){return ai.poolIndex()-ya.poolIndex()})}var gr=Ne.eles[0],ar=gr.source(),Sr=gr.target();if(ar.poolIndex()>Sr.poolIndex()){var Ur=ar;ar=Sr,Sr=Ur}var jr=Ne.srcPos=ar.position(),Mr=Ne.tgtPos=Sr.position(),Wr=Ne.srcW=ar.outerWidth(),pa=Ne.srcH=ar.outerHeight(),Ea=Ne.tgtW=Sr.outerWidth(),va=Ne.tgtH=Sr.outerHeight(),Aa=Ne.srcShape=r.nodeShapes[t.getNodeShape(ar)],Ia=Ne.tgtShape=r.nodeShapes[t.getNodeShape(Sr)],Qa=Ne.srcCornerRadius="auto"===ar.pstyle("corner-radius").value?"auto":ar.pstyle("corner-radius").pfValue,Ta=Ne.tgtCornerRadius="auto"===Sr.pstyle("corner-radius").value?"auto":Sr.pstyle("corner-radius").pfValue,Kr=Ne.tgtRs=Sr._private.rscratch,$r=Ne.srcRs=ar._private.rscratch;Ne.dirCounts={north:0,west:0,south:0,east:0,northwest:0,southwest:0,northeast:0,southeast:0};for(var ea=0;ea<Ne.eles.length;ea++){var xa=Ne.eles[ea],Ga=xa[0]._private.rscratch,li=xa.pstyle("curve-style").value,Mi="unbundled-bezier"===li||St(li,"segments")||St(li,"taxi"),Ci=!ar.same(xa.source());if(!Ne.calculatedIntersection&&ar!==Sr&&(Ne.hasBezier||Ne.hasUnbundled)){Ne.calculatedIntersection=!0;var xi=Aa.intersectLine(jr.x,jr.y,Wr,pa,Mr.x,Mr.y,0,Qa,$r),gi=Ne.srcIntn=xi,Ja=Ia.intersectLine(Mr.x,Mr.y,Ea,va,jr.x,jr.y,0,Ta,Kr),ci=Ne.tgtIntn=Ja,ui=Ne.intersectionPts={x1:xi[0],x2:Ja[0],y1:xi[1],y2:Ja[1]},_i=Ne.posPts={x1:jr.x,x2:Mr.x,y1:jr.y,y2:Mr.y},fi=Ja[1]-xi[1],wi=Ja[0]-xi[0],Ii=Math.sqrt(wi*wi+fi*fi);Z(Ii)&&Ii>=Q1||(Ii=Math.sqrt(Math.max(wi*wi,.01)+Math.max(fi*fi,.01)));var Yi=Ne.vector={x:wi,y:fi},Hi=Ne.vectorNorm={x:Yi.x/Ii,y:Yi.y/Ii},Gi={x:-Hi.y,y:Hi.x};Ne.nodesOverlap=!Z(Ii)||Ia.checkPoint(xi[0],xi[1],0,Ea,va,Mr.x,Mr.y,Ta,Kr)||Aa.checkPoint(Ja[0],Ja[1],0,Wr,pa,jr.x,jr.y,Qa,$r),Ne.vectorNormInverse=Gi,Je={nodesOverlap:Ne.nodesOverlap,dirCounts:Ne.dirCounts,calculatedIntersection:!0,hasBezier:Ne.hasBezier,hasUnbundled:Ne.hasUnbundled,eles:Ne.eles,srcPos:Mr,srcRs:Kr,tgtPos:jr,tgtRs:$r,srcW:Ea,srcH:va,tgtW:Wr,tgtH:pa,srcIntn:ci,tgtIntn:gi,srcShape:Ia,tgtShape:Aa,posPts:{x1:_i.x2,y1:_i.y2,x2:_i.x1,y2:_i.y1},intersectionPts:{x1:ui.x2,y1:ui.y2,x2:ui.x1,y2:ui.y1},vector:{x:-Yi.x,y:-Yi.y},vectorNorm:{x:-Hi.x,y:-Hi.y},vectorNormInverse:{x:-Gi.x,y:-Gi.y}}}var bi=Ci?Je:Ne;Ga.nodesOverlap=bi.nodesOverlap,Ga.srcIntn=bi.srcIntn,Ga.tgtIntn=bi.tgtIntn,Ga.isRound=li.startsWith("round"),i&&(ar.isParent()||ar.isChild()||Sr.isParent()||Sr.isChild())&&(ar.parents().anySame(Sr)||Sr.parents().anySame(ar)||ar.same(Sr)&&ar.isParent())?t.findCompoundLoopPoints(xa,bi,ea,Mi):ar===Sr?t.findLoopPoints(xa,bi,ea,Mi):li.endsWith("segments")?t.findSegmentsPoints(xa,bi):li.endsWith("taxi")?t.findTaxiPoints(xa,bi):"straight"===li||!Mi&&Ne.eles.length%2==1&&ea===Math.floor(Ne.eles.length/2)?t.findStraightEdgePoints(xa):t.findBezierPoints(xa,bi,ea,Mi,Ci),t.findEndpoints(xa),t.tryToCorrectInvalidPoints(xa,bi),t.checkForInvalidEdgeWarning(xa),t.storeAllpts(xa),t.storeEdgeProjections(xa),t.calculateArrowAngles(xa),t.recalculateEdgeLabelProjections(xa),t.calculateLabelAngles(xa)}},Yt=0;Yt<o.length;Yt++)se();this.findHaystackPoints(u)}},In.getSegmentPoints=function(e){var t=e[0]._private.rscratch;if(this.recalculateRenderedStyle(e),"segments"===t.edgeType)return zd(t.segpts)},In.getControlPoints=function(e){var t=e[0]._private.rscratch;this.recalculateRenderedStyle(e);var r=t.edgeType;if("bezier"===r||"multibezier"===r||"self"===r||"compound"===r)return zd(t.ctrlpts)},In.getEdgeMidpoint=function(e){var t=e[0]._private.rscratch;return this.recalculateRenderedStyle(e),{x:t.midX,y:t.midY}};var yo={manualEndptToPx:function(e,t){var a=e.position(),i=e.outerWidth(),n=e.outerHeight(),s=e._private.rscratch;if(2===t.value.length){var o=[t.pfValue[0],t.pfValue[1]];return"%"===t.units[0]&&(o[0]=o[0]*i),"%"===t.units[1]&&(o[1]=o[1]*n),o[0]+=a.x,o[1]+=a.y,o}var u=t.pfValue[0];u=-Math.PI/2+u;var h=2*Math.max(i,n),f=[a.x+Math.cos(u)*h,a.y+Math.sin(u)*h];return this.nodeShapes[this.getNodeShape(e)].intersectLine(a.x,a.y,i,n,f[0],f[1],0,"auto"===e.pstyle("corner-radius").value?"auto":e.pstyle("corner-radius").pfValue,s)},findEndpoints:function(e){var t,r,a,i,s,n=this,o=e.source()[0],u=e.target()[0],h=o.position(),f=u.position(),v=e.pstyle("target-arrow-shape").value,m=e.pstyle("source-arrow-shape").value,k=e.pstyle("target-distance-from-node").pfValue,_=e.pstyle("source-distance-from-node").pfValue,U=o._private.rscratch,I=u._private.rscratch,K=e.pstyle("curve-style").value,Y=e._private.rscratch,X=Y.edgeType,mt=St(K,"taxi"),ie="self"===X||"compound"===X,se="bezier"===X||"multibezier"===X||ie,Yt="bezier"!==X,he="straight"===X||"segments"===X,be="segments"===X,Se=se||Yt||he,De=ie||mt,Oe=e.pstyle("source-endpoint"),Ne=De?"outside-to-node":Oe.value,Je="auto"===o.pstyle("corner-radius").value?"auto":o.pstyle("corner-radius").pfValue,dr=e.pstyle("target-endpoint"),gr=De?"outside-to-node":dr.value,ar="auto"===u.pstyle("corner-radius").value?"auto":u.pstyle("corner-radius").pfValue;Y.srcManEndpt=Oe,Y.tgtManEndpt=dr;var Sr,Ur,jr,Mr,Wr=null!==(t=2===(null==dr||null===(r=dr.pfValue)||void 0===r?void 0:r.length)?dr.pfValue:null)&&void 0!==t?t:[0,0],pa=null!==(a=2===(null==Oe||null===(i=Oe.pfValue)||void 0===i?void 0:i.length)?Oe.pfValue:null)&&void 0!==a?a:[0,0];if(se){var Ea=[Y.ctrlpts[0],Y.ctrlpts[1]];Sr=Yt?[Y.ctrlpts[Y.ctrlpts.length-2],Y.ctrlpts[Y.ctrlpts.length-1]]:Ea,Ur=Ea}else if(he){var Aa=be?Y.segpts.slice(0,2):[f.x+Wr[0],f.y+Wr[1]];Sr=be?Y.segpts.slice(Y.segpts.length-2):[h.x+pa[0],h.y+pa[1]],Ur=Aa}if("inside-to-node"===gr)s=[f.x,f.y];else if(dr.units)s=this.manualEndptToPx(u,dr);else if("outside-to-line"===gr)s=Y.tgtIntn;else if("outside-to-node"===gr||"outside-to-node-or-label"===gr?jr=Sr:("outside-to-line"===gr||"outside-to-line-or-label"===gr)&&(jr=[h.x,h.y]),s=n.nodeShapes[this.getNodeShape(u)].intersectLine(f.x,f.y,u.outerWidth(),u.outerHeight(),jr[0],jr[1],0,ar,I),"outside-to-node-or-label"===gr||"outside-to-line-or-label"===gr){var Qa=u._private.rscratch,$r=Qa.labelX,ea=Qa.labelY,xa=Qa.labelWidth/2,Ga=Qa.labelHeight/2,li=u.pstyle("text-valign").value;"top"===li?ea-=Ga:"bottom"===li&&(ea+=Ga);var Mi=u.pstyle("text-halign").value;"left"===Mi?$r-=xa:"right"===Mi&&($r+=xa);var Ci=Tn(jr[0],jr[1],[$r-xa,ea-Ga,$r+xa,ea-Ga,$r+xa,ea+Ga,$r-xa,ea+Ga],f.x,f.y);if(Ci.length>0){var xi=h,gi=rn(xi,hn(s)),Ja=rn(xi,hn(Ci)),ci=gi;Ja<gi&&(s=Ci,ci=Ja),Ci.length>2&&rn(xi,{x:Ci[2],y:Ci[3]})<ci&&(s=[Ci[2],Ci[3]])}}var _i=an(s,Sr,n.arrowShapes[v].spacing(e)+k),fi=an(s,Sr,n.arrowShapes[v].gap(e)+k);if(Y.endX=fi[0],Y.endY=fi[1],Y.arrowEndX=_i[0],Y.arrowEndY=_i[1],"inside-to-node"===Ne)s=[h.x,h.y];else if(Oe.units)s=this.manualEndptToPx(o,Oe);else if("outside-to-line"===Ne)s=Y.srcIntn;else if("outside-to-node"===Ne||"outside-to-node-or-label"===Ne?Mr=Ur:("outside-to-line"===Ne||"outside-to-line-or-label"===Ne)&&(Mr=[f.x,f.y]),s=n.nodeShapes[this.getNodeShape(o)].intersectLine(h.x,h.y,o.outerWidth(),o.outerHeight(),Mr[0],Mr[1],0,Je,U),"outside-to-node-or-label"===Ne||"outside-to-line-or-label"===Ne){var wi=o._private.rscratch,Hi=wi.labelX,Gi=wi.labelY,bi=wi.labelWidth/2,ai=wi.labelHeight/2,ya=o.pstyle("text-valign").value;"top"===ya?Gi-=ai:"bottom"===ya&&(Gi+=ai);var ve=o.pstyle("text-halign").value;"left"===ve?Hi-=bi:"right"===ve&&(Hi+=bi);var Hr=Tn(Mr[0],Mr[1],[Hi-bi,Gi-ai,Hi+bi,Gi-ai,Hi+bi,Gi+ai,Hi-bi,Gi+ai],h.x,h.y);if(Hr.length>0){var sa=f,la=rn(sa,hn(s)),ba=rn(sa,hn(Hr)),ri=la;ba<la&&(s=[Hr[0],Hr[1]],ri=ba),Hr.length>2&&rn(sa,{x:Hr[2],y:Hr[3]})<ri&&(s=[Hr[2],Hr[3]])}}var si=an(s,Ur,n.arrowShapes[m].spacing(e)+_),ii=an(s,Ur,n.arrowShapes[m].gap(e)+_);Y.startX=ii[0],Y.startY=ii[1],Y.arrowStartX=si[0],Y.arrowStartY=si[1],Se&&(Y.badLine=!(Z(Y.startX)&&Z(Y.startY)&&Z(Y.endX)&&Z(Y.endY)))},getSourceEndpoint:function(e){var t=e[0]._private.rscratch;return"haystack"===(this.recalculateRenderedStyle(e),t.edgeType)?{x:t.haystackPts[0],y:t.haystackPts[1]}:{x:t.arrowStartX,y:t.arrowStartY}},getTargetEndpoint:function(e){var t=e[0]._private.rscratch;return"haystack"===(this.recalculateRenderedStyle(e),t.edgeType)?{x:t.haystackPts[2],y:t.haystackPts[3]}:{x:t.arrowEndX,y:t.arrowEndY}}},$c={};function J1(e,t,r){for(var a=function(h,f,v,m){return Gt(h,f,v,m)},n=t._private.rstyle.bezierPts,s=0;s<e.bezierProjPcts.length;s++){var o=e.bezierProjPcts[s];n.push({x:a(r[0],r[2],r[4],o),y:a(r[1],r[3],r[5],o)})}}$c.storeEdgeProjections=function(e){var t=e._private,r=t.rscratch,a=r.edgeType;if(t.rstyle.bezierPts=null,t.rstyle.linePts=null,t.rstyle.haystackPts=null,"multibezier"===a||"bezier"===a||"self"===a||"compound"===a){t.rstyle.bezierPts=[];for(var i=0;i+5<r.allpts.length;i+=4)J1(this,e,r.allpts.slice(i,i+6))}else if("segments"===a){var n=t.rstyle.linePts=[];for(i=0;i+1<r.allpts.length;i+=2)n.push({x:r.allpts[i],y:r.allpts[i+1]})}else if("haystack"===a){var s=r.haystackPts;t.rstyle.haystackPts=[{x:s[0],y:s[1]},{x:s[2],y:s[3]}]}t.rstyle.arrowWidth=this.getArrowWidth(e.pstyle("width").pfValue,e.pstyle("arrow-scale").value)*this.arrowShapeWidth},$c.recalculateEdgeProjections=function(e){this.findEdgeControlPoints(e)};var is={recalculateNodeLabelProjection:function(e){var t=e.pstyle("label").strValue;if(!Nt(t)){var r,a,i=e._private,n=e.width(),s=e.height(),o=e.padding(),u=e.position(),h=e.pstyle("text-halign").strValue,f=e.pstyle("text-valign").strValue,v=i.rscratch,m=i.rstyle;switch(h){case"left":r=u.x-n/2-o;break;case"right":r=u.x+n/2+o;break;default:r=u.x}switch(f){case"top":a=u.y-s/2-o;break;case"bottom":a=u.y+s/2+o;break;default:a=u.y}v.labelX=r,v.labelY=a,m.labelX=r,m.labelY=a,this.calculateLabelAngles(e),this.applyLabelDimensions(e)}}},Vd=function(t,r){var a=Math.atan(r/t);return 0===t&&a<0&&(a*=-1),a},Ud=function(t,r){return Vd(r.x-t.x,r.y-t.y)};is.recalculateEdgeLabelProjections=function(e){var t,r=e._private,a=r.rscratch,i=this,n={mid:e.pstyle("label").strValue,source:e.pstyle("source-label").strValue,target:e.pstyle("target-label").strValue};if(n.mid||n.source||n.target){var s=function(v,m,k){Ve(r.rscratch,v,m,k),Ve(r.rstyle,v,m,k)};s("labelX",null,(t={x:a.midX,y:a.midY}).x),s("labelY",null,t.y);var o=Vd(a.midDispX,a.midDispY);s("labelAutoAngle",null,o);var u=function(){if(u.cache)return u.cache;for(var v=[],m=0;m+5<a.allpts.length;m+=4)v.push({p0:{x:a.allpts[m],y:a.allpts[m+1]},p1:{x:a.allpts[m+2],y:a.allpts[m+3]},p2:{x:a.allpts[m+4],y:a.allpts[m+5]},startDist:0,length:0,segments:[]});var I=r.rstyle.bezierPts,K=i.bezierProjPcts.length;function Y(Yt,he,be,Se,De){var Oe=Xi(he,be),Ne=Yt.segments[Yt.segments.length-1];Yt.segments.push({p0:he,p1:be,t0:Se,t1:De,startDist:Ne?Ne.startDist+Ne.length:0,length:Oe}),Yt.length+=Oe}for(var X=0;X<v.length;X++){var mt=v[X],ie=v[X-1];ie&&(mt.startDist=ie.startDist+ie.length),Y(mt,mt.p0,I[X*K],0,i.bezierProjPcts[0]);for(var se=0;se<K-1;se++)Y(mt,I[X*K+se],I[X*K+se+1],i.bezierProjPcts[se],i.bezierProjPcts[se+1]);Y(mt,I[X*K+K-1],mt.p2,i.bezierProjPcts[K-1],1)}return u.cache=v},h=function(v){var m,k="source"===v;if(n[v]){var _=e.pstyle(v+"-text-offset").pfValue;switch(a.edgeType){case"self":case"compound":case"bezier":case"multibezier":for(var I,U=u(),K=0,Y=0,X=0;X<U.length;X++){for(var mt=U[k?X:U.length-1-X],ie=0;ie<mt.segments.length;ie++){var se=mt.segments[k?ie:mt.segments.length-1-ie];if(K=Y,(Y+=se.length)>=_||X===U.length-1&&ie===mt.segments.length-1){I={cp:mt,segment:se};break}}if(I)break}var he=I.cp,be=I.segment,Se=(_-K)/be.length,De=be.t1-be.t0,Oe=k?be.t0+De*Se:be.t1-De*Se;Oe=Zt(0,Oe,1),t=d(he.p0,he.p1,he.p2,Oe),m=function(t,r,a,i){var n=Zt(0,i-.001,1),s=Zt(0,i+.001,1),o=d(t,r,a,n),u=d(t,r,a,s);return Ud(o,u)}(he.p0,he.p1,he.p2,Oe);break;case"straight":case"segments":case"haystack":for(var Je,dr,gr,ar,Ne=0,Sr=a.allpts.length,Ur=0;Ur+3<Sr&&(k?(gr={x:a.allpts[Ur],y:a.allpts[Ur+1]},ar={x:a.allpts[Ur+2],y:a.allpts[Ur+3]}):(gr={x:a.allpts[Sr-2-Ur],y:a.allpts[Sr-1-Ur]},ar={x:a.allpts[Sr-4-Ur],y:a.allpts[Sr-3-Ur]}),dr=Ne,!((Ne+=Je=Xi(gr,ar))>=_));Ur+=2);var Mr=(_-dr)/Je;Mr=Zt(0,Mr,1),t=function(t,r,a,i){var n_x=r.x-t.x,n_y=r.y-t.y,s=Xi(t,r);return a=a??0,{x:t.x+n_x/s*(i=i??a*s),y:t.y+n_y/s*i}}(gr,ar,Mr),m=Ud(gr,ar)}s("labelX",v,t.x),s("labelY",v,t.y),s("labelAutoAngle",v,m)}};h("source"),h("target"),this.applyLabelDimensions(e)}},is.applyLabelDimensions=function(e){this.applyPrefixedLabelDimensions(e),e.isEdge()&&(this.applyPrefixedLabelDimensions(e,"source"),this.applyPrefixedLabelDimensions(e,"target"))},is.applyPrefixedLabelDimensions=function(e,t){var r=e._private,a=this.getLabelText(e,t),i=ga(a,e._private.labelDimsKey);if(jt(r.rscratch,"prefixedLabelDimsKey",t)!==i){Ve(r.rscratch,"prefixedLabelDimsKey",t,i);var n=this.calculateLabelDimensions(e,a),s=e.pstyle("line-height").pfValue,o=e.pstyle("text-wrap").strValue,u=jt(r.rscratch,"labelWrapCachedLines",t)||[],h="wrap"!==o?1:Math.max(u.length,1),f=n.height/h,v=f*s,m=n.width,k=n.height+(h-1)*(s-1)*f;Ve(r.rstyle,"labelWidth",t,m),Ve(r.rscratch,"labelWidth",t,m),Ve(r.rstyle,"labelHeight",t,k),Ve(r.rscratch,"labelHeight",t,k),Ve(r.rscratch,"labelLineHeight",t,v)}},is.getLabelText=function(e,t){var r=e._private,i=e.pstyle((t?t+"-":"")+"label").strValue,n=e.pstyle("text-transform").value,s=function(pa,Ea){return Ea?(Ve(r.rscratch,pa,t,Ea),Ea):jt(r.rscratch,pa,t)};if(!i)return"";"none"==n||("uppercase"==n?i=i.toUpperCase():"lowercase"==n&&(i=i.toLowerCase()));var o=e.pstyle("text-wrap").value;if("wrap"===o){var u=s("labelKey");if(null!=u&&s("labelWrapKey")===u)return s("labelWrapCachedText");for(var f=i.split("\n"),v=e.pstyle("text-max-width").pfValue,k="anywhere"===e.pstyle("text-overflow-wrap").value,_=[],U=/[\s\u200b]+|$/g,I=0;I<f.length;I++){var K=f[I],X=this.calculateLabelDimensions(e,K).width;if(k){var mt=K.split("").join("\u200b");K=mt}if(X>v){var be,se="",Yt=0,he=q(K.matchAll(U));try{for(he.s();!(be=he.n()).done;){var Se=be.value,De=Se[0],Oe=K.substring(Yt,Se.index);Yt=Se.index+De.length,this.calculateLabelDimensions(e,0===se.length?Oe:se+Oe+De).width<=v?se+=Oe+De:(se&&_.push(se),se=Oe+De)}}catch(Wr){he.e(Wr)}finally{he.f()}se.match(/^[\s\u200b]+$/)||_.push(se)}else _.push(K)}s("labelWrapCachedLines",_),i=s("labelWrapCachedText",_.join("\n")),s("labelWrapKey",u)}else if("ellipsis"===o){var gr=e.pstyle("text-max-width").pfValue,ar="",Ur=!1;if(this.calculateLabelDimensions(e,i).width<gr)return i;for(var jr=0;jr<i.length&&!(this.calculateLabelDimensions(e,ar+i[jr]+"\u2026").width>gr);jr++)ar+=i[jr],jr===i.length-1&&(Ur=!0);return Ur||(ar+="\u2026"),ar}return i},is.getLabelJustification=function(e){var t=e.pstyle("text-justification").strValue,r=e.pstyle("text-halign").strValue;if("auto"!==t)return t;if(!e.isNode())return"center";switch(r){case"left":return"right";case"right":return"left";default:return"center"}},is.calculateLabelDimensions=function(e,t){var i=this.cy.window().document,s=e.pstyle("font-style").strValue,o=e.pstyle("font-size").pfValue,u=e.pstyle("font-family").strValue,h=e.pstyle("font-weight").strValue,f=this.labelCalcCanvas,v=this.labelCalcCanvasContext;if(!f){f=this.labelCalcCanvas=i.createElement("canvas"),v=this.labelCalcCanvasContext=f.getContext("2d");var m=f.style;m.position="absolute",m.left="-9999px",m.top="-9999px",m.zIndex="-1",m.visibility="hidden",m.pointerEvents="none"}v.font="".concat(s," ").concat(h," ").concat(o,"px ").concat(u);for(var k=0,_=0,U=t.split("\n"),I=0;I<U.length;I++){var Y=v.measureText(U[I]),X=Math.ceil(Y.width),mt=o;k=Math.max(X,k),_+=mt}return{width:k+=0,height:_+=0}},is.calculateLabelAngle=function(e,t){var a=e._private.rscratch,i=e.isEdge(),s=e.pstyle((t?t+"-":"")+"text-rotation"),o=s.strValue;return"none"===o?0:i&&"autorotate"===o?a.labelAutoAngle:"autorotate"===o?0:s.pfValue},is.calculateLabelAngles=function(e){var t=this,r=e.isEdge(),i=e._private.rscratch;i.labelAngle=t.calculateLabelAngle(e),r&&(i.sourceLabelAngle=t.calculateLabelAngle(e,"source"),i.targetLabelAngle=t.calculateLabelAngle(e,"target"))};var $d={},Hd=!1;$d.getNodeShape=function(e){var r=e.pstyle("shape").value;if("cutrectangle"===r&&(e.width()<28||e.height()<28))return Hd||(Sa("The `cutrectangle` node shape can not be used at small sizes so `rectangle` is used instead"),Hd=!0),"rectangle";if(e.isParent())return"rectangle"===r||"roundrectangle"===r||"round-rectangle"===r||"cutrectangle"===r||"cut-rectangle"===r||"barrel"===r?r:"rectangle";if("polygon"===r){var a=e.pstyle("shape-polygon-points").value;return this.nodeShapes.makePolygon(a).name}return r};var ol={updateCachedGrabbedEles:function(){var e=this.cachedZSortedEles;if(e){e.drag=[],e.nondrag=[];for(var t=[],r=0;r<e.length;r++){var i=(a=e[r])._private.rscratch;a.grabbed()&&!a.isParent()?t.push(a):i.inDragLayer?e.drag.push(a):e.nondrag.push(a)}for(r=0;r<t.length;r++){var a;e.drag.push(a=t[r])}}},invalidateCachedZSortedEles:function(){this.cachedZSortedEles=null},getCachedZSortedEles:function(e){if(e||!this.cachedZSortedEles){var t=this.cy.mutableElements().toArray();t.sort(sd),t.interactive=t.filter(function(r){return r.interactive()}),this.cachedZSortedEles=t,this.updateCachedGrabbedEles()}else t=this.cachedZSortedEles;return t}},Gd={};[Ss,al,In,yo,$c,is,$d,{registerCalculationListeners:function(){var e=this.cy,t=e.collection(),r=this,a=function(s){var o=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(t.merge(s),o)for(var u=0;u<s.length;u++){var v=s[u]._private.rstyle;v.clean=!1,v.cleanConnected=!1}};r.binder(e).on("bounds.* dirty.*",function(s){a(s.target)}).on("style.* background.*",function(s){a(s.target,!1)});var i=function(s){if(s){var o=r.onUpdateEleCalcsFns;t.cleanStyle();for(var u=0;u<t.length;u++){var h=t[u],f=h._private.rstyle;h.isNode()&&!f.cleanConnected&&(a(h.connectedEdges()),f.cleanConnected=!0)}if(o)for(var v=0;v<o.length;v++)(0,o[v])(s,t);r.recalculateRenderedStyle(t),t=e.collection()}};r.flushRenderedStyleQueue=function(){i(!0)},r.beforeRender(i,r.beforeRenderPriorities.eleCalcs)},onUpdateEleCalcs:function(e){(this.onUpdateEleCalcsFns=this.onUpdateEleCalcsFns||[]).push(e)},recalculateRenderedStyle:function(e,t){var r=function(mt){return mt._private.rstyle.cleanConnected};if(0!==e.length){var a=[],i=[];if(!this.destroyed){void 0===t&&(t=!0);for(var n=0;n<e.length;n++){var s=e[n],o=s._private,u=o.rstyle;s.isEdge()&&(!r(s.source())||!r(s.target()))&&(u.clean=!1),s.isEdge()&&s.isBundledBezier()&&s.parallelEdges().some(function(X){return!X._private.rstyle.clean&&X.isBundledBezier()})&&(u.clean=!1),!(t&&u.clean||s.removed())&&"none"!==s.pstyle("display").value&&("nodes"===o.group?i.push(s):a.push(s),u.clean=!0)}for(var h=0;h<i.length;h++){var f=i[h],m=f._private.rstyle,k=f.position();this.recalculateNodeLabelProjection(f),m.nodeX=k.x,m.nodeY=k.y,m.nodeW=f.pstyle("width").pfValue,m.nodeH=f.pstyle("height").pfValue}this.recalculateEdgeProjections(a);for(var _=0;_<a.length;_++){var I=a[_]._private,K=I.rstyle,Y=I.rscratch;K.srcX=Y.arrowStartX,K.srcY=Y.arrowStartY,K.tgtX=Y.arrowEndX,K.tgtY=Y.arrowEndY,K.midX=Y.midX,K.midY=Y.midY,K.labelAngle=Y.labelAngle,K.sourceLabelAngle=Y.sourceLabelAngle,K.targetLabelAngle=Y.targetLabelAngle}}}}},ol].forEach(function(e){G(Gd,e)});var qd={getCachedImage:function(e,t,r){var i=this.imageCache=this.imageCache||{},n=i[e];if(n)return n.image.complete||n.image.addEventListener("load",r),n.image;var s=(n=i[e]=i[e]||{}).image=new Image;s.addEventListener("load",r),s.addEventListener("error",function(){s.error=!0});return"data:"===e.substring(0,5).toLowerCase()||(s.crossOrigin=t="null"===t?null:t),s.src=e,s}},js={registerBinding:function(e,t,r,a){var i=Array.prototype.slice.apply(arguments,[1]);if(Array.isArray(e)){for(var n=[],s=0;s<e.length;s++){var o=e[s];if(void 0!==o){var u=this.binder(o);n.push(u.on.apply(u,i))}}return n}return(u=this.binder(e)).on.apply(u,i)},binder:function(e){var t=this,r=t.cy.window(),a=e===r||e===r.document||e===r.document.body||function(t){return!(typeof HTMLElement>"u")&&t instanceof HTMLElement}(e);if(null==t.supportsPassiveEvents){var i=!1;try{var n=Object.defineProperty({},"passive",{get:function(){return i=!0,!0}});r.addEventListener("test",null,n)}catch{}t.supportsPassiveEvents=i}var s=function(u,h,f){var v=Array.prototype.slice.call(arguments);return a&&t.supportsPassiveEvents&&(v[2]={capture:f??!1,passive:!1,once:!1}),t.bindings.push({target:e,args:v}),(e.addEventListener||e.on).apply(e,v),this};return{on:s,addEventListener:s,addListener:s,bind:s}},nodeIsDraggable:function(e){return e&&e.isNode()&&!e.locked()&&e.grabbable()},nodeIsGrabbable:function(e){return this.nodeIsDraggable(e)&&e.interactive()}};js.load=function(){var e=this,t=e.cy.window(),r=function(ve){return ve.selected()},i=function(ve,Hr,sa,la){null==ve&&(ve=e.cy);for(var ba=0;ba<Hr.length;ba++)ve.emit({originalEvent:sa,type:Hr[ba],position:la})},n=function(ve){return ve.shiftKey||ve.metaKey||ve.ctrlKey},s=function(ve,Hr){var sa=!0;if(e.cy.hasCompoundNodes()&&ve&&ve.pannable()){for(var la=0;Hr&&la<Hr.length;la++)if((ve=Hr[la]).isNode()&&ve.isParent()&&!ve.pannable()){sa=!1;break}}else sa=!0;return sa},h=function(ve){ve[0]._private.rscratch.inDragLayer=!0},v=function(ve){ve[0]._private.rscratch.isGrabTarget=!0},k=function(ve,Hr){var sa=Hr.addToList;!sa.has(ve)&&ve.grabbable()&&!ve.locked()&&(sa.merge(ve),function(ve){ve[0]._private.grabbed=!0}(ve))},U=function(ve,Hr){Hr=Hr||{};var sa=ve.cy().hasCompoundNodes();Hr.inDragLayer&&(ve.forEach(h),ve.neighborhood().stdFilter(function(la){return!sa||la.isEdge()}).forEach(h)),Hr.addToList&&ve.forEach(function(la){k(la,Hr)}),function(ve,Hr){if(ve.cy().hasCompoundNodes()&&(null!=Hr.inDragLayer||null!=Hr.addToList)){var sa=ve.descendants();Hr.inDragLayer&&(sa.forEach(h),sa.connectedEdges().forEach(h)),Hr.addToList&&k(sa,Hr)}}(ve,Hr),Y(ve,{inDragLayer:Hr.inDragLayer}),e.updateCachedGrabbedEles()},I=U,K=function(ve){ve&&(e.getCachedZSortedEles().forEach(function(Hr){(function(ve){ve[0]._private.grabbed=!1})(Hr),function(ve){ve[0]._private.rscratch.inDragLayer=!1}(Hr),function(ve){ve[0]._private.rscratch.isGrabTarget=!1}(Hr)}),e.updateCachedGrabbedEles())},Y=function(ve,Hr){if((null!=Hr.inDragLayer||null!=Hr.addToList)&&ve.cy().hasCompoundNodes()){var sa=ve.ancestors().orphans();if(!sa.same(ve)){var la=sa.descendants().spawnSelf().merge(sa).unmerge(ve).unmerge(ve.descendants()),ba=la.connectedEdges();Hr.inDragLayer&&(ba.forEach(h),la.forEach(h)),Hr.addToList&&la.forEach(function(ri){k(ri,Hr)})}}},X=function(){null!=document.activeElement&&null!=document.activeElement.blur&&document.activeElement.blur()},mt=typeof MutationObserver<"u",ie=typeof ResizeObserver<"u";mt?(e.removeObserver=new MutationObserver(function(ya){for(var ve=0;ve<ya.length;ve++){var sa=ya[ve].removedNodes;if(sa)for(var la=0;la<sa.length;la++)if(sa[la]===e.container){e.destroy();break}}}),e.container.parentNode&&e.removeObserver.observe(e.container.parentNode,{childList:!0})):e.registerBinding(e.container,"DOMNodeRemoved",function(ya){e.destroy()});var se=Vr(function(){e.cy.resize()},100);mt&&(e.styleObserver=new MutationObserver(se),e.styleObserver.observe(e.container,{attributes:!0})),e.registerBinding(t,"resize",se),ie&&(e.resizeObserver=new ResizeObserver(se),e.resizeObserver.observe(e.container));var he=function(){e.invalidateContainerClientCoordsCache()};(function(ve,Hr){for(;null!=ve;)Hr(ve),ve=ve.parentNode})(e.container,function(ya){e.registerBinding(ya,"transitionend",he),e.registerBinding(ya,"animationend",he),e.registerBinding(ya,"scroll",he)}),e.registerBinding(e.container,"contextmenu",function(ya){ya.preventDefault()});var Se=function(ve){for(var Hr=e.findContainerClientCoords(),sa=Hr[0],la=Hr[1],ba=Hr[2],ri=Hr[3],Da=ve.touches?ve.touches:[ve],si=!1,ii=0;ii<Da.length;ii++){var pi=Da[ii];if(sa<=pi.clientX&&pi.clientX<=sa+ba&&la<=pi.clientY&&pi.clientY<=la+ri){si=!0;break}}if(!si)return!1;for(var Ai=e.container,oi=ve.target.parentNode,Bi=!1;oi;){if(oi===Ai){Bi=!0;break}oi=oi.parentNode}return!!Bi};e.registerBinding(e.container,"mousedown",function(ve){if(Se(ve)&&(1!==e.hoverData.which||1===ve.which)){ve.preventDefault(),X(),e.hoverData.capture=!0,e.hoverData.which=ve.which;var Hr=e.cy,sa=[ve.clientX,ve.clientY],la=e.projectIntoViewport(sa[0],sa[1]),ba=e.selection,ri=e.findNearestElements(la[0],la[1],!0,!1),Da=ri[0],si=e.dragData.possibleDragElements;e.hoverData.mdownPos=la,e.hoverData.mdownGPos=sa;var ii=function(Di){return{originalEvent:ve,type:Di,position:{x:la[0],y:la[1]}}};if(3==ve.which){e.hoverData.cxtStarted=!0;var Ai={originalEvent:ve,type:"cxttapstart",position:{x:la[0],y:la[1]}};Da?(Da.activate(),Da.emit(Ai),e.hoverData.down=Da):Hr.emit(Ai),e.hoverData.downTime=(new Date).getTime(),e.hoverData.cxtDragged=!1}else if(1==ve.which){if(Da&&Da.activate(),null!=Da&&e.nodeIsGrabbable(Da)){if(v(Da),Da.selected()){si=e.dragData.possibleDragElements=Hr.collection();var oi=Hr.$(function(Bi){return Bi.isNode()&&Bi.selected()&&e.nodeIsGrabbable(Bi)});U(oi,{addToList:si}),Da.emit(ii("grabon")),oi.forEach(function(Di){Di.emit(ii("grab"))})}else si=e.dragData.possibleDragElements=Hr.collection(),I(Da,{addToList:si}),Da.emit(ii("grabon")).emit(ii("grab"));e.redrawHint("eles",!0),e.redrawHint("drag",!0)}e.hoverData.down=Da,e.hoverData.downs=ri,e.hoverData.downTime=(new Date).getTime(),i(Da,["mousedown","tapstart","vmousedown"],ve,{x:la[0],y:la[1]}),null==Da?(ba[4]=1,e.data.bgActivePosistion={x:la[0],y:la[1]},e.redrawHint("select",!0),e.redraw()):Da.pannable()&&(ba[4]=1),e.hoverData.tapholdCancelled=!1,clearTimeout(e.hoverData.tapholdTimeout),e.hoverData.tapholdTimeout=setTimeout(function(){if(!e.hoverData.tapholdCancelled){var Di=e.hoverData.down;Di?Di.emit(ii("taphold")):Hr.emit(ii("taphold"))}},e.tapholdDuration)}ba[0]=ba[2]=la[0],ba[1]=ba[3]=la[1]}},!1);var Oe,Ne,Je,De=function(ve){var Hr=ve.getRootNode();if(Hr&&11===Hr.nodeType&&void 0!==Hr.host)return Hr}(e.container);e.registerBinding([t,De],"mousemove",function(ve){var jn;if(e.hoverData.capture||Se(ve)){var sa=!1,la=e.cy,ba=la.zoom(),ri=[ve.clientX,ve.clientY],Da=e.projectIntoViewport(ri[0],ri[1]),si=e.hoverData.mdownPos,ii=e.hoverData.mdownGPos,pi=e.selection,Ai=null;!e.hoverData.draggingEles&&!e.hoverData.dragging&&!e.hoverData.selecting&&(Ai=e.findNearestElement(Da[0],Da[1],!0,!1));var yn,Ti=e.hoverData.last,oi=e.hoverData.down,Bi=[Da[0]-pi[2],Da[1]-pi[3]],Di=e.dragData.possibleDragElements;if(ii){var on=ri[0]-ii[0],fn=ri[1]-ii[1];e.hoverData.isOverThresholdDrag=yn=on*on+fn*fn>=e.desktopTapThreshold2}var Dn=n(ve);yn&&(e.hoverData.tapholdCancelled=!0),sa=!0,i(Ai,["mousemove","vmousemove","tapdrag"],ve,{x:Da[0],y:Da[1]});var gn=function(jn){return{originalEvent:ve,type:jn,position:{x:Da[0],y:Da[1]}}},us=function(){e.data.bgActivePosistion=void 0,e.hoverData.selecting||la.emit(gn("boxstart")),pi[4]=1,e.hoverData.selecting=!0,e.redrawHint("select",!0),e.redraw()};if(3===e.hoverData.which){if(yn){var ds=gn("cxtdrag");oi?oi.emit(ds):la.emit(ds),e.hoverData.cxtDragged=!0,(!e.hoverData.cxtOver||Ai!==e.hoverData.cxtOver)&&(e.hoverData.cxtOver&&e.hoverData.cxtOver.emit(gn("cxtdragout")),e.hoverData.cxtOver=Ai,Ai&&Ai.emit(gn("cxtdragover")))}}else if(e.hoverData.dragging){if(sa=!0,la.panningEnabled()&&la.userPanningEnabled()){var eo;if(e.hoverData.justStartedPan){var pl=e.hoverData.mdownPos;eo={x:(Da[0]-pl[0])*ba,y:(Da[1]-pl[1])*ba},e.hoverData.justStartedPan=!1}else eo={x:Bi[0]*ba,y:Bi[1]*ba};la.panBy(eo),la.emit(gn("dragpan")),e.hoverData.dragged=!0}Da=e.projectIntoViewport(ve.clientX,ve.clientY)}else if(1!=pi[4]||null!=oi&&!oi.pannable()){if(oi&&oi.pannable()&&oi.active()&&oi.unactivate(),(!oi||!oi.grabbed())&&Ai!=Ti&&(Ti&&i(Ti,["mouseout","tapdragout"],ve,{x:Da[0],y:Da[1]}),Ai&&i(Ai,["mouseover","tapdragover"],ve,{x:Da[0],y:Da[1]}),e.hoverData.last=Ai),oi)if(yn){if(la.boxSelectionEnabled()&&Dn)oi&&oi.grabbed()&&(K(Di),oi.emit(gn("freeon")),Di.emit(gn("free")),e.dragData.didDrag&&(oi.emit(gn("dragfreeon")),Di.emit(gn("dragfree")))),us();else if(oi&&oi.grabbed()&&e.nodeIsDraggable(oi)){var Wn=!e.dragData.didDrag;Wn&&e.redrawHint("eles",!0),e.dragData.didDrag=!0,e.hoverData.draggingEles||U(Di,{inDragLayer:!0});var On={x:0,y:0};if(Z(Bi[0])&&Z(Bi[1])&&(On.x+=Bi[0],On.y+=Bi[1],Wn)){var zn=e.hoverData.dragDelta;zn&&Z(zn[0])&&Z(zn[1])&&(On.x+=zn[0],On.y+=zn[1])}e.hoverData.draggingEles=!0,Di.silentShift(On).emit(gn("position")).emit(gn("drag")),e.redrawHint("drag",!0),e.redraw()}}else 0===(jn=e.hoverData.dragDelta=e.hoverData.dragDelta||[]).length?(jn.push(Bi[0]),jn.push(Bi[1])):(jn[0]+=Bi[0],jn[1]+=Bi[1]);sa=!0}else yn&&(e.hoverData.dragging||!la.boxSelectionEnabled()||!Dn&&la.panningEnabled()&&la.userPanningEnabled()?!e.hoverData.selecting&&la.panningEnabled()&&la.userPanningEnabled()&&s(oi,e.hoverData.downs)&&(e.hoverData.dragging=!0,e.hoverData.justStartedPan=!0,pi[4]=0,e.data.bgActivePosistion=hn(si),e.redrawHint("select",!0),e.redraw()):us(),oi&&oi.pannable()&&oi.active()&&oi.unactivate());if(pi[2]=Da[0],pi[3]=Da[1],sa)return ve.stopPropagation&&ve.stopPropagation(),ve.preventDefault&&ve.preventDefault(),!1}},!1),e.registerBinding(t,"mouseup",function(ve){if((1!==e.hoverData.which||1===ve.which||!e.hoverData.capture)&&e.hoverData.capture){e.hoverData.capture=!1;var sa=e.cy,la=e.projectIntoViewport(ve.clientX,ve.clientY),ba=e.selection,ri=e.findNearestElement(la[0],la[1],!0,!1),Da=e.dragData.possibleDragElements,si=e.hoverData.down,ii=n(ve);e.data.bgActivePosistion&&(e.redrawHint("select",!0),e.redraw()),e.hoverData.tapholdCancelled=!0,e.data.bgActivePosistion=void 0,si&&si.unactivate();var pi=function(on){return{originalEvent:ve,type:on,position:{x:la[0],y:la[1]}}};if(3===e.hoverData.which){var Ai=pi("cxttapend");if(si?si.emit(Ai):sa.emit(Ai),!e.hoverData.cxtDragged){var Ti=pi("cxttap");si?si.emit(Ti):sa.emit(Ti)}e.hoverData.cxtDragged=!1,e.hoverData.which=null}else if(1===e.hoverData.which){if(i(ri,["mouseup","tapend","vmouseup"],ve,{x:la[0],y:la[1]}),!e.dragData.didDrag&&!e.hoverData.dragged&&!e.hoverData.selecting&&!e.hoverData.isOverThresholdDrag&&(i(si,["click","tap","vclick"],ve,{x:la[0],y:la[1]}),Ne=!1,ve.timeStamp-Je<=sa.multiClickDebounceTime()?(Oe&&clearTimeout(Oe),Ne=!0,Je=null,i(si,["dblclick","dbltap","vdblclick"],ve,{x:la[0],y:la[1]})):(Oe=setTimeout(function(){Ne||i(si,["oneclick","onetap","voneclick"],ve,{x:la[0],y:la[1]})},sa.multiClickDebounceTime()),Je=ve.timeStamp)),null==si&&!e.dragData.didDrag&&!e.hoverData.selecting&&!e.hoverData.dragged&&!n(ve)&&(sa.$(r).unselect(["tapunselect"]),Da.length>0&&e.redrawHint("eles",!0),e.dragData.possibleDragElements=Da=sa.collection()),ri==si&&!e.dragData.didDrag&&!e.hoverData.selecting&&null!=ri&&ri._private.selectable&&(e.hoverData.dragging||("additive"===sa.selectionType()||ii?ri.selected()?ri.unselect(["tapunselect"]):ri.select(["tapselect"]):ii||(sa.$(r).unmerge(ri).unselect(["tapunselect"]),ri.select(["tapselect"]))),e.redrawHint("eles",!0)),e.hoverData.selecting){var oi=sa.collection(e.getAllInBox(ba[0],ba[1],ba[2],ba[3]));e.redrawHint("select",!0),oi.length>0&&e.redrawHint("eles",!0),sa.emit(pi("boxend")),"additive"===sa.selectionType()||ii||sa.$(r).unmerge(oi).unselect(),oi.emit(pi("box")).stdFilter(function(on){return on.selectable()&&!on.selected()}).select().emit(pi("boxselect")),e.redraw()}if(e.hoverData.dragging&&(e.hoverData.dragging=!1,e.redrawHint("select",!0),e.redrawHint("eles",!0),e.redraw()),!ba[4]){e.redrawHint("drag",!0),e.redrawHint("eles",!0);var Di=si&&si.grabbed();K(Da),Di&&(si.emit(pi("freeon")),Da.emit(pi("free")),e.dragData.didDrag&&(si.emit(pi("dragfreeon")),Da.emit(pi("dragfree"))))}}ba[4]=0,e.hoverData.down=null,e.hoverData.cxtStarted=!1,e.hoverData.draggingEles=!1,e.hoverData.selecting=!1,e.hoverData.isOverThresholdDrag=!1,e.dragData.didDrag=!1,e.hoverData.dragged=!1,e.hoverData.dragDelta=[],e.hoverData.mdownPos=null,e.hoverData.mdownGPos=null,e.hoverData.which=null}},!1);var ar,dr=[],Sr=1e5,Mr=function(ve){var Hr=!1,sa=ve.deltaY;if(null==sa&&(null!=ve.wheelDeltaY?sa=ve.wheelDeltaY/4:null!=ve.wheelDelta&&(sa=ve.wheelDelta/4)),0!==sa){if(null==ar)if(dr.length>=4){var la=dr;if(ar=function(ve){for(var sa=0;sa<ve.length;sa++)if(ve[sa]%5!=0)return!1;return!0}(la),!ar){var ba=Math.abs(la[0]);ar=function(ve){for(var Hr=Math.abs(ve[0]),sa=1;sa<ve.length;sa++)if(Math.abs(ve[sa])!==Hr)return!1;return!0}(la)&&ba>5}if(ar)for(var ri=0;ri<la.length;ri++)Sr=Math.min(Math.abs(la[ri]),Sr)}else dr.push(sa),Hr=!0;else ar&&(Sr=Math.min(Math.abs(sa),Sr));if(!e.scrollingPage){var Da=e.cy,si=Da.zoom(),ii=Da.pan(),pi=e.projectIntoViewport(ve.clientX,ve.clientY),Ai=[pi[0]*si+ii.x,pi[1]*si+ii.y];if(e.hoverData.draggingEles||e.hoverData.dragging||e.hoverData.cxtStarted||0!==e.selection[4])return void ve.preventDefault();if(Da.panningEnabled()&&Da.userPanningEnabled()&&Da.zoomingEnabled()&&Da.userZoomingEnabled()){var Ti;ve.preventDefault(),e.data.wheelZooming=!0,clearTimeout(e.data.wheelTimeout),e.data.wheelTimeout=setTimeout(function(){e.data.wheelZooming=!1,e.redrawHint("eles",!0),e.redraw()},150),Hr&&Math.abs(sa)>5&&(sa=5*un(sa)),Ti=sa/-250,ar&&(Ti/=Sr,Ti*=3),Ti*=e.wheelSensitivity,1===ve.deltaMode&&(Ti*=33);var Bi=Da.zoom()*Math.pow(10,Ti);"gesturechange"===ve.type&&(Bi=e.gestureStartZoom*ve.scale),Da.zoom({level:Bi,renderedPosition:{x:Ai[0],y:Ai[1]}}),Da.emit({type:"gesturechange"===ve.type?"pinchzoom":"scrollzoom",originalEvent:ve,position:{x:pi[0],y:pi[1]}})}}}};e.registerBinding(e.container,"wheel",Mr,!0),e.registerBinding(t,"scroll",function(ve){e.scrollingPage=!0,clearTimeout(e.scrollingPageTimeout),e.scrollingPageTimeout=setTimeout(function(){e.scrollingPage=!1},250)},!0),e.registerBinding(e.container,"gesturestart",function(ve){e.gestureStartZoom=e.cy.zoom(),e.hasTouchStarted||ve.preventDefault()},!0),e.registerBinding(e.container,"gesturechange",function(ya){e.hasTouchStarted||Mr(ya)},!0),e.registerBinding(e.container,"mouseout",function(ve){var Hr=e.projectIntoViewport(ve.clientX,ve.clientY);e.cy.emit({originalEvent:ve,type:"mouseout",position:{x:Hr[0],y:Hr[1]}})},!1),e.registerBinding(e.container,"mouseover",function(ve){var Hr=e.projectIntoViewport(ve.clientX,ve.clientY);e.cy.emit({originalEvent:ve,type:"mouseover",position:{x:Hr[0],y:Hr[1]}})},!1);var Wr,pa,Ea,va,Aa,Ia,Qa,Ta,Kr,$r,ea,xa,Ga,Ci,xi,gi,Ja,ci,ui,_i,li=function(ve,Hr,sa,la){return Math.sqrt((sa-ve)*(sa-ve)+(la-Hr)*(la-Hr))},Mi=function(ve,Hr,sa,la){return(sa-ve)*(sa-ve)+(la-Hr)*(la-Hr)};if(e.registerBinding(e.container,"touchstart",Ci=function(ve){if(e.hasTouchStarted=!0,Se(ve)){X(),e.touchData.capture=!0,e.data.bgActivePosistion=void 0;var Hr=e.cy,sa=e.touchData.now,la=e.touchData.earlier;if(ve.touches[0]){var ba=e.projectIntoViewport(ve.touches[0].clientX,ve.touches[0].clientY);sa[0]=ba[0],sa[1]=ba[1]}ve.touches[1]&&(ba=e.projectIntoViewport(ve.touches[1].clientX,ve.touches[1].clientY),sa[2]=ba[0],sa[3]=ba[1]),ve.touches[2]&&(ba=e.projectIntoViewport(ve.touches[2].clientX,ve.touches[2].clientY),sa[4]=ba[0],sa[5]=ba[1]);var ri=function(Dn){return{originalEvent:ve,type:Dn,position:{x:sa[0],y:sa[1]}}};if(ve.touches[1]){e.touchData.singleTouchMoved=!0,K(e.dragData.touchDragEles);var Da=e.findContainerClientCoords();ea=Da[2],xa=Da[3],pa=ve.touches[0].clientY-($r=Da[1]),Ea=ve.touches[1].clientX-(Kr=Da[0]),va=ve.touches[1].clientY-$r,Ga=0<=(Wr=ve.touches[0].clientX-Kr)&&Wr<=ea&&0<=Ea&&Ea<=ea&&0<=pa&&pa<=xa&&0<=va&&va<=xa;var si=Hr.pan(),ii=Hr.zoom();if(Aa=li(Wr,pa,Ea,va),Ia=Mi(Wr,pa,Ea,va),Ta=[((Qa=[(Wr+Ea)/2,(pa+va)/2])[0]-si.x)/ii,(Qa[1]-si.y)/ii],Ia<4e4&&!ve.touches[2]){var Ti=e.findNearestElement(sa[0],sa[1],!0,!0),oi=e.findNearestElement(sa[2],sa[3],!0,!0);return Ti&&Ti.isNode()?(Ti.activate().emit(ri("cxttapstart")),e.touchData.start=Ti):oi&&oi.isNode()?(oi.activate().emit(ri("cxttapstart")),e.touchData.start=oi):Hr.emit(ri("cxttapstart")),e.touchData.start&&(e.touchData.start._private.grabbed=!1),e.touchData.cxt=!0,e.touchData.cxtDragged=!1,e.data.bgActivePosistion=void 0,void e.redraw()}}if(ve.touches[2])Hr.boxSelectionEnabled()&&ve.preventDefault();else if(!ve.touches[1]&&ve.touches[0]){var Bi=e.findNearestElements(sa[0],sa[1],!0,!0),Di=Bi[0];if(null!=Di&&(Di.activate(),e.touchData.start=Di,e.touchData.starts=Bi,e.nodeIsGrabbable(Di))){var yn=e.dragData.touchDragEles=Hr.collection(),on=null;e.redrawHint("eles",!0),e.redrawHint("drag",!0),Di.selected()?(on=Hr.$(function(mn){return mn.selected()&&e.nodeIsGrabbable(mn)}),U(on,{addToList:yn})):I(Di,{addToList:yn}),v(Di),Di.emit(ri("grabon")),on?on.forEach(function(mn){mn.emit(ri("grab"))}):Di.emit(ri("grab"))}i(Di,["touchstart","tapstart","vmousedown"],ve,{x:sa[0],y:sa[1]}),null==Di&&(e.data.bgActivePosistion={x:ba[0],y:ba[1]},e.redrawHint("select",!0),e.redraw()),e.touchData.singleTouchMoved=!1,e.touchData.singleTouchStartTime=+new Date,clearTimeout(e.touchData.tapholdTimeout),e.touchData.tapholdTimeout=setTimeout(function(){!1===e.touchData.singleTouchMoved&&!e.pinching&&!e.touchData.selecting&&i(e.touchData.start,["taphold"],ve,{x:sa[0],y:sa[1]})},e.tapholdDuration)}if(ve.touches.length>=1){for(var Kn=e.touchData.startPosition=[null,null,null,null,null,null],fn=0;fn<sa.length;fn++)Kn[fn]=la[fn]=sa[fn];var Cn=ve.touches[0];e.touchData.startGPosition=[Cn.clientX,Cn.clientY]}}},!1),e.registerBinding(t,"touchmove",xi=function(ve){var Hr=e.touchData.capture;if(Hr||Se(ve)){var sa=e.selection,la=e.cy,ba=e.touchData.now,ri=e.touchData.earlier,Da=la.zoom();if(ve.touches[0]){var si=e.projectIntoViewport(ve.touches[0].clientX,ve.touches[0].clientY);ba[0]=si[0],ba[1]=si[1]}ve.touches[1]&&(si=e.projectIntoViewport(ve.touches[1].clientX,ve.touches[1].clientY),ba[2]=si[0],ba[3]=si[1]),ve.touches[2]&&(si=e.projectIntoViewport(ve.touches[2].clientX,ve.touches[2].clientY),ba[4]=si[0],ba[5]=si[1]);var Ai,ii=function(N2){return{originalEvent:ve,type:N2,position:{x:ba[0],y:ba[1]}}},pi=e.touchData.startGPosition;if(Hr&&ve.touches[0]&&pi){for(var Ti=[],oi=0;oi<ba.length;oi++)Ti[oi]=ba[oi]-ri[oi];var Bi=ve.touches[0].clientX-pi[0],yn=ve.touches[0].clientY-pi[1];Ai=Bi*Bi+yn*yn>=e.touchTapThreshold2}if(Hr&&e.touchData.cxt){ve.preventDefault();var Cs=Mi(fn=ve.touches[0].clientX-Kr,Cn=ve.touches[0].clientY-$r,mn=ve.touches[1].clientX-Kr,Dn=ve.touches[1].clientY-$r);if(Cs/Ia>=2.25||Cs>=22500){e.touchData.cxt=!1,e.data.bgActivePosistion=void 0,e.redrawHint("select",!0);var Ms=ii("cxttapend");e.touchData.start?(e.touchData.start.unactivate().emit(Ms),e.touchData.start=null):la.emit(Ms)}}if(Hr&&e.touchData.cxt){Ms=ii("cxtdrag"),e.data.bgActivePosistion=void 0,e.redrawHint("select",!0),e.touchData.start?e.touchData.start.emit(Ms):la.emit(Ms),e.touchData.start&&(e.touchData.start._private.grabbed=!1),e.touchData.cxtDragged=!0;var Wn=e.findNearestElement(ba[0],ba[1],!0,!0);(!e.touchData.cxtOver||Wn!==e.touchData.cxtOver)&&(e.touchData.cxtOver&&e.touchData.cxtOver.emit(ii("cxtdragout")),e.touchData.cxtOver=Wn,Wn&&Wn.emit(ii("cxtdragover")))}else if(Hr&&ve.touches[2]&&la.boxSelectionEnabled())ve.preventDefault(),e.data.bgActivePosistion=void 0,this.lastThreeTouch=+new Date,e.touchData.selecting||la.emit(ii("boxstart")),e.touchData.selecting=!0,e.touchData.didSelect=!0,sa[4]=1,sa&&0!==sa.length&&void 0!==sa[0]?(sa[2]=(ba[0]+ba[2]+ba[4])/3,sa[3]=(ba[1]+ba[3]+ba[5])/3):(sa[0]=(ba[0]+ba[2]+ba[4])/3,sa[1]=(ba[1]+ba[3]+ba[5])/3,sa[2]=(ba[0]+ba[2]+ba[4])/3+1,sa[3]=(ba[1]+ba[3]+ba[5])/3+1),e.redrawHint("select",!0),e.redraw();else if(Hr&&ve.touches[1]&&!e.touchData.didSelect&&la.zoomingEnabled()&&la.panningEnabled()&&la.userZoomingEnabled()&&la.userPanningEnabled()){if(ve.preventDefault(),e.data.bgActivePosistion=void 0,e.redrawHint("select",!0),On=e.dragData.touchDragEles){e.redrawHint("drag",!0);for(var zn=0;zn<On.length;zn++){var So=On[zn]._private;So.grabbed=!1,So.rscratch.inDragLayer=!1}}var fn,Cn,mn,Dn,jn=e.touchData.start,P0=li(fn=ve.touches[0].clientX-Kr,Cn=ve.touches[0].clientY-$r,mn=ve.touches[1].clientX-Kr,Dn=ve.touches[1].clientY-$r),A2=P0/Aa;if(Ga){var P2=(fn-Wr+(mn-Ea))/2,M2=(Cn-pa+(Dn-va))/2,wo=la.zoom(),sh=wo*A2,vl=la.pan(),M0=Ta[0]*wo+vl.x,I0=Ta[1]*wo+vl.y,I2={x:-sh/wo*(M0-vl.x-P2)+M0,y:-sh/wo*(I0-vl.y-M2)+I0};jn&&jn.active()&&(K(On=e.dragData.touchDragEles),e.redrawHint("drag",!0),e.redrawHint("eles",!0),jn.unactivate().emit(ii("freeon")),On.emit(ii("free")),e.dragData.didDrag&&(jn.emit(ii("dragfreeon")),On.emit(ii("dragfree")))),la.viewport({zoom:sh,pan:I2,cancelOnFailedZoom:!0}),la.emit(ii("pinchzoom")),Aa=P0,Wr=fn,pa=Cn,Ea=mn,va=Dn,e.pinching=!0}ve.touches[0]&&(si=e.projectIntoViewport(ve.touches[0].clientX,ve.touches[0].clientY),ba[0]=si[0],ba[1]=si[1]),ve.touches[1]&&(si=e.projectIntoViewport(ve.touches[1].clientX,ve.touches[1].clientY),ba[2]=si[0],ba[3]=si[1]),ve.touches[2]&&(si=e.projectIntoViewport(ve.touches[2].clientX,ve.touches[2].clientY),ba[4]=si[0],ba[5]=si[1])}else if(ve.touches[0]&&!e.touchData.didSelect){var Jn=e.touchData.start,oh=e.touchData.last;if(!e.hoverData.draggingEles&&!e.swipePanning&&(Wn=e.findNearestElement(ba[0],ba[1],!0,!0)),Hr&&null!=Jn&&ve.preventDefault(),Hr&&null!=Jn&&e.nodeIsDraggable(Jn))if(Ai){var On=e.dragData.touchDragEles,O0=!e.dragData.didDrag;O0&&U(On,{inDragLayer:!0}),e.dragData.didDrag=!0;var Ao={x:0,y:0};Z(Ti[0])&&Z(Ti[1])&&(Ao.x+=Ti[0],Ao.y+=Ti[1],O0)&&(e.redrawHint("eles",!0),(ts=e.touchData.dragDelta)&&Z(ts[0])&&Z(ts[1])&&(Ao.x+=ts[0],Ao.y+=ts[1])),e.hoverData.draggingEles=!0,On.silentShift(Ao).emit(ii("position")).emit(ii("drag")),e.redrawHint("drag",!0),e.touchData.startPosition[0]==ri[0]&&e.touchData.startPosition[1]==ri[1]&&e.redrawHint("eles",!0),e.redraw()}else{var ts;0===(ts=e.touchData.dragDelta=e.touchData.dragDelta||[]).length?(ts.push(Ti[0]),ts.push(Ti[1])):(ts[0]+=Ti[0],ts[1]+=Ti[1])}if(i(Jn||Wn,["touchmove","tapdrag","vmousemove"],ve,{x:ba[0],y:ba[1]}),(!Jn||!Jn.grabbed())&&Wn!=oh&&(oh&&oh.emit(ii("tapdragout")),Wn&&Wn.emit(ii("tapdragover"))),e.touchData.last=Wn,Hr)for(zn=0;zn<ba.length;zn++)ba[zn]&&e.touchData.startPosition[zn]&&Ai&&(e.touchData.singleTouchMoved=!0);Hr&&(null==Jn||Jn.pannable())&&la.panningEnabled()&&la.userPanningEnabled()&&(s(Jn,e.touchData.starts)&&(ve.preventDefault(),e.data.bgActivePosistion||(e.data.bgActivePosistion=hn(e.touchData.startPosition)),e.swipePanning?(la.panBy({x:Ti[0]*Da,y:Ti[1]*Da}),la.emit(ii("dragpan"))):Ai&&(e.swipePanning=!0,la.panBy({x:Bi*Da,y:yn*Da}),la.emit(ii("dragpan")),Jn&&(Jn.unactivate(),e.redrawHint("select",!0),e.touchData.start=null))),si=e.projectIntoViewport(ve.touches[0].clientX,ve.touches[0].clientY),ba[0]=si[0],ba[1]=si[1])}for(oi=0;oi<ba.length;oi++)ri[oi]=ba[oi];Hr&&ve.touches.length>0&&!e.hoverData.draggingEles&&!e.swipePanning&&null!=e.data.bgActivePosistion&&(e.data.bgActivePosistion=void 0,e.redrawHint("select",!0),e.redraw())}},!1),e.registerBinding(t,"touchcancel",gi=function(ve){var Hr=e.touchData.start;e.touchData.capture=!1,Hr&&Hr.unactivate()}),e.registerBinding(t,"touchend",Ja=function(ve){var Hr=e.touchData.start;if(e.touchData.capture){0===ve.touches.length&&(e.touchData.capture=!1),ve.preventDefault();var la=e.selection;e.swipePanning=!1,e.hoverData.draggingEles=!1;var ba=e.cy,ri=ba.zoom(),Da=e.touchData.now,si=e.touchData.earlier;if(ve.touches[0]){var ii=e.projectIntoViewport(ve.touches[0].clientX,ve.touches[0].clientY);Da[0]=ii[0],Da[1]=ii[1]}ve.touches[1]&&(ii=e.projectIntoViewport(ve.touches[1].clientX,ve.touches[1].clientY),Da[2]=ii[0],Da[3]=ii[1]),ve.touches[2]&&(ii=e.projectIntoViewport(ve.touches[2].clientX,ve.touches[2].clientY),Da[4]=ii[0],Da[5]=ii[1]);var Ai,pi=function(ds){return{originalEvent:ve,type:ds,position:{x:Da[0],y:Da[1]}}};if(Hr&&Hr.unactivate(),e.touchData.cxt){if(Ai=pi("cxttapend"),Hr?Hr.emit(Ai):ba.emit(Ai),!e.touchData.cxtDragged){var Ti=pi("cxttap");Hr?Hr.emit(Ti):ba.emit(Ti)}return e.touchData.start&&(e.touchData.start._private.grabbed=!1),e.touchData.cxt=!1,e.touchData.start=null,void e.redraw()}if(!ve.touches[2]&&ba.boxSelectionEnabled()&&e.touchData.selecting){e.touchData.selecting=!1;var oi=ba.collection(e.getAllInBox(la[0],la[1],la[2],la[3]));la[0]=void 0,la[1]=void 0,la[2]=void 0,la[3]=void 0,la[4]=0,e.redrawHint("select",!0),ba.emit(pi("boxend")),oi.emit(pi("box")).stdFilter(function(ds){return ds.selectable()&&!ds.selected()}).select().emit(pi("boxselect")),oi.nonempty()&&e.redrawHint("eles",!0),e.redraw()}if(Hr?.unactivate(),ve.touches[2])e.data.bgActivePosistion=void 0,e.redrawHint("select",!0);else if(!ve.touches[1]&&!ve.touches[0]&&!ve.touches[0]){e.data.bgActivePosistion=void 0,e.redrawHint("select",!0);var Di=e.dragData.touchDragEles;if(null!=Hr){var yn=Hr._private.grabbed;K(Di),e.redrawHint("drag",!0),e.redrawHint("eles",!0),yn&&(Hr.emit(pi("freeon")),Di.emit(pi("free")),e.dragData.didDrag&&(Hr.emit(pi("dragfreeon")),Di.emit(pi("dragfree")))),i(Hr,["touchend","tapend","vmouseup","tapdragout"],ve,{x:Da[0],y:Da[1]}),Hr.unactivate(),e.touchData.start=null}else{var on=e.findNearestElement(Da[0],Da[1],!0,!0);i(on,["touchend","tapend","vmouseup","tapdragout"],ve,{x:Da[0],y:Da[1]})}var Kn=e.touchData.startPosition[0]-Da[0],Cn=e.touchData.startPosition[1]-Da[1],Cs=(Kn*Kn+Cn*Cn)*ri*ri;e.touchData.singleTouchMoved||(Hr||ba.$(":selected").unselect(["tapunselect"]),i(Hr,["tap","vclick"],ve,{x:Da[0],y:Da[1]}),ci=!1,ve.timeStamp-_i<=ba.multiClickDebounceTime()?(ui&&clearTimeout(ui),ci=!0,_i=null,i(Hr,["dbltap","vdblclick"],ve,{x:Da[0],y:Da[1]})):(ui=setTimeout(function(){ci||i(Hr,["onetap","voneclick"],ve,{x:Da[0],y:Da[1]})},ba.multiClickDebounceTime()),_i=ve.timeStamp)),null!=Hr&&!e.dragData.didDrag&&Hr._private.selectable&&Cs<e.touchTapThreshold2&&!e.pinching&&("single"===ba.selectionType()?(ba.$(r).unmerge(Hr).unselect(["tapunselect"]),Hr.select(["tapselect"])):Hr.selected()?Hr.unselect(["tapunselect"]):Hr.select(["tapselect"]),e.redrawHint("eles",!0)),e.touchData.singleTouchMoved=!0}for(var gn=0;gn<Da.length;gn++)si[gn]=Da[gn];e.dragData.didDrag=!1,0===ve.touches.length&&(e.touchData.dragDelta=[],e.touchData.startPosition=[null,null,null,null,null,null],e.touchData.startGPosition=null,e.touchData.didSelect=!1),ve.touches.length<2&&(1===ve.touches.length&&(e.touchData.startGPosition=[ve.touches[0].clientX,ve.touches[0].clientY]),e.pinching=!1,e.redrawHint("eles",!0),e.redraw())}},!1),typeof TouchEvent>"u"){var fi=[],wi=function(ve){return{clientX:ve.clientX,clientY:ve.clientY,force:1,identifier:ve.pointerId,pageX:ve.pageX,pageY:ve.pageY,radiusX:ve.width/2,radiusY:ve.height/2,screenX:ve.screenX,screenY:ve.screenY,target:ve.target}},Hi=function(ve){for(var Hr=0;Hr<fi.length;Hr++)if(fi[Hr].event.pointerId===ve.pointerId)return void fi.splice(Hr,1)},bi=function(ve){ve.touches=fi.map(function(Hr){return Hr.touch})},ai=function(ve){return"mouse"===ve.pointerType||4===ve.pointerType};e.registerBinding(e.container,"pointerdown",function(ya){ai(ya)||(ya.preventDefault(),fi.push(function(ve){return{event:ve,touch:wi(ve)}}(ya)),bi(ya),Ci(ya))}),e.registerBinding(e.container,"pointerup",function(ya){ai(ya)||(Hi(ya),bi(ya),Ja(ya))}),e.registerBinding(e.container,"pointercancel",function(ya){ai(ya)||(Hi(ya),bi(ya),gi())}),e.registerBinding(e.container,"pointermove",function(ya){var ve,Hr;ai(ya)||(ya.preventDefault(),ve=ya,(Hr=fi.filter(function(sa){return sa.event.pointerId===ve.pointerId})[0]).event=ve,Hr.touch=wi(ve),bi(ya),xi(ya))})}};var cs={generatePolygon:function(e,t){return this.nodeShapes[e]={renderer:this,name:e,points:t,draw:function(a,i,n,s,o,u){this.renderer.nodeShapeImpl("polygon",a,i,n,s,o,this.points)},intersectLine:function(a,i,n,s,o,u,h,f){return Tn(o,u,this.points,a,i,n/2,s/2,h)},checkPoint:function(a,i,n,s,o,u,h,f){return oa(a,i,this.points,u,h,s,o,[0,-1],n)},hasMiterBounds:"rectangle"!==e,miterBounds:function(a,i,n,s,o,u){return function ot(e,t,r,a,i,n){var o=function F(e,t){if(e.length<3)throw new Error("Need at least 3 vertices");var r=function(he,be){return{x:he.x+be.x,y:he.y+be.y}},a=function(he,be){return{x:he.x-be.x,y:he.y-be.y}},i=function(he,be){return{x:he.x*be,y:he.y*be}},n=function(he,be){return he.x*be.y-he.y*be.x},s=function(he){var be=T(he.x,he.y);return 0===be?{x:0,y:0}:{x:he.x/be,y:he.y/be}},u=function(he,be,Se,De){var Oe=a(be,he),Ne=a(De,Se),Je=n(Oe,Ne);if(Math.abs(Je)<1e-9)return r(he,i(Oe,.5));var dr=n(a(Se,he),Ne)/Je;return r(he,i(Oe,dr))},h=e.map(function(Yt){return{x:Yt.x,y:Yt.y}});(function(he){for(var be=0,Se=0;Se<he.length;Se++){var De=he[Se],Oe=he[(Se+1)%he.length];be+=De.x*Oe.y-Oe.x*De.y}return be/2})(h)<0&&h.reverse();for(var f=h.length,v=[],m=0;m<f;m++){var U=a(h[(m+1)%f],h[m]),I=s({x:U.y,y:-U.x});v.push(I)}for(var K=v.map(function(Yt,he){return{p1:r(h[he],i(Yt,t)),p2:r(h[(he+1)%f],i(Yt,t))}}),Y=[],X=0;X<f;X++){var mt=K[(X-1+f)%f],ie=K[X],se=u(mt.p1,mt.p2,ie.p1,ie.p2);Y.push(se)}return Y}($n(e,t,r,a,i),n),u=Tt();return o.forEach(function(h){return At(u,h.x,h.y)}),u}(this.points,a,i,n,s,o)}}},generateEllipse:function(){return this.nodeShapes.ellipse={renderer:this,name:"ellipse",draw:function(t,r,a,i,n,s){this.renderer.nodeShapeImpl(this.name,t,r,a,i,n)},intersectLine:function(t,r,a,i,n,s,o,u){return function(t,r,a,i,n,s){var o=a-t,u=i-r;o/=n,u/=s;var h=Math.sqrt(o*o+u*u),f=h-1;if(f<0)return[];var v=f/h;return[(a-t)*v+t,(i-r)*v+r]}(n,s,t,r,a/2+o,i/2+o)},checkPoint:function(t,r,a,i,n,s,o,u){return $a(t,r,i,n,s,o,a)}}},generateRoundPolygon:function(e,t){return this.nodeShapes[e]={renderer:this,name:e,points:t,getOrCreateCorners:function(a,i,n,s,o,u,h){if(void 0!==u[h]&&u[h+"-cx"]===a&&u[h+"-cy"]===i)return u[h];u[h]=new Array(t.length/2),u[h+"-cx"]=a,u[h+"-cy"]=i;var f=n/2,v=s/2;o="auto"===o?os(n,s):o;for(var m=new Array(t.length/2),k=0;k<t.length/2;k++)m[k]={x:a+f*t[2*k],y:i+v*t[2*k+1]};var _,U,I,K,Y=m.length;for(U=m[Y-1],_=0;_<Y;_++)u[h][_]=Uc(U,I=m[_%Y],K=m[(_+1)%Y],o),U=I,I=K;return u[h]},draw:function(a,i,n,s,o,u,h){this.renderer.nodeShapeImpl("round-polygon",a,i,n,s,o,this.points,this.getOrCreateCorners(i,n,s,o,u,h,"drawCorners"))},intersectLine:function(a,i,n,s,o,u,h,f,v){return function(t,r,a,i,n,s,o,u,h){var v,f=[],m=new Array(2*a.length);h.forEach(function(Y,X){0===X?(m[m.length-2]=Y.startX,m[m.length-1]=Y.startY):(m[4*X-2]=Y.startX,m[4*X-1]=Y.startY),m[4*X]=Y.stopX,m[4*X+1]=Y.stopY,0!==(v=Wa(t,r,i,n,Y.cx,Y.cy,Y.radius)).length&&f.push(v[0],v[1])});for(var k=0;k<m.length/4;k++)0!==(v=ji(t,r,i,n,m[4*k],m[4*k+1],m[4*k+2],m[4*k+3],!1)).length&&f.push(v[0],v[1]);if(f.length>2){for(var _=[f[0],f[1]],U=Math.pow(_[0]-t,2)+Math.pow(_[1]-r,2),I=1;I<f.length/2;I++){var K=Math.pow(f[2*I]-t,2)+Math.pow(f[2*I+1]-r,2);K<=U&&(_[0]=f[2*I],_[1]=f[2*I+1],U=K)}return _}return f}(o,u,this.points,a,i,0,0,0,this.getOrCreateCorners(a,i,n,s,f,v,"corners"))},checkPoint:function(a,i,n,s,o,u,h,f,v){return function(t,r,a,i,n,s,o,u){for(var h=new Array(2*a.length),f=0;f<u.length;f++){var v=u[f];if(h[4*f+0]=v.startX,h[4*f+1]=v.startY,h[4*f+2]=v.stopX,h[4*f+3]=v.stopY,Math.pow(v.cx-t,2)+Math.pow(v.cy-r,2)<=Math.pow(v.radius,2))return!0}return Nr(t,r,h)}(a,i,this.points,0,0,0,0,this.getOrCreateCorners(u,h,s,o,f,v,"corners"))}}},generateRoundRectangle:function(){return this.nodeShapes["round-rectangle"]=this.nodeShapes.roundrectangle={renderer:this,name:"round-rectangle",points:Fi(4,0),draw:function(t,r,a,i,n,s){this.renderer.nodeShapeImpl(this.name,t,r,a,i,n,this.points,s)},intersectLine:function(t,r,a,i,n,s,o,u){return _t(n,s,t,r,a,i,o,u)},checkPoint:function(t,r,a,i,n,s,o,u){var h=i/2,f=n/2;u="auto"===u?Ui(i,n):u;var v=2*(u=Math.min(h,f,u));return!!(oa(t,r,this.points,s,o,i,n-v,[0,-1],a)||oa(t,r,this.points,s,o,i-v,n,[0,-1],a)||$a(t,r,v,v,s-h+u,o-f+u,a)||$a(t,r,v,v,s+h-u,o-f+u,a)||$a(t,r,v,v,s+h-u,o+f-u,a)||$a(t,r,v,v,s-h+u,o+f-u,a))}}},generateCutRectangle:function(){return this.nodeShapes["cut-rectangle"]=this.nodeShapes.cutrectangle={renderer:this,name:"cut-rectangle",cornerLength:8,points:Fi(4,0),draw:function(t,r,a,i,n,s){this.renderer.nodeShapeImpl(this.name,t,r,a,i,n,null,s)},generateCutTrianglePts:function(t,r,a,i,n){var s="auto"===n?this.cornerLength:n,o=r/2,u=t/2,h=a-u,f=a+u,v=i-o,m=i+o;return{topLeft:[h,v+s,h+s,v,h+s,v+s],topRight:[f-s,v,f,v+s,f-s,v+s],bottomRight:[f,m-s,f-s,m,f-s,m-s],bottomLeft:[h+s,m,h,m-s,h+s,m-s]}},intersectLine:function(t,r,a,i,n,s,o,u){var h=this.generateCutTrianglePts(a+2*o,i+2*o,t,r,u),f=[].concat.apply([],[h.topLeft.splice(0,4),h.topRight.splice(0,4),h.bottomRight.splice(0,4),h.bottomLeft.splice(0,4)]);return Tn(n,s,f,t,r)},checkPoint:function(t,r,a,i,n,s,o,u){var h="auto"===u?this.cornerLength:u;if(oa(t,r,this.points,s,o,i,n-2*h,[0,-1],a)||oa(t,r,this.points,s,o,i-2*h,n,[0,-1],a))return!0;var f=this.generateCutTrianglePts(i,n,s,o);return Nr(t,r,f.topLeft)||Nr(t,r,f.topRight)||Nr(t,r,f.bottomRight)||Nr(t,r,f.bottomLeft)}}},generateBarrel:function(){return this.nodeShapes.barrel={renderer:this,name:"barrel",points:Fi(4,0),draw:function(t,r,a,i,n,s){this.renderer.nodeShapeImpl(this.name,t,r,a,i,n)},intersectLine:function(t,r,a,i,n,s,o,u){var m=this.generateBarrelBezierPts(a+2*o,i+2*o,t,r),k=function(I){var K=d({x:I[0],y:I[1]},{x:I[2],y:I[3]},{x:I[4],y:I[5]},.15),Y=d({x:I[0],y:I[1]},{x:I[2],y:I[3]},{x:I[4],y:I[5]},.5),X=d({x:I[0],y:I[1]},{x:I[2],y:I[3]},{x:I[4],y:I[5]},.85);return[I[0],I[1],K.x,K.y,Y.x,Y.y,X.x,X.y,I[4],I[5]]},_=[].concat(k(m.topLeft),k(m.topRight),k(m.bottomRight),k(m.bottomLeft));return Tn(n,s,_,t,r)},generateBarrelBezierPts:function(t,r,a,i){var n=r/2,s=t/2,o=a-s,u=a+s,h=i-n,f=i+n,v=yl(t,r),m=v.heightOffset,k=v.widthOffset,_=v.ctrlPtOffsetPct*t,U={topLeft:[o,h+m,o+_,h,o+k,h],topRight:[u-k,h,u-_,h,u,h+m],bottomRight:[u,f-m,u-_,f,u-k,f],bottomLeft:[o+k,f,o+_,f,o,f-m]};return U.topLeft.isTop=!0,U.topRight.isTop=!0,U.bottomLeft.isBottom=!0,U.bottomRight.isBottom=!0,U},checkPoint:function(t,r,a,i,n,s,o,u){var h=yl(i,n),v=h.widthOffset;if(oa(t,r,this.points,s,o,i,n-2*h.heightOffset,[0,-1],a)||oa(t,r,this.points,s,o,i-2*v,n,[0,-1],a))return!0;for(var m=this.generateBarrelBezierPts(i,n,s,o),k=function(he,be,Se){var De=Se[4],Oe=Se[2],Ne=Se[0],Je=Se[5],dr=Se[1],gr=Math.min(De,Ne),ar=Math.max(De,Ne),Sr=Math.min(Je,dr),Ur=Math.max(Je,dr);if(gr<=he&&he<=ar&&Sr<=be&&be<=Ur){var jr=function(t,r,a){return[t-2*r+a,2*(r-t),t]}(De,Oe,Ne),Mr=function(t,r,a,i){var n=r*r-4*t*(a-=i);if(n<0)return[];var s=Math.sqrt(n),o=2*t;return[(-r+s)/o,(-r-s)/o]}(jr[0],jr[1],jr[2],he),Wr=Mr.filter(function(pa){return 0<=pa&&pa<=1});if(Wr.length>0)return Wr[0]}return null},_=Object.keys(m),U=0;U<_.length;U++){var K=m[_[U]],Y=k(t,r,K);if(null!=Y){var se=Gt(K[5],K[3],K[1],Y);if(K.isTop&&se<=r||K.isBottom&&r<=se)return!0}}return!1}}},generateBottomRoundrectangle:function(){return this.nodeShapes["bottom-round-rectangle"]=this.nodeShapes.bottomroundrectangle={renderer:this,name:"bottom-round-rectangle",points:Fi(4,0),draw:function(t,r,a,i,n,s){this.renderer.nodeShapeImpl(this.name,t,r,a,i,n,this.points,s)},intersectLine:function(t,r,a,i,n,s,o,u){var f=r-(i/2+o),k=ji(n,s,t,r,t-(a/2+o),f,t+(a/2+o),f,!1);return k.length>0?k:_t(n,s,t,r,a,i,o,u)},checkPoint:function(t,r,a,i,n,s,o,u){var h=2*(u="auto"===u?Ui(i,n):u);if(oa(t,r,this.points,s,o,i,n-h,[0,-1],a)||oa(t,r,this.points,s,o,i-h,n,[0,-1],a))return!0;var f=i/2+2*a,v=n/2+2*a;return!!(Nr(t,r,[s-f,o-v,s-f,o,s+f,o,s+f,o-v])||$a(t,r,h,h,s+i/2-u,o+n/2-u,a)||$a(t,r,h,h,s-i/2+u,o+n/2-u,a))}}},registerNodeShapes:function(){var e=this.nodeShapes={},t=this;this.generateEllipse(),this.generatePolygon("triangle",Fi(3,0)),this.generateRoundPolygon("round-triangle",Fi(3,0)),this.generatePolygon("rectangle",Fi(4,0)),e.square=e.rectangle,this.generateRoundRectangle(),this.generateCutRectangle(),this.generateBarrel(),this.generateBottomRoundrectangle();var r=[0,1,1,0,0,-1,-1,0];this.generatePolygon("diamond",r),this.generateRoundPolygon("round-diamond",r),this.generatePolygon("pentagon",Fi(5,0)),this.generateRoundPolygon("round-pentagon",Fi(5,0)),this.generatePolygon("hexagon",Fi(6,0)),this.generateRoundPolygon("round-hexagon",Fi(6,0)),this.generatePolygon("heptagon",Fi(7,0)),this.generateRoundPolygon("round-heptagon",Fi(7,0)),this.generatePolygon("octagon",Fi(8,0)),this.generateRoundPolygon("round-octagon",Fi(8,0));var a=new Array(20),i=pn(5,0),n=pn(5,Math.PI/5),s=.5*(3-Math.sqrt(5));s*=1.57;for(var o=0;o<n.length/2;o++)n[2*o]*=s,n[2*o+1]*=s;for(o=0;o<5;o++)a[4*o]=i[2*o],a[4*o+1]=i[2*o+1],a[4*o+2]=n[2*o],a[4*o+3]=n[2*o+1];a=bn(a),this.generatePolygon("star",a),this.generatePolygon("vee",[-1,-1,0,-.333,1,-1,0,1]),this.generatePolygon("rhomboid",[-1,-1,.333,-1,1,1,-.333,1]),this.generatePolygon("right-rhomboid",[-.333,-1,1,-1,.333,1,-1,1]),this.nodeShapes.concavehexagon=this.generatePolygon("concave-hexagon",[-1,-.95,-.75,0,-1,.95,1,.95,.75,0,1,-.95]);var u=[-1,-1,.25,-1,1,0,.25,1,-1,1];this.generatePolygon("tag",u),this.generateRoundPolygon("round-tag",u),e.makePolygon=function(h){var m,v="polygon-"+h.join("$");return(m=this[v])?m:t.generatePolygon(v,h)}}},mo={timeToRender:function(){return this.redrawTotalTime/this.redrawCount},redraw:function(e){e=e||Li();var t=this;void 0===t.averageRedrawTime&&(t.averageRedrawTime=0),void 0===t.lastRedrawTime&&(t.lastRedrawTime=0),void 0===t.lastDrawTime&&(t.lastDrawTime=0),t.requestedFrame=!0,t.renderOptions=e},beforeRender:function(e,t){if(!this.destroyed){null==t&&za("Priority is not optional for beforeRender");var r=this.beforeRenderCallbacks;r.push({fn:e,priority:t}),r.sort(function(a,i){return i.priority-a.priority})}}},jd=function(t,r,a){for(var i=t.beforeRenderCallbacks,n=0;n<i.length;n++)i[n].fn(r,a)};mo.startRenderLoop=function(){var e=this,t=e.cy;if(!e.renderLoopStarted){e.renderLoopStarted=!0;var r=function(i){if(!e.destroyed){if(!t.batching())if(e.requestedFrame&&!e.skipFrame){jd(e,!0,i);var n=Qr();e.render(e.renderOptions);var s=e.lastDrawTime=Qr();void 0===e.averageRedrawTime&&(e.averageRedrawTime=s-n),void 0===e.redrawCount&&(e.redrawCount=0),e.redrawCount++,void 0===e.redrawTotalTime&&(e.redrawTotalTime=0);var o=s-n;e.redrawTotalTime+=o,e.lastRedrawTime=o,e.averageRedrawTime=e.averageRedrawTime/2+o/2,e.requestedFrame=!1}else jd(e,!1,i);e.skipFrame=!1,Oa(r)}};Oa(r)}};var Xd=function(t){this.init(t)},Xs=Xd.prototype;Xs.clientFunctions=["redrawHint","render","renderTo","matchCanvasSize","nodeShapeImpl","arrowShapeImpl"],Xs.init=function(e){var t=this;t.options=e,t.cy=e.cy;var r=t.container=e.cy.container(),a=t.cy.window();if(a){var i=a.document,n=i.head,s="__________cytoscape_stylesheet",o="__________cytoscape_container",u=null!=i.getElementById(s);if(r.className.indexOf(o)<0&&(r.className=(r.className||"")+" "+o),!u){var h=i.createElement("style");h.id=s,h.textContent="."+o+" { position: relative; }",n.insertBefore(h,n.children[0])}"static"===a.getComputedStyle(r).getPropertyValue("position")&&Sa("A Cytoscape container has style position:static and so can not use UI extensions properly")}t.selection=[void 0,void 0,void 0,void 0,0],t.bezierProjPcts=[.05,.225,.4,.5,.6,.775,.95],t.hoverData={down:null,last:null,downTime:null,triggerMode:null,dragging:!1,initialPan:[null,null],capture:!1},t.dragData={possibleDragElements:[]},t.touchData={start:null,capture:!1,startPosition:[null,null,null,null,null,null],singleTouchStartTime:null,singleTouchMoved:!0,now:[null,null,null,null,null,null],earlier:[null,null,null,null,null,null]},t.redraws=0,t.showFps=e.showFps,t.debug=e.debug,t.webgl=e.webgl,t.hideEdgesOnViewport=e.hideEdgesOnViewport,t.textureOnViewport=e.textureOnViewport,t.wheelSensitivity=e.wheelSensitivity,t.motionBlurEnabled=e.motionBlur,t.forcedPixelRatio=Z(e.pixelRatio)?e.pixelRatio:null,t.motionBlur=e.motionBlur,t.motionBlurOpacity=e.motionBlurOpacity,t.motionBlurTransparency=1-t.motionBlurOpacity,t.motionBlurPxRatio=1,t.mbPxRBlurry=1,t.minMbLowQualFrames=4,t.fullQualityMb=!1,t.clearedForMotionBlur=[],t.desktopTapThreshold=e.desktopTapThreshold,t.desktopTapThreshold2=e.desktopTapThreshold*e.desktopTapThreshold,t.touchTapThreshold=e.touchTapThreshold,t.touchTapThreshold2=e.touchTapThreshold*e.touchTapThreshold,t.tapholdDuration=500,t.bindings=[],t.beforeRenderCallbacks=[],t.beforeRenderPriorities={animations:400,eleCalcs:300,eleTxrDeq:200,lyrTxrDeq:150,lyrTxrSkip:100},t.registerNodeShapes(),t.registerArrowShapes(),t.registerCalculationListeners()},Xs.notify=function(e,t){var r=this,a=r.cy;if(!this.destroyed){if("init"===e)return void r.load();if("destroy"===e)return void r.destroy();("add"===e||"remove"===e||"move"===e&&a.hasCompoundNodes()||"load"===e||"zorder"===e||"mount"===e)&&r.invalidateCachedZSortedEles(),"viewport"===e&&r.redrawHint("select",!0),"gc"===e&&r.redrawHint("gc",!0),("load"===e||"resize"===e||"mount"===e)&&(r.invalidateContainerClientCoordsCache(),r.matchCanvasSize(r.container)),r.redrawHint("eles",!0),r.redrawHint("drag",!0),this.startRenderLoop(),this.redraw()}},Xs.destroy=function(){var e=this;e.destroyed=!0,e.cy.stopAnimationLoop();for(var t=0;t<e.bindings.length;t++){var r=e.bindings[t],i=r.target;(i.off||i.removeEventListener).apply(i,r.args)}if(e.bindings=[],e.beforeRenderCallbacks=[],e.onUpdateEleCalcsFns=[],e.removeObserver&&e.removeObserver.disconnect(),e.styleObserver&&e.styleObserver.disconnect(),e.resizeObserver&&e.resizeObserver.disconnect(),e.labelCalcDiv)try{document.body.removeChild(e.labelCalcDiv)}catch{}},Xs.isHeadless=function(){return!1},[Fc,Gd,qd,js,cs,mo].forEach(function(e){G(Xs,e)});var Yc=1e3/60,Zd_setupDequeueing=function(t){return function(){var a=this,i=this.renderer;if(!a.dequeueingSetup){a.dequeueingSetup=!0;var n=Vr(function(){i.redrawHint("eles",!0),i.redrawHint("drag",!0),i.redraw()},t.deqRedrawThreshold);i.beforeRender(function(h,f){var v=Qr(),m=i.averageRedrawTime,k=i.lastRedrawTime,_=[],U=i.cy.extent(),I=i.getPixelRatio();for(h||i.flushRenderedStyleQueue();;){var K=Qr(),Y=K-v,X=K-f;if(k<Yc){if(X>=t.deqFastCost*(Yc-(h?m:0)))break}else if(h){if(Y>=t.deqCost*k||Y>=t.deqAvgCost*m)break}else if(X>=t.deqNoDrawCost*Yc)break;var ie=t.deq(a,I,U);if(!(ie.length>0))break;for(var se=0;se<ie.length;se++)_.push(ie[se])}_.length>0&&(t.onDeqd(a,_),!h&&t.shouldRedraw(a,_,I,U)&&n())},(t.priority||qa)(a))}}},rp=function(){return dt(function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Va;D(this,e),this.idsByKey=new Lt,this.keyForId=new Lt,this.cachesByLvl=new Lt,this.lvls=[],this.getKey=t,this.doesEleInvalidateKey=r},[{key:"getIdsFor",value:function(r){null==r&&za("Can not get id list for null key");var a=this.idsByKey,i=this.idsByKey.get(r);return i||(i=new ta,a.set(r,i)),i}},{key:"addIdForKey",value:function(r,a){null!=r&&this.getIdsFor(r).add(a)}},{key:"deleteIdForKey",value:function(r,a){null!=r&&this.getIdsFor(r).delete(a)}},{key:"getNumberOfIdsForKey",value:function(r){return null==r?0:this.getIdsFor(r).size}},{key:"updateKeyMappingFor",value:function(r){var a=r.id(),i=this.keyForId.get(a),n=this.getKey(r);this.deleteIdForKey(i,a),this.addIdForKey(n,a),this.keyForId.set(a,n)}},{key:"deleteKeyMappingFor",value:function(r){var a=r.id(),i=this.keyForId.get(a);this.deleteIdForKey(i,a),this.keyForId.delete(a)}},{key:"keyHasChangedFor",value:function(r){var a=r.id();return this.keyForId.get(a)!==this.getKey(r)}},{key:"isInvalid",value:function(r){return this.keyHasChangedFor(r)||this.doesEleInvalidateKey(r)}},{key:"getCachesAt",value:function(r){var a=this.cachesByLvl,i=this.lvls,n=a.get(r);return n||(n=new Lt,a.set(r,n),i.push(r)),n}},{key:"getCache",value:function(r,a){return this.getCachesAt(a).get(r)}},{key:"get",value:function(r,a){var i=this.getKey(r),n=this.getCache(i,a);return null!=n&&this.updateKeyMappingFor(r),n}},{key:"getForCachedKey",value:function(r,a){var i=this.keyForId.get(r.id());return this.getCache(i,a)}},{key:"hasCache",value:function(r,a){return this.getCachesAt(a).has(r)}},{key:"has",value:function(r,a){var i=this.getKey(r);return this.hasCache(i,a)}},{key:"setCache",value:function(r,a,i){i.key=r,this.getCachesAt(a).set(r,i)}},{key:"set",value:function(r,a,i){var n=this.getKey(r);this.setCache(n,a,i),this.updateKeyMappingFor(r)}},{key:"deleteCache",value:function(r,a){this.getCachesAt(a).delete(r)}},{key:"delete",value:function(r,a){var i=this.getKey(r);this.deleteCache(i,a)}},{key:"invalidateKey",value:function(r){var a=this;this.lvls.forEach(function(i){return a.deleteCache(r,i)})}},{key:"invalidate",value:function(r){var a=r.id(),i=this.keyForId.get(a);this.deleteKeyMappingFor(r);var n=this.doesEleInvalidateKey(r);return n&&this.invalidateKey(i),n||0===this.getNumberOfIdsForKey(i)}}])}(),Zs={dequeue:"dequeue",downscale:"downscale",highQuality:"highQuality"},vp=Me({getKey:null,doesEleInvalidateKey:Va,drawElement:null,getBoundingBox:null,getRotationPoint:null,getRotationOffset:null,isVisible:pr,allowEdgeTxrCaching:!0,allowParentTxrCaching:!0}),xo=function(t,r){var a=this;a.renderer=t,a.onDequeues=[];var i=vp(r);G(a,i),a.lookup=new rp(i.getKey,i.doesEleInvalidateKey),a.setupDequeueing()},vn=xo.prototype;vn.reasons=Zs,vn.getTextureQueue=function(e){var t=this;return t.eleImgCaches=t.eleImgCaches||{},t.eleImgCaches[e]=t.eleImgCaches[e]||[]},vn.getRetiredTextureQueue=function(e){var r=this.eleImgCaches.retired=this.eleImgCaches.retired||{};return r[e]=r[e]||[]},vn.getElementQueue=function(){return this.eleCacheQueue=this.eleCacheQueue||new Or(function(r,a){return a.reqs-r.reqs})},vn.getElementKeyToQueue=function(){return this.eleKeyToCacheQueue=this.eleKeyToCacheQueue||{}},vn.getElement=function(e,t,r,a,i){var n=this,s=this.renderer,o=s.cy.zoom(),u=this.lookup;if(!t||0===t.w||0===t.h||isNaN(t.w)||isNaN(t.h)||!e.visible()||e.removed()||!n.allowEdgeTxrCaching&&e.isEdge()||!n.allowParentTxrCaching&&e.isParent())return null;if(null==a&&(a=Math.ceil(Rn(o*r))),a<-4)a=-4;else if(o>=7.99||a>3)return null;var h=Math.pow(2,a),f=t.h*h,v=t.w*h,m=s.eleTextBiggerThanMin(e,h);if(!this.isVisible(e,m))return null;var _,k=u.get(e,a);if(k&&k.invalidated&&(k.invalidated=!1,k.texture.invalidatedWidth-=k.width),k)return k;if(_=f<=25?25:f<=50?50:50*Math.ceil(f/50),f>1024||v>1024)return null;var U=n.getTextureQueue(_),I=U[U.length-2],K=function(){return n.recycleTexture(_,v)||n.addTexture(_,v)};I||(I=U[U.length-1]),I||(I=K()),I.width-I.usedWidth<v&&(I=K());for(var se,Y=function(gr){return gr&&gr.scaledLabelShown===m},X=i&&i===Zs.dequeue,mt=i&&i===Zs.highQuality,ie=i&&i===Zs.downscale,Yt=a+1;Yt<=3;Yt++){var he=u.get(e,Yt);if(he){se=he;break}}var be=se&&se.level===a+1?se:null,Se=function(){I.context.drawImage(be.texture.canvas,be.x,0,be.width,be.height,I.usedWidth,0,v,f)};if(I.context.setTransform(1,0,0,1,0,0),I.context.clearRect(I.usedWidth,0,v,_),Y(be))Se();else if(Y(se)){if(!mt)return n.queueElement(e,se.level-1),se;for(var De=se.level;De>a;De--)be=n.getElement(e,t,r,De,Zs.downscale);Se()}else{var Oe;if(!X&&!mt&&!ie)for(var Ne=a-1;Ne>=-4;Ne--){var Je=u.get(e,Ne);if(Je){Oe=Je;break}}if(Y(Oe))return n.queueElement(e,a),Oe;I.context.translate(I.usedWidth,0),I.context.scale(h,h),this.drawElement(I.context,e,t,m,!1),I.context.scale(1/h,1/h),I.context.translate(-I.usedWidth,0)}return k={x:I.usedWidth,texture:I,level:a,scale:h,width:v,height:f,scaledLabelShown:m},I.usedWidth+=Math.ceil(v+8),I.eleCaches.push(k),u.set(e,a,k),n.checkTextureFullness(I),k},vn.invalidateElements=function(e){for(var t=0;t<e.length;t++)this.invalidateElement(e[t])},vn.invalidateElement=function(e){var t=this,r=t.lookup,a=[];if(r.isInvalid(e)){for(var n=-4;n<=3;n++){var s=r.getForCachedKey(e,n);s&&a.push(s)}if(r.invalidate(e))for(var u=0;u<a.length;u++){var h=a[u],f=h.texture;f.invalidatedWidth+=h.width,h.invalidated=!0,t.checkTextureUtility(f)}t.removeFromQueue(e)}},vn.checkTextureUtility=function(e){e.invalidatedWidth>=.2*e.width&&this.retireTexture(e)},vn.checkTextureFullness=function(e){var r=this.getTextureQueue(e.height);e.usedWidth/e.width>.8&&e.fullnessChecks>=10?at(r,e):e.fullnessChecks++},vn.retireTexture=function(e){var r=e.height,a=this.getTextureQueue(r),i=this.lookup;at(a,e),e.retired=!0;for(var n=e.eleCaches,s=0;s<n.length;s++){var o=n[s];i.deleteCache(o.key,o.level)}Dt(n),this.getRetiredTextureQueue(r).push(e)},vn.addTexture=function(e,t){var i={};return this.getTextureQueue(e).push(i),i.eleCaches=[],i.height=e,i.width=Math.max(1024,t),i.usedWidth=0,i.invalidatedWidth=0,i.fullnessChecks=0,i.canvas=this.renderer.makeOffscreenCanvas(i.width,i.height),i.context=i.canvas.getContext("2d"),i},vn.recycleTexture=function(e,t){for(var a=this.getTextureQueue(e),i=this.getRetiredTextureQueue(e),n=0;n<i.length;n++){var s=i[n];if(s.width>=t)return s.retired=!1,s.usedWidth=0,s.invalidatedWidth=0,s.fullnessChecks=0,Dt(s.eleCaches),s.context.setTransform(1,0,0,1,0,0),s.context.clearRect(0,0,s.width,s.height),at(i,s),a.push(s),s}},vn.queueElement=function(e,t){var a=this.getElementQueue(),i=this.getElementKeyToQueue(),n=this.getKey(e),s=i[n];if(s)s.level=Math.max(s.level,t),s.eles.merge(e),s.reqs++,a.updateItem(s);else{var o={eles:e.spawn().merge(e),level:t,reqs:1,key:n};a.push(o),i[n]=o}},vn.dequeue=function(e){for(var t=this,r=t.getElementQueue(),a=t.getElementKeyToQueue(),i=[],n=t.lookup,s=0;s<1&&r.size()>0;s++){var o=r.pop(),u=o.key,h=o.eles[0],f=n.hasCache(h,o.level);if(a[u]=null,!f){i.push(o);var v=t.getBoundingBox(h);t.getElement(h,v,e,o.level,Zs.dequeue)}}return i},vn.removeFromQueue=function(e){var r=this.getElementQueue(),a=this.getElementKeyToQueue(),i=this.getKey(e),n=a[i];null!=n&&(1===n.eles.length?(n.reqs=Fa,r.updateItem(n),r.pop(),a[i]=null):n.eles.unmerge(e))},vn.onDequeue=function(e){this.onDequeues.push(e)},vn.offDequeue=function(e){at(this.onDequeues,e)},vn.setupDequeueing=Zd_setupDequeueing({deqRedrawThreshold:100,deqCost:.15,deqAvgCost:.1,deqNoDrawCost:.9,deqFastCost:.9,deq:function(t,r,a){return t.dequeue(r,a)},onDeqd:function(t,r){for(var a=0;a<t.onDequeues.length;a++)(0,t.onDequeues[a])(r)},shouldRedraw:function(t,r,a,i){for(var n=0;n<r.length;n++)for(var s=r[n].eles,o=0;o<s.length;o++){var u=s[o].boundingBox();if(pe(u,i))return!0}return!1},priority:function(t){return t.renderer.beforeRenderPriorities.eleTxrDeq}});var r0=function(t){var r=this,a=r.renderer=t,i=a.cy;r.layersByLevel={},r.firstGet=!0,r.lastInvalidationTime=Qr()-500,r.skipping=!1,r.eleTxrDeqs=i.collection(),r.scheduleElementRefinement=Vr(function(){r.refineElementTextures(r.eleTxrDeqs),r.eleTxrDeqs.unmerge(r.eleTxrDeqs)},50),a.beforeRender(function(s,o){r.skipping=o-r.lastInvalidationTime<=250},a.beforeRenderPriorities.lyrTxrSkip),r.layersQueue=new Or(function(o,u){return u.reqs-o.reqs}),r.setupDequeueing()},An=r0.prototype,a0=0,Ap=Math.pow(2,53)-1;An.makeLayer=function(e,t){var r=Math.pow(2,t),a=Math.ceil(e.w*r),i=Math.ceil(e.h*r),n=this.renderer.makeOffscreenCanvas(a,i),s={id:a0=++a0%Ap,bb:e,level:t,width:a,height:i,canvas:n,context:n.getContext("2d"),eles:[],elesQueue:[],reqs:0},o=s.context,u=-s.bb.x1,h=-s.bb.y1;return o.scale(r,r),o.translate(u,h),s},An.getLayers=function(e,t,r){var a=this,s=a.renderer.cy.zoom(),o=a.firstGet;if(a.firstGet=!1,null==r)if((r=Math.ceil(Rn(s*t)))<-4)r=-4;else if(s>=3.99||r>2)return null;a.validateLayersElesOrdering(r,e);var v,k,u=a.layersByLevel,h=Math.pow(2,r),f=u[r]=u[r]||[];if(a.levelIsComplete(r,e))return f;!function(){var Se=function(dr){if(a.validateLayersElesOrdering(dr,e),a.levelIsComplete(dr,e))return k=u[dr],!0},De=function(dr){if(!k)for(var gr=r+dr;-4<=gr&&gr<=2&&!Se(gr);gr+=dr);};De(1),De(-1);for(var Oe=f.length-1;Oe>=0;Oe--){var Ne=f[Oe];Ne.invalid&&at(f,Ne)}}();var I=function(Se){var De=(Se=Se||{}).after;!function(){if(!v){v=Tt();for(var Se=0;Se<e.length;Se++)nt(v,e[Se].boundingBox())}}();var Oe=Math.ceil(v.w*h),Ne=Math.ceil(v.h*h);if(Oe>32767||Ne>32767)return null;if(Oe*Ne>16e6)return null;var dr=a.makeLayer(v,r);if(null!=De){var gr=f.indexOf(De)+1;f.splice(gr,0,dr)}else(void 0===Se.insert||Se.insert)&&f.unshift(dr);return dr};if(a.skipping&&!o)return null;for(var K=null,Y=e.length/1,X=!o,mt=0;mt<e.length;mt++){var ie=e[mt],se=ie._private.rscratch,Yt=se.imgLayerCaches=se.imgLayerCaches||{},he=Yt[r];if(he)K=he;else{if((!K||K.eles.length>=Y||!l(K.bb,ie.boundingBox()))&&!(K=I({insert:!0,after:K})))return null;k||X?a.queueLayer(K,ie):a.drawEleInLayer(K,ie,r,t),K.eles.push(ie),Yt[r]=K}}return k||(X?null:f)},An.getEleLevelForLayerLevel=function(e,t){return e},An.drawEleInLayer=function(e,t,r,a){var n=this.renderer,s=e.context,o=t.boundingBox();0===o.w||0===o.h||!t.visible()||(r=this.getEleLevelForLayerLevel(r,a),n.setImgSmoothing(s,!1),n.drawCachedElement(s,t,null,null,r,!0),n.setImgSmoothing(s,!0))},An.levelIsComplete=function(e,t){var a=this.layersByLevel[e];if(!a||0===a.length)return!1;for(var i=0,n=0;n<a.length;n++){var s=a[n];if(s.reqs>0||s.invalid)return!1;i+=s.eles.length}return i===t.length},An.validateLayersElesOrdering=function(e,t){var r=this.layersByLevel[e];if(r)for(var a=0;a<r.length;a++){for(var i=r[a],n=-1,s=0;s<t.length;s++)if(i.eles[0]===t[s]){n=s;break}if(n<0)this.invalidateLayer(i);else{var o=n;for(s=0;s<i.eles.length;s++)if(i.eles[s]!==t[o+s]){this.invalidateLayer(i);break}}}},An.updateElementsInLayers=function(e,t){for(var a=Pt(e[0]),i=0;i<e.length;i++)for(var n=a?null:e[i],s=a?e[i]:e[i].ele,o=s._private.rscratch,u=o.imgLayerCaches=o.imgLayerCaches||{},h=-4;h<=2;h++){var f=u[h];f&&(n&&this.getEleLevelForLayerLevel(f.level)!==n.level||t(f,s,n))}},An.haveLayers=function(){for(var t=!1,r=-4;r<=2;r++){var a=this.layersByLevel[r];if(a&&a.length>0){t=!0;break}}return t},An.invalidateElements=function(e){var t=this;0!==e.length&&(t.lastInvalidationTime=Qr(),0!==e.length&&t.haveLayers()&&t.updateElementsInLayers(e,function(a,i,n){t.invalidateLayer(a)}))},An.invalidateLayer=function(e){if(this.lastInvalidationTime=Qr(),!e.invalid){var t=e.level,r=e.eles;at(this.layersByLevel[t],e),e.elesQueue=[],e.invalid=!0,e.replacement&&(e.replacement.invalid=!0);for(var i=0;i<r.length;i++){var n=r[i]._private.rscratch.imgLayerCaches;n&&(n[t]=null)}}},An.refineElementTextures=function(e){var t=this;t.updateElementsInLayers(e,function(a,i,n){var s=a.replacement;if(s||((s=a.replacement=t.makeLayer(a.bb,a.level)).replaces=a,s.eles=a.eles),!s.reqs)for(var o=0;o<s.eles.length;o++)t.queueLayer(s,s.eles[o])})},An.enqueueElementRefinement=function(e){this.eleTxrDeqs.merge(e),this.scheduleElementRefinement()},An.queueLayer=function(e,t){var a=this.layersQueue,i=e.elesQueue,n=i.hasId=i.hasId||{};if(!e.replacement){if(t){if(n[t.id()])return;i.push(t),n[t.id()]=!0}e.reqs?(e.reqs++,a.updateItem(e)):(e.reqs=1,a.push(e))}},An.dequeue=function(e){for(var t=this,r=t.layersQueue,a=[],i=0;i<1&&0!==r.size();){var n=r.peek();if(n.replacement)r.pop();else if(n.replaces&&n!==n.replaces.replacement)r.pop();else if(n.invalid)r.pop();else{var s=n.elesQueue.shift();s&&(t.drawEleInLayer(n,s,n.level,e),i++),0===a.length&&a.push(!0),0===n.elesQueue.length&&(r.pop(),n.reqs=0,n.replaces&&t.applyLayerReplacement(n),t.requestRedraw())}}return a},An.applyLayerReplacement=function(e){var r=this.layersByLevel[e.level],a=e.replaces,i=r.indexOf(a);if(!(i<0||a.invalid)){r[i]=e;for(var n=0;n<e.eles.length;n++){var s=e.eles[n]._private,o=s.imgLayerCaches=s.imgLayerCaches||{};o&&(o[e.level]=e)}this.requestRedraw()}},An.requestRedraw=Vr(function(){var e=this.renderer;e.redrawHint("eles",!0),e.redrawHint("drag",!0),e.redraw()},100),An.setupDequeueing=Zd_setupDequeueing({deqRedrawThreshold:50,deqCost:.15,deqAvgCost:.1,deqNoDrawCost:.9,deqFastCost:.9,deq:function(t,r){return t.dequeue(r)},onDeqd:qa,shouldRedraw:pr,priority:function(t){return t.renderer.beforeRenderPriorities.lyrTxrDeq}});var n0,i0={};function Dp(e,t){for(var r=0;r<t.length;r++){var a=t[r];e.lineTo(a.x,a.y)}}function Lp(e,t,r){for(var a,i=0;i<t.length;i++){var n=t[i];0===i&&(a=n),e.lineTo(n.x,n.y)}e.quadraticCurveTo(r.x,r.y,a.x,a.y)}function s0(e,t,r){e.beginPath&&e.beginPath();for(var a=t,i=0;i<a.length;i++)e.lineTo((n=a[i]).x,n.y);var s=r,o=r[0];for(e.moveTo(o.x,o.y),i=1;i<s.length;i++){var n;e.lineTo((n=s[i]).x,n.y)}e.closePath&&e.closePath()}function Bp(e,t,r,a,i){e.beginPath&&e.beginPath(),e.arc(r,a,i,0,2*Math.PI,!1);var n=t,s=n[0];e.moveTo(s.x,s.y);for(var o=0;o<n.length;o++){var u=n[o];e.lineTo(u.x,u.y)}e.closePath&&e.closePath()}function Rp(e,t,r,a){e.arc(t,r,a,0,2*Math.PI,!1)}i0.arrowShapeImpl=function(e){return(n0||(n0={polygon:Dp,"triangle-backcurve":Lp,"triangle-tee":s0,"circle-triangle":Bp,"triangle-cross":s0,circle:Rp}))[e]};var ns={drawElement:function(e,t,r,a,i,n){t.isNode()?this.drawNode(e,t,r,a,i,n):this.drawEdge(e,t,r,a,i,n)},drawElementOverlay:function(e,t){t.isNode()?this.drawNodeOverlay(e,t):this.drawEdgeOverlay(e,t)},drawElementUnderlay:function(e,t){t.isNode()?this.drawNodeUnderlay(e,t):this.drawEdgeUnderlay(e,t)},drawCachedElementPortion:function(e,t,r,a,i,n,s,o){var u=this,h=r.getBoundingBox(t);if(0!==h.w&&0!==h.h){var f=r.getElement(t,h,a,i,n);if(null!=f){var v=o(u,t);if(0===v)return;var K,Y,X,mt,ie,he,m=s(u,t),k=h.x1,_=h.y1,U=h.w,I=h.h;if(0!==m){var se=r.getRotationPoint(t);e.translate(X=se.x,mt=se.y),e.rotate(m),(ie=u.getImgSmoothing(e))||u.setImgSmoothing(e,!0);var Yt=r.getRotationOffset(t);K=Yt.x,Y=Yt.y}else K=k,Y=_;1!==v&&(e.globalAlpha=(he=e.globalAlpha)*v),e.drawImage(f.texture.canvas,f.x,0,f.width,f.height,K,Y,U,I),1!==v&&(e.globalAlpha=he),0!==m&&(e.rotate(-m),e.translate(-X,-mt),ie||u.setImgSmoothing(e,!1))}else r.drawElement(e,t)}}},Pp=function(){return 0},Mp=function(t,r){return t.getTextAngle(r,null)},Ip=function(t,r){return t.getTextAngle(r,"source")},Op=function(t,r){return t.getTextAngle(r,"target")},Np=function(t,r){return r.effectiveOpacity()},Gc=function(t,r){return r.pstyle("text-opacity").pfValue*r.effectiveOpacity()};ns.drawCachedElement=function(e,t,r,a,i,n){var s=this,o=s.data,u=o.eleTxrCache,h=o.lblTxrCache,f=o.slbTxrCache,v=o.tlbTxrCache,m=t.boundingBox(),k=!0===n?u.reasons.highQuality:null;if(0!==m.w&&0!==m.h&&t.visible()&&(!a||pe(m,a))){var _=t.isEdge(),U=t.element()._private.rscratch.badLine;s.drawElementUnderlay(e,t),s.drawCachedElementPortion(e,t,u,r,i,k,Pp,Np),(!_||!U)&&s.drawCachedElementPortion(e,t,h,r,i,k,Mp,Gc),_&&!U&&(s.drawCachedElementPortion(e,t,f,r,i,k,Ip,Gc),s.drawCachedElementPortion(e,t,v,r,i,k,Op,Gc)),s.drawElementOverlay(e,t)}},ns.drawElements=function(e,t){for(var a=0;a<t.length;a++)this.drawElement(e,t[a])},ns.drawCachedElements=function(e,t,r,a){for(var n=0;n<t.length;n++)this.drawCachedElement(e,t[n],r,a)},ns.drawCachedNodes=function(e,t,r,a){for(var n=0;n<t.length;n++){var s=t[n];s.isNode()&&this.drawCachedElement(e,s,r,a)}},ns.drawLayeredElements=function(e,t,r,a){var n=this.data.lyrTxrCache.getLayers(t,r);if(n)for(var s=0;s<n.length;s++){var o=n[s],u=o.bb;0===u.w||0===u.h||e.drawImage(o.canvas,u.x1,u.y1,u.w,u.h)}else this.drawCachedElements(e,t,r,a)};var hs={drawEdge:function(e,t,r){var a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],n=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],s=this,o=t._private.rscratch;if((!n||t.visible())&&!o.badLine&&null!=o.allpts&&!isNaN(o.allpts[0])){var u;r&&e.translate(-(u=r).x1,-u.y1);var h=n?t.pstyle("opacity").value:1,f=n?t.pstyle("line-opacity").value:1,v=t.pstyle("curve-style").value,m=t.pstyle("line-style").value,k=t.pstyle("width").pfValue,_=t.pstyle("line-cap").value,U=t.pstyle("line-outline-width").value,I=t.pstyle("line-outline-color").value,K=h*f,Y=h*f,X=function(){var dr=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K;"straight-triangle"===v?(s.eleStrokeStyle(e,t,dr),s.drawEdgeTrianglePath(t,e,o.allpts)):(e.lineWidth=k,e.lineCap=_,s.eleStrokeStyle(e,t,dr),s.drawEdgePath(t,e,o.allpts,m),e.lineCap="butt")},Yt=function(){s.drawArrowheads(e,t,arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y)};if(e.lineJoin="round","yes"===t.pstyle("ghost").value){var Se=t.pstyle("ghost-offset-x").pfValue,De=t.pstyle("ghost-offset-y").pfValue,Oe=t.pstyle("ghost-opacity").value,Ne=K*Oe;e.translate(Se,De),X(Ne),Yt(Ne),e.translate(-Se,-De)}else!function(){var dr=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K;e.lineWidth=k+U,e.lineCap=_,U>0?(s.colorStrokeStyle(e,I[0],I[1],I[2],dr),"straight-triangle"===v?s.drawEdgeTrianglePath(t,e,o.allpts):(s.drawEdgePath(t,e,o.allpts,m),e.lineCap="butt")):e.lineCap="butt"}();i&&s.drawEdgeUnderlay(e,t),X(),Yt(),i&&s.drawEdgeOverlay(e,t),s.drawElementText(e,t,null,a),r&&e.translate(u.x1,u.y1)}}},o0=function(t){if(!["overlay","underlay"].includes(t))throw new Error("Invalid state");return function(r,a){if(a.visible()){var i=a.pstyle("".concat(t,"-opacity")).value;if(0!==i){var n=this,s=n.usePaths(),o=a._private.rscratch,h=2*a.pstyle("".concat(t,"-padding")).pfValue,f=a.pstyle("".concat(t,"-color")).value;r.lineWidth=h,r.lineCap="self"!==o.edgeType||s?"round":"butt",n.colorStrokeStyle(r,f[0],f[1],f[2],i),n.drawEdgePath(a,r,o.allpts,"solid")}}}};hs.drawEdgeOverlay=o0("overlay"),hs.drawEdgeUnderlay=o0("underlay"),hs.drawEdgePath=function(e,t,r,a){var s,i=e._private.rscratch,n=t,o=!1,u=this.usePaths(),h=e.pstyle("line-dash-pattern").pfValue,f=e.pstyle("line-dash-offset").pfValue;if(u){var v=r.join("$");i.pathCacheKey&&i.pathCacheKey===v?(s=t=i.pathCache,o=!0):(s=t=new Path2D,i.pathCacheKey=v,i.pathCache=s)}if(n.setLineDash)switch(a){case"dotted":n.setLineDash([1,1]);break;case"dashed":n.setLineDash(h),n.lineDashOffset=f;break;case"solid":n.setLineDash([])}if(!o&&!i.badLine)switch(t.beginPath&&t.beginPath(),t.moveTo(r[0],r[1]),i.edgeType){case"bezier":case"self":case"compound":case"multibezier":for(var k=2;k+3<r.length;k+=4)t.quadraticCurveTo(r[k],r[k+1],r[k+2],r[k+3]);break;case"straight":case"haystack":for(var _=2;_+1<r.length;_+=2)t.lineTo(r[_],r[_+1]);break;case"segments":if(i.isRound){var I,U=q(i.roundCorners);try{for(U.s();!(I=U.n()).done;)Wd(t,I.value)}catch(X){U.e(X)}finally{U.f()}t.lineTo(r[r.length-2],r[r.length-1])}else for(var Y=2;Y+1<r.length;Y+=2)t.lineTo(r[Y],r[Y+1])}t=n,u?t.stroke(s):t.stroke(),t.setLineDash&&t.setLineDash([])},hs.drawEdgeTrianglePath=function(e,t,r){t.fillStyle=t.strokeStyle;for(var a=e.pstyle("width").pfValue,i=0;i+1<r.length;i+=2){var n=[r[i+2]-r[i],r[i+3]-r[i+1]],s=Math.sqrt(n[0]*n[0]+n[1]*n[1]),o=[n[1]/s,-n[0]/s],u=[o[0]*a/2,o[1]*a/2];t.beginPath(),t.moveTo(r[i]-u[0],r[i+1]-u[1]),t.lineTo(r[i]+u[0],r[i+1]+u[1]),t.lineTo(r[i+2],r[i+3]),t.closePath(),t.fill()}},hs.drawArrowheads=function(e,t,r){var a=t._private.rscratch,i="haystack"===a.edgeType;i||this.drawArrowhead(e,t,"source",a.arrowStartX,a.arrowStartY,a.srcArrowAngle,r),this.drawArrowhead(e,t,"mid-target",a.midX,a.midY,a.midtgtArrowAngle,r),this.drawArrowhead(e,t,"mid-source",a.midX,a.midY,a.midsrcArrowAngle,r),i||this.drawArrowhead(e,t,"target",a.arrowEndX,a.arrowEndY,a.tgtArrowAngle,r)},hs.drawArrowhead=function(e,t,r,a,i,n,s){if(!(isNaN(a)||null==a||isNaN(i)||null==i||isNaN(n)||null==n)){var o=this,u=t.pstyle(r+"-arrow-shape").value;if("none"!==u){var h="hollow"===t.pstyle(r+"-arrow-fill").value?"both":"filled",f=t.pstyle(r+"-arrow-fill").value,v=t.pstyle("width").pfValue,m=t.pstyle(r+"-arrow-width"),k="match-line"===m.value?v:m.pfValue;"%"===m.units&&(k*=v);var _=t.pstyle("opacity").value;void 0===s&&(s=_);var U=e.globalCompositeOperation;(1!==s||"hollow"===f)&&(e.globalCompositeOperation="destination-out",o.colorFillStyle(e,255,255,255,1),o.colorStrokeStyle(e,255,255,255,1),o.drawArrowShape(t,e,h,v,u,k,a,i,n),e.globalCompositeOperation=U);var I=t.pstyle(r+"-arrow-color").value;o.colorFillStyle(e,I[0],I[1],I[2],s),o.colorStrokeStyle(e,I[0],I[1],I[2],s),o.drawArrowShape(t,e,f,v,u,k,a,i,n)}}},hs.drawArrowShape=function(e,t,r,a,i,n,s,o,u){var m,h=this,f=this.usePaths()&&"triangle-cross"!==i,v=!1,k=t,_={x:s,y:o},U=e.pstyle("arrow-scale").value,I=this.getArrowWidth(a,U),K=h.arrowShapes[i];if(f){var Y=h.arrowPathCache=h.arrowPathCache||[],X=ga(i),mt=Y[X];null!=mt?(m=t=mt,v=!0):(m=t=new Path2D,Y[X]=m)}v||(t.beginPath&&t.beginPath(),f?K.draw(t,1,0,{x:0,y:0},1):K.draw(t,I,u,_,a),t.closePath&&t.closePath()),t=k,f&&(t.translate(s,o),t.rotate(u),t.scale(I,I)),("filled"===r||"both"===r)&&(f?t.fill(m):t.fill()),("hollow"===r||"both"===r)&&(t.lineWidth=n/(f?I:1),t.lineJoin="miter",f?t.stroke(m):t.stroke()),f&&(t.scale(1/I,1/I),t.rotate(-u),t.translate(-s,-o))};var qc={safeDrawImage:function(e,t,r,a,i,n,s,o,u,h){if(!(i<=0||n<=0||u<=0||h<=0))try{e.drawImage(t,r,a,i,n,s,o,u,h)}catch(f){Sa(f)}},drawInscribedImage:function(e,t,r,a,i){var n=this,s=r.position(),o=s.x,u=s.y,h=r.cy().style(),f=h.getIndexedStyle.bind(h),v=f(r,"background-fit","value",a),m=f(r,"background-repeat","value",a),k=r.width(),_=r.height(),U=2*r.padding(),I=k+("inner"===f(r,"background-width-relative-to","value",a)?0:U),K=_+("inner"===f(r,"background-height-relative-to","value",a)?0:U),Y=r._private.rscratch,mt="node"===f(r,"background-clip","value",a),ie=f(r,"background-image-opacity","value",a)*i,se=f(r,"background-image-smoothing","value",a),Yt=r.pstyle("corner-radius").value;"auto"!==Yt&&(Yt=r.pstyle("corner-radius").pfValue);var he=t.width||t.cachedW,be=t.height||t.cachedH;(null==he||null==be)&&(document.body.appendChild(t),he=t.cachedW=t.width||t.offsetWidth,be=t.cachedH=t.height||t.offsetHeight,document.body.removeChild(t));var Se=he,De=be;if("auto"!==f(r,"background-width","value",a)&&(Se="%"===f(r,"background-width","units",a)?f(r,"background-width","pfValue",a)*I:f(r,"background-width","pfValue",a)),"auto"!==f(r,"background-height","value",a)&&(De="%"===f(r,"background-height","units",a)?f(r,"background-height","pfValue",a)*K:f(r,"background-height","pfValue",a)),0!==Se&&0!==De){if("contain"===v)Se*=Oe=Math.min(I/Se,K/De),De*=Oe;else if("cover"===v){var Oe;Se*=Oe=Math.max(I/Se,K/De),De*=Oe}var Ne=o-I/2,Je=f(r,"background-position-x","units",a),dr=f(r,"background-position-x","pfValue",a);Ne+="%"===Je?(I-Se)*dr:dr;var gr=f(r,"background-offset-x","units",a),ar=f(r,"background-offset-x","pfValue",a);Ne+="%"===gr?(I-Se)*ar:ar;var Sr=u-K/2,Ur=f(r,"background-position-y","units",a),jr=f(r,"background-position-y","pfValue",a);Sr+="%"===Ur?(K-De)*jr:jr;var Mr=f(r,"background-offset-y","units",a),Wr=f(r,"background-offset-y","pfValue",a);Sr+="%"===Mr?(K-De)*Wr:Wr,Y.pathCache&&(Ne-=o,Sr-=u,o=0,u=0);var pa=e.globalAlpha;e.globalAlpha=ie;var Ea=n.getImgSmoothing(e),va=!1;if("no"===se&&Ea?(n.setImgSmoothing(e,!1),va=!0):"yes"===se&&!Ea&&(n.setImgSmoothing(e,!0),va=!0),"no-repeat"===m)mt&&(e.save(),Y.pathCache?e.clip(Y.pathCache):(n.nodeShapes[n.getNodeShape(r)].draw(e,o,u,I,K,Yt,Y),e.clip())),n.safeDrawImage(e,t,0,0,he,be,Ne,Sr,Se,De),mt&&e.restore();else{var Aa=e.createPattern(t,m);e.fillStyle=Aa,n.nodeShapes[n.getNodeShape(r)].draw(e,o,u,I,K,Yt,Y),e.translate(Ne,Sr),e.fill(),e.translate(-Ne,-Sr)}e.globalAlpha=pa,va&&n.setImgSmoothing(e,Ea)}}},Ls={};function l0(e,t,r,a,i){var s=Math.min(arguments.length>5&&void 0!==arguments[5]?arguments[5]:5,a/2,i/2);e.beginPath(),e.moveTo(t+s,r),e.lineTo(t+a-s,r),e.quadraticCurveTo(t+a,r,t+a,r+s),e.lineTo(t+a,r+i-s),e.quadraticCurveTo(t+a,r+i,t+a-s,r+i),e.lineTo(t+s,r+i),e.quadraticCurveTo(t,r+i,t,r+i-s),e.lineTo(t,r+s),e.quadraticCurveTo(t,r,t+s,r),e.closePath()}Ls.eleTextBiggerThanMin=function(e,t){if(!t){var r=e.cy().zoom(),a=this.getPixelRatio(),i=Math.ceil(Rn(r*a));t=Math.pow(2,i)}return!(e.pstyle("font-size").pfValue*t<e.pstyle("min-zoomed-font-size").pfValue)},Ls.drawElementText=function(e,t,r,a,i){var n=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],s=this;if(null==a){if(n&&!s.eleTextBiggerThanMin(t))return}else if(!1===a)return;if(t.isNode()){var o=t.pstyle("label");if(!o||!o.value)return;var u=s.getLabelJustification(t);e.textAlign=u,e.textBaseline="bottom"}else{var h=t.element()._private.rscratch.badLine,f=t.pstyle("label"),v=t.pstyle("source-label"),m=t.pstyle("target-label");if(h||(!f||!f.value)&&(!v||!v.value)&&(!m||!m.value))return;e.textAlign="center",e.textBaseline="bottom"}var _,k=!r;r&&e.translate(-(_=r).x1,-_.y1),null==i?(s.drawText(e,t,null,k,n),t.isEdge()&&(s.drawText(e,t,"source",k,n),s.drawText(e,t,"target",k,n))):s.drawText(e,t,i,k,n),r&&e.translate(_.x1,_.y1)},Ls.getFontCache=function(e){var t;this.fontCaches=this.fontCaches||[];for(var r=0;r<this.fontCaches.length;r++)if((t=this.fontCaches[r]).context===e)return t;return this.fontCaches.push(t={context:e}),t},Ls.setupTextStyle=function(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=t.pstyle("font-style").strValue,i=t.pstyle("font-size").pfValue+"px",n=t.pstyle("font-family").strValue,s=t.pstyle("font-weight").strValue,o=r?t.effectiveOpacity()*t.pstyle("text-opacity").value:1,u=t.pstyle("text-outline-opacity").value*o,h=t.pstyle("color").value,f=t.pstyle("text-outline-color").value;e.font=a+" "+s+" "+i+" "+n,e.lineJoin="round",this.colorFillStyle(e,h[0],h[1],h[2],o),this.colorStrokeStyle(e,f[0],f[1],f[2],u)},Ls.getTextAngle=function(e,t){var r,i=e._private.rscratch,s=e.pstyle((t?t+"-":"")+"text-rotation");if("autorotate"===s.strValue){var o=jt(i,"labelAngle",t);r=e.isEdge()?o:0}else r="none"===s.strValue?0:s.pfValue;return r},Ls.drawText=function(e,t,r){var a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],s=t._private.rscratch,o=i?t.effectiveOpacity():1;if(!i||0!==o&&0!==t.pstyle("text-opacity").value){"main"===r&&(r=null);var f,v,u=jt(s,"labelX",r),h=jt(s,"labelY",r),m=this.getLabelText(t,r);if(null!=m&&""!==m&&!isNaN(u)&&!isNaN(h)){this.setupTextStyle(e,t,i);var ie,k=r?r+"-":"",_=jt(s,"labelWidth",r),U=jt(s,"labelHeight",r),I=t.pstyle(k+"text-margin-x").pfValue,K=t.pstyle(k+"text-margin-y").pfValue,Y=t.isEdge(),X=t.pstyle("text-halign").value,mt=t.pstyle("text-valign").value;switch(Y&&(X="center",mt="center"),u+=I,h+=K,0!==(ie=a?this.getTextAngle(t,r):0)&&(e.translate(f=u,v=h),e.rotate(ie),u=0,h=0),mt){case"top":break;case"center":h+=U/2;break;case"bottom":h+=U}var se=t.pstyle("text-background-opacity").value,Yt=t.pstyle("text-border-opacity").value,he=t.pstyle("text-border-width").pfValue,be=t.pstyle("text-background-padding").pfValue,Se=t.pstyle("text-background-shape").strValue,De="round-rectangle"===Se||"roundrectangle"===Se,Oe="circle"===Se;if(se>0||he>0&&Yt>0){var Je=e.fillStyle,dr=e.strokeStyle,gr=e.lineWidth,ar=t.pstyle("text-background-color").value,Sr=t.pstyle("text-border-color").value,Ur=t.pstyle("text-border-style").value,jr=se>0,Mr=he>0&&Yt>0,Wr=u-be;switch(X){case"left":Wr-=_;break;case"center":Wr-=_/2}var pa=h-U-be,Ea=_+2*be,va=U+2*be;if(jr&&(e.fillStyle="rgba(".concat(ar[0],",").concat(ar[1],",").concat(ar[2],",").concat(se*o,")")),Mr&&(e.strokeStyle="rgba(".concat(Sr[0],",").concat(Sr[1],",").concat(Sr[2],",").concat(Yt*o,")"),e.lineWidth=he,e.setLineDash))switch(Ur){case"dotted":e.setLineDash([1,1]);break;case"dashed":e.setLineDash([4,2]);break;case"double":e.lineWidth=he/4,e.setLineDash([]);break;default:e.setLineDash([])}if(De?(e.beginPath(),l0(e,Wr,pa,Ea,va,2)):Oe?(e.beginPath(),function Fp(e,t,r,a,i){var s=Math.min(a,i)/2,o=t+a/2,u=r+i/2;e.beginPath(),e.arc(o,u,s,0,2*Math.PI),e.closePath()}(e,Wr,pa,Ea,va)):(e.beginPath(),e.rect(Wr,pa,Ea,va)),jr&&e.fill(),Mr&&e.stroke(),Mr&&"double"===Ur){var Aa=he/2;e.beginPath(),De?l0(e,Wr+Aa,pa+Aa,Ea-2*Aa,va-2*Aa,2):e.rect(Wr+Aa,pa+Aa,Ea-2*Aa,va-2*Aa),e.stroke()}e.fillStyle=Je,e.strokeStyle=dr,e.lineWidth=gr,e.setLineDash&&e.setLineDash([])}var Ia=2*t.pstyle("text-outline-width").pfValue;if(Ia>0&&(e.lineWidth=Ia),"wrap"===t.pstyle("text-wrap").value){var Qa=jt(s,"labelWrapCachedLines",r),Ta=jt(s,"labelLineHeight",r),Kr=_/2,$r=this.getLabelJustification(t);switch("auto"===$r||("left"===X?"left"===$r?u+=-_:"center"===$r&&(u+=-Kr):"center"===X?"left"===$r?u+=-Kr:"right"===$r&&(u+=Kr):"right"===X&&("center"===$r?u+=Kr:"right"===$r&&(u+=_))),mt){case"top":case"center":case"bottom":h-=(Qa.length-1)*Ta}for(var ea=0;ea<Qa.length;ea++)Ia>0&&e.strokeText(Qa[ea],u,h),e.fillText(Qa[ea],u,h),h+=Ta}else Ia>0&&e.strokeText(m,u,h),e.fillText(m,u,h);0!==ie&&(e.rotate(-ie),e.translate(-f,-v))}}};var _s={drawNode:function(e,t,r){var o,u,a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],n=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],s=this,h=t._private,f=h.rscratch,v=t.position();if(Z(v.x)&&Z(v.y)&&(!n||t.visible())){var _,K,m=n?t.effectiveOpacity():1,k=s.usePaths(),U=!1,I=t.padding();o=t.width()+2*I,u=t.height()+2*I,r&&e.translate(-(K=r).x1,-K.y1);for(var X=t.pstyle("background-image").value,mt=new Array(X.length),ie=new Array(X.length),se=0,Yt=0;Yt<X.length;Yt++){var he=X[Yt];if(mt[Yt]=null!=he&&"none"!==he){var Se=t.cy().style().getIndexedStyle(t,"background-image-crossorigin","value",Yt);se++,ie[Yt]=s.getCachedImage(he,Se,function(){h.backgroundTimestamp=Date.now(),t.emitAndNotify("background")})}}var De=t.pstyle("background-blacken").value,Oe=t.pstyle("border-width").pfValue,Ne=t.pstyle("background-opacity").value*m,Je=t.pstyle("border-color").value,dr=t.pstyle("border-style").value,gr=t.pstyle("border-join").value,ar=t.pstyle("border-cap").value,Sr=t.pstyle("border-position").value,Ur=t.pstyle("border-dash-pattern").pfValue,jr=t.pstyle("border-dash-offset").pfValue,Mr=t.pstyle("border-opacity").value*m,Wr=t.pstyle("outline-width").pfValue,pa=t.pstyle("outline-color").value,Ea=t.pstyle("outline-style").value,va=t.pstyle("outline-opacity").value*m,Aa=t.pstyle("outline-offset").value,Ia=t.pstyle("corner-radius").value;"auto"!==Ia&&(Ia=t.pstyle("corner-radius").pfValue);var Qa=function(){s.eleFillStyle(e,t,arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ne)},Ta=function(){s.colorStrokeStyle(e,Je[0],Je[1],Je[2],arguments.length>0&&void 0!==arguments[0]?arguments[0]:Mr)},Kr=function(){s.colorStrokeStyle(e,pa[0],pa[1],pa[2],arguments.length>0&&void 0!==arguments[0]?arguments[0]:va)},$r=function(ai,ya,ve,Hr){var ri,sa=s.nodePathCache=s.nodePathCache||[],la=or("polygon"===ve?ve+","+Hr.join(","):ve,""+ya,""+ai,""+Ia),ba=sa[la],Da=!1;return null!=ba?(Da=!0,f.pathCache=ri=ba):(ri=new Path2D,sa[la]=f.pathCache=ri),{path:ri,cacheHit:Da}},ea=t.pstyle("shape").strValue,xa=t.pstyle("shape-polygon-points").pfValue;if(k){e.translate(v.x,v.y);var Ga=$r(o,u,ea,xa);_=Ga.path,U=Ga.cacheHit}var li=function(){if(!U){var ai=v;k&&(ai={x:0,y:0}),s.nodeShapes[s.getNodeShape(t)].draw(_||e,ai.x,ai.y,o,u,Ia,f)}k?e.fill(_):e.fill()},Mi=function(){for(var ai=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,ya=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],ve=h.backgrounding,Hr=0,sa=0;sa<ie.length;sa++){var la=t.cy().style().getIndexedStyle(t,"background-image-containment","value",sa);ya&&"over"===la||!ya&&"inside"===la?Hr++:mt[sa]&&ie[sa].complete&&!ie[sa].error&&(Hr++,s.drawInscribedImage(e,ie[sa],t,sa,ai))}h.backgrounding=Hr!==se,ve!==h.backgrounding&&t.updateStyle(!1)},Ci=function(){var ai=arguments.length>0&&void 0!==arguments[0]&&arguments[0],ya=arguments.length>1&&void 0!==arguments[1]?arguments[1]:m;s.hasPie(t)&&(s.drawPie(e,t,ya),ai&&(k||s.nodeShapes[s.getNodeShape(t)].draw(e,v.x,v.y,o,u,Ia,f)))},xi=function(){var ai=arguments.length>0&&void 0!==arguments[0]&&arguments[0],ya=arguments.length>1&&void 0!==arguments[1]?arguments[1]:m;s.hasStripe(t)&&(e.save(),k?e.clip(f.pathCache):(s.nodeShapes[s.getNodeShape(t)].draw(e,v.x,v.y,o,u,Ia,f),e.clip()),s.drawStripe(e,t,ya),e.restore(),ai&&(k||s.nodeShapes[s.getNodeShape(t)].draw(e,v.x,v.y,o,u,Ia,f)))},gi=function(){var ve=De>0?0:255;0!==De&&(s.colorFillStyle(e,ve,ve,ve,(De>0?De:-De)*(arguments.length>0&&void 0!==arguments[0]?arguments[0]:m)),k?e.fill(_):e.fill())},Ja=function(){if(Oe>0){if(e.lineWidth=Oe,e.lineCap=ar,e.lineJoin=gr,e.setLineDash)switch(dr){case"dotted":e.setLineDash([1,1]);break;case"dashed":e.setLineDash(Ur),e.lineDashOffset=jr;break;case"solid":case"double":e.setLineDash([])}if("center"!==Sr){if(e.save(),e.lineWidth*=2,"inside"===Sr)k?e.clip(_):e.clip();else{var ai=new Path2D;ai.rect(-o/2-Oe,-u/2-Oe,o+2*Oe,u+2*Oe),ai.addPath(_),e.clip(ai,"evenodd")}k?e.stroke(_):e.stroke(),e.restore()}else k?e.stroke(_):e.stroke();if("double"===dr){e.lineWidth=Oe/3;var ya=e.globalCompositeOperation;e.globalCompositeOperation="destination-out",k?e.stroke(_):e.stroke(),e.globalCompositeOperation=ya}e.setLineDash&&e.setLineDash([])}},ci=function(){if(Wr>0){if(e.lineWidth=Wr,e.lineCap="butt",e.setLineDash)switch(Ea){case"dotted":e.setLineDash([1,1]);break;case"dashed":e.setLineDash([4,2]);break;case"solid":case"double":e.setLineDash([])}var ai=v;k&&(ai={x:0,y:0});var ya=s.getNodeShape(t),ve=Oe;"inside"===Sr&&(ve=0),"outside"===Sr&&(ve*=2);var Da,Hr=(o+ve+(Wr+Aa))/o,sa=(u+ve+(Wr+Aa))/u,la=o*Hr,ba=u*sa,ri=s.nodeShapes[ya].points;if(k&&(Da=$r(la,ba,ya,ri).path),"ellipse"===ya)s.drawEllipsePath(Da||e,ai.x,ai.y,la,ba);else if(["round-diamond","round-heptagon","round-hexagon","round-octagon","round-pentagon","round-polygon","round-triangle","round-tag"].includes(ya)){var ii=0,pi=0,Ai=0;"round-diamond"===ya?ii=1.4*(ve+Aa+Wr):"round-heptagon"===ya?(ii=1.075*(ve+Aa+Wr),Ai=-(ve/2+Aa+Wr)/35):"round-hexagon"===ya?ii=1.12*(ve+Aa+Wr):"round-pentagon"===ya?(ii=1.13*(ve+Aa+Wr),Ai=-(ve/2+Aa+Wr)/15):"round-tag"===ya?(ii=1.12*(ve+Aa+Wr),pi=.07*(ve/2+Wr+Aa)):"round-triangle"===ya&&(ii=(ve+Aa+Wr)*(Math.PI/2),Ai=-(ve+Aa/2+Wr)/Math.PI),0!==ii&&(la=o*(Hr=(o+ii)/o),["round-hexagon","round-tag"].includes(ya)||(ba=u*(sa=(u+ii)/u)));for(var Ti=la/2,oi=ba/2,Bi=(Ia="auto"===Ia?os(la,ba):Ia)+(ve+Wr+Aa)/2,Di=new Array(ri.length/2),yn=new Array(ri.length/2),on=0;on<ri.length/2;on++)Di[on]={x:ai.x+pi+Ti*ri[2*on],y:ai.y+Ai+oi*ri[2*on+1]};var Kn,fn,Cn,mn,Dn=Di.length;for(fn=Di[Dn-1],Kn=0;Kn<Dn;Kn++)yn[Kn]=Uc(fn,Cn=Di[Kn%Dn],mn=Di[(Kn+1)%Dn],Bi),fn=Cn,Cn=mn;s.drawRoundPolygonPath(Da||e,ai.x+pi,ai.y+Ai,o*Hr,u*sa,ri,yn)}else["roundrectangle","round-rectangle"].includes(ya)?(Ia="auto"===Ia?Ui(la,ba):Ia,s.drawRoundRectanglePath(Da||e,ai.x,ai.y,la,ba,Ia+(ve+Wr+Aa)/2)):["cutrectangle","cut-rectangle"].includes(ya)?s.drawCutRectanglePath(Da||e,ai.x,ai.y,la,ba,null,(Ia="auto"===Ia?8:Ia)+(ve+Wr+Aa)/4):["bottomroundrectangle","bottom-round-rectangle"].includes(ya)?(Ia="auto"===Ia?Ui(la,ba):Ia,s.drawBottomRoundRectanglePath(Da||e,ai.x,ai.y,la,ba,Ia+(ve+Wr+Aa)/2)):"barrel"===ya?s.drawBarrelPath(Da||e,ai.x,ai.y,la,ba):ya.startsWith("polygon")||["rhomboid","right-rhomboid","round-tag","tag","vee"].includes(ya)?(ri=ka(Pa(ri,(ve+Wr+Aa)/o)),s.drawPolygonPath(Da||e,ai.x,ai.y,o,u,ri)):(ri=ka(Pa(ri,-(ve+Wr+Aa)/o)),s.drawPolygonPath(Da||e,ai.x,ai.y,o,u,ri));if(k?e.stroke(Da):e.stroke(),"double"===Ea){e.lineWidth=ve/3;var us=e.globalCompositeOperation;e.globalCompositeOperation="destination-out",k?e.stroke(Da):e.stroke(),e.globalCompositeOperation=us}e.setLineDash&&e.setLineDash([])}};if("yes"===t.pstyle("ghost").value){var Ii=t.pstyle("ghost-offset-x").pfValue,Yi=t.pstyle("ghost-offset-y").pfValue,Hi=t.pstyle("ghost-opacity").value,Gi=Hi*m;e.translate(Ii,Yi),Kr(),ci(),Qa(Hi*Ne),li(),Mi(Gi,!0),Ta(Hi*Mr),Ja(),Ci(0!==De||0!==Oe),xi(0!==De||0!==Oe),Mi(Gi,!1),gi(Gi),e.translate(-Ii,-Yi)}k&&e.translate(-v.x,-v.y),i&&s.drawNodeUnderlay(e,t,v,o,u),k&&e.translate(v.x,v.y),Kr(),ci(),Qa(),li(),Mi(m,!0),Ta(),Ja(),Ci(0!==De||0!==Oe),xi(0!==De||0!==Oe),Mi(m,!1),gi(),k&&e.translate(-v.x,-v.y),s.drawElementText(e,t,null,a),i&&s.drawNodeOverlay(e,t,v,o,u),r&&e.translate(K.x1,K.y1)}}},c0=function(t){if(!["overlay","underlay"].includes(t))throw new Error("Invalid state");return function(r,a,i,n,s){if(a.visible()){var u=a.pstyle("".concat(t,"-padding")).pfValue,h=a.pstyle("".concat(t,"-opacity")).value,f=a.pstyle("".concat(t,"-color")).value,v=a.pstyle("".concat(t,"-shape")).value,m=a.pstyle("".concat(t,"-corner-radius")).value;if(h>0){if(i=i||a.position(),null==n||null==s){var k=a.padding();n=a.width()+2*k,s=a.height()+2*k}this.colorFillStyle(r,f[0],f[1],f[2],h),this.nodeShapes[v].draw(r,i.x,i.y,n+2*u,s+2*u,m),r.fill()}}}};_s.drawNodeOverlay=c0("overlay"),_s.drawNodeUnderlay=c0("underlay"),_s.hasPie=function(e){return(e=e[0])._private.hasPie},_s.hasStripe=function(e){return(e=e[0])._private.hasStripe},_s.drawPie=function(e,t,r,a){t=t[0],a=a||t.position();var k,i=t.cy().style(),n=t.pstyle("pie-size"),s=t.pstyle("pie-hole"),o=t.pstyle("pie-start-angle").pfValue,u=a.x,h=a.y,f=t.width(),v=t.height(),m=Math.min(f,v)/2,_=0;if(this.usePaths()&&(u=0,h=0),"%"===n.units?m*=n.pfValue:void 0!==n.pfValue&&(m=n.pfValue/2),"%"===s.units?k=m*s.pfValue:void 0!==s.pfValue&&(k=s.pfValue/2),!(k>=m))for(var I=1;I<=i.pieBackgroundN;I++){var K=t.pstyle("pie-"+I+"-background-size").value,Y=t.pstyle("pie-"+I+"-background-color").value,X=t.pstyle("pie-"+I+"-background-opacity").value*r,mt=K/100;mt+_>1&&(mt=1-_);var ie=1.5*Math.PI+2*Math.PI*_,Yt=(ie+=o)+2*Math.PI*mt;0===K||_>=1||_+mt>1||(0===k?(e.beginPath(),e.moveTo(u,h),e.arc(u,h,m,ie,Yt),e.closePath()):(e.beginPath(),e.arc(u,h,m,ie,Yt),e.arc(u,h,k,Yt,ie,!0),e.closePath()),this.colorFillStyle(e,Y[0],Y[1],Y[2],X),e.fill(),_+=mt)}},_s.drawStripe=function(e,t,r,a){t=t[0],a=a||t.position();var i=t.cy().style(),n=a.x,s=a.y,o=t.width(),u=t.height(),h=0,f=this.usePaths();e.save();var v=t.pstyle("stripe-direction").value,m=t.pstyle("stripe-size");switch(v){case"vertical":break;case"righward":e.rotate(-Math.PI/2)}var k=o,_=u;"%"===m.units?(k*=m.pfValue,_*=m.pfValue):void 0!==m.pfValue&&(k=m.pfValue,_=m.pfValue),f&&(n=0,s=0),s-=k/2,n-=_/2;for(var U=1;U<=i.stripeBackgroundN;U++){var I=t.pstyle("stripe-"+U+"-background-size").value,K=t.pstyle("stripe-"+U+"-background-color").value,Y=t.pstyle("stripe-"+U+"-background-opacity").value*r,X=I/100;X+h>1&&(X=1-h),!(0===I||h>=1||h+X>1)&&(e.beginPath(),e.rect(n,s+_*h,k,_*X),e.closePath(),this.colorFillStyle(e,K[0],K[1],K[2],Y),e.fill(),h+=X)}e.restore()};var _o,Fn={};function h0(e,t,r){var a=e.createShader(t);if(e.shaderSource(a,r),e.compileShader(a),!e.getShaderParameter(a,e.COMPILE_STATUS))throw new Error(e.getShaderInfoLog(a));return a}function zp(e,t,r){void 0===r&&(r=t);var a=e.makeOffscreenCanvas(t,r),i=a.context=a.getContext("2d");return a.clear=function(){return i.clearRect(0,0,a.width,a.height)},a.clear(),a}function jc(e){var t=e.pixelRatio,r=e.cy.zoom(),a=e.cy.pan();return{zoom:r*t,pan:{x:a.x*t,y:a.y*t}}}function $p(e){return"solid"===e.pstyle("background-fill").value&&"none"===e.pstyle("background-image").strValue&&(0===e.pstyle("border-width").value||0===e.pstyle("border-opacity").value||"solid"===e.pstyle("border-style").value)}function Yp(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function Bs(e,t,r){var a=e[0]/255,i=e[1]/255,n=e[2]/255,s=t,o=r||new Array(4);return o[0]=a*s,o[1]=i*s,o[2]=n*s,o[3]=s,o}function Qs(e,t){var r=t||new Array(4);return r[0]=(255&e)/255,r[1]=(e>>8&255)/255,r[2]=(e>>16&255)/255,r[3]=(e>>24&255)/255,r}function Hp(e){return e[0]+(e[1]<<8)+(e[2]<<16)+(e[3]<<24)}function u0(e,t){switch(t){case"float":return[1,e.FLOAT,4];case"vec2":return[2,e.FLOAT,4];case"vec3":return[3,e.FLOAT,4];case"vec4":return[4,e.FLOAT,4];case"int":return[1,e.INT,4];case"ivec2":return[2,e.INT,4]}}function d0(e,t,r){switch(t){case e.FLOAT:return new Float32Array(r);case e.INT:return new Int32Array(r)}}function qp(e,t,r,a,i,n){switch(t){case e.FLOAT:return new Float32Array(r.buffer,n*a,i);case e.INT:return new Int32Array(r.buffer,n*a,i)}}function ss(e,t,r,a){var n=Xt(u0(e,r),3),s=n[0],o=n[1],u=n[2],h=d0(e,o,t*s),f=s*u,v=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,v),e.bufferData(e.ARRAY_BUFFER,t*f,e.DYNAMIC_DRAW),e.enableVertexAttribArray(a),o===e.FLOAT?e.vertexAttribPointer(a,s,o,!1,f,0):o===e.INT&&e.vertexAttribIPointer(a,s,o,f,0),e.vertexAttribDivisor(a,1),e.bindBuffer(e.ARRAY_BUFFER,null);for(var m=new Array(t),k=0;k<t;k++)m[k]=qp(e,o,h,f,s,k);return v.dataArray=h,v.stride=f,v.size=s,v.getView=function(_){return m[_]},v.setPoint=function(_,U,I){var K=m[_];K[0]=U,K[1]=I},v.bufferSubData=function(_){e.bindBuffer(e.ARRAY_BUFFER,v),_?e.bufferSubData(e.ARRAY_BUFFER,0,h,0,_*s):e.bufferSubData(e.ARRAY_BUFFER,0,h)},v}Fn.getPixelRatio=function(){var e=this.data.contexts[0];return null!=this.forcedPixelRatio?this.forcedPixelRatio:(this.cy.window().devicePixelRatio||1)/(e.backingStorePixelRatio||e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1)},Fn.paintCache=function(e){for(var a,t=this.paintCaches=this.paintCaches||[],r=!0,i=0;i<t.length;i++)if((a=t[i]).context===e){r=!1;break}return r&&t.push(a={context:e}),a},Fn.createGradientStyleFor=function(e,t,r,a,i){var n,s=this.usePaths(),o=r.pstyle(t+"-gradient-stop-colors").value,u=r.pstyle(t+"-gradient-stop-positions").pfValue;if("radial-gradient"===a)if(r.isEdge()){var h=r.sourceEndpoint(),f=r.targetEndpoint(),v=r.midpoint(),m=Xi(h,v),k=Xi(f,v);n=e.createRadialGradient(v.x,v.y,0,v.x,v.y,Math.max(m,k))}else{var _=s?{x:0,y:0}:r.position(),U=r.paddedWidth(),I=r.paddedHeight();n=e.createRadialGradient(_.x,_.y,0,_.x,_.y,Math.max(U,I))}else if(r.isEdge()){var K=r.sourceEndpoint(),Y=r.targetEndpoint();n=e.createLinearGradient(K.x,K.y,Y.x,Y.y)}else{var X=s?{x:0,y:0}:r.position(),se=r.paddedWidth()/2,Yt=r.paddedHeight()/2;switch(r.pstyle("background-gradient-direction").value){case"to-bottom":n=e.createLinearGradient(X.x,X.y-Yt,X.x,X.y+Yt);break;case"to-top":n=e.createLinearGradient(X.x,X.y+Yt,X.x,X.y-Yt);break;case"to-left":n=e.createLinearGradient(X.x+se,X.y,X.x-se,X.y);break;case"to-right":n=e.createLinearGradient(X.x-se,X.y,X.x+se,X.y);break;case"to-bottom-right":case"to-right-bottom":n=e.createLinearGradient(X.x-se,X.y-Yt,X.x+se,X.y+Yt);break;case"to-top-right":case"to-right-top":n=e.createLinearGradient(X.x-se,X.y+Yt,X.x+se,X.y-Yt);break;case"to-bottom-left":case"to-left-bottom":n=e.createLinearGradient(X.x+se,X.y-Yt,X.x-se,X.y+Yt);break;case"to-top-left":case"to-left-top":n=e.createLinearGradient(X.x+se,X.y+Yt,X.x-se,X.y-Yt)}}if(!n)return null;for(var be=u.length===o.length,Se=o.length,De=0;De<Se;De++)n.addColorStop(be?u[De]:De/(Se-1),"rgba("+o[De][0]+","+o[De][1]+","+o[De][2]+","+i+")");return n},Fn.gradientFillStyle=function(e,t,r,a){var i=this.createGradientStyleFor(e,"background",t,r,a);if(!i)return null;e.fillStyle=i},Fn.colorFillStyle=function(e,t,r,a,i){e.fillStyle="rgba("+t+","+r+","+a+","+i+")"},Fn.eleFillStyle=function(e,t,r){var a=t.pstyle("background-fill").value;if("linear-gradient"===a||"radial-gradient"===a)this.gradientFillStyle(e,t,a,r);else{var i=t.pstyle("background-color").value;this.colorFillStyle(e,i[0],i[1],i[2],r)}},Fn.gradientStrokeStyle=function(e,t,r,a){var i=this.createGradientStyleFor(e,"line",t,r,a);if(!i)return null;e.strokeStyle=i},Fn.colorStrokeStyle=function(e,t,r,a,i){e.strokeStyle="rgba("+t+","+r+","+a+","+i+")"},Fn.eleStrokeStyle=function(e,t,r){var a=t.pstyle("line-fill").value;if("linear-gradient"===a||"radial-gradient"===a)this.gradientStrokeStyle(e,t,a,r);else{var i=t.pstyle("line-color").value;this.colorStrokeStyle(e,i[0],i[1],i[2],r)}},Fn.matchCanvasSize=function(e){var t=this,r=t.data,a=t.findContainerClientCoords(),i=a[2],n=a[3],s=t.getPixelRatio();(e===t.data.bufferCanvases[t.MOTIONBLUR_BUFFER_NODE]||e===t.data.bufferCanvases[t.MOTIONBLUR_BUFFER_DRAG])&&(s=t.motionBlurPxRatio);var f,u=i*s,h=n*s;if(u!==t.canvasWidth||h!==t.canvasHeight){t.fontCaches=null;var v=r.canvasContainer;v.style.width=i+"px",v.style.height=n+"px";for(var m=0;m<t.CANVAS_LAYERS;m++)(f=r.canvases[m]).width=u,f.height=h,f.style.width=i+"px",f.style.height=n+"px";for(m=0;m<t.BUFFER_COUNT;m++)(f=r.bufferCanvases[m]).width=u,f.height=h,f.style.width=i+"px",f.style.height=n+"px";t.textureMult=1,s<=1&&(f=r.bufferCanvases[t.TEXTURE_BUFFER],t.textureMult=2,f.width=u*t.textureMult,f.height=h*t.textureMult),t.canvasWidth=u,t.canvasHeight=h,t.pixelRatio=s}},Fn.renderTo=function(e,t,r,a){this.render({forcedContext:e,forcedZoom:t,forcedPan:r,drawAllLayers:!0,forcedPxRatio:a})},Fn.clearCanvas=function(){var e=this,t=e.data;function r(a){a.clearRect(0,0,e.canvasWidth,e.canvasHeight)}r(t.contexts[e.NODE]),r(t.contexts[e.DRAG])},Fn.render=function(e){var t=this;e=e||Li();var r=t.cy,a=e.forcedContext,i=e.drawAllLayers,n=e.drawOnlyNodeLayer,s=e.forcedZoom,o=e.forcedPan,u=void 0===e.forcedPxRatio?this.getPixelRatio():e.forcedPxRatio,h=t.data,f=h.canvasNeedsRedraw,v=t.textureOnViewport&&!a&&(t.pinching||t.hoverData.dragging||t.swipePanning||t.data.wheelZooming),m=void 0!==e.motionBlur?e.motionBlur:t.motionBlur,k=t.motionBlurPxRatio,_=r.hasCompoundNodes(),U=t.hoverData.draggingEles,K=m=m&&!a&&t.motionBlurEnabled&&!(t.hoverData.selecting||t.touchData.selecting);a||(t.prevPxRatio!==u&&(t.invalidateContainerClientCoordsCache(),t.matchCanvasSize(t.container),t.redrawHint("eles",!0),t.redrawHint("drag",!0)),t.prevPxRatio=u),!a&&t.motionBlurTimeout&&clearTimeout(t.motionBlurTimeout),m&&(null==t.mbFrames&&(t.mbFrames=0),t.mbFrames++,t.mbFrames<3&&(K=!1),t.mbFrames>t.minMbLowQualFrames&&(t.motionBlurPxRatio=t.mbPxRBlurry)),t.clearingMotionBlur&&(t.motionBlurPxRatio=1),t.textureDrawLastFrame&&!v&&(f[t.NODE]=!0,f[t.SELECT_BOX]=!0);var Y=r.style(),X=r.zoom(),mt=void 0!==s?s:X,ie=r.pan(),se={x:ie.x,y:ie.y},Yt={zoom:X,pan:{x:ie.x,y:ie.y}},he=t.prevViewport;!(void 0===he||Yt.zoom!==he.zoom||Yt.pan.x!==he.pan.x||Yt.pan.y!==he.pan.y)&&!(U&&!_)&&(t.motionBlurPxRatio=1),o&&(se=o),mt*=u,se.x*=u,se.y*=u;var Se=t.getCachedZSortedEles();function De(Ta,Kr,$r,ea,xa){var Ga=Ta.globalCompositeOperation;Ta.globalCompositeOperation="destination-out",t.colorFillStyle(Ta,255,255,255,t.motionBlurTransparency),Ta.fillRect(Kr,$r,ea,xa),Ta.globalCompositeOperation=Ga}function Oe(Ta,Kr){var $r,ea,xa,Ga;t.clearingMotionBlur||Ta!==h.bufferContexts[t.MOTIONBLUR_BUFFER_NODE]&&Ta!==h.bufferContexts[t.MOTIONBLUR_BUFFER_DRAG]?($r=se,ea=mt,xa=t.canvasWidth,Ga=t.canvasHeight):($r={x:ie.x*k,y:ie.y*k},ea=X*k,xa=t.canvasWidth*k,Ga=t.canvasHeight*k),Ta.setTransform(1,0,0,1,0,0),"motionBlur"===Kr?De(Ta,0,0,xa,Ga):!a&&(void 0===Kr||Kr)&&Ta.clearRect(0,0,xa,Ga),i||(Ta.translate($r.x,$r.y),Ta.scale(ea,ea)),o&&Ta.translate(o.x,o.y),s&&Ta.scale(s,s)}if(v||(t.textureDrawLastFrame=!1),v){if(t.textureDrawLastFrame=!0,!t.textureCache){t.textureCache={},t.textureCache.bb=r.mutableElements().boundingBox(),t.textureCache.texture=t.data.bufferCanvases[t.TEXTURE_BUFFER];var Ne=t.data.bufferContexts[t.TEXTURE_BUFFER];Ne.setTransform(1,0,0,1,0,0),Ne.clearRect(0,0,t.canvasWidth*t.textureMult,t.canvasHeight*t.textureMult),t.render({forcedContext:Ne,drawOnlyNodeLayer:!0,forcedPxRatio:u*t.textureMult}),(Yt=t.textureCache.viewport={zoom:r.zoom(),pan:r.pan(),width:t.canvasWidth,height:t.canvasHeight}).mpan={x:(0-Yt.pan.x)/Yt.zoom,y:(0-Yt.pan.y)/Yt.zoom}}f[t.DRAG]=!1,f[t.NODE]=!1;var dr=t.textureCache.texture;Yt=t.textureCache.viewport,(Je=h.contexts[t.NODE]).setTransform(1,0,0,1,0,0),m?De(Je,0,0,Yt.width,Yt.height):Je.clearRect(0,0,Yt.width,Yt.height);var gr=Y.core("outside-texture-bg-color").value,ar=Y.core("outside-texture-bg-opacity").value;t.colorFillStyle(Je,gr[0],gr[1],gr[2],ar),Je.fillRect(0,0,Yt.width,Yt.height),X=r.zoom(),Oe(Je,!1),Je.clearRect(Yt.mpan.x,Yt.mpan.y,Yt.width/Yt.zoom/u,Yt.height/Yt.zoom/u),Je.drawImage(dr,Yt.mpan.x,Yt.mpan.y,Yt.width/Yt.zoom/u,Yt.height/Yt.zoom/u)}else t.textureOnViewport&&!a&&(t.textureCache=null);var Je,Sr=r.extent(),Ur=t.pinching||t.hoverData.dragging||t.swipePanning||t.data.wheelZooming||t.hoverData.draggingEles||t.cy.animated(),jr=t.hideEdgesOnViewport&&Ur,Mr=[];if(Mr[t.NODE]=!f[t.NODE]&&m&&!t.clearedForMotionBlur[t.NODE]||t.clearingMotionBlur,Mr[t.NODE]&&(t.clearedForMotionBlur[t.NODE]=!0),Mr[t.DRAG]=!f[t.DRAG]&&m&&!t.clearedForMotionBlur[t.DRAG]||t.clearingMotionBlur,Mr[t.DRAG]&&(t.clearedForMotionBlur[t.DRAG]=!0),f[t.NODE]||i||n||Mr[t.NODE]){var Wr=m&&!Mr[t.NODE]&&1!==k;Oe(Je=a||(Wr?t.data.bufferContexts[t.MOTIONBLUR_BUFFER_NODE]:h.contexts[t.NODE]),m&&!Wr?"motionBlur":void 0),jr?t.drawCachedNodes(Je,Se.nondrag,u,Sr):t.drawLayeredElements(Je,Se.nondrag,u,Sr),t.debug&&t.drawDebugPoints(Je,Se.nondrag),!i&&!m&&(f[t.NODE]=!1)}!n&&(f[t.DRAG]||i||Mr[t.DRAG])&&(Wr=m&&!Mr[t.DRAG]&&1!==k,Oe(Je=a||(Wr?t.data.bufferContexts[t.MOTIONBLUR_BUFFER_DRAG]:h.contexts[t.DRAG]),m&&!Wr?"motionBlur":void 0),jr?t.drawCachedNodes(Je,Se.drag,u,Sr):t.drawCachedElements(Je,Se.drag,u,Sr),t.debug&&t.drawDebugPoints(Je,Se.drag),!i&&!m&&(f[t.DRAG]=!1));if(this.drawSelectionRectangle(e,Oe),m&&1!==k){var Aa=h.contexts[t.DRAG],Ia=t.data.bufferCanvases[t.MOTIONBLUR_BUFFER_DRAG],Qa=function(Kr,$r,ea){Kr.setTransform(1,0,0,1,0,0),ea||!K?Kr.clearRect(0,0,t.canvasWidth,t.canvasHeight):De(Kr,0,0,t.canvasWidth,t.canvasHeight),Kr.drawImage($r,0,0,t.canvasWidth*k,t.canvasHeight*k,0,0,t.canvasWidth,t.canvasHeight)};(f[t.NODE]||Mr[t.NODE])&&(Qa(h.contexts[t.NODE],t.data.bufferCanvases[t.MOTIONBLUR_BUFFER_NODE],Mr[t.NODE]),f[t.NODE]=!1),(f[t.DRAG]||Mr[t.DRAG])&&(Qa(Aa,Ia,Mr[t.DRAG]),f[t.DRAG]=!1)}t.prevViewport=Yt,t.clearingMotionBlur&&(t.clearingMotionBlur=!1,t.motionBlurCleared=!0,t.motionBlur=!0),m&&(t.motionBlurTimeout=setTimeout(function(){t.motionBlurTimeout=null,t.clearedForMotionBlur[t.NODE]=!1,t.clearedForMotionBlur[t.DRAG]=!1,t.motionBlur=!1,t.clearingMotionBlur=!v,t.mbFrames=0,f[t.NODE]=!0,f[t.DRAG]=!0,t.redraw()},100)),a||r.emit("render")},Fn.drawSelectionRectangle=function(e,t){var r=this,i=r.data,n=r.cy.style(),o=e.drawAllLayers,u=i.canvasNeedsRedraw;if(r.showFps||!e.drawOnlyNodeLayer&&u[r.SELECT_BOX]&&!o){var f=e.forcedContext||i.contexts[r.SELECT_BOX];if(t(f),1==r.selection[4]&&(r.hoverData.selecting||r.touchData.selecting)){var v=r.cy.zoom(),m=n.core("selection-box-border-width").value/v;f.lineWidth=m,f.fillStyle="rgba("+n.core("selection-box-color").value[0]+","+n.core("selection-box-color").value[1]+","+n.core("selection-box-color").value[2]+","+n.core("selection-box-opacity").value+")",f.fillRect(r.selection[0],r.selection[1],r.selection[2]-r.selection[0],r.selection[3]-r.selection[1]),m>0&&(f.strokeStyle="rgba("+n.core("selection-box-border-color").value[0]+","+n.core("selection-box-border-color").value[1]+","+n.core("selection-box-border-color").value[2]+","+n.core("selection-box-opacity").value+")",f.strokeRect(r.selection[0],r.selection[1],r.selection[2]-r.selection[0],r.selection[3]-r.selection[1]))}if(i.bgActivePosistion&&!r.hoverData.selecting){v=r.cy.zoom();var k=i.bgActivePosistion;f.fillStyle="rgba("+n.core("active-bg-color").value[0]+","+n.core("active-bg-color").value[1]+","+n.core("active-bg-color").value[2]+","+n.core("active-bg-opacity").value+")",f.beginPath(),f.arc(k.x,k.y,n.core("active-bg-size").pfValue/v,0,2*Math.PI),f.fill()}var _=r.lastRedrawTime;if(r.showFps&&_){_=Math.round(_);var U=Math.round(1e3/_),I="1 frame = "+_+" ms = "+U+" fps";if(f.setTransform(1,0,0,1,0,0),f.fillStyle="rgba(255, 0, 0, 0.75)",f.strokeStyle="rgba(255, 0, 0, 0.75)",f.font="30px Arial",!_o){var K=f.measureText(I);_o=K.actualBoundingBoxAscent}f.fillText(I,0,_o),f.strokeRect(0,_o+10,250,20),f.fillRect(0,_o+10,250*Math.min(U/60,1),20)}o||(u[r.SELECT_BOX]=!1)}};var f0=typeof Float32Array<"u"?Float32Array:Array;function Xc(){var e=new f0(9);return f0!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e}function g0(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function ul(e,t,r){var a=t[0],i=t[1],n=t[2],s=t[3],o=t[4],u=t[5],h=t[6],f=t[7],v=t[8],m=r[0],k=r[1];return e[0]=a,e[1]=i,e[2]=n,e[3]=s,e[4]=o,e[5]=u,e[6]=m*a+k*s+h,e[7]=m*i+k*o+f,e[8]=m*n+k*u+v,e}function p0(e,t,r){var a=t[0],i=t[1],n=t[2],s=t[3],o=t[4],u=t[5],h=t[6],f=t[7],v=t[8],m=Math.sin(r),k=Math.cos(r);return e[0]=k*a+m*s,e[1]=k*i+m*o,e[2]=k*n+m*u,e[3]=k*s-m*a,e[4]=k*o-m*i,e[5]=k*u-m*n,e[6]=h,e[7]=f,e[8]=v,e}function Zc(e,t,r){var a=r[0],i=r[1];return e[0]=a*t[0],e[1]=a*t[1],e[2]=a*t[2],e[3]=i*t[3],e[4]=i*t[4],e[5]=i*t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)});var t2=function(){return dt(function e(t,r,a,i){D(this,e),this.debugID=Math.floor(1e4*Math.random()),this.r=t,this.texSize=r,this.texRows=a,this.texHeight=Math.floor(r/a),this.enableWrapping=!0,this.locked=!1,this.texture=null,this.needsBuffer=!0,this.freePointer={x:0,row:0},this.keyToLocation=new Map,this.canvas=i(t,r,r),this.scratch=i(t,r,this.texHeight,"scratch")},[{key:"lock",value:function(){this.locked=!0}},{key:"getKeys",value:function(){return new Set(this.keyToLocation.keys())}},{key:"getScale",value:function(r){var a=r.w,i=r.h,s=this.texSize,o=this.texHeight/i,u=a*o,h=i*o;return u>s&&(u=a*(o=s/a),h=i*o),{scale:o,texW:u,texH:h}}},{key:"draw",value:function(r,a,i){var n=this;if(this.locked)throw new Error("can't draw, atlas is locked");var s=this.texSize,o=this.texRows,u=this.texHeight,h=this.getScale(a),f=h.scale,v=h.texW,m=h.texH,k=function(X,mt){if(i&&mt){var ie=mt.context,he=X.x,be=u*X.row;ie.save(),ie.translate(he,be),ie.scale(f,f),i(ie,a),ie.restore()}},_=[null,null],U=function(){k(n.freePointer,n.canvas),_[0]={x:n.freePointer.x,y:n.freePointer.row*u,w:v,h:m},_[1]={x:n.freePointer.x+v,y:n.freePointer.row*u,w:0,h:m},n.freePointer.x+=v,n.freePointer.x==s&&(n.freePointer.x=0,n.freePointer.row++)},K=function(){n.freePointer.x=0,n.freePointer.row++};if(this.freePointer.x+v<=s)U();else{if(this.freePointer.row>=o-1)return!1;this.freePointer.x===s?(K(),U()):this.enableWrapping?function(){var X=n.scratch,mt=n.canvas;X.clear(),k({x:0,row:0},X);var ie=s-n.freePointer.x,se=v-ie,Yt=u,he=n.freePointer.x,be=n.freePointer.row*u,Se=ie;mt.context.drawImage(X,0,0,Se,Yt,he,be,Se,Yt),_[0]={x:he,y:be,w:Se,h:m};var Oe=(n.freePointer.row+1)*u,Ne=se;mt&&mt.context.drawImage(X,ie,0,Ne,Yt,0,Oe,Ne,Yt),_[1]={x:0,y:Oe,w:Ne,h:m},n.freePointer.x=se,n.freePointer.row++}():(K(),U())}return this.keyToLocation.set(r,_),this.needsBuffer=!0,_}},{key:"getOffsets",value:function(r){return this.keyToLocation.get(r)}},{key:"isEmpty",value:function(){return 0===this.freePointer.x&&0===this.freePointer.row}},{key:"canFit",value:function(r){if(this.locked)return!1;var a=this.texSize,i=this.texRows,n=this.getScale(r);return!(this.freePointer.x+n.texW>a)||this.freePointer.row<i-1}},{key:"bufferIfNeeded",value:function(r){this.texture||(this.texture=function Gp(e){var r=e.createTexture();return r.buffer=function(a){e.bindTexture(e.TEXTURE_2D,r),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR_MIPMAP_NEAREST),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,a),e.generateMipmap(e.TEXTURE_2D),e.bindTexture(e.TEXTURE_2D,null)},r.deleteTexture=function(){e.deleteTexture(r)},r}(r)),this.needsBuffer&&(this.texture.buffer(this.canvas),this.needsBuffer=!1,this.locked&&(this.canvas=null,this.scratch=null))}},{key:"dispose",value:function(){this.texture&&(this.texture.deleteTexture(),this.texture=null),this.canvas=null,this.scratch=null,this.locked=!0}}])}(),e2=function(){return dt(function e(t,r,a,i){D(this,e),this.r=t,this.texSize=r,this.texRows=a,this.createTextureCanvas=i,this.atlases=[],this.styleKeyToAtlas=new Map,this.markedKeys=new Set},[{key:"getKeys",value:function(){return new Set(this.styleKeyToAtlas.keys())}},{key:"_createAtlas",value:function(){return new t2(this.r,this.texSize,this.texRows,this.createTextureCanvas)}},{key:"_getScratchCanvas",value:function(){if(!this.scratch){var r=this.r,a=this.texSize,n=this.createTextureCanvas,s=Math.floor(a/this.texRows);this.scratch=n(r,a,s,"scratch")}return this.scratch}},{key:"draw",value:function(r,a,i){var n=this.styleKeyToAtlas.get(r);return n||((!(n=this.atlases[this.atlases.length-1])||!n.canFit(a))&&(n&&n.lock(),n=this._createAtlas(),this.atlases.push(n)),n.draw(r,a,i),this.styleKeyToAtlas.set(r,n)),n}},{key:"getAtlas",value:function(r){return this.styleKeyToAtlas.get(r)}},{key:"hasAtlas",value:function(r){return this.styleKeyToAtlas.has(r)}},{key:"markKeyForGC",value:function(r){this.markedKeys.add(r)}},{key:"gc",value:function(){var r=this,a=this.markedKeys;if(0!==a.size){var u,i=[],n=new Map,s=null,o=q(this.atlases);try{var h=function(){var v=u.value,m=v.getKeys(),k=function r2(e,t){return e.intersection?e.intersection(t):new Set(j(e).filter(function(r){return t.has(r)}))}(a,m);if(0===k.size)return i.push(v),m.forEach(function(ie){return n.set(ie,v)}),1;s||(s=r._createAtlas(),i.push(s));var U,_=q(m);try{for(_.s();!(U=_.n()).done;){var I=U.value;if(!k.has(I)){var Y=Xt(v.getOffsets(I),2),X=Y[0];s.canFit({w:X.w+Y[1].w,h:X.h})||(s.lock(),s=r._createAtlas(),i.push(s)),v.canvas&&(r._copyTextureToNewAtlas(I,v,s),n.set(I,s))}}}catch(ie){_.e(ie)}finally{_.f()}v.dispose()};for(o.s();!(u=o.n()).done;)h()}catch(f){o.e(f)}finally{o.f()}this.atlases=i,this.styleKeyToAtlas=n,this.markedKeys=new Set}else console.log("nothing to garbage collect")}},{key:"_copyTextureToNewAtlas",value:function(r,a,i){var s=Xt(a.getOffsets(r),2),o=s[0],u=s[1];if(0===u.w)i.draw(r,o,function(m){m.drawImage(a.canvas,o.x,o.y,o.w,o.h,0,0,o.w,o.h)});else{var h=this._getScratchCanvas();h.clear(),h.context.drawImage(a.canvas,o.x,o.y,o.w,o.h,0,0,o.w,o.h),h.context.drawImage(a.canvas,u.x,u.y,u.w,u.h,o.w,0,u.w,u.h);var f=o.w+u.w,v=o.h;i.draw(r,{w:f,h:v},function(m){m.drawImage(h,0,0,f,v,0,0,f,v)})}}},{key:"getCounts",value:function(){return{keyCount:this.styleKeyToAtlas.size,atlasCount:new Set(this.styleKeyToAtlas.values()).size}}}])}(),a2=function(){return dt(function e(t,r){D(this,e),this.r=t,this.globalOptions=r,this.atlasSize=r.webglTexSize,this.maxAtlasesPerBatch=r.webglTexPerBatch,this.renderTypes=new Map,this.collections=new Map,this.typeAndIdToKey=new Map},[{key:"getAtlasSize",value:function(){return this.atlasSize}},{key:"addAtlasCollection",value:function(r,a){var i=this.globalOptions,n=i.webglTexSize,o=a.texRows,u=this._cacheScratchCanvas(i.createTextureCanvas),h=new e2(this.r,n,o,u);this.collections.set(r,h)}},{key:"addRenderType",value:function(r,a){var i=a.collection;if(!this.collections.has(i))throw new Error("invalid atlas collection name '".concat(i,"'"));var n=this.collections.get(i),s=G({type:r,atlasCollection:n},a);this.renderTypes.set(r,s)}},{key:"getRenderTypeOpts",value:function(r){return this.renderTypes.get(r)}},{key:"getAtlasCollection",value:function(r){return this.collections.get(r)}},{key:"_cacheScratchCanvas",value:function(r){var a=-1,i=-1,n=null;return function(s,o,u,h){return h?((!n||o!=a||u!=i)&&(a=o,i=u,n=r(s,o,u)),n):r(s,o,u)}}},{key:"_key",value:function(r,a){return"".concat(r,"-").concat(a)}},{key:"invalidate",value:function(r){var _,a=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=i.forceRedraw,s=void 0!==n&&n,o=i.filterEle,u=void 0===o?function(){return!0}:o,h=i.filterType,f=void 0===h?function(){return!0}:h,v=!1,m=!1,k=q(r);try{for(k.s();!(_=k.n()).done;){var U=_.value;if(u(U)){var K,I=q(this.renderTypes.values());try{var Y=function(){var mt=K.value,ie=mt.type;if(f(ie)){var se=a.collections.get(mt.collection),Yt=mt.getKey(U),he=Array.isArray(Yt)?Yt:[Yt];if(s)he.forEach(function(Oe){return se.markKeyForGC(Oe)}),m=!0;else{var be=mt.getID?mt.getID(U):U.id(),Se=a._key(ie,be),De=a.typeAndIdToKey.get(Se);void 0!==De&&!Yp(he,De)&&(v=!0,a.typeAndIdToKey.delete(Se),De.forEach(function(Oe){return se.markKeyForGC(Oe)}))}}};for(I.s();!(K=I.n()).done;)Y()}catch(X){I.e(X)}finally{I.f()}}}}catch(X){k.e(X)}finally{k.f()}return m&&(this.gc(),v=!1),v}},{key:"gc",value:function(){var a,r=q(this.collections.values());try{for(r.s();!(a=r.n()).done;)a.value.gc()}catch(n){r.e(n)}finally{r.f()}}},{key:"getOrCreateAtlas",value:function(r,a,i,n){var s=this.renderTypes.get(a),o=this.collections.get(s.collection),u=!1,h=o.draw(n,i,function(m){s.drawClipped?(m.save(),m.beginPath(),m.rect(0,0,i.w,i.h),m.clip(),s.drawElement(m,r,i,!0,!0),m.restore()):s.drawElement(m,r,i,!0,!0),u=!0});if(u){var f=s.getID?s.getID(r):r.id(),v=this._key(a,f);this.typeAndIdToKey.has(v)?this.typeAndIdToKey.get(v).push(n):this.typeAndIdToKey.set(v,[n])}return h}},{key:"getAtlasInfo",value:function(r,a){var i=this,n=this.renderTypes.get(a),s=n.getKey(r);return(Array.isArray(s)?s:[s]).map(function(u){var h=n.getBoundingBox(r,u),f=i.getOrCreateAtlas(r,a,h,u),m=Xt(f.getOffsets(u),2),k=m[0];return{atlas:f,tex:k,tex1:k,tex2:m[1],bb:h}})}},{key:"getDebugInfo",value:function(){var i,r=[],a=q(this.collections);try{for(a.s();!(i=a.n()).done;){var n=Xt(i.value,2),s=n[0],u=n[1].getCounts();r.push({type:s,keyCount:u.keyCount,atlasCount:u.atlasCount})}}catch(v){a.e(v)}finally{a.f()}return r}}])}(),i2=function(){return dt(function e(t){D(this,e),this.globalOptions=t,this.atlasSize=t.webglTexSize,this.maxAtlasesPerBatch=t.webglTexPerBatch,this.batchAtlases=[]},[{key:"getMaxAtlasesPerBatch",value:function(){return this.maxAtlasesPerBatch}},{key:"getAtlasSize",value:function(){return this.atlasSize}},{key:"getIndexArray",value:function(){return Array.from({length:this.maxAtlasesPerBatch},function(r,a){return a})}},{key:"startBatch",value:function(){this.batchAtlases=[]}},{key:"getAtlasCount",value:function(){return this.batchAtlases.length}},{key:"getAtlases",value:function(){return this.batchAtlases}},{key:"canAddToCurrentBatch",value:function(r){return this.batchAtlases.length!==this.maxAtlasesPerBatch||this.batchAtlases.includes(r)}},{key:"getAtlasIndexForBatch",value:function(r){var a=this.batchAtlases.indexOf(r);if(a<0){if(this.batchAtlases.length===this.maxAtlasesPerBatch)throw new Error("cannot add more atlases to batch");this.batchAtlases.push(r),a=this.batchAtlases.length-1}return a}}])}(),Eo={SCREEN:{name:"screen",screen:!0},PICKING:{name:"picking",picking:!0}},c2=function(){return dt(function e(t,r,a){D(this,e),this.r=t,this.gl=r,this.maxInstances=a.webglBatchSize,this.atlasSize=a.webglTexSize,this.bgColor=a.bgColor,this.debug=a.webglDebug,this.batchDebugInfo=[],a.enableWrapping=!0,a.createTextureCanvas=zp,this.atlasManager=new a2(t,a),this.batchManager=new i2(a),this.simpleShapeOptions=new Map,this.program=this._createShaderProgram(Eo.SCREEN),this.pickingProgram=this._createShaderProgram(Eo.PICKING),this.vao=this._createVAO()},[{key:"addAtlasCollection",value:function(r,a){this.atlasManager.addAtlasCollection(r,a)}},{key:"addTextureAtlasRenderType",value:function(r,a){this.atlasManager.addRenderType(r,a)}},{key:"addSimpleShapeRenderType",value:function(r,a){this.simpleShapeOptions.set(r,a)}},{key:"invalidate",value:function(r){var i=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).type,n=this.atlasManager;return i?n.invalidate(r,{filterType:function(o){return o===i},forceRedraw:!0}):n.invalidate(r)}},{key:"gc",value:function(){this.atlasManager.gc()}},{key:"_createShaderProgram",value:function(r){var a=this.gl,i="#version 300 es\n      precision highp float;\n\n      uniform mat3 uPanZoomMatrix;\n      uniform int  uAtlasSize;\n      \n      // instanced\n      in vec2 aPosition; // a vertex from the unit square\n      \n      in mat3 aTransform; // used to transform verticies, eg into a bounding box\n      in int aVertType; // the type of thing we are rendering\n\n      // the z-index that is output when using picking mode\n      in vec4 aIndex;\n      \n      // For textures\n      in int aAtlasId; // which shader unit/atlas to use\n      in vec4 aTex; // x/y/w/h of texture in atlas\n\n      // for edges\n      in vec4 aPointAPointB;\n      in vec4 aPointCPointD;\n      in vec2 aLineWidth; // also used for node border width\n\n      // simple shapes\n      in vec4 aCornerRadius; // for round-rectangle [top-right, bottom-right, top-left, bottom-left]\n      in vec4 aColor; // also used for edges\n      in vec4 aBorderColor; // aLineWidth is used for border width\n\n      // output values passed to the fragment shader\n      out vec2 vTexCoord;\n      out vec4 vColor;\n      out vec2 vPosition;\n      // flat values are not interpolated\n      flat out int vAtlasId; \n      flat out int vVertType;\n      flat out vec2 vTopRight;\n      flat out vec2 vBotLeft;\n      flat out vec4 vCornerRadius;\n      flat out vec4 vBorderColor;\n      flat out vec2 vBorderWidth;\n      flat out vec4 vIndex;\n      \n      void main(void) {\n        int vid = gl_VertexID;\n        vec2 position = aPosition; // TODO make this a vec3, simplifies some code below\n\n        if(aVertType == ".concat(0,") {\n          float texX = aTex.x; // texture coordinates\n          float texY = aTex.y;\n          float texW = aTex.z;\n          float texH = aTex.w;\n\n          if(vid == 1 || vid == 2 || vid == 4) {\n            texX += texW;\n          }\n          if(vid == 2 || vid == 4 || vid == 5) {\n            texY += texH;\n          }\n\n          float d = float(uAtlasSize);\n          vTexCoord = vec2(texX / d, texY / d); // tex coords must be between 0 and 1\n\n          gl_Position = vec4(uPanZoomMatrix * aTransform * vec3(position, 1.0), 1.0);\n        }\n        else if(aVertType == ").concat(4," || aVertType == ").concat(7," \n             || aVertType == ").concat(5," || aVertType == ").concat(6,") { // simple shapes\n\n          // the bounding box is needed by the fragment shader\n          vBotLeft  = (aTransform * vec3(0, 0, 1)).xy; // flat\n          vTopRight = (aTransform * vec3(1, 1, 1)).xy; // flat\n          vPosition = (aTransform * vec3(position, 1)).xy; // will be interpolated\n\n          // calculations are done in the fragment shader, just pass these along\n          vColor = aColor;\n          vCornerRadius = aCornerRadius;\n          vBorderColor = aBorderColor;\n          vBorderWidth = aLineWidth;\n\n          gl_Position = vec4(uPanZoomMatrix * aTransform * vec3(position, 1.0), 1.0);\n        }\n        else if(aVertType == ").concat(1,") {\n          vec2 source = aPointAPointB.xy;\n          vec2 target = aPointAPointB.zw;\n\n          // adjust the geometry so that the line is centered on the edge\n          position.y = position.y - 0.5;\n\n          // stretch the unit square into a long skinny rectangle\n          vec2 xBasis = target - source;\n          vec2 yBasis = normalize(vec2(-xBasis.y, xBasis.x));\n          vec2 point = source + xBasis * position.x + yBasis * aLineWidth[0] * position.y;\n\n          gl_Position = vec4(uPanZoomMatrix * vec3(point, 1.0), 1.0);\n          vColor = aColor;\n        } \n        else if(aVertType == ").concat(2,") {\n          vec2 pointA = aPointAPointB.xy;\n          vec2 pointB = aPointAPointB.zw;\n          vec2 pointC = aPointCPointD.xy;\n          vec2 pointD = aPointCPointD.zw;\n\n          // adjust the geometry so that the line is centered on the edge\n          position.y = position.y - 0.5;\n\n          vec2 p0, p1, p2, pos;\n          if(position.x == 0.0) { // The left side of the unit square\n            p0 = pointA;\n            p1 = pointB;\n            p2 = pointC;\n            pos = position;\n          } else { // The right side of the unit square, use same approach but flip the geometry upside down\n            p0 = pointD;\n            p1 = pointC;\n            p2 = pointB;\n            pos = vec2(0.0, -position.y);\n          }\n\n          vec2 p01 = p1 - p0;\n          vec2 p12 = p2 - p1;\n          vec2 p21 = p1 - p2;\n\n          // Find the normal vector.\n          vec2 tangent = normalize(normalize(p12) + normalize(p01));\n          vec2 normal = vec2(-tangent.y, tangent.x);\n\n          // Find the vector perpendicular to p0 -> p1.\n          vec2 p01Norm = normalize(vec2(-p01.y, p01.x));\n\n          // Determine the bend direction.\n          float sigma = sign(dot(p01 + p21, normal));\n          float width = aLineWidth[0];\n\n          if(sign(pos.y) == -sigma) {\n            // This is an intersecting vertex. Adjust the position so that there's no overlap.\n            vec2 point = 0.5 * width * normal * -sigma / dot(normal, p01Norm);\n            gl_Position = vec4(uPanZoomMatrix * vec3(p1 + point, 1.0), 1.0);\n          } else {\n            // This is a non-intersecting vertex. Treat it like a mitre join.\n            vec2 point = 0.5 * width * normal * sigma * dot(normal, p01Norm);\n            gl_Position = vec4(uPanZoomMatrix * vec3(p1 + point, 1.0), 1.0);\n          }\n\n          vColor = aColor;\n        } \n        else if(aVertType == ").concat(3," && vid < 3) {\n          // massage the first triangle into an edge arrow\n          if(vid == 0)\n            position = vec2(-0.15, -0.3);\n          if(vid == 1)\n            position = vec2(  0.0,  0.0);\n          if(vid == 2)\n            position = vec2( 0.15, -0.3);\n\n          gl_Position = vec4(uPanZoomMatrix * aTransform * vec3(position, 1.0), 1.0);\n          vColor = aColor;\n        }\n        else {\n          gl_Position = vec4(2.0, 0.0, 0.0, 1.0); // discard vertex by putting it outside webgl clip space\n        }\n\n        vAtlasId = aAtlasId;\n        vVertType = aVertType;\n        vIndex = aIndex;\n      }\n    "),n=this.batchManager.getIndexArray(),o=function Wp(e,t,r){var a=h0(e,e.VERTEX_SHADER,t),i=h0(e,e.FRAGMENT_SHADER,r),n=e.createProgram();if(e.attachShader(n,a),e.attachShader(n,i),e.linkProgram(n),!e.getProgramParameter(n,e.LINK_STATUS))throw new Error("Could not initialize shaders");return n}(a,i,"#version 300 es\n      precision highp float;\n\n      // declare texture unit for each texture atlas in the batch\n      ".concat(n.map(function(h){return"uniform sampler2D uTexture".concat(h,";")}).join("\n\t"),"\n\n      uniform vec4 uBGColor;\n      uniform float uZoom;\n\n      in vec2 vTexCoord;\n      in vec4 vColor;\n      in vec2 vPosition; // model coordinates\n\n      flat in int vAtlasId;\n      flat in vec4 vIndex;\n      flat in int vVertType;\n      flat in vec2 vTopRight;\n      flat in vec2 vBotLeft;\n      flat in vec4 vCornerRadius;\n      flat in vec4 vBorderColor;\n      flat in vec2 vBorderWidth;\n\n      out vec4 outColor;\n\n      ").concat("\n  float circleSD(vec2 p, float r) {\n    return distance(vec2(0), p) - r; // signed distance\n  }\n","\n      ").concat("\n  float rectangleSD(vec2 p, vec2 b) {\n    vec2 d = abs(p)-b;\n    return distance(vec2(0),max(d,0.0)) + min(max(d.x,d.y),0.0);\n  }\n","\n      ").concat("\n  float roundRectangleSD(vec2 p, vec2 b, vec4 cr) {\n    cr.xy = (p.x > 0.0) ? cr.xy : cr.zw;\n    cr.x  = (p.y > 0.0) ? cr.x  : cr.y;\n    vec2 q = abs(p) - b + cr.x;\n    return min(max(q.x, q.y), 0.0) + distance(vec2(0), max(q, 0.0)) - cr.x;\n  }\n","\n      ").concat("\n  float ellipseSD(vec2 p, vec2 ab) {\n    p = abs( p ); // symmetry\n\n    // find root with Newton solver\n    vec2 q = ab*(p-ab);\n    float w = (q.x<q.y)? 1.570796327 : 0.0;\n    for( int i=0; i<5; i++ ) {\n      vec2 cs = vec2(cos(w),sin(w));\n      vec2 u = ab*vec2( cs.x,cs.y);\n      vec2 v = ab*vec2(-cs.y,cs.x);\n      w = w + dot(p-u,v)/(dot(p-u,u)+dot(v,v));\n    }\n    \n    // compute final point and distance\n    float d = length(p-ab*vec2(cos(w),sin(w)));\n    \n    // return signed distance\n    return (dot(p/ab,p/ab)>1.0) ? d : -d;\n  }\n","\n\n      vec4 blend(vec4 top, vec4 bot) { // blend colors with premultiplied alpha\n        return vec4( \n          top.rgb + (bot.rgb * (1.0 - top.a)),\n          top.a   + (bot.a   * (1.0 - top.a)) \n        );\n      }\n\n      vec4 distInterp(vec4 cA, vec4 cB, float d) { // interpolate color using Signed Distance\n        // scale to the zoom level so that borders don't look blurry when zoomed in\n        // note 1.5 is an aribitrary value chosen because it looks good\n        return mix(cA, cB, 1.0 - smoothstep(0.0, 1.5 / uZoom, abs(d))); \n      }\n\n      void main(void) {\n        if(vVertType == ").concat(0,") {\n          // look up the texel from the texture unit\n          ").concat(n.map(function(h){return"if(vAtlasId == ".concat(h,") outColor = texture(uTexture").concat(h,", vTexCoord);")}).join("\n\telse "),"\n        } \n        else if(vVertType == ").concat(3,") {\n          // mimics how canvas renderer uses context.globalCompositeOperation = 'destination-out';\n          outColor = blend(vColor, uBGColor);\n          outColor.a = 1.0; // make opaque, masks out line under arrow\n        }\n        else if(vVertType == ").concat(4," && vBorderWidth == vec2(0.0)) { // simple rectangle with no border\n          outColor = vColor; // unit square is already transformed to the rectangle, nothing else needs to be done\n        }\n        else if(vVertType == ").concat(4," || vVertType == ").concat(7," \n          || vVertType == ").concat(5," || vVertType == ").concat(6,") { // use SDF\n\n          float outerBorder = vBorderWidth[0];\n          float innerBorder = vBorderWidth[1];\n          float borderPadding = outerBorder * 2.0;\n          float w = vTopRight.x - vBotLeft.x - borderPadding;\n          float h = vTopRight.y - vBotLeft.y - borderPadding;\n          vec2 b = vec2(w/2.0, h/2.0); // half width, half height\n          vec2 p = vPosition - vec2(vTopRight.x - b[0] - outerBorder, vTopRight.y - b[1] - outerBorder); // translate to center\n\n          float d; // signed distance\n          if(vVertType == ").concat(4,") {\n            d = rectangleSD(p, b);\n          } else if(vVertType == ").concat(7," && w == h) {\n            d = circleSD(p, b.x); // faster than ellipse\n          } else if(vVertType == ").concat(7,") {\n            d = ellipseSD(p, b);\n          } else {\n            d = roundRectangleSD(p, b, vCornerRadius.wzyx);\n          }\n\n          // use the distance to interpolate a color to smooth the edges of the shape, doesn't need multisampling\n          // we must smooth colors inwards, because we can't change pixels outside the shape's bounding box\n          if(d > 0.0) {\n            if(d > outerBorder) {\n              discard;\n            } else {\n              outColor = distInterp(vBorderColor, vec4(0), d - outerBorder);\n            }\n          } else {\n            if(d > innerBorder) {\n              vec4 outerColor = outerBorder == 0.0 ? vec4(0) : vBorderColor;\n              vec4 innerBorderColor = blend(vBorderColor, vColor);\n              outColor = distInterp(innerBorderColor, outerColor, d);\n            } \n            else {\n              vec4 outerColor;\n              if(innerBorder == 0.0 && outerBorder == 0.0) {\n                outerColor = vec4(0);\n              } else if(innerBorder == 0.0) {\n                outerColor = vBorderColor;\n              } else {\n                outerColor = blend(vBorderColor, vColor);\n              }\n              outColor = distInterp(vColor, outerColor, d - innerBorder);\n            }\n          }\n        }\n        else {\n          outColor = vColor;\n        }\n\n        ").concat(r.picking?"if(outColor.a == 0.0) discard;\n             else outColor = vIndex;":"","\n      }\n    "));o.aPosition=a.getAttribLocation(o,"aPosition"),o.aIndex=a.getAttribLocation(o,"aIndex"),o.aVertType=a.getAttribLocation(o,"aVertType"),o.aTransform=a.getAttribLocation(o,"aTransform"),o.aAtlasId=a.getAttribLocation(o,"aAtlasId"),o.aTex=a.getAttribLocation(o,"aTex"),o.aPointAPointB=a.getAttribLocation(o,"aPointAPointB"),o.aPointCPointD=a.getAttribLocation(o,"aPointCPointD"),o.aLineWidth=a.getAttribLocation(o,"aLineWidth"),o.aColor=a.getAttribLocation(o,"aColor"),o.aCornerRadius=a.getAttribLocation(o,"aCornerRadius"),o.aBorderColor=a.getAttribLocation(o,"aBorderColor"),o.uPanZoomMatrix=a.getUniformLocation(o,"uPanZoomMatrix"),o.uAtlasSize=a.getUniformLocation(o,"uAtlasSize"),o.uBGColor=a.getUniformLocation(o,"uBGColor"),o.uZoom=a.getUniformLocation(o,"uZoom"),o.uTextures=[];for(var u=0;u<this.batchManager.getMaxAtlasesPerBatch();u++)o.uTextures.push(a.getUniformLocation(o,"uTexture".concat(u)));return o}},{key:"_createVAO",value:function(){var r=[0,0,1,0,1,1,0,0,1,1,0,1];this.vertexCount=r.length/2;var a=this.maxInstances,i=this.gl,n=this.program,s=i.createVertexArray();return i.bindVertexArray(s),function jp(e,t,r,a){var n=Xt(u0(e,t),2),s=n[0],o=n[1],u=d0(e,o,a),h=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,h),e.bufferData(e.ARRAY_BUFFER,u,e.STATIC_DRAW),o===e.FLOAT?e.vertexAttribPointer(r,s,o,!1,0,0):o===e.INT&&e.vertexAttribIPointer(r,s,o,0,0),e.enableVertexAttribArray(r),e.bindBuffer(e.ARRAY_BUFFER,null)}(i,"vec2",n.aPosition,r),this.transformBuffer=function Xp(e,t,r){for(var i=new Float32Array(9*t),n=new Array(t),s=0;s<t;s++)n[s]=new Float32Array(i.buffer,9*s*4,9);var u=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,u),e.bufferData(e.ARRAY_BUFFER,i.byteLength,e.DYNAMIC_DRAW);for(var h=0;h<3;h++){var f=r+h;e.enableVertexAttribArray(f),e.vertexAttribPointer(f,3,e.FLOAT,!1,36,12*h),e.vertexAttribDivisor(f,1)}return e.bindBuffer(e.ARRAY_BUFFER,null),u.getMatrixView=function(v){return n[v]},u.setData=function(v,m){n[m].set(v,0)},u.bufferSubData=function(){e.bindBuffer(e.ARRAY_BUFFER,u),e.bufferSubData(e.ARRAY_BUFFER,0,i)},u}(i,a,n.aTransform),this.indexBuffer=ss(i,a,"vec4",n.aIndex),this.vertTypeBuffer=ss(i,a,"int",n.aVertType),this.atlasIdBuffer=ss(i,a,"int",n.aAtlasId),this.texBuffer=ss(i,a,"vec4",n.aTex),this.pointAPointBBuffer=ss(i,a,"vec4",n.aPointAPointB),this.pointCPointDBuffer=ss(i,a,"vec4",n.aPointCPointD),this.lineWidthBuffer=ss(i,a,"vec2",n.aLineWidth),this.colorBuffer=ss(i,a,"vec4",n.aColor),this.cornerRadiusBuffer=ss(i,a,"vec4",n.aCornerRadius),this.borderColorBuffer=ss(i,a,"vec4",n.aBorderColor),i.bindVertexArray(null),s}},{key:"buffers",get:function(){var r=this;return this._buffers||(this._buffers=Object.keys(this).filter(function(a){return St(a,"Buffer")}).map(function(a){return r[a]})),this._buffers}},{key:"startFrame",value:function(r){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Eo.SCREEN;this.panZoomMatrix=r,this.renderTarget=a,this.batchDebugInfo=[],this.wrappedCount=0,this.simpleCount=0,this.startBatch()}},{key:"startBatch",value:function(){this.instanceCount=0,this.batchManager.startBatch()}},{key:"endFrame",value:function(){this.endBatch()}},{key:"_isVisible",value:function(r,a){return!!r.visible()&&(!a||!a.isVisible||a.isVisible(r))}},{key:"drawTexture",value:function(r,a,i){var n=this.atlasManager,s=this.batchManager,o=n.getRenderTypeOpts(i);if(this._isVisible(r,o)&&(!r.isEdge()||this._isValidEdge(r))){if(this.renderTarget.picking&&o.getTexPickingMode){var u=o.getTexPickingMode(r);if(1===u)return;if(2==u)return void this.drawPickingRectangle(r,a,i)}var v,f=q(n.getAtlasInfo(r,i));try{for(f.s();!(v=f.n()).done;){var m=v.value,k=m.atlas,_=m.tex1,U=m.tex2;s.canAddToCurrentBatch(k)||this.endBatch();for(var I=s.getAtlasIndexForBatch(k),K=0,Y=[[_,!0],[U,!1]];K<Y.length;K++){var X=Xt(Y[K],2),mt=X[0],ie=X[1];if(0!=mt.w){var se=this.instanceCount;this.vertTypeBuffer.getView(se)[0]=0,Qs(a,this.indexBuffer.getView(se)),this.atlasIdBuffer.getView(se)[0]=I;var be=this.texBuffer.getView(se);be[0]=mt.x,be[1]=mt.y,be[2]=mt.w,be[3]=mt.h;var Se=this.transformBuffer.getMatrixView(se);this.setTransformMatrix(r,Se,o,m,ie),this.instanceCount++,ie||this.wrappedCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}}}catch(De){f.e(De)}finally{f.f()}}}},{key:"setTransformMatrix",value:function(r,a,i,n){var s=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],o=0;if(i.shapeProps&&i.shapeProps.padding&&(o=r.pstyle(i.shapeProps.padding).pfValue),n){var h=n.tex1,v=h.w/(h.w+n.tex2.w);s||(v=1-v);var m=this._getAdjustedBB(n.bb,o,s,v);this._applyTransformMatrix(a,m,i,r)}else{var k=i.getBoundingBox(r),_=this._getAdjustedBB(k,o,!0,1);this._applyTransformMatrix(a,_,i,r)}}},{key:"_applyTransformMatrix",value:function(r,a,i,n){var s,o;g0(r);var u=i.getRotation?i.getRotation(n):0;if(0!==u){var h=i.getRotationPoint(n);ul(r,r,[h.x,h.y]),p0(r,r,u);var m=i.getRotationOffset(n);s=m.x+(a.xOffset||0),o=m.y+(a.yOffset||0)}else s=a.x1,o=a.y1;ul(r,r,[s,o]),Zc(r,r,[a.w,a.h])}},{key:"_getAdjustedBB",value:function(r,a,i,n){var s=r.x1,o=r.y1,u=r.w,h=r.h;a&&(s-=a,o-=a,u+=2*a,h+=2*a);var v=0,m=u*n;return i&&n<1?u=m:!i&&n<1&&(s+=v=u-m,u=m),{x1:s,y1:o,w:u,h,xOffset:v,yOffset:r.yOffset}}},{key:"drawPickingRectangle",value:function(r,a,i){var n=this.atlasManager.getRenderTypeOpts(i),s=this.instanceCount;this.vertTypeBuffer.getView(s)[0]=4,Qs(a,this.indexBuffer.getView(s)),Bs([0,0,0],1,this.colorBuffer.getView(s));var h=this.transformBuffer.getMatrixView(s);this.setTransformMatrix(r,h,n),this.simpleCount++,this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}},{key:"drawNode",value:function(r,a,i){var n=this.simpleShapeOptions.get(i);if(this._isVisible(r,n)){var s=n.shapeProps,o=this._getVertTypeForShape(r,s.shape);if(void 0===o||n.isSimple&&!n.isSimple(r))return void this.drawTexture(r,a,i);var u=this.instanceCount;if(this.vertTypeBuffer.getView(u)[0]=o,5===o||6===o){var h=n.getBoundingBox(r),f=this._getCornerRadius(r,s.radius,h),v=this.cornerRadiusBuffer.getView(u);v[0]=f,v[1]=f,v[2]=f,v[3]=f,6===o&&(v[0]=0,v[2]=0)}Qs(a,this.indexBuffer.getView(u)),Bs(r.pstyle(s.color).value,r.pstyle(s.opacity).value,this.colorBuffer.getView(u));var I=this.lineWidthBuffer.getView(u);if(I[0]=0,I[1]=0,s.border){var K=r.pstyle("border-width").value;if(K>0){Bs(r.pstyle("border-color").value,r.pstyle("border-opacity").value,this.borderColorBuffer.getView(u));var ie=r.pstyle("border-position").value;if("inside"===ie)I[0]=0,I[1]=-K;else if("outside"===ie)I[0]=K,I[1]=0;else{var se=K/2;I[0]=se,I[1]=-se}}}var Yt=this.transformBuffer.getMatrixView(u);this.setTransformMatrix(r,Yt,n),this.simpleCount++,this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}},{key:"_getVertTypeForShape",value:function(r,a){switch(r.pstyle(a).value){case"rectangle":return 4;case"ellipse":return 7;case"roundrectangle":case"round-rectangle":return 5;case"bottom-round-rectangle":return 6;default:return}}},{key:"_getCornerRadius",value:function(r,a,i){var n=i.w,s=i.h;if("auto"===r.pstyle(a).value)return Ui(n,s);var o=r.pstyle(a).pfValue;return Math.min(o,s/2,n/2)}},{key:"drawEdgeArrow",value:function(r,a,i){if(r.visible()){var s,o,u,n=r._private.rscratch;if(!("source"===i?(s=n.arrowStartX,o=n.arrowStartY,u=n.srcArrowAngle):(s=n.arrowEndX,o=n.arrowEndY,u=n.tgtArrowAngle),isNaN(s)||null==s||isNaN(o)||null==o||isNaN(u)||null==u||"none"===r.pstyle(i+"-arrow-shape").value)){var f=r.pstyle(i+"-arrow-color").value,k=r.pstyle("opacity").value*r.pstyle("line-opacity").value,_=r.pstyle("width").pfValue,U=r.pstyle("arrow-scale").value,I=this.r.getArrowWidth(_,U),K=this.instanceCount,Y=this.transformBuffer.getMatrixView(K);g0(Y),ul(Y,Y,[s,o]),Zc(Y,Y,[I,I]),p0(Y,Y,u),this.vertTypeBuffer.getView(K)[0]=3,Qs(a,this.indexBuffer.getView(K)),Bs(f,k,this.colorBuffer.getView(K)),this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}}},{key:"drawEdgeLine",value:function(r,a){if(r.visible()){var i=this._getEdgePoints(r);if(i){var n=r.pstyle("opacity").value,s=r.pstyle("line-opacity").value,o=r.pstyle("width").pfValue,u=r.pstyle("line-color").value,h=n*s;if(i.length/2+this.instanceCount>this.maxInstances&&this.endBatch(),4==i.length){var f=this.instanceCount;this.vertTypeBuffer.getView(f)[0]=1,Qs(a,this.indexBuffer.getView(f)),Bs(u,h,this.colorBuffer.getView(f)),this.lineWidthBuffer.getView(f)[0]=o;var _=this.pointAPointBBuffer.getView(f);_[0]=i[0],_[1]=i[1],_[2]=i[2],_[3]=i[3],this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}else for(var U=0;U<i.length-2;U+=2){var I=this.instanceCount;this.vertTypeBuffer.getView(I)[0]=2,Qs(a,this.indexBuffer.getView(I)),Bs(u,h,this.colorBuffer.getView(I)),this.lineWidthBuffer.getView(I)[0]=o;var mt=i[U-2],ie=i[U-1],se=i[U],Yt=i[U+1],he=i[U+2],be=i[U+3],Se=i[U+4],De=i[U+5];0==U&&(mt=2*se-he+.001,ie=2*Yt-be+.001),U==i.length-4&&(Se=2*he-se+.001,De=2*be-Yt+.001);var Oe=this.pointAPointBBuffer.getView(I);Oe[0]=mt,Oe[1]=ie,Oe[2]=se,Oe[3]=Yt;var Ne=this.pointCPointDBuffer.getView(I);Ne[0]=he,Ne[1]=be,Ne[2]=Se,Ne[3]=De,this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}}}},{key:"_isValidEdge",value:function(r){var a=r._private.rscratch;return!(a.badLine||null==a.allpts||isNaN(a.allpts[0]))}},{key:"_getEdgePoints",value:function(r){var a=r._private.rscratch;if(this._isValidEdge(r)){var i=a.allpts;if(4==i.length)return i;var n=this._getNumSegments(r);return this._getCurveSegmentPoints(i,n)}}},{key:"_getNumSegments",value:function(r){return Math.min(Math.max(15,5),this.maxInstances)}},{key:"_getCurveSegmentPoints",value:function(r,a){if(4==r.length)return r;for(var i=Array(2*(a+1)),n=0;n<=a;n++)0==n?(i[0]=r[0],i[1]=r[1]):n==a?(i[2*n]=r[r.length-2],i[2*n+1]=r[r.length-1]):this._setCurvePoint(r,n/a,i,2*n);return i}},{key:"_setCurvePoint",value:function(r,a,i,n){if(!(r.length<=2)){for(var s=Array(r.length-2),o=0;o<s.length;o+=2){var h=(1-a)*r[o+1]+a*r[o+3];s[o]=(1-a)*r[o]+a*r[o+2],s[o+1]=h}return this._setCurvePoint(s,a,i,n)}i[n]=r[0],i[n+1]=r[1]}},{key:"endBatch",value:function(){var r=this.gl,a=this.vao,i=this.vertexCount,n=this.instanceCount;if(0!==n){var s=this.renderTarget.picking?this.pickingProgram:this.program;r.useProgram(s),r.bindVertexArray(a);var u,o=q(this.buffers);try{for(o.s();!(u=o.n()).done;)u.value.bufferSubData(n)}catch(_){o.e(_)}finally{o.f()}for(var f=this.batchManager.getAtlases(),v=0;v<f.length;v++)f[v].bufferIfNeeded(r);for(var m=0;m<f.length;m++)r.activeTexture(r.TEXTURE0+m),r.bindTexture(r.TEXTURE_2D,f[m].texture),r.uniform1i(s.uTextures[m],m);r.uniform1f(s.uZoom,function Vp(e){var t=e.pixelRatio;return e.cy.zoom()*t}(this.r)),r.uniformMatrix3fv(s.uPanZoomMatrix,!1,this.panZoomMatrix),r.uniform1i(s.uAtlasSize,this.batchManager.getAtlasSize());var k=Bs(this.bgColor,1);r.uniform4fv(s.uBGColor,k),r.drawArraysInstanced(r.TRIANGLES,0,i,n),r.bindVertexArray(null),r.bindTexture(r.TEXTURE_2D,null),this.debug&&this.batchDebugInfo.push({count:n,atlasCount:f.length}),this.startBatch()}}},{key:"getDebugInfo",value:function(){var r=this.atlasManager.getDebugInfo(),a=r.reduce(function(s,o){return s+o.atlasCount},0),i=this.batchDebugInfo,n=i.reduce(function(s,o){return s+o.count},0);return{atlasInfo:r,totalAtlases:a,wrappedCount:this.wrappedCount,simpleCount:this.simpleCount,batchCount:i.length,batchInfo:i,totalInstances:n}}}])}(),m0={};function x0(e,t){return jt(e._private.rscratch,"labelWrapCachedLines",t)||[]}m0.initWebgl=function(e,t){var r=this,a=r.data.contexts[r.WEBGL];e.bgColor=function h2(e){var t=e.cy.container();return fe(t&&t.style&&t.style.backgroundColor||"white")}(r),e.webglTexSize=Math.min(e.webglTexSize,a.getParameter(a.MAX_TEXTURE_SIZE)),e.webglTexRows=Math.min(e.webglTexRows,54),e.webglTexRowsNodes=Math.min(e.webglTexRowsNodes,54),e.webglBatchSize=Math.min(e.webglBatchSize,16384),e.webglTexPerBatch=Math.min(e.webglTexPerBatch,a.getParameter(a.MAX_TEXTURE_IMAGE_UNITS)),r.webglDebug=e.webglDebug,r.webglDebugShowAtlases=e.webglDebugShowAtlases,r.pickingFrameBuffer=function Zp(e){var t=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,t);var r=e.createTexture();return e.bindTexture(e.TEXTURE_2D,r),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,r,0),e.bindFramebuffer(e.FRAMEBUFFER,null),t.setFramebufferAttachmentSizes=function(a,i){e.bindTexture(e.TEXTURE_2D,r),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,a,i,0,e.RGBA,e.UNSIGNED_BYTE,null)},t}(a),r.pickingFrameBuffer.needsDraw=!0,r.drawing=new c2(r,a,e);var i=function(v){return function(m){return r.getTextAngle(m,v)}},n=function(v){return function(m){var k=m.pstyle(v);return k&&k.value}},s=function(v){return function(m){return m.pstyle("".concat(v,"-opacity")).value>0}},o=function(v){return"yes"===v.pstyle("text-events").strValue?2:1},u=function(v){var m=v.position(),k=m.x,_=m.y,U=v.outerWidth(),I=v.outerHeight();return{w:U,h:I,x1:k-U/2,y1:_-I/2}};r.drawing.addAtlasCollection("node",{texRows:e.webglTexRowsNodes}),r.drawing.addAtlasCollection("label",{texRows:e.webglTexRows}),r.drawing.addTextureAtlasRenderType("node-body",{collection:"node",getKey:t.getStyleKey,getBoundingBox:t.getElementBox,drawElement:t.drawElement}),r.drawing.addSimpleShapeRenderType("node-body",{getBoundingBox:u,isSimple:$p,shapeProps:{shape:"shape",color:"background-color",opacity:"background-opacity",radius:"corner-radius",border:!0}}),r.drawing.addSimpleShapeRenderType("node-overlay",{getBoundingBox:u,isVisible:s("overlay"),shapeProps:{shape:"overlay-shape",color:"overlay-color",opacity:"overlay-opacity",padding:"overlay-padding",radius:"overlay-corner-radius"}}),r.drawing.addSimpleShapeRenderType("node-underlay",{getBoundingBox:u,isVisible:s("underlay"),shapeProps:{shape:"underlay-shape",color:"underlay-color",opacity:"underlay-opacity",padding:"underlay-padding",radius:"underlay-corner-radius"}}),r.drawing.addTextureAtlasRenderType("label",{collection:"label",getTexPickingMode:o,getKey:th(t.getLabelKey,null),getBoundingBox:eh(t.getLabelBox,null),drawClipped:!0,drawElement:t.drawLabel,getRotation:i(null),getRotationPoint:t.getLabelRotationPoint,getRotationOffset:t.getLabelRotationOffset,isVisible:n("label")}),r.drawing.addTextureAtlasRenderType("edge-source-label",{collection:"label",getTexPickingMode:o,getKey:th(t.getSourceLabelKey,"source"),getBoundingBox:eh(t.getSourceLabelBox,"source"),drawClipped:!0,drawElement:t.drawSourceLabel,getRotation:i("source"),getRotationPoint:t.getSourceLabelRotationPoint,getRotationOffset:t.getSourceLabelRotationOffset,isVisible:n("source-label")}),r.drawing.addTextureAtlasRenderType("edge-target-label",{collection:"label",getTexPickingMode:o,getKey:th(t.getTargetLabelKey,"target"),getBoundingBox:eh(t.getTargetLabelBox,"target"),drawClipped:!0,drawElement:t.drawTargetLabel,getRotation:i("target"),getRotationPoint:t.getTargetLabelRotationPoint,getRotationOffset:t.getTargetLabelRotationOffset,isVisible:n("target-label")});var h=Vr(function(){console.log("garbage collect flag set"),r.data.gc=!0},1e4);r.onUpdateEleCalcs(function(f,v){var m=!1;v&&v.length>0&&(m|=r.drawing.invalidate(v)),m&&h()}),function u2(e){var t=e.render;e.render=function(n){n=n||{},e.webgl&&(e.cy.zoom()>7.99?(function d2(e){var t=e.data.contexts[e.WEBGL];t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT)}(e),t.call(e,n)):(function f2(e){var t=function(a){a.save(),a.setTransform(1,0,0,1,0,0),a.clearRect(0,0,e.canvasWidth,e.canvasHeight),a.restore()};t(e.data.contexts[e.NODE]),t(e.data.contexts[e.DRAG])}(e),_0(e,n,Eo.SCREEN)))};var r=e.matchCanvasSize;e.matchCanvasSize=function(n){r.call(e,n),e.pickingFrameBuffer.setFramebufferAttachmentSizes(e.canvasWidth,e.canvasHeight),e.pickingFrameBuffer.needsDraw=!0},e.findNearestElements=function(n,s,o,u){return function x2(e,t,r){var n,s,u,a=function m2(e,t,r){var n,s,h=jc(e),m=function Up(e,t,r,a,i){var s=i*r+t.y;return[a*r+t.x,s=Math.round(e.canvasHeight-s)]}(e,h.pan,h.zoom,t,r),k=Xt(m,2);n=k[0]-3,s=k[1]-3;var K=e.data.contexts[e.WEBGL];K.bindFramebuffer(K.FRAMEBUFFER,e.pickingFrameBuffer),e.pickingFrameBuffer.needsDraw&&(K.viewport(0,0,K.canvas.width,K.canvas.height),_0(e,null,Eo.PICKING),e.pickingFrameBuffer.needsDraw=!1);var X=new Uint8Array(144);K.readPixels(n,s,6,6,K.RGBA,K.UNSIGNED_BYTE,X),K.bindFramebuffer(K.FRAMEBUFFER,null);for(var mt=new Set,ie=0;ie<36;ie++){var Yt=Hp(X.slice(4*ie,4*ie+4))-1;Yt>=0&&mt.add(Yt)}return mt}(e,t,r),i=e.getCachedZSortedEles(),o=q(a);try{for(o.s();!(u=o.n()).done;){var f=i[u.value];if(!n&&f.isNode()&&(n=f),!s&&f.isEdge()&&(s=f),n&&s)break}}catch(v){o.e(v)}finally{o.f()}return[n,s].filter(Boolean)}(e,n,s)};var a=e.invalidateCachedZSortedEles;e.invalidateCachedZSortedEles=function(){a.call(e),e.pickingFrameBuffer.needsDraw=!0};var i=e.notify;e.notify=function(n,s){i.call(e,n,s),"viewport"===n||"bounds"===n?e.pickingFrameBuffer.needsDraw=!0:"background"===n&&e.drawing.invalidate(s,{type:"node-body"})}}(r)};var th=function(t,r){return function(a){var i=t(a),n=x0(a,r);return n.length>1?n.map(function(s,o){return"".concat(i,"_").concat(o)}):i}},eh=function(t,r){return function(a,i){var n=t(a);if("string"==typeof i){var s=i.indexOf("_");if(s>0){var o=Number(i.substring(s+1)),u=x0(a,r),h=n.h/u.length,f=h*o;return{x1:n.x1,w:n.w,y1:n.y1+f,h,yOffset:f}}}return n}};function b0(e,t){var r=e.canvasWidth,a=e.canvasHeight,i=jc(e),n=i.pan,s=i.zoom;t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,r,a),t.translate(n.x,n.y),t.scale(s,s)}function rh(e,t,r){var a=e.drawing;t+=1,r.isNode()?(a.drawNode(r,t,"node-underlay"),a.drawNode(r,t,"node-body"),a.drawTexture(r,t,"label"),a.drawNode(r,t,"node-overlay")):(a.drawEdgeLine(r,t),a.drawEdgeArrow(r,t,"source"),a.drawEdgeArrow(r,t,"target"),a.drawTexture(r,t,"label"),a.drawTexture(r,t,"edge-source-label"),a.drawTexture(r,t,"edge-target-label"))}function _0(e,t,r){var a;e.webglDebug&&(a=performance.now());var i=e.drawing,n=0;if(r.screen&&e.data.canvasNeedsRedraw[e.SELECT_BOX]&&function p2(e,t){e.drawSelectionRectangle(t,function(r){return b0(e,r)})}(e,t),e.data.canvasNeedsRedraw[e.NODE]||r.picking){var s=e.data.contexts[e.WEBGL];r.screen?(s.clearColor(0,0,0,0),s.enable(s.BLEND),s.blendFunc(s.ONE,s.ONE_MINUS_SRC_ALPHA)):s.disable(s.BLEND),s.clear(s.COLOR_BUFFER_BIT|s.DEPTH_BUFFER_BIT),s.viewport(0,0,s.canvas.width,s.canvas.height);var o=function g2(e){var t=e.canvasWidth,r=e.canvasHeight,a=jc(e),i=a.pan,n=a.zoom,s=Xc();ul(s,s,[i.x,i.y]),Zc(s,s,[n,n]);var o=Xc();!function Jp(e,t,r){e[0]=2/t,e[1]=0,e[2]=0,e[3]=0,e[4]=-2/r,e[5]=0,e[6]=-1,e[7]=1,e[8]=1}(o,t,r);var u=Xc();return function Qp(e,t,r){var a=t[0],i=t[1],n=t[2],s=t[3],o=t[4],u=t[5],h=t[6],f=t[7],v=t[8],m=r[0],k=r[1],_=r[2],U=r[3],I=r[4],K=r[5],Y=r[6],X=r[7],mt=r[8];e[0]=m*a+k*s+_*h,e[1]=m*i+k*o+_*f,e[2]=m*n+k*u+_*v,e[3]=U*a+I*s+K*h,e[4]=U*i+I*o+K*f,e[5]=U*n+I*u+K*v,e[6]=Y*a+X*s+mt*h,e[7]=Y*i+X*o+mt*f,e[8]=Y*n+X*u+mt*v}(u,o,s),u}(e),u=e.getCachedZSortedEles();if(n=u.length,i.startFrame(o,r),r.screen){for(var h=0;h<u.nondrag.length;h++)rh(e,h,u.nondrag[h]);for(var f=0;f<u.drag.length;f++)rh(e,f,u.drag[f])}else if(r.picking)for(var v=0;v<u.length;v++)rh(e,v,u[v]);i.endFrame(),r.screen&&e.webglDebugShowAtlases&&(function v2(e){var t=e.data.contexts[e.NODE];t.save(),b0(e,t),t.strokeStyle="rgba(0, 0, 0, 0.3)",t.beginPath(),t.moveTo(-1e3,0),t.lineTo(1e3,0),t.stroke(),t.beginPath(),t.moveTo(0,-1e3),t.lineTo(0,1e3),t.stroke(),t.restore()}(e),function y2(e){var t=function(i,n,s){for(var o=i.atlasManager.getAtlasCollection(n),u=e.data.contexts[e.NODE],h=o.atlases,f=0;f<h.length;f++){var m=h[f].canvas;if(m){var k=m.width,_=m.height,U=k*f,I=m.height*s;u.save(),u.scale(.4,.4),u.drawImage(m,U,I),u.strokeStyle="black",u.rect(U,I,k,_),u.stroke(),u.restore()}}},r=0;t(e.drawing,"node",r++),t(e.drawing,"label",r++)}(e)),e.data.canvasNeedsRedraw[e.NODE]=!1,e.data.canvasNeedsRedraw[e.DRAG]=!1}if(e.webglDebug){var m=performance.now(),_=Math.ceil(m-a),U=i.getDebugInfo(),I=["".concat(n," elements"),"".concat(U.totalInstances," instances"),"".concat(U.batchCount," batches"),"".concat(U.totalAtlases," atlases"),"".concat(U.wrappedCount," wrapped textures"),"".concat(U.simpleCount," simple shapes")].join(", ");console.log("WebGL (".concat(r.name,") - frame time ").concat(_,"ms")),console.log("Totals:"),console.log("  ".concat(I)),console.log("Texture Atlases Used:");var X,Y=q(U.atlasInfo);try{for(Y.s();!(X=Y.n()).done;){var mt=X.value;console.log("  ".concat(mt.type,": ").concat(mt.keyCount," keys, ").concat(mt.atlasCount," atlases"))}}catch(ie){Y.e(ie)}finally{Y.f()}console.log("")}e.data.gc&&(console.log("Garbage Collect!"),e.data.gc=!1,i.gc())}for(var Es={drawPolygonPath:function(e,t,r,a,i,n){var s=a/2,o=i/2;e.beginPath&&e.beginPath(),e.moveTo(t+s*n[0],r+o*n[1]);for(var u=1;u<n.length/2;u++)e.lineTo(t+s*n[2*u],r+o*n[2*u+1]);e.closePath()},drawRoundPolygonPath:function(e,t,r,a,i,n,s){s.forEach(function(o){return Wd(e,o)}),e.closePath()},drawRoundRectanglePath:function(e,t,r,a,i,n){var s=a/2,o=i/2,u="auto"===n?Ui(a,i):Math.min(n,o,s);e.beginPath&&e.beginPath(),e.moveTo(t,r-o),e.arcTo(t+s,r-o,t+s,r,u),e.arcTo(t+s,r+o,t,r+o,u),e.arcTo(t-s,r+o,t-s,r,u),e.arcTo(t-s,r-o,t,r-o,u),e.lineTo(t,r-o),e.closePath()},drawBottomRoundRectanglePath:function(e,t,r,a,i,n){var s=a/2,o=i/2,u="auto"===n?Ui(a,i):n;e.beginPath&&e.beginPath(),e.moveTo(t,r-o),e.lineTo(t+s,r-o),e.lineTo(t+s,r),e.arcTo(t+s,r+o,t,r+o,u),e.arcTo(t-s,r+o,t-s,r,u),e.lineTo(t-s,r-o),e.lineTo(t,r-o),e.closePath()},drawCutRectanglePath:function(e,t,r,a,i,n,s){var o=a/2,u=i/2,h="auto"===s?8:s;e.beginPath&&e.beginPath(),e.moveTo(t-o+h,r-u),e.lineTo(t+o-h,r-u),e.lineTo(t+o,r-u+h),e.lineTo(t+o,r+u-h),e.lineTo(t+o-h,r+u),e.lineTo(t-o+h,r+u),e.lineTo(t-o,r+u-h),e.lineTo(t-o,r-u+h),e.closePath()},drawBarrelPath:function(e,t,r,a,i){var n=a/2,s=i/2,o=t-n,u=t+n,h=r-s,f=r+s,v=yl(a,i),m=v.widthOffset,k=v.heightOffset,_=v.ctrlPtOffsetPct*m;e.beginPath&&e.beginPath(),e.moveTo(o,h+k),e.lineTo(o,f-k),e.quadraticCurveTo(o+_,f,o+m,f),e.lineTo(u-m,f),e.quadraticCurveTo(u-_,f,u,f-k),e.lineTo(u,h+k),e.quadraticCurveTo(u-_,h,u-m,h),e.lineTo(o+m,h),e.quadraticCurveTo(o+_,h,o,h+k),e.closePath()}},E0=Math.sin(0),C0=Math.cos(0),ah={},ih={},k0=Math.PI/40,to=0*Math.PI;to<2*Math.PI;to+=k0)ah[to]=Math.sin(to),ih[to]=Math.cos(to);Es.drawEllipsePath=function(e,t,r,a,i){if(e.beginPath&&e.beginPath(),e.ellipse)e.ellipse(t,r,a/2,i/2,0,0,2*Math.PI);else for(var n,s,o=a/2,u=i/2,h=0*Math.PI;h<2*Math.PI;h+=k0)n=t-o*ah[h]*E0+o*ih[h]*C0,s=r+u*ih[h]*E0+u*ah[h]*C0,0===h?e.moveTo(n,s):e.lineTo(n,s);e.closePath()};var To={};function T0(e){var t=e.indexOf(",");return e.substr(t+1)}function S0(e,t,r){var a=function(){return t.toDataURL(r,e.quality)};switch(e.output){case"blob-promise":return new Ks(function(i,n){try{t.toBlob(function(s){null!=s?i(s):n(new Error("`canvas.toBlob()` sent a null value in its callback"))},r,e.quality)}catch(s){n(s)}});case"blob":return function b2(e,t){for(var r=atob(e),a=new ArrayBuffer(r.length),i=new Uint8Array(a),n=0;n<r.length;n++)i[n]=r.charCodeAt(n);return new Blob([a],{type:t})}(T0(a()),r);case"base64":return T0(a());default:return a()}}To.createBuffer=function(e,t){var r=document.createElement("canvas");return r.width=e,r.height=t,[r,r.getContext("2d")]},To.bufferCanvasImage=function(e){var t=this.cy,a=t.mutableElements().boundingBox(),i=this.findContainerClientCoords(),n=e.full?Math.ceil(a.w):i[2],s=e.full?Math.ceil(a.h):i[3],o=Z(e.maxWidth)||Z(e.maxHeight),u=this.getPixelRatio(),h=1;if(void 0!==e.scale)n*=e.scale,s*=e.scale,h=e.scale;else if(o){var f=1/0,v=1/0;Z(e.maxWidth)&&(f=h*e.maxWidth/n),Z(e.maxHeight)&&(v=h*e.maxHeight/s),n*=h=Math.min(f,v),s*=h}o||(n*=u,s*=u,h*=u);var m=document.createElement("canvas");m.width=n,m.height=s,m.style.width=n+"px",m.style.height=s+"px";var k=m.getContext("2d");if(n>0&&s>0){k.clearRect(0,0,n,s),k.globalCompositeOperation="source-over";var _=this.getCachedZSortedEles();if(e.full)k.translate(-a.x1*h,-a.y1*h),k.scale(h,h),this.drawElements(k,_),k.scale(1/h,1/h),k.translate(a.x1*h,a.y1*h);else{var U=t.pan(),I={x:U.x*h,y:U.y*h};h*=t.zoom(),k.translate(I.x,I.y),k.scale(h,h),this.drawElements(k,_),k.scale(1/h,1/h),k.translate(-I.x,-I.y)}e.bg&&(k.globalCompositeOperation="destination-over",k.fillStyle=e.bg,k.rect(0,0,n,s),k.fill())}return m},To.png=function(e){return S0(e,this.bufferCanvasImage(e),"image/png")},To.jpg=function(e){return S0(e,this.bufferCanvasImage(e),"image/jpeg")};var _2=A0,Si=A0.prototype;function A0(e){var t=this,a=t.cy.window().document;e.webgl&&(Si.CANVAS_LAYERS=t.CANVAS_LAYERS=4,console.log("webgl rendering enabled")),t.data={canvases:new Array(Si.CANVAS_LAYERS),contexts:new Array(Si.CANVAS_LAYERS),canvasNeedsRedraw:new Array(Si.CANVAS_LAYERS),bufferCanvases:new Array(Si.BUFFER_COUNT),bufferContexts:new Array(Si.CANVAS_LAYERS)};var i="-webkit-tap-highlight-color",n="rgba(0,0,0,0)";t.data.canvasContainer=a.createElement("div");var s=t.data.canvasContainer.style;t.data.canvasContainer.style[i]=n,s.position="relative",s.zIndex="0",s.overflow="hidden";var o=e.cy.container();o.appendChild(t.data.canvasContainer),o.style[i]=n;var u={"-webkit-user-select":"none","-moz-user-select":"-moz-none","user-select":"none","-webkit-tap-highlight-color":"rgba(0,0,0,0)","outline-style":"none"};mr&&mr.userAgent.match(/msie|trident|edge/i)&&(u["-ms-touch-action"]="none",u["touch-action"]="none");for(var h=0;h<Si.CANVAS_LAYERS;h++){var f=t.data.canvases[h]=a.createElement("canvas"),v=Si.CANVAS_TYPES[h];t.data.contexts[h]=f.getContext(v),t.data.contexts[h]||za("Could not create canvas of type "+v),Object.keys(u).forEach(function(Ta){f.style[Ta]=u[Ta]}),f.style.position="absolute",f.setAttribute("data-id","layer"+h),f.style.zIndex=String(Si.CANVAS_LAYERS-h),t.data.canvasContainer.appendChild(f),t.data.canvasNeedsRedraw[h]=!1}for(t.data.topCanvas=t.data.canvases[0],t.data.canvases[Si.NODE].setAttribute("data-id","layer"+Si.NODE+"-node"),t.data.canvases[Si.SELECT_BOX].setAttribute("data-id","layer"+Si.SELECT_BOX+"-selectbox"),t.data.canvases[Si.DRAG].setAttribute("data-id","layer"+Si.DRAG+"-drag"),t.data.canvases[Si.WEBGL]&&t.data.canvases[Si.WEBGL].setAttribute("data-id","layer"+Si.WEBGL+"-webgl"),h=0;h<Si.BUFFER_COUNT;h++)t.data.bufferCanvases[h]=a.createElement("canvas"),t.data.bufferContexts[h]=t.data.bufferCanvases[h].getContext("2d"),t.data.bufferCanvases[h].style.position="absolute",t.data.bufferCanvases[h].setAttribute("data-id","buffer"+h),t.data.bufferCanvases[h].style.zIndex=String(-h-1),t.data.bufferCanvases[h].style.visibility="hidden";t.pathsEnabled=!0;var m=Tt(),_=function(Kr){return{x:-Kr.w/2,y:-Kr.h/2}},I=function(Kr){return Kr[0]._private.nodeKey},K=function(Kr){return Kr[0]._private.labelStyleKey},Y=function(Kr){return Kr[0]._private.sourceLabelStyleKey},X=function(Kr){return Kr[0]._private.targetLabelStyleKey},mt=function(Kr,$r,ea,xa,Ga){return t.drawElement(Kr,$r,ea,!1,!1,Ga)},ie=function(Kr,$r,ea,xa,Ga){return t.drawElementText(Kr,$r,ea,xa,"main",Ga)},se=function(Kr,$r,ea,xa,Ga){return t.drawElementText(Kr,$r,ea,xa,"source",Ga)},Yt=function(Kr,$r,ea,xa,Ga){return t.drawElementText(Kr,$r,ea,xa,"target",Ga)},he=function(Kr){return Kr.boundingBox(),Kr[0]._private.bodyBounds},be=function(Kr){return Kr.boundingBox(),Kr[0]._private.labelBounds.main||m},Se=function(Kr){return Kr.boundingBox(),Kr[0]._private.labelBounds.source||m},De=function(Kr){return Kr.boundingBox(),Kr[0]._private.labelBounds.target||m},Oe=function(Kr,$r){return $r},Ne=function(Kr){return function(Kr){return{x:(Kr.x1+Kr.x2)/2,y:(Kr.y1+Kr.y2)/2}}(he(Kr))},Je=function(Kr,$r,ea){var xa=Kr?Kr+"-":"";return{x:$r.x+ea.pstyle(xa+"text-margin-x").pfValue,y:$r.y+ea.pstyle(xa+"text-margin-y").pfValue}},dr=function(Kr,$r,ea){var xa=Kr[0]._private.rscratch;return{x:xa[$r],y:xa[ea]}},gr=function(Kr){return Je("",dr(Kr,"labelX","labelY"),Kr)},ar=function(Kr){return Je("source",dr(Kr,"sourceLabelX","sourceLabelY"),Kr)},Sr=function(Kr){return Je("target",dr(Kr,"targetLabelX","targetLabelY"),Kr)},Ur=function(Kr){return _(he(Kr))},jr=function(Kr){return _(Se(Kr))},Mr=function(Kr){return _(De(Kr))},Wr=function(Kr){var $r=be(Kr),ea=_(be(Kr));if(Kr.isNode()){switch(Kr.pstyle("text-halign").value){case"left":ea.x=-$r.w-($r.leftPad||0);break;case"right":ea.x=-($r.rightPad||0)}switch(Kr.pstyle("text-valign").value){case"top":ea.y=-$r.h-($r.topPad||0);break;case"bottom":ea.y=-($r.botPad||0)}}return ea},pa=t.data.eleTxrCache=new xo(t,{getKey:I,doesEleInvalidateKey:function(Kr){var $r=Kr[0]._private;return!($r.oldBackgroundTimestamp===$r.backgroundTimestamp)},drawElement:mt,getBoundingBox:he,getRotationPoint:Ne,getRotationOffset:Ur,allowEdgeTxrCaching:!1,allowParentTxrCaching:!1}),Ea=t.data.lblTxrCache=new xo(t,{getKey:K,drawElement:ie,getBoundingBox:be,getRotationPoint:gr,getRotationOffset:Wr,isVisible:Oe}),va=t.data.slbTxrCache=new xo(t,{getKey:Y,drawElement:se,getBoundingBox:Se,getRotationPoint:ar,getRotationOffset:jr,isVisible:Oe}),Aa=t.data.tlbTxrCache=new xo(t,{getKey:X,drawElement:Yt,getBoundingBox:De,getRotationPoint:Sr,getRotationOffset:Mr,isVisible:Oe}),Ia=t.data.lyrTxrCache=new r0(t);t.onUpdateEleCalcs(function(Kr,$r){pa.invalidateElements($r),Ea.invalidateElements($r),va.invalidateElements($r),Aa.invalidateElements($r),Ia.invalidateElements($r);for(var ea=0;ea<$r.length;ea++){var xa=$r[ea]._private;xa.oldBackgroundTimestamp=xa.backgroundTimestamp}});var Qa=function(Kr){for(var $r=0;$r<Kr.length;$r++)Ia.enqueueElementRefinement(Kr[$r].ele)};pa.onDequeue(Qa),Ea.onDequeue(Qa),va.onDequeue(Qa),Aa.onDequeue(Qa),e.webgl&&t.initWebgl(e,{getStyleKey:I,getLabelKey:K,getSourceLabelKey:Y,getTargetLabelKey:X,drawElement:mt,drawLabel:ie,drawSourceLabel:se,drawTargetLabel:Yt,getElementBox:he,getLabelBox:be,getSourceLabelBox:Se,getTargetLabelBox:De,getElementRotationPoint:Ne,getElementRotationOffset:Ur,getLabelRotationPoint:gr,getSourceLabelRotationPoint:ar,getTargetLabelRotationPoint:Sr,getLabelRotationOffset:Wr,getSourceLabelRotationOffset:jr,getTargetLabelRotationOffset:Mr})}Si.CANVAS_LAYERS=3,Si.SELECT_BOX=0,Si.DRAG=1,Si.NODE=2,Si.WEBGL=3,Si.CANVAS_TYPES=["2d","2d","2d","webgl2"],Si.BUFFER_COUNT=3,Si.TEXTURE_BUFFER=0,Si.MOTIONBLUR_BUFFER_NODE=1,Si.MOTIONBLUR_BUFFER_DRAG=2,Si.redrawHint=function(e,t){var r=this;switch(e){case"eles":r.data.canvasNeedsRedraw[Si.NODE]=t;break;case"drag":r.data.canvasNeedsRedraw[Si.DRAG]=t;break;case"select":r.data.canvasNeedsRedraw[Si.SELECT_BOX]=t;break;case"gc":r.data.gc=!0}};var E2=typeof Path2D<"u";Si.path2dEnabled=function(e){if(void 0===e)return this.pathsEnabled;this.pathsEnabled=!!e},Si.usePaths=function(){return E2&&this.pathsEnabled},Si.setImgSmoothing=function(e,t){null!=e.imageSmoothingEnabled?e.imageSmoothingEnabled=t:(e.webkitImageSmoothingEnabled=t,e.mozImageSmoothingEnabled=t,e.msImageSmoothingEnabled=t)},Si.getImgSmoothing=function(e){return null!=e.imageSmoothingEnabled?e.imageSmoothingEnabled:e.webkitImageSmoothingEnabled||e.mozImageSmoothingEnabled||e.msImageSmoothingEnabled},Si.makeOffscreenCanvas=function(e,t){var r;return"undefined"!==(typeof OffscreenCanvas>"u"?"undefined":vr(OffscreenCanvas))?r=new OffscreenCanvas(e,t):((r=this.cy.window().document.createElement("canvas")).width=e,r.height=t),r},[i0,ns,hs,qc,Ls,_s,Fn,m0,Es,To,{nodeShapeImpl:function(e,t,r,a,i,n,s,o){switch(e){case"ellipse":return this.drawEllipsePath(t,r,a,i,n);case"polygon":return this.drawPolygonPath(t,r,a,i,n,s);case"round-polygon":return this.drawRoundPolygonPath(t,r,a,i,n,s,o);case"roundrectangle":case"round-rectangle":return this.drawRoundRectanglePath(t,r,a,i,n,o);case"cutrectangle":case"cut-rectangle":return this.drawCutRectanglePath(t,r,a,i,n,s,o);case"bottomroundrectangle":case"bottom-round-rectangle":return this.drawBottomRoundRectanglePath(t,r,a,i,n,o);case"barrel":return this.drawBarrelPath(t,r,a,i,n)}}}].forEach(function(e){G(Si,e)});var k2=[{type:"layout",extensions:j1},{type:"renderer",extensions:[{name:"null",impl:Bd},{name:"base",impl:Xd},{name:"canvas",impl:_2}]}],D0={},L0={};function B0(e,t,r){var a=r,i=function(he){Sa("Can not register `"+t+"` for `"+e+"` since `"+he+"` already exists in the prototype and can not be overridden")};if("core"===e){if(po.prototype[t])return i(t);po.prototype[t]=r}else if("collection"===e){if(wn.prototype[t])return i(t);wn.prototype[t]=r}else if("layout"===e){for(var n=function(he){this.options=he,r.call(this,he),Bt(this._private)||(this._private={}),this._private.cy=he.cy,this._private.listeners=[],this.createEmitter()},s=n.prototype=Object.create(r.prototype),o=[],u=0;u<o.length;u++){var h=o[u];s[h]=s[h]||function(){return this}}s.start&&!s.run?s.run=function(){return this.start(),this}:!s.start&&s.run&&(s.start=function(){return this.run(),this});var f=r.prototype.stop;s.stop=function(){var Yt=this.options;if(Yt&&Yt.animate){var he=this.animations;if(he)for(var be=0;be<he.length;be++)he[be].stop()}return f?f.call(this):this.emit("layoutstop"),this},s.destroy||(s.destroy=function(){return this}),s.cy=function(){return this._private.cy};var v=function(he){return he._private.cy},m={addEventFields:function(he,be){be.layout=he,be.cy=v(he),be.target=he},bubble:function(){return!0},parent:function(he){return v(he)}};G(s,{createEmitter:function(){return this._private.emitter=new Vo(m,this),this},emitter:function(){return this._private.emitter},on:function(he,be){return this.emitter().on(he,be),this},one:function(he,be){return this.emitter().one(he,be),this},once:function(he,be){return this.emitter().one(he,be),this},removeListener:function(he,be){return this.emitter().removeListener(he,be),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},emit:function(he,be){return this.emitter().emit(he,be),this}}),$i.eventAliasesOn(s),a=n}else if("renderer"===e&&"null"!==t&&"base"!==t){var k=R0("renderer","base"),_=k.prototype,U=r,I=r.prototype,K=function(){k.apply(this,arguments),U.apply(this,arguments)},Y=K.prototype;for(var X in _){var mt=_[X];if(null!=I[X])return i(X);Y[X]=mt}for(var se in I)Y[se]=I[se];_.clientFunctions.forEach(function(Yt){Y[Yt]=Y[Yt]||function(){za("Renderer does not implement `renderer."+Yt+"()` on its prototype")}}),a=K}else if("__proto__"===e||"constructor"===e||"prototype"===e)return za(e+" is an illegal type to be registered, possibly lead to prototype pollutions");return Ze({map:D0,keys:[e,t],value:a})}function R0(e,t){return ye({map:D0,keys:[e,t]})}function T2(e,t,r,a,i){return Ze({map:L0,keys:[e,t,r,a],value:i})}function S2(e,t,r,a){return ye({map:L0,keys:[e,t,r,a]})}var nh=function(){return 2===arguments.length?R0.apply(null,arguments):3===arguments.length?B0.apply(null,arguments):4===arguments.length?S2.apply(null,arguments):5===arguments.length?T2.apply(null,arguments):void za("Invalid extension access syntax")};po.prototype.extension=nh,k2.forEach(function(e){e.extensions.forEach(function(t){B0(e.type,t.name,t.impl)})});var gl=function(){if(!(this instanceof gl))return new gl;this.length=0},Rs=gl.prototype;Rs.instanceString=function(){return"stylesheet"},Rs.selector=function(e){return this[this.length++]={selector:e,properties:[]},this},Rs.css=function(e,t){var r=this.length-1;if(Ge(e))this[r].properties.push({name:e,value:t});else if(Bt(e))for(var a=e,i=Object.keys(a),n=0;n<i.length;n++){var s=i[n],o=a[s];if(null!=o){var u=En.properties[s]||En.properties[qe(s)];null!=u&&this[r].properties.push({name:u.name,value:o})}}return this},Rs.style=Rs.css,Rs.generateStyle=function(e){var t=new En(e);return this.appendToStyle(t)},Rs.appendToStyle=function(e){for(var t=0;t<this.length;t++){var r=this[t],i=r.properties;e.selector(r.selector);for(var n=0;n<i.length;n++){var s=i[n];e.css(s.name,s.value)}}return e};var Ps=function(t){return void 0===t&&(t={}),Bt(t)?new po(t):Ge(t)?nh.apply(nh,arguments):void 0};Ps.use=function(e){var t=Array.prototype.slice.call(arguments,1);return t.unshift(Ps),e.apply(null,t),this},Ps.warnings=function(e){return ja(e)},Ps.version="3.33.1",Ps.stylesheet=Ps.Stylesheet=gl},18617:(ti,_r,B)=>{"use strict";B.r(_r),B.d(_r,{diagram:()=>nr});var lt=B(89204),ee=B(80525),L=B(67040),D=B(52052),Rt=B(79006),dt=B(32303),q=B(62233),A=B(40622),$t={NORMAL:0,REVERSE:1,HIGHLIGHT:2,MERGE:3,CHERRY_PICK:4},yt=Rt.UI.gitGraph,Ye=(0,dt.K2)(()=>(0,D.$t)({...yt,...(0,Rt.zj)().gitGraph}),"getConfig"),bt=new L.m(()=>{const te=Ye(),ne=te.mainBranchName,Le=te.mainBranchOrder;return{mainBranchName:ne,commits:new Map,head:null,branchConfig:new Map([[ne,{name:ne,order:Le}]]),branches:new Map([[ne,null]]),currBranch:ne,direction:"LR",seq:0,options:{}}});function Xt(){return(0,D.yT)({length:7})}function j(te,ne){const Le=Object.create(null);return te.reduce((tr,g)=>{const y=ne(g);return Le[y]||(Le[y]=!0,tr.push(g)),tr},[])}(0,dt.K2)(Xt,"getID"),(0,dt.K2)(j,"uniqBy");var fr=(0,dt.K2)(function(te){bt.records.direction=te},"setDirection"),Fe=(0,dt.K2)(function(te){dt.Rm.debug("options str",te),te=te?.trim(),te=te||"{}";try{bt.records.options=JSON.parse(te)}catch(ne){dt.Rm.error("error while parsing gitGraph options",ne.message)}},"setOptions"),vr=(0,dt.K2)(function(){return bt.records.options},"getOptions"),zr=(0,dt.K2)(function(te){let ne=te.msg,Le=te.id;const tr=te.type;let g=te.tags;dt.Rm.info("commit",ne,Le,tr,g),dt.Rm.debug("Entering commit:",ne,Le,tr,g);const y=Ye();Le=Rt.Y2.sanitizeText(Le,y),ne=Rt.Y2.sanitizeText(ne,y),g=g?.map(P=>Rt.Y2.sanitizeText(P,y));const E={id:Le||bt.records.seq+"-"+Xt(),message:ne,seq:bt.records.seq++,type:tr??$t.NORMAL,tags:g??[],parents:null==bt.records.head?[]:[bt.records.head.id],branch:bt.records.currBranch};bt.records.head=E,dt.Rm.info("main branch",y.mainBranchName),bt.records.commits.has(E.id)&&dt.Rm.warn(`Commit ID ${E.id} already exists`),bt.records.commits.set(E.id,E),bt.records.branches.set(bt.records.currBranch,E.id),dt.Rm.debug("in pushCommit "+E.id)},"commit"),br=(0,dt.K2)(function(te){let ne=te.name;const Le=te.order;if(ne=Rt.Y2.sanitizeText(ne,Ye()),bt.records.branches.has(ne))throw new Error(`Trying to create an existing branch. (Help: Either use a new name if you want create a new branch or try using "checkout ${ne}")`);bt.records.branches.set(ne,null!=bt.records.head?bt.records.head.id:null),bt.records.branchConfig.set(ne,{name:ne,order:Le}),Lr(ne),dt.Rm.debug("in createBranch")},"branch"),mr=(0,dt.K2)(te=>{let ne=te.branch,Le=te.id;const tr=te.type,g=te.tags,y=Ye();ne=Rt.Y2.sanitizeText(ne,y),Le&&(Le=Rt.Y2.sanitizeText(Le,y));const E=bt.records.branches.get(bt.records.currBranch),P=bt.records.branches.get(ne),b=E?bt.records.commits.get(E):void 0,z=P?bt.records.commits.get(P):void 0;if(b&&z&&b.branch===ne)throw new Error(`Cannot merge branch '${ne}' into itself.`);if(bt.records.currBranch===ne){const C=new Error('Incorrect usage of "merge". Cannot merge a branch to itself');throw C.hash={text:`merge ${ne}`,token:`merge ${ne}`,expected:["branch abc"]},C}if(void 0===b||!b){const C=new Error(`Incorrect usage of "merge". Current branch (${bt.records.currBranch})has no commits`);throw C.hash={text:`merge ${ne}`,token:`merge ${ne}`,expected:["commit"]},C}if(!bt.records.branches.has(ne)){const C=new Error('Incorrect usage of "merge". Branch to be merged ('+ne+") does not exist");throw C.hash={text:`merge ${ne}`,token:`merge ${ne}`,expected:[`branch ${ne}`]},C}if(void 0===z||!z){const C=new Error('Incorrect usage of "merge". Branch to be merged ('+ne+") has no commits");throw C.hash={text:`merge ${ne}`,token:`merge ${ne}`,expected:['"commit"']},C}if(b===z){const C=new Error('Incorrect usage of "merge". Both branches have same head');throw C.hash={text:`merge ${ne}`,token:`merge ${ne}`,expected:["branch abc"]},C}if(Le&&bt.records.commits.has(Le)){const C=new Error('Incorrect usage of "merge". Commit with id:'+Le+" already exists, use different custom id");throw C.hash={text:`merge ${ne} ${Le} ${tr} ${g?.join(" ")}`,token:`merge ${ne} ${Le} ${tr} ${g?.join(" ")}`,expected:[`merge ${ne} ${Le}_UNIQUE ${tr} ${g?.join(" ")}`]},C}const p=P||"",x={id:Le||`${bt.records.seq}-${Xt()}`,message:`merged branch ${ne} into ${bt.records.currBranch}`,seq:bt.records.seq++,parents:null==bt.records.head?[]:[bt.records.head.id,p],branch:bt.records.currBranch,type:$t.MERGE,customType:tr,customId:!!Le,tags:g??[]};bt.records.head=x,bt.records.commits.set(x.id,x),bt.records.branches.set(bt.records.currBranch,x.id),dt.Rm.debug(bt.records.branches),dt.Rm.debug("in mergeBranch")},"merge"),Er=(0,dt.K2)(function(te){let ne=te.id,Le=te.targetId,tr=te.tags,g=te.parent;dt.Rm.debug("Entering cherryPick:",ne,Le,tr);const y=Ye();if(ne=Rt.Y2.sanitizeText(ne,y),Le=Rt.Y2.sanitizeText(Le,y),tr=tr?.map(b=>Rt.Y2.sanitizeText(b,y)),g=Rt.Y2.sanitizeText(g,y),!ne||!bt.records.commits.has(ne)){const b=new Error('Incorrect usage of "cherryPick". Source commit id should exist and provided');throw b.hash={text:`cherryPick ${ne} ${Le}`,token:`cherryPick ${ne} ${Le}`,expected:["cherry-pick abc"]},b}const E=bt.records.commits.get(ne);if(void 0===E||!E)throw new Error('Incorrect usage of "cherryPick". Source commit id should exist and provided');if(g&&(!Array.isArray(E.parents)||!E.parents.includes(g)))throw new Error("Invalid operation: The specified parent commit is not an immediate parent of the cherry-picked commit.");const P=E.branch;if(E.type===$t.MERGE&&!g)throw new Error("Incorrect usage of cherry-pick: If the source commit is a merge commit, an immediate parent commit must be specified.");if(!Le||!bt.records.commits.has(Le)){if(P===bt.records.currBranch){const x=new Error('Incorrect usage of "cherryPick". Source commit is already on current branch');throw x.hash={text:`cherryPick ${ne} ${Le}`,token:`cherryPick ${ne} ${Le}`,expected:["cherry-pick abc"]},x}const b=bt.records.branches.get(bt.records.currBranch);if(void 0===b||!b){const x=new Error(`Incorrect usage of "cherry-pick". Current branch (${bt.records.currBranch})has no commits`);throw x.hash={text:`cherryPick ${ne} ${Le}`,token:`cherryPick ${ne} ${Le}`,expected:["cherry-pick abc"]},x}const z=bt.records.commits.get(b);if(void 0===z||!z){const x=new Error(`Incorrect usage of "cherry-pick". Current branch (${bt.records.currBranch})has no commits`);throw x.hash={text:`cherryPick ${ne} ${Le}`,token:`cherryPick ${ne} ${Le}`,expected:["cherry-pick abc"]},x}const p={id:bt.records.seq+"-"+Xt(),message:`cherry-picked ${E?.message} into ${bt.records.currBranch}`,seq:bt.records.seq++,parents:null==bt.records.head?[]:[bt.records.head.id,E.id],branch:bt.records.currBranch,type:$t.CHERRY_PICK,tags:tr?tr.filter(Boolean):[`cherry-pick:${E.id}${E.type===$t.MERGE?`|parent:${g}`:""}`]};bt.records.head=p,bt.records.commits.set(p.id,p),bt.records.branches.set(bt.records.currBranch,p.id),dt.Rm.debug(bt.records.branches),dt.Rm.debug("in cherryPick")}},"cherryPick"),Lr=(0,dt.K2)(function(te){if(te=Rt.Y2.sanitizeText(te,Ye()),!bt.records.branches.has(te)){const ne=new Error(`Trying to checkout branch which is not yet created. (Help try using "branch ${te}")`);throw ne.hash={text:`checkout ${te}`,token:`checkout ${te}`,expected:[`branch ${te}`]},ne}{bt.records.currBranch=te;const ne=bt.records.branches.get(bt.records.currBranch);bt.records.head=void 0!==ne&&ne?bt.records.commits.get(ne)??null:null}},"checkout");function Ar(te,ne,Le){const tr=te.indexOf(ne);-1===tr?te.push(Le):te.splice(tr,1,Le)}function ge(te){const ne=te.reduce((g,y)=>g.seq>y.seq?g:y,te[0]);let Le="";te.forEach(function(g){Le+=g===ne?"\t*":"\t|"});const tr=[Le,ne.id,ne.seq];for(const g in bt.records.branches)bt.records.branches.get(g)===ne.id&&tr.push(g);if(dt.Rm.debug(tr.join(" ")),ne.parents&&2==ne.parents.length&&ne.parents[0]&&ne.parents[1]){const g=bt.records.commits.get(ne.parents[0]);Ar(te,ne,g),ne.parents[1]&&te.push(bt.records.commits.get(ne.parents[1]))}else{if(0==ne.parents.length)return;if(ne.parents[0]){const g=bt.records.commits.get(ne.parents[0]);Ar(te,ne,g)}}ge(te=j(te,g=>g.id))}(0,dt.K2)(Ar,"upsert"),(0,dt.K2)(ge,"prettyPrintCommitHistory");var Br=(0,dt.K2)(function(){dt.Rm.debug(bt.records.commits),ge([_e()[0]])},"prettyPrint"),Ge=(0,dt.K2)(function(){bt.reset(),(0,Rt.IU)()},"clear"),W=(0,dt.K2)(function(){return[...bt.records.branchConfig.values()].map((ne,Le)=>null!=ne.order?ne:{...ne,order:parseFloat(`0.${Le}`)}).sort((ne,Le)=>(ne.order??0)-(Le.order??0)).map(({name:ne})=>({name:ne}))},"getBranchesAsObjArray"),ft=(0,dt.K2)(function(){return bt.records.branches},"getBranches"),Bt=(0,dt.K2)(function(){return bt.records.commits},"getCommits"),_e=(0,dt.K2)(function(){const te=[...bt.records.commits.values()];return te.forEach(function(ne){dt.Rm.debug(ne.id)}),te.sort((ne,Le)=>ne.seq-Le.seq),te},"getCommitsArray"),re={commitType:$t,getConfig:Ye,setDirection:fr,setOptions:Fe,getOptions:vr,commit:zr,branch:br,merge:mr,cherryPick:Er,checkout:Lr,prettyPrint:Br,clear:Ge,getBranchesAsObjArray:W,getBranches:ft,getCommits:Bt,getCommitsArray:_e,getCurrentBranch:(0,dt.K2)(function(){return bt.records.currBranch},"getCurrentBranch"),getDirection:(0,dt.K2)(function(){return bt.records.direction},"getDirection"),getHead:(0,dt.K2)(function(){return bt.records.head},"getHead"),setAccTitle:Rt.SV,getAccTitle:Rt.iN,getAccDescription:Rt.m7,setAccDescription:Rt.EI,setDiagramTitle:Rt.ke,getDiagramTitle:Rt.ab},Pt=(0,dt.K2)((te,ne)=>{(0,ee.S)(te,ne),te.dir&&ne.setDirection(te.dir);for(const Le of te.statements)qt(Le,ne)},"populate"),qt=(0,dt.K2)((te,ne)=>{const tr={Commit:(0,dt.K2)(g=>ne.commit(V(g)),"Commit"),Branch:(0,dt.K2)(g=>ne.branch(pt(g)),"Branch"),Merge:(0,dt.K2)(g=>ne.merge(H(g)),"Merge"),Checkout:(0,dt.K2)(g=>ne.checkout(Nt(g)),"Checkout"),CherryPicking:(0,dt.K2)(g=>ne.cherryPick(wt(g)),"CherryPicking")}[te.$type];tr?tr(te):dt.Rm.error(`Unknown statement type: ${te.$type}`)},"parseStatement"),V=(0,dt.K2)(te=>({id:te.id,msg:te.message??"",type:void 0!==te.type?$t[te.type]:$t.NORMAL,tags:te.tags??void 0}),"parseCommit"),pt=(0,dt.K2)(te=>({name:te.name,order:te.order??0}),"parseBranch"),H=(0,dt.K2)(te=>({branch:te.branch,id:te.id??"",type:void 0!==te.type?$t[te.type]:void 0,tags:te.tags??void 0}),"parseMerge"),Nt=(0,dt.K2)(te=>te.branch,"parseCheckout"),wt=(0,dt.K2)(te=>({id:te.id,targetId:"",tags:0===te.tags?.length?void 0:te.tags,parent:te.parent}),"parseCherryPicking"),Wt={parse:(0,dt.K2)(function(){var te=(0,lt.A)(function*(ne){const Le=yield(0,q.qg)("gitGraph",ne);dt.Rm.debug(Le),Pt(Le,re)});return function(ne){return te.apply(this,arguments)}}(),"parse")},xe=(0,Rt.D7)(),le=xe?.gitGraph,St=new Map,R=new Map,et=new Map,xt=[],it=0,rt="LR",Et=(0,dt.K2)(()=>{St.clear(),R.clear(),et.clear(),it=0,xt=[],rt="LR"},"clear"),ut=(0,dt.K2)(te=>{const ne=document.createElementNS("http://www.w3.org/2000/svg","text");return("string"==typeof te?te.split(/\\n|\n|<br\s*\/?>/gi):te).forEach(tr=>{const g=document.createElementNS("http://www.w3.org/2000/svg","tspan");g.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),g.setAttribute("dy","1em"),g.setAttribute("x","0"),g.setAttribute("class","row"),g.textContent=tr.trim(),ne.appendChild(g)}),ne},"drawText"),It=(0,dt.K2)(te=>{let ne,Le,tr;return"BT"===rt?(Le=(0,dt.K2)((g,y)=>g<=y,"comparisonFunc"),tr=1/0):(Le=(0,dt.K2)((g,y)=>g>=y,"comparisonFunc"),tr=0),te.forEach(g=>{const y="TB"===rt||"BT"==rt?R.get(g)?.y:R.get(g)?.x;void 0!==y&&Le(y,tr)&&(ne=g,tr=y)}),ne},"findClosestParent"),G=(0,dt.K2)(te=>{let ne="",Le=1/0;return te.forEach(tr=>{const g=R.get(tr).y;g<=Le&&(ne=tr,Le=g)}),ne||void 0},"findClosestParentBT"),st=(0,dt.K2)((te,ne,Le)=>{let tr=Le,g=Le;const y=[];te.forEach(E=>{const P=ne.get(E);if(!P)throw new Error(`Commit not found for key ${E}`);P.parents.length?(tr=Ot(P),g=Math.max(tr,g)):y.push(P),Jt(P,tr)}),tr=g,y.forEach(E=>{fe(E,tr,Le)}),te.forEach(E=>{const P=ne.get(E);if(P?.parents.length){const b=G(P.parents);tr=R.get(b).y-40,tr<=g&&(g=tr);const z=St.get(P.branch).pos;R.set(P.id,{x:z,y:tr-10})}})},"setParallelBTPos"),Ce=(0,dt.K2)(te=>{const ne=It(te.parents.filter(tr=>null!==tr));if(!ne)throw new Error(`Closest parent not found for commit ${te.id}`);const Le=R.get(ne)?.y;if(void 0===Le)throw new Error(`Closest parent position not found for commit ${te.id}`);return Le},"findClosestParentPos"),Ot=(0,dt.K2)(te=>Ce(te)+40,"calculateCommitPosition"),Jt=(0,dt.K2)((te,ne)=>{const Le=St.get(te.branch);if(!Le)throw new Error(`Branch not found for commit ${te.id}`);const tr=Le.pos,g=ne+10;return R.set(te.id,{x:tr,y:g}),{x:tr,y:g}},"setCommitPosition"),fe=(0,dt.K2)((te,ne,Le)=>{const tr=St.get(te.branch);if(!tr)throw new Error(`Branch not found for commit ${te.id}`);R.set(te.id,{x:tr.pos,y:ne+Le})},"setRootPosition"),Be=(0,dt.K2)((te,ne,Le,tr,g,y)=>{if(y===$t.HIGHLIGHT)te.append("rect").attr("x",Le.x-10).attr("y",Le.y-10).attr("width",20).attr("height",20).attr("class",`commit ${ne.id} commit-highlight${g%8} ${tr}-outer`),te.append("rect").attr("x",Le.x-6).attr("y",Le.y-6).attr("width",12).attr("height",12).attr("class",`commit ${ne.id} commit${g%8} ${tr}-inner`);else if(y===$t.CHERRY_PICK)te.append("circle").attr("cx",Le.x).attr("cy",Le.y).attr("r",10).attr("class",`commit ${ne.id} ${tr}`),te.append("circle").attr("cx",Le.x-3).attr("cy",Le.y+2).attr("r",2.75).attr("fill","#fff").attr("class",`commit ${ne.id} ${tr}`),te.append("circle").attr("cx",Le.x+3).attr("cy",Le.y+2).attr("r",2.75).attr("fill","#fff").attr("class",`commit ${ne.id} ${tr}`),te.append("line").attr("x1",Le.x+3).attr("y1",Le.y+1).attr("x2",Le.x).attr("y2",Le.y-5).attr("stroke","#fff").attr("class",`commit ${ne.id} ${tr}`),te.append("line").attr("x1",Le.x-3).attr("y1",Le.y+1).attr("x2",Le.x).attr("y2",Le.y-5).attr("stroke","#fff").attr("class",`commit ${ne.id} ${tr}`);else{const E=te.append("circle");if(E.attr("cx",Le.x),E.attr("cy",Le.y),E.attr("r",ne.type===$t.MERGE?9:10),E.attr("class",`commit ${ne.id} commit${g%8}`),y===$t.MERGE){const P=te.append("circle");P.attr("cx",Le.x),P.attr("cy",Le.y),P.attr("r",6),P.attr("class",`commit ${tr} ${ne.id} commit${g%8}`)}y===$t.REVERSE&&te.append("path").attr("d",`M ${Le.x-5},${Le.y-5}L${Le.x+5},${Le.y+5}M${Le.x-5},${Le.y+5}L${Le.x+5},${Le.y-5}`).attr("class",`commit ${tr} ${ne.id} commit${g%8}`)}},"drawCommitBullet"),Ze=(0,dt.K2)((te,ne,Le,tr)=>{if(ne.type!==$t.CHERRY_PICK&&(ne.customId&&ne.type===$t.MERGE||ne.type!==$t.MERGE)&&le?.showCommitLabel){const g=te.append("g"),y=g.insert("rect").attr("class","commit-label-bkg"),E=g.append("text").attr("x",tr).attr("y",Le.y+25).attr("class","commit-label").text(ne.id),P=E.node()?.getBBox();P&&(y.attr("x",Le.posWithOffset-P.width/2-2).attr("y",Le.y+13.5).attr("width",P.width+4).attr("height",P.height+4),"TB"===rt||"BT"===rt?(y.attr("x",Le.x-(P.width+16+5)).attr("y",Le.y-12),E.attr("x",Le.x-(P.width+16)).attr("y",Le.y+P.height-12)):E.attr("x",Le.posWithOffset-P.width/2),le.rotateCommitLabel)&&("TB"===rt||"BT"===rt?(E.attr("transform","rotate(-45, "+Le.x+", "+Le.y+")"),y.attr("transform","rotate(-45, "+Le.x+", "+Le.y+")")):g.attr("transform","translate("+(-7.5-(P.width+10)/25*9.5)+", "+(10+P.width/25*8.5)+") rotate(-45, "+tr+", "+Le.y+")"))}},"drawCommitLabel"),ye=(0,dt.K2)((te,ne,Le,tr)=>{if(ne.tags.length>0){let g=0,y=0,E=0;const P=[];for(const b of ne.tags.reverse()){const z=te.insert("polygon"),p=te.append("circle"),x=te.append("text").attr("y",Le.y-16-g).attr("class","tag-label").text(b),C=x.node()?.getBBox();if(!C)throw new Error("Tag bbox not found");y=Math.max(y,C.width),E=Math.max(E,C.height),x.attr("x",Le.posWithOffset-C.width/2),P.push({tag:x,hole:p,rect:z,yOffset:g}),g+=20}for(const{tag:b,hole:z,rect:p,yOffset:x}of P){const C=E/2,w=Le.y-19.2-x;if(p.attr("class","tag-label-bkg").attr("points",`\n      ${tr-y/2-2},${w+2}  \n      ${tr-y/2-2},${w-2}\n      ${Le.posWithOffset-y/2-4},${w-C-2}\n      ${Le.posWithOffset+y/2+4},${w-C-2}\n      ${Le.posWithOffset+y/2+4},${w+C+2}\n      ${Le.posWithOffset-y/2-4},${w+C+2}`),z.attr("cy",w).attr("cx",tr-y/2+2).attr("r",1.5).attr("class","tag-hole"),"TB"===rt||"BT"===rt){const $=tr+x;p.attr("class","tag-label-bkg").attr("points",`\n        ${Le.x},${$+2}\n        ${Le.x},${$-2}\n        ${Le.x+10},${$-C-2}\n        ${Le.x+10+y+4},${$-C-2}\n        ${Le.x+10+y+4},${$+C+2}\n        ${Le.x+10},${$+C+2}`).attr("transform","translate(12,12) rotate(45, "+Le.x+","+tr+")"),z.attr("cx",Le.x+2).attr("cy",$).attr("transform","translate(12,12) rotate(45, "+Le.x+","+tr+")"),b.attr("x",Le.x+5).attr("y",$+3).attr("transform","translate(14,14) rotate(45, "+Le.x+","+tr+")")}}}},"drawCommitTags"),kr=(0,dt.K2)(te=>{switch(te.customType??te.type){case $t.NORMAL:return"commit-normal";case $t.REVERSE:return"commit-reverse";case $t.HIGHLIGHT:return"commit-highlight";case $t.MERGE:return"commit-merge";case $t.CHERRY_PICK:return"commit-cherry-pick";default:return"commit-normal"}},"getCommitClassType"),ur=(0,dt.K2)((te,ne,Le,tr)=>{const g={x:0,y:0};if(!(te.parents.length>0))return"TB"===ne?30:"BT"===ne?(tr.get(te.id)??g).y-40:0;{const y=It(te.parents);if(y){const E=tr.get(y)??g;return"TB"===ne?E.y+40:"BT"===ne?(tr.get(te.id)??g).y-40:E.x+40}}return 0},"calculatePosition"),Kt=(0,dt.K2)((te,ne,Le)=>{const tr="BT"===rt&&Le?ne:ne+10,g="TB"===rt||"BT"===rt?tr:St.get(te.branch)?.pos,y="TB"===rt||"BT"===rt?St.get(te.branch)?.pos:tr;if(void 0===y||void 0===g)throw new Error(`Position were undefined for commit ${te.id}`);return{x:y,y:g,posWithOffset:tr}},"getCommitPosition"),Pe=(0,dt.K2)((te,ne,Le)=>{if(!le)throw new Error("GitGraph config not found");const tr=te.append("g").attr("class","commit-bullets"),g=te.append("g").attr("class","commit-labels");let y="TB"===rt||"BT"===rt?30:0;const E=[...ne.keys()],P=le?.parallelCommits??!1;let z=E.sort((0,dt.K2)((p,x)=>{const C=ne.get(p)?.seq,w=ne.get(x)?.seq;return void 0!==C&&void 0!==w?C-w:0},"sortKeys"));"BT"===rt&&(P&&st(z,ne,y),z=z.reverse()),z.forEach(p=>{const x=ne.get(p);if(!x)throw new Error(`Commit not found for key ${p}`);P&&(y=ur(x,rt,y,R));const C=Kt(x,y,P);if(Le){const w=kr(x),$=x.customType??x.type,ct=St.get(x.branch)?.index??0;Be(tr,x,C,w,ct,$),Ze(g,x,C,y),ye(g,x,C,y)}R.set(x.id,"TB"===rt||"BT"===rt?{x:C.x,y:C.posWithOffset}:{x:C.posWithOffset,y:C.y}),y="BT"===rt&&P?y+40:y+40+10,y>it&&(it=y)})},"drawCommits"),ir=(0,dt.K2)((te,ne,Le,tr,g)=>{const E=("TB"===rt||"BT"===rt?Le.x<tr.x:Le.y<tr.y)?ne.branch:te.branch,P=(0,dt.K2)(z=>z.branch===E,"isOnBranchToGetCurve"),b=(0,dt.K2)(z=>z.seq>te.seq&&z.seq<ne.seq,"isBetweenCommits");return[...g.values()].some(z=>b(z)&&P(z))},"shouldRerouteArrow"),me=(0,dt.K2)((te,ne,Le=0)=>{const tr=te+Math.abs(te-ne)/2;if(Le>5)return tr;if(xt.every(E=>Math.abs(E-tr)>=10))return xt.push(tr),tr;const y=Math.abs(te-ne);return me(te,ne-y/5,Le+1)},"findLane"),ce=(0,dt.K2)((te,ne,Le,tr)=>{const g=R.get(ne.id),y=R.get(Le.id);if(void 0===g||void 0===y)throw new Error(`Commit positions not found for commits ${ne.id} and ${Le.id}`);const E=ir(ne,Le,g,y,tr);let C,P="",b="",z=0,p=0,x=St.get(Le.branch)?.index;if(Le.type===$t.MERGE&&ne.id!==Le.parents[0]&&(x=St.get(ne.branch)?.index),E){P="A 10 10, 0, 0, 0,",b="A 10 10, 0, 0, 1,",z=10,p=10;const w=g.y<y.y?me(g.y,y.y):me(y.y,g.y),$=g.x<y.x?me(g.x,y.x):me(y.x,g.x);"TB"===rt?g.x<y.x?C=`M ${g.x} ${g.y} L ${$-z} ${g.y} ${b} ${$} ${g.y+p} L ${$} ${y.y-z} ${P} ${$+p} ${y.y} L ${y.x} ${y.y}`:(x=St.get(ne.branch)?.index,C=`M ${g.x} ${g.y} L ${$+z} ${g.y} ${P} ${$} ${g.y+p} L ${$} ${y.y-z} ${b} ${$-p} ${y.y} L ${y.x} ${y.y}`):"BT"===rt?g.x<y.x?C=`M ${g.x} ${g.y} L ${$-z} ${g.y} ${P} ${$} ${g.y-p} L ${$} ${y.y+z} ${b} ${$+p} ${y.y} L ${y.x} ${y.y}`:(x=St.get(ne.branch)?.index,C=`M ${g.x} ${g.y} L ${$+z} ${g.y} ${b} ${$} ${g.y-p} L ${$} ${y.y+z} ${P} ${$-p} ${y.y} L ${y.x} ${y.y}`):g.y<y.y?C=`M ${g.x} ${g.y} L ${g.x} ${w-z} ${P} ${g.x+p} ${w} L ${y.x-z} ${w} ${b} ${y.x} ${w+p} L ${y.x} ${y.y}`:(x=St.get(ne.branch)?.index,C=`M ${g.x} ${g.y} L ${g.x} ${w+z} ${b} ${g.x+p} ${w} L ${y.x-z} ${w} ${P} ${y.x} ${w-p} L ${y.x} ${y.y}`)}else P="A 20 20, 0, 0, 0,",b="A 20 20, 0, 0, 1,",z=20,p=20,"TB"===rt?(g.x<y.x&&(C=Le.type===$t.MERGE&&ne.id!==Le.parents[0]?`M ${g.x} ${g.y} L ${g.x} ${y.y-z} ${P} ${g.x+p} ${y.y} L ${y.x} ${y.y}`:`M ${g.x} ${g.y} L ${y.x-z} ${g.y} ${b} ${y.x} ${g.y+p} L ${y.x} ${y.y}`),g.x>y.x&&(P="A 20 20, 0, 0, 0,",b="A 20 20, 0, 0, 1,",z=20,p=20,C=Le.type===$t.MERGE&&ne.id!==Le.parents[0]?`M ${g.x} ${g.y} L ${g.x} ${y.y-z} ${b} ${g.x-p} ${y.y} L ${y.x} ${y.y}`:`M ${g.x} ${g.y} L ${y.x+z} ${g.y} ${P} ${y.x} ${g.y+p} L ${y.x} ${y.y}`),g.x===y.x&&(C=`M ${g.x} ${g.y} L ${y.x} ${y.y}`)):"BT"===rt?(g.x<y.x&&(C=Le.type===$t.MERGE&&ne.id!==Le.parents[0]?`M ${g.x} ${g.y} L ${g.x} ${y.y+z} ${b} ${g.x+p} ${y.y} L ${y.x} ${y.y}`:`M ${g.x} ${g.y} L ${y.x-z} ${g.y} ${P} ${y.x} ${g.y-p} L ${y.x} ${y.y}`),g.x>y.x&&(P="A 20 20, 0, 0, 0,",b="A 20 20, 0, 0, 1,",z=20,p=20,C=Le.type===$t.MERGE&&ne.id!==Le.parents[0]?`M ${g.x} ${g.y} L ${g.x} ${y.y+z} ${P} ${g.x-p} ${y.y} L ${y.x} ${y.y}`:`M ${g.x} ${g.y} L ${y.x-z} ${g.y} ${P} ${y.x} ${g.y-p} L ${y.x} ${y.y}`),g.x===y.x&&(C=`M ${g.x} ${g.y} L ${y.x} ${y.y}`)):(g.y<y.y&&(C=Le.type===$t.MERGE&&ne.id!==Le.parents[0]?`M ${g.x} ${g.y} L ${y.x-z} ${g.y} ${b} ${y.x} ${g.y+p} L ${y.x} ${y.y}`:`M ${g.x} ${g.y} L ${g.x} ${y.y-z} ${P} ${g.x+p} ${y.y} L ${y.x} ${y.y}`),g.y>y.y&&(C=Le.type===$t.MERGE&&ne.id!==Le.parents[0]?`M ${g.x} ${g.y} L ${y.x-z} ${g.y} ${P} ${y.x} ${g.y-p} L ${y.x} ${y.y}`:`M ${g.x} ${g.y} L ${g.x} ${y.y+z} ${b} ${g.x+p} ${y.y} L ${y.x} ${y.y}`),g.y===y.y&&(C=`M ${g.x} ${g.y} L ${y.x} ${y.y}`));if(void 0===C)throw new Error("Line definition not found");te.append("path").attr("d",C).attr("class","arrow arrow"+x%8)},"drawArrow"),ke=(0,dt.K2)((te,ne)=>{const Le=te.append("g").attr("class","commit-arrows");[...ne.keys()].forEach(tr=>{const g=ne.get(tr);g.parents&&g.parents.length>0&&g.parents.forEach(y=>{ce(Le,ne.get(y),g,ne)})})},"drawArrows"),Te=(0,dt.K2)((te,ne)=>{const Le=te.append("g");ne.forEach((tr,g)=>{const y=g%8,E=St.get(tr.name)?.pos;if(void 0===E)throw new Error(`Position not found for branch ${tr.name}`);const P=Le.append("line");P.attr("x1",0),P.attr("y1",E),P.attr("x2",it),P.attr("y2",E),P.attr("class","branch branch"+y),"TB"===rt?(P.attr("y1",30),P.attr("x1",E),P.attr("y2",it),P.attr("x2",E)):"BT"===rt&&(P.attr("y1",it),P.attr("x1",E),P.attr("y2",30),P.attr("x2",E)),xt.push(E);const z=ut(tr.name),p=Le.insert("rect"),C=Le.insert("g").attr("class","branchLabel").insert("g").attr("class","label branch-label"+y);C.node().appendChild(z);const w=z.getBBox();p.attr("class","branchLabelBkg label"+y).attr("rx",4).attr("ry",4).attr("x",-w.width-4-(!0===le?.rotateCommitLabel?30:0)).attr("y",-w.height/2+8).attr("width",w.width+18).attr("height",w.height+4),C.attr("transform","translate("+(-w.width-14-(!0===le?.rotateCommitLabel?30:0))+", "+(E-w.height/2-1)+")"),"TB"===rt?(p.attr("x",E-w.width/2-10).attr("y",0),C.attr("transform","translate("+(E-w.width/2-5)+", 0)")):"BT"===rt?(p.attr("x",E-w.width/2-10).attr("y",it),C.attr("transform","translate("+(E-w.width/2-5)+", "+it+")")):p.attr("transform","translate(-19, "+(E-w.height/2)+")")})},"drawBranches"),er=(0,dt.K2)(function(te,ne,Le,tr,g){return St.set(te,{pos:ne,index:Le}),ne+(50+(g?40:0)+("TB"===rt||"BT"===rt?tr.width/2:0))},"setBranchPosition"),nr={parser:Wt,db:re,renderer:{draw:(0,dt.K2)(function(te,ne,Le,tr){if(Et(),dt.Rm.debug("in gitgraph renderer",te+"\n","id:",ne,Le),!le)throw new Error("GitGraph config not found");const g=le.rotateCommitLabel??!1,y=tr.db;et=y.getCommits();const E=y.getBranchesAsObjArray();rt=y.getDirection();const P=(0,A.Ltv)(`[id="${ne}"]`);let b=0;E.forEach((z,p)=>{const x=ut(z.name),C=P.append("g"),w=C.insert("g").attr("class","branchLabel"),$=w.insert("g").attr("class","label branch-label");$.node()?.appendChild(x);const ct=x.getBBox();b=er(z.name,b,p,ct,g),$.remove(),w.remove(),C.remove()}),Pe(P,et,!1),le.showBranches&&Te(P,E),ke(P,et),Pe(P,et,!0),D._K.insertTitle(P,"gitTitleText",le.titleTopMargin??0,y.getDiagramTitle()),(0,Rt.mj)(void 0,P,le.diagramPadding,le.useMaxWidth)},"draw")},styles:(0,dt.K2)(te=>`\n  .commit-id,\n  .commit-msg,\n  .branch-label {\n    fill: lightgrey;\n    color: lightgrey;\n    font-family: 'trebuchet ms', verdana, arial, sans-serif;\n    font-family: var(--mermaid-font-family);\n  }\n  ${[0,1,2,3,4,5,6,7].map(ne=>`\n        .branch-label${ne} { fill: ${te["gitBranchLabel"+ne]}; }\n        .commit${ne} { stroke: ${te["git"+ne]}; fill: ${te["git"+ne]}; }\n        .commit-highlight${ne} { stroke: ${te["gitInv"+ne]}; fill: ${te["gitInv"+ne]}; }\n        .label${ne}  { fill: ${te["git"+ne]}; }\n        .arrow${ne} { stroke: ${te["git"+ne]}; }\n        `).join("\n")}\n\n  .branch {\n    stroke-width: 1;\n    stroke: ${te.lineColor};\n    stroke-dasharray: 2;\n  }\n  .commit-label { font-size: ${te.commitLabelFontSize}; fill: ${te.commitLabelColor};}\n  .commit-label-bkg { font-size: ${te.commitLabelFontSize}; fill: ${te.commitLabelBackground}; opacity: 0.5; }\n  .tag-label { font-size: ${te.tagLabelFontSize}; fill: ${te.tagLabelColor};}\n  .tag-label-bkg { fill: ${te.tagLabelBackground}; stroke: ${te.tagLabelBorder}; }\n  .tag-hole { fill: ${te.textColor}; }\n\n  .commit-merge {\n    stroke: ${te.primaryColor};\n    fill: ${te.primaryColor};\n  }\n  .commit-reverse {\n    stroke: ${te.primaryColor};\n    fill: ${te.primaryColor};\n    stroke-width: 3;\n  }\n  .commit-highlight-outer {\n  }\n  .commit-highlight-inner {\n    stroke: ${te.primaryColor};\n    fill: ${te.primaryColor};\n  }\n\n  .arrow { stroke-width: 8; stroke-linecap: round; fill: none}\n  .gitTitleText {\n    text-anchor: middle;\n    font-size: 18px;\n    fill: ${te.textColor};\n  }\n`,"getStyles")}},19753:(ti,_r,B)=>{"use strict";B.d(_r,{Fr:()=>A,GX:()=>q,KX:()=>dt,WW:()=>D,ue:()=>L});var lt=B(79006),ee=B(32303),L=(0,ee.K2)(yt=>{const{handDrawnSeed:Ye}=(0,lt.D7)();return{fill:yt,hachureAngle:120,hachureGap:4,fillWeight:2,roughness:.7,stroke:yt,seed:Ye}},"solidStateFill"),D=(0,ee.K2)(yt=>{const Ye=Rt([...yt.cssCompiledStyles||[],...yt.cssStyles||[],...yt.labelStyle||[]]);return{stylesMap:Ye,stylesArray:[...Ye]}},"compileStyles"),Rt=(0,ee.K2)(yt=>{const Ye=new Map;return yt.forEach(bt=>{const[Xt,j]=bt.split(":");Ye.set(Xt.trim(),j?.trim())}),Ye},"styles2Map"),dt=(0,ee.K2)(yt=>"color"===yt||"font-size"===yt||"font-family"===yt||"font-weight"===yt||"font-style"===yt||"text-decoration"===yt||"text-align"===yt||"text-transform"===yt||"line-height"===yt||"letter-spacing"===yt||"word-spacing"===yt||"text-shadow"===yt||"text-overflow"===yt||"white-space"===yt||"word-wrap"===yt||"word-break"===yt||"overflow-wrap"===yt||"hyphens"===yt,"isLabelStyle"),q=(0,ee.K2)(yt=>{const{stylesArray:Ye}=D(yt),bt=[],Xt=[],j=[],fr=[];return Ye.forEach(Fe=>{const vr=Fe[0];dt(vr)?bt.push(Fe.join(":")+" !important"):(Xt.push(Fe.join(":")+" !important"),vr.includes("stroke")&&j.push(Fe.join(":")+" !important"),"fill"===vr&&fr.push(Fe.join(":")+" !important"))}),{labelStyles:bt.join(";"),nodeStyles:Xt.join(";"),stylesArray:Ye,borderStyles:j,backgroundStyles:fr}},"styles2String"),A=(0,ee.K2)((yt,Ye)=>{const{themeVariables:bt,handDrawnSeed:Xt}=(0,lt.D7)(),{nodeBorder:j,mainBkg:fr}=bt,{stylesMap:Fe}=D(yt);return Object.assign({roughness:.7,fill:Fe.get("fill")||fr,fillStyle:"hachure",fillWeight:4,hachureGap:5.2,stroke:Fe.get("stroke")||j,seed:Xt,strokeWidth:Fe.get("stroke-width")?.replace("px","")||1.3,fillLineDash:[0,0],strokeLineDash:$t(Fe.get("stroke-dasharray"))},Ye)},"userNodeOverrides"),$t=(0,ee.K2)(yt=>{if(!yt)return[0,0];const Ye=yt.trim().split(/\s+/).map(Number);if(1===Ye.length){const j=isNaN(Ye[0])?0:Ye[0];return[j,j]}return[isNaN(Ye[0])?0:Ye[0],isNaN(Ye[1])?0:Ye[1]]},"getStrokeDashArray")},24715:(ti,_r,B)=>{"use strict";B.d(_r,{H:()=>J,r:()=>At});var lt=B(32303);function ee(l){return typeof l>"u"||null===l}function L(l){return"object"==typeof l&&null!==l}function D(l){return Array.isArray(l)?l:ee(l)?[]:[l]}function Rt(l,T){var F,ot,_t,Ie;if(T)for(F=0,ot=(Ie=Object.keys(T)).length;F<ot;F+=1)l[_t=Ie[F]]=T[_t];return l}function dt(l,T){var ot,F="";for(ot=0;ot<T;ot+=1)F+=l;return F}function q(l){return 0===l&&Number.NEGATIVE_INFINITY===1/l}(0,lt.K2)(ee,"isNothing"),(0,lt.K2)(L,"isObject"),(0,lt.K2)(D,"toArray"),(0,lt.K2)(Rt,"extend"),(0,lt.K2)(dt,"repeat"),(0,lt.K2)(q,"isNegativeZero");var j={isNothing:ee,isObject:L,toArray:D,repeat:dt,isNegativeZero:q,extend:Rt};function fr(l,T){var F="",ot=l.reason||"(unknown reason)";return l.mark?(l.mark.name&&(F+='in "'+l.mark.name+'" '),F+="("+(l.mark.line+1)+":"+(l.mark.column+1)+")",!T&&l.mark.snippet&&(F+="\n\n"+l.mark.snippet),ot+" "+F):ot}function Fe(l,T){Error.call(this),this.name="YAMLException",this.reason=l,this.mark=T,this.message=fr(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack||""}(0,lt.K2)(fr,"formatError"),(0,lt.K2)(Fe,"YAMLException$1"),(Fe.prototype=Object.create(Error.prototype)).constructor=Fe,Fe.prototype.toString=(0,lt.K2)(function(T){return this.name+": "+fr(this,T)},"toString");var vr=Fe;function zr(l,T,F,ot,_t){var Ie="",Qt="",Ue=Math.floor(_t/2)-1;return ot-T>Ue&&(T=ot-Ue+(Ie=" ... ").length),F-ot>Ue&&(F=ot+Ue-(Qt=" ...").length),{str:Ie+l.slice(T,F).replace(/\t/g,"\u2192")+Qt,pos:ot-T+Ie.length}}function br(l,T){return j.repeat(" ",T-l.length)+l}function mr(l,T){if(T=Object.create(T||null),!l.buffer)return null;T.maxLength||(T.maxLength=79),"number"!=typeof T.indent&&(T.indent=1),"number"!=typeof T.linesBefore&&(T.linesBefore=3),"number"!=typeof T.linesAfter&&(T.linesAfter=2);for(var Ie,F=/\r?\n|\r|\0/g,ot=[0],_t=[],Qt=-1;Ie=F.exec(l.buffer);)_t.push(Ie.index),ot.push(Ie.index+Ie[0].length),l.position<=Ie.index&&Qt<0&&(Qt=ot.length-2);Qt<0&&(Qt=ot.length-1);var yr,Dr,Ue="",aa=Math.min(l.line+T.linesAfter,_t.length).toString().length,Nr=T.maxLength-(T.indent+aa+3);for(yr=1;yr<=T.linesBefore&&!(Qt-yr<0);yr++)Dr=zr(l.buffer,ot[Qt-yr],_t[Qt-yr],l.position-(ot[Qt]-ot[Qt-yr]),Nr),Ue=j.repeat(" ",T.indent)+br((l.line-yr+1).toString(),aa)+" | "+Dr.str+"\n"+Ue;for(Dr=zr(l.buffer,ot[Qt],_t[Qt],l.position,Nr),Ue+=j.repeat(" ",T.indent)+br((l.line+1).toString(),aa)+" | "+Dr.str+"\n",Ue+=j.repeat("-",T.indent+aa+3+Dr.pos)+"^\n",yr=1;yr<=T.linesAfter&&!(Qt+yr>=_t.length);yr++)Dr=zr(l.buffer,ot[Qt+yr],_t[Qt+yr],l.position-(ot[Qt]-ot[Qt+yr]),Nr),Ue+=j.repeat(" ",T.indent)+br((l.line+yr+1).toString(),aa)+" | "+Dr.str+"\n";return Ue.replace(/\n$/,"")}(0,lt.K2)(zr,"getLine"),(0,lt.K2)(br,"padStart"),(0,lt.K2)(mr,"makeSnippet");var Er=mr,Lr=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],Ar=["scalar","sequence","mapping"];function ge(l){var T={};return null!==l&&Object.keys(l).forEach(function(F){l[F].forEach(function(ot){T[String(ot)]=F})}),T}function Br(l,T){if(T=T||{},Object.keys(T).forEach(function(F){if(-1===Lr.indexOf(F))throw new vr('Unknown option "'+F+'" is met in definition of "'+l+'" YAML type.')}),this.options=T,this.tag=l,this.kind=T.kind||null,this.resolve=T.resolve||function(){return!0},this.construct=T.construct||function(F){return F},this.instanceOf=T.instanceOf||null,this.predicate=T.predicate||null,this.represent=T.represent||null,this.representName=T.representName||null,this.defaultStyle=T.defaultStyle||null,this.multi=T.multi||!1,this.styleAliases=ge(T.styleAliases||null),-1===Ar.indexOf(this.kind))throw new vr('Unknown kind "'+this.kind+'" is specified for "'+l+'" YAML type.')}(0,lt.K2)(ge,"compileStyleAliases"),(0,lt.K2)(Br,"Type$1");var Ge=Br;function W(l,T){var F=[];return l[T].forEach(function(ot){var _t=F.length;F.forEach(function(Ie,Qt){Ie.tag===ot.tag&&Ie.kind===ot.kind&&Ie.multi===ot.multi&&(_t=Qt)}),F[_t]=ot}),F}function ft(){var T,F,l={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}};function ot(_t){_t.multi?(l.multi[_t.kind].push(_t),l.multi.fallback.push(_t)):l[_t.kind][_t.tag]=l.fallback[_t.tag]=_t}for((0,lt.K2)(ot,"collectType"),T=0,F=arguments.length;T<F;T+=1)arguments[T].forEach(ot);return l}function Bt(l){return this.extend(l)}(0,lt.K2)(W,"compileList"),(0,lt.K2)(ft,"compileMap"),(0,lt.K2)(Bt,"Schema$1"),Bt.prototype.extend=(0,lt.K2)(function(T){var F=[],ot=[];if(T instanceof Ge)ot.push(T);else if(Array.isArray(T))ot=ot.concat(T);else{if(!T||!Array.isArray(T.implicit)&&!Array.isArray(T.explicit))throw new vr("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");T.implicit&&(F=F.concat(T.implicit)),T.explicit&&(ot=ot.concat(T.explicit))}F.forEach(function(Ie){if(!(Ie instanceof Ge))throw new vr("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(Ie.loadKind&&"scalar"!==Ie.loadKind)throw new vr("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(Ie.multi)throw new vr("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),ot.forEach(function(Ie){if(!(Ie instanceof Ge))throw new vr("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var _t=Object.create(Bt.prototype);return _t.implicit=(this.implicit||[]).concat(F),_t.explicit=(this.explicit||[]).concat(ot),_t.compiledImplicit=W(_t,"implicit"),_t.compiledExplicit=W(_t,"explicit"),_t.compiledTypeMap=ft(_t.compiledImplicit,_t.compiledExplicit),_t},"extend");var re=new Bt({explicit:[new Ge("tag:yaml.org,2002:str",{kind:"scalar",construct:(0,lt.K2)(function(l){return null!==l?l:""},"construct")}),new Ge("tag:yaml.org,2002:seq",{kind:"sequence",construct:(0,lt.K2)(function(l){return null!==l?l:[]},"construct")}),new Ge("tag:yaml.org,2002:map",{kind:"mapping",construct:(0,lt.K2)(function(l){return null!==l?l:{}},"construct")})]});function Pt(l){if(null===l)return!0;var T=l.length;return 1===T&&"~"===l||4===T&&("null"===l||"Null"===l||"NULL"===l)}function qt(){return null}function V(l){return null===l}(0,lt.K2)(Pt,"resolveYamlNull"),(0,lt.K2)(qt,"constructYamlNull"),(0,lt.K2)(V,"isNull");var pt=new Ge("tag:yaml.org,2002:null",{kind:"scalar",resolve:Pt,construct:qt,predicate:V,represent:{canonical:(0,lt.K2)(function(){return"~"},"canonical"),lowercase:(0,lt.K2)(function(){return"null"},"lowercase"),uppercase:(0,lt.K2)(function(){return"NULL"},"uppercase"),camelcase:(0,lt.K2)(function(){return"Null"},"camelcase"),empty:(0,lt.K2)(function(){return""},"empty")},defaultStyle:"lowercase"});function H(l){if(null===l)return!1;var T=l.length;return 4===T&&("true"===l||"True"===l||"TRUE"===l)||5===T&&("false"===l||"False"===l||"FALSE"===l)}function Nt(l){return"true"===l||"True"===l||"TRUE"===l}function wt(l){return"[object Boolean]"===Object.prototype.toString.call(l)}(0,lt.K2)(H,"resolveYamlBoolean"),(0,lt.K2)(Nt,"constructYamlBoolean"),(0,lt.K2)(wt,"isBoolean");var Wt=new Ge("tag:yaml.org,2002:bool",{kind:"scalar",resolve:H,construct:Nt,predicate:wt,represent:{lowercase:(0,lt.K2)(function(l){return l?"true":"false"},"lowercase"),uppercase:(0,lt.K2)(function(l){return l?"TRUE":"FALSE"},"uppercase"),camelcase:(0,lt.K2)(function(l){return l?"True":"False"},"camelcase")},defaultStyle:"lowercase"});function xe(l){return 48<=l&&l<=57||65<=l&&l<=70||97<=l&&l<=102}function le(l){return 48<=l&&l<=55}function Re(l){return 48<=l&&l<=57}function oe(l){if(null===l)return!1;var _t,T=l.length,F=0,ot=!1;if(!T)return!1;if(("-"===(_t=l[F])||"+"===_t)&&(_t=l[++F]),"0"===_t){if(F+1===T)return!0;if("b"===(_t=l[++F])){for(F++;F<T;F++)if("_"!==(_t=l[F])){if("0"!==_t&&"1"!==_t)return!1;ot=!0}return ot&&"_"!==_t}if("x"===_t){for(F++;F<T;F++)if("_"!==(_t=l[F])){if(!xe(l.charCodeAt(F)))return!1;ot=!0}return ot&&"_"!==_t}if("o"===_t){for(F++;F<T;F++)if("_"!==(_t=l[F])){if(!le(l.charCodeAt(F)))return!1;ot=!0}return ot&&"_"!==_t}}if("_"===_t)return!1;for(;F<T;F++)if("_"!==(_t=l[F])){if(!Re(l.charCodeAt(F)))return!1;ot=!0}return!(!ot||"_"===_t)}function qe(l){var ot,T=l,F=1;if(-1!==T.indexOf("_")&&(T=T.replace(/_/g,"")),("-"===(ot=T[0])||"+"===ot)&&("-"===ot&&(F=-1),ot=(T=T.slice(1))[0]),"0"===T)return 0;if("0"===ot){if("b"===T[1])return F*parseInt(T.slice(2),2);if("x"===T[1])return F*parseInt(T.slice(2),16);if("o"===T[1])return F*parseInt(T.slice(2),8)}return F*parseInt(T,10)}function We(l){return"[object Number]"===Object.prototype.toString.call(l)&&l%1==0&&!j.isNegativeZero(l)}(0,lt.K2)(xe,"isHexCode"),(0,lt.K2)(le,"isOctCode"),(0,lt.K2)(Re,"isDecCode"),(0,lt.K2)(oe,"resolveYamlInteger"),(0,lt.K2)(qe,"constructYamlInteger"),(0,lt.K2)(We,"isInteger");var Ct=new Ge("tag:yaml.org,2002:int",{kind:"scalar",resolve:oe,construct:qe,predicate:We,represent:{binary:(0,lt.K2)(function(l){return l>=0?"0b"+l.toString(2):"-0b"+l.toString(2).slice(1)},"binary"),octal:(0,lt.K2)(function(l){return l>=0?"0o"+l.toString(8):"-0o"+l.toString(8).slice(1)},"octal"),decimal:(0,lt.K2)(function(l){return l.toString(10)},"decimal"),hexadecimal:(0,lt.K2)(function(l){return l>=0?"0x"+l.toString(16).toUpperCase():"-0x"+l.toString(16).toUpperCase().slice(1)},"hexadecimal")},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),St=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function R(l){return!(null===l||!St.test(l)||"_"===l[l.length-1])}function O(l){var T,F;return F="-"===(T=l.replace(/_/g,"").toLowerCase())[0]?-1:1,"+-".indexOf(T[0])>=0&&(T=T.slice(1)),".inf"===T?1===F?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:".nan"===T?NaN:F*parseFloat(T,10)}(0,lt.K2)(R,"resolveYamlFloat"),(0,lt.K2)(O,"constructYamlFloat");var et=/^[-+]?[0-9]+e/;function xt(l,T){var F;if(isNaN(l))switch(T){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===l)switch(T){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===l)switch(T){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(j.isNegativeZero(l))return"-0.0";return F=l.toString(10),et.test(F)?F.replace("e",".e"):F}function it(l){return"[object Number]"===Object.prototype.toString.call(l)&&(l%1!=0||j.isNegativeZero(l))}(0,lt.K2)(xt,"representYamlFloat"),(0,lt.K2)(it,"isFloat");var rt=new Ge("tag:yaml.org,2002:float",{kind:"scalar",resolve:R,construct:O,predicate:it,represent:xt,defaultStyle:"lowercase"}),Et=re.extend({implicit:[pt,Wt,Ct,rt]}),ut=Et,It=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),G=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function st(l){return null!==l&&(null!==It.exec(l)||null!==G.exec(l))}function Ce(l){var T,F,ot,_t,Ie,Qt,Ue,oa,yr=0,Dr=null;if(null===(T=It.exec(l))&&(T=G.exec(l)),null===T)throw new Error("Date resolve error");if(F=+T[1],ot=+T[2]-1,_t=+T[3],!T[4])return new Date(Date.UTC(F,ot,_t));if(Ie=+T[4],Qt=+T[5],Ue=+T[6],T[7]){for(yr=T[7].slice(0,3);yr.length<3;)yr+="0";yr=+yr}return T[9]&&(Dr=6e4*(60*+T[10]+ +(T[11]||0)),"-"===T[9]&&(Dr=-Dr)),oa=new Date(Date.UTC(F,ot,_t,Ie,Qt,Ue,yr)),Dr&&oa.setTime(oa.getTime()-Dr),oa}function Ot(l){return l.toISOString()}(0,lt.K2)(st,"resolveYamlTimestamp"),(0,lt.K2)(Ce,"constructYamlTimestamp"),(0,lt.K2)(Ot,"representYamlTimestamp");var Jt=new Ge("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:st,construct:Ce,instanceOf:Date,represent:Ot});function fe(l){return"<<"===l||null===l}(0,lt.K2)(fe,"resolveYamlMerge");var Be=new Ge("tag:yaml.org,2002:merge",{kind:"scalar",resolve:fe}),Ze="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\n\r";function ye(l){if(null===l)return!1;var T,F,ot=0,_t=l.length,Ie=Ze;for(F=0;F<_t;F++)if(!((T=Ie.indexOf(l.charAt(F)))>64)){if(T<0)return!1;ot+=6}return ot%8==0}function kr(l){var T,F,ot=l.replace(/[\r\n=]/g,""),_t=ot.length,Ie=Ze,Qt=0,Ue=[];for(T=0;T<_t;T++)T%4==0&&T&&(Ue.push(Qt>>16&255),Ue.push(Qt>>8&255),Ue.push(255&Qt)),Qt=Qt<<6|Ie.indexOf(ot.charAt(T));return 0==(F=_t%4*6)?(Ue.push(Qt>>16&255),Ue.push(Qt>>8&255),Ue.push(255&Qt)):18===F?(Ue.push(Qt>>10&255),Ue.push(Qt>>2&255)):12===F&&Ue.push(Qt>>4&255),new Uint8Array(Ue)}function ur(l){var ot,_t,T="",F=0,Ie=l.length,Qt=Ze;for(ot=0;ot<Ie;ot++)ot%3==0&&ot&&(T+=Qt[F>>18&63],T+=Qt[F>>12&63],T+=Qt[F>>6&63],T+=Qt[63&F]),F=(F<<8)+l[ot];return 0==(_t=Ie%3)?(T+=Qt[F>>18&63],T+=Qt[F>>12&63],T+=Qt[F>>6&63],T+=Qt[63&F]):2===_t?(T+=Qt[F>>10&63],T+=Qt[F>>4&63],T+=Qt[F<<2&63],T+=Qt[64]):1===_t&&(T+=Qt[F>>2&63],T+=Qt[F<<4&63],T+=Qt[64],T+=Qt[64]),T}function Kt(l){return"[object Uint8Array]"===Object.prototype.toString.call(l)}(0,lt.K2)(ye,"resolveYamlBinary"),(0,lt.K2)(kr,"constructYamlBinary"),(0,lt.K2)(ur,"representYamlBinary"),(0,lt.K2)(Kt,"isBinary");var Pe=new Ge("tag:yaml.org,2002:binary",{kind:"scalar",resolve:ye,construct:kr,predicate:Kt,represent:ur}),ir=Object.prototype.hasOwnProperty,me=Object.prototype.toString;function ce(l){if(null===l)return!0;var F,ot,_t,Ie,Qt,T=[],Ue=l;for(F=0,ot=Ue.length;F<ot;F+=1){if(Qt=!1,"[object Object]"!==me.call(_t=Ue[F]))return!1;for(Ie in _t)if(ir.call(_t,Ie)){if(Qt)return!1;Qt=!0}if(!Qt)return!1;if(-1!==T.indexOf(Ie))return!1;T.push(Ie)}return!0}function ke(l){return null!==l?l:[]}(0,lt.K2)(ce,"resolveYamlOmap"),(0,lt.K2)(ke,"constructYamlOmap");var Te=new Ge("tag:yaml.org,2002:omap",{kind:"sequence",resolve:ce,construct:ke}),er=Object.prototype.toString;function Xe(l){if(null===l)return!0;var T,F,ot,_t,Ie,Qt=l;for(Ie=new Array(Qt.length),T=0,F=Qt.length;T<F;T+=1){if("[object Object]"!==er.call(ot=Qt[T])||1!==(_t=Object.keys(ot)).length)return!1;Ie[T]=[_t[0],ot[_t[0]]]}return!0}function Ir(l){if(null===l)return[];var T,F,ot,_t,Ie,Qt=l;for(Ie=new Array(Qt.length),T=0,F=Qt.length;T<F;T+=1)ot=Qt[T],_t=Object.keys(ot),Ie[T]=[_t[0],ot[_t[0]]];return Ie}(0,lt.K2)(Xe,"resolveYamlPairs"),(0,lt.K2)(Ir,"constructYamlPairs");var Ee=new Ge("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:Xe,construct:Ir}),qr=Object.prototype.hasOwnProperty;function nr(l){if(null===l)return!0;var T,F=l;for(T in F)if(qr.call(F,T)&&null!==F[T])return!1;return!0}function te(l){return null!==l?l:{}}(0,lt.K2)(nr,"resolveYamlSet"),(0,lt.K2)(te,"constructYamlSet");var ne=new Ge("tag:yaml.org,2002:set",{kind:"mapping",resolve:nr,construct:te}),Le=ut.extend({implicit:[Jt,Be],explicit:[Pe,Te,Ee,ne]}),tr=Object.prototype.hasOwnProperty,x=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,C=/[\x85\u2028\u2029]/,w=/[,\[\]\{\}]/,$=/^(?:!|!!|![a-z\-]+!)$/i,ct=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function kt(l){return Object.prototype.toString.call(l)}function Ut(l){return 10===l||13===l}function Ht(l){return 9===l||32===l}function zt(l){return 9===l||32===l||10===l||13===l}function ue(l){return 44===l||91===l||93===l||123===l||125===l}function je(l){var T;return 48<=l&&l<=57?l-48:97<=(T=32|l)&&T<=102?T-97+10:-1}function ze(l){return 120===l?2:117===l?4:85===l?8:0}function Cr(l){return 48<=l&&l<=57?l-48:-1}function cr(l){return 48===l?"\0":97===l?"\x07":98===l?"\b":116===l||9===l?"\t":110===l?"\n":118===l?"\v":102===l?"\f":114===l?"\r":101===l?"\x1b":32===l?" ":34===l?'"':47===l?"/":92===l?"\\":78===l?"\x85":95===l?"\xa0":76===l?"\u2028":80===l?"\u2029":""}function sr(l){return l<=65535?String.fromCharCode(l):String.fromCharCode(55296+(l-65536>>10),56320+(l-65536&1023))}(0,lt.K2)(kt,"_class"),(0,lt.K2)(Ut,"is_EOL"),(0,lt.K2)(Ht,"is_WHITE_SPACE"),(0,lt.K2)(zt,"is_WS_OR_EOL"),(0,lt.K2)(ue,"is_FLOW_INDICATOR"),(0,lt.K2)(je,"fromHexCode"),(0,lt.K2)(ze,"escapedHexLen"),(0,lt.K2)(Cr,"fromDecimalCode"),(0,lt.K2)(cr,"simpleEscapeSequence"),(0,lt.K2)(sr,"charFromCodepoint");var Pr,$e=new Array(256),He=new Array(256);for(Pr=0;Pr<256;Pr++)$e[Pr]=cr(Pr)?1:0,He[Pr]=cr(Pr);function wr(l,T){this.input=l,this.filename=T.filename||null,this.schema=T.schema||Le,this.onWarning=T.onWarning||null,this.legacy=T.legacy||!1,this.json=T.json||!1,this.listener=T.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=l.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function Vr(l,T){var F={name:l.filename,buffer:l.input.slice(0,-1),position:l.position,line:l.line,column:l.position-l.lineStart};return F.snippet=Er(F),new vr(T,F)}function xr(l,T){throw Vr(l,T)}function Ba(l,T){l.onWarning&&l.onWarning.call(null,Vr(l,T))}(0,lt.K2)(wr,"State$1"),(0,lt.K2)(Vr,"generateError"),(0,lt.K2)(xr,"throwError"),(0,lt.K2)(Ba,"throwWarning");var Zr={YAML:(0,lt.K2)(function(T,F,ot){var _t,Ie,Qt;null!==T.version&&xr(T,"duplication of %YAML directive"),1!==ot.length&&xr(T,"YAML directive accepts exactly one argument"),null===(_t=/^([0-9]+)\.([0-9]+)$/.exec(ot[0]))&&xr(T,"ill-formed argument of the YAML directive"),Ie=parseInt(_t[1],10),Qt=parseInt(_t[2],10),1!==Ie&&xr(T,"unacceptable YAML version of the document"),T.version=ot[0],T.checkLineBreaks=Qt<2,1!==Qt&&2!==Qt&&Ba(T,"unsupported YAML version of the document")},"handleYamlDirective"),TAG:(0,lt.K2)(function(T,F,ot){var _t,Ie;2!==ot.length&&xr(T,"TAG directive accepts exactly two arguments"),Ie=ot[1],$.test(_t=ot[0])||xr(T,"ill-formed tag handle (first argument) of the TAG directive"),tr.call(T.tagMap,_t)&&xr(T,'there is a previously declared suffix for "'+_t+'" tag handle'),ct.test(Ie)||xr(T,"ill-formed tag prefix (second argument) of the TAG directive");try{Ie=decodeURIComponent(Ie)}catch{xr(T,"tag prefix is malformed: "+Ie)}T.tagMap[_t]=Ie},"handleTagDirective")};function Oa(l,T,F,ot){var _t,Ie,Qt,Ue;if(T<F){if(Ue=l.input.slice(T,F),ot)for(_t=0,Ie=Ue.length;_t<Ie;_t+=1)9===(Qt=Ue.charCodeAt(_t))||32<=Qt&&Qt<=1114111||xr(l,"expected valid JSON character");else x.test(Ue)&&xr(l,"the stream contains non-printable characters");l.result+=Ue}}function Qr(l,T,F,ot){var _t,Ie,Qt,Ue;for(j.isObject(F)||xr(l,"cannot merge mappings; the provided source object is unacceptable"),Qt=0,Ue=(_t=Object.keys(F)).length;Qt<Ue;Qt+=1)tr.call(T,Ie=_t[Qt])||(T[Ie]=F[Ie],ot[Ie]=!0)}function ra(l,T,F,ot,_t,Ie,Qt,Ue,yr){var Dr,aa;if(Array.isArray(_t))for(Dr=0,aa=(_t=Array.prototype.slice.call(_t)).length;Dr<aa;Dr+=1)Array.isArray(_t[Dr])&&xr(l,"nested arrays are not supported inside keys"),"object"==typeof _t&&"[object Object]"===kt(_t[Dr])&&(_t[Dr]="[object Object]");if("object"==typeof _t&&"[object Object]"===kt(_t)&&(_t="[object Object]"),_t=String(_t),null===T&&(T={}),"tag:yaml.org,2002:merge"===ot)if(Array.isArray(Ie))for(Dr=0,aa=Ie.length;Dr<aa;Dr+=1)Qr(l,T,Ie[Dr],F);else Qr(l,T,Ie,F);else!l.json&&!tr.call(F,_t)&&tr.call(T,_t)&&(l.line=Qt||l.line,l.lineStart=Ue||l.lineStart,l.position=yr||l.position,xr(l,"duplicated mapping key")),"__proto__"===_t?Object.defineProperty(T,_t,{configurable:!0,enumerable:!0,writable:!0,value:Ie}):T[_t]=Ie,delete F[_t];return T}function Xr(l){var T;10===(T=l.input.charCodeAt(l.position))?l.position++:13===T?(l.position++,10===l.input.charCodeAt(l.position)&&l.position++):xr(l,"a line break is expected"),l.line+=1,l.lineStart=l.position,l.firstTabInLine=-1}function Rr(l,T,F){for(var ot=0,_t=l.input.charCodeAt(l.position);0!==_t;){for(;Ht(_t);)9===_t&&-1===l.firstTabInLine&&(l.firstTabInLine=l.position),_t=l.input.charCodeAt(++l.position);if(T&&35===_t)do{_t=l.input.charCodeAt(++l.position)}while(10!==_t&&13!==_t&&0!==_t);if(!Ut(_t))break;for(Xr(l),_t=l.input.charCodeAt(l.position),ot++,l.lineIndent=0;32===_t;)l.lineIndent++,_t=l.input.charCodeAt(++l.position)}return-1!==F&&0!==ot&&l.lineIndent<F&&Ba(l,"deficient indentation"),ot}function Tr(l){var F,T=l.position;return!(45!==(F=l.input.charCodeAt(T))&&46!==F||F!==l.input.charCodeAt(T+1)||F!==l.input.charCodeAt(T+2)||(T+=3,F=l.input.charCodeAt(T),0!==F&&!zt(F)))}function N(l,T){1===T?l.result+=" ":T>1&&(l.result+=j.repeat("\n",T-1))}function Vt(l,T,F){var _t,Ie,Qt,Ue,yr,Dr,aa,Ca,Nr=l.kind,oa=l.result;if(zt(Ca=l.input.charCodeAt(l.position))||ue(Ca)||35===Ca||38===Ca||42===Ca||33===Ca||124===Ca||62===Ca||39===Ca||34===Ca||37===Ca||64===Ca||96===Ca||(63===Ca||45===Ca)&&(zt(_t=l.input.charCodeAt(l.position+1))||F&&ue(_t)))return!1;for(l.kind="scalar",l.result="",Ie=Qt=l.position,Ue=!1;0!==Ca;){if(58===Ca){if(zt(_t=l.input.charCodeAt(l.position+1))||F&&ue(_t))break}else if(35===Ca){if(zt(l.input.charCodeAt(l.position-1)))break}else{if(l.position===l.lineStart&&Tr(l)||F&&ue(Ca))break;if(Ut(Ca)){if(yr=l.line,Dr=l.lineStart,aa=l.lineIndent,Rr(l,!1,-1),l.lineIndent>=T){Ue=!0,Ca=l.input.charCodeAt(l.position);continue}l.position=Qt,l.line=yr,l.lineStart=Dr,l.lineIndent=aa;break}}Ue&&(Oa(l,Ie,Qt,!1),N(l,l.line-yr),Ie=Qt=l.position,Ue=!1),Ht(Ca)||(Qt=l.position+1),Ca=l.input.charCodeAt(++l.position)}return Oa(l,Ie,Qt,!1),!!l.result||(l.kind=Nr,l.result=oa,!1)}function Ke(l,T){var F,ot,_t;if(39!==(F=l.input.charCodeAt(l.position)))return!1;for(l.kind="scalar",l.result="",l.position++,ot=_t=l.position;0!==(F=l.input.charCodeAt(l.position));)if(39===F){if(Oa(l,ot,l.position,!0),39!==(F=l.input.charCodeAt(++l.position)))return!0;ot=l.position,l.position++,_t=l.position}else Ut(F)?(Oa(l,ot,_t,!0),N(l,Rr(l,!1,T)),ot=_t=l.position):l.position===l.lineStart&&Tr(l)?xr(l,"unexpected end of the document within a single quoted scalar"):(l.position++,_t=l.position);xr(l,"unexpected end of the stream within a single quoted scalar")}function rr(l,T){var F,ot,_t,Ie,Qt,Ue;if(34!==(Ue=l.input.charCodeAt(l.position)))return!1;for(l.kind="scalar",l.result="",l.position++,F=ot=l.position;0!==(Ue=l.input.charCodeAt(l.position));){if(34===Ue)return Oa(l,F,l.position,!0),l.position++,!0;if(92===Ue){if(Oa(l,F,l.position,!0),Ut(Ue=l.input.charCodeAt(++l.position)))Rr(l,!1,T);else if(Ue<256&&$e[Ue])l.result+=He[Ue],l.position++;else if((Qt=ze(Ue))>0){for(_t=Qt,Ie=0;_t>0;_t--)(Qt=je(Ue=l.input.charCodeAt(++l.position)))>=0?Ie=(Ie<<4)+Qt:xr(l,"expected hexadecimal character");l.result+=sr(Ie),l.position++}else xr(l,"unknown escape sequence");F=ot=l.position}else Ut(Ue)?(Oa(l,F,ot,!0),N(l,Rr(l,!1,T)),F=ot=l.position):l.position===l.lineStart&&Tr(l)?xr(l,"unexpected end of the document within a double quoted scalar"):(l.position++,ot=l.position)}xr(l,"unexpected end of the stream within a double quoted scalar")}function ia(l,T){var ot,_t,Ie,Ue,aa,Nr,oa,Ca,Pa,Za,$a,Wa,F=!0,Qt=l.tag,yr=l.anchor,ka=Object.create(null);if(91===(Wa=l.input.charCodeAt(l.position)))aa=93,Ca=!1,Ue=[];else{if(123!==Wa)return!1;aa=125,Ca=!0,Ue={}}for(null!==l.anchor&&(l.anchorMap[l.anchor]=Ue),Wa=l.input.charCodeAt(++l.position);0!==Wa;){if(Rr(l,!0,T),(Wa=l.input.charCodeAt(l.position))===aa)return l.position++,l.tag=Qt,l.anchor=yr,l.kind=Ca?"mapping":"sequence",l.result=Ue,!0;F?44===Wa&&xr(l,"expected the node content, but found ','"):xr(l,"missed comma between flow collection entries"),$a=null,Nr=oa=!1,63===Wa&&zt(l.input.charCodeAt(l.position+1))&&(Nr=oa=!0,l.position++,Rr(l,!0,T)),ot=l.line,_t=l.lineStart,Ie=l.position,Jr(l,T,1,!1,!0),Za=l.tag,Pa=l.result,Rr(l,!0,T),Wa=l.input.charCodeAt(l.position),(oa||l.line===ot)&&58===Wa&&(Nr=!0,Wa=l.input.charCodeAt(++l.position),Rr(l,!0,T),Jr(l,T,1,!1,!0),$a=l.result),Ca?ra(l,Ue,ka,Za,Pa,$a,ot,_t,Ie):Ue.push(Nr?ra(l,null,ka,Za,Pa,$a,ot,_t,Ie):Pa),Rr(l,!0,T),44===(Wa=l.input.charCodeAt(l.position))?(F=!0,Wa=l.input.charCodeAt(++l.position)):F=!1}xr(l,"unexpected end of the stream within a flow collection")}function hr(l,T){var F,ot,aa,Nr,_t=1,Ie=!1,Qt=!1,Ue=T,yr=0,Dr=!1;if(124===(Nr=l.input.charCodeAt(l.position)))ot=!1;else{if(62!==Nr)return!1;ot=!0}for(l.kind="scalar",l.result="";0!==Nr;)if(43===(Nr=l.input.charCodeAt(++l.position))||45===Nr)1===_t?_t=43===Nr?3:2:xr(l,"repeat of a chomping mode identifier");else{if(!((aa=Cr(Nr))>=0))break;0===aa?xr(l,"bad explicit indentation width of a block scalar; it cannot be less than one"):Qt?xr(l,"repeat of an indentation width identifier"):(Ue=T+aa-1,Qt=!0)}if(Ht(Nr)){do{Nr=l.input.charCodeAt(++l.position)}while(Ht(Nr));if(35===Nr)do{Nr=l.input.charCodeAt(++l.position)}while(!Ut(Nr)&&0!==Nr)}for(;0!==Nr;){for(Xr(l),l.lineIndent=0,Nr=l.input.charCodeAt(l.position);(!Qt||l.lineIndent<Ue)&&32===Nr;)l.lineIndent++,Nr=l.input.charCodeAt(++l.position);if(!Qt&&l.lineIndent>Ue&&(Ue=l.lineIndent),Ut(Nr))yr++;else{if(l.lineIndent<Ue){3===_t?l.result+=j.repeat("\n",Ie?1+yr:yr):1===_t&&Ie&&(l.result+="\n");break}for(ot?Ht(Nr)?(Dr=!0,l.result+=j.repeat("\n",Ie?1+yr:yr)):Dr?(Dr=!1,l.result+=j.repeat("\n",yr+1)):0===yr?Ie&&(l.result+=" "):l.result+=j.repeat("\n",yr):l.result+=j.repeat("\n",Ie?1+yr:yr),Ie=!0,Qt=!0,yr=0,F=l.position;!Ut(Nr)&&0!==Nr;)Nr=l.input.charCodeAt(++l.position);Oa(l,F,l.position,!1)}}return!0}function ga(l,T){var F,yr,ot=l.tag,_t=l.anchor,Ie=[],Ue=!1;if(-1!==l.firstTabInLine)return!1;for(null!==l.anchor&&(l.anchorMap[l.anchor]=Ie),yr=l.input.charCodeAt(l.position);0!==yr&&(-1!==l.firstTabInLine&&(l.position=l.firstTabInLine,xr(l,"tab characters must not be used in indentation")),45===yr&&zt(l.input.charCodeAt(l.position+1)));)if(Ue=!0,l.position++,Rr(l,!0,-1)&&l.lineIndent<=T)Ie.push(null),yr=l.input.charCodeAt(l.position);else if(F=l.line,Jr(l,T,3,!1,!0),Ie.push(l.result),Rr(l,!0,-1),yr=l.input.charCodeAt(l.position),(l.line===F||l.lineIndent>T)&&0!==yr)xr(l,"bad indentation of a sequence entry");else if(l.lineIndent<T)break;return!!Ue&&(l.tag=ot,l.anchor=_t,l.kind="sequence",l.result=Ie,!0)}function or(l,T,F){var ot,_t,Ie,Qt,Ue,yr,Wa,Dr=l.tag,aa=l.anchor,Nr={},oa=Object.create(null),Ca=null,ka=null,Pa=null,Za=!1,$a=!1;if(-1!==l.firstTabInLine)return!1;for(null!==l.anchor&&(l.anchorMap[l.anchor]=Nr),Wa=l.input.charCodeAt(l.position);0!==Wa;){if(!Za&&-1!==l.firstTabInLine&&(l.position=l.firstTabInLine,xr(l,"tab characters must not be used in indentation")),ot=l.input.charCodeAt(l.position+1),Ie=l.line,63!==Wa&&58!==Wa||!zt(ot)){if(Qt=l.line,Ue=l.lineStart,yr=l.position,!Jr(l,F,2,!1,!0))break;if(l.line===Ie){for(Wa=l.input.charCodeAt(l.position);Ht(Wa);)Wa=l.input.charCodeAt(++l.position);if(58===Wa)zt(Wa=l.input.charCodeAt(++l.position))||xr(l,"a whitespace character is expected after the key-value separator within a block mapping"),Za&&(ra(l,Nr,oa,Ca,ka,null,Qt,Ue,yr),Ca=ka=Pa=null),$a=!0,Za=!1,_t=!1,Ca=l.tag,ka=l.result;else{if(!$a)return l.tag=Dr,l.anchor=aa,!0;xr(l,"can not read an implicit mapping pair; a colon is missed")}}else{if(!$a)return l.tag=Dr,l.anchor=aa,!0;xr(l,"can not read a block mapping entry; a multiline key may not be an implicit key")}}else 63===Wa?(Za&&(ra(l,Nr,oa,Ca,ka,null,Qt,Ue,yr),Ca=ka=Pa=null),$a=!0,Za=!0,_t=!0):Za?(Za=!1,_t=!0):xr(l,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),l.position+=1,Wa=ot;if((l.line===Ie||l.lineIndent>T)&&(Za&&(Qt=l.line,Ue=l.lineStart,yr=l.position),Jr(l,T,4,!0,_t)&&(Za?ka=l.result:Pa=l.result),Za||(ra(l,Nr,oa,Ca,ka,Pa,Qt,Ue,yr),Ca=ka=Pa=null),Rr(l,!0,-1),Wa=l.input.charCodeAt(l.position)),(l.line===Ie||l.lineIndent>T)&&0!==Wa)xr(l,"bad indentation of a mapping entry");else if(l.lineIndent<T)break}return Za&&ra(l,Nr,oa,Ca,ka,null,Qt,Ue,yr),$a&&(l.tag=Dr,l.anchor=aa,l.kind="mapping",l.result=Nr),$a}function _a(l){var T,_t,Ie,Qt,F=!1,ot=!1;if(33!==(Qt=l.input.charCodeAt(l.position)))return!1;if(null!==l.tag&&xr(l,"duplication of a tag property"),60===(Qt=l.input.charCodeAt(++l.position))?(F=!0,Qt=l.input.charCodeAt(++l.position)):33===Qt?(ot=!0,_t="!!",Qt=l.input.charCodeAt(++l.position)):_t="!",T=l.position,F){do{Qt=l.input.charCodeAt(++l.position)}while(0!==Qt&&62!==Qt);l.position<l.length?(Ie=l.input.slice(T,l.position),Qt=l.input.charCodeAt(++l.position)):xr(l,"unexpected end of the stream within a verbatim tag")}else{for(;0!==Qt&&!zt(Qt);)33===Qt&&(ot?xr(l,"tag suffix cannot contain exclamation marks"):(_t=l.input.slice(T-1,l.position+1),$.test(_t)||xr(l,"named tag handle cannot contain such characters"),ot=!0,T=l.position+1)),Qt=l.input.charCodeAt(++l.position);Ie=l.input.slice(T,l.position),w.test(Ie)&&xr(l,"tag suffix cannot contain flow indicator characters")}Ie&&!ct.test(Ie)&&xr(l,"tag name cannot contain such characters: "+Ie);try{Ie=decodeURIComponent(Ie)}catch{xr(l,"tag name is malformed: "+Ie)}return F?l.tag=Ie:tr.call(l.tagMap,_t)?l.tag=l.tagMap[_t]+Ie:"!"===_t?l.tag="!"+Ie:"!!"===_t?l.tag="tag:yaml.org,2002:"+Ie:xr(l,'undeclared tag handle "'+_t+'"'),!0}function Ma(l){var T,F;if(38!==(F=l.input.charCodeAt(l.position)))return!1;for(null!==l.anchor&&xr(l,"duplication of an anchor property"),F=l.input.charCodeAt(++l.position),T=l.position;0!==F&&!zt(F)&&!ue(F);)F=l.input.charCodeAt(++l.position);return l.position===T&&xr(l,"name of an anchor node must contain at least one character"),l.anchor=l.input.slice(T,l.position),!0}function Ra(l){var T,F,ot;if(42!==(ot=l.input.charCodeAt(l.position)))return!1;for(ot=l.input.charCodeAt(++l.position),T=l.position;0!==ot&&!zt(ot)&&!ue(ot);)ot=l.input.charCodeAt(++l.position);return l.position===T&&xr(l,"name of an alias node must contain at least one character"),F=l.input.slice(T,l.position),tr.call(l.anchorMap,F)||xr(l,'unidentified alias "'+F+'"'),l.result=l.anchorMap[F],Rr(l,!0,-1),!0}function Jr(l,T,F,ot,_t){var Ie,Qt,Ue,Nr,oa,Ca,ka,Pa,Za,yr=1,Dr=!1,aa=!1;if(null!==l.listener&&l.listener("open",l),l.tag=null,l.anchor=null,l.kind=null,l.result=null,Ie=Qt=Ue=4===F||3===F,ot&&Rr(l,!0,-1)&&(Dr=!0,l.lineIndent>T?yr=1:l.lineIndent===T?yr=0:l.lineIndent<T&&(yr=-1)),1===yr)for(;_a(l)||Ma(l);)Rr(l,!0,-1)?(Dr=!0,Ue=Ie,l.lineIndent>T?yr=1:l.lineIndent===T?yr=0:l.lineIndent<T&&(yr=-1)):Ue=!1;if(Ue&&(Ue=Dr||_t),(1===yr||4===F)&&(Pa=1===F||2===F?T:T+1,Za=l.position-l.lineStart,1===yr?Ue&&(ga(l,Za)||or(l,Za,Pa))||ia(l,Pa)?aa=!0:(Qt&&hr(l,Pa)||Ke(l,Pa)||rr(l,Pa)?aa=!0:Ra(l)?(aa=!0,(null!==l.tag||null!==l.anchor)&&xr(l,"alias node should not have any properties")):Vt(l,Pa,1===F)&&(aa=!0,null===l.tag&&(l.tag="?")),null!==l.anchor&&(l.anchorMap[l.anchor]=l.result)):0===yr&&(aa=Ue&&ga(l,Za))),null===l.tag)null!==l.anchor&&(l.anchorMap[l.anchor]=l.result);else if("?"===l.tag){for(null!==l.result&&"scalar"!==l.kind&&xr(l,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+l.kind+'"'),Nr=0,oa=l.implicitTypes.length;Nr<oa;Nr+=1)if((ka=l.implicitTypes[Nr]).resolve(l.result)){l.result=ka.construct(l.result),l.tag=ka.tag,null!==l.anchor&&(l.anchorMap[l.anchor]=l.result);break}}else if("!"!==l.tag){if(tr.call(l.typeMap[l.kind||"fallback"],l.tag))ka=l.typeMap[l.kind||"fallback"][l.tag];else for(ka=null,Nr=0,oa=(Ca=l.typeMap.multi[l.kind||"fallback"]).length;Nr<oa;Nr+=1)if(l.tag.slice(0,Ca[Nr].tag.length)===Ca[Nr].tag){ka=Ca[Nr];break}ka||xr(l,"unknown tag !<"+l.tag+">"),null!==l.result&&ka.kind!==l.kind&&xr(l,"unacceptable node kind for !<"+l.tag+'> tag; it should be "'+ka.kind+'", not "'+l.kind+'"'),ka.resolve(l.result,l.tag)?(l.result=ka.construct(l.result,l.tag),null!==l.anchor&&(l.anchorMap[l.anchor]=l.result)):xr(l,"cannot resolve a node with !<"+l.tag+"> explicit tag")}return null!==l.listener&&l.listener("close",l),null!==l.tag||null!==l.anchor||aa}function ca(l){var F,ot,_t,Qt,T=l.position,Ie=!1;for(l.version=null,l.checkLineBreaks=l.legacy,l.tagMap=Object.create(null),l.anchorMap=Object.create(null);0!==(Qt=l.input.charCodeAt(l.position))&&(Rr(l,!0,-1),Qt=l.input.charCodeAt(l.position),!(l.lineIndent>0||37!==Qt));){for(Ie=!0,Qt=l.input.charCodeAt(++l.position),F=l.position;0!==Qt&&!zt(Qt);)Qt=l.input.charCodeAt(++l.position);for(_t=[],(ot=l.input.slice(F,l.position)).length<1&&xr(l,"directive name must not be less than one character in length");0!==Qt;){for(;Ht(Qt);)Qt=l.input.charCodeAt(++l.position);if(35===Qt){do{Qt=l.input.charCodeAt(++l.position)}while(0!==Qt&&!Ut(Qt));break}if(Ut(Qt))break;for(F=l.position;0!==Qt&&!zt(Qt);)Qt=l.input.charCodeAt(++l.position);_t.push(l.input.slice(F,l.position))}0!==Qt&&Xr(l),tr.call(Zr,ot)?Zr[ot](l,ot,_t):Ba(l,'unknown document directive "'+ot+'"')}Rr(l,!0,-1),0===l.lineIndent&&45===l.input.charCodeAt(l.position)&&45===l.input.charCodeAt(l.position+1)&&45===l.input.charCodeAt(l.position+2)?(l.position+=3,Rr(l,!0,-1)):Ie&&xr(l,"directives end mark is expected"),Jr(l,l.lineIndent-1,4,!1,!0),Rr(l,!0,-1),l.checkLineBreaks&&C.test(l.input.slice(T,l.position))&&Ba(l,"non-ASCII line breaks are interpreted as content"),l.documents.push(l.result),l.position===l.lineStart&&Tr(l)?46===l.input.charCodeAt(l.position)&&(l.position+=3,Rr(l,!0,-1)):l.position<l.length-1&&xr(l,"end of the stream or a document separator is expected")}function ha(l,T){T=T||{},0!==(l=String(l)).length&&(10!==l.charCodeAt(l.length-1)&&13!==l.charCodeAt(l.length-1)&&(l+="\n"),65279===l.charCodeAt(0)&&(l=l.slice(1)));var F=new wr(l,T),ot=l.indexOf("\0");for(-1!==ot&&(F.position=ot,xr(F,"null byte is not allowed in input")),F.input+="\0";32===F.input.charCodeAt(F.position);)F.lineIndent+=1,F.position+=1;for(;F.position<F.length-1;)ca(F);return F.documents}function Yr(l,T,F){null!==T&&"object"==typeof T&&typeof F>"u"&&(F=T,T=null);var ot=ha(l,F);if("function"!=typeof T)return ot;for(var _t=0,Ie=ot.length;_t<Ie;_t+=1)T(ot[_t])}function Fa(l,T){var F=ha(l,T);if(0!==F.length){if(1===F.length)return F[0];throw new vr("expected a single document in the stream, but found more")}}(0,lt.K2)(Oa,"captureSegment"),(0,lt.K2)(Qr,"mergeMappings"),(0,lt.K2)(ra,"storeMappingPair"),(0,lt.K2)(Xr,"readLineBreak"),(0,lt.K2)(Rr,"skipSeparationSpace"),(0,lt.K2)(Tr,"testDocumentSeparator"),(0,lt.K2)(N,"writeFoldedLines"),(0,lt.K2)(Vt,"readPlainScalar"),(0,lt.K2)(Ke,"readSingleQuotedScalar"),(0,lt.K2)(rr,"readDoubleQuotedScalar"),(0,lt.K2)(ia,"readFlowCollection"),(0,lt.K2)(hr,"readBlockScalar"),(0,lt.K2)(ga,"readBlockSequence"),(0,lt.K2)(or,"readBlockMapping"),(0,lt.K2)(_a,"readTagProperty"),(0,lt.K2)(Ma,"readAnchorProperty"),(0,lt.K2)(Ra,"readAlias"),(0,lt.K2)(Jr,"composeNode"),(0,lt.K2)(ca,"readDocument"),(0,lt.K2)(ha,"loadDocuments"),(0,lt.K2)(Yr,"loadAll$1"),(0,lt.K2)(Fa,"load$1");var lr_load=Fa,qa=Object.prototype.toString,za=Object.prototype.hasOwnProperty,Ya={0:"\\0",7:"\\a",8:"\\b",9:"\\t",10:"\\n",11:"\\v",12:"\\f",13:"\\r",27:"\\e",34:'\\"',92:"\\\\",133:"\\N",160:"\\_",8232:"\\L",8233:"\\P"},yi=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],Ei=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function mi(l,T){var F,ot,_t,Ie,Qt,Ue,yr;if(null===T)return{};for(F={},_t=0,Ie=(ot=Object.keys(T)).length;_t<Ie;_t+=1)Qt=ot[_t],Ue=String(T[Qt]),"!!"===Qt.slice(0,2)&&(Qt="tag:yaml.org,2002:"+Qt.slice(2)),(yr=l.compiledTypeMap.fallback[Qt])&&za.call(yr.styleAliases,Ue)&&(Ue=yr.styleAliases[Ue]),F[Qt]=Ue;return F}function Na(l){var T,F,ot;if(T=l.toString(16).toUpperCase(),l<=255)F="x",ot=2;else if(l<=65535)F="u",ot=4;else{if(!(l<=4294967295))throw new vr("code point within a string may not be greater than 0xFFFFFFFF");F="U",ot=8}return"\\"+F+j.repeat("0",ot-T.length)+T}function Ha(l){this.schema=l.schema||Le,this.indent=Math.max(1,l.indent||2),this.noArrayIndent=l.noArrayIndent||!1,this.skipInvalid=l.skipInvalid||!1,this.flowLevel=j.isNothing(l.flowLevel)?-1:l.flowLevel,this.styleMap=mi(this.schema,l.styles||null),this.sortKeys=l.sortKeys||!1,this.lineWidth=l.lineWidth||80,this.noRefs=l.noRefs||!1,this.noCompatMode=l.noCompatMode||!1,this.condenseFlow=l.condenseFlow||!1,this.quotingType='"'===l.quotingType?2:1,this.forceQuotes=l.forceQuotes||!1,this.replacer="function"==typeof l.replacer?l.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function ni(l,T){for(var Qt,F=j.repeat(" ",T),ot=0,_t=-1,Ie="",Ue=l.length;ot<Ue;)-1===(_t=l.indexOf("\n",ot))?(Qt=l.slice(ot),ot=Ue):(Qt=l.slice(ot,_t+1),ot=_t+1),Qt.length&&"\n"!==Qt&&(Ie+=F),Ie+=Qt;return Ie}function Fr(l,T){return"\n"+j.repeat(" ",l.indent*T)}function Pi(l,T){var F,ot;for(F=0,ot=l.implicitTypes.length;F<ot;F+=1)if(l.implicitTypes[F].resolve(T))return!0;return!1}function ua(l){return 32===l||9===l}function ki(l){return 32<=l&&l<=126||161<=l&&l<=55295&&8232!==l&&8233!==l||57344<=l&&l<=65533&&65279!==l||65536<=l&&l<=1114111}function Ri(l){return ki(l)&&65279!==l&&13!==l&&10!==l}function Wi(l,T,F){var ot=Ri(l),_t=ot&&!ua(l);return(F?ot:ot&&44!==l&&91!==l&&93!==l&&123!==l&&125!==l)&&35!==l&&!(58===T&&!_t)||Ri(T)&&!ua(T)&&35===l||58===T&&_t}function ln(l){return ki(l)&&65279!==l&&!ua(l)&&45!==l&&63!==l&&58!==l&&44!==l&&91!==l&&93!==l&&123!==l&&125!==l&&35!==l&&38!==l&&42!==l&&33!==l&&124!==l&&61!==l&&62!==l&&39!==l&&34!==l&&37!==l&&64!==l&&96!==l}function Ji(l){return!ua(l)&&58!==l}function Oi(l,T){var ot,F=l.charCodeAt(T);return F>=55296&&F<=56319&&T+1<l.length&&(ot=l.charCodeAt(T+1))>=56320&&ot<=57343?1024*(F-55296)+ot-56320+65536:F}function zi(l){return/^\n* /.test(l)}function Un(l,T,F,ot,_t,Ie,Qt,Ue){var yr,Dr=0,aa=null,Nr=!1,oa=!1,Ca=-1!==ot,ka=-1,Pa=ln(Oi(l,0))&&Ji(Oi(l,l.length-1));if(T||Qt)for(yr=0;yr<l.length;Dr>=65536?yr+=2:yr++){if(!ki(Dr=Oi(l,yr)))return 5;Pa=Pa&&Wi(Dr,aa,Ue),aa=Dr}else{for(yr=0;yr<l.length;Dr>=65536?yr+=2:yr++){if(10===(Dr=Oi(l,yr)))Nr=!0,Ca&&(oa=oa||yr-ka-1>ot&&" "!==l[ka+1],ka=yr);else if(!ki(Dr))return 5;Pa=Pa&&Wi(Dr,aa,Ue),aa=Dr}oa=oa||Ca&&yr-ka-1>ot&&" "!==l[ka+1]}return Nr||oa?F>9&&zi(l)?5:Qt?2===Ie?5:2:oa?4:3:!Pa||Qt||_t(l)?2===Ie?5:2:1}function tn(l,T,F,ot,_t){l.dump=function(){if(0===T.length)return 2===l.quotingType?'""':"''";if(!l.noCompatMode&&(-1!==yi.indexOf(T)||Ei.test(T)))return 2===l.quotingType?'"'+T+'"':"'"+T+"'";var Ie=l.indent*Math.max(1,F),Qt=-1===l.lineWidth?-1:Math.max(Math.min(l.lineWidth,40),l.lineWidth-Ie),Ue=ot||l.flowLevel>-1&&F>=l.flowLevel;function yr(Dr){return Pi(l,Dr)}switch((0,lt.K2)(yr,"testAmbiguity"),Un(T,Ue,l.indent,Qt,yr,l.quotingType,l.forceQuotes&&!ot,_t)){case 1:return T;case 2:return"'"+T.replace(/'/g,"''")+"'";case 3:return"|"+Nn(T,l.indent)+xn(ni(T,Ie));case 4:return">"+Nn(T,l.indent)+xn(ni(nn(T,Qt),Ie));case 5:return'"'+Rn(T)+'"';default:throw new vr("impossible error: invalid scalar style")}}()}function Nn(l,T){var F=zi(l)?String(T):"",ot="\n"===l[l.length-1];return F+(!ot||"\n"!==l[l.length-2]&&"\n"!==l?ot?"":"-":"+")+"\n"}function xn(l){return"\n"===l[l.length-1]?l.slice(0,-1):l}function nn(l,T){for(var Ie,Qt,F=/(\n+)([^\n]*)/g,ot=(Dr=void 0,Dr=l.indexOf("\n"),F.lastIndex=Dr=-1!==Dr?Dr:l.length,kn(l.slice(0,Dr),T)),_t="\n"===l[0]||" "===l[0];Qt=F.exec(l);){var yr=Qt[2];Ie=" "===yr[0],ot+=Qt[1]+(_t||Ie||""===yr?"":"\n")+kn(yr,T),_t=Ie}var Dr;return ot}function kn(l,T){if(""===l||" "===l[0])return l;for(var ot,Ie,F=/ [^ ]/g,_t=0,Qt=0,Ue=0,yr="";ot=F.exec(l);)(Ue=ot.index)-_t>T&&(yr+="\n"+l.slice(_t,Ie=Qt>_t?Qt:Ue),_t=Ie+1),Qt=Ue;return yr+="\n",(yr+=l.length-_t>T&&Qt>_t?l.slice(_t,Qt)+"\n"+l.slice(Qt+1):l.slice(_t)).slice(1)}function Rn(l){for(var ot,T="",F=0,_t=0;_t<l.length;F>=65536?_t+=2:_t++)F=Oi(l,_t),!(ot=Ya[F])&&ki(F)?(T+=l[_t],F>=65536&&(T+=l[_t+1])):T+=ot||Na(F);return T}function un(l,T,F){var Ie,Qt,Ue,ot="",_t=l.tag;for(Ie=0,Qt=F.length;Ie<Qt;Ie+=1)Ue=F[Ie],l.replacer&&(Ue=l.replacer.call(F,String(Ie),Ue)),(d(l,T,Ue,!1,!1)||typeof Ue>"u"&&d(l,T,null,!1,!1))&&(""!==ot&&(ot+=","+(l.condenseFlow?"":" ")),ot+=l.dump);l.tag=_t,l.dump="["+ot+"]"}function Xi(l,T,F,ot){var Qt,Ue,yr,_t="",Ie=l.tag;for(Qt=0,Ue=F.length;Qt<Ue;Qt+=1)yr=F[Qt],l.replacer&&(yr=l.replacer.call(F,String(Qt),yr)),(d(l,T+1,yr,!0,!0,!1,!0)||typeof yr>"u"&&d(l,T+1,null,!0,!0,!1,!0))&&((!ot||""!==_t)&&(_t+=Fr(l,T)),l.dump&&10===l.dump.charCodeAt(0)?_t+="-":_t+="- ",_t+=l.dump);l.tag=Ie,l.dump=_t||"[]"}function rn(l,T,F){var Qt,Ue,yr,Dr,aa,ot="",_t=l.tag,Ie=Object.keys(F);for(Qt=0,Ue=Ie.length;Qt<Ue;Qt+=1)aa="",""!==ot&&(aa+=", "),l.condenseFlow&&(aa+='"'),Dr=F[yr=Ie[Qt]],l.replacer&&(Dr=l.replacer.call(F,yr,Dr)),d(l,T,yr,!1,!1)&&(l.dump.length>1024&&(aa+="? "),aa+=l.dump+(l.condenseFlow?'"':"")+":"+(l.condenseFlow?"":" "),d(l,T,Dr,!1,!1)&&(ot+=aa+=l.dump));l.tag=_t,l.dump="{"+ot+"}"}function Yn(l,T,F,ot){var Ue,yr,Dr,aa,Nr,oa,_t="",Ie=l.tag,Qt=Object.keys(F);if(!0===l.sortKeys)Qt.sort();else if("function"==typeof l.sortKeys)Qt.sort(l.sortKeys);else if(l.sortKeys)throw new vr("sortKeys must be a boolean or a function");for(Ue=0,yr=Qt.length;Ue<yr;Ue+=1)oa="",(!ot||""!==_t)&&(oa+=Fr(l,T)),aa=F[Dr=Qt[Ue]],l.replacer&&(aa=l.replacer.call(F,Dr,aa)),d(l,T+1,Dr,!0,!0,!0)&&((Nr=null!==l.tag&&"?"!==l.tag||l.dump&&l.dump.length>1024)&&(l.dump&&10===l.dump.charCodeAt(0)?oa+="?":oa+="? "),oa+=l.dump,Nr&&(oa+=Fr(l,T)),d(l,T+1,aa,!0,Nr)&&(l.dump&&10===l.dump.charCodeAt(0)?oa+=":":oa+=": ",_t+=oa+=l.dump));l.tag=Ie,l.dump=_t||"{}"}function Gt(l,T,F){var ot,_t,Ie,Qt,Ue,yr;for(Ie=0,Qt=(_t=F?l.explicitTypes:l.implicitTypes).length;Ie<Qt;Ie+=1)if(((Ue=_t[Ie]).instanceOf||Ue.predicate)&&(!Ue.instanceOf||"object"==typeof T&&T instanceof Ue.instanceOf)&&(!Ue.predicate||Ue.predicate(T))){if(l.tag=F?Ue.multi&&Ue.representName?Ue.representName(T):Ue.tag:"?",Ue.represent){if(yr=l.styleMap[Ue.tag]||Ue.defaultStyle,"[object Function]"===qa.call(Ue.represent))ot=Ue.represent(T,yr);else{if(!za.call(Ue.represent,yr))throw new vr("!<"+Ue.tag+'> tag resolver accepts not "'+yr+'" style');ot=Ue.represent[yr](T,yr)}l.dump=ot}return!0}return!1}function d(l,T,F,ot,_t,Ie,Qt){l.tag=null,l.dump=F,Gt(l,F,!1)||Gt(l,F,!0);var Dr,Ue=qa.call(l.dump),yr=ot;ot&&(ot=l.flowLevel<0||l.flowLevel>T);var Nr,oa,aa="[object Object]"===Ue||"[object Array]"===Ue;if(aa&&(oa=-1!==(Nr=l.duplicates.indexOf(F))),(null!==l.tag&&"?"!==l.tag||oa||2!==l.indent&&T>0)&&(_t=!1),oa&&l.usedDuplicates[Nr])l.dump="*ref_"+Nr;else{if(aa&&oa&&!l.usedDuplicates[Nr]&&(l.usedDuplicates[Nr]=!0),"[object Object]"===Ue)ot&&0!==Object.keys(l.dump).length?(Yn(l,T,l.dump,_t),oa&&(l.dump="&ref_"+Nr+l.dump)):(rn(l,T,l.dump),oa&&(l.dump="&ref_"+Nr+" "+l.dump));else if("[object Array]"===Ue)ot&&0!==l.dump.length?(Xi(l,l.noArrayIndent&&!Qt&&T>0?T-1:T,l.dump,_t),oa&&(l.dump="&ref_"+Nr+l.dump)):(un(l,T,l.dump),oa&&(l.dump="&ref_"+Nr+" "+l.dump));else{if("[object String]"!==Ue){if("[object Undefined]"===Ue)return!1;if(l.skipInvalid)return!1;throw new vr("unacceptable kind of an object to dump "+Ue)}"?"!==l.tag&&tn(l,l.dump,T,Ie,yr)}null!==l.tag&&"?"!==l.tag&&(Dr=encodeURI("!"===l.tag[0]?l.tag.slice(1):l.tag).replace(/!/g,"%21"),Dr="!"===l.tag[0]?"!"+Dr:"tag:yaml.org,2002:"===Dr.slice(0,18)?"!!"+Dr.slice(18):"!<"+Dr+">",l.dump=Dr+" "+l.dump)}return!0}function ht(l,T){var _t,Ie,F=[],ot=[];for(Zt(l,F,ot),_t=0,Ie=ot.length;_t<Ie;_t+=1)T.duplicates.push(F[ot[_t]]);T.usedDuplicates=new Array(Ie)}function Zt(l,T,F){var ot,_t,Ie;if(null!==l&&"object"==typeof l)if(-1!==(_t=T.indexOf(l)))-1===F.indexOf(_t)&&F.push(_t);else if(T.push(l),Array.isArray(l))for(_t=0,Ie=l.length;_t<Ie;_t+=1)Zt(l[_t],T,F);else for(_t=0,Ie=(ot=Object.keys(l)).length;_t<Ie;_t+=1)Zt(l[ot[_t]],T,F)}function nt(l,T){return function(){throw new Error("Function yaml."+l+" is removed in js-yaml 4. Use yaml."+T+" instead, which is now safe by default.")}}(0,lt.K2)(mi,"compileStyleMap"),(0,lt.K2)(Na,"encodeHex"),(0,lt.K2)(Ha,"State"),(0,lt.K2)(ni,"indentString"),(0,lt.K2)(Fr,"generateNextLine"),(0,lt.K2)(Pi,"testImplicitResolving"),(0,lt.K2)(ua,"isWhitespace"),(0,lt.K2)(ki,"isPrintable"),(0,lt.K2)(Ri,"isNsCharOrWhitespace"),(0,lt.K2)(Wi,"isPlainSafe"),(0,lt.K2)(ln,"isPlainSafeFirst"),(0,lt.K2)(Ji,"isPlainSafeLast"),(0,lt.K2)(Oi,"codePointAt"),(0,lt.K2)(zi,"needIndentIndicator"),(0,lt.K2)(Un,"chooseScalarStyle"),(0,lt.K2)(tn,"writeScalar"),(0,lt.K2)(Nn,"blockHeader"),(0,lt.K2)(xn,"dropEndingNewline"),(0,lt.K2)(nn,"foldString"),(0,lt.K2)(kn,"foldLine"),(0,lt.K2)(Rn,"escapeString"),(0,lt.K2)(un,"writeFlowSequence"),(0,lt.K2)(Xi,"writeBlockSequence"),(0,lt.K2)(rn,"writeFlowMapping"),(0,lt.K2)(Yn,"writeBlockMapping"),(0,lt.K2)(Gt,"detectType"),(0,lt.K2)(d,"writeNode"),(0,lt.K2)(ht,"getDuplicateReferences"),(0,lt.K2)(Zt,"inspectNode"),(0,lt.K2)(function Tt(l,T){var F=new Ha(T=T||{});F.noRefs||ht(l,F);var ot=l;return F.replacer&&(ot=F.replacer.call({"":ot},"",ot)),d(F,0,ot,!0,!0)?F.dump+"\n":""},"dump$1"),(0,lt.K2)(nt,"renamed");var At=Et,J=lr_load;
/*! Bundled license information:
      
      js-yaml/dist/js-yaml.mjs:
        (*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT *)
      */nt("safeLoad","load"),nt("safeLoadAll","loadAll"),nt("safeDump","dump")},28642:(ti,_r,B)=>{"use strict";B.r(_r),B.d(_r,{diagram:()=>Me});var lt=B(89204),ee=B(97787),L=B(36384),D=B(32239),Rt=B(59355),dt=B(52052),q=B(79006),A=B(32303),$t=B(39115),yt=B(79687),Ye=B(40622),bt=B(61823),Xt=function(){var at=(0,A.K2)(function(mi,Na,Or,ma){for(Or=Or||{},ma=mi.length;ma--;Or[mi[ma]]=Na);return Or},"o"),Dt=[1,15],M=[1,7],jt=[1,13],Ve=[1,14],gt=[1,19],Lt=[1,16],Ft=[1,17],Qe=[1,18],ta=[8,30],Gr=[8,10,21,28,29,30,31,39,43,46],na=[1,23],La=[1,24],da=[8,10,15,16,21,28,29,30,31,39,43,46],wa=[8,10,15,16,21,27,28,29,30,31,39,43,46],Xa=[1,49],Ya={trace:(0,A.K2)(function(){},"trace"),yy:{},symbols_:{error:2,spaceLines:3,SPACELINE:4,NL:5,separator:6,SPACE:7,EOF:8,start:9,BLOCK_DIAGRAM_KEY:10,document:11,stop:12,statement:13,link:14,LINK:15,START_LINK:16,LINK_LABEL:17,STR:18,nodeStatement:19,columnsStatement:20,SPACE_BLOCK:21,blockStatement:22,classDefStatement:23,cssClassStatement:24,styleStatement:25,node:26,SIZE:27,COLUMNS:28,"id-block":29,end:30,NODE_ID:31,nodeShapeNLabel:32,dirList:33,DIR:34,NODE_DSTART:35,NODE_DEND:36,BLOCK_ARROW_START:37,BLOCK_ARROW_END:38,classDef:39,CLASSDEF_ID:40,CLASSDEF_STYLEOPTS:41,DEFAULT:42,class:43,CLASSENTITY_IDS:44,STYLECLASS:45,style:46,STYLE_ENTITY_IDS:47,STYLE_DEFINITION_DATA:48,$accept:0,$end:1},terminals_:{2:"error",4:"SPACELINE",5:"NL",7:"SPACE",8:"EOF",10:"BLOCK_DIAGRAM_KEY",15:"LINK",16:"START_LINK",17:"LINK_LABEL",18:"STR",21:"SPACE_BLOCK",27:"SIZE",28:"COLUMNS",29:"id-block",30:"end",31:"NODE_ID",34:"DIR",35:"NODE_DSTART",36:"NODE_DEND",37:"BLOCK_ARROW_START",38:"BLOCK_ARROW_END",39:"classDef",40:"CLASSDEF_ID",41:"CLASSDEF_STYLEOPTS",42:"DEFAULT",43:"class",44:"CLASSENTITY_IDS",45:"STYLECLASS",46:"style",47:"STYLE_ENTITY_IDS",48:"STYLE_DEFINITION_DATA"},productions_:[0,[3,1],[3,2],[3,2],[6,1],[6,1],[6,1],[9,3],[12,1],[12,1],[12,2],[12,2],[11,1],[11,2],[14,1],[14,4],[13,1],[13,1],[13,1],[13,1],[13,1],[13,1],[13,1],[19,3],[19,2],[19,1],[20,1],[22,4],[22,3],[26,1],[26,2],[33,1],[33,2],[32,3],[32,4],[23,3],[23,3],[24,3],[25,3]],performAction:(0,A.K2)(function(Na,Or,ma,Ha,ni,Fr,Pi){var ua=Fr.length-1;switch(ni){case 4:Ha.getLogger().debug("Rule: separator (NL) ");break;case 5:Ha.getLogger().debug("Rule: separator (Space) ");break;case 6:Ha.getLogger().debug("Rule: separator (EOF) ");break;case 7:Ha.getLogger().debug("Rule: hierarchy: ",Fr[ua-1]),Ha.setHierarchy(Fr[ua-1]);break;case 8:Ha.getLogger().debug("Stop NL ");break;case 9:Ha.getLogger().debug("Stop EOF ");break;case 10:Ha.getLogger().debug("Stop NL2 ");break;case 11:Ha.getLogger().debug("Stop EOF2 ");break;case 12:Ha.getLogger().debug("Rule: statement: ",Fr[ua]),this.$="number"==typeof Fr[ua].length?Fr[ua]:[Fr[ua]];break;case 13:Ha.getLogger().debug("Rule: statement #2: ",Fr[ua-1]),this.$=[Fr[ua-1]].concat(Fr[ua]);break;case 14:Ha.getLogger().debug("Rule: link: ",Fr[ua],Na),this.$={edgeTypeStr:Fr[ua],label:""};break;case 15:Ha.getLogger().debug("Rule: LABEL link: ",Fr[ua-3],Fr[ua-1],Fr[ua]),this.$={edgeTypeStr:Fr[ua],label:Fr[ua-1]};break;case 18:const ki=parseInt(Fr[ua]),Ri=Ha.generateId();this.$={id:Ri,type:"space",label:"",width:ki,children:[]};break;case 23:Ha.getLogger().debug("Rule: (nodeStatement link node) ",Fr[ua-2],Fr[ua-1],Fr[ua]," typestr: ",Fr[ua-1].edgeTypeStr);const Wi=Ha.edgeStrToEdgeData(Fr[ua-1].edgeTypeStr);this.$=[{id:Fr[ua-2].id,label:Fr[ua-2].label,type:Fr[ua-2].type,directions:Fr[ua-2].directions},{id:Fr[ua-2].id+"-"+Fr[ua].id,start:Fr[ua-2].id,end:Fr[ua].id,label:Fr[ua-1].label,type:"edge",directions:Fr[ua].directions,arrowTypeEnd:Wi,arrowTypeStart:"arrow_open"},{id:Fr[ua].id,label:Fr[ua].label,type:Ha.typeStr2Type(Fr[ua].typeStr),directions:Fr[ua].directions}];break;case 24:Ha.getLogger().debug("Rule: nodeStatement (abc88 node size) ",Fr[ua-1],Fr[ua]),this.$={id:Fr[ua-1].id,label:Fr[ua-1].label,type:Ha.typeStr2Type(Fr[ua-1].typeStr),directions:Fr[ua-1].directions,widthInColumns:parseInt(Fr[ua],10)};break;case 25:Ha.getLogger().debug("Rule: nodeStatement (node) ",Fr[ua]),this.$={id:Fr[ua].id,label:Fr[ua].label,type:Ha.typeStr2Type(Fr[ua].typeStr),directions:Fr[ua].directions,widthInColumns:1};break;case 26:Ha.getLogger().debug("APA123",this?this:"na"),Ha.getLogger().debug("COLUMNS: ",Fr[ua]),this.$={type:"column-setting",columns:"auto"===Fr[ua]?-1:parseInt(Fr[ua])};break;case 27:Ha.getLogger().debug("Rule: id-block statement : ",Fr[ua-2],Fr[ua-1]),Ha.generateId(),this.$={...Fr[ua-2],type:"composite",children:Fr[ua-1]};break;case 28:Ha.getLogger().debug("Rule: blockStatement : ",Fr[ua-2],Fr[ua-1],Fr[ua]);const Ji=Ha.generateId();this.$={id:Ji,type:"composite",label:"",children:Fr[ua-1]};break;case 29:Ha.getLogger().debug("Rule: node (NODE_ID separator): ",Fr[ua]),this.$={id:Fr[ua]};break;case 30:Ha.getLogger().debug("Rule: node (NODE_ID nodeShapeNLabel separator): ",Fr[ua-1],Fr[ua]),this.$={id:Fr[ua-1],label:Fr[ua].label,typeStr:Fr[ua].typeStr,directions:Fr[ua].directions};break;case 31:Ha.getLogger().debug("Rule: dirList: ",Fr[ua]),this.$=[Fr[ua]];break;case 32:Ha.getLogger().debug("Rule: dirList: ",Fr[ua-1],Fr[ua]),this.$=[Fr[ua-1]].concat(Fr[ua]);break;case 33:Ha.getLogger().debug("Rule: nodeShapeNLabel: ",Fr[ua-2],Fr[ua-1],Fr[ua]),this.$={typeStr:Fr[ua-2]+Fr[ua],label:Fr[ua-1]};break;case 34:Ha.getLogger().debug("Rule: BLOCK_ARROW nodeShapeNLabel: ",Fr[ua-3],Fr[ua-2]," #3:",Fr[ua-1],Fr[ua]),this.$={typeStr:Fr[ua-3]+Fr[ua],label:Fr[ua-2],directions:Fr[ua-1]};break;case 35:case 36:this.$={type:"classDef",id:Fr[ua-1].trim(),css:Fr[ua].trim()};break;case 37:this.$={type:"applyClass",id:Fr[ua-1].trim(),styleClass:Fr[ua].trim()};break;case 38:this.$={type:"applyStyles",id:Fr[ua-1].trim(),stylesStr:Fr[ua].trim()}}},"anonymous"),table:[{9:1,10:[1,2]},{1:[3]},{10:Dt,11:3,13:4,19:5,20:6,21:M,22:8,23:9,24:10,25:11,26:12,28:jt,29:Ve,31:gt,39:Lt,43:Ft,46:Qe},{8:[1,20]},at(ta,[2,12],{13:4,19:5,20:6,22:8,23:9,24:10,25:11,26:12,11:21,10:Dt,21:M,28:jt,29:Ve,31:gt,39:Lt,43:Ft,46:Qe}),at(Gr,[2,16],{14:22,15:na,16:La}),at(Gr,[2,17]),at(Gr,[2,18]),at(Gr,[2,19]),at(Gr,[2,20]),at(Gr,[2,21]),at(Gr,[2,22]),at(da,[2,25],{27:[1,25]}),at(Gr,[2,26]),{19:26,26:12,31:gt},{10:Dt,11:27,13:4,19:5,20:6,21:M,22:8,23:9,24:10,25:11,26:12,28:jt,29:Ve,31:gt,39:Lt,43:Ft,46:Qe},{40:[1,28],42:[1,29]},{44:[1,30]},{47:[1,31]},at(wa,[2,29],{32:32,35:[1,33],37:[1,34]}),{1:[2,7]},at(ta,[2,13]),{26:35,31:gt},{31:[2,14]},{17:[1,36]},at(da,[2,24]),{10:Dt,11:37,13:4,14:22,15:na,16:La,19:5,20:6,21:M,22:8,23:9,24:10,25:11,26:12,28:jt,29:Ve,31:gt,39:Lt,43:Ft,46:Qe},{30:[1,38]},{41:[1,39]},{41:[1,40]},{45:[1,41]},{48:[1,42]},at(wa,[2,30]),{18:[1,43]},{18:[1,44]},at(da,[2,23]),{18:[1,45]},{30:[1,46]},at(Gr,[2,28]),at(Gr,[2,35]),at(Gr,[2,36]),at(Gr,[2,37]),at(Gr,[2,38]),{36:[1,47]},{33:48,34:Xa},{15:[1,50]},at(Gr,[2,27]),at(wa,[2,33]),{38:[1,51]},{33:52,34:Xa,38:[2,31]},{31:[2,15]},at(wa,[2,34]),{38:[2,32]}],defaultActions:{20:[2,7],23:[2,14],50:[2,15],52:[2,32]},parseError:(0,A.K2)(function(Na,Or){if(!Or.recoverable){var ma=new Error(Na);throw ma.hash=Or,ma}this.trace(Na)},"parseError"),parse:(0,A.K2)(function(Na){var Or=this,ma=[0],Ha=[],ni=[null],Fr=[],Pi=this.table,ua="",ki=0,Ri=0,Wi=0,Oi=Fr.slice.call(arguments,1),zi=Object.create(this.lexer),cn={yy:{}};for(var Ln in this.yy)Object.prototype.hasOwnProperty.call(this.yy,Ln)&&(cn.yy[Ln]=this.yy[Ln]);zi.setInput(Na,cn.yy),cn.yy.lexer=zi,cn.yy.parser=this,typeof zi.yylloc>"u"&&(zi.yylloc={});var Bn=zi.yylloc;Fr.push(Bn);var Vn=zi.options&&zi.options.ranges;function Un(){var ht;return"number"!=typeof(ht=Ha.pop()||zi.lex()||1)&&(ht instanceof Array&&(ht=(Ha=ht).pop()),ht=Or.symbols_[ht]||ht),ht}this.parseError="function"==typeof cn.yy.parseError?cn.yy.parseError:Object.getPrototypeOf(this).parseError,(0,A.K2)(function hn(ht){ma.length=ma.length-2*ht,ni.length=ni.length-ht,Fr.length=Fr.length-ht},"popStack"),(0,A.K2)(Un,"lex");for(var tn,Nn,xn,nn,Rn,Xi,rn,Gt,un={};;){if(this.defaultActions[xn=ma[ma.length-1]]?nn=this.defaultActions[xn]:((null===tn||typeof tn>"u")&&(tn=Un()),nn=Pi[xn]&&Pi[xn][tn]),typeof nn>"u"||!nn.length||!nn[0]){var d;for(Xi in Gt=[],Pi[xn])this.terminals_[Xi]&&Xi>2&&Gt.push("'"+this.terminals_[Xi]+"'");d=zi.showPosition?"Parse error on line "+(ki+1)+":\n"+zi.showPosition()+"\nExpecting "+Gt.join(", ")+", got '"+(this.terminals_[tn]||tn)+"'":"Parse error on line "+(ki+1)+": Unexpected "+(1==tn?"end of input":"'"+(this.terminals_[tn]||tn)+"'"),this.parseError(d,{text:zi.match,token:this.terminals_[tn]||tn,line:zi.yylineno,loc:Bn,expected:Gt})}if(nn[0]instanceof Array&&nn.length>1)throw new Error("Parse Error: multiple actions possible at state: "+xn+", token: "+tn);switch(nn[0]){case 1:ma.push(tn),ni.push(zi.yytext),Fr.push(zi.yylloc),ma.push(nn[1]),tn=null,Nn?(tn=Nn,Nn=null):(Ri=zi.yyleng,ua=zi.yytext,ki=zi.yylineno,Bn=zi.yylloc,Wi>0&&Wi--);break;case 2:if(un.$=ni[ni.length-(rn=this.productions_[nn[1]][1])],un._$={first_line:Fr[Fr.length-(rn||1)].first_line,last_line:Fr[Fr.length-1].last_line,first_column:Fr[Fr.length-(rn||1)].first_column,last_column:Fr[Fr.length-1].last_column},Vn&&(un._$.range=[Fr[Fr.length-(rn||1)].range[0],Fr[Fr.length-1].range[1]]),typeof(Rn=this.performAction.apply(un,[ua,Ri,ki,cn.yy,nn[1],ni,Fr].concat(Oi)))<"u")return Rn;rn&&(ma=ma.slice(0,-1*rn*2),ni=ni.slice(0,-1*rn),Fr=Fr.slice(0,-1*rn)),ma.push(this.productions_[nn[1]][0]),ni.push(un.$),Fr.push(un._$),ma.push(Pi[ma[ma.length-2]][ma[ma.length-1]]);break;case 3:return!0}}return!0},"parse")};function Ei(){this.yy={}}return Ya.lexer=function(){return{EOF:1,parseError:(0,A.K2)(function(Or,ma){if(!this.yy.parser)throw new Error(Or);this.yy.parser.parseError(Or,ma)},"parseError"),setInput:(0,A.K2)(function(Na,Or){return this.yy=Or||this.yy||{},this._input=Na,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},"setInput"),input:(0,A.K2)(function(){var Na=this._input[0];return this.yytext+=Na,this.yyleng++,this.offset++,this.match+=Na,this.matched+=Na,Na.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),Na},"input"),unput:(0,A.K2)(function(Na){var Or=Na.length,ma=Na.split(/(?:\r\n?|\n)/g);this._input=Na+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-Or),this.offset-=Or;var Ha=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),ma.length-1&&(this.yylineno-=ma.length-1);var ni=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:ma?(ma.length===Ha.length?this.yylloc.first_column:0)+Ha[Ha.length-ma.length].length-ma[0].length:this.yylloc.first_column-Or},this.options.ranges&&(this.yylloc.range=[ni[0],ni[0]+this.yyleng-Or]),this.yyleng=this.yytext.length,this},"unput"),more:(0,A.K2)(function(){return this._more=!0,this},"more"),reject:(0,A.K2)(function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},"reject"),less:(0,A.K2)(function(Na){this.unput(this.match.slice(Na))},"less"),pastInput:(0,A.K2)(function(){var Na=this.matched.substr(0,this.matched.length-this.match.length);return(Na.length>20?"...":"")+Na.substr(-20).replace(/\n/g,"")},"pastInput"),upcomingInput:(0,A.K2)(function(){var Na=this.match;return Na.length<20&&(Na+=this._input.substr(0,20-Na.length)),(Na.substr(0,20)+(Na.length>20?"...":"")).replace(/\n/g,"")},"upcomingInput"),showPosition:(0,A.K2)(function(){var Na=this.pastInput(),Or=new Array(Na.length+1).join("-");return Na+this.upcomingInput()+"\n"+Or+"^"},"showPosition"),test_match:(0,A.K2)(function(Na,Or){var ma,Ha,ni;if(this.options.backtrack_lexer&&(ni={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(ni.yylloc.range=this.yylloc.range.slice(0))),(Ha=Na[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=Ha.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:Ha?Ha[Ha.length-1].length-Ha[Ha.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+Na[0].length},this.yytext+=Na[0],this.match+=Na[0],this.matches=Na,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(Na[0].length),this.matched+=Na[0],ma=this.performAction.call(this,this.yy,this,Or,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),ma)return ma;if(this._backtrack){for(var Fr in ni)this[Fr]=ni[Fr];return!1}return!1},"test_match"),next:(0,A.K2)(function(){if(this.done)return this.EOF;var Na,Or,ma,Ha;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var ni=this._currentRules(),Fr=0;Fr<ni.length;Fr++)if((ma=this._input.match(this.rules[ni[Fr]]))&&(!Or||ma[0].length>Or[0].length)){if(Or=ma,Ha=Fr,this.options.backtrack_lexer){if(!1!==(Na=this.test_match(ma,ni[Fr])))return Na;if(this._backtrack){Or=!1;continue}return!1}if(!this.options.flex)break}return Or?!1!==(Na=this.test_match(Or,ni[Ha]))&&Na:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},"next"),lex:(0,A.K2)(function(){return this.next()||this.lex()},"lex"),begin:(0,A.K2)(function(Or){this.conditionStack.push(Or)},"begin"),popState:(0,A.K2)(function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},"popState"),_currentRules:(0,A.K2)(function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},"_currentRules"),topState:(0,A.K2)(function(Or){return(Or=this.conditionStack.length-1-Math.abs(Or||0))>=0?this.conditionStack[Or]:"INITIAL"},"topState"),pushState:(0,A.K2)(function(Or){this.begin(Or)},"pushState"),stateStackSize:(0,A.K2)(function(){return this.conditionStack.length},"stateStackSize"),options:{},performAction:(0,A.K2)(function(Or,ma,Ha,ni){switch(Ha){case 0:return Or.getLogger().debug("Found block-beta"),10;case 1:return Or.getLogger().debug("Found id-block"),29;case 2:return Or.getLogger().debug("Found block"),10;case 3:Or.getLogger().debug(".",ma.yytext);break;case 4:Or.getLogger().debug("_",ma.yytext);break;case 5:return 5;case 6:return ma.yytext=-1,28;case 7:return ma.yytext=ma.yytext.replace(/columns\s+/,""),Or.getLogger().debug("COLUMNS (LEX)",ma.yytext),28;case 8:case 76:case 77:case 99:this.pushState("md_string");break;case 9:return"MD_STR";case 10:case 34:case 79:this.popState();break;case 11:this.pushState("string");break;case 12:Or.getLogger().debug("LEX: POPPING STR:",ma.yytext),this.popState();break;case 13:return Or.getLogger().debug("LEX: STR end:",ma.yytext),"STR";case 14:return ma.yytext=ma.yytext.replace(/space\:/,""),Or.getLogger().debug("SPACE NUM (LEX)",ma.yytext),21;case 15:return ma.yytext="1",Or.getLogger().debug("COLUMNS (LEX)",ma.yytext),21;case 16:return 42;case 17:return"LINKSTYLE";case 18:return"INTERPOLATE";case 19:return this.pushState("CLASSDEF"),39;case 20:return this.popState(),this.pushState("CLASSDEFID"),"DEFAULT_CLASSDEF_ID";case 21:return this.popState(),this.pushState("CLASSDEFID"),40;case 22:return this.popState(),41;case 23:return this.pushState("CLASS"),43;case 24:return this.popState(),this.pushState("CLASS_STYLE"),44;case 25:return this.popState(),45;case 26:return this.pushState("STYLE_STMNT"),46;case 27:return this.popState(),this.pushState("STYLE_DEFINITION"),47;case 28:return this.popState(),48;case 29:return this.pushState("acc_title"),"acc_title";case 30:return this.popState(),"acc_title_value";case 31:return this.pushState("acc_descr"),"acc_descr";case 32:return this.popState(),"acc_descr_value";case 33:this.pushState("acc_descr_multiline");break;case 35:return"acc_descr_multiline_value";case 36:return 30;case 37:case 38:case 40:case 41:case 44:return this.popState(),Or.getLogger().debug("Lex: (("),"NODE_DEND";case 39:return this.popState(),Or.getLogger().debug("Lex: ))"),"NODE_DEND";case 42:return this.popState(),Or.getLogger().debug("Lex: (-"),"NODE_DEND";case 43:return this.popState(),Or.getLogger().debug("Lex: -)"),"NODE_DEND";case 45:return this.popState(),Or.getLogger().debug("Lex: ]]"),"NODE_DEND";case 46:return this.popState(),Or.getLogger().debug("Lex: ("),"NODE_DEND";case 47:return this.popState(),Or.getLogger().debug("Lex: ])"),"NODE_DEND";case 48:case 49:return this.popState(),Or.getLogger().debug("Lex: /]"),"NODE_DEND";case 50:return this.popState(),Or.getLogger().debug("Lex: )]"),"NODE_DEND";case 51:return this.popState(),Or.getLogger().debug("Lex: )"),"NODE_DEND";case 52:return this.popState(),Or.getLogger().debug("Lex: ]>"),"NODE_DEND";case 53:return this.popState(),Or.getLogger().debug("Lex: ]"),"NODE_DEND";case 54:return Or.getLogger().debug("Lexa: -)"),this.pushState("NODE"),35;case 55:return Or.getLogger().debug("Lexa: (-"),this.pushState("NODE"),35;case 56:return Or.getLogger().debug("Lexa: ))"),this.pushState("NODE"),35;case 57:case 59:case 60:case 61:case 64:return Or.getLogger().debug("Lexa: )"),this.pushState("NODE"),35;case 58:return Or.getLogger().debug("Lex: ((("),this.pushState("NODE"),35;case 62:return Or.getLogger().debug("Lexc: >"),this.pushState("NODE"),35;case 63:return Or.getLogger().debug("Lexa: (["),this.pushState("NODE"),35;case 65:case 66:case 67:case 68:case 69:case 70:case 71:return this.pushState("NODE"),35;case 72:return Or.getLogger().debug("Lexa: ["),this.pushState("NODE"),35;case 73:return this.pushState("BLOCK_ARROW"),Or.getLogger().debug("LEX ARR START"),37;case 74:return Or.getLogger().debug("Lex: NODE_ID",ma.yytext),31;case 75:return Or.getLogger().debug("Lex: EOF",ma.yytext),8;case 78:return"NODE_DESCR";case 80:Or.getLogger().debug("Lex: Starting string"),this.pushState("string");break;case 81:Or.getLogger().debug("LEX ARR: Starting string"),this.pushState("string");break;case 82:return Or.getLogger().debug("LEX: NODE_DESCR:",ma.yytext),"NODE_DESCR";case 83:Or.getLogger().debug("LEX POPPING"),this.popState();break;case 84:Or.getLogger().debug("Lex: =>BAE"),this.pushState("ARROW_DIR");break;case 85:return ma.yytext=ma.yytext.replace(/^,\s*/,""),Or.getLogger().debug("Lex (right): dir:",ma.yytext),"DIR";case 86:return ma.yytext=ma.yytext.replace(/^,\s*/,""),Or.getLogger().debug("Lex (left):",ma.yytext),"DIR";case 87:return ma.yytext=ma.yytext.replace(/^,\s*/,""),Or.getLogger().debug("Lex (x):",ma.yytext),"DIR";case 88:return ma.yytext=ma.yytext.replace(/^,\s*/,""),Or.getLogger().debug("Lex (y):",ma.yytext),"DIR";case 89:return ma.yytext=ma.yytext.replace(/^,\s*/,""),Or.getLogger().debug("Lex (up):",ma.yytext),"DIR";case 90:return ma.yytext=ma.yytext.replace(/^,\s*/,""),Or.getLogger().debug("Lex (down):",ma.yytext),"DIR";case 91:return ma.yytext="]>",Or.getLogger().debug("Lex (ARROW_DIR end):",ma.yytext),this.popState(),this.popState(),"BLOCK_ARROW_END";case 92:return Or.getLogger().debug("Lex: LINK","#"+ma.yytext+"#"),15;case 93:case 94:case 95:return Or.getLogger().debug("Lex: LINK",ma.yytext),15;case 96:case 97:case 98:return Or.getLogger().debug("Lex: START_LINK",ma.yytext),this.pushState("LLABEL"),16;case 100:return Or.getLogger().debug("Lex: Starting string"),this.pushState("string"),"LINK_LABEL";case 101:return this.popState(),Or.getLogger().debug("Lex: LINK","#"+ma.yytext+"#"),15;case 102:case 103:return this.popState(),Or.getLogger().debug("Lex: LINK",ma.yytext),15;case 104:return Or.getLogger().debug("Lex: COLON",ma.yytext),ma.yytext=ma.yytext.slice(1),27}},"anonymous"),rules:[/^(?:block-beta\b)/,/^(?:block:)/,/^(?:block\b)/,/^(?:[\s]+)/,/^(?:[\n]+)/,/^(?:((\u000D\u000A)|(\u000A)))/,/^(?:columns\s+auto\b)/,/^(?:columns\s+[\d]+)/,/^(?:["][`])/,/^(?:[^`"]+)/,/^(?:[`]["])/,/^(?:["])/,/^(?:["])/,/^(?:[^"]*)/,/^(?:space[:]\d+)/,/^(?:space\b)/,/^(?:default\b)/,/^(?:linkStyle\b)/,/^(?:interpolate\b)/,/^(?:classDef\s+)/,/^(?:DEFAULT\s+)/,/^(?:\w+\s+)/,/^(?:[^\n]*)/,/^(?:class\s+)/,/^(?:(\w+)+((,\s*\w+)*))/,/^(?:[^\n]*)/,/^(?:style\s+)/,/^(?:(\w+)+((,\s*\w+)*))/,/^(?:[^\n]*)/,/^(?:accTitle\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*\{\s*)/,/^(?:[\}])/,/^(?:[^\}]*)/,/^(?:end\b\s*)/,/^(?:\(\(\()/,/^(?:\)\)\))/,/^(?:[\)]\))/,/^(?:\}\})/,/^(?:\})/,/^(?:\(-)/,/^(?:-\))/,/^(?:\(\()/,/^(?:\]\])/,/^(?:\()/,/^(?:\]\))/,/^(?:\\\])/,/^(?:\/\])/,/^(?:\)\])/,/^(?:[\)])/,/^(?:\]>)/,/^(?:[\]])/,/^(?:-\))/,/^(?:\(-)/,/^(?:\)\))/,/^(?:\))/,/^(?:\(\(\()/,/^(?:\(\()/,/^(?:\{\{)/,/^(?:\{)/,/^(?:>)/,/^(?:\(\[)/,/^(?:\()/,/^(?:\[\[)/,/^(?:\[\|)/,/^(?:\[\()/,/^(?:\)\)\))/,/^(?:\[\\)/,/^(?:\[\/)/,/^(?:\[\\)/,/^(?:\[)/,/^(?:<\[)/,/^(?:[^\(\[\n\-\)\{\}\s\<\>:]+)/,/^(?:$)/,/^(?:["][`])/,/^(?:["][`])/,/^(?:[^`"]+)/,/^(?:[`]["])/,/^(?:["])/,/^(?:["])/,/^(?:[^"]+)/,/^(?:["])/,/^(?:\]>\s*\()/,/^(?:,?\s*right\s*)/,/^(?:,?\s*left\s*)/,/^(?:,?\s*x\s*)/,/^(?:,?\s*y\s*)/,/^(?:,?\s*up\s*)/,/^(?:,?\s*down\s*)/,/^(?:\)\s*)/,/^(?:\s*[xo<]?--+[-xo>]\s*)/,/^(?:\s*[xo<]?==+[=xo>]\s*)/,/^(?:\s*[xo<]?-?\.+-[xo>]?\s*)/,/^(?:\s*~~[\~]+\s*)/,/^(?:\s*[xo<]?--\s*)/,/^(?:\s*[xo<]?==\s*)/,/^(?:\s*[xo<]?-\.\s*)/,/^(?:["][`])/,/^(?:["])/,/^(?:\s*[xo<]?--+[-xo>]\s*)/,/^(?:\s*[xo<]?==+[=xo>]\s*)/,/^(?:\s*[xo<]?-?\.+-[xo>]?\s*)/,/^(?::\d+)/],conditions:{STYLE_DEFINITION:{rules:[28],inclusive:!1},STYLE_STMNT:{rules:[27],inclusive:!1},CLASSDEFID:{rules:[22],inclusive:!1},CLASSDEF:{rules:[20,21],inclusive:!1},CLASS_STYLE:{rules:[25],inclusive:!1},CLASS:{rules:[24],inclusive:!1},LLABEL:{rules:[99,100,101,102,103],inclusive:!1},ARROW_DIR:{rules:[85,86,87,88,89,90,91],inclusive:!1},BLOCK_ARROW:{rules:[76,81,84],inclusive:!1},NODE:{rules:[37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,77,80],inclusive:!1},md_string:{rules:[9,10,78,79],inclusive:!1},space:{rules:[],inclusive:!1},string:{rules:[12,13,82,83],inclusive:!1},acc_descr_multiline:{rules:[34,35],inclusive:!1},acc_descr:{rules:[32],inclusive:!1},acc_title:{rules:[30],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,5,6,7,8,11,14,15,16,17,18,19,23,26,29,31,33,36,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,92,93,94,95,96,97,98,104],inclusive:!0}}}}(),(0,A.K2)(Ei,"Parser"),Ei.prototype=Ya,Ya.Parser=Ei,new Ei}();Xt.parser=Xt;var j=Xt,fr=new Map,Fe=[],vr=new Map,Lr=(0,q.D7)(),Ar=new Map,ge=(0,A.K2)(at=>q.Y2.sanitizeText(at,Lr),"sanitizeText"),Br=(0,A.K2)(function(at,Dt=""){let M=Ar.get(at);M||(M={id:at,styles:[],textStyles:[]},Ar.set(at,M)),Dt?.split(",").forEach(jt=>{const Ve=jt.replace(/([^;]*);/,"$1").trim();if(RegExp("color").exec(jt)){const Lt=Ve.replace("fill","bgFill").replace("color","fill");M.textStyles.push(Lt)}M.styles.push(Ve)})},"addStyleClass"),Ge=(0,A.K2)(function(at,Dt=""){const M=fr.get(at);null!=Dt&&(M.styles=Dt.split(","))},"addStyle2Node"),W=(0,A.K2)(function(at,Dt){at.split(",").forEach(function(M){let jt=fr.get(M);if(void 0===jt){const Ve=M.trim();jt={id:Ve,type:"na",children:[]},fr.set(Ve,jt)}jt.classes||(jt.classes=[]),jt.classes.push(Dt)})},"setCssClass"),ft=(0,A.K2)((at,Dt)=>{const M=at.flat(),jt=[],gt=M.find(Lt=>"column-setting"===Lt?.type)?.columns??-1;for(const Lt of M)if("number"==typeof gt&&gt>0&&"column-setting"!==Lt.type&&"number"==typeof Lt.widthInColumns&&Lt.widthInColumns>gt&&A.Rm.warn(`Block ${Lt.id} width ${Lt.widthInColumns} exceeds configured column width ${gt}`),Lt.label&&(Lt.label=ge(Lt.label)),"classDef"!==Lt.type)if("applyClass"!==Lt.type)if("applyStyles"!==Lt.type)if("column-setting"===Lt.type)Dt.columns=Lt.columns??-1;else if("edge"===Lt.type){const Ft=(vr.get(Lt.id)??0)+1;vr.set(Lt.id,Ft),Lt.id=Ft+"-"+Lt.id,Fe.push(Lt)}else{Lt.label||(Lt.label="composite"===Lt.type?"":Lt.id);const Ft=fr.get(Lt.id);if(void 0===Ft?fr.set(Lt.id,Lt):("na"!==Lt.type&&(Ft.type=Lt.type),Lt.label!==Lt.id&&(Ft.label=Lt.label)),Lt.children&&ft(Lt.children,Lt),"space"===Lt.type){const Qe=Lt.width??1;for(let ta=0;ta<Qe;ta++){const Gr=(0,$t.A)(Lt);Gr.id=Gr.id+"-"+ta,fr.set(Gr.id,Gr),jt.push(Gr)}}else void 0===Ft&&jt.push(Lt)}else Lt?.stylesStr&&Ge(Lt.id,Lt?.stylesStr);else W(Lt.id,Lt?.styleClass??"");else Br(Lt.id,Lt.css);Dt.children=jt},"populateBlockDatabase"),Bt=[],_e={id:"root",type:"composite",children:[],columns:-1},Z=(0,A.K2)(()=>{A.Rm.debug("Clear called"),(0,q.IU)(),_e={id:"root",type:"composite",children:[],columns:-1},fr=new Map([["root",_e]]),Bt=[],Ar=new Map,Fe=[],vr=new Map},"clear");function ae(at){switch(A.Rm.debug("typeStr2Type",at),at){case"[]":return"square";case"()":return A.Rm.debug("we have a round"),"round";case"(())":return"circle";case">]":return"rect_left_inv_arrow";case"{}":return"diamond";case"{{}}":return"hexagon";case"([])":return"stadium";case"[[]]":return"subroutine";case"[()]":return"cylinder";case"((()))":return"doublecircle";case"[//]":return"lean_right";case"[\\\\]":return"lean_left";case"[/\\]":return"trapezoid";case"[\\/]":return"inv_trapezoid";case"<[]>":return"block_arrow";default:return"na"}}function S(at){return"=="===(A.Rm.debug("typeStr2Type",at),at)?"thick":"normal"}function re(at){switch(at.replace(/^[\s-]+|[\s-]+$/g,"")){case"x":return"arrow_cross";case"o":return"arrow_circle";case">":return"arrow_point";default:return""}}(0,A.K2)(ae,"typeStr2Type"),(0,A.K2)(S,"edgeTypeStr2Type"),(0,A.K2)(re,"edgeStrToEdgeData");var Pt=0,qt=(0,A.K2)(()=>(Pt++,"id-"+Math.random().toString(36).substr(2,12)+"-"+Pt),"generateId"),V=(0,A.K2)(at=>{_e.children=at,ft(at,_e),Bt=_e.children},"setHierarchy"),pt=(0,A.K2)(at=>{const Dt=fr.get(at);return Dt?Dt.columns?Dt.columns:Dt.children?Dt.children.length:-1:-1},"getColumns"),H=(0,A.K2)(()=>[...fr.values()],"getBlocksFlat"),Nt=(0,A.K2)(()=>Bt||[],"getBlocks"),wt=(0,A.K2)(()=>Fe,"getEdges"),Wt=(0,A.K2)(at=>fr.get(at),"getBlock"),xe=(0,A.K2)(at=>{fr.set(at.id,at)},"setBlock"),le=(0,A.K2)(()=>A.Rm,"getLogger"),Re=(0,A.K2)(function(){return Ar},"getClasses"),qe={getConfig:(0,A.K2)(()=>(0,q.zj)().block,"getConfig"),typeStr2Type:ae,edgeTypeStr2Type:S,edgeStrToEdgeData:re,getLogger:le,getBlocksFlat:H,getBlocks:Nt,getEdges:wt,setHierarchy:V,getBlock:Wt,setBlock:xe,getColumns:pt,getClasses:Re,clear:Z,generateId:qt},We=(0,A.K2)((at,Dt)=>{const M=yt.Ix,jt=M(at,"r"),Ve=M(at,"g"),gt=M(at,"b");return yt.B3(jt,Ve,gt,Dt)},"fade"),St=(0,A.K2)(at=>`.label {\n    font-family: ${at.fontFamily};\n    color: ${at.nodeTextColor||at.textColor};\n  }\n  .cluster-label text {\n    fill: ${at.titleColor};\n  }\n  .cluster-label span,p {\n    color: ${at.titleColor};\n  }\n\n\n\n  .label text,span,p {\n    fill: ${at.nodeTextColor||at.textColor};\n    color: ${at.nodeTextColor||at.textColor};\n  }\n\n  .node rect,\n  .node circle,\n  .node ellipse,\n  .node polygon,\n  .node path {\n    fill: ${at.mainBkg};\n    stroke: ${at.nodeBorder};\n    stroke-width: 1px;\n  }\n  .flowchart-label text {\n    text-anchor: middle;\n  }\n  // .flowchart-label .text-outer-tspan {\n  //   text-anchor: middle;\n  // }\n  // .flowchart-label .text-inner-tspan {\n  //   text-anchor: start;\n  // }\n\n  .node .label {\n    text-align: center;\n  }\n  .node.clickable {\n    cursor: pointer;\n  }\n\n  .arrowheadPath {\n    fill: ${at.arrowheadColor};\n  }\n\n  .edgePath .path {\n    stroke: ${at.lineColor};\n    stroke-width: 2.0px;\n  }\n\n  .flowchart-link {\n    stroke: ${at.lineColor};\n    fill: none;\n  }\n\n  .edgeLabel {\n    background-color: ${at.edgeLabelBackground};\n    rect {\n      opacity: 0.5;\n      background-color: ${at.edgeLabelBackground};\n      fill: ${at.edgeLabelBackground};\n    }\n    text-align: center;\n  }\n\n  /* For html labels only */\n  .labelBkg {\n    background-color: ${We(at.edgeLabelBackground,.5)};\n    // background-color:\n  }\n\n  .node .cluster {\n    // fill: ${We(at.mainBkg,.5)};\n    fill: ${We(at.clusterBkg,.5)};\n    stroke: ${We(at.clusterBorder,.2)};\n    box-shadow: rgba(50, 50, 93, 0.25) 0px 13px 27px -5px, rgba(0, 0, 0, 0.3) 0px 8px 16px -8px;\n    stroke-width: 1px;\n  }\n\n  .cluster text {\n    fill: ${at.titleColor};\n  }\n\n  .cluster span,p {\n    color: ${at.titleColor};\n  }\n  /* .cluster div {\n    color: ${at.titleColor};\n  } */\n\n  div.mermaidTooltip {\n    position: absolute;\n    text-align: center;\n    max-width: 200px;\n    padding: 2px;\n    font-family: ${at.fontFamily};\n    font-size: 12px;\n    background: ${at.tertiaryColor};\n    border: 1px solid ${at.border2};\n    border-radius: 2px;\n    pointer-events: none;\n    z-index: 100;\n  }\n\n  .flowchartTitleText {\n    text-anchor: middle;\n    font-size: 18px;\n    fill: ${at.textColor};\n  }\n  ${(0,ee.o)()}\n`,"getStyles"),R=(0,A.K2)((at,Dt,M,jt)=>{Dt.forEach(Ve=>{st[Ve](at,M,jt)})},"insertMarkers"),st={extension:(0,A.K2)((at,Dt,M)=>{A.Rm.trace("Making markers for ",M),at.append("defs").append("marker").attr("id",M+"_"+Dt+"-extensionStart").attr("class","marker extension "+Dt).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 1,7 L18,13 V 1 Z"),at.append("defs").append("marker").attr("id",M+"_"+Dt+"-extensionEnd").attr("class","marker extension "+Dt).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 1,1 V 13 L18,7 Z")},"extension"),composition:(0,A.K2)((at,Dt,M)=>{at.append("defs").append("marker").attr("id",M+"_"+Dt+"-compositionStart").attr("class","marker composition "+Dt).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),at.append("defs").append("marker").attr("id",M+"_"+Dt+"-compositionEnd").attr("class","marker composition "+Dt).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")},"composition"),aggregation:(0,A.K2)((at,Dt,M)=>{at.append("defs").append("marker").attr("id",M+"_"+Dt+"-aggregationStart").attr("class","marker aggregation "+Dt).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),at.append("defs").append("marker").attr("id",M+"_"+Dt+"-aggregationEnd").attr("class","marker aggregation "+Dt).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")},"aggregation"),dependency:(0,A.K2)((at,Dt,M)=>{at.append("defs").append("marker").attr("id",M+"_"+Dt+"-dependencyStart").attr("class","marker dependency "+Dt).attr("refX",6).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 5,7 L9,13 L1,7 L9,1 Z"),at.append("defs").append("marker").attr("id",M+"_"+Dt+"-dependencyEnd").attr("class","marker dependency "+Dt).attr("refX",13).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")},"dependency"),lollipop:(0,A.K2)((at,Dt,M)=>{at.append("defs").append("marker").attr("id",M+"_"+Dt+"-lollipopStart").attr("class","marker lollipop "+Dt).attr("refX",13).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("circle").attr("stroke","black").attr("fill","transparent").attr("cx",7).attr("cy",7).attr("r",6),at.append("defs").append("marker").attr("id",M+"_"+Dt+"-lollipopEnd").attr("class","marker lollipop "+Dt).attr("refX",1).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("circle").attr("stroke","black").attr("fill","transparent").attr("cx",7).attr("cy",7).attr("r",6)},"lollipop"),point:(0,A.K2)((at,Dt,M)=>{at.append("marker").attr("id",M+"_"+Dt+"-pointEnd").attr("class","marker "+Dt).attr("viewBox","0 0 10 10").attr("refX",6).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),at.append("marker").attr("id",M+"_"+Dt+"-pointStart").attr("class","marker "+Dt).attr("viewBox","0 0 10 10").attr("refX",4.5).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 0 5 L 10 10 L 10 0 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")},"point"),circle:(0,A.K2)((at,Dt,M)=>{at.append("marker").attr("id",M+"_"+Dt+"-circleEnd").attr("class","marker "+Dt).attr("viewBox","0 0 10 10").attr("refX",11).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),at.append("marker").attr("id",M+"_"+Dt+"-circleStart").attr("class","marker "+Dt).attr("viewBox","0 0 10 10").attr("refX",-1).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")},"circle"),cross:(0,A.K2)((at,Dt,M)=>{at.append("marker").attr("id",M+"_"+Dt+"-crossEnd").attr("class","marker cross "+Dt).attr("viewBox","0 0 11 11").attr("refX",12).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0"),at.append("marker").attr("id",M+"_"+Dt+"-crossStart").attr("class","marker cross "+Dt).attr("viewBox","0 0 11 11").attr("refX",-1).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0")},"cross"),barb:(0,A.K2)((at,Dt,M)=>{at.append("defs").append("marker").attr("id",M+"_"+Dt+"-barbEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",14).attr("markerUnits","strokeWidth").attr("orient","auto").append("path").attr("d","M 19,7 L9,13 L14,7 L9,1 Z")},"barb")},Ce=R,Ot=(0,q.D7)()?.block?.padding??8;function Jt(at,Dt){if(0===at||!Number.isInteger(at))throw new Error("Columns must be an integer !== 0.");if(Dt<0||!Number.isInteger(Dt))throw new Error("Position must be a non-negative integer."+Dt);return at<0?{px:Dt,py:0}:1===at?{px:0,py:Dt}:{px:Dt%at,py:Math.floor(Dt/at)}}(0,A.K2)(Jt,"calculateBlockPosition");var fe=(0,A.K2)(at=>{let Dt=0,M=0;for(const jt of at.children){const{width:Ve,height:gt,x:Lt,y:Ft}=jt.size??{width:0,height:0,x:0,y:0};A.Rm.debug("getMaxChildSize abc95 child:",jt.id,"width:",Ve,"height:",gt,"x:",Lt,"y:",Ft,jt.type),"space"!==jt.type&&(Ve>Dt&&(Dt=Ve/(at.widthInColumns??1)),gt>M&&(M=gt))}return{width:Dt,height:M}},"getMaxChildSize");function Be(at,Dt,M=0,jt=0){A.Rm.debug("setBlockSizes abc95 (start)",at.id,at?.size?.x,"block width =",at?.size,"siblingWidth",M),at?.size?.width||(at.size={width:M,height:jt,x:0,y:0});let Ve=0,gt=0;if(at.children?.length>0){for(const da of at.children)Be(da,Dt);const Lt=fe(at);Ve=Lt.width,gt=Lt.height,A.Rm.debug("setBlockSizes abc95 maxWidth of",at.id,":s children is ",Ve,gt);for(const da of at.children)da.size&&(A.Rm.debug(`abc95 Setting size of children of ${at.id} id=${da.id} ${Ve} ${gt} ${JSON.stringify(da.size)}`),da.size.width=Ve*(da.widthInColumns??1)+Ot*((da.widthInColumns??1)-1),da.size.height=gt,da.size.x=0,da.size.y=0,A.Rm.debug(`abc95 updating size of ${at.id} children child:${da.id} maxWidth:${Ve} maxHeight:${gt}`));for(const da of at.children)Be(da,Dt,Ve,gt);const Ft=at.columns??-1;let Qe=0;for(const da of at.children)Qe+=da.widthInColumns??1;let ta=at.children.length;Ft>0&&Ft<Qe&&(ta=Ft);const Gr=Math.ceil(Qe/ta);let na=ta*(Ve+Ot)+Ot,La=Gr*(gt+Ot)+Ot;if(na<M){A.Rm.debug(`Detected to small sibling: abc95 ${at.id} siblingWidth ${M} siblingHeight ${jt} width ${na}`),na=M,La=jt;const da=(M-ta*Ot-Ot)/ta,wa=(jt-Gr*Ot-Ot)/Gr;A.Rm.debug("Size indata abc88",at.id,"childWidth",da,"maxWidth",Ve),A.Rm.debug("Size indata abc88",at.id,"childHeight",wa,"maxHeight",gt),A.Rm.debug("Size indata abc88 xSize",ta,"padding",Ot);for(const Xa of at.children)Xa.size&&(Xa.size.width=da,Xa.size.height=wa,Xa.size.x=0,Xa.size.y=0)}if(A.Rm.debug(`abc95 (finale calc) ${at.id} xSize ${ta} ySize ${Gr} columns ${Ft}${at.children.length} width=${Math.max(na,at.size?.width||0)}`),na<(at?.size?.width||0)){na=at?.size?.width||0;const da=Ft>0?Math.min(at.children.length,Ft):at.children.length;if(da>0){const wa=(na-da*Ot-Ot)/da;A.Rm.debug("abc95 (growing to fit) width",at.id,na,at.size?.width,wa);for(const Xa of at.children)Xa.size&&(Xa.size.width=wa)}}at.size={width:na,height:La,x:0,y:0}}A.Rm.debug("setBlockSizes abc94 (done)",at.id,at?.size?.x,at?.size?.width,at?.size?.y,at?.size?.height)}function Ze(at,Dt){A.Rm.debug(`abc85 layout blocks (=>layoutBlocks) ${at.id} x: ${at?.size?.x} y: ${at?.size?.y} width: ${at?.size?.width}`);const M=at.columns??-1;if(A.Rm.debug("layoutBlocks columns abc95",at.id,"=>",M,at),at.children&&at.children.length>0){A.Rm.debug("widthOfChildren 88",at.children.length*(at?.children[0]?.size?.width??0)+(at.children.length-1)*Ot,"posX");let gt=0;A.Rm.debug("abc91 block?.size?.x",at.id,at?.size?.x);let Lt=at?.size?.x?at?.size?.x+(-at?.size?.width/2||0):-Ot,Ft=0;for(const Qe of at.children){const ta=at;if(!Qe.size)continue;const{width:Gr,height:na}=Qe.size,{px:La,py:da}=Jt(M,gt);if(da!=Ft&&(Ft=da,Lt=at?.size?.x?at?.size?.x+(-at?.size?.width/2||0):-Ot,A.Rm.debug("New row in layout for block",at.id," and child ",Qe.id,Ft)),A.Rm.debug(`abc89 layout blocks (child) id: ${Qe.id} Pos: ${gt} (px, py) ${La},${da} (${ta?.size?.x},${ta?.size?.y}) parent: ${ta.id} width: ${Gr}${Ot}`),ta.size){const Xa=Gr/2;Qe.size.x=Lt+Ot+Xa,A.Rm.debug(`abc91 layout blocks (calc) px, pyid:${Qe.id} startingPos=X${Lt} new startingPosX${Qe.size.x} ${Xa} padding=${Ot} width=${Gr} halfWidth=${Xa} => x:${Qe.size.x} y:${Qe.size.y} ${Qe.widthInColumns} (width * (child?.w || 1)) / 2 ${Gr*(Qe?.widthInColumns??1)/2}`),Lt=Qe.size.x+Xa,Qe.size.y=ta.size.y-ta.size.height/2+da*(na+Ot)+na/2+Ot,A.Rm.debug(`abc88 layout blocks (calc) px, pyid:${Qe.id}startingPosX${Lt}${Ot}${Xa}=>x:${Qe.size.x}y:${Qe.size.y}${Qe.widthInColumns}(width * (child?.w || 1)) / 2${Gr*(Qe?.widthInColumns??1)/2}`)}Qe.children&&Ze(Qe,Dt);let wa=Qe?.widthInColumns??1;M>0&&(wa=Math.min(wa,M-gt%M)),gt+=wa,A.Rm.debug("abc88 columnsPos",Qe,gt)}}A.Rm.debug(`layout blocks (<==layoutBlocks) ${at.id} x: ${at?.size?.x} y: ${at?.size?.y} width: ${at?.size?.width}`)}function ye(at,{minX:Dt,minY:M,maxX:jt,maxY:Ve}={minX:0,minY:0,maxX:0,maxY:0}){if(at.size&&"root"!==at.id){const{x:gt,y:Lt,width:Ft,height:Qe}=at.size;gt-Ft/2<Dt&&(Dt=gt-Ft/2),Lt-Qe/2<M&&(M=Lt-Qe/2),gt+Ft/2>jt&&(jt=gt+Ft/2),Lt+Qe/2>Ve&&(Ve=Lt+Qe/2)}if(at.children)for(const gt of at.children)({minX:Dt,minY:M,maxX:jt,maxY:Ve}=ye(gt,{minX:Dt,minY:M,maxX:jt,maxY:Ve}));return{minX:Dt,minY:M,maxX:jt,maxY:Ve}}function kr(at){const Dt=at.getBlock("root");if(!Dt)return;Be(Dt,at,0,0),Ze(Dt,at),A.Rm.debug("getBlocks",JSON.stringify(Dt,null,2));const{minX:M,minY:jt,maxX:Ve,maxY:gt}=ye(Dt);return{x:M,y:jt,width:Ve-M,height:gt-jt}}function ur(at,Dt){Dt&&at.attr("style",Dt)}function Kt(at,Dt){const M=(0,Ye.Ltv)(document.createElementNS("http://www.w3.org/2000/svg","foreignObject")),jt=M.append("xhtml:div"),Ve=at.label,gt=at.isNode?"nodeLabel":"edgeLabel",Lt=jt.append("span");return Lt.html((0,q.jZ)(Ve,Dt)),ur(Lt,at.labelStyle),Lt.attr("class",gt),ur(jt,at.labelStyle),jt.style("display","inline-block"),jt.style("white-space","nowrap"),jt.attr("xmlns","http://www.w3.org/1999/xhtml"),M.node()}(0,A.K2)(Be,"setBlockSizes"),(0,A.K2)(Ze,"layoutBlocks"),(0,A.K2)(ye,"findBounds"),(0,A.K2)(kr,"layout"),(0,A.K2)(ur,"applyStyle"),(0,A.K2)(Kt,"addHtmlLabel");var ir=(0,A.K2)(function(){var at=(0,lt.A)(function*(Dt,M,jt,Ve){let gt=Dt||"";"object"==typeof gt&&(gt=gt[0]);const Lt=(0,q.D7)();if((0,q._3)(Lt.flowchart.htmlLabels))return gt=gt.replace(/\\n|\n/g,"<br />"),A.Rm.debug("vertexText"+gt),Kt({isNode:Ve,label:yield(0,Rt.hE)((0,dt.Sm)(gt)),labelStyle:M.replace("fill:","color:")},Lt);{const Ft=document.createElementNS("http://www.w3.org/2000/svg","text");Ft.setAttribute("style",M.replace("color:","fill:"));let Qe=[];Qe="string"==typeof gt?gt.split(/\\n|\n|<br\s*\/?>/gi):Array.isArray(gt)?gt:[];for(const ta of Qe){const Gr=document.createElementNS("http://www.w3.org/2000/svg","tspan");Gr.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),Gr.setAttribute("dy","1em"),Gr.setAttribute("x","0"),Gr.setAttribute("class",jt?"title-row":"row"),Gr.textContent=ta.trim(),Ft.appendChild(Gr)}return Ft}});return function(Dt,M,jt,Ve){return at.apply(this,arguments)}}(),"createLabel"),me=(0,A.K2)((at,Dt,M,jt,Ve)=>{Dt.arrowTypeStart&&ke(at,"start",Dt.arrowTypeStart,M,jt,Ve),Dt.arrowTypeEnd&&ke(at,"end",Dt.arrowTypeEnd,M,jt,Ve)},"addEdgeMarkers"),ce={arrow_cross:"cross",arrow_point:"point",arrow_barb:"barb",arrow_circle:"circle",aggregation:"aggregation",extension:"extension",composition:"composition",dependency:"dependency",lollipop:"lollipop"},ke=(0,A.K2)((at,Dt,M,jt,Ve,gt)=>{const Lt=ce[M];Lt?at.attr(`marker-${Dt}`,`url(${jt}#${Ve}_${gt}-${Lt}${"start"===Dt?"Start":"End"})`):A.Rm.warn(`Unknown arrow type: ${M}`)},"addEdgeMarker"),Te={},er={},Xe=(0,A.K2)(function(){var at=(0,lt.A)(function*(Dt,M){const jt=(0,q.D7)(),Ve=(0,q._3)(jt.flowchart.htmlLabels),gt="markdown"===M.labelType?(0,Rt.GZ)(Dt,M.label,{style:M.labelStyle,useHtmlLabels:Ve,addSvgBackground:!0},jt):yield ir(M.label,M.labelStyle),Lt=Dt.insert("g").attr("class","edgeLabel"),Ft=Lt.insert("g").attr("class","label");Ft.node().appendChild(gt);let ta,Qe=gt.getBBox();if(Ve){const Gr=gt.children[0],na=(0,Ye.Ltv)(gt);Qe=Gr.getBoundingClientRect(),na.attr("width",Qe.width),na.attr("height",Qe.height)}if(Ft.attr("transform","translate("+-Qe.width/2+", "+-Qe.height/2+")"),Te[M.id]=Lt,M.width=Qe.width,M.height=Qe.height,M.startLabelLeft){const Gr=yield ir(M.startLabelLeft,M.labelStyle),na=Dt.insert("g").attr("class","edgeTerminals"),La=na.insert("g").attr("class","inner");ta=La.node().appendChild(Gr);const da=Gr.getBBox();La.attr("transform","translate("+-da.width/2+", "+-da.height/2+")"),er[M.id]||(er[M.id]={}),er[M.id].startLeft=na,Ir(ta,M.startLabelLeft)}if(M.startLabelRight){const Gr=yield ir(M.startLabelRight,M.labelStyle),na=Dt.insert("g").attr("class","edgeTerminals"),La=na.insert("g").attr("class","inner");ta=na.node().appendChild(Gr),La.node().appendChild(Gr);const da=Gr.getBBox();La.attr("transform","translate("+-da.width/2+", "+-da.height/2+")"),er[M.id]||(er[M.id]={}),er[M.id].startRight=na,Ir(ta,M.startLabelRight)}if(M.endLabelLeft){const Gr=yield ir(M.endLabelLeft,M.labelStyle),na=Dt.insert("g").attr("class","edgeTerminals"),La=na.insert("g").attr("class","inner");ta=La.node().appendChild(Gr);const da=Gr.getBBox();La.attr("transform","translate("+-da.width/2+", "+-da.height/2+")"),na.node().appendChild(Gr),er[M.id]||(er[M.id]={}),er[M.id].endLeft=na,Ir(ta,M.endLabelLeft)}if(M.endLabelRight){const Gr=yield ir(M.endLabelRight,M.labelStyle),na=Dt.insert("g").attr("class","edgeTerminals"),La=na.insert("g").attr("class","inner");ta=La.node().appendChild(Gr);const da=Gr.getBBox();La.attr("transform","translate("+-da.width/2+", "+-da.height/2+")"),na.node().appendChild(Gr),er[M.id]||(er[M.id]={}),er[M.id].endRight=na,Ir(ta,M.endLabelRight)}return gt});return function(Dt,M){return at.apply(this,arguments)}}(),"insertEdgeLabel");function Ir(at,Dt){(0,q.D7)().flowchart.htmlLabels&&at&&(at.style.width=9*Dt.length+"px",at.style.height="12px")}(0,A.K2)(Ir,"setTerminalWidth");var Ee=(0,A.K2)((at,Dt)=>{A.Rm.debug("Moving label abc88 ",at.id,at.label,Te[at.id],Dt);let M=Dt.updatedPath?Dt.updatedPath:Dt.originalPath;const jt=(0,q.D7)(),{subGraphTitleTotalMargin:Ve}=(0,D.O)(jt);if(at.label){const gt=Te[at.id];let Lt=at.x,Ft=at.y;if(M){const Qe=dt._K.calcLabelPosition(M);A.Rm.debug("Moving label "+at.label+" from (",Lt,",",Ft,") to (",Qe.x,",",Qe.y,") abc88"),Dt.updatedPath&&(Lt=Qe.x,Ft=Qe.y)}gt.attr("transform",`translate(${Lt}, ${Ft+Ve/2})`)}if(at.startLabelLeft){const gt=er[at.id].startLeft;let Lt=at.x,Ft=at.y;if(M){const Qe=dt._K.calcTerminalLabelPosition(at.arrowTypeStart?10:0,"start_left",M);Lt=Qe.x,Ft=Qe.y}gt.attr("transform",`translate(${Lt}, ${Ft})`)}if(at.startLabelRight){const gt=er[at.id].startRight;let Lt=at.x,Ft=at.y;if(M){const Qe=dt._K.calcTerminalLabelPosition(at.arrowTypeStart?10:0,"start_right",M);Lt=Qe.x,Ft=Qe.y}gt.attr("transform",`translate(${Lt}, ${Ft})`)}if(at.endLabelLeft){const gt=er[at.id].endLeft;let Lt=at.x,Ft=at.y;if(M){const Qe=dt._K.calcTerminalLabelPosition(at.arrowTypeEnd?10:0,"end_left",M);Lt=Qe.x,Ft=Qe.y}gt.attr("transform",`translate(${Lt}, ${Ft})`)}if(at.endLabelRight){const gt=er[at.id].endRight;let Lt=at.x,Ft=at.y;if(M){const Qe=dt._K.calcTerminalLabelPosition(at.arrowTypeEnd?10:0,"end_right",M);Lt=Qe.x,Ft=Qe.y}gt.attr("transform",`translate(${Lt}, ${Ft})`)}},"positionEdgeLabel"),qr=(0,A.K2)((at,Dt)=>{const jt=at.y,Ve=Math.abs(Dt.x-at.x),gt=Math.abs(Dt.y-jt);return Ve>=at.width/2||gt>=at.height/2},"outsideNode"),nr=(0,A.K2)((at,Dt,M)=>{A.Rm.debug(`intersection calc abc89:\n  outsidePoint: ${JSON.stringify(Dt)}\n  insidePoint : ${JSON.stringify(M)}\n  node        : x:${at.x} y:${at.y} w:${at.width} h:${at.height}`);const jt=at.x,Ve=at.y,gt=Math.abs(jt-M.x),Lt=at.width/2;let Ft=M.x<Dt.x?Lt-gt:Lt+gt;const Qe=at.height/2,ta=Math.abs(Dt.y-M.y),Gr=Math.abs(Dt.x-M.x);if(Math.abs(Ve-Dt.y)*Lt>Math.abs(jt-Dt.x)*Qe){let na=M.y<Dt.y?Dt.y-Qe-Ve:Ve-Qe-Dt.y;Ft=Gr*na/ta;const La={x:M.x<Dt.x?M.x+Ft:M.x-Gr+Ft,y:M.y<Dt.y?M.y+ta-na:M.y-ta+na};return 0===Ft&&(La.x=Dt.x,La.y=Dt.y),0===Gr&&(La.x=Dt.x),0===ta&&(La.y=Dt.y),A.Rm.debug(`abc89 topp/bott calc, Q ${ta}, q ${na}, R ${Gr}, r ${Ft}`,La),La}{Ft=M.x<Dt.x?Dt.x-Lt-jt:jt-Lt-Dt.x;let na=ta*Ft/Gr,La=M.x<Dt.x?M.x+Gr-Ft:M.x-Gr+Ft,da=M.y<Dt.y?M.y+na:M.y-na;return A.Rm.debug(`sides calc abc89, Q ${ta}, q ${na}, R ${Gr}, r ${Ft}`,{_x:La,_y:da}),0===Ft&&(La=Dt.x,da=Dt.y),0===Gr&&(La=Dt.x),0===ta&&(da=Dt.y),{x:La,y:da}}},"intersection"),te=(0,A.K2)((at,Dt)=>{A.Rm.debug("abc88 cutPathAtIntersect",at,Dt);let M=[],jt=at[0],Ve=!1;return at.forEach(gt=>{if(qr(Dt,gt)||Ve)jt=gt,Ve||M.push(gt);else{const Lt=nr(Dt,jt,gt);let Ft=!1;M.forEach(Qe=>{Ft=Ft||Qe.x===Lt.x&&Qe.y===Lt.y}),M.some(Qe=>Qe.x===Lt.x&&Qe.y===Lt.y)||M.push(Lt),Ve=!0}}),M},"cutPathAtIntersect"),ne=(0,A.K2)(function(at,Dt,M,jt,Ve,gt,Lt){let Ft=M.points;A.Rm.debug("abc88 InsertEdge: edge=",M,"e=",Dt);let Qe=!1;const ta=gt.node(Dt.v);var Gr=gt.node(Dt.w);Gr?.intersect&&ta?.intersect&&(Ft=Ft.slice(1,M.points.length-1),Ft.unshift(ta.intersect(Ft[0])),Ft.push(Gr.intersect(Ft[Ft.length-1]))),M.toCluster&&(A.Rm.debug("to cluster abc88",jt[M.toCluster]),Ft=te(M.points,jt[M.toCluster].node),Qe=!0),M.fromCluster&&(A.Rm.debug("from cluster abc88",jt[M.fromCluster]),Ft=te(Ft.reverse(),jt[M.fromCluster].node).reverse(),Qe=!0);const na=Ft.filter(Na=>!Number.isNaN(Na.y));let La=Ye.qrM;M.curve&&("graph"===Ve||"flowchart"===Ve)&&(La=M.curve);const{x:da,y:wa}=(0,L.RI)(M),Xa=(0,Ye.n8j)().x(da).y(wa).curve(La);let Ya;switch(M.thickness){case"normal":Ya="edge-thickness-normal";break;case"thick":case"invisible":Ya="edge-thickness-thick";break;default:Ya=""}switch(M.pattern){case"solid":Ya+=" edge-pattern-solid";break;case"dotted":Ya+=" edge-pattern-dotted";break;case"dashed":Ya+=" edge-pattern-dashed"}const yi=at.append("path").attr("d",Xa(na)).attr("id",M.id).attr("class"," "+Ya+(M.classes?" "+M.classes:"")).attr("style",M.style);let Ei="";((0,q.D7)().flowchart.arrowMarkerAbsolute||(0,q.D7)().state.arrowMarkerAbsolute)&&(Ei=(0,q.ID)(!0)),me(yi,M,Ei,Lt,Ve);let mi={};return Qe&&(mi.updatedPath=Ft),mi.originalPath=M.points,mi},"insertEdge"),Le=(0,A.K2)(at=>{const Dt=new Set;for(const M of at)switch(M){case"x":Dt.add("right"),Dt.add("left");break;case"y":Dt.add("up"),Dt.add("down");break;default:Dt.add(M)}return Dt},"expandAndDeduplicateDirections"),tr=(0,A.K2)((at,Dt,M)=>{const jt=Le(at),gt=Dt.height+2*M.padding,Lt=gt/2,Ft=Dt.width+2*Lt+M.padding,Qe=M.padding/2;return jt.has("right")&&jt.has("left")&&jt.has("up")&&jt.has("down")?[{x:0,y:0},{x:Lt,y:0},{x:Ft/2,y:2*Qe},{x:Ft-Lt,y:0},{x:Ft,y:0},{x:Ft,y:-gt/3},{x:Ft+2*Qe,y:-gt/2},{x:Ft,y:-2*gt/3},{x:Ft,y:-gt},{x:Ft-Lt,y:-gt},{x:Ft/2,y:-gt-2*Qe},{x:Lt,y:-gt},{x:0,y:-gt},{x:0,y:-2*gt/3},{x:-2*Qe,y:-gt/2},{x:0,y:-gt/3}]:jt.has("right")&&jt.has("left")&&jt.has("up")?[{x:Lt,y:0},{x:Ft-Lt,y:0},{x:Ft,y:-gt/2},{x:Ft-Lt,y:-gt},{x:Lt,y:-gt},{x:0,y:-gt/2}]:jt.has("right")&&jt.has("left")&&jt.has("down")?[{x:0,y:0},{x:Lt,y:-gt},{x:Ft-Lt,y:-gt},{x:Ft,y:0}]:jt.has("right")&&jt.has("up")&&jt.has("down")?[{x:0,y:0},{x:Ft,y:-Lt},{x:Ft,y:-gt+Lt},{x:0,y:-gt}]:jt.has("left")&&jt.has("up")&&jt.has("down")?[{x:Ft,y:0},{x:0,y:-Lt},{x:0,y:-gt+Lt},{x:Ft,y:-gt}]:jt.has("right")&&jt.has("left")?[{x:Lt,y:0},{x:Lt,y:-Qe},{x:Ft-Lt,y:-Qe},{x:Ft-Lt,y:0},{x:Ft,y:-gt/2},{x:Ft-Lt,y:-gt},{x:Ft-Lt,y:-gt+Qe},{x:Lt,y:-gt+Qe},{x:Lt,y:-gt},{x:0,y:-gt/2}]:jt.has("up")&&jt.has("down")?[{x:Ft/2,y:0},{x:0,y:-Qe},{x:Lt,y:-Qe},{x:Lt,y:-gt+Qe},{x:0,y:-gt+Qe},{x:Ft/2,y:-gt},{x:Ft,y:-gt+Qe},{x:Ft-Lt,y:-gt+Qe},{x:Ft-Lt,y:-Qe},{x:Ft,y:-Qe}]:jt.has("right")&&jt.has("up")?[{x:0,y:0},{x:Ft,y:-Lt},{x:0,y:-gt}]:jt.has("right")&&jt.has("down")?[{x:0,y:0},{x:Ft,y:0},{x:0,y:-gt}]:jt.has("left")&&jt.has("up")?[{x:Ft,y:0},{x:0,y:-Lt},{x:Ft,y:-gt}]:jt.has("left")&&jt.has("down")?[{x:Ft,y:0},{x:0,y:0},{x:Ft,y:-gt}]:jt.has("right")?[{x:Lt,y:-Qe},{x:Lt,y:-Qe},{x:Ft-Lt,y:-Qe},{x:Ft-Lt,y:0},{x:Ft,y:-gt/2},{x:Ft-Lt,y:-gt},{x:Ft-Lt,y:-gt+Qe},{x:Lt,y:-gt+Qe},{x:Lt,y:-gt+Qe}]:jt.has("left")?[{x:Lt,y:0},{x:Lt,y:-Qe},{x:Ft-Lt,y:-Qe},{x:Ft-Lt,y:-gt+Qe},{x:Lt,y:-gt+Qe},{x:Lt,y:-gt},{x:0,y:-gt/2}]:jt.has("up")?[{x:Lt,y:-Qe},{x:Lt,y:-gt+Qe},{x:0,y:-gt+Qe},{x:Ft/2,y:-gt},{x:Ft,y:-gt+Qe},{x:Ft-Lt,y:-gt+Qe},{x:Ft-Lt,y:-Qe}]:jt.has("down")?[{x:Ft/2,y:0},{x:0,y:-Qe},{x:Lt,y:-Qe},{x:Lt,y:-gt+Qe},{x:Ft-Lt,y:-gt+Qe},{x:Ft-Lt,y:-Qe},{x:Ft,y:-Qe}]:[{x:0,y:0}]},"getArrowPoints");function g(at,Dt){return at.intersect(Dt)}(0,A.K2)(g,"intersectNode");var y=g;function E(at,Dt,M,jt){var Ve=at.x,gt=at.y,Lt=Ve-jt.x,Ft=gt-jt.y,Qe=Math.sqrt(Dt*Dt*Ft*Ft+M*M*Lt*Lt),ta=Math.abs(Dt*M*Lt/Qe);jt.x<Ve&&(ta=-ta);var Gr=Math.abs(Dt*M*Ft/Qe);return jt.y<gt&&(Gr=-Gr),{x:Ve+ta,y:gt+Gr}}(0,A.K2)(E,"intersectEllipse");var P=E;function b(at,Dt,M){return P(at,Dt,Dt,M)}(0,A.K2)(b,"intersectCircle");var z=b;function p(at,Dt,M,jt){var Ve,gt,Lt,Ft,Qe,ta,Gr,na,La,da,wa,Xa,Ya;if(da=(Ve=Dt.y-at.y)*jt.x+(Lt=at.x-Dt.x)*jt.y+(Qe=Dt.x*at.y-at.x*Dt.y),!(0!==(La=Ve*M.x+Lt*M.y+Qe)&&0!==da&&x(La,da)||(gt=jt.y-M.y,Ft=M.x-jt.x,ta=jt.x*M.y-M.x*jt.y,Gr=gt*at.x+Ft*at.y+ta,na=gt*Dt.x+Ft*Dt.y+ta,0!==Gr&&0!==na&&x(Gr,na)||(wa=Ve*Ft-gt*Lt,0===wa))))return Xa=Math.abs(wa/2),{x:(Ya=Lt*ta-Ft*Qe)<0?(Ya-Xa)/wa:(Ya+Xa)/wa,y:(Ya=gt*Qe-Ve*ta)<0?(Ya-Xa)/wa:(Ya+Xa)/wa}}function x(at,Dt){return at*Dt>0}(0,A.K2)(p,"intersectLine"),(0,A.K2)(x,"sameSign");var C=p,w=$;function $(at,Dt,M){var jt=at.x,Ve=at.y,gt=[],Lt=Number.POSITIVE_INFINITY,Ft=Number.POSITIVE_INFINITY;"function"==typeof Dt.forEach?Dt.forEach(function(wa){Lt=Math.min(Lt,wa.x),Ft=Math.min(Ft,wa.y)}):(Lt=Math.min(Lt,Dt.x),Ft=Math.min(Ft,Dt.y));for(var Qe=jt-at.width/2-Lt,ta=Ve-at.height/2-Ft,Gr=0;Gr<Dt.length;Gr++){var na=Dt[Gr],La=Dt[Gr<Dt.length-1?Gr+1:0],da=C(at,M,{x:Qe+na.x,y:ta+na.y},{x:Qe+La.x,y:ta+La.y});da&&gt.push(da)}return gt.length?(gt.length>1&&gt.sort(function(wa,Xa){var Ya=wa.x-M.x,yi=wa.y-M.y,Ei=Math.sqrt(Ya*Ya+yi*yi),mi=Xa.x-M.x,Na=Xa.y-M.y,Or=Math.sqrt(mi*mi+Na*Na);return Ei<Or?-1:Ei===Or?0:1}),gt[0]):at}(0,A.K2)($,"intersectPolygon");var Ut={node:y,circle:z,ellipse:P,polygon:w,rect:(0,A.K2)((at,Dt)=>{var Qe,ta,M=at.x,jt=at.y,Ve=Dt.x-M,gt=Dt.y-jt,Lt=at.width/2,Ft=at.height/2;return Math.abs(gt)*Lt>Math.abs(Ve)*Ft?(gt<0&&(Ft=-Ft),Qe=0===gt?0:Ft*Ve/gt,ta=Ft):(Ve<0&&(Lt=-Lt),Qe=Lt,ta=0===Ve?0:Lt*gt/Ve),{x:M+Qe,y:jt+ta}},"intersectRect")},Ht=(0,A.K2)(function(){var at=(0,lt.A)(function*(Dt,M,jt,Ve){const gt=(0,q.D7)();let Lt;const Ft=M.useHtmlLabels||(0,q._3)(gt.flowchart.htmlLabels);Lt=jt||"node default";const Qe=Dt.insert("g").attr("class",Lt).attr("id",M.domId||M.id),ta=Qe.insert("g").attr("class","label").attr("style",M.labelStyle);let Gr;Gr=void 0===M.labelText?"":"string"==typeof M.labelText?M.labelText:M.labelText[0];const na=ta.node();let La;La="markdown"===M.labelType?(0,Rt.GZ)(ta,(0,q.jZ)((0,dt.Sm)(Gr),gt),{useHtmlLabels:Ft,width:M.width||gt.flowchart.wrappingWidth,classes:"markdown-node-label"},gt):na.appendChild(yield ir((0,q.jZ)((0,dt.Sm)(Gr),gt),M.labelStyle,!1,Ve));let da=La.getBBox();const wa=M.padding/2;if((0,q._3)(gt.flowchart.htmlLabels)){const Xa=La.children[0],Ya=(0,Ye.Ltv)(La),yi=Xa.getElementsByTagName("img");if(yi){const Ei=""===Gr.replace(/<img[^>]*>/g,"").trim();yield Promise.all([...yi].map(mi=>new Promise(Na=>{function Or(){if(mi.style.display="flex",mi.style.flexDirection="column",Ei){const ma=gt.fontSize?gt.fontSize:window.getComputedStyle(document.body).fontSize,ni=5*parseInt(ma,10)+"px";mi.style.minWidth=ni,mi.style.maxWidth=ni}else mi.style.width="100%";Na(mi)}(0,A.K2)(Or,"setupImage"),setTimeout(()=>{mi.complete&&Or()}),mi.addEventListener("error",Or),mi.addEventListener("load",Or)})))}da=Xa.getBoundingClientRect(),Ya.attr("width",da.width),Ya.attr("height",da.height)}return ta.attr("transform",Ft?"translate("+-da.width/2+", "+-da.height/2+")":"translate(0, "+-da.height/2+")"),M.centerLabel&&ta.attr("transform","translate("+-da.width/2+", "+-da.height/2+")"),ta.insert("rect",":first-child"),{shapeSvg:Qe,bbox:da,halfPadding:wa,label:ta}});return function(Dt,M,jt,Ve){return at.apply(this,arguments)}}(),"labelHelper"),zt=(0,A.K2)((at,Dt)=>{const M=Dt.node().getBBox();at.width=M.width,at.height=M.height},"updateNodeBounds");function ue(at,Dt,M,jt){return at.insert("polygon",":first-child").attr("points",jt.map(function(Ve){return Ve.x+","+Ve.y}).join(" ")).attr("class","label-container").attr("transform","translate("+-Dt/2+","+M/2+")")}(0,A.K2)(ue,"insertPolygonShape");var ze=(0,A.K2)(function(){var at=(0,lt.A)(function*(Dt,M){M.useHtmlLabels||(0,q.D7)().flowchart.htmlLabels||(M.centerLabel=!0);const{shapeSvg:Ve,bbox:gt,halfPadding:Lt}=yield Ht(Dt,M,"node "+M.classes,!0);A.Rm.info("Classes = ",M.classes);const Ft=Ve.insert("rect",":first-child");return Ft.attr("rx",M.rx).attr("ry",M.ry).attr("x",-gt.width/2-Lt).attr("y",-gt.height/2-Lt).attr("width",gt.width+M.padding).attr("height",gt.height+M.padding),zt(M,Ft),M.intersect=function(Qe){return Ut.rect(M,Qe)},Ve});return function(Dt,M){return at.apply(this,arguments)}}(),"note"),Cr=(0,A.K2)(at=>at?" "+at:"","formatClass"),cr=(0,A.K2)((at,Dt)=>`${Dt||"node default"}${Cr(at.classes)} ${Cr(at.class)}`,"getClassesFromNode"),sr=(0,A.K2)(function(){var at=(0,lt.A)(function*(Dt,M){const{shapeSvg:jt,bbox:Ve}=yield Ht(Dt,M,cr(M,void 0),!0),Ft=Ve.width+M.padding+(Ve.height+M.padding),Qe=[{x:Ft/2,y:0},{x:Ft,y:-Ft/2},{x:Ft/2,y:-Ft},{x:0,y:-Ft/2}];A.Rm.info("Question main (Circle)");const ta=ue(jt,Ft,Ft,Qe);return ta.attr("style",M.style),zt(M,ta),M.intersect=function(Gr){return A.Rm.warn("Intersect called"),Ut.polygon(M,Qe,Gr)},jt});return function(Dt,M){return at.apply(this,arguments)}}(),"question"),$e=(0,A.K2)((at,Dt)=>{const M=at.insert("g").attr("class","node default").attr("id",Dt.domId||Dt.id);return M.insert("polygon",":first-child").attr("points",[{x:0,y:14},{x:14,y:0},{x:0,y:-14},{x:-14,y:0}].map(function(Lt){return Lt.x+","+Lt.y}).join(" ")).attr("class","state-start").attr("r",7).attr("width",28).attr("height",28),Dt.width=28,Dt.height=28,Dt.intersect=function(Lt){return Ut.circle(Dt,14,Lt)},M},"choice"),He=(0,A.K2)(function(){var at=(0,lt.A)(function*(Dt,M){const{shapeSvg:jt,bbox:Ve}=yield Ht(Dt,M,cr(M,void 0),!0),Lt=Ve.height+M.padding,Ft=Lt/4,Qe=Ve.width+2*Ft+M.padding,ta=[{x:Ft,y:0},{x:Qe-Ft,y:0},{x:Qe,y:-Lt/2},{x:Qe-Ft,y:-Lt},{x:Ft,y:-Lt},{x:0,y:-Lt/2}],Gr=ue(jt,Qe,Lt,ta);return Gr.attr("style",M.style),zt(M,Gr),M.intersect=function(na){return Ut.polygon(M,ta,na)},jt});return function(Dt,M){return at.apply(this,arguments)}}(),"hexagon"),Pr=(0,A.K2)(function(){var at=(0,lt.A)(function*(Dt,M){const{shapeSvg:jt,bbox:Ve}=yield Ht(Dt,M,void 0,!0),Lt=Ve.height+2*M.padding,Qe=Ve.width+Lt/2*2+M.padding,ta=tr(M.directions,Ve,M),Gr=ue(jt,Qe,Lt,ta);return Gr.attr("style",M.style),zt(M,Gr),M.intersect=function(na){return Ut.polygon(M,ta,na)},jt});return function(Dt,M){return at.apply(this,arguments)}}(),"block_arrow"),wr=(0,A.K2)(function(){var at=(0,lt.A)(function*(Dt,M){const{shapeSvg:jt,bbox:Ve}=yield Ht(Dt,M,cr(M,void 0),!0),gt=Ve.width+M.padding,Lt=Ve.height+M.padding,Ft=[{x:-Lt/2,y:0},{x:gt,y:0},{x:gt,y:-Lt},{x:-Lt/2,y:-Lt},{x:0,y:-Lt/2}];return ue(jt,gt,Lt,Ft).attr("style",M.style),M.width=gt+Lt,M.height=Lt,M.intersect=function(ta){return Ut.polygon(M,Ft,ta)},jt});return function(Dt,M){return at.apply(this,arguments)}}(),"rect_left_inv_arrow"),Vr=(0,A.K2)(function(){var at=(0,lt.A)(function*(Dt,M){const{shapeSvg:jt,bbox:Ve}=yield Ht(Dt,M,cr(M),!0),gt=Ve.width+M.padding,Lt=Ve.height+M.padding,Ft=[{x:-2*Lt/6,y:0},{x:gt-Lt/6,y:0},{x:gt+2*Lt/6,y:-Lt},{x:Lt/6,y:-Lt}],Qe=ue(jt,gt,Lt,Ft);return Qe.attr("style",M.style),zt(M,Qe),M.intersect=function(ta){return Ut.polygon(M,Ft,ta)},jt});return function(Dt,M){return at.apply(this,arguments)}}(),"lean_right"),xr=(0,A.K2)(function(){var at=(0,lt.A)(function*(Dt,M){const{shapeSvg:jt,bbox:Ve}=yield Ht(Dt,M,cr(M,void 0),!0),gt=Ve.width+M.padding,Lt=Ve.height+M.padding,Ft=[{x:2*Lt/6,y:0},{x:gt+Lt/6,y:0},{x:gt-2*Lt/6,y:-Lt},{x:-Lt/6,y:-Lt}],Qe=ue(jt,gt,Lt,Ft);return Qe.attr("style",M.style),zt(M,Qe),M.intersect=function(ta){return Ut.polygon(M,Ft,ta)},jt});return function(Dt,M){return at.apply(this,arguments)}}(),"lean_left"),Ba=(0,A.K2)(function(){var at=(0,lt.A)(function*(Dt,M){const{shapeSvg:jt,bbox:Ve}=yield Ht(Dt,M,cr(M,void 0),!0),gt=Ve.width+M.padding,Lt=Ve.height+M.padding,Ft=[{x:-2*Lt/6,y:0},{x:gt+2*Lt/6,y:0},{x:gt-Lt/6,y:-Lt},{x:Lt/6,y:-Lt}],Qe=ue(jt,gt,Lt,Ft);return Qe.attr("style",M.style),zt(M,Qe),M.intersect=function(ta){return Ut.polygon(M,Ft,ta)},jt});return function(Dt,M){return at.apply(this,arguments)}}(),"trapezoid"),Zr=(0,A.K2)(function(){var at=(0,lt.A)(function*(Dt,M){const{shapeSvg:jt,bbox:Ve}=yield Ht(Dt,M,cr(M,void 0),!0),gt=Ve.width+M.padding,Lt=Ve.height+M.padding,Ft=[{x:Lt/6,y:0},{x:gt-Lt/6,y:0},{x:gt+2*Lt/6,y:-Lt},{x:-2*Lt/6,y:-Lt}],Qe=ue(jt,gt,Lt,Ft);return Qe.attr("style",M.style),zt(M,Qe),M.intersect=function(ta){return Ut.polygon(M,Ft,ta)},jt});return function(Dt,M){return at.apply(this,arguments)}}(),"inv_trapezoid"),Oa=(0,A.K2)(function(){var at=(0,lt.A)(function*(Dt,M){const{shapeSvg:jt,bbox:Ve}=yield Ht(Dt,M,cr(M,void 0),!0),gt=Ve.width+M.padding,Lt=Ve.height+M.padding,Ft=[{x:0,y:0},{x:gt+Lt/2,y:0},{x:gt,y:-Lt/2},{x:gt+Lt/2,y:-Lt},{x:0,y:-Lt}],Qe=ue(jt,gt,Lt,Ft);return Qe.attr("style",M.style),zt(M,Qe),M.intersect=function(ta){return Ut.polygon(M,Ft,ta)},jt});return function(Dt,M){return at.apply(this,arguments)}}(),"rect_right_inv_arrow"),Qr=(0,A.K2)(function(){var at=(0,lt.A)(function*(Dt,M){const{shapeSvg:jt,bbox:Ve}=yield Ht(Dt,M,cr(M,void 0),!0),gt=Ve.width+M.padding,Lt=gt/2,Ft=Lt/(2.5+gt/50),Qe=Ve.height+Ft+M.padding,ta="M 0,"+Ft+" a "+Lt+","+Ft+" 0,0,0 "+gt+" 0 a "+Lt+","+Ft+" 0,0,0 "+-gt+" 0 l 0,"+Qe+" a "+Lt+","+Ft+" 0,0,0 "+gt+" 0 l 0,"+-Qe,Gr=jt.attr("label-offset-y",Ft).insert("path",":first-child").attr("style",M.style).attr("d",ta).attr("transform","translate("+-gt/2+","+-(Qe/2+Ft)+")");return zt(M,Gr),M.intersect=function(na){const La=Ut.rect(M,na),da=La.x-M.x;if(0!=Lt&&(Math.abs(da)<M.width/2||Math.abs(da)==M.width/2&&Math.abs(La.y-M.y)>M.height/2-Ft)){let wa=Ft*Ft*(1-da*da/(Lt*Lt));0!=wa&&(wa=Math.sqrt(wa)),wa=Ft-wa,na.y-M.y>0&&(wa=-wa),La.y+=wa}return La},jt});return function(Dt,M){return at.apply(this,arguments)}}(),"cylinder"),ra=(0,A.K2)(function(){var at=(0,lt.A)(function*(Dt,M){const{shapeSvg:jt,bbox:Ve,halfPadding:gt}=yield Ht(Dt,M,"node "+M.classes+" "+M.class,!0),Lt=jt.insert("rect",":first-child"),Ft=M.positioned?M.width:Ve.width+M.padding,Qe=M.positioned?M.height:Ve.height+M.padding,ta=M.positioned?-Ft/2:-Ve.width/2-gt,Gr=M.positioned?-Qe/2:-Ve.height/2-gt;if(Lt.attr("class","basic label-container").attr("style",M.style).attr("rx",M.rx).attr("ry",M.ry).attr("x",ta).attr("y",Gr).attr("width",Ft).attr("height",Qe),M.props){const na=new Set(Object.keys(M.props));M.props.borders&&(Tr(Lt,M.props.borders,Ft,Qe),na.delete("borders")),na.forEach(La=>{A.Rm.warn(`Unknown node property ${La}`)})}return zt(M,Lt),M.intersect=function(na){return Ut.rect(M,na)},jt});return function(Dt,M){return at.apply(this,arguments)}}(),"rect"),Xr=(0,A.K2)(function(){var at=(0,lt.A)(function*(Dt,M){const{shapeSvg:jt,bbox:Ve,halfPadding:gt}=yield Ht(Dt,M,"node "+M.classes,!0),Lt=jt.insert("rect",":first-child"),Ft=M.positioned?M.width:Ve.width+M.padding,Qe=M.positioned?M.height:Ve.height+M.padding,ta=M.positioned?-Ft/2:-Ve.width/2-gt,Gr=M.positioned?-Qe/2:-Ve.height/2-gt;if(Lt.attr("class","basic cluster composite label-container").attr("style",M.style).attr("rx",M.rx).attr("ry",M.ry).attr("x",ta).attr("y",Gr).attr("width",Ft).attr("height",Qe),M.props){const na=new Set(Object.keys(M.props));M.props.borders&&(Tr(Lt,M.props.borders,Ft,Qe),na.delete("borders")),na.forEach(La=>{A.Rm.warn(`Unknown node property ${La}`)})}return zt(M,Lt),M.intersect=function(na){return Ut.rect(M,na)},jt});return function(Dt,M){return at.apply(this,arguments)}}(),"composite"),Rr=(0,A.K2)(function(){var at=(0,lt.A)(function*(Dt,M){const{shapeSvg:jt}=yield Ht(Dt,M,"label",!0);A.Rm.trace("Classes = ",M.class);const Ve=jt.insert("rect",":first-child");if(Ve.attr("width",0).attr("height",0),jt.attr("class","label edgeLabel"),M.props){const Ft=new Set(Object.keys(M.props));M.props.borders&&(Tr(Ve,M.props.borders,0,0),Ft.delete("borders")),Ft.forEach(Qe=>{A.Rm.warn(`Unknown node property ${Qe}`)})}return zt(M,Ve),M.intersect=function(Ft){return Ut.rect(M,Ft)},jt});return function(Dt,M){return at.apply(this,arguments)}}(),"labelRect");function Tr(at,Dt,M,jt){const Ve=[],gt=(0,A.K2)(Ft=>{Ve.push(Ft,0)},"addBorder"),Lt=(0,A.K2)(Ft=>{Ve.push(0,Ft)},"skipBorder");Dt.includes("t")?(A.Rm.debug("add top border"),gt(M)):Lt(M),Dt.includes("r")?(A.Rm.debug("add right border"),gt(jt)):Lt(jt),Dt.includes("b")?(A.Rm.debug("add bottom border"),gt(M)):Lt(M),Dt.includes("l")?(A.Rm.debug("add left border"),gt(jt)):Lt(jt),at.attr("stroke-dasharray",Ve.join(" "))}(0,A.K2)(Tr,"applyNodePropertyBorders");var N=(0,A.K2)(function(){var at=(0,lt.A)(function*(Dt,M){let jt;jt=M.classes?"node "+M.classes:"node default";const Ve=Dt.insert("g").attr("class",jt).attr("id",M.domId||M.id),gt=Ve.insert("rect",":first-child"),Lt=Ve.insert("line"),Ft=Ve.insert("g").attr("class","label"),Qe=M.labelText.flat?M.labelText.flat():M.labelText;let ta="";ta="object"==typeof Qe?Qe[0]:Qe,A.Rm.info("Label text abc79",ta,Qe,"object"==typeof Qe);const Gr=Ft.node().appendChild(yield ir(ta,M.labelStyle,!0,!0));let na={width:0,height:0};if((0,q._3)((0,q.D7)().flowchart.htmlLabels)){const Ya=Gr.children[0],yi=(0,Ye.Ltv)(Gr);na=Ya.getBoundingClientRect(),yi.attr("width",na.width),yi.attr("height",na.height)}A.Rm.info("Text 2",Qe);const La=Qe.slice(1,Qe.length);let da=Gr.getBBox();const wa=Ft.node().appendChild(yield ir(La.join?La.join("<br/>"):La,M.labelStyle,!0,!0));if((0,q._3)((0,q.D7)().flowchart.htmlLabels)){const Ya=wa.children[0],yi=(0,Ye.Ltv)(wa);na=Ya.getBoundingClientRect(),yi.attr("width",na.width),yi.attr("height",na.height)}const Xa=M.padding/2;return(0,Ye.Ltv)(wa).attr("transform","translate( "+(na.width>da.width?0:(da.width-na.width)/2)+", "+(da.height+Xa+5)+")"),(0,Ye.Ltv)(Gr).attr("transform","translate( "+(na.width<da.width?0:-(da.width-na.width)/2)+", 0)"),na=Ft.node().getBBox(),Ft.attr("transform","translate("+-na.width/2+", "+(-na.height/2-Xa+3)+")"),gt.attr("class","outer title-state").attr("x",-na.width/2-Xa).attr("y",-na.height/2-Xa).attr("width",na.width+M.padding).attr("height",na.height+M.padding),Lt.attr("class","divider").attr("x1",-na.width/2-Xa).attr("x2",na.width/2+Xa).attr("y1",-na.height/2-Xa+da.height+Xa).attr("y2",-na.height/2-Xa+da.height+Xa),zt(M,gt),M.intersect=function(Ya){return Ut.rect(M,Ya)},Ve});return function(Dt,M){return at.apply(this,arguments)}}(),"rectWithTitle"),Vt=(0,A.K2)(function(){var at=(0,lt.A)(function*(Dt,M){const{shapeSvg:jt,bbox:Ve}=yield Ht(Dt,M,cr(M,void 0),!0),gt=Ve.height+M.padding,Lt=Ve.width+gt/4+M.padding,Ft=jt.insert("rect",":first-child").attr("style",M.style).attr("rx",gt/2).attr("ry",gt/2).attr("x",-Lt/2).attr("y",-gt/2).attr("width",Lt).attr("height",gt);return zt(M,Ft),M.intersect=function(Qe){return Ut.rect(M,Qe)},jt});return function(Dt,M){return at.apply(this,arguments)}}(),"stadium"),Ke=(0,A.K2)(function(){var at=(0,lt.A)(function*(Dt,M){const{shapeSvg:jt,bbox:Ve,halfPadding:gt}=yield Ht(Dt,M,cr(M,void 0),!0),Lt=jt.insert("circle",":first-child");return Lt.attr("style",M.style).attr("rx",M.rx).attr("ry",M.ry).attr("r",Ve.width/2+gt).attr("width",Ve.width+M.padding).attr("height",Ve.height+M.padding),A.Rm.info("Circle main"),zt(M,Lt),M.intersect=function(Ft){return A.Rm.info("Circle intersect",M,Ve.width/2+gt,Ft),Ut.circle(M,Ve.width/2+gt,Ft)},jt});return function(Dt,M){return at.apply(this,arguments)}}(),"circle"),rr=(0,A.K2)(function(){var at=(0,lt.A)(function*(Dt,M){const{shapeSvg:jt,bbox:Ve,halfPadding:gt}=yield Ht(Dt,M,cr(M,void 0),!0),Ft=jt.insert("g",":first-child"),Qe=Ft.insert("circle"),ta=Ft.insert("circle");return Ft.attr("class",M.class),Qe.attr("style",M.style).attr("rx",M.rx).attr("ry",M.ry).attr("r",Ve.width/2+gt+5).attr("width",Ve.width+M.padding+10).attr("height",Ve.height+M.padding+10),ta.attr("style",M.style).attr("rx",M.rx).attr("ry",M.ry).attr("r",Ve.width/2+gt).attr("width",Ve.width+M.padding).attr("height",Ve.height+M.padding),A.Rm.info("DoubleCircle main"),zt(M,Qe),M.intersect=function(Gr){return A.Rm.info("DoubleCircle intersect",M,Ve.width/2+gt+5,Gr),Ut.circle(M,Ve.width/2+gt+5,Gr)},jt});return function(Dt,M){return at.apply(this,arguments)}}(),"doublecircle"),ia=(0,A.K2)(function(){var at=(0,lt.A)(function*(Dt,M){const{shapeSvg:jt,bbox:Ve}=yield Ht(Dt,M,cr(M,void 0),!0),gt=Ve.width+M.padding,Lt=Ve.height+M.padding,Ft=[{x:0,y:0},{x:gt,y:0},{x:gt,y:-Lt},{x:0,y:-Lt},{x:0,y:0},{x:-8,y:0},{x:gt+8,y:0},{x:gt+8,y:-Lt},{x:-8,y:-Lt},{x:-8,y:0}],Qe=ue(jt,gt,Lt,Ft);return Qe.attr("style",M.style),zt(M,Qe),M.intersect=function(ta){return Ut.polygon(M,Ft,ta)},jt});return function(Dt,M){return at.apply(this,arguments)}}(),"subroutine"),hr=(0,A.K2)((at,Dt)=>{const M=at.insert("g").attr("class","node default").attr("id",Dt.domId||Dt.id),jt=M.insert("circle",":first-child");return jt.attr("class","state-start").attr("r",7).attr("width",14).attr("height",14),zt(Dt,jt),Dt.intersect=function(Ve){return Ut.circle(Dt,7,Ve)},M},"start"),ga=(0,A.K2)((at,Dt,M)=>{const jt=at.insert("g").attr("class","node default").attr("id",Dt.domId||Dt.id);let Ve=70,gt=10;"LR"===M&&(Ve=10,gt=70);const Lt=jt.append("rect").attr("x",-1*Ve/2).attr("y",-1*gt/2).attr("width",Ve).attr("height",gt).attr("class","fork-join");return zt(Dt,Lt),Dt.height=Dt.height+Dt.padding/2,Dt.width=Dt.width+Dt.padding/2,Dt.intersect=function(Ft){return Ut.rect(Dt,Ft)},jt},"forkJoin"),Ma={rhombus:sr,composite:Xr,question:sr,rect:ra,labelRect:Rr,rectWithTitle:N,choice:$e,circle:Ke,doublecircle:rr,stadium:Vt,hexagon:He,block_arrow:Pr,rect_left_inv_arrow:wr,lean_right:Vr,lean_left:xr,trapezoid:Ba,inv_trapezoid:Zr,rect_right_inv_arrow:Oa,cylinder:Qr,start:hr,end:(0,A.K2)((at,Dt)=>{const M=at.insert("g").attr("class","node default").attr("id",Dt.domId||Dt.id),jt=M.insert("circle",":first-child"),Ve=M.insert("circle",":first-child");return Ve.attr("class","state-start").attr("r",7).attr("width",14).attr("height",14),jt.attr("class","state-end").attr("r",5).attr("width",10).attr("height",10),zt(Dt,Ve),Dt.intersect=function(gt){return Ut.circle(Dt,7,gt)},M},"end"),note:ze,subroutine:ia,fork:ga,join:ga,class_box:(0,A.K2)(function(){var at=(0,lt.A)(function*(Dt,M){const jt=M.padding/2;let Lt;Lt=M.classes?"node "+M.classes:"node default";const Ft=Dt.insert("g").attr("class",Lt).attr("id",M.domId||M.id),Qe=Ft.insert("rect",":first-child"),ta=Ft.insert("line"),Gr=Ft.insert("line");let na=0,La=4;const da=Ft.insert("g").attr("class","label");let wa=0;const Xa=M.classData.annotations?.[0],Ya=M.classData.annotations[0]?"\xab"+M.classData.annotations[0]+"\xbb":"",yi=da.node().appendChild(yield ir(Ya,M.labelStyle,!0,!0));let Ei=yi.getBBox();if((0,q._3)((0,q.D7)().flowchart.htmlLabels)){const Fr=yi.children[0],Pi=(0,Ye.Ltv)(yi);Ei=Fr.getBoundingClientRect(),Pi.attr("width",Ei.width),Pi.attr("height",Ei.height)}M.classData.annotations[0]&&(La+=Ei.height+4,na+=Ei.width);let mi=M.classData.label;void 0!==M.classData.type&&""!==M.classData.type&&((0,q.D7)().flowchart.htmlLabels?mi+="&lt;"+M.classData.type+"&gt;":mi+="<"+M.classData.type+">");const Na=da.node().appendChild(yield ir(mi,M.labelStyle,!0,!0));(0,Ye.Ltv)(Na).attr("class","classTitle");let Or=Na.getBBox();if((0,q._3)((0,q.D7)().flowchart.htmlLabels)){const Fr=Na.children[0],Pi=(0,Ye.Ltv)(Na);Or=Fr.getBoundingClientRect(),Pi.attr("width",Or.width),Pi.attr("height",Or.height)}La+=Or.height+4,Or.width>na&&(na=Or.width);const ma=[];M.classData.members.forEach(function(){var Fr=(0,lt.A)(function*(Pi){const ua=Pi.getDisplayDetails();let ki=ua.displayText;(0,q.D7)().flowchart.htmlLabels&&(ki=ki.replace(/</g,"&lt;").replace(/>/g,"&gt;"));const Ri=da.node().appendChild(yield ir(ki,ua.cssStyle?ua.cssStyle:M.labelStyle,!0,!0));let Wi=Ri.getBBox();if((0,q._3)((0,q.D7)().flowchart.htmlLabels)){const ln=Ri.children[0],Ji=(0,Ye.Ltv)(Ri);Wi=ln.getBoundingClientRect(),Ji.attr("width",Wi.width),Ji.attr("height",Wi.height)}Wi.width>na&&(na=Wi.width),La+=Wi.height+4,ma.push(Ri)});return function(Pi){return Fr.apply(this,arguments)}}()),La+=8;const Ha=[];if(M.classData.methods.forEach(function(){var Fr=(0,lt.A)(function*(Pi){const ua=Pi.getDisplayDetails();let ki=ua.displayText;(0,q.D7)().flowchart.htmlLabels&&(ki=ki.replace(/</g,"&lt;").replace(/>/g,"&gt;"));const Ri=da.node().appendChild(yield ir(ki,ua.cssStyle?ua.cssStyle:M.labelStyle,!0,!0));let Wi=Ri.getBBox();if((0,q._3)((0,q.D7)().flowchart.htmlLabels)){const ln=Ri.children[0],Ji=(0,Ye.Ltv)(Ri);Wi=ln.getBoundingClientRect(),Ji.attr("width",Wi.width),Ji.attr("height",Wi.height)}Wi.width>na&&(na=Wi.width),La+=Wi.height+4,Ha.push(Ri)});return function(Pi){return Fr.apply(this,arguments)}}()),La+=8,Xa){let Fr=(na-Ei.width)/2;(0,Ye.Ltv)(yi).attr("transform","translate( "+(-1*na/2+Fr)+", "+-1*La/2+")"),wa=Ei.height+4}let ni=(na-Or.width)/2;return(0,Ye.Ltv)(Na).attr("transform","translate( "+(-1*na/2+ni)+", "+(-1*La/2+wa)+")"),wa+=Or.height+4,ta.attr("class","divider").attr("x1",-na/2-jt).attr("x2",na/2+jt).attr("y1",-La/2-jt+8+wa).attr("y2",-La/2-jt+8+wa),wa+=8,ma.forEach(Fr=>{(0,Ye.Ltv)(Fr).attr("transform","translate( "+-na/2+", "+(-1*La/2+wa+4)+")");const Pi=Fr?.getBBox();wa+=(Pi?.height??0)+4}),wa+=8,Gr.attr("class","divider").attr("x1",-na/2-jt).attr("x2",na/2+jt).attr("y1",-La/2-jt+8+wa).attr("y2",-La/2-jt+8+wa),wa+=8,Ha.forEach(Fr=>{(0,Ye.Ltv)(Fr).attr("transform","translate( "+-na/2+", "+(-1*La/2+wa)+")");const Pi=Fr?.getBBox();wa+=(Pi?.height??0)+4}),Qe.attr("style",M.style).attr("class","outer title-state").attr("x",-na/2-jt).attr("y",-La/2-jt).attr("width",na+M.padding).attr("height",La+M.padding),zt(M,Qe),M.intersect=function(Fr){return Ut.rect(M,Fr)},Ft});return function(Dt,M){return at.apply(this,arguments)}}(),"class_box")},Ra={},Jr=(0,A.K2)(function(){var at=(0,lt.A)(function*(Dt,M,jt){let Ve,gt;if(M.link){let Lt;"sandbox"===(0,q.D7)().securityLevel?Lt="_top":M.linkTarget&&(Lt=M.linkTarget||"_blank"),Ve=Dt.insert("svg:a").attr("xlink:href",M.link).attr("target",Lt),gt=yield Ma[M.shape](Ve,M,jt)}else gt=yield Ma[M.shape](Dt,M,jt),Ve=gt;return M.tooltip&&gt.attr("title",M.tooltip),M.class&&gt.attr("class","node default "+M.class),Ra[M.id]=Ve,M.haveCallback&&Ra[M.id].attr("class",Ra[M.id].attr("class")+" clickable"),Ve});return function(Dt,M,jt){return at.apply(this,arguments)}}(),"insertNode"),ca=(0,A.K2)(at=>{const Dt=Ra[at.id];A.Rm.trace("Transforming node",at.diff,at,"translate("+(at.x-at.width/2-5)+", "+at.width/2+")");const jt=at.diff||0;return Dt.attr("transform",at.clusterNode?"translate("+(at.x+jt-at.width/2)+", "+(at.y-at.height/2-8)+")":"translate("+at.x+", "+at.y+")"),jt},"positionNode");function ha(at,Dt,M=!1){const jt=at;let Ve="default";(jt?.classes?.length||0)>0&&(Ve=(jt?.classes??[]).join(" ")),Ve+=" flowchart-label";let Ft,gt=0,Lt="";switch(jt.type){case"round":gt=5,Lt="rect";break;case"composite":gt=0,Lt="composite",Ft=0;break;case"square":case"group":default:Lt="rect";break;case"diamond":Lt="question";break;case"hexagon":Lt="hexagon";break;case"block_arrow":Lt="block_arrow";break;case"odd":case"rect_left_inv_arrow":Lt="rect_left_inv_arrow";break;case"lean_right":Lt="lean_right";break;case"lean_left":Lt="lean_left";break;case"trapezoid":Lt="trapezoid";break;case"inv_trapezoid":Lt="inv_trapezoid";break;case"circle":Lt="circle";break;case"ellipse":Lt="ellipse";break;case"stadium":Lt="stadium";break;case"subroutine":Lt="subroutine";break;case"cylinder":Lt="cylinder";break;case"doublecircle":Lt="doublecircle"}const Qe=(0,dt.sM)(jt?.styles??[]),Gr=jt.size??{width:0,height:0,x:0,y:0};return{labelStyle:Qe.labelStyle,shape:Lt,labelText:jt.label,rx:gt,ry:gt,class:Ve,style:Qe.style,id:jt.id,directions:jt.directions,width:Gr.width,height:Gr.height,x:Gr.x,y:Gr.y,positioned:M,intersect:void 0,type:jt.type,padding:Ft??(0,q.zj)()?.block?.padding??0}}function Yr(at,Dt,M){return Fa.apply(this,arguments)}function Fa(){return(Fa=(0,lt.A)(function*(at,Dt,M){const jt=ha(Dt,0,!1);if("group"===jt.type)return;const Ve=(0,q.zj)(),gt=yield Jr(at,jt,{config:Ve}),Lt=gt.node().getBBox(),Ft=M.getBlock(jt.id);Ft.size={width:Lt.width,height:Lt.height,x:0,y:0,node:gt},M.setBlock(Ft),gt.remove()})).apply(this,arguments)}function pr(at,Dt,M){return Va.apply(this,arguments)}function Va(){return(Va=(0,lt.A)(function*(at,Dt,M){const jt=ha(Dt,0,!0);if("space"!==M.getBlock(jt.id).type){const gt=(0,q.zj)();yield Jr(at,jt,{config:gt}),Dt.intersect=jt?.intersect,ca(jt)}})).apply(this,arguments)}function lr(at,Dt,M,jt){return qa.apply(this,arguments)}function qa(){return(qa=(0,lt.A)(function*(at,Dt,M,jt){for(const Ve of Dt)yield jt(at,Ve,M),Ve.children&&(yield lr(at,Ve.children,M,jt))})).apply(this,arguments)}function za(at,Dt,M){return ja.apply(this,arguments)}function ja(){return(ja=(0,lt.A)(function*(at,Dt,M){yield lr(at,Dt,M,Yr)})).apply(this,arguments)}function Sa(at,Dt,M){return Ua.apply(this,arguments)}function Ua(){return(Ua=(0,lt.A)(function*(at,Dt,M){yield lr(at,Dt,M,pr)})).apply(this,arguments)}function Ka(at,Dt,M,jt,Ve){return fa.apply(this,arguments)}function fa(){return(fa=(0,lt.A)(function*(at,Dt,M,jt,Ve){const gt=new bt.T({multigraph:!0,compound:!0});gt.setGraph({rankdir:"TB",nodesep:10,ranksep:10,marginx:8,marginy:8});for(const Lt of M)Lt.size&&gt.setNode(Lt.id,{width:Lt.size.width,height:Lt.size.height,intersect:Lt.intersect});for(const Lt of Dt)if(Lt.start&&Lt.end){const Ft=jt.getBlock(Lt.start),Qe=jt.getBlock(Lt.end);if(Ft?.size&&Qe?.size){const ta=Ft.size,Gr=Qe.size,na=[{x:ta.x,y:ta.y},{x:ta.x+(Gr.x-ta.x)/2,y:ta.y+(Gr.y-ta.y)/2},{x:Gr.x,y:Gr.y}];ne(at,{v:Lt.start,w:Lt.end,name:Lt.id},{...Lt,arrowTypeEnd:Lt.arrowTypeEnd,arrowTypeStart:Lt.arrowTypeStart,points:na,classes:"edge-thickness-normal edge-pattern-solid flowchart-link LS-a1 LE-b1"},void 0,"block",gt,Ve),Lt.label&&(yield Xe(at,{...Lt,label:Lt.label,labelStyle:"stroke: #333; stroke-width: 1.5px;fill:none;",arrowTypeEnd:Lt.arrowTypeEnd,arrowTypeStart:Lt.arrowTypeStart,points:na,classes:"edge-thickness-normal edge-pattern-solid flowchart-link LS-a1 LE-b1"}),Ee({...Lt,x:na[1].x,y:na[1].y},{originalPath:na}))}}})).apply(this,arguments)}(0,A.K2)(ha,"getNodeFromBlock"),(0,A.K2)(Yr,"calculateBlockSize"),(0,A.K2)(pr,"insertBlockPositioned"),(0,A.K2)(lr,"performOperations"),(0,A.K2)(za,"calculateBlockSizes"),(0,A.K2)(Sa,"insertBlocks"),(0,A.K2)(Ka,"insertEdges");var di=(0,A.K2)(function(at,Dt){return Dt.db.getClasses()},"getClasses"),Me={parser:j,db:qe,renderer:{draw:(0,A.K2)(function(){var at=(0,lt.A)(function*(Dt,M,jt,Ve){const{securityLevel:gt,block:Lt}=(0,q.zj)(),Ft=Ve.db;let Qe;"sandbox"===gt&&(Qe=(0,Ye.Ltv)("#i"+M));const ta=(0,Ye.Ltv)("sandbox"===gt?Qe.nodes()[0].contentDocument.body:"body"),Gr="sandbox"===gt?ta.select(`[id="${M}"]`):(0,Ye.Ltv)(`[id="${M}"]`);Ce(Gr,["point","circle","cross"],Ve.type,M);const La=Ft.getBlocks(),da=Ft.getBlocksFlat(),wa=Ft.getEdges(),Xa=Gr.insert("g").attr("class","block");yield za(Xa,La,Ft);const Ya=kr(Ft);if(yield Sa(Xa,La,Ft),yield Ka(Xa,wa,da,Ft,M),Ya){const yi=Ya,Ei=Math.max(1,Math.round(yi.width/yi.height*.125)),mi=yi.height+Ei+10,Na=yi.width+10,{useMaxWidth:Or}=Lt;(0,q.a$)(Gr,mi,Na,!!Or),A.Rm.debug("Here Bounds",Ya,yi),Gr.attr("viewBox",`${yi.x-5} ${yi.y-5} ${yi.width+10} ${yi.height+10}`)}});return function(Dt,M,jt,Ve){return at.apply(this,arguments)}}(),"draw"),getClasses:di},styles:St}},28957:(ti,_r,B)=>{"use strict";B.r(_r),B.d(_r,{diagram:()=>Ct});var lt=B(79006),ee=B(32303),L=B(40622),D=B(79687),Rt=function(){var St=(0,ee.K2)(function(Ce,Ot,Jt,fe){for(Jt=Jt||{},fe=Ce.length;fe--;Jt[Ce[fe]]=Ot);return Jt},"o"),R=[6,8,10,11,12,14,16,17,20,21],O=[1,9],et=[1,10],xt=[1,11],it=[1,12],rt=[1,13],Et=[1,16],ut=[1,17],It={trace:(0,ee.K2)(function(){},"trace"),yy:{},symbols_:{error:2,start:3,timeline:4,document:5,EOF:6,line:7,SPACE:8,statement:9,NEWLINE:10,title:11,acc_title:12,acc_title_value:13,acc_descr:14,acc_descr_value:15,acc_descr_multiline_value:16,section:17,period_statement:18,event_statement:19,period:20,event:21,$accept:0,$end:1},terminals_:{2:"error",4:"timeline",6:"EOF",8:"SPACE",10:"NEWLINE",11:"title",12:"acc_title",13:"acc_title_value",14:"acc_descr",15:"acc_descr_value",16:"acc_descr_multiline_value",17:"section",20:"period",21:"event"},productions_:[0,[3,3],[5,0],[5,2],[7,2],[7,1],[7,1],[7,1],[9,1],[9,2],[9,2],[9,1],[9,1],[9,1],[9,1],[18,1],[19,1]],performAction:(0,ee.K2)(function(Ot,Jt,fe,Be,Ze,ye,kr){var ur=ye.length-1;switch(Ze){case 1:return ye[ur-1];case 2:case 6:case 7:this.$=[];break;case 3:ye[ur-1].push(ye[ur]),this.$=ye[ur-1];break;case 4:case 5:this.$=ye[ur];break;case 8:Be.getCommonDb().setDiagramTitle(ye[ur].substr(6)),this.$=ye[ur].substr(6);break;case 9:this.$=ye[ur].trim(),Be.getCommonDb().setAccTitle(this.$);break;case 10:case 11:this.$=ye[ur].trim(),Be.getCommonDb().setAccDescription(this.$);break;case 12:Be.addSection(ye[ur].substr(8)),this.$=ye[ur].substr(8);break;case 15:Be.addTask(ye[ur],0,""),this.$=ye[ur];break;case 16:Be.addEvent(ye[ur].substr(2)),this.$=ye[ur]}},"anonymous"),table:[{3:1,4:[1,2]},{1:[3]},St(R,[2,2],{5:3}),{6:[1,4],7:5,8:[1,6],9:7,10:[1,8],11:O,12:et,14:xt,16:it,17:rt,18:14,19:15,20:Et,21:ut},St(R,[2,7],{1:[2,1]}),St(R,[2,3]),{9:18,11:O,12:et,14:xt,16:it,17:rt,18:14,19:15,20:Et,21:ut},St(R,[2,5]),St(R,[2,6]),St(R,[2,8]),{13:[1,19]},{15:[1,20]},St(R,[2,11]),St(R,[2,12]),St(R,[2,13]),St(R,[2,14]),St(R,[2,15]),St(R,[2,16]),St(R,[2,4]),St(R,[2,9]),St(R,[2,10])],defaultActions:{},parseError:(0,ee.K2)(function(Ot,Jt){if(!Jt.recoverable){var fe=new Error(Ot);throw fe.hash=Jt,fe}this.trace(Ot)},"parseError"),parse:(0,ee.K2)(function(Ot){var Jt=this,fe=[0],Be=[],Ze=[null],ye=[],kr=this.table,ur="",Kt=0,Pe=0,ir=0,ke=ye.slice.call(arguments,1),Te=Object.create(this.lexer),er={yy:{}};for(var Xe in this.yy)Object.prototype.hasOwnProperty.call(this.yy,Xe)&&(er.yy[Xe]=this.yy[Xe]);Te.setInput(Ot,er.yy),er.yy.lexer=Te,er.yy.parser=this,typeof Te.yylloc>"u"&&(Te.yylloc={});var Ir=Te.yylloc;ye.push(Ir);var Ee=Te.options&&Te.options.ranges;function nr(){var C;return"number"!=typeof(C=Be.pop()||Te.lex()||1)&&(C instanceof Array&&(C=(Be=C).pop()),C=Jt.symbols_[C]||C),C}this.parseError="function"==typeof er.yy.parseError?er.yy.parseError:Object.getPrototypeOf(this).parseError,(0,ee.K2)(function qr(C){fe.length=fe.length-2*C,Ze.length=Ze.length-C,ye.length=ye.length-C},"popStack"),(0,ee.K2)(nr,"lex");for(var te,ne,Le,tr,y,P,b,p,E={};;){if(this.defaultActions[Le=fe[fe.length-1]]?tr=this.defaultActions[Le]:((null===te||typeof te>"u")&&(te=nr()),tr=kr[Le]&&kr[Le][te]),typeof tr>"u"||!tr.length||!tr[0]){var x;for(P in p=[],kr[Le])this.terminals_[P]&&P>2&&p.push("'"+this.terminals_[P]+"'");x=Te.showPosition?"Parse error on line "+(Kt+1)+":\n"+Te.showPosition()+"\nExpecting "+p.join(", ")+", got '"+(this.terminals_[te]||te)+"'":"Parse error on line "+(Kt+1)+": Unexpected "+(1==te?"end of input":"'"+(this.terminals_[te]||te)+"'"),this.parseError(x,{text:Te.match,token:this.terminals_[te]||te,line:Te.yylineno,loc:Ir,expected:p})}if(tr[0]instanceof Array&&tr.length>1)throw new Error("Parse Error: multiple actions possible at state: "+Le+", token: "+te);switch(tr[0]){case 1:fe.push(te),Ze.push(Te.yytext),ye.push(Te.yylloc),fe.push(tr[1]),te=null,ne?(te=ne,ne=null):(Pe=Te.yyleng,ur=Te.yytext,Kt=Te.yylineno,Ir=Te.yylloc,ir>0&&ir--);break;case 2:if(E.$=Ze[Ze.length-(b=this.productions_[tr[1]][1])],E._$={first_line:ye[ye.length-(b||1)].first_line,last_line:ye[ye.length-1].last_line,first_column:ye[ye.length-(b||1)].first_column,last_column:ye[ye.length-1].last_column},Ee&&(E._$.range=[ye[ye.length-(b||1)].range[0],ye[ye.length-1].range[1]]),typeof(y=this.performAction.apply(E,[ur,Pe,Kt,er.yy,tr[1],Ze,ye].concat(ke)))<"u")return y;b&&(fe=fe.slice(0,-1*b*2),Ze=Ze.slice(0,-1*b),ye=ye.slice(0,-1*b)),fe.push(this.productions_[tr[1]][0]),Ze.push(E.$),ye.push(E._$),fe.push(kr[fe[fe.length-2]][fe[fe.length-1]]);break;case 3:return!0}}return!0},"parse")};function st(){this.yy={}}return It.lexer=function(){return{EOF:1,parseError:(0,ee.K2)(function(Jt,fe){if(!this.yy.parser)throw new Error(Jt);this.yy.parser.parseError(Jt,fe)},"parseError"),setInput:(0,ee.K2)(function(Ot,Jt){return this.yy=Jt||this.yy||{},this._input=Ot,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},"setInput"),input:(0,ee.K2)(function(){var Ot=this._input[0];return this.yytext+=Ot,this.yyleng++,this.offset++,this.match+=Ot,this.matched+=Ot,Ot.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),Ot},"input"),unput:(0,ee.K2)(function(Ot){var Jt=Ot.length,fe=Ot.split(/(?:\r\n?|\n)/g);this._input=Ot+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-Jt),this.offset-=Jt;var Be=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),fe.length-1&&(this.yylineno-=fe.length-1);var Ze=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:fe?(fe.length===Be.length?this.yylloc.first_column:0)+Be[Be.length-fe.length].length-fe[0].length:this.yylloc.first_column-Jt},this.options.ranges&&(this.yylloc.range=[Ze[0],Ze[0]+this.yyleng-Jt]),this.yyleng=this.yytext.length,this},"unput"),more:(0,ee.K2)(function(){return this._more=!0,this},"more"),reject:(0,ee.K2)(function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},"reject"),less:(0,ee.K2)(function(Ot){this.unput(this.match.slice(Ot))},"less"),pastInput:(0,ee.K2)(function(){var Ot=this.matched.substr(0,this.matched.length-this.match.length);return(Ot.length>20?"...":"")+Ot.substr(-20).replace(/\n/g,"")},"pastInput"),upcomingInput:(0,ee.K2)(function(){var Ot=this.match;return Ot.length<20&&(Ot+=this._input.substr(0,20-Ot.length)),(Ot.substr(0,20)+(Ot.length>20?"...":"")).replace(/\n/g,"")},"upcomingInput"),showPosition:(0,ee.K2)(function(){var Ot=this.pastInput(),Jt=new Array(Ot.length+1).join("-");return Ot+this.upcomingInput()+"\n"+Jt+"^"},"showPosition"),test_match:(0,ee.K2)(function(Ot,Jt){var fe,Be,Ze;if(this.options.backtrack_lexer&&(Ze={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(Ze.yylloc.range=this.yylloc.range.slice(0))),(Be=Ot[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=Be.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:Be?Be[Be.length-1].length-Be[Be.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+Ot[0].length},this.yytext+=Ot[0],this.match+=Ot[0],this.matches=Ot,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(Ot[0].length),this.matched+=Ot[0],fe=this.performAction.call(this,this.yy,this,Jt,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),fe)return fe;if(this._backtrack){for(var ye in Ze)this[ye]=Ze[ye];return!1}return!1},"test_match"),next:(0,ee.K2)(function(){if(this.done)return this.EOF;var Ot,Jt,fe,Be;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var Ze=this._currentRules(),ye=0;ye<Ze.length;ye++)if((fe=this._input.match(this.rules[Ze[ye]]))&&(!Jt||fe[0].length>Jt[0].length)){if(Jt=fe,Be=ye,this.options.backtrack_lexer){if(!1!==(Ot=this.test_match(fe,Ze[ye])))return Ot;if(this._backtrack){Jt=!1;continue}return!1}if(!this.options.flex)break}return Jt?!1!==(Ot=this.test_match(Jt,Ze[Be]))&&Ot:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},"next"),lex:(0,ee.K2)(function(){return this.next()||this.lex()},"lex"),begin:(0,ee.K2)(function(Jt){this.conditionStack.push(Jt)},"begin"),popState:(0,ee.K2)(function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},"popState"),_currentRules:(0,ee.K2)(function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},"_currentRules"),topState:(0,ee.K2)(function(Jt){return(Jt=this.conditionStack.length-1-Math.abs(Jt||0))>=0?this.conditionStack[Jt]:"INITIAL"},"topState"),pushState:(0,ee.K2)(function(Jt){this.begin(Jt)},"pushState"),stateStackSize:(0,ee.K2)(function(){return this.conditionStack.length},"stateStackSize"),options:{"case-insensitive":!0},performAction:(0,ee.K2)(function(Jt,fe,Be,Ze){switch(Be){case 0:case 1:case 3:case 4:break;case 2:return 10;case 5:return 4;case 6:return 11;case 7:return this.begin("acc_title"),12;case 8:return this.popState(),"acc_title_value";case 9:return this.begin("acc_descr"),14;case 10:return this.popState(),"acc_descr_value";case 11:this.begin("acc_descr_multiline");break;case 12:this.popState();break;case 13:return"acc_descr_multiline_value";case 14:return 17;case 15:return 21;case 16:return 20;case 17:return 6;case 18:return"INVALID"}},"anonymous"),rules:[/^(?:%(?!\{)[^\n]*)/i,/^(?:[^\}]%%[^\n]*)/i,/^(?:[\n]+)/i,/^(?:\s+)/i,/^(?:#[^\n]*)/i,/^(?:timeline\b)/i,/^(?:title\s[^\n]+)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:section\s[^:\n]+)/i,/^(?::\s(?:[^:\n]|:(?!\s))+)/i,/^(?:[^#:\n]+)/i,/^(?:$)/i,/^(?:.)/i],conditions:{acc_descr_multiline:{rules:[12,13],inclusive:!1},acc_descr:{rules:[10],inclusive:!1},acc_title:{rules:[8],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,5,6,7,9,11,14,15,16,17,18],inclusive:!0}}}}(),(0,ee.K2)(st,"Parser"),st.prototype=It,It.Parser=st,new st}();Rt.parser=Rt;var dt=Rt,q={};(0,ee.VA)(q,{addEvent:()=>br,addSection:()=>fr,addTask:()=>zr,addTaskOrg:()=>mr,clear:()=>j,default:()=>Lr,getCommonDb:()=>Xt,getSections:()=>Fe,getTasks:()=>vr});var A="",$t=0,yt=[],Ye=[],bt=[],Xt=(0,ee.K2)(()=>lt.Wt,"getCommonDb"),j=(0,ee.K2)(function(){yt.length=0,Ye.length=0,A="",bt.length=0,(0,lt.IU)()},"clear"),fr=(0,ee.K2)(function(St){A=St,yt.push(St)},"addSection"),Fe=(0,ee.K2)(function(){return yt},"getSections"),vr=(0,ee.K2)(function(){let St=Er(),O=0;for(;!St&&O<100;)St=Er(),O++;return Ye.push(...bt),Ye},"getTasks"),zr=(0,ee.K2)(function(St,R,O){const et={id:$t++,section:A,type:A,task:St,score:R||0,events:O?[O]:[]};bt.push(et)},"addTask"),br=(0,ee.K2)(function(St){bt.find(O=>O.id===$t-1).events.push(St)},"addEvent"),mr=(0,ee.K2)(function(St){Ye.push({section:A,type:A,description:St,task:St,classes:[]})},"addTaskOrg"),Er=(0,ee.K2)(function(){const St=(0,ee.K2)(function(O){return bt[O].processed},"compileTask");let R=!0;for(const[O,et]of bt.entries())St(O),R=R&&et.processed;return R},"compileTasks"),Lr={clear:j,getCommonDb:Xt,addSection:fr,getSections:Fe,getTasks:vr,addTask:zr,addTaskOrg:mr,addEvent:br},ge=(0,ee.K2)(function(St,R){const O=St.append("rect");return O.attr("x",R.x),O.attr("y",R.y),O.attr("fill",R.fill),O.attr("stroke",R.stroke),O.attr("width",R.width),O.attr("height",R.height),O.attr("rx",R.rx),O.attr("ry",R.ry),void 0!==R.class&&O.attr("class",R.class),O},"drawRect"),Br=(0,ee.K2)(function(St,R){const et=St.append("circle").attr("cx",R.cx).attr("cy",R.cy).attr("class","face").attr("r",15).attr("stroke-width",2).attr("overflow","visible"),xt=St.append("g");function it(ut){const It=(0,L.JLW)().startAngle(Math.PI/2).endAngle(Math.PI/2*3).innerRadius(7.5).outerRadius(6.8181818181818175);ut.append("path").attr("class","mouth").attr("d",It).attr("transform","translate("+R.cx+","+(R.cy+2)+")")}function rt(ut){const It=(0,L.JLW)().startAngle(3*Math.PI/2).endAngle(Math.PI/2*5).innerRadius(7.5).outerRadius(6.8181818181818175);ut.append("path").attr("class","mouth").attr("d",It).attr("transform","translate("+R.cx+","+(R.cy+7)+")")}function Et(ut){ut.append("line").attr("class","mouth").attr("stroke",2).attr("x1",R.cx-5).attr("y1",R.cy+7).attr("x2",R.cx+5).attr("y2",R.cy+7).attr("class","mouth").attr("stroke-width","1px").attr("stroke","#666")}return xt.append("circle").attr("cx",R.cx-5).attr("cy",R.cy-5).attr("r",1.5).attr("stroke-width",2).attr("fill","#666").attr("stroke","#666"),xt.append("circle").attr("cx",R.cx+5).attr("cy",R.cy-5).attr("r",1.5).attr("stroke-width",2).attr("fill","#666").attr("stroke","#666"),(0,ee.K2)(it,"smile"),(0,ee.K2)(rt,"sad"),(0,ee.K2)(Et,"ambivalent"),R.score>3?it(xt):R.score<3?rt(xt):Et(xt),et},"drawFace"),Ge=(0,ee.K2)(function(St,R){const O=St.append("circle");return O.attr("cx",R.cx),O.attr("cy",R.cy),O.attr("class","actor-"+R.pos),O.attr("fill",R.fill),O.attr("stroke",R.stroke),O.attr("r",R.r),void 0!==O.class&&O.attr("class",O.class),void 0!==R.title&&O.append("title").text(R.title),O},"drawCircle"),W=(0,ee.K2)(function(St,R){const O=R.text.replace(/<br\s*\/?>/gi," "),et=St.append("text");et.attr("x",R.x),et.attr("y",R.y),et.attr("class","legend"),et.style("text-anchor",R.anchor),void 0!==R.class&&et.attr("class",R.class);const xt=et.append("tspan");return xt.attr("x",R.x+2*R.textMargin),xt.text(O),et},"drawText"),ft=(0,ee.K2)(function(St,R){function O(xt,it,rt,Et,ut){return xt+","+it+" "+(xt+rt)+","+it+" "+(xt+rt)+","+(it+Et-ut)+" "+(xt+rt-1.2*ut)+","+(it+Et)+" "+xt+","+(it+Et)}(0,ee.K2)(O,"genPoints");const et=St.append("polygon");et.attr("points",O(R.x,R.y,50,20,7)),et.attr("class","labelBox"),R.y=R.y+R.labelMargin,R.x=R.x+.5*R.labelMargin,W(St,R)},"drawLabel"),Bt=(0,ee.K2)(function(St,R,O){const et=St.append("g"),xt=re();xt.x=R.x,xt.y=R.y,xt.fill=R.fill,xt.width=O.width,xt.height=O.height,xt.class="journey-section section-type-"+R.num,xt.rx=3,xt.ry=3,ge(et,xt),Pt(O)(R.text,et,xt.x,xt.y,xt.width,xt.height,{class:"journey-section section-type-"+R.num},O,R.colour)},"drawSection"),_e=-1,Z=(0,ee.K2)(function(St,R,O){const et=R.x+O.width/2,xt=St.append("g");_e++,xt.append("line").attr("id","task"+_e).attr("x1",et).attr("y1",R.y).attr("x2",et).attr("y2",450).attr("class","task-line").attr("stroke-width","1px").attr("stroke-dasharray","4 2").attr("stroke","#666"),Br(xt,{cx:et,cy:300+30*(5-R.score),score:R.score});const rt=re();rt.x=R.x,rt.y=R.y,rt.fill=R.fill,rt.width=O.width,rt.height=O.height,rt.class="task task-type-"+R.num,rt.rx=3,rt.ry=3,ge(xt,rt),Pt(O)(R.task,xt,rt.x,rt.y,rt.width,rt.height,{class:"task"},O,R.colour)},"drawTask"),ae=(0,ee.K2)(function(St,R){ge(St,{x:R.startx,y:R.starty,width:R.stopx-R.startx,height:R.stopy-R.starty,fill:R.fill,class:"rect"}).lower()},"drawBackgroundRect"),S=(0,ee.K2)(function(){return{x:0,y:0,fill:void 0,"text-anchor":"start",width:100,height:100,textMargin:0,rx:0,ry:0}},"getTextObj"),re=(0,ee.K2)(function(){return{x:0,y:0,width:100,anchor:"start",height:100,rx:0,ry:0}},"getNoteRect"),Pt=function(){function St(xt,it,rt,Et,ut,It,G,st){et(it.append("text").attr("x",rt+ut/2).attr("y",Et+It/2+5).style("font-color",st).style("text-anchor","middle").text(xt),G)}function R(xt,it,rt,Et,ut,It,G,st,Ce){const{taskFontSize:Ot,taskFontFamily:Jt}=st,fe=xt.split(/<br\s*\/?>/gi);for(let Be=0;Be<fe.length;Be++){const Ze=Be*Ot-Ot*(fe.length-1)/2,ye=it.append("text").attr("x",rt+ut/2).attr("y",Et).attr("fill",Ce).style("text-anchor","middle").style("font-size",Ot).style("font-family",Jt);ye.append("tspan").attr("x",rt+ut/2).attr("dy",Ze).text(fe[Be]),ye.attr("y",Et+It/2).attr("dominant-baseline","central").attr("alignment-baseline","central"),et(ye,G)}}function O(xt,it,rt,Et,ut,It,G,st){const Ce=it.append("switch"),Jt=Ce.append("foreignObject").attr("x",rt).attr("y",Et).attr("width",ut).attr("height",It).attr("position","fixed").append("xhtml:div").style("display","table").style("height","100%").style("width","100%");Jt.append("div").attr("class","label").style("display","table-cell").style("text-align","center").style("vertical-align","middle").text(xt),R(xt,Ce,rt,Et,ut,It,G,st),et(Jt,G)}function et(xt,it){for(const rt in it)rt in it&&xt.attr(rt,it[rt])}return(0,ee.K2)(St,"byText"),(0,ee.K2)(R,"byTspan"),(0,ee.K2)(O,"byFo"),(0,ee.K2)(et,"_setTextAttrs"),function(xt){return"fo"===xt.textPlacement?O:"old"===xt.textPlacement?St:R}}(),qt=(0,ee.K2)(function(St){St.append("defs").append("marker").attr("id","arrowhead").attr("refX",5).attr("refY",2).attr("markerWidth",6).attr("markerHeight",4).attr("orient","auto").append("path").attr("d","M 0,0 V 4 L6,2 Z")},"initGraphics");function V(St,R){St.each(function(){var xt,O=(0,L.Ltv)(this),et=O.text().split(/(\s+|<br>)/).reverse(),it=[],Et=O.attr("y"),ut=parseFloat(O.attr("dy")),It=O.text(null).append("tspan").attr("x",0).attr("y",Et).attr("dy",ut+"em");for(let G=0;G<et.length;G++)it.push(xt=et[et.length-1-G]),It.text(it.join(" ").trim()),(It.node().getComputedTextLength()>R||"<br>"===xt)&&(it.pop(),It.text(it.join(" ").trim()),it="<br>"===xt?[""]:[xt],It=O.append("tspan").attr("x",0).attr("y",Et).attr("dy","1.1em").text(xt))})}(0,ee.K2)(V,"wrap");var pt=(0,ee.K2)(function(St,R,O,et){const xt=O%12-1,it=St.append("g");R.section=xt,it.attr("class",(R.class?R.class+" ":"")+"timeline-node section-"+xt);const rt=it.append("g"),Et=it.append("g"),It=Et.append("text").text(R.descr).attr("dy","1em").attr("alignment-baseline","middle").attr("dominant-baseline","middle").attr("text-anchor","middle").call(V,R.width).node().getBBox(),G=et.fontSize?.replace?et.fontSize.replace("px",""):et.fontSize;return R.height=It.height+1.1*G*.5+R.padding,R.height=Math.max(R.height,R.maxHeight),R.width=R.width+2*R.padding,Et.attr("transform","translate("+R.width/2+", "+R.padding/2+")"),Nt(rt,R,xt,et),R},"drawNode"),H=(0,ee.K2)(function(St,R,O){const et=St.append("g"),it=et.append("text").text(R.descr).attr("dy","1em").attr("alignment-baseline","middle").attr("dominant-baseline","middle").attr("text-anchor","middle").call(V,R.width).node().getBBox(),rt=O.fontSize?.replace?O.fontSize.replace("px",""):O.fontSize;return et.remove(),it.height+1.1*rt*.5+R.padding},"getVirtualNodeHeight"),Nt=(0,ee.K2)(function(St,R,O){St.append("path").attr("id","node-"+R.id).attr("class","node-bkg node-"+R.type).attr("d",`M0 ${R.height-5} v${10-R.height} q0,-5 5,-5 h${R.width-10} q5,0 5,5 v${R.height-5} H0 Z`),St.append("line").attr("class","node-line-"+O).attr("x1",0).attr("y1",R.height).attr("x2",R.width).attr("y2",R.height)},"defaultBkg"),wt={drawRect:ge,drawCircle:Ge,drawSection:Bt,drawText:W,drawLabel:ft,drawTask:Z,drawBackgroundRect:ae,getTextObj:S,getNoteRect:re,initGraphics:qt,drawNode:pt,getVirtualNodeHeight:H},Wt=(0,ee.K2)(function(St,R,O,et){const xt=(0,lt.D7)(),it=xt.timeline?.leftMargin??50;ee.Rm.debug("timeline",et.db);const rt=xt.securityLevel;let Et;"sandbox"===rt&&(Et=(0,L.Ltv)("#i"+R));const It=(0,L.Ltv)("sandbox"===rt?Et.nodes()[0].contentDocument.body:"body").select("#"+R);It.append("g");const G=et.db.getTasks(),st=et.db.getCommonDb().getDiagramTitle();ee.Rm.debug("task",G),wt.initGraphics(It);const Ce=et.db.getSections();ee.Rm.debug("sections",Ce);let Ot=0,Jt=0,fe=0,Be=0,Ze=50+it,ye=50;Be=50;let kr=0,ur=!0;Ce.forEach(function(ce){const Te=wt.getVirtualNodeHeight(It,{number:kr,descr:ce,section:kr,width:150,padding:20,maxHeight:Ot},xt);ee.Rm.debug("sectionHeight before draw",Te),Ot=Math.max(Ot,Te+20)});let Kt=0,Pe=0;ee.Rm.debug("tasks.length",G.length);for(const[ce,ke]of G.entries()){const er=wt.getVirtualNodeHeight(It,{number:ce,descr:ke,section:ke.section,width:150,padding:20,maxHeight:Jt},xt);ee.Rm.debug("taskHeight before draw",er),Jt=Math.max(Jt,er+20),Kt=Math.max(Kt,ke.events.length);let Xe=0;for(const Ir of ke.events)Xe+=wt.getVirtualNodeHeight(It,{descr:Ir,section:ke.section,number:ke.section,width:150,padding:20,maxHeight:50},xt);ke.events.length>0&&(Xe+=10*(ke.events.length-1)),Pe=Math.max(Pe,Xe)}ee.Rm.debug("maxSectionHeight before draw",Ot),ee.Rm.debug("maxTaskHeight before draw",Jt),Ce&&Ce.length>0?Ce.forEach(ce=>{const ke=G.filter(Ir=>Ir.section===ce),Te={number:kr,descr:ce,section:kr,width:200*Math.max(ke.length,1)-50,padding:20,maxHeight:Ot};ee.Rm.debug("sectionNode",Te);const er=It.append("g"),Xe=wt.drawNode(er,Te,kr,xt);ee.Rm.debug("sectionNode output",Xe),er.attr("transform",`translate(${Ze}, 50)`),ye+=Ot+50,ke.length>0&&xe(It,ke,kr,Ze,ye,Jt,xt,Kt,Pe,Ot,!1),Ze+=200*Math.max(ke.length,1),ye=50,kr++}):(ur=!1,xe(It,G,kr,Ze,ye,Jt,xt,Kt,Pe,Ot,!0));const ir=It.node().getBBox();ee.Rm.debug("bounds",ir),st&&It.append("text").text(st).attr("x",ir.width/2-it).attr("font-size","4ex").attr("font-weight","bold").attr("y",20),fe=ur?Ot+Jt+150:Jt+100,It.append("g").attr("class","lineWrapper").append("line").attr("x1",it).attr("y1",fe).attr("x2",ir.width+3*it).attr("y2",fe).attr("stroke-width",4).attr("stroke","black").attr("marker-end","url(#arrowhead)"),(0,lt.ot)(void 0,It,xt.timeline?.padding??50,xt.timeline?.useMaxWidth??!1)},"draw"),xe=(0,ee.K2)(function(St,R,O,et,xt,it,rt,Et,ut,It,G){for(const st of R){const Ce={descr:st.task,section:O,number:O,width:150,padding:20,maxHeight:it};ee.Rm.debug("taskNode",Ce);const Ot=St.append("g").attr("class","taskWrapper"),fe=wt.drawNode(Ot,Ce,O,rt).height;if(ee.Rm.debug("taskHeight after draw",fe),Ot.attr("transform",`translate(${et}, ${xt})`),it=Math.max(it,fe),st.events){const Be=St.append("g").attr("class","lineWrapper");let Ze=it;Ze+=le(St,st.events,O,et,xt+=100,rt),xt-=100,Be.append("line").attr("x1",et+95).attr("y1",xt+it).attr("x2",et+95).attr("y2",xt+it+100+ut+100).attr("stroke-width",2).attr("stroke","black").attr("marker-end","url(#arrowhead)").attr("stroke-dasharray","5,5")}et+=200,G&&!rt.timeline?.disableMulticolor&&O++}xt-=10},"drawTasks"),le=(0,ee.K2)(function(St,R,O,et,xt,it){let rt=0;const Et=xt;xt+=100;for(const ut of R){const It={descr:ut,section:O,number:O,width:150,padding:20,maxHeight:50};ee.Rm.debug("eventNode",It);const G=St.append("g").attr("class","eventWrapper"),Ce=wt.drawNode(G,It,O,it).height;rt+=Ce,G.attr("transform",`translate(${et}, ${xt})`),xt=xt+10+Ce}return xt=Et,rt},"drawEvents"),Re={setConf:(0,ee.K2)(()=>{},"setConf"),draw:Wt},oe=(0,ee.K2)(St=>{let R="";for(let O=0;O<St.THEME_COLOR_LIMIT;O++)St["lineColor"+O]=St["lineColor"+O]||St["cScaleInv"+O],St["lineColor"+O]=(0,D.HD)(St["lineColor"+O])?(0,D.a)(St["lineColor"+O],20):(0,D.e$)(St["lineColor"+O],20);for(let O=0;O<St.THEME_COLOR_LIMIT;O++)R+=`\n    .section-${O-1} rect, .section-${O-1} path, .section-${O-1} circle, .section-${O-1} path  {\n      fill: ${St["cScale"+O]};\n    }\n    .section-${O-1} text {\n     fill: ${St["cScaleLabel"+O]};\n    }\n    .node-icon-${O-1} {\n      font-size: 40px;\n      color: ${St["cScaleLabel"+O]};\n    }\n    .section-edge-${O-1}{\n      stroke: ${St["cScale"+O]};\n    }\n    .edge-depth-${O-1}{\n      stroke-width: ${""+(17-3*O)};\n    }\n    .section-${O-1} line {\n      stroke: ${St["cScaleInv"+O]} ;\n      stroke-width: 3;\n    }\n\n    .lineWrapper line{\n      stroke: ${St["cScaleLabel"+O]} ;\n    }\n\n    .disabled, .disabled circle, .disabled text {\n      fill: lightgray;\n    }\n    .disabled text {\n      fill: #efefef;\n    }\n    `;return R},"genSections"),Ct={db:q,renderer:Re,parser:dt,styles:(0,ee.K2)(St=>`\n  .edge {\n    stroke-width: 3;\n  }\n  ${oe(St)}\n  .section-root rect, .section-root path, .section-root circle  {\n    fill: ${St.git0};\n  }\n  .section-root text {\n    fill: ${St.gitBranchLabel0};\n  }\n  .icon-container {\n    height:100%;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n  }\n  .edge {\n    fill: none;\n  }\n  .eventWrapper  {\n   filter: brightness(120%);\n  }\n`,"getStyles")}},29062:(ti,_r,B)=>{"use strict";B.r(_r),B.d(_r,{diagram:()=>Ar});var fr,lt=B(89204),ee=B(45027),L=B(5675),D=B(8086),Rt=B(72271),bt=(B(98954),B(36384),B(87452),B(32239),B(19753),B(59355),B(52052)),Xt=B(79006),j=B(32303),Fe=function(){var ge=(0,j.K2)(function(y,E,P,b){for(P=P||{},b=y.length;b--;P[y[b]]=E);return P},"o"),Br=[1,3],Ge=[1,4],W=[1,5],ft=[1,6],Bt=[5,6,8,9,11,13,21,22,23,24,41,42,43,44,45,46,54,72,74,77,89,90],_e=[1,22],Z=[2,7],ae=[1,26],S=[1,27],re=[1,28],Pt=[1,29],qt=[1,33],V=[1,34],pt=[1,35],H=[1,36],Nt=[1,37],wt=[1,38],Wt=[1,24],xe=[1,31],le=[1,32],Re=[1,30],oe=[1,39],qe=[1,40],We=[5,8,9,11,13,21,22,23,24,41,42,43,44,45,46,54,72,74,77,89,90],Ct=[1,61],St=[89,90],R=[5,8,9,11,13,21,22,23,24,27,29,41,42,43,44,45,46,54,61,63,72,74,75,76,77,80,81,82,83,84,85,86,87,88,89,90],O=[27,29],et=[1,70],xt=[1,71],it=[1,72],rt=[1,73],Et=[1,74],ut=[1,75],It=[1,76],G=[1,83],st=[1,80],Ce=[1,84],Ot=[1,85],Jt=[1,86],fe=[1,87],Be=[1,88],Ze=[1,89],ye=[1,90],kr=[1,91],ur=[1,92],Kt=[5,8,9,11,13,21,22,23,24,27,41,42,43,44,45,46,54,72,74,75,76,77,80,81,82,83,84,85,86,87,88,89,90],Pe=[63,64],ir=[1,101],me=[5,8,9,11,13,21,22,23,24,41,42,43,44,45,46,54,72,74,76,77,89,90],ce=[5,8,9,11,13,21,22,23,24,41,42,43,44,45,46,54,72,74,75,76,77,80,81,82,83,84,85,86,87,88,89,90],ke=[1,110],Te=[1,106],er=[1,107],Xe=[1,108],Ir=[1,109],Ee=[1,111],qr=[1,116],nr=[1,117],te=[1,114],ne=[1,115],Le={trace:(0,j.K2)(function(){},"trace"),yy:{},symbols_:{error:2,start:3,directive:4,NEWLINE:5,RD:6,diagram:7,EOF:8,acc_title:9,acc_title_value:10,acc_descr:11,acc_descr_value:12,acc_descr_multiline_value:13,requirementDef:14,elementDef:15,relationshipDef:16,direction:17,styleStatement:18,classDefStatement:19,classStatement:20,direction_tb:21,direction_bt:22,direction_rl:23,direction_lr:24,requirementType:25,requirementName:26,STRUCT_START:27,requirementBody:28,STYLE_SEPARATOR:29,idList:30,ID:31,COLONSEP:32,id:33,TEXT:34,text:35,RISK:36,riskLevel:37,VERIFYMTHD:38,verifyType:39,STRUCT_STOP:40,REQUIREMENT:41,FUNCTIONAL_REQUIREMENT:42,INTERFACE_REQUIREMENT:43,PERFORMANCE_REQUIREMENT:44,PHYSICAL_REQUIREMENT:45,DESIGN_CONSTRAINT:46,LOW_RISK:47,MED_RISK:48,HIGH_RISK:49,VERIFY_ANALYSIS:50,VERIFY_DEMONSTRATION:51,VERIFY_INSPECTION:52,VERIFY_TEST:53,ELEMENT:54,elementName:55,elementBody:56,TYPE:57,type:58,DOCREF:59,ref:60,END_ARROW_L:61,relationship:62,LINE:63,END_ARROW_R:64,CONTAINS:65,COPIES:66,DERIVES:67,SATISFIES:68,VERIFIES:69,REFINES:70,TRACES:71,CLASSDEF:72,stylesOpt:73,CLASS:74,ALPHA:75,COMMA:76,STYLE:77,style:78,styleComponent:79,NUM:80,COLON:81,UNIT:82,SPACE:83,BRKT:84,PCT:85,MINUS:86,LABEL:87,SEMICOLON:88,unqString:89,qString:90,$accept:0,$end:1},terminals_:{2:"error",5:"NEWLINE",6:"RD",8:"EOF",9:"acc_title",10:"acc_title_value",11:"acc_descr",12:"acc_descr_value",13:"acc_descr_multiline_value",21:"direction_tb",22:"direction_bt",23:"direction_rl",24:"direction_lr",27:"STRUCT_START",29:"STYLE_SEPARATOR",31:"ID",32:"COLONSEP",34:"TEXT",36:"RISK",38:"VERIFYMTHD",40:"STRUCT_STOP",41:"REQUIREMENT",42:"FUNCTIONAL_REQUIREMENT",43:"INTERFACE_REQUIREMENT",44:"PERFORMANCE_REQUIREMENT",45:"PHYSICAL_REQUIREMENT",46:"DESIGN_CONSTRAINT",47:"LOW_RISK",48:"MED_RISK",49:"HIGH_RISK",50:"VERIFY_ANALYSIS",51:"VERIFY_DEMONSTRATION",52:"VERIFY_INSPECTION",53:"VERIFY_TEST",54:"ELEMENT",57:"TYPE",59:"DOCREF",61:"END_ARROW_L",63:"LINE",64:"END_ARROW_R",65:"CONTAINS",66:"COPIES",67:"DERIVES",68:"SATISFIES",69:"VERIFIES",70:"REFINES",71:"TRACES",72:"CLASSDEF",74:"CLASS",75:"ALPHA",76:"COMMA",77:"STYLE",80:"NUM",81:"COLON",82:"UNIT",83:"SPACE",84:"BRKT",85:"PCT",86:"MINUS",87:"LABEL",88:"SEMICOLON",89:"unqString",90:"qString"},productions_:[0,[3,3],[3,2],[3,4],[4,2],[4,2],[4,1],[7,0],[7,2],[7,2],[7,2],[7,2],[7,2],[7,2],[7,2],[7,2],[7,2],[17,1],[17,1],[17,1],[17,1],[14,5],[14,7],[28,5],[28,5],[28,5],[28,5],[28,2],[28,1],[25,1],[25,1],[25,1],[25,1],[25,1],[25,1],[37,1],[37,1],[37,1],[39,1],[39,1],[39,1],[39,1],[15,5],[15,7],[56,5],[56,5],[56,2],[56,1],[16,5],[16,5],[62,1],[62,1],[62,1],[62,1],[62,1],[62,1],[62,1],[19,3],[20,3],[20,3],[30,1],[30,3],[30,1],[30,3],[18,3],[73,1],[73,3],[78,1],[78,2],[79,1],[79,1],[79,1],[79,1],[79,1],[79,1],[79,1],[79,1],[79,1],[79,1],[26,1],[26,1],[33,1],[33,1],[35,1],[35,1],[55,1],[55,1],[58,1],[58,1],[60,1],[60,1]],performAction:(0,j.K2)(function(E,P,b,z,p,x,C){var w=x.length-1;switch(p){case 4:this.$=x[w].trim(),z.setAccTitle(this.$);break;case 5:case 6:this.$=x[w].trim(),z.setAccDescription(this.$);break;case 7:this.$=[];break;case 17:z.setDirection("TB");break;case 18:z.setDirection("BT");break;case 19:z.setDirection("RL");break;case 20:z.setDirection("LR");break;case 21:z.addRequirement(x[w-3],x[w-4]);break;case 22:z.addRequirement(x[w-5],x[w-6]),z.setClass([x[w-5]],x[w-3]);break;case 23:z.setNewReqId(x[w-2]);break;case 24:z.setNewReqText(x[w-2]);break;case 25:z.setNewReqRisk(x[w-2]);break;case 26:z.setNewReqVerifyMethod(x[w-2]);break;case 29:this.$=z.RequirementType.REQUIREMENT;break;case 30:this.$=z.RequirementType.FUNCTIONAL_REQUIREMENT;break;case 31:this.$=z.RequirementType.INTERFACE_REQUIREMENT;break;case 32:this.$=z.RequirementType.PERFORMANCE_REQUIREMENT;break;case 33:this.$=z.RequirementType.PHYSICAL_REQUIREMENT;break;case 34:this.$=z.RequirementType.DESIGN_CONSTRAINT;break;case 35:this.$=z.RiskLevel.LOW_RISK;break;case 36:this.$=z.RiskLevel.MED_RISK;break;case 37:this.$=z.RiskLevel.HIGH_RISK;break;case 38:this.$=z.VerifyType.VERIFY_ANALYSIS;break;case 39:this.$=z.VerifyType.VERIFY_DEMONSTRATION;break;case 40:this.$=z.VerifyType.VERIFY_INSPECTION;break;case 41:this.$=z.VerifyType.VERIFY_TEST;break;case 42:z.addElement(x[w-3]);break;case 43:z.addElement(x[w-5]),z.setClass([x[w-5]],x[w-3]);break;case 44:z.setNewElementType(x[w-2]);break;case 45:z.setNewElementDocRef(x[w-2]);break;case 48:z.addRelationship(x[w-2],x[w],x[w-4]);break;case 49:z.addRelationship(x[w-2],x[w-4],x[w]);break;case 50:this.$=z.Relationships.CONTAINS;break;case 51:this.$=z.Relationships.COPIES;break;case 52:this.$=z.Relationships.DERIVES;break;case 53:this.$=z.Relationships.SATISFIES;break;case 54:this.$=z.Relationships.VERIFIES;break;case 55:this.$=z.Relationships.REFINES;break;case 56:this.$=z.Relationships.TRACES;break;case 57:this.$=x[w-2],z.defineClass(x[w-1],x[w]);break;case 58:z.setClass(x[w-1],x[w]);break;case 59:z.setClass([x[w-2]],x[w]);break;case 60:case 62:case 65:this.$=[x[w]];break;case 61:case 63:this.$=x[w-2].concat([x[w]]);break;case 64:this.$=x[w-2],z.setCssStyle(x[w-1],x[w]);break;case 66:x[w-2].push(x[w]),this.$=x[w-2];break;case 68:this.$=x[w-1]+x[w]}},"anonymous"),table:[{3:1,4:2,6:Br,9:Ge,11:W,13:ft},{1:[3]},{3:8,4:2,5:[1,7],6:Br,9:Ge,11:W,13:ft},{5:[1,9]},{10:[1,10]},{12:[1,11]},ge(Bt,[2,6]),{3:12,4:2,6:Br,9:Ge,11:W,13:ft},{1:[2,2]},{4:17,5:_e,7:13,8:Z,9:Ge,11:W,13:ft,14:14,15:15,16:16,17:18,18:19,19:20,20:21,21:ae,22:S,23:re,24:Pt,25:23,33:25,41:qt,42:V,43:pt,44:H,45:Nt,46:wt,54:Wt,72:xe,74:le,77:Re,89:oe,90:qe},ge(Bt,[2,4]),ge(Bt,[2,5]),{1:[2,1]},{8:[1,41]},{4:17,5:_e,7:42,8:Z,9:Ge,11:W,13:ft,14:14,15:15,16:16,17:18,18:19,19:20,20:21,21:ae,22:S,23:re,24:Pt,25:23,33:25,41:qt,42:V,43:pt,44:H,45:Nt,46:wt,54:Wt,72:xe,74:le,77:Re,89:oe,90:qe},{4:17,5:_e,7:43,8:Z,9:Ge,11:W,13:ft,14:14,15:15,16:16,17:18,18:19,19:20,20:21,21:ae,22:S,23:re,24:Pt,25:23,33:25,41:qt,42:V,43:pt,44:H,45:Nt,46:wt,54:Wt,72:xe,74:le,77:Re,89:oe,90:qe},{4:17,5:_e,7:44,8:Z,9:Ge,11:W,13:ft,14:14,15:15,16:16,17:18,18:19,19:20,20:21,21:ae,22:S,23:re,24:Pt,25:23,33:25,41:qt,42:V,43:pt,44:H,45:Nt,46:wt,54:Wt,72:xe,74:le,77:Re,89:oe,90:qe},{4:17,5:_e,7:45,8:Z,9:Ge,11:W,13:ft,14:14,15:15,16:16,17:18,18:19,19:20,20:21,21:ae,22:S,23:re,24:Pt,25:23,33:25,41:qt,42:V,43:pt,44:H,45:Nt,46:wt,54:Wt,72:xe,74:le,77:Re,89:oe,90:qe},{4:17,5:_e,7:46,8:Z,9:Ge,11:W,13:ft,14:14,15:15,16:16,17:18,18:19,19:20,20:21,21:ae,22:S,23:re,24:Pt,25:23,33:25,41:qt,42:V,43:pt,44:H,45:Nt,46:wt,54:Wt,72:xe,74:le,77:Re,89:oe,90:qe},{4:17,5:_e,7:47,8:Z,9:Ge,11:W,13:ft,14:14,15:15,16:16,17:18,18:19,19:20,20:21,21:ae,22:S,23:re,24:Pt,25:23,33:25,41:qt,42:V,43:pt,44:H,45:Nt,46:wt,54:Wt,72:xe,74:le,77:Re,89:oe,90:qe},{4:17,5:_e,7:48,8:Z,9:Ge,11:W,13:ft,14:14,15:15,16:16,17:18,18:19,19:20,20:21,21:ae,22:S,23:re,24:Pt,25:23,33:25,41:qt,42:V,43:pt,44:H,45:Nt,46:wt,54:Wt,72:xe,74:le,77:Re,89:oe,90:qe},{4:17,5:_e,7:49,8:Z,9:Ge,11:W,13:ft,14:14,15:15,16:16,17:18,18:19,19:20,20:21,21:ae,22:S,23:re,24:Pt,25:23,33:25,41:qt,42:V,43:pt,44:H,45:Nt,46:wt,54:Wt,72:xe,74:le,77:Re,89:oe,90:qe},{4:17,5:_e,7:50,8:Z,9:Ge,11:W,13:ft,14:14,15:15,16:16,17:18,18:19,19:20,20:21,21:ae,22:S,23:re,24:Pt,25:23,33:25,41:qt,42:V,43:pt,44:H,45:Nt,46:wt,54:Wt,72:xe,74:le,77:Re,89:oe,90:qe},{26:51,89:[1,52],90:[1,53]},{55:54,89:[1,55],90:[1,56]},{29:[1,59],61:[1,57],63:[1,58]},ge(We,[2,17]),ge(We,[2,18]),ge(We,[2,19]),ge(We,[2,20]),{30:60,33:62,75:Ct,89:oe,90:qe},{30:63,33:62,75:Ct,89:oe,90:qe},{30:64,33:62,75:Ct,89:oe,90:qe},ge(St,[2,29]),ge(St,[2,30]),ge(St,[2,31]),ge(St,[2,32]),ge(St,[2,33]),ge(St,[2,34]),ge(R,[2,81]),ge(R,[2,82]),{1:[2,3]},{8:[2,8]},{8:[2,9]},{8:[2,10]},{8:[2,11]},{8:[2,12]},{8:[2,13]},{8:[2,14]},{8:[2,15]},{8:[2,16]},{27:[1,65],29:[1,66]},ge(O,[2,79]),ge(O,[2,80]),{27:[1,67],29:[1,68]},ge(O,[2,85]),ge(O,[2,86]),{62:69,65:et,66:xt,67:it,68:rt,69:Et,70:ut,71:It},{62:77,65:et,66:xt,67:it,68:rt,69:Et,70:ut,71:It},{30:78,33:62,75:Ct,89:oe,90:qe},{73:79,75:G,76:st,78:81,79:82,80:Ce,81:Ot,82:Jt,83:fe,84:Be,85:Ze,86:ye,87:kr,88:ur},ge(Kt,[2,60]),ge(Kt,[2,62]),{73:93,75:G,76:st,78:81,79:82,80:Ce,81:Ot,82:Jt,83:fe,84:Be,85:Ze,86:ye,87:kr,88:ur},{30:94,33:62,75:Ct,76:st,89:oe,90:qe},{5:[1,95]},{30:96,33:62,75:Ct,89:oe,90:qe},{5:[1,97]},{30:98,33:62,75:Ct,89:oe,90:qe},{63:[1,99]},ge(Pe,[2,50]),ge(Pe,[2,51]),ge(Pe,[2,52]),ge(Pe,[2,53]),ge(Pe,[2,54]),ge(Pe,[2,55]),ge(Pe,[2,56]),{64:[1,100]},ge(We,[2,59],{76:st}),ge(We,[2,64],{76:ir}),{33:103,75:[1,102],89:oe,90:qe},ge(me,[2,65],{79:104,75:G,80:Ce,81:Ot,82:Jt,83:fe,84:Be,85:Ze,86:ye,87:kr,88:ur}),ge(ce,[2,67]),ge(ce,[2,69]),ge(ce,[2,70]),ge(ce,[2,71]),ge(ce,[2,72]),ge(ce,[2,73]),ge(ce,[2,74]),ge(ce,[2,75]),ge(ce,[2,76]),ge(ce,[2,77]),ge(ce,[2,78]),ge(We,[2,57],{76:ir}),ge(We,[2,58],{76:st}),{5:ke,28:105,31:Te,34:er,36:Xe,38:Ir,40:Ee},{27:[1,112],76:st},{5:qr,40:nr,56:113,57:te,59:ne},{27:[1,118],76:st},{33:119,89:oe,90:qe},{33:120,89:oe,90:qe},{75:G,78:121,79:82,80:Ce,81:Ot,82:Jt,83:fe,84:Be,85:Ze,86:ye,87:kr,88:ur},ge(Kt,[2,61]),ge(Kt,[2,63]),ge(ce,[2,68]),ge(We,[2,21]),{32:[1,122]},{32:[1,123]},{32:[1,124]},{32:[1,125]},{5:ke,28:126,31:Te,34:er,36:Xe,38:Ir,40:Ee},ge(We,[2,28]),{5:[1,127]},ge(We,[2,42]),{32:[1,128]},{32:[1,129]},{5:qr,40:nr,56:130,57:te,59:ne},ge(We,[2,47]),{5:[1,131]},ge(We,[2,48]),ge(We,[2,49]),ge(me,[2,66],{79:104,75:G,80:Ce,81:Ot,82:Jt,83:fe,84:Be,85:Ze,86:ye,87:kr,88:ur}),{33:132,89:oe,90:qe},{35:133,89:[1,134],90:[1,135]},{37:136,47:[1,137],48:[1,138],49:[1,139]},{39:140,50:[1,141],51:[1,142],52:[1,143],53:[1,144]},ge(We,[2,27]),{5:ke,28:145,31:Te,34:er,36:Xe,38:Ir,40:Ee},{58:146,89:[1,147],90:[1,148]},{60:149,89:[1,150],90:[1,151]},ge(We,[2,46]),{5:qr,40:nr,56:152,57:te,59:ne},{5:[1,153]},{5:[1,154]},{5:[2,83]},{5:[2,84]},{5:[1,155]},{5:[2,35]},{5:[2,36]},{5:[2,37]},{5:[1,156]},{5:[2,38]},{5:[2,39]},{5:[2,40]},{5:[2,41]},ge(We,[2,22]),{5:[1,157]},{5:[2,87]},{5:[2,88]},{5:[1,158]},{5:[2,89]},{5:[2,90]},ge(We,[2,43]),{5:ke,28:159,31:Te,34:er,36:Xe,38:Ir,40:Ee},{5:ke,28:160,31:Te,34:er,36:Xe,38:Ir,40:Ee},{5:ke,28:161,31:Te,34:er,36:Xe,38:Ir,40:Ee},{5:ke,28:162,31:Te,34:er,36:Xe,38:Ir,40:Ee},{5:qr,40:nr,56:163,57:te,59:ne},{5:qr,40:nr,56:164,57:te,59:ne},ge(We,[2,23]),ge(We,[2,24]),ge(We,[2,25]),ge(We,[2,26]),ge(We,[2,44]),ge(We,[2,45])],defaultActions:{8:[2,2],12:[2,1],41:[2,3],42:[2,8],43:[2,9],44:[2,10],45:[2,11],46:[2,12],47:[2,13],48:[2,14],49:[2,15],50:[2,16],134:[2,83],135:[2,84],137:[2,35],138:[2,36],139:[2,37],141:[2,38],142:[2,39],143:[2,40],144:[2,41],147:[2,87],148:[2,88],150:[2,89],151:[2,90]},parseError:(0,j.K2)(function(E,P){if(!P.recoverable){var b=new Error(E);throw b.hash=P,b}this.trace(E)},"parseError"),parse:(0,j.K2)(function(E){var P=this,b=[0],z=[],p=[null],x=[],C=this.table,w="",$=0,ct=0,kt=0,zt=x.slice.call(arguments,1),ue=Object.create(this.lexer),je={yy:{}};for(var ze in this.yy)Object.prototype.hasOwnProperty.call(this.yy,ze)&&(je.yy[ze]=this.yy[ze]);ue.setInput(E,je.yy),je.yy.lexer=ue,je.yy.parser=this,typeof ue.yylloc>"u"&&(ue.yylloc={});var Cr=ue.yylloc;x.push(Cr);var cr=ue.options&&ue.options.ranges;function $e(){var Tr;return"number"!=typeof(Tr=z.pop()||ue.lex()||1)&&(Tr instanceof Array&&(Tr=(z=Tr).pop()),Tr=P.symbols_[Tr]||Tr),Tr}this.parseError="function"==typeof je.yy.parseError?je.yy.parseError:Object.getPrototypeOf(this).parseError,(0,j.K2)(function sr(Tr){b.length=b.length-2*Tr,p.length=p.length-Tr,x.length=x.length-Tr},"popStack"),(0,j.K2)($e,"lex");for(var He,Pr,wr,Vr,Ba,Oa,Qr,Xr,Zr={};;){if(this.defaultActions[wr=b[b.length-1]]?Vr=this.defaultActions[wr]:((null===He||typeof He>"u")&&(He=$e()),Vr=C[wr]&&C[wr][He]),typeof Vr>"u"||!Vr.length||!Vr[0]){var Rr;for(Oa in Xr=[],C[wr])this.terminals_[Oa]&&Oa>2&&Xr.push("'"+this.terminals_[Oa]+"'");Rr=ue.showPosition?"Parse error on line "+($+1)+":\n"+ue.showPosition()+"\nExpecting "+Xr.join(", ")+", got '"+(this.terminals_[He]||He)+"'":"Parse error on line "+($+1)+": Unexpected "+(1==He?"end of input":"'"+(this.terminals_[He]||He)+"'"),this.parseError(Rr,{text:ue.match,token:this.terminals_[He]||He,line:ue.yylineno,loc:Cr,expected:Xr})}if(Vr[0]instanceof Array&&Vr.length>1)throw new Error("Parse Error: multiple actions possible at state: "+wr+", token: "+He);switch(Vr[0]){case 1:b.push(He),p.push(ue.yytext),x.push(ue.yylloc),b.push(Vr[1]),He=null,Pr?(He=Pr,Pr=null):(ct=ue.yyleng,w=ue.yytext,$=ue.yylineno,Cr=ue.yylloc,kt>0&&kt--);break;case 2:if(Zr.$=p[p.length-(Qr=this.productions_[Vr[1]][1])],Zr._$={first_line:x[x.length-(Qr||1)].first_line,last_line:x[x.length-1].last_line,first_column:x[x.length-(Qr||1)].first_column,last_column:x[x.length-1].last_column},cr&&(Zr._$.range=[x[x.length-(Qr||1)].range[0],x[x.length-1].range[1]]),typeof(Ba=this.performAction.apply(Zr,[w,ct,$,je.yy,Vr[1],p,x].concat(zt)))<"u")return Ba;Qr&&(b=b.slice(0,-1*Qr*2),p=p.slice(0,-1*Qr),x=x.slice(0,-1*Qr)),b.push(this.productions_[Vr[1]][0]),p.push(Zr.$),x.push(Zr._$),b.push(C[b[b.length-2]][b[b.length-1]]);break;case 3:return!0}}return!0},"parse")};function g(){this.yy={}}return Le.lexer=function(){return{EOF:1,parseError:(0,j.K2)(function(P,b){if(!this.yy.parser)throw new Error(P);this.yy.parser.parseError(P,b)},"parseError"),setInput:(0,j.K2)(function(E,P){return this.yy=P||this.yy||{},this._input=E,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},"setInput"),input:(0,j.K2)(function(){var E=this._input[0];return this.yytext+=E,this.yyleng++,this.offset++,this.match+=E,this.matched+=E,E.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),E},"input"),unput:(0,j.K2)(function(E){var P=E.length,b=E.split(/(?:\r\n?|\n)/g);this._input=E+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-P),this.offset-=P;var z=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),b.length-1&&(this.yylineno-=b.length-1);var p=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:b?(b.length===z.length?this.yylloc.first_column:0)+z[z.length-b.length].length-b[0].length:this.yylloc.first_column-P},this.options.ranges&&(this.yylloc.range=[p[0],p[0]+this.yyleng-P]),this.yyleng=this.yytext.length,this},"unput"),more:(0,j.K2)(function(){return this._more=!0,this},"more"),reject:(0,j.K2)(function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},"reject"),less:(0,j.K2)(function(E){this.unput(this.match.slice(E))},"less"),pastInput:(0,j.K2)(function(){var E=this.matched.substr(0,this.matched.length-this.match.length);return(E.length>20?"...":"")+E.substr(-20).replace(/\n/g,"")},"pastInput"),upcomingInput:(0,j.K2)(function(){var E=this.match;return E.length<20&&(E+=this._input.substr(0,20-E.length)),(E.substr(0,20)+(E.length>20?"...":"")).replace(/\n/g,"")},"upcomingInput"),showPosition:(0,j.K2)(function(){var E=this.pastInput(),P=new Array(E.length+1).join("-");return E+this.upcomingInput()+"\n"+P+"^"},"showPosition"),test_match:(0,j.K2)(function(E,P){var b,z,p;if(this.options.backtrack_lexer&&(p={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(p.yylloc.range=this.yylloc.range.slice(0))),(z=E[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=z.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:z?z[z.length-1].length-z[z.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+E[0].length},this.yytext+=E[0],this.match+=E[0],this.matches=E,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(E[0].length),this.matched+=E[0],b=this.performAction.call(this,this.yy,this,P,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),b)return b;if(this._backtrack){for(var x in p)this[x]=p[x];return!1}return!1},"test_match"),next:(0,j.K2)(function(){if(this.done)return this.EOF;var E,P,b,z;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var p=this._currentRules(),x=0;x<p.length;x++)if((b=this._input.match(this.rules[p[x]]))&&(!P||b[0].length>P[0].length)){if(P=b,z=x,this.options.backtrack_lexer){if(!1!==(E=this.test_match(b,p[x])))return E;if(this._backtrack){P=!1;continue}return!1}if(!this.options.flex)break}return P?!1!==(E=this.test_match(P,p[z]))&&E:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},"next"),lex:(0,j.K2)(function(){return this.next()||this.lex()},"lex"),begin:(0,j.K2)(function(P){this.conditionStack.push(P)},"begin"),popState:(0,j.K2)(function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},"popState"),_currentRules:(0,j.K2)(function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},"_currentRules"),topState:(0,j.K2)(function(P){return(P=this.conditionStack.length-1-Math.abs(P||0))>=0?this.conditionStack[P]:"INITIAL"},"topState"),pushState:(0,j.K2)(function(P){this.begin(P)},"pushState"),stateStackSize:(0,j.K2)(function(){return this.conditionStack.length},"stateStackSize"),options:{"case-insensitive":!0},performAction:(0,j.K2)(function(P,b,z,p){switch(z){case 0:return"title";case 1:return this.begin("acc_title"),9;case 2:return this.popState(),"acc_title_value";case 3:return this.begin("acc_descr"),11;case 4:return this.popState(),"acc_descr_value";case 5:this.begin("acc_descr_multiline");break;case 6:case 58:case 65:this.popState();break;case 7:return"acc_descr_multiline_value";case 8:return 21;case 9:return 22;case 10:return 23;case 11:return 24;case 12:return 5;case 13:case 14:case 15:case 56:break;case 16:return 8;case 17:return 6;case 18:return 27;case 19:return 40;case 20:return 29;case 21:return 32;case 22:return 31;case 23:return 34;case 24:return 36;case 25:return 38;case 26:return 41;case 27:return 42;case 28:return 43;case 29:return 44;case 30:return 45;case 31:return 46;case 32:return 47;case 33:return 48;case 34:return 49;case 35:return 50;case 36:return 51;case 37:return 52;case 38:return 53;case 39:return 54;case 40:return 65;case 41:return 66;case 42:return 67;case 43:return 68;case 44:return 69;case 45:return 70;case 46:return 71;case 47:return 57;case 48:return 59;case 49:return this.begin("style"),77;case 50:case 68:return 75;case 51:return 81;case 52:return 88;case 53:return"PERCENT";case 54:return 86;case 55:return 84;case 57:case 64:this.begin("string");break;case 59:return this.begin("style"),72;case 60:return this.begin("style"),74;case 61:return 61;case 62:return 64;case 63:return 63;case 66:return"qString";case 67:return b.yytext=b.yytext.trim(),89;case 69:return 80;case 70:return 76}},"anonymous"),rules:[/^(?:title\s[^#\n;]+)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:.*direction\s+TB[^\n]*)/i,/^(?:.*direction\s+BT[^\n]*)/i,/^(?:.*direction\s+RL[^\n]*)/i,/^(?:.*direction\s+LR[^\n]*)/i,/^(?:(\r?\n)+)/i,/^(?:\s+)/i,/^(?:#[^\n]*)/i,/^(?:%[^\n]*)/i,/^(?:$)/i,/^(?:requirementDiagram\b)/i,/^(?:\{)/i,/^(?:\})/i,/^(?::{3})/i,/^(?::)/i,/^(?:id\b)/i,/^(?:text\b)/i,/^(?:risk\b)/i,/^(?:verifyMethod\b)/i,/^(?:requirement\b)/i,/^(?:functionalRequirement\b)/i,/^(?:interfaceRequirement\b)/i,/^(?:performanceRequirement\b)/i,/^(?:physicalRequirement\b)/i,/^(?:designConstraint\b)/i,/^(?:low\b)/i,/^(?:medium\b)/i,/^(?:high\b)/i,/^(?:analysis\b)/i,/^(?:demonstration\b)/i,/^(?:inspection\b)/i,/^(?:test\b)/i,/^(?:element\b)/i,/^(?:contains\b)/i,/^(?:copies\b)/i,/^(?:derives\b)/i,/^(?:satisfies\b)/i,/^(?:verifies\b)/i,/^(?:refines\b)/i,/^(?:traces\b)/i,/^(?:type\b)/i,/^(?:docref\b)/i,/^(?:style\b)/i,/^(?:\w+)/i,/^(?::)/i,/^(?:;)/i,/^(?:%)/i,/^(?:-)/i,/^(?:#)/i,/^(?: )/i,/^(?:["])/i,/^(?:\n)/i,/^(?:classDef\b)/i,/^(?:class\b)/i,/^(?:<-)/i,/^(?:->)/i,/^(?:-)/i,/^(?:["])/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:[\w][^:,\r\n\{\<\>\-\=]*)/i,/^(?:\w+)/i,/^(?:[0-9]+)/i,/^(?:,)/i],conditions:{acc_descr_multiline:{rules:[6,7,68,69,70],inclusive:!1},acc_descr:{rules:[4,68,69,70],inclusive:!1},acc_title:{rules:[2,68,69,70],inclusive:!1},style:{rules:[50,51,52,53,54,55,56,57,58,68,69,70],inclusive:!1},unqString:{rules:[68,69,70],inclusive:!1},token:{rules:[68,69,70],inclusive:!1},string:{rules:[65,66,68,69,70],inclusive:!1},INITIAL:{rules:[0,1,3,5,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,59,60,61,62,63,64,67,68,69,70],inclusive:!0}}}}(),(0,j.K2)(g,"Parser"),g.prototype=Le,Le.Parser=g,new g}();Fe.parser=Fe;var vr=Fe,zr=(class{constructor(){this.relations=[],this.latestRequirement=this.getInitialRequirement(),this.requirements=new Map,this.latestElement=this.getInitialElement(),this.elements=new Map,this.classes=new Map,this.direction="TB",this.RequirementType={REQUIREMENT:"Requirement",FUNCTIONAL_REQUIREMENT:"Functional Requirement",INTERFACE_REQUIREMENT:"Interface Requirement",PERFORMANCE_REQUIREMENT:"Performance Requirement",PHYSICAL_REQUIREMENT:"Physical Requirement",DESIGN_CONSTRAINT:"Design Constraint"},this.RiskLevel={LOW_RISK:"Low",MED_RISK:"Medium",HIGH_RISK:"High"},this.VerifyType={VERIFY_ANALYSIS:"Analysis",VERIFY_DEMONSTRATION:"Demonstration",VERIFY_INSPECTION:"Inspection",VERIFY_TEST:"Test"},this.Relationships={CONTAINS:"contains",COPIES:"copies",DERIVES:"derives",SATISFIES:"satisfies",VERIFIES:"verifies",REFINES:"refines",TRACES:"traces"},this.setAccTitle=Xt.SV,this.getAccTitle=Xt.iN,this.setAccDescription=Xt.EI,this.getAccDescription=Xt.m7,this.setDiagramTitle=Xt.ke,this.getDiagramTitle=Xt.ab,this.getConfig=(0,j.K2)(()=>(0,Xt.D7)().requirement,"getConfig"),this.clear(),this.setDirection=this.setDirection.bind(this),this.addRequirement=this.addRequirement.bind(this),this.setNewReqId=this.setNewReqId.bind(this),this.setNewReqRisk=this.setNewReqRisk.bind(this),this.setNewReqText=this.setNewReqText.bind(this),this.setNewReqVerifyMethod=this.setNewReqVerifyMethod.bind(this),this.addElement=this.addElement.bind(this),this.setNewElementType=this.setNewElementType.bind(this),this.setNewElementDocRef=this.setNewElementDocRef.bind(this),this.addRelationship=this.addRelationship.bind(this),this.setCssStyle=this.setCssStyle.bind(this),this.setClass=this.setClass.bind(this),this.defineClass=this.defineClass.bind(this),this.setAccTitle=this.setAccTitle.bind(this),this.setAccDescription=this.setAccDescription.bind(this)}getDirection(){return this.direction}setDirection(ge){this.direction=ge}resetLatestRequirement(){this.latestRequirement=this.getInitialRequirement()}resetLatestElement(){this.latestElement=this.getInitialElement()}getInitialRequirement(){return{requirementId:"",text:"",risk:"",verifyMethod:"",name:"",type:"",cssStyles:[],classes:["default"]}}getInitialElement(){return{name:"",type:"",docRef:"",cssStyles:[],classes:["default"]}}addRequirement(ge,Br){return this.requirements.has(ge)||this.requirements.set(ge,{name:ge,type:Br,requirementId:this.latestRequirement.requirementId,text:this.latestRequirement.text,risk:this.latestRequirement.risk,verifyMethod:this.latestRequirement.verifyMethod,cssStyles:[],classes:["default"]}),this.resetLatestRequirement(),this.requirements.get(ge)}getRequirements(){return this.requirements}setNewReqId(ge){void 0!==this.latestRequirement&&(this.latestRequirement.requirementId=ge)}setNewReqText(ge){void 0!==this.latestRequirement&&(this.latestRequirement.text=ge)}setNewReqRisk(ge){void 0!==this.latestRequirement&&(this.latestRequirement.risk=ge)}setNewReqVerifyMethod(ge){void 0!==this.latestRequirement&&(this.latestRequirement.verifyMethod=ge)}addElement(ge){return this.elements.has(ge)||(this.elements.set(ge,{name:ge,type:this.latestElement.type,docRef:this.latestElement.docRef,cssStyles:[],classes:["default"]}),j.Rm.info("Added new element: ",ge)),this.resetLatestElement(),this.elements.get(ge)}getElements(){return this.elements}setNewElementType(ge){void 0!==this.latestElement&&(this.latestElement.type=ge)}setNewElementDocRef(ge){void 0!==this.latestElement&&(this.latestElement.docRef=ge)}addRelationship(ge,Br,Ge){this.relations.push({type:ge,src:Br,dst:Ge})}getRelationships(){return this.relations}clear(){this.relations=[],this.resetLatestRequirement(),this.requirements=new Map,this.resetLatestElement(),this.elements=new Map,this.classes=new Map,(0,Xt.IU)()}setCssStyle(ge,Br){for(const Ge of ge){const W=this.requirements.get(Ge)??this.elements.get(Ge);if(!Br||!W)return;for(const ft of Br)ft.includes(",")?W.cssStyles.push(...ft.split(",")):W.cssStyles.push(ft)}}setClass(ge,Br){for(const Ge of ge){const W=this.requirements.get(Ge)??this.elements.get(Ge);if(W)for(const ft of Br){W.classes.push(ft);const Bt=this.classes.get(ft)?.styles;Bt&&W.cssStyles.push(...Bt)}}}defineClass(ge,Br){for(const Ge of ge){let W=this.classes.get(Ge);void 0===W&&(W={id:Ge,styles:[],textStyles:[]},this.classes.set(Ge,W)),Br&&Br.forEach(function(ft){if(/color/.exec(ft)){const Bt=ft.replace("fill","bgFill");W.textStyles.push(Bt)}W.styles.push(ft)}),this.requirements.forEach(ft=>{ft.classes.includes(Ge)&&ft.cssStyles.push(...Br.flatMap(Bt=>Bt.split(",")))}),this.elements.forEach(ft=>{ft.classes.includes(Ge)&&ft.cssStyles.push(...Br.flatMap(Bt=>Bt.split(",")))})}}getClasses(){return this.classes}getData(){const ge=(0,Xt.D7)(),Br=[],Ge=[];for(const W of this.requirements.values()){const ft=W;ft.id=W.name,ft.cssStyles=W.cssStyles,ft.cssClasses=W.classes.join(" "),ft.shape="requirementBox",ft.look=ge.look,Br.push(ft)}for(const W of this.elements.values()){const ft=W;ft.shape="requirementBox",ft.look=ge.look,ft.id=W.name,ft.cssStyles=W.cssStyles,ft.cssClasses=W.classes.join(" "),Br.push(ft)}for(const W of this.relations){let ft=0;const Bt=W.type===this.Relationships.CONTAINS,_e={id:`${W.src}-${W.dst}-${ft}`,start:this.requirements.get(W.src)?.name??this.elements.get(W.src)?.name,end:this.requirements.get(W.dst)?.name??this.elements.get(W.dst)?.name,label:`&lt;&lt;${W.type}&gt;&gt;`,classes:"relationshipLine",style:["fill:none",Bt?"":"stroke-dasharray: 10,7"],labelpos:"c",thickness:"normal",type:"normal",pattern:Bt?"normal":"dashed",arrowTypeStart:Bt?"requirement_contains":"",arrowTypeEnd:Bt?"":"requirement_arrow",look:ge.look};Ge.push(_e),ft++}return{nodes:Br,edges:Ge,other:{},config:ge,direction:this.getDirection()}}static#t=fr=()=>((0,ee.A)(this,"RequirementDB"),(0,j.K2)(this,"RequirementDB"),this)},fr()),mr=(0,j.K2)(ge=>`\n\n  marker {\n    fill: ${ge.relationColor};\n    stroke: ${ge.relationColor};\n  }\n\n  marker.cross {\n    stroke: ${ge.lineColor};\n  }\n\n  svg {\n    font-family: ${ge.fontFamily};\n    font-size: ${ge.fontSize};\n  }\n\n  .reqBox {\n    fill: ${ge.requirementBackground};\n    fill-opacity: 1.0;\n    stroke: ${ge.requirementBorderColor};\n    stroke-width: ${ge.requirementBorderSize};\n  }\n  \n  .reqTitle, .reqLabel{\n    fill:  ${ge.requirementTextColor};\n  }\n  .reqLabelBox {\n    fill: ${ge.relationLabelBackground};\n    fill-opacity: 1.0;\n  }\n\n  .req-title-line {\n    stroke: ${ge.requirementBorderColor};\n    stroke-width: ${ge.requirementBorderSize};\n  }\n  .relationshipLine {\n    stroke: ${ge.relationColor};\n    stroke-width: 1;\n  }\n  .relationshipLabel {\n    fill: ${ge.relationLabelColor};\n  }\n  .divider {\n    stroke: ${ge.nodeBorder};\n    stroke-width: 1;\n  }\n  .label {\n    font-family: ${ge.fontFamily};\n    color: ${ge.nodeTextColor||ge.textColor};\n  }\n  .label text,span {\n    fill: ${ge.nodeTextColor||ge.textColor};\n    color: ${ge.nodeTextColor||ge.textColor};\n  }\n  .labelBkg {\n    background-color: ${ge.edgeLabelBackground};\n  }\n\n`,"getStyles"),Er={};(0,j.VA)(Er,{draw:()=>Lr});var Lr=(0,j.K2)(function(){var ge=(0,lt.A)(function*(Br,Ge,W,ft){j.Rm.info("REF0:"),j.Rm.info("Drawing requirement diagram (unified)",Ge);const{securityLevel:Bt,state:_e,layout:Z}=(0,Xt.D7)(),ae=ft.db.getData(),S=(0,L.A)(Ge,Bt);ae.type=ft.type,ae.layoutAlgorithm=(0,Rt.q7)(Z),ae.nodeSpacing=_e?.nodeSpacing??50,ae.rankSpacing=_e?.rankSpacing??50,ae.markers=["requirement_contains","requirement_arrow"],ae.diagramId=Ge,yield(0,Rt.XX)(ae,S),bt._K.insertTitle(S,"requirementDiagramTitleText",_e?.titleTopMargin??25,ft.db.getDiagramTitle()),(0,D.P)(S,8,"requirementDiagram",_e?.useMaxWidth??!0)});return function(Br,Ge,W,ft){return ge.apply(this,arguments)}}(),"draw"),Ar={parser:vr,get db(){return new zr},renderer:Er,styles:mr}},30001:function(ti){ti.exports=function(){"use strict";var _r={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},B=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|Q|YYYY|YY?|ww?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,lt=/\d/,ee=/\d\d/,L=/\d\d?/,D=/\d*[^-_:/,()\s\d]+/,Rt={},dt=function(Xt){return(Xt=+Xt)+(Xt>68?1900:2e3)},q=function(Xt){return function(j){this[Xt]=+j}},A=[/[+-]\d\d:?(\d\d)?|Z/,function(Xt){(this.zone||(this.zone={})).offset=function(j){if(!j||"Z"===j)return 0;var fr=j.match(/([+-]|\d\d)/g),Fe=60*fr[1]+(+fr[2]||0);return 0===Fe?0:"+"===fr[0]?-Fe:Fe}(Xt)}],$t=function(Xt){var j=Rt[Xt];return j&&(j.indexOf?j:j.s.concat(j.f))},yt=function(Xt,j){var fr,Fe=Rt.meridiem;if(Fe){for(var vr=1;vr<=24;vr+=1)if(Xt.indexOf(Fe(vr,0,j))>-1){fr=vr>12;break}}else fr=Xt===(j?"pm":"PM");return fr},Ye={A:[D,function(Xt){this.afternoon=yt(Xt,!1)}],a:[D,function(Xt){this.afternoon=yt(Xt,!0)}],Q:[lt,function(Xt){this.month=3*(Xt-1)+1}],S:[lt,function(Xt){this.milliseconds=100*+Xt}],SS:[ee,function(Xt){this.milliseconds=10*+Xt}],SSS:[/\d{3}/,function(Xt){this.milliseconds=+Xt}],s:[L,q("seconds")],ss:[L,q("seconds")],m:[L,q("minutes")],mm:[L,q("minutes")],H:[L,q("hours")],h:[L,q("hours")],HH:[L,q("hours")],hh:[L,q("hours")],D:[L,q("day")],DD:[ee,q("day")],Do:[D,function(Xt){var j=Rt.ordinal,fr=Xt.match(/\d+/);if(this.day=fr[0],j)for(var Fe=1;Fe<=31;Fe+=1)j(Fe).replace(/\[|\]/g,"")===Xt&&(this.day=Fe)}],w:[L,q("week")],ww:[ee,q("week")],M:[L,q("month")],MM:[ee,q("month")],MMM:[D,function(Xt){var j=$t("months"),fr=($t("monthsShort")||j.map(function(Fe){return Fe.slice(0,3)})).indexOf(Xt)+1;if(fr<1)throw new Error;this.month=fr%12||fr}],MMMM:[D,function(Xt){var j=$t("months").indexOf(Xt)+1;if(j<1)throw new Error;this.month=j%12||j}],Y:[/[+-]?\d+/,q("year")],YY:[ee,function(Xt){this.year=dt(Xt)}],YYYY:[/\d{4}/,q("year")],Z:A,ZZ:A};return function(Xt,j,fr){fr.p.customParseFormat=!0,Xt&&Xt.parseTwoDigitYear&&(dt=Xt.parseTwoDigitYear);var Fe=j.prototype,vr=Fe.parse;Fe.parse=function(zr){var br=zr.date,mr=zr.utc,Er=zr.args;this.$u=mr;var Lr=Er[1];if("string"==typeof Lr){var Ar=!0===Er[2],ge=!0===Er[3],Br=Ar||ge,Ge=Er[2];ge&&(Ge=Er[2]),Rt=this.$locale(),!Ar&&Ge&&(Rt=fr.Ls[Ge]),this.$d=function(_e,Z,ae,S){try{if(["x","X"].indexOf(Z)>-1)return new Date(("X"===Z?1e3:1)*_e);var re=function bt(Xt){var fr;fr=Rt&&Rt.formats;for(var Fe=(Xt=Xt.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(Ar,ge,Br){var Ge=Br&&Br.toUpperCase();return ge||fr[Br]||_r[Br]||fr[Ge].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(W,ft,Bt){return ft||Bt.slice(1)})})).match(B),vr=Fe.length,zr=0;zr<vr;zr+=1){var br=Fe[zr],mr=Ye[br],Lr=mr&&mr[1];Fe[zr]=Lr?{regex:mr&&mr[0],parser:Lr}:br.replace(/^\[|\]$/g,"")}return function(Ar){for(var ge={},Br=0,Ge=0;Br<vr;Br+=1){var W=Fe[Br];if("string"==typeof W)Ge+=W.length;else{var ft=W.regex,Bt=W.parser,_e=Ar.slice(Ge),Z=ft.exec(_e)[0];Bt.call(ge,Z),Ar=Ar.replace(Z,"")}}return function(ae){var S=ae.afternoon;if(void 0!==S){var re=ae.hours;S?re<12&&(ae.hours+=12):12===re&&(ae.hours=0),delete ae.afternoon}}(ge),ge}}(Z)(_e),Pt=re.year,qt=re.month,V=re.day,pt=re.hours,H=re.minutes,Nt=re.seconds,wt=re.milliseconds,Wt=re.zone,xe=re.week,le=new Date,Re=V||(Pt||qt?1:le.getDate()),oe=Pt||le.getFullYear(),qe=0;Pt&&!qt||(qe=qt>0?qt-1:le.getMonth());var We,Ct=pt||0,St=H||0,R=Nt||0,O=wt||0;return Wt?new Date(Date.UTC(oe,qe,Re,Ct,St,R,O+60*Wt.offset*1e3)):ae?new Date(Date.UTC(oe,qe,Re,Ct,St,R,O)):(We=new Date(oe,qe,Re,Ct,St,R,O),xe&&(We=S(We).week(xe).toDate()),We)}catch{return new Date("")}}(br,Lr,mr,fr),this.init(),Ge&&!0!==Ge&&(this.$L=this.locale(Ge).$L),Br&&br!=this.format(Lr)&&(this.$d=new Date("")),Rt={}}else if(Lr instanceof Array)for(var W=Lr.length,ft=1;ft<=W;ft+=1){Er[1]=Lr[ft-1];var Bt=fr.apply(this,Er);if(Bt.isValid()){this.$d=Bt.$d,this.$L=Bt.$L,this.init();break}ft===W&&(this.$d=new Date(""))}else vr.call(this,zr)}}}()},30362:(ti,_r)=>{"use strict";let B;function lt(){if(void 0===B)throw new Error("No runtime abstraction layer installed");return B}Object.defineProperty(_r,"__esModule",{value:!0}),(lt||(lt={})).install=function L(D){if(void 0===D)throw new Error("No runtime abstraction layer provided");B=D},_r.default=lt},32239:(ti,_r,B)=>{"use strict";B.d(_r,{O:()=>ee});var ee=(0,B(32303).K2)(({flowchart:L})=>{const D=L?.subGraphTitleMargin?.top??0,Rt=L?.subGraphTitleMargin?.bottom??0;return{subGraphTitleTopMargin:D,subGraphTitleBottomMargin:Rt,subGraphTitleTotalMargin:D+Rt}},"getSubGraphTitleMargins")},32303:(ti,_r,B)=>{"use strict";B.d(_r,{He:()=>q,K2:()=>L,Rm:()=>dt,VA:()=>D});var lt=B(49645),ee=Object.defineProperty,L=($t,yt)=>ee($t,"name",{value:yt,configurable:!0}),D=($t,yt)=>{for(var Ye in yt)ee($t,Ye,{get:yt[Ye],enumerable:!0})},Rt={trace:0,debug:1,info:2,warn:3,error:4,fatal:5},dt={trace:L((...$t)=>{},"trace"),debug:L((...$t)=>{},"debug"),info:L((...$t)=>{},"info"),warn:L((...$t)=>{},"warn"),error:L((...$t)=>{},"error"),fatal:L((...$t)=>{},"fatal")},q=L(function($t="fatal"){let yt=Rt.fatal;"string"==typeof $t?$t.toLowerCase()in Rt&&(yt=Rt[$t]):"number"==typeof $t&&(yt=$t),dt.trace=()=>{},dt.debug=()=>{},dt.info=()=>{},dt.warn=()=>{},dt.error=()=>{},dt.fatal=()=>{},yt<=Rt.fatal&&(dt.fatal=console.error?console.error.bind(console,A("FATAL"),"color: orange"):console.log.bind(console,"\x1b[35m",A("FATAL"))),yt<=Rt.error&&(dt.error=console.error?console.error.bind(console,A("ERROR"),"color: orange"):console.log.bind(console,"\x1b[31m",A("ERROR"))),yt<=Rt.warn&&(dt.warn=console.warn?console.warn.bind(console,A("WARN"),"color: orange"):console.log.bind(console,"\x1b[33m",A("WARN"))),yt<=Rt.info&&(dt.info=console.info?console.info.bind(console,A("INFO"),"color: lightblue"):console.log.bind(console,"\x1b[34m",A("INFO"))),yt<=Rt.debug&&(dt.debug=console.debug?console.debug.bind(console,A("DEBUG"),"color: lightgreen"):console.log.bind(console,"\x1b[32m",A("DEBUG"))),yt<=Rt.trace&&(dt.trace=console.debug?console.debug.bind(console,A("TRACE"),"color: lightgreen"):console.log.bind(console,"\x1b[32m",A("TRACE")))},"setLogLevel"),A=L($t=>`%c${lt().format("ss.SSS")} : ${$t} : `,"format")},32699:(ti,_r,B)=>{"use strict";B.r(_r),B.d(_r,{diagram:()=>xt});var Xt,lt=B(89204),ee=B(45027),L=B(69664),D=B(59355),Rt=B(80525),dt=B(52052),q=B(79006),A=B(32303),$t=B(62233),yt=B(15363),Ye=B(10867),bt=B(40622),j={L:"left",R:"right",T:"top",B:"bottom"},fr={L:(0,A.K2)(it=>`${it},${it/2} 0,${it} 0,0`,"L"),R:(0,A.K2)(it=>`0,${it/2} ${it},0 ${it},${it}`,"R"),T:(0,A.K2)(it=>`0,0 ${it},0 ${it/2},${it}`,"T"),B:(0,A.K2)(it=>`${it/2},0 ${it},${it} 0,${it}`,"B")},Fe={L:(0,A.K2)((it,rt)=>it-rt+2,"L"),R:(0,A.K2)((it,rt)=>it-2,"R"),T:(0,A.K2)((it,rt)=>it-rt+2,"T"),B:(0,A.K2)((it,rt)=>it-2,"B")},vr=(0,A.K2)(function(it){return br(it)?"L"===it?"R":"L":"T"===it?"B":"T"},"getOppositeArchitectureDirection"),zr=(0,A.K2)(function(it){return"L"===it||"R"===it||"T"===it||"B"===it},"isArchitectureDirection"),br=(0,A.K2)(function(it){return"L"===it||"R"===it},"isArchitectureDirectionX"),mr=(0,A.K2)(function(it){return"T"===it||"B"===it},"isArchitectureDirectionY"),Er=(0,A.K2)(function(it,rt){const Et=br(it)&&mr(rt),ut=mr(it)&&br(rt);return Et||ut},"isArchitectureDirectionXY"),Lr=(0,A.K2)(function(it){const rt=it[0],Et=it[1],ut=br(rt)&&mr(Et),It=mr(rt)&&br(Et);return ut||It},"isArchitecturePairXY"),Ar=(0,A.K2)(function(it){return"LL"!==it&&"RR"!==it&&"TT"!==it&&"BB"!==it},"isValidArchitectureDirectionPair"),ge=(0,A.K2)(function(it,rt){const Et=`${it}${rt}`;return Ar(Et)?Et:void 0},"getArchitectureDirectionPair"),Br=(0,A.K2)(function([it,rt],Et){const ut=Et[0],It=Et[1];return br(ut)?mr(It)?[it+("L"===ut?-1:1),rt+("T"===It?1:-1)]:[it+("L"===ut?-1:1),rt]:br(It)?[it+("L"===It?1:-1),rt+("T"===ut?1:-1)]:[it,rt+("T"===ut?1:-1)]},"shiftPositionByArchitectureDirectionPair"),Ge=(0,A.K2)(function(it){return"LT"===it||"TL"===it?[1,1]:"BL"===it||"LB"===it?[1,-1]:"BR"===it||"RB"===it?[-1,-1]:[-1,1]},"getArchitectureDirectionXYFactors"),W=(0,A.K2)(function(it,rt){return Er(it,rt)?"bend":br(it)?"horizontal":"vertical"},"getArchitectureDirectionAlignment"),ft=(0,A.K2)(function(it){return"service"===it.type},"isArchitectureService"),Bt=(0,A.K2)(function(it){return"junction"===it.type},"isArchitectureJunction"),_e=(0,A.K2)(it=>it.data(),"edgeData"),Z=(0,A.K2)(it=>it.data(),"nodeData"),ae=q.UI.architecture,S=(class{constructor(){this.nodes={},this.groups={},this.edges=[],this.registeredIds={},this.elements={},this.setAccTitle=q.SV,this.getAccTitle=q.iN,this.setDiagramTitle=q.ke,this.getDiagramTitle=q.ab,this.getAccDescription=q.m7,this.setAccDescription=q.EI,this.clear()}clear(){this.nodes={},this.groups={},this.edges=[],this.registeredIds={},this.dataStructures=void 0,this.elements={},(0,q.IU)()}addService({id:it,icon:rt,in:Et,title:ut,iconText:It}){if(void 0!==this.registeredIds[it])throw new Error(`The service id [${it}] is already in use by another ${this.registeredIds[it]}`);if(void 0!==Et){if(it===Et)throw new Error(`The service [${it}] cannot be placed within itself`);if(void 0===this.registeredIds[Et])throw new Error(`The service [${it}]'s parent does not exist. Please make sure the parent is created before this service`);if("node"===this.registeredIds[Et])throw new Error(`The service [${it}]'s parent is not a group`)}this.registeredIds[it]="node",this.nodes[it]={id:it,type:"service",icon:rt,iconText:It,title:ut,edges:[],in:Et}}getServices(){return Object.values(this.nodes).filter(ft)}addJunction({id:it,in:rt}){this.registeredIds[it]="node",this.nodes[it]={id:it,type:"junction",edges:[],in:rt}}getJunctions(){return Object.values(this.nodes).filter(Bt)}getNodes(){return Object.values(this.nodes)}getNode(it){return this.nodes[it]??null}addGroup({id:it,icon:rt,in:Et,title:ut}){if(void 0!==this.registeredIds?.[it])throw new Error(`The group id [${it}] is already in use by another ${this.registeredIds[it]}`);if(void 0!==Et){if(it===Et)throw new Error(`The group [${it}] cannot be placed within itself`);if(void 0===this.registeredIds?.[Et])throw new Error(`The group [${it}]'s parent does not exist. Please make sure the parent is created before this group`);if("node"===this.registeredIds?.[Et])throw new Error(`The group [${it}]'s parent is not a group`)}this.registeredIds[it]="group",this.groups[it]={id:it,icon:rt,title:ut,in:Et}}getGroups(){return Object.values(this.groups)}addEdge({lhsId:it,rhsId:rt,lhsDir:Et,rhsDir:ut,lhsInto:It,rhsInto:G,lhsGroup:st,rhsGroup:Ce,title:Ot}){if(!zr(Et))throw new Error(`Invalid direction given for left hand side of edge ${it}--${rt}. Expected (L,R,T,B) got ${String(Et)}`);if(!zr(ut))throw new Error(`Invalid direction given for right hand side of edge ${it}--${rt}. Expected (L,R,T,B) got ${String(ut)}`);if(void 0===this.nodes[it]&&void 0===this.groups[it])throw new Error(`The left-hand id [${it}] does not yet exist. Please create the service/group before declaring an edge to it.`);if(void 0===this.nodes[rt]&&void 0===this.groups[rt])throw new Error(`The right-hand id [${rt}] does not yet exist. Please create the service/group before declaring an edge to it.`);const Jt=this.nodes[it].in,fe=this.nodes[rt].in;if(st&&Jt&&fe&&Jt==fe)throw new Error(`The left-hand id [${it}] is modified to traverse the group boundary, but the edge does not pass through two groups.`);if(Ce&&Jt&&fe&&Jt==fe)throw new Error(`The right-hand id [${rt}] is modified to traverse the group boundary, but the edge does not pass through two groups.`);this.edges.push({lhsId:it,lhsDir:Et,lhsInto:It,lhsGroup:st,rhsId:rt,rhsDir:ut,rhsInto:G,rhsGroup:Ce,title:Ot}),this.nodes[it]&&this.nodes[rt]&&(this.nodes[it].edges.push(this.edges[this.edges.length-1]),this.nodes[rt].edges.push(this.edges[this.edges.length-1]))}getEdges(){return this.edges}getDataStructures(){if(void 0===this.dataStructures){const it={},rt=Object.entries(this.nodes).reduce((Ce,[Ot,Jt])=>(Ce[Ot]=Jt.edges.reduce((fe,Be)=>{const Ze=this.getNode(Be.lhsId)?.in,ye=this.getNode(Be.rhsId)?.in;if(Ze&&ye&&Ze!==ye){const kr=W(Be.lhsDir,Be.rhsDir);"bend"!==kr&&(it[Ze]??={},it[Ze][ye]=kr,it[ye]??={},it[ye][Ze]=kr)}if(Be.lhsId===Ot){const kr=ge(Be.lhsDir,Be.rhsDir);kr&&(fe[kr]=Be.rhsId)}else{const kr=ge(Be.rhsDir,Be.lhsDir);kr&&(fe[kr]=Be.lhsId)}return fe},{}),Ce),{}),Et=Object.keys(rt)[0],ut={[Et]:1},It=Object.keys(rt).reduce((Ce,Ot)=>Ot===Et?Ce:{...Ce,[Ot]:1},{}),G=(0,A.K2)(Ce=>{const Ot={[Ce]:[0,0]},Jt=[Ce];for(;Jt.length>0;){const fe=Jt.shift();if(fe){ut[fe]=1,delete It[fe];const Be=rt[fe],[Ze,ye]=Ot[fe];Object.entries(Be).forEach(([kr,ur])=>{ut[ur]||(Ot[ur]=Br([Ze,ye],kr),Jt.push(ur))})}}return Ot},"BFS"),st=[G(Et)];for(;Object.keys(It).length>0;)st.push(G(Object.keys(It)[0]));this.dataStructures={adjList:rt,spatialMaps:st,groupAlignments:it}}return this.dataStructures}setElementForId(it,rt){this.elements[it]=rt}getElementById(it){return this.elements[it]}getConfig(){return(0,dt.$t)({...ae,...(0,q.zj)().architecture})}getConfigField(it){return this.getConfig()[it]}static#t=Xt=()=>((0,ee.A)(this,"ArchitectureDB"),(0,A.K2)(this,"ArchitectureDB"),this)},Xt()),re=(0,A.K2)((it,rt)=>{(0,Rt.S)(it,rt),it.groups.map(Et=>rt.addGroup(Et)),it.services.map(Et=>rt.addService({...Et,type:"service"})),it.junctions.map(Et=>rt.addJunction({...Et,type:"junction"})),it.edges.map(Et=>rt.addEdge(Et))},"populateDb"),Pt={parser:{yy:void 0},parse:(0,A.K2)(function(){var it=(0,lt.A)(function*(rt){const Et=yield(0,$t.qg)("architecture",rt);A.Rm.debug(Et);const ut=Pt.parser?.yy;if(!(ut instanceof S))throw new Error("parser.parser?.yy was not a ArchitectureDB. This is due to a bug within Mermaid, please report this issue at https://github.com/mermaid-js/mermaid/issues.");re(Et,ut)});return function(rt){return it.apply(this,arguments)}}(),"parse")},V=(0,A.K2)(it=>`\n  .edge {\n    stroke-width: ${it.archEdgeWidth};\n    stroke: ${it.archEdgeColor};\n    fill: none;\n  }\n\n  .arrow {\n    fill: ${it.archEdgeArrowColor};\n  }\n\n  .node-bkg {\n    fill: none;\n    stroke: ${it.archGroupBorderColor};\n    stroke-width: ${it.archGroupBorderWidth};\n    stroke-dasharray: 8;\n  }\n  .node-icon-text {\n    display: flex; \n    align-items: center;\n  }\n  \n  .node-icon-text > div {\n    color: #fff;\n    margin: 1px;\n    height: fit-content;\n    text-align: center;\n    overflow: hidden;\n    display: -webkit-box;\n    -webkit-box-orient: vertical;\n  }\n`,"getStyles"),pt=(0,A.K2)(it=>`<g><rect width="80" height="80" style="fill: #087ebf; stroke-width: 0px;"/>${it}</g>`,"wrapIcon"),H={prefix:"mermaid-architecture",height:80,width:80,icons:{database:{body:pt('<path id="b" data-name="4" d="m20,57.86c0,3.94,8.95,7.14,20,7.14s20-3.2,20-7.14" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><path id="c" data-name="3" d="m20,45.95c0,3.94,8.95,7.14,20,7.14s20-3.2,20-7.14" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><path id="d" data-name="2" d="m20,34.05c0,3.94,8.95,7.14,20,7.14s20-3.2,20-7.14" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><ellipse id="e" data-name="1" cx="40" cy="22.14" rx="20" ry="7.14" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="20" y1="57.86" x2="20" y2="22.14" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="60" y1="57.86" x2="60" y2="22.14" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/>')},server:{body:pt('<rect x="17.5" y="17.5" width="45" height="45" rx="2" ry="2" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="17.5" y1="32.5" x2="62.5" y2="32.5" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="17.5" y1="47.5" x2="62.5" y2="47.5" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><g><path d="m56.25,25c0,.27-.45.5-1,.5h-10.5c-.55,0-1-.23-1-.5s.45-.5,1-.5h10.5c.55,0,1,.23,1,.5Z" style="fill: #fff; stroke-width: 0px;"/><path d="m56.25,25c0,.27-.45.5-1,.5h-10.5c-.55,0-1-.23-1-.5s.45-.5,1-.5h10.5c.55,0,1,.23,1,.5Z" style="fill: none; stroke: #fff; stroke-miterlimit: 10;"/></g><g><path d="m56.25,40c0,.27-.45.5-1,.5h-10.5c-.55,0-1-.23-1-.5s.45-.5,1-.5h10.5c.55,0,1,.23,1,.5Z" style="fill: #fff; stroke-width: 0px;"/><path d="m56.25,40c0,.27-.45.5-1,.5h-10.5c-.55,0-1-.23-1-.5s.45-.5,1-.5h10.5c.55,0,1,.23,1,.5Z" style="fill: none; stroke: #fff; stroke-miterlimit: 10;"/></g><g><path d="m56.25,55c0,.27-.45.5-1,.5h-10.5c-.55,0-1-.23-1-.5s.45-.5,1-.5h10.5c.55,0,1,.23,1,.5Z" style="fill: #fff; stroke-width: 0px;"/><path d="m56.25,55c0,.27-.45.5-1,.5h-10.5c-.55,0-1-.23-1-.5s.45-.5,1-.5h10.5c.55,0,1,.23,1,.5Z" style="fill: none; stroke: #fff; stroke-miterlimit: 10;"/></g><g><circle cx="32.5" cy="25" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/><circle cx="27.5" cy="25" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/><circle cx="22.5" cy="25" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/></g><g><circle cx="32.5" cy="40" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/><circle cx="27.5" cy="40" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/><circle cx="22.5" cy="40" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/></g><g><circle cx="32.5" cy="55" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/><circle cx="27.5" cy="55" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/><circle cx="22.5" cy="55" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/></g>')},disk:{body:pt('<rect x="20" y="15" width="40" height="50" rx="1" ry="1" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><ellipse cx="24" cy="19.17" rx=".8" ry=".83" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><ellipse cx="56" cy="19.17" rx=".8" ry=".83" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><ellipse cx="24" cy="60.83" rx=".8" ry=".83" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><ellipse cx="56" cy="60.83" rx=".8" ry=".83" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><ellipse cx="40" cy="33.75" rx="14" ry="14.58" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><ellipse cx="40" cy="33.75" rx="4" ry="4.17" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><path d="m37.51,42.52l-4.83,13.22c-.26.71-1.1,1.02-1.76.64l-4.18-2.42c-.66-.38-.81-1.26-.33-1.84l9.01-10.8c.88-1.05,2.56-.08,2.09,1.2Z" style="fill: #fff; stroke-width: 0px;"/>')},internet:{body:pt('<circle cx="40" cy="40" r="22.5" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="40" y1="17.5" x2="40" y2="62.5" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="17.5" y1="40" x2="62.5" y2="40" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><path d="m39.99,17.51c-15.28,11.1-15.28,33.88,0,44.98" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><path d="m40.01,17.51c15.28,11.1,15.28,33.88,0,44.98" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="19.75" y1="30.1" x2="60.25" y2="30.1" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="19.75" y1="49.9" x2="60.25" y2="49.9" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/>')},cloud:{body:pt('<path d="m65,47.5c0,2.76-2.24,5-5,5H20c-2.76,0-5-2.24-5-5,0-1.87,1.03-3.51,2.56-4.36-.04-.21-.06-.42-.06-.64,0-2.6,2.48-4.74,5.65-4.97,1.65-4.51,6.34-7.76,11.85-7.76.86,0,1.69.08,2.5.23,2.09-1.57,4.69-2.5,7.5-2.5,6.1,0,11.19,4.38,12.28,10.17,2.14.56,3.72,2.51,3.72,4.83,0,.03,0,.07-.01.1,2.29.46,4.01,2.48,4.01,4.9Z" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/>')},unknown:D.Gc,blank:{body:pt("")}}},Nt=(0,A.K2)(function(){var it=(0,lt.A)(function*(rt,Et,ut){const It=ut.getConfigField("padding"),G=ut.getConfigField("iconSize"),st=G/2,Ce=G/6,Ot=Ce/2;yield Promise.all(Et.edges().map(function(){var Jt=(0,lt.A)(function*(fe){const{source:Be,sourceDir:Ze,sourceArrow:ye,sourceGroup:kr,target:ur,targetDir:Kt,targetArrow:Pe,targetGroup:ir,label:me}=_e(fe);let{x:ce,y:ke}=fe[0].sourceEndpoint();const{x:Te,y:er}=fe[0].midpoint();let{x:Xe,y:Ir}=fe[0].targetEndpoint();const Ee=It+4;if(kr&&(br(Ze)?ce+="L"===Ze?-Ee:Ee:ke+="T"===Ze?-Ee:Ee+18),ir&&(br(Kt)?Xe+="L"===Kt?-Ee:Ee:Ir+="T"===Kt?-Ee:Ee+18),!kr&&"junction"===ut.getNode(Be)?.type&&(br(Ze)?ce+="L"===Ze?st:-st:ke+="T"===Ze?st:-st),!ir&&"junction"===ut.getNode(ur)?.type&&(br(Kt)?Xe+="L"===Kt?st:-st:Ir+="T"===Kt?st:-st),fe[0]._private.rscratch){const qr=rt.insert("g");if(qr.insert("path").attr("d",`M ${ce},${ke} L ${Te},${er} L${Xe},${Ir} `).attr("class","edge").attr("id",(0,dt.rY)(Be,ur,{prefix:"L"})),ye){const nr=br(Ze)?Fe[Ze](ce,Ce):ce-Ot,te=mr(Ze)?Fe[Ze](ke,Ce):ke-Ot;qr.insert("polygon").attr("points",fr[Ze](Ce)).attr("transform",`translate(${nr},${te})`).attr("class","arrow")}if(Pe){const nr=br(Kt)?Fe[Kt](Xe,Ce):Xe-Ot,te=mr(Kt)?Fe[Kt](Ir,Ce):Ir-Ot;qr.insert("polygon").attr("points",fr[Kt](Ce)).attr("transform",`translate(${nr},${te})`).attr("class","arrow")}if(me){const nr=Er(Ze,Kt)?"XY":br(Ze)?"X":"Y";let te=0;te="X"===nr?Math.abs(ce-Xe):"Y"===nr?Math.abs(ke-Ir)/1.5:Math.abs(ce-Xe)/2;const ne=qr.append("g");if(yield(0,D.GZ)(ne,me,{useHtmlLabels:!1,width:te,classes:"architecture-service-label"},(0,q.D7)()),ne.attr("dy","1em").attr("alignment-baseline","middle").attr("dominant-baseline","middle").attr("text-anchor","middle"),"X"===nr)ne.attr("transform","translate("+Te+", "+er+")");else if("Y"===nr)ne.attr("transform","translate("+Te+", "+er+") rotate(-90)");else if("XY"===nr){const Le=ge(Ze,Kt);if(Le&&Lr(Le)){const tr=ne.node().getBoundingClientRect(),[g,y]=Ge(Le);ne.attr("dominant-baseline","auto").attr("transform",`rotate(${-1*g*y*45})`);const E=ne.node().getBoundingClientRect();ne.attr("transform",`\n                translate(${Te}, ${er-tr.height/2})\n                translate(${g*E.width/2}, ${y*E.height/2})\n                rotate(${-1*g*y*45}, 0, ${tr.height/2})\n              `)}}}}});return function(fe){return Jt.apply(this,arguments)}}()))});return function(rt,Et,ut){return it.apply(this,arguments)}}(),"drawEdges"),wt=(0,A.K2)(function(){var it=(0,lt.A)(function*(rt,Et,ut){const G=.75*ut.getConfigField("padding"),st=ut.getConfigField("fontSize"),Ot=ut.getConfigField("iconSize")/2;yield Promise.all(Et.nodes().map(function(){var Jt=(0,lt.A)(function*(fe){const Be=Z(fe);if("group"===Be.type){const{h:Ze,w:ye,x1:kr,y1:ur}=fe.boundingBox(),Kt=rt.append("rect");Kt.attr("id",`group-${Be.id}`).attr("x",kr+Ot).attr("y",ur+Ot).attr("width",ye).attr("height",Ze).attr("class","node-bkg");const Pe=rt.append("g");let ir=kr,me=ur;if(Be.icon){const ce=Pe.append("g");ce.html(`<g>${yield(0,D.WY)(Be.icon,{height:G,width:G,fallbackPrefix:H.prefix})}</g>`),ce.attr("transform","translate("+(ir+Ot+1)+", "+(me+Ot+1)+")"),ir+=G,me+=st/2-1-2}if(Be.label){const ce=Pe.append("g");yield(0,D.GZ)(ce,Be.label,{useHtmlLabels:!1,width:ye,classes:"architecture-service-label"},(0,q.D7)()),ce.attr("dy","1em").attr("alignment-baseline","middle").attr("dominant-baseline","start").attr("text-anchor","start"),ce.attr("transform","translate("+(ir+Ot+4)+", "+(me+Ot+2)+")")}ut.setElementForId(Be.id,Kt)}});return function(fe){return Jt.apply(this,arguments)}}()))});return function(rt,Et,ut){return it.apply(this,arguments)}}(),"drawGroups"),Wt=(0,A.K2)(function(){var it=(0,lt.A)(function*(rt,Et,ut){const It=(0,q.D7)();for(const G of ut){const st=Et.append("g"),Ce=rt.getConfigField("iconSize");if(G.title){const Be=st.append("g");yield(0,D.GZ)(Be,G.title,{useHtmlLabels:!1,width:1.5*Ce,classes:"architecture-service-label"},It),Be.attr("dy","1em").attr("alignment-baseline","middle").attr("dominant-baseline","middle").attr("text-anchor","middle"),Be.attr("transform","translate("+Ce/2+", "+Ce+")")}const Ot=st.append("g");if(G.icon)Ot.html(`<g>${yield(0,D.WY)(G.icon,{height:Ce,width:Ce,fallbackPrefix:H.prefix})}</g>`);else if(G.iconText){Ot.html(`<g>${yield(0,D.WY)("blank",{height:Ce,width:Ce,fallbackPrefix:H.prefix})}</g>`);const ye=Ot.append("g").append("foreignObject").attr("width",Ce).attr("height",Ce).append("div").attr("class","node-icon-text").attr("style",`height: ${Ce}px;`).append("div").html((0,q.jZ)(G.iconText,It)),kr=parseInt(window.getComputedStyle(ye.node(),null).getPropertyValue("font-size").replace(/\D/g,""))??16;ye.attr("style",`-webkit-line-clamp: ${Math.floor((Ce-2)/kr)};`)}else Ot.append("path").attr("class","node-bkg").attr("id","node-"+G.id).attr("d",`M0 ${Ce} v${-Ce} q0,-5 5,-5 h${Ce} q5,0 5,5 v${Ce} H0 Z`);st.attr("id",`service-${G.id}`).attr("class","architecture-service");const{width:Jt,height:fe}=st.node().getBBox();G.width=Jt,G.height=fe,rt.setElementForId(G.id,st)}return 0});return function(rt,Et,ut){return it.apply(this,arguments)}}(),"drawServices"),xe=(0,A.K2)(function(it,rt,Et){Et.forEach(ut=>{const It=rt.append("g"),G=it.getConfigField("iconSize");It.append("g").append("rect").attr("id","node-"+ut.id).attr("fill-opacity","0").attr("width",G).attr("height",G),It.attr("class","architecture-junction");const{width:Ce,height:Ot}=It._groups[0][0].getBBox();It.width=Ce,It.height=Ot,it.setElementForId(ut.id,It)})},"drawJunctions");function le(it,rt,Et){it.forEach(ut=>{rt.add({group:"nodes",data:{type:"service",id:ut.id,icon:ut.icon,label:ut.title,parent:ut.in,width:Et.getConfigField("iconSize"),height:Et.getConfigField("iconSize")},classes:"node-service"})})}function Re(it,rt,Et){it.forEach(ut=>{rt.add({group:"nodes",data:{type:"junction",id:ut.id,parent:ut.in,width:Et.getConfigField("iconSize"),height:Et.getConfigField("iconSize")},classes:"node-junction"})})}function oe(it,rt){rt.nodes().map(Et=>{const ut=Z(Et);"group"!==ut.type&&(ut.x=Et.position().x,ut.y=Et.position().y,it.getElementById(ut.id).attr("transform","translate("+(ut.x||0)+","+(ut.y||0)+")"))})}function qe(it,rt){it.forEach(Et=>{rt.add({group:"nodes",data:{type:"group",id:Et.id,icon:Et.icon,label:Et.title,parent:Et.in},classes:"node-group"})})}function We(it,rt){it.forEach(Et=>{const{lhsId:ut,rhsId:It,lhsInto:G,lhsGroup:st,rhsInto:Ce,lhsDir:Ot,rhsDir:Jt,rhsGroup:fe,title:Be}=Et,Ze=Er(Et.lhsDir,Et.rhsDir)?"segments":"straight";rt.add({group:"edges",data:{id:`${ut}-${It}`,label:Be,source:ut,sourceDir:Ot,sourceArrow:G,sourceGroup:st,sourceEndpoint:"L"===Ot?"0 50%":"R"===Ot?"100% 50%":"T"===Ot?"50% 0":"50% 100%",target:It,targetDir:Jt,targetArrow:Ce,targetGroup:fe,targetEndpoint:"L"===Jt?"0 50%":"R"===Jt?"100% 50%":"T"===Jt?"50% 0":"50% 100%"},classes:Ze})})}function Ct(it,rt,Et){const ut=(0,A.K2)((Ce,Ot)=>Object.entries(Ce).reduce((Jt,[fe,Be])=>{let Ze=0;const ye=Object.entries(Be);if(1===ye.length)return Jt[fe]=ye[0][1],Jt;for(let kr=0;kr<ye.length-1;kr++)for(let ur=kr+1;ur<ye.length;ur++){const[Kt,Pe]=ye[kr],[ir,me]=ye[ur];Et[Kt]?.[ir]===Ot||"default"===Kt||"default"===ir?(Jt[fe]??=[],Jt[fe]=[...Jt[fe],...Pe,...me]):(Jt[`${fe}-${Ze++}`]=Pe,Jt[`${fe}-${Ze++}`]=me)}return Jt},{}),"flattenAlignments"),It=rt.map(Ce=>{const Ot={},Jt={};return Object.entries(Ce).forEach(([fe,[Be,Ze]])=>{const ye=it.getNode(fe)?.in??"default";Ot[Ze]??={},Ot[Ze][ye]??=[],Ot[Ze][ye].push(fe),Jt[Be]??={},Jt[Be][ye]??=[],Jt[Be][ye].push(fe)}),{horiz:Object.values(ut(Ot,"horizontal")).filter(fe=>fe.length>1),vert:Object.values(ut(Jt,"vertical")).filter(fe=>fe.length>1)}}),[G,st]=It.reduce(([Ce,Ot],{horiz:Jt,vert:fe})=>[[...Ce,...Jt],[...Ot,...fe]],[[],[]]);return{horizontal:G,vertical:st}}function St(it,rt){const Et=[],ut=(0,A.K2)(G=>`${G[0]},${G[1]}`,"posToStr"),It=(0,A.K2)(G=>G.split(",").map(st=>parseInt(st)),"strToPos");return it.forEach(G=>{const st=Object.fromEntries(Object.entries(G).map(([fe,Be])=>[ut(Be),fe])),Ce=[ut([0,0])],Ot={},Jt={L:[-1,0],R:[1,0],T:[0,1],B:[0,-1]};for(;Ce.length>0;){const fe=Ce.shift();if(fe){Ot[fe]=1;const Be=st[fe];if(Be){const Ze=It(fe);Object.entries(Jt).forEach(([ye,kr])=>{const ur=ut([Ze[0]+kr[0],Ze[1]+kr[1]]),Kt=st[ur];Kt&&!Ot[ur]&&(Ce.push(ur),Et.push({[j[ye]]:Kt,[j[vr(ye)]]:Be,gap:1.5*rt.getConfigField("iconSize")}))})}}}}),Et}function R(it,rt,Et,ut,It,{spatialMaps:G,groupAlignments:st}){return new Promise(Ce=>{const Ot=(0,bt.Ltv)("body").append("div").attr("id","cy").attr("style","display:none"),Jt=(0,yt.A)({container:document.getElementById("cy"),style:[{selector:"edge",style:{"curve-style":"straight",label:"data(label)","source-endpoint":"data(sourceEndpoint)","target-endpoint":"data(targetEndpoint)"}},{selector:"edge.segments",style:{"curve-style":"segments","segment-weights":"0","segment-distances":[.5],"edge-distances":"endpoints","source-endpoint":"data(sourceEndpoint)","target-endpoint":"data(targetEndpoint)"}},{selector:"node",style:{"compound-sizing-wrt-labels":"include"}},{selector:"node[label]",style:{"text-valign":"bottom","text-halign":"center","font-size":`${It.getConfigField("fontSize")}px`}},{selector:".node-service",style:{label:"data(label)",width:"data(width)",height:"data(height)"}},{selector:".node-junction",style:{width:"data(width)",height:"data(height)"}},{selector:".node-group",style:{padding:`${It.getConfigField("padding")}px`}}],layout:{name:"grid",boundingBox:{x1:0,x2:100,y1:0,y2:100}}});Ot.remove(),qe(Et,Jt),le(it,Jt,It),Re(rt,Jt,It),We(ut,Jt);const fe=Ct(It,G,st),Be=St(G,It),Ze=Jt.layout({name:"fcose",quality:"proof",styleEnabled:!1,animate:!1,nodeDimensionsIncludeLabels:!1,idealEdgeLength(ye){const[kr,ur]=ye.connectedNodes(),{parent:Kt}=Z(kr),{parent:Pe}=Z(ur);return Kt===Pe?1.5*It.getConfigField("iconSize"):.5*It.getConfigField("iconSize")},edgeElasticity(ye){const[kr,ur]=ye.connectedNodes(),{parent:Kt}=Z(kr),{parent:Pe}=Z(ur);return Kt===Pe?.45:.001},alignmentConstraint:fe,relativePlacementConstraint:Be});Ze.one("layoutstop",()=>{function ye(kr,ur,Kt,Pe){let ir,me;const{x:ce,y:ke}=kr,{x:Te,y:er}=ur;me=(Pe-ke+(ce-Kt)*(ke-er)/(ce-Te))/Math.sqrt(1+Math.pow((ke-er)/(ce-Te),2)),ir=Math.sqrt(Math.pow(Pe-ke,2)+Math.pow(Kt-ce,2)-Math.pow(me,2)),ir/=Math.sqrt(Math.pow(Te-ce,2)+Math.pow(er-ke,2));let Ir=(Te-ce)*(Pe-ke)-(er-ke)*(Kt-ce);switch(!0){case Ir>=0:Ir=1;break;case Ir<0:Ir=-1}let Ee=(Te-ce)*(Kt-ce)+(er-ke)*(Pe-ke);switch(!0){case Ee>=0:Ee=1;break;case Ee<0:Ee=-1}return me=Math.abs(me)*Ir,ir*=Ee,{distances:me,weights:ir}}(0,A.K2)(ye,"getSegmentWeights"),Jt.startBatch();for(const kr of Object.values(Jt.edges()))if(kr.data?.()){const{x:ur,y:Kt}=kr.source().position(),{x:Pe,y:ir}=kr.target().position();if(ur!==Pe&&Kt!==ir){const me=kr.sourceEndpoint(),ce=kr.targetEndpoint(),{sourceDir:ke}=_e(kr),[Te,er]=mr(ke)?[me.x,ce.y]:[ce.x,me.y],{weights:Xe,distances:Ir}=ye(me,ce,Te,er);kr.style("segment-distances",Ir),kr.style("segment-weights",Xe)}}Jt.endBatch(),Ze.run()}),Ze.run(),Jt.ready(ye=>{A.Rm.info("Ready",ye),Ce(Jt)})})}(0,D.pC)([{name:H.prefix,icons:H}]),yt.A.use(Ye),(0,A.K2)(le,"addServices"),(0,A.K2)(Re,"addJunctions"),(0,A.K2)(oe,"positionNodes"),(0,A.K2)(qe,"addGroups"),(0,A.K2)(We,"addEdges"),(0,A.K2)(Ct,"getAlignments"),(0,A.K2)(St,"getRelativeConstraints"),(0,A.K2)(R,"layoutArchitecture");var et={draw:(0,A.K2)(function(){var it=(0,lt.A)(function*(rt,Et,ut,It){const G=It.db,st=G.getServices(),Ce=G.getJunctions(),Ot=G.getGroups(),Jt=G.getEdges(),fe=G.getDataStructures(),Be=(0,L.D)(Et),Ze=Be.append("g");Ze.attr("class","architecture-edges");const ye=Be.append("g");ye.attr("class","architecture-services");const kr=Be.append("g");kr.attr("class","architecture-groups"),yield Wt(G,ye,st),xe(G,ye,Ce);const ur=yield R(st,Ce,Ot,Jt,G,fe);yield Nt(Ze,ur,G),yield wt(kr,ur,G),oe(G,ur),(0,q.ot)(void 0,Be,G.getConfigField("padding"),G.getConfigField("useMaxWidth"))});return function(rt,Et,ut,It){return it.apply(this,arguments)}}(),"draw")},xt={parser:Pt,get db(){return new S},renderer:et,styles:V}},32810:(ti,_r,B)=>{"use strict";B.r(_r),B.d(_r,{diagram:()=>qt});var lt=B(89204),ee=B(69664),L=B(80525),D=B(52052),Rt=B(79006),dt=B(32303),q=B(62233),A={showLegend:!0,ticks:5,max:null,min:0,graticule:"circle"},$t={axes:[],curves:[],options:A},yt=structuredClone($t),Ye=Rt.UI.radar,bt=(0,dt.K2)(()=>(0,D.$t)({...Ye,...(0,Rt.zj)().radar}),"getConfig"),Xt=(0,dt.K2)(()=>yt.axes,"getAxes"),j=(0,dt.K2)(()=>yt.curves,"getCurves"),fr=(0,dt.K2)(()=>yt.options,"getOptions"),Fe=(0,dt.K2)(V=>{yt.axes=V.map(pt=>({name:pt.name,label:pt.label??pt.name}))},"setAxes"),vr=(0,dt.K2)(V=>{yt.curves=V.map(pt=>({name:pt.name,label:pt.label??pt.name,entries:zr(pt.entries)}))},"setCurves"),zr=(0,dt.K2)(V=>{if(null==V[0].axis)return V.map(H=>H.value);const pt=Xt();if(0===pt.length)throw new Error("Axes must be populated before curves for reference entries");return pt.map(H=>{const Nt=V.find(wt=>wt.axis?.$refText===H.name);if(void 0===Nt)throw new Error("Missing entry for axis "+H.label);return Nt.value})},"computeCurveEntries"),Er={getAxes:Xt,getCurves:j,getOptions:fr,setAxes:Fe,setCurves:vr,setOptions:(0,dt.K2)(V=>{const pt=V.reduce((H,Nt)=>(H[Nt.name]=Nt,H),{});yt.options={showLegend:pt.showLegend?.value??A.showLegend,ticks:pt.ticks?.value??A.ticks,max:pt.max?.value??A.max,min:pt.min?.value??A.min,graticule:pt.graticule?.value??A.graticule}},"setOptions"),getConfig:bt,clear:(0,dt.K2)(()=>{(0,Rt.IU)(),yt=structuredClone($t)},"clear"),setAccTitle:Rt.SV,getAccTitle:Rt.iN,setDiagramTitle:Rt.ke,getDiagramTitle:Rt.ab,getAccDescription:Rt.m7,setAccDescription:Rt.EI},Lr=(0,dt.K2)(V=>{(0,L.S)(V,Er);const{axes:pt,curves:H,options:Nt}=V;Er.setAxes(pt),Er.setCurves(H),Er.setOptions(Nt)},"populate"),Ar={parse:(0,dt.K2)(function(){var V=(0,lt.A)(function*(pt){const H=yield(0,q.qg)("radar",pt);dt.Rm.debug(H),Lr(H)});return function(pt){return V.apply(this,arguments)}}(),"parse")},ge=(0,dt.K2)((V,pt,H,Nt)=>{const wt=Nt.db,Wt=wt.getAxes(),xe=wt.getCurves(),le=wt.getOptions(),Re=wt.getConfig(),oe=wt.getDiagramTitle(),qe=(0,ee.D)(pt),We=Br(qe,Re),Ct=le.max??Math.max(...xe.map(O=>Math.max(...O.entries))),St=le.min,R=Math.min(Re.width,Re.height)/2;Ge(We,Wt,R,le.ticks,le.graticule),W(We,Wt,R,Re),ft(We,Wt,xe,St,Ct,le.graticule,Re),Z(We,xe,le.showLegend,Re),We.append("text").attr("class","radarTitle").text(oe).attr("x",0).attr("y",-Re.height/2-Re.marginTop)},"draw"),Br=(0,dt.K2)((V,pt)=>{const H=pt.width+pt.marginLeft+pt.marginRight,Nt=pt.height+pt.marginTop+pt.marginBottom,wt_x=pt.marginLeft+pt.width/2,wt_y=pt.marginTop+pt.height/2;return V.attr("viewbox",`0 0 ${H} ${Nt}`).attr("width",H).attr("height",Nt),V.append("g").attr("transform",`translate(${wt_x}, ${wt_y})`)},"drawFrame"),Ge=(0,dt.K2)((V,pt,H,Nt,wt)=>{if("circle"===wt)for(let Wt=0;Wt<Nt;Wt++){const xe=H*(Wt+1)/Nt;V.append("circle").attr("r",xe).attr("class","radarGraticule")}else if("polygon"===wt){const Wt=pt.length;for(let xe=0;xe<Nt;xe++){const le=H*(xe+1)/Nt,Re=pt.map((oe,qe)=>{const We=2*qe*Math.PI/Wt-Math.PI/2;return`${le*Math.cos(We)},${le*Math.sin(We)}`}).join(" ");V.append("polygon").attr("points",Re).attr("class","radarGraticule")}}},"drawGraticule"),W=(0,dt.K2)((V,pt,H,Nt)=>{const wt=pt.length;for(let Wt=0;Wt<wt;Wt++){const xe=pt[Wt].label,le=2*Wt*Math.PI/wt-Math.PI/2;V.append("line").attr("x1",0).attr("y1",0).attr("x2",H*Nt.axisScaleFactor*Math.cos(le)).attr("y2",H*Nt.axisScaleFactor*Math.sin(le)).attr("class","radarAxisLine"),V.append("text").text(xe).attr("x",H*Nt.axisLabelFactor*Math.cos(le)).attr("y",H*Nt.axisLabelFactor*Math.sin(le)).attr("class","radarAxisLabel")}},"drawAxes");function ft(V,pt,H,Nt,wt,Wt,xe){const le=pt.length,Re=Math.min(xe.width,xe.height)/2;H.forEach((oe,qe)=>{if(oe.entries.length!==le)return;const We=oe.entries.map((Ct,St)=>{const R=2*Math.PI*St/le-Math.PI/2,O=Bt(Ct,Nt,wt,Re);return{x:O*Math.cos(R),y:O*Math.sin(R)}});"circle"===Wt?V.append("path").attr("d",_e(We,xe.curveTension)).attr("class",`radarCurve-${qe}`):"polygon"===Wt&&V.append("polygon").attr("points",We.map(Ct=>`${Ct.x},${Ct.y}`).join(" ")).attr("class",`radarCurve-${qe}`)})}function Bt(V,pt,H,Nt){return Nt*(Math.min(Math.max(V,pt),H)-pt)/(H-pt)}function _e(V,pt){const H=V.length;let Nt=`M${V[0].x},${V[0].y}`;for(let wt=0;wt<H;wt++){const Wt=V[(wt-1+H)%H],xe=V[wt],le=V[(wt+1)%H],Re=V[(wt+2)%H],oe={x:xe.x+(le.x-Wt.x)*pt,y:xe.y+(le.y-Wt.y)*pt},qe={x:le.x-(Re.x-xe.x)*pt,y:le.y-(Re.y-xe.y)*pt};Nt+=` C${oe.x},${oe.y} ${qe.x},${qe.y} ${le.x},${le.y}`}return`${Nt} Z`}function Z(V,pt,H,Nt){if(!H)return;const wt=3*(Nt.width/2+Nt.marginRight)/4,Wt=3*-(Nt.height/2+Nt.marginTop)/4;pt.forEach((le,Re)=>{const oe=V.append("g").attr("transform",`translate(${wt}, ${Wt+20*Re})`);oe.append("rect").attr("width",12).attr("height",12).attr("class",`radarLegendBox-${Re}`),oe.append("text").attr("x",16).attr("y",0).attr("class","radarLegendText").text(le.label)})}(0,dt.K2)(ft,"drawCurves"),(0,dt.K2)(Bt,"relativeRadius"),(0,dt.K2)(_e,"closedRoundCurve"),(0,dt.K2)(Z,"drawLegend");var ae={draw:ge},S=(0,dt.K2)((V,pt)=>{let H="";for(let Nt=0;Nt<V.THEME_COLOR_LIMIT;Nt++){const wt=V[`cScale${Nt}`];H+=`\n\t\t.radarCurve-${Nt} {\n\t\t\tcolor: ${wt};\n\t\t\tfill: ${wt};\n\t\t\tfill-opacity: ${pt.curveOpacity};\n\t\t\tstroke: ${wt};\n\t\t\tstroke-width: ${pt.curveStrokeWidth};\n\t\t}\n\t\t.radarLegendBox-${Nt} {\n\t\t\tfill: ${wt};\n\t\t\tfill-opacity: ${pt.curveOpacity};\n\t\t\tstroke: ${wt};\n\t\t}\n\t\t`}return H},"genIndexStyles"),re=(0,dt.K2)(V=>{const pt=(0,Rt.P$)(),H=(0,Rt.zj)(),Nt=(0,D.$t)(pt,H.themeVariables);return{themeVariables:Nt,radarOptions:(0,D.$t)(Nt.radar,V)}},"buildRadarStyleOptions"),qt={parser:Ar,db:Er,renderer:ae,styles:(0,dt.K2)(({radar:V}={})=>{const{themeVariables:pt,radarOptions:H}=re(V);return`\n\t.radarTitle {\n\t\tfont-size: ${pt.fontSize};\n\t\tcolor: ${pt.titleColor};\n\t\tdominant-baseline: hanging;\n\t\ttext-anchor: middle;\n\t}\n\t.radarAxisLine {\n\t\tstroke: ${H.axisColor};\n\t\tstroke-width: ${H.axisStrokeWidth};\n\t}\n\t.radarAxisLabel {\n\t\tdominant-baseline: middle;\n\t\ttext-anchor: middle;\n\t\tfont-size: ${H.axisLabelFontSize}px;\n\t\tcolor: ${H.axisColor};\n\t}\n\t.radarGraticule {\n\t\tfill: ${H.graticuleColor};\n\t\tfill-opacity: ${H.graticuleOpacity};\n\t\tstroke: ${H.graticuleColor};\n\t\tstroke-width: ${H.graticuleStrokeWidth};\n\t}\n\t.radarLegendText {\n\t\ttext-anchor: start;\n\t\tfont-size: ${H.legendFontSize}px;\n\t\tdominant-baseline: hanging;\n\t}\n\t${S(pt,H)}\n\t`},"styles")}},33350:(ti,_r,B)=>{"use strict";B.r(_r),B.d(_r,{diagram:()=>We});var lt=B(62045),ee=B(97787),L=B(79006),D=B(32303),Rt=B(40622),dt=function(){var Ct=(0,D.K2)(function(G,st,Ce,Ot){for(Ce=Ce||{},Ot=G.length;Ot--;Ce[G[Ot]]=st);return Ce},"o"),St=[6,8,10,11,12,14,16,17,18],R=[1,9],O=[1,10],et=[1,11],xt=[1,12],it=[1,13],rt=[1,14],Et={trace:(0,D.K2)(function(){},"trace"),yy:{},symbols_:{error:2,start:3,journey:4,document:5,EOF:6,line:7,SPACE:8,statement:9,NEWLINE:10,title:11,acc_title:12,acc_title_value:13,acc_descr:14,acc_descr_value:15,acc_descr_multiline_value:16,section:17,taskName:18,taskData:19,$accept:0,$end:1},terminals_:{2:"error",4:"journey",6:"EOF",8:"SPACE",10:"NEWLINE",11:"title",12:"acc_title",13:"acc_title_value",14:"acc_descr",15:"acc_descr_value",16:"acc_descr_multiline_value",17:"section",18:"taskName",19:"taskData"},productions_:[0,[3,3],[5,0],[5,2],[7,2],[7,1],[7,1],[7,1],[9,1],[9,2],[9,2],[9,1],[9,1],[9,2]],performAction:(0,D.K2)(function(st,Ce,Ot,Jt,fe,Be,Ze){var ye=Be.length-1;switch(fe){case 1:return Be[ye-1];case 2:case 6:case 7:this.$=[];break;case 3:Be[ye-1].push(Be[ye]),this.$=Be[ye-1];break;case 4:case 5:this.$=Be[ye];break;case 8:Jt.setDiagramTitle(Be[ye].substr(6)),this.$=Be[ye].substr(6);break;case 9:this.$=Be[ye].trim(),Jt.setAccTitle(this.$);break;case 10:case 11:this.$=Be[ye].trim(),Jt.setAccDescription(this.$);break;case 12:Jt.addSection(Be[ye].substr(8)),this.$=Be[ye].substr(8);break;case 13:Jt.addTask(Be[ye-1],Be[ye]),this.$="task"}},"anonymous"),table:[{3:1,4:[1,2]},{1:[3]},Ct(St,[2,2],{5:3}),{6:[1,4],7:5,8:[1,6],9:7,10:[1,8],11:R,12:O,14:et,16:xt,17:it,18:rt},Ct(St,[2,7],{1:[2,1]}),Ct(St,[2,3]),{9:15,11:R,12:O,14:et,16:xt,17:it,18:rt},Ct(St,[2,5]),Ct(St,[2,6]),Ct(St,[2,8]),{13:[1,16]},{15:[1,17]},Ct(St,[2,11]),Ct(St,[2,12]),{19:[1,18]},Ct(St,[2,4]),Ct(St,[2,9]),Ct(St,[2,10]),Ct(St,[2,13])],defaultActions:{},parseError:(0,D.K2)(function(st,Ce){if(!Ce.recoverable){var Ot=new Error(st);throw Ot.hash=Ce,Ot}this.trace(st)},"parseError"),parse:(0,D.K2)(function(st){var Ce=this,Ot=[0],Jt=[],fe=[null],Be=[],Ze=this.table,ye="",kr=0,ur=0,Kt=0,me=Be.slice.call(arguments,1),ce=Object.create(this.lexer),ke={yy:{}};for(var Te in this.yy)Object.prototype.hasOwnProperty.call(this.yy,Te)&&(ke.yy[Te]=this.yy[Te]);ce.setInput(st,ke.yy),ke.yy.lexer=ce,ke.yy.parser=this,typeof ce.yylloc>"u"&&(ce.yylloc={});var er=ce.yylloc;Be.push(er);var Xe=ce.options&&ce.options.ranges;function Ee(){var p;return"number"!=typeof(p=Jt.pop()||ce.lex()||1)&&(p instanceof Array&&(p=(Jt=p).pop()),p=Ce.symbols_[p]||p),p}this.parseError="function"==typeof ke.yy.parseError?ke.yy.parseError:Object.getPrototypeOf(this).parseError,(0,D.K2)(function Ir(p){Ot.length=Ot.length-2*p,fe.length=fe.length-p,Be.length=Be.length-p},"popStack"),(0,D.K2)(Ee,"lex");for(var qr,nr,te,ne,tr,y,E,b,g={};;){if(this.defaultActions[te=Ot[Ot.length-1]]?ne=this.defaultActions[te]:((null===qr||typeof qr>"u")&&(qr=Ee()),ne=Ze[te]&&Ze[te][qr]),typeof ne>"u"||!ne.length||!ne[0]){var z;for(y in b=[],Ze[te])this.terminals_[y]&&y>2&&b.push("'"+this.terminals_[y]+"'");z=ce.showPosition?"Parse error on line "+(kr+1)+":\n"+ce.showPosition()+"\nExpecting "+b.join(", ")+", got '"+(this.terminals_[qr]||qr)+"'":"Parse error on line "+(kr+1)+": Unexpected "+(1==qr?"end of input":"'"+(this.terminals_[qr]||qr)+"'"),this.parseError(z,{text:ce.match,token:this.terminals_[qr]||qr,line:ce.yylineno,loc:er,expected:b})}if(ne[0]instanceof Array&&ne.length>1)throw new Error("Parse Error: multiple actions possible at state: "+te+", token: "+qr);switch(ne[0]){case 1:Ot.push(qr),fe.push(ce.yytext),Be.push(ce.yylloc),Ot.push(ne[1]),qr=null,nr?(qr=nr,nr=null):(ur=ce.yyleng,ye=ce.yytext,kr=ce.yylineno,er=ce.yylloc,Kt>0&&Kt--);break;case 2:if(g.$=fe[fe.length-(E=this.productions_[ne[1]][1])],g._$={first_line:Be[Be.length-(E||1)].first_line,last_line:Be[Be.length-1].last_line,first_column:Be[Be.length-(E||1)].first_column,last_column:Be[Be.length-1].last_column},Xe&&(g._$.range=[Be[Be.length-(E||1)].range[0],Be[Be.length-1].range[1]]),typeof(tr=this.performAction.apply(g,[ye,ur,kr,ke.yy,ne[1],fe,Be].concat(me)))<"u")return tr;E&&(Ot=Ot.slice(0,-1*E*2),fe=fe.slice(0,-1*E),Be=Be.slice(0,-1*E)),Ot.push(this.productions_[ne[1]][0]),fe.push(g.$),Be.push(g._$),Ot.push(Ze[Ot[Ot.length-2]][Ot[Ot.length-1]]);break;case 3:return!0}}return!0},"parse")};function It(){this.yy={}}return Et.lexer=function(){return{EOF:1,parseError:(0,D.K2)(function(Ce,Ot){if(!this.yy.parser)throw new Error(Ce);this.yy.parser.parseError(Ce,Ot)},"parseError"),setInput:(0,D.K2)(function(st,Ce){return this.yy=Ce||this.yy||{},this._input=st,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},"setInput"),input:(0,D.K2)(function(){var st=this._input[0];return this.yytext+=st,this.yyleng++,this.offset++,this.match+=st,this.matched+=st,st.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),st},"input"),unput:(0,D.K2)(function(st){var Ce=st.length,Ot=st.split(/(?:\r\n?|\n)/g);this._input=st+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-Ce),this.offset-=Ce;var Jt=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),Ot.length-1&&(this.yylineno-=Ot.length-1);var fe=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:Ot?(Ot.length===Jt.length?this.yylloc.first_column:0)+Jt[Jt.length-Ot.length].length-Ot[0].length:this.yylloc.first_column-Ce},this.options.ranges&&(this.yylloc.range=[fe[0],fe[0]+this.yyleng-Ce]),this.yyleng=this.yytext.length,this},"unput"),more:(0,D.K2)(function(){return this._more=!0,this},"more"),reject:(0,D.K2)(function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},"reject"),less:(0,D.K2)(function(st){this.unput(this.match.slice(st))},"less"),pastInput:(0,D.K2)(function(){var st=this.matched.substr(0,this.matched.length-this.match.length);return(st.length>20?"...":"")+st.substr(-20).replace(/\n/g,"")},"pastInput"),upcomingInput:(0,D.K2)(function(){var st=this.match;return st.length<20&&(st+=this._input.substr(0,20-st.length)),(st.substr(0,20)+(st.length>20?"...":"")).replace(/\n/g,"")},"upcomingInput"),showPosition:(0,D.K2)(function(){var st=this.pastInput(),Ce=new Array(st.length+1).join("-");return st+this.upcomingInput()+"\n"+Ce+"^"},"showPosition"),test_match:(0,D.K2)(function(st,Ce){var Ot,Jt,fe;if(this.options.backtrack_lexer&&(fe={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(fe.yylloc.range=this.yylloc.range.slice(0))),(Jt=st[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=Jt.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:Jt?Jt[Jt.length-1].length-Jt[Jt.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+st[0].length},this.yytext+=st[0],this.match+=st[0],this.matches=st,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(st[0].length),this.matched+=st[0],Ot=this.performAction.call(this,this.yy,this,Ce,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),Ot)return Ot;if(this._backtrack){for(var Be in fe)this[Be]=fe[Be];return!1}return!1},"test_match"),next:(0,D.K2)(function(){if(this.done)return this.EOF;var st,Ce,Ot,Jt;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var fe=this._currentRules(),Be=0;Be<fe.length;Be++)if((Ot=this._input.match(this.rules[fe[Be]]))&&(!Ce||Ot[0].length>Ce[0].length)){if(Ce=Ot,Jt=Be,this.options.backtrack_lexer){if(!1!==(st=this.test_match(Ot,fe[Be])))return st;if(this._backtrack){Ce=!1;continue}return!1}if(!this.options.flex)break}return Ce?!1!==(st=this.test_match(Ce,fe[Jt]))&&st:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},"next"),lex:(0,D.K2)(function(){return this.next()||this.lex()},"lex"),begin:(0,D.K2)(function(Ce){this.conditionStack.push(Ce)},"begin"),popState:(0,D.K2)(function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},"popState"),_currentRules:(0,D.K2)(function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},"_currentRules"),topState:(0,D.K2)(function(Ce){return(Ce=this.conditionStack.length-1-Math.abs(Ce||0))>=0?this.conditionStack[Ce]:"INITIAL"},"topState"),pushState:(0,D.K2)(function(Ce){this.begin(Ce)},"pushState"),stateStackSize:(0,D.K2)(function(){return this.conditionStack.length},"stateStackSize"),options:{"case-insensitive":!0},performAction:(0,D.K2)(function(Ce,Ot,Jt,fe){switch(Jt){case 0:case 1:case 3:case 4:break;case 2:return 10;case 5:return 4;case 6:return 11;case 7:return this.begin("acc_title"),12;case 8:return this.popState(),"acc_title_value";case 9:return this.begin("acc_descr"),14;case 10:return this.popState(),"acc_descr_value";case 11:this.begin("acc_descr_multiline");break;case 12:this.popState();break;case 13:return"acc_descr_multiline_value";case 14:return 17;case 15:return 18;case 16:return 19;case 17:return":";case 18:return 6;case 19:return"INVALID"}},"anonymous"),rules:[/^(?:%(?!\{)[^\n]*)/i,/^(?:[^\}]%%[^\n]*)/i,/^(?:[\n]+)/i,/^(?:\s+)/i,/^(?:#[^\n]*)/i,/^(?:journey\b)/i,/^(?:title\s[^#\n;]+)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:section\s[^#:\n;]+)/i,/^(?:[^#:\n;]+)/i,/^(?::[^#\n;]+)/i,/^(?::)/i,/^(?:$)/i,/^(?:.)/i],conditions:{acc_descr_multiline:{rules:[12,13],inclusive:!1},acc_descr:{rules:[10],inclusive:!1},acc_title:{rules:[8],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,5,6,7,9,11,14,15,16,17,18,19],inclusive:!0}}}}(),(0,D.K2)(It,"Parser"),It.prototype=Et,Et.Parser=It,new It}();dt.parser=dt;var q=dt,A="",$t=[],yt=[],Ye=[],bt=(0,D.K2)(function(){$t.length=0,yt.length=0,A="",Ye.length=0,(0,L.IU)()},"clear"),Xt=(0,D.K2)(function(Ct){A=Ct,$t.push(Ct)},"addSection"),j=(0,D.K2)(function(){return $t},"getSections"),fr=(0,D.K2)(function(){let Ct=br(),R=0;for(;!Ct&&R<100;)Ct=br(),R++;return yt.push(...Ye),yt},"getTasks"),Fe=(0,D.K2)(function(){const Ct=[];return yt.forEach(R=>{R.people&&Ct.push(...R.people)}),[...new Set(Ct)].sort()},"updateActors"),vr=(0,D.K2)(function(Ct,St){const R=St.substr(1).split(":");let O=0,et=[];1===R.length?(O=Number(R[0]),et=[]):(O=Number(R[0]),et=R[1].split(","));const xt=et.map(rt=>rt.trim());Ye.push({section:A,type:A,people:xt,task:Ct,score:O})},"addTask"),zr=(0,D.K2)(function(Ct){yt.push({section:A,type:A,description:Ct,task:Ct,classes:[]})},"addTaskOrg"),br=(0,D.K2)(function(){const Ct=(0,D.K2)(function(R){return Ye[R].processed},"compileTask");let St=!0;for(const[R,O]of Ye.entries())Ct(R),St=St&&O.processed;return St},"compileTasks"),mr=(0,D.K2)(function(){return Fe()},"getActors"),Er={getConfig:(0,D.K2)(()=>(0,L.D7)().journey,"getConfig"),clear:bt,setDiagramTitle:L.ke,getDiagramTitle:L.ab,setAccTitle:L.SV,getAccTitle:L.iN,setAccDescription:L.EI,getAccDescription:L.m7,addSection:Xt,getSections:j,getTasks:fr,addTask:vr,addTaskOrg:zr,getActors:mr},Ar=(0,D.K2)(Ct=>`.label {\n    font-family: ${Ct.fontFamily};\n    color: ${Ct.textColor};\n  }\n  .mouth {\n    stroke: #666;\n  }\n\n  line {\n    stroke: ${Ct.textColor}\n  }\n\n  .legend {\n    fill: ${Ct.textColor};\n    font-family: ${Ct.fontFamily};\n  }\n\n  .label text {\n    fill: #333;\n  }\n  .label {\n    color: ${Ct.textColor}\n  }\n\n  .face {\n    ${Ct.faceColor?`fill: ${Ct.faceColor}`:"fill: #FFF8DC"};\n    stroke: #999;\n  }\n\n  .node rect,\n  .node circle,\n  .node ellipse,\n  .node polygon,\n  .node path {\n    fill: ${Ct.mainBkg};\n    stroke: ${Ct.nodeBorder};\n    stroke-width: 1px;\n  }\n\n  .node .label {\n    text-align: center;\n  }\n  .node.clickable {\n    cursor: pointer;\n  }\n\n  .arrowheadPath {\n    fill: ${Ct.arrowheadColor};\n  }\n\n  .edgePath .path {\n    stroke: ${Ct.lineColor};\n    stroke-width: 1.5px;\n  }\n\n  .flowchart-link {\n    stroke: ${Ct.lineColor};\n    fill: none;\n  }\n\n  .edgeLabel {\n    background-color: ${Ct.edgeLabelBackground};\n    rect {\n      opacity: 0.5;\n    }\n    text-align: center;\n  }\n\n  .cluster rect {\n  }\n\n  .cluster text {\n    fill: ${Ct.titleColor};\n  }\n\n  div.mermaidTooltip {\n    position: absolute;\n    text-align: center;\n    max-width: 200px;\n    padding: 2px;\n    font-family: ${Ct.fontFamily};\n    font-size: 12px;\n    background: ${Ct.tertiaryColor};\n    border: 1px solid ${Ct.border2};\n    border-radius: 2px;\n    pointer-events: none;\n    z-index: 100;\n  }\n\n  .task-type-0, .section-type-0  {\n    ${Ct.fillType0?`fill: ${Ct.fillType0}`:""};\n  }\n  .task-type-1, .section-type-1  {\n    ${Ct.fillType0?`fill: ${Ct.fillType1}`:""};\n  }\n  .task-type-2, .section-type-2  {\n    ${Ct.fillType0?`fill: ${Ct.fillType2}`:""};\n  }\n  .task-type-3, .section-type-3  {\n    ${Ct.fillType0?`fill: ${Ct.fillType3}`:""};\n  }\n  .task-type-4, .section-type-4  {\n    ${Ct.fillType0?`fill: ${Ct.fillType4}`:""};\n  }\n  .task-type-5, .section-type-5  {\n    ${Ct.fillType0?`fill: ${Ct.fillType5}`:""};\n  }\n  .task-type-6, .section-type-6  {\n    ${Ct.fillType0?`fill: ${Ct.fillType6}`:""};\n  }\n  .task-type-7, .section-type-7  {\n    ${Ct.fillType0?`fill: ${Ct.fillType7}`:""};\n  }\n\n  .actor-0 {\n    ${Ct.actor0?`fill: ${Ct.actor0}`:""};\n  }\n  .actor-1 {\n    ${Ct.actor1?`fill: ${Ct.actor1}`:""};\n  }\n  .actor-2 {\n    ${Ct.actor2?`fill: ${Ct.actor2}`:""};\n  }\n  .actor-3 {\n    ${Ct.actor3?`fill: ${Ct.actor3}`:""};\n  }\n  .actor-4 {\n    ${Ct.actor4?`fill: ${Ct.actor4}`:""};\n  }\n  .actor-5 {\n    ${Ct.actor5?`fill: ${Ct.actor5}`:""};\n  }\n  ${(0,ee.o)()}\n`,"getStyles"),ge=(0,D.K2)(function(Ct,St){return(0,lt.tk)(Ct,St)},"drawRect"),Br=(0,D.K2)(function(Ct,St){const O=Ct.append("circle").attr("cx",St.cx).attr("cy",St.cy).attr("class","face").attr("r",15).attr("stroke-width",2).attr("overflow","visible"),et=Ct.append("g");function xt(Et){const ut=(0,Rt.JLW)().startAngle(Math.PI/2).endAngle(Math.PI/2*3).innerRadius(7.5).outerRadius(6.8181818181818175);Et.append("path").attr("class","mouth").attr("d",ut).attr("transform","translate("+St.cx+","+(St.cy+2)+")")}function it(Et){const ut=(0,Rt.JLW)().startAngle(3*Math.PI/2).endAngle(Math.PI/2*5).innerRadius(7.5).outerRadius(6.8181818181818175);Et.append("path").attr("class","mouth").attr("d",ut).attr("transform","translate("+St.cx+","+(St.cy+7)+")")}function rt(Et){Et.append("line").attr("class","mouth").attr("stroke",2).attr("x1",St.cx-5).attr("y1",St.cy+7).attr("x2",St.cx+5).attr("y2",St.cy+7).attr("class","mouth").attr("stroke-width","1px").attr("stroke","#666")}return et.append("circle").attr("cx",St.cx-5).attr("cy",St.cy-5).attr("r",1.5).attr("stroke-width",2).attr("fill","#666").attr("stroke","#666"),et.append("circle").attr("cx",St.cx+5).attr("cy",St.cy-5).attr("r",1.5).attr("stroke-width",2).attr("fill","#666").attr("stroke","#666"),(0,D.K2)(xt,"smile"),(0,D.K2)(it,"sad"),(0,D.K2)(rt,"ambivalent"),St.score>3?xt(et):St.score<3?it(et):rt(et),O},"drawFace"),Ge=(0,D.K2)(function(Ct,St){const R=Ct.append("circle");return R.attr("cx",St.cx),R.attr("cy",St.cy),R.attr("class","actor-"+St.pos),R.attr("fill",St.fill),R.attr("stroke",St.stroke),R.attr("r",St.r),void 0!==R.class&&R.attr("class",R.class),void 0!==St.title&&R.append("title").text(St.title),R},"drawCircle"),W=(0,D.K2)(function(Ct,St){return(0,lt.m)(Ct,St)},"drawText"),ft=(0,D.K2)(function(Ct,St){function R(et,xt,it,rt,Et){return et+","+xt+" "+(et+it)+","+xt+" "+(et+it)+","+(xt+rt-Et)+" "+(et+it-1.2*Et)+","+(xt+rt)+" "+et+","+(xt+rt)}(0,D.K2)(R,"genPoints");const O=Ct.append("polygon");O.attr("points",R(St.x,St.y,50,20,7)),O.attr("class","labelBox"),St.y=St.y+St.labelMargin,St.x=St.x+.5*St.labelMargin,W(Ct,St)},"drawLabel"),Bt=(0,D.K2)(function(Ct,St,R){const O=Ct.append("g"),et=(0,lt.PB)();et.x=St.x,et.y=St.y,et.fill=St.fill,et.width=R.width*St.taskCount+R.diagramMarginX*(St.taskCount-1),et.height=R.height,et.class="journey-section section-type-"+St.num,et.rx=3,et.ry=3,ge(O,et),S(R)(St.text,O,et.x,et.y,et.width,et.height,{class:"journey-section section-type-"+St.num},R,St.colour)},"drawSection"),_e=-1,Z=(0,D.K2)(function(Ct,St,R){const O=St.x+R.width/2,et=Ct.append("g");_e++,et.append("line").attr("id","task"+_e).attr("x1",O).attr("y1",St.y).attr("x2",O).attr("y2",450).attr("class","task-line").attr("stroke-width","1px").attr("stroke-dasharray","4 2").attr("stroke","#666"),Br(et,{cx:O,cy:300+30*(5-St.score),score:St.score});const it=(0,lt.PB)();it.x=St.x,it.y=St.y,it.fill=St.fill,it.width=R.width,it.height=R.height,it.class="task task-type-"+St.num,it.rx=3,it.ry=3,ge(et,it);let rt=St.x+14;St.people.forEach(Et=>{Ge(et,{cx:rt,cy:St.y,r:7,fill:St.actors[Et].color,stroke:"#000",title:Et,pos:St.actors[Et].position}),rt+=10}),S(R)(St.task,et,it.x,it.y,it.width,it.height,{class:"task"},R,St.colour)},"drawTask"),ae=(0,D.K2)(function(Ct,St){(0,lt.lC)(Ct,St)},"drawBackgroundRect"),S=function(){function Ct(et,xt,it,rt,Et,ut,It,G){O(xt.append("text").attr("x",it+Et/2).attr("y",rt+ut/2+5).style("font-color",G).style("text-anchor","middle").text(et),It)}function St(et,xt,it,rt,Et,ut,It,G,st){const{taskFontSize:Ce,taskFontFamily:Ot}=G,Jt=et.split(/<br\s*\/?>/gi);for(let fe=0;fe<Jt.length;fe++){const Be=fe*Ce-Ce*(Jt.length-1)/2,Ze=xt.append("text").attr("x",it+Et/2).attr("y",rt).attr("fill",st).style("text-anchor","middle").style("font-size",Ce).style("font-family",Ot);Ze.append("tspan").attr("x",it+Et/2).attr("dy",Be).text(Jt[fe]),Ze.attr("y",rt+ut/2).attr("dominant-baseline","central").attr("alignment-baseline","central"),O(Ze,It)}}function R(et,xt,it,rt,Et,ut,It,G){const st=xt.append("switch"),Ot=st.append("foreignObject").attr("x",it).attr("y",rt).attr("width",Et).attr("height",ut).attr("position","fixed").append("xhtml:div").style("display","table").style("height","100%").style("width","100%");Ot.append("div").attr("class","label").style("display","table-cell").style("text-align","center").style("vertical-align","middle").text(et),St(et,st,it,rt,Et,ut,It,G),O(Ot,It)}function O(et,xt){for(const it in xt)it in xt&&et.attr(it,xt[it])}return(0,D.K2)(Ct,"byText"),(0,D.K2)(St,"byTspan"),(0,D.K2)(R,"byFo"),(0,D.K2)(O,"_setTextAttrs"),function(et){return"fo"===et.textPlacement?R:"old"===et.textPlacement?Ct:St}}(),Pt={drawRect:ge,drawCircle:Ge,drawSection:Bt,drawText:W,drawLabel:ft,drawTask:Z,drawBackgroundRect:ae,initGraphics:(0,D.K2)(function(Ct){Ct.append("defs").append("marker").attr("id","arrowhead").attr("refX",5).attr("refY",2).attr("markerWidth",6).attr("markerHeight",4).attr("orient","auto").append("path").attr("d","M 0,0 V 4 L6,2 Z")},"initGraphics")},qt=(0,D.K2)(function(Ct){Object.keys(Ct).forEach(function(R){Nt[R]=Ct[R]})},"setConf"),V={},pt=0;function H(Ct){const St=(0,L.D7)().journey,R=St.maxLabelWidth;pt=0;let O=60;Object.keys(V).forEach(et=>{Pt.drawCircle(Ct,{cx:20,cy:O,r:7,fill:V[et].color,stroke:"#000",pos:V[et].position});let rt=Ct.append("text").attr("visibility","hidden").text(et);const Et=rt.node().getBoundingClientRect().width;rt.remove();let ut=[];if(Et<=R)ut=[et];else{const It=et.split(" ");let G="";rt=Ct.append("text").attr("visibility","hidden"),It.forEach(st=>{const Ce=G?`${G} ${st}`:st;if(rt.text(Ce),rt.node().getBoundingClientRect().width>R){if(G&&ut.push(G),G=st,rt.text(st),rt.node().getBoundingClientRect().width>R){let Jt="";for(const fe of st)Jt+=fe,rt.text(Jt+"-"),rt.node().getBoundingClientRect().width>R&&(ut.push(Jt.slice(0,-1)+"-"),Jt=fe);G=Jt}}else G=Ce}),G&&ut.push(G),rt.remove()}ut.forEach((It,G)=>{const Ot=Pt.drawText(Ct,{x:40,y:O+7+20*G,fill:"#666",text:It,textMargin:St.boxTextMargin??5}).node().getBoundingClientRect().width;Ot>pt&&Ot>St.leftMargin-Ot&&(pt=Ot)}),O+=Math.max(20,20*ut.length)})}(0,D.K2)(H,"drawActorLegend");var Nt=(0,L.D7)().journey,wt=0,Wt=(0,D.K2)(function(Ct,St,R,O){const et=(0,L.D7)(),xt=et.journey.titleColor,it=et.journey.titleFontSize,rt=et.journey.titleFontFamily,Et=et.securityLevel;let ut;"sandbox"===Et&&(ut=(0,Rt.Ltv)("#i"+St));const It=(0,Rt.Ltv)("sandbox"===Et?ut.nodes()[0].contentDocument.body:"body");xe.init();const G=It.select("#"+St);Pt.initGraphics(G);const st=O.db.getTasks(),Ce=O.db.getDiagramTitle(),Ot=O.db.getActors();for(const kr in V)delete V[kr];let Jt=0;Ot.forEach(kr=>{V[kr]={color:Nt.actorColours[Jt%Nt.actorColours.length],position:Jt},Jt++}),H(G),xe.insert(0,0,wt=Nt.leftMargin+pt,50*Object.keys(V).length),oe(G,st,0);const fe=xe.getBounds();Ce&&G.append("text").text(Ce).attr("x",wt).attr("font-size",it).attr("font-weight","bold").attr("y",25).attr("fill",xt).attr("font-family",rt);const Be=fe.stopy-fe.starty+2*Nt.diagramMarginY,Ze=wt+fe.stopx+2*Nt.diagramMarginX;(0,L.a$)(G,Be,Ze,Nt.useMaxWidth),G.append("line").attr("x1",wt).attr("y1",4*Nt.height).attr("x2",Ze-wt-4).attr("y2",4*Nt.height).attr("stroke-width",4).attr("stroke","black").attr("marker-end","url(#arrowhead)");const ye=Ce?70:0;G.attr("viewBox",`${fe.startx} -25 ${Ze} ${Be+ye}`),G.attr("preserveAspectRatio","xMinYMin meet"),G.attr("height",Be+ye+25)},"draw"),xe={data:{startx:void 0,stopx:void 0,starty:void 0,stopy:void 0},verticalPos:0,sequenceItems:[],init:(0,D.K2)(function(){this.sequenceItems=[],this.data={startx:void 0,stopx:void 0,starty:void 0,stopy:void 0},this.verticalPos=0},"init"),updateVal:(0,D.K2)(function(Ct,St,R,O){Ct[St]=void 0===Ct[St]?R:O(R,Ct[St])},"updateVal"),updateBounds:(0,D.K2)(function(Ct,St,R,O){const et=(0,L.D7)().journey,xt=this;let it=0;function rt(Et){return(0,D.K2)(function(It){it++;const G=xt.sequenceItems.length-it+1;xt.updateVal(It,"starty",St-G*et.boxMargin,Math.min),xt.updateVal(It,"stopy",O+G*et.boxMargin,Math.max),xt.updateVal(xe.data,"startx",Ct-G*et.boxMargin,Math.min),xt.updateVal(xe.data,"stopx",R+G*et.boxMargin,Math.max),"activation"!==Et&&(xt.updateVal(It,"startx",Ct-G*et.boxMargin,Math.min),xt.updateVal(It,"stopx",R+G*et.boxMargin,Math.max),xt.updateVal(xe.data,"starty",St-G*et.boxMargin,Math.min),xt.updateVal(xe.data,"stopy",O+G*et.boxMargin,Math.max))},"updateItemBounds")}(0,D.K2)(rt,"updateFn"),this.sequenceItems.forEach(rt())},"updateBounds"),insert:(0,D.K2)(function(Ct,St,R,O){const et=Math.min(Ct,R),xt=Math.max(Ct,R),it=Math.min(St,O),rt=Math.max(St,O);this.updateVal(xe.data,"startx",et,Math.min),this.updateVal(xe.data,"starty",it,Math.min),this.updateVal(xe.data,"stopx",xt,Math.max),this.updateVal(xe.data,"stopy",rt,Math.max),this.updateBounds(et,it,xt,rt)},"insert"),bumpVerticalPos:(0,D.K2)(function(Ct){this.verticalPos=this.verticalPos+Ct,this.data.stopy=this.verticalPos},"bumpVerticalPos"),getVerticalPos:(0,D.K2)(function(){return this.verticalPos},"getVerticalPos"),getBounds:(0,D.K2)(function(){return this.data},"getBounds")},le=Nt.sectionFills,Re=Nt.sectionColours,oe=(0,D.K2)(function(Ct,St,R){const O=(0,L.D7)().journey;let et="";const it=R+(2*O.height+O.diagramMarginY);let rt=0,Et="#CCC",ut="black",It=0;for(const[G,st]of St.entries()){if(et!==st.section){Et=le[rt%le.length],It=rt%le.length,ut=Re[rt%Re.length];let Ot=0;const Jt=st.section;for(let Be=G;Be<St.length&&St[Be].section==Jt;Be++)Ot+=1;Pt.drawSection(Ct,{x:G*O.taskMargin+G*O.width+wt,y:50,text:st.section,fill:Et,num:It,colour:ut,taskCount:Ot},O),et=st.section,rt++}const Ce=st.people.reduce((Ot,Jt)=>(V[Jt]&&(Ot[Jt]=V[Jt]),Ot),{});st.x=G*O.taskMargin+G*O.width+wt,st.y=it,st.width=O.diagramMarginX,st.height=O.diagramMarginY,st.colour=ut,st.fill=Et,st.num=It,st.actors=Ce,Pt.drawTask(Ct,st,O),xe.insert(st.x,st.y,st.x+st.width+O.taskMargin,450)}},"drawTasks"),qe={setConf:qt,draw:Wt},We={parser:q,db:Er,renderer:qe,styles:Ar,init:(0,D.K2)(Ct=>{qe.setConf(Ct.journey),Er.clear()},"init")}},36384:(ti,_r,B)=>{"use strict";B.d(_r,{Nq:()=>L,RI:()=>dt,hq:()=>ee});var lt=B(32303),ee={aggregation:17.25,extension:17.25,composition:17.25,dependency:6,lollipop:13.5,arrow_point:4},L={arrow_point:9,arrow_cross:12.5,arrow_circle:12.5};function D(q,A){if(void 0===q||void 0===A)return{angle:0,deltaX:0,deltaY:0};q=Rt(q),A=Rt(A);const[$t,yt]=[q.x,q.y],[Ye,bt]=[A.x,A.y],Xt=Ye-$t,j=bt-yt;return{angle:Math.atan(j/Xt),deltaX:Xt,deltaY:j}}(0,lt.K2)(D,"calculateDeltaAndAngle");var Rt=(0,lt.K2)(q=>Array.isArray(q)?{x:q[0],y:q[1]}:q,"pointTransformer"),dt=(0,lt.K2)(q=>({x:(0,lt.K2)(function(A,$t,yt){let Ye=0;const bt=Rt(yt[0]).x<Rt(yt[yt.length-1]).x?"left":"right";if(0===$t&&Object.hasOwn(ee,q.arrowTypeStart)){const{angle:mr,deltaX:Er}=D(yt[0],yt[1]);Ye=ee[q.arrowTypeStart]*Math.cos(mr)*(Er>=0?1:-1)}else if($t===yt.length-1&&Object.hasOwn(ee,q.arrowTypeEnd)){const{angle:mr,deltaX:Er}=D(yt[yt.length-1],yt[yt.length-2]);Ye=ee[q.arrowTypeEnd]*Math.cos(mr)*(Er>=0?1:-1)}const Xt=Math.abs(Rt(A).x-Rt(yt[yt.length-1]).x),j=Math.abs(Rt(A).y-Rt(yt[yt.length-1]).y),fr=Math.abs(Rt(A).x-Rt(yt[0]).x),Fe=Math.abs(Rt(A).y-Rt(yt[0]).y),vr=ee[q.arrowTypeStart],zr=ee[q.arrowTypeEnd];if(Xt<zr&&Xt>0&&j<zr){let mr=zr+1-Xt;mr*="right"===bt?-1:1,Ye-=mr}if(fr<vr&&fr>0&&Fe<vr){let mr=vr+1-fr;mr*="right"===bt?-1:1,Ye+=mr}return Rt(A).x+Ye},"x"),y:(0,lt.K2)(function(A,$t,yt){let Ye=0;const bt=Rt(yt[0]).y<Rt(yt[yt.length-1]).y?"down":"up";if(0===$t&&Object.hasOwn(ee,q.arrowTypeStart)){const{angle:mr,deltaY:Er}=D(yt[0],yt[1]);Ye=ee[q.arrowTypeStart]*Math.abs(Math.sin(mr))*(Er>=0?1:-1)}else if($t===yt.length-1&&Object.hasOwn(ee,q.arrowTypeEnd)){const{angle:mr,deltaY:Er}=D(yt[yt.length-1],yt[yt.length-2]);Ye=ee[q.arrowTypeEnd]*Math.abs(Math.sin(mr))*(Er>=0?1:-1)}const Xt=Math.abs(Rt(A).y-Rt(yt[yt.length-1]).y),j=Math.abs(Rt(A).x-Rt(yt[yt.length-1]).x),fr=Math.abs(Rt(A).y-Rt(yt[0]).y),Fe=Math.abs(Rt(A).x-Rt(yt[0]).x),vr=ee[q.arrowTypeStart],zr=ee[q.arrowTypeEnd];if(Xt<zr&&Xt>0&&j<zr){let mr=zr+1-Xt;mr*="up"===bt?-1:1,Ye-=mr}if(fr<vr&&fr>0&&Fe<vr){let mr=vr+1-fr;mr*="up"===bt?-1:1,Ye+=mr}return Rt(A).y+Ye},"y")}),"getLineFunctionsWithOffset")},37355:function(ti){ti.exports=function(){"use strict";return function(_r,B){var lt=B.prototype,ee=lt.format;lt.format=function(L){var D=this,Rt=this.$locale();if(!this.isValid())return ee.bind(this)(L);var dt=this.$utils(),q=(L||"YYYY-MM-DDTHH:mm:ssZ").replace(/\[([^\]]+)]|Q|wo|ww|w|WW|W|zzz|z|gggg|GGGG|Do|X|x|k{1,2}|S/g,function(A){switch(A){case"Q":return Math.ceil((D.$M+1)/3);case"Do":return Rt.ordinal(D.$D);case"gggg":return D.weekYear();case"GGGG":return D.isoWeekYear();case"wo":return Rt.ordinal(D.week(),"W");case"w":case"ww":return dt.s(D.week(),"w"===A?1:2,"0");case"W":case"WW":return dt.s(D.isoWeek(),"W"===A?1:2,"0");case"k":case"kk":return dt.s(String(0===D.$H?24:D.$H),"k"===A?1:2,"0");case"X":return Math.floor(D.$d.getTime()/1e3);case"x":return D.$d.getTime();case"z":return"["+D.offsetName()+"]";case"zzz":return"["+D.offsetName("long")+"]";default:return A}});return ee.bind(this)(q)}}}()},38676:(ti,_r,B)=>{"use strict";B.r(_r),B.d(_r,{diagram:()=>j});var lt=B(53102),Xt=(B(5675),B(8086),B(72271),B(98954),B(36384),B(87452),B(32239),B(19753),B(59355),B(52052),B(79006),B(32303)),j={parser:lt.Zk,get db(){return new lt.u4(2)},renderer:lt.q7,styles:lt.tM,init:(0,Xt.K2)(fr=>{fr.state||(fr.state={}),fr.state.arrowMarkerAbsolute=fr.arrowMarkerAbsolute},"init")}},38710:(ti,_r,B)=>{"use strict";B.r(_r),B.d(_r,{diagram:()=>tr});var lt=B(89204),ee=B(45027),L=B(5675),D=B(8086),Rt=B(72271),Xt=(B(98954),B(36384),B(87452),B(32239),B(19753),B(59355),B(52052),B(79006)),j=B(32303);const vr=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i,Er=function mr(g){if(!function zr(g){return"string"==typeof g&&vr.test(g)}(g))throw TypeError("Invalid UUID");let y;return Uint8Array.of((y=parseInt(g.slice(0,8),16))>>>24,y>>>16&255,y>>>8&255,255&y,(y=parseInt(g.slice(9,13),16))>>>8,255&y,(y=parseInt(g.slice(14,18),16))>>>8,255&y,(y=parseInt(g.slice(19,23),16))>>>8,255&y,(y=parseInt(g.slice(24,36),16))/1099511627776&255,y/4294967296&255,y>>>24&255,y>>>16&255,y>>>8&255,255&y)},Lr=[];for(let g=0;g<256;++g)Lr.push((g+256).toString(16).slice(1));function Ar(g,y=0){return(Lr[g[y+0]]+Lr[g[y+1]]+Lr[g[y+2]]+Lr[g[y+3]]+"-"+Lr[g[y+4]]+Lr[g[y+5]]+"-"+Lr[g[y+6]]+Lr[g[y+7]]+"-"+Lr[g[y+8]]+Lr[g[y+9]]+"-"+Lr[g[y+10]]+Lr[g[y+11]]+Lr[g[y+12]]+Lr[g[y+13]]+Lr[g[y+14]]+Lr[g[y+15]]).toLowerCase()}let Ge;const W=new Uint8Array(16);function pt(g){return 14+(g+64>>>9<<4)+1}function wt(g,y){const E=(65535&g)+(65535&y);return(g>>16)+(y>>16)+(E>>16)<<16|65535&E}function xe(g,y,E,P,b,z){return wt(function Wt(g,y){return g<<y|g>>>32-y}(wt(wt(y,g),wt(P,z)),b),E)}function le(g,y,E,P,b,z,p){return xe(y&E|~y&P,g,y,b,z,p)}function Re(g,y,E,P,b,z,p){return xe(y&P|E&~P,g,y,b,z,p)}function oe(g,y,E,P,b,z,p){return xe(y^E^P,g,y,b,z,p)}function qe(g,y,E,P,b,z,p){return xe(E^(y|~P),g,y,b,z,p)}const We=function qt(g){const y=function Nt(g){if(0===g.length)return new Uint32Array;const y=new Uint32Array(pt(8*g.length)).fill(0);for(let E=0;E<g.length;E++)y[E>>2]|=(255&g[E])<<E%4*8;return y}(g);return function V(g){const y=new Uint8Array(4*g.length);for(let E=0;E<4*g.length;E++)y[E]=g[E>>2]>>>E%4*8&255;return y}(function H(g,y){const E=new Uint32Array(pt(y)).fill(0);E.set(g),E[y>>5]|=128<<y%32,E[E.length-1]=y,g=E;let P=1732584193,b=-271733879,z=-1732584194,p=271733878;for(let x=0;x<g.length;x+=16){const C=P,w=b,$=z,ct=p;P=le(P,b,z,p,g[x],7,-680876936),p=le(p,P,b,z,g[x+1],12,-389564586),z=le(z,p,P,b,g[x+2],17,606105819),b=le(b,z,p,P,g[x+3],22,-1044525330),P=le(P,b,z,p,g[x+4],7,-176418897),p=le(p,P,b,z,g[x+5],12,1200080426),z=le(z,p,P,b,g[x+6],17,-1473231341),b=le(b,z,p,P,g[x+7],22,-45705983),P=le(P,b,z,p,g[x+8],7,1770035416),p=le(p,P,b,z,g[x+9],12,-1958414417),z=le(z,p,P,b,g[x+10],17,-42063),b=le(b,z,p,P,g[x+11],22,-1990404162),P=le(P,b,z,p,g[x+12],7,1804603682),p=le(p,P,b,z,g[x+13],12,-40341101),z=le(z,p,P,b,g[x+14],17,-1502002290),b=le(b,z,p,P,g[x+15],22,1236535329),P=Re(P,b,z,p,g[x+1],5,-165796510),p=Re(p,P,b,z,g[x+6],9,-1069501632),z=Re(z,p,P,b,g[x+11],14,643717713),b=Re(b,z,p,P,g[x],20,-373897302),P=Re(P,b,z,p,g[x+5],5,-701558691),p=Re(p,P,b,z,g[x+10],9,38016083),z=Re(z,p,P,b,g[x+15],14,-660478335),b=Re(b,z,p,P,g[x+4],20,-405537848),P=Re(P,b,z,p,g[x+9],5,568446438),p=Re(p,P,b,z,g[x+14],9,-1019803690),z=Re(z,p,P,b,g[x+3],14,-187363961),b=Re(b,z,p,P,g[x+8],20,1163531501),P=Re(P,b,z,p,g[x+13],5,-1444681467),p=Re(p,P,b,z,g[x+2],9,-51403784),z=Re(z,p,P,b,g[x+7],14,1735328473),b=Re(b,z,p,P,g[x+12],20,-1926607734),P=oe(P,b,z,p,g[x+5],4,-378558),p=oe(p,P,b,z,g[x+8],11,-2022574463),z=oe(z,p,P,b,g[x+11],16,1839030562),b=oe(b,z,p,P,g[x+14],23,-35309556),P=oe(P,b,z,p,g[x+1],4,-1530992060),p=oe(p,P,b,z,g[x+4],11,1272893353),z=oe(z,p,P,b,g[x+7],16,-155497632),b=oe(b,z,p,P,g[x+10],23,-1094730640),P=oe(P,b,z,p,g[x+13],4,681279174),p=oe(p,P,b,z,g[x],11,-358537222),z=oe(z,p,P,b,g[x+3],16,-722521979),b=oe(b,z,p,P,g[x+6],23,76029189),P=oe(P,b,z,p,g[x+9],4,-640364487),p=oe(p,P,b,z,g[x+12],11,-421815835),z=oe(z,p,P,b,g[x+15],16,530742520),b=oe(b,z,p,P,g[x+2],23,-995338651),P=qe(P,b,z,p,g[x],6,-198630844),p=qe(p,P,b,z,g[x+7],10,1126891415),z=qe(z,p,P,b,g[x+14],15,-1416354905),b=qe(b,z,p,P,g[x+5],21,-57434055),P=qe(P,b,z,p,g[x+12],6,1700485571),p=qe(p,P,b,z,g[x+3],10,-1894986606),z=qe(z,p,P,b,g[x+10],15,-1051523),b=qe(b,z,p,P,g[x+1],21,-2054922799),P=qe(P,b,z,p,g[x+8],6,1873313359),p=qe(p,P,b,z,g[x+15],10,-30611744),z=qe(z,p,P,b,g[x+6],15,-1560198380),b=qe(b,z,p,P,g[x+13],21,1309151649),P=qe(P,b,z,p,g[x+4],6,-145523070),p=qe(p,P,b,z,g[x+11],10,-1120210379),z=qe(z,p,P,b,g[x+2],15,718787259),b=qe(b,z,p,P,g[x+9],21,-343485551),P=wt(P,C),b=wt(b,w),z=wt(z,$),p=wt(p,ct)}return Uint32Array.of(P,b,z,p)}(y,8*g.length))},St="6ba7b810-9dad-11d1-80b4-00c04fd430c8",R="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function O(g,y,E,P,b,z){const p="string"==typeof E?function Ct(g){g=unescape(encodeURIComponent(g));const y=new Uint8Array(g.length);for(let E=0;E<g.length;++E)y[E]=g.charCodeAt(E);return y}(E):E,x="string"==typeof P?Er(P):P;if("string"==typeof P&&(P=Er(P)),16!==P?.length)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let C=new Uint8Array(16+p.length);if(C.set(x),C.set(p,x.length),C=y(C),C[6]=15&C[6]|g,C[8]=63&C[8]|128,b){z=z||0;for(let w=0;w<16;++w)b[z+w]=C[w];return b}return Ar(C)}function et(g,y,E,P){return O(48,We,g,y,E,P)}et.DNS=St,et.URL=R;const rt={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)},ut=function Et(g,y,E){if(rt.randomUUID&&!y&&!g)return rt.randomUUID();const P=(g=g||{}).random??g.rng?.()??function ft(){if(!Ge){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Ge=crypto.getRandomValues.bind(crypto)}return Ge(W)}();if(P.length<16)throw new Error("Random bytes length must be >= 16");if(P[6]=15&P[6]|64,P[8]=63&P[8]|128,y){if((E=E||0)<0||E+16>y.length)throw new RangeError(`UUID byte range ${E}:${E+15} is out of buffer bounds`);for(let b=0;b<16;++b)y[E+b]=P[b];return y}return Ar(P)};function It(g,y,E,P){switch(g){case 0:return y&E^~y&P;case 1:case 3:return y^E^P;case 2:return y&E^y&P^E&P}}function G(g,y){return g<<y|g>>>32-y}const Ce=function st(g){const y=[1518500249,1859775393,2400959708,3395469782],E=[1732584193,4023233417,2562383102,271733878,3285377520],P=new Uint8Array(g.length+1);P.set(g),P[g.length]=128,g=P;const z=Math.ceil((g.length/4+2)/16),p=new Array(z);for(let x=0;x<z;++x){const C=new Uint32Array(16);for(let w=0;w<16;++w)C[w]=g[64*x+4*w]<<24|g[64*x+4*w+1]<<16|g[64*x+4*w+2]<<8|g[64*x+4*w+3];p[x]=C}p[z-1][14]=8*(g.length-1)/Math.pow(2,32),p[z-1][14]=Math.floor(p[z-1][14]),p[z-1][15]=8*(g.length-1)&4294967295;for(let x=0;x<z;++x){const C=new Uint32Array(80);for(let Ht=0;Ht<16;++Ht)C[Ht]=p[x][Ht];for(let Ht=16;Ht<80;++Ht)C[Ht]=G(C[Ht-3]^C[Ht-8]^C[Ht-14]^C[Ht-16],1);let w=E[0],$=E[1],ct=E[2],kt=E[3],Ut=E[4];for(let Ht=0;Ht<80;++Ht){const zt=Math.floor(Ht/20),ue=G(w,5)+It(zt,$,ct,kt)+Ut+y[zt]+C[Ht]>>>0;Ut=kt,kt=ct,ct=G($,30)>>>0,$=w,w=ue}E[0]=E[0]+w>>>0,E[1]=E[1]+$>>>0,E[2]=E[2]+ct>>>0,E[3]=E[3]+kt>>>0,E[4]=E[4]+Ut>>>0}return Uint8Array.of(E[0]>>24,E[0]>>16,E[0]>>8,E[0],E[1]>>24,E[1]>>16,E[1]>>8,E[1],E[2]>>24,E[2]>>16,E[2]>>8,E[2],E[3]>>24,E[3]>>16,E[3]>>8,E[3],E[4]>>24,E[4]>>16,E[4]>>8,E[4])};function Ot(g,y,E,P){return O(80,Ce,g,y,E,P)}Ot.DNS=St,Ot.URL=R;var Te,ke=B(79687),er=function(){var g=(0,j.K2)(function(cr,sr,$e,He){for($e=$e||{},He=cr.length;He--;$e[cr[He]]=sr);return $e},"o"),y=[1,4],E=[1,13],P=[1,12],b=[1,15],z=[1,16],p=[1,20],x=[1,19],C=[6,7,8],w=[1,26],$=[1,24],ct=[1,25],kt=[6,7,11],Ut=[1,6,13,15,16,19,22],Ht=[1,33],zt=[1,34],ue=[1,6,7,11,13,15,16,19,22],je={trace:(0,j.K2)(function(){},"trace"),yy:{},symbols_:{error:2,start:3,mindMap:4,spaceLines:5,SPACELINE:6,NL:7,MINDMAP:8,document:9,stop:10,EOF:11,statement:12,SPACELIST:13,node:14,ICON:15,CLASS:16,nodeWithId:17,nodeWithoutId:18,NODE_DSTART:19,NODE_DESCR:20,NODE_DEND:21,NODE_ID:22,$accept:0,$end:1},terminals_:{2:"error",6:"SPACELINE",7:"NL",8:"MINDMAP",11:"EOF",13:"SPACELIST",15:"ICON",16:"CLASS",19:"NODE_DSTART",20:"NODE_DESCR",21:"NODE_DEND",22:"NODE_ID"},productions_:[0,[3,1],[3,2],[5,1],[5,2],[5,2],[4,2],[4,3],[10,1],[10,1],[10,1],[10,2],[10,2],[9,3],[9,2],[12,2],[12,2],[12,2],[12,1],[12,1],[12,1],[12,1],[12,1],[14,1],[14,1],[18,3],[17,1],[17,4]],performAction:(0,j.K2)(function(sr,$e,He,Pr,wr,Vr,xr){var Ba=Vr.length-1;switch(wr){case 6:case 7:return Pr;case 8:Pr.getLogger().trace("Stop NL ");break;case 9:Pr.getLogger().trace("Stop EOF ");break;case 11:Pr.getLogger().trace("Stop NL2 ");break;case 12:Pr.getLogger().trace("Stop EOF2 ");break;case 15:Pr.getLogger().info("Node: ",Vr[Ba].id),Pr.addNode(Vr[Ba-1].length,Vr[Ba].id,Vr[Ba].descr,Vr[Ba].type);break;case 16:Pr.getLogger().trace("Icon: ",Vr[Ba]),Pr.decorateNode({icon:Vr[Ba]});break;case 17:case 21:Pr.decorateNode({class:Vr[Ba]});break;case 18:Pr.getLogger().trace("SPACELIST");break;case 19:Pr.getLogger().trace("Node: ",Vr[Ba].id),Pr.addNode(0,Vr[Ba].id,Vr[Ba].descr,Vr[Ba].type);break;case 20:Pr.decorateNode({icon:Vr[Ba]});break;case 25:Pr.getLogger().trace("node found ..",Vr[Ba-2]),this.$={id:Vr[Ba-1],descr:Vr[Ba-1],type:Pr.getType(Vr[Ba-2],Vr[Ba])};break;case 26:this.$={id:Vr[Ba],descr:Vr[Ba],type:Pr.nodeType.DEFAULT};break;case 27:Pr.getLogger().trace("node found ..",Vr[Ba-3]),this.$={id:Vr[Ba-3],descr:Vr[Ba-1],type:Pr.getType(Vr[Ba-2],Vr[Ba])}}},"anonymous"),table:[{3:1,4:2,5:3,6:[1,5],8:y},{1:[3]},{1:[2,1]},{4:6,6:[1,7],7:[1,8],8:y},{6:E,7:[1,10],9:9,12:11,13:P,14:14,15:b,16:z,17:17,18:18,19:p,22:x},g(C,[2,3]),{1:[2,2]},g(C,[2,4]),g(C,[2,5]),{1:[2,6],6:E,12:21,13:P,14:14,15:b,16:z,17:17,18:18,19:p,22:x},{6:E,9:22,12:11,13:P,14:14,15:b,16:z,17:17,18:18,19:p,22:x},{6:w,7:$,10:23,11:ct},g(kt,[2,22],{17:17,18:18,14:27,15:[1,28],16:[1,29],19:p,22:x}),g(kt,[2,18]),g(kt,[2,19]),g(kt,[2,20]),g(kt,[2,21]),g(kt,[2,23]),g(kt,[2,24]),g(kt,[2,26],{19:[1,30]}),{20:[1,31]},{6:w,7:$,10:32,11:ct},{1:[2,7],6:E,12:21,13:P,14:14,15:b,16:z,17:17,18:18,19:p,22:x},g(Ut,[2,14],{7:Ht,11:zt}),g(ue,[2,8]),g(ue,[2,9]),g(ue,[2,10]),g(kt,[2,15]),g(kt,[2,16]),g(kt,[2,17]),{20:[1,35]},{21:[1,36]},g(Ut,[2,13],{7:Ht,11:zt}),g(ue,[2,11]),g(ue,[2,12]),{21:[1,37]},g(kt,[2,25]),g(kt,[2,27])],defaultActions:{2:[2,1],6:[2,2]},parseError:(0,j.K2)(function(sr,$e){if(!$e.recoverable){var He=new Error(sr);throw He.hash=$e,He}this.trace(sr)},"parseError"),parse:(0,j.K2)(function(sr){var $e=this,He=[0],Pr=[],wr=[null],Vr=[],xr=this.table,Ba="",Zr=0,Oa=0,Qr=0,Rr=Vr.slice.call(arguments,1),Tr=Object.create(this.lexer),N={yy:{}};for(var Vt in this.yy)Object.prototype.hasOwnProperty.call(this.yy,Vt)&&(N.yy[Vt]=this.yy[Vt]);Tr.setInput(sr,N.yy),N.yy.lexer=Tr,N.yy.parser=this,typeof Tr.yylloc>"u"&&(Tr.yylloc={});var Ke=Tr.yylloc;Vr.push(Ke);var rr=Tr.options&&Tr.options.ranges;function hr(){var lr;return"number"!=typeof(lr=Pr.pop()||Tr.lex()||1)&&(lr instanceof Array&&(lr=(Pr=lr).pop()),lr=$e.symbols_[lr]||lr),lr}this.parseError="function"==typeof N.yy.parseError?N.yy.parseError:Object.getPrototypeOf(this).parseError,(0,j.K2)(function ia(lr){He.length=He.length-2*lr,wr.length=wr.length-lr,Vr.length=Vr.length-lr},"popStack"),(0,j.K2)(hr,"lex");for(var ga,or,_a,Ma,Jr,ha,Yr,pr,ca={};;){if(this.defaultActions[_a=He[He.length-1]]?Ma=this.defaultActions[_a]:((null===ga||typeof ga>"u")&&(ga=hr()),Ma=xr[_a]&&xr[_a][ga]),typeof Ma>"u"||!Ma.length||!Ma[0]){var Va;for(ha in pr=[],xr[_a])this.terminals_[ha]&&ha>2&&pr.push("'"+this.terminals_[ha]+"'");Va=Tr.showPosition?"Parse error on line "+(Zr+1)+":\n"+Tr.showPosition()+"\nExpecting "+pr.join(", ")+", got '"+(this.terminals_[ga]||ga)+"'":"Parse error on line "+(Zr+1)+": Unexpected "+(1==ga?"end of input":"'"+(this.terminals_[ga]||ga)+"'"),this.parseError(Va,{text:Tr.match,token:this.terminals_[ga]||ga,line:Tr.yylineno,loc:Ke,expected:pr})}if(Ma[0]instanceof Array&&Ma.length>1)throw new Error("Parse Error: multiple actions possible at state: "+_a+", token: "+ga);switch(Ma[0]){case 1:He.push(ga),wr.push(Tr.yytext),Vr.push(Tr.yylloc),He.push(Ma[1]),ga=null,or?(ga=or,or=null):(Oa=Tr.yyleng,Ba=Tr.yytext,Zr=Tr.yylineno,Ke=Tr.yylloc,Qr>0&&Qr--);break;case 2:if(ca.$=wr[wr.length-(Yr=this.productions_[Ma[1]][1])],ca._$={first_line:Vr[Vr.length-(Yr||1)].first_line,last_line:Vr[Vr.length-1].last_line,first_column:Vr[Vr.length-(Yr||1)].first_column,last_column:Vr[Vr.length-1].last_column},rr&&(ca._$.range=[Vr[Vr.length-(Yr||1)].range[0],Vr[Vr.length-1].range[1]]),typeof(Jr=this.performAction.apply(ca,[Ba,Oa,Zr,N.yy,Ma[1],wr,Vr].concat(Rr)))<"u")return Jr;Yr&&(He=He.slice(0,-1*Yr*2),wr=wr.slice(0,-1*Yr),Vr=Vr.slice(0,-1*Yr)),He.push(this.productions_[Ma[1]][0]),wr.push(ca.$),Vr.push(ca._$),He.push(xr[He[He.length-2]][He[He.length-1]]);break;case 3:return!0}}return!0},"parse")};function Cr(){this.yy={}}return je.lexer=function(){return{EOF:1,parseError:(0,j.K2)(function($e,He){if(!this.yy.parser)throw new Error($e);this.yy.parser.parseError($e,He)},"parseError"),setInput:(0,j.K2)(function(sr,$e){return this.yy=$e||this.yy||{},this._input=sr,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},"setInput"),input:(0,j.K2)(function(){var sr=this._input[0];return this.yytext+=sr,this.yyleng++,this.offset++,this.match+=sr,this.matched+=sr,sr.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),sr},"input"),unput:(0,j.K2)(function(sr){var $e=sr.length,He=sr.split(/(?:\r\n?|\n)/g);this._input=sr+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-$e),this.offset-=$e;var Pr=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),He.length-1&&(this.yylineno-=He.length-1);var wr=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:He?(He.length===Pr.length?this.yylloc.first_column:0)+Pr[Pr.length-He.length].length-He[0].length:this.yylloc.first_column-$e},this.options.ranges&&(this.yylloc.range=[wr[0],wr[0]+this.yyleng-$e]),this.yyleng=this.yytext.length,this},"unput"),more:(0,j.K2)(function(){return this._more=!0,this},"more"),reject:(0,j.K2)(function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},"reject"),less:(0,j.K2)(function(sr){this.unput(this.match.slice(sr))},"less"),pastInput:(0,j.K2)(function(){var sr=this.matched.substr(0,this.matched.length-this.match.length);return(sr.length>20?"...":"")+sr.substr(-20).replace(/\n/g,"")},"pastInput"),upcomingInput:(0,j.K2)(function(){var sr=this.match;return sr.length<20&&(sr+=this._input.substr(0,20-sr.length)),(sr.substr(0,20)+(sr.length>20?"...":"")).replace(/\n/g,"")},"upcomingInput"),showPosition:(0,j.K2)(function(){var sr=this.pastInput(),$e=new Array(sr.length+1).join("-");return sr+this.upcomingInput()+"\n"+$e+"^"},"showPosition"),test_match:(0,j.K2)(function(sr,$e){var He,Pr,wr;if(this.options.backtrack_lexer&&(wr={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(wr.yylloc.range=this.yylloc.range.slice(0))),(Pr=sr[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=Pr.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:Pr?Pr[Pr.length-1].length-Pr[Pr.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+sr[0].length},this.yytext+=sr[0],this.match+=sr[0],this.matches=sr,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(sr[0].length),this.matched+=sr[0],He=this.performAction.call(this,this.yy,this,$e,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),He)return He;if(this._backtrack){for(var Vr in wr)this[Vr]=wr[Vr];return!1}return!1},"test_match"),next:(0,j.K2)(function(){if(this.done)return this.EOF;var sr,$e,He,Pr;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var wr=this._currentRules(),Vr=0;Vr<wr.length;Vr++)if((He=this._input.match(this.rules[wr[Vr]]))&&(!$e||He[0].length>$e[0].length)){if($e=He,Pr=Vr,this.options.backtrack_lexer){if(!1!==(sr=this.test_match(He,wr[Vr])))return sr;if(this._backtrack){$e=!1;continue}return!1}if(!this.options.flex)break}return $e?!1!==(sr=this.test_match($e,wr[Pr]))&&sr:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},"next"),lex:(0,j.K2)(function(){return this.next()||this.lex()},"lex"),begin:(0,j.K2)(function($e){this.conditionStack.push($e)},"begin"),popState:(0,j.K2)(function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},"popState"),_currentRules:(0,j.K2)(function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},"_currentRules"),topState:(0,j.K2)(function($e){return($e=this.conditionStack.length-1-Math.abs($e||0))>=0?this.conditionStack[$e]:"INITIAL"},"topState"),pushState:(0,j.K2)(function($e){this.begin($e)},"pushState"),stateStackSize:(0,j.K2)(function(){return this.conditionStack.length},"stateStackSize"),options:{"case-insensitive":!0},performAction:(0,j.K2)(function($e,He,Pr,wr){switch(Pr){case 0:return $e.getLogger().trace("Found comment",He.yytext),6;case 1:return 8;case 2:this.begin("CLASS");break;case 3:return this.popState(),16;case 4:case 23:case 26:this.popState();break;case 5:$e.getLogger().trace("Begin icon"),this.begin("ICON");break;case 6:return $e.getLogger().trace("SPACELINE"),6;case 7:return 7;case 8:return 15;case 9:$e.getLogger().trace("end icon"),this.popState();break;case 10:return $e.getLogger().trace("Exploding node"),this.begin("NODE"),19;case 11:return $e.getLogger().trace("Cloud"),this.begin("NODE"),19;case 12:return $e.getLogger().trace("Explosion Bang"),this.begin("NODE"),19;case 13:return $e.getLogger().trace("Cloud Bang"),this.begin("NODE"),19;case 14:case 15:case 16:case 17:return this.begin("NODE"),19;case 18:return 13;case 19:return 22;case 20:return 11;case 21:this.begin("NSTR2");break;case 22:return"NODE_DESCR";case 24:$e.getLogger().trace("Starting NSTR"),this.begin("NSTR");break;case 25:return $e.getLogger().trace("description:",He.yytext),"NODE_DESCR";case 27:return this.popState(),$e.getLogger().trace("node end ))"),"NODE_DEND";case 28:return this.popState(),$e.getLogger().trace("node end )"),"NODE_DEND";case 29:return this.popState(),$e.getLogger().trace("node end ...",He.yytext),"NODE_DEND";case 30:case 33:case 34:return this.popState(),$e.getLogger().trace("node end (("),"NODE_DEND";case 31:case 32:return this.popState(),$e.getLogger().trace("node end (-"),"NODE_DEND";case 35:case 36:return $e.getLogger().trace("Long description:",He.yytext),20}},"anonymous"),rules:[/^(?:\s*%%.*)/i,/^(?:mindmap\b)/i,/^(?::::)/i,/^(?:.+)/i,/^(?:\n)/i,/^(?:::icon\()/i,/^(?:[\s]+[\n])/i,/^(?:[\n]+)/i,/^(?:[^\)]+)/i,/^(?:\))/i,/^(?:-\))/i,/^(?:\(-)/i,/^(?:\)\))/i,/^(?:\))/i,/^(?:\(\()/i,/^(?:\{\{)/i,/^(?:\()/i,/^(?:\[)/i,/^(?:[\s]+)/i,/^(?:[^\(\[\n\)\{\}]+)/i,/^(?:$)/i,/^(?:["][`])/i,/^(?:[^`"]+)/i,/^(?:[`]["])/i,/^(?:["])/i,/^(?:[^"]+)/i,/^(?:["])/i,/^(?:[\)]\))/i,/^(?:[\)])/i,/^(?:[\]])/i,/^(?:\}\})/i,/^(?:\(-)/i,/^(?:-\))/i,/^(?:\(\()/i,/^(?:\()/i,/^(?:[^\)\]\(\}]+)/i,/^(?:.+(?!\(\())/i],conditions:{CLASS:{rules:[3,4],inclusive:!1},ICON:{rules:[8,9],inclusive:!1},NSTR2:{rules:[22,23],inclusive:!1},NSTR:{rules:[25,26],inclusive:!1},NODE:{rules:[21,24,27,28,29,30,31,32,33,34,35,36],inclusive:!1},INITIAL:{rules:[0,1,2,5,6,7,10,11,12,13,14,15,16,17,18,19,20],inclusive:!0}}}}(),(0,j.K2)(Cr,"Parser"),Cr.prototype=je,je.Parser=Cr,new Cr}();er.parser=er;var Xe=er,Ir={DEFAULT:0,NO_BORDER:0,ROUNDED_RECT:1,RECT:2,CIRCLE:3,CLOUD:4,BANG:5,HEXAGON:6},Ee=(class{constructor(){this.nodes=[],this.count=0,this.elements={},this.getLogger=this.getLogger.bind(this),this.nodeType=Ir,this.clear(),this.getType=this.getType.bind(this),this.getElementById=this.getElementById.bind(this),this.getParent=this.getParent.bind(this),this.getMindmap=this.getMindmap.bind(this),this.addNode=this.addNode.bind(this),this.decorateNode=this.decorateNode.bind(this)}clear(){this.nodes=[],this.count=0,this.elements={},this.baseLevel=void 0}getParent(g){for(let y=this.nodes.length-1;y>=0;y--)if(this.nodes[y].level<g)return this.nodes[y];return null}getMindmap(){return this.nodes.length>0?this.nodes[0]:null}addNode(g,y,E,P){j.Rm.info("addNode",g,y,E,P);let b=!1;0===this.nodes.length?(this.baseLevel=g,g=0,b=!0):void 0!==this.baseLevel&&(g-=this.baseLevel,b=!1);const z=(0,Xt.D7)();let p=z.mindmap?.padding??Xt.UI.mindmap.padding;switch(P){case this.nodeType.ROUNDED_RECT:case this.nodeType.RECT:case this.nodeType.HEXAGON:p*=2}const x={id:this.count++,nodeId:(0,Xt.jZ)(y,z),level:g,descr:(0,Xt.jZ)(E,z),type:P,children:[],width:z.mindmap?.maxNodeWidth??Xt.UI.mindmap.maxNodeWidth,padding:p,isRoot:b},C=this.getParent(g);if(C)C.children.push(x),this.nodes.push(x);else{if(!b)throw new Error(`There can be only one root. No parent could be found for ("${x.descr}")`);this.nodes.push(x)}}getType(g,y){switch(j.Rm.debug("In get type",g,y),g){case"[":return this.nodeType.RECT;case"(":return")"===y?this.nodeType.ROUNDED_RECT:this.nodeType.CLOUD;case"((":return this.nodeType.CIRCLE;case")":return this.nodeType.CLOUD;case"))":return this.nodeType.BANG;case"{{":return this.nodeType.HEXAGON;default:return this.nodeType.DEFAULT}}setElementForId(g,y){this.elements[g]=y}getElementById(g){return this.elements[g]}decorateNode(g){if(!g)return;const y=(0,Xt.D7)(),E=this.nodes[this.nodes.length-1];g.icon&&(E.icon=(0,Xt.jZ)(g.icon,y)),g.class&&(E.class=(0,Xt.jZ)(g.class,y))}type2Str(g){switch(g){case this.nodeType.DEFAULT:return"no-border";case this.nodeType.RECT:return"rect";case this.nodeType.ROUNDED_RECT:return"rounded-rect";case this.nodeType.CIRCLE:return"circle";case this.nodeType.CLOUD:return"cloud";case this.nodeType.BANG:return"bang";case this.nodeType.HEXAGON:return"hexgon";default:return"no-border"}}assignSections(g,y){if(g.section=0===g.level?void 0:y,g.children)for(const[E,P]of g.children.entries())this.assignSections(P,0===g.level?E:y)}flattenNodes(g,y){const E=["mindmap-node"];!0===g.isRoot?E.push("section-root","section--1"):void 0!==g.section&&E.push(`section-${g.section}`),g.class&&E.push(g.class);const P=E.join(" "),b=(0,j.K2)(p=>{switch(p){case Ir.CIRCLE:return"mindmapCircle";case Ir.RECT:return"rect";case Ir.ROUNDED_RECT:return"rounded";case Ir.CLOUD:return"cloud";case Ir.BANG:return"bang";case Ir.HEXAGON:return"hexagon";case Ir.DEFAULT:return"defaultMindmapNode";default:return"rect"}},"getShapeFromType"),z={id:g.id.toString(),domId:"node_"+g.id.toString(),label:g.descr,isGroup:!1,shape:b(g.type),width:g.width,height:g.height??0,padding:g.padding,cssClasses:P,cssStyles:[],look:"default",icon:g.icon,x:g.x,y:g.y,level:g.level,nodeId:g.nodeId,type:g.type,section:g.section};if(y.push(z),g.children)for(const p of g.children)this.flattenNodes(p,y)}generateEdges(g,y){if(g.children)for(const E of g.children){let P="edge";void 0!==E.section&&(P+=` section-edge-${E.section}`),P+=` edge-depth-${g.level+1}`;const z={id:`edge_${g.id}_${E.id}`,start:g.id.toString(),end:E.id.toString(),type:"normal",curve:"basis",thickness:"normal",look:"default",classes:P,depth:g.level,section:E.section};y.push(z),this.generateEdges(E,y)}}getData(){const g=this.getMindmap(),y=(0,Xt.D7)(),b=y;if(void 0!==(0,Xt.TM)().layout||(b.layout="cose-bilkent"),!g)return{nodes:[],edges:[],config:b};j.Rm.debug("getData: mindmapRoot",g,y),this.assignSections(g);const z=[],p=[];this.flattenNodes(g,z),this.generateEdges(g,p),j.Rm.debug(`getData: processed ${z.length} nodes and ${p.length} edges`);const x=new Map;for(const C of z)x.set(C.id,{shape:C.shape,width:C.width,height:C.height,padding:C.padding});return{nodes:z,edges:p,config:b,rootNode:g,markers:["point"],direction:"TB",nodeSpacing:50,rankSpacing:50,shapes:Object.fromEntries(x),type:"mindmap",diagramId:"mindmap-"+ut()}}getLogger(){return j.Rm}static#t=Te=()=>((0,ee.A)(this,"MindmapDB"),(0,j.K2)(this,"MindmapDB"),this)},Te()),nr={draw:(0,j.K2)(function(){var g=(0,lt.A)(function*(y,E,P,b){j.Rm.debug("Rendering mindmap diagram\n"+y);const z=b.db,p=z.getData(),x=(0,L.A)(E,p.config.securityLevel);p.type=b.type,p.layoutAlgorithm=(0,Rt.q7)(p.config.layout,{fallback:"cose-bilkent"}),p.diagramId=E,z.getMindmap()&&(p.nodes.forEach(w=>{"rounded"===w.shape?(w.radius=15,w.taper=15,w.stroke="none",w.width=0,w.padding=15):"circle"===w.shape?w.padding=10:"rect"===w.shape&&(w.width=0,w.padding=10)}),yield(0,Rt.XX)(p,x),(0,D.P)(x,p.config.mindmap?.padding??Xt.UI.mindmap.padding,"mindmapDiagram",p.config.mindmap?.useMaxWidth??Xt.UI.mindmap.useMaxWidth))});return function(y,E,P,b){return g.apply(this,arguments)}}(),"draw")},te=(0,j.K2)(g=>{let y="";for(let E=0;E<g.THEME_COLOR_LIMIT;E++)g["lineColor"+E]=g["lineColor"+E]||g["cScaleInv"+E],g["lineColor"+E]=(0,ke.HD)(g["lineColor"+E])?(0,ke.a)(g["lineColor"+E],20):(0,ke.e$)(g["lineColor"+E],20);for(let E=0;E<g.THEME_COLOR_LIMIT;E++)y+=`\n    .section-${E-1} rect, .section-${E-1} path, .section-${E-1} circle, .section-${E-1} polygon, .section-${E-1} path  {\n      fill: ${g["cScale"+E]};\n    }\n    .section-${E-1} text {\n     fill: ${g["cScaleLabel"+E]};\n    }\n    .node-icon-${E-1} {\n      font-size: 40px;\n      color: ${g["cScaleLabel"+E]};\n    }\n    .section-edge-${E-1}{\n      stroke: ${g["cScale"+E]};\n    }\n    .edge-depth-${E-1}{\n      stroke-width: ${""+(17-3*E)};\n    }\n    .section-${E-1} line {\n      stroke: ${g["cScaleInv"+E]} ;\n      stroke-width: 3;\n    }\n\n    .disabled, .disabled circle, .disabled text {\n      fill: lightgray;\n    }\n    .disabled text {\n      fill: #efefef;\n    }\n    `;return y},"genSections"),Le=(0,j.K2)(g=>`\n  .edge {\n    stroke-width: 3;\n  }\n  ${te(g)}\n  .section-root rect, .section-root path, .section-root circle, .section-root polygon  {\n    fill: ${g.git0};\n  }\n  .section-root text {\n    fill: ${g.gitBranchLabel0};\n  }\n  .section-root span {\n    color: ${g.gitBranchLabel0};\n  }\n  .section-2 span {\n    color: ${g.gitBranchLabel0};\n  }\n  .icon-container {\n    height:100%;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n  }\n  .edge {\n    fill: none;\n  }\n  .mindmap-node-label {\n    dy: 1em;\n    alignment-baseline: middle;\n    text-anchor: middle;\n    dominant-baseline: middle;\n    text-align: center;\n  }\n`,"getStyles"),tr={get db(){return new Ee},renderer:nr,parser:Xe,styles:Le}},40622:(ti,_r,B)=>{"use strict";B.d(_r,{ABi:()=>Ge.AB,Agd:()=>Ge.Ag,DCK:()=>W.DC,GPZ:()=>j.GP,GZz:()=>Br.GZ,GuW:()=>Ge.Gu,IA3:()=>Br.IA,IrU:()=>Br.Ir,JLW:()=>Br.JL,Ltv:()=>ge.Lt,Lx9:()=>Br.Lx,Mol:()=>Ge.Mo,OEq:()=>Br.OE,PGM:()=>Br.PG,PGu:()=>Ge.PG,Q7f:()=>Br.Q7,Sk5:()=>Fe.Sk,T9B:()=>lt.T9,TUC:()=>Ge.TU,UAC:()=>Ge.UA,UMr:()=>Lr.UM,UPb:()=>Br.UP,Ui6:()=>Ge.Ui,WH:()=>Lr.WH,Wi0:()=>Br.Wi,Xf2:()=>Br.Xf,YPH:()=>Ge.YP,Yu4:()=>Br.Yu,bEH:()=>vr.bE,cVp:()=>Br.cV,dyv:()=>Br.dy,hkb:()=>Fe.hk,jkA:()=>lt.jk,l78:()=>ee.l7,lUB:()=>Br.lU,m4Y:()=>Lr.m4,n8j:()=>Br.n8,nVG:()=>Br.nV,oDi:()=>Br.oD,olC:()=>Br.ol,qrM:()=>Br.qr,rGn:()=>Ge.rG,rLf:()=>Br.rL,t6C:()=>Ge.t6,tlR:()=>ee.tl,ucG:()=>Ge.uc,uxU:()=>Br.ux,w7C:()=>Lr.w7,wXd:()=>Ge.wX,y8u:()=>Br.y8,zt:()=>Ar.zt});var lt=B(56018),ee=B(11574),j=(B(73745),B(37752),B(79494),B(91209),B(41906),B(61800),B(85173),B(79139),B(95647),B(72057),B(82709),B(66272)),Fe=(B(99848),B(87742)),vr=B(86805),Lr=(B(56366),B(26670),B(68026),B(90260),B(49979)),Ar=B(34708),ge=B(41479),Br=B(88383),Ge=B(52925),W=B(74275);B(25248),B(63111),B(52740)},42282:(ti,_r,B)=>{"use strict";B.r(_r),B.d(_r,{diagram:()=>z});var lt=B(52052),ee=B(79006),L=B(32303),D=B(73986),Rt=B(49645),dt=B(64693),q=B(30001),A=B(37355),$t=B(89630),yt=B(40622),Ye=function(){var p=(0,L.K2)(function(Tr,N,Vt,Ke){for(Vt=Vt||{},Ke=Tr.length;Ke--;Vt[Tr[Ke]]=N);return Vt},"o"),x=[6,8,10,12,13,14,15,16,17,18,20,21,22,23,24,25,26,27,28,29,30,31,33,35,36,38,40],C=[1,26],w=[1,27],$=[1,28],ct=[1,29],kt=[1,30],Ut=[1,31],Ht=[1,32],zt=[1,33],ue=[1,34],je=[1,9],ze=[1,10],Cr=[1,11],cr=[1,12],sr=[1,13],$e=[1,14],He=[1,15],Pr=[1,16],wr=[1,19],Vr=[1,20],xr=[1,21],Ba=[1,22],Zr=[1,23],Oa=[1,25],Qr=[1,35],ra={trace:(0,L.K2)(function(){},"trace"),yy:{},symbols_:{error:2,start:3,gantt:4,document:5,EOF:6,line:7,SPACE:8,statement:9,NL:10,weekday:11,weekday_monday:12,weekday_tuesday:13,weekday_wednesday:14,weekday_thursday:15,weekday_friday:16,weekday_saturday:17,weekday_sunday:18,weekend:19,weekend_friday:20,weekend_saturday:21,dateFormat:22,inclusiveEndDates:23,topAxis:24,axisFormat:25,tickInterval:26,excludes:27,includes:28,todayMarker:29,title:30,acc_title:31,acc_title_value:32,acc_descr:33,acc_descr_value:34,acc_descr_multiline_value:35,section:36,clickStatement:37,taskTxt:38,taskData:39,click:40,callbackname:41,callbackargs:42,href:43,clickStatementDebug:44,$accept:0,$end:1},terminals_:{2:"error",4:"gantt",6:"EOF",8:"SPACE",10:"NL",12:"weekday_monday",13:"weekday_tuesday",14:"weekday_wednesday",15:"weekday_thursday",16:"weekday_friday",17:"weekday_saturday",18:"weekday_sunday",20:"weekend_friday",21:"weekend_saturday",22:"dateFormat",23:"inclusiveEndDates",24:"topAxis",25:"axisFormat",26:"tickInterval",27:"excludes",28:"includes",29:"todayMarker",30:"title",31:"acc_title",32:"acc_title_value",33:"acc_descr",34:"acc_descr_value",35:"acc_descr_multiline_value",36:"section",38:"taskTxt",39:"taskData",40:"click",41:"callbackname",42:"callbackargs",43:"href"},productions_:[0,[3,3],[5,0],[5,2],[7,2],[7,1],[7,1],[7,1],[11,1],[11,1],[11,1],[11,1],[11,1],[11,1],[11,1],[19,1],[19,1],[9,1],[9,1],[9,1],[9,1],[9,1],[9,1],[9,1],[9,1],[9,1],[9,1],[9,1],[9,2],[9,2],[9,1],[9,1],[9,1],[9,2],[37,2],[37,3],[37,3],[37,4],[37,3],[37,4],[37,2],[44,2],[44,3],[44,3],[44,4],[44,3],[44,4],[44,2]],performAction:(0,L.K2)(function(N,Vt,Ke,rr,ia,hr,ga){var or=hr.length-1;switch(ia){case 1:return hr[or-1];case 2:case 6:case 7:this.$=[];break;case 3:hr[or-1].push(hr[or]),this.$=hr[or-1];break;case 4:case 5:this.$=hr[or];break;case 8:rr.setWeekday("monday");break;case 9:rr.setWeekday("tuesday");break;case 10:rr.setWeekday("wednesday");break;case 11:rr.setWeekday("thursday");break;case 12:rr.setWeekday("friday");break;case 13:rr.setWeekday("saturday");break;case 14:rr.setWeekday("sunday");break;case 15:rr.setWeekend("friday");break;case 16:rr.setWeekend("saturday");break;case 17:rr.setDateFormat(hr[or].substr(11)),this.$=hr[or].substr(11);break;case 18:rr.enableInclusiveEndDates(),this.$=hr[or].substr(18);break;case 19:rr.TopAxis(),this.$=hr[or].substr(8);break;case 20:rr.setAxisFormat(hr[or].substr(11)),this.$=hr[or].substr(11);break;case 21:rr.setTickInterval(hr[or].substr(13)),this.$=hr[or].substr(13);break;case 22:rr.setExcludes(hr[or].substr(9)),this.$=hr[or].substr(9);break;case 23:rr.setIncludes(hr[or].substr(9)),this.$=hr[or].substr(9);break;case 24:rr.setTodayMarker(hr[or].substr(12)),this.$=hr[or].substr(12);break;case 27:rr.setDiagramTitle(hr[or].substr(6)),this.$=hr[or].substr(6);break;case 28:this.$=hr[or].trim(),rr.setAccTitle(this.$);break;case 29:case 30:this.$=hr[or].trim(),rr.setAccDescription(this.$);break;case 31:rr.addSection(hr[or].substr(8)),this.$=hr[or].substr(8);break;case 33:rr.addTask(hr[or-1],hr[or]),this.$="task";break;case 34:this.$=hr[or-1],rr.setClickEvent(hr[or-1],hr[or],null);break;case 35:this.$=hr[or-2],rr.setClickEvent(hr[or-2],hr[or-1],hr[or]);break;case 36:this.$=hr[or-2],rr.setClickEvent(hr[or-2],hr[or-1],null),rr.setLink(hr[or-2],hr[or]);break;case 37:this.$=hr[or-3],rr.setClickEvent(hr[or-3],hr[or-2],hr[or-1]),rr.setLink(hr[or-3],hr[or]);break;case 38:this.$=hr[or-2],rr.setClickEvent(hr[or-2],hr[or],null),rr.setLink(hr[or-2],hr[or-1]);break;case 39:this.$=hr[or-3],rr.setClickEvent(hr[or-3],hr[or-1],hr[or]),rr.setLink(hr[or-3],hr[or-2]);break;case 40:this.$=hr[or-1],rr.setLink(hr[or-1],hr[or]);break;case 41:case 47:this.$=hr[or-1]+" "+hr[or];break;case 42:case 43:case 45:this.$=hr[or-2]+" "+hr[or-1]+" "+hr[or];break;case 44:case 46:this.$=hr[or-3]+" "+hr[or-2]+" "+hr[or-1]+" "+hr[or]}},"anonymous"),table:[{3:1,4:[1,2]},{1:[3]},p(x,[2,2],{5:3}),{6:[1,4],7:5,8:[1,6],9:7,10:[1,8],11:17,12:C,13:w,14:$,15:ct,16:kt,17:Ut,18:Ht,19:18,20:zt,21:ue,22:je,23:ze,24:Cr,25:cr,26:sr,27:$e,28:He,29:Pr,30:wr,31:Vr,33:xr,35:Ba,36:Zr,37:24,38:Oa,40:Qr},p(x,[2,7],{1:[2,1]}),p(x,[2,3]),{9:36,11:17,12:C,13:w,14:$,15:ct,16:kt,17:Ut,18:Ht,19:18,20:zt,21:ue,22:je,23:ze,24:Cr,25:cr,26:sr,27:$e,28:He,29:Pr,30:wr,31:Vr,33:xr,35:Ba,36:Zr,37:24,38:Oa,40:Qr},p(x,[2,5]),p(x,[2,6]),p(x,[2,17]),p(x,[2,18]),p(x,[2,19]),p(x,[2,20]),p(x,[2,21]),p(x,[2,22]),p(x,[2,23]),p(x,[2,24]),p(x,[2,25]),p(x,[2,26]),p(x,[2,27]),{32:[1,37]},{34:[1,38]},p(x,[2,30]),p(x,[2,31]),p(x,[2,32]),{39:[1,39]},p(x,[2,8]),p(x,[2,9]),p(x,[2,10]),p(x,[2,11]),p(x,[2,12]),p(x,[2,13]),p(x,[2,14]),p(x,[2,15]),p(x,[2,16]),{41:[1,40],43:[1,41]},p(x,[2,4]),p(x,[2,28]),p(x,[2,29]),p(x,[2,33]),p(x,[2,34],{42:[1,42],43:[1,43]}),p(x,[2,40],{41:[1,44]}),p(x,[2,35],{43:[1,45]}),p(x,[2,36]),p(x,[2,38],{42:[1,46]}),p(x,[2,37]),p(x,[2,39])],defaultActions:{},parseError:(0,L.K2)(function(N,Vt){if(!Vt.recoverable){var Ke=new Error(N);throw Ke.hash=Vt,Ke}this.trace(N)},"parseError"),parse:(0,L.K2)(function(N){var Vt=this,Ke=[0],rr=[],ia=[null],hr=[],ga=this.table,or="",_a=0,Ma=0,Ra=0,ha=hr.slice.call(arguments,1),Yr=Object.create(this.lexer),Fa={yy:{}};for(var pr in this.yy)Object.prototype.hasOwnProperty.call(this.yy,pr)&&(Fa.yy[pr]=this.yy[pr]);Yr.setInput(N,Fa.yy),Fa.yy.lexer=Yr,Fa.yy.parser=this,typeof Yr.yylloc>"u"&&(Yr.yylloc={});var Va=Yr.yylloc;hr.push(Va);var lr=Yr.options&&Yr.options.ranges;function za(){var jt;return"number"!=typeof(jt=rr.pop()||Yr.lex()||1)&&(jt instanceof Array&&(jt=(rr=jt).pop()),jt=Vt.symbols_[jt]||jt),jt}this.parseError="function"==typeof Fa.yy.parseError?Fa.yy.parseError:Object.getPrototypeOf(this).parseError,(0,L.K2)(function qa(jt){Ke.length=Ke.length-2*jt,ia.length=ia.length-jt,hr.length=hr.length-jt},"popStack"),(0,L.K2)(za,"lex");for(var ja,Sa,Ua,Ka,di,Li,Me,Dt,we={};;){if(this.defaultActions[Ua=Ke[Ke.length-1]]?Ka=this.defaultActions[Ua]:((null===ja||typeof ja>"u")&&(ja=za()),Ka=ga[Ua]&&ga[Ua][ja]),typeof Ka>"u"||!Ka.length||!Ka[0]){var M;for(Li in Dt=[],ga[Ua])this.terminals_[Li]&&Li>2&&Dt.push("'"+this.terminals_[Li]+"'");M=Yr.showPosition?"Parse error on line "+(_a+1)+":\n"+Yr.showPosition()+"\nExpecting "+Dt.join(", ")+", got '"+(this.terminals_[ja]||ja)+"'":"Parse error on line "+(_a+1)+": Unexpected "+(1==ja?"end of input":"'"+(this.terminals_[ja]||ja)+"'"),this.parseError(M,{text:Yr.match,token:this.terminals_[ja]||ja,line:Yr.yylineno,loc:Va,expected:Dt})}if(Ka[0]instanceof Array&&Ka.length>1)throw new Error("Parse Error: multiple actions possible at state: "+Ua+", token: "+ja);switch(Ka[0]){case 1:Ke.push(ja),ia.push(Yr.yytext),hr.push(Yr.yylloc),Ke.push(Ka[1]),ja=null,Sa?(ja=Sa,Sa=null):(Ma=Yr.yyleng,or=Yr.yytext,_a=Yr.yylineno,Va=Yr.yylloc,Ra>0&&Ra--);break;case 2:if(we.$=ia[ia.length-(Me=this.productions_[Ka[1]][1])],we._$={first_line:hr[hr.length-(Me||1)].first_line,last_line:hr[hr.length-1].last_line,first_column:hr[hr.length-(Me||1)].first_column,last_column:hr[hr.length-1].last_column},lr&&(we._$.range=[hr[hr.length-(Me||1)].range[0],hr[hr.length-1].range[1]]),typeof(di=this.performAction.apply(we,[or,Ma,_a,Fa.yy,Ka[1],ia,hr].concat(ha)))<"u")return di;Me&&(Ke=Ke.slice(0,-1*Me*2),ia=ia.slice(0,-1*Me),hr=hr.slice(0,-1*Me)),Ke.push(this.productions_[Ka[1]][0]),ia.push(we.$),hr.push(we._$),Ke.push(ga[Ke[Ke.length-2]][Ke[Ke.length-1]]);break;case 3:return!0}}return!0},"parse")};function Rr(){this.yy={}}return ra.lexer=function(){return{EOF:1,parseError:(0,L.K2)(function(Vt,Ke){if(!this.yy.parser)throw new Error(Vt);this.yy.parser.parseError(Vt,Ke)},"parseError"),setInput:(0,L.K2)(function(N,Vt){return this.yy=Vt||this.yy||{},this._input=N,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},"setInput"),input:(0,L.K2)(function(){var N=this._input[0];return this.yytext+=N,this.yyleng++,this.offset++,this.match+=N,this.matched+=N,N.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),N},"input"),unput:(0,L.K2)(function(N){var Vt=N.length,Ke=N.split(/(?:\r\n?|\n)/g);this._input=N+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-Vt),this.offset-=Vt;var rr=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),Ke.length-1&&(this.yylineno-=Ke.length-1);var ia=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:Ke?(Ke.length===rr.length?this.yylloc.first_column:0)+rr[rr.length-Ke.length].length-Ke[0].length:this.yylloc.first_column-Vt},this.options.ranges&&(this.yylloc.range=[ia[0],ia[0]+this.yyleng-Vt]),this.yyleng=this.yytext.length,this},"unput"),more:(0,L.K2)(function(){return this._more=!0,this},"more"),reject:(0,L.K2)(function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},"reject"),less:(0,L.K2)(function(N){this.unput(this.match.slice(N))},"less"),pastInput:(0,L.K2)(function(){var N=this.matched.substr(0,this.matched.length-this.match.length);return(N.length>20?"...":"")+N.substr(-20).replace(/\n/g,"")},"pastInput"),upcomingInput:(0,L.K2)(function(){var N=this.match;return N.length<20&&(N+=this._input.substr(0,20-N.length)),(N.substr(0,20)+(N.length>20?"...":"")).replace(/\n/g,"")},"upcomingInput"),showPosition:(0,L.K2)(function(){var N=this.pastInput(),Vt=new Array(N.length+1).join("-");return N+this.upcomingInput()+"\n"+Vt+"^"},"showPosition"),test_match:(0,L.K2)(function(N,Vt){var Ke,rr,ia;if(this.options.backtrack_lexer&&(ia={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(ia.yylloc.range=this.yylloc.range.slice(0))),(rr=N[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=rr.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:rr?rr[rr.length-1].length-rr[rr.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+N[0].length},this.yytext+=N[0],this.match+=N[0],this.matches=N,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(N[0].length),this.matched+=N[0],Ke=this.performAction.call(this,this.yy,this,Vt,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),Ke)return Ke;if(this._backtrack){for(var hr in ia)this[hr]=ia[hr];return!1}return!1},"test_match"),next:(0,L.K2)(function(){if(this.done)return this.EOF;var N,Vt,Ke,rr;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var ia=this._currentRules(),hr=0;hr<ia.length;hr++)if((Ke=this._input.match(this.rules[ia[hr]]))&&(!Vt||Ke[0].length>Vt[0].length)){if(Vt=Ke,rr=hr,this.options.backtrack_lexer){if(!1!==(N=this.test_match(Ke,ia[hr])))return N;if(this._backtrack){Vt=!1;continue}return!1}if(!this.options.flex)break}return Vt?!1!==(N=this.test_match(Vt,ia[rr]))&&N:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},"next"),lex:(0,L.K2)(function(){return this.next()||this.lex()},"lex"),begin:(0,L.K2)(function(Vt){this.conditionStack.push(Vt)},"begin"),popState:(0,L.K2)(function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},"popState"),_currentRules:(0,L.K2)(function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},"_currentRules"),topState:(0,L.K2)(function(Vt){return(Vt=this.conditionStack.length-1-Math.abs(Vt||0))>=0?this.conditionStack[Vt]:"INITIAL"},"topState"),pushState:(0,L.K2)(function(Vt){this.begin(Vt)},"pushState"),stateStackSize:(0,L.K2)(function(){return this.conditionStack.length},"stateStackSize"),options:{"case-insensitive":!0},performAction:(0,L.K2)(function(Vt,Ke,rr,ia){switch(rr){case 0:return this.begin("open_directive"),"open_directive";case 1:return this.begin("acc_title"),31;case 2:return this.popState(),"acc_title_value";case 3:return this.begin("acc_descr"),33;case 4:return this.popState(),"acc_descr_value";case 5:this.begin("acc_descr_multiline");break;case 6:case 15:case 18:case 21:case 24:this.popState();break;case 7:return"acc_descr_multiline_value";case 8:case 9:case 10:case 12:case 13:break;case 11:return 10;case 14:this.begin("href");break;case 16:return 43;case 17:this.begin("callbackname");break;case 19:this.popState(),this.begin("callbackargs");break;case 20:return 41;case 22:return 42;case 23:this.begin("click");break;case 25:return 40;case 26:return 4;case 27:return 22;case 28:return 23;case 29:return 24;case 30:return 25;case 31:return 26;case 32:return 28;case 33:return 27;case 34:return 29;case 35:return 12;case 36:return 13;case 37:return 14;case 38:return 15;case 39:return 16;case 40:return 17;case 41:return 18;case 42:return 20;case 43:return 21;case 44:return"date";case 45:return 30;case 46:return"accDescription";case 47:return 36;case 48:return 38;case 49:return 39;case 50:return":";case 51:return 6;case 52:return"INVALID"}},"anonymous"),rules:[/^(?:%%\{)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:%%(?!\{)*[^\n]*)/i,/^(?:[^\}]%%*[^\n]*)/i,/^(?:%%*[^\n]*[\n]*)/i,/^(?:[\n]+)/i,/^(?:\s+)/i,/^(?:%[^\n]*)/i,/^(?:href[\s]+["])/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:call[\s]+)/i,/^(?:\([\s]*\))/i,/^(?:\()/i,/^(?:[^(]*)/i,/^(?:\))/i,/^(?:[^)]*)/i,/^(?:click[\s]+)/i,/^(?:[\s\n])/i,/^(?:[^\s\n]*)/i,/^(?:gantt\b)/i,/^(?:dateFormat\s[^#\n;]+)/i,/^(?:inclusiveEndDates\b)/i,/^(?:topAxis\b)/i,/^(?:axisFormat\s[^#\n;]+)/i,/^(?:tickInterval\s[^#\n;]+)/i,/^(?:includes\s[^#\n;]+)/i,/^(?:excludes\s[^#\n;]+)/i,/^(?:todayMarker\s[^\n;]+)/i,/^(?:weekday\s+monday\b)/i,/^(?:weekday\s+tuesday\b)/i,/^(?:weekday\s+wednesday\b)/i,/^(?:weekday\s+thursday\b)/i,/^(?:weekday\s+friday\b)/i,/^(?:weekday\s+saturday\b)/i,/^(?:weekday\s+sunday\b)/i,/^(?:weekend\s+friday\b)/i,/^(?:weekend\s+saturday\b)/i,/^(?:\d\d\d\d-\d\d-\d\d\b)/i,/^(?:title\s[^\n]+)/i,/^(?:accDescription\s[^#\n;]+)/i,/^(?:section\s[^\n]+)/i,/^(?:[^:\n]+)/i,/^(?::[^#\n;]+)/i,/^(?::)/i,/^(?:$)/i,/^(?:.)/i],conditions:{acc_descr_multiline:{rules:[6,7],inclusive:!1},acc_descr:{rules:[4],inclusive:!1},acc_title:{rules:[2],inclusive:!1},callbackargs:{rules:[21,22],inclusive:!1},callbackname:{rules:[18,19,20],inclusive:!1},href:{rules:[15,16],inclusive:!1},click:{rules:[24,25],inclusive:!1},INITIAL:{rules:[0,1,3,5,8,9,10,11,12,13,14,17,23,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52],inclusive:!0}}}}(),(0,L.K2)(Rr,"Parser"),Rr.prototype=ra,ra.Parser=Rr,new Rr}();Ye.parser=Ye;var bt=Ye;Rt.extend(dt),Rt.extend(q),Rt.extend(A);var ye,kr,Xt={friday:5,saturday:6},j="",fr="",Fe=void 0,vr="",zr=[],br=[],mr=new Map,Er=[],Lr=[],Ar="",ge="",Br=["active","done","crit","milestone","vert"],Ge=[],W=!1,ft=!1,Bt="sunday",_e="saturday",Z=0,ae=(0,L.K2)(function(){Er=[],Lr=[],Ar="",Ge=[],Jt=0,ye=void 0,kr=void 0,ur=[],j="",fr="",ge="",Fe=void 0,vr="",zr=[],br=[],W=!1,ft=!1,Z=0,mr=new Map,(0,ee.IU)(),Bt="sunday",_e="saturday"},"clear"),S=(0,L.K2)(function(p){fr=p},"setAxisFormat"),re=(0,L.K2)(function(){return fr},"getAxisFormat"),Pt=(0,L.K2)(function(p){Fe=p},"setTickInterval"),qt=(0,L.K2)(function(){return Fe},"getTickInterval"),V=(0,L.K2)(function(p){vr=p},"setTodayMarker"),pt=(0,L.K2)(function(){return vr},"getTodayMarker"),H=(0,L.K2)(function(p){j=p},"setDateFormat"),Nt=(0,L.K2)(function(){W=!0},"enableInclusiveEndDates"),wt=(0,L.K2)(function(){return W},"endDatesAreInclusive"),Wt=(0,L.K2)(function(){ft=!0},"enableTopAxis"),xe=(0,L.K2)(function(){return ft},"topAxisEnabled"),le=(0,L.K2)(function(p){ge=p},"setDisplayMode"),Re=(0,L.K2)(function(){return ge},"getDisplayMode"),oe=(0,L.K2)(function(){return j},"getDateFormat"),qe=(0,L.K2)(function(p){zr=p.toLowerCase().split(/[\s,]+/)},"setIncludes"),We=(0,L.K2)(function(){return zr},"getIncludes"),Ct=(0,L.K2)(function(p){br=p.toLowerCase().split(/[\s,]+/)},"setExcludes"),St=(0,L.K2)(function(){return br},"getExcludes"),R=(0,L.K2)(function(){return mr},"getLinks"),O=(0,L.K2)(function(p){Ar=p,Er.push(p)},"addSection"),et=(0,L.K2)(function(){return Er},"getSections"),xt=(0,L.K2)(function(){let p=ce(),C=0;for(;!p&&C<10;)p=ce(),C++;return Lr=ur},"getTasks"),it=(0,L.K2)(function(p,x,C,w){const $=p.format(x.trim()),ct=p.format("YYYY-MM-DD");return!w.includes($)&&!w.includes(ct)&&(!((!C.includes("weekends")||p.isoWeekday()!==Xt[_e]&&p.isoWeekday()!==Xt[_e]+1)&&!C.includes(p.format("dddd").toLowerCase()))||C.includes($)||C.includes(ct))},"isInvalidDate"),rt=(0,L.K2)(function(p){Bt=p},"setWeekday"),Et=(0,L.K2)(function(){return Bt},"getWeekday"),ut=(0,L.K2)(function(p){_e=p},"setWeekend"),It=(0,L.K2)(function(p,x,C,w){if(!C.length||p.manualEndTime)return;let $,ct;$=p.startTime instanceof Date?Rt(p.startTime):Rt(p.startTime,x,!0),$=$.add(1,"d"),ct=p.endTime instanceof Date?Rt(p.endTime):Rt(p.endTime,x,!0);const[kt,Ut]=G($,ct,x,C,w);p.endTime=kt.toDate(),p.renderEndTime=Ut},"checkTaskDates"),G=(0,L.K2)(function(p,x,C,w,$){let ct=!1,kt=null;for(;p<=x;)ct||(kt=x.toDate()),ct=it(p,C,w,$),ct&&(x=x.add(1,"d")),p=p.add(1,"d");return[x,kt]},"fixTaskDates"),st=(0,L.K2)(function(p,x,C){if(C=C.trim(),(0,L.K2)(Ut=>{const Ht=Ut.trim();return"x"===Ht||"X"===Ht},"isTimestampFormat")(x)&&/^\d+$/.test(C))return new Date(Number(C));const ct=/^after\s+(?<ids>[\d\w- ]+)/.exec(C);if(null!==ct){let Ut=null;for(const zt of ct.groups.ids.split(" ")){let ue=ir(zt);void 0!==ue&&(!Ut||ue.endTime>Ut.endTime)&&(Ut=ue)}if(Ut)return Ut.endTime;const Ht=new Date;return Ht.setHours(0,0,0,0),Ht}let kt=Rt(C,x.trim(),!0);if(kt.isValid())return kt.toDate();{L.Rm.debug("Invalid date:"+C),L.Rm.debug("With date format:"+x.trim());const Ut=new Date(C);if(void 0===Ut||isNaN(Ut.getTime())||Ut.getFullYear()<-1e4||Ut.getFullYear()>1e4)throw new Error("Invalid date:"+C);return Ut}},"getStartDate"),Ce=(0,L.K2)(function(p){const x=/^(\d+(?:\.\d+)?)([Mdhmswy]|ms)$/.exec(p.trim());return null!==x?[Number.parseFloat(x[1]),x[2]]:[NaN,"ms"]},"parseDuration"),Ot=(0,L.K2)(function(p,x,C,w=!1){C=C.trim();const ct=/^until\s+(?<ids>[\d\w- ]+)/.exec(C);if(null!==ct){let ue=null;for(const ze of ct.groups.ids.split(" ")){let Cr=ir(ze);void 0!==Cr&&(!ue||Cr.startTime<ue.startTime)&&(ue=Cr)}if(ue)return ue.startTime;const je=new Date;return je.setHours(0,0,0,0),je}let kt=Rt(C,x.trim(),!0);if(kt.isValid())return w&&(kt=kt.add(1,"d")),kt.toDate();let Ut=Rt(p);const[Ht,zt]=Ce(C);if(!Number.isNaN(Ht)){const ue=Ut.add(Ht,zt);ue.isValid()&&(Ut=ue)}return Ut.toDate()},"getEndDate"),Jt=0,fe=(0,L.K2)(function(p){return void 0===p?"task"+(Jt+=1):p},"parseId"),Be=(0,L.K2)(function(p,x){let C;C=":"===x.substr(0,1)?x.substr(1,x.length):x;const w=C.split(","),$={};nr(w,$,Br);for(let kt=0;kt<w.length;kt++)w[kt]=w[kt].trim();let ct="";switch(w.length){case 1:$.id=fe(),$.startTime=p.endTime,ct=w[0];break;case 2:$.id=fe(),$.startTime=st(void 0,j,w[0]),ct=w[1];break;case 3:$.id=fe(w[0]),$.startTime=st(void 0,j,w[1]),ct=w[2]}return ct&&($.endTime=Ot($.startTime,j,ct,W),$.manualEndTime=Rt(ct,"YYYY-MM-DD",!0).isValid(),It($,j,br,zr)),$},"compileData"),Ze=(0,L.K2)(function(p,x){let C;C=":"===x.substr(0,1)?x.substr(1,x.length):x;const w=C.split(","),$={};nr(w,$,Br);for(let ct=0;ct<w.length;ct++)w[ct]=w[ct].trim();switch(w.length){case 1:$.id=fe(),$.startTime={type:"prevTaskEnd",id:p},$.endTime={data:w[0]};break;case 2:$.id=fe(),$.startTime={type:"getStartDate",startData:w[0]},$.endTime={data:w[1]};break;case 3:$.id=fe(w[0]),$.startTime={type:"getStartDate",startData:w[1]},$.endTime={data:w[2]}}return $},"parseData"),ur=[],Kt={},Pe=(0,L.K2)(function(p,x){const C={section:Ar,type:Ar,processed:!1,manualEndTime:!1,renderEndTime:null,raw:{data:x},task:p,classes:[]},w=Ze(kr,x);C.raw.startTime=w.startTime,C.raw.endTime=w.endTime,C.id=w.id,C.prevTaskId=kr,C.active=w.active,C.done=w.done,C.crit=w.crit,C.milestone=w.milestone,C.vert=w.vert,C.order=Z,Z++;const $=ur.push(C);kr=C.id,Kt[C.id]=$-1},"addTask"),ir=(0,L.K2)(function(p){return ur[Kt[p]]},"findTaskById"),me=(0,L.K2)(function(p,x){const C={section:Ar,type:Ar,description:p,task:p,classes:[]},w=Be(ye,x);C.startTime=w.startTime,C.endTime=w.endTime,C.id=w.id,C.active=w.active,C.done=w.done,C.crit=w.crit,C.milestone=w.milestone,C.vert=w.vert,ye=C,Lr.push(C)},"addTaskOrg"),ce=(0,L.K2)(function(){const p=(0,L.K2)(function(C){const w=ur[C];let $="";switch(ur[C].raw.startTime.type){case"prevTaskEnd":{const ct=ir(w.prevTaskId);w.startTime=ct.endTime;break}case"getStartDate":$=st(void 0,j,ur[C].raw.startTime.startData),$&&(ur[C].startTime=$)}return ur[C].startTime&&(ur[C].endTime=Ot(ur[C].startTime,j,ur[C].raw.endTime.data,W),ur[C].endTime&&(ur[C].processed=!0,ur[C].manualEndTime=Rt(ur[C].raw.endTime.data,"YYYY-MM-DD",!0).isValid(),It(ur[C],j,br,zr))),ur[C].processed},"compileTask");let x=!0;for(const[C,w]of ur.entries())p(C),x=x&&w.processed;return x},"compileTasks"),ke=(0,L.K2)(function(p,x){let C=x;"loose"!==(0,ee.D7)().securityLevel&&(C=(0,D.J)(x)),p.split(",").forEach(function(w){void 0!==ir(w)&&(Xe(w,()=>{window.open(C,"_self")}),mr.set(w,C))}),Te(p,"clickable")},"setLink"),Te=(0,L.K2)(function(p,x){p.split(",").forEach(function(C){let w=ir(C);void 0!==w&&w.classes.push(x)})},"setClass"),er=(0,L.K2)(function(p,x,C){if("loose"!==(0,ee.D7)().securityLevel||void 0===x)return;let w=[];if("string"==typeof C){w=C.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/);for(let ct=0;ct<w.length;ct++){let kt=w[ct].trim();kt.startsWith('"')&&kt.endsWith('"')&&(kt=kt.substr(1,kt.length-2)),w[ct]=kt}}0===w.length&&w.push(p),void 0!==ir(p)&&Xe(p,()=>{lt._K.runFunc(x,...w)})},"setClickFun"),Xe=(0,L.K2)(function(p,x){Ge.push(function(){const C=document.querySelector(`[id="${p}"]`);null!==C&&C.addEventListener("click",function(){x()})},function(){const C=document.querySelector(`[id="${p}-text"]`);null!==C&&C.addEventListener("click",function(){x()})})},"pushFun"),Ir=(0,L.K2)(function(p,x,C){p.split(",").forEach(function(w){er(w,x,C)}),Te(p,"clickable")},"setClickEvent"),Ee=(0,L.K2)(function(p){Ge.forEach(function(x){x(p)})},"bindFunctions"),qr={getConfig:(0,L.K2)(()=>(0,ee.D7)().gantt,"getConfig"),clear:ae,setDateFormat:H,getDateFormat:oe,enableInclusiveEndDates:Nt,endDatesAreInclusive:wt,enableTopAxis:Wt,topAxisEnabled:xe,setAxisFormat:S,getAxisFormat:re,setTickInterval:Pt,getTickInterval:qt,setTodayMarker:V,getTodayMarker:pt,setAccTitle:ee.SV,getAccTitle:ee.iN,setDiagramTitle:ee.ke,getDiagramTitle:ee.ab,setDisplayMode:le,getDisplayMode:Re,setAccDescription:ee.EI,getAccDescription:ee.m7,addSection:O,getSections:et,getTasks:xt,addTask:Pe,findTaskById:ir,addTaskOrg:me,setIncludes:qe,getIncludes:We,setExcludes:Ct,getExcludes:St,setClickEvent:Ir,setLink:ke,getLinks:R,bindFunctions:Ee,parseDuration:Ce,isInvalidDate:it,setWeekday:rt,getWeekday:Et,setWeekend:ut};function nr(p,x,C){let w=!0;for(;w;)w=!1,C.forEach(function($){const kt=new RegExp("^\\s*"+$+"\\s*$");p[0].match(kt)&&(x[$]=!0,p.shift(1),w=!0)})}(0,L.K2)(nr,"getTaskTags"),Rt.extend($t);var tr,te=(0,L.K2)(function(){L.Rm.debug("Something is calling, setConf, remove the call")},"setConf"),ne={monday:yt.ABi,tuesday:yt.PGu,wednesday:yt.GuW,thursday:yt.Mol,friday:yt.TUC,saturday:yt.rGn,sunday:yt.YPH},Le=(0,L.K2)((p,x)=>{let C=[...p].map(()=>-1/0),w=[...p].sort((ct,kt)=>ct.startTime-kt.startTime||ct.order-kt.order),$=0;for(const ct of w)for(let kt=0;kt<C.length;kt++)if(ct.startTime>=C[kt]){C[kt]=ct.endTime,ct.order=kt+x,kt>$&&($=kt);break}return $},"getMaxIntersections"),g=1e4,z={parser:bt,db:qr,renderer:{setConf:te,draw:(0,L.K2)(function(p,x,C,w){const $=(0,ee.D7)().gantt,ct=(0,ee.D7)().securityLevel;let kt;"sandbox"===ct&&(kt=(0,yt.Ltv)("#i"+x));const Ut=(0,yt.Ltv)("sandbox"===ct?kt.nodes()[0].contentDocument.body:"body"),Ht="sandbox"===ct?kt.nodes()[0].contentDocument:document,zt=Ht.getElementById(x);void 0===(tr=zt.parentElement.offsetWidth)&&(tr=1200),void 0!==$.useWidth&&(tr=$.useWidth);const ue=w.db.getTasks();let je=[];for(const Qr of ue)je.push(Qr.type);je=Oa(je);const ze={};let Cr=2*$.topPadding;if("compact"===w.db.getDisplayMode()||"compact"===$.displayMode){const Qr={};for(const Xr of ue)void 0===Qr[Xr.section]?Qr[Xr.section]=[Xr]:Qr[Xr.section].push(Xr);let ra=0;for(const Xr of Object.keys(Qr)){const Rr=Le(Qr[Xr],ra)+1;ra+=Rr,Cr+=Rr*($.barHeight+$.barGap),ze[Xr]=Rr}}else{Cr+=ue.length*($.barHeight+$.barGap);for(const Qr of je)ze[Qr]=ue.filter(ra=>ra.type===Qr).length}zt.setAttribute("viewBox","0 0 "+tr+" "+Cr);const cr=Ut.select(`[id="${x}"]`),sr=(0,yt.w7C)().domain([(0,yt.jkA)(ue,function(Qr){return Qr.startTime}),(0,yt.T9B)(ue,function(Qr){return Qr.endTime})]).rangeRound([0,tr-$.leftPadding-$.rightPadding]);function $e(Qr,ra){const Xr=Qr.startTime,Rr=ra.startTime;let Tr=0;return Xr>Rr?Tr=1:Xr<Rr&&(Tr=-1),Tr}function He(Qr,ra,Xr){const Rr=$.barHeight,Tr=Rr+$.barGap,N=$.topPadding,Vt=$.leftPadding;(0,yt.m4Y)().domain([0,je.length]).range(["#00B9FA","#F95002"]).interpolate(yt.bEH);wr(Tr,N,Vt,0,Xr,Qr,w.db.getExcludes(),w.db.getIncludes()),xr(Vt,N,0,Xr),Pr(Qr,Tr,N,Vt,Rr,0,ra),Ba(Tr,N),Zr(Vt,0,0,Xr)}function Pr(Qr,ra,Xr,Rr,Tr,N,Vt){Qr.sort((or,_a)=>or.vert===_a.vert?0:or.vert?1:-1);const rr=[...new Set(Qr.map(or=>or.order))].map(or=>Qr.find(_a=>_a.order===or));cr.append("g").selectAll("rect").data(rr).enter().append("rect").attr("x",0).attr("y",function(or,_a){return or.order*ra+Xr-2}).attr("width",function(){return Vt-$.rightPadding/2}).attr("height",ra).attr("class",function(or){for(const[_a,Ma]of je.entries())if(or.type===Ma)return"section section"+_a%$.numberSectionStyles;return"section section0"}).enter();const ia=cr.append("g").selectAll("rect").data(Qr).enter(),hr=w.db.getLinks();if(ia.append("rect").attr("id",function(or){return or.id}).attr("rx",3).attr("ry",3).attr("x",function(or){return or.milestone?sr(or.startTime)+Rr+.5*(sr(or.endTime)-sr(or.startTime))-.5*Tr:sr(or.startTime)+Rr}).attr("y",function(or,_a){return or.vert?$.gridLineStartPadding:or.order*ra+Xr}).attr("width",function(or){return or.milestone?Tr:or.vert?.08*Tr:sr(or.renderEndTime||or.endTime)-sr(or.startTime)}).attr("height",function(or){return or.vert?ue.length*($.barHeight+$.barGap)+2*$.barHeight:Tr}).attr("transform-origin",function(or,_a){return _a=or.order,(sr(or.startTime)+Rr+.5*(sr(or.endTime)-sr(or.startTime))).toString()+"px "+(_a*ra+Xr+.5*Tr).toString()+"px"}).attr("class",function(or){let Ma="";or.classes.length>0&&(Ma=or.classes.join(" "));let Ra=0;for(const[ca,ha]of je.entries())or.type===ha&&(Ra=ca%$.numberSectionStyles);let Jr="";return or.active?or.crit?Jr+=" activeCrit":Jr=" active":or.done?Jr=or.crit?" doneCrit":" done":or.crit&&(Jr+=" crit"),0===Jr.length&&(Jr=" task"),or.milestone&&(Jr=" milestone "+Jr),or.vert&&(Jr=" vert "+Jr),Jr+=Ra,Jr+=" "+Ma,"task"+Jr}),ia.append("text").attr("id",function(or){return or.id+"-text"}).text(function(or){return or.task}).attr("font-size",$.fontSize).attr("x",function(or){let _a=sr(or.startTime),Ma=sr(or.renderEndTime||or.endTime);if(or.milestone&&(_a+=.5*(sr(or.endTime)-sr(or.startTime))-.5*Tr,Ma=_a+Tr),or.vert)return sr(or.startTime)+Rr;const Ra=this.getBBox().width;return Ra>Ma-_a?Ma+Ra+1.5*$.leftPadding>Vt?_a+Rr-5:Ma+Rr+5:(Ma-_a)/2+_a+Rr}).attr("y",function(or,_a){return or.vert?$.gridLineStartPadding+ue.length*($.barHeight+$.barGap)+60:or.order*ra+$.barHeight/2+($.fontSize/2-2)+Xr}).attr("text-height",Tr).attr("class",function(or){const _a=sr(or.startTime);let Ma=sr(or.endTime);or.milestone&&(Ma=_a+Tr);const Ra=this.getBBox().width;let Jr="";or.classes.length>0&&(Jr=or.classes.join(" "));let ca=0;for(const[Yr,Fa]of je.entries())or.type===Fa&&(ca=Yr%$.numberSectionStyles);let ha="";return or.active&&(ha=or.crit?"activeCritText"+ca:"activeText"+ca),or.done?ha=or.crit?ha+" doneCritText"+ca:ha+" doneText"+ca:or.crit&&(ha=ha+" critText"+ca),or.milestone&&(ha+=" milestoneText"),or.vert&&(ha+=" vertText"),Ra>Ma-_a?Ma+Ra+1.5*$.leftPadding>Vt?Jr+" taskTextOutsideLeft taskTextOutside"+ca+" "+ha:Jr+" taskTextOutsideRight taskTextOutside"+ca+" "+ha+" width-"+Ra:Jr+" taskText taskText"+ca+" "+ha+" width-"+Ra}),"sandbox"===(0,ee.D7)().securityLevel){let or;or=(0,yt.Ltv)("#i"+x);const _a=or.nodes()[0].contentDocument;ia.filter(function(Ma){return hr.has(Ma.id)}).each(function(Ma){var Ra=_a.querySelector("#"+Ma.id),Jr=_a.querySelector("#"+Ma.id+"-text");const ca=Ra.parentNode;var ha=_a.createElement("a");ha.setAttribute("xlink:href",hr.get(Ma.id)),ha.setAttribute("target","_top"),ca.appendChild(ha),ha.appendChild(Ra),ha.appendChild(Jr)})}}function wr(Qr,ra,Xr,Rr,Tr,N,Vt,Ke){if(0===Vt.length&&0===Ke.length)return;let rr,ia;for(const{startTime:Ra,endTime:Jr}of N)(void 0===rr||Ra<rr)&&(rr=Ra),(void 0===ia||Jr>ia)&&(ia=Jr);if(!rr||!ia)return;if(Rt(ia).diff(Rt(rr),"year")>5)return void L.Rm.warn("The difference between the min and max time is more than 5 years. This will cause performance issues. Skipping drawing exclude days.");const hr=w.db.getDateFormat(),ga=[];let or=null,_a=Rt(rr);for(;_a.valueOf()<=ia;)w.db.isInvalidDate(_a,hr,Vt,Ke)?or?or.end=_a:or={start:_a,end:_a}:or&&(ga.push(or),or=null),_a=_a.add(1,"d");cr.append("g").selectAll("rect").data(ga).enter().append("rect").attr("id",Ra=>"exclude-"+Ra.start.format("YYYY-MM-DD")).attr("x",Ra=>sr(Ra.start.startOf("day"))+Xr).attr("y",$.gridLineStartPadding).attr("width",Ra=>sr(Ra.end.endOf("day"))-sr(Ra.start.startOf("day"))).attr("height",Tr-ra-$.gridLineStartPadding).attr("transform-origin",function(Ra,Jr){return(sr(Ra.start)+Xr+.5*(sr(Ra.end)-sr(Ra.start))).toString()+"px "+(Jr*Qr+.5*Tr).toString()+"px"}).attr("class","exclude-range")}function Vr(Qr,ra,Xr,Rr){if(Xr<=0||Qr>ra)return 1/0;const Tr=ra-Qr,N=Rt.duration({[Rr??"day"]:Xr}).asMilliseconds();return N<=0?1/0:Math.ceil(Tr/N)}function xr(Qr,ra,Xr,Rr){const Tr=w.db.getDateFormat();let Vt;Vt=w.db.getAxisFormat()||("D"===Tr?"%d":$.axisFormat??"%Y-%m-%d");let Ke=(0,yt.l78)(sr).tickSize(-Rr+ra+$.gridLineStartPadding).tickFormat((0,yt.DCK)(Vt));const ia=/^([1-9]\d*)(millisecond|second|minute|hour|day|week|month)$/.exec(w.db.getTickInterval()||$.tickInterval);if(null!==ia){const hr=parseInt(ia[1],10);if(isNaN(hr)||hr<=0)L.Rm.warn(`Invalid tick interval value: "${ia[1]}". Skipping custom tick interval.`);else{const ga=ia[2],or=w.db.getWeekday()||$.weekday,_a=sr.domain(),Jr=Vr(_a[0],_a[1],hr,ga);if(Jr>g)L.Rm.warn(`The tick interval "${hr}${ga}" would generate ${Jr} ticks, which exceeds the maximum allowed (${g}). This may indicate an invalid date or time range. Skipping custom tick interval.`);else switch(ga){case"millisecond":Ke.ticks(yt.t6C.every(hr));break;case"second":Ke.ticks(yt.ucG.every(hr));break;case"minute":Ke.ticks(yt.wXd.every(hr));break;case"hour":Ke.ticks(yt.Agd.every(hr));break;case"day":Ke.ticks(yt.UAC.every(hr));break;case"week":Ke.ticks(ne[or].every(hr));break;case"month":Ke.ticks(yt.Ui6.every(hr))}}}if(cr.append("g").attr("class","grid").attr("transform","translate("+Qr+", "+(Rr-50)+")").call(Ke).selectAll("text").style("text-anchor","middle").attr("fill","#000").attr("stroke","none").attr("font-size",10).attr("dy","1em"),w.db.topAxisEnabled()||$.topAxis){let hr=(0,yt.tlR)(sr).tickSize(-Rr+ra+$.gridLineStartPadding).tickFormat((0,yt.DCK)(Vt));if(null!==ia){const ga=parseInt(ia[1],10);if(isNaN(ga)||ga<=0)L.Rm.warn(`Invalid tick interval value: "${ia[1]}". Skipping custom tick interval.`);else{const or=ia[2],_a=w.db.getWeekday()||$.weekday,Ma=sr.domain();if(Vr(Ma[0],Ma[1],ga,or)<=g)switch(or){case"millisecond":hr.ticks(yt.t6C.every(ga));break;case"second":hr.ticks(yt.ucG.every(ga));break;case"minute":hr.ticks(yt.wXd.every(ga));break;case"hour":hr.ticks(yt.Agd.every(ga));break;case"day":hr.ticks(yt.UAC.every(ga));break;case"week":hr.ticks(ne[_a].every(ga));break;case"month":hr.ticks(yt.Ui6.every(ga))}}}cr.append("g").attr("class","grid").attr("transform","translate("+Qr+", "+ra+")").call(hr).selectAll("text").style("text-anchor","middle").attr("fill","#000").attr("stroke","none").attr("font-size",10)}}function Ba(Qr,ra){let Xr=0;const Rr=Object.keys(ze).map(Tr=>[Tr,ze[Tr]]);cr.append("g").selectAll("text").data(Rr).enter().append(function(Tr){const N=Tr[0].split(ee.Y2.lineBreakRegex),Vt=-(N.length-1)/2,Ke=Ht.createElementNS("http://www.w3.org/2000/svg","text");Ke.setAttribute("dy",Vt+"em");for(const[rr,ia]of N.entries()){const hr=Ht.createElementNS("http://www.w3.org/2000/svg","tspan");hr.setAttribute("alignment-baseline","central"),hr.setAttribute("x","10"),rr>0&&hr.setAttribute("dy","1em"),hr.textContent=ia,Ke.appendChild(hr)}return Ke}).attr("x",10).attr("y",function(Tr,N){if(!(N>0))return Tr[1]*Qr/2+ra;for(let Vt=0;Vt<N;Vt++)return Xr+=Rr[N-1][1],Tr[1]*Qr/2+Xr*Qr+ra}).attr("font-size",$.sectionFontSize).attr("class",function(Tr){for(const[N,Vt]of je.entries())if(Tr[0]===Vt)return"sectionTitle sectionTitle"+N%$.numberSectionStyles;return"sectionTitle"})}function Zr(Qr,ra,Xr,Rr){const Tr=w.db.getTodayMarker();if("off"===Tr)return;const N=cr.append("g").attr("class","today"),Vt=new Date,Ke=N.append("line");Ke.attr("x1",sr(Vt)+Qr).attr("x2",sr(Vt)+Qr).attr("y1",$.titleTopMargin).attr("y2",Rr-$.titleTopMargin).attr("class","today"),""!==Tr&&Ke.attr("style",Tr.replace(/,/g,";"))}function Oa(Qr){const ra={},Xr=[];for(let Rr=0,Tr=Qr.length;Rr<Tr;++Rr)Object.prototype.hasOwnProperty.call(ra,Qr[Rr])||(ra[Qr[Rr]]=!0,Xr.push(Qr[Rr]));return Xr}(0,L.K2)($e,"taskCompare"),ue.sort($e),He(ue,tr,Cr),(0,ee.a$)(cr,Cr,tr,$.useMaxWidth),cr.append("text").text(w.db.getDiagramTitle()).attr("x",tr/2).attr("y",$.titleTopMargin).attr("class","titleText"),(0,L.K2)(He,"makeGantt"),(0,L.K2)(Pr,"drawRects"),(0,L.K2)(wr,"drawExcludeDays"),(0,L.K2)(Vr,"getEstimatedTickCount"),(0,L.K2)(xr,"makeGrid"),(0,L.K2)(Ba,"vertLabels"),(0,L.K2)(Zr,"drawToday"),(0,L.K2)(Oa,"checkUnique")},"draw")},styles:(0,L.K2)(p=>`\n  .mermaid-main-font {\n        font-family: ${p.fontFamily};\n  }\n\n  .exclude-range {\n    fill: ${p.excludeBkgColor};\n  }\n\n  .section {\n    stroke: none;\n    opacity: 0.2;\n  }\n\n  .section0 {\n    fill: ${p.sectionBkgColor};\n  }\n\n  .section2 {\n    fill: ${p.sectionBkgColor2};\n  }\n\n  .section1,\n  .section3 {\n    fill: ${p.altSectionBkgColor};\n    opacity: 0.2;\n  }\n\n  .sectionTitle0 {\n    fill: ${p.titleColor};\n  }\n\n  .sectionTitle1 {\n    fill: ${p.titleColor};\n  }\n\n  .sectionTitle2 {\n    fill: ${p.titleColor};\n  }\n\n  .sectionTitle3 {\n    fill: ${p.titleColor};\n  }\n\n  .sectionTitle {\n    text-anchor: start;\n    font-family: ${p.fontFamily};\n  }\n\n\n  /* Grid and axis */\n\n  .grid .tick {\n    stroke: ${p.gridColor};\n    opacity: 0.8;\n    shape-rendering: crispEdges;\n  }\n\n  .grid .tick text {\n    font-family: ${p.fontFamily};\n    fill: ${p.textColor};\n  }\n\n  .grid path {\n    stroke-width: 0;\n  }\n\n\n  /* Today line */\n\n  .today {\n    fill: none;\n    stroke: ${p.todayLineColor};\n    stroke-width: 2px;\n  }\n\n\n  /* Task styling */\n\n  /* Default task */\n\n  .task {\n    stroke-width: 2;\n  }\n\n  .taskText {\n    text-anchor: middle;\n    font-family: ${p.fontFamily};\n  }\n\n  .taskTextOutsideRight {\n    fill: ${p.taskTextDarkColor};\n    text-anchor: start;\n    font-family: ${p.fontFamily};\n  }\n\n  .taskTextOutsideLeft {\n    fill: ${p.taskTextDarkColor};\n    text-anchor: end;\n  }\n\n\n  /* Special case clickable */\n\n  .task.clickable {\n    cursor: pointer;\n  }\n\n  .taskText.clickable {\n    cursor: pointer;\n    fill: ${p.taskTextClickableColor} !important;\n    font-weight: bold;\n  }\n\n  .taskTextOutsideLeft.clickable {\n    cursor: pointer;\n    fill: ${p.taskTextClickableColor} !important;\n    font-weight: bold;\n  }\n\n  .taskTextOutsideRight.clickable {\n    cursor: pointer;\n    fill: ${p.taskTextClickableColor} !important;\n    font-weight: bold;\n  }\n\n\n  /* Specific task settings for the sections*/\n\n  .taskText0,\n  .taskText1,\n  .taskText2,\n  .taskText3 {\n    fill: ${p.taskTextColor};\n  }\n\n  .task0,\n  .task1,\n  .task2,\n  .task3 {\n    fill: ${p.taskBkgColor};\n    stroke: ${p.taskBorderColor};\n  }\n\n  .taskTextOutside0,\n  .taskTextOutside2\n  {\n    fill: ${p.taskTextOutsideColor};\n  }\n\n  .taskTextOutside1,\n  .taskTextOutside3 {\n    fill: ${p.taskTextOutsideColor};\n  }\n\n\n  /* Active task */\n\n  .active0,\n  .active1,\n  .active2,\n  .active3 {\n    fill: ${p.activeTaskBkgColor};\n    stroke: ${p.activeTaskBorderColor};\n  }\n\n  .activeText0,\n  .activeText1,\n  .activeText2,\n  .activeText3 {\n    fill: ${p.taskTextDarkColor} !important;\n  }\n\n\n  /* Completed task */\n\n  .done0,\n  .done1,\n  .done2,\n  .done3 {\n    stroke: ${p.doneTaskBorderColor};\n    fill: ${p.doneTaskBkgColor};\n    stroke-width: 2;\n  }\n\n  .doneText0,\n  .doneText1,\n  .doneText2,\n  .doneText3 {\n    fill: ${p.taskTextDarkColor} !important;\n  }\n\n\n  /* Tasks on the critical line */\n\n  .crit0,\n  .crit1,\n  .crit2,\n  .crit3 {\n    stroke: ${p.critBorderColor};\n    fill: ${p.critBkgColor};\n    stroke-width: 2;\n  }\n\n  .activeCrit0,\n  .activeCrit1,\n  .activeCrit2,\n  .activeCrit3 {\n    stroke: ${p.critBorderColor};\n    fill: ${p.activeTaskBkgColor};\n    stroke-width: 2;\n  }\n\n  .doneCrit0,\n  .doneCrit1,\n  .doneCrit2,\n  .doneCrit3 {\n    stroke: ${p.critBorderColor};\n    fill: ${p.doneTaskBkgColor};\n    stroke-width: 2;\n    cursor: pointer;\n    shape-rendering: crispEdges;\n  }\n\n  .milestone {\n    transform: rotate(45deg) scale(0.8,0.8);\n  }\n\n  .milestoneText {\n    font-style: italic;\n  }\n  .doneCritText0,\n  .doneCritText1,\n  .doneCritText2,\n  .doneCritText3 {\n    fill: ${p.taskTextDarkColor} !important;\n  }\n\n  .vert {\n    stroke: ${p.vertLineColor};\n  }\n\n  .vertText {\n    font-size: 15px;\n    text-anchor: middle;\n    fill: ${p.vertLineColor} !important;\n  }\n\n  .activeCritText0,\n  .activeCritText1,\n  .activeCritText2,\n  .activeCritText3 {\n    fill: ${p.taskTextDarkColor} !important;\n  }\n\n  .titleText {\n    text-anchor: middle;\n    font-size: 18px;\n    fill: ${p.titleColor||p.textColor};\n    font-family: ${p.fontFamily};\n  }\n`,"getStyles")}},49645:function(ti){ti.exports=function(){"use strict";var B=6e4,ee="millisecond",L="second",D="minute",Rt="hour",dt="day",q="week",A="month",$t="quarter",yt="year",Ye="date",bt="Invalid Date",Xt=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,j=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,fr={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(W){var ft=["th","st","nd","rd"],Bt=W%100;return"["+W+(ft[(Bt-20)%10]||ft[Bt]||ft[0])+"]"}},Fe=function(W,ft,Bt){var _e=String(W);return!_e||_e.length>=ft?W:""+Array(ft+1-_e.length).join(Bt)+W},vr={s:Fe,z:function(W){var ft=-W.utcOffset(),Bt=Math.abs(ft),_e=Math.floor(Bt/60),Z=Bt%60;return(ft<=0?"+":"-")+Fe(_e,2,"0")+":"+Fe(Z,2,"0")},m:function W(ft,Bt){if(ft.date()<Bt.date())return-W(Bt,ft);var _e=12*(Bt.year()-ft.year())+(Bt.month()-ft.month()),Z=ft.clone().add(_e,A),ae=Bt-Z<0,S=ft.clone().add(_e+(ae?-1:1),A);return+(-(_e+(Bt-Z)/(ae?Z-S:S-Z))||0)},a:function(W){return W<0?Math.ceil(W)||0:Math.floor(W)},p:function(W){return{M:A,y:yt,w:q,d:dt,D:Ye,h:Rt,m:D,s:L,ms:ee,Q:$t}[W]||String(W||"").toLowerCase().replace(/s$/,"")},u:function(W){return void 0===W}},zr="en",br={};br[zr]=fr;var mr="$isDayjsObject",Er=function(W){return W instanceof Br||!(!W||!W[mr])},Lr=function W(ft,Bt,_e){var Z;if(!ft)return zr;if("string"==typeof ft){var ae=ft.toLowerCase();br[ae]&&(Z=ae),Bt&&(br[ae]=Bt,Z=ae);var S=ft.split("-");if(!Z&&S.length>1)return W(S[0])}else{var re=ft.name;br[re]=ft,Z=re}return!_e&&Z&&(zr=Z),Z||!_e&&zr},Ar=function(W,ft){if(Er(W))return W.clone();var Bt="object"==typeof ft?ft:{};return Bt.date=W,Bt.args=arguments,new Br(Bt)},ge=vr;ge.l=Lr,ge.i=Er,ge.w=function(W,ft){return Ar(W,{locale:ft.$L,utc:ft.$u,x:ft.$x,$offset:ft.$offset})};var Br=function(){function W(Bt){this.$L=Lr(Bt.locale,null,!0),this.parse(Bt),this.$x=this.$x||Bt.x||{},this[mr]=!0}var ft=W.prototype;return ft.parse=function(Bt){this.$d=function(_e){var Z=_e.date,ae=_e.utc;if(null===Z)return new Date(NaN);if(ge.u(Z))return new Date;if(Z instanceof Date)return new Date(Z);if("string"==typeof Z&&!/Z$/i.test(Z)){var S=Z.match(Xt);if(S){var re=S[2]-1||0,Pt=(S[7]||"0").substring(0,3);return ae?new Date(Date.UTC(S[1],re,S[3]||1,S[4]||0,S[5]||0,S[6]||0,Pt)):new Date(S[1],re,S[3]||1,S[4]||0,S[5]||0,S[6]||0,Pt)}}return new Date(Z)}(Bt),this.init()},ft.init=function(){var Bt=this.$d;this.$y=Bt.getFullYear(),this.$M=Bt.getMonth(),this.$D=Bt.getDate(),this.$W=Bt.getDay(),this.$H=Bt.getHours(),this.$m=Bt.getMinutes(),this.$s=Bt.getSeconds(),this.$ms=Bt.getMilliseconds()},ft.$utils=function(){return ge},ft.isValid=function(){return this.$d.toString()!==bt},ft.isSame=function(Bt,_e){var Z=Ar(Bt);return this.startOf(_e)<=Z&&Z<=this.endOf(_e)},ft.isAfter=function(Bt,_e){return Ar(Bt)<this.startOf(_e)},ft.isBefore=function(Bt,_e){return this.endOf(_e)<Ar(Bt)},ft.$g=function(Bt,_e,Z){return ge.u(Bt)?this[_e]:this.set(Z,Bt)},ft.unix=function(){return Math.floor(this.valueOf()/1e3)},ft.valueOf=function(){return this.$d.getTime()},ft.startOf=function(Bt,_e){var Z=this,ae=!!ge.u(_e)||_e,S=ge.p(Bt),re=function(Wt,xe){var le=ge.w(Z.$u?Date.UTC(Z.$y,xe,Wt):new Date(Z.$y,xe,Wt),Z);return ae?le:le.endOf(dt)},Pt=function(Wt,xe){return ge.w(Z.toDate()[Wt].apply(Z.toDate("s"),(ae?[0,0,0,0]:[23,59,59,999]).slice(xe)),Z)},qt=this.$W,V=this.$M,pt=this.$D,H="set"+(this.$u?"UTC":"");switch(S){case yt:return ae?re(1,0):re(31,11);case A:return ae?re(1,V):re(0,V+1);case q:var Nt=this.$locale().weekStart||0,wt=(qt<Nt?qt+7:qt)-Nt;return re(ae?pt-wt:pt+(6-wt),V);case dt:case Ye:return Pt(H+"Hours",0);case Rt:return Pt(H+"Minutes",1);case D:return Pt(H+"Seconds",2);case L:return Pt(H+"Milliseconds",3);default:return this.clone()}},ft.endOf=function(Bt){return this.startOf(Bt,!1)},ft.$set=function(Bt,_e){var Z,ae=ge.p(Bt),S="set"+(this.$u?"UTC":""),re=(Z={},Z[dt]=S+"Date",Z[Ye]=S+"Date",Z[A]=S+"Month",Z[yt]=S+"FullYear",Z[Rt]=S+"Hours",Z[D]=S+"Minutes",Z[L]=S+"Seconds",Z[ee]=S+"Milliseconds",Z)[ae],Pt=ae===dt?this.$D+(_e-this.$W):_e;if(ae===A||ae===yt){var qt=this.clone().set(Ye,1);qt.$d[re](Pt),qt.init(),this.$d=qt.set(Ye,Math.min(this.$D,qt.daysInMonth())).$d}else re&&this.$d[re](Pt);return this.init(),this},ft.set=function(Bt,_e){return this.clone().$set(Bt,_e)},ft.get=function(Bt){return this[ge.p(Bt)]()},ft.add=function(Bt,_e){var Z,ae=this;Bt=Number(Bt);var S=ge.p(_e),re=function(V){var pt=Ar(ae);return ge.w(pt.date(pt.date()+Math.round(V*Bt)),ae)};if(S===A)return this.set(A,this.$M+Bt);if(S===yt)return this.set(yt,this.$y+Bt);if(S===dt)return re(1);if(S===q)return re(7);var Pt=(Z={},Z[D]=B,Z[Rt]=36e5,Z[L]=1e3,Z)[S]||1,qt=this.$d.getTime()+Bt*Pt;return ge.w(qt,this)},ft.subtract=function(Bt,_e){return this.add(-1*Bt,_e)},ft.format=function(Bt){var _e=this,Z=this.$locale();if(!this.isValid())return Z.invalidDate||bt;var ae=Bt||"YYYY-MM-DDTHH:mm:ssZ",S=ge.z(this),re=this.$H,Pt=this.$m,qt=this.$M,V=Z.weekdays,pt=Z.months,Nt=function(xe,le,Re,oe){return xe&&(xe[le]||xe(_e,ae))||Re[le].slice(0,oe)},wt=function(xe){return ge.s(re%12||12,xe,"0")},Wt=Z.meridiem||function(xe,le,Re){var oe=xe<12?"AM":"PM";return Re?oe.toLowerCase():oe};return ae.replace(j,function(xe,le){return le||function(Re){switch(Re){case"YY":return String(_e.$y).slice(-2);case"YYYY":return ge.s(_e.$y,4,"0");case"M":return qt+1;case"MM":return ge.s(qt+1,2,"0");case"MMM":return Nt(Z.monthsShort,qt,pt,3);case"MMMM":return Nt(pt,qt);case"D":return _e.$D;case"DD":return ge.s(_e.$D,2,"0");case"d":return String(_e.$W);case"dd":return Nt(Z.weekdaysMin,_e.$W,V,2);case"ddd":return Nt(Z.weekdaysShort,_e.$W,V,3);case"dddd":return V[_e.$W];case"H":return String(re);case"HH":return ge.s(re,2,"0");case"h":return wt(1);case"hh":return wt(2);case"a":return Wt(re,Pt,!0);case"A":return Wt(re,Pt,!1);case"m":return String(Pt);case"mm":return ge.s(Pt,2,"0");case"s":return String(_e.$s);case"ss":return ge.s(_e.$s,2,"0");case"SSS":return ge.s(_e.$ms,3,"0");case"Z":return S}return null}(xe)||S.replace(":","")})},ft.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},ft.diff=function(Bt,_e,Z){var ae,S=this,re=ge.p(_e),Pt=Ar(Bt),qt=(Pt.utcOffset()-this.utcOffset())*B,V=this-Pt,pt=function(){return ge.m(S,Pt)};switch(re){case yt:ae=pt()/12;break;case A:ae=pt();break;case $t:ae=pt()/3;break;case q:ae=(V-qt)/6048e5;break;case dt:ae=(V-qt)/864e5;break;case Rt:ae=V/36e5;break;case D:ae=V/B;break;case L:ae=V/1e3;break;default:ae=V}return Z?ae:ge.a(ae)},ft.daysInMonth=function(){return this.endOf(A).$D},ft.$locale=function(){return br[this.$L]},ft.locale=function(Bt,_e){if(!Bt)return this.$L;var Z=this.clone(),ae=Lr(Bt,_e,!0);return ae&&(Z.$L=ae),Z},ft.clone=function(){return ge.w(this.$d,this)},ft.toDate=function(){return new Date(this.valueOf())},ft.toJSON=function(){return this.isValid()?this.toISOString():null},ft.toISOString=function(){return this.$d.toISOString()},ft.toString=function(){return this.$d.toUTCString()},W}(),Ge=Br.prototype;return Ar.prototype=Ge,[["$ms",ee],["$s",L],["$m",D],["$H",Rt],["$W",dt],["$M",A],["$y",yt],["$D",Ye]].forEach(function(W){Ge[W[1]]=function(ft){return this.$g(ft,W[0],W[1])}}),Ar.extend=function(W,ft){return W.$i||(W(ft,Br,Ar),W.$i=!0),Ar},Ar.locale=Lr,Ar.isDayjs=Er,Ar.unix=function(W){return Ar(1e3*W)},Ar.en=br[zr],Ar.Ls=br,Ar.p={},Ar}()},52052:(ti,_r,B)=>{"use strict";B.d(_r,{$C:()=>ft,$t:()=>le,C4:()=>oe,I5:()=>xe,Ib:()=>Fe,KL:()=>Ct,Sm:()=>qe,Un:()=>qt,_K:()=>Re,bH:()=>S,dq:()=>wt,pe:()=>$t,rY:()=>We,ru:()=>Pt,sM:()=>Ge,vU:()=>j,yT:()=>_e});var A,lt=B(45027),ee=B(79006),L=B(32303),D=B(73986),Rt=B(40622),dt=B(37674),q=B(23950),$t="\u200b",yt={curveBasis:Rt.qrM,curveBasisClosed:Rt.Yu4,curveBasisOpen:Rt.IA3,curveBumpX:Rt.Wi0,curveBumpY:Rt.PGM,curveBundle:Rt.OEq,curveCardinalClosed:Rt.olC,curveCardinalOpen:Rt.IrU,curveCardinal:Rt.y8u,curveCatmullRomClosed:Rt.Q7f,curveCatmullRomOpen:Rt.cVp,curveCatmullRom:Rt.oDi,curveLinear:Rt.lUB,curveLinearClosed:Rt.Lx9,curveMonotoneX:Rt.nVG,curveMonotoneY:Rt.uxU,curveNatural:Rt.Xf2,curveStep:Rt.GZz,curveStepAfter:Rt.UPb,curveStepBefore:Rt.dyv},Ye=/\s*(?:(\w+)(?=:):|(\w+))\s*(?:(\w+)|((?:(?!}%{2}).|\r?\n)*))?\s*(?:}%{2})?/gi,bt=(0,L.K2)(function(R,O){const et=Xt(R,/(?:init\b)|(?:initialize\b)/);let xt={};if(Array.isArray(et)){const Et=et.map(ut=>ut.args);(0,ee.$i)(Et),xt=(0,ee.hH)(xt,[...Et])}else xt=et.args;if(!xt)return;let it=(0,ee.Ch)(R,O);const rt="config";return void 0!==xt[rt]&&("flowchart-v2"===it&&(it="flowchart"),xt[it]=xt[rt],delete xt[rt]),xt},"detectInit"),Xt=(0,L.K2)(function(R,O=null){try{const et=new RegExp(`[%]{2}(?![{]${Ye.source})(?=[}][%]{2}).*\n`,"ig");let xt;R=R.trim().replace(et,"").replace(/'/gm,'"'),L.Rm.debug(`Detecting diagram directive${null!==O?" type:"+O:""} based on the text:${R}`);const it=[];for(;null!==(xt=ee.DB.exec(R));)if(xt.index===ee.DB.lastIndex&&ee.DB.lastIndex++,xt&&!O||O&&xt[1]?.match(O)||O&&xt[2]?.match(O)){const rt=xt[1]?xt[1]:xt[2],Et=xt[3]?xt[3].trim():xt[4]?JSON.parse(xt[4].trim()):null;it.push({type:rt,args:Et})}return 0===it.length?{type:R,args:null}:1===it.length?it[0]:it}catch(et){return L.Rm.error(`ERROR: ${et.message} - Unable to parse directive type: '${O}' based on the text: '${R}'`),{type:void 0,args:null}}},"detectDirective"),j=(0,L.K2)(function(R){return R.replace(ee.DB,"")},"removeDirectives"),fr=(0,L.K2)(function(R,O){for(const[et,xt]of O.entries())if(xt.match(R))return et;return-1},"isSubstringInArray");function Fe(R,O){if(!R)return O;const et=`curve${R.charAt(0).toUpperCase()+R.slice(1)}`;return yt[et]??O}function vr(R,O){const et=R.trim();if(et)return"loose"!==O.securityLevel?(0,D.J)(et):et}(0,L.K2)(Fe,"interpolateToCurve"),(0,L.K2)(vr,"formatUrl");var zr=(0,L.K2)((R,...O)=>{const et=R.split("."),xt=et.length-1,it=et[xt];let rt=window;for(let Et=0;Et<xt;Et++)if(rt=rt[et[Et]],!rt)return void L.Rm.error(`Function name: ${R} not found in window`);rt[it](...O)},"runFunc");function br(R,O){return R&&O?Math.sqrt(Math.pow(O.x-R.x,2)+Math.pow(O.y-R.y,2)):0}function mr(R){let O,et=0;return R.forEach(it=>{et+=br(it,O),O=it}),Ar(R,et/2)}function Er(R){return 1===R.length?R[0]:mr(R)}(0,L.K2)(br,"distance"),(0,L.K2)(mr,"traverseEdge"),(0,L.K2)(Er,"calcLabelPosition");var Lr=(0,L.K2)((R,O=2)=>{const et=Math.pow(10,O);return Math.round(R*et)/et},"roundNumber"),Ar=(0,L.K2)((R,O)=>{let et,xt=O;for(const it of R){if(et){const rt=br(it,et);if(0===rt)return et;if(rt<xt)xt-=rt;else{const Et=xt/rt;if(Et<=0)return et;if(Et>=1)return{x:it.x,y:it.y};if(Et>0&&Et<1)return{x:Lr((1-Et)*et.x+Et*it.x,5),y:Lr((1-Et)*et.y+Et*it.y,5)}}}et=it}throw new Error("Could not find a suitable point for the given distance")},"calculatePoint"),ge=(0,L.K2)((R,O,et)=>{L.Rm.info(`our points ${JSON.stringify(O)}`),O[0]!==et&&(O=O.reverse());const it=Ar(O,25),rt=R?10:5,Et=Math.atan2(O[0].y-it.y,O[0].x-it.x),ut={x:0,y:0};return ut.x=Math.sin(Et)*rt+(O[0].x+it.x)/2,ut.y=-Math.cos(Et)*rt+(O[0].y+it.y)/2,ut},"calcCardinalityPosition");function Br(R,O,et){const xt=structuredClone(et);L.Rm.info("our points",xt),"start_left"!==O&&"start_right"!==O&&xt.reverse();const rt=Ar(xt,25+R),Et=10+.5*R,ut=Math.atan2(xt[0].y-rt.y,xt[0].x-rt.x),It={x:0,y:0};return"start_left"===O?(It.x=Math.sin(ut+Math.PI)*Et+(xt[0].x+rt.x)/2,It.y=-Math.cos(ut+Math.PI)*Et+(xt[0].y+rt.y)/2):"end_right"===O?(It.x=Math.sin(ut-Math.PI)*Et+(xt[0].x+rt.x)/2-5,It.y=-Math.cos(ut-Math.PI)*Et+(xt[0].y+rt.y)/2-5):"end_left"===O?(It.x=Math.sin(ut)*Et+(xt[0].x+rt.x)/2-5,It.y=-Math.cos(ut)*Et+(xt[0].y+rt.y)/2-5):(It.x=Math.sin(ut)*Et+(xt[0].x+rt.x)/2,It.y=-Math.cos(ut)*Et+(xt[0].y+rt.y)/2),It}function Ge(R){let O="",et="";for(const xt of R)void 0!==xt&&(xt.startsWith("color:")||xt.startsWith("text-align:")?et=et+xt+";":O=O+xt+";");return{style:O,labelStyle:et}}(0,L.K2)(Br,"calcTerminalLabelPosition"),(0,L.K2)(Ge,"getStylesFromArray");var W=0,ft=(0,L.K2)(()=>(W++,"id-"+Math.random().toString(36).substr(2,12)+"-"+W),"generateId");function Bt(R){let O="";for(let it=0;it<R;it++)O+="0123456789abcdef".charAt(Math.floor(16*Math.random()));return O}(0,L.K2)(Bt,"makeRandomHex");var _e=(0,L.K2)(R=>Bt(R.length),"random"),Z=(0,L.K2)(function(){return{x:0,y:0,fill:void 0,anchor:"start",style:"#666",width:100,height:100,textMargin:0,rx:0,ry:0,valign:void 0,text:""}},"getTextObj"),ae=(0,L.K2)(function(R,O){const et=O.text.replace(ee.Y2.lineBreakRegex," "),[,xt]=xe(O.fontSize),it=R.append("text");it.attr("x",O.x),it.attr("y",O.y),it.style("text-anchor",O.anchor),it.style("font-family",O.fontFamily),it.style("font-size",xt),it.style("font-weight",O.fontWeight),it.attr("fill",O.fill),void 0!==O.class&&it.attr("class",O.class);const rt=it.append("tspan");return rt.attr("x",O.x+2*O.textMargin),rt.attr("fill",O.fill),rt.text(et),it},"drawSimpleText"),S=(0,dt.A)((R,O,et)=>{if(!R||(et=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial",joinWith:"<br/>"},et),ee.Y2.lineBreakRegex.test(R)))return R;const xt=R.split(" ").filter(Boolean),it=[];let rt="";return xt.forEach((Et,ut)=>{const It=qt(`${Et} `,et),G=qt(rt,et);if(It>O){const{hyphenatedStrings:Ot,remainingWord:Jt}=re(Et,O,"-",et);it.push(rt,...Ot),rt=Jt}else G+It>=O?(it.push(rt),rt=Et):rt=[rt,Et].filter(Boolean).join(" ");ut+1===xt.length&&it.push(rt)}),it.filter(Et=>""!==Et).join(et.joinWith)},(R,O,et)=>`${R}${O}${et.fontSize}${et.fontWeight}${et.fontFamily}${et.joinWith}`),re=(0,dt.A)((R,O,et="-",xt)=>{xt=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial",margin:0},xt);const it=[...R],rt=[];let Et="";return it.forEach((ut,It)=>{const G=`${Et}${ut}`;qt(G,xt)>=O?(rt.push(it.length===It+1?G:`${G}${et}`),Et=""):Et=G}),{hyphenatedStrings:rt,remainingWord:Et}},(R,O,et="-",xt)=>`${R}${O}${et}${xt.fontSize}${xt.fontWeight}${xt.fontFamily}`);function Pt(R,O){return V(R,O).height}function qt(R,O){return V(R,O).width}(0,L.K2)(Pt,"calculateTextHeight"),(0,L.K2)(qt,"calculateTextWidth");var H,V=(0,dt.A)((R,O)=>{const{fontSize:et=12,fontFamily:xt="Arial",fontWeight:it=400}=O;if(!R)return{width:0,height:0};const[,rt]=xe(et),Et=["sans-serif",xt],ut=R.split(ee.Y2.lineBreakRegex),It=[],G=(0,Rt.Ltv)("body");if(!G.remove)return{width:0,height:0,lineHeight:0};const st=G.append("svg");for(const Ot of Et){let Jt=0;const fe={width:0,height:0,lineHeight:0};for(const Be of ut){const Ze=Z();Ze.text=Be||$t;const ye=ae(st,Ze).style("font-size",rt).style("font-weight",it).style("font-family",Ot),kr=(ye._groups||ye)[0][0].getBBox();if(0===kr.width&&0===kr.height)throw new Error("svg element not in render tree");fe.width=Math.round(Math.max(fe.width,kr.width)),Jt=Math.round(kr.height),fe.height+=Jt,fe.lineHeight=Math.round(Math.max(fe.lineHeight,Jt))}It.push(fe)}return st.remove(),It[isNaN(It[1].height)||isNaN(It[1].width)||isNaN(It[1].lineHeight)||It[0].height>It[1].height&&It[0].width>It[1].width&&It[0].lineHeight>It[1].lineHeight?0:1]},(R,O)=>`${R}${O.fontSize}${O.fontWeight}${O.fontFamily}`),pt=(class{constructor(R=!1,O){this.count=0,this.count=O?O.length:0,this.next=R?()=>this.count++:()=>Date.now()}static#t=A=()=>((0,lt.A)(this,"InitIDGenerator"),(0,L.K2)(this,"InitIDGenerator"),this)},A()),Nt=(0,L.K2)(function(R){return H=H||document.createElement("div"),R=escape(R).replace(/%26/g,"&").replace(/%23/g,"#").replace(/%3B/g,";"),H.innerHTML=R,unescape(H.textContent)},"entityDecode");function wt(R){return"str"in R}(0,L.K2)(wt,"isDetailedError");var Wt=(0,L.K2)((R,O,et,xt)=>{if(!xt)return;const it=R.node()?.getBBox();it&&R.append("text").text(xt).attr("text-anchor","middle").attr("x",it.x+it.width/2).attr("y",-et).attr("class",O)},"insertTitle"),xe=(0,L.K2)(R=>{if("number"==typeof R)return[R,R+"px"];const O=parseInt(R??"",10);return Number.isNaN(O)?[void 0,void 0]:R===String(O)?[O,R+"px"]:[O,R]},"parseFontSize");function le(R,O){return(0,q.A)({},R,O)}(0,L.K2)(le,"cleanAndMerge");var Re={assignWithDepth:ee.hH,wrapLabel:S,calculateTextHeight:Pt,calculateTextWidth:qt,calculateTextDimensions:V,cleanAndMerge:le,detectInit:bt,detectDirective:Xt,isSubstringInArray:fr,interpolateToCurve:Fe,calcLabelPosition:Er,calcCardinalityPosition:ge,calcTerminalLabelPosition:Br,formatUrl:vr,getStylesFromArray:Ge,generateId:ft,random:_e,runFunc:zr,entityDecode:Nt,insertTitle:Wt,isLabelCoordinateInPath:St,parseFontSize:xe,InitIDGenerator:pt},oe=(0,L.K2)(function(R){let O=R;return O=O.replace(/style.*:\S*#.*;/g,function(et){return et.substring(0,et.length-1)}),O=O.replace(/classDef.*:\S*#.*;/g,function(et){return et.substring(0,et.length-1)}),O=O.replace(/#\w+;/g,function(et){const xt=et.substring(1,et.length-1);return/^\+?\d+$/.test(xt)?"\ufb02\xb0\xb0"+xt+"\xb6\xdf":"\ufb02\xb0"+xt+"\xb6\xdf"}),O},"encodeEntities"),qe=(0,L.K2)(function(R){return R.replace(/\ufb02\xb0\xb0/g,"&#").replace(/\ufb02\xb0/g,"&").replace(/\xb6\xdf/g,";")},"decodeEntities"),We=(0,L.K2)((R,O,{counter:et=0,prefix:xt,suffix:it},rt)=>rt||`${xt?`${xt}_`:""}${R}_${O}_${et}${it?`_${it}`:""}`,"getEdgeId");function Ct(R){return R??null}function St(R,O){const et=Math.round(R.x),xt=Math.round(R.y),it=O.replace(/(\d+\.\d+)/g,rt=>Math.round(parseFloat(rt)).toString());return it.includes(et.toString())||it.includes(xt.toString())}(0,L.K2)(Ct,"handleUndefinedAttr"),(0,L.K2)(St,"isLabelCoordinateInPath")},52240:(ti,_r,B)=>{"use strict";Object.defineProperty(_r,"__esModule",{value:!0}),_r.Emitter=_r.Event=void 0;const lt=B(30362);var ee;!function(Rt){const dt={dispose(){}};Rt.None=function(){return dt}}(ee||(_r.Event=ee={}));class L{add(dt,q=null,A){this._callbacks||(this._callbacks=[],this._contexts=[]),this._callbacks.push(dt),this._contexts.push(q),Array.isArray(A)&&A.push({dispose:()=>this.remove(dt,q)})}remove(dt,q=null){if(!this._callbacks)return;let A=!1;for(let $t=0,yt=this._callbacks.length;$t<yt;$t++)if(this._callbacks[$t]===dt){if(this._contexts[$t]===q)return this._callbacks.splice($t,1),void this._contexts.splice($t,1);A=!0}if(A)throw new Error("When adding a listener with a context, you should remove it with the same context")}invoke(...dt){if(!this._callbacks)return[];const q=[],A=this._callbacks.slice(0),$t=this._contexts.slice(0);for(let yt=0,Ye=A.length;yt<Ye;yt++)try{q.push(A[yt].apply($t[yt],dt))}catch(bt){(0,lt.default)().console.error(bt)}return q}isEmpty(){return!this._callbacks||0===this._callbacks.length}dispose(){this._callbacks=void 0,this._contexts=void 0}}class D{constructor(dt){this._options=dt}get event(){return this._event||(this._event=(dt,q,A)=>{this._callbacks||(this._callbacks=new L),this._options&&this._options.onFirstListenerAdd&&this._callbacks.isEmpty()&&this._options.onFirstListenerAdd(this),this._callbacks.add(dt,q);const $t={dispose:()=>{this._callbacks&&(this._callbacks.remove(dt,q),$t.dispose=D._noop,this._options&&this._options.onLastListenerRemove&&this._callbacks.isEmpty()&&this._options.onLastListenerRemove(this))}};return Array.isArray(A)&&A.push($t),$t}),this._event}fire(dt){this._callbacks&&this._callbacks.invoke.call(this._callbacks,dt)}dispose(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0)}}_r.Emitter=D,D._noop=function(){}},53102:(ti,_r,B)=>{"use strict";B.d(_r,{Zk:()=>yt,q7:()=>rt,tM:()=>ir,u4:()=>Kt});var lt=B(45027),ee=B(89204),L=B(5675),D=B(8086),Rt=B(72271),dt=B(52052),q=B(79006),A=B(32303),$t=function(){var me=(0,A.K2)(function(sr,$e,He,Pr){for(He=He||{},Pr=sr.length;Pr--;He[sr[Pr]]=$e);return He},"o"),ce=[1,2],ke=[1,3],Te=[1,4],er=[2,4],Xe=[1,9],Ir=[1,11],Ee=[1,16],qr=[1,17],nr=[1,18],te=[1,19],ne=[1,33],Le=[1,20],tr=[1,21],g=[1,22],y=[1,23],E=[1,24],P=[1,26],b=[1,27],z=[1,28],p=[1,29],x=[1,30],C=[1,31],w=[1,32],$=[1,35],ct=[1,36],kt=[1,37],Ut=[1,38],Ht=[1,34],zt=[1,4,5,16,17,19,21,22,24,25,26,27,28,29,33,35,37,38,41,45,48,51,52,53,54,57],ue=[1,4,5,14,15,16,17,19,21,22,24,25,26,27,28,29,33,35,37,38,39,40,41,45,48,51,52,53,54,57],je=[4,5,16,17,19,21,22,24,25,26,27,28,29,33,35,37,38,41,45,48,51,52,53,54,57],ze={trace:(0,A.K2)(function(){},"trace"),yy:{},symbols_:{error:2,start:3,SPACE:4,NL:5,SD:6,document:7,line:8,statement:9,classDefStatement:10,styleStatement:11,cssClassStatement:12,idStatement:13,DESCR:14,"--\x3e":15,HIDE_EMPTY:16,scale:17,WIDTH:18,COMPOSIT_STATE:19,STRUCT_START:20,STRUCT_STOP:21,STATE_DESCR:22,AS:23,ID:24,FORK:25,JOIN:26,CHOICE:27,CONCURRENT:28,note:29,notePosition:30,NOTE_TEXT:31,direction:32,acc_title:33,acc_title_value:34,acc_descr:35,acc_descr_value:36,acc_descr_multiline_value:37,CLICK:38,STRING:39,HREF:40,classDef:41,CLASSDEF_ID:42,CLASSDEF_STYLEOPTS:43,DEFAULT:44,style:45,STYLE_IDS:46,STYLEDEF_STYLEOPTS:47,class:48,CLASSENTITY_IDS:49,STYLECLASS:50,direction_tb:51,direction_bt:52,direction_rl:53,direction_lr:54,eol:55,";":56,EDGE_STATE:57,STYLE_SEPARATOR:58,left_of:59,right_of:60,$accept:0,$end:1},terminals_:{2:"error",4:"SPACE",5:"NL",6:"SD",14:"DESCR",15:"--\x3e",16:"HIDE_EMPTY",17:"scale",18:"WIDTH",19:"COMPOSIT_STATE",20:"STRUCT_START",21:"STRUCT_STOP",22:"STATE_DESCR",23:"AS",24:"ID",25:"FORK",26:"JOIN",27:"CHOICE",28:"CONCURRENT",29:"note",31:"NOTE_TEXT",33:"acc_title",34:"acc_title_value",35:"acc_descr",36:"acc_descr_value",37:"acc_descr_multiline_value",38:"CLICK",39:"STRING",40:"HREF",41:"classDef",42:"CLASSDEF_ID",43:"CLASSDEF_STYLEOPTS",44:"DEFAULT",45:"style",46:"STYLE_IDS",47:"STYLEDEF_STYLEOPTS",48:"class",49:"CLASSENTITY_IDS",50:"STYLECLASS",51:"direction_tb",52:"direction_bt",53:"direction_rl",54:"direction_lr",56:";",57:"EDGE_STATE",58:"STYLE_SEPARATOR",59:"left_of",60:"right_of"},productions_:[0,[3,2],[3,2],[3,2],[7,0],[7,2],[8,2],[8,1],[8,1],[9,1],[9,1],[9,1],[9,1],[9,2],[9,3],[9,4],[9,1],[9,2],[9,1],[9,4],[9,3],[9,6],[9,1],[9,1],[9,1],[9,1],[9,4],[9,4],[9,1],[9,2],[9,2],[9,1],[9,5],[9,5],[10,3],[10,3],[11,3],[12,3],[32,1],[32,1],[32,1],[32,1],[55,1],[55,1],[13,1],[13,1],[13,3],[13,3],[30,1],[30,1]],performAction:(0,A.K2)(function($e,He,Pr,wr,Vr,xr,Ba){var Zr=xr.length-1;switch(Vr){case 3:return wr.setRootDoc(xr[Zr]),xr[Zr];case 4:this.$=[];break;case 5:"nl"!=xr[Zr]&&(xr[Zr-1].push(xr[Zr]),this.$=xr[Zr-1]);break;case 6:case 7:case 12:this.$=xr[Zr];break;case 8:this.$="nl";break;case 13:const Xr=xr[Zr-1];Xr.description=wr.trimColon(xr[Zr]),this.$=Xr;break;case 14:this.$={stmt:"relation",state1:xr[Zr-2],state2:xr[Zr]};break;case 15:const Rr=wr.trimColon(xr[Zr]);this.$={stmt:"relation",state1:xr[Zr-3],state2:xr[Zr-1],description:Rr};break;case 19:this.$={stmt:"state",id:xr[Zr-3],type:"default",description:"",doc:xr[Zr-1]};break;case 20:var Oa=xr[Zr],Qr=xr[Zr-2].trim();if(xr[Zr].match(":")){var ra=xr[Zr].split(":");Oa=ra[0],Qr=[Qr,ra[1]]}this.$={stmt:"state",id:Oa,type:"default",description:Qr};break;case 21:this.$={stmt:"state",id:xr[Zr-3],type:"default",description:xr[Zr-5],doc:xr[Zr-1]};break;case 22:this.$={stmt:"state",id:xr[Zr],type:"fork"};break;case 23:this.$={stmt:"state",id:xr[Zr],type:"join"};break;case 24:this.$={stmt:"state",id:xr[Zr],type:"choice"};break;case 25:this.$={stmt:"state",id:wr.getDividerId(),type:"divider"};break;case 26:this.$={stmt:"state",id:xr[Zr-1].trim(),note:{position:xr[Zr-2].trim(),text:xr[Zr].trim()}};break;case 29:this.$=xr[Zr].trim(),wr.setAccTitle(this.$);break;case 30:case 31:this.$=xr[Zr].trim(),wr.setAccDescription(this.$);break;case 32:this.$={stmt:"click",id:xr[Zr-3],url:xr[Zr-2],tooltip:xr[Zr-1]};break;case 33:this.$={stmt:"click",id:xr[Zr-3],url:xr[Zr-1],tooltip:""};break;case 34:case 35:this.$={stmt:"classDef",id:xr[Zr-1].trim(),classes:xr[Zr].trim()};break;case 36:this.$={stmt:"style",id:xr[Zr-1].trim(),styleClass:xr[Zr].trim()};break;case 37:this.$={stmt:"applyClass",id:xr[Zr-1].trim(),styleClass:xr[Zr].trim()};break;case 38:wr.setDirection("TB"),this.$={stmt:"dir",value:"TB"};break;case 39:wr.setDirection("BT"),this.$={stmt:"dir",value:"BT"};break;case 40:wr.setDirection("RL"),this.$={stmt:"dir",value:"RL"};break;case 41:wr.setDirection("LR"),this.$={stmt:"dir",value:"LR"};break;case 44:case 45:this.$={stmt:"state",id:xr[Zr].trim(),type:"default",description:""};break;case 46:case 47:this.$={stmt:"state",id:xr[Zr-2].trim(),classes:[xr[Zr].trim()],type:"default",description:""}}},"anonymous"),table:[{3:1,4:ce,5:ke,6:Te},{1:[3]},{3:5,4:ce,5:ke,6:Te},{3:6,4:ce,5:ke,6:Te},me([1,4,5,16,17,19,22,24,25,26,27,28,29,33,35,37,38,41,45,48,51,52,53,54,57],er,{7:7}),{1:[2,1]},{1:[2,2]},{1:[2,3],4:Xe,5:Ir,8:8,9:10,10:12,11:13,12:14,13:15,16:Ee,17:qr,19:nr,22:te,24:ne,25:Le,26:tr,27:g,28:y,29:E,32:25,33:P,35:b,37:z,38:p,41:x,45:C,48:w,51:$,52:ct,53:kt,54:Ut,57:Ht},me(zt,[2,5]),{9:39,10:12,11:13,12:14,13:15,16:Ee,17:qr,19:nr,22:te,24:ne,25:Le,26:tr,27:g,28:y,29:E,32:25,33:P,35:b,37:z,38:p,41:x,45:C,48:w,51:$,52:ct,53:kt,54:Ut,57:Ht},me(zt,[2,7]),me(zt,[2,8]),me(zt,[2,9]),me(zt,[2,10]),me(zt,[2,11]),me(zt,[2,12],{14:[1,40],15:[1,41]}),me(zt,[2,16]),{18:[1,42]},me(zt,[2,18],{20:[1,43]}),{23:[1,44]},me(zt,[2,22]),me(zt,[2,23]),me(zt,[2,24]),me(zt,[2,25]),{30:45,31:[1,46],59:[1,47],60:[1,48]},me(zt,[2,28]),{34:[1,49]},{36:[1,50]},me(zt,[2,31]),{13:51,24:ne,57:Ht},{42:[1,52],44:[1,53]},{46:[1,54]},{49:[1,55]},me(ue,[2,44],{58:[1,56]}),me(ue,[2,45],{58:[1,57]}),me(zt,[2,38]),me(zt,[2,39]),me(zt,[2,40]),me(zt,[2,41]),me(zt,[2,6]),me(zt,[2,13]),{13:58,24:ne,57:Ht},me(zt,[2,17]),me(je,er,{7:59}),{24:[1,60]},{24:[1,61]},{23:[1,62]},{24:[2,48]},{24:[2,49]},me(zt,[2,29]),me(zt,[2,30]),{39:[1,63],40:[1,64]},{43:[1,65]},{43:[1,66]},{47:[1,67]},{50:[1,68]},{24:[1,69]},{24:[1,70]},me(zt,[2,14],{14:[1,71]}),{4:Xe,5:Ir,8:8,9:10,10:12,11:13,12:14,13:15,16:Ee,17:qr,19:nr,21:[1,72],22:te,24:ne,25:Le,26:tr,27:g,28:y,29:E,32:25,33:P,35:b,37:z,38:p,41:x,45:C,48:w,51:$,52:ct,53:kt,54:Ut,57:Ht},me(zt,[2,20],{20:[1,73]}),{31:[1,74]},{24:[1,75]},{39:[1,76]},{39:[1,77]},me(zt,[2,34]),me(zt,[2,35]),me(zt,[2,36]),me(zt,[2,37]),me(ue,[2,46]),me(ue,[2,47]),me(zt,[2,15]),me(zt,[2,19]),me(je,er,{7:78}),me(zt,[2,26]),me(zt,[2,27]),{5:[1,79]},{5:[1,80]},{4:Xe,5:Ir,8:8,9:10,10:12,11:13,12:14,13:15,16:Ee,17:qr,19:nr,21:[1,81],22:te,24:ne,25:Le,26:tr,27:g,28:y,29:E,32:25,33:P,35:b,37:z,38:p,41:x,45:C,48:w,51:$,52:ct,53:kt,54:Ut,57:Ht},me(zt,[2,32]),me(zt,[2,33]),me(zt,[2,21])],defaultActions:{5:[2,1],6:[2,2],47:[2,48],48:[2,49]},parseError:(0,A.K2)(function($e,He){if(!He.recoverable){var Pr=new Error($e);throw Pr.hash=He,Pr}this.trace($e)},"parseError"),parse:(0,A.K2)(function($e){var He=this,Pr=[0],wr=[],Vr=[null],xr=[],Ba=this.table,Zr="",Oa=0,Qr=0,ra=0,Tr=xr.slice.call(arguments,1),N=Object.create(this.lexer),Vt={yy:{}};for(var Ke in this.yy)Object.prototype.hasOwnProperty.call(this.yy,Ke)&&(Vt.yy[Ke]=this.yy[Ke]);N.setInput($e,Vt.yy),Vt.yy.lexer=N,Vt.yy.parser=this,typeof N.yylloc>"u"&&(N.yylloc={});var rr=N.yylloc;xr.push(rr);var ia=N.options&&N.options.ranges;function ga(){var qa;return"number"!=typeof(qa=wr.pop()||N.lex()||1)&&(qa instanceof Array&&(qa=(wr=qa).pop()),qa=He.symbols_[qa]||qa),qa}this.parseError="function"==typeof Vt.yy.parseError?Vt.yy.parseError:Object.getPrototypeOf(this).parseError,(0,A.K2)(function hr(qa){Pr.length=Pr.length-2*qa,Vr.length=Vr.length-qa,xr.length=xr.length-qa},"popStack"),(0,A.K2)(ga,"lex");for(var or,_a,Ma,Ra,ca,Yr,Fa,Va,ha={};;){if(this.defaultActions[Ma=Pr[Pr.length-1]]?Ra=this.defaultActions[Ma]:((null===or||typeof or>"u")&&(or=ga()),Ra=Ba[Ma]&&Ba[Ma][or]),typeof Ra>"u"||!Ra.length||!Ra[0]){var lr;for(Yr in Va=[],Ba[Ma])this.terminals_[Yr]&&Yr>2&&Va.push("'"+this.terminals_[Yr]+"'");lr=N.showPosition?"Parse error on line "+(Oa+1)+":\n"+N.showPosition()+"\nExpecting "+Va.join(", ")+", got '"+(this.terminals_[or]||or)+"'":"Parse error on line "+(Oa+1)+": Unexpected "+(1==or?"end of input":"'"+(this.terminals_[or]||or)+"'"),this.parseError(lr,{text:N.match,token:this.terminals_[or]||or,line:N.yylineno,loc:rr,expected:Va})}if(Ra[0]instanceof Array&&Ra.length>1)throw new Error("Parse Error: multiple actions possible at state: "+Ma+", token: "+or);switch(Ra[0]){case 1:Pr.push(or),Vr.push(N.yytext),xr.push(N.yylloc),Pr.push(Ra[1]),or=null,_a?(or=_a,_a=null):(Qr=N.yyleng,Zr=N.yytext,Oa=N.yylineno,rr=N.yylloc,ra>0&&ra--);break;case 2:if(ha.$=Vr[Vr.length-(Fa=this.productions_[Ra[1]][1])],ha._$={first_line:xr[xr.length-(Fa||1)].first_line,last_line:xr[xr.length-1].last_line,first_column:xr[xr.length-(Fa||1)].first_column,last_column:xr[xr.length-1].last_column},ia&&(ha._$.range=[xr[xr.length-(Fa||1)].range[0],xr[xr.length-1].range[1]]),typeof(ca=this.performAction.apply(ha,[Zr,Qr,Oa,Vt.yy,Ra[1],Vr,xr].concat(Tr)))<"u")return ca;Fa&&(Pr=Pr.slice(0,-1*Fa*2),Vr=Vr.slice(0,-1*Fa),xr=xr.slice(0,-1*Fa)),Pr.push(this.productions_[Ra[1]][0]),Vr.push(ha.$),xr.push(ha._$),Pr.push(Ba[Pr[Pr.length-2]][Pr[Pr.length-1]]);break;case 3:return!0}}return!0},"parse")};function cr(){this.yy={}}return ze.lexer=function(){return{EOF:1,parseError:(0,A.K2)(function(He,Pr){if(!this.yy.parser)throw new Error(He);this.yy.parser.parseError(He,Pr)},"parseError"),setInput:(0,A.K2)(function($e,He){return this.yy=He||this.yy||{},this._input=$e,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},"setInput"),input:(0,A.K2)(function(){var $e=this._input[0];return this.yytext+=$e,this.yyleng++,this.offset++,this.match+=$e,this.matched+=$e,$e.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),$e},"input"),unput:(0,A.K2)(function($e){var He=$e.length,Pr=$e.split(/(?:\r\n?|\n)/g);this._input=$e+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-He),this.offset-=He;var wr=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),Pr.length-1&&(this.yylineno-=Pr.length-1);var Vr=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:Pr?(Pr.length===wr.length?this.yylloc.first_column:0)+wr[wr.length-Pr.length].length-Pr[0].length:this.yylloc.first_column-He},this.options.ranges&&(this.yylloc.range=[Vr[0],Vr[0]+this.yyleng-He]),this.yyleng=this.yytext.length,this},"unput"),more:(0,A.K2)(function(){return this._more=!0,this},"more"),reject:(0,A.K2)(function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},"reject"),less:(0,A.K2)(function($e){this.unput(this.match.slice($e))},"less"),pastInput:(0,A.K2)(function(){var $e=this.matched.substr(0,this.matched.length-this.match.length);return($e.length>20?"...":"")+$e.substr(-20).replace(/\n/g,"")},"pastInput"),upcomingInput:(0,A.K2)(function(){var $e=this.match;return $e.length<20&&($e+=this._input.substr(0,20-$e.length)),($e.substr(0,20)+($e.length>20?"...":"")).replace(/\n/g,"")},"upcomingInput"),showPosition:(0,A.K2)(function(){var $e=this.pastInput(),He=new Array($e.length+1).join("-");return $e+this.upcomingInput()+"\n"+He+"^"},"showPosition"),test_match:(0,A.K2)(function($e,He){var Pr,wr,Vr;if(this.options.backtrack_lexer&&(Vr={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(Vr.yylloc.range=this.yylloc.range.slice(0))),(wr=$e[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=wr.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:wr?wr[wr.length-1].length-wr[wr.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+$e[0].length},this.yytext+=$e[0],this.match+=$e[0],this.matches=$e,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice($e[0].length),this.matched+=$e[0],Pr=this.performAction.call(this,this.yy,this,He,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),Pr)return Pr;if(this._backtrack){for(var xr in Vr)this[xr]=Vr[xr];return!1}return!1},"test_match"),next:(0,A.K2)(function(){if(this.done)return this.EOF;var $e,He,Pr,wr;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var Vr=this._currentRules(),xr=0;xr<Vr.length;xr++)if((Pr=this._input.match(this.rules[Vr[xr]]))&&(!He||Pr[0].length>He[0].length)){if(He=Pr,wr=xr,this.options.backtrack_lexer){if(!1!==($e=this.test_match(Pr,Vr[xr])))return $e;if(this._backtrack){He=!1;continue}return!1}if(!this.options.flex)break}return He?!1!==($e=this.test_match(He,Vr[wr]))&&$e:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},"next"),lex:(0,A.K2)(function(){return this.next()||this.lex()},"lex"),begin:(0,A.K2)(function(He){this.conditionStack.push(He)},"begin"),popState:(0,A.K2)(function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},"popState"),_currentRules:(0,A.K2)(function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},"_currentRules"),topState:(0,A.K2)(function(He){return(He=this.conditionStack.length-1-Math.abs(He||0))>=0?this.conditionStack[He]:"INITIAL"},"topState"),pushState:(0,A.K2)(function(He){this.begin(He)},"pushState"),stateStackSize:(0,A.K2)(function(){return this.conditionStack.length},"stateStackSize"),options:{"case-insensitive":!0},performAction:(0,A.K2)(function(He,Pr,wr,Vr){switch(wr){case 0:return 38;case 1:return 40;case 2:return 39;case 3:return 44;case 4:case 45:return 51;case 5:case 46:return 52;case 6:case 47:return 53;case 7:case 48:return 54;case 8:case 9:case 11:case 12:case 13:case 14:case 57:case 59:case 65:break;case 10:case 80:return 5;case 15:case 35:return this.pushState("SCALE"),17;case 16:case 36:return 18;case 17:case 23:case 37:case 52:case 55:this.popState();break;case 18:return this.begin("acc_title"),33;case 19:return this.popState(),"acc_title_value";case 20:return this.begin("acc_descr"),35;case 21:return this.popState(),"acc_descr_value";case 22:this.begin("acc_descr_multiline");break;case 24:return"acc_descr_multiline_value";case 25:return this.pushState("CLASSDEF"),41;case 26:return this.popState(),this.pushState("CLASSDEFID"),"DEFAULT_CLASSDEF_ID";case 27:return this.popState(),this.pushState("CLASSDEFID"),42;case 28:return this.popState(),43;case 29:return this.pushState("CLASS"),48;case 30:return this.popState(),this.pushState("CLASS_STYLE"),49;case 31:return this.popState(),50;case 32:return this.pushState("STYLE"),45;case 33:return this.popState(),this.pushState("STYLEDEF_STYLES"),46;case 34:return this.popState(),47;case 38:this.pushState("STATE");break;case 39:case 42:return this.popState(),Pr.yytext=Pr.yytext.slice(0,-8).trim(),25;case 40:case 43:return this.popState(),Pr.yytext=Pr.yytext.slice(0,-8).trim(),26;case 41:case 44:return this.popState(),Pr.yytext=Pr.yytext.slice(0,-10).trim(),27;case 49:this.pushState("STATE_STRING");break;case 50:return this.pushState("STATE_ID"),"AS";case 51:case 67:return this.popState(),"ID";case 53:return"STATE_DESCR";case 54:return 19;case 56:return this.popState(),this.pushState("struct"),20;case 58:return this.popState(),21;case 60:return this.begin("NOTE"),29;case 61:return this.popState(),this.pushState("NOTE_ID"),59;case 62:return this.popState(),this.pushState("NOTE_ID"),60;case 63:this.popState(),this.pushState("FLOATING_NOTE");break;case 64:return this.popState(),this.pushState("FLOATING_NOTE_ID"),"AS";case 66:return"NOTE_TEXT";case 68:return this.popState(),this.pushState("NOTE_TEXT"),24;case 69:return this.popState(),Pr.yytext=Pr.yytext.substr(2).trim(),31;case 70:return this.popState(),Pr.yytext=Pr.yytext.slice(0,-8).trim(),31;case 71:case 72:return 6;case 73:return 16;case 74:return 57;case 75:return 24;case 76:return Pr.yytext=Pr.yytext.trim(),14;case 77:return 15;case 78:return 28;case 79:return 58;case 81:return"INVALID"}},"anonymous"),rules:[/^(?:click\b)/i,/^(?:href\b)/i,/^(?:"[^"]*")/i,/^(?:default\b)/i,/^(?:.*direction\s+TB[^\n]*)/i,/^(?:.*direction\s+BT[^\n]*)/i,/^(?:.*direction\s+RL[^\n]*)/i,/^(?:.*direction\s+LR[^\n]*)/i,/^(?:%%(?!\{)[^\n]*)/i,/^(?:[^\}]%%[^\n]*)/i,/^(?:[\n]+)/i,/^(?:[\s]+)/i,/^(?:((?!\n)\s)+)/i,/^(?:#[^\n]*)/i,/^(?:%[^\n]*)/i,/^(?:scale\s+)/i,/^(?:\d+)/i,/^(?:\s+width\b)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:classDef\s+)/i,/^(?:DEFAULT\s+)/i,/^(?:\w+\s+)/i,/^(?:[^\n]*)/i,/^(?:class\s+)/i,/^(?:(\w+)+((,\s*\w+)*))/i,/^(?:[^\n]*)/i,/^(?:style\s+)/i,/^(?:[\w,]+\s+)/i,/^(?:[^\n]*)/i,/^(?:scale\s+)/i,/^(?:\d+)/i,/^(?:\s+width\b)/i,/^(?:state\s+)/i,/^(?:.*<<fork>>)/i,/^(?:.*<<join>>)/i,/^(?:.*<<choice>>)/i,/^(?:.*\[\[fork\]\])/i,/^(?:.*\[\[join\]\])/i,/^(?:.*\[\[choice\]\])/i,/^(?:.*direction\s+TB[^\n]*)/i,/^(?:.*direction\s+BT[^\n]*)/i,/^(?:.*direction\s+RL[^\n]*)/i,/^(?:.*direction\s+LR[^\n]*)/i,/^(?:["])/i,/^(?:\s*as\s+)/i,/^(?:[^\n\{]*)/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:[^\n\s\{]+)/i,/^(?:\n)/i,/^(?:\{)/i,/^(?:%%(?!\{)[^\n]*)/i,/^(?:\})/i,/^(?:[\n])/i,/^(?:note\s+)/i,/^(?:left of\b)/i,/^(?:right of\b)/i,/^(?:")/i,/^(?:\s*as\s*)/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:[^\n]*)/i,/^(?:\s*[^:\n\s\-]+)/i,/^(?:\s*:[^:\n;]+)/i,/^(?:[\s\S]*?end note\b)/i,/^(?:stateDiagram\s+)/i,/^(?:stateDiagram-v2\s+)/i,/^(?:hide empty description\b)/i,/^(?:\[\*\])/i,/^(?:[^:\n\s\-\{]+)/i,/^(?:\s*:[^:\n;]+)/i,/^(?:-->)/i,/^(?:--)/i,/^(?::::)/i,/^(?:$)/i,/^(?:.)/i],conditions:{LINE:{rules:[12,13],inclusive:!1},struct:{rules:[12,13,25,29,32,38,45,46,47,48,57,58,59,60,74,75,76,77,78],inclusive:!1},FLOATING_NOTE_ID:{rules:[67],inclusive:!1},FLOATING_NOTE:{rules:[64,65,66],inclusive:!1},NOTE_TEXT:{rules:[69,70],inclusive:!1},NOTE_ID:{rules:[68],inclusive:!1},NOTE:{rules:[61,62,63],inclusive:!1},STYLEDEF_STYLEOPTS:{rules:[],inclusive:!1},STYLEDEF_STYLES:{rules:[34],inclusive:!1},STYLE_IDS:{rules:[],inclusive:!1},STYLE:{rules:[33],inclusive:!1},CLASS_STYLE:{rules:[31],inclusive:!1},CLASS:{rules:[30],inclusive:!1},CLASSDEFID:{rules:[28],inclusive:!1},CLASSDEF:{rules:[26,27],inclusive:!1},acc_descr_multiline:{rules:[23,24],inclusive:!1},acc_descr:{rules:[21],inclusive:!1},acc_title:{rules:[19],inclusive:!1},SCALE:{rules:[16,17,36,37],inclusive:!1},ALIAS:{rules:[],inclusive:!1},STATE_ID:{rules:[51],inclusive:!1},STATE_STRING:{rules:[52,53],inclusive:!1},FORK_STATE:{rules:[],inclusive:!1},STATE:{rules:[12,13,39,40,41,42,43,44,49,50,54,55,56],inclusive:!1},ID:{rules:[12,13],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,13,14,15,18,20,22,25,29,32,35,38,56,60,71,72,73,74,75,76,77,79,80,81],inclusive:!0}}}}(),(0,A.K2)(cr,"Parser"),cr.prototype=ze,ze.Parser=cr,new cr}();$t.parser=$t;var yt=$t,j="state",fr="root",Fe="relation",mr="default",Er="divider",Lr="fill:none",Ar="fill: #333",W="rect",ft="rectWithTitle",Z="divider",ae="roundedWithTitle",Pt="statediagram",V=`${Pt}-state`,pt="transition",wt=`${pt} note-edge`,Wt=`${Pt}-note`,le=`${Pt}-cluster`,oe=`${Pt}-cluster-alt`,St="----",R=`${St}note`,O=`${St}parent`,et=(0,A.K2)((me,ce="TB")=>{if(!me.doc)return ce;let ke=ce;for(const Te of me.doc)"dir"===Te.stmt&&(ke=Te.value);return ke},"getDir"),rt={getClasses:(0,A.K2)(function(me,ce){return ce.db.getClasses()},"getClasses"),draw:(0,A.K2)(function(){var me=(0,ee.A)(function*(ce,ke,Te,er){A.Rm.info("REF0:"),A.Rm.info("Drawing state diagram (v2)",ke);const{securityLevel:Xe,state:Ir,layout:Ee}=(0,q.D7)();er.db.extract(er.db.getRootDocV2());const qr=er.db.getData(),nr=(0,L.A)(ke,Xe);qr.type=er.type,qr.layoutAlgorithm=Ee,qr.nodeSpacing=Ir?.nodeSpacing||50,qr.rankSpacing=Ir?.rankSpacing||50,qr.markers=["barb"],qr.diagramId=ke,yield(0,Rt.XX)(qr,nr);try{("function"==typeof er.db.getLinks?er.db.getLinks():new Map).forEach((Le,tr)=>{const g="string"==typeof tr?tr:"string"==typeof tr?.id?tr.id:"";if(!g)return void A.Rm.warn("\u26a0\ufe0f Invalid or missing stateId from key:",JSON.stringify(tr));const y=nr.node()?.querySelectorAll("g");let E;if(y?.forEach(p=>{p.textContent?.trim()===g&&(E=p)}),!E)return void A.Rm.warn("\u26a0\ufe0f Could not find node matching text:",g);const P=E.parentNode;if(!P)return void A.Rm.warn("\u26a0\ufe0f Node has no parent, cannot wrap:",g);const b=document.createElementNS("http://www.w3.org/2000/svg","a"),z=Le.url.replace(/^"+|"+$/g,"");if(b.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",z),b.setAttribute("target","_blank"),Le.tooltip){const p=Le.tooltip.replace(/^"+|"+$/g,"");b.setAttribute("title",p)}P.replaceChild(b,E),b.appendChild(E),A.Rm.info("\u{1f517} Wrapped node in <a> tag for:",g,Le.url)})}catch(ne){A.Rm.error("\u274c Error injecting clickable links:",ne)}dt._K.insertTitle(nr,"statediagramTitleText",Ir?.titleTopMargin??25,er.db.getDiagramTitle()),(0,D.P)(nr,8,Pt,Ir?.useMaxWidth??!0)});return function(ce,ke,Te,er){return me.apply(this,arguments)}}(),"draw"),getDir:et},Et=new Map,ut=0;function It(me="",ce=0,ke="",Te=St){return`state-${me}${null!==ke&&ke.length>0?`${Te}${ke}`:""}-${ce}`}(0,A.K2)(It,"stateDomId");var G=(0,A.K2)((me,ce,ke,Te,er,Xe,Ir,Ee)=>{A.Rm.trace("items",ce),ce.forEach(qr=>{switch(qr.stmt){case j:case mr:fe(me,qr,ke,Te,er,Xe,Ir,Ee);break;case Fe:{fe(me,qr.state1,ke,Te,er,Xe,Ir,Ee),fe(me,qr.state2,ke,Te,er,Xe,Ir,Ee);const nr={id:"edge"+ut,start:qr.state1.id,end:qr.state2.id,arrowhead:"normal",arrowTypeEnd:"arrow_barb",style:Lr,labelStyle:"",label:q.Y2.sanitizeText(qr.description??"",(0,q.D7)()),arrowheadStyle:Ar,labelpos:"c",labelType:"text",thickness:"normal",classes:pt,look:Ir};er.push(nr),ut++}}})},"setupDoc"),st=(0,A.K2)((me,ce="TB")=>{let ke=ce;if(me.doc)for(const Te of me.doc)"dir"===Te.stmt&&(ke=Te.value);return ke},"getDir");function Ce(me,ce,ke){if(!ce.id||"</join></fork>"===ce.id||"</choice>"===ce.id)return;ce.cssClasses&&(Array.isArray(ce.cssCompiledStyles)||(ce.cssCompiledStyles=[]),ce.cssClasses.split(" ").forEach(er=>{const Xe=ke.get(er);Xe&&(ce.cssCompiledStyles=[...ce.cssCompiledStyles??[],...Xe.styles])}));const Te=me.find(er=>er.id===ce.id);Te?Object.assign(Te,ce):me.push(ce)}function Ot(me){return me?.classes?.join(" ")??""}function Jt(me){return me?.styles??[]}(0,A.K2)(Ce,"insertOrUpdateNode"),(0,A.K2)(Ot,"getClassesFromDbInfo"),(0,A.K2)(Jt,"getStylesFromDbInfo");var fe=(0,A.K2)((me,ce,ke,Te,er,Xe,Ir,Ee)=>{const qr=ce.id,nr=ke.get(qr),te=Ot(nr),ne=Jt(nr),Le=(0,q.D7)();if(A.Rm.info("dataFetcher parsedItem",ce,nr,ne),"root"!==qr){let tr=W;!0===ce.start?tr="stateStart":!1===ce.start&&(tr="stateEnd"),ce.type!==mr&&(tr=ce.type),Et.get(qr)||Et.set(qr,{id:qr,shape:tr,description:q.Y2.sanitizeText(qr,Le),cssClasses:`${te} ${V}`,cssStyles:ne});const g=Et.get(qr);ce.description&&(Array.isArray(g.description)?(g.shape=ft,g.description.push(ce.description)):g.description?.length&&g.description.length>0?(g.shape=ft,g.description=g.description===qr?[ce.description]:[g.description,ce.description]):(g.shape=W,g.description=ce.description),g.description=q.Y2.sanitizeTextOrArray(g.description,Le)),1===g.description?.length&&g.shape===ft&&(g.shape="group"===g.type?ae:W),!g.type&&ce.doc&&(A.Rm.info("Setting cluster for XCX",qr,st(ce)),g.type="group",g.isGroup=!0,g.dir=st(ce),g.shape=ce.type===Er?Z:ae,g.cssClasses=`${g.cssClasses} ${le} ${Xe?oe:""}`);const y={labelStyle:"",shape:g.shape,label:g.description,cssClasses:g.cssClasses,cssCompiledStyles:[],cssStyles:g.cssStyles,id:qr,dir:g.dir,domId:It(qr,ut),type:g.type,isGroup:"group"===g.type,padding:8,rx:10,ry:10,look:Ir};if(y.shape===Z&&(y.label=""),me&&"root"!==me.id&&(A.Rm.trace("Setting node ",qr," to be child of its parent ",me.id),y.parentId=me.id),y.centerLabel=!0,ce.note){const E={labelStyle:"",shape:"note",label:ce.note.text,cssClasses:Wt,cssStyles:[],cssCompiledStyles:[],id:qr+R+"-"+ut,domId:It(qr,ut,"note"),type:g.type,isGroup:"group"===g.type,padding:Le.flowchart?.padding,look:Ir,position:ce.note.position},P=qr+O,b={labelStyle:"",shape:"noteGroup",label:ce.note.text,cssClasses:g.cssClasses,cssStyles:[],id:qr+O,domId:It(qr,ut,"parent"),type:"group",isGroup:!0,padding:16,look:Ir,position:ce.note.position};ut++,b.id=P,E.parentId=P,Ce(Te,b,Ee),Ce(Te,E,Ee),Ce(Te,y,Ee);let z=qr,p=E.id;"left of"===ce.note.position&&(z=E.id,p=qr),er.push({id:z+"-"+p,start:z,end:p,arrowhead:"none",arrowTypeEnd:"",style:Lr,labelStyle:"",classes:wt,arrowheadStyle:Ar,labelpos:"c",labelType:"text",thickness:"normal",look:Ir})}else Ce(Te,y,Ee)}ce.doc&&(A.Rm.trace("Adding nodes children "),G(ce,ce.doc,ke,Te,er,!Xe,Ir,Ee))},"dataFetcher"),Be=(0,A.K2)(()=>{Et.clear(),ut=0},"reset"),ye=(0,A.K2)(()=>new Map,"newClassesList"),kr=(0,A.K2)(()=>({relations:[],states:new Map,documents:{}}),"newDoc"),ur=(0,A.K2)(me=>JSON.parse(JSON.stringify(me)),"clone"),Kt=(()=>{var me;return class{constructor(ke){this.version=ke,this.nodes=[],this.edges=[],this.rootDoc=[],this.classes=ye(),this.documents={root:kr()},this.currentDocument=this.documents.root,this.startEndCount=0,this.dividerCnt=0,this.links=new Map,this.getAccTitle=q.iN,this.setAccTitle=q.SV,this.getAccDescription=q.m7,this.setAccDescription=q.EI,this.setDiagramTitle=q.ke,this.getDiagramTitle=q.ab,this.clear(),this.setRootDoc=this.setRootDoc.bind(this),this.getDividerId=this.getDividerId.bind(this),this.setDirection=this.setDirection.bind(this),this.trimColon=this.trimColon.bind(this)}extract(ke){this.clear(!0);for(const Xe of Array.isArray(ke)?ke:ke.doc)switch(Xe.stmt){case j:this.addState(Xe.id.trim(),Xe.type,Xe.doc,Xe.description,Xe.note);break;case Fe:this.addRelation(Xe.state1,Xe.state2,Xe.description);break;case"classDef":this.addStyleClass(Xe.id.trim(),Xe.classes);break;case"style":this.handleStyleDef(Xe);break;case"applyClass":this.setCssClass(Xe.id.trim(),Xe.styleClass);break;case"click":this.addLink(Xe.id,Xe.url,Xe.tooltip)}const Te=this.getStates(),er=(0,q.D7)();Be(),fe(void 0,this.getRootDocV2(),Te,this.nodes,this.edges,!0,er.look,this.classes);for(const Xe of this.nodes)if(Array.isArray(Xe.label)){if(Xe.description=Xe.label.slice(1),Xe.isGroup&&Xe.description.length>0)throw new Error(`Group nodes can only have label. Remove the additional description for node [${Xe.id}]`);Xe.label=Xe.label[0]}}handleStyleDef(ke){const Te=ke.id.trim().split(","),er=ke.styleClass.split(",");for(const Xe of Te){let Ir=this.getState(Xe);if(!Ir){const Ee=Xe.trim();this.addState(Ee),Ir=this.getState(Ee)}Ir&&(Ir.styles=er.map(Ee=>Ee.replace(/;/g,"")?.trim()))}}setRootDoc(ke){A.Rm.info("Setting root doc",ke),this.rootDoc=ke,this.extract(1===this.version?ke:this.getRootDocV2())}docTranslator(ke,Te,er){if(Te.stmt===Fe)return this.docTranslator(ke,Te.state1,!0),void this.docTranslator(ke,Te.state2,!1);if(Te.stmt===j&&("[*]"===Te.id?(Te.id=ke.id+(er?"_start":"_end"),Te.start=er):Te.id=Te.id.trim()),Te.stmt!==fr&&Te.stmt!==j||!Te.doc)return;const Xe=[];let Ir=[];for(const Ee of Te.doc)if(Ee.type===Er){const qr=ur(Ee);qr.doc=ur(Ir),Xe.push(qr),Ir=[]}else Ir.push(Ee);if(Xe.length>0&&Ir.length>0){const Ee={stmt:j,id:(0,dt.$C)(),type:"divider",doc:ur(Ir)};Xe.push(ur(Ee)),Te.doc=Xe}Te.doc.forEach(Ee=>this.docTranslator(Te,Ee,!0))}getRootDocV2(){return this.docTranslator({id:fr,stmt:fr},{id:fr,stmt:fr,doc:this.rootDoc},!0),{id:fr,doc:this.rootDoc}}addState(ke,Te=mr,er=void 0,Xe=void 0,Ir=void 0,Ee=void 0,qr=void 0,nr=void 0){const te=ke?.trim();if(this.currentDocument.states.has(te)){const ne=this.currentDocument.states.get(te);if(!ne)throw new Error(`State not found: ${te}`);ne.doc||(ne.doc=er),ne.type||(ne.type=Te)}else A.Rm.info("Adding state ",te,Xe),this.currentDocument.states.set(te,{stmt:j,id:te,descriptions:[],type:Te,doc:er,note:Ir,classes:[],styles:[],textStyles:[]});if(Xe&&(A.Rm.info("Setting state description",te,Xe),(Array.isArray(Xe)?Xe:[Xe]).forEach(Le=>this.addDescription(te,Le.trim()))),Ir){const ne=this.currentDocument.states.get(te);if(!ne)throw new Error(`State not found: ${te}`);ne.note=Ir,ne.note.text=q.Y2.sanitizeText(ne.note.text,(0,q.D7)())}Ee&&(A.Rm.info("Setting state classes",te,Ee),(Array.isArray(Ee)?Ee:[Ee]).forEach(Le=>this.setCssClass(te,Le.trim()))),qr&&(A.Rm.info("Setting state styles",te,qr),(Array.isArray(qr)?qr:[qr]).forEach(Le=>this.setStyle(te,Le.trim()))),nr&&(A.Rm.info("Setting state styles",te,qr),(Array.isArray(nr)?nr:[nr]).forEach(Le=>this.setTextStyle(te,Le.trim())))}clear(ke){this.nodes=[],this.edges=[],this.documents={root:kr()},this.currentDocument=this.documents.root,this.startEndCount=0,this.classes=ye(),ke||(this.links=new Map,(0,q.IU)())}getState(ke){return this.currentDocument.states.get(ke)}getStates(){return this.currentDocument.states}logDocuments(){A.Rm.info("Documents = ",this.documents)}getRelations(){return this.currentDocument.relations}addLink(ke,Te,er){this.links.set(ke,{url:Te,tooltip:er}),A.Rm.warn("Adding link",ke,Te,er)}getLinks(){return this.links}startIdIfNeeded(ke=""){return"[*]"===ke?(this.startEndCount++,`start${this.startEndCount}`):ke}startTypeIfNeeded(ke="",Te=mr){return"[*]"===ke?"start":Te}endIdIfNeeded(ke=""){return"[*]"===ke?(this.startEndCount++,`end${this.startEndCount}`):ke}endTypeIfNeeded(ke="",Te=mr){return"[*]"===ke?"end":Te}addRelationObjs(ke,Te,er=""){const Xe=this.startIdIfNeeded(ke.id.trim()),Ir=this.startTypeIfNeeded(ke.id.trim(),ke.type),Ee=this.startIdIfNeeded(Te.id.trim()),qr=this.startTypeIfNeeded(Te.id.trim(),Te.type);this.addState(Xe,Ir,ke.doc,ke.description,ke.note,ke.classes,ke.styles,ke.textStyles),this.addState(Ee,qr,Te.doc,Te.description,Te.note,Te.classes,Te.styles,Te.textStyles),this.currentDocument.relations.push({id1:Xe,id2:Ee,relationTitle:q.Y2.sanitizeText(er,(0,q.D7)())})}addRelation(ke,Te,er){if("object"==typeof ke&&"object"==typeof Te)this.addRelationObjs(ke,Te,er);else if("string"==typeof ke&&"string"==typeof Te){const Xe=this.startIdIfNeeded(ke.trim()),Ir=this.startTypeIfNeeded(ke),Ee=this.endIdIfNeeded(Te.trim()),qr=this.endTypeIfNeeded(Te);this.addState(Xe,Ir),this.addState(Ee,qr),this.currentDocument.relations.push({id1:Xe,id2:Ee,relationTitle:er?q.Y2.sanitizeText(er,(0,q.D7)()):void 0})}}addDescription(ke,Te){const er=this.currentDocument.states.get(ke),Xe=Te.startsWith(":")?Te.replace(":","").trim():Te;er?.descriptions?.push(q.Y2.sanitizeText(Xe,(0,q.D7)()))}cleanupLabel(ke){return ke.startsWith(":")?ke.slice(2).trim():ke.trim()}getDividerId(){return this.dividerCnt++,`divider-id-${this.dividerCnt}`}addStyleClass(ke,Te=""){this.classes.has(ke)||this.classes.set(ke,{id:ke,styles:[],textStyles:[]});const er=this.classes.get(ke);Te&&er&&Te.split(",").forEach(Xe=>{const Ir=Xe.replace(/([^;]*);/,"$1").trim();if(RegExp("color").exec(Xe)){const qr=Ir.replace("fill","bgFill").replace("color","fill");er.textStyles.push(qr)}er.styles.push(Ir)})}getClasses(){return this.classes}setCssClass(ke,Te){ke.split(",").forEach(er=>{let Xe=this.getState(er);if(!Xe){const Ir=er.trim();this.addState(Ir),Xe=this.getState(Ir)}Xe?.classes?.push(Te)})}setStyle(ke,Te){this.getState(ke)?.styles?.push(Te)}setTextStyle(ke,Te){this.getState(ke)?.textStyles?.push(Te)}getDirectionStatement(){return this.rootDoc.find(ke=>"dir"===ke.stmt)}getDirection(){return this.getDirectionStatement()?.value??"TB"}setDirection(ke){const Te=this.getDirectionStatement();Te?Te.value=ke:this.rootDoc.unshift({stmt:"dir",value:ke})}trimColon(ke){return ke.startsWith(":")?ke.slice(1).trim():ke.trim()}getData(){const ke=(0,q.D7)();return{nodes:this.nodes,edges:this.edges,other:{},config:ke,direction:et(this.getRootDocV2())}}getConfig(){return(0,q.D7)().state}static#t=me=()=>((0,lt.A)(this,"StateDB"),(0,A.K2)(this,"StateDB"),this.relationType={AGGREGATION:0,EXTENSION:1,COMPOSITION:2,DEPENDENCY:3},this)},me()})(),ir=(0,A.K2)(me=>`\ndefs #statediagram-barbEnd {\n    fill: ${me.transitionColor};\n    stroke: ${me.transitionColor};\n  }\ng.stateGroup text {\n  fill: ${me.nodeBorder};\n  stroke: none;\n  font-size: 10px;\n}\ng.stateGroup text {\n  fill: ${me.textColor};\n  stroke: none;\n  font-size: 10px;\n\n}\ng.stateGroup .state-title {\n  font-weight: bolder;\n  fill: ${me.stateLabelColor};\n}\n\ng.stateGroup rect {\n  fill: ${me.mainBkg};\n  stroke: ${me.nodeBorder};\n}\n\ng.stateGroup line {\n  stroke: ${me.lineColor};\n  stroke-width: 1;\n}\n\n.transition {\n  stroke: ${me.transitionColor};\n  stroke-width: 1;\n  fill: none;\n}\n\n.stateGroup .composit {\n  fill: ${me.background};\n  border-bottom: 1px\n}\n\n.stateGroup .alt-composit {\n  fill: #e0e0e0;\n  border-bottom: 1px\n}\n\n.state-note {\n  stroke: ${me.noteBorderColor};\n  fill: ${me.noteBkgColor};\n\n  text {\n    fill: ${me.noteTextColor};\n    stroke: none;\n    font-size: 10px;\n  }\n}\n\n.stateLabel .box {\n  stroke: none;\n  stroke-width: 0;\n  fill: ${me.mainBkg};\n  opacity: 0.5;\n}\n\n.edgeLabel .label rect {\n  fill: ${me.labelBackgroundColor};\n  opacity: 0.5;\n}\n.edgeLabel {\n  background-color: ${me.edgeLabelBackground};\n  p {\n    background-color: ${me.edgeLabelBackground};\n  }\n  rect {\n    opacity: 0.5;\n    background-color: ${me.edgeLabelBackground};\n    fill: ${me.edgeLabelBackground};\n  }\n  text-align: center;\n}\n.edgeLabel .label text {\n  fill: ${me.transitionLabelColor||me.tertiaryTextColor};\n}\n.label div .edgeLabel {\n  color: ${me.transitionLabelColor||me.tertiaryTextColor};\n}\n\n.stateLabel text {\n  fill: ${me.stateLabelColor};\n  font-size: 10px;\n  font-weight: bold;\n}\n\n.node circle.state-start {\n  fill: ${me.specialStateColor};\n  stroke: ${me.specialStateColor};\n}\n\n.node .fork-join {\n  fill: ${me.specialStateColor};\n  stroke: ${me.specialStateColor};\n}\n\n.node circle.state-end {\n  fill: ${me.innerEndBackground};\n  stroke: ${me.background};\n  stroke-width: 1.5\n}\n.end-state-inner {\n  fill: ${me.compositeBackground||me.background};\n  // stroke: ${me.background};\n  stroke-width: 1.5\n}\n\n.node rect {\n  fill: ${me.stateBkg||me.mainBkg};\n  stroke: ${me.stateBorder||me.nodeBorder};\n  stroke-width: 1px;\n}\n.node polygon {\n  fill: ${me.mainBkg};\n  stroke: ${me.stateBorder||me.nodeBorder};;\n  stroke-width: 1px;\n}\n#statediagram-barbEnd {\n  fill: ${me.lineColor};\n}\n\n.statediagram-cluster rect {\n  fill: ${me.compositeTitleBackground};\n  stroke: ${me.stateBorder||me.nodeBorder};\n  stroke-width: 1px;\n}\n\n.cluster-label, .nodeLabel {\n  color: ${me.stateLabelColor};\n  // line-height: 1;\n}\n\n.statediagram-cluster rect.outer {\n  rx: 5px;\n  ry: 5px;\n}\n.statediagram-state .divider {\n  stroke: ${me.stateBorder||me.nodeBorder};\n}\n\n.statediagram-state .title-state {\n  rx: 5px;\n  ry: 5px;\n}\n.statediagram-cluster.statediagram-cluster .inner {\n  fill: ${me.compositeBackground||me.background};\n}\n.statediagram-cluster.statediagram-cluster-alt .inner {\n  fill: ${me.altBackground?me.altBackground:"#efefef"};\n}\n\n.statediagram-cluster .inner {\n  rx:0;\n  ry:0;\n}\n\n.statediagram-state rect.basic {\n  rx: 5px;\n  ry: 5px;\n}\n.statediagram-state rect.divider {\n  stroke-dasharray: 10,10;\n  fill: ${me.altBackground?me.altBackground:"#efefef"};\n}\n\n.note-edge {\n  stroke-dasharray: 5;\n}\n\n.statediagram-note rect {\n  fill: ${me.noteBkgColor};\n  stroke: ${me.noteBorderColor};\n  stroke-width: 1px;\n  rx: 0;\n  ry: 0;\n}\n.statediagram-note rect {\n  fill: ${me.noteBkgColor};\n  stroke: ${me.noteBorderColor};\n  stroke-width: 1px;\n  rx: 0;\n  ry: 0;\n}\n\n.statediagram-note text {\n  fill: ${me.noteTextColor};\n}\n\n.statediagram-note .nodeLabel {\n  color: ${me.noteTextColor};\n}\n.statediagram .edgeLabel {\n  color: red; // ${me.noteTextColor};\n}\n\n#dependencyStart, #dependencyEnd {\n  fill: ${me.lineColor};\n  stroke: ${me.lineColor};\n  stroke-width: 1;\n}\n\n.statediagramTitleText {\n  text-anchor: middle;\n  font-size: 18px;\n  fill: ${me.textColor};\n}\n`,"getStyles")},54256:(ti,_r,B)=>{"use strict";B.d(_r,{Lh:()=>Ge,NM:()=>mr,_$:()=>j,tM:()=>Lr});var Ye,bt,lt=B(89204),ee=B(45027),L=B(97787),D=B(5675),Rt=B(8086),dt=B(72271),q=B(52052),A=B(79006),$t=B(32303),yt=B(40622),Xt=function(){var W=(0,$t.K2)(function(g,y,E,P){for(E=E||{},P=g.length;P--;E[g[P]]=y);return E},"o"),ft=[1,18],Bt=[1,19],_e=[1,20],Z=[1,41],ae=[1,42],S=[1,26],re=[1,24],Pt=[1,25],qt=[1,32],V=[1,33],pt=[1,34],H=[1,45],Nt=[1,35],wt=[1,36],Wt=[1,37],xe=[1,38],le=[1,27],Re=[1,28],oe=[1,29],qe=[1,30],We=[1,31],Ct=[1,44],St=[1,46],R=[1,43],O=[1,47],et=[1,9],xt=[1,8,9],it=[1,58],rt=[1,59],Et=[1,60],ut=[1,61],It=[1,62],G=[1,63],st=[1,64],Ce=[1,8,9,41],Ot=[1,76],Jt=[1,8,9,12,13,22,39,41,44,68,69,70,71,72,73,74,79,81],fe=[1,8,9,12,13,18,20,22,39,41,44,50,60,68,69,70,71,72,73,74,79,81,86,100,102,103],Be=[13,60,86,100,102,103],Ze=[13,60,73,74,86,100,102,103],ye=[13,60,68,69,70,71,72,86,100,102,103],kr=[1,100],ur=[1,117],Kt=[1,113],Pe=[1,109],ir=[1,115],me=[1,110],ce=[1,111],ke=[1,112],Te=[1,114],er=[1,116],Xe=[22,48,60,61,82,86,87,88,89,90],Ir=[1,8,9,39,41,44],Ee=[1,8,9,22],qr=[1,145],nr=[1,8,9,61],te=[1,8,9,22,48,60,61,82,86,87,88,89,90],ne={trace:(0,$t.K2)(function(){},"trace"),yy:{},symbols_:{error:2,start:3,mermaidDoc:4,statements:5,graphConfig:6,CLASS_DIAGRAM:7,NEWLINE:8,EOF:9,statement:10,classLabel:11,SQS:12,STR:13,SQE:14,namespaceName:15,alphaNumToken:16,classLiteralName:17,DOT:18,className:19,GENERICTYPE:20,relationStatement:21,LABEL:22,namespaceStatement:23,classStatement:24,memberStatement:25,annotationStatement:26,clickStatement:27,styleStatement:28,cssClassStatement:29,noteStatement:30,classDefStatement:31,direction:32,acc_title:33,acc_title_value:34,acc_descr:35,acc_descr_value:36,acc_descr_multiline_value:37,namespaceIdentifier:38,STRUCT_START:39,classStatements:40,STRUCT_STOP:41,NAMESPACE:42,classIdentifier:43,STYLE_SEPARATOR:44,members:45,CLASS:46,emptyBody:47,SPACE:48,ANNOTATION_START:49,ANNOTATION_END:50,MEMBER:51,SEPARATOR:52,relation:53,NOTE_FOR:54,noteText:55,NOTE:56,CLASSDEF:57,classList:58,stylesOpt:59,ALPHA:60,COMMA:61,direction_tb:62,direction_bt:63,direction_rl:64,direction_lr:65,relationType:66,lineType:67,AGGREGATION:68,EXTENSION:69,COMPOSITION:70,DEPENDENCY:71,LOLLIPOP:72,LINE:73,DOTTED_LINE:74,CALLBACK:75,LINK:76,LINK_TARGET:77,CLICK:78,CALLBACK_NAME:79,CALLBACK_ARGS:80,HREF:81,STYLE:82,CSSCLASS:83,style:84,styleComponent:85,NUM:86,COLON:87,UNIT:88,BRKT:89,PCT:90,commentToken:91,textToken:92,graphCodeTokens:93,textNoTagsToken:94,TAGSTART:95,TAGEND:96,"==":97,"--":98,DEFAULT:99,MINUS:100,keywords:101,UNICODE_TEXT:102,BQUOTE_STR:103,$accept:0,$end:1},terminals_:{2:"error",7:"CLASS_DIAGRAM",8:"NEWLINE",9:"EOF",12:"SQS",13:"STR",14:"SQE",18:"DOT",20:"GENERICTYPE",22:"LABEL",33:"acc_title",34:"acc_title_value",35:"acc_descr",36:"acc_descr_value",37:"acc_descr_multiline_value",39:"STRUCT_START",41:"STRUCT_STOP",42:"NAMESPACE",44:"STYLE_SEPARATOR",46:"CLASS",48:"SPACE",49:"ANNOTATION_START",50:"ANNOTATION_END",51:"MEMBER",52:"SEPARATOR",54:"NOTE_FOR",56:"NOTE",57:"CLASSDEF",60:"ALPHA",61:"COMMA",62:"direction_tb",63:"direction_bt",64:"direction_rl",65:"direction_lr",68:"AGGREGATION",69:"EXTENSION",70:"COMPOSITION",71:"DEPENDENCY",72:"LOLLIPOP",73:"LINE",74:"DOTTED_LINE",75:"CALLBACK",76:"LINK",77:"LINK_TARGET",78:"CLICK",79:"CALLBACK_NAME",80:"CALLBACK_ARGS",81:"HREF",82:"STYLE",83:"CSSCLASS",86:"NUM",87:"COLON",88:"UNIT",89:"BRKT",90:"PCT",93:"graphCodeTokens",95:"TAGSTART",96:"TAGEND",97:"==",98:"--",99:"DEFAULT",100:"MINUS",101:"keywords",102:"UNICODE_TEXT",103:"BQUOTE_STR"},productions_:[0,[3,1],[3,1],[4,1],[6,4],[5,1],[5,2],[5,3],[11,3],[15,1],[15,1],[15,3],[15,2],[19,1],[19,3],[19,1],[19,2],[19,2],[19,2],[10,1],[10,2],[10,1],[10,1],[10,1],[10,1],[10,1],[10,1],[10,1],[10,1],[10,1],[10,1],[10,2],[10,2],[10,1],[23,4],[23,5],[38,2],[40,1],[40,2],[40,3],[24,1],[24,3],[24,4],[24,3],[24,6],[43,2],[43,3],[47,0],[47,2],[47,2],[26,4],[45,1],[45,2],[25,1],[25,2],[25,1],[25,1],[21,3],[21,4],[21,4],[21,5],[30,3],[30,2],[31,3],[58,1],[58,3],[32,1],[32,1],[32,1],[32,1],[53,3],[53,2],[53,2],[53,1],[66,1],[66,1],[66,1],[66,1],[66,1],[67,1],[67,1],[27,3],[27,4],[27,3],[27,4],[27,4],[27,5],[27,3],[27,4],[27,4],[27,5],[27,4],[27,5],[27,5],[27,6],[28,3],[29,3],[59,1],[59,3],[84,1],[84,2],[85,1],[85,1],[85,1],[85,1],[85,1],[85,1],[85,1],[85,1],[85,1],[91,1],[91,1],[92,1],[92,1],[92,1],[92,1],[92,1],[92,1],[92,1],[94,1],[94,1],[94,1],[94,1],[16,1],[16,1],[16,1],[16,1],[17,1],[55,1]],performAction:(0,$t.K2)(function(y,E,P,b,z,p,x){var C=p.length-1;switch(z){case 8:this.$=p[C-1];break;case 9:case 10:case 13:case 15:this.$=p[C];break;case 11:case 14:this.$=p[C-2]+"."+p[C];break;case 12:case 16:case 100:this.$=p[C-1]+p[C];break;case 17:case 18:this.$=p[C-1]+"~"+p[C]+"~";break;case 19:b.addRelation(p[C]);break;case 20:p[C-1].title=b.cleanupLabel(p[C]),b.addRelation(p[C-1]);break;case 31:this.$=p[C].trim(),b.setAccTitle(this.$);break;case 32:case 33:this.$=p[C].trim(),b.setAccDescription(this.$);break;case 34:b.addClassesToNamespace(p[C-3],p[C-1]);break;case 35:b.addClassesToNamespace(p[C-4],p[C-1]);break;case 36:this.$=p[C],b.addNamespace(p[C]);break;case 37:case 51:case 64:case 97:this.$=[p[C]];break;case 38:this.$=[p[C-1]];break;case 39:p[C].unshift(p[C-2]),this.$=p[C];break;case 41:b.setCssClass(p[C-2],p[C]);break;case 42:b.addMembers(p[C-3],p[C-1]);break;case 44:b.setCssClass(p[C-5],p[C-3]),b.addMembers(p[C-5],p[C-1]);break;case 45:this.$=p[C],b.addClass(p[C]);break;case 46:this.$=p[C-1],b.addClass(p[C-1]),b.setClassLabel(p[C-1],p[C]);break;case 50:b.addAnnotation(p[C],p[C-2]);break;case 52:p[C].push(p[C-1]),this.$=p[C];break;case 53:case 55:case 56:break;case 54:b.addMember(p[C-1],b.cleanupLabel(p[C]));break;case 57:this.$={id1:p[C-2],id2:p[C],relation:p[C-1],relationTitle1:"none",relationTitle2:"none"};break;case 58:this.$={id1:p[C-3],id2:p[C],relation:p[C-1],relationTitle1:p[C-2],relationTitle2:"none"};break;case 59:this.$={id1:p[C-3],id2:p[C],relation:p[C-2],relationTitle1:"none",relationTitle2:p[C-1]};break;case 60:this.$={id1:p[C-4],id2:p[C],relation:p[C-2],relationTitle1:p[C-3],relationTitle2:p[C-1]};break;case 61:b.addNote(p[C],p[C-1]);break;case 62:b.addNote(p[C]);break;case 63:this.$=p[C-2],b.defineClass(p[C-1],p[C]);break;case 65:this.$=p[C-2].concat([p[C]]);break;case 66:b.setDirection("TB");break;case 67:b.setDirection("BT");break;case 68:b.setDirection("RL");break;case 69:b.setDirection("LR");break;case 70:this.$={type1:p[C-2],type2:p[C],lineType:p[C-1]};break;case 71:this.$={type1:"none",type2:p[C],lineType:p[C-1]};break;case 72:this.$={type1:p[C-1],type2:"none",lineType:p[C]};break;case 73:this.$={type1:"none",type2:"none",lineType:p[C]};break;case 74:this.$=b.relationType.AGGREGATION;break;case 75:this.$=b.relationType.EXTENSION;break;case 76:this.$=b.relationType.COMPOSITION;break;case 77:this.$=b.relationType.DEPENDENCY;break;case 78:this.$=b.relationType.LOLLIPOP;break;case 79:this.$=b.lineType.LINE;break;case 80:this.$=b.lineType.DOTTED_LINE;break;case 81:case 87:this.$=p[C-2],b.setClickEvent(p[C-1],p[C]);break;case 82:case 88:this.$=p[C-3],b.setClickEvent(p[C-2],p[C-1]),b.setTooltip(p[C-2],p[C]);break;case 83:this.$=p[C-2],b.setLink(p[C-1],p[C]);break;case 84:this.$=p[C-3],b.setLink(p[C-2],p[C-1],p[C]);break;case 85:this.$=p[C-3],b.setLink(p[C-2],p[C-1]),b.setTooltip(p[C-2],p[C]);break;case 86:this.$=p[C-4],b.setLink(p[C-3],p[C-2],p[C]),b.setTooltip(p[C-3],p[C-1]);break;case 89:this.$=p[C-3],b.setClickEvent(p[C-2],p[C-1],p[C]);break;case 90:this.$=p[C-4],b.setClickEvent(p[C-3],p[C-2],p[C-1]),b.setTooltip(p[C-3],p[C]);break;case 91:this.$=p[C-3],b.setLink(p[C-2],p[C]);break;case 92:this.$=p[C-4],b.setLink(p[C-3],p[C-1],p[C]);break;case 93:this.$=p[C-4],b.setLink(p[C-3],p[C-1]),b.setTooltip(p[C-3],p[C]);break;case 94:this.$=p[C-5],b.setLink(p[C-4],p[C-2],p[C]),b.setTooltip(p[C-4],p[C-1]);break;case 95:this.$=p[C-2],b.setCssStyle(p[C-1],p[C]);break;case 96:b.setCssClass(p[C-1],p[C]);break;case 98:p[C-2].push(p[C]),this.$=p[C-2]}},"anonymous"),table:[{3:1,4:2,5:3,6:4,7:[1,6],10:5,16:39,17:40,19:21,21:7,23:8,24:9,25:10,26:11,27:12,28:13,29:14,30:15,31:16,32:17,33:ft,35:Bt,37:_e,38:22,42:Z,43:23,46:ae,49:S,51:re,52:Pt,54:qt,56:V,57:pt,60:H,62:Nt,63:wt,64:Wt,65:xe,75:le,76:Re,78:oe,82:qe,83:We,86:Ct,100:St,102:R,103:O},{1:[3]},{1:[2,1]},{1:[2,2]},{1:[2,3]},W(et,[2,5],{8:[1,48]}),{8:[1,49]},W(xt,[2,19],{22:[1,50]}),W(xt,[2,21]),W(xt,[2,22]),W(xt,[2,23]),W(xt,[2,24]),W(xt,[2,25]),W(xt,[2,26]),W(xt,[2,27]),W(xt,[2,28]),W(xt,[2,29]),W(xt,[2,30]),{34:[1,51]},{36:[1,52]},W(xt,[2,33]),W(xt,[2,53],{53:53,66:56,67:57,13:[1,54],22:[1,55],68:it,69:rt,70:Et,71:ut,72:It,73:G,74:st}),{39:[1,65]},W(Ce,[2,40],{39:[1,67],44:[1,66]}),W(xt,[2,55]),W(xt,[2,56]),{16:68,60:H,86:Ct,100:St,102:R},{16:39,17:40,19:69,60:H,86:Ct,100:St,102:R,103:O},{16:39,17:40,19:70,60:H,86:Ct,100:St,102:R,103:O},{16:39,17:40,19:71,60:H,86:Ct,100:St,102:R,103:O},{60:[1,72]},{13:[1,73]},{16:39,17:40,19:74,60:H,86:Ct,100:St,102:R,103:O},{13:Ot,55:75},{58:77,60:[1,78]},W(xt,[2,66]),W(xt,[2,67]),W(xt,[2,68]),W(xt,[2,69]),W(Jt,[2,13],{16:39,17:40,19:80,18:[1,79],20:[1,81],60:H,86:Ct,100:St,102:R,103:O}),W(Jt,[2,15],{20:[1,82]}),{15:83,16:84,17:85,60:H,86:Ct,100:St,102:R,103:O},{16:39,17:40,19:86,60:H,86:Ct,100:St,102:R,103:O},W(fe,[2,123]),W(fe,[2,124]),W(fe,[2,125]),W(fe,[2,126]),W([1,8,9,12,13,20,22,39,41,44,68,69,70,71,72,73,74,79,81],[2,127]),W(et,[2,6],{10:5,21:7,23:8,24:9,25:10,26:11,27:12,28:13,29:14,30:15,31:16,32:17,19:21,38:22,43:23,16:39,17:40,5:87,33:ft,35:Bt,37:_e,42:Z,46:ae,49:S,51:re,52:Pt,54:qt,56:V,57:pt,60:H,62:Nt,63:wt,64:Wt,65:xe,75:le,76:Re,78:oe,82:qe,83:We,86:Ct,100:St,102:R,103:O}),{5:88,10:5,16:39,17:40,19:21,21:7,23:8,24:9,25:10,26:11,27:12,28:13,29:14,30:15,31:16,32:17,33:ft,35:Bt,37:_e,38:22,42:Z,43:23,46:ae,49:S,51:re,52:Pt,54:qt,56:V,57:pt,60:H,62:Nt,63:wt,64:Wt,65:xe,75:le,76:Re,78:oe,82:qe,83:We,86:Ct,100:St,102:R,103:O},W(xt,[2,20]),W(xt,[2,31]),W(xt,[2,32]),{13:[1,90],16:39,17:40,19:89,60:H,86:Ct,100:St,102:R,103:O},{53:91,66:56,67:57,68:it,69:rt,70:Et,71:ut,72:It,73:G,74:st},W(xt,[2,54]),{67:92,73:G,74:st},W(Be,[2,73],{66:93,68:it,69:rt,70:Et,71:ut,72:It}),W(Ze,[2,74]),W(Ze,[2,75]),W(Ze,[2,76]),W(Ze,[2,77]),W(Ze,[2,78]),W(ye,[2,79]),W(ye,[2,80]),{8:[1,95],24:96,40:94,43:23,46:ae},{16:97,60:H,86:Ct,100:St,102:R},{41:[1,99],45:98,51:kr},{50:[1,101]},{13:[1,102]},{13:[1,103]},{79:[1,104],81:[1,105]},{22:ur,48:Kt,59:106,60:Pe,82:ir,84:107,85:108,86:me,87:ce,88:ke,89:Te,90:er},{60:[1,118]},{13:Ot,55:119},W(xt,[2,62]),W(xt,[2,128]),{22:ur,48:Kt,59:120,60:Pe,61:[1,121],82:ir,84:107,85:108,86:me,87:ce,88:ke,89:Te,90:er},W(Xe,[2,64]),{16:39,17:40,19:122,60:H,86:Ct,100:St,102:R,103:O},W(Jt,[2,16]),W(Jt,[2,17]),W(Jt,[2,18]),{39:[2,36]},{15:124,16:84,17:85,18:[1,123],39:[2,9],60:H,86:Ct,100:St,102:R,103:O},{39:[2,10]},W(Ir,[2,45],{11:125,12:[1,126]}),W(et,[2,7]),{9:[1,127]},W(Ee,[2,57]),{16:39,17:40,19:128,60:H,86:Ct,100:St,102:R,103:O},{13:[1,130],16:39,17:40,19:129,60:H,86:Ct,100:St,102:R,103:O},W(Be,[2,72],{66:131,68:it,69:rt,70:Et,71:ut,72:It}),W(Be,[2,71]),{41:[1,132]},{24:96,40:133,43:23,46:ae},{8:[1,134],41:[2,37]},W(Ce,[2,41],{39:[1,135]}),{41:[1,136]},W(Ce,[2,43]),{41:[2,51],45:137,51:kr},{16:39,17:40,19:138,60:H,86:Ct,100:St,102:R,103:O},W(xt,[2,81],{13:[1,139]}),W(xt,[2,83],{13:[1,141],77:[1,140]}),W(xt,[2,87],{13:[1,142],80:[1,143]}),{13:[1,144]},W(xt,[2,95],{61:qr}),W(nr,[2,97],{85:146,22:ur,48:Kt,60:Pe,82:ir,86:me,87:ce,88:ke,89:Te,90:er}),W(te,[2,99]),W(te,[2,101]),W(te,[2,102]),W(te,[2,103]),W(te,[2,104]),W(te,[2,105]),W(te,[2,106]),W(te,[2,107]),W(te,[2,108]),W(te,[2,109]),W(xt,[2,96]),W(xt,[2,61]),W(xt,[2,63],{61:qr}),{60:[1,147]},W(Jt,[2,14]),{15:148,16:84,17:85,60:H,86:Ct,100:St,102:R,103:O},{39:[2,12]},W(Ir,[2,46]),{13:[1,149]},{1:[2,4]},W(Ee,[2,59]),W(Ee,[2,58]),{16:39,17:40,19:150,60:H,86:Ct,100:St,102:R,103:O},W(Be,[2,70]),W(xt,[2,34]),{41:[1,151]},{24:96,40:152,41:[2,38],43:23,46:ae},{45:153,51:kr},W(Ce,[2,42]),{41:[2,52]},W(xt,[2,50]),W(xt,[2,82]),W(xt,[2,84]),W(xt,[2,85],{77:[1,154]}),W(xt,[2,88]),W(xt,[2,89],{13:[1,155]}),W(xt,[2,91],{13:[1,157],77:[1,156]}),{22:ur,48:Kt,60:Pe,82:ir,84:158,85:108,86:me,87:ce,88:ke,89:Te,90:er},W(te,[2,100]),W(Xe,[2,65]),{39:[2,11]},{14:[1,159]},W(Ee,[2,60]),W(xt,[2,35]),{41:[2,39]},{41:[1,160]},W(xt,[2,86]),W(xt,[2,90]),W(xt,[2,92]),W(xt,[2,93],{77:[1,161]}),W(nr,[2,98],{85:146,22:ur,48:Kt,60:Pe,82:ir,86:me,87:ce,88:ke,89:Te,90:er}),W(Ir,[2,8]),W(Ce,[2,44]),W(xt,[2,94])],defaultActions:{2:[2,1],3:[2,2],4:[2,3],83:[2,36],85:[2,10],124:[2,12],127:[2,4],137:[2,52],148:[2,11],152:[2,39]},parseError:(0,$t.K2)(function(y,E){if(!E.recoverable){var P=new Error(y);throw P.hash=E,P}this.trace(y)},"parseError"),parse:(0,$t.K2)(function(y){var E=this,P=[0],b=[],z=[null],p=[],x=this.table,C="",w=0,$=0,ct=0,Ht=p.slice.call(arguments,1),zt=Object.create(this.lexer),ue={yy:{}};for(var je in this.yy)Object.prototype.hasOwnProperty.call(this.yy,je)&&(ue.yy[je]=this.yy[je]);zt.setInput(y,ue.yy),ue.yy.lexer=zt,ue.yy.parser=this,typeof zt.yylloc>"u"&&(zt.yylloc={});var ze=zt.yylloc;p.push(ze);var Cr=zt.options&&zt.options.ranges;function sr(){var Rr;return"number"!=typeof(Rr=b.pop()||zt.lex()||1)&&(Rr instanceof Array&&(Rr=(b=Rr).pop()),Rr=E.symbols_[Rr]||Rr),Rr}this.parseError="function"==typeof ue.yy.parseError?ue.yy.parseError:Object.getPrototypeOf(this).parseError,(0,$t.K2)(function cr(Rr){P.length=P.length-2*Rr,z.length=z.length-Rr,p.length=p.length-Rr},"popStack"),(0,$t.K2)(sr,"lex");for(var $e,He,Pr,wr,xr,Zr,Oa,ra,Ba={};;){if(this.defaultActions[Pr=P[P.length-1]]?wr=this.defaultActions[Pr]:((null===$e||typeof $e>"u")&&($e=sr()),wr=x[Pr]&&x[Pr][$e]),typeof wr>"u"||!wr.length||!wr[0]){var Xr;for(Zr in ra=[],x[Pr])this.terminals_[Zr]&&Zr>2&&ra.push("'"+this.terminals_[Zr]+"'");Xr=zt.showPosition?"Parse error on line "+(w+1)+":\n"+zt.showPosition()+"\nExpecting "+ra.join(", ")+", got '"+(this.terminals_[$e]||$e)+"'":"Parse error on line "+(w+1)+": Unexpected "+(1==$e?"end of input":"'"+(this.terminals_[$e]||$e)+"'"),this.parseError(Xr,{text:zt.match,token:this.terminals_[$e]||$e,line:zt.yylineno,loc:ze,expected:ra})}if(wr[0]instanceof Array&&wr.length>1)throw new Error("Parse Error: multiple actions possible at state: "+Pr+", token: "+$e);switch(wr[0]){case 1:P.push($e),z.push(zt.yytext),p.push(zt.yylloc),P.push(wr[1]),$e=null,He?($e=He,He=null):($=zt.yyleng,C=zt.yytext,w=zt.yylineno,ze=zt.yylloc,ct>0&&ct--);break;case 2:if(Ba.$=z[z.length-(Oa=this.productions_[wr[1]][1])],Ba._$={first_line:p[p.length-(Oa||1)].first_line,last_line:p[p.length-1].last_line,first_column:p[p.length-(Oa||1)].first_column,last_column:p[p.length-1].last_column},Cr&&(Ba._$.range=[p[p.length-(Oa||1)].range[0],p[p.length-1].range[1]]),typeof(xr=this.performAction.apply(Ba,[C,$,w,ue.yy,wr[1],z,p].concat(Ht)))<"u")return xr;Oa&&(P=P.slice(0,-1*Oa*2),z=z.slice(0,-1*Oa),p=p.slice(0,-1*Oa)),P.push(this.productions_[wr[1]][0]),z.push(Ba.$),p.push(Ba._$),P.push(x[P[P.length-2]][P[P.length-1]]);break;case 3:return!0}}return!0},"parse")};function tr(){this.yy={}}return ne.lexer=function(){return{EOF:1,parseError:(0,$t.K2)(function(E,P){if(!this.yy.parser)throw new Error(E);this.yy.parser.parseError(E,P)},"parseError"),setInput:(0,$t.K2)(function(y,E){return this.yy=E||this.yy||{},this._input=y,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},"setInput"),input:(0,$t.K2)(function(){var y=this._input[0];return this.yytext+=y,this.yyleng++,this.offset++,this.match+=y,this.matched+=y,y.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),y},"input"),unput:(0,$t.K2)(function(y){var E=y.length,P=y.split(/(?:\r\n?|\n)/g);this._input=y+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-E),this.offset-=E;var b=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),P.length-1&&(this.yylineno-=P.length-1);var z=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:P?(P.length===b.length?this.yylloc.first_column:0)+b[b.length-P.length].length-P[0].length:this.yylloc.first_column-E},this.options.ranges&&(this.yylloc.range=[z[0],z[0]+this.yyleng-E]),this.yyleng=this.yytext.length,this},"unput"),more:(0,$t.K2)(function(){return this._more=!0,this},"more"),reject:(0,$t.K2)(function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},"reject"),less:(0,$t.K2)(function(y){this.unput(this.match.slice(y))},"less"),pastInput:(0,$t.K2)(function(){var y=this.matched.substr(0,this.matched.length-this.match.length);return(y.length>20?"...":"")+y.substr(-20).replace(/\n/g,"")},"pastInput"),upcomingInput:(0,$t.K2)(function(){var y=this.match;return y.length<20&&(y+=this._input.substr(0,20-y.length)),(y.substr(0,20)+(y.length>20?"...":"")).replace(/\n/g,"")},"upcomingInput"),showPosition:(0,$t.K2)(function(){var y=this.pastInput(),E=new Array(y.length+1).join("-");return y+this.upcomingInput()+"\n"+E+"^"},"showPosition"),test_match:(0,$t.K2)(function(y,E){var P,b,z;if(this.options.backtrack_lexer&&(z={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(z.yylloc.range=this.yylloc.range.slice(0))),(b=y[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=b.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:b?b[b.length-1].length-b[b.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+y[0].length},this.yytext+=y[0],this.match+=y[0],this.matches=y,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(y[0].length),this.matched+=y[0],P=this.performAction.call(this,this.yy,this,E,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),P)return P;if(this._backtrack){for(var p in z)this[p]=z[p];return!1}return!1},"test_match"),next:(0,$t.K2)(function(){if(this.done)return this.EOF;var y,E,P,b;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var z=this._currentRules(),p=0;p<z.length;p++)if((P=this._input.match(this.rules[z[p]]))&&(!E||P[0].length>E[0].length)){if(E=P,b=p,this.options.backtrack_lexer){if(!1!==(y=this.test_match(P,z[p])))return y;if(this._backtrack){E=!1;continue}return!1}if(!this.options.flex)break}return E?!1!==(y=this.test_match(E,z[b]))&&y:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},"next"),lex:(0,$t.K2)(function(){return this.next()||this.lex()},"lex"),begin:(0,$t.K2)(function(E){this.conditionStack.push(E)},"begin"),popState:(0,$t.K2)(function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},"popState"),_currentRules:(0,$t.K2)(function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},"_currentRules"),topState:(0,$t.K2)(function(E){return(E=this.conditionStack.length-1-Math.abs(E||0))>=0?this.conditionStack[E]:"INITIAL"},"topState"),pushState:(0,$t.K2)(function(E){this.begin(E)},"pushState"),stateStackSize:(0,$t.K2)(function(){return this.conditionStack.length},"stateStackSize"),options:{},performAction:(0,$t.K2)(function(E,P,b,z){switch(b){case 0:return 62;case 1:return 63;case 2:return 64;case 3:return 65;case 4:case 5:case 14:case 31:case 36:case 40:case 47:break;case 6:return this.begin("acc_title"),33;case 7:return this.popState(),"acc_title_value";case 8:return this.begin("acc_descr"),35;case 9:return this.popState(),"acc_descr_value";case 10:this.begin("acc_descr_multiline");break;case 11:case 19:case 22:case 24:case 58:case 61:this.popState();break;case 12:return"acc_descr_multiline_value";case 13:case 35:return 8;case 15:case 16:return 7;case 17:case 37:case 45:return"EDGE_STATE";case 18:this.begin("callback_name");break;case 20:this.popState(),this.begin("callback_args");break;case 21:return 79;case 23:return 80;case 25:return"STR";case 26:this.begin("string");break;case 27:return 82;case 28:return 57;case 29:return this.begin("namespace"),42;case 30:case 39:return this.popState(),8;case 32:return this.begin("namespace-body"),39;case 33:case 43:return this.popState(),41;case 34:case 44:return"EOF_IN_STRUCT";case 38:return this.begin("class"),46;case 41:return this.popState(),this.popState(),41;case 42:return this.begin("class-body"),39;case 46:return"OPEN_IN_STRUCT";case 48:return"MEMBER";case 49:return 83;case 50:return 75;case 51:return 76;case 52:return 78;case 53:return 54;case 54:return 56;case 55:return 49;case 56:return 50;case 57:return 81;case 59:return"GENERICTYPE";case 60:this.begin("generic");break;case 62:return"BQUOTE_STR";case 63:this.begin("bqstring");break;case 64:case 65:case 66:case 67:return 77;case 68:case 69:return 69;case 70:case 71:return 71;case 72:return 70;case 73:return 68;case 74:return 72;case 75:return 73;case 76:return 74;case 77:return 22;case 78:return 44;case 79:return 100;case 80:return 18;case 81:return"PLUS";case 82:return 87;case 83:return 61;case 84:case 85:return 89;case 86:return 90;case 87:case 88:return"EQUALS";case 89:return 60;case 90:return 12;case 91:return 14;case 92:return"PUNCTUATION";case 93:return 86;case 94:return 102;case 95:case 96:return 48;case 97:return 9}},"anonymous"),rules:[/^(?:.*direction\s+TB[^\n]*)/,/^(?:.*direction\s+BT[^\n]*)/,/^(?:.*direction\s+RL[^\n]*)/,/^(?:.*direction\s+LR[^\n]*)/,/^(?:%%(?!\{)*[^\n]*(\r?\n?)+)/,/^(?:%%[^\n]*(\r?\n)*)/,/^(?:accTitle\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*\{\s*)/,/^(?:[\}])/,/^(?:[^\}]*)/,/^(?:\s*(\r?\n)+)/,/^(?:\s+)/,/^(?:classDiagram-v2\b)/,/^(?:classDiagram\b)/,/^(?:\[\*\])/,/^(?:call[\s]+)/,/^(?:\([\s]*\))/,/^(?:\()/,/^(?:[^(]*)/,/^(?:\))/,/^(?:[^)]*)/,/^(?:["])/,/^(?:[^"]*)/,/^(?:["])/,/^(?:style\b)/,/^(?:classDef\b)/,/^(?:namespace\b)/,/^(?:\s*(\r?\n)+)/,/^(?:\s+)/,/^(?:[{])/,/^(?:[}])/,/^(?:$)/,/^(?:\s*(\r?\n)+)/,/^(?:\s+)/,/^(?:\[\*\])/,/^(?:class\b)/,/^(?:\s*(\r?\n)+)/,/^(?:\s+)/,/^(?:[}])/,/^(?:[{])/,/^(?:[}])/,/^(?:$)/,/^(?:\[\*\])/,/^(?:[{])/,/^(?:[\n])/,/^(?:[^{}\n]*)/,/^(?:cssClass\b)/,/^(?:callback\b)/,/^(?:link\b)/,/^(?:click\b)/,/^(?:note for\b)/,/^(?:note\b)/,/^(?:<<)/,/^(?:>>)/,/^(?:href\b)/,/^(?:[~])/,/^(?:[^~]*)/,/^(?:~)/,/^(?:[`])/,/^(?:[^`]+)/,/^(?:[`])/,/^(?:_self\b)/,/^(?:_blank\b)/,/^(?:_parent\b)/,/^(?:_top\b)/,/^(?:\s*<\|)/,/^(?:\s*\|>)/,/^(?:\s*>)/,/^(?:\s*<)/,/^(?:\s*\*)/,/^(?:\s*o\b)/,/^(?:\s*\(\))/,/^(?:--)/,/^(?:\.\.)/,/^(?::{1}[^:\n;]+)/,/^(?::{3})/,/^(?:-)/,/^(?:\.)/,/^(?:\+)/,/^(?::)/,/^(?:,)/,/^(?:#)/,/^(?:#)/,/^(?:%)/,/^(?:=)/,/^(?:=)/,/^(?:\w+)/,/^(?:\[)/,/^(?:\])/,/^(?:[!"#$%&'*+,-.`?\\/])/,/^(?:[0-9]+)/,/^(?:[\u00AA\u00B5\u00BA\u00C0-\u00D6\u00D8-\u00F6]|[\u00F8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377]|[\u037A-\u037D\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5]|[\u03F7-\u0481\u048A-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA]|[\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE]|[\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA]|[\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0]|[\u08A2-\u08AC\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0977]|[\u0979-\u097F\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2]|[\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A]|[\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39]|[\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8]|[\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C]|[\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C]|[\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99]|[\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0]|[\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D]|[\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3]|[\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10]|[\u0D12-\u0D3A\u0D3D\u0D4E\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1]|[\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81]|[\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3]|[\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6]|[\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A]|[\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081]|[\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D]|[\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0]|[\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310]|[\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C]|[\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u1700-\u170C\u170E-\u1711]|[\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7]|[\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191C]|[\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16]|[\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF]|[\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC]|[\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D]|[\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D]|[\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3]|[\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F]|[\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128]|[\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184]|[\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3]|[\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6]|[\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE]|[\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C]|[\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D]|[\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC]|[\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B]|[\uA640-\uA66E\uA67F-\uA697\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788]|[\uA78B-\uA78E\uA790-\uA793\uA7A0-\uA7AA\uA7F8-\uA801\uA803-\uA805]|[\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB]|[\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uAA00-\uAA28]|[\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA80-\uAAAF\uAAB1\uAAB5]|[\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4]|[\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E]|[\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D]|[\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36]|[\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D]|[\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC]|[\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF]|[\uFFD2-\uFFD7\uFFDA-\uFFDC])/,/^(?:\s)/,/^(?:\s)/,/^(?:$)/],conditions:{"namespace-body":{rules:[26,33,34,35,36,37,38,49,50,51,52,53,54,55,56,57,60,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,86,87,88,89,90,91,92,93,94,95,97],inclusive:!1},namespace:{rules:[26,29,30,31,32,49,50,51,52,53,54,55,56,57,60,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,86,87,88,89,90,91,92,93,94,95,97],inclusive:!1},"class-body":{rules:[26,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,60,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,86,87,88,89,90,91,92,93,94,95,97],inclusive:!1},class:{rules:[26,39,40,41,42,49,50,51,52,53,54,55,56,57,60,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,86,87,88,89,90,91,92,93,94,95,97],inclusive:!1},acc_descr_multiline:{rules:[11,12,26,49,50,51,52,53,54,55,56,57,60,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,86,87,88,89,90,91,92,93,94,95,97],inclusive:!1},acc_descr:{rules:[9,26,49,50,51,52,53,54,55,56,57,60,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,86,87,88,89,90,91,92,93,94,95,97],inclusive:!1},acc_title:{rules:[7,26,49,50,51,52,53,54,55,56,57,60,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,86,87,88,89,90,91,92,93,94,95,97],inclusive:!1},callback_args:{rules:[22,23,26,49,50,51,52,53,54,55,56,57,60,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,86,87,88,89,90,91,92,93,94,95,97],inclusive:!1},callback_name:{rules:[19,20,21,26,49,50,51,52,53,54,55,56,57,60,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,86,87,88,89,90,91,92,93,94,95,97],inclusive:!1},href:{rules:[26,49,50,51,52,53,54,55,56,57,60,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,86,87,88,89,90,91,92,93,94,95,97],inclusive:!1},struct:{rules:[26,49,50,51,52,53,54,55,56,57,60,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,86,87,88,89,90,91,92,93,94,95,97],inclusive:!1},generic:{rules:[26,49,50,51,52,53,54,55,56,57,58,59,60,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,86,87,88,89,90,91,92,93,94,95,97],inclusive:!1},bqstring:{rules:[26,49,50,51,52,53,54,55,56,57,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,86,87,88,89,90,91,92,93,94,95,97],inclusive:!1},string:{rules:[24,25,26,49,50,51,52,53,54,55,56,57,60,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,86,87,88,89,90,91,92,93,94,95,97],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,5,6,8,10,13,14,15,16,17,18,26,27,28,29,38,49,50,51,52,53,54,55,56,57,60,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97],inclusive:!0}}}}(),(0,$t.K2)(tr,"Parser"),tr.prototype=ne,ne.Parser=tr,new tr}();Xt.parser=Xt;var j=Xt,fr=["#","+","~","-",""],Fe=(class{constructor(W,ft){this.memberType=ft,this.visibility="",this.classifier="",this.text="";const Bt=(0,A.jZ)(W,(0,A.D7)());this.parseMember(Bt)}getDisplayDetails(){let W=this.visibility+(0,A.QO)(this.id);return"method"===this.memberType&&(W+=`(${(0,A.QO)(this.parameters.trim())})`,this.returnType&&(W+=" : "+(0,A.QO)(this.returnType))),W=W.trim(),{displayText:W,cssStyle:this.parseClassifier()}}parseMember(W){let ft="";if("method"===this.memberType){const Z=/([#+~-])?(.+)\((.*)\)([\s$*])?(.*)([$*])?/.exec(W);if(Z){const ae=Z[1]?Z[1].trim():"";if(fr.includes(ae)&&(this.visibility=ae),this.id=Z[2],this.parameters=Z[3]?Z[3].trim():"",ft=Z[4]?Z[4].trim():"",this.returnType=Z[5]?Z[5].trim():"",""===ft){const S=this.returnType.substring(this.returnType.length-1);/[$*]/.exec(S)&&(ft=S,this.returnType=this.returnType.substring(0,this.returnType.length-1))}}}else{const _e=W.length,Z=W.substring(0,1),ae=W.substring(_e-1);fr.includes(Z)&&(this.visibility=Z),/[$*]/.exec(ae)&&(ft=ae),this.id=W.substring(""===this.visibility?0:1,""===ft?_e:_e-1)}this.classifier=ft,this.id=this.id.startsWith(" ")?" "+this.id.trim():this.id.trim();const Bt=`${this.visibility?"\\"+this.visibility:""}${(0,A.QO)(this.id)}${"method"===this.memberType?`(${(0,A.QO)(this.parameters)})${this.returnType?" : "+(0,A.QO)(this.returnType):""}`:""}`;this.text=Bt.replaceAll("<","&lt;").replaceAll(">","&gt;"),this.text.startsWith("\\&lt;")&&(this.text=this.text.replace("\\&lt;","~"))}parseClassifier(){switch(this.classifier){case"*":return"font-style:italic;";case"$":return"text-decoration:underline;";default:return""}}static#t=Ye=()=>((0,ee.A)(this,"ClassMember"),(0,$t.K2)(this,"ClassMember"),this)},Ye()),vr="classId-",zr=0,br=(0,$t.K2)(W=>A.Y2.sanitizeText(W,(0,A.D7)()),"sanitizeText"),mr=(class{constructor(){this.relations=[],this.classes=new Map,this.styleClasses=new Map,this.notes=[],this.interfaces=[],this.namespaces=new Map,this.namespaceCounter=0,this.functions=[],this.lineType={LINE:0,DOTTED_LINE:1},this.relationType={AGGREGATION:0,EXTENSION:1,COMPOSITION:2,DEPENDENCY:3,LOLLIPOP:4},this.setupToolTips=(0,$t.K2)(W=>{let ft=(0,yt.Ltv)(".mermaidTooltip");null===(ft._groups||ft)[0][0]&&(ft=(0,yt.Ltv)("body").append("div").attr("class","mermaidTooltip").style("opacity",0)),(0,yt.Ltv)(W).select("svg").selectAll("g.node").on("mouseover",Z=>{const ae=(0,yt.Ltv)(Z.currentTarget);if(null===ae.attr("title"))return;const re=this.getBoundingClientRect();ft.transition().duration(200).style("opacity",".9"),ft.text(ae.attr("title")).style("left",window.scrollX+re.left+(re.right-re.left)/2+"px").style("top",window.scrollY+re.top-14+document.body.scrollTop+"px"),ft.html(ft.html().replace(/&lt;br\/&gt;/g,"<br/>")),ae.classed("hover",!0)}).on("mouseout",Z=>{ft.transition().duration(500).style("opacity",0),(0,yt.Ltv)(Z.currentTarget).classed("hover",!1)})},"setupToolTips"),this.direction="TB",this.setAccTitle=A.SV,this.getAccTitle=A.iN,this.setAccDescription=A.EI,this.getAccDescription=A.m7,this.setDiagramTitle=A.ke,this.getDiagramTitle=A.ab,this.getConfig=(0,$t.K2)(()=>(0,A.D7)().class,"getConfig"),this.functions.push(this.setupToolTips.bind(this)),this.clear(),this.addRelation=this.addRelation.bind(this),this.addClassesToNamespace=this.addClassesToNamespace.bind(this),this.addNamespace=this.addNamespace.bind(this),this.setCssClass=this.setCssClass.bind(this),this.addMembers=this.addMembers.bind(this),this.addClass=this.addClass.bind(this),this.setClassLabel=this.setClassLabel.bind(this),this.addAnnotation=this.addAnnotation.bind(this),this.addMember=this.addMember.bind(this),this.cleanupLabel=this.cleanupLabel.bind(this),this.addNote=this.addNote.bind(this),this.defineClass=this.defineClass.bind(this),this.setDirection=this.setDirection.bind(this),this.setLink=this.setLink.bind(this),this.bindFunctions=this.bindFunctions.bind(this),this.clear=this.clear.bind(this),this.setTooltip=this.setTooltip.bind(this),this.setClickEvent=this.setClickEvent.bind(this),this.setCssStyle=this.setCssStyle.bind(this)}splitClassNameAndType(W){const ft=A.Y2.sanitizeText(W,(0,A.D7)());let Bt="",_e=ft;if(ft.indexOf("~")>0){const Z=ft.split("~");_e=br(Z[0]),Bt=br(Z[1])}return{className:_e,type:Bt}}setClassLabel(W,ft){const Bt=A.Y2.sanitizeText(W,(0,A.D7)());ft&&(ft=br(ft));const{className:_e}=this.splitClassNameAndType(Bt);this.classes.get(_e).label=ft,this.classes.get(_e).text=`${ft}${this.classes.get(_e).type?`<${this.classes.get(_e).type}>`:""}`}addClass(W){const ft=A.Y2.sanitizeText(W,(0,A.D7)()),{className:Bt,type:_e}=this.splitClassNameAndType(ft);if(this.classes.has(Bt))return;const Z=A.Y2.sanitizeText(Bt,(0,A.D7)());this.classes.set(Z,{id:Z,type:_e,label:Z,text:`${Z}${_e?`&lt;${_e}&gt;`:""}`,shape:"classBox",cssClasses:"default",methods:[],members:[],annotations:[],styles:[],domId:vr+Z+"-"+zr}),zr++}addInterface(W,ft){this.interfaces.push({id:`interface${this.interfaces.length}`,label:W,classId:ft})}lookUpDomId(W){const ft=A.Y2.sanitizeText(W,(0,A.D7)());if(this.classes.has(ft))return this.classes.get(ft).domId;throw new Error("Class not found: "+ft)}clear(){this.relations=[],this.classes=new Map,this.notes=[],this.interfaces=[],this.functions=[],this.functions.push(this.setupToolTips.bind(this)),this.namespaces=new Map,this.namespaceCounter=0,this.direction="TB",(0,A.IU)()}getClass(W){return this.classes.get(W)}getClasses(){return this.classes}getRelations(){return this.relations}getNotes(){return this.notes}addRelation(W){$t.Rm.debug("Adding relation: "+JSON.stringify(W));const ft=[this.relationType.LOLLIPOP,this.relationType.AGGREGATION,this.relationType.COMPOSITION,this.relationType.DEPENDENCY,this.relationType.EXTENSION];W.relation.type1!==this.relationType.LOLLIPOP||ft.includes(W.relation.type2)?W.relation.type2!==this.relationType.LOLLIPOP||ft.includes(W.relation.type1)?(this.addClass(W.id1),this.addClass(W.id2)):(this.addClass(W.id1),this.addInterface(W.id2,W.id1),W.id2="interface"+(this.interfaces.length-1)):(this.addClass(W.id2),this.addInterface(W.id1,W.id2),W.id1="interface"+(this.interfaces.length-1)),W.id1=this.splitClassNameAndType(W.id1).className,W.id2=this.splitClassNameAndType(W.id2).className,W.relationTitle1=A.Y2.sanitizeText(W.relationTitle1.trim(),(0,A.D7)()),W.relationTitle2=A.Y2.sanitizeText(W.relationTitle2.trim(),(0,A.D7)()),this.relations.push(W)}addAnnotation(W,ft){const Bt=this.splitClassNameAndType(W).className;this.classes.get(Bt).annotations.push(ft)}addMember(W,ft){this.addClass(W);const Bt=this.splitClassNameAndType(W).className,_e=this.classes.get(Bt);if("string"==typeof ft){const Z=ft.trim();Z.startsWith("<<")&&Z.endsWith(">>")?_e.annotations.push(br(Z.substring(2,Z.length-2))):Z.indexOf(")")>0?_e.methods.push(new Fe(Z,"method")):Z&&_e.members.push(new Fe(Z,"attribute"))}}addMembers(W,ft){Array.isArray(ft)&&(ft.reverse(),ft.forEach(Bt=>this.addMember(W,Bt)))}addNote(W,ft){this.notes.push({id:`note${this.notes.length}`,class:ft,text:W})}cleanupLabel(W){return W.startsWith(":")&&(W=W.substring(1)),br(W.trim())}setCssClass(W,ft){W.split(",").forEach(Bt=>{let _e=Bt;/\d/.exec(Bt[0])&&(_e=vr+_e);const Z=this.classes.get(_e);Z&&(Z.cssClasses+=" "+ft)})}defineClass(W,ft){for(const Bt of W){let _e=this.styleClasses.get(Bt);void 0===_e&&(_e={id:Bt,styles:[],textStyles:[]},this.styleClasses.set(Bt,_e)),ft&&ft.forEach(Z=>{if(/color/.exec(Z)){const ae=Z.replace("fill","bgFill");_e.textStyles.push(ae)}_e.styles.push(Z)}),this.classes.forEach(Z=>{Z.cssClasses.includes(Bt)&&Z.styles.push(...ft.flatMap(ae=>ae.split(",")))})}}setTooltip(W,ft){W.split(",").forEach(Bt=>{void 0!==ft&&(this.classes.get(Bt).tooltip=br(ft))})}getTooltip(W,ft){return ft&&this.namespaces.has(ft)?this.namespaces.get(ft).classes.get(W).tooltip:this.classes.get(W).tooltip}setLink(W,ft,Bt){const _e=(0,A.D7)();W.split(",").forEach(Z=>{let ae=Z;/\d/.exec(Z[0])&&(ae=vr+ae);const S=this.classes.get(ae);S&&(S.link=q._K.formatUrl(ft,_e),S.linkTarget="sandbox"===_e.securityLevel?"_top":"string"==typeof Bt?br(Bt):"_blank")}),this.setCssClass(W,"clickable")}setClickEvent(W,ft,Bt){W.split(",").forEach(_e=>{this.setClickFunc(_e,ft,Bt),this.classes.get(_e).haveCallback=!0}),this.setCssClass(W,"clickable")}setClickFunc(W,ft,Bt){const _e=A.Y2.sanitizeText(W,(0,A.D7)());if("loose"!==(0,A.D7)().securityLevel||void 0===ft)return;const ae=_e;if(this.classes.has(ae)){const S=this.lookUpDomId(ae);let re=[];if("string"==typeof Bt){re=Bt.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/);for(let Pt=0;Pt<re.length;Pt++){let qt=re[Pt].trim();qt.startsWith('"')&&qt.endsWith('"')&&(qt=qt.substr(1,qt.length-2)),re[Pt]=qt}}0===re.length&&re.push(S),this.functions.push(()=>{const Pt=document.querySelector(`[id="${S}"]`);null!==Pt&&Pt.addEventListener("click",()=>{q._K.runFunc(ft,...re)},!1)})}}bindFunctions(W){this.functions.forEach(ft=>{ft(W)})}getDirection(){return this.direction}setDirection(W){this.direction=W}addNamespace(W){this.namespaces.has(W)||(this.namespaces.set(W,{id:W,classes:new Map,children:{},domId:vr+W+"-"+this.namespaceCounter}),this.namespaceCounter++)}getNamespace(W){return this.namespaces.get(W)}getNamespaces(){return this.namespaces}addClassesToNamespace(W,ft){if(this.namespaces.has(W))for(const Bt of ft){const{className:_e}=this.splitClassNameAndType(Bt);this.classes.get(_e).parent=W,this.namespaces.get(W).classes.set(_e,this.classes.get(_e))}}setCssStyle(W,ft){const Bt=this.classes.get(W);if(ft&&Bt)for(const _e of ft)_e.includes(",")?Bt.styles.push(..._e.split(",")):Bt.styles.push(_e)}getArrowMarker(W){let ft;switch(W){case 0:ft="aggregation";break;case 1:ft="extension";break;case 2:ft="composition";break;case 3:ft="dependency";break;case 4:ft="lollipop";break;default:ft="none"}return ft}getData(){const W=[],ft=[],Bt=(0,A.D7)();for(const Z of this.namespaces.keys()){const ae=this.namespaces.get(Z);ae&&W.push({id:ae.id,label:ae.id,isGroup:!0,padding:Bt.class.padding??16,shape:"rect",cssStyles:["fill: none","stroke: black"],look:Bt.look})}for(const Z of this.classes.keys()){const ae=this.classes.get(Z);if(ae){const S=ae;S.parentId=ae.parent,S.look=Bt.look,W.push(S)}}let _e=0;for(const Z of this.notes){_e++,W.push({id:Z.id,label:Z.text,isGroup:!1,shape:"note",padding:Bt.class.padding??6,cssStyles:["text-align: left","white-space: nowrap",`fill: ${Bt.themeVariables.noteBkgColor}`,`stroke: ${Bt.themeVariables.noteBorderColor}`],look:Bt.look});const S=this.classes.get(Z.class)?.id??"";S&&ft.push({id:`edgeNote${_e}`,start:Z.id,end:S,type:"normal",thickness:"normal",classes:"relation",arrowTypeStart:"none",arrowTypeEnd:"none",arrowheadStyle:"",labelStyle:[""],style:["fill: none"],pattern:"dotted",look:Bt.look})}for(const Z of this.interfaces)W.push({id:Z.id,label:Z.label,isGroup:!1,shape:"rect",cssStyles:["opacity: 0;"],look:Bt.look});_e=0;for(const Z of this.relations){_e++;const ae={id:(0,q.rY)(Z.id1,Z.id2,{prefix:"id",counter:_e}),start:Z.id1,end:Z.id2,type:"normal",label:Z.title,labelpos:"c",thickness:"normal",classes:"relation",arrowTypeStart:this.getArrowMarker(Z.relation.type1),arrowTypeEnd:this.getArrowMarker(Z.relation.type2),startLabelRight:"none"===Z.relationTitle1?"":Z.relationTitle1,endLabelLeft:"none"===Z.relationTitle2?"":Z.relationTitle2,arrowheadStyle:"",labelStyle:["display: inline-block"],style:Z.style||"",pattern:1==Z.relation.lineType?"dashed":"solid",look:Bt.look};ft.push(ae)}return{nodes:W,edges:ft,other:{},config:Bt,direction:this.getDirection()}}static#t=bt=()=>((0,ee.A)(this,"ClassDB"),(0,$t.K2)(this,"ClassDB"),this)},bt()),Lr=(0,$t.K2)(W=>`g.classGroup text {\n  fill: ${W.nodeBorder||W.classText};\n  stroke: none;\n  font-family: ${W.fontFamily};\n  font-size: 10px;\n\n  .title {\n    font-weight: bolder;\n  }\n\n}\n\n.nodeLabel, .edgeLabel {\n  color: ${W.classText};\n}\n.edgeLabel .label rect {\n  fill: ${W.mainBkg};\n}\n.label text {\n  fill: ${W.classText};\n}\n\n.labelBkg {\n  background: ${W.mainBkg};\n}\n.edgeLabel .label span {\n  background: ${W.mainBkg};\n}\n\n.classTitle {\n  font-weight: bolder;\n}\n.node rect,\n  .node circle,\n  .node ellipse,\n  .node polygon,\n  .node path {\n    fill: ${W.mainBkg};\n    stroke: ${W.nodeBorder};\n    stroke-width: 1px;\n  }\n\n\n.divider {\n  stroke: ${W.nodeBorder};\n  stroke-width: 1;\n}\n\ng.clickable {\n  cursor: pointer;\n}\n\ng.classGroup rect {\n  fill: ${W.mainBkg};\n  stroke: ${W.nodeBorder};\n}\n\ng.classGroup line {\n  stroke: ${W.nodeBorder};\n  stroke-width: 1;\n}\n\n.classLabel .box {\n  stroke: none;\n  stroke-width: 0;\n  fill: ${W.mainBkg};\n  opacity: 0.5;\n}\n\n.classLabel .label {\n  fill: ${W.nodeBorder};\n  font-size: 10px;\n}\n\n.relation {\n  stroke: ${W.lineColor};\n  stroke-width: 1;\n  fill: none;\n}\n\n.dashed-line{\n  stroke-dasharray: 3;\n}\n\n.dotted-line{\n  stroke-dasharray: 1 2;\n}\n\n#compositionStart, .composition {\n  fill: ${W.lineColor} !important;\n  stroke: ${W.lineColor} !important;\n  stroke-width: 1;\n}\n\n#compositionEnd, .composition {\n  fill: ${W.lineColor} !important;\n  stroke: ${W.lineColor} !important;\n  stroke-width: 1;\n}\n\n#dependencyStart, .dependency {\n  fill: ${W.lineColor} !important;\n  stroke: ${W.lineColor} !important;\n  stroke-width: 1;\n}\n\n#dependencyStart, .dependency {\n  fill: ${W.lineColor} !important;\n  stroke: ${W.lineColor} !important;\n  stroke-width: 1;\n}\n\n#extensionStart, .extension {\n  fill: transparent !important;\n  stroke: ${W.lineColor} !important;\n  stroke-width: 1;\n}\n\n#extensionEnd, .extension {\n  fill: transparent !important;\n  stroke: ${W.lineColor} !important;\n  stroke-width: 1;\n}\n\n#aggregationStart, .aggregation {\n  fill: transparent !important;\n  stroke: ${W.lineColor} !important;\n  stroke-width: 1;\n}\n\n#aggregationEnd, .aggregation {\n  fill: transparent !important;\n  stroke: ${W.lineColor} !important;\n  stroke-width: 1;\n}\n\n#lollipopStart, .lollipop {\n  fill: ${W.mainBkg} !important;\n  stroke: ${W.lineColor} !important;\n  stroke-width: 1;\n}\n\n#lollipopEnd, .lollipop {\n  fill: ${W.mainBkg} !important;\n  stroke: ${W.lineColor} !important;\n  stroke-width: 1;\n}\n\n.edgeTerminals {\n  font-size: 11px;\n  line-height: initial;\n}\n\n.classTitleText {\n  text-anchor: middle;\n  font-size: 18px;\n  fill: ${W.textColor};\n}\n  ${(0,L.o)()}\n`,"getStyles"),Ar=(0,$t.K2)((W,ft="TB")=>{if(!W.doc)return ft;let Bt=ft;for(const _e of W.doc)"dir"===_e.stmt&&(Bt=_e.value);return Bt},"getDir"),Ge={getClasses:(0,$t.K2)(function(W,ft){return ft.db.getClasses()},"getClasses"),draw:(0,$t.K2)(function(){var W=(0,lt.A)(function*(ft,Bt,_e,Z){$t.Rm.info("REF0:"),$t.Rm.info("Drawing class diagram (v3)",Bt);const{securityLevel:ae,state:S,layout:re}=(0,A.D7)(),Pt=Z.db.getData(),qt=(0,D.A)(Bt,ae);Pt.type=Z.type,Pt.layoutAlgorithm=(0,dt.q7)(re),Pt.nodeSpacing=S?.nodeSpacing||50,Pt.rankSpacing=S?.rankSpacing||50,Pt.markers=["aggregation","extension","composition","dependency","lollipop"],Pt.diagramId=Bt,yield(0,dt.XX)(Pt,qt),q._K.insertTitle(qt,"classDiagramTitleText",S?.titleTopMargin??25,Z.db.getDiagramTitle()),(0,Rt.P)(qt,8,"classDiagram",S?.useMaxWidth??!0)});return function(ft,Bt,_e,Z){return W.apply(this,arguments)}}(),"draw"),getDir:Ar}},55041:(ti,_r,B)=>{"use strict";B.r(_r),B.d(_r,{diagram:()=>fr});var lt=B(54256),j=(B(97787),B(5675),B(8086),B(72271),B(98954),B(36384),B(87452),B(32239),B(19753),B(59355),B(52052),B(79006),B(32303)),fr={parser:lt._$,get db(){return new lt.NM},renderer:lt.Lh,styles:lt.tM,init:(0,j.K2)(Fe=>{Fe.class||(Fe.class={}),Fe.class.arrowMarkerAbsolute=Fe.arrowMarkerAbsolute},"init")}},55559:(ti,_r,B)=>{"use strict";B.r(_r),B.d(_r,{diagram:()=>W});var bt,lt=B(89204),ee=B(45027),L=B(69664),D=B(8086),Rt=B(19753),dt=B(80525),q=B(52052),A=B(79006),$t=B(32303),yt=B(62233),Ye=B(40622),Xt=(class{constructor(){this.nodes=[],this.levels=new Map,this.outerNodes=[],this.classes=new Map,this.setAccTitle=A.SV,this.getAccTitle=A.iN,this.setDiagramTitle=A.ke,this.getDiagramTitle=A.ab,this.getAccDescription=A.m7,this.setAccDescription=A.EI}getNodes(){return this.nodes}getConfig(){const ft=A.UI,Bt=(0,A.zj)();return(0,q.$t)({...ft.treemap,...Bt.treemap??{}})}addNode(ft,Bt){this.nodes.push(ft),this.levels.set(ft,Bt),0===Bt&&(this.outerNodes.push(ft),this.root??=ft)}getRoot(){return{name:"",children:this.outerNodes}}addClass(ft,Bt){const _e=this.classes.get(ft)??{id:ft,styles:[],textStyles:[]},Z=Bt.replace(/\\,/g,"\xa7\xa7\xa7").replace(/,/g,";").replace(/\xa7\xa7\xa7/g,",").split(";");Z&&Z.forEach(ae=>{(0,Rt.KX)(ae)&&(_e?.textStyles?_e.textStyles.push(ae):_e.textStyles=[ae]),_e?.styles?_e.styles.push(ae):_e.styles=[ae]}),this.classes.set(ft,_e)}getClasses(){return this.classes}getStylesForClass(ft){return this.classes.get(ft)?.styles??[]}clear(){(0,A.IU)(),this.nodes=[],this.levels=new Map,this.outerNodes=[],this.classes=new Map,this.root=void 0}static#t=bt=()=>((0,ee.A)(this,"TreeMapDB"),(0,$t.K2)(this,"TreeMapDB"),this)},bt());function j(ft){if(!ft.length)return[];const Bt=[],_e=[];return ft.forEach(Z=>{const ae={name:Z.name,children:"Leaf"===Z.type?void 0:[]};for(ae.classSelector=Z?.classSelector,Z?.cssCompiledStyles&&(ae.cssCompiledStyles=[Z.cssCompiledStyles]),"Leaf"===Z.type&&void 0!==Z.value&&(ae.value=Z.value);_e.length>0&&_e[_e.length-1].level>=Z.level;)_e.pop();if(0===_e.length)Bt.push(ae);else{const S=_e[_e.length-1].node;S.children?S.children.push(ae):S.children=[ae]}"Leaf"!==Z.type&&_e.push({node:ae,level:Z.level})}),Bt}(0,$t.K2)(j,"buildHierarchy");var fr=(0,$t.K2)((ft,Bt)=>{(0,dt.S)(ft,Bt);const _e=[];for(const S of ft.TreemapRows??[])"ClassDefStatement"===S.$type&&Bt.addClass(S.className??"",S.styleText??"");for(const S of ft.TreemapRows??[]){const re=S.item;if(!re)continue;const Pt=S.indent?parseInt(S.indent):0,qt=Fe(re),V=re.classSelector?Bt.getStylesForClass(re.classSelector):[],pt=V.length>0?V.join(";"):void 0;_e.push({level:Pt,name:qt,type:re.$type,value:re.value,classSelector:re.classSelector,cssCompiledStyles:pt})}const Z=j(_e),ae=(0,$t.K2)((S,re)=>{for(const Pt of S)Bt.addNode(Pt,re),Pt.children&&Pt.children.length>0&&ae(Pt.children,re+1)},"addNodesRecursively");ae(Z,0)},"populate"),Fe=(0,$t.K2)(ft=>ft.name?String(ft.name):"","getItemName"),vr={parser:{yy:void 0},parse:(0,$t.K2)(function(){var ft=(0,lt.A)(function*(Bt){try{const _e=yt.qg,Z=yield _e("treemap",Bt);$t.Rm.debug("Treemap AST:",Z);const ae=vr.parser?.yy;if(!(ae instanceof Xt))throw new Error("parser.parser?.yy was not a TreemapDB. This is due to a bug within Mermaid, please report this issue at https://github.com/mermaid-js/mermaid/issues.");fr(Z,ae)}catch(_e){throw $t.Rm.error("Error parsing treemap:",_e),_e}});return function(Bt){return ft.apply(this,arguments)}}(),"parse")},Ar={draw:(0,$t.K2)((ft,Bt,_e,Z)=>{const ae=Z.db,S=ae.getConfig(),re=S.padding??10,Pt=ae.getDiagramTitle(),qt=ae.getRoot(),{themeVariables:V}=(0,A.zj)();if(!qt)return;const pt=Pt?30:0,H=(0,L.D)(Bt),Nt=S.nodeWidth?10*S.nodeWidth:960,wt=S.nodeHeight?10*S.nodeHeight:500,Wt=Nt,xe=wt+pt;let le;H.attr("viewBox",`0 0 ${Wt} ${xe}`),(0,A.a$)(H,xe,Wt,S.useMaxWidth);try{const ut=S.valueFormat||",";if("$0,0"===ut)le=(0,$t.K2)(It=>"$"+(0,Ye.GPZ)(",")(It),"valueFormat");else if(ut.startsWith("$")&&ut.includes(",")){const It=/\.\d+/.exec(ut),G=It?It[0]:"";le=(0,$t.K2)(st=>"$"+(0,Ye.GPZ)(","+G)(st),"valueFormat")}else if(ut.startsWith("$")){const It=ut.substring(1);le=(0,$t.K2)(G=>"$"+(0,Ye.GPZ)(It||"")(G),"valueFormat")}else le=(0,Ye.GPZ)(ut)}catch(ut){$t.Rm.error("Error creating format function:",ut),le=(0,Ye.GPZ)(",")}const Re=(0,Ye.UMr)().range(["transparent",V.cScale0,V.cScale1,V.cScale2,V.cScale3,V.cScale4,V.cScale5,V.cScale6,V.cScale7,V.cScale8,V.cScale9,V.cScale10,V.cScale11]),oe=(0,Ye.UMr)().range(["transparent",V.cScalePeer0,V.cScalePeer1,V.cScalePeer2,V.cScalePeer3,V.cScalePeer4,V.cScalePeer5,V.cScalePeer6,V.cScalePeer7,V.cScalePeer8,V.cScalePeer9,V.cScalePeer10,V.cScalePeer11]),qe=(0,Ye.UMr)().range([V.cScaleLabel0,V.cScaleLabel1,V.cScaleLabel2,V.cScaleLabel3,V.cScaleLabel4,V.cScaleLabel5,V.cScaleLabel6,V.cScaleLabel7,V.cScaleLabel8,V.cScaleLabel9,V.cScaleLabel10,V.cScaleLabel11]);Pt&&H.append("text").attr("x",Wt/2).attr("y",pt/2).attr("class","treemapTitle").attr("text-anchor","middle").attr("dominant-baseline","middle").text(Pt);const We=H.append("g").attr("transform",`translate(0, ${pt})`).attr("class","treemapContainer"),Ct=(0,Ye.Sk5)(qt).sum(ut=>ut.value??0).sort((ut,It)=>(It.value??0)-(ut.value??0)),R=(0,Ye.hkb)().size([Nt,wt]).paddingTop(ut=>ut.children&&ut.children.length>0?35:0).paddingInner(re).paddingLeft(ut=>ut.children&&ut.children.length>0?10:0).paddingRight(ut=>ut.children&&ut.children.length>0?10:0).paddingBottom(ut=>ut.children&&ut.children.length>0?10:0).round(!0)(Ct),O=R.descendants().filter(ut=>ut.children&&ut.children.length>0),et=We.selectAll(".treemapSection").data(O).enter().append("g").attr("class","treemapSection").attr("transform",ut=>`translate(${ut.x0},${ut.y0})`);et.append("rect").attr("width",ut=>ut.x1-ut.x0).attr("height",25).attr("class","treemapSectionHeader").attr("fill","none").attr("fill-opacity",.6).attr("stroke-width",.6).attr("style",ut=>0===ut.depth?"display: none;":""),et.append("clipPath").attr("id",(ut,It)=>`clip-section-${Bt}-${It}`).append("rect").attr("width",ut=>Math.max(0,ut.x1-ut.x0-12)).attr("height",25),et.append("rect").attr("width",ut=>ut.x1-ut.x0).attr("height",ut=>ut.y1-ut.y0).attr("class",(ut,It)=>`treemapSection section${It}`).attr("fill",ut=>Re(ut.data.name)).attr("fill-opacity",.6).attr("stroke",ut=>oe(ut.data.name)).attr("stroke-width",2).attr("stroke-opacity",.4).attr("style",ut=>{if(0===ut.depth)return"display: none;";const It=(0,Rt.GX)({cssCompiledStyles:ut.data.cssCompiledStyles});return It.nodeStyles+";"+It.borderStyles.join(";")}),et.append("text").attr("class","treemapSectionLabel").attr("x",6).attr("y",12.5).attr("dominant-baseline","middle").text(ut=>0===ut.depth?"":ut.data.name).attr("font-weight","bold").attr("style",ut=>0===ut.depth?"display: none;":"dominant-baseline: middle; font-size: 12px; fill:"+qe(ut.data.name)+"; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;"+(0,Rt.GX)({cssCompiledStyles:ut.data.cssCompiledStyles}).labelStyles.replace("color:","fill:")).each(function(ut){if(0===ut.depth)return;const It=(0,Ye.Ltv)(this),G=ut.data.name;It.text(G);const st=ut.x1-ut.x0;let Ot;Ot=!1!==S.showValues&&ut.value?st-10-30-10-6:st-6-6;const fe=Math.max(15,Ot),Be=It.node();if(Be.getComputedTextLength()>fe){let kr=G;for(;kr.length>0;){if(kr=G.substring(0,kr.length-1),0===kr.length){It.text("..."),Be.getComputedTextLength()>fe&&It.text("");break}if(It.text(kr+"..."),Be.getComputedTextLength()<=fe)break}}}),!1!==S.showValues&&et.append("text").attr("class","treemapSectionValue").attr("x",ut=>ut.x1-ut.x0-10).attr("y",12.5).attr("text-anchor","end").attr("dominant-baseline","middle").text(ut=>ut.value?le(ut.value):"").attr("font-style","italic").attr("style",ut=>0===ut.depth?"display: none;":"text-anchor: end; dominant-baseline: middle; font-size: 10px; fill:"+qe(ut.data.name)+"; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;"+(0,Rt.GX)({cssCompiledStyles:ut.data.cssCompiledStyles}).labelStyles.replace("color:","fill:"));const xt=R.leaves(),it=We.selectAll(".treemapLeafGroup").data(xt).enter().append("g").attr("class",(ut,It)=>`treemapNode treemapLeafGroup leaf${It}${ut.data.classSelector?` ${ut.data.classSelector}`:""}x`).attr("transform",ut=>`translate(${ut.x0},${ut.y0})`);it.append("rect").attr("width",ut=>ut.x1-ut.x0).attr("height",ut=>ut.y1-ut.y0).attr("class","treemapLeaf").attr("fill",ut=>Re(ut.parent?ut.parent.data.name:ut.data.name)).attr("style",ut=>(0,Rt.GX)({cssCompiledStyles:ut.data.cssCompiledStyles}).nodeStyles).attr("fill-opacity",.3).attr("stroke",ut=>Re(ut.parent?ut.parent.data.name:ut.data.name)).attr("stroke-width",3),it.append("clipPath").attr("id",(ut,It)=>`clip-${Bt}-${It}`).append("rect").attr("width",ut=>Math.max(0,ut.x1-ut.x0-4)).attr("height",ut=>Math.max(0,ut.y1-ut.y0-4)),it.append("text").attr("class","treemapLabel").attr("x",ut=>(ut.x1-ut.x0)/2).attr("y",ut=>(ut.y1-ut.y0)/2).attr("style",ut=>"text-anchor: middle; dominant-baseline: middle; font-size: 38px;fill:"+qe(ut.data.name)+";"+(0,Rt.GX)({cssCompiledStyles:ut.data.cssCompiledStyles}).labelStyles.replace("color:","fill:")).attr("clip-path",(ut,It)=>`url(#clip-${Bt}-${It})`).text(ut=>ut.data.name).each(function(ut){const It=(0,Ye.Ltv)(this),G=ut.x1-ut.x0,st=ut.y1-ut.y0,Ce=It.node(),Jt=G-8,fe=st-8;if(Jt<10||fe<10)return void It.style("display","none");let Be=parseInt(It.style("font-size"),10);for(;Ce.getComputedTextLength()>Jt&&Be>8;)Be--,It.style("font-size",`${Be}px`);let Pe=Math.max(6,Math.min(28,Math.round(.6*Be))),ir=Be+2+Pe;for(;ir>fe&&Be>8&&(Be--,Pe=Math.max(6,Math.min(28,Math.round(.6*Be))),!(Pe<6&&8===Be));)It.style("font-size",`${Be}px`),ir=Be+2+Pe;It.style("font-size",`${Be}px`),(Ce.getComputedTextLength()>Jt||Be<8||fe<Be)&&It.style("display","none")}),!1!==S.showValues&&it.append("text").attr("class","treemapValue").attr("x",It=>(It.x1-It.x0)/2).attr("y",function(It){return(It.y1-It.y0)/2}).attr("style",It=>"text-anchor: middle; dominant-baseline: hanging; font-size: 28px;fill:"+qe(It.data.name)+";"+(0,Rt.GX)({cssCompiledStyles:It.data.cssCompiledStyles}).labelStyles.replace("color:","fill:")).attr("clip-path",(It,G)=>`url(#clip-${Bt}-${G})`).text(It=>It.value?le(It.value):"").each(function(It){const G=(0,Ye.Ltv)(this),st=this.parentNode;if(!st)return void G.style("display","none");const Ce=(0,Ye.Ltv)(st).select(".treemapLabel");if(Ce.empty()||"none"===Ce.style("display"))return void G.style("display","none");const Ot=parseFloat(Ce.style("font-size")),ye=Math.max(6,Math.min(28,Math.round(.6*Ot)));G.style("font-size",`${ye}px`);const ur=(It.y1-It.y0)/2+Ot/2+2;G.attr("y",ur);const me=It.y1-It.y0-4,ce=It.x1-It.x0-8;G.node().getComputedTextLength()>ce||ur+ye>me||ye<6?G.style("display","none"):G.style("display",null)}),(0,D.P)(H,S.diagramPadding??8,"flowchart",S?.useMaxWidth||!1)},"draw"),getClasses:(0,$t.K2)(function(ft,Bt){return Bt.db.getClasses()},"getClasses")},ge={sectionStrokeColor:"black",sectionStrokeWidth:"1",sectionFillColor:"#efefef",leafStrokeColor:"black",leafStrokeWidth:"1",leafFillColor:"#efefef",labelColor:"black",labelFontSize:"12px",valueFontSize:"10px",valueColor:"black",titleColor:"black",titleFontSize:"14px"},Ge=(0,$t.K2)(({treemap:ft}={})=>{const Bt=(0,q.$t)(ge,ft);return`\n  .treemapNode.section {\n    stroke: ${Bt.sectionStrokeColor};\n    stroke-width: ${Bt.sectionStrokeWidth};\n    fill: ${Bt.sectionFillColor};\n  }\n  .treemapNode.leaf {\n    stroke: ${Bt.leafStrokeColor};\n    stroke-width: ${Bt.leafStrokeWidth};\n    fill: ${Bt.leafFillColor};\n  }\n  .treemapLabel {\n    fill: ${Bt.labelColor};\n    font-size: ${Bt.labelFontSize};\n  }\n  .treemapValue {\n    fill: ${Bt.valueColor};\n    font-size: ${Bt.valueFontSize};\n  }\n  .treemapTitle {\n    fill: ${Bt.titleColor};\n    font-size: ${Bt.titleFontSize};\n  }\n  `},"getStyles"),W={parser:vr,get db(){return new Xt},renderer:Ar,styles:Ge}},57746:(ti,_r,B)=>{"use strict";B.r(_r),B.d(_r,{diagram:()=>_e});var dt,q,lt=B(45027),ee=B(79006),L=B(32303),D=B(40622),Rt=B(76051),A=function(){var Z=(0,L.K2)(function(pt,H,Nt,wt){for(Nt=Nt||{},wt=pt.length;wt--;Nt[pt[wt]]=H);return Nt},"o"),ae=[1,9],S=[1,10],re=[1,5,10,12],Pt={trace:(0,L.K2)(function(){},"trace"),yy:{},symbols_:{error:2,start:3,SANKEY:4,NEWLINE:5,csv:6,opt_eof:7,record:8,csv_tail:9,EOF:10,"field[source]":11,COMMA:12,"field[target]":13,"field[value]":14,field:15,escaped:16,non_escaped:17,DQUOTE:18,ESCAPED_TEXT:19,NON_ESCAPED_TEXT:20,$accept:0,$end:1},terminals_:{2:"error",4:"SANKEY",5:"NEWLINE",10:"EOF",11:"field[source]",12:"COMMA",13:"field[target]",14:"field[value]",18:"DQUOTE",19:"ESCAPED_TEXT",20:"NON_ESCAPED_TEXT"},productions_:[0,[3,4],[6,2],[9,2],[9,0],[7,1],[7,0],[8,5],[15,1],[15,1],[16,3],[17,1]],performAction:(0,L.K2)(function(H,Nt,wt,Wt,xe,le,Re){var oe=le.length-1;switch(xe){case 7:const qe=Wt.findOrCreateNode(le[oe-4].trim().replaceAll('""','"')),We=Wt.findOrCreateNode(le[oe-2].trim().replaceAll('""','"')),Ct=parseFloat(le[oe].trim());Wt.addLink(qe,We,Ct);break;case 8:case 9:case 11:this.$=le[oe];break;case 10:this.$=le[oe-1]}},"anonymous"),table:[{3:1,4:[1,2]},{1:[3]},{5:[1,3]},{6:4,8:5,15:6,16:7,17:8,18:ae,20:S},{1:[2,6],7:11,10:[1,12]},Z(S,[2,4],{9:13,5:[1,14]}),{12:[1,15]},Z(re,[2,8]),Z(re,[2,9]),{19:[1,16]},Z(re,[2,11]),{1:[2,1]},{1:[2,5]},Z(S,[2,2]),{6:17,8:5,15:6,16:7,17:8,18:ae,20:S},{15:18,16:7,17:8,18:ae,20:S},{18:[1,19]},Z(S,[2,3]),{12:[1,20]},Z(re,[2,10]),{15:21,16:7,17:8,18:ae,20:S},Z([1,5,10],[2,7])],defaultActions:{11:[2,1],12:[2,5]},parseError:(0,L.K2)(function(H,Nt){if(!Nt.recoverable){var wt=new Error(H);throw wt.hash=Nt,wt}this.trace(H)},"parseError"),parse:(0,L.K2)(function(H){var Nt=this,wt=[0],Wt=[],xe=[null],le=[],Re=this.table,oe="",qe=0,We=0,Ct=0,O=le.slice.call(arguments,1),et=Object.create(this.lexer),xt={yy:{}};for(var it in this.yy)Object.prototype.hasOwnProperty.call(this.yy,it)&&(xt.yy[it]=this.yy[it]);et.setInput(H,xt.yy),xt.yy.lexer=et,xt.yy.parser=this,typeof et.yylloc>"u"&&(et.yylloc={});var rt=et.yylloc;le.push(rt);var Et=et.options&&et.options.ranges;function It(){var Pe;return"number"!=typeof(Pe=Wt.pop()||et.lex()||1)&&(Pe instanceof Array&&(Pe=(Wt=Pe).pop()),Pe=Nt.symbols_[Pe]||Pe),Pe}this.parseError="function"==typeof xt.yy.parseError?xt.yy.parseError:Object.getPrototypeOf(this).parseError,(0,L.K2)(function ut(Pe){wt.length=wt.length-2*Pe,xe.length=xe.length-Pe,le.length=le.length-Pe},"popStack"),(0,L.K2)(It,"lex");for(var G,st,Ce,Ot,fe,Ze,ye,ur,Be={};;){if(this.defaultActions[Ce=wt[wt.length-1]]?Ot=this.defaultActions[Ce]:((null===G||typeof G>"u")&&(G=It()),Ot=Re[Ce]&&Re[Ce][G]),typeof Ot>"u"||!Ot.length||!Ot[0]){var Kt;for(Ze in ur=[],Re[Ce])this.terminals_[Ze]&&Ze>2&&ur.push("'"+this.terminals_[Ze]+"'");Kt=et.showPosition?"Parse error on line "+(qe+1)+":\n"+et.showPosition()+"\nExpecting "+ur.join(", ")+", got '"+(this.terminals_[G]||G)+"'":"Parse error on line "+(qe+1)+": Unexpected "+(1==G?"end of input":"'"+(this.terminals_[G]||G)+"'"),this.parseError(Kt,{text:et.match,token:this.terminals_[G]||G,line:et.yylineno,loc:rt,expected:ur})}if(Ot[0]instanceof Array&&Ot.length>1)throw new Error("Parse Error: multiple actions possible at state: "+Ce+", token: "+G);switch(Ot[0]){case 1:wt.push(G),xe.push(et.yytext),le.push(et.yylloc),wt.push(Ot[1]),G=null,st?(G=st,st=null):(We=et.yyleng,oe=et.yytext,qe=et.yylineno,rt=et.yylloc,Ct>0&&Ct--);break;case 2:if(Be.$=xe[xe.length-(ye=this.productions_[Ot[1]][1])],Be._$={first_line:le[le.length-(ye||1)].first_line,last_line:le[le.length-1].last_line,first_column:le[le.length-(ye||1)].first_column,last_column:le[le.length-1].last_column},Et&&(Be._$.range=[le[le.length-(ye||1)].range[0],le[le.length-1].range[1]]),typeof(fe=this.performAction.apply(Be,[oe,We,qe,xt.yy,Ot[1],xe,le].concat(O)))<"u")return fe;ye&&(wt=wt.slice(0,-1*ye*2),xe=xe.slice(0,-1*ye),le=le.slice(0,-1*ye)),wt.push(this.productions_[Ot[1]][0]),xe.push(Be.$),le.push(Be._$),wt.push(Re[wt[wt.length-2]][wt[wt.length-1]]);break;case 3:return!0}}return!0},"parse")};function V(){this.yy={}}return Pt.lexer=function(){return{EOF:1,parseError:(0,L.K2)(function(Nt,wt){if(!this.yy.parser)throw new Error(Nt);this.yy.parser.parseError(Nt,wt)},"parseError"),setInput:(0,L.K2)(function(H,Nt){return this.yy=Nt||this.yy||{},this._input=H,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},"setInput"),input:(0,L.K2)(function(){var H=this._input[0];return this.yytext+=H,this.yyleng++,this.offset++,this.match+=H,this.matched+=H,H.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),H},"input"),unput:(0,L.K2)(function(H){var Nt=H.length,wt=H.split(/(?:\r\n?|\n)/g);this._input=H+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-Nt),this.offset-=Nt;var Wt=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),wt.length-1&&(this.yylineno-=wt.length-1);var xe=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:wt?(wt.length===Wt.length?this.yylloc.first_column:0)+Wt[Wt.length-wt.length].length-wt[0].length:this.yylloc.first_column-Nt},this.options.ranges&&(this.yylloc.range=[xe[0],xe[0]+this.yyleng-Nt]),this.yyleng=this.yytext.length,this},"unput"),more:(0,L.K2)(function(){return this._more=!0,this},"more"),reject:(0,L.K2)(function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},"reject"),less:(0,L.K2)(function(H){this.unput(this.match.slice(H))},"less"),pastInput:(0,L.K2)(function(){var H=this.matched.substr(0,this.matched.length-this.match.length);return(H.length>20?"...":"")+H.substr(-20).replace(/\n/g,"")},"pastInput"),upcomingInput:(0,L.K2)(function(){var H=this.match;return H.length<20&&(H+=this._input.substr(0,20-H.length)),(H.substr(0,20)+(H.length>20?"...":"")).replace(/\n/g,"")},"upcomingInput"),showPosition:(0,L.K2)(function(){var H=this.pastInput(),Nt=new Array(H.length+1).join("-");return H+this.upcomingInput()+"\n"+Nt+"^"},"showPosition"),test_match:(0,L.K2)(function(H,Nt){var wt,Wt,xe;if(this.options.backtrack_lexer&&(xe={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(xe.yylloc.range=this.yylloc.range.slice(0))),(Wt=H[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=Wt.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:Wt?Wt[Wt.length-1].length-Wt[Wt.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+H[0].length},this.yytext+=H[0],this.match+=H[0],this.matches=H,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(H[0].length),this.matched+=H[0],wt=this.performAction.call(this,this.yy,this,Nt,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),wt)return wt;if(this._backtrack){for(var le in xe)this[le]=xe[le];return!1}return!1},"test_match"),next:(0,L.K2)(function(){if(this.done)return this.EOF;var H,Nt,wt,Wt;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var xe=this._currentRules(),le=0;le<xe.length;le++)if((wt=this._input.match(this.rules[xe[le]]))&&(!Nt||wt[0].length>Nt[0].length)){if(Nt=wt,Wt=le,this.options.backtrack_lexer){if(!1!==(H=this.test_match(wt,xe[le])))return H;if(this._backtrack){Nt=!1;continue}return!1}if(!this.options.flex)break}return Nt?!1!==(H=this.test_match(Nt,xe[Wt]))&&H:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},"next"),lex:(0,L.K2)(function(){return this.next()||this.lex()},"lex"),begin:(0,L.K2)(function(Nt){this.conditionStack.push(Nt)},"begin"),popState:(0,L.K2)(function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},"popState"),_currentRules:(0,L.K2)(function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},"_currentRules"),topState:(0,L.K2)(function(Nt){return(Nt=this.conditionStack.length-1-Math.abs(Nt||0))>=0?this.conditionStack[Nt]:"INITIAL"},"topState"),pushState:(0,L.K2)(function(Nt){this.begin(Nt)},"pushState"),stateStackSize:(0,L.K2)(function(){return this.conditionStack.length},"stateStackSize"),options:{"case-insensitive":!0},performAction:(0,L.K2)(function(Nt,wt,Wt,xe){switch(Wt){case 0:case 1:return this.pushState("csv"),4;case 2:return 10;case 3:return 5;case 4:return 12;case 5:return this.pushState("escaped_text"),18;case 6:return 20;case 7:return this.popState("escaped_text"),18;case 8:return 19}},"anonymous"),rules:[/^(?:sankey-beta\b)/i,/^(?:sankey\b)/i,/^(?:$)/i,/^(?:((\u000D\u000A)|(\u000A)))/i,/^(?:(\u002C))/i,/^(?:(\u0022))/i,/^(?:([\u0020-\u0021\u0023-\u002B\u002D-\u007E])*)/i,/^(?:(\u0022)(?!(\u0022)))/i,/^(?:(([\u0020-\u0021\u0023-\u002B\u002D-\u007E])|(\u002C)|(\u000D)|(\u000A)|(\u0022)(\u0022))*)/i],conditions:{csv:{rules:[2,3,4,5,6,7,8],inclusive:!1},escaped_text:{rules:[7,8],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,5,6,7,8],inclusive:!0}}}}(),(0,L.K2)(V,"Parser"),V.prototype=Pt,Pt.Parser=V,new V}();A.parser=A;var $t=A,yt=[],Ye=[],bt=new Map,Xt=(0,L.K2)(()=>{yt=[],Ye=[],bt=new Map,(0,ee.IU)()},"clear"),j=(class{constructor(Z,ae,S=0){this.source=Z,this.target=ae,this.value=S}static#t=dt=()=>((0,lt.A)(this,"SankeyLink"),(0,L.K2)(this,"SankeyLink"),this)},dt()),fr=(0,L.K2)((Z,ae,S)=>{yt.push(new j(Z,ae,S))},"addLink"),Fe=(class{constructor(Z){this.ID=Z}static#t=q=()=>((0,lt.A)(this,"SankeyNode"),(0,L.K2)(this,"SankeyNode"),this)},q()),vr=(0,L.K2)(Z=>{Z=ee.Y2.sanitizeText(Z,(0,ee.D7)());let ae=bt.get(Z);return void 0===ae&&(ae=new Fe(Z),bt.set(Z,ae),Ye.push(ae)),ae},"findOrCreateNode"),zr=(0,L.K2)(()=>Ye,"getNodes"),br=(0,L.K2)(()=>yt,"getLinks"),mr=(0,L.K2)(()=>({nodes:Ye.map(Z=>({id:Z.ID})),links:yt.map(Z=>({source:Z.source.ID,target:Z.target.ID,value:Z.value}))}),"getGraph"),Er={nodesMap:bt,getConfig:(0,L.K2)(()=>(0,ee.D7)().sankey,"getConfig"),getNodes:zr,getLinks:br,getGraph:mr,addLink:fr,findOrCreateNode:vr,getAccTitle:ee.iN,setAccTitle:ee.SV,getAccDescription:ee.m7,setAccDescription:ee.EI,getDiagramTitle:ee.ab,setDiagramTitle:ee.ke,clear:Xt},Lr=(()=>{var Z;return class lh{static next(re){return new lh(re+ ++lh.count)}constructor(re){this.id=re,this.href=`#${re}`}toString(){return"url("+this.href+")"}static#t=Z=()=>((0,L.K2)(this,"Uid"),this.count=0,this)},Z()})(),Ar={left:Rt.P9,right:Rt.yp,center:Rt.jr,justify:Rt.oT},Br={draw:(0,L.K2)(function(Z,ae,S,re){const{securityLevel:Pt,sankey:qt}=(0,ee.D7)(),V=ee.ME.sankey;let pt;"sandbox"===Pt&&(pt=(0,D.Ltv)("#i"+ae));const H=(0,D.Ltv)("sandbox"===Pt?pt.nodes()[0].contentDocument.body:"body"),Nt="sandbox"===Pt?H.select(`[id="${ae}"]`):(0,D.Ltv)(`[id="${ae}"]`),wt=qt?.width??V.width,Wt=qt?.height??V.width,xe=qt?.useMaxWidth??V.useMaxWidth,le=qt?.nodeAlignment??V.nodeAlignment,Re=qt?.prefix??V.prefix,oe=qt?.suffix??V.suffix,qe=qt?.showValues??V.showValues,We=re.db.getGraph(),Ct=Ar[le];(0,Rt.IZ)().nodeId(Et=>Et.id).nodeWidth(10).nodePadding(10+(qe?15:0)).nodeAlign(Ct).extent([[0,0],[wt,Wt]])(We);const O=(0,D.UMr)(D.zt);Nt.append("g").attr("class","nodes").selectAll(".node").data(We.nodes).join("g").attr("class","node").attr("id",Et=>(Et.uid=Lr.next("node-")).id).attr("transform",function(Et){return"translate("+Et.x0+","+Et.y0+")"}).attr("x",Et=>Et.x0).attr("y",Et=>Et.y0).append("rect").attr("height",Et=>Et.y1-Et.y0).attr("width",Et=>Et.x1-Et.x0).attr("fill",Et=>O(Et.id));const et=(0,L.K2)(({id:Et,value:ut})=>qe?`${Et}\n${Re}${Math.round(100*ut)/100}${oe}`:Et,"getText");Nt.append("g").attr("class","node-labels").attr("font-size",14).selectAll("text").data(We.nodes).join("text").attr("x",Et=>Et.x0<wt/2?Et.x1+6:Et.x0-6).attr("y",Et=>(Et.y1+Et.y0)/2).attr("dy",(qe?"0":"0.35")+"em").attr("text-anchor",Et=>Et.x0<wt/2?"start":"end").text(et);const xt=Nt.append("g").attr("class","links").attr("fill","none").attr("stroke-opacity",.5).selectAll(".link").data(We.links).join("g").attr("class","link").style("mix-blend-mode","multiply"),it=qt?.linkColor??"gradient";if("gradient"===it){const Et=xt.append("linearGradient").attr("id",ut=>(ut.uid=Lr.next("linearGradient-")).id).attr("gradientUnits","userSpaceOnUse").attr("x1",ut=>ut.source.x1).attr("x2",ut=>ut.target.x0);Et.append("stop").attr("offset","0%").attr("stop-color",ut=>O(ut.source.id)),Et.append("stop").attr("offset","100%").attr("stop-color",ut=>O(ut.target.id))}let rt;switch(it){case"gradient":rt=(0,L.K2)(Et=>Et.uid,"coloring");break;case"source":rt=(0,L.K2)(Et=>O(Et.source.id),"coloring");break;case"target":rt=(0,L.K2)(Et=>O(Et.target.id),"coloring");break;default:rt=it}xt.append("path").attr("d",(0,Rt.Ku)()).attr("stroke",rt).attr("stroke-width",Et=>Math.max(1,Et.width)),(0,ee.ot)(void 0,Nt,0,xe)},"draw")},Ge=(0,L.K2)(Z=>Z.replaceAll(/^[^\S\n\r]+|[^\S\n\r]+$/g,"").replaceAll(/([\n\r])+/g,"\n").trim(),"prepareTextForParsing"),ft=(0,L.K2)(Z=>`.label {\n      font-family: ${Z.fontFamily};\n    }`,"getStyles"),Bt=$t.parse.bind($t);$t.parse=Z=>Bt(Ge(Z));var _e={styles:ft,parser:$t,db:Er,renderer:Br}},58431:(ti,_r,B)=>{"use strict";B.r(_r),B.d(_r,{diagram:()=>Xt});var lt=B(89204),ee=B(72774),L=B(69664),D=B(79006),Rt=B(32303),dt=B(62233),A={version:ee.n.version+""},Xt={parser:{parse:(0,Rt.K2)(function(){var j=(0,lt.A)(function*(fr){const Fe=yield(0,dt.qg)("info",fr);Rt.Rm.debug(Fe)});return function(fr){return j.apply(this,arguments)}}(),"parse")},db:{getVersion:(0,Rt.K2)(()=>A.version,"getVersion")},renderer:{draw:(0,Rt.K2)((j,fr,Fe)=>{Rt.Rm.debug("rendering info diagram\n"+j);const vr=(0,L.D)(fr);(0,D.a$)(vr,100,400,!0),vr.append("g").append("text").attr("x",100).attr("y",40).attr("class","version").attr("font-size",32).style("text-anchor","middle").text(`v${Fe}`)},"draw")}}},59301:(ti,_r,B)=>{"use strict";B.r(_r),B.d(_r,{diagram:()=>qt});var Rt,dt,lt=B(45027),ee=B(79006),L=B(32303),D=B(40622),q=function(){var V=(0,L.K2)(function(je,ze,Cr,cr){for(Cr=Cr||{},cr=je.length;cr--;Cr[je[cr]]=ze);return Cr},"o"),pt=[1,3],H=[1,4],Nt=[1,5],wt=[1,6],Wt=[1,7],xe=[1,4,5,10,12,13,14,18,25,35,37,39,41,42,48,50,51,52,53,54,55,56,57,60,61,63,64,65,66,67],le=[1,4,5,10,12,13,14,18,25,28,35,37,39,41,42,48,50,51,52,53,54,55,56,57,60,61,63,64,65,66,67],Re=[55,56,57],oe=[2,36],qe=[1,37],We=[1,36],Ct=[1,38],St=[1,35],R=[1,43],O=[1,41],et=[1,14],xt=[1,23],it=[1,18],rt=[1,19],Et=[1,20],ut=[1,21],It=[1,22],G=[1,24],st=[1,25],Ce=[1,26],Ot=[1,27],Jt=[1,28],fe=[1,29],Be=[1,32],Ze=[1,33],ye=[1,34],kr=[1,39],ur=[1,40],Kt=[1,42],Pe=[1,44],ir=[1,62],me=[1,61],ce=[4,5,8,10,12,13,14,18,44,47,49,55,56,57,63,64,65,66,67],ke=[1,65],Te=[1,66],er=[1,67],Xe=[1,68],Ir=[1,69],Ee=[1,70],qr=[1,71],nr=[1,72],te=[1,73],ne=[1,74],Le=[1,75],tr=[1,76],g=[4,5,6,7,8,9,10,11,12,13,14,15,18],y=[1,90],E=[1,91],P=[1,92],b=[1,99],z=[1,93],p=[1,96],x=[1,94],C=[1,95],w=[1,97],$=[1,98],ct=[1,102],kt=[10,55,56,57],Ut=[4,5,6,8,10,11,13,17,18,19,20,55,56,57],Ht={trace:(0,L.K2)(function(){},"trace"),yy:{},symbols_:{error:2,idStringToken:3,ALPHA:4,NUM:5,NODE_STRING:6,DOWN:7,MINUS:8,DEFAULT:9,COMMA:10,COLON:11,AMP:12,BRKT:13,MULT:14,UNICODE_TEXT:15,styleComponent:16,UNIT:17,SPACE:18,STYLE:19,PCT:20,idString:21,style:22,stylesOpt:23,classDefStatement:24,CLASSDEF:25,start:26,eol:27,QUADRANT:28,document:29,line:30,statement:31,axisDetails:32,quadrantDetails:33,points:34,title:35,title_value:36,acc_title:37,acc_title_value:38,acc_descr:39,acc_descr_value:40,acc_descr_multiline_value:41,section:42,text:43,point_start:44,point_x:45,point_y:46,class_name:47,"X-AXIS":48,"AXIS-TEXT-DELIMITER":49,"Y-AXIS":50,QUADRANT_1:51,QUADRANT_2:52,QUADRANT_3:53,QUADRANT_4:54,NEWLINE:55,SEMI:56,EOF:57,alphaNumToken:58,textNoTagsToken:59,STR:60,MD_STR:61,alphaNum:62,PUNCTUATION:63,PLUS:64,EQUALS:65,DOT:66,UNDERSCORE:67,$accept:0,$end:1},terminals_:{2:"error",4:"ALPHA",5:"NUM",6:"NODE_STRING",7:"DOWN",8:"MINUS",9:"DEFAULT",10:"COMMA",11:"COLON",12:"AMP",13:"BRKT",14:"MULT",15:"UNICODE_TEXT",17:"UNIT",18:"SPACE",19:"STYLE",20:"PCT",25:"CLASSDEF",28:"QUADRANT",35:"title",36:"title_value",37:"acc_title",38:"acc_title_value",39:"acc_descr",40:"acc_descr_value",41:"acc_descr_multiline_value",42:"section",44:"point_start",45:"point_x",46:"point_y",47:"class_name",48:"X-AXIS",49:"AXIS-TEXT-DELIMITER",50:"Y-AXIS",51:"QUADRANT_1",52:"QUADRANT_2",53:"QUADRANT_3",54:"QUADRANT_4",55:"NEWLINE",56:"SEMI",57:"EOF",60:"STR",61:"MD_STR",63:"PUNCTUATION",64:"PLUS",65:"EQUALS",66:"DOT",67:"UNDERSCORE"},productions_:[0,[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[16,1],[16,1],[16,1],[16,1],[16,1],[16,1],[16,1],[16,1],[16,1],[16,1],[21,1],[21,2],[22,1],[22,2],[23,1],[23,3],[24,5],[26,2],[26,2],[26,2],[29,0],[29,2],[30,2],[31,0],[31,1],[31,2],[31,1],[31,1],[31,1],[31,2],[31,2],[31,2],[31,1],[31,1],[34,4],[34,5],[34,5],[34,6],[32,4],[32,3],[32,2],[32,4],[32,3],[32,2],[33,2],[33,2],[33,2],[33,2],[27,1],[27,1],[27,1],[43,1],[43,2],[43,1],[43,1],[62,1],[62,2],[58,1],[58,1],[58,1],[58,1],[58,1],[58,1],[58,1],[58,1],[58,1],[58,1],[58,1],[59,1],[59,1],[59,1]],performAction:(0,L.K2)(function(ze,Cr,cr,sr,$e,He,Pr){var wr=He.length-1;switch($e){case 23:case 68:this.$=He[wr];break;case 24:case 69:this.$=He[wr-1]+""+He[wr];break;case 26:this.$=He[wr-1]+He[wr];break;case 27:this.$=[He[wr].trim()];break;case 28:He[wr-2].push(He[wr].trim()),this.$=He[wr-2];break;case 29:this.$=He[wr-4],sr.addClass(He[wr-2],He[wr]);break;case 37:this.$=[];break;case 42:this.$=He[wr].trim(),sr.setDiagramTitle(this.$);break;case 43:this.$=He[wr].trim(),sr.setAccTitle(this.$);break;case 44:case 45:this.$=He[wr].trim(),sr.setAccDescription(this.$);break;case 46:sr.addSection(He[wr].substr(8)),this.$=He[wr].substr(8);break;case 47:sr.addPoint(He[wr-3],"",He[wr-1],He[wr],[]);break;case 48:sr.addPoint(He[wr-4],He[wr-3],He[wr-1],He[wr],[]);break;case 49:sr.addPoint(He[wr-4],"",He[wr-2],He[wr-1],He[wr]);break;case 50:sr.addPoint(He[wr-5],He[wr-4],He[wr-2],He[wr-1],He[wr]);break;case 51:sr.setXAxisLeftText(He[wr-2]),sr.setXAxisRightText(He[wr]);break;case 52:He[wr-1].text+=" \u27f6 ",sr.setXAxisLeftText(He[wr-1]);break;case 53:sr.setXAxisLeftText(He[wr]);break;case 54:sr.setYAxisBottomText(He[wr-2]),sr.setYAxisTopText(He[wr]);break;case 55:He[wr-1].text+=" \u27f6 ",sr.setYAxisBottomText(He[wr-1]);break;case 56:sr.setYAxisBottomText(He[wr]);break;case 57:sr.setQuadrant1Text(He[wr]);break;case 58:sr.setQuadrant2Text(He[wr]);break;case 59:sr.setQuadrant3Text(He[wr]);break;case 60:sr.setQuadrant4Text(He[wr]);break;case 64:case 66:this.$={text:He[wr],type:"text"};break;case 65:this.$={text:He[wr-1].text+""+He[wr],type:He[wr-1].type};break;case 67:this.$={text:He[wr],type:"markdown"}}},"anonymous"),table:[{18:pt,26:1,27:2,28:H,55:Nt,56:wt,57:Wt},{1:[3]},{18:pt,26:8,27:2,28:H,55:Nt,56:wt,57:Wt},{18:pt,26:9,27:2,28:H,55:Nt,56:wt,57:Wt},V(xe,[2,33],{29:10}),V(le,[2,61]),V(le,[2,62]),V(le,[2,63]),{1:[2,30]},{1:[2,31]},V(Re,oe,{30:11,31:12,24:13,32:15,33:16,34:17,43:30,58:31,1:[2,32],4:qe,5:We,10:Ct,12:St,13:R,14:O,18:et,25:xt,35:it,37:rt,39:Et,41:ut,42:It,48:G,50:st,51:Ce,52:Ot,53:Jt,54:fe,60:Be,61:Ze,63:ye,64:kr,65:ur,66:Kt,67:Pe}),V(xe,[2,34]),{27:45,55:Nt,56:wt,57:Wt},V(Re,[2,37]),V(Re,oe,{24:13,32:15,33:16,34:17,43:30,58:31,31:46,4:qe,5:We,10:Ct,12:St,13:R,14:O,18:et,25:xt,35:it,37:rt,39:Et,41:ut,42:It,48:G,50:st,51:Ce,52:Ot,53:Jt,54:fe,60:Be,61:Ze,63:ye,64:kr,65:ur,66:Kt,67:Pe}),V(Re,[2,39]),V(Re,[2,40]),V(Re,[2,41]),{36:[1,47]},{38:[1,48]},{40:[1,49]},V(Re,[2,45]),V(Re,[2,46]),{18:[1,50]},{4:qe,5:We,10:Ct,12:St,13:R,14:O,43:51,58:31,60:Be,61:Ze,63:ye,64:kr,65:ur,66:Kt,67:Pe},{4:qe,5:We,10:Ct,12:St,13:R,14:O,43:52,58:31,60:Be,61:Ze,63:ye,64:kr,65:ur,66:Kt,67:Pe},{4:qe,5:We,10:Ct,12:St,13:R,14:O,43:53,58:31,60:Be,61:Ze,63:ye,64:kr,65:ur,66:Kt,67:Pe},{4:qe,5:We,10:Ct,12:St,13:R,14:O,43:54,58:31,60:Be,61:Ze,63:ye,64:kr,65:ur,66:Kt,67:Pe},{4:qe,5:We,10:Ct,12:St,13:R,14:O,43:55,58:31,60:Be,61:Ze,63:ye,64:kr,65:ur,66:Kt,67:Pe},{4:qe,5:We,10:Ct,12:St,13:R,14:O,43:56,58:31,60:Be,61:Ze,63:ye,64:kr,65:ur,66:Kt,67:Pe},{4:qe,5:We,8:ir,10:Ct,12:St,13:R,14:O,18:me,44:[1,57],47:[1,58],58:60,59:59,63:ye,64:kr,65:ur,66:Kt,67:Pe},V(ce,[2,64]),V(ce,[2,66]),V(ce,[2,67]),V(ce,[2,70]),V(ce,[2,71]),V(ce,[2,72]),V(ce,[2,73]),V(ce,[2,74]),V(ce,[2,75]),V(ce,[2,76]),V(ce,[2,77]),V(ce,[2,78]),V(ce,[2,79]),V(ce,[2,80]),V(xe,[2,35]),V(Re,[2,38]),V(Re,[2,42]),V(Re,[2,43]),V(Re,[2,44]),{3:64,4:ke,5:Te,6:er,7:Xe,8:Ir,9:Ee,10:qr,11:nr,12:te,13:ne,14:Le,15:tr,21:63},V(Re,[2,53],{59:59,58:60,4:qe,5:We,8:ir,10:Ct,12:St,13:R,14:O,18:me,49:[1,77],63:ye,64:kr,65:ur,66:Kt,67:Pe}),V(Re,[2,56],{59:59,58:60,4:qe,5:We,8:ir,10:Ct,12:St,13:R,14:O,18:me,49:[1,78],63:ye,64:kr,65:ur,66:Kt,67:Pe}),V(Re,[2,57],{59:59,58:60,4:qe,5:We,8:ir,10:Ct,12:St,13:R,14:O,18:me,63:ye,64:kr,65:ur,66:Kt,67:Pe}),V(Re,[2,58],{59:59,58:60,4:qe,5:We,8:ir,10:Ct,12:St,13:R,14:O,18:me,63:ye,64:kr,65:ur,66:Kt,67:Pe}),V(Re,[2,59],{59:59,58:60,4:qe,5:We,8:ir,10:Ct,12:St,13:R,14:O,18:me,63:ye,64:kr,65:ur,66:Kt,67:Pe}),V(Re,[2,60],{59:59,58:60,4:qe,5:We,8:ir,10:Ct,12:St,13:R,14:O,18:me,63:ye,64:kr,65:ur,66:Kt,67:Pe}),{45:[1,79]},{44:[1,80]},V(ce,[2,65]),V(ce,[2,81]),V(ce,[2,82]),V(ce,[2,83]),{3:82,4:ke,5:Te,6:er,7:Xe,8:Ir,9:Ee,10:qr,11:nr,12:te,13:ne,14:Le,15:tr,18:[1,81]},V(g,[2,23]),V(g,[2,1]),V(g,[2,2]),V(g,[2,3]),V(g,[2,4]),V(g,[2,5]),V(g,[2,6]),V(g,[2,7]),V(g,[2,8]),V(g,[2,9]),V(g,[2,10]),V(g,[2,11]),V(g,[2,12]),V(Re,[2,52],{58:31,43:83,4:qe,5:We,10:Ct,12:St,13:R,14:O,60:Be,61:Ze,63:ye,64:kr,65:ur,66:Kt,67:Pe}),V(Re,[2,55],{58:31,43:84,4:qe,5:We,10:Ct,12:St,13:R,14:O,60:Be,61:Ze,63:ye,64:kr,65:ur,66:Kt,67:Pe}),{46:[1,85]},{45:[1,86]},{4:y,5:E,6:P,8:b,11:z,13:p,16:89,17:x,18:C,19:w,20:$,22:88,23:87},V(g,[2,24]),V(Re,[2,51],{59:59,58:60,4:qe,5:We,8:ir,10:Ct,12:St,13:R,14:O,18:me,63:ye,64:kr,65:ur,66:Kt,67:Pe}),V(Re,[2,54],{59:59,58:60,4:qe,5:We,8:ir,10:Ct,12:St,13:R,14:O,18:me,63:ye,64:kr,65:ur,66:Kt,67:Pe}),V(Re,[2,47],{22:88,16:89,23:100,4:y,5:E,6:P,8:b,11:z,13:p,17:x,18:C,19:w,20:$}),{46:[1,101]},V(Re,[2,29],{10:ct}),V(kt,[2,27],{16:103,4:y,5:E,6:P,8:b,11:z,13:p,17:x,18:C,19:w,20:$}),V(Ut,[2,25]),V(Ut,[2,13]),V(Ut,[2,14]),V(Ut,[2,15]),V(Ut,[2,16]),V(Ut,[2,17]),V(Ut,[2,18]),V(Ut,[2,19]),V(Ut,[2,20]),V(Ut,[2,21]),V(Ut,[2,22]),V(Re,[2,49],{10:ct}),V(Re,[2,48],{22:88,16:89,23:104,4:y,5:E,6:P,8:b,11:z,13:p,17:x,18:C,19:w,20:$}),{4:y,5:E,6:P,8:b,11:z,13:p,16:89,17:x,18:C,19:w,20:$,22:105},V(Ut,[2,26]),V(Re,[2,50],{10:ct}),V(kt,[2,28],{16:103,4:y,5:E,6:P,8:b,11:z,13:p,17:x,18:C,19:w,20:$})],defaultActions:{8:[2,30],9:[2,31]},parseError:(0,L.K2)(function(ze,Cr){if(!Cr.recoverable){var cr=new Error(ze);throw cr.hash=Cr,cr}this.trace(ze)},"parseError"),parse:(0,L.K2)(function(ze){var Cr=this,cr=[0],sr=[],$e=[null],He=[],Pr=this.table,wr="",Vr=0,xr=0,Ba=0,Qr=He.slice.call(arguments,1),ra=Object.create(this.lexer),Xr={yy:{}};for(var Rr in this.yy)Object.prototype.hasOwnProperty.call(this.yy,Rr)&&(Xr.yy[Rr]=this.yy[Rr]);ra.setInput(ze,Xr.yy),Xr.yy.lexer=ra,Xr.yy.parser=this,typeof ra.yylloc>"u"&&(ra.yylloc={});var Tr=ra.yylloc;He.push(Tr);var N=ra.options&&ra.options.ranges;function Ke(){var Fa;return"number"!=typeof(Fa=sr.pop()||ra.lex()||1)&&(Fa instanceof Array&&(Fa=(sr=Fa).pop()),Fa=Cr.symbols_[Fa]||Fa),Fa}this.parseError="function"==typeof Xr.yy.parseError?Xr.yy.parseError:Object.getPrototypeOf(this).parseError,(0,L.K2)(function Vt(Fa){cr.length=cr.length-2*Fa,$e.length=$e.length-Fa,He.length=He.length-Fa},"popStack"),(0,L.K2)(Ke,"lex");for(var rr,ia,hr,ga,_a,Ra,Jr,ha,Ma={};;){if(this.defaultActions[hr=cr[cr.length-1]]?ga=this.defaultActions[hr]:((null===rr||typeof rr>"u")&&(rr=Ke()),ga=Pr[hr]&&Pr[hr][rr]),typeof ga>"u"||!ga.length||!ga[0]){var Yr;for(Ra in ha=[],Pr[hr])this.terminals_[Ra]&&Ra>2&&ha.push("'"+this.terminals_[Ra]+"'");Yr=ra.showPosition?"Parse error on line "+(Vr+1)+":\n"+ra.showPosition()+"\nExpecting "+ha.join(", ")+", got '"+(this.terminals_[rr]||rr)+"'":"Parse error on line "+(Vr+1)+": Unexpected "+(1==rr?"end of input":"'"+(this.terminals_[rr]||rr)+"'"),this.parseError(Yr,{text:ra.match,token:this.terminals_[rr]||rr,line:ra.yylineno,loc:Tr,expected:ha})}if(ga[0]instanceof Array&&ga.length>1)throw new Error("Parse Error: multiple actions possible at state: "+hr+", token: "+rr);switch(ga[0]){case 1:cr.push(rr),$e.push(ra.yytext),He.push(ra.yylloc),cr.push(ga[1]),rr=null,ia?(rr=ia,ia=null):(xr=ra.yyleng,wr=ra.yytext,Vr=ra.yylineno,Tr=ra.yylloc,Ba>0&&Ba--);break;case 2:if(Ma.$=$e[$e.length-(Jr=this.productions_[ga[1]][1])],Ma._$={first_line:He[He.length-(Jr||1)].first_line,last_line:He[He.length-1].last_line,first_column:He[He.length-(Jr||1)].first_column,last_column:He[He.length-1].last_column},N&&(Ma._$.range=[He[He.length-(Jr||1)].range[0],He[He.length-1].range[1]]),typeof(_a=this.performAction.apply(Ma,[wr,xr,Vr,Xr.yy,ga[1],$e,He].concat(Qr)))<"u")return _a;Jr&&(cr=cr.slice(0,-1*Jr*2),$e=$e.slice(0,-1*Jr),He=He.slice(0,-1*Jr)),cr.push(this.productions_[ga[1]][0]),$e.push(Ma.$),He.push(Ma._$),cr.push(Pr[cr[cr.length-2]][cr[cr.length-1]]);break;case 3:return!0}}return!0},"parse")};function ue(){this.yy={}}return Ht.lexer=function(){return{EOF:1,parseError:(0,L.K2)(function(Cr,cr){if(!this.yy.parser)throw new Error(Cr);this.yy.parser.parseError(Cr,cr)},"parseError"),setInput:(0,L.K2)(function(ze,Cr){return this.yy=Cr||this.yy||{},this._input=ze,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},"setInput"),input:(0,L.K2)(function(){var ze=this._input[0];return this.yytext+=ze,this.yyleng++,this.offset++,this.match+=ze,this.matched+=ze,ze.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),ze},"input"),unput:(0,L.K2)(function(ze){var Cr=ze.length,cr=ze.split(/(?:\r\n?|\n)/g);this._input=ze+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-Cr),this.offset-=Cr;var sr=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),cr.length-1&&(this.yylineno-=cr.length-1);var $e=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:cr?(cr.length===sr.length?this.yylloc.first_column:0)+sr[sr.length-cr.length].length-cr[0].length:this.yylloc.first_column-Cr},this.options.ranges&&(this.yylloc.range=[$e[0],$e[0]+this.yyleng-Cr]),this.yyleng=this.yytext.length,this},"unput"),more:(0,L.K2)(function(){return this._more=!0,this},"more"),reject:(0,L.K2)(function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},"reject"),less:(0,L.K2)(function(ze){this.unput(this.match.slice(ze))},"less"),pastInput:(0,L.K2)(function(){var ze=this.matched.substr(0,this.matched.length-this.match.length);return(ze.length>20?"...":"")+ze.substr(-20).replace(/\n/g,"")},"pastInput"),upcomingInput:(0,L.K2)(function(){var ze=this.match;return ze.length<20&&(ze+=this._input.substr(0,20-ze.length)),(ze.substr(0,20)+(ze.length>20?"...":"")).replace(/\n/g,"")},"upcomingInput"),showPosition:(0,L.K2)(function(){var ze=this.pastInput(),Cr=new Array(ze.length+1).join("-");return ze+this.upcomingInput()+"\n"+Cr+"^"},"showPosition"),test_match:(0,L.K2)(function(ze,Cr){var cr,sr,$e;if(this.options.backtrack_lexer&&($e={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&($e.yylloc.range=this.yylloc.range.slice(0))),(sr=ze[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=sr.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:sr?sr[sr.length-1].length-sr[sr.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+ze[0].length},this.yytext+=ze[0],this.match+=ze[0],this.matches=ze,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(ze[0].length),this.matched+=ze[0],cr=this.performAction.call(this,this.yy,this,Cr,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),cr)return cr;if(this._backtrack){for(var He in $e)this[He]=$e[He];return!1}return!1},"test_match"),next:(0,L.K2)(function(){if(this.done)return this.EOF;var ze,Cr,cr,sr;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var $e=this._currentRules(),He=0;He<$e.length;He++)if((cr=this._input.match(this.rules[$e[He]]))&&(!Cr||cr[0].length>Cr[0].length)){if(Cr=cr,sr=He,this.options.backtrack_lexer){if(!1!==(ze=this.test_match(cr,$e[He])))return ze;if(this._backtrack){Cr=!1;continue}return!1}if(!this.options.flex)break}return Cr?!1!==(ze=this.test_match(Cr,$e[sr]))&&ze:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},"next"),lex:(0,L.K2)(function(){return this.next()||this.lex()},"lex"),begin:(0,L.K2)(function(Cr){this.conditionStack.push(Cr)},"begin"),popState:(0,L.K2)(function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},"popState"),_currentRules:(0,L.K2)(function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},"_currentRules"),topState:(0,L.K2)(function(Cr){return(Cr=this.conditionStack.length-1-Math.abs(Cr||0))>=0?this.conditionStack[Cr]:"INITIAL"},"topState"),pushState:(0,L.K2)(function(Cr){this.begin(Cr)},"pushState"),stateStackSize:(0,L.K2)(function(){return this.conditionStack.length},"stateStackSize"),options:{"case-insensitive":!0},performAction:(0,L.K2)(function(Cr,cr,sr,$e){switch(sr){case 0:case 1:case 3:break;case 2:return 55;case 4:return this.begin("title"),35;case 5:return this.popState(),"title_value";case 6:return this.begin("acc_title"),37;case 7:return this.popState(),"acc_title_value";case 8:return this.begin("acc_descr"),39;case 9:return this.popState(),"acc_descr_value";case 10:this.begin("acc_descr_multiline");break;case 11:case 23:case 25:case 31:this.popState();break;case 12:return"acc_descr_multiline_value";case 13:return 48;case 14:return 50;case 15:return 49;case 16:return 51;case 17:return 52;case 18:return 53;case 19:return 54;case 20:return 25;case 21:this.begin("md_string");break;case 22:return"MD_STR";case 24:this.begin("string");break;case 26:return"STR";case 27:this.begin("class_name");break;case 28:return this.popState(),47;case 29:return this.begin("point_start"),44;case 30:return this.begin("point_x"),45;case 32:this.popState(),this.begin("point_y");break;case 33:return this.popState(),46;case 34:return 28;case 35:return 4;case 36:return 11;case 37:return 64;case 38:return 10;case 39:case 40:return 65;case 41:return 14;case 42:return 13;case 43:return 67;case 44:return 66;case 45:return 12;case 46:return 8;case 47:return 5;case 48:return 18;case 49:return 56;case 50:return 63;case 51:return 57}},"anonymous"),rules:[/^(?:%%(?!\{)[^\n]*)/i,/^(?:[^\}]%%[^\n]*)/i,/^(?:[\n\r]+)/i,/^(?:%%[^\n]*)/i,/^(?:title\b)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?: *x-axis *)/i,/^(?: *y-axis *)/i,/^(?: *--+> *)/i,/^(?: *quadrant-1 *)/i,/^(?: *quadrant-2 *)/i,/^(?: *quadrant-3 *)/i,/^(?: *quadrant-4 *)/i,/^(?:classDef\b)/i,/^(?:["][`])/i,/^(?:[^`"]+)/i,/^(?:[`]["])/i,/^(?:["])/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?::::)/i,/^(?:^\w+)/i,/^(?:\s*:\s*\[\s*)/i,/^(?:(1)|(0(.\d+)?))/i,/^(?:\s*\] *)/i,/^(?:\s*,\s*)/i,/^(?:(1)|(0(.\d+)?))/i,/^(?: *quadrantChart *)/i,/^(?:[A-Za-z]+)/i,/^(?::)/i,/^(?:\+)/i,/^(?:,)/i,/^(?:=)/i,/^(?:=)/i,/^(?:\*)/i,/^(?:#)/i,/^(?:[\_])/i,/^(?:\.)/i,/^(?:&)/i,/^(?:-)/i,/^(?:[0-9]+)/i,/^(?:\s)/i,/^(?:;)/i,/^(?:[!"#$%&'*+,-.`?\\_/])/i,/^(?:$)/i],conditions:{class_name:{rules:[28],inclusive:!1},point_y:{rules:[33],inclusive:!1},point_x:{rules:[32],inclusive:!1},point_start:{rules:[30,31],inclusive:!1},acc_descr_multiline:{rules:[11,12],inclusive:!1},acc_descr:{rules:[9],inclusive:!1},acc_title:{rules:[7],inclusive:!1},title:{rules:[5],inclusive:!1},md_string:{rules:[22,23],inclusive:!1},string:{rules:[25,26],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,6,8,10,13,14,15,16,17,18,19,20,21,24,27,29,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],inclusive:!0}}}}(),(0,L.K2)(ue,"Parser"),ue.prototype=Ht,Ht.Parser=ue,new ue}();q.parser=q;var A=q,$t=(0,ee.P$)(),yt=(class{constructor(){this.classes=new Map,this.config=this.getDefaultConfig(),this.themeConfig=this.getDefaultThemeConfig(),this.data=this.getDefaultData()}getDefaultData(){return{titleText:"",quadrant1Text:"",quadrant2Text:"",quadrant3Text:"",quadrant4Text:"",xAxisLeftText:"",xAxisRightText:"",yAxisBottomText:"",yAxisTopText:"",points:[]}}getDefaultConfig(){return{showXAxis:!0,showYAxis:!0,showTitle:!0,chartHeight:ee.UI.quadrantChart?.chartWidth||500,chartWidth:ee.UI.quadrantChart?.chartHeight||500,titlePadding:ee.UI.quadrantChart?.titlePadding||10,titleFontSize:ee.UI.quadrantChart?.titleFontSize||20,quadrantPadding:ee.UI.quadrantChart?.quadrantPadding||5,xAxisLabelPadding:ee.UI.quadrantChart?.xAxisLabelPadding||5,yAxisLabelPadding:ee.UI.quadrantChart?.yAxisLabelPadding||5,xAxisLabelFontSize:ee.UI.quadrantChart?.xAxisLabelFontSize||16,yAxisLabelFontSize:ee.UI.quadrantChart?.yAxisLabelFontSize||16,quadrantLabelFontSize:ee.UI.quadrantChart?.quadrantLabelFontSize||16,quadrantTextTopPadding:ee.UI.quadrantChart?.quadrantTextTopPadding||5,pointTextPadding:ee.UI.quadrantChart?.pointTextPadding||5,pointLabelFontSize:ee.UI.quadrantChart?.pointLabelFontSize||12,pointRadius:ee.UI.quadrantChart?.pointRadius||5,xAxisPosition:ee.UI.quadrantChart?.xAxisPosition||"top",yAxisPosition:ee.UI.quadrantChart?.yAxisPosition||"left",quadrantInternalBorderStrokeWidth:ee.UI.quadrantChart?.quadrantInternalBorderStrokeWidth||1,quadrantExternalBorderStrokeWidth:ee.UI.quadrantChart?.quadrantExternalBorderStrokeWidth||2}}getDefaultThemeConfig(){return{quadrant1Fill:$t.quadrant1Fill,quadrant2Fill:$t.quadrant2Fill,quadrant3Fill:$t.quadrant3Fill,quadrant4Fill:$t.quadrant4Fill,quadrant1TextFill:$t.quadrant1TextFill,quadrant2TextFill:$t.quadrant2TextFill,quadrant3TextFill:$t.quadrant3TextFill,quadrant4TextFill:$t.quadrant4TextFill,quadrantPointFill:$t.quadrantPointFill,quadrantPointTextFill:$t.quadrantPointTextFill,quadrantXAxisTextFill:$t.quadrantXAxisTextFill,quadrantYAxisTextFill:$t.quadrantYAxisTextFill,quadrantTitleFill:$t.quadrantTitleFill,quadrantInternalBorderStrokeFill:$t.quadrantInternalBorderStrokeFill,quadrantExternalBorderStrokeFill:$t.quadrantExternalBorderStrokeFill}}clear(){this.config=this.getDefaultConfig(),this.themeConfig=this.getDefaultThemeConfig(),this.data=this.getDefaultData(),this.classes=new Map,L.Rm.info("clear called")}setData(V){this.data={...this.data,...V}}addPoints(V){this.data.points=[...V,...this.data.points]}addClass(V,pt){this.classes.set(V,pt)}setConfig(V){L.Rm.trace("setConfig called with: ",V),this.config={...this.config,...V}}setThemeConfig(V){L.Rm.trace("setThemeConfig called with: ",V),this.themeConfig={...this.themeConfig,...V}}calculateSpace(V,pt,H,Nt){const wt=2*this.config.xAxisLabelPadding+this.config.xAxisLabelFontSize,Wt={top:"top"===V&&pt?wt:0,bottom:"bottom"===V&&pt?wt:0},xe=2*this.config.yAxisLabelPadding+this.config.yAxisLabelFontSize,le={left:"left"===this.config.yAxisPosition&&H?xe:0,right:"right"===this.config.yAxisPosition&&H?xe:0},oe={top:Nt?this.config.titleFontSize+2*this.config.titlePadding:0},Ct=this.config.chartWidth-2*this.config.quadrantPadding-le.left-le.right,St=this.config.chartHeight-2*this.config.quadrantPadding-Wt.top-Wt.bottom-oe.top;return{xAxisSpace:Wt,yAxisSpace:le,titleSpace:oe,quadrantSpace:{quadrantLeft:this.config.quadrantPadding+le.left,quadrantTop:this.config.quadrantPadding+Wt.top+oe.top,quadrantWidth:Ct,quadrantHalfWidth:Ct/2,quadrantHeight:St,quadrantHalfHeight:St/2}}}getAxisLabels(V,pt,H,Nt){const{quadrantSpace:wt,titleSpace:Wt}=Nt,{quadrantHalfHeight:xe,quadrantHeight:le,quadrantLeft:Re,quadrantHalfWidth:oe,quadrantTop:qe,quadrantWidth:We}=wt,Ct=!!this.data.xAxisRightText,St=!!this.data.yAxisTopText,R=[];return this.data.xAxisLeftText&&pt&&R.push({text:this.data.xAxisLeftText,fill:this.themeConfig.quadrantXAxisTextFill,x:Re+(Ct?oe/2:0),y:"top"===V?this.config.xAxisLabelPadding+Wt.top:this.config.xAxisLabelPadding+qe+le+this.config.quadrantPadding,fontSize:this.config.xAxisLabelFontSize,verticalPos:Ct?"center":"left",horizontalPos:"top",rotation:0}),this.data.xAxisRightText&&pt&&R.push({text:this.data.xAxisRightText,fill:this.themeConfig.quadrantXAxisTextFill,x:Re+oe+(Ct?oe/2:0),y:"top"===V?this.config.xAxisLabelPadding+Wt.top:this.config.xAxisLabelPadding+qe+le+this.config.quadrantPadding,fontSize:this.config.xAxisLabelFontSize,verticalPos:Ct?"center":"left",horizontalPos:"top",rotation:0}),this.data.yAxisBottomText&&H&&R.push({text:this.data.yAxisBottomText,fill:this.themeConfig.quadrantYAxisTextFill,x:"left"===this.config.yAxisPosition?this.config.yAxisLabelPadding:this.config.yAxisLabelPadding+Re+We+this.config.quadrantPadding,y:qe+le-(St?xe/2:0),fontSize:this.config.yAxisLabelFontSize,verticalPos:St?"center":"left",horizontalPos:"top",rotation:-90}),this.data.yAxisTopText&&H&&R.push({text:this.data.yAxisTopText,fill:this.themeConfig.quadrantYAxisTextFill,x:"left"===this.config.yAxisPosition?this.config.yAxisLabelPadding:this.config.yAxisLabelPadding+Re+We+this.config.quadrantPadding,y:qe+xe-(St?xe/2:0),fontSize:this.config.yAxisLabelFontSize,verticalPos:St?"center":"left",horizontalPos:"top",rotation:-90}),R}getQuadrants(V){const{quadrantSpace:pt}=V,{quadrantHalfHeight:H,quadrantLeft:Nt,quadrantHalfWidth:wt,quadrantTop:Wt}=pt,xe=[{text:{text:this.data.quadrant1Text,fill:this.themeConfig.quadrant1TextFill,x:0,y:0,fontSize:this.config.quadrantLabelFontSize,verticalPos:"center",horizontalPos:"middle",rotation:0},x:Nt+wt,y:Wt,width:wt,height:H,fill:this.themeConfig.quadrant1Fill},{text:{text:this.data.quadrant2Text,fill:this.themeConfig.quadrant2TextFill,x:0,y:0,fontSize:this.config.quadrantLabelFontSize,verticalPos:"center",horizontalPos:"middle",rotation:0},x:Nt,y:Wt,width:wt,height:H,fill:this.themeConfig.quadrant2Fill},{text:{text:this.data.quadrant3Text,fill:this.themeConfig.quadrant3TextFill,x:0,y:0,fontSize:this.config.quadrantLabelFontSize,verticalPos:"center",horizontalPos:"middle",rotation:0},x:Nt,y:Wt+H,width:wt,height:H,fill:this.themeConfig.quadrant3Fill},{text:{text:this.data.quadrant4Text,fill:this.themeConfig.quadrant4TextFill,x:0,y:0,fontSize:this.config.quadrantLabelFontSize,verticalPos:"center",horizontalPos:"middle",rotation:0},x:Nt+wt,y:Wt+H,width:wt,height:H,fill:this.themeConfig.quadrant4Fill}];for(const le of xe)le.text.x=le.x+le.width/2,0===this.data.points.length?(le.text.y=le.y+le.height/2,le.text.horizontalPos="middle"):(le.text.y=le.y+this.config.quadrantTextTopPadding,le.text.horizontalPos="top");return xe}getQuadrantPoints(V){const{quadrantSpace:pt}=V,{quadrantHeight:H,quadrantLeft:Nt,quadrantTop:wt,quadrantWidth:Wt}=pt,xe=(0,D.m4Y)().domain([0,1]).range([Nt,Wt+Nt]),le=(0,D.m4Y)().domain([0,1]).range([H+wt,wt]);return this.data.points.map(oe=>{const qe=this.classes.get(oe.className);return qe&&(oe={...qe,...oe}),{x:xe(oe.x),y:le(oe.y),fill:oe.color??this.themeConfig.quadrantPointFill,radius:oe.radius??this.config.pointRadius,text:{text:oe.text,fill:this.themeConfig.quadrantPointTextFill,x:xe(oe.x),y:le(oe.y)+this.config.pointTextPadding,verticalPos:"center",horizontalPos:"top",fontSize:this.config.pointLabelFontSize,rotation:0},strokeColor:oe.strokeColor??this.themeConfig.quadrantPointFill,strokeWidth:oe.strokeWidth??"0px"}})}getBorders(V){const pt=this.config.quadrantExternalBorderStrokeWidth/2,{quadrantSpace:H}=V,{quadrantHalfHeight:Nt,quadrantHeight:wt,quadrantLeft:Wt,quadrantHalfWidth:xe,quadrantTop:le,quadrantWidth:Re}=H;return[{strokeFill:this.themeConfig.quadrantExternalBorderStrokeFill,strokeWidth:this.config.quadrantExternalBorderStrokeWidth,x1:Wt-pt,y1:le,x2:Wt+Re+pt,y2:le},{strokeFill:this.themeConfig.quadrantExternalBorderStrokeFill,strokeWidth:this.config.quadrantExternalBorderStrokeWidth,x1:Wt+Re,y1:le+pt,x2:Wt+Re,y2:le+wt-pt},{strokeFill:this.themeConfig.quadrantExternalBorderStrokeFill,strokeWidth:this.config.quadrantExternalBorderStrokeWidth,x1:Wt-pt,y1:le+wt,x2:Wt+Re+pt,y2:le+wt},{strokeFill:this.themeConfig.quadrantExternalBorderStrokeFill,strokeWidth:this.config.quadrantExternalBorderStrokeWidth,x1:Wt,y1:le+pt,x2:Wt,y2:le+wt-pt},{strokeFill:this.themeConfig.quadrantInternalBorderStrokeFill,strokeWidth:this.config.quadrantInternalBorderStrokeWidth,x1:Wt+xe,y1:le+pt,x2:Wt+xe,y2:le+wt-pt},{strokeFill:this.themeConfig.quadrantInternalBorderStrokeFill,strokeWidth:this.config.quadrantInternalBorderStrokeWidth,x1:Wt+pt,y1:le+Nt,x2:Wt+Re-pt,y2:le+Nt}]}getTitle(V){if(V)return{text:this.data.titleText,fill:this.themeConfig.quadrantTitleFill,fontSize:this.config.titleFontSize,horizontalPos:"top",verticalPos:"center",rotation:0,y:this.config.titlePadding,x:this.config.chartWidth/2}}build(){const V=this.config.showXAxis&&!(!this.data.xAxisLeftText&&!this.data.xAxisRightText),pt=this.config.showYAxis&&!(!this.data.yAxisTopText&&!this.data.yAxisBottomText),H=this.config.showTitle&&!!this.data.titleText,Nt=this.data.points.length>0?"bottom":this.config.xAxisPosition,wt=this.calculateSpace(Nt,V,pt,H);return{points:this.getQuadrantPoints(wt),quadrants:this.getQuadrants(wt),axisLabels:this.getAxisLabels(Nt,V,pt,wt),borderLines:this.getBorders(wt),title:this.getTitle(H)}}static#t=Rt=()=>((0,lt.A)(this,"QuadrantBuilder"),(0,L.K2)(this,"QuadrantBuilder"),this)},Rt()),Ye=(class extends Error{constructor(V,pt,H){super(`value for ${V} ${pt} is invalid, please use a valid ${H}`),this.name="InvalidStyleError"}static#t=dt=()=>((0,lt.A)(this,"InvalidStyleError"),(0,L.K2)(this,"InvalidStyleError"),this)},dt());function bt(V){return!/^#?([\dA-Fa-f]{6}|[\dA-Fa-f]{3})$/.test(V)}function Xt(V){return!/^\d+$/.test(V)}function j(V){return!/^\d+px$/.test(V)}(0,L.K2)(bt,"validateHexCode"),(0,L.K2)(Xt,"validateNumber"),(0,L.K2)(j,"validateSizeInPixels");var fr=(0,ee.D7)();function Fe(V){return(0,ee.jZ)(V.trim(),fr)}(0,L.K2)(Fe,"textSanitizer");var vr=new yt;function zr(V){vr.setData({quadrant1Text:Fe(V.text)})}function br(V){vr.setData({quadrant2Text:Fe(V.text)})}function mr(V){vr.setData({quadrant3Text:Fe(V.text)})}function Er(V){vr.setData({quadrant4Text:Fe(V.text)})}function Lr(V){vr.setData({xAxisLeftText:Fe(V.text)})}function Ar(V){vr.setData({xAxisRightText:Fe(V.text)})}function ge(V){vr.setData({yAxisTopText:Fe(V.text)})}function Br(V){vr.setData({yAxisBottomText:Fe(V.text)})}function Ge(V){const pt={};for(const H of V){const[Nt,wt]=H.trim().split(/\s*:\s*/);if("radius"===Nt){if(Xt(wt))throw new Ye(Nt,wt,"number");pt.radius=parseInt(wt)}else if("color"===Nt){if(bt(wt))throw new Ye(Nt,wt,"hex code");pt.color=wt}else if("stroke-color"===Nt){if(bt(wt))throw new Ye(Nt,wt,"hex code");pt.strokeColor=wt}else{if("stroke-width"!==Nt)throw new Error(`style named ${Nt} is not supported.`);if(j(wt))throw new Ye(Nt,wt,"number of pixels (eg. 10px)");pt.strokeWidth=wt}}return pt}function W(V,pt,H,Nt,wt){const Wt=Ge(wt);vr.addPoints([{x:H,y:Nt,text:Fe(V.text),className:pt,...Wt}])}function ft(V,pt){vr.addClass(V,Ge(pt))}function Bt(V){vr.setConfig({chartWidth:V})}function _e(V){vr.setConfig({chartHeight:V})}function Z(){const V=(0,ee.D7)(),{themeVariables:pt,quadrantChart:H}=V;return H&&vr.setConfig(H),vr.setThemeConfig({quadrant1Fill:pt.quadrant1Fill,quadrant2Fill:pt.quadrant2Fill,quadrant3Fill:pt.quadrant3Fill,quadrant4Fill:pt.quadrant4Fill,quadrant1TextFill:pt.quadrant1TextFill,quadrant2TextFill:pt.quadrant2TextFill,quadrant3TextFill:pt.quadrant3TextFill,quadrant4TextFill:pt.quadrant4TextFill,quadrantPointFill:pt.quadrantPointFill,quadrantPointTextFill:pt.quadrantPointTextFill,quadrantXAxisTextFill:pt.quadrantXAxisTextFill,quadrantYAxisTextFill:pt.quadrantYAxisTextFill,quadrantExternalBorderStrokeFill:pt.quadrantExternalBorderStrokeFill,quadrantInternalBorderStrokeFill:pt.quadrantInternalBorderStrokeFill,quadrantTitleFill:pt.quadrantTitleFill}),vr.setData({titleText:(0,ee.ab)()}),vr.build()}(0,L.K2)(zr,"setQuadrant1Text"),(0,L.K2)(br,"setQuadrant2Text"),(0,L.K2)(mr,"setQuadrant3Text"),(0,L.K2)(Er,"setQuadrant4Text"),(0,L.K2)(Lr,"setXAxisLeftText"),(0,L.K2)(Ar,"setXAxisRightText"),(0,L.K2)(ge,"setYAxisTopText"),(0,L.K2)(Br,"setYAxisBottomText"),(0,L.K2)(Ge,"parseStyles"),(0,L.K2)(W,"addPoint"),(0,L.K2)(ft,"addClass"),(0,L.K2)(Bt,"setWidth"),(0,L.K2)(_e,"setHeight"),(0,L.K2)(Z,"getQuadrantData");var qt={parser:A,db:{setWidth:Bt,setHeight:_e,setQuadrant1Text:zr,setQuadrant2Text:br,setQuadrant3Text:mr,setQuadrant4Text:Er,setXAxisLeftText:Lr,setXAxisRightText:Ar,setYAxisTopText:ge,setYAxisBottomText:Br,parseStyles:Ge,addPoint:W,addClass:ft,getQuadrantData:Z,clear:(0,L.K2)(function(){vr.clear(),(0,ee.IU)()},"clear"),setAccTitle:ee.SV,getAccTitle:ee.iN,setDiagramTitle:ee.ke,getDiagramTitle:ee.ab,getAccDescription:ee.m7,setAccDescription:ee.EI},renderer:{draw:(0,L.K2)((V,pt,H,Nt)=>{function wt(st){return"top"===st?"hanging":"middle"}function Wt(st){return"left"===st?"start":"middle"}function xe(st){return`translate(${st.x}, ${st.y}) rotate(${st.rotation||0})`}(0,L.K2)(wt,"getDominantBaseLine"),(0,L.K2)(Wt,"getTextAnchor"),(0,L.K2)(xe,"getTransformation");const le=(0,ee.D7)();L.Rm.debug("Rendering quadrant chart\n"+V);const Re=le.securityLevel;let oe;"sandbox"===Re&&(oe=(0,D.Ltv)("#i"+pt));const We=(0,D.Ltv)("sandbox"===Re?oe.nodes()[0].contentDocument.body:"body").select(`[id="${pt}"]`),Ct=We.append("g").attr("class","main"),St=le.quadrantChart?.chartWidth??500,R=le.quadrantChart?.chartHeight??500;(0,ee.a$)(We,R,St,le.quadrantChart?.useMaxWidth??!0),We.attr("viewBox","0 0 "+St+" "+R),Nt.db.setHeight(R),Nt.db.setWidth(St);const O=Nt.db.getQuadrantData(),et=Ct.append("g").attr("class","quadrants"),xt=Ct.append("g").attr("class","border"),it=Ct.append("g").attr("class","data-points"),rt=Ct.append("g").attr("class","labels"),Et=Ct.append("g").attr("class","title");O.title&&Et.append("text").attr("x",0).attr("y",0).attr("fill",O.title.fill).attr("font-size",O.title.fontSize).attr("dominant-baseline",wt(O.title.horizontalPos)).attr("text-anchor",Wt(O.title.verticalPos)).attr("transform",xe(O.title)).text(O.title.text),O.borderLines&&xt.selectAll("line").data(O.borderLines).enter().append("line").attr("x1",st=>st.x1).attr("y1",st=>st.y1).attr("x2",st=>st.x2).attr("y2",st=>st.y2).style("stroke",st=>st.strokeFill).style("stroke-width",st=>st.strokeWidth);const ut=et.selectAll("g.quadrant").data(O.quadrants).enter().append("g").attr("class","quadrant");ut.append("rect").attr("x",st=>st.x).attr("y",st=>st.y).attr("width",st=>st.width).attr("height",st=>st.height).attr("fill",st=>st.fill),ut.append("text").attr("x",0).attr("y",0).attr("fill",st=>st.text.fill).attr("font-size",st=>st.text.fontSize).attr("dominant-baseline",st=>wt(st.text.horizontalPos)).attr("text-anchor",st=>Wt(st.text.verticalPos)).attr("transform",st=>xe(st.text)).text(st=>st.text.text),rt.selectAll("g.label").data(O.axisLabels).enter().append("g").attr("class","label").append("text").attr("x",0).attr("y",0).text(st=>st.text).attr("fill",st=>st.fill).attr("font-size",st=>st.fontSize).attr("dominant-baseline",st=>wt(st.horizontalPos)).attr("text-anchor",st=>Wt(st.verticalPos)).attr("transform",st=>xe(st));const G=it.selectAll("g.data-point").data(O.points).enter().append("g").attr("class","data-point");G.append("circle").attr("cx",st=>st.x).attr("cy",st=>st.y).attr("r",st=>st.radius).attr("fill",st=>st.fill).attr("stroke",st=>st.strokeColor).attr("stroke-width",st=>st.strokeWidth),G.append("text").attr("x",0).attr("y",0).text(st=>st.text.text).attr("fill",st=>st.text.fill).attr("font-size",st=>st.text.fontSize).attr("dominant-baseline",st=>wt(st.text.horizontalPos)).attr("text-anchor",st=>Wt(st.text.verticalPos)).attr("transform",st=>xe(st.text))},"draw")},styles:(0,L.K2)(()=>"","styles")}},59355:(ti,_r,B)=>{"use strict";B.d(_r,{GZ:()=>re,Gc:()=>$t,W6:()=>Bt,WY:()=>fr,hE:()=>ae,pC:()=>bt});var lt=B(89204),ee=B(52052),L=B(79006),D=B(32303),Rt=B(40932),dt=B(40622),q=B(60997),A=B(98245),$t={body:'<g><rect width="80" height="80" style="fill: #087ebf; stroke-width: 0px;"/><text transform="translate(21.16 64.67)" style="fill: #fff; font-family: ArialMT, Arial; font-size: 67.75px;"><tspan x="0" y="0">?</tspan></text></g>',height:80,width:80},yt=new Map,Ye=new Map,bt=(0,D.K2)(Pt=>{for(const qt of Pt){if(!qt.name)throw new Error('Invalid icon loader. Must have a "name" property with non-empty string value.');if(D.Rm.debug("Registering icon pack:",qt.name),"loader"in qt)Ye.set(qt.name,qt.loader);else{if(!("icons"in qt))throw D.Rm.error("Invalid icon loader:",qt),new Error('Invalid icon loader. Must have either "icons" or "loader" property.');yt.set(qt.name,qt.icons)}}},"registerIconPacks"),Xt=(0,D.K2)(function(){var Pt=(0,lt.A)(function*(qt,V){const pt=(0,Rt.L7)(qt,!0,void 0!==V);if(!pt)throw new Error(`Invalid icon name: ${qt}`);const H=pt.prefix||V;if(!H)throw new Error(`Icon name must contain a prefix: ${qt}`);let Nt=yt.get(H);if(!Nt){const Wt=Ye.get(H);if(!Wt)throw new Error(`Icon set not found: ${pt.prefix}`);try{Nt={...yield Wt(),prefix:H},yt.set(H,Nt)}catch(xe){throw D.Rm.error(xe),new Error(`Failed to load icon set: ${pt.prefix}`)}}const wt=(0,Rt.y3)(Nt,pt.name);if(!wt)throw new Error(`Icon not found: ${qt}`);return wt});return function(qt,V){return Pt.apply(this,arguments)}}(),"getRegisteredIconData"),j=(0,D.K2)(function(){var Pt=(0,lt.A)(function*(qt){try{return yield Xt(qt),!0}catch{return!1}});return function(qt){return Pt.apply(this,arguments)}}(),"isIconAvailable"),fr=(0,D.K2)(function(){var Pt=(0,lt.A)(function*(qt,V,pt){let H;try{H=yield Xt(qt,V?.fallbackPrefix)}catch(Wt){D.Rm.error(Wt),H=$t}const Nt=(0,Rt.pu)(H,V),wt=(0,Rt.U5)((0,Rt.$W)(Nt.body),{...Nt.attributes,...pt});return(0,L.jZ)(wt,(0,L.zj)())});return function(qt,V,pt){return Pt.apply(this,arguments)}}(),"getIconSVG");function Fe(Pt,{markdownAutoWrap:qt}){const pt=Pt.replace(/<br\/>/g,"\n").replace(/\n{2,}/g,"\n"),H=(0,A.T)(pt);return!1===qt?H.replace(/ /g,"&nbsp;"):H}function vr(Pt,qt={}){const V=Fe(Pt,qt),pt=q.xI.lexer(V),H=[[]];let Nt=0;function wt(Wt,xe="normal"){"text"===Wt.type?Wt.text.split("\n").forEach((Re,oe)=>{0!==oe&&(Nt++,H.push([])),Re.split(" ").forEach(qe=>{(qe=qe.replace(/&#39;/g,"'"))&&H[Nt].push({content:qe,type:xe})})}):"strong"===Wt.type||"em"===Wt.type?Wt.tokens.forEach(le=>{wt(le,Wt.type)}):"html"===Wt.type&&H[Nt].push({content:Wt.text,type:"normal"})}return(0,D.K2)(wt,"processNode"),pt.forEach(Wt=>{"paragraph"===Wt.type?Wt.tokens?.forEach(xe=>{wt(xe)}):H[Nt].push("html"===Wt.type?{content:Wt.text,type:"normal"}:{content:Wt.raw,type:"normal"})}),H}function zr(Pt,{markdownAutoWrap:qt}={}){const V=q.xI.lexer(Pt);function pt(H){return"text"===H.type?!1===qt?H.text.replace(/\n */g,"<br/>").replace(/ /g,"&nbsp;"):H.text.replace(/\n */g,"<br/>"):"strong"===H.type?`<strong>${H.tokens?.map(pt).join("")}</strong>`:"em"===H.type?`<em>${H.tokens?.map(pt).join("")}</em>`:"paragraph"===H.type?`<p>${H.tokens?.map(pt).join("")}</p>`:"space"===H.type?"":"html"===H.type?`${H.text}`:"escape"===H.type?H.text:(D.Rm.warn(`Unsupported markdown: ${H.type}`),H.raw)}return(0,D.K2)(pt,"output"),V.map(pt).join("")}function br(Pt){return Intl.Segmenter?[...(new Intl.Segmenter).segment(Pt)].map(qt=>qt.segment):[...Pt]}function mr(Pt,qt){return Er(Pt,[],br(qt.content),qt.type)}function Er(Pt,qt,V,pt){if(0===V.length)return[{content:qt.join(""),type:pt},{content:"",type:pt}];const[H,...Nt]=V,wt=[...qt,H];return Pt([{content:wt.join(""),type:pt}])?Er(Pt,wt,Nt,pt):(0===qt.length&&H&&(qt.push(H),V.shift()),[{content:qt.join(""),type:pt},{content:V.join(""),type:pt}])}function Lr(Pt,qt){if(Pt.some(({content:V})=>V.includes("\n")))throw new Error("splitLineToFitWidth does not support newlines in the line");return Ar(Pt,qt)}function Ar(Pt,qt,V=[],pt=[]){if(0===Pt.length)return pt.length>0&&V.push(pt),V.length>0?V:[];let H="";" "===Pt[0].content&&(H=" ",Pt.shift());const Nt=Pt.shift()??{content:" ",type:"normal"},wt=[...pt];if(""!==H&&wt.push({content:H,type:"normal"}),wt.push(Nt),qt(wt))return Ar(Pt,qt,V,wt);if(pt.length>0)V.push(pt),Pt.unshift(Nt);else if(Nt.content){const[Wt,xe]=mr(qt,Nt);V.push([Wt]),xe.content&&Pt.unshift(xe)}return Ar(Pt,qt,V)}function ge(Pt,qt){qt&&Pt.attr("style",qt)}function Br(Pt,qt,V,pt){return Ge.apply(this,arguments)}function Ge(){return(Ge=(0,lt.A)(function*(Pt,qt,V,pt,H=!1,Nt=(0,L.zj)()){const wt=Pt.append("foreignObject");wt.attr("width",10*V+"px"),wt.attr("height",10*V+"px");const Wt=wt.append("xhtml:div"),xe=(0,L.Wi)(qt.label)?yield(0,L.dj)(qt.label.replace(L.Y2.lineBreakRegex,"\n"),Nt):(0,L.jZ)(qt.label,Nt),le=qt.isNode?"nodeLabel":"edgeLabel",Re=Wt.append("span");Re.html(xe),ge(Re,qt.labelStyle),Re.attr("class",`${le} ${pt}`),ge(Wt,qt.labelStyle),Wt.style("display","table-cell"),Wt.style("white-space","nowrap"),Wt.style("line-height","1.5"),Wt.style("max-width",V+"px"),Wt.style("text-align","center"),Wt.attr("xmlns","http://www.w3.org/1999/xhtml"),H&&Wt.attr("class","labelBkg");let oe=Wt.node().getBoundingClientRect();return oe.width===V&&(Wt.style("display","table"),Wt.style("white-space","break-spaces"),Wt.style("width",V+"px"),oe=Wt.node().getBoundingClientRect()),wt.node()})).apply(this,arguments)}function W(Pt,qt,V){return Pt.append("tspan").attr("class","text-outer-tspan").attr("x",0).attr("y",qt*V-.1+"em").attr("dy",V+"em")}function ft(Pt,qt,V){const pt=Pt.append("text"),H=W(pt,1,qt);Z(H,V);const Nt=H.node().getComputedTextLength();return pt.remove(),Nt}function Bt(Pt,qt,V){const pt=Pt.append("text"),H=W(pt,1,qt);Z(H,[{content:V,type:"normal"}]);const Nt=H.node()?.getBoundingClientRect();return Nt&&pt.remove(),Nt}function _e(Pt,qt,V,pt=!1){const Nt=qt.append("g"),wt=Nt.insert("rect").attr("class","background").attr("style","stroke: none"),Wt=Nt.append("text").attr("y","-10.1");let xe=0;for(const le of V){const Re=(0,D.K2)(qe=>ft(Nt,1.1,qe)<=Pt,"checkWidth"),oe=Re(le)?[le]:Lr(le,Re);for(const qe of oe)Z(W(Wt,xe,1.1),qe),xe++}if(pt){const le=Wt.node().getBBox(),Re=2;return wt.attr("x",le.x-Re).attr("y",le.y-Re).attr("width",le.width+2*Re).attr("height",le.height+2*Re),Nt.node()}return Wt.node()}function Z(Pt,qt){Pt.text(""),qt.forEach((V,pt)=>{Pt.append("tspan").attr("font-style","em"===V.type?"italic":"normal").attr("class","text-inner-tspan").attr("font-weight","strong"===V.type?"bold":"normal").text(0===pt?V.content:" "+V.content)})}function ae(Pt){return S.apply(this,arguments)}function S(){return(S=(0,lt.A)(function*(Pt,qt={}){const V=[];Pt.replace(/(fa[bklrs]?):fa-([\w-]+)/g,(H,Nt,wt)=>(V.push((0,lt.A)(function*(){const Wt=`${Nt}:${wt}`;return(yield j(Wt))?yield fr(Wt,void 0,{class:"label-icon"}):`<i class='${(0,L.jZ)(H,qt).replace(":"," ")}'></i>`})()),H));const pt=yield Promise.all(V);return Pt.replace(/(fa[bklrs]?):fa-([\w-]+)/g,()=>pt.shift()??"")})).apply(this,arguments)}(0,D.K2)(Fe,"preprocessMarkdown"),(0,D.K2)(vr,"markdownToLines"),(0,D.K2)(zr,"markdownToHTML"),(0,D.K2)(br,"splitTextToChars"),(0,D.K2)(mr,"splitWordToFitWidth"),(0,D.K2)(Er,"splitWordToFitWidthRecursion"),(0,D.K2)(Lr,"splitLineToFitWidth"),(0,D.K2)(Ar,"splitLineToFitWidthRecursion"),(0,D.K2)(ge,"applyStyle"),(0,D.K2)(Br,"addHtmlSpan"),(0,D.K2)(W,"createTspan"),(0,D.K2)(ft,"computeWidthOfText"),(0,D.K2)(Bt,"computeDimensionOfText"),(0,D.K2)(_e,"createFormattedText"),(0,D.K2)(Z,"updateTextContentAndStyles"),(0,D.K2)(ae,"replaceIconSubstring");var re=(0,D.K2)(function(){var Pt=(0,lt.A)(function*(qt,V="",{style:pt="",isTitle:H=!1,classes:Nt="",useHtmlLabels:wt=!0,isNode:Wt=!0,width:xe=200,addSvgBackground:le=!1}={},Re){if(D.Rm.debug("XYZ createText",V,pt,H,Nt,wt,Wt,"addSvgBackground: ",le),wt){const oe=zr(V,Re),qe=yield ae((0,ee.Sm)(oe),Re),We=V.replace(/\\\\/g,"\\"),Ct={isNode:Wt,label:(0,L.Wi)(V)?We:qe,labelStyle:pt.replace("fill:","color:")};return yield Br(qt,Ct,xe,Nt,le,Re)}{const We=_e(xe,qt,vr(V.replace(/<br\s*\/?>/g,"<br/>").replace("<br>","<br/>"),Re),!!V&&le);if(Wt){/stroke:/.exec(pt)&&(pt=pt.replace("stroke:","lineColor:"));const Ct=pt.replace(/stroke:[^;]+;?/g,"").replace(/stroke-width:[^;]+;?/g,"").replace(/fill:[^;]+;?/g,"").replace(/color:/g,"fill:");(0,dt.Ltv)(We).attr("style",Ct)}else{const Ct=pt.replace(/stroke:[^;]+;?/g,"").replace(/stroke-width:[^;]+;?/g,"").replace(/fill:[^;]+;?/g,"").replace(/background:/g,"fill:");(0,dt.Ltv)(We).select("rect").attr("style",Ct.replace(/background:/g,"fill:"));const St=pt.replace(/stroke:[^;]+;?/g,"").replace(/stroke-width:[^;]+;?/g,"").replace(/fill:[^;]+;?/g,"").replace(/color:/g,"fill:");(0,dt.Ltv)(We).select("text").attr("style",St)}return We}});return function(qt){return Pt.apply(this,arguments)}}(),"createText")},62033:(ti,_r,B)=>{"use strict";B.r(_r),B.d(_r,{diagram:()=>Er});var $t,lt=B(89204),ee=B(45027),L=B(69664),D=B(80525),Rt=B(52052),dt=B(79006),q=B(32303),A=B(62233),yt=dt.UI.packet,Ye=(class{constructor(){this.packet=[],this.setAccTitle=dt.SV,this.getAccTitle=dt.iN,this.setDiagramTitle=dt.ke,this.getDiagramTitle=dt.ab,this.getAccDescription=dt.m7,this.setAccDescription=dt.EI}getConfig(){const Lr=(0,Rt.$t)({...yt,...(0,dt.zj)().packet});return Lr.showBits&&(Lr.paddingY+=10),Lr}getPacket(){return this.packet}pushWord(Lr){Lr.length>0&&this.packet.push(Lr)}clear(){(0,dt.IU)(),this.packet=[]}static#t=$t=()=>((0,ee.A)(this,"PacketDB"),(0,q.K2)(this,"PacketDB"),this)},$t()),Xt=(0,q.K2)((Lr,Ar)=>{(0,D.S)(Lr,Ar);let ge=-1,Br=[],Ge=1;const{bitsPerRow:W}=Ar.getConfig();for(let{start:ft,end:Bt,bits:_e,label:Z}of Lr.blocks){if(void 0!==ft&&void 0!==Bt&&Bt<ft)throw new Error(`Packet block ${ft} - ${Bt} is invalid. End must be greater than start.`);if(ft??=ge+1,ft!==ge+1)throw new Error(`Packet block ${ft} - ${Bt??ft} is not contiguous. It should start from ${ge+1}.`);if(0===_e)throw new Error(`Packet block ${ft} is invalid. Cannot have a zero bit field.`);for(Bt??=ft+(_e??1)-1,_e??=Bt-ft+1,ge=Bt,q.Rm.debug(`Packet block ${ft} - ${ge} with label ${Z}`);Br.length<=W+1&&Ar.getPacket().length<1e4;){const[ae,S]=j({start:ft,end:Bt,bits:_e,label:Z},Ge,W);if(Br.push(ae),ae.end+1===Ge*W&&(Ar.pushWord(Br),Br=[],Ge++),!S)break;({start:ft,end:Bt,bits:_e,label:Z}=S)}}Ar.pushWord(Br)},"populate"),j=(0,q.K2)((Lr,Ar,ge)=>{if(void 0===Lr.start)throw new Error("start should have been set during first phase");if(void 0===Lr.end)throw new Error("end should have been set during first phase");if(Lr.start>Lr.end)throw new Error(`Block start ${Lr.start} is greater than block end ${Lr.end}.`);if(Lr.end+1<=Ar*ge)return[Lr,void 0];const Br=Ar*ge-1,Ge=Ar*ge;return[{start:Lr.start,end:Br,label:Lr.label,bits:Br-Lr.start},{start:Ge,end:Lr.end,label:Lr.label,bits:Lr.end-Ge}]},"getNextFittingBlock"),fr={parser:{yy:void 0},parse:(0,q.K2)(function(){var Lr=(0,lt.A)(function*(Ar){const ge=yield(0,A.qg)("packet",Ar),Br=fr.parser?.yy;if(!(Br instanceof Ye))throw new Error("parser.parser?.yy was not a PacketDB. This is due to a bug within Mermaid, please report this issue at https://github.com/mermaid-js/mermaid/issues.");q.Rm.debug(ge),Xt(ge,Br)});return function(Ar){return Lr.apply(this,arguments)}}(),"parse")},Fe=(0,q.K2)((Lr,Ar,ge,Br)=>{const Ge=Br.db,W=Ge.getConfig(),{rowHeight:ft,paddingY:Bt,bitWidth:_e,bitsPerRow:Z}=W,ae=Ge.getPacket(),S=Ge.getDiagramTitle(),re=ft+Bt,Pt=re*(ae.length+1)-(S?0:ft),qt=_e*Z+2,V=(0,L.D)(Ar);V.attr("viewbox",`0 0 ${qt} ${Pt}`),(0,dt.a$)(V,Pt,qt,W.useMaxWidth);for(const[pt,H]of ae.entries())vr(V,H,pt,W);V.append("text").text(S).attr("x",qt/2).attr("y",Pt-re/2).attr("dominant-baseline","middle").attr("text-anchor","middle").attr("class","packetTitle")},"draw"),vr=(0,q.K2)((Lr,Ar,ge,{rowHeight:Br,paddingX:Ge,paddingY:W,bitWidth:ft,bitsPerRow:Bt,showBits:_e})=>{const Z=Lr.append("g"),ae=ge*(Br+W)+W;for(const S of Ar){const re=S.start%Bt*ft+1,Pt=(S.end-S.start+1)*ft-Ge;if(Z.append("rect").attr("x",re).attr("y",ae).attr("width",Pt).attr("height",Br).attr("class","packetBlock"),Z.append("text").attr("x",re+Pt/2).attr("y",ae+Br/2).attr("class","packetLabel").attr("dominant-baseline","middle").attr("text-anchor","middle").text(S.label),!_e)continue;const qt=S.end===S.start,V=ae-2;Z.append("text").attr("x",re+(qt?Pt/2:0)).attr("y",V).attr("class","packetByte start").attr("dominant-baseline","auto").attr("text-anchor",qt?"middle":"start").text(S.start),qt||Z.append("text").attr("x",re+Pt).attr("y",V).attr("class","packetByte end").attr("dominant-baseline","auto").attr("text-anchor","end").text(S.end)}},"drawWord"),zr={draw:Fe},br={byteFontSize:"10px",startByteColor:"black",endByteColor:"black",labelColor:"black",labelFontSize:"12px",titleColor:"black",titleFontSize:"14px",blockStrokeColor:"black",blockStrokeWidth:"1",blockFillColor:"#efefef"},mr=(0,q.K2)(({packet:Lr}={})=>{const Ar=(0,Rt.$t)(br,Lr);return`\n\t.packetByte {\n\t\tfont-size: ${Ar.byteFontSize};\n\t}\n\t.packetByte.start {\n\t\tfill: ${Ar.startByteColor};\n\t}\n\t.packetByte.end {\n\t\tfill: ${Ar.endByteColor};\n\t}\n\t.packetLabel {\n\t\tfill: ${Ar.labelColor};\n\t\tfont-size: ${Ar.labelFontSize};\n\t}\n\t.packetTitle {\n\t\tfill: ${Ar.titleColor};\n\t\tfont-size: ${Ar.titleFontSize};\n\t}\n\t.packetBlock {\n\t\tstroke: ${Ar.blockStrokeColor};\n\t\tstroke-width: ${Ar.blockStrokeWidth};\n\t\tfill: ${Ar.blockFillColor};\n\t}\n\t`},"styles"),Er={parser:fr,get db(){return new Ye},renderer:zr,styles:mr}},62045:(ti,_r,B)=>{"use strict";B.d(_r,{CP:()=>A,HT:()=>yt,PB:()=>$t,aC:()=>q,lC:()=>Rt,m:()=>dt,tk:()=>D});var lt=B(79006),ee=B(32303),L=B(73986),D=(0,ee.K2)((Ye,bt)=>{const Xt=Ye.append("rect");if(Xt.attr("x",bt.x),Xt.attr("y",bt.y),Xt.attr("fill",bt.fill),Xt.attr("stroke",bt.stroke),Xt.attr("width",bt.width),Xt.attr("height",bt.height),bt.name&&Xt.attr("name",bt.name),bt.rx&&Xt.attr("rx",bt.rx),bt.ry&&Xt.attr("ry",bt.ry),void 0!==bt.attrs)for(const j in bt.attrs)Xt.attr(j,bt.attrs[j]);return bt.class&&Xt.attr("class",bt.class),Xt},"drawRect"),Rt=(0,ee.K2)((Ye,bt)=>{D(Ye,{x:bt.startx,y:bt.starty,width:bt.stopx-bt.startx,height:bt.stopy-bt.starty,fill:bt.fill,stroke:bt.stroke,class:"rect"}).lower()},"drawBackgroundRect"),dt=(0,ee.K2)((Ye,bt)=>{const Xt=bt.text.replace(lt.H1," "),j=Ye.append("text");j.attr("x",bt.x),j.attr("y",bt.y),j.attr("class","legend"),j.style("text-anchor",bt.anchor),bt.class&&j.attr("class",bt.class);const fr=j.append("tspan");return fr.attr("x",bt.x+2*bt.textMargin),fr.text(Xt),j},"drawText"),q=(0,ee.K2)((Ye,bt,Xt,j)=>{const fr=Ye.append("image");fr.attr("x",bt),fr.attr("y",Xt);const Fe=(0,L.J)(j);fr.attr("xlink:href",Fe)},"drawImage"),A=(0,ee.K2)((Ye,bt,Xt,j)=>{const fr=Ye.append("use");fr.attr("x",bt),fr.attr("y",Xt);const Fe=(0,L.J)(j);fr.attr("xlink:href",`#${Fe}`)},"drawEmbeddedImage"),$t=(0,ee.K2)(()=>({x:0,y:0,width:100,height:100,fill:"#EDF2AE",stroke:"#666",anchor:"start",rx:0,ry:0}),"getNoteRect"),yt=(0,ee.K2)(()=>({x:0,y:0,width:100,height:100,"text-anchor":"start",style:"#666",textMargin:0,rx:0,ry:0,tspan:!0}),"getTextObj")},63192:(ti,_r,B)=>{"use strict";B.r(_r),B.d(_r,{diagram:()=>V});var Bt,lt=B(53102),Ye=(B(5675),B(8086),B(72271),B(98954),B(36384),B(87452),B(32239),B(19753),B(59355),B(52052)),bt=B(79006),Xt=B(32303),j=B(40622),fr=B(42335),Fe=B(61823),vr=(0,Xt.K2)(pt=>pt.append("circle").attr("class","start-state").attr("r",(0,bt.D7)().state.sizeUnit).attr("cx",(0,bt.D7)().state.padding+(0,bt.D7)().state.sizeUnit).attr("cy",(0,bt.D7)().state.padding+(0,bt.D7)().state.sizeUnit),"drawStartState"),zr=(0,Xt.K2)(pt=>pt.append("line").style("stroke","grey").style("stroke-dasharray","3").attr("x1",(0,bt.D7)().state.textHeight).attr("class","divider").attr("x2",2*(0,bt.D7)().state.textHeight).attr("y1",0).attr("y2",0),"drawDivider"),br=(0,Xt.K2)((pt,H)=>{const Nt=pt.append("text").attr("x",2*(0,bt.D7)().state.padding).attr("y",(0,bt.D7)().state.textHeight+2*(0,bt.D7)().state.padding).attr("font-size",(0,bt.D7)().state.fontSize).attr("class","state-title").text(H.id),wt=Nt.node().getBBox();return pt.insert("rect",":first-child").attr("x",(0,bt.D7)().state.padding).attr("y",(0,bt.D7)().state.padding).attr("width",wt.width+2*(0,bt.D7)().state.padding).attr("height",wt.height+2*(0,bt.D7)().state.padding).attr("rx",(0,bt.D7)().state.radius),Nt},"drawSimpleState"),mr=(0,Xt.K2)((pt,H)=>{const Nt=(0,Xt.K2)(function(St,R,O){const et=St.append("tspan").attr("x",2*(0,bt.D7)().state.padding).text(R);O||et.attr("dy",(0,bt.D7)().state.textHeight)},"addTspan"),Wt=pt.append("text").attr("x",2*(0,bt.D7)().state.padding).attr("y",(0,bt.D7)().state.textHeight+1.3*(0,bt.D7)().state.padding).attr("font-size",(0,bt.D7)().state.fontSize).attr("class","state-title").text(H.descriptions[0]).node().getBBox(),xe=Wt.height,le=pt.append("text").attr("x",(0,bt.D7)().state.padding).attr("y",xe+.4*(0,bt.D7)().state.padding+(0,bt.D7)().state.dividerMargin+(0,bt.D7)().state.textHeight).attr("class","state-description");let Re=!0,oe=!0;H.descriptions.forEach(function(St){Re||(Nt(le,St,oe),oe=!1),Re=!1});const qe=pt.append("line").attr("x1",(0,bt.D7)().state.padding).attr("y1",(0,bt.D7)().state.padding+xe+(0,bt.D7)().state.dividerMargin/2).attr("y2",(0,bt.D7)().state.padding+xe+(0,bt.D7)().state.dividerMargin/2).attr("class","descr-divider"),We=le.node().getBBox(),Ct=Math.max(We.width,Wt.width);return qe.attr("x2",Ct+3*(0,bt.D7)().state.padding),pt.insert("rect",":first-child").attr("x",(0,bt.D7)().state.padding).attr("y",(0,bt.D7)().state.padding).attr("width",Ct+2*(0,bt.D7)().state.padding).attr("height",We.height+xe+2*(0,bt.D7)().state.padding).attr("rx",(0,bt.D7)().state.radius),pt},"drawDescrState"),Er=(0,Xt.K2)((pt,H,Nt)=>{const wt=(0,bt.D7)().state.padding,Wt=2*(0,bt.D7)().state.padding,xe=pt.node().getBBox(),le=xe.width,Re=xe.x,oe=pt.append("text").attr("x",0).attr("y",(0,bt.D7)().state.titleShift).attr("font-size",(0,bt.D7)().state.fontSize).attr("class","state-title").text(H.id),We=oe.node().getBBox().width+Wt;let St,Ct=Math.max(We,le);Ct===le&&(Ct+=Wt);const R=pt.node().getBBox();St=Re-wt,We>le&&(St=(le-Ct)/2+wt),Math.abs(Re-R.x)<wt&&We>le&&(St=Re-(We-le)/2);const O=1-(0,bt.D7)().state.textHeight;return pt.insert("rect",":first-child").attr("x",St).attr("y",O).attr("class",Nt?"alt-composit":"composit").attr("width",Ct).attr("height",R.height+(0,bt.D7)().state.textHeight+(0,bt.D7)().state.titleShift+1).attr("rx","0"),oe.attr("x",St+wt),We<=le&&oe.attr("x",Re+(Ct-Wt)/2-We/2+wt),pt.insert("rect",":first-child").attr("x",St).attr("y",(0,bt.D7)().state.titleShift-(0,bt.D7)().state.textHeight-(0,bt.D7)().state.padding).attr("width",Ct).attr("height",3*(0,bt.D7)().state.textHeight).attr("rx",(0,bt.D7)().state.radius),pt.insert("rect",":first-child").attr("x",St).attr("y",(0,bt.D7)().state.titleShift-(0,bt.D7)().state.textHeight-(0,bt.D7)().state.padding).attr("width",Ct).attr("height",R.height+3+2*(0,bt.D7)().state.textHeight).attr("rx",(0,bt.D7)().state.radius),pt},"addTitleAndBox"),Lr=(0,Xt.K2)(pt=>(pt.append("circle").attr("class","end-state-outer").attr("r",(0,bt.D7)().state.sizeUnit+(0,bt.D7)().state.miniPadding).attr("cx",(0,bt.D7)().state.padding+(0,bt.D7)().state.sizeUnit+(0,bt.D7)().state.miniPadding).attr("cy",(0,bt.D7)().state.padding+(0,bt.D7)().state.sizeUnit+(0,bt.D7)().state.miniPadding),pt.append("circle").attr("class","end-state-inner").attr("r",(0,bt.D7)().state.sizeUnit).attr("cx",(0,bt.D7)().state.padding+(0,bt.D7)().state.sizeUnit+2).attr("cy",(0,bt.D7)().state.padding+(0,bt.D7)().state.sizeUnit+2)),"drawEndState"),Ar=(0,Xt.K2)((pt,H)=>{let Nt=(0,bt.D7)().state.forkWidth,wt=(0,bt.D7)().state.forkHeight;if(H.parentId){let Wt=Nt;Nt=wt,wt=Wt}return pt.append("rect").style("stroke","black").style("fill","black").attr("width",Nt).attr("height",wt).attr("x",(0,bt.D7)().state.padding).attr("y",(0,bt.D7)().state.padding)},"drawForkJoinState"),ge=(0,Xt.K2)((pt,H,Nt,wt)=>{let Wt=0;const xe=wt.append("text");xe.style("text-anchor","start"),xe.attr("class","noteText");let le=pt.replace(/\r\n/g,"<br/>");le=le.replace(/\n/g,"<br/>");const Re=le.split(bt.Y2.lineBreakRegex);let oe=1.25*(0,bt.D7)().state.noteMargin;for(const qe of Re){const We=qe.trim();if(We.length>0){const Ct=xe.append("tspan");Ct.text(We),0===oe&&(oe+=Ct.node().getBBox().height),Wt+=oe,Ct.attr("x",H+(0,bt.D7)().state.noteMargin),Ct.attr("y",Nt+Wt+1.25*(0,bt.D7)().state.noteMargin)}}return{textWidth:xe.node().getBBox().width,textHeight:Wt}},"_drawLongText"),Br=(0,Xt.K2)((pt,H)=>{H.attr("class","state-note");const Nt=H.append("rect").attr("x",0).attr("y",(0,bt.D7)().state.padding),wt=H.append("g"),{textWidth:Wt,textHeight:xe}=ge(pt,0,0,wt);return Nt.attr("height",xe+2*(0,bt.D7)().state.noteMargin),Nt.attr("width",Wt+2*(0,bt.D7)().state.noteMargin),Nt},"drawNote"),Ge=(0,Xt.K2)(function(pt,H){const Nt=H.id,wt={id:Nt,label:H.id,width:0,height:0},Wt=pt.append("g").attr("id",Nt).attr("class","stateGroup");"start"===H.type&&vr(Wt),"end"===H.type&&Lr(Wt),("fork"===H.type||"join"===H.type)&&Ar(Wt,H),"note"===H.type&&Br(H.note.text,Wt),"divider"===H.type&&zr(Wt),"default"===H.type&&0===H.descriptions.length&&br(Wt,H),"default"===H.type&&H.descriptions.length>0&&mr(Wt,H);const xe=Wt.node().getBBox();return wt.width=xe.width+2*(0,bt.D7)().state.padding,wt.height=xe.height+2*(0,bt.D7)().state.padding,wt},"drawState"),W=0,ft=(0,Xt.K2)(function(pt,H,Nt){const wt=(0,Xt.K2)(function(oe){switch(oe){case lt.u4.relationType.AGGREGATION:return"aggregation";case lt.u4.relationType.EXTENSION:return"extension";case lt.u4.relationType.COMPOSITION:return"composition";case lt.u4.relationType.DEPENDENCY:return"dependency"}},"getRelationType");H.points=H.points.filter(oe=>!Number.isNaN(oe.y));const Wt=H.points,xe=(0,j.n8j)().x(function(oe){return oe.x}).y(function(oe){return oe.y}).curve(j.qrM),le=pt.append("path").attr("d",xe(Wt)).attr("id","edge"+W).attr("class","transition");let Re="";if((0,bt.D7)().state.arrowMarkerAbsolute&&(Re=(0,bt.ID)(!0)),le.attr("marker-end","url("+Re+"#"+wt(lt.u4.relationType.DEPENDENCY)+"End)"),void 0!==Nt.title){const oe=pt.append("g").attr("class","stateLabel"),{x:qe,y:We}=Ye._K.calcLabelPosition(H.points),Ct=bt.Y2.getRows(Nt.title);let St=0;const R=[];let O=0,et=0;for(let rt=0;rt<=Ct.length;rt++){const Et=oe.append("text").attr("text-anchor","middle").text(Ct[rt]).attr("x",qe).attr("y",We+St),ut=Et.node().getBBox();O=Math.max(O,ut.width),et=Math.min(et,ut.x),Xt.Rm.info(ut.x,qe,We+St),0===St&&(St=Et.node().getBBox().height,Xt.Rm.info("Title height",St,We)),R.push(Et)}let xt=St*Ct.length;if(Ct.length>1){const rt=(Ct.length-1)*St*.5;R.forEach((Et,ut)=>Et.attr("y",We+ut*St-rt)),xt=St*Ct.length}const it=oe.node().getBBox();oe.insert("rect",":first-child").attr("class","box").attr("x",qe-O/2-(0,bt.D7)().state.padding/2).attr("y",We-xt/2-(0,bt.D7)().state.padding/2-3.5).attr("width",O+(0,bt.D7)().state.padding).attr("height",xt+(0,bt.D7)().state.padding),Xt.Rm.info(it)}W++},"drawEdge"),_e={},Z=(0,Xt.K2)(function(){},"setConf"),ae=(0,Xt.K2)(function(pt){pt.append("defs").append("marker").attr("id","dependencyEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 19,7 L9,13 L14,7 L9,1 Z")},"insertMarkers"),S=(0,Xt.K2)(function(pt,H,Nt,wt){Bt=(0,bt.D7)().state;const Wt=(0,bt.D7)().securityLevel;let xe;"sandbox"===Wt&&(xe=(0,j.Ltv)("#i"+H));const le=(0,j.Ltv)("sandbox"===Wt?xe.nodes()[0].contentDocument.body:"body"),Re="sandbox"===Wt?xe.nodes()[0].contentDocument:document;Xt.Rm.debug("Rendering diagram "+pt);const oe=le.select(`[id='${H}']`);ae(oe);const qe=wt.db.getRootDoc();Pt(qe,oe,void 0,!1,le,Re,wt);const We=Bt.padding,Ct=oe.node().getBBox(),St=Ct.width+2*We,R=Ct.height+2*We;(0,bt.a$)(oe,R,1.75*St,Bt.useMaxWidth),oe.attr("viewBox",`${Ct.x-Bt.padding}  ${Ct.y-Bt.padding} `+St+" "+R)},"draw"),re=(0,Xt.K2)(pt=>pt?pt.length*Bt.fontSizeFactor:1,"getLabelWidth"),Pt=(0,Xt.K2)((pt,H,Nt,wt,Wt,xe,le)=>{const Re=new Fe.T({compound:!0,multigraph:!0});let oe,qe=!0;for(oe=0;oe<pt.length;oe++)if("relation"===pt[oe].stmt){qe=!1;break}Re.setGraph(Nt?{rankdir:"LR",multigraph:!0,compound:!0,ranker:"tight-tree",ranksep:qe?1:Bt.edgeLengthFactor,nodeSep:qe?1:50,isMultiGraph:!0}:{rankdir:"TB",multigraph:!0,compound:!0,ranksep:qe?1:Bt.edgeLengthFactor,nodeSep:qe?1:50,ranker:"tight-tree",isMultiGraph:!0}),Re.setDefaultEdgeLabel(function(){return{}});const We=le.db.getStates(),Ct=le.db.getRelations(),St=Object.keys(We);for(const rt of St){const Et=We[rt];let ut;if(Nt&&(Et.parentId=Nt),Et.doc){let It=H.append("g").attr("id",Et.id).attr("class","stateGroup");ut=Pt(Et.doc,It,Et.id,!wt,Wt,xe,le);{It=Er(It,Et,wt);let G=It.node().getBBox();ut.width=G.width,ut.height=G.height+Bt.padding/2,_e[Et.id]={y:Bt.compositTitleSize}}}else ut=Ge(H,Et,Re);if(Et.note){const G=Ge(H,{descriptions:[],id:Et.id+"-note",note:Et.note,type:"note"},Re);"left of"===Et.note.position?(Re.setNode(ut.id+"-note",G),Re.setNode(ut.id,ut)):(Re.setNode(ut.id,ut),Re.setNode(ut.id+"-note",G)),Re.setParent(ut.id,ut.id+"-group"),Re.setParent(ut.id+"-note",ut.id+"-group")}else Re.setNode(ut.id,ut)}Xt.Rm.debug("Count=",Re.nodeCount(),Re);let O=0;Ct.forEach(function(rt){O++,Xt.Rm.debug("Setting edge",rt),Re.setEdge(rt.id1,rt.id2,{relation:rt,width:re(rt.title),height:Bt.labelHeight*bt.Y2.getRows(rt.title).length,labelpos:"c"},"id"+O)}),(0,fr.Zp)(Re),Xt.Rm.debug("Graph after layout",Re.nodes());const et=H.node();Re.nodes().forEach(function(rt){void 0!==rt&&void 0!==Re.node(rt)?(Xt.Rm.warn("Node "+rt+": "+JSON.stringify(Re.node(rt))),Wt.select("#"+et.id+" #"+rt).attr("transform","translate("+(Re.node(rt).x-Re.node(rt).width/2)+","+(Re.node(rt).y+(_e[rt]?_e[rt].y:0)-Re.node(rt).height/2)+" )"),Wt.select("#"+et.id+" #"+rt).attr("data-x-shift",Re.node(rt).x-Re.node(rt).width/2),xe.querySelectorAll("#"+et.id+" #"+rt+" .divider").forEach(ut=>{const It=ut.parentElement;let G=0,st=0;It&&(It.parentElement&&(G=It.parentElement.getBBox().width),st=parseInt(It.getAttribute("data-x-shift"),10),Number.isNaN(st)&&(st=0)),ut.setAttribute("x1",0-st+8),ut.setAttribute("x2",G-st-8)})):Xt.Rm.debug("No Node "+rt+": "+JSON.stringify(Re.node(rt)))});let xt=et.getBBox();Re.edges().forEach(function(rt){void 0!==rt&&void 0!==Re.edge(rt)&&(Xt.Rm.debug("Edge "+rt.v+" -> "+rt.w+": "+JSON.stringify(Re.edge(rt))),ft(H,Re.edge(rt),Re.edge(rt).relation))}),xt=et.getBBox();const it={id:Nt||"root",label:Nt||"root",width:0,height:0};return it.width=xt.width+2*Bt.padding,it.height=xt.height+2*Bt.padding,Xt.Rm.debug("Doc rendered",it,Re),it},"renderDoc"),qt={setConf:Z,draw:S},V={parser:lt.Zk,get db(){return new lt.u4(1)},renderer:qt,styles:lt.tM,init:(0,Xt.K2)(pt=>{pt.state||(pt.state={}),pt.state.arrowMarkerAbsolute=pt.arrowMarkerAbsolute},"init")}},64693:function(ti){ti.exports=function(){"use strict";return function(B,lt,ee){var L=function(dt){return dt.add(4-dt.isoWeekday(),"day")},D=lt.prototype;D.isoWeekYear=function(){return L(this).year()},D.isoWeek=function(dt){if(!this.$utils().u(dt))return this.add(7*(dt-this.isoWeek()),"day");var q,$t,yt,Ye=L(this),bt=(q=this.isoWeekYear(),yt=4-($t=(this.$u?ee.utc:ee)().year(q).startOf("year")).isoWeekday(),$t.isoWeekday()>4&&(yt+=7),$t.add(yt,"day"));return Ye.diff(bt,"week")+1},D.isoWeekday=function(dt){return this.$utils().u(dt)?this.day()||7:this.day(this.day()%7?dt:dt-7)};var Rt=D.startOf;D.startOf=function(dt,q){var A=this.$utils(),$t=!!A.u(q)||q;return"isoweek"===A.p(dt)?$t?this.date(this.date()-(this.isoWeekday()-1)).startOf("day"):this.date(this.date()-1-(this.isoWeekday()-1)+7).endOf("day"):Rt.bind(this)(dt,q)}}}()},67040:(ti,_r,B)=>{"use strict";B.d(_r,{m:()=>D});var L,lt=B(45027),ee=B(32303),D=(class{constructor(Rt){this.init=Rt,this.records=this.init()}reset(){this.records=this.init()}static#t=L=()=>((0,lt.A)(this,"ImperativeState"),(0,ee.K2)(this,"ImperativeState"),this)},L())},67137:(ti,_r,B)=>{"use strict";B.r(_r),B.d(_r,{diagram:()=>ur});var A,$t,yt,Ye,bt,Xt,j,fr,Fe,vr,lt=B(45027),ee=B(69664),L=B(59355),D=B(52052),Rt=B(79006),dt=B(32303),q=B(40622),zr=function(){var Kt=(0,dt.K2)(function(Ht,zt,ue,je){for(ue=ue||{},je=Ht.length;je--;ue[Ht[je]]=zt);return ue},"o"),Pe=[1,10,12,14,16,18,19,21,23],ir=[2,6],me=[1,3],ce=[1,5],ke=[1,6],Te=[1,7],er=[1,5,10,12,14,16,18,19,21,23,34,35,36],Xe=[1,25],Ir=[1,26],Ee=[1,28],qr=[1,29],nr=[1,30],te=[1,31],ne=[1,32],Le=[1,33],tr=[1,34],g=[1,35],y=[1,36],E=[1,37],P=[1,43],b=[1,42],z=[1,47],p=[1,50],x=[1,10,12,14,16,18,19,21,23,34,35,36],C=[1,10,12,14,16,18,19,21,23,24,26,27,28,34,35,36],w=[1,10,12,14,16,18,19,21,23,24,26,27,28,34,35,36,41,42,43,44,45,46,47,48,49,50],$=[1,64],ct={trace:(0,dt.K2)(function(){},"trace"),yy:{},symbols_:{error:2,start:3,eol:4,XYCHART:5,chartConfig:6,document:7,CHART_ORIENTATION:8,statement:9,title:10,text:11,X_AXIS:12,parseXAxis:13,Y_AXIS:14,parseYAxis:15,LINE:16,plotData:17,BAR:18,acc_title:19,acc_title_value:20,acc_descr:21,acc_descr_value:22,acc_descr_multiline_value:23,SQUARE_BRACES_START:24,commaSeparatedNumbers:25,SQUARE_BRACES_END:26,NUMBER_WITH_DECIMAL:27,COMMA:28,xAxisData:29,bandData:30,ARROW_DELIMITER:31,commaSeparatedTexts:32,yAxisData:33,NEWLINE:34,SEMI:35,EOF:36,alphaNum:37,STR:38,MD_STR:39,alphaNumToken:40,AMP:41,NUM:42,ALPHA:43,PLUS:44,EQUALS:45,MULT:46,DOT:47,BRKT:48,MINUS:49,UNDERSCORE:50,$accept:0,$end:1},terminals_:{2:"error",5:"XYCHART",8:"CHART_ORIENTATION",10:"title",12:"X_AXIS",14:"Y_AXIS",16:"LINE",18:"BAR",19:"acc_title",20:"acc_title_value",21:"acc_descr",22:"acc_descr_value",23:"acc_descr_multiline_value",24:"SQUARE_BRACES_START",26:"SQUARE_BRACES_END",27:"NUMBER_WITH_DECIMAL",28:"COMMA",31:"ARROW_DELIMITER",34:"NEWLINE",35:"SEMI",36:"EOF",38:"STR",39:"MD_STR",41:"AMP",42:"NUM",43:"ALPHA",44:"PLUS",45:"EQUALS",46:"MULT",47:"DOT",48:"BRKT",49:"MINUS",50:"UNDERSCORE"},productions_:[0,[3,2],[3,3],[3,2],[3,1],[6,1],[7,0],[7,2],[9,2],[9,2],[9,2],[9,2],[9,2],[9,3],[9,2],[9,3],[9,2],[9,2],[9,1],[17,3],[25,3],[25,1],[13,1],[13,2],[13,1],[29,1],[29,3],[30,3],[32,3],[32,1],[15,1],[15,2],[15,1],[33,3],[4,1],[4,1],[4,1],[11,1],[11,1],[11,1],[37,1],[37,2],[40,1],[40,1],[40,1],[40,1],[40,1],[40,1],[40,1],[40,1],[40,1],[40,1]],performAction:(0,dt.K2)(function(zt,ue,je,ze,Cr,cr,sr){var $e=cr.length-1;switch(Cr){case 5:ze.setOrientation(cr[$e]);break;case 9:ze.setDiagramTitle(cr[$e].text.trim());break;case 12:ze.setLineData({text:"",type:"text"},cr[$e]);break;case 13:ze.setLineData(cr[$e-1],cr[$e]);break;case 14:ze.setBarData({text:"",type:"text"},cr[$e]);break;case 15:ze.setBarData(cr[$e-1],cr[$e]);break;case 16:this.$=cr[$e].trim(),ze.setAccTitle(this.$);break;case 17:case 18:this.$=cr[$e].trim(),ze.setAccDescription(this.$);break;case 19:case 27:this.$=cr[$e-1];break;case 20:this.$=[Number(cr[$e-2]),...cr[$e]];break;case 21:this.$=[Number(cr[$e])];break;case 22:ze.setXAxisTitle(cr[$e]);break;case 23:ze.setXAxisTitle(cr[$e-1]);break;case 24:ze.setXAxisTitle({type:"text",text:""});break;case 25:ze.setXAxisBand(cr[$e]);break;case 26:ze.setXAxisRangeData(Number(cr[$e-2]),Number(cr[$e]));break;case 28:this.$=[cr[$e-2],...cr[$e]];break;case 29:this.$=[cr[$e]];break;case 30:ze.setYAxisTitle(cr[$e]);break;case 31:ze.setYAxisTitle(cr[$e-1]);break;case 32:ze.setYAxisTitle({type:"text",text:""});break;case 33:ze.setYAxisRangeData(Number(cr[$e-2]),Number(cr[$e]));break;case 37:case 38:this.$={text:cr[$e],type:"text"};break;case 39:this.$={text:cr[$e],type:"markdown"};break;case 40:this.$=cr[$e];break;case 41:this.$=cr[$e-1]+""+cr[$e]}},"anonymous"),table:[Kt(Pe,ir,{3:1,4:2,7:4,5:me,34:ce,35:ke,36:Te}),{1:[3]},Kt(Pe,ir,{4:2,7:4,3:8,5:me,34:ce,35:ke,36:Te}),Kt(Pe,ir,{4:2,7:4,6:9,3:10,5:me,8:[1,11],34:ce,35:ke,36:Te}),{1:[2,4],9:12,10:[1,13],12:[1,14],14:[1,15],16:[1,16],18:[1,17],19:[1,18],21:[1,19],23:[1,20]},Kt(er,[2,34]),Kt(er,[2,35]),Kt(er,[2,36]),{1:[2,1]},Kt(Pe,ir,{4:2,7:4,3:21,5:me,34:ce,35:ke,36:Te}),{1:[2,3]},Kt(er,[2,5]),Kt(Pe,[2,7],{4:22,34:ce,35:ke,36:Te}),{11:23,37:24,38:Xe,39:Ir,40:27,41:Ee,42:qr,43:nr,44:te,45:ne,46:Le,47:tr,48:g,49:y,50:E},{11:39,13:38,24:P,27:b,29:40,30:41,37:24,38:Xe,39:Ir,40:27,41:Ee,42:qr,43:nr,44:te,45:ne,46:Le,47:tr,48:g,49:y,50:E},{11:45,15:44,27:z,33:46,37:24,38:Xe,39:Ir,40:27,41:Ee,42:qr,43:nr,44:te,45:ne,46:Le,47:tr,48:g,49:y,50:E},{11:49,17:48,24:p,37:24,38:Xe,39:Ir,40:27,41:Ee,42:qr,43:nr,44:te,45:ne,46:Le,47:tr,48:g,49:y,50:E},{11:52,17:51,24:p,37:24,38:Xe,39:Ir,40:27,41:Ee,42:qr,43:nr,44:te,45:ne,46:Le,47:tr,48:g,49:y,50:E},{20:[1,53]},{22:[1,54]},Kt(x,[2,18]),{1:[2,2]},Kt(x,[2,8]),Kt(x,[2,9]),Kt(C,[2,37],{40:55,41:Ee,42:qr,43:nr,44:te,45:ne,46:Le,47:tr,48:g,49:y,50:E}),Kt(C,[2,38]),Kt(C,[2,39]),Kt(w,[2,40]),Kt(w,[2,42]),Kt(w,[2,43]),Kt(w,[2,44]),Kt(w,[2,45]),Kt(w,[2,46]),Kt(w,[2,47]),Kt(w,[2,48]),Kt(w,[2,49]),Kt(w,[2,50]),Kt(w,[2,51]),Kt(x,[2,10]),Kt(x,[2,22],{30:41,29:56,24:P,27:b}),Kt(x,[2,24]),Kt(x,[2,25]),{31:[1,57]},{11:59,32:58,37:24,38:Xe,39:Ir,40:27,41:Ee,42:qr,43:nr,44:te,45:ne,46:Le,47:tr,48:g,49:y,50:E},Kt(x,[2,11]),Kt(x,[2,30],{33:60,27:z}),Kt(x,[2,32]),{31:[1,61]},Kt(x,[2,12]),{17:62,24:p},{25:63,27:$},Kt(x,[2,14]),{17:65,24:p},Kt(x,[2,16]),Kt(x,[2,17]),Kt(w,[2,41]),Kt(x,[2,23]),{27:[1,66]},{26:[1,67]},{26:[2,29],28:[1,68]},Kt(x,[2,31]),{27:[1,69]},Kt(x,[2,13]),{26:[1,70]},{26:[2,21],28:[1,71]},Kt(x,[2,15]),Kt(x,[2,26]),Kt(x,[2,27]),{11:59,32:72,37:24,38:Xe,39:Ir,40:27,41:Ee,42:qr,43:nr,44:te,45:ne,46:Le,47:tr,48:g,49:y,50:E},Kt(x,[2,33]),Kt(x,[2,19]),{25:73,27:$},{26:[2,28]},{26:[2,20]}],defaultActions:{8:[2,1],10:[2,3],21:[2,2],72:[2,28],73:[2,20]},parseError:(0,dt.K2)(function(zt,ue){if(!ue.recoverable){var je=new Error(zt);throw je.hash=ue,je}this.trace(zt)},"parseError"),parse:(0,dt.K2)(function(zt){var ue=this,je=[0],ze=[],Cr=[null],cr=[],sr=this.table,$e="",He=0,Pr=0,wr=0,Ba=cr.slice.call(arguments,1),Zr=Object.create(this.lexer),Oa={yy:{}};for(var Qr in this.yy)Object.prototype.hasOwnProperty.call(this.yy,Qr)&&(Oa.yy[Qr]=this.yy[Qr]);Zr.setInput(zt,Oa.yy),Oa.yy.lexer=Zr,Oa.yy.parser=this,typeof Zr.yylloc>"u"&&(Zr.yylloc={});var ra=Zr.yylloc;cr.push(ra);var Xr=Zr.options&&Zr.options.ranges;function Tr(){var ca;return"number"!=typeof(ca=ze.pop()||Zr.lex()||1)&&(ca instanceof Array&&(ca=(ze=ca).pop()),ca=ue.symbols_[ca]||ca),ca}this.parseError="function"==typeof Oa.yy.parseError?Oa.yy.parseError:Object.getPrototypeOf(this).parseError,(0,dt.K2)(function Rr(ca){je.length=je.length-2*ca,Cr.length=Cr.length-ca,cr.length=cr.length-ca},"popStack"),(0,dt.K2)(Tr,"lex");for(var N,Vt,Ke,rr,hr,or,_a,Ra,ga={};;){if(this.defaultActions[Ke=je[je.length-1]]?rr=this.defaultActions[Ke]:((null===N||typeof N>"u")&&(N=Tr()),rr=sr[Ke]&&sr[Ke][N]),typeof rr>"u"||!rr.length||!rr[0]){var Jr;for(or in Ra=[],sr[Ke])this.terminals_[or]&&or>2&&Ra.push("'"+this.terminals_[or]+"'");Jr=Zr.showPosition?"Parse error on line "+(He+1)+":\n"+Zr.showPosition()+"\nExpecting "+Ra.join(", ")+", got '"+(this.terminals_[N]||N)+"'":"Parse error on line "+(He+1)+": Unexpected "+(1==N?"end of input":"'"+(this.terminals_[N]||N)+"'"),this.parseError(Jr,{text:Zr.match,token:this.terminals_[N]||N,line:Zr.yylineno,loc:ra,expected:Ra})}if(rr[0]instanceof Array&&rr.length>1)throw new Error("Parse Error: multiple actions possible at state: "+Ke+", token: "+N);switch(rr[0]){case 1:je.push(N),Cr.push(Zr.yytext),cr.push(Zr.yylloc),je.push(rr[1]),N=null,Vt?(N=Vt,Vt=null):(Pr=Zr.yyleng,$e=Zr.yytext,He=Zr.yylineno,ra=Zr.yylloc,wr>0&&wr--);break;case 2:if(ga.$=Cr[Cr.length-(_a=this.productions_[rr[1]][1])],ga._$={first_line:cr[cr.length-(_a||1)].first_line,last_line:cr[cr.length-1].last_line,first_column:cr[cr.length-(_a||1)].first_column,last_column:cr[cr.length-1].last_column},Xr&&(ga._$.range=[cr[cr.length-(_a||1)].range[0],cr[cr.length-1].range[1]]),typeof(hr=this.performAction.apply(ga,[$e,Pr,He,Oa.yy,rr[1],Cr,cr].concat(Ba)))<"u")return hr;_a&&(je=je.slice(0,-1*_a*2),Cr=Cr.slice(0,-1*_a),cr=cr.slice(0,-1*_a)),je.push(this.productions_[rr[1]][0]),Cr.push(ga.$),cr.push(ga._$),je.push(sr[je[je.length-2]][je[je.length-1]]);break;case 3:return!0}}return!0},"parse")};function Ut(){this.yy={}}return ct.lexer=function(){return{EOF:1,parseError:(0,dt.K2)(function(ue,je){if(!this.yy.parser)throw new Error(ue);this.yy.parser.parseError(ue,je)},"parseError"),setInput:(0,dt.K2)(function(zt,ue){return this.yy=ue||this.yy||{},this._input=zt,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},"setInput"),input:(0,dt.K2)(function(){var zt=this._input[0];return this.yytext+=zt,this.yyleng++,this.offset++,this.match+=zt,this.matched+=zt,zt.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),zt},"input"),unput:(0,dt.K2)(function(zt){var ue=zt.length,je=zt.split(/(?:\r\n?|\n)/g);this._input=zt+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-ue),this.offset-=ue;var ze=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),je.length-1&&(this.yylineno-=je.length-1);var Cr=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:je?(je.length===ze.length?this.yylloc.first_column:0)+ze[ze.length-je.length].length-je[0].length:this.yylloc.first_column-ue},this.options.ranges&&(this.yylloc.range=[Cr[0],Cr[0]+this.yyleng-ue]),this.yyleng=this.yytext.length,this},"unput"),more:(0,dt.K2)(function(){return this._more=!0,this},"more"),reject:(0,dt.K2)(function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},"reject"),less:(0,dt.K2)(function(zt){this.unput(this.match.slice(zt))},"less"),pastInput:(0,dt.K2)(function(){var zt=this.matched.substr(0,this.matched.length-this.match.length);return(zt.length>20?"...":"")+zt.substr(-20).replace(/\n/g,"")},"pastInput"),upcomingInput:(0,dt.K2)(function(){var zt=this.match;return zt.length<20&&(zt+=this._input.substr(0,20-zt.length)),(zt.substr(0,20)+(zt.length>20?"...":"")).replace(/\n/g,"")},"upcomingInput"),showPosition:(0,dt.K2)(function(){var zt=this.pastInput(),ue=new Array(zt.length+1).join("-");return zt+this.upcomingInput()+"\n"+ue+"^"},"showPosition"),test_match:(0,dt.K2)(function(zt,ue){var je,ze,Cr;if(this.options.backtrack_lexer&&(Cr={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(Cr.yylloc.range=this.yylloc.range.slice(0))),(ze=zt[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=ze.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:ze?ze[ze.length-1].length-ze[ze.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+zt[0].length},this.yytext+=zt[0],this.match+=zt[0],this.matches=zt,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(zt[0].length),this.matched+=zt[0],je=this.performAction.call(this,this.yy,this,ue,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),je)return je;if(this._backtrack){for(var cr in Cr)this[cr]=Cr[cr];return!1}return!1},"test_match"),next:(0,dt.K2)(function(){if(this.done)return this.EOF;var zt,ue,je,ze;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var Cr=this._currentRules(),cr=0;cr<Cr.length;cr++)if((je=this._input.match(this.rules[Cr[cr]]))&&(!ue||je[0].length>ue[0].length)){if(ue=je,ze=cr,this.options.backtrack_lexer){if(!1!==(zt=this.test_match(je,Cr[cr])))return zt;if(this._backtrack){ue=!1;continue}return!1}if(!this.options.flex)break}return ue?!1!==(zt=this.test_match(ue,Cr[ze]))&&zt:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},"next"),lex:(0,dt.K2)(function(){return this.next()||this.lex()},"lex"),begin:(0,dt.K2)(function(ue){this.conditionStack.push(ue)},"begin"),popState:(0,dt.K2)(function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},"popState"),_currentRules:(0,dt.K2)(function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},"_currentRules"),topState:(0,dt.K2)(function(ue){return(ue=this.conditionStack.length-1-Math.abs(ue||0))>=0?this.conditionStack[ue]:"INITIAL"},"topState"),pushState:(0,dt.K2)(function(ue){this.begin(ue)},"pushState"),stateStackSize:(0,dt.K2)(function(){return this.conditionStack.length},"stateStackSize"),options:{"case-insensitive":!0},performAction:(0,dt.K2)(function(ue,je,ze,Cr){switch(ze){case 0:case 1:case 5:case 44:break;case 2:case 3:return this.popState(),34;case 4:return 34;case 6:return 10;case 7:return this.pushState("acc_title"),19;case 8:return this.popState(),"acc_title_value";case 9:return this.pushState("acc_descr"),21;case 10:return this.popState(),"acc_descr_value";case 11:this.pushState("acc_descr_multiline");break;case 12:case 26:case 28:this.popState();break;case 13:return"acc_descr_multiline_value";case 14:case 15:return 5;case 16:return 8;case 17:return this.pushState("axis_data"),"X_AXIS";case 18:return this.pushState("axis_data"),"Y_AXIS";case 19:return this.pushState("axis_band_data"),24;case 20:return 31;case 21:return this.pushState("data"),16;case 22:return this.pushState("data"),18;case 23:return this.pushState("data_inner"),24;case 24:return 27;case 25:return this.popState(),26;case 27:this.pushState("string");break;case 29:return"STR";case 30:return 24;case 31:return 26;case 32:return 43;case 33:return"COLON";case 34:return 44;case 35:return 28;case 36:return 45;case 37:return 46;case 38:return 48;case 39:return 50;case 40:return 47;case 41:return 41;case 42:return 49;case 43:return 42;case 45:return 35;case 46:return 36}},"anonymous"),rules:[/^(?:%%(?!\{)[^\n]*)/i,/^(?:[^\}]%%[^\n]*)/i,/^(?:(\r?\n))/i,/^(?:(\r?\n))/i,/^(?:[\n\r]+)/i,/^(?:%%[^\n]*)/i,/^(?:title\b)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:\{)/i,/^(?:[^\}]*)/i,/^(?:xychart-beta\b)/i,/^(?:xychart\b)/i,/^(?:(?:vertical|horizontal))/i,/^(?:x-axis\b)/i,/^(?:y-axis\b)/i,/^(?:\[)/i,/^(?:-->)/i,/^(?:line\b)/i,/^(?:bar\b)/i,/^(?:\[)/i,/^(?:[+-]?(?:\d+(?:\.\d+)?|\.\d+))/i,/^(?:\])/i,/^(?:(?:`\)                                    \{ this\.pushState\(md_string\); \}\n<md_string>\(\?:\(\?!`"\)\.\)\+                  \{ return MD_STR; \}\n<md_string>\(\?:`))/i,/^(?:["])/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:\[)/i,/^(?:\])/i,/^(?:[A-Za-z]+)/i,/^(?::)/i,/^(?:\+)/i,/^(?:,)/i,/^(?:=)/i,/^(?:\*)/i,/^(?:#)/i,/^(?:[\_])/i,/^(?:\.)/i,/^(?:&)/i,/^(?:-)/i,/^(?:[0-9]+)/i,/^(?:\s+)/i,/^(?:;)/i,/^(?:$)/i],conditions:{data_inner:{rules:[0,1,4,5,6,7,9,11,14,15,16,17,18,21,22,24,25,26,27,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46],inclusive:!0},data:{rules:[0,1,3,4,5,6,7,9,11,14,15,16,17,18,21,22,23,26,27,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46],inclusive:!0},axis_band_data:{rules:[0,1,4,5,6,7,9,11,14,15,16,17,18,21,22,25,26,27,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46],inclusive:!0},axis_data:{rules:[0,1,2,4,5,6,7,9,11,14,15,16,17,18,19,20,21,22,24,26,27,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46],inclusive:!0},acc_descr_multiline:{rules:[12,13],inclusive:!1},acc_descr:{rules:[10],inclusive:!1},acc_title:{rules:[8],inclusive:!1},title:{rules:[],inclusive:!1},md_string:{rules:[],inclusive:!1},string:{rules:[28,29],inclusive:!1},INITIAL:{rules:[0,1,4,5,6,7,9,11,14,15,16,17,18,21,22,26,27,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46],inclusive:!0}}}}(),(0,dt.K2)(Ut,"Parser"),Ut.prototype=ct,ct.Parser=Ut,new Ut}();zr.parser=zr;var br=zr;function mr(Kt){return"bar"===Kt.type}function Er(Kt){return"band"===Kt.type}function Lr(Kt){return"linear"===Kt.type}(0,dt.K2)(mr,"isBarPlot"),(0,dt.K2)(Er,"isBandAxisData"),(0,dt.K2)(Lr,"isLinearAxisData");var Ar=(class{constructor(Kt){this.parentGroup=Kt}getMaxDimension(Kt,Pe){if(!this.parentGroup)return{width:Kt.reduce((ce,ke)=>Math.max(ke.length,ce),0)*Pe,height:Pe};const ir={width:0,height:0},me=this.parentGroup.append("g").attr("visibility","hidden").attr("font-size",Pe);for(const ce of Kt){const ke=(0,L.W6)(me,1,ce),er=ke?ke.height:Pe;ir.width=Math.max(ir.width,ke?ke.width:ce.length*Pe),ir.height=Math.max(ir.height,er)}return me.remove(),ir}static#t=A=()=>((0,lt.A)(this,"TextDimensionCalculatorWithFont"),(0,dt.K2)(this,"TextDimensionCalculatorWithFont"),this)},A()),Ge=(class{constructor(Kt,Pe,ir,me){this.axisConfig=Kt,this.title=Pe,this.textDimensionCalculator=ir,this.axisThemeConfig=me,this.boundingRect={x:0,y:0,width:0,height:0},this.axisPosition="left",this.showTitle=!1,this.showLabel=!1,this.showTick=!1,this.showAxisLine=!1,this.outerPadding=0,this.titleTextHeight=0,this.labelTextHeight=0,this.range=[0,10],this.boundingRect={x:0,y:0,width:0,height:0},this.axisPosition="left"}setRange(Kt){this.range=Kt,"left"===this.axisPosition||"right"===this.axisPosition?this.boundingRect.height=Kt[1]-Kt[0]:this.boundingRect.width=Kt[1]-Kt[0],this.recalculateScale()}getRange(){return[this.range[0]+this.outerPadding,this.range[1]-this.outerPadding]}setAxisPosition(Kt){this.axisPosition=Kt,this.setRange(this.range)}getTickDistance(){const Kt=this.getRange();return Math.abs(Kt[0]-Kt[1])/this.getTickValues().length}getAxisOuterPadding(){return this.outerPadding}getLabelDimension(){return this.textDimensionCalculator.getMaxDimension(this.getTickValues().map(Kt=>Kt.toString()),this.axisConfig.labelFontSize)}recalculateOuterPaddingToDrawBar(){.7*this.getTickDistance()>2*this.outerPadding&&(this.outerPadding=Math.floor(.7*this.getTickDistance()/2)),this.recalculateScale()}calculateSpaceIfDrawnHorizontally(Kt){let Pe=Kt.height;if(this.axisConfig.showAxisLine&&Pe>this.axisConfig.axisLineWidth&&(Pe-=this.axisConfig.axisLineWidth,this.showAxisLine=!0),this.axisConfig.showLabel){const ir=this.getLabelDimension();this.outerPadding=Math.min(ir.width/2,.2*Kt.width);const ce=ir.height+2*this.axisConfig.labelPadding;this.labelTextHeight=ir.height,ce<=Pe&&(Pe-=ce,this.showLabel=!0)}if(this.axisConfig.showTick&&Pe>=this.axisConfig.tickLength&&(this.showTick=!0,Pe-=this.axisConfig.tickLength),this.axisConfig.showTitle&&this.title){const ir=this.textDimensionCalculator.getMaxDimension([this.title],this.axisConfig.titleFontSize),me=ir.height+2*this.axisConfig.titlePadding;this.titleTextHeight=ir.height,me<=Pe&&(Pe-=me,this.showTitle=!0)}this.boundingRect.width=Kt.width,this.boundingRect.height=Kt.height-Pe}calculateSpaceIfDrawnVertical(Kt){let Pe=Kt.width;if(this.axisConfig.showAxisLine&&Pe>this.axisConfig.axisLineWidth&&(Pe-=this.axisConfig.axisLineWidth,this.showAxisLine=!0),this.axisConfig.showLabel){const ir=this.getLabelDimension();this.outerPadding=Math.min(ir.height/2,.2*Kt.height);const ce=ir.width+2*this.axisConfig.labelPadding;ce<=Pe&&(Pe-=ce,this.showLabel=!0)}if(this.axisConfig.showTick&&Pe>=this.axisConfig.tickLength&&(this.showTick=!0,Pe-=this.axisConfig.tickLength),this.axisConfig.showTitle&&this.title){const ir=this.textDimensionCalculator.getMaxDimension([this.title],this.axisConfig.titleFontSize),me=ir.height+2*this.axisConfig.titlePadding;this.titleTextHeight=ir.height,me<=Pe&&(Pe-=me,this.showTitle=!0)}this.boundingRect.width=Kt.width-Pe,this.boundingRect.height=Kt.height}calculateSpace(Kt){return"left"===this.axisPosition||"right"===this.axisPosition?this.calculateSpaceIfDrawnVertical(Kt):this.calculateSpaceIfDrawnHorizontally(Kt),this.recalculateScale(),{width:this.boundingRect.width,height:this.boundingRect.height}}setBoundingBoxXY(Kt){this.boundingRect.x=Kt.x,this.boundingRect.y=Kt.y}getDrawableElementsForLeftAxis(){const Kt=[];if(this.showAxisLine){const Pe=this.boundingRect.x+this.boundingRect.width-this.axisConfig.axisLineWidth/2;Kt.push({type:"path",groupTexts:["left-axis","axisl-line"],data:[{path:`M ${Pe},${this.boundingRect.y} L ${Pe},${this.boundingRect.y+this.boundingRect.height} `,strokeFill:this.axisThemeConfig.axisLineColor,strokeWidth:this.axisConfig.axisLineWidth}]})}if(this.showLabel&&Kt.push({type:"text",groupTexts:["left-axis","label"],data:this.getTickValues().map(Pe=>({text:Pe.toString(),x:this.boundingRect.x+this.boundingRect.width-(this.showLabel?this.axisConfig.labelPadding:0)-(this.showTick?this.axisConfig.tickLength:0)-(this.showAxisLine?this.axisConfig.axisLineWidth:0),y:this.getScaleValue(Pe),fill:this.axisThemeConfig.labelColor,fontSize:this.axisConfig.labelFontSize,rotation:0,verticalPos:"middle",horizontalPos:"right"}))}),this.showTick){const Pe=this.boundingRect.x+this.boundingRect.width-(this.showAxisLine?this.axisConfig.axisLineWidth:0);Kt.push({type:"path",groupTexts:["left-axis","ticks"],data:this.getTickValues().map(ir=>({path:`M ${Pe},${this.getScaleValue(ir)} L ${Pe-this.axisConfig.tickLength},${this.getScaleValue(ir)}`,strokeFill:this.axisThemeConfig.tickColor,strokeWidth:this.axisConfig.tickWidth}))})}return this.showTitle&&Kt.push({type:"text",groupTexts:["left-axis","title"],data:[{text:this.title,x:this.boundingRect.x+this.axisConfig.titlePadding,y:this.boundingRect.y+this.boundingRect.height/2,fill:this.axisThemeConfig.titleColor,fontSize:this.axisConfig.titleFontSize,rotation:270,verticalPos:"top",horizontalPos:"center"}]}),Kt}getDrawableElementsForBottomAxis(){const Kt=[];if(this.showAxisLine){const Pe=this.boundingRect.y+this.axisConfig.axisLineWidth/2;Kt.push({type:"path",groupTexts:["bottom-axis","axis-line"],data:[{path:`M ${this.boundingRect.x},${Pe} L ${this.boundingRect.x+this.boundingRect.width},${Pe}`,strokeFill:this.axisThemeConfig.axisLineColor,strokeWidth:this.axisConfig.axisLineWidth}]})}if(this.showLabel&&Kt.push({type:"text",groupTexts:["bottom-axis","label"],data:this.getTickValues().map(Pe=>({text:Pe.toString(),x:this.getScaleValue(Pe),y:this.boundingRect.y+this.axisConfig.labelPadding+(this.showTick?this.axisConfig.tickLength:0)+(this.showAxisLine?this.axisConfig.axisLineWidth:0),fill:this.axisThemeConfig.labelColor,fontSize:this.axisConfig.labelFontSize,rotation:0,verticalPos:"top",horizontalPos:"center"}))}),this.showTick){const Pe=this.boundingRect.y+(this.showAxisLine?this.axisConfig.axisLineWidth:0);Kt.push({type:"path",groupTexts:["bottom-axis","ticks"],data:this.getTickValues().map(ir=>({path:`M ${this.getScaleValue(ir)},${Pe} L ${this.getScaleValue(ir)},${Pe+this.axisConfig.tickLength}`,strokeFill:this.axisThemeConfig.tickColor,strokeWidth:this.axisConfig.tickWidth}))})}return this.showTitle&&Kt.push({type:"text",groupTexts:["bottom-axis","title"],data:[{text:this.title,x:this.range[0]+(this.range[1]-this.range[0])/2,y:this.boundingRect.y+this.boundingRect.height-this.axisConfig.titlePadding-this.titleTextHeight,fill:this.axisThemeConfig.titleColor,fontSize:this.axisConfig.titleFontSize,rotation:0,verticalPos:"top",horizontalPos:"center"}]}),Kt}getDrawableElementsForTopAxis(){const Kt=[];if(this.showAxisLine){const Pe=this.boundingRect.y+this.boundingRect.height-this.axisConfig.axisLineWidth/2;Kt.push({type:"path",groupTexts:["top-axis","axis-line"],data:[{path:`M ${this.boundingRect.x},${Pe} L ${this.boundingRect.x+this.boundingRect.width},${Pe}`,strokeFill:this.axisThemeConfig.axisLineColor,strokeWidth:this.axisConfig.axisLineWidth}]})}if(this.showLabel&&Kt.push({type:"text",groupTexts:["top-axis","label"],data:this.getTickValues().map(Pe=>({text:Pe.toString(),x:this.getScaleValue(Pe),y:this.boundingRect.y+(this.showTitle?this.titleTextHeight+2*this.axisConfig.titlePadding:0)+this.axisConfig.labelPadding,fill:this.axisThemeConfig.labelColor,fontSize:this.axisConfig.labelFontSize,rotation:0,verticalPos:"top",horizontalPos:"center"}))}),this.showTick){const Pe=this.boundingRect.y;Kt.push({type:"path",groupTexts:["top-axis","ticks"],data:this.getTickValues().map(ir=>({path:`M ${this.getScaleValue(ir)},${Pe+this.boundingRect.height-(this.showAxisLine?this.axisConfig.axisLineWidth:0)} L ${this.getScaleValue(ir)},${Pe+this.boundingRect.height-this.axisConfig.tickLength-(this.showAxisLine?this.axisConfig.axisLineWidth:0)}`,strokeFill:this.axisThemeConfig.tickColor,strokeWidth:this.axisConfig.tickWidth}))})}return this.showTitle&&Kt.push({type:"text",groupTexts:["top-axis","title"],data:[{text:this.title,x:this.boundingRect.x+this.boundingRect.width/2,y:this.boundingRect.y+this.axisConfig.titlePadding,fill:this.axisThemeConfig.titleColor,fontSize:this.axisConfig.titleFontSize,rotation:0,verticalPos:"top",horizontalPos:"center"}]}),Kt}getDrawableElements(){if("left"===this.axisPosition)return this.getDrawableElementsForLeftAxis();if("right"===this.axisPosition)throw Error("Drawing of right axis is not implemented");return"bottom"===this.axisPosition?this.getDrawableElementsForBottomAxis():"top"===this.axisPosition?this.getDrawableElementsForTopAxis():[]}static#t=$t=()=>((0,lt.A)(this,"BaseAxis"),(0,dt.K2)(this,"BaseAxis"),this)},$t()),W=(class extends Ge{constructor(Kt,Pe,ir,me,ce){super(Kt,me,ce,Pe),this.categories=ir,this.scale=(0,q.WH)().domain(this.categories).range(this.getRange())}setRange(Kt){super.setRange(Kt)}recalculateScale(){this.scale=(0,q.WH)().domain(this.categories).range(this.getRange()).paddingInner(1).paddingOuter(0).align(.5),dt.Rm.trace("BandAxis axis final categories, range: ",this.categories,this.getRange())}getTickValues(){return this.categories}getScaleValue(Kt){return this.scale(Kt)??this.getRange()[0]}static#t=yt=()=>((0,lt.A)(this,"BandAxis"),(0,dt.K2)(this,"BandAxis"),this)},yt()),ft=(class extends Ge{constructor(Kt,Pe,ir,me,ce){super(Kt,me,ce,Pe),this.domain=ir,this.scale=(0,q.m4Y)().domain(this.domain).range(this.getRange())}getTickValues(){return this.scale.ticks()}recalculateScale(){const Kt=[...this.domain];"left"===this.axisPosition&&Kt.reverse(),this.scale=(0,q.m4Y)().domain(Kt).range(this.getRange())}getScaleValue(Kt){return this.scale(Kt)}static#t=Ye=()=>((0,lt.A)(this,"LinearAxis"),(0,dt.K2)(this,"LinearAxis"),this)},Ye());function Bt(Kt,Pe,ir,me){const ce=new Ar(me);return Er(Kt)?new W(Pe,ir,Kt.categories,Kt.title,ce):new ft(Pe,ir,[Kt.min,Kt.max],Kt.title,ce)}(0,dt.K2)(Bt,"getAxis");var _e=(class{constructor(Kt,Pe,ir,me){this.textDimensionCalculator=Kt,this.chartConfig=Pe,this.chartData=ir,this.chartThemeConfig=me,this.boundingRect={x:0,y:0,width:0,height:0},this.showChartTitle=!1}setBoundingBoxXY(Kt){this.boundingRect.x=Kt.x,this.boundingRect.y=Kt.y}calculateSpace(Kt){const Pe=this.textDimensionCalculator.getMaxDimension([this.chartData.title],this.chartConfig.titleFontSize),ir=Math.max(Pe.width,Kt.width),me=Pe.height+2*this.chartConfig.titlePadding;return Pe.width<=ir&&Pe.height<=me&&this.chartConfig.showTitle&&this.chartData.title&&(this.boundingRect.width=ir,this.boundingRect.height=me,this.showChartTitle=!0),{width:this.boundingRect.width,height:this.boundingRect.height}}getDrawableElements(){const Kt=[];return this.showChartTitle&&Kt.push({groupTexts:["chart-title"],type:"text",data:[{fontSize:this.chartConfig.titleFontSize,text:this.chartData.title,verticalPos:"middle",horizontalPos:"center",x:this.boundingRect.x+this.boundingRect.width/2,y:this.boundingRect.y+this.boundingRect.height/2,fill:this.chartThemeConfig.titleColor,rotation:0}]}),Kt}static#t=bt=()=>((0,lt.A)(this,"ChartTitle"),(0,dt.K2)(this,"ChartTitle"),this)},bt());function Z(Kt,Pe,ir,me){const ce=new Ar(me);return new _e(ce,Kt,Pe,ir)}(0,dt.K2)(Z,"getChartTitleComponent");var ae=(class{constructor(Kt,Pe,ir,me,ce){this.plotData=Kt,this.xAxis=Pe,this.yAxis=ir,this.orientation=me,this.plotIndex=ce}getDrawableElement(){const Kt=this.plotData.data.map(ir=>[this.xAxis.getScaleValue(ir[0]),this.yAxis.getScaleValue(ir[1])]);let Pe;return Pe="horizontal"===this.orientation?(0,q.n8j)().y(ir=>ir[0]).x(ir=>ir[1])(Kt):(0,q.n8j)().x(ir=>ir[0]).y(ir=>ir[1])(Kt),Pe?[{groupTexts:["plot",`line-plot-${this.plotIndex}`],type:"path",data:[{path:Pe,strokeFill:this.plotData.strokeFill,strokeWidth:this.plotData.strokeWidth}]}]:[]}static#t=Xt=()=>((0,lt.A)(this,"LinePlot"),(0,dt.K2)(this,"LinePlot"),this)},Xt()),S=(class{constructor(Kt,Pe,ir,me,ce,ke){this.barData=Kt,this.boundingRect=Pe,this.xAxis=ir,this.yAxis=me,this.orientation=ce,this.plotIndex=ke}getDrawableElement(){const Kt=this.barData.data.map(ce=>[this.xAxis.getScaleValue(ce[0]),this.yAxis.getScaleValue(ce[1])]),ir=.95*Math.min(2*this.xAxis.getAxisOuterPadding(),this.xAxis.getTickDistance()),me=ir/2;return"horizontal"===this.orientation?[{groupTexts:["plot",`bar-plot-${this.plotIndex}`],type:"rect",data:Kt.map(ce=>({x:this.boundingRect.x,y:ce[0]-me,height:ir,width:ce[1]-this.boundingRect.x,fill:this.barData.fill,strokeWidth:0,strokeFill:this.barData.fill}))}]:[{groupTexts:["plot",`bar-plot-${this.plotIndex}`],type:"rect",data:Kt.map(ce=>({x:ce[0]-me,y:ce[1],width:ir,height:this.boundingRect.y+this.boundingRect.height-ce[1],fill:this.barData.fill,strokeWidth:0,strokeFill:this.barData.fill}))}]}static#t=j=()=>((0,lt.A)(this,"BarPlot"),(0,dt.K2)(this,"BarPlot"),this)},j()),re=(class{constructor(Kt,Pe,ir){this.chartConfig=Kt,this.chartData=Pe,this.chartThemeConfig=ir,this.boundingRect={x:0,y:0,width:0,height:0}}setAxes(Kt,Pe){this.xAxis=Kt,this.yAxis=Pe}setBoundingBoxXY(Kt){this.boundingRect.x=Kt.x,this.boundingRect.y=Kt.y}calculateSpace(Kt){return this.boundingRect.width=Kt.width,this.boundingRect.height=Kt.height,{width:this.boundingRect.width,height:this.boundingRect.height}}getDrawableElements(){if(!this.xAxis||!this.yAxis)throw Error("Axes must be passed to render Plots");const Kt=[];for(const[Pe,ir]of this.chartData.plots.entries())switch(ir.type){case"line":{const me=new ae(ir,this.xAxis,this.yAxis,this.chartConfig.chartOrientation,Pe);Kt.push(...me.getDrawableElement())}break;case"bar":{const me=new S(ir,this.boundingRect,this.xAxis,this.yAxis,this.chartConfig.chartOrientation,Pe);Kt.push(...me.getDrawableElement())}}return Kt}static#t=fr=()=>((0,lt.A)(this,"BasePlot"),(0,dt.K2)(this,"BasePlot"),this)},fr());function Pt(Kt,Pe,ir){return new re(Kt,Pe,ir)}(0,dt.K2)(Pt,"getPlotComponent");var H,qt=(class{constructor(Kt,Pe,ir,me){this.chartConfig=Kt,this.chartData=Pe,this.componentStore={title:Z(Kt,Pe,ir,me),plot:Pt(Kt,Pe,ir),xAxis:Bt(Pe.xAxis,Kt.xAxis,{titleColor:ir.xAxisTitleColor,labelColor:ir.xAxisLabelColor,tickColor:ir.xAxisTickColor,axisLineColor:ir.xAxisLineColor},me),yAxis:Bt(Pe.yAxis,Kt.yAxis,{titleColor:ir.yAxisTitleColor,labelColor:ir.yAxisLabelColor,tickColor:ir.yAxisTickColor,axisLineColor:ir.yAxisLineColor},me)}}calculateVerticalSpace(){let Kt=this.chartConfig.width,Pe=this.chartConfig.height,ir=0,me=0,ce=Math.floor(Kt*this.chartConfig.plotReservedSpacePercent/100),ke=Math.floor(Pe*this.chartConfig.plotReservedSpacePercent/100),Te=this.componentStore.plot.calculateSpace({width:ce,height:ke});Kt-=Te.width,Pe-=Te.height,Te=this.componentStore.title.calculateSpace({width:this.chartConfig.width,height:Pe}),me=Te.height,Pe-=Te.height,this.componentStore.xAxis.setAxisPosition("bottom"),Te=this.componentStore.xAxis.calculateSpace({width:Kt,height:Pe}),Pe-=Te.height,this.componentStore.yAxis.setAxisPosition("left"),Te=this.componentStore.yAxis.calculateSpace({width:Kt,height:Pe}),ir=Te.width,Kt-=Te.width,Kt>0&&(ce+=Kt,Kt=0),Pe>0&&(ke+=Pe,Pe=0),this.componentStore.plot.calculateSpace({width:ce,height:ke}),this.componentStore.plot.setBoundingBoxXY({x:ir,y:me}),this.componentStore.xAxis.setRange([ir,ir+ce]),this.componentStore.xAxis.setBoundingBoxXY({x:ir,y:me+ke}),this.componentStore.yAxis.setRange([me,me+ke]),this.componentStore.yAxis.setBoundingBoxXY({x:0,y:me}),this.chartData.plots.some(er=>mr(er))&&this.componentStore.xAxis.recalculateOuterPaddingToDrawBar()}calculateHorizontalSpace(){let Kt=this.chartConfig.width,Pe=this.chartConfig.height,ir=0,me=0,ce=0,ke=Math.floor(Kt*this.chartConfig.plotReservedSpacePercent/100),Te=Math.floor(Pe*this.chartConfig.plotReservedSpacePercent/100),er=this.componentStore.plot.calculateSpace({width:ke,height:Te});Kt-=er.width,Pe-=er.height,er=this.componentStore.title.calculateSpace({width:this.chartConfig.width,height:Pe}),ir=er.height,Pe-=er.height,this.componentStore.xAxis.setAxisPosition("left"),er=this.componentStore.xAxis.calculateSpace({width:Kt,height:Pe}),Kt-=er.width,me=er.width,this.componentStore.yAxis.setAxisPosition("top"),er=this.componentStore.yAxis.calculateSpace({width:Kt,height:Pe}),Pe-=er.height,ce=ir+er.height,Kt>0&&(ke+=Kt,Kt=0),Pe>0&&(Te+=Pe,Pe=0),this.componentStore.plot.calculateSpace({width:ke,height:Te}),this.componentStore.plot.setBoundingBoxXY({x:me,y:ce}),this.componentStore.yAxis.setRange([me,me+ke]),this.componentStore.yAxis.setBoundingBoxXY({x:me,y:ir}),this.componentStore.xAxis.setRange([ce,ce+Te]),this.componentStore.xAxis.setBoundingBoxXY({x:0,y:ce}),this.chartData.plots.some(Xe=>mr(Xe))&&this.componentStore.xAxis.recalculateOuterPaddingToDrawBar()}calculateSpace(){"horizontal"===this.chartConfig.chartOrientation?this.calculateHorizontalSpace():this.calculateVerticalSpace()}getDrawableElement(){this.calculateSpace();const Kt=[];this.componentStore.plot.setAxes(this.componentStore.xAxis,this.componentStore.yAxis);for(const Pe of Object.values(this.componentStore))Kt.push(...Pe.getDrawableElements());return Kt}static#t=Fe=()=>((0,lt.A)(this,"Orchestrator"),(0,dt.K2)(this,"Orchestrator"),this)},Fe()),V=(class{static build(Kt,Pe,ir,me){return new qt(Kt,Pe,ir,me).getDrawableElement()}static#t=vr=()=>((0,lt.A)(this,"XYChartBuilder"),(0,dt.K2)(this,"XYChartBuilder"),this)},vr()),pt=0,Nt=qe(),wt=oe(),Wt={yAxis:{type:"linear",title:"",min:1/0,max:-1/0},xAxis:{type:"band",title:"",categories:[]},title:"",plots:[]},xe=wt.plotColorPalette.split(",").map(Kt=>Kt.trim()),le=!1,Re=!1;function oe(){const Kt=(0,Rt.P$)(),Pe=(0,Rt.zj)();return(0,D.$t)(Kt.xyChart,Pe.themeVariables.xyChart)}function qe(){const Kt=(0,Rt.zj)();return(0,D.$t)(Rt.UI.xyChart,Kt.xyChart)}function Ct(Kt){const Pe=(0,Rt.zj)();return(0,Rt.jZ)(Kt.trim(),Pe)}function St(Kt){H=Kt}function R(Kt){Nt.chartOrientation="horizontal"===Kt?"horizontal":"vertical"}function O(Kt){Wt.xAxis.title=Ct(Kt.text)}function et(Kt,Pe){Wt.xAxis={type:"linear",title:Wt.xAxis.title,min:Kt,max:Pe},le=!0}function xt(Kt){Wt.xAxis={type:"band",title:Wt.xAxis.title,categories:Kt.map(Pe=>Ct(Pe.text))},le=!0}function it(Kt){Wt.yAxis.title=Ct(Kt.text)}function rt(Kt,Pe){Wt.yAxis={type:"linear",title:Wt.yAxis.title,min:Kt,max:Pe},Re=!0}function Et(Kt){const Pe=Math.min(...Kt),ir=Math.max(...Kt),me=Lr(Wt.yAxis)?Wt.yAxis.min:1/0,ce=Lr(Wt.yAxis)?Wt.yAxis.max:-1/0;Wt.yAxis={type:"linear",title:Wt.yAxis.title,min:Math.min(me,Pe),max:Math.max(ce,ir)}}function ut(Kt){let Pe=[];if(0===Kt.length)return Pe;if(!le){const ir=Lr(Wt.xAxis)?Wt.xAxis.min:1/0,me=Lr(Wt.xAxis)?Wt.xAxis.max:-1/0;et(Math.min(ir,1),Math.max(me,Kt.length))}if(Re||Et(Kt),Er(Wt.xAxis)&&(Pe=Wt.xAxis.categories.map((ir,me)=>[ir,Kt[me]])),Lr(Wt.xAxis)){const ir=Wt.xAxis.min,me=Wt.xAxis.max,ce=(me-ir)/(Kt.length-1),ke=[];for(let Te=ir;Te<=me;Te+=ce)ke.push(`${Te}`);Pe=ke.map((Te,er)=>[Te,Kt[er]])}return Pe}function It(Kt){return xe[0===Kt?0:Kt%xe.length]}function G(Kt,Pe){const ir=ut(Pe);Wt.plots.push({type:"line",strokeFill:It(pt),strokeWidth:2,data:ir}),pt++}function st(Kt,Pe){const ir=ut(Pe);Wt.plots.push({type:"bar",fill:It(pt),data:ir}),pt++}function Ce(){if(0===Wt.plots.length)throw Error("No Plot to render, please provide a plot with some data");return Wt.title=(0,Rt.ab)(),V.build(Nt,Wt,wt,H)}function Ot(){return wt}function Jt(){return Nt}function fe(){return Wt}(0,dt.K2)(oe,"getChartDefaultThemeConfig"),(0,dt.K2)(qe,"getChartDefaultConfig"),(0,dt.K2)(function We(){return{yAxis:{type:"linear",title:"",min:1/0,max:-1/0},xAxis:{type:"band",title:"",categories:[]},title:"",plots:[]}},"getChartDefaultData"),(0,dt.K2)(Ct,"textSanitizer"),(0,dt.K2)(St,"setTmpSVGG"),(0,dt.K2)(R,"setOrientation"),(0,dt.K2)(O,"setXAxisTitle"),(0,dt.K2)(et,"setXAxisRangeData"),(0,dt.K2)(xt,"setXAxisBand"),(0,dt.K2)(it,"setYAxisTitle"),(0,dt.K2)(rt,"setYAxisRangeData"),(0,dt.K2)(Et,"setYAxisRangeFromPlotData"),(0,dt.K2)(ut,"transformDataWithoutCategory"),(0,dt.K2)(It,"getPlotColorFromPalette"),(0,dt.K2)(G,"setLineData"),(0,dt.K2)(st,"setBarData"),(0,dt.K2)(Ce,"getDrawableElem"),(0,dt.K2)(Ot,"getChartThemeConfig"),(0,dt.K2)(Jt,"getChartConfig"),(0,dt.K2)(fe,"getXYChartData");var ur={parser:br,db:{getDrawableElem:Ce,clear:(0,dt.K2)(function(){(0,Rt.IU)(),pt=0,Nt=qe(),Wt={yAxis:{type:"linear",title:"",min:1/0,max:-1/0},xAxis:{type:"band",title:"",categories:[]},title:"",plots:[]},wt=oe(),xe=wt.plotColorPalette.split(",").map(Kt=>Kt.trim()),le=!1,Re=!1},"clear"),setAccTitle:Rt.SV,getAccTitle:Rt.iN,setDiagramTitle:Rt.ke,getDiagramTitle:Rt.ab,getAccDescription:Rt.m7,setAccDescription:Rt.EI,setOrientation:R,setXAxisTitle:O,setXAxisRangeData:et,setXAxisBand:xt,setYAxisTitle:it,setYAxisRangeData:rt,setLineData:G,setBarData:st,setTmpSVGG:St,getChartThemeConfig:Ot,getChartConfig:Jt,getXYChartData:fe},renderer:{draw:(0,dt.K2)((Kt,Pe,ir,me)=>{const ce=me.db,ke=ce.getChartThemeConfig(),Te=ce.getChartConfig(),er=ce.getXYChartData().plots[0].data.map(E=>E[1]);function Xe(E){return"top"===E?"text-before-edge":"middle"}function Ir(E){return"left"===E?"start":"right"===E?"end":"middle"}function Ee(E){return`translate(${E.x}, ${E.y}) rotate(${E.rotation||0})`}(0,dt.K2)(Xe,"getDominantBaseLine"),(0,dt.K2)(Ir,"getTextAnchor"),(0,dt.K2)(Ee,"getTextTransformation"),dt.Rm.debug("Rendering xychart chart\n"+Kt);const qr=(0,ee.D)(Pe),nr=qr.append("g").attr("class","main"),te=nr.append("rect").attr("width",Te.width).attr("height",Te.height).attr("class","background");(0,Rt.a$)(qr,Te.height,Te.width,!0),qr.attr("viewBox",`0 0 ${Te.width} ${Te.height}`),te.attr("fill",ke.backgroundColor),ce.setTmpSVGG(qr.append("g").attr("class","mermaid-tmp-group"));const ne=ce.getDrawableElem(),Le={};function tr(E){let P=nr,b="";for(const[z]of E.entries()){let p=nr;z>0&&Le[b]&&(p=Le[b]),b+=E[z],P=Le[b],P||(P=Le[b]=p.append("g").attr("class",E[z]))}return P}(0,dt.K2)(tr,"getGroup");for(const E of ne){if(0===E.data.length)continue;const P=tr(E.groupTexts);switch(E.type){case"rect":if(P.selectAll("rect").data(E.data).enter().append("rect").attr("x",b=>b.x).attr("y",b=>b.y).attr("width",b=>b.width).attr("height",b=>b.height).attr("fill",b=>b.fill).attr("stroke",b=>b.strokeFill).attr("stroke-width",b=>b.strokeWidth),Te.showDataLabel)if("horizontal"===Te.chartOrientation){let b=function(w,$){const{data:ct,label:kt}=w;return $*kt.length*z<=ct.width-10};(0,dt.K2)(b,"fitsHorizontally");const z=.7,p=E.data.map((w,$)=>({data:w,label:er[$].toString()})).filter(w=>w.data.width>0&&w.data.height>0),x=p.map(w=>{const{data:$}=w;let ct=.7*$.height;for(;!b(w,ct)&&ct>0;)ct-=1;return ct}),C=Math.floor(Math.min(...x));P.selectAll("text").data(p).enter().append("text").attr("x",w=>w.data.x+w.data.width-10).attr("y",w=>w.data.y+w.data.height/2).attr("text-anchor","end").attr("dominant-baseline","middle").attr("fill","black").attr("font-size",`${C}px`).text(w=>w.label)}else{let b=function(w,$,ct){const{data:kt,label:Ut}=w,zt=$*Ut.length*.7,ue=kt.x+kt.width/2;return ue-zt/2>=kt.x&&ue+zt/2<=kt.x+kt.width&&kt.y+ct+$<=kt.y+kt.height};(0,dt.K2)(b,"fitsInBar");const z=10,p=E.data.map((w,$)=>({data:w,label:er[$].toString()})).filter(w=>w.data.width>0&&w.data.height>0),x=p.map(w=>{const{data:$,label:ct}=w;let kt=$.width/(.7*ct.length);for(;!b(w,kt,z)&&kt>0;)kt-=1;return kt}),C=Math.floor(Math.min(...x));P.selectAll("text").data(p).enter().append("text").attr("x",w=>w.data.x+w.data.width/2).attr("y",w=>w.data.y+z).attr("text-anchor","middle").attr("dominant-baseline","hanging").attr("fill","black").attr("font-size",`${C}px`).text(w=>w.label)}break;case"text":P.selectAll("text").data(E.data).enter().append("text").attr("x",0).attr("y",0).attr("fill",b=>b.fill).attr("font-size",b=>b.fontSize).attr("dominant-baseline",b=>Xe(b.verticalPos)).attr("text-anchor",b=>Ir(b.horizontalPos)).attr("transform",b=>Ee(b)).text(b=>b.text);break;case"path":P.selectAll("path").data(E.data).enter().append("path").attr("d",b=>b.path).attr("fill",b=>b.fill?b.fill:"none").attr("stroke",b=>b.strokeFill).attr("stroke-width",b=>b.strokeWidth)}}},"draw")}}},69664:(ti,_r,B)=>{"use strict";B.d(_r,{D:()=>D});var lt=B(79006),ee=B(32303),L=B(40622),D=(0,ee.K2)(Rt=>{const{securityLevel:dt}=(0,lt.D7)();let q=(0,L.Ltv)("body");if("sandbox"===dt){const yt=(0,L.Ltv)(`#i${Rt}`).node()?.contentDocument??document;q=(0,L.Ltv)(yt.body)}return q.select(`#${Rt}`)},"selectSvgElement")},72271:(ti,_r,B)=>{"use strict";B.d(_r,{XX:()=>Ye,q7:()=>bt,sO:()=>$t});var lt=B(89204),ee=B(98954),L=B(87452),D=B(52052),Rt=B(79006),dt=B(32303),q={common:Rt.Y2,getConfig:Rt.zj,insertCluster:L.U,insertEdge:ee.Jo,insertEdgeLabel:ee.jP,insertMarkers:ee.g0,insertNode:L.on,interpolateToCurve:D.Ib,labelHelper:L.Zk,log:dt.Rm,positionEdgeLabel:ee.T_},A={},$t=(0,dt.K2)(Xt=>{for(const j of Xt)A[j.name]=j},"registerLayoutLoaders");(0,dt.K2)(()=>{$t([{name:"dagre",loader:(0,dt.K2)((0,lt.A)(function*(){return yield Promise.all([B.e(911),B.e(335),B.e(865)]).then(B.bind(B,72876))}),"loader")},{name:"cose-bilkent",loader:(0,dt.K2)((0,lt.A)(function*(){return yield Promise.all([B.e(911),B.e(805)]).then(B.bind(B,8026))}),"loader")}])},"registerDefaultLayoutLoaders")();var Ye=(0,dt.K2)(function(){var Xt=(0,lt.A)(function*(j,fr){if(!(j.layoutAlgorithm in A))throw new Error(`Unknown layout algorithm: ${j.layoutAlgorithm}`);const Fe=A[j.layoutAlgorithm];return(yield Fe.loader()).render(j,fr,q,{algorithm:Fe.algorithm})});return function(j,fr){return Xt.apply(this,arguments)}}(),"render"),bt=(0,dt.K2)((Xt="",{fallback:j="dagre"}={})=>{if(Xt in A)return Xt;if(j in A)return dt.Rm.warn(`Layout algorithm ${Xt} is not registered. Using ${j} as fallback.`),j;throw new Error(`Both layout algorithms ${Xt} and ${j} are not registered.`)},"getRegisteredLayoutAlgorithm")},72635:(ti,_r,B)=>{"use strict";B.r(_r),B.d(_r,{diagram:()=>z});var A,$t,lt=B(45027),ee=B(62045),L=B(52052),D=B(79006),Rt=B(32303),dt=B(40622),q=B(73986),yt=function(){var p=(0,Rt.K2)(function(Me,at,Dt,M){for(Dt=Dt||{},M=Me.length;M--;Dt[Me[M]]=at);return Dt},"o"),x=[1,24],C=[1,25],w=[1,26],$=[1,27],ct=[1,28],kt=[1,63],Ut=[1,64],Ht=[1,65],zt=[1,66],ue=[1,67],je=[1,68],ze=[1,69],Cr=[1,29],cr=[1,30],sr=[1,31],$e=[1,32],He=[1,33],Pr=[1,34],wr=[1,35],Vr=[1,36],xr=[1,37],Ba=[1,38],Zr=[1,39],Oa=[1,40],Qr=[1,41],ra=[1,42],Xr=[1,43],Rr=[1,44],Tr=[1,45],N=[1,46],Vt=[1,47],Ke=[1,48],rr=[1,50],ia=[1,51],hr=[1,52],ga=[1,53],or=[1,54],_a=[1,55],Ma=[1,56],Ra=[1,57],Jr=[1,58],ca=[1,59],ha=[1,60],Yr=[14,42],Fa=[14,34,36,37,38,39,40,41,42,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74],pr=[12,14,34,36,37,38,39,40,41,42,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74],Va=[1,82],lr=[1,83],qa=[1,84],za=[1,85],ja=[12,14,42],Sa=[12,14,33,42],Ua=[12,14,33,42,76,77,79,80],Ka=[12,33],fa=[34,36,37,38,39,40,41,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74],di={trace:(0,Rt.K2)(function(){},"trace"),yy:{},symbols_:{error:2,start:3,mermaidDoc:4,direction:5,direction_tb:6,direction_bt:7,direction_rl:8,direction_lr:9,graphConfig:10,C4_CONTEXT:11,NEWLINE:12,statements:13,EOF:14,C4_CONTAINER:15,C4_COMPONENT:16,C4_DYNAMIC:17,C4_DEPLOYMENT:18,otherStatements:19,diagramStatements:20,otherStatement:21,title:22,accDescription:23,acc_title:24,acc_title_value:25,acc_descr:26,acc_descr_value:27,acc_descr_multiline_value:28,boundaryStatement:29,boundaryStartStatement:30,boundaryStopStatement:31,boundaryStart:32,LBRACE:33,ENTERPRISE_BOUNDARY:34,attributes:35,SYSTEM_BOUNDARY:36,BOUNDARY:37,CONTAINER_BOUNDARY:38,NODE:39,NODE_L:40,NODE_R:41,RBRACE:42,diagramStatement:43,PERSON:44,PERSON_EXT:45,SYSTEM:46,SYSTEM_DB:47,SYSTEM_QUEUE:48,SYSTEM_EXT:49,SYSTEM_EXT_DB:50,SYSTEM_EXT_QUEUE:51,CONTAINER:52,CONTAINER_DB:53,CONTAINER_QUEUE:54,CONTAINER_EXT:55,CONTAINER_EXT_DB:56,CONTAINER_EXT_QUEUE:57,COMPONENT:58,COMPONENT_DB:59,COMPONENT_QUEUE:60,COMPONENT_EXT:61,COMPONENT_EXT_DB:62,COMPONENT_EXT_QUEUE:63,REL:64,BIREL:65,REL_U:66,REL_D:67,REL_L:68,REL_R:69,REL_B:70,REL_INDEX:71,UPDATE_EL_STYLE:72,UPDATE_REL_STYLE:73,UPDATE_LAYOUT_CONFIG:74,attribute:75,STR:76,STR_KEY:77,STR_VALUE:78,ATTRIBUTE:79,ATTRIBUTE_EMPTY:80,$accept:0,$end:1},terminals_:{2:"error",6:"direction_tb",7:"direction_bt",8:"direction_rl",9:"direction_lr",11:"C4_CONTEXT",12:"NEWLINE",14:"EOF",15:"C4_CONTAINER",16:"C4_COMPONENT",17:"C4_DYNAMIC",18:"C4_DEPLOYMENT",22:"title",23:"accDescription",24:"acc_title",25:"acc_title_value",26:"acc_descr",27:"acc_descr_value",28:"acc_descr_multiline_value",33:"LBRACE",34:"ENTERPRISE_BOUNDARY",36:"SYSTEM_BOUNDARY",37:"BOUNDARY",38:"CONTAINER_BOUNDARY",39:"NODE",40:"NODE_L",41:"NODE_R",42:"RBRACE",44:"PERSON",45:"PERSON_EXT",46:"SYSTEM",47:"SYSTEM_DB",48:"SYSTEM_QUEUE",49:"SYSTEM_EXT",50:"SYSTEM_EXT_DB",51:"SYSTEM_EXT_QUEUE",52:"CONTAINER",53:"CONTAINER_DB",54:"CONTAINER_QUEUE",55:"CONTAINER_EXT",56:"CONTAINER_EXT_DB",57:"CONTAINER_EXT_QUEUE",58:"COMPONENT",59:"COMPONENT_DB",60:"COMPONENT_QUEUE",61:"COMPONENT_EXT",62:"COMPONENT_EXT_DB",63:"COMPONENT_EXT_QUEUE",64:"REL",65:"BIREL",66:"REL_U",67:"REL_D",68:"REL_L",69:"REL_R",70:"REL_B",71:"REL_INDEX",72:"UPDATE_EL_STYLE",73:"UPDATE_REL_STYLE",74:"UPDATE_LAYOUT_CONFIG",76:"STR",77:"STR_KEY",78:"STR_VALUE",79:"ATTRIBUTE",80:"ATTRIBUTE_EMPTY"},productions_:[0,[3,1],[3,1],[5,1],[5,1],[5,1],[5,1],[4,1],[10,4],[10,4],[10,4],[10,4],[10,4],[13,1],[13,1],[13,2],[19,1],[19,2],[19,3],[21,1],[21,1],[21,2],[21,2],[21,1],[29,3],[30,3],[30,3],[30,4],[32,2],[32,2],[32,2],[32,2],[32,2],[32,2],[32,2],[31,1],[20,1],[20,2],[20,3],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,1],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[35,1],[35,2],[75,1],[75,2],[75,1],[75,1]],performAction:(0,Rt.K2)(function(at,Dt,M,jt,Ve,gt,Lt){var Ft=gt.length-1;switch(Ve){case 3:jt.setDirection("TB");break;case 4:jt.setDirection("BT");break;case 5:jt.setDirection("RL");break;case 6:jt.setDirection("LR");break;case 8:case 9:case 10:case 11:case 12:jt.setC4Type(gt[Ft-3]);break;case 19:jt.setTitle(gt[Ft].substring(6)),this.$=gt[Ft].substring(6);break;case 20:jt.setAccDescription(gt[Ft].substring(15)),this.$=gt[Ft].substring(15);break;case 21:this.$=gt[Ft].trim(),jt.setTitle(this.$);break;case 22:case 23:this.$=gt[Ft].trim(),jt.setAccDescription(this.$);break;case 28:gt[Ft].splice(2,0,"ENTERPRISE"),jt.addPersonOrSystemBoundary(...gt[Ft]),this.$=gt[Ft];break;case 29:gt[Ft].splice(2,0,"SYSTEM"),jt.addPersonOrSystemBoundary(...gt[Ft]),this.$=gt[Ft];break;case 30:jt.addPersonOrSystemBoundary(...gt[Ft]),this.$=gt[Ft];break;case 31:gt[Ft].splice(2,0,"CONTAINER"),jt.addContainerBoundary(...gt[Ft]),this.$=gt[Ft];break;case 32:jt.addDeploymentNode("node",...gt[Ft]),this.$=gt[Ft];break;case 33:jt.addDeploymentNode("nodeL",...gt[Ft]),this.$=gt[Ft];break;case 34:jt.addDeploymentNode("nodeR",...gt[Ft]),this.$=gt[Ft];break;case 35:jt.popBoundaryParseStack();break;case 39:jt.addPersonOrSystem("person",...gt[Ft]),this.$=gt[Ft];break;case 40:jt.addPersonOrSystem("external_person",...gt[Ft]),this.$=gt[Ft];break;case 41:jt.addPersonOrSystem("system",...gt[Ft]),this.$=gt[Ft];break;case 42:jt.addPersonOrSystem("system_db",...gt[Ft]),this.$=gt[Ft];break;case 43:jt.addPersonOrSystem("system_queue",...gt[Ft]),this.$=gt[Ft];break;case 44:jt.addPersonOrSystem("external_system",...gt[Ft]),this.$=gt[Ft];break;case 45:jt.addPersonOrSystem("external_system_db",...gt[Ft]),this.$=gt[Ft];break;case 46:jt.addPersonOrSystem("external_system_queue",...gt[Ft]),this.$=gt[Ft];break;case 47:jt.addContainer("container",...gt[Ft]),this.$=gt[Ft];break;case 48:jt.addContainer("container_db",...gt[Ft]),this.$=gt[Ft];break;case 49:jt.addContainer("container_queue",...gt[Ft]),this.$=gt[Ft];break;case 50:jt.addContainer("external_container",...gt[Ft]),this.$=gt[Ft];break;case 51:jt.addContainer("external_container_db",...gt[Ft]),this.$=gt[Ft];break;case 52:jt.addContainer("external_container_queue",...gt[Ft]),this.$=gt[Ft];break;case 53:jt.addComponent("component",...gt[Ft]),this.$=gt[Ft];break;case 54:jt.addComponent("component_db",...gt[Ft]),this.$=gt[Ft];break;case 55:jt.addComponent("component_queue",...gt[Ft]),this.$=gt[Ft];break;case 56:jt.addComponent("external_component",...gt[Ft]),this.$=gt[Ft];break;case 57:jt.addComponent("external_component_db",...gt[Ft]),this.$=gt[Ft];break;case 58:jt.addComponent("external_component_queue",...gt[Ft]),this.$=gt[Ft];break;case 60:jt.addRel("rel",...gt[Ft]),this.$=gt[Ft];break;case 61:jt.addRel("birel",...gt[Ft]),this.$=gt[Ft];break;case 62:jt.addRel("rel_u",...gt[Ft]),this.$=gt[Ft];break;case 63:jt.addRel("rel_d",...gt[Ft]),this.$=gt[Ft];break;case 64:jt.addRel("rel_l",...gt[Ft]),this.$=gt[Ft];break;case 65:jt.addRel("rel_r",...gt[Ft]),this.$=gt[Ft];break;case 66:jt.addRel("rel_b",...gt[Ft]),this.$=gt[Ft];break;case 67:gt[Ft].splice(0,1),jt.addRel("rel",...gt[Ft]),this.$=gt[Ft];break;case 68:jt.updateElStyle("update_el_style",...gt[Ft]),this.$=gt[Ft];break;case 69:jt.updateRelStyle("update_rel_style",...gt[Ft]),this.$=gt[Ft];break;case 70:jt.updateLayoutConfig("update_layout_config",...gt[Ft]),this.$=gt[Ft];break;case 71:this.$=[gt[Ft]];break;case 72:gt[Ft].unshift(gt[Ft-1]),this.$=gt[Ft];break;case 73:case 75:this.$=gt[Ft].trim();break;case 74:let Qe={};Qe[gt[Ft-1].trim()]=gt[Ft].trim(),this.$=Qe;break;case 76:this.$=""}},"anonymous"),table:[{3:1,4:2,5:3,6:[1,5],7:[1,6],8:[1,7],9:[1,8],10:4,11:[1,9],15:[1,10],16:[1,11],17:[1,12],18:[1,13]},{1:[3]},{1:[2,1]},{1:[2,2]},{1:[2,7]},{1:[2,3]},{1:[2,4]},{1:[2,5]},{1:[2,6]},{12:[1,14]},{12:[1,15]},{12:[1,16]},{12:[1,17]},{12:[1,18]},{13:19,19:20,20:21,21:22,22:x,23:C,24:w,26:$,28:ct,29:49,30:61,32:62,34:kt,36:Ut,37:Ht,38:zt,39:ue,40:je,41:ze,43:23,44:Cr,45:cr,46:sr,47:$e,48:He,49:Pr,50:wr,51:Vr,52:xr,53:Ba,54:Zr,55:Oa,56:Qr,57:ra,58:Xr,59:Rr,60:Tr,61:N,62:Vt,63:Ke,64:rr,65:ia,66:hr,67:ga,68:or,69:_a,70:Ma,71:Ra,72:Jr,73:ca,74:ha},{13:70,19:20,20:21,21:22,22:x,23:C,24:w,26:$,28:ct,29:49,30:61,32:62,34:kt,36:Ut,37:Ht,38:zt,39:ue,40:je,41:ze,43:23,44:Cr,45:cr,46:sr,47:$e,48:He,49:Pr,50:wr,51:Vr,52:xr,53:Ba,54:Zr,55:Oa,56:Qr,57:ra,58:Xr,59:Rr,60:Tr,61:N,62:Vt,63:Ke,64:rr,65:ia,66:hr,67:ga,68:or,69:_a,70:Ma,71:Ra,72:Jr,73:ca,74:ha},{13:71,19:20,20:21,21:22,22:x,23:C,24:w,26:$,28:ct,29:49,30:61,32:62,34:kt,36:Ut,37:Ht,38:zt,39:ue,40:je,41:ze,43:23,44:Cr,45:cr,46:sr,47:$e,48:He,49:Pr,50:wr,51:Vr,52:xr,53:Ba,54:Zr,55:Oa,56:Qr,57:ra,58:Xr,59:Rr,60:Tr,61:N,62:Vt,63:Ke,64:rr,65:ia,66:hr,67:ga,68:or,69:_a,70:Ma,71:Ra,72:Jr,73:ca,74:ha},{13:72,19:20,20:21,21:22,22:x,23:C,24:w,26:$,28:ct,29:49,30:61,32:62,34:kt,36:Ut,37:Ht,38:zt,39:ue,40:je,41:ze,43:23,44:Cr,45:cr,46:sr,47:$e,48:He,49:Pr,50:wr,51:Vr,52:xr,53:Ba,54:Zr,55:Oa,56:Qr,57:ra,58:Xr,59:Rr,60:Tr,61:N,62:Vt,63:Ke,64:rr,65:ia,66:hr,67:ga,68:or,69:_a,70:Ma,71:Ra,72:Jr,73:ca,74:ha},{13:73,19:20,20:21,21:22,22:x,23:C,24:w,26:$,28:ct,29:49,30:61,32:62,34:kt,36:Ut,37:Ht,38:zt,39:ue,40:je,41:ze,43:23,44:Cr,45:cr,46:sr,47:$e,48:He,49:Pr,50:wr,51:Vr,52:xr,53:Ba,54:Zr,55:Oa,56:Qr,57:ra,58:Xr,59:Rr,60:Tr,61:N,62:Vt,63:Ke,64:rr,65:ia,66:hr,67:ga,68:or,69:_a,70:Ma,71:Ra,72:Jr,73:ca,74:ha},{14:[1,74]},p(Yr,[2,13],{43:23,29:49,30:61,32:62,20:75,34:kt,36:Ut,37:Ht,38:zt,39:ue,40:je,41:ze,44:Cr,45:cr,46:sr,47:$e,48:He,49:Pr,50:wr,51:Vr,52:xr,53:Ba,54:Zr,55:Oa,56:Qr,57:ra,58:Xr,59:Rr,60:Tr,61:N,62:Vt,63:Ke,64:rr,65:ia,66:hr,67:ga,68:or,69:_a,70:Ma,71:Ra,72:Jr,73:ca,74:ha}),p(Yr,[2,14]),p(Fa,[2,16],{12:[1,76]}),p(Yr,[2,36],{12:[1,77]}),p(pr,[2,19]),p(pr,[2,20]),{25:[1,78]},{27:[1,79]},p(pr,[2,23]),{35:80,75:81,76:Va,77:lr,79:qa,80:za},{35:86,75:81,76:Va,77:lr,79:qa,80:za},{35:87,75:81,76:Va,77:lr,79:qa,80:za},{35:88,75:81,76:Va,77:lr,79:qa,80:za},{35:89,75:81,76:Va,77:lr,79:qa,80:za},{35:90,75:81,76:Va,77:lr,79:qa,80:za},{35:91,75:81,76:Va,77:lr,79:qa,80:za},{35:92,75:81,76:Va,77:lr,79:qa,80:za},{35:93,75:81,76:Va,77:lr,79:qa,80:za},{35:94,75:81,76:Va,77:lr,79:qa,80:za},{35:95,75:81,76:Va,77:lr,79:qa,80:za},{35:96,75:81,76:Va,77:lr,79:qa,80:za},{35:97,75:81,76:Va,77:lr,79:qa,80:za},{35:98,75:81,76:Va,77:lr,79:qa,80:za},{35:99,75:81,76:Va,77:lr,79:qa,80:za},{35:100,75:81,76:Va,77:lr,79:qa,80:za},{35:101,75:81,76:Va,77:lr,79:qa,80:za},{35:102,75:81,76:Va,77:lr,79:qa,80:za},{35:103,75:81,76:Va,77:lr,79:qa,80:za},{35:104,75:81,76:Va,77:lr,79:qa,80:za},p(ja,[2,59]),{35:105,75:81,76:Va,77:lr,79:qa,80:za},{35:106,75:81,76:Va,77:lr,79:qa,80:za},{35:107,75:81,76:Va,77:lr,79:qa,80:za},{35:108,75:81,76:Va,77:lr,79:qa,80:za},{35:109,75:81,76:Va,77:lr,79:qa,80:za},{35:110,75:81,76:Va,77:lr,79:qa,80:za},{35:111,75:81,76:Va,77:lr,79:qa,80:za},{35:112,75:81,76:Va,77:lr,79:qa,80:za},{35:113,75:81,76:Va,77:lr,79:qa,80:za},{35:114,75:81,76:Va,77:lr,79:qa,80:za},{35:115,75:81,76:Va,77:lr,79:qa,80:za},{20:116,29:49,30:61,32:62,34:kt,36:Ut,37:Ht,38:zt,39:ue,40:je,41:ze,43:23,44:Cr,45:cr,46:sr,47:$e,48:He,49:Pr,50:wr,51:Vr,52:xr,53:Ba,54:Zr,55:Oa,56:Qr,57:ra,58:Xr,59:Rr,60:Tr,61:N,62:Vt,63:Ke,64:rr,65:ia,66:hr,67:ga,68:or,69:_a,70:Ma,71:Ra,72:Jr,73:ca,74:ha},{12:[1,118],33:[1,117]},{35:119,75:81,76:Va,77:lr,79:qa,80:za},{35:120,75:81,76:Va,77:lr,79:qa,80:za},{35:121,75:81,76:Va,77:lr,79:qa,80:za},{35:122,75:81,76:Va,77:lr,79:qa,80:za},{35:123,75:81,76:Va,77:lr,79:qa,80:za},{35:124,75:81,76:Va,77:lr,79:qa,80:za},{35:125,75:81,76:Va,77:lr,79:qa,80:za},{14:[1,126]},{14:[1,127]},{14:[1,128]},{14:[1,129]},{1:[2,8]},p(Yr,[2,15]),p(Fa,[2,17],{21:22,19:130,22:x,23:C,24:w,26:$,28:ct}),p(Yr,[2,37],{19:20,20:21,21:22,43:23,29:49,30:61,32:62,13:131,22:x,23:C,24:w,26:$,28:ct,34:kt,36:Ut,37:Ht,38:zt,39:ue,40:je,41:ze,44:Cr,45:cr,46:sr,47:$e,48:He,49:Pr,50:wr,51:Vr,52:xr,53:Ba,54:Zr,55:Oa,56:Qr,57:ra,58:Xr,59:Rr,60:Tr,61:N,62:Vt,63:Ke,64:rr,65:ia,66:hr,67:ga,68:or,69:_a,70:Ma,71:Ra,72:Jr,73:ca,74:ha}),p(pr,[2,21]),p(pr,[2,22]),p(ja,[2,39]),p(Sa,[2,71],{75:81,35:132,76:Va,77:lr,79:qa,80:za}),p(Ua,[2,73]),{78:[1,133]},p(Ua,[2,75]),p(Ua,[2,76]),p(ja,[2,40]),p(ja,[2,41]),p(ja,[2,42]),p(ja,[2,43]),p(ja,[2,44]),p(ja,[2,45]),p(ja,[2,46]),p(ja,[2,47]),p(ja,[2,48]),p(ja,[2,49]),p(ja,[2,50]),p(ja,[2,51]),p(ja,[2,52]),p(ja,[2,53]),p(ja,[2,54]),p(ja,[2,55]),p(ja,[2,56]),p(ja,[2,57]),p(ja,[2,58]),p(ja,[2,60]),p(ja,[2,61]),p(ja,[2,62]),p(ja,[2,63]),p(ja,[2,64]),p(ja,[2,65]),p(ja,[2,66]),p(ja,[2,67]),p(ja,[2,68]),p(ja,[2,69]),p(ja,[2,70]),{31:134,42:[1,135]},{12:[1,136]},{33:[1,137]},p(Ka,[2,28]),p(Ka,[2,29]),p(Ka,[2,30]),p(Ka,[2,31]),p(Ka,[2,32]),p(Ka,[2,33]),p(Ka,[2,34]),{1:[2,9]},{1:[2,10]},{1:[2,11]},{1:[2,12]},p(Fa,[2,18]),p(Yr,[2,38]),p(Sa,[2,72]),p(Ua,[2,74]),p(ja,[2,24]),p(ja,[2,35]),p(fa,[2,25]),p(fa,[2,26],{12:[1,138]}),p(fa,[2,27])],defaultActions:{2:[2,1],3:[2,2],4:[2,7],5:[2,3],6:[2,4],7:[2,5],8:[2,6],74:[2,8],126:[2,9],127:[2,10],128:[2,11],129:[2,12]},parseError:(0,Rt.K2)(function(at,Dt){if(!Dt.recoverable){var M=new Error(at);throw M.hash=Dt,M}this.trace(at)},"parseError"),parse:(0,Rt.K2)(function(at){var Dt=this,M=[0],jt=[],Ve=[null],gt=[],Lt=this.table,Ft="",Qe=0,ta=0,Gr=0,da=gt.slice.call(arguments,1),wa=Object.create(this.lexer),Xa={yy:{}};for(var Ya in this.yy)Object.prototype.hasOwnProperty.call(this.yy,Ya)&&(Xa.yy[Ya]=this.yy[Ya]);wa.setInput(at,Xa.yy),Xa.yy.lexer=wa,Xa.yy.parser=this,typeof wa.yylloc>"u"&&(wa.yylloc={});var yi=wa.yylloc;gt.push(yi);var Ei=wa.options&&wa.options.ranges;function Na(){var Oi;return"number"!=typeof(Oi=jt.pop()||wa.lex()||1)&&(Oi instanceof Array&&(Oi=(jt=Oi).pop()),Oi=Dt.symbols_[Oi]||Oi),Oi}this.parseError="function"==typeof Xa.yy.parseError?Xa.yy.parseError:Object.getPrototypeOf(this).parseError,(0,Rt.K2)(function mi(Oi){M.length=M.length-2*Oi,Ve.length=Ve.length-Oi,gt.length=gt.length-Oi},"popStack"),(0,Rt.K2)(Na,"lex");for(var Or,ma,Ha,ni,Pi,ki,Ri,ln,ua={};;){if(this.defaultActions[Ha=M[M.length-1]]?ni=this.defaultActions[Ha]:((null===Or||typeof Or>"u")&&(Or=Na()),ni=Lt[Ha]&&Lt[Ha][Or]),typeof ni>"u"||!ni.length||!ni[0]){var Ji;for(ki in ln=[],Lt[Ha])this.terminals_[ki]&&ki>2&&ln.push("'"+this.terminals_[ki]+"'");Ji=wa.showPosition?"Parse error on line "+(Qe+1)+":\n"+wa.showPosition()+"\nExpecting "+ln.join(", ")+", got '"+(this.terminals_[Or]||Or)+"'":"Parse error on line "+(Qe+1)+": Unexpected "+(1==Or?"end of input":"'"+(this.terminals_[Or]||Or)+"'"),this.parseError(Ji,{text:wa.match,token:this.terminals_[Or]||Or,line:wa.yylineno,loc:yi,expected:ln})}if(ni[0]instanceof Array&&ni.length>1)throw new Error("Parse Error: multiple actions possible at state: "+Ha+", token: "+Or);switch(ni[0]){case 1:M.push(Or),Ve.push(wa.yytext),gt.push(wa.yylloc),M.push(ni[1]),Or=null,ma?(Or=ma,ma=null):(ta=wa.yyleng,Ft=wa.yytext,Qe=wa.yylineno,yi=wa.yylloc,Gr>0&&Gr--);break;case 2:if(ua.$=Ve[Ve.length-(Ri=this.productions_[ni[1]][1])],ua._$={first_line:gt[gt.length-(Ri||1)].first_line,last_line:gt[gt.length-1].last_line,first_column:gt[gt.length-(Ri||1)].first_column,last_column:gt[gt.length-1].last_column},Ei&&(ua._$.range=[gt[gt.length-(Ri||1)].range[0],gt[gt.length-1].range[1]]),typeof(Pi=this.performAction.apply(ua,[Ft,ta,Qe,Xa.yy,ni[1],Ve,gt].concat(da)))<"u")return Pi;Ri&&(M=M.slice(0,-1*Ri*2),Ve=Ve.slice(0,-1*Ri),gt=gt.slice(0,-1*Ri)),M.push(this.productions_[ni[1]][0]),Ve.push(ua.$),gt.push(ua._$),M.push(Lt[M[M.length-2]][M[M.length-1]]);break;case 3:return!0}}return!0},"parse")};function Li(){this.yy={}}return di.lexer=function(){return{EOF:1,parseError:(0,Rt.K2)(function(Dt,M){if(!this.yy.parser)throw new Error(Dt);this.yy.parser.parseError(Dt,M)},"parseError"),setInput:(0,Rt.K2)(function(at,Dt){return this.yy=Dt||this.yy||{},this._input=at,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},"setInput"),input:(0,Rt.K2)(function(){var at=this._input[0];return this.yytext+=at,this.yyleng++,this.offset++,this.match+=at,this.matched+=at,at.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),at},"input"),unput:(0,Rt.K2)(function(at){var Dt=at.length,M=at.split(/(?:\r\n?|\n)/g);this._input=at+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-Dt),this.offset-=Dt;var jt=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),M.length-1&&(this.yylineno-=M.length-1);var Ve=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:M?(M.length===jt.length?this.yylloc.first_column:0)+jt[jt.length-M.length].length-M[0].length:this.yylloc.first_column-Dt},this.options.ranges&&(this.yylloc.range=[Ve[0],Ve[0]+this.yyleng-Dt]),this.yyleng=this.yytext.length,this},"unput"),more:(0,Rt.K2)(function(){return this._more=!0,this},"more"),reject:(0,Rt.K2)(function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},"reject"),less:(0,Rt.K2)(function(at){this.unput(this.match.slice(at))},"less"),pastInput:(0,Rt.K2)(function(){var at=this.matched.substr(0,this.matched.length-this.match.length);return(at.length>20?"...":"")+at.substr(-20).replace(/\n/g,"")},"pastInput"),upcomingInput:(0,Rt.K2)(function(){var at=this.match;return at.length<20&&(at+=this._input.substr(0,20-at.length)),(at.substr(0,20)+(at.length>20?"...":"")).replace(/\n/g,"")},"upcomingInput"),showPosition:(0,Rt.K2)(function(){var at=this.pastInput(),Dt=new Array(at.length+1).join("-");return at+this.upcomingInput()+"\n"+Dt+"^"},"showPosition"),test_match:(0,Rt.K2)(function(at,Dt){var M,jt,Ve;if(this.options.backtrack_lexer&&(Ve={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(Ve.yylloc.range=this.yylloc.range.slice(0))),(jt=at[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=jt.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:jt?jt[jt.length-1].length-jt[jt.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+at[0].length},this.yytext+=at[0],this.match+=at[0],this.matches=at,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(at[0].length),this.matched+=at[0],M=this.performAction.call(this,this.yy,this,Dt,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),M)return M;if(this._backtrack){for(var gt in Ve)this[gt]=Ve[gt];return!1}return!1},"test_match"),next:(0,Rt.K2)(function(){if(this.done)return this.EOF;var at,Dt,M,jt;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var Ve=this._currentRules(),gt=0;gt<Ve.length;gt++)if((M=this._input.match(this.rules[Ve[gt]]))&&(!Dt||M[0].length>Dt[0].length)){if(Dt=M,jt=gt,this.options.backtrack_lexer){if(!1!==(at=this.test_match(M,Ve[gt])))return at;if(this._backtrack){Dt=!1;continue}return!1}if(!this.options.flex)break}return Dt?!1!==(at=this.test_match(Dt,Ve[jt]))&&at:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},"next"),lex:(0,Rt.K2)(function(){return this.next()||this.lex()},"lex"),begin:(0,Rt.K2)(function(Dt){this.conditionStack.push(Dt)},"begin"),popState:(0,Rt.K2)(function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},"popState"),_currentRules:(0,Rt.K2)(function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},"_currentRules"),topState:(0,Rt.K2)(function(Dt){return(Dt=this.conditionStack.length-1-Math.abs(Dt||0))>=0?this.conditionStack[Dt]:"INITIAL"},"topState"),pushState:(0,Rt.K2)(function(Dt){this.begin(Dt)},"pushState"),stateStackSize:(0,Rt.K2)(function(){return this.conditionStack.length},"stateStackSize"),options:{},performAction:(0,Rt.K2)(function(Dt,M,jt,Ve){switch(jt){case 0:return 6;case 1:return 7;case 2:return 8;case 3:return 9;case 4:return 22;case 5:return 23;case 6:return this.begin("acc_title"),24;case 7:return this.popState(),"acc_title_value";case 8:return this.begin("acc_descr"),26;case 9:return this.popState(),"acc_descr_value";case 10:this.begin("acc_descr_multiline");break;case 11:case 73:this.popState();break;case 12:return"acc_descr_multiline_value";case 13:case 16:case 70:break;case 14:c;break;case 15:return 12;case 17:return 11;case 18:return 15;case 19:return 16;case 20:return 17;case 21:return 18;case 22:return this.begin("person_ext"),45;case 23:return this.begin("person"),44;case 24:return this.begin("system_ext_queue"),51;case 25:return this.begin("system_ext_db"),50;case 26:return this.begin("system_ext"),49;case 27:return this.begin("system_queue"),48;case 28:return this.begin("system_db"),47;case 29:return this.begin("system"),46;case 30:return this.begin("boundary"),37;case 31:return this.begin("enterprise_boundary"),34;case 32:return this.begin("system_boundary"),36;case 33:return this.begin("container_ext_queue"),57;case 34:return this.begin("container_ext_db"),56;case 35:return this.begin("container_ext"),55;case 36:return this.begin("container_queue"),54;case 37:return this.begin("container_db"),53;case 38:return this.begin("container"),52;case 39:return this.begin("container_boundary"),38;case 40:return this.begin("component_ext_queue"),63;case 41:return this.begin("component_ext_db"),62;case 42:return this.begin("component_ext"),61;case 43:return this.begin("component_queue"),60;case 44:return this.begin("component_db"),59;case 45:return this.begin("component"),58;case 46:case 47:return this.begin("node"),39;case 48:return this.begin("node_l"),40;case 49:return this.begin("node_r"),41;case 50:return this.begin("rel"),64;case 51:return this.begin("birel"),65;case 52:case 53:return this.begin("rel_u"),66;case 54:case 55:return this.begin("rel_d"),67;case 56:case 57:return this.begin("rel_l"),68;case 58:case 59:return this.begin("rel_r"),69;case 60:return this.begin("rel_b"),70;case 61:return this.begin("rel_index"),71;case 62:return this.begin("update_el_style"),72;case 63:return this.begin("update_rel_style"),73;case 64:return this.begin("update_layout_config"),74;case 65:return"EOF_IN_STRUCT";case 66:return this.begin("attribute"),"ATTRIBUTE_EMPTY";case 67:this.begin("attribute");break;case 68:case 79:this.popState(),this.popState();break;case 69:case 71:return 80;case 72:this.begin("string");break;case 74:case 80:return"STR";case 75:this.begin("string_kv");break;case 76:return this.begin("string_kv_key"),"STR_KEY";case 77:this.popState(),this.begin("string_kv_value");break;case 78:return"STR_VALUE";case 81:return"LBRACE";case 82:return"RBRACE";case 83:return"SPACE";case 84:return"EOL";case 85:return 14}},"anonymous"),rules:[/^(?:.*direction\s+TB[^\n]*)/,/^(?:.*direction\s+BT[^\n]*)/,/^(?:.*direction\s+RL[^\n]*)/,/^(?:.*direction\s+LR[^\n]*)/,/^(?:title\s[^#\n;]+)/,/^(?:accDescription\s[^#\n;]+)/,/^(?:accTitle\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*\{\s*)/,/^(?:[\}])/,/^(?:[^\}]*)/,/^(?:%%(?!\{)*[^\n]*(\r?\n?)+)/,/^(?:%%[^\n]*(\r?\n)*)/,/^(?:\s*(\r?\n)+)/,/^(?:\s+)/,/^(?:C4Context\b)/,/^(?:C4Container\b)/,/^(?:C4Component\b)/,/^(?:C4Dynamic\b)/,/^(?:C4Deployment\b)/,/^(?:Person_Ext\b)/,/^(?:Person\b)/,/^(?:SystemQueue_Ext\b)/,/^(?:SystemDb_Ext\b)/,/^(?:System_Ext\b)/,/^(?:SystemQueue\b)/,/^(?:SystemDb\b)/,/^(?:System\b)/,/^(?:Boundary\b)/,/^(?:Enterprise_Boundary\b)/,/^(?:System_Boundary\b)/,/^(?:ContainerQueue_Ext\b)/,/^(?:ContainerDb_Ext\b)/,/^(?:Container_Ext\b)/,/^(?:ContainerQueue\b)/,/^(?:ContainerDb\b)/,/^(?:Container\b)/,/^(?:Container_Boundary\b)/,/^(?:ComponentQueue_Ext\b)/,/^(?:ComponentDb_Ext\b)/,/^(?:Component_Ext\b)/,/^(?:ComponentQueue\b)/,/^(?:ComponentDb\b)/,/^(?:Component\b)/,/^(?:Deployment_Node\b)/,/^(?:Node\b)/,/^(?:Node_L\b)/,/^(?:Node_R\b)/,/^(?:Rel\b)/,/^(?:BiRel\b)/,/^(?:Rel_Up\b)/,/^(?:Rel_U\b)/,/^(?:Rel_Down\b)/,/^(?:Rel_D\b)/,/^(?:Rel_Left\b)/,/^(?:Rel_L\b)/,/^(?:Rel_Right\b)/,/^(?:Rel_R\b)/,/^(?:Rel_Back\b)/,/^(?:RelIndex\b)/,/^(?:UpdateElementStyle\b)/,/^(?:UpdateRelStyle\b)/,/^(?:UpdateLayoutConfig\b)/,/^(?:$)/,/^(?:[(][ ]*[,])/,/^(?:[(])/,/^(?:[)])/,/^(?:,,)/,/^(?:,)/,/^(?:[ ]*["]["])/,/^(?:[ ]*["])/,/^(?:["])/,/^(?:[^"]*)/,/^(?:[ ]*[\$])/,/^(?:[^=]*)/,/^(?:[=][ ]*["])/,/^(?:[^"]+)/,/^(?:["])/,/^(?:[^,]+)/,/^(?:\{)/,/^(?:\})/,/^(?:[\s]+)/,/^(?:[\n\r]+)/,/^(?:$)/],conditions:{acc_descr_multiline:{rules:[11,12],inclusive:!1},acc_descr:{rules:[9],inclusive:!1},acc_title:{rules:[7],inclusive:!1},string_kv_value:{rules:[78,79],inclusive:!1},string_kv_key:{rules:[77],inclusive:!1},string_kv:{rules:[76],inclusive:!1},string:{rules:[73,74],inclusive:!1},attribute:{rules:[68,69,70,71,72,75,80],inclusive:!1},update_layout_config:{rules:[65,66,67,68],inclusive:!1},update_rel_style:{rules:[65,66,67,68],inclusive:!1},update_el_style:{rules:[65,66,67,68],inclusive:!1},rel_b:{rules:[65,66,67,68],inclusive:!1},rel_r:{rules:[65,66,67,68],inclusive:!1},rel_l:{rules:[65,66,67,68],inclusive:!1},rel_d:{rules:[65,66,67,68],inclusive:!1},rel_u:{rules:[65,66,67,68],inclusive:!1},rel_bi:{rules:[],inclusive:!1},rel:{rules:[65,66,67,68],inclusive:!1},node_r:{rules:[65,66,67,68],inclusive:!1},node_l:{rules:[65,66,67,68],inclusive:!1},node:{rules:[65,66,67,68],inclusive:!1},index:{rules:[],inclusive:!1},rel_index:{rules:[65,66,67,68],inclusive:!1},component_ext_queue:{rules:[],inclusive:!1},component_ext_db:{rules:[65,66,67,68],inclusive:!1},component_ext:{rules:[65,66,67,68],inclusive:!1},component_queue:{rules:[65,66,67,68],inclusive:!1},component_db:{rules:[65,66,67,68],inclusive:!1},component:{rules:[65,66,67,68],inclusive:!1},container_boundary:{rules:[65,66,67,68],inclusive:!1},container_ext_queue:{rules:[65,66,67,68],inclusive:!1},container_ext_db:{rules:[65,66,67,68],inclusive:!1},container_ext:{rules:[65,66,67,68],inclusive:!1},container_queue:{rules:[65,66,67,68],inclusive:!1},container_db:{rules:[65,66,67,68],inclusive:!1},container:{rules:[65,66,67,68],inclusive:!1},birel:{rules:[65,66,67,68],inclusive:!1},system_boundary:{rules:[65,66,67,68],inclusive:!1},enterprise_boundary:{rules:[65,66,67,68],inclusive:!1},boundary:{rules:[65,66,67,68],inclusive:!1},system_ext_queue:{rules:[65,66,67,68],inclusive:!1},system_ext_db:{rules:[65,66,67,68],inclusive:!1},system_ext:{rules:[65,66,67,68],inclusive:!1},system_queue:{rules:[65,66,67,68],inclusive:!1},system_db:{rules:[65,66,67,68],inclusive:!1},system:{rules:[65,66,67,68],inclusive:!1},person_ext:{rules:[65,66,67,68],inclusive:!1},person:{rules:[65,66,67,68],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,5,6,8,10,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,81,82,83,84,85],inclusive:!0}}}}(),(0,Rt.K2)(Li,"Parser"),Li.prototype=di,di.Parser=Li,new Li}();yt.parser=yt;var Lr,Ye=yt,bt=[],Xt=[""],j="global",fr="",Fe=[{alias:"global",label:{text:"global"},type:{text:"global"},tags:null,link:null,parentBoundary:""}],vr=[],zr="",br=!1,mr=4,Er=2,Ar=(0,Rt.K2)(function(){return Lr},"getC4Type"),ge=(0,Rt.K2)(function(p){Lr=(0,D.jZ)(p,(0,D.D7)())},"setC4Type"),Br=(0,Rt.K2)(function(p,x,C,w,$,ct,kt,Ut,Ht){if(null==p||null==x||null==C||null==w)return;let zt={};const ue=vr.find(je=>je.from===x&&je.to===C);if(ue?zt=ue:vr.push(zt),zt.type=p,zt.from=x,zt.to=C,zt.label={text:w},null==$)zt.techn={text:""};else if("object"==typeof $){let[je,ze]=Object.entries($)[0];zt[je]={text:ze}}else zt.techn={text:$};if(null==ct)zt.descr={text:""};else if("object"==typeof ct){let[je,ze]=Object.entries(ct)[0];zt[je]={text:ze}}else zt.descr={text:ct};if("object"==typeof kt){let[je,ze]=Object.entries(kt)[0];zt[je]=ze}else zt.sprite=kt;if("object"==typeof Ut){let[je,ze]=Object.entries(Ut)[0];zt[je]=ze}else zt.tags=Ut;if("object"==typeof Ht){let[je,ze]=Object.entries(Ht)[0];zt[je]=ze}else zt.link=Ht;zt.wrap=We()},"addRel"),Ge=(0,Rt.K2)(function(p,x,C,w,$,ct,kt){if(null===x||null===C)return;let Ut={};const Ht=bt.find(zt=>zt.alias===x);if(Ht&&x===Ht.alias?Ut=Ht:(Ut.alias=x,bt.push(Ut)),Ut.label=null==C?{text:""}:{text:C},null==w)Ut.descr={text:""};else if("object"==typeof w){let[zt,ue]=Object.entries(w)[0];Ut[zt]={text:ue}}else Ut.descr={text:w};if("object"==typeof $){let[zt,ue]=Object.entries($)[0];Ut[zt]=ue}else Ut.sprite=$;if("object"==typeof ct){let[zt,ue]=Object.entries(ct)[0];Ut[zt]=ue}else Ut.tags=ct;if("object"==typeof kt){let[zt,ue]=Object.entries(kt)[0];Ut[zt]=ue}else Ut.link=kt;Ut.typeC4Shape={text:p},Ut.parentBoundary=j,Ut.wrap=We()},"addPersonOrSystem"),W=(0,Rt.K2)(function(p,x,C,w,$,ct,kt,Ut){if(null===x||null===C)return;let Ht={};const zt=bt.find(ue=>ue.alias===x);if(zt&&x===zt.alias?Ht=zt:(Ht.alias=x,bt.push(Ht)),Ht.label=null==C?{text:""}:{text:C},null==w)Ht.techn={text:""};else if("object"==typeof w){let[ue,je]=Object.entries(w)[0];Ht[ue]={text:je}}else Ht.techn={text:w};if(null==$)Ht.descr={text:""};else if("object"==typeof $){let[ue,je]=Object.entries($)[0];Ht[ue]={text:je}}else Ht.descr={text:$};if("object"==typeof ct){let[ue,je]=Object.entries(ct)[0];Ht[ue]=je}else Ht.sprite=ct;if("object"==typeof kt){let[ue,je]=Object.entries(kt)[0];Ht[ue]=je}else Ht.tags=kt;if("object"==typeof Ut){let[ue,je]=Object.entries(Ut)[0];Ht[ue]=je}else Ht.link=Ut;Ht.wrap=We(),Ht.typeC4Shape={text:p},Ht.parentBoundary=j},"addContainer"),ft=(0,Rt.K2)(function(p,x,C,w,$,ct,kt,Ut){if(null===x||null===C)return;let Ht={};const zt=bt.find(ue=>ue.alias===x);if(zt&&x===zt.alias?Ht=zt:(Ht.alias=x,bt.push(Ht)),Ht.label=null==C?{text:""}:{text:C},null==w)Ht.techn={text:""};else if("object"==typeof w){let[ue,je]=Object.entries(w)[0];Ht[ue]={text:je}}else Ht.techn={text:w};if(null==$)Ht.descr={text:""};else if("object"==typeof $){let[ue,je]=Object.entries($)[0];Ht[ue]={text:je}}else Ht.descr={text:$};if("object"==typeof ct){let[ue,je]=Object.entries(ct)[0];Ht[ue]=je}else Ht.sprite=ct;if("object"==typeof kt){let[ue,je]=Object.entries(kt)[0];Ht[ue]=je}else Ht.tags=kt;if("object"==typeof Ut){let[ue,je]=Object.entries(Ut)[0];Ht[ue]=je}else Ht.link=Ut;Ht.wrap=We(),Ht.typeC4Shape={text:p},Ht.parentBoundary=j},"addComponent"),Bt=(0,Rt.K2)(function(p,x,C,w,$){if(null===p||null===x)return;let ct={};const kt=Fe.find(Ut=>Ut.alias===p);if(kt&&p===kt.alias?ct=kt:(ct.alias=p,Fe.push(ct)),ct.label=null==x?{text:""}:{text:x},null==C)ct.type={text:"system"};else if("object"==typeof C){let[Ut,Ht]=Object.entries(C)[0];ct[Ut]={text:Ht}}else ct.type={text:C};if("object"==typeof w){let[Ut,Ht]=Object.entries(w)[0];ct[Ut]=Ht}else ct.tags=w;if("object"==typeof $){let[Ut,Ht]=Object.entries($)[0];ct[Ut]=Ht}else ct.link=$;ct.parentBoundary=j,ct.wrap=We(),fr=j,j=p,Xt.push(fr)},"addPersonOrSystemBoundary"),_e=(0,Rt.K2)(function(p,x,C,w,$){if(null===p||null===x)return;let ct={};const kt=Fe.find(Ut=>Ut.alias===p);if(kt&&p===kt.alias?ct=kt:(ct.alias=p,Fe.push(ct)),ct.label=null==x?{text:""}:{text:x},null==C)ct.type={text:"container"};else if("object"==typeof C){let[Ut,Ht]=Object.entries(C)[0];ct[Ut]={text:Ht}}else ct.type={text:C};if("object"==typeof w){let[Ut,Ht]=Object.entries(w)[0];ct[Ut]=Ht}else ct.tags=w;if("object"==typeof $){let[Ut,Ht]=Object.entries($)[0];ct[Ut]=Ht}else ct.link=$;ct.parentBoundary=j,ct.wrap=We(),fr=j,j=p,Xt.push(fr)},"addContainerBoundary"),Z=(0,Rt.K2)(function(p,x,C,w,$,ct,kt,Ut){if(null===x||null===C)return;let Ht={};const zt=Fe.find(ue=>ue.alias===x);if(zt&&x===zt.alias?Ht=zt:(Ht.alias=x,Fe.push(Ht)),Ht.label=null==C?{text:""}:{text:C},null==w)Ht.type={text:"node"};else if("object"==typeof w){let[ue,je]=Object.entries(w)[0];Ht[ue]={text:je}}else Ht.type={text:w};if(null==$)Ht.descr={text:""};else if("object"==typeof $){let[ue,je]=Object.entries($)[0];Ht[ue]={text:je}}else Ht.descr={text:$};if("object"==typeof kt){let[ue,je]=Object.entries(kt)[0];Ht[ue]=je}else Ht.tags=kt;if("object"==typeof Ut){let[ue,je]=Object.entries(Ut)[0];Ht[ue]=je}else Ht.link=Ut;Ht.nodeType=p,Ht.parentBoundary=j,Ht.wrap=We(),fr=j,j=x,Xt.push(fr)},"addDeploymentNode"),ae=(0,Rt.K2)(function(){j=fr,Xt.pop(),fr=Xt.pop(),Xt.push(fr)},"popBoundaryParseStack"),S=(0,Rt.K2)(function(p,x,C,w,$,ct,kt,Ut,Ht,zt,ue){let je=bt.find(ze=>ze.alias===x);if(void 0!==je||(je=Fe.find(ze=>ze.alias===x),void 0!==je)){if(null!=C)if("object"==typeof C){let[ze,Cr]=Object.entries(C)[0];je[ze]=Cr}else je.bgColor=C;if(null!=w)if("object"==typeof w){let[ze,Cr]=Object.entries(w)[0];je[ze]=Cr}else je.fontColor=w;if(null!=$)if("object"==typeof $){let[ze,Cr]=Object.entries($)[0];je[ze]=Cr}else je.borderColor=$;if(null!=ct)if("object"==typeof ct){let[ze,Cr]=Object.entries(ct)[0];je[ze]=Cr}else je.shadowing=ct;if(null!=kt)if("object"==typeof kt){let[ze,Cr]=Object.entries(kt)[0];je[ze]=Cr}else je.shape=kt;if(null!=Ut)if("object"==typeof Ut){let[ze,Cr]=Object.entries(Ut)[0];je[ze]=Cr}else je.sprite=Ut;if(null!=Ht)if("object"==typeof Ht){let[ze,Cr]=Object.entries(Ht)[0];je[ze]=Cr}else je.techn=Ht;if(null!=zt)if("object"==typeof zt){let[ze,Cr]=Object.entries(zt)[0];je[ze]=Cr}else je.legendText=zt;if(null!=ue)if("object"==typeof ue){let[ze,Cr]=Object.entries(ue)[0];je[ze]=Cr}else je.legendSprite=ue}},"updateElStyle"),re=(0,Rt.K2)(function(p,x,C,w,$,ct,kt){const Ut=vr.find(Ht=>Ht.from===x&&Ht.to===C);if(void 0!==Ut){if(null!=w)if("object"==typeof w){let[Ht,zt]=Object.entries(w)[0];Ut[Ht]=zt}else Ut.textColor=w;if(null!=$)if("object"==typeof $){let[Ht,zt]=Object.entries($)[0];Ut[Ht]=zt}else Ut.lineColor=$;if(null!=ct)if("object"==typeof ct){let[Ht,zt]=Object.entries(ct)[0];Ut[Ht]=parseInt(zt)}else Ut.offsetX=parseInt(ct);if(null!=kt)if("object"==typeof kt){let[Ht,zt]=Object.entries(kt)[0];Ut[Ht]=parseInt(zt)}else Ut.offsetY=parseInt(kt)}},"updateRelStyle"),Pt=(0,Rt.K2)(function(p,x,C){let w=mr,$=Er;if("object"==typeof x){const ct=Object.values(x)[0];w=parseInt(ct)}else w=parseInt(x);if("object"==typeof C){const ct=Object.values(C)[0];$=parseInt(ct)}else $=parseInt(C);w>=1&&(mr=w),$>=1&&(Er=$)},"updateLayoutConfig"),qt=(0,Rt.K2)(function(){return mr},"getC4ShapeInRow"),V=(0,Rt.K2)(function(){return Er},"getC4BoundaryInRow"),pt=(0,Rt.K2)(function(){return j},"getCurrentBoundaryParse"),H=(0,Rt.K2)(function(){return fr},"getParentBoundaryParse"),Nt=(0,Rt.K2)(function(p){return null==p?bt:bt.filter(x=>x.parentBoundary===p)},"getC4ShapeArray"),wt=(0,Rt.K2)(function(p){return bt.find(x=>x.alias===p)},"getC4Shape"),Wt=(0,Rt.K2)(function(p){return Object.keys(Nt(p))},"getC4ShapeKeys"),xe=(0,Rt.K2)(function(p){return null==p?Fe:Fe.filter(x=>x.parentBoundary===p)},"getBoundaries"),le=xe,Re=(0,Rt.K2)(function(){return vr},"getRels"),oe=(0,Rt.K2)(function(){return zr},"getTitle"),qe=(0,Rt.K2)(function(p){br=p},"setWrap"),We=(0,Rt.K2)(function(){return br},"autoWrap"),Ct=(0,Rt.K2)(function(){bt=[],Fe=[{alias:"global",label:{text:"global"},type:{text:"global"},tags:null,link:null,parentBoundary:""}],fr="",j="global",Xt=[""],vr=[],Xt=[""],zr="",br=!1,mr=4,Er=2},"clear"),et=(0,Rt.K2)(function(p){zr=(0,D.jZ)(p,(0,D.D7)())},"setTitle"),xt={addPersonOrSystem:Ge,addPersonOrSystemBoundary:Bt,addContainer:W,addContainerBoundary:_e,addComponent:ft,addDeploymentNode:Z,popBoundaryParseStack:ae,addRel:Br,updateElStyle:S,updateRelStyle:re,updateLayoutConfig:Pt,autoWrap:We,setWrap:qe,getC4ShapeArray:Nt,getC4Shape:wt,getC4ShapeKeys:Wt,getBoundaries:xe,getBoundarys:le,getCurrentBoundaryParse:pt,getParentBoundaryParse:H,getRels:Re,getTitle:oe,getC4Type:Ar,getC4ShapeInRow:qt,getC4BoundaryInRow:V,setAccTitle:D.SV,getAccTitle:D.iN,getAccDescription:D.m7,setAccDescription:D.EI,getConfig:(0,Rt.K2)(()=>(0,D.D7)().c4,"getConfig"),clear:Ct,LINETYPE:{SOLID:0,DOTTED:1,NOTE:2,SOLID_CROSS:3,DOTTED_CROSS:4,SOLID_OPEN:5,DOTTED_OPEN:6,LOOP_START:10,LOOP_END:11,ALT_START:12,ALT_ELSE:13,ALT_END:14,OPT_START:15,OPT_END:16,ACTIVE_START:17,ACTIVE_END:18,PAR_START:19,PAR_AND:20,PAR_END:21,RECT_START:22,RECT_END:23,SOLID_POINT:24,DOTTED_POINT:25},ARROWTYPE:{FILLED:0,OPEN:1},PLACEMENT:{LEFTOF:0,RIGHTOF:1,OVER:2},setTitle:et,setC4Type:ge},it=(0,Rt.K2)(function(p,x){return(0,ee.tk)(p,x)},"drawRect"),rt=(0,Rt.K2)(function(p,x,C,w,$,ct){const kt=p.append("image");kt.attr("width",x),kt.attr("height",C),kt.attr("x",w),kt.attr("y",$);let Ut=ct.startsWith("data:image/png;base64")?ct:(0,q.J)(ct);kt.attr("xlink:href",Ut)},"drawImage"),Et=(0,Rt.K2)((p,x,C)=>{const w=p.append("g");let $=0;for(let ct of x){let kt=ct.textColor?ct.textColor:"#444444",Ut=ct.lineColor?ct.lineColor:"#444444",Ht=ct.offsetX?parseInt(ct.offsetX):0,zt=ct.offsetY?parseInt(ct.offsetY):0,ue="";if(0===$){let ze=w.append("line");ze.attr("x1",ct.startPoint.x),ze.attr("y1",ct.startPoint.y),ze.attr("x2",ct.endPoint.x),ze.attr("y2",ct.endPoint.y),ze.attr("stroke-width","1"),ze.attr("stroke",Ut),ze.style("fill","none"),"rel_b"!==ct.type&&ze.attr("marker-end","url("+ue+"#arrowhead)"),("birel"===ct.type||"rel_b"===ct.type)&&ze.attr("marker-start","url("+ue+"#arrowend)"),$=-1}else{let ze=w.append("path");ze.attr("fill","none").attr("stroke-width","1").attr("stroke",Ut).attr("d","Mstartx,starty Qcontrolx,controly stopx,stopy ".replaceAll("startx",ct.startPoint.x).replaceAll("starty",ct.startPoint.y).replaceAll("controlx",ct.startPoint.x+(ct.endPoint.x-ct.startPoint.x)/2-(ct.endPoint.x-ct.startPoint.x)/4).replaceAll("controly",ct.startPoint.y+(ct.endPoint.y-ct.startPoint.y)/2).replaceAll("stopx",ct.endPoint.x).replaceAll("stopy",ct.endPoint.y)),"rel_b"!==ct.type&&ze.attr("marker-end","url("+ue+"#arrowhead)"),("birel"===ct.type||"rel_b"===ct.type)&&ze.attr("marker-start","url("+ue+"#arrowend)")}let je=C.messageFont();kr(C)(ct.label.text,w,Math.min(ct.startPoint.x,ct.endPoint.x)+Math.abs(ct.endPoint.x-ct.startPoint.x)/2+Ht,Math.min(ct.startPoint.y,ct.endPoint.y)+Math.abs(ct.endPoint.y-ct.startPoint.y)/2+zt,ct.label.width,ct.label.height,{fill:kt},je),ct.techn&&""!==ct.techn.text&&(je=C.messageFont(),kr(C)("["+ct.techn.text+"]",w,Math.min(ct.startPoint.x,ct.endPoint.x)+Math.abs(ct.endPoint.x-ct.startPoint.x)/2+Ht,Math.min(ct.startPoint.y,ct.endPoint.y)+Math.abs(ct.endPoint.y-ct.startPoint.y)/2+C.messageFontSize+5+zt,Math.max(ct.label.width,ct.techn.width),ct.techn.height,{fill:kt,"font-style":"italic"},je))}},"drawRels"),ut=(0,Rt.K2)(function(p,x,C){const w=p.append("g");let kt=x.fontColor?x.fontColor:"black",Ut={"stroke-width":1,"stroke-dasharray":"7.0,7.0"};x.nodeType&&(Ut={"stroke-width":1}),it(w,{x:x.x,y:x.y,fill:x.bgColor?x.bgColor:"none",stroke:x.borderColor?x.borderColor:"#444444",width:x.width,height:x.height,rx:2.5,ry:2.5,attrs:Ut});let zt=C.boundaryFont();zt.fontWeight="bold",zt.fontSize=zt.fontSize+2,zt.fontColor=kt,kr(C)(x.label.text,w,x.x,x.y+x.label.Y,x.width,x.height,{fill:"#444444"},zt),x.type&&""!==x.type.text&&(zt=C.boundaryFont(),zt.fontColor=kt,kr(C)(x.type.text,w,x.x,x.y+x.type.Y,x.width,x.height,{fill:"#444444"},zt)),x.descr&&""!==x.descr.text&&(zt=C.boundaryFont(),zt.fontSize=zt.fontSize-2,zt.fontColor=kt,kr(C)(x.descr.text,w,x.x,x.y+x.descr.Y,x.width,x.height,{fill:"#444444"},zt))},"drawBoundary"),It=(0,Rt.K2)(function(p,x,C){let w=x.bgColor?x.bgColor:C[x.typeC4Shape.text+"_bg_color"],$=x.borderColor?x.borderColor:C[x.typeC4Shape.text+"_border_color"],ct=x.fontColor?x.fontColor:"#FFFFFF",kt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAIAAADYYG7QAAACD0lEQVR4Xu2YoU4EMRCGT+4j8Ai8AhaH4QHgAUjQuFMECUgMIUgwJAgMhgQsAYUiJCiQIBBY+EITsjfTdme6V24v4c8vyGbb+ZjOtN0bNcvjQXmkH83WvYBWto6PLm6v7p7uH1/w2fXD+PBycX1Pv2l3IdDm/vn7x+dXQiAubRzoURa7gRZWd0iGRIiJbOnhnfYBQZNJjNbuyY2eJG8fkDE3bbG4ep6MHUAsgYxmE3nVs6VsBWJSGccsOlFPmLIViMzLOB7pCVO2AtHJMohH7Fh6zqitQK7m0rJvAVYgGcEpe//PLdDz65sM4pF9N7ICcXDKIB5Nv6j7tD0NoSdM2QrU9Gg0ewE1LqBhHR3BBdvj2vapnidjHxD/q6vd7Pvhr31AwcY8eXMTXAKECZZJFXuEq27aLgQK5uLMohCenGGuGewOxSjBvYBqeG6B+Nqiblggdjnc+ZXDy+FNFpFzw76O3UBAROuXh6FoiAcf5g9eTvUgzy0nWg6I8cXHRUpg5bOVBCo+KDpFajOf23GgPme7RSQ+lacIENUgJ6gg1k6HjgOlqnLqip4tEuhv0hNEMXUD0clyXE3p6pZA0S2nnvTlXwLJEZWlb7cTQH1+USgTN4VhAenm/wea1OCAOmqo6fE1WCb9WSKBah+rbUWPWAmE2Rvk0ApiB45eOyNAzU8xcTvj8KvkKEoOaIYeHNA3ZuygAvFMUO0AAAAASUVORK5CYII=";switch(x.typeC4Shape.text){case"person":kt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAIAAADYYG7QAAACD0lEQVR4Xu2YoU4EMRCGT+4j8Ai8AhaH4QHgAUjQuFMECUgMIUgwJAgMhgQsAYUiJCiQIBBY+EITsjfTdme6V24v4c8vyGbb+ZjOtN0bNcvjQXmkH83WvYBWto6PLm6v7p7uH1/w2fXD+PBycX1Pv2l3IdDm/vn7x+dXQiAubRzoURa7gRZWd0iGRIiJbOnhnfYBQZNJjNbuyY2eJG8fkDE3bbG4ep6MHUAsgYxmE3nVs6VsBWJSGccsOlFPmLIViMzLOB7pCVO2AtHJMohH7Fh6zqitQK7m0rJvAVYgGcEpe//PLdDz65sM4pF9N7ICcXDKIB5Nv6j7tD0NoSdM2QrU9Gg0ewE1LqBhHR3BBdvj2vapnidjHxD/q6vd7Pvhr31AwcY8eXMTXAKECZZJFXuEq27aLgQK5uLMohCenGGuGewOxSjBvYBqeG6B+Nqiblggdjnc+ZXDy+FNFpFzw76O3UBAROuXh6FoiAcf5g9eTvUgzy0nWg6I8cXHRUpg5bOVBCo+KDpFajOf23GgPme7RSQ+lacIENUgJ6gg1k6HjgOlqnLqip4tEuhv0hNEMXUD0clyXE3p6pZA0S2nnvTlXwLJEZWlb7cTQH1+USgTN4VhAenm/wea1OCAOmqo6fE1WCb9WSKBah+rbUWPWAmE2Rvk0ApiB45eOyNAzU8xcTvj8KvkKEoOaIYeHNA3ZuygAvFMUO0AAAAASUVORK5CYII=";break;case"external_person":kt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAIAAADYYG7QAAAB6ElEQVR4Xu2YLY+EMBCG9+dWr0aj0Wg0Go1Go0+j8Xdv2uTCvv1gpt0ebHKPuhDaeW4605Z9mJvx4AdXUyTUdd08z+u6flmWZRnHsWkafk9DptAwDPu+f0eAYtu2PEaGWuj5fCIZrBAC2eLBAnRCsEkkxmeaJp7iDJ2QMDdHsLg8SxKFEJaAo8lAXnmuOFIhTMpxxKATebo4UiFknuNo4OniSIXQyRxEA3YsnjGCVEjVXD7yLUAqxBGUyPv/Y4W2beMgGuS7kVQIBycH0fD+oi5pezQETxdHKmQKGk1eQEYldK+jw5GxPfZ9z7Mk0Qnhf1W1m3w//EUn5BDmSZsbR44QQLBEqrBHqOrmSKaQAxdnLArCrxZcM7A7ZKs4ioRq8LFC+NpC3WCBJsvpVw5edm9iEXFuyNfxXAgSwfrFQ1c0iNda8AdejvUgnktOtJQQxmcfFzGglc5WVCj7oDgFqU18boeFSs52CUh8LE8BIVQDT1ABrB0HtgSEYlX5doJnCwv9TXocKCaKbnwhdDKPq4lf3SwU3HLq4V/+WYhHVMa/3b4IlfyikAduCkcBc7mQ3/z/Qq/cTuikhkzB12Ae/mcJC9U+Vo8Ej1gWAtgbeGgFsAMHr50BIWOLCbezvhpBFUdY6EJuJ/QDW0XoMX60zZ0AAAAASUVORK5CYII="}const Ut=p.append("g");Ut.attr("class","person-man");const Ht=(0,ee.PB)();switch(x.typeC4Shape.text){case"person":case"external_person":case"system":case"external_system":case"container":case"external_container":case"component":case"external_component":Ht.x=x.x,Ht.y=x.y,Ht.fill=w,Ht.width=x.width,Ht.height=x.height,Ht.stroke=$,Ht.rx=2.5,Ht.ry=2.5,Ht.attrs={"stroke-width":.5},it(Ut,Ht);break;case"system_db":case"external_system_db":case"container_db":case"external_container_db":case"component_db":case"external_component_db":Ut.append("path").attr("fill",w).attr("stroke-width","0.5").attr("stroke",$).attr("d","Mstartx,startyc0,-10 half,-10 half,-10c0,0 half,0 half,10l0,heightc0,10 -half,10 -half,10c0,0 -half,0 -half,-10l0,-height".replaceAll("startx",x.x).replaceAll("starty",x.y).replaceAll("half",x.width/2).replaceAll("height",x.height)),Ut.append("path").attr("fill","none").attr("stroke-width","0.5").attr("stroke",$).attr("d","Mstartx,startyc0,10 half,10 half,10c0,0 half,0 half,-10".replaceAll("startx",x.x).replaceAll("starty",x.y).replaceAll("half",x.width/2));break;case"system_queue":case"external_system_queue":case"container_queue":case"external_container_queue":case"component_queue":case"external_component_queue":Ut.append("path").attr("fill",w).attr("stroke-width","0.5").attr("stroke",$).attr("d","Mstartx,startylwidth,0c5,0 5,half 5,halfc0,0 0,half -5,halfl-width,0c-5,0 -5,-half -5,-halfc0,0 0,-half 5,-half".replaceAll("startx",x.x).replaceAll("starty",x.y).replaceAll("width",x.width).replaceAll("half",x.height/2)),Ut.append("path").attr("fill","none").attr("stroke-width","0.5").attr("stroke",$).attr("d","Mstartx,startyc-5,0 -5,half -5,halfc0,half 5,half 5,half".replaceAll("startx",x.x+x.width).replaceAll("starty",x.y).replaceAll("half",x.height/2))}let zt=ye(C,x.typeC4Shape.text);switch(Ut.append("text").attr("fill",ct).attr("font-family",zt.fontFamily).attr("font-size",zt.fontSize-2).attr("font-style","italic").attr("lengthAdjust","spacing").attr("textLength",x.typeC4Shape.width).attr("x",x.x+x.width/2-x.typeC4Shape.width/2).attr("y",x.y+x.typeC4Shape.Y).text("<<"+x.typeC4Shape.text+">>"),x.typeC4Shape.text){case"person":case"external_person":rt(Ut,48,48,x.x+x.width/2-24,x.y+x.image.Y,kt)}let ue=C[x.typeC4Shape.text+"Font"]();return ue.fontWeight="bold",ue.fontSize=ue.fontSize+2,ue.fontColor=ct,kr(C)(x.label.text,Ut,x.x,x.y+x.label.Y,x.width,x.height,{fill:ct},ue),ue=C[x.typeC4Shape.text+"Font"](),ue.fontColor=ct,x.techn&&""!==x.techn?.text?kr(C)(x.techn.text,Ut,x.x,x.y+x.techn.Y,x.width,x.height,{fill:ct,"font-style":"italic"},ue):x.type&&""!==x.type.text&&kr(C)(x.type.text,Ut,x.x,x.y+x.type.Y,x.width,x.height,{fill:ct,"font-style":"italic"},ue),x.descr&&""!==x.descr.text&&(ue=C.personFont(),ue.fontColor=ct,kr(C)(x.descr.text,Ut,x.x,x.y+x.descr.Y,x.width,x.height,{fill:ct},ue)),x.height},"drawC4Shape"),G=(0,Rt.K2)(function(p){p.append("defs").append("symbol").attr("id","database").attr("fill-rule","evenodd").attr("clip-rule","evenodd").append("path").attr("transform","scale(.5)").attr("d","M12.258.001l.256.004.255.005.253.008.251.01.249.012.247.015.246.016.242.019.241.02.239.023.236.024.233.027.231.028.229.031.225.032.223.034.22.036.217.038.214.04.211.041.208.043.205.045.201.046.198.048.194.05.191.051.187.053.183.054.18.056.175.057.172.059.168.06.163.061.16.063.155.064.15.066.074.033.073.033.071.034.07.034.069.035.068.035.067.035.066.035.064.036.064.036.062.036.06.036.06.037.058.037.058.037.055.038.055.038.053.038.052.038.051.039.05.039.048.039.047.039.045.04.044.04.043.04.041.04.04.041.039.041.037.041.036.041.034.041.033.042.032.042.03.042.029.042.027.042.026.043.024.043.023.043.021.043.02.043.018.044.017.043.015.044.013.044.012.044.011.045.009.044.007.045.006.045.004.045.002.045.001.045v17l-.001.045-.002.045-.004.045-.006.045-.007.045-.009.044-.011.045-.012.044-.013.044-.015.044-.017.043-.018.044-.02.043-.021.043-.023.043-.024.043-.026.043-.027.042-.029.042-.03.042-.032.042-.033.042-.034.041-.036.041-.037.041-.039.041-.04.041-.041.04-.043.04-.044.04-.045.04-.047.039-.048.039-.05.039-.051.039-.052.038-.053.038-.055.038-.055.038-.058.037-.058.037-.06.037-.06.036-.062.036-.064.036-.064.036-.066.035-.067.035-.068.035-.069.035-.07.034-.071.034-.073.033-.074.033-.15.066-.155.064-.16.063-.163.061-.168.06-.172.059-.175.057-.18.056-.183.054-.187.053-.191.051-.194.05-.198.048-.201.046-.205.045-.208.043-.211.041-.214.04-.217.038-.22.036-.223.034-.225.032-.229.031-.231.028-.233.027-.236.024-.239.023-.241.02-.242.019-.246.016-.247.015-.249.012-.251.01-.253.008-.255.005-.256.004-.258.001-.258-.001-.256-.004-.255-.005-.253-.008-.251-.01-.249-.012-.247-.015-.245-.016-.243-.019-.241-.02-.238-.023-.236-.024-.234-.027-.231-.028-.228-.031-.226-.032-.223-.034-.22-.036-.217-.038-.214-.04-.211-.041-.208-.043-.204-.045-.201-.046-.198-.048-.195-.05-.19-.051-.187-.053-.184-.054-.179-.056-.176-.057-.172-.059-.167-.06-.164-.061-.159-.063-.155-.064-.151-.066-.074-.033-.072-.033-.072-.034-.07-.034-.069-.035-.068-.035-.067-.035-.066-.035-.064-.036-.063-.036-.062-.036-.061-.036-.06-.037-.058-.037-.057-.037-.056-.038-.055-.038-.053-.038-.052-.038-.051-.039-.049-.039-.049-.039-.046-.039-.046-.04-.044-.04-.043-.04-.041-.04-.04-.041-.039-.041-.037-.041-.036-.041-.034-.041-.033-.042-.032-.042-.03-.042-.029-.042-.027-.042-.026-.043-.024-.043-.023-.043-.021-.043-.02-.043-.018-.044-.017-.043-.015-.044-.013-.044-.012-.044-.011-.045-.009-.044-.007-.045-.006-.045-.004-.045-.002-.045-.001-.045v-17l.001-.045.002-.045.004-.045.006-.045.007-.045.009-.044.011-.045.012-.044.013-.044.015-.044.017-.043.018-.044.02-.043.021-.043.023-.043.024-.043.026-.043.027-.042.029-.042.03-.042.032-.042.033-.042.034-.041.036-.041.037-.041.039-.041.04-.041.041-.04.043-.04.044-.04.046-.04.046-.039.049-.039.049-.039.051-.039.052-.038.053-.038.055-.038.056-.038.057-.037.058-.037.06-.037.061-.036.062-.036.063-.036.064-.036.066-.035.067-.035.068-.035.069-.035.07-.034.072-.034.072-.033.074-.033.151-.066.155-.064.159-.063.164-.061.167-.06.172-.059.176-.057.179-.056.184-.054.187-.053.19-.051.195-.05.198-.048.201-.046.204-.045.208-.043.211-.041.214-.04.217-.038.22-.036.223-.034.226-.032.228-.031.231-.028.234-.027.236-.024.238-.023.241-.02.243-.019.245-.016.247-.015.249-.012.251-.01.253-.008.255-.005.256-.004.258-.001.258.001zm-9.258 20.499v.01l.001.021.003.021.004.022.005.021.006.022.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.023.018.024.019.024.021.024.022.025.023.024.024.025.052.049.056.05.061.051.066.051.07.051.075.051.079.052.084.052.088.052.092.052.097.052.102.051.105.052.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.048.144.049.147.047.152.047.155.047.16.045.163.045.167.043.171.043.176.041.178.041.183.039.187.039.19.037.194.035.197.035.202.033.204.031.209.03.212.029.216.027.219.025.222.024.226.021.23.02.233.018.236.016.24.015.243.012.246.01.249.008.253.005.256.004.259.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.021.224-.024.22-.026.216-.027.212-.028.21-.031.205-.031.202-.034.198-.034.194-.036.191-.037.187-.039.183-.04.179-.04.175-.042.172-.043.168-.044.163-.045.16-.046.155-.046.152-.047.148-.048.143-.049.139-.049.136-.05.131-.05.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.053.083-.051.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.05.023-.024.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.023.01-.022.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.127l-.077.055-.08.053-.083.054-.085.053-.087.052-.09.052-.093.051-.095.05-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.045-.118.044-.12.043-.122.042-.124.042-.126.041-.128.04-.13.04-.132.038-.134.038-.135.037-.138.037-.139.035-.142.035-.143.034-.144.033-.147.032-.148.031-.15.03-.151.03-.153.029-.154.027-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.01-.179.008-.179.008-.181.006-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.006-.179-.008-.179-.008-.178-.01-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.027-.153-.029-.151-.03-.15-.03-.148-.031-.146-.032-.145-.033-.143-.034-.141-.035-.14-.035-.137-.037-.136-.037-.134-.038-.132-.038-.13-.04-.128-.04-.126-.041-.124-.042-.122-.042-.12-.044-.117-.043-.116-.045-.113-.045-.112-.046-.109-.047-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.05-.093-.052-.09-.051-.087-.052-.085-.053-.083-.054-.08-.054-.077-.054v4.127zm0-5.654v.011l.001.021.003.021.004.021.005.022.006.022.007.022.009.022.01.022.011.023.012.023.013.023.015.024.016.023.017.024.018.024.019.024.021.024.022.024.023.025.024.024.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.052.11.051.114.051.119.052.123.05.127.051.131.05.135.049.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.044.171.042.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.022.23.02.233.018.236.016.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.012.241-.015.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.048.139-.05.136-.049.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.051.051-.049.023-.025.023-.024.021-.025.02-.024.019-.024.018-.024.017-.024.015-.023.014-.023.013-.024.012-.022.01-.023.01-.023.008-.022.006-.022.006-.022.004-.021.004-.022.001-.021.001-.021v-4.139l-.077.054-.08.054-.083.054-.085.052-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.044-.118.044-.12.044-.122.042-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.035-.143.033-.144.033-.147.033-.148.031-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.009-.179.009-.179.007-.181.007-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.007-.179-.007-.179-.009-.178-.009-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.031-.146-.033-.145-.033-.143-.033-.141-.035-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.04-.126-.041-.124-.042-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.051-.093-.051-.09-.051-.087-.053-.085-.052-.083-.054-.08-.054-.077-.054v4.139zm0-5.666v.011l.001.02.003.022.004.021.005.022.006.021.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.024.018.023.019.024.021.025.022.024.023.024.024.025.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.051.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.043.171.043.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.021.23.02.233.018.236.017.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.013.241-.014.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.049.139-.049.136-.049.131-.051.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.049.023-.025.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.022.01-.023.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.153l-.077.054-.08.054-.083.053-.085.053-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.048-.105.048-.106.048-.109.046-.111.046-.114.046-.115.044-.118.044-.12.043-.122.043-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.034-.143.034-.144.033-.147.032-.148.032-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.024-.161.024-.162.023-.163.023-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.01-.178.01-.179.009-.179.007-.181.006-.182.006-.182.004-.184.003-.184.001-.185.001-.185-.001-.184-.001-.184-.003-.182-.004-.182-.006-.181-.006-.179-.007-.179-.009-.178-.01-.176-.01-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.023-.162-.023-.161-.024-.159-.024-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.032-.146-.032-.145-.033-.143-.034-.141-.034-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.041-.126-.041-.124-.041-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.048-.105-.048-.102-.048-.1-.05-.097-.049-.095-.051-.093-.051-.09-.052-.087-.052-.085-.053-.083-.053-.08-.054-.077-.054v4.153zm8.74-8.179l-.257.004-.254.005-.25.008-.247.011-.244.012-.241.014-.237.016-.233.018-.231.021-.226.022-.224.023-.22.026-.216.027-.212.028-.21.031-.205.032-.202.033-.198.034-.194.036-.191.038-.187.038-.183.04-.179.041-.175.042-.172.043-.168.043-.163.045-.16.046-.155.046-.152.048-.148.048-.143.048-.139.049-.136.05-.131.05-.126.051-.123.051-.118.051-.114.052-.11.052-.106.052-.101.052-.096.052-.092.052-.088.052-.083.052-.079.052-.074.051-.07.052-.065.051-.06.05-.056.05-.051.05-.023.025-.023.024-.021.024-.02.025-.019.024-.018.024-.017.023-.015.024-.014.023-.013.023-.012.023-.01.023-.01.022-.008.022-.006.023-.006.021-.004.022-.004.021-.001.021-.001.021.001.021.001.021.004.021.004.022.006.021.006.023.008.022.01.022.01.023.012.023.013.023.014.023.015.024.017.023.018.024.019.024.02.025.021.024.023.024.023.025.051.05.056.05.06.05.065.051.07.052.074.051.079.052.083.052.088.052.092.052.096.052.101.052.106.052.11.052.114.052.118.051.123.051.126.051.131.05.136.05.139.049.143.048.148.048.152.048.155.046.16.046.163.045.168.043.172.043.175.042.179.041.183.04.187.038.191.038.194.036.198.034.202.033.205.032.21.031.212.028.216.027.22.026.224.023.226.022.231.021.233.018.237.016.241.014.244.012.247.011.25.008.254.005.257.004.26.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.022.224-.023.22-.026.216-.027.212-.028.21-.031.205-.032.202-.033.198-.034.194-.036.191-.038.187-.038.183-.04.179-.041.175-.042.172-.043.168-.043.163-.045.16-.046.155-.046.152-.048.148-.048.143-.048.139-.049.136-.05.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.05.051-.05.023-.025.023-.024.021-.024.02-.025.019-.024.018-.024.017-.023.015-.024.014-.023.013-.023.012-.023.01-.023.01-.022.008-.022.006-.023.006-.021.004-.022.004-.021.001-.021.001-.021-.001-.021-.001-.021-.004-.021-.004-.022-.006-.021-.006-.023-.008-.022-.01-.022-.01-.023-.012-.023-.013-.023-.014-.023-.015-.024-.017-.023-.018-.024-.019-.024-.02-.025-.021-.024-.023-.024-.023-.025-.051-.05-.056-.05-.06-.05-.065-.051-.07-.052-.074-.051-.079-.052-.083-.052-.088-.052-.092-.052-.096-.052-.101-.052-.106-.052-.11-.052-.114-.052-.118-.051-.123-.051-.126-.051-.131-.05-.136-.05-.139-.049-.143-.048-.148-.048-.152-.048-.155-.046-.16-.046-.163-.045-.168-.043-.172-.043-.175-.042-.179-.041-.183-.04-.187-.038-.191-.038-.194-.036-.198-.034-.202-.033-.205-.032-.21-.031-.212-.028-.216-.027-.22-.026-.224-.023-.226-.022-.231-.021-.233-.018-.237-.016-.241-.014-.244-.012-.247-.011-.25-.008-.254-.005-.257-.004-.26-.001-.26.001z")},"insertDatabaseIcon"),st=(0,Rt.K2)(function(p){p.append("defs").append("symbol").attr("id","computer").attr("width","24").attr("height","24").append("path").attr("transform","scale(.5)").attr("d","M2 2v13h20v-13h-20zm18 11h-16v-9h16v9zm-10.228 6l.466-1h3.524l.467 1h-4.457zm14.228 3h-24l2-6h2.104l-1.33 4h18.45l-1.297-4h2.073l2 6zm-5-10h-14v-7h14v7z")},"insertComputerIcon"),Ce=(0,Rt.K2)(function(p){p.append("defs").append("symbol").attr("id","clock").attr("width","24").attr("height","24").append("path").attr("transform","scale(.5)").attr("d","M12 2c5.514 0 10 4.486 10 10s-4.486 10-10 10-10-4.486-10-10 4.486-10 10-10zm0-2c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm5.848 12.459c.202.038.202.333.001.372-1.907.361-6.045 1.111-6.547 1.111-.719 0-1.301-.582-1.301-1.301 0-.512.77-5.447 1.125-7.445.034-.192.312-.181.343.014l.985 6.238 5.394 1.011z")},"insertClockIcon"),Ot=(0,Rt.K2)(function(p){p.append("defs").append("marker").attr("id","arrowhead").attr("refX",9).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z")},"insertArrowHead"),Jt=(0,Rt.K2)(function(p){p.append("defs").append("marker").attr("id","arrowend").attr("refX",1).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 10 0 L 0 5 L 10 10 z")},"insertArrowEnd"),fe=(0,Rt.K2)(function(p){p.append("defs").append("marker").attr("id","filled-head").attr("refX",18).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")},"insertArrowFilledHead"),Be=(0,Rt.K2)(function(p){p.append("defs").append("marker").attr("id","sequencenumber").attr("refX",15).attr("refY",15).attr("markerWidth",60).attr("markerHeight",40).attr("orient","auto").append("circle").attr("cx",15).attr("cy",15).attr("r",6)},"insertDynamicNumber"),Ze=(0,Rt.K2)(function(p){const C=p.append("defs").append("marker").attr("id","crosshead").attr("markerWidth",15).attr("markerHeight",8).attr("orient","auto").attr("refX",16).attr("refY",4);C.append("path").attr("fill","black").attr("stroke","#000000").style("stroke-dasharray","0, 0").attr("stroke-width","1px").attr("d","M 9,2 V 6 L16,4 Z"),C.append("path").attr("fill","none").attr("stroke","#000000").style("stroke-dasharray","0, 0").attr("stroke-width","1px").attr("d","M 0,1 L 6,7 M 6,1 L 0,7")},"insertArrowCrossHead"),ye=(0,Rt.K2)((p,x)=>({fontFamily:p[x+"FontFamily"],fontSize:p[x+"FontSize"],fontWeight:p[x+"FontWeight"]}),"getC4ShapeFont"),kr=function(){function p($,ct,kt,Ut,Ht,zt,ue){w(ct.append("text").attr("x",kt+Ht/2).attr("y",Ut+zt/2+5).style("text-anchor","middle").text($),ue)}function x($,ct,kt,Ut,Ht,zt,ue,je){const{fontSize:ze,fontFamily:Cr,fontWeight:cr}=je,sr=$.split(D.Y2.lineBreakRegex);for(let $e=0;$e<sr.length;$e++){const He=$e*ze-ze*(sr.length-1)/2,Pr=ct.append("text").attr("x",kt+Ht/2).attr("y",Ut).style("text-anchor","middle").attr("dominant-baseline","middle").style("font-size",ze).style("font-weight",cr).style("font-family",Cr);Pr.append("tspan").attr("dy",He).text(sr[$e]).attr("alignment-baseline","mathematical"),w(Pr,ue)}}function C($,ct,kt,Ut,Ht,zt,ue,je){const ze=ct.append("switch"),cr=ze.append("foreignObject").attr("x",kt).attr("y",Ut).attr("width",Ht).attr("height",zt).append("xhtml:div").style("display","table").style("height","100%").style("width","100%");cr.append("div").style("display","table-cell").style("text-align","center").style("vertical-align","middle").text($),x($,ze,kt,Ut,Ht,0,ue,je),w(cr,ue)}function w($,ct){for(const kt in ct)ct.hasOwnProperty(kt)&&$.attr(kt,ct[kt])}return(0,Rt.K2)(p,"byText"),(0,Rt.K2)(x,"byTspan"),(0,Rt.K2)(C,"byFo"),(0,Rt.K2)(w,"_setTextAttrs"),function($){return"fo"===$.textPlacement?C:"old"===$.textPlacement?p:x}}(),ur={drawRect:it,drawBoundary:ut,drawC4Shape:It,drawRels:Et,drawImage:rt,insertArrowHead:Ot,insertArrowEnd:Jt,insertArrowFilledHead:fe,insertDynamicNumber:Be,insertArrowCrossHead:Ze,insertDatabaseIcon:G,insertComputerIcon:st,insertClockIcon:Ce},Kt=0,Pe=0,ir=4,me=2;yt.yy=xt;var ce={},ke=(class{constructor(p){this.name="",this.data={},this.data.startx=void 0,this.data.stopx=void 0,this.data.starty=void 0,this.data.stopy=void 0,this.data.widthLimit=void 0,this.nextData={},this.nextData.startx=void 0,this.nextData.stopx=void 0,this.nextData.starty=void 0,this.nextData.stopy=void 0,this.nextData.cnt=0,Te(p.db.getConfig())}setData(p,x,C,w){this.nextData.startx=this.data.startx=p,this.nextData.stopx=this.data.stopx=x,this.nextData.starty=this.data.starty=C,this.nextData.stopy=this.data.stopy=w}updateVal(p,x,C,w){p[x]=void 0===p[x]?C:w(C,p[x])}insert(p){this.nextData.cnt=this.nextData.cnt+1;let x=this.nextData.startx===this.nextData.stopx?this.nextData.stopx+p.margin:this.nextData.stopx+2*p.margin,C=x+p.width,w=this.nextData.starty+2*p.margin,$=w+p.height;(x>=this.data.widthLimit||C>=this.data.widthLimit||this.nextData.cnt>ir)&&(x=this.nextData.startx+p.margin+ce.nextLinePaddingX,w=this.nextData.stopy+2*p.margin,this.nextData.stopx=C=x+p.width,this.nextData.starty=this.nextData.stopy,this.nextData.stopy=$=w+p.height,this.nextData.cnt=1),p.x=x,p.y=w,this.updateVal(this.data,"startx",x,Math.min),this.updateVal(this.data,"starty",w,Math.min),this.updateVal(this.data,"stopx",C,Math.max),this.updateVal(this.data,"stopy",$,Math.max),this.updateVal(this.nextData,"startx",x,Math.min),this.updateVal(this.nextData,"starty",w,Math.min),this.updateVal(this.nextData,"stopx",C,Math.max),this.updateVal(this.nextData,"stopy",$,Math.max)}init(p){this.name="",this.data={startx:void 0,stopx:void 0,starty:void 0,stopy:void 0,widthLimit:void 0},this.nextData={startx:void 0,stopx:void 0,starty:void 0,stopy:void 0,cnt:0},Te(p.db.getConfig())}bumpLastMargin(p){this.data.stopx+=p,this.data.stopy+=p}static#t=A=()=>((0,lt.A)(this,"Bounds"),(0,Rt.K2)(this,"Bounds"),this)},A()),Te=(0,Rt.K2)(function(p){(0,D.hH)(ce,p),p.fontFamily&&(ce.personFontFamily=ce.systemFontFamily=ce.messageFontFamily=p.fontFamily),p.fontSize&&(ce.personFontSize=ce.systemFontSize=ce.messageFontSize=p.fontSize),p.fontWeight&&(ce.personFontWeight=ce.systemFontWeight=ce.messageFontWeight=p.fontWeight)},"setConf"),er=(0,Rt.K2)((p,x)=>({fontFamily:p[x+"FontFamily"],fontSize:p[x+"FontSize"],fontWeight:p[x+"FontWeight"]}),"c4ShapeFont"),Xe=(0,Rt.K2)(p=>({fontFamily:p.boundaryFontFamily,fontSize:p.boundaryFontSize,fontWeight:p.boundaryFontWeight}),"boundaryFont"),Ir=(0,Rt.K2)(p=>({fontFamily:p.messageFontFamily,fontSize:p.messageFontSize,fontWeight:p.messageFontWeight}),"messageFont");function Ee(p,x,C,w,$){if(!x[p].width)if(C)x[p].text=(0,L.bH)(x[p].text,$,w),x[p].textLines=x[p].text.split(D.Y2.lineBreakRegex).length,x[p].width=$,x[p].height=(0,L.ru)(x[p].text,w);else{let ct=x[p].text.split(D.Y2.lineBreakRegex);x[p].textLines=ct.length;let kt=0;x[p].height=0,x[p].width=0;for(const Ut of ct)x[p].width=Math.max((0,L.Un)(Ut,w),x[p].width),kt=(0,L.ru)(Ut,w),x[p].height=x[p].height+kt}}(0,Rt.K2)(Ee,"calcC4ShapeTextWH");var qr=(0,Rt.K2)(function(p,x,C){x.x=C.data.startx,x.y=C.data.starty,x.width=C.data.stopx-C.data.startx,x.height=C.data.stopy-C.data.starty,x.label.y=ce.c4ShapeMargin-35;let w=x.wrap&&ce.wrap,$=Xe(ce);$.fontSize=$.fontSize+2,$.fontWeight="bold",Ee("label",x,w,$,(0,L.Un)(x.label.text,$)),ur.drawBoundary(p,x,ce)},"drawBoundary"),nr=(0,Rt.K2)(function(p,x,C,w){let $=0;for(const ct of w){$=0;const kt=C[ct];let Ut=er(ce,kt.typeC4Shape.text);switch(Ut.fontSize=Ut.fontSize-2,kt.typeC4Shape.width=(0,L.Un)("\xab"+kt.typeC4Shape.text+"\xbb",Ut),kt.typeC4Shape.height=Ut.fontSize+2,kt.typeC4Shape.Y=ce.c4ShapePadding,$=kt.typeC4Shape.Y+kt.typeC4Shape.height-4,kt.image={width:0,height:0,Y:0},kt.typeC4Shape.text){case"person":case"external_person":kt.image.width=48,kt.image.height=48,kt.image.Y=$,$=kt.image.Y+kt.image.height}kt.sprite&&(kt.image.width=48,kt.image.height=48,kt.image.Y=$,$=kt.image.Y+kt.image.height);let Ht=kt.wrap&&ce.wrap,zt=ce.width-2*ce.c4ShapePadding,ue=er(ce,kt.typeC4Shape.text);ue.fontSize=ue.fontSize+2,ue.fontWeight="bold",Ee("label",kt,Ht,ue,zt),kt.label.Y=$+8,$=kt.label.Y+kt.label.height,kt.type&&""!==kt.type.text?(kt.type.text="["+kt.type.text+"]",Ee("type",kt,Ht,er(ce,kt.typeC4Shape.text),zt),kt.type.Y=$+5,$=kt.type.Y+kt.type.height):kt.techn&&""!==kt.techn.text&&(kt.techn.text="["+kt.techn.text+"]",Ee("techn",kt,Ht,er(ce,kt.techn.text),zt),kt.techn.Y=$+5,$=kt.techn.Y+kt.techn.height);let je=$,ze=kt.label.width;kt.descr&&""!==kt.descr.text&&(Ee("descr",kt,Ht,er(ce,kt.typeC4Shape.text),zt),kt.descr.Y=$+20,$=kt.descr.Y+kt.descr.height,ze=Math.max(kt.label.width,kt.descr.width),je=$-5*kt.descr.textLines),ze+=ce.c4ShapePadding,kt.width=Math.max(kt.width||ce.width,ze,ce.width),kt.height=Math.max(kt.height||ce.height,je,ce.height),kt.margin=kt.margin||ce.c4ShapeMargin,p.insert(kt),ur.drawC4Shape(x,kt,ce)}p.bumpLastMargin(ce.c4ShapeMargin)},"drawC4ShapeArray"),te=(class{constructor(p,x){this.x=p,this.y=x}static#t=$t=()=>((0,lt.A)(this,"Point"),(0,Rt.K2)(this,"Point"),this)},$t()),ne=(0,Rt.K2)(function(p,x){let C=p.x,w=p.y,$=x.x,ct=x.y,kt=C+p.width/2,Ut=w+p.height/2,Ht=Math.abs(C-$),zt=Math.abs(w-ct),ue=zt/Ht,je=p.height/p.width,ze=null;return w==ct&&C<$?ze=new te(C+p.width,Ut):w==ct&&C>$?ze=new te(C,Ut):C==$&&w<ct?ze=new te(kt,w+p.height):C==$&&w>ct&&(ze=new te(kt,w)),C>$&&w<ct?ze=je>=ue?new te(C,Ut+ue*p.width/2):new te(kt-Ht/zt*p.height/2,w+p.height):C<$&&w<ct?ze=je>=ue?new te(C+p.width,Ut+ue*p.width/2):new te(kt+Ht/zt*p.height/2,w+p.height):C<$&&w>ct?ze=je>=ue?new te(C+p.width,Ut-ue*p.width/2):new te(kt+p.height/2*Ht/zt,w):C>$&&w>ct&&(ze=je>=ue?new te(C,Ut-p.width/2*ue):new te(kt-p.height/2*Ht/zt,w)),ze},"getIntersectPoint"),Le=(0,Rt.K2)(function(p,x){let C={x:0,y:0};C.x=x.x+x.width/2,C.y=x.y+x.height/2;let w=ne(p,C);return C.x=p.x+p.width/2,C.y=p.y+p.height/2,{startPoint:w,endPoint:ne(x,C)}},"getIntersectPoints"),tr=(0,Rt.K2)(function(p,x,C,w){let $=0;for(let ct of x){$+=1;let kt=ct.wrap&&ce.wrap,Ut=Ir(ce);"C4Dynamic"===w.db.getC4Type()&&(ct.label.text=$+": "+ct.label.text);let zt=(0,L.Un)(ct.label.text,Ut);Ee("label",ct,kt,Ut,zt),ct.techn&&""!==ct.techn.text&&(zt=(0,L.Un)(ct.techn.text,Ut),Ee("techn",ct,kt,Ut,zt)),ct.descr&&""!==ct.descr.text&&(zt=(0,L.Un)(ct.descr.text,Ut),Ee("descr",ct,kt,Ut,zt));let ue=C(ct.from),je=C(ct.to),ze=Le(ue,je);ct.startPoint=ze.startPoint,ct.endPoint=ze.endPoint}ur.drawRels(p,x,ce)},"drawRels");function g(p,x,C,w,$){let ct=new ke($);ct.data.widthLimit=C.data.widthLimit/Math.min(me,w.length);for(let[kt,Ut]of w.entries()){let Ht=0;Ut.image={width:0,height:0,Y:0},Ut.sprite&&(Ut.image.width=48,Ut.image.height=48,Ut.image.Y=Ht,Ht=Ut.image.Y+Ut.image.height);let zt=Ut.wrap&&ce.wrap,ue=Xe(ce);if(ue.fontSize=ue.fontSize+2,ue.fontWeight="bold",Ee("label",Ut,zt,ue,ct.data.widthLimit),Ut.label.Y=Ht+8,Ht=Ut.label.Y+Ut.label.height,Ut.type&&""!==Ut.type.text&&(Ut.type.text="["+Ut.type.text+"]",Ee("type",Ut,zt,Xe(ce),ct.data.widthLimit),Ut.type.Y=Ht+5,Ht=Ut.type.Y+Ut.type.height),Ut.descr&&""!==Ut.descr.text){let cr=Xe(ce);cr.fontSize=cr.fontSize-2,Ee("descr",Ut,zt,cr,ct.data.widthLimit),Ut.descr.Y=Ht+20,Ht=Ut.descr.Y+Ut.descr.height}if(0==kt||kt%me===0){let cr=C.data.startx+ce.diagramMarginX,sr=C.data.stopy+ce.diagramMarginY+Ht;ct.setData(cr,cr,sr,sr)}else{let cr=ct.data.stopx!==ct.data.startx?ct.data.stopx+ce.diagramMarginX:ct.data.startx,sr=ct.data.starty;ct.setData(cr,cr,sr,sr)}ct.name=Ut.alias;let je=$.db.getC4ShapeArray(Ut.alias),ze=$.db.getC4ShapeKeys(Ut.alias);ze.length>0&&nr(ct,p,je,ze);let Cr=$.db.getBoundaries(x=Ut.alias);Cr.length>0&&g(p,x,ct,Cr,$),"global"!==Ut.alias&&qr(p,Ut,ct),C.data.stopy=Math.max(ct.data.stopy+ce.c4ShapeMargin,C.data.stopy),C.data.stopx=Math.max(ct.data.stopx+ce.c4ShapeMargin,C.data.stopx),Kt=Math.max(Kt,C.data.stopx),Pe=Math.max(Pe,C.data.stopy)}}(0,Rt.K2)(g,"drawInsideBoundary");var E={drawPersonOrSystemArray:nr,drawBoundary:qr,setConf:Te,draw:(0,Rt.K2)(function(p,x,C,w){ce=(0,D.D7)().c4;const $=(0,D.D7)().securityLevel;let ct;"sandbox"===$&&(ct=(0,dt.Ltv)("#i"+x));const kt=(0,dt.Ltv)("sandbox"===$?ct.nodes()[0].contentDocument.body:"body");let Ut=w.db;w.db.setWrap(ce.wrap),ir=Ut.getC4ShapeInRow(),me=Ut.getC4BoundaryInRow(),Rt.Rm.debug(`C:${JSON.stringify(ce,null,2)}`);const Ht="sandbox"===$?kt.select(`[id="${x}"]`):(0,dt.Ltv)(`[id="${x}"]`);ur.insertComputerIcon(Ht),ur.insertDatabaseIcon(Ht),ur.insertClockIcon(Ht);let zt=new ke(w);zt.setData(ce.diagramMarginX,ce.diagramMarginX,ce.diagramMarginY,ce.diagramMarginY),zt.data.widthLimit=screen.availWidth,Kt=ce.diagramMarginX,Pe=ce.diagramMarginY;const ue=w.db.getTitle();g(Ht,"",zt,w.db.getBoundaries(""),w),ur.insertArrowHead(Ht),ur.insertArrowEnd(Ht),ur.insertArrowCrossHead(Ht),ur.insertArrowFilledHead(Ht),tr(Ht,w.db.getRels(),w.db.getC4Shape,w),zt.data.stopx=Kt,zt.data.stopy=Pe;const ze=zt.data;let cr=ze.stopy-ze.starty+2*ce.diagramMarginY;const $e=ze.stopx-ze.startx+2*ce.diagramMarginX;ue&&Ht.append("text").text(ue).attr("x",(ze.stopx-ze.startx)/2-4*ce.diagramMarginX).attr("y",ze.starty+ce.diagramMarginY),(0,D.a$)(Ht,cr,$e,ce.useMaxWidth);const He=ue?60:0;Ht.attr("viewBox",ze.startx-ce.diagramMarginX+" -"+(ce.diagramMarginY+He)+" "+$e+" "+(cr+He)),Rt.Rm.debug("models:",ze)},"draw")},z={parser:Ye,db:xt,renderer:E,styles:(0,Rt.K2)(p=>`.person {\n    stroke: ${p.personBorder};\n    fill: ${p.personBkg};\n  }\n`,"getStyles"),init:(0,Rt.K2)(({c4:p,wrap:x})=>{E.setConf(p),xt.setWrap(x)},"init")}},72774:(ti,_r,B)=>{"use strict";B.d(_r,{n:()=>lt});var lt={name:"mermaid",version:"11.12.2",description:"Markdown-ish syntax for generating flowcharts, mindmaps, sequence diagrams, class diagrams, gantt charts, git graphs and more.",type:"module",module:"./dist/mermaid.core.mjs",types:"./dist/mermaid.d.ts",exports:{".":{types:"./dist/mermaid.d.ts",import:"./dist/mermaid.core.mjs",default:"./dist/mermaid.core.mjs"},"./*":"./*"},keywords:["diagram","markdown","flowchart","sequence diagram","gantt","class diagram","git graph","mindmap","packet diagram","c4 diagram","er diagram","pie chart","pie diagram","quadrant chart","requirement diagram","graph"],scripts:{clean:"rimraf dist",dev:"pnpm -w dev","docs:code":"typedoc src/defaultConfig.ts src/config.ts src/mermaid.ts && prettier --write ./src/docs/config/setup","docs:build":"rimraf ../../docs && pnpm docs:code && pnpm docs:spellcheck && tsx scripts/docs.cli.mts","docs:verify":"pnpm docs:code && pnpm docs:spellcheck && tsx scripts/docs.cli.mts --verify","docs:pre:vitepress":"pnpm --filter ./src/docs prefetch && rimraf src/vitepress && pnpm docs:code && tsx scripts/docs.cli.mts --vitepress && pnpm --filter ./src/vitepress install --no-frozen-lockfile --ignore-scripts","docs:build:vitepress":"pnpm docs:pre:vitepress && (cd src/vitepress && pnpm run build) && cpy --flat src/docs/landing/ ./src/vitepress/.vitepress/dist/landing","docs:dev":'pnpm docs:pre:vitepress && concurrently "pnpm --filter ./src/vitepress dev" "tsx scripts/docs.cli.mts --watch --vitepress"',"docs:dev:docker":'pnpm docs:pre:vitepress && concurrently "pnpm --filter ./src/vitepress dev:docker" "tsx scripts/docs.cli.mts --watch --vitepress"',"docs:serve":"pnpm docs:build:vitepress && vitepress serve src/vitepress","docs:spellcheck":'cspell "src/docs/**/*.md"',"docs:release-version":"tsx scripts/update-release-version.mts","docs:verify-version":"tsx scripts/update-release-version.mts --verify","types:build-config":"tsx scripts/create-types-from-json-schema.mts","types:verify-config":"tsx scripts/create-types-from-json-schema.mts --verify",checkCircle:"npx madge --circular ./src",prepublishOnly:"pnpm docs:verify-version"},repository:{type:"git",url:"https://github.com/mermaid-js/mermaid"},author:"Knut Sveidqvist",license:"MIT",standard:{ignore:["**/parser/*.js","dist/**/*.js","cypress/**/*.js"],globals:["page"]},dependencies:{"@braintree/sanitize-url":"^7.1.1","@iconify/utils":"^3.0.1","@mermaid-js/parser":"workspace:^","@types/d3":"^7.4.3",cytoscape:"^3.29.3","cytoscape-cose-bilkent":"^4.1.0","cytoscape-fcose":"^2.2.0",d3:"^7.9.0","d3-sankey":"^0.12.3","dagre-d3-es":"7.0.13",dayjs:"^1.11.18",dompurify:"^3.2.5",katex:"^0.16.22",khroma:"^2.1.0","lodash-es":"^4.17.21",marked:"^16.2.1",roughjs:"^4.6.6",stylis:"^4.3.6","ts-dedent":"^2.2.0",uuid:"^11.1.0"},devDependencies:{"@adobe/jsonschema2md":"^8.0.5","@iconify/types":"^2.0.0","@types/cytoscape":"^3.21.9","@types/cytoscape-fcose":"^2.2.4","@types/d3-sankey":"^0.12.4","@types/d3-scale":"^4.0.9","@types/d3-scale-chromatic":"^3.1.0","@types/d3-selection":"^3.0.11","@types/d3-shape":"^3.1.7","@types/jsdom":"^21.1.7","@types/katex":"^0.16.7","@types/lodash-es":"^4.17.12","@types/micromatch":"^4.0.9","@types/stylis":"^4.2.7","@types/uuid":"^10.0.0",ajv:"^8.17.1",canvas:"^3.1.2",chokidar:"3.6.0",concurrently:"^9.1.2","csstree-validator":"^4.0.1",globby:"^14.1.0",jison:"^0.4.18","js-base64":"^3.7.8",jsdom:"^26.1.0","json-schema-to-typescript":"^15.0.4",micromatch:"^4.0.8","path-browserify":"^1.0.1",prettier:"^3.5.3",remark:"^15.0.1","remark-frontmatter":"^5.0.0","remark-gfm":"^4.0.1",rimraf:"^6.0.1","start-server-and-test":"^2.0.13","type-fest":"^4.35.0",typedoc:"^0.28.12","typedoc-plugin-markdown":"^4.8.1",typescript:"~5.7.3","unist-util-flatmap":"^1.0.0","unist-util-visit":"^5.0.0",vitepress:"^1.6.4","vitepress-plugin-search":"1.0.4-alpha.22"},files:["dist/","README.md"],publishConfig:{access:"public"}}},72876:(ti,_r,B)=>{"use strict";B.r(_r),B.d(_r,{render:()=>_e});var lt=B(89204),ee=B(98954),D=(B(36384),B(87452)),Rt=B(32239),$t=(B(19753),B(59355),B(52052),B(79006)),yt=B(32303),Ye=B(42335),bt=B(46865),Xt=B(61823),j=new Map,fr=new Map,Fe=new Map,vr=(0,yt.K2)(()=>{fr.clear(),Fe.clear(),j.clear()},"clear"),zr=(0,yt.K2)((Z,ae)=>{const S=fr.get(ae)||[];return yt.Rm.trace("In isDescendant",ae," ",Z," = ",S.includes(Z)),S.includes(Z)},"isDescendant"),br=(0,yt.K2)((Z,ae)=>{const S=fr.get(ae)||[];return yt.Rm.info("Descendants of ",ae," is ",S),yt.Rm.info("Edge is ",Z),Z.v!==ae&&Z.w!==ae&&(S?S.includes(Z.v)||zr(Z.v,ae)||zr(Z.w,ae)||S.includes(Z.w):(yt.Rm.debug("Tilt, ",ae,",not in descendants"),!1))},"edgeInCluster"),mr=(0,yt.K2)((Z,ae,S,re)=>{yt.Rm.warn("Copying children of ",Z,"root",re,"data",ae.node(Z),re);const Pt=ae.children(Z)||[];Z!==re&&Pt.push(Z),yt.Rm.warn("Copying (nodes) clusterId",Z,"nodes",Pt),Pt.forEach(qt=>{if(ae.children(qt).length>0)mr(qt,ae,S,re);else{const V=ae.node(qt);yt.Rm.info("cp ",qt," to ",re," with parent ",Z),S.setNode(qt,V),re!==ae.parent(qt)&&(yt.Rm.warn("Setting parent",qt,ae.parent(qt)),S.setParent(qt,ae.parent(qt))),Z!==re&&qt!==Z?(yt.Rm.debug("Setting parent",qt,Z),S.setParent(qt,Z)):(yt.Rm.info("In copy ",Z,"root",re,"data",ae.node(Z),re),yt.Rm.debug("Not Setting parent for node=",qt,"cluster!==rootId",Z!==re,"node!==clusterId",qt!==Z));const pt=ae.edges(qt);yt.Rm.debug("Copying Edges",pt),pt.forEach(H=>{yt.Rm.info("Edge",H);const Nt=ae.edge(H.v,H.w,H.name);yt.Rm.info("Edge data",Nt,re);try{br(H,re)?(yt.Rm.info("Copying as ",H.v,H.w,Nt,H.name),S.setEdge(H.v,H.w,Nt,H.name),yt.Rm.info("newGraph edges ",S.edges(),S.edge(S.edges()[0]))):yt.Rm.info("Skipping copy of edge ",H.v,"--\x3e",H.w," rootId: ",re," clusterId:",Z)}catch(wt){yt.Rm.error(wt)}})}yt.Rm.debug("Removing node",qt),ae.removeNode(qt)})},"copy"),Er=(0,yt.K2)((Z,ae)=>{const S=ae.children(Z);let re=[...S];for(const Pt of S)Fe.set(Pt,Z),re=[...re,...Er(Pt,ae)];return re},"extractDescendants"),Lr=(0,yt.K2)((Z,ae,S)=>{const re=Z.edges().filter(H=>H.v===ae||H.w===ae),Pt=Z.edges().filter(H=>H.v===S||H.w===S),qt=re.map(H=>({v:H.v===ae?S:H.v,w:H.w===ae?ae:H.w})),V=Pt.map(H=>({v:H.v,w:H.w}));return qt.filter(H=>V.some(Nt=>H.v===Nt.v&&H.w===Nt.w))},"findCommonEdges"),Ar=(0,yt.K2)((Z,ae,S)=>{const re=ae.children(Z);if(yt.Rm.trace("Searching children of id ",Z,re),re.length<1)return Z;let Pt;for(const qt of re){const V=Ar(qt,ae,S),pt=Lr(ae,S,V);if(V){if(!(pt.length>0))return V;Pt=V}}return Pt},"findNonClusterChild"),ge=(0,yt.K2)(Z=>j.has(Z)&&j.get(Z).externalConnections&&j.has(Z)?j.get(Z).id:Z,"getAnchorId"),Br=(0,yt.K2)((Z,ae)=>{if(!Z||ae>10)yt.Rm.debug("Opting out, no graph ");else{yt.Rm.debug("Opting in, graph "),Z.nodes().forEach(function(S){Z.children(S).length>0&&(yt.Rm.warn("Cluster identified",S," Replacement id in edges: ",Ar(S,Z,S)),fr.set(S,Er(S,Z)),j.set(S,{id:Ar(S,Z,S),clusterData:Z.node(S)}))}),Z.nodes().forEach(function(S){const re=Z.children(S),Pt=Z.edges();re.length>0?(yt.Rm.debug("Cluster identified",S,fr),Pt.forEach(qt=>{zr(qt.v,S)^zr(qt.w,S)&&(yt.Rm.warn("Edge: ",qt," leaves cluster ",S),yt.Rm.warn("Descendants of XXX ",S,": ",fr.get(S)),j.get(S).externalConnections=!0)})):yt.Rm.debug("Not a cluster ",S,fr)});for(let S of j.keys()){const re=j.get(S).id,Pt=Z.parent(re);Pt!==S&&j.has(Pt)&&!j.get(Pt).externalConnections&&(j.get(S).id=Pt)}Z.edges().forEach(function(S){const re=Z.edge(S);yt.Rm.warn("Edge "+S.v+" -> "+S.w+": "+JSON.stringify(S)),yt.Rm.warn("Edge "+S.v+" -> "+S.w+": "+JSON.stringify(Z.edge(S)));let Pt=S.v,qt=S.w;if(yt.Rm.warn("Fix XXX",j,"ids:",S.v,S.w,"Translating: ",j.get(S.v)," --- ",j.get(S.w)),j.get(S.v)||j.get(S.w)){if(yt.Rm.warn("Fixing and trying - removing XXX",S.v,S.w,S.name),Pt=ge(S.v),qt=ge(S.w),Z.removeEdge(S.v,S.w,S.name),Pt!==S.v){const V=Z.parent(Pt);j.get(V).externalConnections=!0,re.fromCluster=S.v}if(qt!==S.w){const V=Z.parent(qt);j.get(V).externalConnections=!0,re.toCluster=S.w}yt.Rm.warn("Fix Replacing with XXX",Pt,qt,S.name),Z.setEdge(Pt,qt,re,S.name)}}),yt.Rm.warn("Adjusted Graph",bt.M(Z)),Ge(Z,0),yt.Rm.trace(j)}},"adjustClustersAndEdges"),Ge=(0,yt.K2)((Z,ae)=>{if(yt.Rm.warn("extractor - ",ae,bt.M(Z),Z.children("D")),ae>10)return void yt.Rm.error("Bailing out");let S=Z.nodes(),re=!1;for(const Pt of S){const qt=Z.children(Pt);re=re||qt.length>0}if(re){yt.Rm.debug("Nodes = ",S,ae);for(const Pt of S)if(yt.Rm.debug("Extracting node",Pt,j,j.has(Pt)&&!j.get(Pt).externalConnections,!Z.parent(Pt),Z.node(Pt),Z.children("D")," Depth ",ae),j.has(Pt))if(!j.get(Pt).externalConnections&&Z.children(Pt)&&Z.children(Pt).length>0){yt.Rm.warn("Cluster without external connections, without a parent and with children",Pt,ae);let V="TB"===Z.graph().rankdir?"LR":"TB";j.get(Pt)?.clusterData?.dir&&(V=j.get(Pt).clusterData.dir,yt.Rm.warn("Fixing dir",j.get(Pt).clusterData.dir,V));const pt=new Xt.T({multigraph:!0,compound:!0}).setGraph({rankdir:V,nodesep:50,ranksep:50,marginx:8,marginy:8}).setDefaultEdgeLabel(function(){return{}});yt.Rm.warn("Old graph before copy",bt.M(Z)),mr(Pt,Z,pt,Pt),Z.setNode(Pt,{clusterNode:!0,id:Pt,clusterData:j.get(Pt).clusterData,label:j.get(Pt).label,graph:pt}),yt.Rm.warn("New graph after copy node: (",Pt,")",bt.M(pt)),yt.Rm.debug("Old graph after copy",bt.M(Z))}else yt.Rm.warn("Cluster ** ",Pt," **not meeting the criteria !externalConnections:",!j.get(Pt).externalConnections," no parent: ",!Z.parent(Pt)," children ",Z.children(Pt)&&Z.children(Pt).length>0,Z.children("D"),ae),yt.Rm.debug(j);else yt.Rm.debug("Not a cluster",Pt,ae);S=Z.nodes(),yt.Rm.warn("New list of nodes",S);for(const Pt of S){const qt=Z.node(Pt);yt.Rm.warn(" Now next level",Pt,qt),qt?.clusterNode&&Ge(qt.graph,ae+1)}}else yt.Rm.debug("Done, no node has children",Z.nodes())},"extractor"),W=(0,yt.K2)((Z,ae)=>{if(0===ae.length)return[];let S=Object.assign([],ae);return ae.forEach(re=>{const Pt=Z.children(re),qt=W(Z,Pt);S=[...S,...qt]}),S},"sorter"),ft=(0,yt.K2)(Z=>W(Z,Z.children()),"sortNodesByHierarchy"),Bt=(0,yt.K2)(function(){var Z=(0,lt.A)(function*(ae,S,re,Pt,qt,V){yt.Rm.warn("Graph in recursive render:XAX",bt.M(S),qt);const pt=S.graph().rankdir;yt.Rm.trace("Dir in recursive render - dir:",pt);const H=ae.insert("g").attr("class","root");S.nodes()?yt.Rm.info("Recursive render XXX",S.nodes()):yt.Rm.info("No nodes found for",S),S.edges().length>0&&yt.Rm.info("Recursive edges",S.edge(S.edges()[0]));const Nt=H.insert("g").attr("class","clusters"),wt=H.insert("g").attr("class","edgePaths"),Wt=H.insert("g").attr("class","edgeLabels"),xe=H.insert("g").attr("class","nodes");yield Promise.all(S.nodes().map(function(){var qe=(0,lt.A)(function*(We){const Ct=S.node(We);if(void 0!==qt){const St=JSON.parse(JSON.stringify(qt.clusterData));yt.Rm.trace("Setting data for parent cluster XXX\n Node.id = ",We,"\n data=",St.height,"\nParent cluster",qt.height),S.setNode(qt.id,St),S.parent(We)||(yt.Rm.trace("Setting parent",We,qt.id),S.setParent(We,qt.id,St))}if(yt.Rm.info("(Insert) Node XXX"+We+": "+JSON.stringify(S.node(We))),Ct?.clusterNode){yt.Rm.info("Cluster identified XBX",We,Ct.width,S.node(We));const{ranksep:St,nodesep:R}=S.graph();Ct.graph.setGraph({...Ct.graph.graph(),ranksep:St+25,nodesep:R});const O=yield Bt(xe,Ct.graph,re,Pt,S.node(We),V),et=O.elem;(0,D.lC)(Ct,et),Ct.diff=O.diff||0,yt.Rm.info("New compound node after recursive render XAX",We,"width",Ct.width,"height",Ct.height),(0,D.U7)(et,Ct)}else S.children(We).length>0?(yt.Rm.trace("Cluster - the non recursive path XBX",We,Ct.id,Ct,Ct.width,"Graph:",S),yt.Rm.trace(Ar(Ct.id,S)),j.set(Ct.id,{id:Ar(Ct.id,S),node:Ct})):(yt.Rm.trace("Node - the non recursive path XAX",We,xe,S.node(We),pt),yield(0,D.on)(xe,S.node(We),{config:V,dir:pt}))});return function(We){return qe.apply(this,arguments)}}())),yield(0,yt.K2)((0,lt.A)(function*(){const qe=S.edges().map(function(){var We=(0,lt.A)(function*(Ct){const St=S.edge(Ct.v,Ct.w,Ct.name);yt.Rm.info("Edge "+Ct.v+" -> "+Ct.w+": "+JSON.stringify(Ct)),yt.Rm.info("Edge "+Ct.v+" -> "+Ct.w+": ",Ct," ",JSON.stringify(S.edge(Ct))),yt.Rm.info("Fix",j,"ids:",Ct.v,Ct.w,"Translating: ",j.get(Ct.v),j.get(Ct.w)),yield(0,ee.jP)(Wt,St)});return function(Ct){return We.apply(this,arguments)}}());yield Promise.all(qe)}),"processEdges")(),yt.Rm.info("Graph before layout:",JSON.stringify(bt.M(S))),yt.Rm.info("############################################# XXX"),yt.Rm.info("###                Layout                 ### XXX"),yt.Rm.info("############################################# XXX"),(0,Ye.Zp)(S),yt.Rm.info("Graph after layout:",JSON.stringify(bt.M(S)));let Re=0,{subGraphTitleTotalMargin:oe}=(0,Rt.O)(V);return yield Promise.all(ft(S).map(function(){var qe=(0,lt.A)(function*(We){const Ct=S.node(We);if(yt.Rm.info("Position XBX => "+We+": ("+Ct.x,","+Ct.y,") width: ",Ct.width," height: ",Ct.height),Ct?.clusterNode)Ct.y+=oe,yt.Rm.info("A tainted cluster node XBX1",We,Ct.id,Ct.width,Ct.height,Ct.x,Ct.y,S.parent(We)),j.get(Ct.id).node=Ct,(0,D.U_)(Ct);else if(S.children(We).length>0){yt.Rm.info("A pure cluster node XBX1",We,Ct.id,Ct.x,Ct.y,Ct.width,Ct.height,S.parent(We)),Ct.height+=oe,S.node(Ct.parentId);const St=Ct?.padding/2||0,R=Ct?.labelBBox?.height||0;yt.Rm.debug("OffsetY",R-St||0,"labelHeight",R,"halfPadding",St),yield(0,D.U)(Nt,Ct),j.get(Ct.id).node=Ct}else{const St=S.node(Ct.parentId);Ct.y+=oe/2,yt.Rm.info("A regular node XBX1 - using the padding",Ct.id,"parent",Ct.parentId,Ct.width,Ct.height,Ct.x,Ct.y,"offsetY",Ct.offsetY,"parent",St,St?.offsetY,Ct),(0,D.U_)(Ct)}});return function(We){return qe.apply(this,arguments)}}())),S.edges().forEach(function(qe){const We=S.edge(qe);yt.Rm.info("Edge "+qe.v+" -> "+qe.w+": "+JSON.stringify(We),We),We.points.forEach(O=>O.y+=oe/2);const Ct=S.node(qe.v);var St=S.node(qe.w);const R=(0,ee.Jo)(wt,We,j,re,Ct,St,Pt);(0,ee.T_)(We,R)}),S.nodes().forEach(function(qe){const We=S.node(qe);yt.Rm.info(qe,We.type,We.diff),We.isGroup&&(Re=We.diff)}),yt.Rm.warn("Returning from recursive render XAX",H,Re),{elem:H,diff:Re}});return function(ae,S,re,Pt,qt,V){return Z.apply(this,arguments)}}(),"recursiveRender"),_e=(0,yt.K2)(function(){var Z=(0,lt.A)(function*(ae,S){const re=new Xt.T({multigraph:!0,compound:!0}).setGraph({rankdir:ae.direction,nodesep:ae.config?.nodeSpacing||ae.config?.flowchart?.nodeSpacing||ae.nodeSpacing,ranksep:ae.config?.rankSpacing||ae.config?.flowchart?.rankSpacing||ae.rankSpacing,marginx:8,marginy:8}).setDefaultEdgeLabel(function(){return{}}),Pt=S.select("g");(0,ee.g0)(Pt,ae.markers,ae.type,ae.diagramId),(0,D.gh)(),(0,ee.IU)(),(0,D.IU)(),vr(),ae.nodes.forEach(V=>{re.setNode(V.id,{...V}),V.parentId&&re.setParent(V.id,V.parentId)}),yt.Rm.debug("Edges:",ae.edges),ae.edges.forEach(V=>{if(V.start===V.end){const pt=V.start,H=pt+"---"+pt+"---1",Nt=pt+"---"+pt+"---2",wt=re.node(pt);re.setNode(H,{domId:H,id:H,parentId:wt.parentId,labelStyle:"",label:"",padding:0,shape:"labelRect",style:"",width:10,height:10}),re.setParent(H,wt.parentId),re.setNode(Nt,{domId:Nt,id:Nt,parentId:wt.parentId,labelStyle:"",padding:0,shape:"labelRect",label:"",style:"",width:10,height:10}),re.setParent(Nt,wt.parentId);const Wt=structuredClone(V),xe=structuredClone(V),le=structuredClone(V);Wt.label="",Wt.arrowTypeEnd="none",Wt.id=pt+"-cyclic-special-1",xe.arrowTypeStart="none",xe.arrowTypeEnd="none",xe.id=pt+"-cyclic-special-mid",le.label="",wt.isGroup&&(Wt.fromCluster=pt,le.toCluster=pt),le.id=pt+"-cyclic-special-2",le.arrowTypeStart="none",re.setEdge(pt,H,Wt,pt+"-cyclic-special-0"),re.setEdge(H,Nt,xe,pt+"-cyclic-special-1"),re.setEdge(Nt,pt,le,pt+"-cyc<lic-special-2")}else re.setEdge(V.start,V.end,{...V},V.id)}),yt.Rm.warn("Graph at first:",JSON.stringify(bt.M(re))),Br(re),yt.Rm.warn("Graph after XAX:",JSON.stringify(bt.M(re)));const qt=(0,$t.D7)();yield Bt(Pt,re,ae.type,ae.diagramId,void 0,qt)});return function(ae,S){return Z.apply(this,arguments)}}(),"render")},73302:(ti,_r,B)=>{"use strict";_r.Qi=_r.XO=void 0;const ee=B(30362),L=B(94221),D=B(52240);var Rt,$t;($t=Rt||(_r.XO=Rt={})).None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:D.Event.None}),$t.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:D.Event.None}),$t.is=function yt(Ye){const bt=Ye;return bt&&(bt===$t.None||bt===$t.Cancelled||L.boolean(bt.isCancellationRequested)&&!!bt.onCancellationRequested)};const dt=Object.freeze(function($t,yt){const Ye=(0,ee.default)().timer.setTimeout($t.bind(yt),0);return{dispose(){Ye.dispose()}}});class q{constructor(){this._isCancelled=!1}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?dt:(this._emitter||(this._emitter=new D.Emitter),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=void 0)}}_r.Qi=class A{get token(){return this._token||(this._token=new q),this._token}cancel(){this._token?this._token.cancel():this._token=Rt.Cancelled}dispose(){this._token?this._token instanceof q&&this._token.dispose():this._token=Rt.None}}},73986:(ti,_r,B)=>{"use strict";_r.J=void 0;var ee=B(4787);function D(A){return A.replace(ee.ctrlCharactersRegex,"").replace(ee.htmlEntitiesRegex,function(yt,Ye){return String.fromCharCode(Ye)})}function dt(A){try{return decodeURIComponent(A)}catch{return A}}_r.J=function q(A){if(!A)return ee.BLANK_URL;var $t,yt=dt(A.trim());do{$t=(yt=dt(yt=D(yt).replace(ee.htmlCtrlEntityRegex,"").replace(ee.ctrlCharactersRegex,"").replace(ee.whitespaceEscapeCharsRegex,"").trim())).match(ee.ctrlCharactersRegex)||yt.match(ee.htmlEntitiesRegex)||yt.match(ee.htmlCtrlEntityRegex)||yt.match(ee.whitespaceEscapeCharsRegex)}while($t&&$t.length>0);var Ye=yt;if(!Ye)return ee.BLANK_URL;if(function L(A){return ee.relativeFirstCharacters.indexOf(A[0])>-1}(Ye))return Ye;var bt=Ye.trimStart(),Xt=bt.match(ee.urlSchemeRegex);if(!Xt)return Ye;var j=Xt[0].toLowerCase().trim();if(ee.invalidProtocolRegex.test(j))return ee.BLANK_URL;var fr=bt.replace(/\\/g,"/");if("mailto:"===j||j.includes("://"))return fr;if("http:"===j||"https:"===j){if(!function Rt(A){return URL.canParse(A)}(fr))return ee.BLANK_URL;var Fe=new URL(fr);return Fe.protocol=Fe.protocol.toLowerCase(),Fe.hostname=Fe.hostname.toLowerCase(),Fe.toString()}return fr}},79006:(ti,_r,B)=>{"use strict";B.d(_r,{$i:()=>xe,B6:()=>et,C0:()=>Fe,Ch:()=>zr,D7:()=>Vr,DB:()=>j,Dl:()=>g,EI:()=>cr,EJ:()=>Xt,Gs:()=>Rr,H$:()=>V,H1:()=>fe,ID:()=>Te,IU:()=>je,J$:()=>Er,Js:()=>Xr,ME:()=>Ba,Nk:()=>it,P$:()=>ae,Q2:()=>xt,QO:()=>Ee,SV:()=>ze,TM:()=>Jt,UI:()=>Wt,UU:()=>R,Wi:()=>tr,Wt:()=>kt,XV:()=>xr,Xd:()=>br,Y2:()=>P,_3:()=>er,a$:()=>p,ab:()=>He,cL:()=>It,dj:()=>E,hH:()=>Ar,iN:()=>Cr,jZ:()=>Kt,ke:()=>$e,m7:()=>sr,mW:()=>vr,mj:()=>Oa,oB:()=>Zr,ot:()=>x,sb:()=>Re,tM:()=>ct,wZ:()=>O,xA:()=>ut,zj:()=>rt});var dt,q,A,$t,yt,Ye,bt,qe,lt=B(89204),ee=B(45027),L=B(32303),D=B(79687),Rt=B(99708),Xt=/^-{3}\s*[\n\r](.*?)[\n\r]-{3}\s*[\n\r]+/s,j=/%{2}{\s*(?:(\w+)\s*:|(\w+))\s*(?:(\w+)|((?:(?!}%{2}).|\r?\n)*))?\s*(?:}%{2})?/gi,fr=/\s*%%.*\n/gm,Fe=(class extends Error{constructor(N){super(N),this.name="UnknownDiagramError"}static#t=dt=()=>((0,ee.A)(this,"UnknownDiagramError"),(0,L.K2)(this,"UnknownDiagramError"),this)},dt()),vr={},zr=(0,L.K2)(function(N,Vt){N=N.replace(Xt,"").replace(j,"").replace(fr,"\n");for(const[Ke,{detector:rr}]of Object.entries(vr))if(rr(N,Vt))return Ke;throw new Fe(`No diagram type detected matching given configuration for text: ${N}`)},"detectType"),br=(0,L.K2)((...N)=>{for(const{id:Vt,detector:Ke,loader:rr}of N)mr(Vt,Ke,rr)},"registerLazyLoadedDiagrams"),mr=(0,L.K2)((N,Vt,Ke)=>{vr[N]&&L.Rm.warn(`Detector with key ${N} already exists. Overwriting.`),vr[N]={detector:Vt,loader:Ke},L.Rm.debug(`Detector with key ${N} added${Ke?" with loader":""}`)},"addDetector"),Er=(0,L.K2)(N=>vr[N].loader,"getDiagramLoader"),Lr=(0,L.K2)((N,Vt,{depth:Ke=2,clobber:rr=!1}={})=>{const ia={depth:Ke,clobber:rr};return Array.isArray(Vt)&&!Array.isArray(N)?(Vt.forEach(hr=>Lr(N,hr,ia)),N):Array.isArray(Vt)&&Array.isArray(N)?(Vt.forEach(hr=>{N.includes(hr)||N.push(hr)}),N):void 0===N||Ke<=0?null!=N&&"object"==typeof N&&"object"==typeof Vt?Object.assign(N,Vt):Vt:(void 0!==Vt&&"object"==typeof N&&"object"==typeof Vt&&Object.keys(Vt).forEach(hr=>{"object"!=typeof Vt[hr]||void 0!==N[hr]&&"object"!=typeof N[hr]?(rr||"object"!=typeof N[hr]&&"object"!=typeof Vt[hr])&&(N[hr]=Vt[hr]):(void 0===N[hr]&&(N[hr]=Array.isArray(Vt[hr])?[]:{}),N[hr]=Lr(N[hr],Vt[hr],{depth:Ke-1,clobber:rr}))}),N)},"assignWithDepth"),Ar=Lr,ge="#ffffff",Br="#f2f2f2",Ge=(0,L.K2)((N,Vt)=>(0,D.Ai)(N,Vt?{s:-40,l:10}:{s:-40,l:-10}),"mkBorder"),W=(class{constructor(){this.background="#f4f4f4",this.primaryColor="#fff4dd",this.noteBkgColor="#fff5ad",this.noteTextColor="#333",this.THEME_COLOR_LIMIT=12,this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px"}updateColors(){if(this.primaryTextColor=this.primaryTextColor||(this.darkMode?"#eee":"#333"),this.secondaryColor=this.secondaryColor||(0,D.Ai)(this.primaryColor,{h:-120}),this.tertiaryColor=this.tertiaryColor||(0,D.Ai)(this.primaryColor,{h:180,l:5}),this.primaryBorderColor=this.primaryBorderColor||Ge(this.primaryColor,this.darkMode),this.secondaryBorderColor=this.secondaryBorderColor||Ge(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=this.tertiaryBorderColor||Ge(this.tertiaryColor,this.darkMode),this.noteBorderColor=this.noteBorderColor||Ge(this.noteBkgColor,this.darkMode),this.noteBkgColor=this.noteBkgColor||"#fff5ad",this.noteTextColor=this.noteTextColor||"#333",this.secondaryTextColor=this.secondaryTextColor||(0,D.B8)(this.secondaryColor),this.tertiaryTextColor=this.tertiaryTextColor||(0,D.B8)(this.tertiaryColor),this.lineColor=this.lineColor||(0,D.B8)(this.background),this.arrowheadColor=this.arrowheadColor||(0,D.B8)(this.background),this.textColor=this.textColor||this.primaryTextColor,this.border2=this.border2||this.tertiaryBorderColor,this.nodeBkg=this.nodeBkg||this.primaryColor,this.mainBkg=this.mainBkg||this.primaryColor,this.nodeBorder=this.nodeBorder||this.primaryBorderColor,this.clusterBkg=this.clusterBkg||this.tertiaryColor,this.clusterBorder=this.clusterBorder||this.tertiaryBorderColor,this.defaultLinkColor=this.defaultLinkColor||this.lineColor,this.titleColor=this.titleColor||this.tertiaryTextColor,this.edgeLabelBackground=this.edgeLabelBackground||(this.darkMode?(0,D.e$)(this.secondaryColor,30):this.secondaryColor),this.nodeTextColor=this.nodeTextColor||this.primaryTextColor,this.actorBorder=this.actorBorder||this.primaryBorderColor,this.actorBkg=this.actorBkg||this.mainBkg,this.actorTextColor=this.actorTextColor||this.primaryTextColor,this.actorLineColor=this.actorLineColor||this.actorBorder,this.labelBoxBkgColor=this.labelBoxBkgColor||this.actorBkg,this.signalColor=this.signalColor||this.textColor,this.signalTextColor=this.signalTextColor||this.textColor,this.labelBoxBorderColor=this.labelBoxBorderColor||this.actorBorder,this.labelTextColor=this.labelTextColor||this.actorTextColor,this.loopTextColor=this.loopTextColor||this.actorTextColor,this.activationBorderColor=this.activationBorderColor||(0,D.e$)(this.secondaryColor,10),this.activationBkgColor=this.activationBkgColor||this.secondaryColor,this.sequenceNumberColor=this.sequenceNumberColor||(0,D.B8)(this.lineColor),this.sectionBkgColor=this.sectionBkgColor||this.tertiaryColor,this.altSectionBkgColor=this.altSectionBkgColor||"white",this.sectionBkgColor=this.sectionBkgColor||this.secondaryColor,this.sectionBkgColor2=this.sectionBkgColor2||this.primaryColor,this.excludeBkgColor=this.excludeBkgColor||"#eeeeee",this.taskBorderColor=this.taskBorderColor||this.primaryBorderColor,this.taskBkgColor=this.taskBkgColor||this.primaryColor,this.activeTaskBorderColor=this.activeTaskBorderColor||this.primaryColor,this.activeTaskBkgColor=this.activeTaskBkgColor||(0,D.a)(this.primaryColor,23),this.gridColor=this.gridColor||"lightgrey",this.doneTaskBkgColor=this.doneTaskBkgColor||"lightgrey",this.doneTaskBorderColor=this.doneTaskBorderColor||"grey",this.critBorderColor=this.critBorderColor||"#ff8888",this.critBkgColor=this.critBkgColor||"red",this.todayLineColor=this.todayLineColor||"red",this.vertLineColor=this.vertLineColor||"navy",this.taskTextColor=this.taskTextColor||this.textColor,this.taskTextOutsideColor=this.taskTextOutsideColor||this.textColor,this.taskTextLightColor=this.taskTextLightColor||this.textColor,this.taskTextColor=this.taskTextColor||this.primaryTextColor,this.taskTextDarkColor=this.taskTextDarkColor||this.textColor,this.taskTextClickableColor=this.taskTextClickableColor||"#003163",this.personBorder=this.personBorder||this.primaryBorderColor,this.personBkg=this.personBkg||this.mainBkg,this.darkMode?(this.rowOdd=this.rowOdd||(0,D.e$)(this.mainBkg,5)||"#ffffff",this.rowEven=this.rowEven||(0,D.e$)(this.mainBkg,10)):(this.rowOdd=this.rowOdd||(0,D.a)(this.mainBkg,75)||"#ffffff",this.rowEven=this.rowEven||(0,D.a)(this.mainBkg,5)),this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||this.tertiaryColor,this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.nodeBorder,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.specialStateColor=this.lineColor,this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||(0,D.Ai)(this.primaryColor,{h:30}),this.cScale4=this.cScale4||(0,D.Ai)(this.primaryColor,{h:60}),this.cScale5=this.cScale5||(0,D.Ai)(this.primaryColor,{h:90}),this.cScale6=this.cScale6||(0,D.Ai)(this.primaryColor,{h:120}),this.cScale7=this.cScale7||(0,D.Ai)(this.primaryColor,{h:150}),this.cScale8=this.cScale8||(0,D.Ai)(this.primaryColor,{h:210,l:150}),this.cScale9=this.cScale9||(0,D.Ai)(this.primaryColor,{h:270}),this.cScale10=this.cScale10||(0,D.Ai)(this.primaryColor,{h:300}),this.cScale11=this.cScale11||(0,D.Ai)(this.primaryColor,{h:330}),this.darkMode)for(let Vt=0;Vt<this.THEME_COLOR_LIMIT;Vt++)this["cScale"+Vt]=(0,D.e$)(this["cScale"+Vt],75);else for(let Vt=0;Vt<this.THEME_COLOR_LIMIT;Vt++)this["cScale"+Vt]=(0,D.e$)(this["cScale"+Vt],25);for(let Vt=0;Vt<this.THEME_COLOR_LIMIT;Vt++)this["cScaleInv"+Vt]=this["cScaleInv"+Vt]||(0,D.B8)(this["cScale"+Vt]);for(let Vt=0;Vt<this.THEME_COLOR_LIMIT;Vt++)this["cScalePeer"+Vt]=this.darkMode?this["cScalePeer"+Vt]||(0,D.a)(this["cScale"+Vt],10):this["cScalePeer"+Vt]||(0,D.e$)(this["cScale"+Vt],10);this.scaleLabelColor=this.scaleLabelColor||this.labelTextColor;for(let Vt=0;Vt<this.THEME_COLOR_LIMIT;Vt++)this["cScaleLabel"+Vt]=this["cScaleLabel"+Vt]||this.scaleLabelColor;const N=this.darkMode?-4:-1;for(let Vt=0;Vt<5;Vt++)this["surface"+Vt]=this["surface"+Vt]||(0,D.Ai)(this.mainBkg,{h:180,s:-15,l:N*(5+3*Vt)}),this["surfacePeer"+Vt]=this["surfacePeer"+Vt]||(0,D.Ai)(this.mainBkg,{h:180,s:-15,l:N*(8+3*Vt)});this.classText=this.classText||this.textColor,this.fillType0=this.fillType0||this.primaryColor,this.fillType1=this.fillType1||this.secondaryColor,this.fillType2=this.fillType2||(0,D.Ai)(this.primaryColor,{h:64}),this.fillType3=this.fillType3||(0,D.Ai)(this.secondaryColor,{h:64}),this.fillType4=this.fillType4||(0,D.Ai)(this.primaryColor,{h:-64}),this.fillType5=this.fillType5||(0,D.Ai)(this.secondaryColor,{h:-64}),this.fillType6=this.fillType6||(0,D.Ai)(this.primaryColor,{h:128}),this.fillType7=this.fillType7||(0,D.Ai)(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||this.tertiaryColor,this.pie4=this.pie4||(0,D.Ai)(this.primaryColor,{l:-10}),this.pie5=this.pie5||(0,D.Ai)(this.secondaryColor,{l:-10}),this.pie6=this.pie6||(0,D.Ai)(this.tertiaryColor,{l:-10}),this.pie7=this.pie7||(0,D.Ai)(this.primaryColor,{h:60,l:-10}),this.pie8=this.pie8||(0,D.Ai)(this.primaryColor,{h:-60,l:-10}),this.pie9=this.pie9||(0,D.Ai)(this.primaryColor,{h:120,l:0}),this.pie10=this.pie10||(0,D.Ai)(this.primaryColor,{h:60,l:-20}),this.pie11=this.pie11||(0,D.Ai)(this.primaryColor,{h:-60,l:-20}),this.pie12=this.pie12||(0,D.Ai)(this.primaryColor,{h:120,l:-10}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.radar={axisColor:this.radar?.axisColor||this.lineColor,axisStrokeWidth:this.radar?.axisStrokeWidth||2,axisLabelFontSize:this.radar?.axisLabelFontSize||12,curveOpacity:this.radar?.curveOpacity||.5,curveStrokeWidth:this.radar?.curveStrokeWidth||2,graticuleColor:this.radar?.graticuleColor||"#DEDEDE",graticuleStrokeWidth:this.radar?.graticuleStrokeWidth||1,graticuleOpacity:this.radar?.graticuleOpacity||.3,legendBoxSize:this.radar?.legendBoxSize||12,legendFontSize:this.radar?.legendFontSize||12},this.archEdgeColor=this.archEdgeColor||"#777",this.archEdgeArrowColor=this.archEdgeArrowColor||"#777",this.archEdgeWidth=this.archEdgeWidth||"3",this.archGroupBorderColor=this.archGroupBorderColor||"#000",this.archGroupBorderWidth=this.archGroupBorderWidth||"2px",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||(0,D.Ai)(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||(0,D.Ai)(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||(0,D.Ai)(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||(0,D.Ai)(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||(0,D.Ai)(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||(0,D.Ai)(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||(0,D.HD)(this.quadrant1Fill)?(0,D.a)(this.quadrant1Fill):(0,D.e$)(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:this.xyChart?.backgroundColor||this.background,titleColor:this.xyChart?.titleColor||this.primaryTextColor,xAxisTitleColor:this.xyChart?.xAxisTitleColor||this.primaryTextColor,xAxisLabelColor:this.xyChart?.xAxisLabelColor||this.primaryTextColor,xAxisTickColor:this.xyChart?.xAxisTickColor||this.primaryTextColor,xAxisLineColor:this.xyChart?.xAxisLineColor||this.primaryTextColor,yAxisTitleColor:this.xyChart?.yAxisTitleColor||this.primaryTextColor,yAxisLabelColor:this.xyChart?.yAxisLabelColor||this.primaryTextColor,yAxisTickColor:this.xyChart?.yAxisTickColor||this.primaryTextColor,yAxisLineColor:this.xyChart?.yAxisLineColor||this.primaryTextColor,plotColorPalette:this.xyChart?.plotColorPalette||"#FFF4DD,#FFD8B1,#FFA07A,#ECEFF1,#D6DBDF,#C3E0A8,#FFB6A4,#FFD74D,#738FA7,#FFFFF0"},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||(this.darkMode?(0,D.e$)(this.secondaryColor,30):this.secondaryColor),this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||(0,D.Ai)(this.primaryColor,{h:-30}),this.git4=this.git4||(0,D.Ai)(this.primaryColor,{h:-60}),this.git5=this.git5||(0,D.Ai)(this.primaryColor,{h:-90}),this.git6=this.git6||(0,D.Ai)(this.primaryColor,{h:60}),this.git7=this.git7||(0,D.Ai)(this.primaryColor,{h:120}),this.darkMode?(this.git0=(0,D.a)(this.git0,25),this.git1=(0,D.a)(this.git1,25),this.git2=(0,D.a)(this.git2,25),this.git3=(0,D.a)(this.git3,25),this.git4=(0,D.a)(this.git4,25),this.git5=(0,D.a)(this.git5,25),this.git6=(0,D.a)(this.git6,25),this.git7=(0,D.a)(this.git7,25)):(this.git0=(0,D.e$)(this.git0,25),this.git1=(0,D.e$)(this.git1,25),this.git2=(0,D.e$)(this.git2,25),this.git3=(0,D.e$)(this.git3,25),this.git4=(0,D.e$)(this.git4,25),this.git5=(0,D.e$)(this.git5,25),this.git6=(0,D.e$)(this.git6,25),this.git7=(0,D.e$)(this.git7,25)),this.gitInv0=this.gitInv0||(0,D.B8)(this.git0),this.gitInv1=this.gitInv1||(0,D.B8)(this.git1),this.gitInv2=this.gitInv2||(0,D.B8)(this.git2),this.gitInv3=this.gitInv3||(0,D.B8)(this.git3),this.gitInv4=this.gitInv4||(0,D.B8)(this.git4),this.gitInv5=this.gitInv5||(0,D.B8)(this.git5),this.gitInv6=this.gitInv6||(0,D.B8)(this.git6),this.gitInv7=this.gitInv7||(0,D.B8)(this.git7),this.branchLabelColor=this.branchLabelColor||(this.darkMode?"black":this.labelTextColor),this.gitBranchLabel0=this.gitBranchLabel0||this.branchLabelColor,this.gitBranchLabel1=this.gitBranchLabel1||this.branchLabelColor,this.gitBranchLabel2=this.gitBranchLabel2||this.branchLabelColor,this.gitBranchLabel3=this.gitBranchLabel3||this.branchLabelColor,this.gitBranchLabel4=this.gitBranchLabel4||this.branchLabelColor,this.gitBranchLabel5=this.gitBranchLabel5||this.branchLabelColor,this.gitBranchLabel6=this.gitBranchLabel6||this.branchLabelColor,this.gitBranchLabel7=this.gitBranchLabel7||this.branchLabelColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||ge,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||Br}calculate(N){if("object"!=typeof N)return void this.updateColors();const Vt=Object.keys(N);Vt.forEach(Ke=>{this[Ke]=N[Ke]}),this.updateColors(),Vt.forEach(Ke=>{this[Ke]=N[Ke]})}static#t=q=()=>((0,ee.A)(this,"Theme"),(0,L.K2)(this,"Theme"),this)},q()),ft=(0,L.K2)(N=>{const Vt=new W;return Vt.calculate(N),Vt},"getThemeVariables"),Bt=(class{constructor(){this.background="#333",this.primaryColor="#1f2020",this.secondaryColor=(0,D.a)(this.primaryColor,16),this.tertiaryColor=(0,D.Ai)(this.primaryColor,{h:-160}),this.primaryBorderColor=(0,D.B8)(this.background),this.secondaryBorderColor=Ge(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=Ge(this.tertiaryColor,this.darkMode),this.primaryTextColor=(0,D.B8)(this.primaryColor),this.secondaryTextColor=(0,D.B8)(this.secondaryColor),this.tertiaryTextColor=(0,D.B8)(this.tertiaryColor),this.lineColor=(0,D.B8)(this.background),this.textColor=(0,D.B8)(this.background),this.mainBkg="#1f2020",this.secondBkg="calculated",this.mainContrastColor="lightgrey",this.darkTextColor=(0,D.a)((0,D.B8)("#323D47"),10),this.lineColor="calculated",this.border1="#ccc",this.border2=(0,D.B3)(255,255,255,.25),this.arrowheadColor="calculated",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.labelBackground="#181818",this.textColor="#ccc",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="#F9FFFE",this.edgeLabelBackground="calculated",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="calculated",this.actorLineColor="calculated",this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="calculated",this.activationBkgColor="calculated",this.sequenceNumberColor="black",this.sectionBkgColor=(0,D.e$)("#EAE8D9",30),this.altSectionBkgColor="calculated",this.sectionBkgColor2="#EAE8D9",this.excludeBkgColor=(0,D.e$)(this.sectionBkgColor,10),this.taskBorderColor=(0,D.B3)(255,255,255,70),this.taskBkgColor="calculated",this.taskTextColor="calculated",this.taskTextLightColor="calculated",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor=(0,D.B3)(255,255,255,50),this.activeTaskBkgColor="#81B1DB",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="grey",this.critBorderColor="#E83737",this.critBkgColor="#E83737",this.taskTextDarkColor="calculated",this.todayLineColor="#DB5757",this.vertLineColor="#00BFFF",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.archEdgeColor="calculated",this.archEdgeArrowColor="calculated",this.archEdgeWidth="3",this.archGroupBorderColor=this.primaryBorderColor,this.archGroupBorderWidth="2px",this.rowOdd=this.rowOdd||(0,D.a)(this.mainBkg,5)||"#ffffff",this.rowEven=this.rowEven||(0,D.e$)(this.mainBkg,10),this.labelColor="calculated",this.errorBkgColor="#a44141",this.errorTextColor="#ddd"}updateColors(){this.secondBkg=(0,D.a)(this.mainBkg,16),this.lineColor=this.mainContrastColor,this.arrowheadColor=this.mainContrastColor,this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.edgeLabelBackground=(0,D.a)(this.labelBackground,25),this.actorBorder=this.border1,this.actorBkg=this.mainBkg,this.actorTextColor=this.mainContrastColor,this.actorLineColor=this.actorBorder,this.signalColor=this.mainContrastColor,this.signalTextColor=this.mainContrastColor,this.labelBoxBkgColor=this.actorBkg,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.mainContrastColor,this.loopTextColor=this.mainContrastColor,this.noteBorderColor=this.secondaryBorderColor,this.noteBkgColor=this.secondBkg,this.noteTextColor=this.secondaryTextColor,this.activationBorderColor=this.border1,this.activationBkgColor=this.secondBkg,this.altSectionBkgColor=this.background,this.taskBkgColor=(0,D.a)(this.mainBkg,23),this.taskTextColor=this.darkTextColor,this.taskTextLightColor=this.mainContrastColor,this.taskTextOutsideColor=this.taskTextLightColor,this.gridColor=this.mainContrastColor,this.doneTaskBkgColor=this.mainContrastColor,this.taskTextDarkColor=this.darkTextColor,this.archEdgeColor=this.lineColor,this.archEdgeArrowColor=this.lineColor,this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#555",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.primaryBorderColor,this.specialStateColor="#f4f4f4",this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=(0,D.Ai)(this.primaryColor,{h:64}),this.fillType3=(0,D.Ai)(this.secondaryColor,{h:64}),this.fillType4=(0,D.Ai)(this.primaryColor,{h:-64}),this.fillType5=(0,D.Ai)(this.secondaryColor,{h:-64}),this.fillType6=(0,D.Ai)(this.primaryColor,{h:128}),this.fillType7=(0,D.Ai)(this.secondaryColor,{h:128}),this.cScale1=this.cScale1||"#0b0000",this.cScale2=this.cScale2||"#4d1037",this.cScale3=this.cScale3||"#3f5258",this.cScale4=this.cScale4||"#4f2f1b",this.cScale5=this.cScale5||"#6e0a0a",this.cScale6=this.cScale6||"#3b0048",this.cScale7=this.cScale7||"#995a01",this.cScale8=this.cScale8||"#154706",this.cScale9=this.cScale9||"#161722",this.cScale10=this.cScale10||"#00296f",this.cScale11=this.cScale11||"#01629c",this.cScale12=this.cScale12||"#010029",this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||(0,D.Ai)(this.primaryColor,{h:30}),this.cScale4=this.cScale4||(0,D.Ai)(this.primaryColor,{h:60}),this.cScale5=this.cScale5||(0,D.Ai)(this.primaryColor,{h:90}),this.cScale6=this.cScale6||(0,D.Ai)(this.primaryColor,{h:120}),this.cScale7=this.cScale7||(0,D.Ai)(this.primaryColor,{h:150}),this.cScale8=this.cScale8||(0,D.Ai)(this.primaryColor,{h:210}),this.cScale9=this.cScale9||(0,D.Ai)(this.primaryColor,{h:270}),this.cScale10=this.cScale10||(0,D.Ai)(this.primaryColor,{h:300}),this.cScale11=this.cScale11||(0,D.Ai)(this.primaryColor,{h:330});for(let N=0;N<this.THEME_COLOR_LIMIT;N++)this["cScaleInv"+N]=this["cScaleInv"+N]||(0,D.B8)(this["cScale"+N]);for(let N=0;N<this.THEME_COLOR_LIMIT;N++)this["cScalePeer"+N]=this["cScalePeer"+N]||(0,D.a)(this["cScale"+N],10);for(let N=0;N<5;N++)this["surface"+N]=this["surface"+N]||(0,D.Ai)(this.mainBkg,{h:30,s:-30,l:-(4*N-10)}),this["surfacePeer"+N]=this["surfacePeer"+N]||(0,D.Ai)(this.mainBkg,{h:30,s:-30,l:-(4*N-7)});this.scaleLabelColor=this.scaleLabelColor||(this.darkMode?"black":this.labelTextColor);for(let N=0;N<this.THEME_COLOR_LIMIT;N++)this["cScaleLabel"+N]=this["cScaleLabel"+N]||this.scaleLabelColor;for(let N=0;N<this.THEME_COLOR_LIMIT;N++)this["pie"+N]=this["cScale"+N];this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||(0,D.Ai)(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||(0,D.Ai)(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||(0,D.Ai)(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||(0,D.Ai)(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||(0,D.Ai)(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||(0,D.Ai)(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||(0,D.HD)(this.quadrant1Fill)?(0,D.a)(this.quadrant1Fill):(0,D.e$)(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:this.xyChart?.backgroundColor||this.background,titleColor:this.xyChart?.titleColor||this.primaryTextColor,xAxisTitleColor:this.xyChart?.xAxisTitleColor||this.primaryTextColor,xAxisLabelColor:this.xyChart?.xAxisLabelColor||this.primaryTextColor,xAxisTickColor:this.xyChart?.xAxisTickColor||this.primaryTextColor,xAxisLineColor:this.xyChart?.xAxisLineColor||this.primaryTextColor,yAxisTitleColor:this.xyChart?.yAxisTitleColor||this.primaryTextColor,yAxisLabelColor:this.xyChart?.yAxisLabelColor||this.primaryTextColor,yAxisTickColor:this.xyChart?.yAxisTickColor||this.primaryTextColor,yAxisLineColor:this.xyChart?.yAxisLineColor||this.primaryTextColor,plotColorPalette:this.xyChart?.plotColorPalette||"#3498db,#2ecc71,#e74c3c,#f1c40f,#bdc3c7,#ffffff,#34495e,#9b59b6,#1abc9c,#e67e22"},this.packet={startByteColor:this.primaryTextColor,endByteColor:this.primaryTextColor,labelColor:this.primaryTextColor,titleColor:this.primaryTextColor,blockStrokeColor:this.primaryTextColor,blockFillColor:this.background},this.radar={axisColor:this.radar?.axisColor||this.lineColor,axisStrokeWidth:this.radar?.axisStrokeWidth||2,axisLabelFontSize:this.radar?.axisLabelFontSize||12,curveOpacity:this.radar?.curveOpacity||.5,curveStrokeWidth:this.radar?.curveStrokeWidth||2,graticuleColor:this.radar?.graticuleColor||"#DEDEDE",graticuleStrokeWidth:this.radar?.graticuleStrokeWidth||1,graticuleOpacity:this.radar?.graticuleOpacity||.3,legendBoxSize:this.radar?.legendBoxSize||12,legendFontSize:this.radar?.legendFontSize||12},this.classText=this.primaryTextColor,this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||(this.darkMode?(0,D.e$)(this.secondaryColor,30):this.secondaryColor),this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=(0,D.a)(this.secondaryColor,20),this.git1=(0,D.a)(this.pie2||this.secondaryColor,20),this.git2=(0,D.a)(this.pie3||this.tertiaryColor,20),this.git3=(0,D.a)(this.pie4||(0,D.Ai)(this.primaryColor,{h:-30}),20),this.git4=(0,D.a)(this.pie5||(0,D.Ai)(this.primaryColor,{h:-60}),20),this.git5=(0,D.a)(this.pie6||(0,D.Ai)(this.primaryColor,{h:-90}),10),this.git6=(0,D.a)(this.pie7||(0,D.Ai)(this.primaryColor,{h:60}),10),this.git7=(0,D.a)(this.pie8||(0,D.Ai)(this.primaryColor,{h:120}),20),this.gitInv0=this.gitInv0||(0,D.B8)(this.git0),this.gitInv1=this.gitInv1||(0,D.B8)(this.git1),this.gitInv2=this.gitInv2||(0,D.B8)(this.git2),this.gitInv3=this.gitInv3||(0,D.B8)(this.git3),this.gitInv4=this.gitInv4||(0,D.B8)(this.git4),this.gitInv5=this.gitInv5||(0,D.B8)(this.git5),this.gitInv6=this.gitInv6||(0,D.B8)(this.git6),this.gitInv7=this.gitInv7||(0,D.B8)(this.git7),this.gitBranchLabel0=this.gitBranchLabel0||(0,D.B8)(this.labelTextColor),this.gitBranchLabel1=this.gitBranchLabel1||this.labelTextColor,this.gitBranchLabel2=this.gitBranchLabel2||this.labelTextColor,this.gitBranchLabel3=this.gitBranchLabel3||(0,D.B8)(this.labelTextColor),this.gitBranchLabel4=this.gitBranchLabel4||this.labelTextColor,this.gitBranchLabel5=this.gitBranchLabel5||this.labelTextColor,this.gitBranchLabel6=this.gitBranchLabel6||this.labelTextColor,this.gitBranchLabel7=this.gitBranchLabel7||this.labelTextColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||(0,D.a)(this.background,12),this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||(0,D.a)(this.background,2),this.nodeBorder=this.nodeBorder||"#999"}calculate(N){if("object"!=typeof N)return void this.updateColors();const Vt=Object.keys(N);Vt.forEach(Ke=>{this[Ke]=N[Ke]}),this.updateColors(),Vt.forEach(Ke=>{this[Ke]=N[Ke]})}static#t=A=()=>((0,ee.A)(this,"Theme2"),(0,L.K2)(this,"Theme"),this)},A()),_e=(0,L.K2)(N=>{const Vt=new Bt;return Vt.calculate(N),Vt},"getThemeVariables"),Z=(class{constructor(){this.background="#f4f4f4",this.primaryColor="#ECECFF",this.secondaryColor=(0,D.Ai)(this.primaryColor,{h:120}),this.secondaryColor="#ffffde",this.tertiaryColor=(0,D.Ai)(this.primaryColor,{h:-160}),this.primaryBorderColor=Ge(this.primaryColor,this.darkMode),this.secondaryBorderColor=Ge(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=Ge(this.tertiaryColor,this.darkMode),this.primaryTextColor=(0,D.B8)(this.primaryColor),this.secondaryTextColor=(0,D.B8)(this.secondaryColor),this.tertiaryTextColor=(0,D.B8)(this.tertiaryColor),this.lineColor=(0,D.B8)(this.background),this.textColor=(0,D.B8)(this.background),this.background="white",this.mainBkg="#ECECFF",this.secondBkg="#ffffde",this.lineColor="#333333",this.border1="#9370DB",this.border2="#aaaa33",this.arrowheadColor="#333333",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.labelBackground="rgba(232,232,232, 0.8)",this.textColor="#333",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="calculated",this.edgeLabelBackground="calculated",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="black",this.actorLineColor="calculated",this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="calculated",this.altSectionBkgColor="calculated",this.sectionBkgColor2="calculated",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="calculated",this.taskTextLightColor="calculated",this.taskTextColor=this.taskTextLightColor,this.taskTextDarkColor="calculated",this.taskTextOutsideColor=this.taskTextDarkColor,this.taskTextClickableColor="calculated",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="calculated",this.critBorderColor="calculated",this.critBkgColor="calculated",this.todayLineColor="calculated",this.vertLineColor="calculated",this.sectionBkgColor=(0,D.B3)(102,102,255,.49),this.altSectionBkgColor="white",this.sectionBkgColor2="#fff400",this.taskBorderColor="#534fbc",this.taskBkgColor="#8a90dd",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="black",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="#534fbc",this.activeTaskBkgColor="#bfc7ff",this.gridColor="lightgrey",this.doneTaskBkgColor="lightgrey",this.doneTaskBorderColor="grey",this.critBorderColor="#ff8888",this.critBkgColor="red",this.todayLineColor="red",this.vertLineColor="navy",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.archEdgeColor="calculated",this.archEdgeArrowColor="calculated",this.archEdgeWidth="3",this.archGroupBorderColor=this.primaryBorderColor,this.archGroupBorderWidth="2px",this.rowOdd="calculated",this.rowEven="calculated",this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222",this.updateColors()}updateColors(){this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||(0,D.Ai)(this.primaryColor,{h:30}),this.cScale4=this.cScale4||(0,D.Ai)(this.primaryColor,{h:60}),this.cScale5=this.cScale5||(0,D.Ai)(this.primaryColor,{h:90}),this.cScale6=this.cScale6||(0,D.Ai)(this.primaryColor,{h:120}),this.cScale7=this.cScale7||(0,D.Ai)(this.primaryColor,{h:150}),this.cScale8=this.cScale8||(0,D.Ai)(this.primaryColor,{h:210}),this.cScale9=this.cScale9||(0,D.Ai)(this.primaryColor,{h:270}),this.cScale10=this.cScale10||(0,D.Ai)(this.primaryColor,{h:300}),this.cScale11=this.cScale11||(0,D.Ai)(this.primaryColor,{h:330}),this.cScalePeer1=this.cScalePeer1||(0,D.e$)(this.secondaryColor,45),this.cScalePeer2=this.cScalePeer2||(0,D.e$)(this.tertiaryColor,40);for(let N=0;N<this.THEME_COLOR_LIMIT;N++)this["cScale"+N]=(0,D.e$)(this["cScale"+N],10),this["cScalePeer"+N]=this["cScalePeer"+N]||(0,D.e$)(this["cScale"+N],25);for(let N=0;N<this.THEME_COLOR_LIMIT;N++)this["cScaleInv"+N]=this["cScaleInv"+N]||(0,D.Ai)(this["cScale"+N],{h:180});for(let N=0;N<5;N++)this["surface"+N]=this["surface"+N]||(0,D.Ai)(this.mainBkg,{h:30,l:-(5+5*N)}),this["surfacePeer"+N]=this["surfacePeer"+N]||(0,D.Ai)(this.mainBkg,{h:30,l:-(7+5*N)});if(this.scaleLabelColor="calculated"!==this.scaleLabelColor&&this.scaleLabelColor?this.scaleLabelColor:this.labelTextColor,"calculated"!==this.labelTextColor){this.cScaleLabel0=this.cScaleLabel0||(0,D.B8)(this.labelTextColor),this.cScaleLabel3=this.cScaleLabel3||(0,D.B8)(this.labelTextColor);for(let N=0;N<this.THEME_COLOR_LIMIT;N++)this["cScaleLabel"+N]=this["cScaleLabel"+N]||this.labelTextColor}this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.titleColor=this.textColor,this.edgeLabelBackground=this.labelBackground,this.actorBorder=(0,D.a)(this.border1,23),this.actorBkg=this.mainBkg,this.labelBoxBkgColor=this.actorBkg,this.signalColor=this.textColor,this.signalTextColor=this.textColor,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.actorTextColor,this.loopTextColor=this.actorTextColor,this.noteBorderColor=this.border2,this.noteTextColor=this.actorTextColor,this.actorLineColor=this.actorBorder,this.taskTextColor=this.taskTextLightColor,this.taskTextOutsideColor=this.taskTextDarkColor,this.archEdgeColor=this.lineColor,this.archEdgeArrowColor=this.lineColor,this.rowOdd=this.rowOdd||(0,D.a)(this.primaryColor,75)||"#ffffff",this.rowEven=this.rowEven||(0,D.a)(this.primaryColor,1),this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f0f0f0",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.nodeBorder,this.specialStateColor=this.lineColor,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=(0,D.Ai)(this.primaryColor,{h:64}),this.fillType3=(0,D.Ai)(this.secondaryColor,{h:64}),this.fillType4=(0,D.Ai)(this.primaryColor,{h:-64}),this.fillType5=(0,D.Ai)(this.secondaryColor,{h:-64}),this.fillType6=(0,D.Ai)(this.primaryColor,{h:128}),this.fillType7=(0,D.Ai)(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||(0,D.Ai)(this.tertiaryColor,{l:-40}),this.pie4=this.pie4||(0,D.Ai)(this.primaryColor,{l:-10}),this.pie5=this.pie5||(0,D.Ai)(this.secondaryColor,{l:-30}),this.pie6=this.pie6||(0,D.Ai)(this.tertiaryColor,{l:-20}),this.pie7=this.pie7||(0,D.Ai)(this.primaryColor,{h:60,l:-20}),this.pie8=this.pie8||(0,D.Ai)(this.primaryColor,{h:-60,l:-40}),this.pie9=this.pie9||(0,D.Ai)(this.primaryColor,{h:120,l:-40}),this.pie10=this.pie10||(0,D.Ai)(this.primaryColor,{h:60,l:-40}),this.pie11=this.pie11||(0,D.Ai)(this.primaryColor,{h:-90,l:-40}),this.pie12=this.pie12||(0,D.Ai)(this.primaryColor,{h:120,l:-30}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||(0,D.Ai)(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||(0,D.Ai)(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||(0,D.Ai)(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||(0,D.Ai)(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||(0,D.Ai)(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||(0,D.Ai)(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||(0,D.HD)(this.quadrant1Fill)?(0,D.a)(this.quadrant1Fill):(0,D.e$)(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.radar={axisColor:this.radar?.axisColor||this.lineColor,axisStrokeWidth:this.radar?.axisStrokeWidth||2,axisLabelFontSize:this.radar?.axisLabelFontSize||12,curveOpacity:this.radar?.curveOpacity||.5,curveStrokeWidth:this.radar?.curveStrokeWidth||2,graticuleColor:this.radar?.graticuleColor||"#DEDEDE",graticuleStrokeWidth:this.radar?.graticuleStrokeWidth||1,graticuleOpacity:this.radar?.graticuleOpacity||.3,legendBoxSize:this.radar?.legendBoxSize||12,legendFontSize:this.radar?.legendFontSize||12},this.xyChart={backgroundColor:this.xyChart?.backgroundColor||this.background,titleColor:this.xyChart?.titleColor||this.primaryTextColor,xAxisTitleColor:this.xyChart?.xAxisTitleColor||this.primaryTextColor,xAxisLabelColor:this.xyChart?.xAxisLabelColor||this.primaryTextColor,xAxisTickColor:this.xyChart?.xAxisTickColor||this.primaryTextColor,xAxisLineColor:this.xyChart?.xAxisLineColor||this.primaryTextColor,yAxisTitleColor:this.xyChart?.yAxisTitleColor||this.primaryTextColor,yAxisLabelColor:this.xyChart?.yAxisLabelColor||this.primaryTextColor,yAxisTickColor:this.xyChart?.yAxisTickColor||this.primaryTextColor,yAxisLineColor:this.xyChart?.yAxisLineColor||this.primaryTextColor,plotColorPalette:this.xyChart?.plotColorPalette||"#ECECFF,#8493A6,#FFC3A0,#DCDDE1,#B8E994,#D1A36F,#C3CDE6,#FFB6C1,#496078,#F8F3E3"},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.labelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||(0,D.Ai)(this.primaryColor,{h:-30}),this.git4=this.git4||(0,D.Ai)(this.primaryColor,{h:-60}),this.git5=this.git5||(0,D.Ai)(this.primaryColor,{h:-90}),this.git6=this.git6||(0,D.Ai)(this.primaryColor,{h:60}),this.git7=this.git7||(0,D.Ai)(this.primaryColor,{h:120}),this.darkMode?(this.git0=(0,D.a)(this.git0,25),this.git1=(0,D.a)(this.git1,25),this.git2=(0,D.a)(this.git2,25),this.git3=(0,D.a)(this.git3,25),this.git4=(0,D.a)(this.git4,25),this.git5=(0,D.a)(this.git5,25),this.git6=(0,D.a)(this.git6,25),this.git7=(0,D.a)(this.git7,25)):(this.git0=(0,D.e$)(this.git0,25),this.git1=(0,D.e$)(this.git1,25),this.git2=(0,D.e$)(this.git2,25),this.git3=(0,D.e$)(this.git3,25),this.git4=(0,D.e$)(this.git4,25),this.git5=(0,D.e$)(this.git5,25),this.git6=(0,D.e$)(this.git6,25),this.git7=(0,D.e$)(this.git7,25)),this.gitInv0=this.gitInv0||(0,D.e$)((0,D.B8)(this.git0),25),this.gitInv1=this.gitInv1||(0,D.B8)(this.git1),this.gitInv2=this.gitInv2||(0,D.B8)(this.git2),this.gitInv3=this.gitInv3||(0,D.B8)(this.git3),this.gitInv4=this.gitInv4||(0,D.B8)(this.git4),this.gitInv5=this.gitInv5||(0,D.B8)(this.git5),this.gitInv6=this.gitInv6||(0,D.B8)(this.git6),this.gitInv7=this.gitInv7||(0,D.B8)(this.git7),this.gitBranchLabel0=this.gitBranchLabel0||(0,D.B8)(this.labelTextColor),this.gitBranchLabel1=this.gitBranchLabel1||this.labelTextColor,this.gitBranchLabel2=this.gitBranchLabel2||this.labelTextColor,this.gitBranchLabel3=this.gitBranchLabel3||(0,D.B8)(this.labelTextColor),this.gitBranchLabel4=this.gitBranchLabel4||this.labelTextColor,this.gitBranchLabel5=this.gitBranchLabel5||this.labelTextColor,this.gitBranchLabel6=this.gitBranchLabel6||this.labelTextColor,this.gitBranchLabel7=this.gitBranchLabel7||this.labelTextColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||ge,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||Br}calculate(N){if(Object.keys(this).forEach(Ke=>{"calculated"===this[Ke]&&(this[Ke]=void 0)}),"object"!=typeof N)return void this.updateColors();const Vt=Object.keys(N);Vt.forEach(Ke=>{this[Ke]=N[Ke]}),this.updateColors(),Vt.forEach(Ke=>{this[Ke]=N[Ke]})}static#t=$t=()=>((0,ee.A)(this,"Theme3"),(0,L.K2)(this,"Theme"),this)},$t()),ae=(0,L.K2)(N=>{const Vt=new Z;return Vt.calculate(N),Vt},"getThemeVariables"),S=(class{constructor(){this.background="#f4f4f4",this.primaryColor="#cde498",this.secondaryColor="#cdffb2",this.background="white",this.mainBkg="#cde498",this.secondBkg="#cdffb2",this.lineColor="green",this.border1="#13540c",this.border2="#6eaa49",this.arrowheadColor="green",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.tertiaryColor=(0,D.a)("#cde498",10),this.primaryBorderColor=Ge(this.primaryColor,this.darkMode),this.secondaryBorderColor=Ge(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=Ge(this.tertiaryColor,this.darkMode),this.primaryTextColor=(0,D.B8)(this.primaryColor),this.secondaryTextColor=(0,D.B8)(this.secondaryColor),this.tertiaryTextColor=(0,D.B8)(this.primaryColor),this.lineColor=(0,D.B8)(this.background),this.textColor=(0,D.B8)(this.background),this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="#333",this.edgeLabelBackground="#e8e8e8",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="black",this.actorLineColor="calculated",this.signalColor="#333",this.signalTextColor="#333",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="#326932",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="#6eaa49",this.altSectionBkgColor="white",this.sectionBkgColor2="#6eaa49",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="#487e3a",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="black",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="lightgrey",this.doneTaskBkgColor="lightgrey",this.doneTaskBorderColor="grey",this.critBorderColor="#ff8888",this.critBkgColor="red",this.todayLineColor="red",this.vertLineColor="#00BFFF",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.archEdgeColor="calculated",this.archEdgeArrowColor="calculated",this.archEdgeWidth="3",this.archGroupBorderColor=this.primaryBorderColor,this.archGroupBorderWidth="2px",this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222"}updateColors(){this.actorBorder=(0,D.e$)(this.mainBkg,20),this.actorBkg=this.mainBkg,this.labelBoxBkgColor=this.actorBkg,this.labelTextColor=this.actorTextColor,this.loopTextColor=this.actorTextColor,this.noteBorderColor=this.border2,this.noteTextColor=this.actorTextColor,this.actorLineColor=this.actorBorder,this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||(0,D.Ai)(this.primaryColor,{h:30}),this.cScale4=this.cScale4||(0,D.Ai)(this.primaryColor,{h:60}),this.cScale5=this.cScale5||(0,D.Ai)(this.primaryColor,{h:90}),this.cScale6=this.cScale6||(0,D.Ai)(this.primaryColor,{h:120}),this.cScale7=this.cScale7||(0,D.Ai)(this.primaryColor,{h:150}),this.cScale8=this.cScale8||(0,D.Ai)(this.primaryColor,{h:210}),this.cScale9=this.cScale9||(0,D.Ai)(this.primaryColor,{h:270}),this.cScale10=this.cScale10||(0,D.Ai)(this.primaryColor,{h:300}),this.cScale11=this.cScale11||(0,D.Ai)(this.primaryColor,{h:330}),this.cScalePeer1=this.cScalePeer1||(0,D.e$)(this.secondaryColor,45),this.cScalePeer2=this.cScalePeer2||(0,D.e$)(this.tertiaryColor,40);for(let N=0;N<this.THEME_COLOR_LIMIT;N++)this["cScale"+N]=(0,D.e$)(this["cScale"+N],10),this["cScalePeer"+N]=this["cScalePeer"+N]||(0,D.e$)(this["cScale"+N],25);for(let N=0;N<this.THEME_COLOR_LIMIT;N++)this["cScaleInv"+N]=this["cScaleInv"+N]||(0,D.Ai)(this["cScale"+N],{h:180});this.scaleLabelColor="calculated"!==this.scaleLabelColor&&this.scaleLabelColor?this.scaleLabelColor:this.labelTextColor;for(let N=0;N<this.THEME_COLOR_LIMIT;N++)this["cScaleLabel"+N]=this["cScaleLabel"+N]||this.scaleLabelColor;for(let N=0;N<5;N++)this["surface"+N]=this["surface"+N]||(0,D.Ai)(this.mainBkg,{h:30,s:-30,l:-(5+5*N)}),this["surfacePeer"+N]=this["surfacePeer"+N]||(0,D.Ai)(this.mainBkg,{h:30,s:-30,l:-(8+5*N)});this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.taskBorderColor=this.border1,this.taskTextColor=this.taskTextLightColor,this.taskTextOutsideColor=this.taskTextDarkColor,this.activeTaskBorderColor=this.taskBorderColor,this.activeTaskBkgColor=this.mainBkg,this.archEdgeColor=this.lineColor,this.archEdgeArrowColor=this.lineColor,this.rowOdd=this.rowOdd||(0,D.a)(this.mainBkg,75)||"#ffffff",this.rowEven=this.rowEven||(0,D.a)(this.mainBkg,20),this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f0f0f0",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.primaryBorderColor,this.specialStateColor=this.lineColor,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=(0,D.Ai)(this.primaryColor,{h:64}),this.fillType3=(0,D.Ai)(this.secondaryColor,{h:64}),this.fillType4=(0,D.Ai)(this.primaryColor,{h:-64}),this.fillType5=(0,D.Ai)(this.secondaryColor,{h:-64}),this.fillType6=(0,D.Ai)(this.primaryColor,{h:128}),this.fillType7=(0,D.Ai)(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||this.tertiaryColor,this.pie4=this.pie4||(0,D.Ai)(this.primaryColor,{l:-30}),this.pie5=this.pie5||(0,D.Ai)(this.secondaryColor,{l:-30}),this.pie6=this.pie6||(0,D.Ai)(this.tertiaryColor,{h:40,l:-40}),this.pie7=this.pie7||(0,D.Ai)(this.primaryColor,{h:60,l:-10}),this.pie8=this.pie8||(0,D.Ai)(this.primaryColor,{h:-60,l:-10}),this.pie9=this.pie9||(0,D.Ai)(this.primaryColor,{h:120,l:0}),this.pie10=this.pie10||(0,D.Ai)(this.primaryColor,{h:60,l:-50}),this.pie11=this.pie11||(0,D.Ai)(this.primaryColor,{h:-60,l:-50}),this.pie12=this.pie12||(0,D.Ai)(this.primaryColor,{h:120,l:-50}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||(0,D.Ai)(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||(0,D.Ai)(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||(0,D.Ai)(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||(0,D.Ai)(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||(0,D.Ai)(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||(0,D.Ai)(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||(0,D.HD)(this.quadrant1Fill)?(0,D.a)(this.quadrant1Fill):(0,D.e$)(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.packet={startByteColor:this.primaryTextColor,endByteColor:this.primaryTextColor,labelColor:this.primaryTextColor,titleColor:this.primaryTextColor,blockStrokeColor:this.primaryTextColor,blockFillColor:this.mainBkg},this.radar={axisColor:this.radar?.axisColor||this.lineColor,axisStrokeWidth:this.radar?.axisStrokeWidth||2,axisLabelFontSize:this.radar?.axisLabelFontSize||12,curveOpacity:this.radar?.curveOpacity||.5,curveStrokeWidth:this.radar?.curveStrokeWidth||2,graticuleColor:this.radar?.graticuleColor||"#DEDEDE",graticuleStrokeWidth:this.radar?.graticuleStrokeWidth||1,graticuleOpacity:this.radar?.graticuleOpacity||.3,legendBoxSize:this.radar?.legendBoxSize||12,legendFontSize:this.radar?.legendFontSize||12},this.xyChart={backgroundColor:this.xyChart?.backgroundColor||this.background,titleColor:this.xyChart?.titleColor||this.primaryTextColor,xAxisTitleColor:this.xyChart?.xAxisTitleColor||this.primaryTextColor,xAxisLabelColor:this.xyChart?.xAxisLabelColor||this.primaryTextColor,xAxisTickColor:this.xyChart?.xAxisTickColor||this.primaryTextColor,xAxisLineColor:this.xyChart?.xAxisLineColor||this.primaryTextColor,yAxisTitleColor:this.xyChart?.yAxisTitleColor||this.primaryTextColor,yAxisLabelColor:this.xyChart?.yAxisLabelColor||this.primaryTextColor,yAxisTickColor:this.xyChart?.yAxisTickColor||this.primaryTextColor,yAxisLineColor:this.xyChart?.yAxisLineColor||this.primaryTextColor,plotColorPalette:this.xyChart?.plotColorPalette||"#CDE498,#FF6B6B,#A0D2DB,#D7BDE2,#F0F0F0,#FFC3A0,#7FD8BE,#FF9A8B,#FAF3E0,#FFF176"},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.edgeLabelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||(0,D.Ai)(this.primaryColor,{h:-30}),this.git4=this.git4||(0,D.Ai)(this.primaryColor,{h:-60}),this.git5=this.git5||(0,D.Ai)(this.primaryColor,{h:-90}),this.git6=this.git6||(0,D.Ai)(this.primaryColor,{h:60}),this.git7=this.git7||(0,D.Ai)(this.primaryColor,{h:120}),this.darkMode?(this.git0=(0,D.a)(this.git0,25),this.git1=(0,D.a)(this.git1,25),this.git2=(0,D.a)(this.git2,25),this.git3=(0,D.a)(this.git3,25),this.git4=(0,D.a)(this.git4,25),this.git5=(0,D.a)(this.git5,25),this.git6=(0,D.a)(this.git6,25),this.git7=(0,D.a)(this.git7,25)):(this.git0=(0,D.e$)(this.git0,25),this.git1=(0,D.e$)(this.git1,25),this.git2=(0,D.e$)(this.git2,25),this.git3=(0,D.e$)(this.git3,25),this.git4=(0,D.e$)(this.git4,25),this.git5=(0,D.e$)(this.git5,25),this.git6=(0,D.e$)(this.git6,25),this.git7=(0,D.e$)(this.git7,25)),this.gitInv0=this.gitInv0||(0,D.B8)(this.git0),this.gitInv1=this.gitInv1||(0,D.B8)(this.git1),this.gitInv2=this.gitInv2||(0,D.B8)(this.git2),this.gitInv3=this.gitInv3||(0,D.B8)(this.git3),this.gitInv4=this.gitInv4||(0,D.B8)(this.git4),this.gitInv5=this.gitInv5||(0,D.B8)(this.git5),this.gitInv6=this.gitInv6||(0,D.B8)(this.git6),this.gitInv7=this.gitInv7||(0,D.B8)(this.git7),this.gitBranchLabel0=this.gitBranchLabel0||(0,D.B8)(this.labelTextColor),this.gitBranchLabel1=this.gitBranchLabel1||this.labelTextColor,this.gitBranchLabel2=this.gitBranchLabel2||this.labelTextColor,this.gitBranchLabel3=this.gitBranchLabel3||(0,D.B8)(this.labelTextColor),this.gitBranchLabel4=this.gitBranchLabel4||this.labelTextColor,this.gitBranchLabel5=this.gitBranchLabel5||this.labelTextColor,this.gitBranchLabel6=this.gitBranchLabel6||this.labelTextColor,this.gitBranchLabel7=this.gitBranchLabel7||this.labelTextColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||ge,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||Br}calculate(N){if("object"!=typeof N)return void this.updateColors();const Vt=Object.keys(N);Vt.forEach(Ke=>{this[Ke]=N[Ke]}),this.updateColors(),Vt.forEach(Ke=>{this[Ke]=N[Ke]})}static#t=yt=()=>((0,ee.A)(this,"Theme4"),(0,L.K2)(this,"Theme"),this)},yt()),re=(0,L.K2)(N=>{const Vt=new S;return Vt.calculate(N),Vt},"getThemeVariables"),Pt=(class{constructor(){this.primaryColor="#eee",this.contrast="#707070",this.secondaryColor=(0,D.a)(this.contrast,55),this.background="#ffffff",this.tertiaryColor=(0,D.Ai)(this.primaryColor,{h:-160}),this.primaryBorderColor=Ge(this.primaryColor,this.darkMode),this.secondaryBorderColor=Ge(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=Ge(this.tertiaryColor,this.darkMode),this.primaryTextColor=(0,D.B8)(this.primaryColor),this.secondaryTextColor=(0,D.B8)(this.secondaryColor),this.tertiaryTextColor=(0,D.B8)(this.tertiaryColor),this.lineColor=(0,D.B8)(this.background),this.textColor=(0,D.B8)(this.background),this.mainBkg="#eee",this.secondBkg="calculated",this.lineColor="#666",this.border1="#999",this.border2="calculated",this.note="#ffa",this.text="#333",this.critical="#d42",this.done="#bbb",this.arrowheadColor="#333333",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="calculated",this.edgeLabelBackground="white",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="calculated",this.actorLineColor=this.actorBorder,this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="calculated",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="calculated",this.altSectionBkgColor="white",this.sectionBkgColor2="calculated",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="calculated",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="calculated",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="calculated",this.critBkgColor="calculated",this.critBorderColor="calculated",this.todayLineColor="calculated",this.vertLineColor="calculated",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.archEdgeColor="calculated",this.archEdgeArrowColor="calculated",this.archEdgeWidth="3",this.archGroupBorderColor=this.primaryBorderColor,this.archGroupBorderWidth="2px",this.rowOdd=this.rowOdd||(0,D.a)(this.mainBkg,75)||"#ffffff",this.rowEven=this.rowEven||"#f4f4f4",this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222"}updateColors(){this.secondBkg=(0,D.a)(this.contrast,55),this.border2=this.contrast,this.actorBorder=(0,D.a)(this.border1,23),this.actorBkg=this.mainBkg,this.actorTextColor=this.text,this.actorLineColor=this.actorBorder,this.signalColor=this.text,this.signalTextColor=this.text,this.labelBoxBkgColor=this.actorBkg,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.text,this.loopTextColor=this.text,this.noteBorderColor="#999",this.noteBkgColor="#666",this.noteTextColor="#fff",this.cScale0=this.cScale0||"#555",this.cScale1=this.cScale1||"#F4F4F4",this.cScale2=this.cScale2||"#555",this.cScale3=this.cScale3||"#BBB",this.cScale4=this.cScale4||"#777",this.cScale5=this.cScale5||"#999",this.cScale6=this.cScale6||"#DDD",this.cScale7=this.cScale7||"#FFF",this.cScale8=this.cScale8||"#DDD",this.cScale9=this.cScale9||"#BBB",this.cScale10=this.cScale10||"#999",this.cScale11=this.cScale11||"#777";for(let N=0;N<this.THEME_COLOR_LIMIT;N++)this["cScaleInv"+N]=this["cScaleInv"+N]||(0,D.B8)(this["cScale"+N]);for(let N=0;N<this.THEME_COLOR_LIMIT;N++)this["cScalePeer"+N]=this.darkMode?this["cScalePeer"+N]||(0,D.a)(this["cScale"+N],10):this["cScalePeer"+N]||(0,D.e$)(this["cScale"+N],10);this.scaleLabelColor=this.scaleLabelColor||(this.darkMode?"black":this.labelTextColor),this.cScaleLabel0=this.cScaleLabel0||this.cScale1,this.cScaleLabel2=this.cScaleLabel2||this.cScale1;for(let N=0;N<this.THEME_COLOR_LIMIT;N++)this["cScaleLabel"+N]=this["cScaleLabel"+N]||this.scaleLabelColor;for(let N=0;N<5;N++)this["surface"+N]=this["surface"+N]||(0,D.Ai)(this.mainBkg,{l:-(5+5*N)}),this["surfacePeer"+N]=this["surfacePeer"+N]||(0,D.Ai)(this.mainBkg,{l:-(8+5*N)});this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.titleColor=this.text,this.sectionBkgColor=(0,D.a)(this.contrast,30),this.sectionBkgColor2=(0,D.a)(this.contrast,30),this.taskBorderColor=(0,D.e$)(this.contrast,10),this.taskBkgColor=this.contrast,this.taskTextColor=this.taskTextLightColor,this.taskTextDarkColor=this.text,this.taskTextOutsideColor=this.taskTextDarkColor,this.activeTaskBorderColor=this.taskBorderColor,this.activeTaskBkgColor=this.mainBkg,this.gridColor=(0,D.a)(this.border1,30),this.doneTaskBkgColor=this.done,this.doneTaskBorderColor=this.lineColor,this.critBkgColor=this.critical,this.critBorderColor=(0,D.e$)(this.critBkgColor,10),this.todayLineColor=this.critBkgColor,this.vertLineColor=this.critBkgColor,this.archEdgeColor=this.lineColor,this.archEdgeArrowColor=this.lineColor,this.transitionColor=this.transitionColor||"#000",this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f4f4f4",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.stateBorder=this.stateBorder||"#000",this.innerEndBackground=this.primaryBorderColor,this.specialStateColor="#222",this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=(0,D.Ai)(this.primaryColor,{h:64}),this.fillType3=(0,D.Ai)(this.secondaryColor,{h:64}),this.fillType4=(0,D.Ai)(this.primaryColor,{h:-64}),this.fillType5=(0,D.Ai)(this.secondaryColor,{h:-64}),this.fillType6=(0,D.Ai)(this.primaryColor,{h:128}),this.fillType7=(0,D.Ai)(this.secondaryColor,{h:128});for(let N=0;N<this.THEME_COLOR_LIMIT;N++)this["pie"+N]=this["cScale"+N];this.pie12=this.pie0,this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||(0,D.Ai)(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||(0,D.Ai)(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||(0,D.Ai)(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||(0,D.Ai)(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||(0,D.Ai)(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||(0,D.Ai)(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||(0,D.HD)(this.quadrant1Fill)?(0,D.a)(this.quadrant1Fill):(0,D.e$)(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:this.xyChart?.backgroundColor||this.background,titleColor:this.xyChart?.titleColor||this.primaryTextColor,xAxisTitleColor:this.xyChart?.xAxisTitleColor||this.primaryTextColor,xAxisLabelColor:this.xyChart?.xAxisLabelColor||this.primaryTextColor,xAxisTickColor:this.xyChart?.xAxisTickColor||this.primaryTextColor,xAxisLineColor:this.xyChart?.xAxisLineColor||this.primaryTextColor,yAxisTitleColor:this.xyChart?.yAxisTitleColor||this.primaryTextColor,yAxisLabelColor:this.xyChart?.yAxisLabelColor||this.primaryTextColor,yAxisTickColor:this.xyChart?.yAxisTickColor||this.primaryTextColor,yAxisLineColor:this.xyChart?.yAxisLineColor||this.primaryTextColor,plotColorPalette:this.xyChart?.plotColorPalette||"#EEE,#6BB8E4,#8ACB88,#C7ACD6,#E8DCC2,#FFB2A8,#FFF380,#7E8D91,#FFD8B1,#FAF3E0"},this.radar={axisColor:this.radar?.axisColor||this.lineColor,axisStrokeWidth:this.radar?.axisStrokeWidth||2,axisLabelFontSize:this.radar?.axisLabelFontSize||12,curveOpacity:this.radar?.curveOpacity||.5,curveStrokeWidth:this.radar?.curveStrokeWidth||2,graticuleColor:this.radar?.graticuleColor||"#DEDEDE",graticuleStrokeWidth:this.radar?.graticuleStrokeWidth||1,graticuleOpacity:this.radar?.graticuleOpacity||.3,legendBoxSize:this.radar?.legendBoxSize||12,legendFontSize:this.radar?.legendFontSize||12},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.edgeLabelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=(0,D.e$)(this.pie1,25)||this.primaryColor,this.git1=this.pie2||this.secondaryColor,this.git2=this.pie3||this.tertiaryColor,this.git3=this.pie4||(0,D.Ai)(this.primaryColor,{h:-30}),this.git4=this.pie5||(0,D.Ai)(this.primaryColor,{h:-60}),this.git5=this.pie6||(0,D.Ai)(this.primaryColor,{h:-90}),this.git6=this.pie7||(0,D.Ai)(this.primaryColor,{h:60}),this.git7=this.pie8||(0,D.Ai)(this.primaryColor,{h:120}),this.gitInv0=this.gitInv0||(0,D.B8)(this.git0),this.gitInv1=this.gitInv1||(0,D.B8)(this.git1),this.gitInv2=this.gitInv2||(0,D.B8)(this.git2),this.gitInv3=this.gitInv3||(0,D.B8)(this.git3),this.gitInv4=this.gitInv4||(0,D.B8)(this.git4),this.gitInv5=this.gitInv5||(0,D.B8)(this.git5),this.gitInv6=this.gitInv6||(0,D.B8)(this.git6),this.gitInv7=this.gitInv7||(0,D.B8)(this.git7),this.branchLabelColor=this.branchLabelColor||this.labelTextColor,this.gitBranchLabel0=this.branchLabelColor,this.gitBranchLabel1="white",this.gitBranchLabel2=this.branchLabelColor,this.gitBranchLabel3="white",this.gitBranchLabel4=this.branchLabelColor,this.gitBranchLabel5=this.branchLabelColor,this.gitBranchLabel6=this.branchLabelColor,this.gitBranchLabel7=this.branchLabelColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||ge,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||Br}calculate(N){if("object"!=typeof N)return void this.updateColors();const Vt=Object.keys(N);Vt.forEach(Ke=>{this[Ke]=N[Ke]}),this.updateColors(),Vt.forEach(Ke=>{this[Ke]=N[Ke]})}static#t=Ye=()=>((0,ee.A)(this,"Theme5"),(0,L.K2)(this,"Theme"),this)},Ye()),V={base:{getThemeVariables:ft},dark:{getThemeVariables:_e},default:{getThemeVariables:ae},forest:{getThemeVariables:re},neutral:{getThemeVariables:(0,L.K2)(N=>{const Vt=new Pt;return Vt.calculate(N),Vt},"getThemeVariables")}},pt={flowchart:{useMaxWidth:!0,titleTopMargin:25,subGraphTitleMargin:{top:0,bottom:0},diagramPadding:8,htmlLabels:!0,nodeSpacing:50,rankSpacing:50,curve:"basis",padding:15,defaultRenderer:"dagre-wrapper",wrappingWidth:200,inheritDir:!1},sequence:{useMaxWidth:!0,hideUnusedParticipants:!1,activationWidth:10,diagramMarginX:50,diagramMarginY:10,actorMargin:50,width:150,height:65,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",mirrorActors:!0,forceMenus:!1,bottomMarginAdj:1,rightAngles:!1,showSequenceNumbers:!1,actorFontSize:14,actorFontFamily:'"Open Sans", sans-serif',actorFontWeight:400,noteFontSize:14,noteFontFamily:'"trebuchet ms", verdana, arial, sans-serif',noteFontWeight:400,noteAlign:"center",messageFontSize:16,messageFontFamily:'"trebuchet ms", verdana, arial, sans-serif',messageFontWeight:400,wrap:!1,wrapPadding:10,labelBoxWidth:50,labelBoxHeight:20},gantt:{useMaxWidth:!0,titleTopMargin:25,barHeight:20,barGap:4,topPadding:50,rightPadding:75,leftPadding:75,gridLineStartPadding:35,fontSize:11,sectionFontSize:11,numberSectionStyles:4,axisFormat:"%Y-%m-%d",topAxis:!1,displayMode:"",weekday:"sunday"},journey:{useMaxWidth:!0,diagramMarginX:50,diagramMarginY:10,leftMargin:150,maxLabelWidth:360,width:150,height:50,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",bottomMarginAdj:1,rightAngles:!1,taskFontSize:14,taskFontFamily:'"Open Sans", sans-serif',taskMargin:50,activationWidth:10,textPlacement:"fo",actorColours:["#8FBC8F","#7CFC00","#00FFFF","#20B2AA","#B0E0E6","#FFFFE0"],sectionFills:["#191970","#8B008B","#4B0082","#2F4F4F","#800000","#8B4513","#00008B"],sectionColours:["#fff"],titleColor:"",titleFontFamily:'"trebuchet ms", verdana, arial, sans-serif',titleFontSize:"4ex"},class:{useMaxWidth:!0,titleTopMargin:25,arrowMarkerAbsolute:!1,dividerMargin:10,padding:5,textHeight:10,defaultRenderer:"dagre-wrapper",htmlLabels:!1,hideEmptyMembersBox:!1},state:{useMaxWidth:!0,titleTopMargin:25,dividerMargin:10,sizeUnit:5,padding:8,textHeight:10,titleShift:-15,noteMargin:10,forkWidth:70,forkHeight:7,miniPadding:2,fontSizeFactor:5.02,fontSize:24,labelHeight:16,edgeLengthFactor:"20",compositTitleSize:35,radius:5,defaultRenderer:"dagre-wrapper"},er:{useMaxWidth:!0,titleTopMargin:25,diagramPadding:20,layoutDirection:"TB",minEntityWidth:100,minEntityHeight:75,entityPadding:15,nodeSpacing:140,rankSpacing:80,stroke:"gray",fill:"honeydew",fontSize:12},pie:{useMaxWidth:!0,textPosition:.75},quadrantChart:{useMaxWidth:!0,chartWidth:500,chartHeight:500,titleFontSize:20,titlePadding:10,quadrantPadding:5,xAxisLabelPadding:5,yAxisLabelPadding:5,xAxisLabelFontSize:16,yAxisLabelFontSize:16,quadrantLabelFontSize:16,quadrantTextTopPadding:5,pointTextPadding:5,pointLabelFontSize:12,pointRadius:5,xAxisPosition:"top",yAxisPosition:"left",quadrantInternalBorderStrokeWidth:1,quadrantExternalBorderStrokeWidth:2},xyChart:{useMaxWidth:!0,width:700,height:500,titleFontSize:20,titlePadding:10,showDataLabel:!1,showTitle:!0,xAxis:{$ref:"#/$defs/XYChartAxisConfig",showLabel:!0,labelFontSize:14,labelPadding:5,showTitle:!0,titleFontSize:16,titlePadding:5,showTick:!0,tickLength:5,tickWidth:2,showAxisLine:!0,axisLineWidth:2},yAxis:{$ref:"#/$defs/XYChartAxisConfig",showLabel:!0,labelFontSize:14,labelPadding:5,showTitle:!0,titleFontSize:16,titlePadding:5,showTick:!0,tickLength:5,tickWidth:2,showAxisLine:!0,axisLineWidth:2},chartOrientation:"vertical",plotReservedSpacePercent:50},requirement:{useMaxWidth:!0,rect_fill:"#f9f9f9",text_color:"#333",rect_border_size:"0.5px",rect_border_color:"#bbb",rect_min_width:200,rect_min_height:200,fontSize:14,rect_padding:10,line_height:20},mindmap:{useMaxWidth:!0,padding:10,maxNodeWidth:200,layoutAlgorithm:"cose-bilkent"},kanban:{useMaxWidth:!0,padding:8,sectionWidth:200,ticketBaseUrl:""},timeline:{useMaxWidth:!0,diagramMarginX:50,diagramMarginY:10,leftMargin:150,width:150,height:50,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",bottomMarginAdj:1,rightAngles:!1,taskFontSize:14,taskFontFamily:'"Open Sans", sans-serif',taskMargin:50,activationWidth:10,textPlacement:"fo",actorColours:["#8FBC8F","#7CFC00","#00FFFF","#20B2AA","#B0E0E6","#FFFFE0"],sectionFills:["#191970","#8B008B","#4B0082","#2F4F4F","#800000","#8B4513","#00008B"],sectionColours:["#fff"],disableMulticolor:!1},gitGraph:{useMaxWidth:!0,titleTopMargin:25,diagramPadding:8,nodeLabel:{width:75,height:100,x:-25,y:0},mainBranchName:"main",mainBranchOrder:0,showCommitLabel:!0,showBranches:!0,rotateCommitLabel:!0,parallelCommits:!1,arrowMarkerAbsolute:!1},c4:{useMaxWidth:!0,diagramMarginX:50,diagramMarginY:10,c4ShapeMargin:50,c4ShapePadding:20,width:216,height:60,boxMargin:10,c4ShapeInRow:4,nextLinePaddingX:0,c4BoundaryInRow:2,personFontSize:14,personFontFamily:'"Open Sans", sans-serif',personFontWeight:"normal",external_personFontSize:14,external_personFontFamily:'"Open Sans", sans-serif',external_personFontWeight:"normal",systemFontSize:14,systemFontFamily:'"Open Sans", sans-serif',systemFontWeight:"normal",external_systemFontSize:14,external_systemFontFamily:'"Open Sans", sans-serif',external_systemFontWeight:"normal",system_dbFontSize:14,system_dbFontFamily:'"Open Sans", sans-serif',system_dbFontWeight:"normal",external_system_dbFontSize:14,external_system_dbFontFamily:'"Open Sans", sans-serif',external_system_dbFontWeight:"normal",system_queueFontSize:14,system_queueFontFamily:'"Open Sans", sans-serif',system_queueFontWeight:"normal",external_system_queueFontSize:14,external_system_queueFontFamily:'"Open Sans", sans-serif',external_system_queueFontWeight:"normal",boundaryFontSize:14,boundaryFontFamily:'"Open Sans", sans-serif',boundaryFontWeight:"normal",messageFontSize:12,messageFontFamily:'"Open Sans", sans-serif',messageFontWeight:"normal",containerFontSize:14,containerFontFamily:'"Open Sans", sans-serif',containerFontWeight:"normal",external_containerFontSize:14,external_containerFontFamily:'"Open Sans", sans-serif',external_containerFontWeight:"normal",container_dbFontSize:14,container_dbFontFamily:'"Open Sans", sans-serif',container_dbFontWeight:"normal",external_container_dbFontSize:14,external_container_dbFontFamily:'"Open Sans", sans-serif',external_container_dbFontWeight:"normal",container_queueFontSize:14,container_queueFontFamily:'"Open Sans", sans-serif',container_queueFontWeight:"normal",external_container_queueFontSize:14,external_container_queueFontFamily:'"Open Sans", sans-serif',external_container_queueFontWeight:"normal",componentFontSize:14,componentFontFamily:'"Open Sans", sans-serif',componentFontWeight:"normal",external_componentFontSize:14,external_componentFontFamily:'"Open Sans", sans-serif',external_componentFontWeight:"normal",component_dbFontSize:14,component_dbFontFamily:'"Open Sans", sans-serif',component_dbFontWeight:"normal",external_component_dbFontSize:14,external_component_dbFontFamily:'"Open Sans", sans-serif',external_component_dbFontWeight:"normal",component_queueFontSize:14,component_queueFontFamily:'"Open Sans", sans-serif',component_queueFontWeight:"normal",external_component_queueFontSize:14,external_component_queueFontFamily:'"Open Sans", sans-serif',external_component_queueFontWeight:"normal",wrap:!0,wrapPadding:10,person_bg_color:"#08427B",person_border_color:"#073B6F",external_person_bg_color:"#686868",external_person_border_color:"#8A8A8A",system_bg_color:"#1168BD",system_border_color:"#3C7FC0",system_db_bg_color:"#1168BD",system_db_border_color:"#3C7FC0",system_queue_bg_color:"#1168BD",system_queue_border_color:"#3C7FC0",external_system_bg_color:"#999999",external_system_border_color:"#8A8A8A",external_system_db_bg_color:"#999999",external_system_db_border_color:"#8A8A8A",external_system_queue_bg_color:"#999999",external_system_queue_border_color:"#8A8A8A",container_bg_color:"#438DD5",container_border_color:"#3C7FC0",container_db_bg_color:"#438DD5",container_db_border_color:"#3C7FC0",container_queue_bg_color:"#438DD5",container_queue_border_color:"#3C7FC0",external_container_bg_color:"#B3B3B3",external_container_border_color:"#A6A6A6",external_container_db_bg_color:"#B3B3B3",external_container_db_border_color:"#A6A6A6",external_container_queue_bg_color:"#B3B3B3",external_container_queue_border_color:"#A6A6A6",component_bg_color:"#85BBF0",component_border_color:"#78A8D8",component_db_bg_color:"#85BBF0",component_db_border_color:"#78A8D8",component_queue_bg_color:"#85BBF0",component_queue_border_color:"#78A8D8",external_component_bg_color:"#CCCCCC",external_component_border_color:"#BFBFBF",external_component_db_bg_color:"#CCCCCC",external_component_db_border_color:"#BFBFBF",external_component_queue_bg_color:"#CCCCCC",external_component_queue_border_color:"#BFBFBF"},sankey:{useMaxWidth:!0,width:600,height:400,linkColor:"gradient",nodeAlignment:"justify",showValues:!0,prefix:"",suffix:""},block:{useMaxWidth:!0,padding:8},packet:{useMaxWidth:!0,rowHeight:32,bitWidth:32,bitsPerRow:32,showBits:!0,paddingX:5,paddingY:5},architecture:{useMaxWidth:!0,padding:40,iconSize:80,fontSize:16},radar:{useMaxWidth:!0,width:600,height:600,marginTop:50,marginRight:50,marginBottom:50,marginLeft:50,axisScaleFactor:1,axisLabelFactor:1.05,curveTension:.17},theme:"default",look:"classic",handDrawnSeed:0,layout:"dagre",maxTextSize:5e4,maxEdges:500,darkMode:!1,fontFamily:'"trebuchet ms", verdana, arial, sans-serif;',logLevel:5,securityLevel:"strict",startOnLoad:!0,arrowMarkerAbsolute:!1,secure:["secure","securityLevel","startOnLoad","maxTextSize","suppressErrorRendering","maxEdges"],legacyMathML:!1,forceLegacyMathML:!1,deterministicIds:!1,fontSize:16,markdownAutoWrap:!0,suppressErrorRendering:!1},H={...pt,deterministicIDSeed:void 0,elk:{mergeEdges:!1,nodePlacementStrategy:"BRANDES_KOEPF",forceNodeModelOrder:!1,considerModelOrder:"NODES_AND_EDGES"},themeCSS:void 0,themeVariables:V.default.getThemeVariables(),sequence:{...pt.sequence,messageFont:(0,L.K2)(function(){return{fontFamily:this.messageFontFamily,fontSize:this.messageFontSize,fontWeight:this.messageFontWeight}},"messageFont"),noteFont:(0,L.K2)(function(){return{fontFamily:this.noteFontFamily,fontSize:this.noteFontSize,fontWeight:this.noteFontWeight}},"noteFont"),actorFont:(0,L.K2)(function(){return{fontFamily:this.actorFontFamily,fontSize:this.actorFontSize,fontWeight:this.actorFontWeight}},"actorFont")},class:{hideEmptyMembersBox:!1},gantt:{...pt.gantt,tickInterval:void 0,useWidth:void 0},c4:{...pt.c4,useWidth:void 0,personFont:(0,L.K2)(function(){return{fontFamily:this.personFontFamily,fontSize:this.personFontSize,fontWeight:this.personFontWeight}},"personFont"),flowchart:{...pt.flowchart,inheritDir:!1},external_personFont:(0,L.K2)(function(){return{fontFamily:this.external_personFontFamily,fontSize:this.external_personFontSize,fontWeight:this.external_personFontWeight}},"external_personFont"),systemFont:(0,L.K2)(function(){return{fontFamily:this.systemFontFamily,fontSize:this.systemFontSize,fontWeight:this.systemFontWeight}},"systemFont"),external_systemFont:(0,L.K2)(function(){return{fontFamily:this.external_systemFontFamily,fontSize:this.external_systemFontSize,fontWeight:this.external_systemFontWeight}},"external_systemFont"),system_dbFont:(0,L.K2)(function(){return{fontFamily:this.system_dbFontFamily,fontSize:this.system_dbFontSize,fontWeight:this.system_dbFontWeight}},"system_dbFont"),external_system_dbFont:(0,L.K2)(function(){return{fontFamily:this.external_system_dbFontFamily,fontSize:this.external_system_dbFontSize,fontWeight:this.external_system_dbFontWeight}},"external_system_dbFont"),system_queueFont:(0,L.K2)(function(){return{fontFamily:this.system_queueFontFamily,fontSize:this.system_queueFontSize,fontWeight:this.system_queueFontWeight}},"system_queueFont"),external_system_queueFont:(0,L.K2)(function(){return{fontFamily:this.external_system_queueFontFamily,fontSize:this.external_system_queueFontSize,fontWeight:this.external_system_queueFontWeight}},"external_system_queueFont"),containerFont:(0,L.K2)(function(){return{fontFamily:this.containerFontFamily,fontSize:this.containerFontSize,fontWeight:this.containerFontWeight}},"containerFont"),external_containerFont:(0,L.K2)(function(){return{fontFamily:this.external_containerFontFamily,fontSize:this.external_containerFontSize,fontWeight:this.external_containerFontWeight}},"external_containerFont"),container_dbFont:(0,L.K2)(function(){return{fontFamily:this.container_dbFontFamily,fontSize:this.container_dbFontSize,fontWeight:this.container_dbFontWeight}},"container_dbFont"),external_container_dbFont:(0,L.K2)(function(){return{fontFamily:this.external_container_dbFontFamily,fontSize:this.external_container_dbFontSize,fontWeight:this.external_container_dbFontWeight}},"external_container_dbFont"),container_queueFont:(0,L.K2)(function(){return{fontFamily:this.container_queueFontFamily,fontSize:this.container_queueFontSize,fontWeight:this.container_queueFontWeight}},"container_queueFont"),external_container_queueFont:(0,L.K2)(function(){return{fontFamily:this.external_container_queueFontFamily,fontSize:this.external_container_queueFontSize,fontWeight:this.external_container_queueFontWeight}},"external_container_queueFont"),componentFont:(0,L.K2)(function(){return{fontFamily:this.componentFontFamily,fontSize:this.componentFontSize,fontWeight:this.componentFontWeight}},"componentFont"),external_componentFont:(0,L.K2)(function(){return{fontFamily:this.external_componentFontFamily,fontSize:this.external_componentFontSize,fontWeight:this.external_componentFontWeight}},"external_componentFont"),component_dbFont:(0,L.K2)(function(){return{fontFamily:this.component_dbFontFamily,fontSize:this.component_dbFontSize,fontWeight:this.component_dbFontWeight}},"component_dbFont"),external_component_dbFont:(0,L.K2)(function(){return{fontFamily:this.external_component_dbFontFamily,fontSize:this.external_component_dbFontSize,fontWeight:this.external_component_dbFontWeight}},"external_component_dbFont"),component_queueFont:(0,L.K2)(function(){return{fontFamily:this.component_queueFontFamily,fontSize:this.component_queueFontSize,fontWeight:this.component_queueFontWeight}},"component_queueFont"),external_component_queueFont:(0,L.K2)(function(){return{fontFamily:this.external_component_queueFontFamily,fontSize:this.external_component_queueFontSize,fontWeight:this.external_component_queueFontWeight}},"external_component_queueFont"),boundaryFont:(0,L.K2)(function(){return{fontFamily:this.boundaryFontFamily,fontSize:this.boundaryFontSize,fontWeight:this.boundaryFontWeight}},"boundaryFont"),messageFont:(0,L.K2)(function(){return{fontFamily:this.messageFontFamily,fontSize:this.messageFontSize,fontWeight:this.messageFontWeight}},"messageFont")},pie:{...pt.pie,useWidth:984},xyChart:{...pt.xyChart,useWidth:void 0},requirement:{...pt.requirement,useWidth:void 0},packet:{...pt.packet},radar:{...pt.radar},treemap:{useMaxWidth:!0,padding:10,diagramPadding:8,showValues:!0,nodeWidth:100,nodeHeight:40,borderWidth:1,valueFontSize:12,labelFontSize:14,valueFormat:","}},Nt=(0,L.K2)((N,Vt="")=>Object.keys(N).reduce((Ke,rr)=>Array.isArray(N[rr])?Ke:"object"==typeof N[rr]&&null!==N[rr]?[...Ke,Vt+rr,...Nt(N[rr],"")]:[...Ke,Vt+rr],[]),"keyify"),wt=new Set(Nt(H,"")),Wt=H,xe=(0,L.K2)(N=>{if(L.Rm.debug("sanitizeDirective called with",N),"object"==typeof N&&null!=N){if(Array.isArray(N))return void N.forEach(Vt=>xe(Vt));for(const Vt of Object.keys(N)){if(L.Rm.debug("Checking key",Vt),Vt.startsWith("__")||Vt.includes("proto")||Vt.includes("constr")||!wt.has(Vt)||null==N[Vt]){L.Rm.debug("sanitize deleting key: ",Vt),delete N[Vt];continue}if("object"==typeof N[Vt]){L.Rm.debug("sanitizing object",Vt),xe(N[Vt]);continue}const Ke=["themeCSS","fontFamily","altFontFamily"];for(const rr of Ke)Vt.includes(rr)&&(L.Rm.debug("sanitizing css option",Vt),N[Vt]=le(N[Vt]))}if(N.themeVariables)for(const Vt of Object.keys(N.themeVariables)){const Ke=N.themeVariables[Vt];Ke?.match&&!Ke.match(/^[\d "#%(),.;A-Za-z]+$/)&&(N.themeVariables[Vt]="")}L.Rm.debug("After sanitization",N)}},"sanitizeDirective"),le=(0,L.K2)(N=>{let Vt=0,Ke=0;for(const rr of N){if(Vt<Ke)return"{ /* ERROR: Unbalanced CSS */ }";"{"===rr?Vt++:"}"===rr&&Ke++}return Vt!==Ke?"{ /* ERROR: Unbalanced CSS */ }":N},"sanitizeCss"),Re=Object.freeze(Wt),oe=Ar({},Re),We=[],Ct=Ar({},Re),St=(0,L.K2)((N,Vt)=>{let Ke=Ar({},N),rr={};for(const ia of Vt)Et(ia),rr=Ar(rr,ia);if(Ke=Ar(Ke,rr),rr.theme&&rr.theme in V){const ia=Ar({},qe),hr=Ar(ia.themeVariables||{},rr.themeVariables);Ke.theme&&Ke.theme in V&&(Ke.themeVariables=V[Ke.theme].getThemeVariables(hr))}return Ot(Ct=Ke),Ct},"updateCurrentConfig"),R=(0,L.K2)(N=>(oe=Ar({},Re),oe=Ar(oe,N),N.theme&&V[N.theme]&&(oe.themeVariables=V[N.theme].getThemeVariables(N.themeVariables)),St(oe,We),oe),"setSiteConfig"),O=(0,L.K2)(N=>{qe=Ar({},N)},"saveConfigFromInitialize"),et=(0,L.K2)(N=>(oe=Ar(oe,N),St(oe,We),oe),"updateSiteConfig"),xt=(0,L.K2)(()=>Ar({},oe),"getSiteConfig"),it=(0,L.K2)(N=>(Ot(N),Ar(Ct,N),rt()),"setConfig"),rt=(0,L.K2)(()=>Ar({},Ct),"getConfig"),Et=(0,L.K2)(N=>{N&&(["secure",...oe.secure??[]].forEach(Vt=>{Object.hasOwn(N,Vt)&&(L.Rm.debug(`Denied attempt to modify a secure key ${Vt}`,N[Vt]),delete N[Vt])}),Object.keys(N).forEach(Vt=>{Vt.startsWith("__")&&delete N[Vt]}),Object.keys(N).forEach(Vt=>{"string"==typeof N[Vt]&&(N[Vt].includes("<")||N[Vt].includes(">")||N[Vt].includes("url(data:"))&&delete N[Vt],"object"==typeof N[Vt]&&Et(N[Vt])}))},"sanitize"),ut=(0,L.K2)(N=>{xe(N),N.fontFamily&&!N.themeVariables?.fontFamily&&(N.themeVariables={...N.themeVariables,fontFamily:N.fontFamily}),We.push(N),St(oe,We)},"addDirective"),It=(0,L.K2)((N=oe)=>{St(N,We=[])},"reset"),G={LAZY_LOAD_DEPRECATED:"The configuration options lazyLoadedDiagrams and loadExternalDiagramsAtStartup are deprecated. Please use registerExternalDiagrams instead."},st={},Ce=(0,L.K2)(N=>{st[N]||(L.Rm.warn(G[N]),st[N]=!0)},"issueWarning"),Ot=(0,L.K2)(N=>{N&&(N.lazyLoadedDiagrams||N.loadExternalDiagramsAtStartup)&&Ce("LAZY_LOAD_DEPRECATED")},"checkConfig"),Jt=(0,L.K2)(()=>{let N={};qe&&(N=Ar(N,qe));for(const Vt of We)N=Ar(N,Vt);return N},"getUserDefinedConfig"),fe=/<br\s*\/?>/gi,Be=(0,L.K2)(N=>N?ke(N).replace(/\\n/g,"#br#").split("#br#"):[""],"getRows"),Ze=(()=>{let N=!1;return()=>{N||(ye(),N=!0)}})();function ye(){const N="data-temp-href-target";Rt.A.addHook("beforeSanitizeAttributes",Vt=>{"A"===Vt.tagName&&Vt.hasAttribute("target")&&Vt.setAttribute(N,Vt.getAttribute("target")??"")}),Rt.A.addHook("afterSanitizeAttributes",Vt=>{"A"===Vt.tagName&&Vt.hasAttribute(N)&&(Vt.setAttribute("target",Vt.getAttribute(N)??""),Vt.removeAttribute(N),"_blank"===Vt.getAttribute("target")&&Vt.setAttribute("rel","noopener"))})}(0,L.K2)(ye,"setupDompurifyHooks");var kr=(0,L.K2)(N=>(Ze(),Rt.A.sanitize(N)),"removeScript"),ur=(0,L.K2)((N,Vt)=>{if(!1!==Vt.flowchart?.htmlLabels){const Ke=Vt.securityLevel;"antiscript"===Ke||"strict"===Ke?N=kr(N):"loose"!==Ke&&(N=(N=(N=ke(N)).replace(/</g,"&lt;").replace(/>/g,"&gt;")).replace(/=/g,"&equals;"),N=ce(N))}return N},"sanitizeMore"),Kt=(0,L.K2)((N,Vt)=>N&&(Vt.dompurifyConfig?Rt.A.sanitize(ur(N,Vt),Vt.dompurifyConfig).toString():Rt.A.sanitize(ur(N,Vt),{FORBID_TAGS:["style"]}).toString()),"sanitizeText"),Pe=(0,L.K2)((N,Vt)=>"string"==typeof N?Kt(N,Vt):N.flat().map(Ke=>Kt(Ke,Vt)),"sanitizeTextOrArray"),ir=(0,L.K2)(N=>fe.test(N),"hasBreaks"),me=(0,L.K2)(N=>N.split(fe),"splitBreaks"),ce=(0,L.K2)(N=>N.replace(/#br#/g,"<br/>"),"placeholderToBreak"),ke=(0,L.K2)(N=>N.replace(fe,"#br#"),"breakToPlaceholder"),Te=(0,L.K2)(N=>{let Vt="";return N&&(Vt=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,Vt=CSS.escape(Vt)),Vt},"getUrl"),er=(0,L.K2)(N=>!(!1===N||["false","null","0"].includes(String(N).trim().toLowerCase())),"evaluate"),Xe=(0,L.K2)(function(...N){const Vt=N.filter(Ke=>!isNaN(Ke));return Math.max(...Vt)},"getMax"),Ir=(0,L.K2)(function(...N){const Vt=N.filter(Ke=>!isNaN(Ke));return Math.min(...Vt)},"getMin"),Ee=(0,L.K2)(function(N){const Vt=N.split(/(,)/),Ke=[];for(let rr=0;rr<Vt.length;rr++){let ia=Vt[rr];if(","===ia&&rr>0&&rr+1<Vt.length){const hr=Vt[rr-1],ga=Vt[rr+1];nr(hr,ga)&&(ia=hr+","+ga,rr++,Ke.pop())}Ke.push(te(ia))}return Ke.join("")},"parseGenericTypes"),qr=(0,L.K2)((N,Vt)=>Math.max(0,N.split(Vt).length-1),"countOccurrence"),nr=(0,L.K2)((N,Vt)=>{const Ke=qr(N,"~"),rr=qr(Vt,"~");return 1===Ke&&1===rr},"shouldCombineSets"),te=(0,L.K2)(N=>{const Vt=qr(N,"~");let Ke=!1;if(Vt<=1)return N;Vt%2!=0&&N.startsWith("~")&&(N=N.substring(1),Ke=!0);const rr=[...N];let ia=rr.indexOf("~"),hr=rr.lastIndexOf("~");for(;-1!==ia&&-1!==hr&&ia!==hr;)rr[ia]="<",rr[hr]=">",ia=rr.indexOf("~"),hr=rr.lastIndexOf("~");return Ke&&rr.unshift("~"),rr.join("")},"processSet"),ne=(0,L.K2)(()=>void 0!==window.MathMLElement,"isMathMLSupported"),Le=/\$\$(.*)\$\$/g,tr=(0,L.K2)(N=>(N.match(Le)?.length??0)>0,"hasKatex"),g=(0,L.K2)(function(){var N=(0,lt.A)(function*(Vt,Ke){const rr=document.createElement("div");rr.innerHTML=yield E(Vt,Ke),rr.id="katex-temp",rr.style.visibility="hidden",rr.style.position="absolute",rr.style.top="0",document.querySelector("body")?.insertAdjacentElement("beforeend",rr);const hr={width:rr.clientWidth,height:rr.clientHeight};return rr.remove(),hr});return function(Vt,Ke){return N.apply(this,arguments)}}(),"calculateMathMLDimensions"),y=(0,L.K2)(function(){var N=(0,lt.A)(function*(Vt,Ke){if(!tr(Vt))return Vt;if(!(ne()||Ke.legacyMathML||Ke.forceLegacyMathML))return Vt.replace(Le,"MathML is unsupported in this environment.");{const{default:rr}=yield B.e(256).then(B.bind(B,97256)),ia=Ke.forceLegacyMathML||!ne()&&Ke.legacyMathML?"htmlAndMathml":"mathml";return Vt.split(fe).map(hr=>tr(hr)?`<div style="display: flex; align-items: center; justify-content: center; white-space: nowrap;">${hr}</div>`:`<div>${hr}</div>`).join("").replace(Le,(hr,ga)=>rr.renderToString(ga,{throwOnError:!0,displayMode:!0,output:ia}).replace(/\n/g," ").replace(/<annotation.*<\/annotation>/g,""))}});return function(Vt,Ke){return N.apply(this,arguments)}}(),"renderKatexUnsanitized"),E=(0,L.K2)(function(){var N=(0,lt.A)(function*(Vt,Ke){return Kt(yield y(Vt,Ke),Ke)});return function(Vt,Ke){return N.apply(this,arguments)}}(),"renderKatexSanitized"),P={getRows:Be,sanitizeText:Kt,sanitizeTextOrArray:Pe,hasBreaks:ir,splitBreaks:me,lineBreakRegex:fe,removeScript:kr,getUrl:Te,evaluate:er,getMax:Xe,getMin:Ir},b=(0,L.K2)(function(N,Vt){for(let Ke of Vt)N.attr(Ke[0],Ke[1])},"d3Attrs"),z=(0,L.K2)(function(N,Vt,Ke){let rr=new Map;return Ke?(rr.set("width","100%"),rr.set("style",`max-width: ${Vt}px;`)):(rr.set("height",N),rr.set("width",Vt)),rr},"calculateSvgSizeAttrs"),p=(0,L.K2)(function(N,Vt,Ke,rr){const ia=z(Vt,Ke,rr);b(N,ia)},"configureSvgSize"),x=(0,L.K2)(function(N,Vt,Ke,rr){const ia=Vt.node().getBBox(),hr=ia.width,ga=ia.height;L.Rm.info(`SVG bounds: ${hr}x${ga}`,ia);let or=0,_a=0;L.Rm.info(`Graph bounds: ${or}x${_a}`,N),or=hr+2*Ke,_a=ga+2*Ke,L.Rm.info(`Calculated bounds: ${or}x${_a}`),p(Vt,_a,or,rr),Vt.attr("viewBox",`${ia.x-Ke} ${ia.y-Ke} ${ia.width+2*Ke} ${ia.height+2*Ke}`)},"setupGraphViewbox"),C={},w=(0,L.K2)((N,Vt,Ke)=>{let rr="";return N in C&&C[N]?rr=C[N](Ke):L.Rm.warn(`No theme found for ${N}`),` & {\n    font-family: ${Ke.fontFamily};\n    font-size: ${Ke.fontSize};\n    fill: ${Ke.textColor}\n  }\n  @keyframes edge-animation-frame {\n    from {\n      stroke-dashoffset: 0;\n    }\n  }\n  @keyframes dash {\n    to {\n      stroke-dashoffset: 0;\n    }\n  }\n  & .edge-animation-slow {\n    stroke-dasharray: 9,5 !important;\n    stroke-dashoffset: 900;\n    animation: dash 50s linear infinite;\n    stroke-linecap: round;\n  }\n  & .edge-animation-fast {\n    stroke-dasharray: 9,5 !important;\n    stroke-dashoffset: 900;\n    animation: dash 20s linear infinite;\n    stroke-linecap: round;\n  }\n  /* Classes common for multiple diagrams */\n\n  & .error-icon {\n    fill: ${Ke.errorBkgColor};\n  }\n  & .error-text {\n    fill: ${Ke.errorTextColor};\n    stroke: ${Ke.errorTextColor};\n  }\n\n  & .edge-thickness-normal {\n    stroke-width: 1px;\n  }\n  & .edge-thickness-thick {\n    stroke-width: 3.5px\n  }\n  & .edge-pattern-solid {\n    stroke-dasharray: 0;\n  }\n  & .edge-thickness-invisible {\n    stroke-width: 0;\n    fill: none;\n  }\n  & .edge-pattern-dashed{\n    stroke-dasharray: 3;\n  }\n  .edge-pattern-dotted {\n    stroke-dasharray: 2;\n  }\n\n  & .marker {\n    fill: ${Ke.lineColor};\n    stroke: ${Ke.lineColor};\n  }\n  & .marker.cross {\n    stroke: ${Ke.lineColor};\n  }\n\n  & svg {\n    font-family: ${Ke.fontFamily};\n    font-size: ${Ke.fontSize};\n  }\n   & p {\n    margin: 0\n   }\n\n  ${rr}\n\n  ${Vt}\n`},"getStyles"),$=(0,L.K2)((N,Vt)=>{void 0!==Vt&&(C[N]=Vt)},"addStylesForDiagram"),ct=w,kt={};(0,L.VA)(kt,{clear:()=>je,getAccDescription:()=>sr,getAccTitle:()=>Cr,getDiagramTitle:()=>He,setAccDescription:()=>cr,setAccTitle:()=>ze,setDiagramTitle:()=>$e});var Ut="",Ht="",zt="",ue=(0,L.K2)(N=>Kt(N,rt()),"sanitizeText"),je=(0,L.K2)(()=>{Ut="",zt="",Ht=""},"clear"),ze=(0,L.K2)(N=>{Ut=ue(N).replace(/^\s+/g,"")},"setAccTitle"),Cr=(0,L.K2)(()=>Ut,"getAccTitle"),cr=(0,L.K2)(N=>{zt=ue(N).replace(/\n\s+/g,"\n")},"setAccDescription"),sr=(0,L.K2)(()=>zt,"getAccDescription"),$e=(0,L.K2)(N=>{Ht=ue(N)},"setDiagramTitle"),He=(0,L.K2)(()=>Ht,"getDiagramTitle"),Pr=L.Rm,wr=L.He,Vr=rt,xr=it,Ba=Re,Zr=(0,L.K2)(N=>Kt(N,Vr()),"sanitizeText"),Oa=x,Qr=(0,L.K2)(()=>kt,"getCommonDb"),ra={},Xr=(0,L.K2)((N,Vt,Ke)=>{ra[N]&&Pr.warn(`Diagram with id ${N} already registered. Overwriting.`),ra[N]=Vt,Ke&&mr(N,Ke),$(N,Vt.styles),Vt.injectUtils?.(Pr,wr,Vr,Zr,Oa,Qr(),()=>{})},"registerDiagram"),Rr=(0,L.K2)(N=>{if(N in ra)return ra[N];throw new Tr(N)},"getDiagram"),Tr=(class extends Error{constructor(N){super(`Diagram ${N} not found.`)}static#t=bt=()=>((0,ee.A)(this,"DiagramNotFoundError"),(0,L.K2)(this,"DiagramNotFoundError"),this)},bt())},79158:(ti,_r,B)=>{"use strict";B.r(_r),B.d(_r,{diagram:()=>Ge});var vr,lt=B(89204),ee=B(45027),L=B(5675),D=B(8086),Rt=B(72271),bt=(B(98954),B(36384),B(87452),B(32239),B(19753),B(59355),B(52052)),Xt=B(79006),j=B(32303),fr=B(40622),Fe=B(79687),zr=function(){var W=(0,j.K2)(function(ce,ke,Te,er){for(Te=Te||{},er=ce.length;er--;Te[ce[er]]=ke);return Te},"o"),ft=[6,8,10,22,24,26,28,33,34,35,36,37,40,43,44,50],Bt=[1,10],_e=[1,11],Z=[1,12],ae=[1,13],S=[1,20],re=[1,21],Pt=[1,22],qt=[1,23],V=[1,24],pt=[1,19],H=[1,25],Nt=[1,26],wt=[1,18],Wt=[1,33],xe=[1,34],le=[1,35],Re=[1,36],oe=[1,37],qe=[6,8,10,13,15,17,20,21,22,24,26,28,33,34,35,36,37,40,43,44,50,63,64,65,66,67],We=[1,42],Ct=[1,43],St=[1,52],R=[40,50,68,69],O=[1,63],et=[1,61],xt=[1,58],it=[1,62],rt=[1,64],Et=[6,8,10,13,17,22,24,26,28,33,34,35,36,37,40,41,42,43,44,48,49,50,63,64,65,66,67],ut=[63,64,65,66,67],It=[1,81],G=[1,80],st=[1,78],Ce=[1,79],Ot=[6,10,42,47],Jt=[6,10,13,41,42,47,48,49],fe=[1,89],Be=[1,88],Ze=[1,87],ye=[19,56],kr=[1,98],ur=[1,97],Kt=[19,56,58,60],Pe={trace:(0,j.K2)(function(){},"trace"),yy:{},symbols_:{error:2,start:3,ER_DIAGRAM:4,document:5,EOF:6,line:7,SPACE:8,statement:9,NEWLINE:10,entityName:11,relSpec:12,COLON:13,role:14,STYLE_SEPARATOR:15,idList:16,BLOCK_START:17,attributes:18,BLOCK_STOP:19,SQS:20,SQE:21,title:22,title_value:23,acc_title:24,acc_title_value:25,acc_descr:26,acc_descr_value:27,acc_descr_multiline_value:28,direction:29,classDefStatement:30,classStatement:31,styleStatement:32,direction_tb:33,direction_bt:34,direction_rl:35,direction_lr:36,CLASSDEF:37,stylesOpt:38,separator:39,UNICODE_TEXT:40,STYLE_TEXT:41,COMMA:42,CLASS:43,STYLE:44,style:45,styleComponent:46,SEMI:47,NUM:48,BRKT:49,ENTITY_NAME:50,attribute:51,attributeType:52,attributeName:53,attributeKeyTypeList:54,attributeComment:55,ATTRIBUTE_WORD:56,attributeKeyType:57,",":58,ATTRIBUTE_KEY:59,COMMENT:60,cardinality:61,relType:62,ZERO_OR_ONE:63,ZERO_OR_MORE:64,ONE_OR_MORE:65,ONLY_ONE:66,MD_PARENT:67,NON_IDENTIFYING:68,IDENTIFYING:69,WORD:70,$accept:0,$end:1},terminals_:{2:"error",4:"ER_DIAGRAM",6:"EOF",8:"SPACE",10:"NEWLINE",13:"COLON",15:"STYLE_SEPARATOR",17:"BLOCK_START",19:"BLOCK_STOP",20:"SQS",21:"SQE",22:"title",23:"title_value",24:"acc_title",25:"acc_title_value",26:"acc_descr",27:"acc_descr_value",28:"acc_descr_multiline_value",33:"direction_tb",34:"direction_bt",35:"direction_rl",36:"direction_lr",37:"CLASSDEF",40:"UNICODE_TEXT",41:"STYLE_TEXT",42:"COMMA",43:"CLASS",44:"STYLE",47:"SEMI",48:"NUM",49:"BRKT",50:"ENTITY_NAME",56:"ATTRIBUTE_WORD",58:",",59:"ATTRIBUTE_KEY",60:"COMMENT",63:"ZERO_OR_ONE",64:"ZERO_OR_MORE",65:"ONE_OR_MORE",66:"ONLY_ONE",67:"MD_PARENT",68:"NON_IDENTIFYING",69:"IDENTIFYING",70:"WORD"},productions_:[0,[3,3],[5,0],[5,2],[7,2],[7,1],[7,1],[7,1],[9,5],[9,9],[9,7],[9,7],[9,4],[9,6],[9,3],[9,5],[9,1],[9,3],[9,7],[9,9],[9,6],[9,8],[9,4],[9,6],[9,2],[9,2],[9,2],[9,1],[9,1],[9,1],[9,1],[9,1],[29,1],[29,1],[29,1],[29,1],[30,4],[16,1],[16,1],[16,3],[16,3],[31,3],[32,4],[38,1],[38,3],[45,1],[45,2],[39,1],[39,1],[39,1],[46,1],[46,1],[46,1],[46,1],[11,1],[11,1],[18,1],[18,2],[51,2],[51,3],[51,3],[51,4],[52,1],[53,1],[54,1],[54,3],[57,1],[55,1],[12,3],[61,1],[61,1],[61,1],[61,1],[61,1],[62,1],[62,1],[14,1],[14,1],[14,1]],performAction:(0,j.K2)(function(ke,Te,er,Xe,Ir,Ee,qr){var nr=Ee.length-1;switch(Ir){case 1:break;case 2:case 6:case 7:this.$=[];break;case 3:Ee[nr-1].push(Ee[nr]),this.$=Ee[nr-1];break;case 4:case 5:case 55:case 78:case 62:case 63:case 66:this.$=Ee[nr];break;case 8:Xe.addEntity(Ee[nr-4]),Xe.addEntity(Ee[nr-2]),Xe.addRelationship(Ee[nr-4],Ee[nr],Ee[nr-2],Ee[nr-3]);break;case 9:Xe.addEntity(Ee[nr-8]),Xe.addEntity(Ee[nr-4]),Xe.addRelationship(Ee[nr-8],Ee[nr],Ee[nr-4],Ee[nr-5]),Xe.setClass([Ee[nr-8]],Ee[nr-6]),Xe.setClass([Ee[nr-4]],Ee[nr-2]);break;case 10:Xe.addEntity(Ee[nr-6]),Xe.addEntity(Ee[nr-2]),Xe.addRelationship(Ee[nr-6],Ee[nr],Ee[nr-2],Ee[nr-3]),Xe.setClass([Ee[nr-6]],Ee[nr-4]);break;case 11:Xe.addEntity(Ee[nr-6]),Xe.addEntity(Ee[nr-4]),Xe.addRelationship(Ee[nr-6],Ee[nr],Ee[nr-4],Ee[nr-5]),Xe.setClass([Ee[nr-4]],Ee[nr-2]);break;case 12:Xe.addEntity(Ee[nr-3]),Xe.addAttributes(Ee[nr-3],Ee[nr-1]);break;case 13:Xe.addEntity(Ee[nr-5]),Xe.addAttributes(Ee[nr-5],Ee[nr-1]),Xe.setClass([Ee[nr-5]],Ee[nr-3]);break;case 14:Xe.addEntity(Ee[nr-2]);break;case 15:Xe.addEntity(Ee[nr-4]),Xe.setClass([Ee[nr-4]],Ee[nr-2]);break;case 16:Xe.addEntity(Ee[nr]);break;case 17:Xe.addEntity(Ee[nr-2]),Xe.setClass([Ee[nr-2]],Ee[nr]);break;case 18:Xe.addEntity(Ee[nr-6],Ee[nr-4]),Xe.addAttributes(Ee[nr-6],Ee[nr-1]);break;case 19:Xe.addEntity(Ee[nr-8],Ee[nr-6]),Xe.addAttributes(Ee[nr-8],Ee[nr-1]),Xe.setClass([Ee[nr-8]],Ee[nr-3]);break;case 20:Xe.addEntity(Ee[nr-5],Ee[nr-3]);break;case 21:Xe.addEntity(Ee[nr-7],Ee[nr-5]),Xe.setClass([Ee[nr-7]],Ee[nr-2]);break;case 22:Xe.addEntity(Ee[nr-3],Ee[nr-1]);break;case 23:Xe.addEntity(Ee[nr-5],Ee[nr-3]),Xe.setClass([Ee[nr-5]],Ee[nr]);break;case 24:case 25:this.$=Ee[nr].trim(),Xe.setAccTitle(this.$);break;case 26:case 27:this.$=Ee[nr].trim(),Xe.setAccDescription(this.$);break;case 32:Xe.setDirection("TB");break;case 33:Xe.setDirection("BT");break;case 34:Xe.setDirection("RL");break;case 35:Xe.setDirection("LR");break;case 36:this.$=Ee[nr-3],Xe.addClass(Ee[nr-2],Ee[nr-1]);break;case 37:case 38:case 56:case 64:case 43:this.$=[Ee[nr]];break;case 39:case 40:this.$=Ee[nr-2].concat([Ee[nr]]);break;case 41:this.$=Ee[nr-2],Xe.setClass(Ee[nr-1],Ee[nr]);break;case 42:this.$=Ee[nr-3],Xe.addCssStyles(Ee[nr-2],Ee[nr-1]);break;case 44:case 65:Ee[nr-2].push(Ee[nr]),this.$=Ee[nr-2];break;case 46:this.$=Ee[nr-1]+Ee[nr];break;case 54:case 76:case 77:case 67:this.$=Ee[nr].replace(/"/g,"");break;case 57:Ee[nr].push(Ee[nr-1]),this.$=Ee[nr];break;case 58:this.$={type:Ee[nr-1],name:Ee[nr]};break;case 59:this.$={type:Ee[nr-2],name:Ee[nr-1],keys:Ee[nr]};break;case 60:this.$={type:Ee[nr-2],name:Ee[nr-1],comment:Ee[nr]};break;case 61:this.$={type:Ee[nr-3],name:Ee[nr-2],keys:Ee[nr-1],comment:Ee[nr]};break;case 68:this.$={cardA:Ee[nr],relType:Ee[nr-1],cardB:Ee[nr-2]};break;case 69:this.$=Xe.Cardinality.ZERO_OR_ONE;break;case 70:this.$=Xe.Cardinality.ZERO_OR_MORE;break;case 71:this.$=Xe.Cardinality.ONE_OR_MORE;break;case 72:this.$=Xe.Cardinality.ONLY_ONE;break;case 73:this.$=Xe.Cardinality.MD_PARENT;break;case 74:this.$=Xe.Identification.NON_IDENTIFYING;break;case 75:this.$=Xe.Identification.IDENTIFYING}},"anonymous"),table:[{3:1,4:[1,2]},{1:[3]},W(ft,[2,2],{5:3}),{6:[1,4],7:5,8:[1,6],9:7,10:[1,8],11:9,22:Bt,24:_e,26:Z,28:ae,29:14,30:15,31:16,32:17,33:S,34:re,35:Pt,36:qt,37:V,40:pt,43:H,44:Nt,50:wt},W(ft,[2,7],{1:[2,1]}),W(ft,[2,3]),{9:27,11:9,22:Bt,24:_e,26:Z,28:ae,29:14,30:15,31:16,32:17,33:S,34:re,35:Pt,36:qt,37:V,40:pt,43:H,44:Nt,50:wt},W(ft,[2,5]),W(ft,[2,6]),W(ft,[2,16],{12:28,61:32,15:[1,29],17:[1,30],20:[1,31],63:Wt,64:xe,65:le,66:Re,67:oe}),{23:[1,38]},{25:[1,39]},{27:[1,40]},W(ft,[2,27]),W(ft,[2,28]),W(ft,[2,29]),W(ft,[2,30]),W(ft,[2,31]),W(qe,[2,54]),W(qe,[2,55]),W(ft,[2,32]),W(ft,[2,33]),W(ft,[2,34]),W(ft,[2,35]),{16:41,40:We,41:Ct},{16:44,40:We,41:Ct},{16:45,40:We,41:Ct},W(ft,[2,4]),{11:46,40:pt,50:wt},{16:47,40:We,41:Ct},{18:48,19:[1,49],51:50,52:51,56:St},{11:53,40:pt,50:wt},{62:54,68:[1,55],69:[1,56]},W(R,[2,69]),W(R,[2,70]),W(R,[2,71]),W(R,[2,72]),W(R,[2,73]),W(ft,[2,24]),W(ft,[2,25]),W(ft,[2,26]),{13:O,38:57,41:et,42:xt,45:59,46:60,48:it,49:rt},W(Et,[2,37]),W(Et,[2,38]),{16:65,40:We,41:Ct,42:xt},{13:O,38:66,41:et,42:xt,45:59,46:60,48:it,49:rt},{13:[1,67],15:[1,68]},W(ft,[2,17],{61:32,12:69,17:[1,70],42:xt,63:Wt,64:xe,65:le,66:Re,67:oe}),{19:[1,71]},W(ft,[2,14]),{18:72,19:[2,56],51:50,52:51,56:St},{53:73,56:[1,74]},{56:[2,62]},{21:[1,75]},{61:76,63:Wt,64:xe,65:le,66:Re,67:oe},W(ut,[2,74]),W(ut,[2,75]),{6:It,10:G,39:77,42:st,47:Ce},{40:[1,82],41:[1,83]},W(Ot,[2,43],{46:84,13:O,41:et,48:it,49:rt}),W(Jt,[2,45]),W(Jt,[2,50]),W(Jt,[2,51]),W(Jt,[2,52]),W(Jt,[2,53]),W(ft,[2,41],{42:xt}),{6:It,10:G,39:85,42:st,47:Ce},{14:86,40:fe,50:Be,70:Ze},{16:90,40:We,41:Ct},{11:91,40:pt,50:wt},{18:92,19:[1,93],51:50,52:51,56:St},W(ft,[2,12]),{19:[2,57]},W(ye,[2,58],{54:94,55:95,57:96,59:kr,60:ur}),W([19,56,59,60],[2,63]),W(ft,[2,22],{15:[1,100],17:[1,99]}),W([40,50],[2,68]),W(ft,[2,36]),{13:O,41:et,45:101,46:60,48:it,49:rt},W(ft,[2,47]),W(ft,[2,48]),W(ft,[2,49]),W(Et,[2,39]),W(Et,[2,40]),W(Jt,[2,46]),W(ft,[2,42]),W(ft,[2,8]),W(ft,[2,76]),W(ft,[2,77]),W(ft,[2,78]),{13:[1,102],42:xt},{13:[1,104],15:[1,103]},{19:[1,105]},W(ft,[2,15]),W(ye,[2,59],{55:106,58:[1,107],60:ur}),W(ye,[2,60]),W(Kt,[2,64]),W(ye,[2,67]),W(Kt,[2,66]),{18:108,19:[1,109],51:50,52:51,56:St},{16:110,40:We,41:Ct},W(Ot,[2,44],{46:84,13:O,41:et,48:it,49:rt}),{14:111,40:fe,50:Be,70:Ze},{16:112,40:We,41:Ct},{14:113,40:fe,50:Be,70:Ze},W(ft,[2,13]),W(ye,[2,61]),{57:114,59:kr},{19:[1,115]},W(ft,[2,20]),W(ft,[2,23],{17:[1,116],42:xt}),W(ft,[2,11]),{13:[1,117],42:xt},W(ft,[2,10]),W(Kt,[2,65]),W(ft,[2,18]),{18:118,19:[1,119],51:50,52:51,56:St},{14:120,40:fe,50:Be,70:Ze},{19:[1,121]},W(ft,[2,21]),W(ft,[2,9]),W(ft,[2,19])],defaultActions:{52:[2,62],72:[2,57]},parseError:(0,j.K2)(function(ke,Te){if(!Te.recoverable){var er=new Error(ke);throw er.hash=Te,er}this.trace(ke)},"parseError"),parse:(0,j.K2)(function(ke){var Te=this,er=[0],Xe=[],Ir=[null],Ee=[],qr=this.table,nr="",te=0,ne=0,Le=0,y=Ee.slice.call(arguments,1),E=Object.create(this.lexer),P={yy:{}};for(var b in this.yy)Object.prototype.hasOwnProperty.call(this.yy,b)&&(P.yy[b]=this.yy[b]);E.setInput(ke,P.yy),P.yy.lexer=E,P.yy.parser=this,typeof E.yylloc>"u"&&(E.yylloc={});var z=E.yylloc;Ee.push(z);var p=E.options&&E.options.ranges;function C(){var sr;return"number"!=typeof(sr=Xe.pop()||E.lex()||1)&&(sr instanceof Array&&(sr=(Xe=sr).pop()),sr=Te.symbols_[sr]||sr),sr}this.parseError="function"==typeof P.yy.parseError?P.yy.parseError:Object.getPrototypeOf(this).parseError,(0,j.K2)(function x(sr){er.length=er.length-2*sr,Ir.length=Ir.length-sr,Ee.length=Ee.length-sr},"popStack"),(0,j.K2)(C,"lex");for(var w,$,ct,kt,Ht,ue,je,Cr,zt={};;){if(this.defaultActions[ct=er[er.length-1]]?kt=this.defaultActions[ct]:((null===w||typeof w>"u")&&(w=C()),kt=qr[ct]&&qr[ct][w]),typeof kt>"u"||!kt.length||!kt[0]){var cr;for(ue in Cr=[],qr[ct])this.terminals_[ue]&&ue>2&&Cr.push("'"+this.terminals_[ue]+"'");cr=E.showPosition?"Parse error on line "+(te+1)+":\n"+E.showPosition()+"\nExpecting "+Cr.join(", ")+", got '"+(this.terminals_[w]||w)+"'":"Parse error on line "+(te+1)+": Unexpected "+(1==w?"end of input":"'"+(this.terminals_[w]||w)+"'"),this.parseError(cr,{text:E.match,token:this.terminals_[w]||w,line:E.yylineno,loc:z,expected:Cr})}if(kt[0]instanceof Array&&kt.length>1)throw new Error("Parse Error: multiple actions possible at state: "+ct+", token: "+w);switch(kt[0]){case 1:er.push(w),Ir.push(E.yytext),Ee.push(E.yylloc),er.push(kt[1]),w=null,$?(w=$,$=null):(ne=E.yyleng,nr=E.yytext,te=E.yylineno,z=E.yylloc,Le>0&&Le--);break;case 2:if(zt.$=Ir[Ir.length-(je=this.productions_[kt[1]][1])],zt._$={first_line:Ee[Ee.length-(je||1)].first_line,last_line:Ee[Ee.length-1].last_line,first_column:Ee[Ee.length-(je||1)].first_column,last_column:Ee[Ee.length-1].last_column},p&&(zt._$.range=[Ee[Ee.length-(je||1)].range[0],Ee[Ee.length-1].range[1]]),typeof(Ht=this.performAction.apply(zt,[nr,ne,te,P.yy,kt[1],Ir,Ee].concat(y)))<"u")return Ht;je&&(er=er.slice(0,-1*je*2),Ir=Ir.slice(0,-1*je),Ee=Ee.slice(0,-1*je)),er.push(this.productions_[kt[1]][0]),Ir.push(zt.$),Ee.push(zt._$),er.push(qr[er[er.length-2]][er[er.length-1]]);break;case 3:return!0}}return!0},"parse")};function me(){this.yy={}}return Pe.lexer=function(){return{EOF:1,parseError:(0,j.K2)(function(Te,er){if(!this.yy.parser)throw new Error(Te);this.yy.parser.parseError(Te,er)},"parseError"),setInput:(0,j.K2)(function(ke,Te){return this.yy=Te||this.yy||{},this._input=ke,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},"setInput"),input:(0,j.K2)(function(){var ke=this._input[0];return this.yytext+=ke,this.yyleng++,this.offset++,this.match+=ke,this.matched+=ke,ke.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),ke},"input"),unput:(0,j.K2)(function(ke){var Te=ke.length,er=ke.split(/(?:\r\n?|\n)/g);this._input=ke+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-Te),this.offset-=Te;var Xe=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),er.length-1&&(this.yylineno-=er.length-1);var Ir=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:er?(er.length===Xe.length?this.yylloc.first_column:0)+Xe[Xe.length-er.length].length-er[0].length:this.yylloc.first_column-Te},this.options.ranges&&(this.yylloc.range=[Ir[0],Ir[0]+this.yyleng-Te]),this.yyleng=this.yytext.length,this},"unput"),more:(0,j.K2)(function(){return this._more=!0,this},"more"),reject:(0,j.K2)(function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},"reject"),less:(0,j.K2)(function(ke){this.unput(this.match.slice(ke))},"less"),pastInput:(0,j.K2)(function(){var ke=this.matched.substr(0,this.matched.length-this.match.length);return(ke.length>20?"...":"")+ke.substr(-20).replace(/\n/g,"")},"pastInput"),upcomingInput:(0,j.K2)(function(){var ke=this.match;return ke.length<20&&(ke+=this._input.substr(0,20-ke.length)),(ke.substr(0,20)+(ke.length>20?"...":"")).replace(/\n/g,"")},"upcomingInput"),showPosition:(0,j.K2)(function(){var ke=this.pastInput(),Te=new Array(ke.length+1).join("-");return ke+this.upcomingInput()+"\n"+Te+"^"},"showPosition"),test_match:(0,j.K2)(function(ke,Te){var er,Xe,Ir;if(this.options.backtrack_lexer&&(Ir={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(Ir.yylloc.range=this.yylloc.range.slice(0))),(Xe=ke[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=Xe.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:Xe?Xe[Xe.length-1].length-Xe[Xe.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+ke[0].length},this.yytext+=ke[0],this.match+=ke[0],this.matches=ke,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(ke[0].length),this.matched+=ke[0],er=this.performAction.call(this,this.yy,this,Te,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),er)return er;if(this._backtrack){for(var Ee in Ir)this[Ee]=Ir[Ee];return!1}return!1},"test_match"),next:(0,j.K2)(function(){if(this.done)return this.EOF;var ke,Te,er,Xe;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var Ir=this._currentRules(),Ee=0;Ee<Ir.length;Ee++)if((er=this._input.match(this.rules[Ir[Ee]]))&&(!Te||er[0].length>Te[0].length)){if(Te=er,Xe=Ee,this.options.backtrack_lexer){if(!1!==(ke=this.test_match(er,Ir[Ee])))return ke;if(this._backtrack){Te=!1;continue}return!1}if(!this.options.flex)break}return Te?!1!==(ke=this.test_match(Te,Ir[Xe]))&&ke:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},"next"),lex:(0,j.K2)(function(){return this.next()||this.lex()},"lex"),begin:(0,j.K2)(function(Te){this.conditionStack.push(Te)},"begin"),popState:(0,j.K2)(function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},"popState"),_currentRules:(0,j.K2)(function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},"_currentRules"),topState:(0,j.K2)(function(Te){return(Te=this.conditionStack.length-1-Math.abs(Te||0))>=0?this.conditionStack[Te]:"INITIAL"},"topState"),pushState:(0,j.K2)(function(Te){this.begin(Te)},"pushState"),stateStackSize:(0,j.K2)(function(){return this.conditionStack.length},"stateStackSize"),options:{"case-insensitive":!0},performAction:(0,j.K2)(function(Te,er,Xe,Ir){switch(Xe){case 0:return this.begin("acc_title"),24;case 1:return this.popState(),"acc_title_value";case 2:return this.begin("acc_descr"),26;case 3:return this.popState(),"acc_descr_value";case 4:this.begin("acc_descr_multiline");break;case 5:this.popState();break;case 6:return"acc_descr_multiline_value";case 7:return 33;case 8:return 34;case 9:return 35;case 10:return 36;case 11:return 10;case 12:case 23:case 28:case 35:break;case 13:return 8;case 14:return 50;case 15:return 70;case 16:return 4;case 17:return this.begin("block"),17;case 18:case 19:case 38:return 49;case 20:case 37:return 42;case 21:return 15;case 22:case 36:return 13;case 24:return 59;case 25:case 26:return 56;case 27:return 60;case 29:return this.popState(),19;case 30:case 73:return er.yytext[0];case 31:return 20;case 32:return 21;case 33:return this.begin("style"),44;case 34:return this.popState(),10;case 39:return this.begin("style"),37;case 40:return 43;case 41:case 45:case 46:case 59:return 63;case 42:case 43:case 44:case 52:case 54:case 61:return 65;case 47:case 48:case 49:case 50:case 51:case 53:case 60:return 64;case 55:case 56:case 57:case 58:return 66;case 62:return 67;case 63:case 66:case 67:case 68:return 68;case 64:case 65:return 69;case 69:return 41;case 70:return 47;case 71:return 40;case 72:return 48;case 74:return 6}},"anonymous"),rules:[/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:.*direction\s+TB[^\n]*)/i,/^(?:.*direction\s+BT[^\n]*)/i,/^(?:.*direction\s+RL[^\n]*)/i,/^(?:.*direction\s+LR[^\n]*)/i,/^(?:[\n]+)/i,/^(?:\s+)/i,/^(?:[\s]+)/i,/^(?:"[^"%\r\n\v\b\\]+")/i,/^(?:"[^"]*")/i,/^(?:erDiagram\b)/i,/^(?:\{)/i,/^(?:#)/i,/^(?:#)/i,/^(?:,)/i,/^(?::::)/i,/^(?::)/i,/^(?:\s+)/i,/^(?:\b((?:PK)|(?:FK)|(?:UK))\b)/i,/^(?:([^\s]*)[~].*[~]([^\s]*))/i,/^(?:([\*A-Za-z_\u00C0-\uFFFF][A-Za-z0-9\-\_\[\]\(\)\u00C0-\uFFFF\*]*))/i,/^(?:"[^"]*")/i,/^(?:[\n]+)/i,/^(?:\})/i,/^(?:.)/i,/^(?:\[)/i,/^(?:\])/i,/^(?:style\b)/i,/^(?:[\n]+)/i,/^(?:\s+)/i,/^(?::)/i,/^(?:,)/i,/^(?:#)/i,/^(?:classDef\b)/i,/^(?:class\b)/i,/^(?:one or zero\b)/i,/^(?:one or more\b)/i,/^(?:one or many\b)/i,/^(?:1\+)/i,/^(?:\|o\b)/i,/^(?:zero or one\b)/i,/^(?:zero or more\b)/i,/^(?:zero or many\b)/i,/^(?:0\+)/i,/^(?:\}o\b)/i,/^(?:many\(0\))/i,/^(?:many\(1\))/i,/^(?:many\b)/i,/^(?:\}\|)/i,/^(?:one\b)/i,/^(?:only one\b)/i,/^(?:1\b)/i,/^(?:\|\|)/i,/^(?:o\|)/i,/^(?:o\{)/i,/^(?:\|\{)/i,/^(?:\s*u\b)/i,/^(?:\.\.)/i,/^(?:--)/i,/^(?:to\b)/i,/^(?:optionally to\b)/i,/^(?:\.-)/i,/^(?:-\.)/i,/^(?:([^\x00-\x7F]|\w|-|\*)+)/i,/^(?:;)/i,/^(?:([^\x00-\x7F]|\w|-|\*)+)/i,/^(?:[0-9])/i,/^(?:.)/i,/^(?:$)/i],conditions:{style:{rules:[34,35,36,37,38,69,70],inclusive:!1},acc_descr_multiline:{rules:[5,6],inclusive:!1},acc_descr:{rules:[3],inclusive:!1},acc_title:{rules:[1],inclusive:!1},block:{rules:[23,24,25,26,27,28,29,30],inclusive:!1},INITIAL:{rules:[0,2,4,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,31,32,33,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,71,72,73,74],inclusive:!0}}}}(),(0,j.K2)(me,"Parser"),me.prototype=Pe,Pe.Parser=me,new me}();zr.parser=zr;var br=zr,mr=(class{constructor(){this.entities=new Map,this.relationships=[],this.classes=new Map,this.direction="TB",this.Cardinality={ZERO_OR_ONE:"ZERO_OR_ONE",ZERO_OR_MORE:"ZERO_OR_MORE",ONE_OR_MORE:"ONE_OR_MORE",ONLY_ONE:"ONLY_ONE",MD_PARENT:"MD_PARENT"},this.Identification={NON_IDENTIFYING:"NON_IDENTIFYING",IDENTIFYING:"IDENTIFYING"},this.setAccTitle=Xt.SV,this.getAccTitle=Xt.iN,this.setAccDescription=Xt.EI,this.getAccDescription=Xt.m7,this.setDiagramTitle=Xt.ke,this.getDiagramTitle=Xt.ab,this.getConfig=(0,j.K2)(()=>(0,Xt.D7)().er,"getConfig"),this.clear(),this.addEntity=this.addEntity.bind(this),this.addAttributes=this.addAttributes.bind(this),this.addRelationship=this.addRelationship.bind(this),this.setDirection=this.setDirection.bind(this),this.addCssStyles=this.addCssStyles.bind(this),this.addClass=this.addClass.bind(this),this.setClass=this.setClass.bind(this),this.setAccTitle=this.setAccTitle.bind(this),this.setAccDescription=this.setAccDescription.bind(this)}addEntity(W,ft=""){return this.entities.has(W)?!this.entities.get(W)?.alias&&ft&&(this.entities.get(W).alias=ft,j.Rm.info(`Add alias '${ft}' to entity '${W}'`)):(this.entities.set(W,{id:`entity-${W}-${this.entities.size}`,label:W,attributes:[],alias:ft,shape:"erBox",look:(0,Xt.D7)().look??"default",cssClasses:"default",cssStyles:[]}),j.Rm.info("Added new entity :",W)),this.entities.get(W)}getEntity(W){return this.entities.get(W)}getEntities(){return this.entities}getClasses(){return this.classes}addAttributes(W,ft){const Bt=this.addEntity(W);let _e;for(_e=ft.length-1;_e>=0;_e--)ft[_e].keys||(ft[_e].keys=[]),ft[_e].comment||(ft[_e].comment=""),Bt.attributes.push(ft[_e]),j.Rm.debug("Added attribute ",ft[_e].name)}addRelationship(W,ft,Bt,_e){const Z=this.entities.get(W),ae=this.entities.get(Bt);if(!Z||!ae)return;const S={entityA:Z.id,roleA:ft,entityB:ae.id,relSpec:_e};this.relationships.push(S),j.Rm.debug("Added new relationship :",S)}getRelationships(){return this.relationships}getDirection(){return this.direction}setDirection(W){this.direction=W}getCompiledStyles(W){let ft=[];for(const Bt of W){const _e=this.classes.get(Bt);_e?.styles&&(ft=[...ft,..._e.styles??[]].map(Z=>Z.trim())),_e?.textStyles&&(ft=[...ft,..._e.textStyles??[]].map(Z=>Z.trim()))}return ft}addCssStyles(W,ft){for(const Bt of W){const _e=this.entities.get(Bt);if(!ft||!_e)return;for(const Z of ft)_e.cssStyles.push(Z)}}addClass(W,ft){W.forEach(Bt=>{let _e=this.classes.get(Bt);void 0===_e&&(_e={id:Bt,styles:[],textStyles:[]},this.classes.set(Bt,_e)),ft&&ft.forEach(function(Z){if(/color/.exec(Z)){const ae=Z.replace("fill","bgFill");_e.textStyles.push(ae)}_e.styles.push(Z)})})}setClass(W,ft){for(const Bt of W){const _e=this.entities.get(Bt);if(_e)for(const Z of ft)_e.cssClasses+=" "+Z}}clear(){this.entities=new Map,this.classes=new Map,this.relationships=[],(0,Xt.IU)()}getData(){const W=[],ft=[],Bt=(0,Xt.D7)();for(const Z of this.entities.keys()){const ae=this.entities.get(Z);ae&&(ae.cssCompiledStyles=this.getCompiledStyles(ae.cssClasses.split(" ")),W.push(ae))}let _e=0;for(const Z of this.relationships){const ae={id:(0,bt.rY)(Z.entityA,Z.entityB,{prefix:"id",counter:_e++}),type:"normal",curve:"basis",start:Z.entityA,end:Z.entityB,label:Z.roleA,labelpos:"c",thickness:"normal",classes:"relationshipLine",arrowTypeStart:Z.relSpec.cardB.toLowerCase(),arrowTypeEnd:Z.relSpec.cardA.toLowerCase(),pattern:"IDENTIFYING"==Z.relSpec.relType?"solid":"dashed",look:Bt.look};ft.push(ae)}return{nodes:W,edges:ft,other:{},config:Bt,direction:"TB"}}static#t=vr=()=>((0,ee.A)(this,"ErDB"),(0,j.K2)(this,"ErDB"),this)},vr()),Er={};(0,j.VA)(Er,{draw:()=>Lr});var Lr=(0,j.K2)(function(){var W=(0,lt.A)(function*(ft,Bt,_e,Z){j.Rm.info("REF0:"),j.Rm.info("Drawing er diagram (unified)",Bt);const{securityLevel:ae,er:S,layout:re}=(0,Xt.D7)(),Pt=Z.db.getData(),qt=(0,L.A)(Bt,ae);Pt.type=Z.type,Pt.layoutAlgorithm=(0,Rt.q7)(re),Pt.config.flowchart.nodeSpacing=S?.nodeSpacing||140,Pt.config.flowchart.rankSpacing=S?.rankSpacing||80,Pt.direction=Z.db.getDirection(),Pt.markers=["only_one","zero_or_one","one_or_more","zero_or_more"],Pt.diagramId=Bt,yield(0,Rt.XX)(Pt,qt),"elk"===Pt.layoutAlgorithm&&qt.select(".edges").lower();const V=qt.selectAll('[id*="-background"]');Array.from(V).length>0&&V.each(function(){const H=(0,fr.Ltv)(this),wt=H.attr("id").replace("-background",""),Wt=qt.select(`#${CSS.escape(wt)}`);if(!Wt.empty()){const xe=Wt.attr("transform");H.attr("transform",xe)}}),bt._K.insertTitle(qt,"erDiagramTitleText",S?.titleTopMargin??25,Z.db.getDiagramTitle()),(0,D.P)(qt,8,"erDiagram",S?.useMaxWidth??!0)});return function(ft,Bt,_e,Z){return W.apply(this,arguments)}}(),"draw"),Ar=(0,j.K2)((W,ft)=>{const Bt=Fe.Ix,_e=Bt(W,"r"),Z=Bt(W,"g"),ae=Bt(W,"b");return Fe.B3(_e,Z,ae,ft)},"fade"),Br=(0,j.K2)(W=>`\n  .entityBox {\n    fill: ${W.mainBkg};\n    stroke: ${W.nodeBorder};\n  }\n\n  .relationshipLabelBox {\n    fill: ${W.tertiaryColor};\n    opacity: 0.7;\n    background-color: ${W.tertiaryColor};\n      rect {\n        opacity: 0.5;\n      }\n  }\n\n  .labelBkg {\n    background-color: ${Ar(W.tertiaryColor,.5)};\n  }\n\n  .edgeLabel .label {\n    fill: ${W.nodeBorder};\n    font-size: 14px;\n  }\n\n  .label {\n    font-family: ${W.fontFamily};\n    color: ${W.nodeTextColor||W.textColor};\n  }\n\n  .edge-pattern-dashed {\n    stroke-dasharray: 8,8;\n  }\n\n  .node rect,\n  .node circle,\n  .node ellipse,\n  .node polygon\n  {\n    fill: ${W.mainBkg};\n    stroke: ${W.nodeBorder};\n    stroke-width: 1px;\n  }\n\n  .relationshipLine {\n    stroke: ${W.lineColor};\n    stroke-width: 1;\n    fill: none;\n  }\n\n  .marker {\n    fill: none !important;\n    stroke: ${W.lineColor} !important;\n    stroke-width: 1;\n  }\n`,"getStyles"),Ge={parser:br,get db(){return new mr},renderer:Er,styles:Br}},80525:(ti,_r,B)=>{"use strict";function ee(L,D){L.accDescr&&D.setAccDescription?.(L.accDescr),L.accTitle&&D.setAccTitle?.(L.accTitle),L.title&&D.setDiagramTitle?.(L.title)}B.d(_r,{S:()=>ee}),(0,B(32303).K2)(ee,"populateCommonDb")},84545:(ti,_r,B)=>{"use strict";B.r(_r),B.d(_r,{diagram:()=>ae});var br,lt=B(89204),ee=B(45027),L=B(97787),D=B(24715),Rt=B(5675),dt=B(8086),q=B(72271),yt=(B(98954),B(36384),B(87452)),j=(B(32239),B(19753),B(59355),B(52052)),fr=B(79006),Fe=B(32303),vr=B(40622),zr=B(79687),Er=(class{constructor(){this.vertexCounter=0,this.config=(0,fr.D7)(),this.vertices=new Map,this.edges=[],this.classes=new Map,this.subGraphs=[],this.subGraphLookup=new Map,this.tooltips=new Map,this.subCount=0,this.firstGraphFlag=!0,this.secCount=-1,this.posCrossRef=[],this.funs=[],this.setAccTitle=fr.SV,this.setAccDescription=fr.EI,this.setDiagramTitle=fr.ke,this.getAccTitle=fr.iN,this.getAccDescription=fr.m7,this.getDiagramTitle=fr.ab,this.funs.push(this.setupToolTips.bind(this)),this.addVertex=this.addVertex.bind(this),this.firstGraph=this.firstGraph.bind(this),this.setDirection=this.setDirection.bind(this),this.addSubGraph=this.addSubGraph.bind(this),this.addLink=this.addLink.bind(this),this.setLink=this.setLink.bind(this),this.updateLink=this.updateLink.bind(this),this.addClass=this.addClass.bind(this),this.setClass=this.setClass.bind(this),this.destructLink=this.destructLink.bind(this),this.setClickEvent=this.setClickEvent.bind(this),this.setTooltip=this.setTooltip.bind(this),this.updateLinkInterpolate=this.updateLinkInterpolate.bind(this),this.setClickFun=this.setClickFun.bind(this),this.bindFunctions=this.bindFunctions.bind(this),this.lex={firstGraph:this.firstGraph.bind(this)},this.clear(),this.setGen("gen-2")}sanitizeText(S){return fr.Y2.sanitizeText(S,this.config)}lookUpDomId(S){for(const re of this.vertices.values())if(re.id===S)return re.domId;return S}addVertex(S,re,Pt,qt,V,pt,H={},Nt){if(!S||0===S.trim().length)return;let wt;if(void 0!==Nt){let Re;Re=Nt.includes("\n")?Nt+"\n":"{\n"+Nt+"\n}",wt=(0,D.H)(Re,{schema:D.r})}const Wt=this.edges.find(Re=>Re.id===S);if(Wt){const Re=wt;return void 0!==Re?.animate&&(Wt.animate=Re.animate),void 0!==Re?.animation&&(Wt.animation=Re.animation),void(void 0!==Re?.curve&&(Wt.interpolate=Re.curve))}let xe,le=this.vertices.get(S);if(void 0===le&&(le={id:S,labelType:"text",domId:"flowchart-"+S+"-"+this.vertexCounter,styles:[],classes:[]},this.vertices.set(S,le)),this.vertexCounter++,void 0!==re?(this.config=(0,fr.D7)(),xe=this.sanitizeText(re.text.trim()),le.labelType=re.type,xe.startsWith('"')&&xe.endsWith('"')&&(xe=xe.substring(1,xe.length-1)),le.text=xe):void 0===le.text&&(le.text=S),void 0!==Pt&&(le.type=Pt),qt?.forEach(Re=>{le.styles.push(Re)}),V?.forEach(Re=>{le.classes.push(Re)}),void 0!==pt&&(le.dir=pt),void 0===le.props?le.props=H:void 0!==H&&Object.assign(le.props,H),void 0!==wt){if(wt.shape){if(wt.shape!==wt.shape.toLowerCase()||wt.shape.includes("_"))throw new Error(`No such shape: ${wt.shape}. Shape names should be lowercase.`);if(!(0,yt.aP)(wt.shape))throw new Error(`No such shape: ${wt.shape}.`);le.type=wt?.shape}wt?.label&&(le.text=wt?.label),wt?.icon&&(le.icon=wt?.icon,!wt.label?.trim()&&le.text===S&&(le.text="")),wt?.form&&(le.form=wt?.form),wt?.pos&&(le.pos=wt?.pos),wt?.img&&(le.img=wt?.img,!wt.label?.trim()&&le.text===S&&(le.text="")),wt?.constraint&&(le.constraint=wt.constraint),wt.w&&(le.assetWidth=Number(wt.w)),wt.h&&(le.assetHeight=Number(wt.h))}}addSingleLink(S,re,Pt,qt){const H={start:S,end:re,type:void 0,text:"",labelType:"text",classes:[],isUserDefinedId:!1,interpolate:this.edges.defaultInterpolate};Fe.Rm.info("abc78 Got edge...",H);const Nt=Pt.text;if(void 0!==Nt&&(H.text=this.sanitizeText(Nt.text.trim()),H.text.startsWith('"')&&H.text.endsWith('"')&&(H.text=H.text.substring(1,H.text.length-1)),H.labelType=Nt.type),void 0!==Pt&&(H.type=Pt.type,H.stroke=Pt.stroke,H.length=Pt.length>10?10:Pt.length),qt&&!this.edges.some(wt=>wt.id===qt))H.id=qt,H.isUserDefinedId=!0;else{const wt=this.edges.filter(Wt=>Wt.start===H.start&&Wt.end===H.end);H.id=(0,j.rY)(H.start,H.end,0===wt.length?{counter:0,prefix:"L"}:{counter:wt.length+1,prefix:"L"})}if(!(this.edges.length<(this.config.maxEdges??500)))throw new Error(`Edge limit exceeded. ${this.edges.length} edges found, but the limit is ${this.config.maxEdges}.\n\nInitialize mermaid with maxEdges set to a higher number to allow more edges.\nYou cannot set this config via configuration inside the diagram as it is a secure config.\nYou have to call mermaid.initialize.`);Fe.Rm.info("Pushing edge..."),this.edges.push(H)}isLinkData(S){return null!==S&&"object"==typeof S&&"id"in S&&"string"==typeof S.id}addLink(S,re,Pt){const qt=this.isLinkData(Pt)?Pt.id.replace("@",""):void 0;Fe.Rm.info("addLink",S,re,qt);for(const V of S)for(const pt of re)this.addSingleLink(V,pt,Pt,V===S[S.length-1]&&pt===re[0]?qt:void 0)}updateLinkInterpolate(S,re){S.forEach(Pt=>{"default"===Pt?this.edges.defaultInterpolate=re:this.edges[Pt].interpolate=re})}updateLink(S,re){S.forEach(Pt=>{if("number"==typeof Pt&&Pt>=this.edges.length)throw new Error(`The index ${Pt} for linkStyle is out of bounds. Valid indices for linkStyle are between 0 and ${this.edges.length-1}. (Help: Ensure that the index is within the range of existing edges.)`);"default"===Pt?this.edges.defaultStyle=re:(this.edges[Pt].style=re,(this.edges[Pt]?.style?.length??0)>0&&!this.edges[Pt]?.style?.some(qt=>qt?.startsWith("fill"))&&this.edges[Pt]?.style?.push("fill:none"))})}addClass(S,re){const Pt=re.join().replace(/\\,/g,"\xa7\xa7\xa7").replace(/,/g,";").replace(/\xa7\xa7\xa7/g,",").split(";");S.split(",").forEach(qt=>{let V=this.classes.get(qt);void 0===V&&(V={id:qt,styles:[],textStyles:[]},this.classes.set(qt,V)),Pt?.forEach(pt=>{if(/color/.exec(pt)){const H=pt.replace("fill","bgFill");V.textStyles.push(H)}V.styles.push(pt)})})}setDirection(S){this.direction=S.trim(),/.*</.exec(this.direction)&&(this.direction="RL"),/.*\^/.exec(this.direction)&&(this.direction="BT"),/.*>/.exec(this.direction)&&(this.direction="LR"),/.*v/.exec(this.direction)&&(this.direction="TB"),"TD"===this.direction&&(this.direction="TB")}setClass(S,re){for(const Pt of S.split(",")){const qt=this.vertices.get(Pt);qt&&qt.classes.push(re);const V=this.edges.find(H=>H.id===Pt);V&&V.classes.push(re);const pt=this.subGraphLookup.get(Pt);pt&&pt.classes.push(re)}}setTooltip(S,re){if(void 0!==re){re=this.sanitizeText(re);for(const Pt of S.split(","))this.tooltips.set("gen-1"===this.version?this.lookUpDomId(Pt):Pt,re)}}setClickFun(S,re,Pt){const qt=this.lookUpDomId(S);if("loose"!==(0,fr.D7)().securityLevel||void 0===re)return;let V=[];if("string"==typeof Pt){V=Pt.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/);for(let H=0;H<V.length;H++){let Nt=V[H].trim();Nt.startsWith('"')&&Nt.endsWith('"')&&(Nt=Nt.substr(1,Nt.length-2)),V[H]=Nt}}0===V.length&&V.push(S);const pt=this.vertices.get(S);pt&&(pt.haveCallback=!0,this.funs.push(()=>{const H=document.querySelector(`[id="${qt}"]`);null!==H&&H.addEventListener("click",()=>{j._K.runFunc(re,...V)},!1)}))}setLink(S,re,Pt){S.split(",").forEach(qt=>{const V=this.vertices.get(qt);void 0!==V&&(V.link=j._K.formatUrl(re,this.config),V.linkTarget=Pt)}),this.setClass(S,"clickable")}getTooltip(S){return this.tooltips.get(S)}setClickEvent(S,re,Pt){S.split(",").forEach(qt=>{this.setClickFun(qt,re,Pt)}),this.setClass(S,"clickable")}bindFunctions(S){this.funs.forEach(re=>{re(S)})}getDirection(){return this.direction?.trim()}getVertices(){return this.vertices}getEdges(){return this.edges}getClasses(){return this.classes}setupToolTips(S){let re=(0,vr.Ltv)(".mermaidTooltip");null===(re._groups||re)[0][0]&&(re=(0,vr.Ltv)("body").append("div").attr("class","mermaidTooltip").style("opacity",0)),(0,vr.Ltv)(S).select("svg").selectAll("g.node").on("mouseover",V=>{const pt=(0,vr.Ltv)(V.currentTarget);if(null===pt.attr("title"))return;const Nt=V.currentTarget?.getBoundingClientRect();re.transition().duration(200).style("opacity",".9"),re.text(pt.attr("title")).style("left",window.scrollX+Nt.left+(Nt.right-Nt.left)/2+"px").style("top",window.scrollY+Nt.bottom+"px"),re.html(re.html().replace(/&lt;br\/&gt;/g,"<br/>")),pt.classed("hover",!0)}).on("mouseout",V=>{re.transition().duration(500).style("opacity",0),(0,vr.Ltv)(V.currentTarget).classed("hover",!1)})}clear(S="gen-2"){this.vertices=new Map,this.classes=new Map,this.edges=[],this.funs=[this.setupToolTips.bind(this)],this.subGraphs=[],this.subGraphLookup=new Map,this.subCount=0,this.tooltips=new Map,this.firstGraphFlag=!0,this.version=S,this.config=(0,fr.D7)(),(0,fr.IU)()}setGen(S){this.version=S||"gen-2"}defaultStyle(){return"fill:#ffa;stroke: #f66; stroke-width: 3px; stroke-dasharray: 5, 5;fill:#ffa;stroke: #666;"}addSubGraph(S,re,Pt){let qt=S.text.trim(),V=Pt.text;S===Pt&&/\s/.exec(Pt.text)&&(qt=void 0);const H=(0,Fe.K2)(le=>{const Re={boolean:{},number:{},string:{}},oe=[];let qe;return{nodeList:le.filter(function(Ct){const St=typeof Ct;return Ct.stmt&&"dir"===Ct.stmt?(qe=Ct.value,!1):""!==Ct.trim()&&(St in Re?!Re[St].hasOwnProperty(Ct)&&(Re[St][Ct]=!0):!oe.includes(Ct)&&oe.push(Ct))}),dir:qe}},"uniq")(re.flat()),Nt=H.nodeList;let wt=H.dir;const Wt=(0,fr.D7)().flowchart??{};if(wt=wt??(Wt.inheritDir?this.getDirection()??(0,fr.D7)().direction??void 0:void 0),"gen-1"===this.version)for(let le=0;le<Nt.length;le++)Nt[le]=this.lookUpDomId(Nt[le]);qt=qt??"subGraph"+this.subCount,V=V||"",V=this.sanitizeText(V),this.subCount=this.subCount+1;const xe={id:qt,nodes:Nt,title:V.trim(),classes:[],dir:wt,labelType:Pt.type};return Fe.Rm.info("Adding",xe.id,xe.nodes,xe.dir),xe.nodes=this.makeUniq(xe,this.subGraphs).nodes,this.subGraphs.push(xe),this.subGraphLookup.set(qt,xe),qt}getPosForId(S){for(const[re,Pt]of this.subGraphs.entries())if(Pt.id===S)return re;return-1}indexNodes2(S,re){const Pt=this.subGraphs[re].nodes;if(this.secCount=this.secCount+1,this.secCount>2e3)return{result:!1,count:0};if(this.posCrossRef[this.secCount]=re,this.subGraphs[re].id===S)return{result:!0,count:0};let qt=0,V=1;for(;qt<Pt.length;){const pt=this.getPosForId(Pt[qt]);if(pt>=0){const H=this.indexNodes2(S,pt);if(H.result)return{result:!0,count:V+H.count};V+=H.count}qt+=1}return{result:!1,count:V}}getDepthFirstPos(S){return this.posCrossRef[S]}indexNodes(){this.secCount=-1,this.subGraphs.length>0&&this.indexNodes2("none",this.subGraphs.length-1)}getSubGraphs(){return this.subGraphs}firstGraph(){return!!this.firstGraphFlag&&(this.firstGraphFlag=!1,!0)}destructStartLink(S){let re=S.trim(),Pt="arrow_open";switch(re[0]){case"<":Pt="arrow_point",re=re.slice(1);break;case"x":Pt="arrow_cross",re=re.slice(1);break;case"o":Pt="arrow_circle",re=re.slice(1)}let qt="normal";return re.includes("=")&&(qt="thick"),re.includes(".")&&(qt="dotted"),{type:Pt,stroke:qt}}countChar(S,re){const Pt=re.length;let qt=0;for(let V=0;V<Pt;++V)re[V]===S&&++qt;return qt}destructEndLink(S){const re=S.trim();let Pt=re.slice(0,-1),qt="arrow_open";switch(re.slice(-1)){case"x":qt="arrow_cross",re.startsWith("x")&&(qt="double_"+qt,Pt=Pt.slice(1));break;case">":qt="arrow_point",re.startsWith("<")&&(qt="double_"+qt,Pt=Pt.slice(1));break;case"o":qt="arrow_circle",re.startsWith("o")&&(qt="double_"+qt,Pt=Pt.slice(1))}let V="normal",pt=Pt.length-1;Pt.startsWith("=")&&(V="thick"),Pt.startsWith("~")&&(V="invisible");const H=this.countChar(".",Pt);return H&&(V="dotted",pt=H),{type:qt,stroke:V,length:pt}}destructLink(S,re){const Pt=this.destructEndLink(S);let qt;if(re){if(qt=this.destructStartLink(re),qt.stroke!==Pt.stroke)return{type:"INVALID",stroke:"INVALID"};if("arrow_open"===qt.type)qt.type=Pt.type;else{if(qt.type!==Pt.type)return{type:"INVALID",stroke:"INVALID"};qt.type="double_"+qt.type}return"double_arrow"===qt.type&&(qt.type="double_arrow_point"),qt.length=Pt.length,qt}return Pt}exists(S,re){for(const Pt of S)if(Pt.nodes.includes(re))return!0;return!1}makeUniq(S,re){const Pt=[];return S.nodes.forEach((qt,V)=>{this.exists(re,qt)||Pt.push(S.nodes[V])}),{nodes:Pt}}getTypeFromVertex(S){if(S.img)return"imageSquare";if(S.icon)return"circle"===S.form?"iconCircle":"square"===S.form?"iconSquare":"rounded"===S.form?"iconRounded":"icon";switch(S.type){case"square":case void 0:return"squareRect";case"round":return"roundedRect";case"ellipse":return"ellipse";default:return S.type}}findNode(S,re){return S.find(Pt=>Pt.id===re)}destructEdgeType(S){let re="none",Pt="arrow_point";switch(S){case"arrow_point":case"arrow_circle":case"arrow_cross":Pt=S;break;case"double_arrow_point":case"double_arrow_circle":case"double_arrow_cross":re=S.replace("double_",""),Pt=re}return{arrowTypeStart:re,arrowTypeEnd:Pt}}addNodeFromVertex(S,re,Pt,qt,V,pt){const H=Pt.get(S.id),Nt=qt.get(S.id)??!1,wt=this.findNode(re,S.id);if(wt)wt.cssStyles=S.styles,wt.cssCompiledStyles=this.getCompiledStyles(S.classes),wt.cssClasses=S.classes.join(" ");else{const Wt={id:S.id,label:S.text,labelStyle:"",parentId:H,padding:V.flowchart?.padding||8,cssStyles:S.styles,cssCompiledStyles:this.getCompiledStyles(["default","node",...S.classes]),cssClasses:"default "+S.classes.join(" "),dir:S.dir,domId:S.domId,look:pt,link:S.link,linkTarget:S.linkTarget,tooltip:this.getTooltip(S.id),icon:S.icon,pos:S.pos,img:S.img,assetWidth:S.assetWidth,assetHeight:S.assetHeight,constraint:S.constraint};re.push(Nt?{...Wt,isGroup:!0,shape:"rect"}:{...Wt,isGroup:!1,shape:this.getTypeFromVertex(S)})}}getCompiledStyles(S){let re=[];for(const Pt of S){const qt=this.classes.get(Pt);qt?.styles&&(re=[...re,...qt.styles??[]].map(V=>V.trim())),qt?.textStyles&&(re=[...re,...qt.textStyles??[]].map(V=>V.trim()))}return re}getData(){const S=(0,fr.D7)(),re=[],Pt=[],qt=this.getSubGraphs(),V=new Map,pt=new Map;for(let wt=qt.length-1;wt>=0;wt--){const Wt=qt[wt];Wt.nodes.length>0&&pt.set(Wt.id,!0);for(const xe of Wt.nodes)V.set(xe,Wt.id)}for(let wt=qt.length-1;wt>=0;wt--){const Wt=qt[wt];re.push({id:Wt.id,label:Wt.title,labelStyle:"",parentId:V.get(Wt.id),padding:8,cssCompiledStyles:this.getCompiledStyles(Wt.classes),cssClasses:Wt.classes.join(" "),shape:"rect",dir:Wt.dir,isGroup:!0,look:S.look})}this.getVertices().forEach(wt=>{this.addNodeFromVertex(wt,re,V,pt,S,S.look||"classic")});const Nt=this.getEdges();return Nt.forEach((wt,Wt)=>{const{arrowTypeStart:xe,arrowTypeEnd:le}=this.destructEdgeType(wt.type),Re=[...Nt.defaultStyle??[]];wt.style&&Re.push(...wt.style);const oe={id:(0,j.rY)(wt.start,wt.end,{counter:Wt,prefix:"L"},wt.id),isUserDefinedId:wt.isUserDefinedId,start:wt.start,end:wt.end,type:wt.type??"normal",label:wt.text,labelpos:"c",thickness:wt.stroke,minlen:wt.length,classes:"invisible"===wt?.stroke?"":"edge-thickness-normal edge-pattern-solid flowchart-link",arrowTypeStart:"invisible"===wt?.stroke||"arrow_open"===wt?.type?"none":xe,arrowTypeEnd:"invisible"===wt?.stroke||"arrow_open"===wt?.type?"none":le,arrowheadStyle:"fill: #333",cssCompiledStyles:this.getCompiledStyles(wt.classes),labelStyle:Re,style:Re,pattern:wt.stroke,look:S.look,animate:wt.animate,animation:wt.animation,curve:wt.interpolate||this.edges.defaultInterpolate||S.flowchart?.curve};Pt.push(oe)}),{nodes:re,edges:Pt,other:{},config:S}}defaultConfig(){return fr.ME.flowchart}static#t=br=()=>((0,ee.A)(this,"FlowDB"),(0,Fe.K2)(this,"FlowDB"),this)},br()),ge={getClasses:(0,Fe.K2)(function(S,re){return re.db.getClasses()},"getClasses"),draw:(0,Fe.K2)(function(){var S=(0,lt.A)(function*(re,Pt,qt,V){Fe.Rm.info("REF0:"),Fe.Rm.info("Drawing state diagram (v2)",Pt);const{securityLevel:pt,flowchart:H,layout:Nt}=(0,fr.D7)();let wt;"sandbox"===pt&&(wt=(0,vr.Ltv)("#i"+Pt));const Wt="sandbox"===pt?wt.nodes()[0].contentDocument:document;Fe.Rm.debug("Before getData: ");const xe=V.db.getData();Fe.Rm.debug("Data: ",xe);const le=(0,Rt.A)(Pt,pt),Re=V.db.getDirection();xe.type=V.type,xe.layoutAlgorithm=(0,q.q7)(Nt),"dagre"===xe.layoutAlgorithm&&"elk"===Nt&&Fe.Rm.warn("flowchart-elk was moved to an external package in Mermaid v11. Please refer [release notes](https://github.com/mermaid-js/mermaid/releases/tag/v11.0.0) for more details. This diagram will be rendered using `dagre` layout as a fallback."),xe.direction=Re,xe.nodeSpacing=H?.nodeSpacing||50,xe.rankSpacing=H?.rankSpacing||50,xe.markers=["point","circle","cross"],xe.diagramId=Pt,Fe.Rm.debug("REF1:",xe),yield(0,q.XX)(xe,le);const oe=xe.config.flowchart?.diagramPadding??8;j._K.insertTitle(le,"flowchartTitleText",H?.titleTopMargin||0,V.db.getDiagramTitle()),(0,dt.P)(le,oe,"flowchart",H?.useMaxWidth||!1);for(const qe of xe.nodes){const We=(0,vr.Ltv)(`#${Pt} [id="${qe.id}"]`);if(!We||!qe.link)continue;const Ct=Wt.createElementNS("http://www.w3.org/2000/svg","a");Ct.setAttributeNS("http://www.w3.org/2000/svg","class",qe.cssClasses),Ct.setAttributeNS("http://www.w3.org/2000/svg","rel","noopener"),"sandbox"===pt?Ct.setAttributeNS("http://www.w3.org/2000/svg","target","_top"):qe.linkTarget&&Ct.setAttributeNS("http://www.w3.org/2000/svg","target",qe.linkTarget);const St=We.insert(function(){return Ct},":first-child"),R=We.select(".label-container");R&&St.append(function(){return R.node()});const O=We.select(".label");O&&St.append(function(){return O.node()})}});return function(re,Pt,qt,V){return S.apply(this,arguments)}}(),"draw")},Br=function(){var S=(0,Fe.K2)(function(ja,Sa,Ua,Ka){for(Ua=Ua||{},Ka=ja.length;Ka--;Ua[ja[Ka]]=Sa);return Ua},"o"),re=[1,4],Pt=[1,3],qt=[1,5],V=[1,8,9,10,11,27,34,36,38,44,60,84,85,86,87,88,89,102,105,106,109,111,114,115,116,121,122,123,124],pt=[2,2],H=[1,13],Nt=[1,14],wt=[1,15],Wt=[1,16],xe=[1,23],le=[1,25],Re=[1,26],oe=[1,27],qe=[1,49],We=[1,48],Ct=[1,29],St=[1,30],R=[1,31],O=[1,32],et=[1,33],xt=[1,44],it=[1,46],rt=[1,42],Et=[1,47],ut=[1,43],It=[1,50],G=[1,45],st=[1,51],Ce=[1,52],Ot=[1,34],Jt=[1,35],fe=[1,36],Be=[1,37],Ze=[1,57],ye=[1,8,9,10,11,27,32,34,36,38,44,60,84,85,86,87,88,89,102,105,106,109,111,114,115,116,121,122,123,124],kr=[1,61],ur=[1,60],Kt=[1,62],Pe=[8,9,11,75,77,78],ir=[1,78],me=[1,91],ce=[1,96],ke=[1,95],Te=[1,92],er=[1,88],Xe=[1,94],Ir=[1,90],Ee=[1,97],qr=[1,93],nr=[1,98],te=[1,89],ne=[8,9,10,11,40,75,77,78],Le=[8,9,10,11,40,46,75,77,78],tr=[8,9,10,11,29,40,44,46,48,50,52,54,56,58,60,63,65,67,68,70,75,77,78,89,102,105,106,109,111,114,115,116],g=[8,9,11,44,60,75,77,78,89,102,105,106,109,111,114,115,116],y=[44,60,89,102,105,106,109,111,114,115,116],E=[1,121],P=[1,122],b=[1,124],z=[1,123],p=[44,60,62,74,89,102,105,106,109,111,114,115,116],x=[1,133],C=[1,147],w=[1,148],$=[1,149],ct=[1,150],kt=[1,135],Ut=[1,137],Ht=[1,141],zt=[1,142],ue=[1,143],je=[1,144],ze=[1,145],Cr=[1,146],cr=[1,151],sr=[1,152],$e=[1,131],He=[1,132],Pr=[1,139],wr=[1,134],Vr=[1,138],xr=[1,136],Ba=[8,9,10,11,27,32,34,36,38,44,60,84,85,86,87,88,89,102,105,106,109,111,114,115,116,121,122,123,124],Zr=[1,154],Oa=[1,156],Qr=[8,9,11],ra=[8,9,10,11,14,44,60,89,105,106,109,111,114,115,116],Xr=[1,176],Rr=[1,172],Tr=[1,173],N=[1,177],Vt=[1,174],Ke=[1,175],rr=[77,116,119],ia=[8,9,10,11,12,14,27,29,32,44,60,75,84,85,86,87,88,89,90,105,109,111,114,115,116],hr=[10,106],ga=[31,49,51,53,55,57,62,64,66,67,69,71,116,117,118],or=[1,247],_a=[1,245],Ma=[1,249],Ra=[1,243],Jr=[1,244],ca=[1,246],ha=[1,248],Yr=[1,250],Fa=[1,268],pr=[8,9,11,106],Va=[8,9,10,11,60,84,105,106,109,110,111,112],lr={trace:(0,Fe.K2)(function(){},"trace"),yy:{},symbols_:{error:2,start:3,graphConfig:4,document:5,line:6,statement:7,SEMI:8,NEWLINE:9,SPACE:10,EOF:11,GRAPH:12,NODIR:13,DIR:14,FirstStmtSeparator:15,ending:16,endToken:17,spaceList:18,spaceListNewline:19,vertexStatement:20,separator:21,styleStatement:22,linkStyleStatement:23,classDefStatement:24,classStatement:25,clickStatement:26,subgraph:27,textNoTags:28,SQS:29,text:30,SQE:31,end:32,direction:33,acc_title:34,acc_title_value:35,acc_descr:36,acc_descr_value:37,acc_descr_multiline_value:38,shapeData:39,SHAPE_DATA:40,link:41,node:42,styledVertex:43,AMP:44,vertex:45,STYLE_SEPARATOR:46,idString:47,DOUBLECIRCLESTART:48,DOUBLECIRCLEEND:49,PS:50,PE:51,"(-":52,"-)":53,STADIUMSTART:54,STADIUMEND:55,SUBROUTINESTART:56,SUBROUTINEEND:57,VERTEX_WITH_PROPS_START:58,"NODE_STRING[field]":59,COLON:60,"NODE_STRING[value]":61,PIPE:62,CYLINDERSTART:63,CYLINDEREND:64,DIAMOND_START:65,DIAMOND_STOP:66,TAGEND:67,TRAPSTART:68,TRAPEND:69,INVTRAPSTART:70,INVTRAPEND:71,linkStatement:72,arrowText:73,TESTSTR:74,START_LINK:75,edgeText:76,LINK:77,LINK_ID:78,edgeTextToken:79,STR:80,MD_STR:81,textToken:82,keywords:83,STYLE:84,LINKSTYLE:85,CLASSDEF:86,CLASS:87,CLICK:88,DOWN:89,UP:90,textNoTagsToken:91,stylesOpt:92,"idString[vertex]":93,"idString[class]":94,CALLBACKNAME:95,CALLBACKARGS:96,HREF:97,LINK_TARGET:98,"STR[link]":99,"STR[tooltip]":100,alphaNum:101,DEFAULT:102,numList:103,INTERPOLATE:104,NUM:105,COMMA:106,style:107,styleComponent:108,NODE_STRING:109,UNIT:110,BRKT:111,PCT:112,idStringToken:113,MINUS:114,MULT:115,UNICODE_TEXT:116,TEXT:117,TAGSTART:118,EDGE_TEXT:119,alphaNumToken:120,direction_tb:121,direction_bt:122,direction_rl:123,direction_lr:124,$accept:0,$end:1},terminals_:{2:"error",8:"SEMI",9:"NEWLINE",10:"SPACE",11:"EOF",12:"GRAPH",13:"NODIR",14:"DIR",27:"subgraph",29:"SQS",31:"SQE",32:"end",34:"acc_title",35:"acc_title_value",36:"acc_descr",37:"acc_descr_value",38:"acc_descr_multiline_value",40:"SHAPE_DATA",44:"AMP",46:"STYLE_SEPARATOR",48:"DOUBLECIRCLESTART",49:"DOUBLECIRCLEEND",50:"PS",51:"PE",52:"(-",53:"-)",54:"STADIUMSTART",55:"STADIUMEND",56:"SUBROUTINESTART",57:"SUBROUTINEEND",58:"VERTEX_WITH_PROPS_START",59:"NODE_STRING[field]",60:"COLON",61:"NODE_STRING[value]",62:"PIPE",63:"CYLINDERSTART",64:"CYLINDEREND",65:"DIAMOND_START",66:"DIAMOND_STOP",67:"TAGEND",68:"TRAPSTART",69:"TRAPEND",70:"INVTRAPSTART",71:"INVTRAPEND",74:"TESTSTR",75:"START_LINK",77:"LINK",78:"LINK_ID",80:"STR",81:"MD_STR",84:"STYLE",85:"LINKSTYLE",86:"CLASSDEF",87:"CLASS",88:"CLICK",89:"DOWN",90:"UP",93:"idString[vertex]",94:"idString[class]",95:"CALLBACKNAME",96:"CALLBACKARGS",97:"HREF",98:"LINK_TARGET",99:"STR[link]",100:"STR[tooltip]",102:"DEFAULT",104:"INTERPOLATE",105:"NUM",106:"COMMA",109:"NODE_STRING",110:"UNIT",111:"BRKT",112:"PCT",114:"MINUS",115:"MULT",116:"UNICODE_TEXT",117:"TEXT",118:"TAGSTART",119:"EDGE_TEXT",121:"direction_tb",122:"direction_bt",123:"direction_rl",124:"direction_lr"},productions_:[0,[3,2],[5,0],[5,2],[6,1],[6,1],[6,1],[6,1],[6,1],[4,2],[4,2],[4,2],[4,3],[16,2],[16,1],[17,1],[17,1],[17,1],[15,1],[15,1],[15,2],[19,2],[19,2],[19,1],[19,1],[18,2],[18,1],[7,2],[7,2],[7,2],[7,2],[7,2],[7,2],[7,9],[7,6],[7,4],[7,1],[7,2],[7,2],[7,1],[21,1],[21,1],[21,1],[39,2],[39,1],[20,4],[20,3],[20,4],[20,2],[20,2],[20,1],[42,1],[42,6],[42,5],[43,1],[43,3],[45,4],[45,4],[45,6],[45,4],[45,4],[45,4],[45,8],[45,4],[45,4],[45,4],[45,6],[45,4],[45,4],[45,4],[45,4],[45,4],[45,1],[41,2],[41,3],[41,3],[41,1],[41,3],[41,4],[76,1],[76,2],[76,1],[76,1],[72,1],[72,2],[73,3],[30,1],[30,2],[30,1],[30,1],[83,1],[83,1],[83,1],[83,1],[83,1],[83,1],[83,1],[83,1],[83,1],[83,1],[83,1],[28,1],[28,2],[28,1],[28,1],[24,5],[25,5],[26,2],[26,4],[26,3],[26,5],[26,3],[26,5],[26,5],[26,7],[26,2],[26,4],[26,2],[26,4],[26,4],[26,6],[22,5],[23,5],[23,5],[23,9],[23,9],[23,7],[23,7],[103,1],[103,3],[92,1],[92,3],[107,1],[107,2],[108,1],[108,1],[108,1],[108,1],[108,1],[108,1],[108,1],[108,1],[113,1],[113,1],[113,1],[113,1],[113,1],[113,1],[113,1],[113,1],[113,1],[113,1],[113,1],[82,1],[82,1],[82,1],[82,1],[91,1],[91,1],[91,1],[91,1],[91,1],[91,1],[91,1],[91,1],[91,1],[91,1],[91,1],[79,1],[79,1],[120,1],[120,1],[120,1],[120,1],[120,1],[120,1],[120,1],[120,1],[120,1],[120,1],[120,1],[47,1],[47,2],[101,1],[101,2],[33,1],[33,1],[33,1],[33,1]],performAction:(0,Fe.K2)(function(Sa,Ua,Ka,fa,di,we,Li){var Me=we.length-1;switch(di){case 2:case 28:case 29:case 30:case 31:case 32:this.$=[];break;case 3:(!Array.isArray(we[Me])||we[Me].length>0)&&we[Me-1].push(we[Me]),this.$=we[Me-1];break;case 4:case 183:case 44:case 54:case 76:case 181:this.$=we[Me];break;case 11:fa.setDirection("TB"),this.$="TB";break;case 12:fa.setDirection(we[Me-1]),this.$=we[Me-1];break;case 27:this.$=we[Me-1].nodes;break;case 33:this.$=fa.addSubGraph(we[Me-6],we[Me-1],we[Me-4]);break;case 34:this.$=fa.addSubGraph(we[Me-3],we[Me-1],we[Me-3]);break;case 35:this.$=fa.addSubGraph(void 0,we[Me-1],void 0);break;case 37:this.$=we[Me].trim(),fa.setAccTitle(this.$);break;case 38:case 39:this.$=we[Me].trim(),fa.setAccDescription(this.$);break;case 43:case 133:this.$=we[Me-1]+we[Me];break;case 45:fa.addVertex(we[Me-1][we[Me-1].length-1],void 0,void 0,void 0,void 0,void 0,void 0,we[Me]),fa.addLink(we[Me-3].stmt,we[Me-1],we[Me-2]),this.$={stmt:we[Me-1],nodes:we[Me-1].concat(we[Me-3].nodes)};break;case 46:fa.addLink(we[Me-2].stmt,we[Me],we[Me-1]),this.$={stmt:we[Me],nodes:we[Me].concat(we[Me-2].nodes)};break;case 47:fa.addLink(we[Me-3].stmt,we[Me-1],we[Me-2]),this.$={stmt:we[Me-1],nodes:we[Me-1].concat(we[Me-3].nodes)};break;case 48:this.$={stmt:we[Me-1],nodes:we[Me-1]};break;case 49:fa.addVertex(we[Me-1][we[Me-1].length-1],void 0,void 0,void 0,void 0,void 0,void 0,we[Me]),this.$={stmt:we[Me-1],nodes:we[Me-1],shapeData:we[Me]};break;case 50:this.$={stmt:we[Me],nodes:we[Me]};break;case 51:case 128:case 130:this.$=[we[Me]];break;case 52:fa.addVertex(we[Me-5][we[Me-5].length-1],void 0,void 0,void 0,void 0,void 0,void 0,we[Me-4]),this.$=we[Me-5].concat(we[Me]);break;case 53:this.$=we[Me-4].concat(we[Me]);break;case 55:this.$=we[Me-2],fa.setClass(we[Me-2],we[Me]);break;case 56:this.$=we[Me-3],fa.addVertex(we[Me-3],we[Me-1],"square");break;case 57:this.$=we[Me-3],fa.addVertex(we[Me-3],we[Me-1],"doublecircle");break;case 58:this.$=we[Me-5],fa.addVertex(we[Me-5],we[Me-2],"circle");break;case 59:this.$=we[Me-3],fa.addVertex(we[Me-3],we[Me-1],"ellipse");break;case 60:this.$=we[Me-3],fa.addVertex(we[Me-3],we[Me-1],"stadium");break;case 61:this.$=we[Me-3],fa.addVertex(we[Me-3],we[Me-1],"subroutine");break;case 62:this.$=we[Me-7],fa.addVertex(we[Me-7],we[Me-1],"rect",void 0,void 0,void 0,Object.fromEntries([[we[Me-5],we[Me-3]]]));break;case 63:this.$=we[Me-3],fa.addVertex(we[Me-3],we[Me-1],"cylinder");break;case 64:this.$=we[Me-3],fa.addVertex(we[Me-3],we[Me-1],"round");break;case 65:this.$=we[Me-3],fa.addVertex(we[Me-3],we[Me-1],"diamond");break;case 66:this.$=we[Me-5],fa.addVertex(we[Me-5],we[Me-2],"hexagon");break;case 67:this.$=we[Me-3],fa.addVertex(we[Me-3],we[Me-1],"odd");break;case 68:this.$=we[Me-3],fa.addVertex(we[Me-3],we[Me-1],"trapezoid");break;case 69:this.$=we[Me-3],fa.addVertex(we[Me-3],we[Me-1],"inv_trapezoid");break;case 70:this.$=we[Me-3],fa.addVertex(we[Me-3],we[Me-1],"lean_right");break;case 71:this.$=we[Me-3],fa.addVertex(we[Me-3],we[Me-1],"lean_left");break;case 72:this.$=we[Me],fa.addVertex(we[Me]);break;case 73:we[Me-1].text=we[Me],this.$=we[Me-1];break;case 74:case 75:we[Me-2].text=we[Me-1],this.$=we[Me-2];break;case 77:var at=fa.destructLink(we[Me],we[Me-2]);this.$={type:at.type,stroke:at.stroke,length:at.length,text:we[Me-1]};break;case 78:at=fa.destructLink(we[Me],we[Me-2]),this.$={type:at.type,stroke:at.stroke,length:at.length,text:we[Me-1],id:we[Me-3]};break;case 79:case 86:case 101:case 103:this.$={text:we[Me],type:"text"};break;case 80:case 87:case 102:this.$={text:we[Me-1].text+""+we[Me],type:we[Me-1].type};break;case 81:case 88:this.$={text:we[Me],type:"string"};break;case 82:case 89:case 104:this.$={text:we[Me],type:"markdown"};break;case 83:at=fa.destructLink(we[Me]),this.$={type:at.type,stroke:at.stroke,length:at.length};break;case 84:at=fa.destructLink(we[Me]),this.$={type:at.type,stroke:at.stroke,length:at.length,id:we[Me-1]};break;case 85:this.$=we[Me-1];break;case 105:this.$=we[Me-4],fa.addClass(we[Me-2],we[Me]);break;case 106:this.$=we[Me-4],fa.setClass(we[Me-2],we[Me]);break;case 107:case 115:this.$=we[Me-1],fa.setClickEvent(we[Me-1],we[Me]);break;case 108:case 116:this.$=we[Me-3],fa.setClickEvent(we[Me-3],we[Me-2]),fa.setTooltip(we[Me-3],we[Me]);break;case 109:this.$=we[Me-2],fa.setClickEvent(we[Me-2],we[Me-1],we[Me]);break;case 110:this.$=we[Me-4],fa.setClickEvent(we[Me-4],we[Me-3],we[Me-2]),fa.setTooltip(we[Me-4],we[Me]);break;case 111:this.$=we[Me-2],fa.setLink(we[Me-2],we[Me]);break;case 112:this.$=we[Me-4],fa.setLink(we[Me-4],we[Me-2]),fa.setTooltip(we[Me-4],we[Me]);break;case 113:this.$=we[Me-4],fa.setLink(we[Me-4],we[Me-2],we[Me]);break;case 114:this.$=we[Me-6],fa.setLink(we[Me-6],we[Me-4],we[Me]),fa.setTooltip(we[Me-6],we[Me-2]);break;case 117:this.$=we[Me-1],fa.setLink(we[Me-1],we[Me]);break;case 118:this.$=we[Me-3],fa.setLink(we[Me-3],we[Me-2]),fa.setTooltip(we[Me-3],we[Me]);break;case 119:this.$=we[Me-3],fa.setLink(we[Me-3],we[Me-2],we[Me]);break;case 120:this.$=we[Me-5],fa.setLink(we[Me-5],we[Me-4],we[Me]),fa.setTooltip(we[Me-5],we[Me-2]);break;case 121:this.$=we[Me-4],fa.addVertex(we[Me-2],void 0,void 0,we[Me]);break;case 122:this.$=we[Me-4],fa.updateLink([we[Me-2]],we[Me]);break;case 123:this.$=we[Me-4],fa.updateLink(we[Me-2],we[Me]);break;case 124:this.$=we[Me-8],fa.updateLinkInterpolate([we[Me-6]],we[Me-2]),fa.updateLink([we[Me-6]],we[Me]);break;case 125:this.$=we[Me-8],fa.updateLinkInterpolate(we[Me-6],we[Me-2]),fa.updateLink(we[Me-6],we[Me]);break;case 126:this.$=we[Me-6],fa.updateLinkInterpolate([we[Me-4]],we[Me]);break;case 127:this.$=we[Me-6],fa.updateLinkInterpolate(we[Me-4],we[Me]);break;case 129:case 131:we[Me-2].push(we[Me]),this.$=we[Me-2];break;case 182:case 184:this.$=we[Me-1]+""+we[Me];break;case 185:this.$={stmt:"dir",value:"TB"};break;case 186:this.$={stmt:"dir",value:"BT"};break;case 187:this.$={stmt:"dir",value:"RL"};break;case 188:this.$={stmt:"dir",value:"LR"}}},"anonymous"),table:[{3:1,4:2,9:re,10:Pt,12:qt},{1:[3]},S(V,pt,{5:6}),{4:7,9:re,10:Pt,12:qt},{4:8,9:re,10:Pt,12:qt},{13:[1,9],14:[1,10]},{1:[2,1],6:11,7:12,8:H,9:Nt,10:wt,11:Wt,20:17,22:18,23:19,24:20,25:21,26:22,27:xe,33:24,34:le,36:Re,38:oe,42:28,43:38,44:qe,45:39,47:40,60:We,84:Ct,85:St,86:R,87:O,88:et,89:xt,102:it,105:rt,106:Et,109:ut,111:It,113:41,114:G,115:st,116:Ce,121:Ot,122:Jt,123:fe,124:Be},S(V,[2,9]),S(V,[2,10]),S(V,[2,11]),{8:[1,54],9:[1,55],10:Ze,15:53,18:56},S(ye,[2,3]),S(ye,[2,4]),S(ye,[2,5]),S(ye,[2,6]),S(ye,[2,7]),S(ye,[2,8]),{8:kr,9:ur,11:Kt,21:58,41:59,72:63,75:[1,64],77:[1,66],78:[1,65]},{8:kr,9:ur,11:Kt,21:67},{8:kr,9:ur,11:Kt,21:68},{8:kr,9:ur,11:Kt,21:69},{8:kr,9:ur,11:Kt,21:70},{8:kr,9:ur,11:Kt,21:71},{8:kr,9:ur,10:[1,72],11:Kt,21:73},S(ye,[2,36]),{35:[1,74]},{37:[1,75]},S(ye,[2,39]),S(Pe,[2,50],{18:76,39:77,10:Ze,40:ir}),{10:[1,79]},{10:[1,80]},{10:[1,81]},{10:[1,82]},{14:me,44:ce,60:ke,80:[1,86],89:Te,95:[1,83],97:[1,84],101:85,105:er,106:Xe,109:Ir,111:Ee,114:qr,115:nr,116:te,120:87},S(ye,[2,185]),S(ye,[2,186]),S(ye,[2,187]),S(ye,[2,188]),S(ne,[2,51]),S(ne,[2,54],{46:[1,99]}),S(Le,[2,72],{113:112,29:[1,100],44:qe,48:[1,101],50:[1,102],52:[1,103],54:[1,104],56:[1,105],58:[1,106],60:We,63:[1,107],65:[1,108],67:[1,109],68:[1,110],70:[1,111],89:xt,102:it,105:rt,106:Et,109:ut,111:It,114:G,115:st,116:Ce}),S(tr,[2,181]),S(tr,[2,142]),S(tr,[2,143]),S(tr,[2,144]),S(tr,[2,145]),S(tr,[2,146]),S(tr,[2,147]),S(tr,[2,148]),S(tr,[2,149]),S(tr,[2,150]),S(tr,[2,151]),S(tr,[2,152]),S(V,[2,12]),S(V,[2,18]),S(V,[2,19]),{9:[1,113]},S(g,[2,26],{18:114,10:Ze}),S(ye,[2,27]),{42:115,43:38,44:qe,45:39,47:40,60:We,89:xt,102:it,105:rt,106:Et,109:ut,111:It,113:41,114:G,115:st,116:Ce},S(ye,[2,40]),S(ye,[2,41]),S(ye,[2,42]),S(y,[2,76],{73:116,62:[1,118],74:[1,117]}),{76:119,79:120,80:E,81:P,116:b,119:z},{75:[1,125],77:[1,126]},S(p,[2,83]),S(ye,[2,28]),S(ye,[2,29]),S(ye,[2,30]),S(ye,[2,31]),S(ye,[2,32]),{10:x,12:C,14:w,27:$,28:127,32:ct,44:kt,60:Ut,75:Ht,80:[1,129],81:[1,130],83:140,84:zt,85:ue,86:je,87:ze,88:Cr,89:cr,90:sr,91:128,105:$e,109:He,111:Pr,114:wr,115:Vr,116:xr},S(Ba,pt,{5:153}),S(ye,[2,37]),S(ye,[2,38]),S(Pe,[2,48],{44:Zr}),S(Pe,[2,49],{18:155,10:Ze,40:Oa}),S(ne,[2,44]),{44:qe,47:157,60:We,89:xt,102:it,105:rt,106:Et,109:ut,111:It,113:41,114:G,115:st,116:Ce},{102:[1,158],103:159,105:[1,160]},{44:qe,47:161,60:We,89:xt,102:it,105:rt,106:Et,109:ut,111:It,113:41,114:G,115:st,116:Ce},{44:qe,47:162,60:We,89:xt,102:it,105:rt,106:Et,109:ut,111:It,113:41,114:G,115:st,116:Ce},S(Qr,[2,107],{10:[1,163],96:[1,164]}),{80:[1,165]},S(Qr,[2,115],{120:167,10:[1,166],14:me,44:ce,60:ke,89:Te,105:er,106:Xe,109:Ir,111:Ee,114:qr,115:nr,116:te}),S(Qr,[2,117],{10:[1,168]}),S(ra,[2,183]),S(ra,[2,170]),S(ra,[2,171]),S(ra,[2,172]),S(ra,[2,173]),S(ra,[2,174]),S(ra,[2,175]),S(ra,[2,176]),S(ra,[2,177]),S(ra,[2,178]),S(ra,[2,179]),S(ra,[2,180]),{44:qe,47:169,60:We,89:xt,102:it,105:rt,106:Et,109:ut,111:It,113:41,114:G,115:st,116:Ce},{30:170,67:Xr,80:Rr,81:Tr,82:171,116:N,117:Vt,118:Ke},{30:178,67:Xr,80:Rr,81:Tr,82:171,116:N,117:Vt,118:Ke},{30:180,50:[1,179],67:Xr,80:Rr,81:Tr,82:171,116:N,117:Vt,118:Ke},{30:181,67:Xr,80:Rr,81:Tr,82:171,116:N,117:Vt,118:Ke},{30:182,67:Xr,80:Rr,81:Tr,82:171,116:N,117:Vt,118:Ke},{30:183,67:Xr,80:Rr,81:Tr,82:171,116:N,117:Vt,118:Ke},{109:[1,184]},{30:185,67:Xr,80:Rr,81:Tr,82:171,116:N,117:Vt,118:Ke},{30:186,65:[1,187],67:Xr,80:Rr,81:Tr,82:171,116:N,117:Vt,118:Ke},{30:188,67:Xr,80:Rr,81:Tr,82:171,116:N,117:Vt,118:Ke},{30:189,67:Xr,80:Rr,81:Tr,82:171,116:N,117:Vt,118:Ke},{30:190,67:Xr,80:Rr,81:Tr,82:171,116:N,117:Vt,118:Ke},S(tr,[2,182]),S(V,[2,20]),S(g,[2,25]),S(Pe,[2,46],{39:191,18:192,10:Ze,40:ir}),S(y,[2,73],{10:[1,193]}),{10:[1,194]},{30:195,67:Xr,80:Rr,81:Tr,82:171,116:N,117:Vt,118:Ke},{77:[1,196],79:197,116:b,119:z},S(rr,[2,79]),S(rr,[2,81]),S(rr,[2,82]),S(rr,[2,168]),S(rr,[2,169]),{76:198,79:120,80:E,81:P,116:b,119:z},S(p,[2,84]),{8:kr,9:ur,10:x,11:Kt,12:C,14:w,21:200,27:$,29:[1,199],32:ct,44:kt,60:Ut,75:Ht,83:140,84:zt,85:ue,86:je,87:ze,88:Cr,89:cr,90:sr,91:201,105:$e,109:He,111:Pr,114:wr,115:Vr,116:xr},S(ia,[2,101]),S(ia,[2,103]),S(ia,[2,104]),S(ia,[2,157]),S(ia,[2,158]),S(ia,[2,159]),S(ia,[2,160]),S(ia,[2,161]),S(ia,[2,162]),S(ia,[2,163]),S(ia,[2,164]),S(ia,[2,165]),S(ia,[2,166]),S(ia,[2,167]),S(ia,[2,90]),S(ia,[2,91]),S(ia,[2,92]),S(ia,[2,93]),S(ia,[2,94]),S(ia,[2,95]),S(ia,[2,96]),S(ia,[2,97]),S(ia,[2,98]),S(ia,[2,99]),S(ia,[2,100]),{6:11,7:12,8:H,9:Nt,10:wt,11:Wt,20:17,22:18,23:19,24:20,25:21,26:22,27:xe,32:[1,202],33:24,34:le,36:Re,38:oe,42:28,43:38,44:qe,45:39,47:40,60:We,84:Ct,85:St,86:R,87:O,88:et,89:xt,102:it,105:rt,106:Et,109:ut,111:It,113:41,114:G,115:st,116:Ce,121:Ot,122:Jt,123:fe,124:Be},{10:Ze,18:203},{44:[1,204]},S(ne,[2,43]),{10:[1,205],44:qe,60:We,89:xt,102:it,105:rt,106:Et,109:ut,111:It,113:112,114:G,115:st,116:Ce},{10:[1,206]},{10:[1,207],106:[1,208]},S(hr,[2,128]),{10:[1,209],44:qe,60:We,89:xt,102:it,105:rt,106:Et,109:ut,111:It,113:112,114:G,115:st,116:Ce},{10:[1,210],44:qe,60:We,89:xt,102:it,105:rt,106:Et,109:ut,111:It,113:112,114:G,115:st,116:Ce},{80:[1,211]},S(Qr,[2,109],{10:[1,212]}),S(Qr,[2,111],{10:[1,213]}),{80:[1,214]},S(ra,[2,184]),{80:[1,215],98:[1,216]},S(ne,[2,55],{113:112,44:qe,60:We,89:xt,102:it,105:rt,106:Et,109:ut,111:It,114:G,115:st,116:Ce}),{31:[1,217],67:Xr,82:218,116:N,117:Vt,118:Ke},S(ga,[2,86]),S(ga,[2,88]),S(ga,[2,89]),S(ga,[2,153]),S(ga,[2,154]),S(ga,[2,155]),S(ga,[2,156]),{49:[1,219],67:Xr,82:218,116:N,117:Vt,118:Ke},{30:220,67:Xr,80:Rr,81:Tr,82:171,116:N,117:Vt,118:Ke},{51:[1,221],67:Xr,82:218,116:N,117:Vt,118:Ke},{53:[1,222],67:Xr,82:218,116:N,117:Vt,118:Ke},{55:[1,223],67:Xr,82:218,116:N,117:Vt,118:Ke},{57:[1,224],67:Xr,82:218,116:N,117:Vt,118:Ke},{60:[1,225]},{64:[1,226],67:Xr,82:218,116:N,117:Vt,118:Ke},{66:[1,227],67:Xr,82:218,116:N,117:Vt,118:Ke},{30:228,67:Xr,80:Rr,81:Tr,82:171,116:N,117:Vt,118:Ke},{31:[1,229],67:Xr,82:218,116:N,117:Vt,118:Ke},{67:Xr,69:[1,230],71:[1,231],82:218,116:N,117:Vt,118:Ke},{67:Xr,69:[1,233],71:[1,232],82:218,116:N,117:Vt,118:Ke},S(Pe,[2,45],{18:155,10:Ze,40:Oa}),S(Pe,[2,47],{44:Zr}),S(y,[2,75]),S(y,[2,74]),{62:[1,234],67:Xr,82:218,116:N,117:Vt,118:Ke},S(y,[2,77]),S(rr,[2,80]),{77:[1,235],79:197,116:b,119:z},{30:236,67:Xr,80:Rr,81:Tr,82:171,116:N,117:Vt,118:Ke},S(Ba,pt,{5:237}),S(ia,[2,102]),S(ye,[2,35]),{43:238,44:qe,45:39,47:40,60:We,89:xt,102:it,105:rt,106:Et,109:ut,111:It,113:41,114:G,115:st,116:Ce},{10:Ze,18:239},{10:or,60:_a,84:Ma,92:240,105:Ra,107:241,108:242,109:Jr,110:ca,111:ha,112:Yr},{10:or,60:_a,84:Ma,92:251,104:[1,252],105:Ra,107:241,108:242,109:Jr,110:ca,111:ha,112:Yr},{10:or,60:_a,84:Ma,92:253,104:[1,254],105:Ra,107:241,108:242,109:Jr,110:ca,111:ha,112:Yr},{105:[1,255]},{10:or,60:_a,84:Ma,92:256,105:Ra,107:241,108:242,109:Jr,110:ca,111:ha,112:Yr},{44:qe,47:257,60:We,89:xt,102:it,105:rt,106:Et,109:ut,111:It,113:41,114:G,115:st,116:Ce},S(Qr,[2,108]),{80:[1,258]},{80:[1,259],98:[1,260]},S(Qr,[2,116]),S(Qr,[2,118],{10:[1,261]}),S(Qr,[2,119]),S(Le,[2,56]),S(ga,[2,87]),S(Le,[2,57]),{51:[1,262],67:Xr,82:218,116:N,117:Vt,118:Ke},S(Le,[2,64]),S(Le,[2,59]),S(Le,[2,60]),S(Le,[2,61]),{109:[1,263]},S(Le,[2,63]),S(Le,[2,65]),{66:[1,264],67:Xr,82:218,116:N,117:Vt,118:Ke},S(Le,[2,67]),S(Le,[2,68]),S(Le,[2,70]),S(Le,[2,69]),S(Le,[2,71]),S([10,44,60,89,102,105,106,109,111,114,115,116],[2,85]),S(y,[2,78]),{31:[1,265],67:Xr,82:218,116:N,117:Vt,118:Ke},{6:11,7:12,8:H,9:Nt,10:wt,11:Wt,20:17,22:18,23:19,24:20,25:21,26:22,27:xe,32:[1,266],33:24,34:le,36:Re,38:oe,42:28,43:38,44:qe,45:39,47:40,60:We,84:Ct,85:St,86:R,87:O,88:et,89:xt,102:it,105:rt,106:Et,109:ut,111:It,113:41,114:G,115:st,116:Ce,121:Ot,122:Jt,123:fe,124:Be},S(ne,[2,53]),{43:267,44:qe,45:39,47:40,60:We,89:xt,102:it,105:rt,106:Et,109:ut,111:It,113:41,114:G,115:st,116:Ce},S(Qr,[2,121],{106:Fa}),S(pr,[2,130],{108:269,10:or,60:_a,84:Ma,105:Ra,109:Jr,110:ca,111:ha,112:Yr}),S(Va,[2,132]),S(Va,[2,134]),S(Va,[2,135]),S(Va,[2,136]),S(Va,[2,137]),S(Va,[2,138]),S(Va,[2,139]),S(Va,[2,140]),S(Va,[2,141]),S(Qr,[2,122],{106:Fa}),{10:[1,270]},S(Qr,[2,123],{106:Fa}),{10:[1,271]},S(hr,[2,129]),S(Qr,[2,105],{106:Fa}),S(Qr,[2,106],{113:112,44:qe,60:We,89:xt,102:it,105:rt,106:Et,109:ut,111:It,114:G,115:st,116:Ce}),S(Qr,[2,110]),S(Qr,[2,112],{10:[1,272]}),S(Qr,[2,113]),{98:[1,273]},{51:[1,274]},{62:[1,275]},{66:[1,276]},{8:kr,9:ur,11:Kt,21:277},S(ye,[2,34]),S(ne,[2,52]),{10:or,60:_a,84:Ma,105:Ra,107:278,108:242,109:Jr,110:ca,111:ha,112:Yr},S(Va,[2,133]),{14:me,44:ce,60:ke,89:Te,101:279,105:er,106:Xe,109:Ir,111:Ee,114:qr,115:nr,116:te,120:87},{14:me,44:ce,60:ke,89:Te,101:280,105:er,106:Xe,109:Ir,111:Ee,114:qr,115:nr,116:te,120:87},{98:[1,281]},S(Qr,[2,120]),S(Le,[2,58]),{30:282,67:Xr,80:Rr,81:Tr,82:171,116:N,117:Vt,118:Ke},S(Le,[2,66]),S(Ba,pt,{5:283}),S(pr,[2,131],{108:269,10:or,60:_a,84:Ma,105:Ra,109:Jr,110:ca,111:ha,112:Yr}),S(Qr,[2,126],{120:167,10:[1,284],14:me,44:ce,60:ke,89:Te,105:er,106:Xe,109:Ir,111:Ee,114:qr,115:nr,116:te}),S(Qr,[2,127],{120:167,10:[1,285],14:me,44:ce,60:ke,89:Te,105:er,106:Xe,109:Ir,111:Ee,114:qr,115:nr,116:te}),S(Qr,[2,114]),{31:[1,286],67:Xr,82:218,116:N,117:Vt,118:Ke},{6:11,7:12,8:H,9:Nt,10:wt,11:Wt,20:17,22:18,23:19,24:20,25:21,26:22,27:xe,32:[1,287],33:24,34:le,36:Re,38:oe,42:28,43:38,44:qe,45:39,47:40,60:We,84:Ct,85:St,86:R,87:O,88:et,89:xt,102:it,105:rt,106:Et,109:ut,111:It,113:41,114:G,115:st,116:Ce,121:Ot,122:Jt,123:fe,124:Be},{10:or,60:_a,84:Ma,92:288,105:Ra,107:241,108:242,109:Jr,110:ca,111:ha,112:Yr},{10:or,60:_a,84:Ma,92:289,105:Ra,107:241,108:242,109:Jr,110:ca,111:ha,112:Yr},S(Le,[2,62]),S(ye,[2,33]),S(Qr,[2,124],{106:Fa}),S(Qr,[2,125],{106:Fa})],defaultActions:{},parseError:(0,Fe.K2)(function(Sa,Ua){if(!Ua.recoverable){var Ka=new Error(Sa);throw Ka.hash=Ua,Ka}this.trace(Sa)},"parseError"),parse:(0,Fe.K2)(function(Sa){var Ua=this,Ka=[0],fa=[],di=[null],we=[],Li=this.table,Me="",at=0,Dt=0,M=0,gt=we.slice.call(arguments,1),Lt=Object.create(this.lexer),Ft={yy:{}};for(var Qe in this.yy)Object.prototype.hasOwnProperty.call(this.yy,Qe)&&(Ft.yy[Qe]=this.yy[Qe]);Lt.setInput(Sa,Ft.yy),Ft.yy.lexer=Lt,Ft.yy.parser=this,typeof Lt.yylloc>"u"&&(Lt.yylloc={});var ta=Lt.yylloc;we.push(ta);var Gr=Lt.options&&Lt.options.ranges;function La(){var Fr;return"number"!=typeof(Fr=fa.pop()||Lt.lex()||1)&&(Fr instanceof Array&&(Fr=(fa=Fr).pop()),Fr=Ua.symbols_[Fr]||Fr),Fr}this.parseError="function"==typeof Ft.yy.parseError?Ft.yy.parseError:Object.getPrototypeOf(this).parseError,(0,Fe.K2)(function na(Fr){Ka.length=Ka.length-2*Fr,di.length=di.length-Fr,we.length=we.length-Fr},"popStack"),(0,Fe.K2)(La,"lex");for(var da,wa,Xa,Ya,Ei,Na,Or,Ha,mi={};;){if(this.defaultActions[Xa=Ka[Ka.length-1]]?Ya=this.defaultActions[Xa]:((null===da||typeof da>"u")&&(da=La()),Ya=Li[Xa]&&Li[Xa][da]),typeof Ya>"u"||!Ya.length||!Ya[0]){var ni;for(Na in Ha=[],Li[Xa])this.terminals_[Na]&&Na>2&&Ha.push("'"+this.terminals_[Na]+"'");ni=Lt.showPosition?"Parse error on line "+(at+1)+":\n"+Lt.showPosition()+"\nExpecting "+Ha.join(", ")+", got '"+(this.terminals_[da]||da)+"'":"Parse error on line "+(at+1)+": Unexpected "+(1==da?"end of input":"'"+(this.terminals_[da]||da)+"'"),this.parseError(ni,{text:Lt.match,token:this.terminals_[da]||da,line:Lt.yylineno,loc:ta,expected:Ha})}if(Ya[0]instanceof Array&&Ya.length>1)throw new Error("Parse Error: multiple actions possible at state: "+Xa+", token: "+da);switch(Ya[0]){case 1:Ka.push(da),di.push(Lt.yytext),we.push(Lt.yylloc),Ka.push(Ya[1]),da=null,wa?(da=wa,wa=null):(Dt=Lt.yyleng,Me=Lt.yytext,at=Lt.yylineno,ta=Lt.yylloc,M>0&&M--);break;case 2:if(mi.$=di[di.length-(Or=this.productions_[Ya[1]][1])],mi._$={first_line:we[we.length-(Or||1)].first_line,last_line:we[we.length-1].last_line,first_column:we[we.length-(Or||1)].first_column,last_column:we[we.length-1].last_column},Gr&&(mi._$.range=[we[we.length-(Or||1)].range[0],we[we.length-1].range[1]]),typeof(Ei=this.performAction.apply(mi,[Me,Dt,at,Ft.yy,Ya[1],di,we].concat(gt)))<"u")return Ei;Or&&(Ka=Ka.slice(0,-1*Or*2),di=di.slice(0,-1*Or),we=we.slice(0,-1*Or)),Ka.push(this.productions_[Ya[1]][0]),di.push(mi.$),we.push(mi._$),Ka.push(Li[Ka[Ka.length-2]][Ka[Ka.length-1]]);break;case 3:return!0}}return!0},"parse")};function za(){this.yy={}}return lr.lexer=function(){return{EOF:1,parseError:(0,Fe.K2)(function(Ua,Ka){if(!this.yy.parser)throw new Error(Ua);this.yy.parser.parseError(Ua,Ka)},"parseError"),setInput:(0,Fe.K2)(function(Sa,Ua){return this.yy=Ua||this.yy||{},this._input=Sa,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},"setInput"),input:(0,Fe.K2)(function(){var Sa=this._input[0];return this.yytext+=Sa,this.yyleng++,this.offset++,this.match+=Sa,this.matched+=Sa,Sa.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),Sa},"input"),unput:(0,Fe.K2)(function(Sa){var Ua=Sa.length,Ka=Sa.split(/(?:\r\n?|\n)/g);this._input=Sa+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-Ua),this.offset-=Ua;var fa=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),Ka.length-1&&(this.yylineno-=Ka.length-1);var di=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:Ka?(Ka.length===fa.length?this.yylloc.first_column:0)+fa[fa.length-Ka.length].length-Ka[0].length:this.yylloc.first_column-Ua},this.options.ranges&&(this.yylloc.range=[di[0],di[0]+this.yyleng-Ua]),this.yyleng=this.yytext.length,this},"unput"),more:(0,Fe.K2)(function(){return this._more=!0,this},"more"),reject:(0,Fe.K2)(function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},"reject"),less:(0,Fe.K2)(function(Sa){this.unput(this.match.slice(Sa))},"less"),pastInput:(0,Fe.K2)(function(){var Sa=this.matched.substr(0,this.matched.length-this.match.length);return(Sa.length>20?"...":"")+Sa.substr(-20).replace(/\n/g,"")},"pastInput"),upcomingInput:(0,Fe.K2)(function(){var Sa=this.match;return Sa.length<20&&(Sa+=this._input.substr(0,20-Sa.length)),(Sa.substr(0,20)+(Sa.length>20?"...":"")).replace(/\n/g,"")},"upcomingInput"),showPosition:(0,Fe.K2)(function(){var Sa=this.pastInput(),Ua=new Array(Sa.length+1).join("-");return Sa+this.upcomingInput()+"\n"+Ua+"^"},"showPosition"),test_match:(0,Fe.K2)(function(Sa,Ua){var Ka,fa,di;if(this.options.backtrack_lexer&&(di={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(di.yylloc.range=this.yylloc.range.slice(0))),(fa=Sa[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=fa.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:fa?fa[fa.length-1].length-fa[fa.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+Sa[0].length},this.yytext+=Sa[0],this.match+=Sa[0],this.matches=Sa,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(Sa[0].length),this.matched+=Sa[0],Ka=this.performAction.call(this,this.yy,this,Ua,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),Ka)return Ka;if(this._backtrack){for(var we in di)this[we]=di[we];return!1}return!1},"test_match"),next:(0,Fe.K2)(function(){if(this.done)return this.EOF;var Sa,Ua,Ka,fa;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var di=this._currentRules(),we=0;we<di.length;we++)if((Ka=this._input.match(this.rules[di[we]]))&&(!Ua||Ka[0].length>Ua[0].length)){if(Ua=Ka,fa=we,this.options.backtrack_lexer){if(!1!==(Sa=this.test_match(Ka,di[we])))return Sa;if(this._backtrack){Ua=!1;continue}return!1}if(!this.options.flex)break}return Ua?!1!==(Sa=this.test_match(Ua,di[fa]))&&Sa:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},"next"),lex:(0,Fe.K2)(function(){return this.next()||this.lex()},"lex"),begin:(0,Fe.K2)(function(Ua){this.conditionStack.push(Ua)},"begin"),popState:(0,Fe.K2)(function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},"popState"),_currentRules:(0,Fe.K2)(function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},"_currentRules"),topState:(0,Fe.K2)(function(Ua){return(Ua=this.conditionStack.length-1-Math.abs(Ua||0))>=0?this.conditionStack[Ua]:"INITIAL"},"topState"),pushState:(0,Fe.K2)(function(Ua){this.begin(Ua)},"pushState"),stateStackSize:(0,Fe.K2)(function(){return this.conditionStack.length},"stateStackSize"),options:{},performAction:(0,Fe.K2)(function(Ua,Ka,fa,di){switch(fa){case 0:return this.begin("acc_title"),34;case 1:return this.popState(),"acc_title_value";case 2:return this.begin("acc_descr"),36;case 3:return this.popState(),"acc_descr_value";case 4:this.begin("acc_descr_multiline");break;case 5:case 12:case 14:case 17:case 20:case 23:case 33:this.popState();break;case 6:return"acc_descr_multiline_value";case 7:return this.pushState("shapeData"),Ka.yytext="",40;case 8:return this.pushState("shapeDataStr"),40;case 9:return this.popState(),40;case 10:return Ka.yytext=Ka.yytext.replace(/\n\s*/g,"<br/>"),40;case 11:return 40;case 13:this.begin("callbackname");break;case 15:this.popState(),this.begin("callbackargs");break;case 16:return 95;case 18:return 96;case 19:return"MD_STR";case 21:this.begin("md_string");break;case 22:return"STR";case 24:this.pushState("string");break;case 25:return 84;case 26:return 102;case 27:return 85;case 28:return 104;case 29:return 86;case 30:return 87;case 31:return 97;case 32:this.begin("click");break;case 34:return 88;case 35:case 36:case 37:return Ua.lex.firstGraph()&&this.begin("dir"),12;case 38:return 27;case 39:return 32;case 40:case 41:case 42:case 43:return 98;case 44:return this.popState(),13;case 45:case 46:case 47:case 48:case 49:case 50:case 51:case 52:case 53:case 54:return this.popState(),14;case 55:return 121;case 56:return 122;case 57:return 123;case 58:return 124;case 59:return 78;case 60:return 105;case 61:case 102:return 111;case 62:return 46;case 63:return 60;case 64:case 103:return 44;case 65:return 8;case 66:return 106;case 67:case 101:return 115;case 68:case 71:case 74:return this.popState(),77;case 69:return this.pushState("edgeText"),75;case 70:case 73:case 76:return 119;case 72:return this.pushState("thickEdgeText"),75;case 75:return this.pushState("dottedEdgeText"),75;case 77:return 77;case 78:return this.popState(),53;case 79:case 115:return"TEXT";case 80:return this.pushState("ellipseText"),52;case 81:return this.popState(),55;case 82:return this.pushState("text"),54;case 83:return this.popState(),57;case 84:return this.pushState("text"),56;case 85:return 58;case 86:return this.pushState("text"),67;case 87:return this.popState(),64;case 88:return this.pushState("text"),63;case 89:return this.popState(),49;case 90:return this.pushState("text"),48;case 91:return this.popState(),69;case 92:return this.popState(),71;case 93:return 117;case 94:return this.pushState("trapText"),68;case 95:return this.pushState("trapText"),70;case 96:return 118;case 97:return 67;case 98:return 90;case 99:return"SEP";case 100:return 89;case 104:return 109;case 105:return 114;case 106:return 116;case 107:return this.popState(),62;case 108:return this.pushState("text"),62;case 109:return this.popState(),51;case 110:return this.pushState("text"),50;case 111:return this.popState(),31;case 112:return this.pushState("text"),29;case 113:return this.popState(),66;case 114:return this.pushState("text"),65;case 116:return"QUOTE";case 117:return 9;case 118:return 10;case 119:return 11}},"anonymous"),rules:[/^(?:accTitle\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*\{\s*)/,/^(?:[\}])/,/^(?:[^\}]*)/,/^(?:@\{)/,/^(?:["])/,/^(?:["])/,/^(?:[^\"]+)/,/^(?:[^}^"]+)/,/^(?:\})/,/^(?:call[\s]+)/,/^(?:\([\s]*\))/,/^(?:\()/,/^(?:[^(]*)/,/^(?:\))/,/^(?:[^)]*)/,/^(?:[^`"]+)/,/^(?:[`]["])/,/^(?:["][`])/,/^(?:[^"]+)/,/^(?:["])/,/^(?:["])/,/^(?:style\b)/,/^(?:default\b)/,/^(?:linkStyle\b)/,/^(?:interpolate\b)/,/^(?:classDef\b)/,/^(?:class\b)/,/^(?:href[\s])/,/^(?:click[\s]+)/,/^(?:[\s\n])/,/^(?:[^\s\n]*)/,/^(?:flowchart-elk\b)/,/^(?:graph\b)/,/^(?:flowchart\b)/,/^(?:subgraph\b)/,/^(?:end\b\s*)/,/^(?:_self\b)/,/^(?:_blank\b)/,/^(?:_parent\b)/,/^(?:_top\b)/,/^(?:(\r?\n)*\s*\n)/,/^(?:\s*LR\b)/,/^(?:\s*RL\b)/,/^(?:\s*TB\b)/,/^(?:\s*BT\b)/,/^(?:\s*TD\b)/,/^(?:\s*BR\b)/,/^(?:\s*<)/,/^(?:\s*>)/,/^(?:\s*\^)/,/^(?:\s*v\b)/,/^(?:.*direction\s+TB[^\n]*)/,/^(?:.*direction\s+BT[^\n]*)/,/^(?:.*direction\s+RL[^\n]*)/,/^(?:.*direction\s+LR[^\n]*)/,/^(?:[^\s\"]+@(?=[^\{\"]))/,/^(?:[0-9]+)/,/^(?:#)/,/^(?::::)/,/^(?::)/,/^(?:&)/,/^(?:;)/,/^(?:,)/,/^(?:\*)/,/^(?:\s*[xo<]?--+[-xo>]\s*)/,/^(?:\s*[xo<]?--\s*)/,/^(?:[^-]|-(?!-)+)/,/^(?:\s*[xo<]?==+[=xo>]\s*)/,/^(?:\s*[xo<]?==\s*)/,/^(?:[^=]|=(?!))/,/^(?:\s*[xo<]?-?\.+-[xo>]?\s*)/,/^(?:\s*[xo<]?-\.\s*)/,/^(?:[^\.]|\.(?!))/,/^(?:\s*~~[\~]+\s*)/,/^(?:[-/\)][\)])/,/^(?:[^\(\)\[\]\{\}]|!\)+)/,/^(?:\(-)/,/^(?:\]\))/,/^(?:\(\[)/,/^(?:\]\])/,/^(?:\[\[)/,/^(?:\[\|)/,/^(?:>)/,/^(?:\)\])/,/^(?:\[\()/,/^(?:\)\)\))/,/^(?:\(\(\()/,/^(?:[\\(?=\])][\]])/,/^(?:\/(?=\])\])/,/^(?:\/(?!\])|\\(?!\])|[^\\\[\]\(\)\{\}\/]+)/,/^(?:\[\/)/,/^(?:\[\\)/,/^(?:<)/,/^(?:>)/,/^(?:\^)/,/^(?:\\\|)/,/^(?:v\b)/,/^(?:\*)/,/^(?:#)/,/^(?:&)/,/^(?:([A-Za-z0-9!"\#$%&'*+\.`?\\_\/]|-(?=[^\>\-\.])|(?!))+)/,/^(?:-)/,/^(?:[\u00AA\u00B5\u00BA\u00C0-\u00D6\u00D8-\u00F6]|[\u00F8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377]|[\u037A-\u037D\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5]|[\u03F7-\u0481\u048A-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA]|[\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE]|[\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA]|[\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0]|[\u08A2-\u08AC\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0977]|[\u0979-\u097F\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2]|[\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A]|[\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39]|[\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8]|[\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C]|[\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C]|[\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99]|[\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0]|[\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D]|[\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3]|[\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10]|[\u0D12-\u0D3A\u0D3D\u0D4E\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1]|[\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81]|[\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3]|[\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6]|[\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A]|[\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081]|[\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D]|[\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0]|[\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310]|[\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C]|[\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u1700-\u170C\u170E-\u1711]|[\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7]|[\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191C]|[\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16]|[\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF]|[\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC]|[\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D]|[\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D]|[\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3]|[\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F]|[\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128]|[\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184]|[\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3]|[\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6]|[\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE]|[\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C]|[\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D]|[\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC]|[\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B]|[\uA640-\uA66E\uA67F-\uA697\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788]|[\uA78B-\uA78E\uA790-\uA793\uA7A0-\uA7AA\uA7F8-\uA801\uA803-\uA805]|[\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB]|[\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uAA00-\uAA28]|[\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA80-\uAAAF\uAAB1\uAAB5]|[\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4]|[\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E]|[\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D]|[\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36]|[\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D]|[\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC]|[\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF]|[\uFFD2-\uFFD7\uFFDA-\uFFDC])/,/^(?:\|)/,/^(?:\|)/,/^(?:\))/,/^(?:\()/,/^(?:\])/,/^(?:\[)/,/^(?:(\}))/,/^(?:\{)/,/^(?:[^\[\]\(\)\{\}\|\"]+)/,/^(?:")/,/^(?:(\r?\n)+)/,/^(?:\s)/,/^(?:$)/],conditions:{shapeDataEndBracket:{rules:[21,24,77,80,82,84,88,90,94,95,108,110,112,114],inclusive:!1},shapeDataStr:{rules:[9,10,21,24,77,80,82,84,88,90,94,95,108,110,112,114],inclusive:!1},shapeData:{rules:[8,11,12,21,24,77,80,82,84,88,90,94,95,108,110,112,114],inclusive:!1},callbackargs:{rules:[17,18,21,24,77,80,82,84,88,90,94,95,108,110,112,114],inclusive:!1},callbackname:{rules:[14,15,16,21,24,77,80,82,84,88,90,94,95,108,110,112,114],inclusive:!1},href:{rules:[21,24,77,80,82,84,88,90,94,95,108,110,112,114],inclusive:!1},click:{rules:[21,24,33,34,77,80,82,84,88,90,94,95,108,110,112,114],inclusive:!1},dottedEdgeText:{rules:[21,24,74,76,77,80,82,84,88,90,94,95,108,110,112,114],inclusive:!1},thickEdgeText:{rules:[21,24,71,73,77,80,82,84,88,90,94,95,108,110,112,114],inclusive:!1},edgeText:{rules:[21,24,68,70,77,80,82,84,88,90,94,95,108,110,112,114],inclusive:!1},trapText:{rules:[21,24,77,80,82,84,88,90,91,92,93,94,95,108,110,112,114],inclusive:!1},ellipseText:{rules:[21,24,77,78,79,80,82,84,88,90,94,95,108,110,112,114],inclusive:!1},text:{rules:[21,24,77,80,81,82,83,84,87,88,89,90,94,95,107,108,109,110,111,112,113,114,115],inclusive:!1},vertex:{rules:[21,24,77,80,82,84,88,90,94,95,108,110,112,114],inclusive:!1},dir:{rules:[21,24,44,45,46,47,48,49,50,51,52,53,54,77,80,82,84,88,90,94,95,108,110,112,114],inclusive:!1},acc_descr_multiline:{rules:[5,6,21,24,77,80,82,84,88,90,94,95,108,110,112,114],inclusive:!1},acc_descr:{rules:[3,21,24,77,80,82,84,88,90,94,95,108,110,112,114],inclusive:!1},acc_title:{rules:[1,21,24,77,80,82,84,88,90,94,95,108,110,112,114],inclusive:!1},md_string:{rules:[19,20,21,24,77,80,82,84,88,90,94,95,108,110,112,114],inclusive:!1},string:{rules:[21,22,23,24,77,80,82,84,88,90,94,95,108,110,112,114],inclusive:!1},INITIAL:{rules:[0,2,4,7,13,21,24,25,26,27,28,29,30,31,32,35,36,37,38,39,40,41,42,43,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,71,72,74,75,77,80,82,84,85,86,88,90,94,95,96,97,98,99,100,101,102,103,104,105,106,108,110,112,114,116,117,118,119],inclusive:!0}}}}(),(0,Fe.K2)(za,"Parser"),za.prototype=lr,lr.Parser=za,new za}();Br.parser=Br;var Ge=Br,W=Object.assign({},Ge);W.parse=S=>{const re=S.replace(/}\s*\n/g,"}\n");return Ge.parse(re)};var ft=W,Bt=(0,Fe.K2)((S,re)=>{const Pt=zr.Ix,qt=Pt(S,"r"),V=Pt(S,"g"),pt=Pt(S,"b");return zr.B3(qt,V,pt,re)},"fade"),Z=(0,Fe.K2)(S=>`.label {\n    font-family: ${S.fontFamily};\n    color: ${S.nodeTextColor||S.textColor};\n  }\n  .cluster-label text {\n    fill: ${S.titleColor};\n  }\n  .cluster-label span {\n    color: ${S.titleColor};\n  }\n  .cluster-label span p {\n    background-color: transparent;\n  }\n\n  .label text,span {\n    fill: ${S.nodeTextColor||S.textColor};\n    color: ${S.nodeTextColor||S.textColor};\n  }\n\n  .node rect,\n  .node circle,\n  .node ellipse,\n  .node polygon,\n  .node path {\n    fill: ${S.mainBkg};\n    stroke: ${S.nodeBorder};\n    stroke-width: 1px;\n  }\n  .rough-node .label text , .node .label text, .image-shape .label, .icon-shape .label {\n    text-anchor: middle;\n  }\n  // .flowchart-label .text-outer-tspan {\n  //   text-anchor: middle;\n  // }\n  // .flowchart-label .text-inner-tspan {\n  //   text-anchor: start;\n  // }\n\n  .node .katex path {\n    fill: #000;\n    stroke: #000;\n    stroke-width: 1px;\n  }\n\n  .rough-node .label,.node .label, .image-shape .label, .icon-shape .label {\n    text-align: center;\n  }\n  .node.clickable {\n    cursor: pointer;\n  }\n\n\n  .root .anchor path {\n    fill: ${S.lineColor} !important;\n    stroke-width: 0;\n    stroke: ${S.lineColor};\n  }\n\n  .arrowheadPath {\n    fill: ${S.arrowheadColor};\n  }\n\n  .edgePath .path {\n    stroke: ${S.lineColor};\n    stroke-width: 2.0px;\n  }\n\n  .flowchart-link {\n    stroke: ${S.lineColor};\n    fill: none;\n  }\n\n  .edgeLabel {\n    background-color: ${S.edgeLabelBackground};\n    p {\n      background-color: ${S.edgeLabelBackground};\n    }\n    rect {\n      opacity: 0.5;\n      background-color: ${S.edgeLabelBackground};\n      fill: ${S.edgeLabelBackground};\n    }\n    text-align: center;\n  }\n\n  /* For html labels only */\n  .labelBkg {\n    background-color: ${Bt(S.edgeLabelBackground,.5)};\n    // background-color:\n  }\n\n  .cluster rect {\n    fill: ${S.clusterBkg};\n    stroke: ${S.clusterBorder};\n    stroke-width: 1px;\n  }\n\n  .cluster text {\n    fill: ${S.titleColor};\n  }\n\n  .cluster span {\n    color: ${S.titleColor};\n  }\n  /* .cluster div {\n    color: ${S.titleColor};\n  } */\n\n  div.mermaidTooltip {\n    position: absolute;\n    text-align: center;\n    max-width: 200px;\n    padding: 2px;\n    font-family: ${S.fontFamily};\n    font-size: 12px;\n    background: ${S.tertiaryColor};\n    border: 1px solid ${S.border2};\n    border-radius: 2px;\n    pointer-events: none;\n    z-index: 100;\n  }\n\n  .flowchartTitleText {\n    text-anchor: middle;\n    font-size: 18px;\n    fill: ${S.textColor};\n  }\n\n  rect.text {\n    fill: none;\n    stroke-width: 0;\n  }\n\n  .icon-shape, .image-shape {\n    background-color: ${S.edgeLabelBackground};\n    p {\n      background-color: ${S.edgeLabelBackground};\n      padding: 2px;\n    }\n    rect {\n      opacity: 0.5;\n      background-color: ${S.edgeLabelBackground};\n      fill: ${S.edgeLabelBackground};\n    }\n    text-align: center;\n  }\n  ${(0,L.o)()}\n`,"getStyles"),ae={parser:ft,get db(){return new Er},renderer:ge,styles:Z,init:(0,Fe.K2)(S=>{S.flowchart||(S.flowchart={}),S.layout&&(0,fr.XV)({layout:S.layout}),S.flowchart.arrowMarkerAbsolute=S.arrowMarkerAbsolute,(0,fr.XV)({flowchart:{arrowMarkerAbsolute:S.arrowMarkerAbsolute}})},"init")}},86976:(ti,_r,B)=>{"use strict";B.r(_r),B.d(_r,{diagram:()=>fr});var lt=B(54256),j=(B(97787),B(5675),B(8086),B(72271),B(98954),B(36384),B(87452),B(32239),B(19753),B(59355),B(52052),B(79006),B(32303)),fr={parser:lt._$,get db(){return new lt.NM},renderer:lt.Lh,styles:lt.tM,init:(0,j.K2)(Fe=>{Fe.class||(Fe.class={}),Fe.class.arrowMarkerAbsolute=Fe.arrowMarkerAbsolute},"init")}},87452:(ti,_r,B)=>{"use strict";B.d(_r,{DA:()=>Ar,IU:()=>re,U:()=>S,U7:()=>Xi,U_:()=>Yn,Zk:()=>yt,aP:()=>nn,gh:()=>rn,lC:()=>bt,on:()=>Rn});var lt=B(89204),ee=B(32239),L=B(19753),D=B(59355),Rt=B(52052),dt=B(79006),q=B(32303),A=B(40622),$t=B(93654),yt=(0,q.K2)(function(){var Gt=(0,lt.A)(function*(d,ht,Zt){let Tt;const vt=ht.useHtmlLabels||(0,dt._3)((0,dt.D7)()?.htmlLabels);Tt=Zt||"node default";const de=d.insert("g").attr("class",Tt).attr("id",ht.domId||ht.id),nt=de.insert("g").attr("class","label").attr("style",(0,Rt.KL)(ht.labelStyle));let At;At=void 0===ht.label?"":"string"==typeof ht.label?ht.label:ht.label[0];const J=yield(0,D.GZ)(nt,(0,dt.jZ)((0,Rt.Sm)(At),(0,dt.D7)()),{useHtmlLabels:vt,width:ht.width||(0,dt.D7)().flowchart?.wrappingWidth,cssClasses:"markdown-node-label",style:ht.labelStyle,addSvgBackground:!!ht.icon||!!ht.img});let Q=J.getBBox();const Mt=(ht?.padding??0)/2;if(vt){const pe=J.children[0],Ae=(0,A.Ltv)(J),tt=pe.getElementsByTagName("img");if(tt){const l=""===At.replace(/<img[^>]*>/g,"").trim();yield Promise.all([...tt].map(T=>new Promise(F=>{function ot(){if(T.style.display="flex",T.style.flexDirection="column",l){const _t=(0,dt.D7)().fontSize?(0,dt.D7)().fontSize:window.getComputedStyle(document.body).fontSize,Ie=5,[Qt=dt.UI.fontSize]=(0,Rt.I5)(_t),Ue=Qt*Ie+"px";T.style.minWidth=Ue,T.style.maxWidth=Ue}else T.style.width="100%";F(T)}(0,q.K2)(ot,"setupImage"),setTimeout(()=>{T.complete&&ot()}),T.addEventListener("error",ot),T.addEventListener("load",ot)})))}Q=pe.getBoundingClientRect(),Ae.attr("width",Q.width),Ae.attr("height",Q.height)}return nt.attr("transform",vt?"translate("+-Q.width/2+", "+-Q.height/2+")":"translate(0, "+-Q.height/2+")"),ht.centerLabel&&nt.attr("transform","translate("+-Q.width/2+", "+-Q.height/2+")"),nt.insert("rect",":first-child"),{shapeSvg:de,bbox:Q,halfPadding:Mt,label:nt}});return function(d,ht,Zt){return Gt.apply(this,arguments)}}(),"labelHelper"),Ye=(0,q.K2)(function(){var Gt=(0,lt.A)(function*(d,ht,Zt){const Tt=Zt.useHtmlLabels||(0,dt._3)((0,dt.D7)()?.flowchart?.htmlLabels),vt=d.insert("g").attr("class","label").attr("style",Zt.labelStyle||""),de=yield(0,D.GZ)(vt,(0,dt.jZ)((0,Rt.Sm)(ht),(0,dt.D7)()),{useHtmlLabels:Tt,width:Zt.width||(0,dt.D7)()?.flowchart?.wrappingWidth,style:Zt.labelStyle,addSvgBackground:!!Zt.icon||!!Zt.img});let nt=de.getBBox();const At=Zt.padding/2;if((0,dt._3)((0,dt.D7)()?.flowchart?.htmlLabels)){const J=de.children[0],Q=(0,A.Ltv)(de);nt=J.getBoundingClientRect(),Q.attr("width",nt.width),Q.attr("height",nt.height)}return vt.attr("transform",Tt?"translate("+-nt.width/2+", "+-nt.height/2+")":"translate(0, "+-nt.height/2+")"),Zt.centerLabel&&vt.attr("transform","translate("+-nt.width/2+", "+-nt.height/2+")"),vt.insert("rect",":first-child"),{shapeSvg:d,bbox:nt,halfPadding:At,label:vt}});return function(d,ht,Zt){return Gt.apply(this,arguments)}}(),"insertLabel"),bt=(0,q.K2)((Gt,d)=>{const ht=d.node().getBBox();Gt.width=ht.width,Gt.height=ht.height},"updateNodeBounds"),Xt=(0,q.K2)((Gt,d)=>("handDrawn"===Gt.look?"rough-node":"node")+" "+Gt.cssClasses+" "+(d||""),"getNodeClasses");function j(Gt){const d=Gt.map((ht,Zt)=>`${0===Zt?"M":"L"}${ht.x},${ht.y}`);return d.push("Z"),d.join(" ")}function fr(Gt,d,ht,Zt,Tt,vt){const de=[],At=ht-Gt,Mt=2*Math.PI/(At/vt),pe=d+(Zt-d)/2;for(let Ae=0;Ae<=50;Ae++){const l=Gt+Ae/50*At,T=pe+Tt*Math.sin(Mt*(l-Gt));de.push({x:l,y:T})}return de}function Fe(Gt,d,ht,Zt,Tt,vt){const de=[],nt=Tt*Math.PI/180,Q=(vt*Math.PI/180-nt)/(Zt-1);for(let Mt=0;Mt<Zt;Mt++){const pe=nt+Mt*Q,Ae=Gt+ht*Math.cos(pe),tt=d+ht*Math.sin(pe);de.push({x:-Ae,y:-tt})}return de}(0,q.K2)(j,"createPathFromPoints"),(0,q.K2)(fr,"generateFullSineWavePoints"),(0,q.K2)(Fe,"generateCirclePoints");var zr=(0,q.K2)((Gt,d)=>{var At,J,ht=Gt.x,Zt=Gt.y,Tt=d.x-ht,vt=d.y-Zt,de=Gt.width/2,nt=Gt.height/2;return Math.abs(vt)*de>Math.abs(Tt)*nt?(vt<0&&(nt=-nt),At=0===vt?0:nt*Tt/vt,J=nt):(Tt<0&&(de=-de),At=de,J=0===Tt?0:de*vt/Tt),{x:ht+At,y:Zt+J}},"intersectRect");function br(Gt,d){d&&Gt.attr("style",d)}function mr(Gt){return Er.apply(this,arguments)}function Er(){return(Er=(0,lt.A)(function*(Gt){const d=(0,A.Ltv)(document.createElementNS("http://www.w3.org/2000/svg","foreignObject")),ht=d.append("xhtml:div"),Zt=(0,dt.D7)();let Tt=Gt.label;return Gt.label&&(0,dt.Wi)(Gt.label)&&(Tt=yield(0,dt.dj)(Gt.label.replace(dt.Y2.lineBreakRegex,"\n"),Zt)),ht.html((0,dt.jZ)('<span class="'+(Gt.isNode?"nodeLabel":"edgeLabel")+'" '+(Gt.labelStyle?'style="'+Gt.labelStyle+'"':"")+">"+Tt+"</span>",Zt)),br(ht,Gt.labelStyle),ht.style("display","inline-block"),ht.style("padding-right","1px"),ht.style("white-space","nowrap"),ht.attr("xmlns","http://www.w3.org/1999/xhtml"),d.node()})).apply(this,arguments)}(0,q.K2)(br,"applyStyle"),(0,q.K2)(mr,"addHtmlLabel");var Ar=(0,q.K2)(function(){var Gt=(0,lt.A)(function*(d,ht,Zt,Tt){let vt=d||"";if("object"==typeof vt&&(vt=vt[0]),(0,dt._3)((0,dt.D7)().flowchart.htmlLabels)){vt=vt.replace(/\\n|\n/g,"<br />"),q.Rm.info("vertexText"+vt);const de={isNode:Tt,label:(0,Rt.Sm)(vt).replace(/fa[blrs]?:fa-[\w-]+/g,At=>`<i class='${At.replace(":"," ")}'></i>`),labelStyle:ht&&ht.replace("fill:","color:")};return yield mr(de)}{const de=document.createElementNS("http://www.w3.org/2000/svg","text");de.setAttribute("style",ht.replace("color:","fill:"));let nt=[];nt="string"==typeof vt?vt.split(/\\n|\n|<br\s*\/?>/gi):Array.isArray(vt)?vt:[];for(const At of nt){const J=document.createElementNS("http://www.w3.org/2000/svg","tspan");J.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),J.setAttribute("dy","1em"),J.setAttribute("x","0"),J.setAttribute("class",Zt?"title-row":"row"),J.textContent=At.trim(),de.appendChild(J)}return de}});return function(d,ht,Zt,Tt){return Gt.apply(this,arguments)}}(),"createLabel"),ge=(0,q.K2)((Gt,d,ht,Zt,Tt)=>["M",Gt+Tt,d,"H",Gt+ht-Tt,"A",Tt,Tt,0,0,1,Gt+ht,d+Tt,"V",d+Zt-Tt,"A",Tt,Tt,0,0,1,Gt+ht-Tt,d+Zt,"H",Gt+Tt,"A",Tt,Tt,0,0,1,Gt,d+Zt-Tt,"V",d+Tt,"A",Tt,Tt,0,0,1,Gt+Tt,d,"Z"].join(" "),"createRoundedRectPathD"),Br=(0,q.K2)(function(){var Gt=(0,lt.A)(function*(d,ht){q.Rm.info("Creating subgraph rect for ",ht.id,ht);const Zt=(0,dt.D7)(),{themeVariables:Tt,handDrawnSeed:vt}=Zt,{clusterBkg:de,clusterBorder:nt}=Tt,{labelStyles:At,nodeStyles:J,borderStyles:Q,backgroundStyles:Mt}=(0,L.GX)(ht),pe=d.insert("g").attr("class","cluster "+ht.cssClasses).attr("id",ht.id).attr("data-look",ht.look),Ae=(0,dt._3)(Zt.flowchart.htmlLabels),tt=pe.insert("g").attr("class","cluster-label "),l=yield(0,D.GZ)(tt,ht.label,{style:ht.labelStyle,useHtmlLabels:Ae,isNode:!0});let T=l.getBBox();if((0,dt._3)(Zt.flowchart.htmlLabels)){const Dr=l.children[0],aa=(0,A.Ltv)(l);T=Dr.getBoundingClientRect(),aa.attr("width",T.width),aa.attr("height",T.height)}const F=ht.width<=T.width+ht.padding?T.width+ht.padding:ht.width;ht.diff=ht.width<=T.width+ht.padding?(F-ht.width)/2-ht.padding:-ht.padding;const ot=ht.height,_t=ht.x-F/2,Ie=ht.y-ot/2;let Qt;if(q.Rm.trace("Data ",ht,JSON.stringify(ht)),"handDrawn"===ht.look){const Dr=$t.A.svg(pe),aa=(0,L.Fr)(ht,{roughness:.7,fill:de,stroke:nt,fillWeight:3,seed:vt}),Nr=Dr.path(ge(_t,Ie,F,ot,0),aa);Qt=pe.insert(()=>(q.Rm.debug("Rough node insert CXC",Nr),Nr),":first-child"),Qt.select("path:nth-child(2)").attr("style",Q.join(";")),Qt.select("path").attr("style",Mt.join(";").replace("fill","stroke"))}else Qt=pe.insert("rect",":first-child"),Qt.attr("style",J).attr("rx",ht.rx).attr("ry",ht.ry).attr("x",_t).attr("y",Ie).attr("width",F).attr("height",ot);const{subGraphTitleTopMargin:Ue}=(0,ee.O)(Zt);if(tt.attr("transform",`translate(${ht.x-T.width/2}, ${ht.y-ht.height/2+Ue})`),At){const Dr=tt.select("span");Dr&&Dr.attr("style",At)}const yr=Qt.node().getBBox();return ht.offsetX=0,ht.width=yr.width,ht.height=yr.height,ht.offsetY=T.height-ht.padding/2,ht.intersect=function(Dr){return zr(ht,Dr)},{cluster:pe,labelBBox:T}});return function(d,ht){return Gt.apply(this,arguments)}}(),"rect"),Ge=(0,q.K2)((Gt,d)=>{const ht=Gt.insert("g").attr("class","note-cluster").attr("id",d.id),Zt=ht.insert("rect",":first-child"),Tt=0*d.padding,vt=Tt/2;Zt.attr("rx",d.rx).attr("ry",d.ry).attr("x",d.x-d.width/2-vt).attr("y",d.y-d.height/2-vt).attr("width",d.width+Tt).attr("height",d.height+Tt).attr("fill","none");const de=Zt.node().getBBox();return d.width=de.width,d.height=de.height,d.intersect=function(nt){return zr(d,nt)},{cluster:ht,labelBBox:{width:0,height:0}}},"noteGroup"),W=(0,q.K2)(function(){var Gt=(0,lt.A)(function*(d,ht){const Zt=(0,dt.D7)(),{themeVariables:Tt,handDrawnSeed:vt}=Zt,{altBackground:de,compositeBackground:nt,compositeTitleBackground:At,nodeBorder:J}=Tt,Q=d.insert("g").attr("class",ht.cssClasses).attr("id",ht.id).attr("data-id",ht.id).attr("data-look",ht.look),Mt=Q.insert("g",":first-child"),pe=Q.insert("g").attr("class","cluster-label");let Ae=Q.append("rect");const tt=pe.node().appendChild(yield Ar(ht.label,ht.labelStyle,void 0,!0));let l=tt.getBBox();if((0,dt._3)(Zt.flowchart.htmlLabels)){const Nr=tt.children[0],oa=(0,A.Ltv)(tt);l=Nr.getBoundingClientRect(),oa.attr("width",l.width),oa.attr("height",l.height)}const T=0*ht.padding,F=T/2,ot=(ht.width<=l.width+ht.padding?l.width+ht.padding:ht.width)+T;ht.diff=ht.width<=l.width+ht.padding?(ot-ht.width)/2-ht.padding:-ht.padding;const _t=ht.height+T,Ie=ht.height+T-l.height-6,Qt=ht.x-ot/2,Ue=ht.y-_t/2;ht.width=ot;const yr=ht.y-ht.height/2-F+l.height+2;let Dr;if("handDrawn"===ht.look){const Nr=ht.cssClasses.includes("statediagram-cluster-alt"),oa=$t.A.svg(Q),Ca=ht.rx||ht.ry?oa.path(ge(Qt,Ue,ot,_t,10),{roughness:.7,fill:At,fillStyle:"solid",stroke:J,seed:vt}):oa.rectangle(Qt,Ue,ot,_t,{seed:vt});Dr=Q.insert(()=>Ca,":first-child");const ka=oa.rectangle(Qt,yr,ot,Ie,{fill:Nr?de:nt,fillStyle:Nr?"hachure":"solid",stroke:J,seed:vt});Dr=Q.insert(()=>Ca,":first-child"),Ae=Q.insert(()=>ka)}else Dr=Mt.insert("rect",":first-child"),Dr.attr("class","outer").attr("x",Qt).attr("y",Ue).attr("width",ot).attr("height",_t).attr("data-look",ht.look),Ae.attr("class","inner").attr("x",Qt).attr("y",yr).attr("width",ot).attr("height",Ie);pe.attr("transform",`translate(${ht.x-l.width/2}, ${Ue+1-((0,dt._3)(Zt.flowchart.htmlLabels)?0:3)})`);const aa=Dr.node().getBBox();return ht.height=aa.height,ht.offsetX=0,ht.offsetY=l.height-ht.padding/2,ht.labelBBox=l,ht.intersect=function(Nr){return zr(ht,Nr)},{cluster:Q,labelBBox:l}});return function(d,ht){return Gt.apply(this,arguments)}}(),"roundedWithTitle"),ft=(0,q.K2)(function(){var Gt=(0,lt.A)(function*(d,ht){q.Rm.info("Creating subgraph rect for ",ht.id,ht);const Zt=(0,dt.D7)(),{themeVariables:Tt,handDrawnSeed:vt}=Zt,{clusterBkg:de,clusterBorder:nt}=Tt,{labelStyles:At,nodeStyles:J,borderStyles:Q,backgroundStyles:Mt}=(0,L.GX)(ht),pe=d.insert("g").attr("class","cluster "+ht.cssClasses).attr("id",ht.id).attr("data-look",ht.look),Ae=(0,dt._3)(Zt.flowchart.htmlLabels),tt=pe.insert("g").attr("class","cluster-label "),l=yield(0,D.GZ)(tt,ht.label,{style:ht.labelStyle,useHtmlLabels:Ae,isNode:!0,width:ht.width});let T=l.getBBox();if((0,dt._3)(Zt.flowchart.htmlLabels)){const Dr=l.children[0],aa=(0,A.Ltv)(l);T=Dr.getBoundingClientRect(),aa.attr("width",T.width),aa.attr("height",T.height)}const F=ht.width<=T.width+ht.padding?T.width+ht.padding:ht.width;ht.diff=ht.width<=T.width+ht.padding?(F-ht.width)/2-ht.padding:-ht.padding;const ot=ht.height,_t=ht.x-F/2,Ie=ht.y-ot/2;let Qt;if(q.Rm.trace("Data ",ht,JSON.stringify(ht)),"handDrawn"===ht.look){const Dr=$t.A.svg(pe),aa=(0,L.Fr)(ht,{roughness:.7,fill:de,stroke:nt,fillWeight:4,seed:vt}),Nr=Dr.path(ge(_t,Ie,F,ot,ht.rx),aa);Qt=pe.insert(()=>(q.Rm.debug("Rough node insert CXC",Nr),Nr),":first-child"),Qt.select("path:nth-child(2)").attr("style",Q.join(";")),Qt.select("path").attr("style",Mt.join(";").replace("fill","stroke"))}else Qt=pe.insert("rect",":first-child"),Qt.attr("style",J).attr("rx",ht.rx).attr("ry",ht.ry).attr("x",_t).attr("y",Ie).attr("width",F).attr("height",ot);const{subGraphTitleTopMargin:Ue}=(0,ee.O)(Zt);if(tt.attr("transform",`translate(${ht.x-T.width/2}, ${ht.y-ht.height/2+Ue})`),At){const Dr=tt.select("span");Dr&&Dr.attr("style",At)}const yr=Qt.node().getBBox();return ht.offsetX=0,ht.width=yr.width,ht.height=yr.height,ht.offsetY=T.height-ht.padding/2,ht.intersect=function(Dr){return zr(ht,Dr)},{cluster:pe,labelBBox:T}});return function(d,ht){return Gt.apply(this,arguments)}}(),"kanbanSection"),Z={rect:Br,squareRect:Br,roundedWithTitle:W,noteGroup:Ge,divider:(0,q.K2)((Gt,d)=>{const ht=(0,dt.D7)(),{themeVariables:Zt,handDrawnSeed:Tt}=ht,{nodeBorder:vt}=Zt,de=Gt.insert("g").attr("class",d.cssClasses).attr("id",d.id).attr("data-look",d.look),nt=de.insert("g",":first-child"),At=0*d.padding,J=d.width+At;d.diff=-d.padding;const Q=d.height+At,Mt=d.x-J/2,pe=d.y-Q/2;let Ae;if(d.width=J,"handDrawn"===d.look){const T=$t.A.svg(de).rectangle(Mt,pe,J,Q,{fill:"lightgrey",roughness:.5,strokeLineDash:[5],stroke:vt,seed:Tt});Ae=de.insert(()=>T,":first-child")}else Ae=nt.insert("rect",":first-child"),Ae.attr("class","divider").attr("x",Mt).attr("y",pe).attr("width",J).attr("height",Q).attr("data-look",d.look);const tt=Ae.node().getBBox();return d.height=tt.height,d.offsetX=0,d.offsetY=0,d.intersect=function(l){return zr(d,l)},{cluster:de,labelBBox:{}}},"divider"),kanbanSection:ft},ae=new Map,S=(0,q.K2)(function(){var Gt=(0,lt.A)(function*(d,ht){const Zt=ht.shape||"rect",Tt=yield Z[Zt](d,ht);return ae.set(ht.id,Tt),Tt});return function(d,ht){return Gt.apply(this,arguments)}}(),"insertCluster"),re=(0,q.K2)(()=>{ae=new Map},"clear");function Pt(Gt,d){return Gt.intersect(d)}(0,q.K2)(Pt,"intersectNode");var qt=Pt;function V(Gt,d,ht,Zt){var Tt=Gt.x,vt=Gt.y,de=Tt-Zt.x,nt=vt-Zt.y,At=Math.sqrt(d*d*nt*nt+ht*ht*de*de),J=Math.abs(d*ht*de/At);Zt.x<Tt&&(J=-J);var Q=Math.abs(d*ht*nt/At);return Zt.y<vt&&(Q=-Q),{x:Tt+J,y:vt+Q}}(0,q.K2)(V,"intersectEllipse");var pt=V;function H(Gt,d,ht){return pt(Gt,d,d,ht)}(0,q.K2)(H,"intersectCircle");var Nt=H;function wt(Gt,d,ht,Zt){{const Tt=d.y-Gt.y,vt=Gt.x-d.x,de=d.x*Gt.y-Gt.x*d.y,nt=Tt*ht.x+vt*ht.y+de,At=Tt*Zt.x+vt*Zt.y+de,J=1e-6;if(0!==nt&&0!==At&&Wt(nt,At))return;const Q=Zt.y-ht.y,Mt=ht.x-Zt.x,pe=Zt.x*ht.y-ht.x*Zt.y,Ae=Q*Gt.x+Mt*Gt.y+pe,tt=Q*d.x+Mt*d.y+pe;if(Math.abs(Ae)<J&&Math.abs(tt)<J&&Wt(Ae,tt))return;const l=Tt*Mt-Q*vt;if(0===l)return;const T=Math.abs(l/2);let F=vt*pe-Mt*de;const ot=F<0?(F-T)/l:(F+T)/l;return F=Q*de-Tt*pe,{x:ot,y:F<0?(F-T)/l:(F+T)/l}}}function Wt(Gt,d){return Gt*d>0}(0,q.K2)(wt,"intersectLine"),(0,q.K2)(Wt,"sameSign");var xe=wt;function le(Gt,d,ht){let Zt=Gt.x,Tt=Gt.y,vt=[],de=Number.POSITIVE_INFINITY,nt=Number.POSITIVE_INFINITY;"function"==typeof d.forEach?d.forEach(function(Q){de=Math.min(de,Q.x),nt=Math.min(nt,Q.y)}):(de=Math.min(de,d.x),nt=Math.min(nt,d.y));let At=Zt-Gt.width/2-de,J=Tt-Gt.height/2-nt;for(let Q=0;Q<d.length;Q++){let Mt=d[Q],pe=d[Q<d.length-1?Q+1:0],Ae=xe(Gt,ht,{x:At+Mt.x,y:J+Mt.y},{x:At+pe.x,y:J+pe.y});Ae&&vt.push(Ae)}return vt.length?(vt.length>1&&vt.sort(function(Q,Mt){let pe=Q.x-ht.x,Ae=Q.y-ht.y,tt=Math.sqrt(pe*pe+Ae*Ae),l=Mt.x-ht.x,T=Mt.y-ht.y,F=Math.sqrt(l*l+T*T);return tt<F?-1:tt===F?0:1}),vt[0]):Gt}(0,q.K2)(le,"intersectPolygon");var oe={node:qt,circle:Nt,ellipse:pt,polygon:le,rect:zr};function qe(Gt,d){const{labelStyles:ht}=(0,L.GX)(d);d.labelStyle=ht;const Zt=Xt(d);let Tt=Zt;Zt||(Tt="anchor");const vt=Gt.insert("g").attr("class",Tt).attr("id",d.domId||d.id),{cssStyles:nt}=d,At=$t.A.svg(vt),J=(0,L.Fr)(d,{fill:"black",stroke:"none",fillStyle:"solid"});"handDrawn"!==d.look&&(J.roughness=0);const Q=At.circle(0,0,2,J),Mt=vt.insert(()=>Q,":first-child");return Mt.attr("class","anchor").attr("style",(0,Rt.KL)(nt)),bt(d,Mt),d.intersect=function(pe){return q.Rm.info("Circle intersect",d,1,pe),oe.circle(d,1,pe)},vt}function We(Gt,d,ht,Zt,Tt,vt,de){const At=(Gt+ht)/2,J=(d+Zt)/2,Q=Math.atan2(Zt-d,ht-Gt),l=Math.sqrt(((ht-Gt)/2/Tt)**2+((Zt-d)/2/vt)**2);if(l>1)throw new Error("The given radii are too small to create an arc between the points.");const T=Math.sqrt(1-l**2),F=At+T*vt*Math.sin(Q)*(de?-1:1),ot=J-T*Tt*Math.cos(Q)*(de?-1:1),_t=Math.atan2((d-ot)/vt,(Gt-F)/Tt);let Qt=Math.atan2((Zt-ot)/vt,(ht-F)/Tt)-_t;de&&Qt<0&&(Qt+=2*Math.PI),!de&&Qt>0&&(Qt-=2*Math.PI);const Ue=[];for(let yr=0;yr<20;yr++){const aa=_t+yr/19*Qt,Nr=F+Tt*Math.cos(aa),oa=ot+vt*Math.sin(aa);Ue.push({x:Nr,y:oa})}return Ue}function Ct(Gt,d){return St.apply(this,arguments)}function St(){return(St=(0,lt.A)(function*(Gt,d){const{labelStyles:ht,nodeStyles:Zt}=(0,L.GX)(d);d.labelStyle=ht;const{shapeSvg:Tt,bbox:vt}=yield yt(Gt,d,Xt(d)),de=vt.width+d.padding+20,nt=vt.height+d.padding,At=nt/2,J=At/(2.5+nt/50),{cssStyles:Q}=d,Mt=[{x:de/2,y:-nt/2},{x:-de/2,y:-nt/2},...We(-de/2,-nt/2,-de/2,nt/2,J,At,!1),{x:de/2,y:nt/2},...We(de/2,nt/2,de/2,-nt/2,J,At,!0)],pe=$t.A.svg(Tt),Ae=(0,L.Fr)(d,{});"handDrawn"!==d.look&&(Ae.roughness=0,Ae.fillStyle="solid");const tt=j(Mt),l=pe.path(tt,Ae),T=Tt.insert(()=>l,":first-child");return T.attr("class","basic label-container"),Q&&"handDrawn"!==d.look&&T.selectAll("path").attr("style",Q),Zt&&"handDrawn"!==d.look&&T.selectAll("path").attr("style",Zt),T.attr("transform",`translate(${J/2}, 0)`),bt(d,T),d.intersect=function(F){return oe.polygon(d,Mt,F)},Tt})).apply(this,arguments)}function R(Gt,d,ht,Zt){return Gt.insert("polygon",":first-child").attr("points",Zt.map(function(Tt){return Tt.x+","+Tt.y}).join(" ")).attr("class","label-container").attr("transform","translate("+-d/2+","+ht/2+")")}function O(Gt,d){return et.apply(this,arguments)}function et(){return(et=(0,lt.A)(function*(Gt,d){const{labelStyles:ht,nodeStyles:Zt}=(0,L.GX)(d);d.labelStyle=ht;const{shapeSvg:Tt,bbox:vt}=yield yt(Gt,d,Xt(d)),de=vt.height+d.padding,At=vt.width+d.padding+12,Mt=-de,Ae=[{x:12,y:Mt},{x:At,y:Mt},{x:At,y:0},{x:0,y:0},{x:0,y:Mt+12},{x:12,y:Mt}];let tt;const{cssStyles:l}=d;if("handDrawn"===d.look){const T=$t.A.svg(Tt),F=(0,L.Fr)(d,{}),ot=j(Ae),_t=T.path(ot,F);tt=Tt.insert(()=>_t,":first-child").attr("transform",`translate(${-At/2}, ${de/2})`),l&&tt.attr("style",l)}else tt=R(Tt,At,de,Ae);return Zt&&tt.attr("style",Zt),bt(d,tt),d.intersect=function(T){return oe.polygon(d,Ae,T)},Tt})).apply(this,arguments)}function xt(Gt,d){const{nodeStyles:ht}=(0,L.GX)(d);d.label="";const Zt=Gt.insert("g").attr("class",Xt(d)).attr("id",d.domId??d.id),{cssStyles:Tt}=d,vt=Math.max(28,d.width??0),de=[{x:0,y:vt/2},{x:vt/2,y:0},{x:0,y:-vt/2},{x:-vt/2,y:0}],nt=$t.A.svg(Zt),At=(0,L.Fr)(d,{});"handDrawn"!==d.look&&(At.roughness=0,At.fillStyle="solid");const J=j(de),Q=nt.path(J,At),Mt=Zt.insert(()=>Q,":first-child");return Tt&&"handDrawn"!==d.look&&Mt.selectAll("path").attr("style",Tt),ht&&"handDrawn"!==d.look&&Mt.selectAll("path").attr("style",ht),d.width=28,d.height=28,d.intersect=function(pe){return oe.polygon(d,de,pe)},Zt}function it(Gt,d,ht){return rt.apply(this,arguments)}function rt(){return(rt=(0,lt.A)(function*(Gt,d,ht){const{labelStyles:Zt,nodeStyles:Tt}=(0,L.GX)(d);d.labelStyle=Zt;const{shapeSvg:vt,bbox:de,halfPadding:nt}=yield yt(Gt,d,Xt(d)),J=de.width/2+(ht?.padding??nt);let Q;const{cssStyles:Mt}=d;if("handDrawn"===d.look){const pe=$t.A.svg(vt),Ae=(0,L.Fr)(d,{}),tt=pe.circle(0,0,2*J,Ae);Q=vt.insert(()=>tt,":first-child"),Q.attr("class","basic label-container").attr("style",(0,Rt.KL)(Mt))}else Q=vt.insert("circle",":first-child").attr("class","basic label-container").attr("style",Tt).attr("r",J).attr("cx",0).attr("cy",0);return bt(d,Q),d.calcIntersect=function(pe,Ae){return oe.circle(pe,pe.width/2,Ae)},d.intersect=function(pe){return q.Rm.info("Circle intersect",d,J,pe),oe.circle(d,J,pe)},vt})).apply(this,arguments)}function Et(Gt){const d=Math.cos(Math.PI/4),ht=Math.sin(Math.PI/4),Zt=2*Gt;return`M ${-Zt/2*d},${Zt/2*ht} L ${Zt/2*d},${-Zt/2*ht}\n                   M ${Zt/2*d},${Zt/2*ht} L ${-Zt/2*d},${-Zt/2*ht}`}function ut(Gt,d){const{labelStyles:ht,nodeStyles:Zt}=(0,L.GX)(d);d.labelStyle=ht,d.label="";const Tt=Gt.insert("g").attr("class",Xt(d)).attr("id",d.domId??d.id),vt=Math.max(30,d?.width??0),{cssStyles:de}=d,nt=$t.A.svg(Tt),At=(0,L.Fr)(d,{});"handDrawn"!==d.look&&(At.roughness=0,At.fillStyle="solid");const J=nt.circle(0,0,2*vt,At),Q=Et(vt),Mt=nt.path(Q,At),pe=Tt.insert(()=>J,":first-child");return pe.insert(()=>Mt),de&&"handDrawn"!==d.look&&pe.selectAll("path").attr("style",de),Zt&&"handDrawn"!==d.look&&pe.selectAll("path").attr("style",Zt),bt(d,pe),d.intersect=function(Ae){return q.Rm.info("crossedCircle intersect",d,{radius:vt,point:Ae}),oe.circle(d,vt,Ae)},Tt}function It(Gt,d,ht,Zt=100,Tt=0,vt=180){const de=[],nt=Tt*Math.PI/180,Q=(vt*Math.PI/180-nt)/(Zt-1);for(let Mt=0;Mt<Zt;Mt++){const pe=nt+Mt*Q,Ae=Gt+ht*Math.cos(pe),tt=d+ht*Math.sin(pe);de.push({x:-Ae,y:-tt})}return de}function G(Gt,d){return st.apply(this,arguments)}function st(){return(st=(0,lt.A)(function*(Gt,d){const{labelStyles:ht,nodeStyles:Zt}=(0,L.GX)(d);d.labelStyle=ht;const{shapeSvg:Tt,bbox:vt,label:de}=yield yt(Gt,d,Xt(d)),nt=vt.width+(d.padding??0),At=vt.height+(d.padding??0),J=Math.max(5,.1*At),{cssStyles:Q}=d,Mt=[...It(nt/2,-At/2,J,30,-90,0),{x:-nt/2-J,y:J},...It(nt/2+2*J,-J,J,20,-180,-270),...It(nt/2+2*J,J,J,20,-90,-180),{x:-nt/2-J,y:-At/2},...It(nt/2,At/2,J,20,0,90)],pe=[{x:nt/2,y:-At/2-J},{x:-nt/2,y:-At/2-J},...It(nt/2,-At/2,J,20,-90,0),{x:-nt/2-J,y:-J},...It(nt/2+.1*nt,-J,J,20,-180,-270),...It(nt/2+.1*nt,J,J,20,-90,-180),{x:-nt/2-J,y:At/2},...It(nt/2,At/2,J,20,0,90),{x:-nt/2,y:At/2+J},{x:nt/2,y:At/2+J}],Ae=$t.A.svg(Tt),tt=(0,L.Fr)(d,{fill:"none"});"handDrawn"!==d.look&&(tt.roughness=0,tt.fillStyle="solid");const T=j(Mt).replace("Z",""),F=Ae.path(T,tt),ot=j(pe),_t=Ae.path(ot,{...tt}),Ie=Tt.insert("g",":first-child");return Ie.insert(()=>_t,":first-child").attr("stroke-opacity",0),Ie.insert(()=>F,":first-child"),Ie.attr("class","text"),Q&&"handDrawn"!==d.look&&Ie.selectAll("path").attr("style",Q),Zt&&"handDrawn"!==d.look&&Ie.selectAll("path").attr("style",Zt),Ie.attr("transform",`translate(${J}, 0)`),de.attr("transform",`translate(${-nt/2+J-(vt.x-(vt.left??0))},${-At/2+(d.padding??0)/2-(vt.y-(vt.top??0))})`),bt(d,Ie),d.intersect=function(Qt){return oe.polygon(d,pe,Qt)},Tt})).apply(this,arguments)}function Ce(Gt,d,ht,Zt=100,Tt=0,vt=180){const de=[],nt=Tt*Math.PI/180,Q=(vt*Math.PI/180-nt)/(Zt-1);for(let Mt=0;Mt<Zt;Mt++){const pe=nt+Mt*Q,Ae=Gt+ht*Math.cos(pe),tt=d+ht*Math.sin(pe);de.push({x:Ae,y:tt})}return de}function Ot(Gt,d){return Jt.apply(this,arguments)}function Jt(){return(Jt=(0,lt.A)(function*(Gt,d){const{labelStyles:ht,nodeStyles:Zt}=(0,L.GX)(d);d.labelStyle=ht;const{shapeSvg:Tt,bbox:vt,label:de}=yield yt(Gt,d,Xt(d)),nt=vt.width+(d.padding??0),At=vt.height+(d.padding??0),J=Math.max(5,.1*At),{cssStyles:Q}=d,Mt=[...Ce(nt/2,-At/2,J,20,-90,0),{x:nt/2+J,y:-J},...Ce(nt/2+2*J,-J,J,20,-180,-270),...Ce(nt/2+2*J,J,J,20,-90,-180),{x:nt/2+J,y:At/2},...Ce(nt/2,At/2,J,20,0,90)],pe=[{x:-nt/2,y:-At/2-J},{x:nt/2,y:-At/2-J},...Ce(nt/2,-At/2,J,20,-90,0),{x:nt/2+J,y:-J},...Ce(nt/2+2*J,-J,J,20,-180,-270),...Ce(nt/2+2*J,J,J,20,-90,-180),{x:nt/2+J,y:At/2},...Ce(nt/2,At/2,J,20,0,90),{x:nt/2,y:At/2+J},{x:-nt/2,y:At/2+J}],Ae=$t.A.svg(Tt),tt=(0,L.Fr)(d,{fill:"none"});"handDrawn"!==d.look&&(tt.roughness=0,tt.fillStyle="solid");const T=j(Mt).replace("Z",""),F=Ae.path(T,tt),ot=j(pe),_t=Ae.path(ot,{...tt}),Ie=Tt.insert("g",":first-child");return Ie.insert(()=>_t,":first-child").attr("stroke-opacity",0),Ie.insert(()=>F,":first-child"),Ie.attr("class","text"),Q&&"handDrawn"!==d.look&&Ie.selectAll("path").attr("style",Q),Zt&&"handDrawn"!==d.look&&Ie.selectAll("path").attr("style",Zt),Ie.attr("transform",`translate(${-J}, 0)`),de.attr("transform",`translate(${-nt/2+(d.padding??0)/2-(vt.x-(vt.left??0))},${-At/2+(d.padding??0)/2-(vt.y-(vt.top??0))})`),bt(d,Ie),d.intersect=function(Qt){return oe.polygon(d,pe,Qt)},Tt})).apply(this,arguments)}function fe(Gt,d,ht,Zt=100,Tt=0,vt=180){const de=[],nt=Tt*Math.PI/180,Q=(vt*Math.PI/180-nt)/(Zt-1);for(let Mt=0;Mt<Zt;Mt++){const pe=nt+Mt*Q,Ae=Gt+ht*Math.cos(pe),tt=d+ht*Math.sin(pe);de.push({x:-Ae,y:-tt})}return de}function Be(Gt,d){return Ze.apply(this,arguments)}function Ze(){return(Ze=(0,lt.A)(function*(Gt,d){const{labelStyles:ht,nodeStyles:Zt}=(0,L.GX)(d);d.labelStyle=ht;const{shapeSvg:Tt,bbox:vt,label:de}=yield yt(Gt,d,Xt(d)),nt=vt.width+(d.padding??0),At=vt.height+(d.padding??0),J=Math.max(5,.1*At),{cssStyles:Q}=d,Mt=[...fe(nt/2,-At/2,J,30,-90,0),{x:-nt/2-J,y:J},...fe(nt/2+2*J,-J,J,20,-180,-270),...fe(nt/2+2*J,J,J,20,-90,-180),{x:-nt/2-J,y:-At/2},...fe(nt/2,At/2,J,20,0,90)],pe=[...fe(-nt/2+J+J/2,-At/2,J,20,-90,-180),{x:nt/2-J/2,y:J},...fe(-nt/2-J/2,-J,J,20,0,90),...fe(-nt/2-J/2,J,J,20,-90,0),{x:nt/2-J/2,y:-J},...fe(-nt/2+J+J/2,At/2,J,30,-180,-270)],Ae=[{x:nt/2,y:-At/2-J},{x:-nt/2,y:-At/2-J},...fe(nt/2,-At/2,J,20,-90,0),{x:-nt/2-J,y:-J},...fe(nt/2+2*J,-J,J,20,-180,-270),...fe(nt/2+2*J,J,J,20,-90,-180),{x:-nt/2-J,y:At/2},...fe(nt/2,At/2,J,20,0,90),{x:-nt/2,y:At/2+J},{x:nt/2-J-J/2,y:At/2+J},...fe(-nt/2+J+J/2,-At/2,J,20,-90,-180),{x:nt/2-J/2,y:J},...fe(-nt/2-J/2,-J,J,20,0,90),...fe(-nt/2-J/2,J,J,20,-90,0),{x:nt/2-J/2,y:-J},...fe(-nt/2+J+J/2,At/2,J,30,-180,-270)],tt=$t.A.svg(Tt),l=(0,L.Fr)(d,{fill:"none"});"handDrawn"!==d.look&&(l.roughness=0,l.fillStyle="solid");const F=j(Mt).replace("Z",""),ot=tt.path(F,l),Ie=j(pe).replace("Z",""),Qt=tt.path(Ie,l),Ue=j(Ae),yr=tt.path(Ue,{...l}),Dr=Tt.insert("g",":first-child");return Dr.insert(()=>yr,":first-child").attr("stroke-opacity",0),Dr.insert(()=>ot,":first-child"),Dr.insert(()=>Qt,":first-child"),Dr.attr("class","text"),Q&&"handDrawn"!==d.look&&Dr.selectAll("path").attr("style",Q),Zt&&"handDrawn"!==d.look&&Dr.selectAll("path").attr("style",Zt),Dr.attr("transform",`translate(${J-J/4}, 0)`),de.attr("transform",`translate(${-nt/2+(d.padding??0)/2-(vt.x-(vt.left??0))},${-At/2+(d.padding??0)/2-(vt.y-(vt.top??0))})`),bt(d,Dr),d.intersect=function(aa){return oe.polygon(d,Ae,aa)},Tt})).apply(this,arguments)}function ye(Gt,d){return kr.apply(this,arguments)}function kr(){return(kr=(0,lt.A)(function*(Gt,d){const{labelStyles:ht,nodeStyles:Zt}=(0,L.GX)(d);d.labelStyle=ht;const{shapeSvg:Tt,bbox:vt}=yield yt(Gt,d,Xt(d)),At=Math.max(80,1.25*(vt.width+2*(d.padding??0)),d?.width??0),J=Math.max(20,vt.height+2*(d.padding??0),d?.height??0),Q=J/2,{cssStyles:Mt}=d,pe=$t.A.svg(Tt),Ae=(0,L.Fr)(d,{});"handDrawn"!==d.look&&(Ae.roughness=0,Ae.fillStyle="solid");const T=At-Q,F=J/4,ot=[{x:T,y:0},{x:F,y:0},{x:0,y:J/2},{x:F,y:J},{x:T,y:J},...Fe(-T,-J/2,Q,50,270,90)],_t=j(ot),Ie=pe.path(_t,Ae),Qt=Tt.insert(()=>Ie,":first-child");return Qt.attr("class","basic label-container"),Mt&&"handDrawn"!==d.look&&Qt.selectChildren("path").attr("style",Mt),Zt&&"handDrawn"!==d.look&&Qt.selectChildren("path").attr("style",Zt),Qt.attr("transform",`translate(${-At/2}, ${-J/2})`),bt(d,Qt),d.intersect=function(Ue){return oe.polygon(d,ot,Ue)},Tt})).apply(this,arguments)}(0,q.K2)(qe,"anchor"),(0,q.K2)(We,"generateArcPoints"),(0,q.K2)(Ct,"bowTieRect"),(0,q.K2)(R,"insertPolygonShape"),(0,q.K2)(O,"card"),(0,q.K2)(xt,"choice"),(0,q.K2)(it,"circle"),(0,q.K2)(Et,"createLine"),(0,q.K2)(ut,"crossedCircle"),(0,q.K2)(It,"generateCirclePoints"),(0,q.K2)(G,"curlyBraceLeft"),(0,q.K2)(Ce,"generateCirclePoints"),(0,q.K2)(Ot,"curlyBraceRight"),(0,q.K2)(fe,"generateCirclePoints"),(0,q.K2)(Be,"curlyBraces"),(0,q.K2)(ye,"curvedTrapezoid");var ur=(0,q.K2)((Gt,d,ht,Zt,Tt,vt)=>[`M${Gt},${d+vt}`,`a${Tt},${vt} 0,0,0 ${ht},0`,`a${Tt},${vt} 0,0,0 ${-ht},0`,`l0,${Zt}`,`a${Tt},${vt} 0,0,0 ${ht},0`,"l0,"+-Zt].join(" "),"createCylinderPathD"),Kt=(0,q.K2)((Gt,d,ht,Zt,Tt,vt)=>[`M${Gt},${d+vt}`,`M${Gt+ht},${d+vt}`,`a${Tt},${vt} 0,0,0 ${-ht},0`,`l0,${Zt}`,`a${Tt},${vt} 0,0,0 ${ht},0`,"l0,"+-Zt].join(" "),"createOuterCylinderPathD"),Pe=(0,q.K2)((Gt,d,ht,Zt,Tt,vt)=>[`M${Gt-ht/2},${-Zt/2}`,`a${Tt},${vt} 0,0,0 ${ht},0`].join(" "),"createInnerCylinderPathD");function ir(Gt,d){return me.apply(this,arguments)}function me(){return(me=(0,lt.A)(function*(Gt,d){const{labelStyles:ht,nodeStyles:Zt}=(0,L.GX)(d);d.labelStyle=ht;const{shapeSvg:Tt,bbox:vt,label:de}=yield yt(Gt,d,Xt(d)),nt=Math.max(vt.width+d.padding,d.width??0),At=nt/2,J=At/(2.5+nt/50),Q=Math.max(vt.height+J+d.padding,d.height??0);let Mt;const{cssStyles:pe}=d;if("handDrawn"===d.look){const Ae=$t.A.svg(Tt),tt=Kt(0,0,nt,Q,At,J),l=Pe(0,J,nt,Q,At,J),T=Ae.path(tt,(0,L.Fr)(d,{})),F=Ae.path(l,(0,L.Fr)(d,{fill:"none"}));Mt=Tt.insert(()=>F,":first-child"),Mt=Tt.insert(()=>T,":first-child"),Mt.attr("class","basic label-container"),pe&&Mt.attr("style",pe)}else{const Ae=ur(0,0,nt,Q,At,J);Mt=Tt.insert("path",":first-child").attr("d",Ae).attr("class","basic label-container").attr("style",(0,Rt.KL)(pe)).attr("style",Zt)}return Mt.attr("label-offset-y",J),Mt.attr("transform",`translate(${-nt/2}, ${-(Q/2+J)})`),bt(d,Mt),de.attr("transform",`translate(${-vt.width/2-(vt.x-(vt.left??0))}, ${-vt.height/2+(d.padding??0)/1.5-(vt.y-(vt.top??0))})`),d.intersect=function(Ae){const tt=oe.rect(d,Ae),l=tt.x-(d.x??0);if(0!=At&&(Math.abs(l)<(d.width??0)/2||Math.abs(l)==(d.width??0)/2&&Math.abs(tt.y-(d.y??0))>(d.height??0)/2-J)){let T=J*J*(1-l*l/(At*At));T>0&&(T=Math.sqrt(T)),T=J-T,Ae.y-(d.y??0)>0&&(T=-T),tt.y+=T}return tt},Tt})).apply(this,arguments)}function ce(Gt,d){return ke.apply(this,arguments)}function ke(){return(ke=(0,lt.A)(function*(Gt,d){const{labelStyles:ht,nodeStyles:Zt}=(0,L.GX)(d);d.labelStyle=ht;const{shapeSvg:Tt,bbox:vt,label:de}=yield yt(Gt,d,Xt(d)),At=vt.height+d.padding,J=.2*At,Q=-(vt.width+d.padding)/2,Mt=-At/2-J/2,{cssStyles:pe}=d,Ae=$t.A.svg(Tt),tt=(0,L.Fr)(d,{});"handDrawn"!==d.look&&(tt.roughness=0,tt.fillStyle="solid");const T=Ae.polygon([{x:Q,y:Mt+J},{x:-Q,y:Mt+J},{x:-Q,y:-Mt},{x:Q,y:-Mt},{x:Q,y:Mt},{x:-Q,y:Mt},{x:-Q,y:Mt+J}].map(ot=>[ot.x,ot.y]),tt),F=Tt.insert(()=>T,":first-child");return F.attr("class","basic label-container"),pe&&"handDrawn"!==d.look&&F.selectAll("path").attr("style",pe),Zt&&"handDrawn"!==d.look&&F.selectAll("path").attr("style",Zt),de.attr("transform",`translate(${Q+(d.padding??0)/2-(vt.x-(vt.left??0))}, ${Mt+J+(d.padding??0)/2-(vt.y-(vt.top??0))})`),bt(d,F),d.intersect=function(ot){return oe.rect(d,ot)},Tt})).apply(this,arguments)}function Te(Gt,d){return er.apply(this,arguments)}function er(){return(er=(0,lt.A)(function*(Gt,d){const{labelStyles:ht,nodeStyles:Zt}=(0,L.GX)(d);d.labelStyle=ht;const{shapeSvg:Tt,bbox:vt,halfPadding:de}=yield yt(Gt,d,Xt(d)),At=vt.width/2+de+5,J=vt.width/2+de;let Q;const{cssStyles:Mt}=d;if("handDrawn"===d.look){const pe=$t.A.svg(Tt),Ae=(0,L.Fr)(d,{roughness:.2,strokeWidth:2.5}),tt=(0,L.Fr)(d,{roughness:.2,strokeWidth:1.5}),l=pe.circle(0,0,2*At,Ae),T=pe.circle(0,0,2*J,tt);Q=Tt.insert("g",":first-child"),Q.attr("class",(0,Rt.KL)(d.cssClasses)).attr("style",(0,Rt.KL)(Mt)),Q.node()?.appendChild(l),Q.node()?.appendChild(T)}else{Q=Tt.insert("g",":first-child");const pe=Q.insert("circle",":first-child"),Ae=Q.insert("circle");Q.attr("class","basic label-container").attr("style",Zt),pe.attr("class","outer-circle").attr("style",Zt).attr("r",At).attr("cx",0).attr("cy",0),Ae.attr("class","inner-circle").attr("style",Zt).attr("r",J).attr("cx",0).attr("cy",0)}return bt(d,Q),d.intersect=function(pe){return q.Rm.info("DoubleCircle intersect",d,At,pe),oe.circle(d,At,pe)},Tt})).apply(this,arguments)}function Xe(Gt,d,{config:{themeVariables:ht}}){const{labelStyles:Zt,nodeStyles:Tt}=(0,L.GX)(d);d.label="",d.labelStyle=Zt;const vt=Gt.insert("g").attr("class",Xt(d)).attr("id",d.domId??d.id),{cssStyles:nt}=d,At=$t.A.svg(vt),{nodeBorder:J}=ht,Q=(0,L.Fr)(d,{fillStyle:"solid"});"handDrawn"!==d.look&&(Q.roughness=0);const Mt=At.circle(0,0,14,Q),pe=vt.insert(()=>Mt,":first-child");return pe.selectAll("path").attr("style",`fill: ${J} !important;`),nt&&nt.length>0&&"handDrawn"!==d.look&&pe.selectAll("path").attr("style",nt),Tt&&"handDrawn"!==d.look&&pe.selectAll("path").attr("style",Tt),bt(d,pe),d.intersect=function(Ae){return q.Rm.info("filledCircle intersect",d,{radius:7,point:Ae}),oe.circle(d,7,Ae)},vt}function Ir(Gt,d){return Ee.apply(this,arguments)}function Ee(){return(Ee=(0,lt.A)(function*(Gt,d){const{labelStyles:ht,nodeStyles:Zt}=(0,L.GX)(d);d.labelStyle=ht;const{shapeSvg:Tt,bbox:vt,label:de}=yield yt(Gt,d,Xt(d)),nt=vt.width+(d.padding??0),At=nt+vt.height,J=nt+vt.height,Q=[{x:0,y:-At},{x:J,y:-At},{x:J/2,y:0}],{cssStyles:Mt}=d,pe=$t.A.svg(Tt),Ae=(0,L.Fr)(d,{});"handDrawn"!==d.look&&(Ae.roughness=0,Ae.fillStyle="solid");const tt=j(Q),l=pe.path(tt,Ae),T=Tt.insert(()=>l,":first-child").attr("transform",`translate(${-At/2}, ${At/2})`);return Mt&&"handDrawn"!==d.look&&T.selectChildren("path").attr("style",Mt),Zt&&"handDrawn"!==d.look&&T.selectChildren("path").attr("style",Zt),d.width=nt,d.height=At,bt(d,T),de.attr("transform",`translate(${-vt.width/2-(vt.x-(vt.left??0))}, ${-At/2+(d.padding??0)/2+(vt.y-(vt.top??0))})`),d.intersect=function(F){return q.Rm.info("Triangle intersect",d,Q,F),oe.polygon(d,Q,F)},Tt})).apply(this,arguments)}function qr(Gt,d,{dir:ht,config:{state:Zt,themeVariables:Tt}}){const{nodeStyles:vt}=(0,L.GX)(d);d.label="";const de=Gt.insert("g").attr("class",Xt(d)).attr("id",d.domId??d.id),{cssStyles:nt}=d;let At=Math.max(70,d?.width??0),J=Math.max(10,d?.height??0);"LR"===ht&&(At=Math.max(10,d?.width??0),J=Math.max(70,d?.height??0));const Q=-1*At/2,Mt=-1*J/2,pe=$t.A.svg(de),Ae=(0,L.Fr)(d,{stroke:Tt.lineColor,fill:Tt.lineColor});"handDrawn"!==d.look&&(Ae.roughness=0,Ae.fillStyle="solid");const tt=pe.rectangle(Q,Mt,At,J,Ae),l=de.insert(()=>tt,":first-child");nt&&"handDrawn"!==d.look&&l.selectAll("path").attr("style",nt),vt&&"handDrawn"!==d.look&&l.selectAll("path").attr("style",vt),bt(d,l);const T=Zt?.padding??0;return d.width&&d.height&&(d.width+=T/2||0,d.height+=T/2||0),d.intersect=function(F){return oe.rect(d,F)},de}function nr(Gt,d){return te.apply(this,arguments)}function te(){return(te=(0,lt.A)(function*(Gt,d){const{labelStyles:ht,nodeStyles:Zt}=(0,L.GX)(d);d.labelStyle=ht;const{shapeSvg:de,bbox:nt}=yield yt(Gt,d,Xt(d)),At=Math.max(80,nt.width+2*(d.padding??0),d?.width??0),J=Math.max(50,nt.height+2*(d.padding??0),d?.height??0),Q=J/2,{cssStyles:Mt}=d,pe=$t.A.svg(de),Ae=(0,L.Fr)(d,{});"handDrawn"!==d.look&&(Ae.roughness=0,Ae.fillStyle="solid");const tt=[{x:-At/2,y:-J/2},{x:At/2-Q,y:-J/2},...Fe(-At/2+Q,0,Q,50,90,270),{x:At/2-Q,y:J/2},{x:-At/2,y:J/2}],l=j(tt),T=pe.path(l,Ae),F=de.insert(()=>T,":first-child");return F.attr("class","basic label-container"),Mt&&"handDrawn"!==d.look&&F.selectChildren("path").attr("style",Mt),Zt&&"handDrawn"!==d.look&&F.selectChildren("path").attr("style",Zt),bt(d,F),d.intersect=function(ot){return q.Rm.info("Pill intersect",d,{radius:Q,point:ot}),oe.polygon(d,tt,ot)},de})).apply(this,arguments)}function ne(Gt,d){return Le.apply(this,arguments)}function Le(){return(Le=(0,lt.A)(function*(Gt,d){const{labelStyles:ht,nodeStyles:Zt}=(0,L.GX)(d);d.labelStyle=ht;const{shapeSvg:Tt,bbox:vt}=yield yt(Gt,d,Xt(d)),de=vt.height+(d.padding??0),nt=vt.width+2.5*(d.padding??0),{cssStyles:At}=d,J=$t.A.svg(Tt),Q=(0,L.Fr)(d,{});"handDrawn"!==d.look&&(Q.roughness=0,Q.fillStyle="solid");let Mt=nt/2;Mt+=Mt/6;const Ae=de/2,l=Mt-Ae/2,T=[{x:-l,y:-Ae},{x:0,y:-Ae},{x:l,y:-Ae},{x:Mt,y:0},{x:l,y:Ae},{x:0,y:Ae},{x:-l,y:Ae},{x:-Mt,y:0}],F=j(T),ot=J.path(F,Q),_t=Tt.insert(()=>ot,":first-child");return _t.attr("class","basic label-container"),At&&"handDrawn"!==d.look&&_t.selectChildren("path").attr("style",At),Zt&&"handDrawn"!==d.look&&_t.selectChildren("path").attr("style",Zt),d.width=nt,d.height=de,bt(d,_t),d.intersect=function(Ie){return oe.polygon(d,T,Ie)},Tt})).apply(this,arguments)}function tr(Gt,d){return g.apply(this,arguments)}function g(){return(g=(0,lt.A)(function*(Gt,d){const{labelStyles:ht,nodeStyles:Zt}=(0,L.GX)(d);d.label="",d.labelStyle=ht;const{shapeSvg:Tt}=yield yt(Gt,d,Xt(d)),vt=Math.max(30,d?.width??0),de=Math.max(30,d?.height??0),{cssStyles:nt}=d,At=$t.A.svg(Tt),J=(0,L.Fr)(d,{});"handDrawn"!==d.look&&(J.roughness=0,J.fillStyle="solid");const Q=[{x:0,y:0},{x:vt,y:0},{x:0,y:de},{x:vt,y:de}],Mt=j(Q),pe=At.path(Mt,J),Ae=Tt.insert(()=>pe,":first-child");return Ae.attr("class","basic label-container"),nt&&"handDrawn"!==d.look&&Ae.selectChildren("path").attr("style",nt),Zt&&"handDrawn"!==d.look&&Ae.selectChildren("path").attr("style",Zt),Ae.attr("transform",`translate(${-vt/2}, ${-de/2})`),bt(d,Ae),d.intersect=function(tt){return q.Rm.info("Pill intersect",d,{points:Q}),oe.polygon(d,Q,tt)},Tt})).apply(this,arguments)}function y(Gt,d,ht){return E.apply(this,arguments)}function E(){return(E=(0,lt.A)(function*(Gt,d,{config:{themeVariables:ht,flowchart:Zt}}){const{labelStyles:Tt}=(0,L.GX)(d);d.labelStyle=Tt;const nt=Math.max(d.assetHeight??48,d.assetWidth??48),At=Zt?.wrappingWidth;d.width=Math.max(nt,At??0);const{shapeSvg:J,bbox:Q,label:Mt}=yield yt(Gt,d,"icon-shape default"),pe="t"===d.pos,Ae=nt,tt=nt,{nodeBorder:l}=ht,{stylesMap:T}=(0,L.WW)(d),F=-tt/2,ot=-Ae/2,_t=d.label?8:0,Ie=$t.A.svg(J),Qt=(0,L.Fr)(d,{stroke:"none",fill:"none"});"handDrawn"!==d.look&&(Qt.roughness=0,Qt.fillStyle="solid");const Ue=Ie.rectangle(F,ot,tt,Ae,Qt),yr=Math.max(tt,Q.width),Dr=Ae+Q.height+_t,aa=Ie.rectangle(-yr/2,-Dr/2,yr,Dr,{...Qt,fill:"transparent",stroke:"none"}),Nr=J.insert(()=>Ue,":first-child"),oa=J.insert(()=>aa);if(d.icon){const Ca=J.append("g");Ca.html(`<g>${yield(0,D.WY)(d.icon,{height:nt,width:nt,fallbackPrefix:""})}</g>`);const ka=Ca.node().getBBox(),Za=ka.height,Wa=ka.y;Ca.attr("transform",`translate(${-ka.width/2-ka.x},${pe?Q.height/2+_t/2-Za/2-Wa:-Q.height/2-_t/2-Za/2-Wa})`),Ca.attr("style",`color: ${T.get("stroke")??l};`)}return Mt.attr("transform",`translate(${-Q.width/2-(Q.x-(Q.left??0))},${pe?-Dr/2:Dr/2-Q.height})`),Nr.attr("transform",`translate(0,${pe?Q.height/2+_t/2:-Q.height/2-_t/2})`),bt(d,oa),d.intersect=function(Ca){if(q.Rm.info("iconSquare intersect",d,Ca),!d.label)return oe.rect(d,Ca);const ka=d.x??0,Pa=d.y??0,Za=d.height??0;let $a=[];return $a=pe?[{x:ka-Q.width/2,y:Pa-Za/2},{x:ka+Q.width/2,y:Pa-Za/2},{x:ka+Q.width/2,y:Pa-Za/2+Q.height+_t},{x:ka+tt/2,y:Pa-Za/2+Q.height+_t},{x:ka+tt/2,y:Pa+Za/2},{x:ka-tt/2,y:Pa+Za/2},{x:ka-tt/2,y:Pa-Za/2+Q.height+_t},{x:ka-Q.width/2,y:Pa-Za/2+Q.height+_t}]:[{x:ka-tt/2,y:Pa-Za/2},{x:ka+tt/2,y:Pa-Za/2},{x:ka+tt/2,y:Pa-Za/2+Ae},{x:ka+Q.width/2,y:Pa-Za/2+Ae},{x:ka+Q.width/2/2,y:Pa+Za/2},{x:ka-Q.width/2,y:Pa+Za/2},{x:ka-Q.width/2,y:Pa-Za/2+Ae},{x:ka-tt/2,y:Pa-Za/2+Ae}],oe.polygon(d,$a,Ca)},J})).apply(this,arguments)}function P(Gt,d,ht){return b.apply(this,arguments)}function b(){return(b=(0,lt.A)(function*(Gt,d,{config:{themeVariables:ht,flowchart:Zt}}){const{labelStyles:Tt}=(0,L.GX)(d);d.labelStyle=Tt;const nt=Math.max(d.assetHeight??48,d.assetWidth??48),At=Zt?.wrappingWidth;d.width=Math.max(nt,At??0);const{shapeSvg:J,bbox:Q,label:Mt}=yield yt(Gt,d,"icon-shape default"),Ae=d.label?8:0,tt="t"===d.pos,{nodeBorder:l,mainBkg:T}=ht,{stylesMap:F}=(0,L.WW)(d),ot=$t.A.svg(J),_t=(0,L.Fr)(d,{});"handDrawn"!==d.look&&(_t.roughness=0,_t.fillStyle="solid");const Ie=F.get("fill");_t.stroke=Ie??T;const Qt=J.append("g");d.icon&&Qt.html(`<g>${yield(0,D.WY)(d.icon,{height:nt,width:nt,fallbackPrefix:""})}</g>`);const Ue=Qt.node().getBBox(),yr=Ue.width,Dr=Ue.height,aa=Ue.x,Nr=Ue.y,oa=Math.max(yr,Dr)*Math.SQRT2+40,Ca=ot.circle(0,0,oa,_t),ka=Math.max(oa,Q.width),Pa=oa+Q.height+Ae,Za=ot.rectangle(-ka/2,-Pa/2,ka,Pa,{..._t,fill:"transparent",stroke:"none"}),$a=J.insert(()=>Ca,":first-child"),Wa=J.insert(()=>Za);return Qt.attr("transform",`translate(${-yr/2-aa},${tt?Q.height/2+Ae/2-Dr/2-Nr:-Q.height/2-Ae/2-Dr/2-Nr})`),Qt.attr("style",`color: ${F.get("stroke")??l};`),Mt.attr("transform",`translate(${-Q.width/2-(Q.x-(Q.left??0))},${tt?-Pa/2:Pa/2-Q.height})`),$a.attr("transform",`translate(0,${tt?Q.height/2+Ae/2:-Q.height/2-Ae/2})`),bt(d,Wa),d.intersect=function(hi){return q.Rm.info("iconSquare intersect",d,hi),oe.rect(d,hi)},J})).apply(this,arguments)}function z(Gt,d,ht){return p.apply(this,arguments)}function p(){return(p=(0,lt.A)(function*(Gt,d,{config:{themeVariables:ht,flowchart:Zt}}){const{labelStyles:Tt}=(0,L.GX)(d);d.labelStyle=Tt;const nt=Math.max(d.assetHeight??48,d.assetWidth??48),At=Zt?.wrappingWidth;d.width=Math.max(nt,At??0);const{shapeSvg:J,bbox:Q,halfPadding:Mt,label:pe}=yield yt(Gt,d,"icon-shape default"),Ae="t"===d.pos,tt=nt+2*Mt,l=nt+2*Mt,{nodeBorder:T,mainBkg:F}=ht,{stylesMap:ot}=(0,L.WW)(d),_t=-l/2,Ie=-tt/2,Qt=d.label?8:0,Ue=$t.A.svg(J),yr=(0,L.Fr)(d,{});"handDrawn"!==d.look&&(yr.roughness=0,yr.fillStyle="solid");const Dr=ot.get("fill");yr.stroke=Dr??F;const aa=Ue.path(ge(_t,Ie,l,tt,5),yr),Nr=Math.max(l,Q.width),oa=tt+Q.height+Qt,Ca=Ue.rectangle(-Nr/2,-oa/2,Nr,oa,{...yr,fill:"transparent",stroke:"none"}),ka=J.insert(()=>aa,":first-child").attr("class","icon-shape2"),Pa=J.insert(()=>Ca);if(d.icon){const Za=J.append("g");Za.html(`<g>${yield(0,D.WY)(d.icon,{height:nt,width:nt,fallbackPrefix:""})}</g>`);const $a=Za.node().getBBox(),hi=$a.height,$n=$a.y;Za.attr("transform",`translate(${-$a.width/2-$a.x},${Ae?Q.height/2+Qt/2-hi/2-$n:-Q.height/2-Qt/2-hi/2-$n})`),Za.attr("style",`color: ${ot.get("stroke")??T};`)}return pe.attr("transform",`translate(${-Q.width/2-(Q.x-(Q.left??0))},${Ae?-oa/2:oa/2-Q.height})`),ka.attr("transform",`translate(0,${Ae?Q.height/2+Qt/2:-Q.height/2-Qt/2})`),bt(d,Pa),d.intersect=function(Za){if(q.Rm.info("iconSquare intersect",d,Za),!d.label)return oe.rect(d,Za);const $a=d.x??0,Wa=d.y??0,hi=d.height??0;let ji=[];return ji=Ae?[{x:$a-Q.width/2,y:Wa-hi/2},{x:$a+Q.width/2,y:Wa-hi/2},{x:$a+Q.width/2,y:Wa-hi/2+Q.height+Qt},{x:$a+l/2,y:Wa-hi/2+Q.height+Qt},{x:$a+l/2,y:Wa+hi/2},{x:$a-l/2,y:Wa+hi/2},{x:$a-l/2,y:Wa-hi/2+Q.height+Qt},{x:$a-Q.width/2,y:Wa-hi/2+Q.height+Qt}]:[{x:$a-l/2,y:Wa-hi/2},{x:$a+l/2,y:Wa-hi/2},{x:$a+l/2,y:Wa-hi/2+tt},{x:$a+Q.width/2,y:Wa-hi/2+tt},{x:$a+Q.width/2/2,y:Wa+hi/2},{x:$a-Q.width/2,y:Wa+hi/2},{x:$a-Q.width/2,y:Wa-hi/2+tt},{x:$a-l/2,y:Wa-hi/2+tt}],oe.polygon(d,ji,Za)},J})).apply(this,arguments)}function x(Gt,d,ht){return C.apply(this,arguments)}function C(){return(C=(0,lt.A)(function*(Gt,d,{config:{themeVariables:ht,flowchart:Zt}}){const{labelStyles:Tt}=(0,L.GX)(d);d.labelStyle=Tt;const nt=Math.max(d.assetHeight??48,d.assetWidth??48),At=Zt?.wrappingWidth;d.width=Math.max(nt,At??0);const{shapeSvg:J,bbox:Q,halfPadding:Mt,label:pe}=yield yt(Gt,d,"icon-shape default"),Ae="t"===d.pos,tt=nt+2*Mt,l=nt+2*Mt,{nodeBorder:T,mainBkg:F}=ht,{stylesMap:ot}=(0,L.WW)(d),_t=-l/2,Ie=-tt/2,Qt=d.label?8:0,Ue=$t.A.svg(J),yr=(0,L.Fr)(d,{});"handDrawn"!==d.look&&(yr.roughness=0,yr.fillStyle="solid");const Dr=ot.get("fill");yr.stroke=Dr??F;const aa=Ue.path(ge(_t,Ie,l,tt,.1),yr),Nr=Math.max(l,Q.width),oa=tt+Q.height+Qt,Ca=Ue.rectangle(-Nr/2,-oa/2,Nr,oa,{...yr,fill:"transparent",stroke:"none"}),ka=J.insert(()=>aa,":first-child"),Pa=J.insert(()=>Ca);if(d.icon){const Za=J.append("g");Za.html(`<g>${yield(0,D.WY)(d.icon,{height:nt,width:nt,fallbackPrefix:""})}</g>`);const $a=Za.node().getBBox(),hi=$a.height,$n=$a.y;Za.attr("transform",`translate(${-$a.width/2-$a.x},${Ae?Q.height/2+Qt/2-hi/2-$n:-Q.height/2-Qt/2-hi/2-$n})`),Za.attr("style",`color: ${ot.get("stroke")??T};`)}return pe.attr("transform",`translate(${-Q.width/2-(Q.x-(Q.left??0))},${Ae?-oa/2:oa/2-Q.height})`),ka.attr("transform",`translate(0,${Ae?Q.height/2+Qt/2:-Q.height/2-Qt/2})`),bt(d,Pa),d.intersect=function(Za){if(q.Rm.info("iconSquare intersect",d,Za),!d.label)return oe.rect(d,Za);const $a=d.x??0,Wa=d.y??0,hi=d.height??0;let ji=[];return ji=Ae?[{x:$a-Q.width/2,y:Wa-hi/2},{x:$a+Q.width/2,y:Wa-hi/2},{x:$a+Q.width/2,y:Wa-hi/2+Q.height+Qt},{x:$a+l/2,y:Wa-hi/2+Q.height+Qt},{x:$a+l/2,y:Wa+hi/2},{x:$a-l/2,y:Wa+hi/2},{x:$a-l/2,y:Wa-hi/2+Q.height+Qt},{x:$a-Q.width/2,y:Wa-hi/2+Q.height+Qt}]:[{x:$a-l/2,y:Wa-hi/2},{x:$a+l/2,y:Wa-hi/2},{x:$a+l/2,y:Wa-hi/2+tt},{x:$a+Q.width/2,y:Wa-hi/2+tt},{x:$a+Q.width/2/2,y:Wa+hi/2},{x:$a-Q.width/2,y:Wa+hi/2},{x:$a-Q.width/2,y:Wa-hi/2+tt},{x:$a-l/2,y:Wa-hi/2+tt}],oe.polygon(d,ji,Za)},J})).apply(this,arguments)}function w(Gt,d,ht){return $.apply(this,arguments)}function $(){return($=(0,lt.A)(function*(Gt,d,{config:{flowchart:ht}}){const Zt=new Image;Zt.src=d?.img??"",yield Zt.decode();const Tt=Number(Zt.naturalWidth.toString().replace("px","")),vt=Number(Zt.naturalHeight.toString().replace("px",""));d.imageAspectRatio=Tt/vt;const{labelStyles:de}=(0,L.GX)(d);d.labelStyle=de;const nt=ht?.wrappingWidth;d.defaultWidth=ht?.wrappingWidth;const At=Math.max(d.label?nt??0:0,d?.assetWidth??Tt),J="on"===d.constraint&&d?.assetHeight?d.assetHeight*d.imageAspectRatio:At,Q="on"===d.constraint?J/d.imageAspectRatio:d?.assetHeight??vt;d.width=Math.max(J,nt??0);const{shapeSvg:Mt,bbox:pe,label:Ae}=yield yt(Gt,d,"image-shape default"),tt="t"===d.pos,l=-J/2,T=-Q/2,F=d.label?8:0,ot=$t.A.svg(Mt),_t=(0,L.Fr)(d,{});"handDrawn"!==d.look&&(_t.roughness=0,_t.fillStyle="solid");const Ie=ot.rectangle(l,T,J,Q,_t),Qt=Math.max(J,pe.width),Ue=Q+pe.height+F,yr=ot.rectangle(-Qt/2,-Ue/2,Qt,Ue,{..._t,fill:"none",stroke:"none"}),Dr=Mt.insert(()=>Ie,":first-child"),aa=Mt.insert(()=>yr);if(d.img){const Nr=Mt.append("image");Nr.attr("href",d.img),Nr.attr("width",J),Nr.attr("height",Q),Nr.attr("preserveAspectRatio","none"),Nr.attr("transform",`translate(${-J/2},${tt?Ue/2-Q:-Ue/2})`)}return Ae.attr("transform",`translate(${-pe.width/2-(pe.x-(pe.left??0))},${tt?-Q/2-pe.height/2-F/2:Q/2-pe.height/2+F/2})`),Dr.attr("transform",`translate(0,${tt?pe.height/2+F/2:-pe.height/2-F/2})`),bt(d,aa),d.intersect=function(Nr){if(q.Rm.info("iconSquare intersect",d,Nr),!d.label)return oe.rect(d,Nr);const oa=d.x??0,Ca=d.y??0,ka=d.height??0;let Pa=[];return Pa=tt?[{x:oa-pe.width/2,y:Ca-ka/2},{x:oa+pe.width/2,y:Ca-ka/2},{x:oa+pe.width/2,y:Ca-ka/2+pe.height+F},{x:oa+J/2,y:Ca-ka/2+pe.height+F},{x:oa+J/2,y:Ca+ka/2},{x:oa-J/2,y:Ca+ka/2},{x:oa-J/2,y:Ca-ka/2+pe.height+F},{x:oa-pe.width/2,y:Ca-ka/2+pe.height+F}]:[{x:oa-J/2,y:Ca-ka/2},{x:oa+J/2,y:Ca-ka/2},{x:oa+J/2,y:Ca-ka/2+Q},{x:oa+pe.width/2,y:Ca-ka/2+Q},{x:oa+pe.width/2/2,y:Ca+ka/2},{x:oa-pe.width/2,y:Ca+ka/2},{x:oa-pe.width/2,y:Ca-ka/2+Q},{x:oa-J/2,y:Ca-ka/2+Q}],oe.polygon(d,Pa,Nr)},Mt})).apply(this,arguments)}function ct(Gt,d){return kt.apply(this,arguments)}function kt(){return(kt=(0,lt.A)(function*(Gt,d){const{labelStyles:ht,nodeStyles:Zt}=(0,L.GX)(d);d.labelStyle=ht;const{shapeSvg:Tt,bbox:vt}=yield yt(Gt,d,Xt(d)),de=Math.max(vt.width+2*(d.padding??0),d?.width??0),nt=Math.max(vt.height+2*(d.padding??0),d?.height??0),At=[{x:0,y:0},{x:de,y:0},{x:de+3*nt/6,y:-nt},{x:-3*nt/6,y:-nt}];let J;const{cssStyles:Q}=d;if("handDrawn"===d.look){const Mt=$t.A.svg(Tt),pe=(0,L.Fr)(d,{}),Ae=j(At),tt=Mt.path(Ae,pe);J=Tt.insert(()=>tt,":first-child").attr("transform",`translate(${-de/2}, ${nt/2})`),Q&&J.attr("style",Q)}else J=R(Tt,de,nt,At);return Zt&&J.attr("style",Zt),d.width=de,d.height=nt,bt(d,J),d.intersect=function(Mt){return oe.polygon(d,At,Mt)},Tt})).apply(this,arguments)}function Ut(Gt,d,ht){return Ht.apply(this,arguments)}function Ht(){return(Ht=(0,lt.A)(function*(Gt,d,ht){const{labelStyles:Zt,nodeStyles:Tt}=(0,L.GX)(d);d.labelStyle=Zt;const{shapeSvg:vt,bbox:de}=yield yt(Gt,d,Xt(d)),nt=Math.max(de.width+2*ht.labelPaddingX,d?.width||0),At=Math.max(de.height+2*ht.labelPaddingY,d?.height||0),J=-nt/2,Q=-At/2;let Mt,{rx:pe,ry:Ae}=d;const{cssStyles:tt}=d;if(ht?.rx&&ht.ry&&(pe=ht.rx,Ae=ht.ry),"handDrawn"===d.look){const l=$t.A.svg(vt),T=(0,L.Fr)(d,{}),F=pe||Ae?l.path(ge(J,Q,nt,At,pe||0),T):l.rectangle(J,Q,nt,At,T);Mt=vt.insert(()=>F,":first-child"),Mt.attr("class","basic label-container").attr("style",(0,Rt.KL)(tt))}else Mt=vt.insert("rect",":first-child"),Mt.attr("class","basic label-container").attr("style",Tt).attr("rx",(0,Rt.KL)(pe)).attr("ry",(0,Rt.KL)(Ae)).attr("x",J).attr("y",Q).attr("width",nt).attr("height",At);return bt(d,Mt),d.calcIntersect=function(l,T){return oe.rect(l,T)},d.intersect=function(l){return oe.rect(d,l)},vt})).apply(this,arguments)}function zt(Gt,d){return ue.apply(this,arguments)}function ue(){return(ue=(0,lt.A)(function*(Gt,d){const{shapeSvg:ht,bbox:Zt,label:Tt}=yield yt(Gt,d,"label"),vt=ht.insert("rect",":first-child");return vt.attr("width",.1).attr("height",.1),ht.attr("class","label edgeLabel"),Tt.attr("transform",`translate(${-Zt.width/2-(Zt.x-(Zt.left??0))}, ${-Zt.height/2-(Zt.y-(Zt.top??0))})`),bt(d,vt),d.intersect=function(At){return oe.rect(d,At)},ht})).apply(this,arguments)}function je(Gt,d){return ze.apply(this,arguments)}function ze(){return(ze=(0,lt.A)(function*(Gt,d){const{labelStyles:ht,nodeStyles:Zt}=(0,L.GX)(d);d.labelStyle=ht;const{shapeSvg:Tt,bbox:vt}=yield yt(Gt,d,Xt(d)),de=Math.max(vt.width+(d.padding??0),d?.width??0),nt=Math.max(vt.height+(d.padding??0),d?.height??0),At=[{x:0,y:0},{x:de+3*nt/6,y:0},{x:de,y:-nt},{x:-3*nt/6,y:-nt}];let J;const{cssStyles:Q}=d;if("handDrawn"===d.look){const Mt=$t.A.svg(Tt),pe=(0,L.Fr)(d,{}),Ae=j(At),tt=Mt.path(Ae,pe);J=Tt.insert(()=>tt,":first-child").attr("transform",`translate(${-de/2}, ${nt/2})`),Q&&J.attr("style",Q)}else J=R(Tt,de,nt,At);return Zt&&J.attr("style",Zt),d.width=de,d.height=nt,bt(d,J),d.intersect=function(Mt){return oe.polygon(d,At,Mt)},Tt})).apply(this,arguments)}function Cr(Gt,d){return cr.apply(this,arguments)}function cr(){return(cr=(0,lt.A)(function*(Gt,d){const{labelStyles:ht,nodeStyles:Zt}=(0,L.GX)(d);d.labelStyle=ht;const{shapeSvg:Tt,bbox:vt}=yield yt(Gt,d,Xt(d)),de=Math.max(vt.width+(d.padding??0),d?.width??0),nt=Math.max(vt.height+(d.padding??0),d?.height??0),At=[{x:-3*nt/6,y:0},{x:de,y:0},{x:de+3*nt/6,y:-nt},{x:0,y:-nt}];let J;const{cssStyles:Q}=d;if("handDrawn"===d.look){const Mt=$t.A.svg(Tt),pe=(0,L.Fr)(d,{}),Ae=j(At),tt=Mt.path(Ae,pe);J=Tt.insert(()=>tt,":first-child").attr("transform",`translate(${-de/2}, ${nt/2})`),Q&&J.attr("style",Q)}else J=R(Tt,de,nt,At);return Zt&&J.attr("style",Zt),d.width=de,d.height=nt,bt(d,J),d.intersect=function(Mt){return oe.polygon(d,At,Mt)},Tt})).apply(this,arguments)}function sr(Gt,d){const{labelStyles:ht,nodeStyles:Zt}=(0,L.GX)(d);d.label="",d.labelStyle=ht;const Tt=Gt.insert("g").attr("class",Xt(d)).attr("id",d.domId??d.id),{cssStyles:vt}=d,de=Math.max(35,d?.width??0),nt=Math.max(35,d?.height??0),J=[{x:de,y:0},{x:0,y:nt+3.5},{x:de-14,y:nt+3.5},{x:0,y:2*nt},{x:de,y:nt-3.5},{x:14,y:nt-3.5}],Q=$t.A.svg(Tt),Mt=(0,L.Fr)(d,{});"handDrawn"!==d.look&&(Mt.roughness=0,Mt.fillStyle="solid");const pe=j(J),Ae=Q.path(pe,Mt),tt=Tt.insert(()=>Ae,":first-child");return vt&&"handDrawn"!==d.look&&tt.selectAll("path").attr("style",vt),Zt&&"handDrawn"!==d.look&&tt.selectAll("path").attr("style",Zt),tt.attr("transform",`translate(-${de/2},${-nt})`),bt(d,tt),d.intersect=function(l){return q.Rm.info("lightningBolt intersect",d,l),oe.polygon(d,J,l)},Tt}(0,q.K2)(ir,"cylinder"),(0,q.K2)(ce,"dividedRectangle"),(0,q.K2)(Te,"doublecircle"),(0,q.K2)(Xe,"filledCircle"),(0,q.K2)(Ir,"flippedTriangle"),(0,q.K2)(qr,"forkJoin"),(0,q.K2)(nr,"halfRoundedRectangle"),(0,q.K2)(ne,"hexagon"),(0,q.K2)(tr,"hourglass"),(0,q.K2)(y,"icon"),(0,q.K2)(P,"iconCircle"),(0,q.K2)(z,"iconRounded"),(0,q.K2)(x,"iconSquare"),(0,q.K2)(w,"imageSquare"),(0,q.K2)(ct,"inv_trapezoid"),(0,q.K2)(Ut,"drawRect"),(0,q.K2)(zt,"labelRect"),(0,q.K2)(je,"lean_left"),(0,q.K2)(Cr,"lean_right"),(0,q.K2)(sr,"lightningBolt");var $e=(0,q.K2)((Gt,d,ht,Zt,Tt,vt,de)=>[`M${Gt},${d+vt}`,`a${Tt},${vt} 0,0,0 ${ht},0`,`a${Tt},${vt} 0,0,0 ${-ht},0`,`l0,${Zt}`,`a${Tt},${vt} 0,0,0 ${ht},0`,"l0,"+-Zt,`M${Gt},${d+vt+de}`,`a${Tt},${vt} 0,0,0 ${ht},0`].join(" "),"createCylinderPathD"),He=(0,q.K2)((Gt,d,ht,Zt,Tt,vt,de)=>[`M${Gt},${d+vt}`,`M${Gt+ht},${d+vt}`,`a${Tt},${vt} 0,0,0 ${-ht},0`,`l0,${Zt}`,`a${Tt},${vt} 0,0,0 ${ht},0`,"l0,"+-Zt,`M${Gt},${d+vt+de}`,`a${Tt},${vt} 0,0,0 ${ht},0`].join(" "),"createOuterCylinderPathD"),Pr=(0,q.K2)((Gt,d,ht,Zt,Tt,vt)=>[`M${Gt-ht/2},${-Zt/2}`,`a${Tt},${vt} 0,0,0 ${ht},0`].join(" "),"createInnerCylinderPathD");function wr(Gt,d){return Vr.apply(this,arguments)}function Vr(){return(Vr=(0,lt.A)(function*(Gt,d){const{labelStyles:ht,nodeStyles:Zt}=(0,L.GX)(d);d.labelStyle=ht;const{shapeSvg:Tt,bbox:vt,label:de}=yield yt(Gt,d,Xt(d)),nt=Math.max(vt.width+(d.padding??0),d.width??0),At=nt/2,J=At/(2.5+nt/50),Q=Math.max(vt.height+J+(d.padding??0),d.height??0),Mt=.1*Q;let pe;const{cssStyles:Ae}=d;if("handDrawn"===d.look){const tt=$t.A.svg(Tt),l=He(0,0,nt,Q,At,J,Mt),T=Pr(0,J,nt,Q,At,J),F=(0,L.Fr)(d,{}),ot=tt.path(l,F),_t=tt.path(T,F);Tt.insert(()=>_t,":first-child").attr("class","line"),pe=Tt.insert(()=>ot,":first-child"),pe.attr("class","basic label-container"),Ae&&pe.attr("style",Ae)}else{const tt=$e(0,0,nt,Q,At,J,Mt);pe=Tt.insert("path",":first-child").attr("d",tt).attr("class","basic label-container").attr("style",(0,Rt.KL)(Ae)).attr("style",Zt)}return pe.attr("label-offset-y",J),pe.attr("transform",`translate(${-nt/2}, ${-(Q/2+J)})`),bt(d,pe),de.attr("transform",`translate(${-vt.width/2-(vt.x-(vt.left??0))}, ${-vt.height/2+J-(vt.y-(vt.top??0))})`),d.intersect=function(tt){const l=oe.rect(d,tt),T=l.x-(d.x??0);if(0!=At&&(Math.abs(T)<(d.width??0)/2||Math.abs(T)==(d.width??0)/2&&Math.abs(l.y-(d.y??0))>(d.height??0)/2-J)){let F=J*J*(1-T*T/(At*At));F>0&&(F=Math.sqrt(F)),F=J-F,tt.y-(d.y??0)>0&&(F=-F),l.y+=F}return l},Tt})).apply(this,arguments)}function xr(Gt,d){return Ba.apply(this,arguments)}function Ba(){return(Ba=(0,lt.A)(function*(Gt,d){const{labelStyles:ht,nodeStyles:Zt}=(0,L.GX)(d);d.labelStyle=ht;const{shapeSvg:Tt,bbox:vt,label:de}=yield yt(Gt,d,Xt(d)),nt=Math.max(vt.width+2*(d.padding??0),d?.width??0),At=Math.max(vt.height+2*(d.padding??0),d?.height??0),J=At/4,Q=At+J,{cssStyles:Mt}=d,pe=$t.A.svg(Tt),Ae=(0,L.Fr)(d,{});"handDrawn"!==d.look&&(Ae.roughness=0,Ae.fillStyle="solid");const tt=[{x:-nt/2-nt/2*.1,y:-Q/2},{x:-nt/2-nt/2*.1,y:Q/2},...fr(-nt/2-nt/2*.1,Q/2,nt/2+nt/2*.1,Q/2,J,.8),{x:nt/2+nt/2*.1,y:-Q/2},{x:-nt/2-nt/2*.1,y:-Q/2},{x:-nt/2,y:-Q/2},{x:-nt/2,y:Q/2*1.1},{x:-nt/2,y:-Q/2}],l=pe.polygon(tt.map(F=>[F.x,F.y]),Ae),T=Tt.insert(()=>l,":first-child");return T.attr("class","basic label-container"),Mt&&"handDrawn"!==d.look&&T.selectAll("path").attr("style",Mt),Zt&&"handDrawn"!==d.look&&T.selectAll("path").attr("style",Zt),T.attr("transform",`translate(0,${-J/2})`),de.attr("transform",`translate(${-nt/2+(d.padding??0)+nt/2*.1/2-(vt.x-(vt.left??0))},${-At/2+(d.padding??0)-J/2-(vt.y-(vt.top??0))})`),bt(d,T),d.intersect=function(F){return oe.polygon(d,tt,F)},Tt})).apply(this,arguments)}function Zr(Gt,d){return Oa.apply(this,arguments)}function Oa(){return(Oa=(0,lt.A)(function*(Gt,d){const{labelStyles:ht,nodeStyles:Zt}=(0,L.GX)(d);d.labelStyle=ht;const{shapeSvg:Tt,bbox:vt,label:de}=yield yt(Gt,d,Xt(d)),nt=Math.max(vt.width+2*(d.padding??0),d?.width??0),At=Math.max(vt.height+2*(d.padding??0),d?.height??0),Q=-nt/2,Mt=-At/2,{cssStyles:pe}=d,Ae=$t.A.svg(Tt),tt=(0,L.Fr)(d,{}),l=[{x:Q-5,y:Mt+5},{x:Q-5,y:Mt+At+5},{x:Q+nt-5,y:Mt+At+5},{x:Q+nt-5,y:Mt+At},{x:Q+nt,y:Mt+At},{x:Q+nt,y:Mt+At-5},{x:Q+nt+5,y:Mt+At-5},{x:Q+nt+5,y:Mt-5},{x:Q+5,y:Mt-5},{x:Q+5,y:Mt},{x:Q,y:Mt},{x:Q,y:Mt+5}],T=[{x:Q,y:Mt+5},{x:Q+nt-5,y:Mt+5},{x:Q+nt-5,y:Mt+At},{x:Q+nt,y:Mt+At},{x:Q+nt,y:Mt},{x:Q,y:Mt}];"handDrawn"!==d.look&&(tt.roughness=0,tt.fillStyle="solid");const F=j(l),ot=Ae.path(F,tt),_t=j(T),Ie=Ae.path(_t,{...tt,fill:"none"}),Qt=Tt.insert(()=>Ie,":first-child");return Qt.insert(()=>ot,":first-child"),Qt.attr("class","basic label-container"),pe&&"handDrawn"!==d.look&&Qt.selectAll("path").attr("style",pe),Zt&&"handDrawn"!==d.look&&Qt.selectAll("path").attr("style",Zt),de.attr("transform",`translate(${-vt.width/2-5-(vt.x-(vt.left??0))}, ${-vt.height/2+5-(vt.y-(vt.top??0))})`),bt(d,Qt),d.intersect=function(Ue){return oe.polygon(d,l,Ue)},Tt})).apply(this,arguments)}function Qr(Gt,d){return ra.apply(this,arguments)}function ra(){return(ra=(0,lt.A)(function*(Gt,d){const{labelStyles:ht,nodeStyles:Zt}=(0,L.GX)(d);d.labelStyle=ht;const{shapeSvg:Tt,bbox:vt,label:de}=yield yt(Gt,d,Xt(d)),nt=Math.max(vt.width+2*(d.padding??0),d?.width??0),At=Math.max(vt.height+2*(d.padding??0),d?.height??0),J=At/4,Q=At+J,Mt=-nt/2,pe=-Q/2,{cssStyles:tt}=d,l=fr(Mt-5,pe+Q+5,Mt+nt-5,pe+Q+5,J,.8),T=l?.[l.length-1],F=[{x:Mt-5,y:pe+5},{x:Mt-5,y:pe+Q+5},...l,{x:Mt+nt-5,y:T.y-5},{x:Mt+nt,y:T.y-5},{x:Mt+nt,y:T.y-10},{x:Mt+nt+5,y:T.y-10},{x:Mt+nt+5,y:pe-5},{x:Mt+5,y:pe-5},{x:Mt+5,y:pe},{x:Mt,y:pe},{x:Mt,y:pe+5}],ot=[{x:Mt,y:pe+5},{x:Mt+nt-5,y:pe+5},{x:Mt+nt-5,y:T.y-5},{x:Mt+nt,y:T.y-5},{x:Mt+nt,y:pe},{x:Mt,y:pe}],_t=$t.A.svg(Tt),Ie=(0,L.Fr)(d,{});"handDrawn"!==d.look&&(Ie.roughness=0,Ie.fillStyle="solid");const Qt=j(F),Ue=_t.path(Qt,Ie),yr=j(ot),Dr=_t.path(yr,Ie),aa=Tt.insert(()=>Ue,":first-child");return aa.insert(()=>Dr),aa.attr("class","basic label-container"),tt&&"handDrawn"!==d.look&&aa.selectAll("path").attr("style",tt),Zt&&"handDrawn"!==d.look&&aa.selectAll("path").attr("style",Zt),aa.attr("transform",`translate(0,${-J/2})`),de.attr("transform",`translate(${-vt.width/2-5-(vt.x-(vt.left??0))}, ${-vt.height/2+5-J/2-(vt.y-(vt.top??0))})`),bt(d,aa),d.intersect=function(Nr){return oe.polygon(d,F,Nr)},Tt})).apply(this,arguments)}function Xr(Gt,d,ht){return Rr.apply(this,arguments)}function Rr(){return(Rr=(0,lt.A)(function*(Gt,d,{config:{themeVariables:ht}}){const{labelStyles:Zt,nodeStyles:Tt}=(0,L.GX)(d);d.labelStyle=Zt,d.useHtmlLabels||!1!==(0,dt.zj)().flowchart?.htmlLabels||(d.centerLabel=!0);const{shapeSvg:de,bbox:nt,label:At}=yield yt(Gt,d,Xt(d)),J=Math.max(nt.width+2*(d.padding??0),d?.width??0),Q=Math.max(nt.height+2*(d.padding??0),d?.height??0),Mt=-J/2,pe=-Q/2,{cssStyles:Ae}=d,tt=$t.A.svg(de),l=(0,L.Fr)(d,{fill:ht.noteBkgColor,stroke:ht.noteBorderColor});"handDrawn"!==d.look&&(l.roughness=0,l.fillStyle="solid");const T=tt.rectangle(Mt,pe,J,Q,l),F=de.insert(()=>T,":first-child");return F.attr("class","basic label-container"),Ae&&"handDrawn"!==d.look&&F.selectAll("path").attr("style",Ae),Tt&&"handDrawn"!==d.look&&F.selectAll("path").attr("style",Tt),At.attr("transform",`translate(${-nt.width/2-(nt.x-(nt.left??0))}, ${-nt.height/2-(nt.y-(nt.top??0))})`),bt(d,F),d.intersect=function(ot){return oe.rect(d,ot)},de})).apply(this,arguments)}(0,q.K2)(wr,"linedCylinder"),(0,q.K2)(xr,"linedWaveEdgedRect"),(0,q.K2)(Zr,"multiRect"),(0,q.K2)(Qr,"multiWaveEdgedRectangle"),(0,q.K2)(Xr,"note");var Tr=(0,q.K2)((Gt,d,ht)=>[`M${Gt+ht/2},${d}`,`L${Gt+ht},${d-ht/2}`,`L${Gt+ht/2},${d-ht}`,`L${Gt},${d-ht/2}`,"Z"].join(" "),"createDecisionBoxPathD");function N(Gt,d){return Vt.apply(this,arguments)}function Vt(){return(Vt=(0,lt.A)(function*(Gt,d){const{labelStyles:ht,nodeStyles:Zt}=(0,L.GX)(d);d.labelStyle=ht;const{shapeSvg:Tt,bbox:vt}=yield yt(Gt,d,Xt(d)),At=vt.width+d.padding+(vt.height+d.padding),Q=[{x:At/2,y:0},{x:At,y:-At/2},{x:At/2,y:-At},{x:0,y:-At/2}];let Mt;const{cssStyles:pe}=d;if("handDrawn"===d.look){const Ae=$t.A.svg(Tt),tt=(0,L.Fr)(d,{}),l=Tr(0,0,At),T=Ae.path(l,tt);Mt=Tt.insert(()=>T,":first-child").attr("transform",`translate(${-At/2+.5}, ${At/2})`),pe&&Mt.attr("style",pe)}else Mt=R(Tt,At,At,Q),Mt.attr("transform",`translate(${-At/2+.5}, ${At/2})`);return Zt&&Mt.attr("style",Zt),bt(d,Mt),d.calcIntersect=function(Ae,tt){const l=Ae.width,F=oe.polygon(Ae,[{x:l/2,y:0},{x:l,y:-l/2},{x:l/2,y:-l},{x:0,y:-l/2}],tt);return{x:F.x-.5,y:F.y-.5}},d.intersect=function(Ae){return this.calcIntersect(d,Ae)},Tt})).apply(this,arguments)}function Ke(Gt,d){return rr.apply(this,arguments)}function rr(){return(rr=(0,lt.A)(function*(Gt,d){const{labelStyles:ht,nodeStyles:Zt}=(0,L.GX)(d);d.labelStyle=ht;const{shapeSvg:Tt,bbox:vt,label:de}=yield yt(Gt,d,Xt(d)),J=-Math.max(vt.width+(d.padding??0),d?.width??0)/2,Q=-Math.max(vt.height+(d.padding??0),d?.height??0)/2,Mt=Q/2,pe=[{x:J+Mt,y:Q},{x:J,y:0},{x:J+Mt,y:-Q},{x:-J,y:-Q},{x:-J,y:Q}],{cssStyles:Ae}=d,tt=$t.A.svg(Tt),l=(0,L.Fr)(d,{});"handDrawn"!==d.look&&(l.roughness=0,l.fillStyle="solid");const T=j(pe),F=tt.path(T,l),ot=Tt.insert(()=>F,":first-child");return ot.attr("class","basic label-container"),Ae&&"handDrawn"!==d.look&&ot.selectAll("path").attr("style",Ae),Zt&&"handDrawn"!==d.look&&ot.selectAll("path").attr("style",Zt),ot.attr("transform",`translate(${-Mt/2},0)`),de.attr("transform",`translate(${-Mt/2-vt.width/2-(vt.x-(vt.left??0))}, ${-vt.height/2-(vt.y-(vt.top??0))})`),bt(d,ot),d.intersect=function(_t){return oe.polygon(d,pe,_t)},Tt})).apply(this,arguments)}function ia(Gt,d){return hr.apply(this,arguments)}function hr(){return(hr=(0,lt.A)(function*(Gt,d){const{labelStyles:ht,nodeStyles:Zt}=(0,L.GX)(d);let Tt;d.labelStyle=ht,Tt=d.cssClasses?"node "+d.cssClasses:"node default";const vt=Gt.insert("g").attr("class",Tt).attr("id",d.domId||d.id),de=vt.insert("g"),nt=vt.insert("g").attr("class","label").attr("style",Zt),At=d.description,J=d.label,Q=nt.node().appendChild(yield Ar(J,d.labelStyle,!0,!0));let Mt={width:0,height:0};if((0,dt._3)((0,dt.D7)()?.flowchart?.htmlLabels)){const Dr=Q.children[0],aa=(0,A.Ltv)(Q);Mt=Dr.getBoundingClientRect(),aa.attr("width",Mt.width),aa.attr("height",Mt.height)}q.Rm.info("Text 2",At);const pe=At||[],Ae=Q.getBBox(),tt=nt.node().appendChild(yield Ar(pe.join?pe.join("<br/>"):pe,d.labelStyle,!0,!0)),l=tt.children[0],T=(0,A.Ltv)(tt);Mt=l.getBoundingClientRect(),T.attr("width",Mt.width),T.attr("height",Mt.height);const F=(d.padding||0)/2;(0,A.Ltv)(tt).attr("transform","translate( "+(Mt.width>Ae.width?0:(Ae.width-Mt.width)/2)+", "+(Ae.height+F+5)+")"),(0,A.Ltv)(Q).attr("transform","translate( "+(Mt.width<Ae.width?0:-(Ae.width-Mt.width)/2)+", 0)"),Mt=nt.node().getBBox(),nt.attr("transform","translate("+-Mt.width/2+", "+(-Mt.height/2-F+3)+")");const ot=Mt.width+(d.padding||0),_t=Mt.height+(d.padding||0),Ie=-Mt.width/2-F,Qt=-Mt.height/2-F;let Ue,yr;if("handDrawn"===d.look){const Dr=$t.A.svg(vt),aa=(0,L.Fr)(d,{}),Nr=Dr.path(ge(Ie,Qt,ot,_t,d.rx||0),aa),oa=Dr.line(-Mt.width/2-F,-Mt.height/2-F+Ae.height+F,Mt.width/2+F,-Mt.height/2-F+Ae.height+F,aa);yr=vt.insert(()=>(q.Rm.debug("Rough node insert CXC",Nr),oa),":first-child"),Ue=vt.insert(()=>(q.Rm.debug("Rough node insert CXC",Nr),Nr),":first-child")}else Ue=de.insert("rect",":first-child"),yr=de.insert("line"),Ue.attr("class","outer title-state").attr("style",Zt).attr("x",-Mt.width/2-F).attr("y",-Mt.height/2-F).attr("width",Mt.width+(d.padding||0)).attr("height",Mt.height+(d.padding||0)),yr.attr("class","divider").attr("x1",-Mt.width/2-F).attr("x2",Mt.width/2+F).attr("y1",-Mt.height/2-F+Ae.height+F).attr("y2",-Mt.height/2-F+Ae.height+F);return bt(d,Ue),d.intersect=function(Dr){return oe.rect(d,Dr)},vt})).apply(this,arguments)}function ga(Gt,d,ht,Zt,Tt,vt,de){const At=(Gt+ht)/2,J=(d+Zt)/2,Q=Math.atan2(Zt-d,ht-Gt),l=Math.sqrt(((ht-Gt)/2/Tt)**2+((Zt-d)/2/vt)**2);if(l>1)throw new Error("The given radii are too small to create an arc between the points.");const T=Math.sqrt(1-l**2),F=At+T*vt*Math.sin(Q)*(de?-1:1),ot=J-T*Tt*Math.cos(Q)*(de?-1:1),_t=Math.atan2((d-ot)/vt,(Gt-F)/Tt);let Qt=Math.atan2((Zt-ot)/vt,(ht-F)/Tt)-_t;de&&Qt<0&&(Qt+=2*Math.PI),!de&&Qt>0&&(Qt-=2*Math.PI);const Ue=[];for(let yr=0;yr<20;yr++){const aa=_t+yr/19*Qt,Nr=F+Tt*Math.cos(aa),oa=ot+vt*Math.sin(aa);Ue.push({x:Nr,y:oa})}return Ue}function or(Gt,d){return _a.apply(this,arguments)}function _a(){return(_a=(0,lt.A)(function*(Gt,d){const{labelStyles:ht,nodeStyles:Zt}=(0,L.GX)(d);d.labelStyle=ht;const{shapeSvg:Tt,bbox:vt}=yield yt(Gt,d,Xt(d)),de=d?.padding??0,nt=d?.padding??0,At=(d?.width?d?.width:vt.width)+2*de,J=(d?.height?d?.height:vt.height)+2*nt,Q=d.radius||5,Mt=d.taper||5,{cssStyles:pe}=d,Ae=$t.A.svg(Tt),tt=(0,L.Fr)(d,{});d.stroke&&(tt.stroke=d.stroke),"handDrawn"!==d.look&&(tt.roughness=0,tt.fillStyle="solid");const l=[{x:-At/2+Mt,y:-J/2},{x:At/2-Mt,y:-J/2},...ga(At/2-Mt,-J/2,At/2,-J/2+Mt,Q,Q,!0),{x:At/2,y:-J/2+Mt},{x:At/2,y:J/2-Mt},...ga(At/2,J/2-Mt,At/2-Mt,J/2,Q,Q,!0),{x:At/2-Mt,y:J/2},{x:-At/2+Mt,y:J/2},...ga(-At/2+Mt,J/2,-At/2,J/2-Mt,Q,Q,!0),{x:-At/2,y:J/2-Mt},{x:-At/2,y:-J/2+Mt},...ga(-At/2,-J/2+Mt,-At/2+Mt,-J/2,Q,Q,!0)],T=j(l),F=Ae.path(T,tt),ot=Tt.insert(()=>F,":first-child");return ot.attr("class","basic label-container outer-path"),pe&&"handDrawn"!==d.look&&ot.selectChildren("path").attr("style",pe),Zt&&"handDrawn"!==d.look&&ot.selectChildren("path").attr("style",Zt),bt(d,ot),d.intersect=function(_t){return oe.polygon(d,l,_t)},Tt})).apply(this,arguments)}function Ma(Gt,d){return Ra.apply(this,arguments)}function Ra(){return(Ra=(0,lt.A)(function*(Gt,d){const{labelStyles:ht,nodeStyles:Zt}=(0,L.GX)(d);d.labelStyle=ht;const{shapeSvg:Tt,bbox:vt,label:de}=yield yt(Gt,d,Xt(d)),nt=d?.padding??0,At=Math.max(vt.width+2*(d.padding??0),d?.width??0),J=Math.max(vt.height+2*(d.padding??0),d?.height??0),Q=-vt.width/2-nt,Mt=-vt.height/2-nt,{cssStyles:pe}=d,Ae=$t.A.svg(Tt),tt=(0,L.Fr)(d,{});"handDrawn"!==d.look&&(tt.roughness=0,tt.fillStyle="solid");const T=Ae.polygon([{x:Q,y:Mt},{x:Q+At+8,y:Mt},{x:Q+At+8,y:Mt+J},{x:Q-8,y:Mt+J},{x:Q-8,y:Mt},{x:Q,y:Mt},{x:Q,y:Mt+J}].map(ot=>[ot.x,ot.y]),tt),F=Tt.insert(()=>T,":first-child");return F.attr("class","basic label-container").attr("style",(0,Rt.KL)(pe)),Zt&&"handDrawn"!==d.look&&F.selectAll("path").attr("style",Zt),pe&&"handDrawn"!==d.look&&F.selectAll("path").attr("style",Zt),de.attr("transform",`translate(${-At/2+4+(d.padding??0)-(vt.x-(vt.left??0))},${-J/2+(d.padding??0)-(vt.y-(vt.top??0))})`),bt(d,F),d.intersect=function(ot){return oe.rect(d,ot)},Tt})).apply(this,arguments)}function Jr(Gt,d){return ca.apply(this,arguments)}function ca(){return(ca=(0,lt.A)(function*(Gt,d){const{labelStyles:ht,nodeStyles:Zt}=(0,L.GX)(d);d.labelStyle=ht;const{shapeSvg:Tt,bbox:vt,label:de}=yield yt(Gt,d,Xt(d)),nt=Math.max(vt.width+2*(d.padding??0),d?.width??0),At=Math.max(vt.height+2*(d.padding??0),d?.height??0),J=-nt/2,Q=-At/2,{cssStyles:Mt}=d,pe=$t.A.svg(Tt),Ae=(0,L.Fr)(d,{});"handDrawn"!==d.look&&(Ae.roughness=0,Ae.fillStyle="solid");const tt=[{x:J,y:Q},{x:J,y:Q+At},{x:J+nt,y:Q+At},{x:J+nt,y:Q-At/2}],l=j(tt),T=pe.path(l,Ae),F=Tt.insert(()=>T,":first-child");return F.attr("class","basic label-container"),Mt&&"handDrawn"!==d.look&&F.selectChildren("path").attr("style",Mt),Zt&&"handDrawn"!==d.look&&F.selectChildren("path").attr("style",Zt),F.attr("transform",`translate(0, ${At/4})`),de.attr("transform",`translate(${-nt/2+(d.padding??0)-(vt.x-(vt.left??0))}, ${-At/4+(d.padding??0)-(vt.y-(vt.top??0))})`),bt(d,F),d.intersect=function(ot){return oe.polygon(d,tt,ot)},Tt})).apply(this,arguments)}function ha(Gt,d){return Yr.apply(this,arguments)}function Yr(){return(Yr=(0,lt.A)(function*(Gt,d){return Ut(Gt,d,{rx:0,ry:0,classes:"",labelPaddingX:d.labelPaddingX??2*(d?.padding||0),labelPaddingY:1*(d?.padding||0)})})).apply(this,arguments)}function Fa(Gt,d){return pr.apply(this,arguments)}function pr(){return(pr=(0,lt.A)(function*(Gt,d){const{labelStyles:ht,nodeStyles:Zt}=(0,L.GX)(d);d.labelStyle=ht;const{shapeSvg:Tt,bbox:vt}=yield yt(Gt,d,Xt(d)),de=vt.height+d.padding,nt=vt.width+de/4+d.padding,At=de/2,{cssStyles:J}=d,Q=$t.A.svg(Tt),Mt=(0,L.Fr)(d,{});"handDrawn"!==d.look&&(Mt.roughness=0,Mt.fillStyle="solid");const pe=[{x:-nt/2+At,y:-de/2},{x:nt/2-At,y:-de/2},...Fe(-nt/2+At,0,At,50,90,270),{x:nt/2-At,y:de/2},...Fe(nt/2-At,0,At,50,270,450)],Ae=j(pe),tt=Q.path(Ae,Mt),l=Tt.insert(()=>tt,":first-child");return l.attr("class","basic label-container outer-path"),J&&"handDrawn"!==d.look&&l.selectChildren("path").attr("style",J),Zt&&"handDrawn"!==d.look&&l.selectChildren("path").attr("style",Zt),bt(d,l),d.intersect=function(T){return oe.polygon(d,pe,T)},Tt})).apply(this,arguments)}function Va(Gt,d){return lr.apply(this,arguments)}function lr(){return(lr=(0,lt.A)(function*(Gt,d){return Ut(Gt,d,{rx:5,ry:5,classes:"flowchart-node"})})).apply(this,arguments)}function qa(Gt,d,{config:{themeVariables:ht}}){const{labelStyles:Zt,nodeStyles:Tt}=(0,L.GX)(d);d.labelStyle=Zt;const{cssStyles:vt}=d,{lineColor:de,stateBorder:nt,nodeBorder:At}=ht,J=Gt.insert("g").attr("class","node default").attr("id",d.domId||d.id),Q=$t.A.svg(J),Mt=(0,L.Fr)(d,{});"handDrawn"!==d.look&&(Mt.roughness=0,Mt.fillStyle="solid");const pe=Q.circle(0,0,14,{...Mt,stroke:de,strokeWidth:2}),Ae=nt??At,tt=Q.circle(0,0,5,{...Mt,fill:Ae,stroke:Ae,strokeWidth:2,fillStyle:"solid"}),l=J.insert(()=>pe,":first-child");return l.insert(()=>tt),vt&&l.selectAll("path").attr("style",vt),Tt&&l.selectAll("path").attr("style",Tt),bt(d,l),d.intersect=function(T){return oe.circle(d,7,T)},J}function za(Gt,d,{config:{themeVariables:ht}}){const{lineColor:Zt}=ht,Tt=Gt.insert("g").attr("class","node default").attr("id",d.domId||d.id);let vt;if("handDrawn"===d.look){const nt=$t.A.svg(Tt).circle(0,0,14,(0,L.ue)(Zt));vt=Tt.insert(()=>nt),vt.attr("class","state-start").attr("r",7).attr("width",14).attr("height",14)}else vt=Tt.insert("circle",":first-child"),vt.attr("class","state-start").attr("r",7).attr("width",14).attr("height",14);return bt(d,vt),d.intersect=function(de){return oe.circle(d,7,de)},Tt}function ja(Gt,d){return Sa.apply(this,arguments)}function Sa(){return(Sa=(0,lt.A)(function*(Gt,d){const{labelStyles:ht,nodeStyles:Zt}=(0,L.GX)(d);d.labelStyle=ht;const{shapeSvg:Tt,bbox:vt}=yield yt(Gt,d,Xt(d)),de=(d?.padding||0)/2,nt=vt.width+d.padding,At=vt.height+d.padding,J=-vt.width/2-de,Q=-vt.height/2-de,Mt=[{x:0,y:0},{x:nt,y:0},{x:nt,y:-At},{x:0,y:-At},{x:0,y:0},{x:-8,y:0},{x:nt+8,y:0},{x:nt+8,y:-At},{x:-8,y:-At},{x:-8,y:0}];if("handDrawn"===d.look){const pe=$t.A.svg(Tt),Ae=(0,L.Fr)(d,{}),tt=pe.rectangle(J-8,Q,nt+16,At,Ae),l=pe.line(J,Q,J,Q+At,Ae),T=pe.line(J+nt,Q,J+nt,Q+At,Ae);Tt.insert(()=>l,":first-child"),Tt.insert(()=>T,":first-child");const F=Tt.insert(()=>tt,":first-child"),{cssStyles:ot}=d;F.attr("class","basic label-container").attr("style",(0,Rt.KL)(ot)),bt(d,F)}else{const pe=R(Tt,nt,At,Mt);Zt&&pe.attr("style",Zt),bt(d,pe)}return d.intersect=function(pe){return oe.polygon(d,Mt,pe)},Tt})).apply(this,arguments)}function Ua(Gt,d){return Ka.apply(this,arguments)}function Ka(){return(Ka=(0,lt.A)(function*(Gt,d){const{labelStyles:ht,nodeStyles:Zt}=(0,L.GX)(d);d.labelStyle=ht;const{shapeSvg:Tt,bbox:vt}=yield yt(Gt,d,Xt(d)),de=Math.max(vt.width+2*(d.padding??0),d?.width??0),nt=Math.max(vt.height+2*(d.padding??0),d?.height??0),At=-de/2,J=-nt/2,Q=.2*nt,Mt=.2*nt,{cssStyles:pe}=d,Ae=$t.A.svg(Tt),tt=(0,L.Fr)(d,{}),l=[{x:At-Q/2,y:J},{x:At+de+Q/2,y:J},{x:At+de+Q/2,y:J+nt},{x:At-Q/2,y:J+nt}],T=[{x:At+de-Q/2,y:J+nt},{x:At+de+Q/2,y:J+nt},{x:At+de+Q/2,y:J+nt-Mt}];"handDrawn"!==d.look&&(tt.roughness=0,tt.fillStyle="solid");const F=j(l),ot=Ae.path(F,tt),_t=j(T),Ie=Ae.path(_t,{...tt,fillStyle:"solid"}),Qt=Tt.insert(()=>Ie,":first-child");return Qt.insert(()=>ot,":first-child"),Qt.attr("class","basic label-container"),pe&&"handDrawn"!==d.look&&Qt.selectAll("path").attr("style",pe),Zt&&"handDrawn"!==d.look&&Qt.selectAll("path").attr("style",Zt),bt(d,Qt),d.intersect=function(Ue){return oe.polygon(d,l,Ue)},Tt})).apply(this,arguments)}function fa(Gt,d){return di.apply(this,arguments)}function di(){return(di=(0,lt.A)(function*(Gt,d){const{labelStyles:ht,nodeStyles:Zt}=(0,L.GX)(d);d.labelStyle=ht;const{shapeSvg:Tt,bbox:vt,label:de}=yield yt(Gt,d,Xt(d)),nt=Math.max(vt.width+2*(d.padding??0),d?.width??0),At=Math.max(vt.height+2*(d.padding??0),d?.height??0),J=At/4,Q=.2*nt,Mt=.2*At,pe=At+J,{cssStyles:Ae}=d,tt=$t.A.svg(Tt),l=(0,L.Fr)(d,{});"handDrawn"!==d.look&&(l.roughness=0,l.fillStyle="solid");const T=[{x:-nt/2-nt/2*.1,y:pe/2},...fr(-nt/2-nt/2*.1,pe/2,nt/2+nt/2*.1,pe/2,J,.8),{x:nt/2+nt/2*.1,y:-pe/2},{x:-nt/2-nt/2*.1,y:-pe/2}],F=-nt/2+nt/2*.1,ot=-pe/2-.4*Mt,_t=[{x:F+nt-Q,y:1.4*(ot+At)},{x:F+nt,y:ot+At-Mt},{x:F+nt,y:.9*(ot+At)},...fr(F+nt,1.3*(ot+At),F+nt-Q,1.5*(ot+At),.03*-At,.5)],Ie=j(T),Qt=tt.path(Ie,l),Ue=j(_t),yr=tt.path(Ue,{...l,fillStyle:"solid"}),Dr=Tt.insert(()=>yr,":first-child");return Dr.insert(()=>Qt,":first-child"),Dr.attr("class","basic label-container"),Ae&&"handDrawn"!==d.look&&Dr.selectAll("path").attr("style",Ae),Zt&&"handDrawn"!==d.look&&Dr.selectAll("path").attr("style",Zt),Dr.attr("transform",`translate(0,${-J/2})`),de.attr("transform",`translate(${-nt/2+(d.padding??0)-(vt.x-(vt.left??0))},${-At/2+(d.padding??0)-J/2-(vt.y-(vt.top??0))})`),bt(d,Dr),d.intersect=function(aa){return oe.polygon(d,T,aa)},Tt})).apply(this,arguments)}function we(Gt,d){return Li.apply(this,arguments)}function Li(){return(Li=(0,lt.A)(function*(Gt,d){const{labelStyles:ht,nodeStyles:Zt}=(0,L.GX)(d);d.labelStyle=ht;const{shapeSvg:Tt,bbox:vt}=yield yt(Gt,d,Xt(d)),de=Math.max(vt.width+d.padding,d?.width||0),nt=Math.max(vt.height+d.padding,d?.height||0),At=-de/2,J=-nt/2,Q=Tt.insert("rect",":first-child");return Q.attr("class","text").attr("style",Zt).attr("rx",0).attr("ry",0).attr("x",At).attr("y",J).attr("width",de).attr("height",nt),bt(d,Q),d.intersect=function(Mt){return oe.rect(d,Mt)},Tt})).apply(this,arguments)}(0,q.K2)(N,"question"),(0,q.K2)(Ke,"rect_left_inv_arrow"),(0,q.K2)(ia,"rectWithTitle"),(0,q.K2)(ga,"generateArcPoints"),(0,q.K2)(or,"roundedRect"),(0,q.K2)(Ma,"shadedProcess"),(0,q.K2)(Jr,"slopedRect"),(0,q.K2)(ha,"squareRect"),(0,q.K2)(Fa,"stadium"),(0,q.K2)(Va,"state"),(0,q.K2)(qa,"stateEnd"),(0,q.K2)(za,"stateStart"),(0,q.K2)(ja,"subroutine"),(0,q.K2)(Ua,"taggedRect"),(0,q.K2)(fa,"taggedWaveEdgedRectangle"),(0,q.K2)(we,"text");var Me=(0,q.K2)((Gt,d,ht,Zt,Tt,vt)=>`M${Gt},${d}\n    a${Tt},${vt} 0,0,1 0,${-Zt}\n    l${ht},0\n    a${Tt},${vt} 0,0,1 0,${Zt}\n    M${ht},${-Zt}\n    a${Tt},${vt} 0,0,0 0,${Zt}\n    l${-ht},0`,"createCylinderPathD"),at=(0,q.K2)((Gt,d,ht,Zt,Tt,vt)=>[`M${Gt},${d}`,`M${Gt+ht},${d}`,`a${Tt},${vt} 0,0,0 0,${-Zt}`,`l${-ht},0`,`a${Tt},${vt} 0,0,0 0,${Zt}`,`l${ht},0`].join(" "),"createOuterCylinderPathD"),Dt=(0,q.K2)((Gt,d,ht,Zt,Tt,vt)=>[`M${Gt+ht/2},${-Zt/2}`,`a${Tt},${vt} 0,0,0 0,${Zt}`].join(" "),"createInnerCylinderPathD");function M(Gt,d){return jt.apply(this,arguments)}function jt(){return(jt=(0,lt.A)(function*(Gt,d){const{labelStyles:ht,nodeStyles:Zt}=(0,L.GX)(d);d.labelStyle=ht;const{shapeSvg:Tt,bbox:vt,label:de,halfPadding:nt}=yield yt(Gt,d,Xt(d)),At="neo"===d.look?2*nt:nt,J=vt.height+At,Q=J/2,Mt=Q/(2.5+J/50),pe=vt.width+Mt+At,{cssStyles:Ae}=d;let tt;if("handDrawn"===d.look){const l=$t.A.svg(Tt),T=at(0,0,pe,J,Mt,Q),F=Dt(0,0,pe,J,Mt,Q),ot=l.path(T,(0,L.Fr)(d,{})),_t=l.path(F,(0,L.Fr)(d,{fill:"none"}));tt=Tt.insert(()=>_t,":first-child"),tt=Tt.insert(()=>ot,":first-child"),tt.attr("class","basic label-container"),Ae&&tt.attr("style",Ae)}else{const l=Me(0,0,pe,J,Mt,Q);tt=Tt.insert("path",":first-child").attr("d",l).attr("class","basic label-container").attr("style",(0,Rt.KL)(Ae)).attr("style",Zt),tt.attr("class","basic label-container"),Ae&&tt.selectAll("path").attr("style",Ae),Zt&&tt.selectAll("path").attr("style",Zt)}return tt.attr("label-offset-x",Mt),tt.attr("transform",`translate(${-pe/2}, ${J/2} )`),de.attr("transform",`translate(${-vt.width/2-Mt-(vt.x-(vt.left??0))}, ${-vt.height/2-(vt.y-(vt.top??0))})`),bt(d,tt),d.intersect=function(l){const T=oe.rect(d,l),F=T.y-(d.y??0);if(0!=Q&&(Math.abs(F)<(d.height??0)/2||Math.abs(F)==(d.height??0)/2&&Math.abs(T.x-(d.x??0))>(d.width??0)/2-Mt)){let ot=Mt*Mt*(1-F*F/(Q*Q));0!=ot&&(ot=Math.sqrt(Math.abs(ot))),ot=Mt-ot,l.x-(d.x??0)>0&&(ot=-ot),T.x+=ot}return T},Tt})).apply(this,arguments)}function Ve(Gt,d){return gt.apply(this,arguments)}function gt(){return(gt=(0,lt.A)(function*(Gt,d){const{labelStyles:ht,nodeStyles:Zt}=(0,L.GX)(d);d.labelStyle=ht;const{shapeSvg:Tt,bbox:vt}=yield yt(Gt,d,Xt(d)),de=vt.width+d.padding,nt=vt.height+d.padding,At=[{x:-3*nt/6,y:0},{x:de+3*nt/6,y:0},{x:de,y:-nt},{x:0,y:-nt}];let J;const{cssStyles:Q}=d;if("handDrawn"===d.look){const Mt=$t.A.svg(Tt),pe=(0,L.Fr)(d,{}),Ae=j(At),tt=Mt.path(Ae,pe);J=Tt.insert(()=>tt,":first-child").attr("transform",`translate(${-de/2}, ${nt/2})`),Q&&J.attr("style",Q)}else J=R(Tt,de,nt,At);return Zt&&J.attr("style",Zt),d.width=de,d.height=nt,bt(d,J),d.intersect=function(Mt){return oe.polygon(d,At,Mt)},Tt})).apply(this,arguments)}function Lt(Gt,d){return Ft.apply(this,arguments)}function Ft(){return(Ft=(0,lt.A)(function*(Gt,d){const{labelStyles:ht,nodeStyles:Zt}=(0,L.GX)(d);d.labelStyle=ht;const{shapeSvg:Tt,bbox:vt}=yield yt(Gt,d,Xt(d)),At=Math.max(60,vt.width+2*(d.padding??0),d?.width??0),J=Math.max(20,vt.height+2*(d.padding??0),d?.height??0),{cssStyles:Q}=d,Mt=$t.A.svg(Tt),pe=(0,L.Fr)(d,{});"handDrawn"!==d.look&&(pe.roughness=0,pe.fillStyle="solid");const Ae=[{x:-At/2*.8,y:-J/2},{x:At/2*.8,y:-J/2},{x:At/2,y:-J/2*.6},{x:At/2,y:J/2},{x:-At/2,y:J/2},{x:-At/2,y:-J/2*.6}],tt=j(Ae),l=Mt.path(tt,pe),T=Tt.insert(()=>l,":first-child");return T.attr("class","basic label-container"),Q&&"handDrawn"!==d.look&&T.selectChildren("path").attr("style",Q),Zt&&"handDrawn"!==d.look&&T.selectChildren("path").attr("style",Zt),bt(d,T),d.intersect=function(F){return oe.polygon(d,Ae,F)},Tt})).apply(this,arguments)}function Qe(Gt,d){return ta.apply(this,arguments)}function ta(){return(ta=(0,lt.A)(function*(Gt,d){const{labelStyles:ht,nodeStyles:Zt}=(0,L.GX)(d);d.labelStyle=ht;const{shapeSvg:Tt,bbox:vt,label:de}=yield yt(Gt,d,Xt(d)),nt=(0,dt._3)((0,dt.D7)().flowchart?.htmlLabels),At=vt.width+(d.padding??0),J=At+vt.height,Q=At+vt.height,Mt=[{x:0,y:0},{x:Q,y:0},{x:Q/2,y:-J}],{cssStyles:pe}=d,Ae=$t.A.svg(Tt),tt=(0,L.Fr)(d,{});"handDrawn"!==d.look&&(tt.roughness=0,tt.fillStyle="solid");const l=j(Mt),T=Ae.path(l,tt),F=Tt.insert(()=>T,":first-child").attr("transform",`translate(${-J/2}, ${J/2})`);return pe&&"handDrawn"!==d.look&&F.selectChildren("path").attr("style",pe),Zt&&"handDrawn"!==d.look&&F.selectChildren("path").attr("style",Zt),d.width=At,d.height=J,bt(d,F),de.attr("transform",`translate(${-vt.width/2-(vt.x-(vt.left??0))}, ${J/2-(vt.height+(d.padding??0)/(nt?2:1)-(vt.y-(vt.top??0)))})`),d.intersect=function(ot){return q.Rm.info("Triangle intersect",d,Mt,ot),oe.polygon(d,Mt,ot)},Tt})).apply(this,arguments)}function Gr(Gt,d){return na.apply(this,arguments)}function na(){return(na=(0,lt.A)(function*(Gt,d){const{labelStyles:ht,nodeStyles:Zt}=(0,L.GX)(d);d.labelStyle=ht;const{shapeSvg:Tt,bbox:vt,label:de}=yield yt(Gt,d,Xt(d)),nt=Math.max(vt.width+2*(d.padding??0),d?.width??0),At=Math.max(vt.height+2*(d.padding??0),d?.height??0),J=At/8,Q=At+J,{cssStyles:Mt}=d,Ae=70-nt,tt=Ae>0?Ae/2:0,l=$t.A.svg(Tt),T=(0,L.Fr)(d,{});"handDrawn"!==d.look&&(T.roughness=0,T.fillStyle="solid");const F=[{x:-nt/2-tt,y:Q/2},...fr(-nt/2-tt,Q/2,nt/2+tt,Q/2,J,.8),{x:nt/2+tt,y:-Q/2},{x:-nt/2-tt,y:-Q/2}],ot=j(F),_t=l.path(ot,T),Ie=Tt.insert(()=>_t,":first-child");return Ie.attr("class","basic label-container"),Mt&&"handDrawn"!==d.look&&Ie.selectAll("path").attr("style",Mt),Zt&&"handDrawn"!==d.look&&Ie.selectAll("path").attr("style",Zt),Ie.attr("transform",`translate(0,${-J/2})`),de.attr("transform",`translate(${-nt/2+(d.padding??0)-(vt.x-(vt.left??0))},${-At/2+(d.padding??0)-J-(vt.y-(vt.top??0))})`),bt(d,Ie),d.intersect=function(Qt){return oe.polygon(d,F,Qt)},Tt})).apply(this,arguments)}function La(Gt,d){return da.apply(this,arguments)}function da(){return(da=(0,lt.A)(function*(Gt,d){const{labelStyles:ht,nodeStyles:Zt}=(0,L.GX)(d);d.labelStyle=ht;const{shapeSvg:Tt,bbox:vt}=yield yt(Gt,d,Xt(d)),At=Math.max(vt.width+2*(d.padding??0),d?.width??0),J=Math.max(vt.height+2*(d.padding??0),d?.height??0),Q=At/J;let Mt=At,pe=J;Mt>pe*Q?pe=Mt/Q:Mt=pe*Q,Mt=Math.max(Mt,100),pe=Math.max(pe,50);const Ae=Math.min(.2*pe,pe/4),tt=pe+2*Ae,{cssStyles:l}=d,T=$t.A.svg(Tt),F=(0,L.Fr)(d,{});"handDrawn"!==d.look&&(F.roughness=0,F.fillStyle="solid");const ot=[{x:-Mt/2,y:tt/2},...fr(-Mt/2,tt/2,Mt/2,tt/2,Ae,1),{x:Mt/2,y:-tt/2},...fr(Mt/2,-tt/2,-Mt/2,-tt/2,Ae,-1)],_t=j(ot),Ie=T.path(_t,F),Qt=Tt.insert(()=>Ie,":first-child");return Qt.attr("class","basic label-container"),l&&"handDrawn"!==d.look&&Qt.selectAll("path").attr("style",l),Zt&&"handDrawn"!==d.look&&Qt.selectAll("path").attr("style",Zt),bt(d,Qt),d.intersect=function(Ue){return oe.polygon(d,ot,Ue)},Tt})).apply(this,arguments)}function wa(Gt,d){return Xa.apply(this,arguments)}function Xa(){return(Xa=(0,lt.A)(function*(Gt,d){const{labelStyles:ht,nodeStyles:Zt}=(0,L.GX)(d);d.labelStyle=ht;const{shapeSvg:Tt,bbox:vt,label:de}=yield yt(Gt,d,Xt(d)),nt=Math.max(vt.width+2*(d.padding??0),d?.width??0),At=Math.max(vt.height+2*(d.padding??0),d?.height??0),Q=-nt/2,Mt=-At/2,{cssStyles:pe}=d,Ae=$t.A.svg(Tt),tt=(0,L.Fr)(d,{}),l=[{x:Q-5,y:Mt-5},{x:Q-5,y:Mt+At},{x:Q+nt,y:Mt+At},{x:Q+nt,y:Mt-5}],T=`M${Q-5},${Mt-5} L${Q+nt},${Mt-5} L${Q+nt},${Mt+At} L${Q-5},${Mt+At} L${Q-5},${Mt-5}\n                M${Q-5},${Mt} L${Q+nt},${Mt}\n                M${Q},${Mt-5} L${Q},${Mt+At}`;"handDrawn"!==d.look&&(tt.roughness=0,tt.fillStyle="solid");const F=Ae.path(T,tt),ot=Tt.insert(()=>F,":first-child");return ot.attr("transform","translate(2.5, 2.5)"),ot.attr("class","basic label-container"),pe&&"handDrawn"!==d.look&&ot.selectAll("path").attr("style",pe),Zt&&"handDrawn"!==d.look&&ot.selectAll("path").attr("style",Zt),de.attr("transform",`translate(${-vt.width/2+2.5-(vt.x-(vt.left??0))}, ${-vt.height/2+2.5-(vt.y-(vt.top??0))})`),bt(d,ot),d.intersect=function(_t){return oe.polygon(d,l,_t)},Tt})).apply(this,arguments)}function Ya(Gt,d){return yi.apply(this,arguments)}function yi(){return(yi=(0,lt.A)(function*(Gt,d){const ht=d;if(ht.alias&&(d.label=ht.alias),"handDrawn"===d.look){const{themeVariables:Vi}=(0,dt.zj)(),{background:an}=Vi,Fi={...d,id:d.id+"-background",look:"default",cssStyles:["stroke: none",`fill: ${an}`]};yield Ya(Gt,Fi)}const Zt=(0,dt.zj)();d.useHtmlLabels=Zt.htmlLabels;let Tt=Zt.er?.diagramPadding??10,vt=Zt.er?.entityPadding??6;const{cssStyles:de}=d,{labelStyles:nt,nodeStyles:At}=(0,L.GX)(d);if(0===ht.attributes.length&&d.label){const Vi={rx:0,ry:0,labelPaddingX:Tt,labelPaddingY:1.5*Tt,classes:""};(0,Rt.Un)(d.label,Zt)+2*Vi.labelPaddingX<Zt.er.minEntityWidth&&(d.width=Zt.er.minEntityWidth);const an=yield Ut(Gt,d,Vi);if(!(0,dt._3)(Zt.htmlLabels)){const Fi=an.select("text"),bn=Fi.node()?.getBBox();Fi.attr("transform",`translate(${-bn.width/2}, 0)`)}return an}Zt.htmlLabels||(Tt*=1.25,vt*=1.25);let J=Xt(d);J||(J="node default");const Q=Gt.insert("g").attr("class",J).attr("id",d.domId||d.id),Mt=yield Ei(Q,d.label??"",Zt,0,0,["name"],nt);Mt.height+=vt;let pe=0;const Ae=[],tt=[];let l=0,T=0,F=0,ot=0,_t=!0,Ie=!0;for(const Vi of ht.attributes){const an=yield Ei(Q,Vi.type,Zt,0,pe,["attribute-type"],nt);l=Math.max(l,an.width+Tt);const Fi=yield Ei(Q,Vi.name,Zt,0,pe,["attribute-name"],nt);T=Math.max(T,Fi.width+Tt);const bn=yield Ei(Q,Vi.keys.join(),Zt,0,pe,["attribute-keys"],nt);F=Math.max(F,bn.width+Tt);const pn=yield Ei(Q,Vi.comment,Zt,0,pe,["attribute-comment"],nt);ot=Math.max(ot,pn.width+Tt);const Ui=Math.max(an.height,Fi.height,bn.height,pn.height)+vt;tt.push({yOffset:pe,rowHeight:Ui}),pe+=Ui}let Qt=4;F<=Tt&&(_t=!1,F=0,Qt--),ot<=Tt&&(Ie=!1,ot=0,Qt--);const Ue=Q.node().getBBox();if(Mt.width+2*Tt-(l+T+F+ot)>0){const Vi=Mt.width+2*Tt-(l+T+F+ot);l+=Vi/Qt,T+=Vi/Qt,F>0&&(F+=Vi/Qt),ot>0&&(ot+=Vi/Qt)}const yr=l+T+F+ot,Dr=$t.A.svg(Q),aa=(0,L.Fr)(d,{});"handDrawn"!==d.look&&(aa.roughness=0,aa.fillStyle="solid");let Nr=0;tt.length>0&&(Nr=tt.reduce((Vi,an)=>Vi+(an?.rowHeight??0),0));const oa=Math.max(Ue.width+2*Tt,d?.width||0,yr),Ca=Math.max((Nr??0)+Mt.height,d?.height||0),ka=-oa/2,Pa=-Ca/2;Q.selectAll("g:not(:first-child)").each((Vi,an,Fi)=>{const bn=(0,A.Ltv)(Fi[an]),pn=bn.attr("transform");let Ui=0,os=0;if(pn){const ro=RegExp(/translate\(([^,]+),([^)]+)\)/).exec(pn);ro&&(Ui=parseFloat(ro[1]),os=parseFloat(ro[2]),bn.attr("class").includes("attribute-name")?Ui+=l:bn.attr("class").includes("attribute-keys")?Ui+=l+T:bn.attr("class").includes("attribute-comment")&&(Ui+=l+T+F))}bn.attr("transform",`translate(${ka+Tt/2+Ui}, ${os+Pa+Mt.height+vt/2})`)}),Q.select(".name").attr("transform","translate("+-Mt.width/2+", "+(Pa+vt/2)+")");const Za=Dr.rectangle(ka,Pa,oa,Ca,aa),$a=Q.insert(()=>Za,":first-child").attr("style",de.join("")),{themeVariables:Wa}=(0,dt.zj)(),{rowEven:hi,rowOdd:ji,nodeBorder:$n}=Wa;Ae.push(0);for(const[Vi,an]of tt.entries()){const bn=(Vi+1)%2==0&&0!==an.yOffset,pn=Dr.rectangle(ka,Mt.height+Pa+an?.yOffset,oa,an?.rowHeight,{...aa,fill:bn?hi:ji,stroke:$n});Q.insert(()=>pn,"g.label").attr("style",de.join("")).attr("class","row-rect-"+(bn?"even":"odd"))}let Tn=Dr.line(ka,Mt.height+Pa,oa+ka,Mt.height+Pa,aa);Q.insert(()=>Tn).attr("class","divider"),Tn=Dr.line(l+ka,Mt.height+Pa,l+ka,Ca+Pa,aa),Q.insert(()=>Tn).attr("class","divider"),_t&&(Tn=Dr.line(l+T+ka,Mt.height+Pa,l+T+ka,Ca+Pa,aa),Q.insert(()=>Tn).attr("class","divider")),Ie&&(Tn=Dr.line(l+T+F+ka,Mt.height+Pa,l+T+F+ka,Ca+Pa,aa),Q.insert(()=>Tn).attr("class","divider"));for(const Vi of Ae)Tn=Dr.line(ka,Mt.height+Pa+Vi,oa+ka,Mt.height+Pa+Vi,aa),Q.insert(()=>Tn).attr("class","divider");if(bt(d,$a),At&&"handDrawn"!==d.look){const an=At.split(";")?.filter(Fi=>Fi.includes("stroke"))?.map(Fi=>`${Fi}`).join("; ");Q.selectAll("path").attr("style",an??""),Q.selectAll(".row-rect-even path").attr("style",At)}return d.intersect=function(Vi){return oe.rect(d,Vi)},Q})).apply(this,arguments)}function Ei(Gt,d,ht){return mi.apply(this,arguments)}function mi(){return(mi=(0,lt.A)(function*(Gt,d,ht,Zt=0,Tt=0,vt=[],de=""){const nt=Gt.insert("g").attr("class",`label ${vt.join(" ")}`).attr("transform",`translate(${Zt}, ${Tt})`).attr("style",de);d!==(0,dt.QO)(d)&&(d=(d=(0,dt.QO)(d)).replaceAll("<","&lt;").replaceAll(">","&gt;"));const At=nt.node().appendChild(yield(0,D.GZ)(nt,d,{width:(0,Rt.Un)(d,ht)+100,style:de,useHtmlLabels:ht.htmlLabels},ht));if(d.includes("&lt;")||d.includes("&gt;")){let Q=At.children[0];for(Q.textContent=Q.textContent.replaceAll("&lt;","<").replaceAll("&gt;",">");Q.childNodes[0];)Q=Q.childNodes[0],Q.textContent=Q.textContent.replaceAll("&lt;","<").replaceAll("&gt;",">")}let J=At.getBBox();if((0,dt._3)(ht.htmlLabels)){const Q=At.children[0];Q.style.textAlign="start";const Mt=(0,A.Ltv)(At);J=Q.getBoundingClientRect(),Mt.attr("width",J.width),Mt.attr("height",J.height)}return J})).apply(this,arguments)}function Na(Gt,d,ht,Zt){return Or.apply(this,arguments)}function Or(){return(Or=(0,lt.A)(function*(Gt,d,ht,Zt,Tt=ht.class.padding??12){const vt=Zt?0:3,de=Gt.insert("g").attr("class",Xt(d)).attr("id",d.domId||d.id);let nt=null,At=null,J=null,Q=null,Mt=0,pe=0,Ae=0;if(nt=de.insert("g").attr("class","annotation-group text"),d.annotations.length>0){const ot=d.annotations[0];yield ma(nt,{text:`\xab${ot}\xbb`},0),Mt=nt.node().getBBox().height}At=de.insert("g").attr("class","label-group text"),yield ma(At,d,0,["font-weight: bolder"]);const tt=At.node().getBBox();pe=tt.height,J=de.insert("g").attr("class","members-group text");let l=0;for(const ot of d.members)l+=(yield ma(J,ot,l,[ot.parseClassifier()]))+vt;Ae=J.node().getBBox().height,Ae<=0&&(Ae=Tt/2),Q=de.insert("g").attr("class","methods-group text");let T=0;for(const ot of d.methods)T+=(yield ma(Q,ot,T,[ot.parseClassifier()]))+vt;let F=de.node().getBBox();if(null!==nt){const ot=nt.node().getBBox();nt.attr("transform",`translate(${-ot.width/2})`)}return At.attr("transform",`translate(${-tt.width/2}, ${Mt})`),F=de.node().getBBox(),J.attr("transform",`translate(0, ${Mt+pe+2*Tt})`),F=de.node().getBBox(),Q.attr("transform",`translate(0, ${Mt+pe+(Ae?Ae+4*Tt:2*Tt)})`),F=de.node().getBBox(),{shapeSvg:de,bbox:F}})).apply(this,arguments)}function ma(Gt,d,ht){return Ha.apply(this,arguments)}function Ha(){return(Ha=(0,lt.A)(function*(Gt,d,ht,Zt=[]){const Tt=Gt.insert("g").attr("class","label").attr("style",Zt.join("; ")),vt=(0,dt.zj)();let de="useHtmlLabels"in d?d.useHtmlLabels:(0,dt._3)(vt.htmlLabels)??!0,nt="";nt="text"in d?d.text:d.label,!de&&nt.startsWith("\\")&&(nt=nt.substring(1)),(0,dt.Wi)(nt)&&(de=!0);const At=yield(0,D.GZ)(Tt,(0,dt.oB)((0,Rt.Sm)(nt)),{width:(0,Rt.Un)(nt,vt)+50,classes:"markdown-node-label",useHtmlLabels:de},vt);let J,Q=1;if(de){const Mt=At.children[0],pe=(0,A.Ltv)(At);Q=Mt.innerHTML.split("<br>").length,Mt.innerHTML.includes("</math>")&&(Q+=Mt.innerHTML.split("<mrow>").length-1);const Ae=Mt.getElementsByTagName("img");if(Ae){const tt=""===nt.replace(/<img[^>]*>/g,"").trim();yield Promise.all([...Ae].map(l=>new Promise(T=>{function F(){if(l.style.display="flex",l.style.flexDirection="column",tt){const ot=vt.fontSize?.toString()??window.getComputedStyle(document.body).fontSize,Ie=5*parseInt(ot,10)+"px";l.style.minWidth=Ie,l.style.maxWidth=Ie}else l.style.width="100%";T(l)}(0,q.K2)(F,"setupImage"),setTimeout(()=>{l.complete&&F()}),l.addEventListener("error",F),l.addEventListener("load",F)})))}J=Mt.getBoundingClientRect(),pe.attr("width",J.width),pe.attr("height",J.height)}else{Zt.includes("font-weight: bolder")&&(0,A.Ltv)(At).selectAll("tspan").attr("font-weight",""),Q=At.children.length;const Mt=At.children[0];(""===At.textContent||At.textContent.includes("&gt"))&&(Mt.textContent=nt[0]+nt.substring(1).replaceAll("&gt;",">").replaceAll("&lt;","<").trim()," "===nt[1]&&(Mt.textContent=Mt.textContent[0]+" "+Mt.textContent.substring(1))),"undefined"===Mt.textContent&&(Mt.textContent=""),J=At.getBBox()}return Tt.attr("transform","translate(0,"+(-J.height/(2*Q)+ht)+")"),J.height})).apply(this,arguments)}function ni(Gt,d){return Fr.apply(this,arguments)}function Fr(){return(Fr=(0,lt.A)(function*(Gt,d){const ht=(0,dt.D7)(),Zt=ht.class.padding??12,Tt=Zt,vt=d.useHtmlLabels??(0,dt._3)(ht.htmlLabels)??!0,de=d;de.annotations=de.annotations??[],de.members=de.members??[],de.methods=de.methods??[];const{shapeSvg:nt,bbox:At}=yield Na(Gt,d,ht,vt,Tt),{labelStyles:J,nodeStyles:Q}=(0,L.GX)(d);d.labelStyle=J,d.cssStyles=de.styles||"";const Mt=de.styles?.join(";")||Q||"";d.cssStyles||(d.cssStyles=Mt.replaceAll("!important","").split(";"));const pe=0===de.members.length&&0===de.methods.length&&!ht.class?.hideEmptyMembersBox,Ae=$t.A.svg(nt),tt=(0,L.Fr)(d,{});"handDrawn"!==d.look&&(tt.roughness=0,tt.fillStyle="solid");const l=At.width;let T=At.height;0===de.members.length&&0===de.methods.length?T+=Tt:de.members.length>0&&0===de.methods.length&&(T+=2*Tt);const F=-l/2,ot=-T/2,_t=Ae.rectangle(F-Zt,ot-Zt-(pe?Zt:0===de.members.length&&0===de.methods.length?-Zt/2:0),l+2*Zt,T+2*Zt+(pe?2*Zt:0===de.members.length&&0===de.methods.length?-Zt:0),tt),Ie=nt.insert(()=>_t,":first-child");Ie.attr("class","basic label-container");const Qt=Ie.node().getBBox();nt.selectAll(".text").each((aa,Nr,oa)=>{const Ca=(0,A.Ltv)(oa[Nr]),ka=Ca.attr("transform");let Pa=0;if(ka){const hi=RegExp(/translate\(([^,]+),([^)]+)\)/).exec(ka);hi&&(Pa=parseFloat(hi[2]))}let Za=Pa+ot+Zt-(pe?Zt:0===de.members.length&&0===de.methods.length?-Zt/2:0);vt||(Za-=4);let $a=F;(Ca.attr("class").includes("label-group")||Ca.attr("class").includes("annotation-group"))&&($a=-Ca.node()?.getBBox().width/2||0,nt.selectAll("text").each(function(Wa,hi,ji){"middle"===window.getComputedStyle(ji[hi]).textAnchor&&($a=0)})),Ca.attr("transform",`translate(${$a}, ${Za})`)});const Ue=nt.select(".annotation-group").node().getBBox().height-(pe?Zt/2:0)||0,yr=nt.select(".label-group").node().getBBox().height-(pe?Zt/2:0)||0,Dr=nt.select(".members-group").node().getBBox().height-(pe?Zt/2:0)||0;if(de.members.length>0||de.methods.length>0||pe){const aa=Ae.line(Qt.x,Ue+yr+ot+Zt,Qt.x+Qt.width,Ue+yr+ot+Zt,tt);nt.insert(()=>aa).attr("class","divider").attr("style",Mt)}if(pe||de.members.length>0||de.methods.length>0){const aa=Ae.line(Qt.x,Ue+yr+Dr+ot+2*Tt+Zt,Qt.x+Qt.width,Ue+yr+Dr+ot+Zt+2*Tt,tt);nt.insert(()=>aa).attr("class","divider").attr("style",Mt)}if("handDrawn"!==de.look&&nt.selectAll("path").attr("style",Mt),Ie.select(":nth-child(2)").attr("style",Mt),nt.selectAll(".divider").select("path").attr("style",Mt),d.labelStyle?nt.selectAll("span").attr("style",d.labelStyle):nt.selectAll("span").attr("style",Mt),!vt){const aa=RegExp(/color\s*:\s*([^;]*)/),Nr=aa.exec(Mt);if(Nr){const oa=Nr[0].replace("color","fill");nt.selectAll("tspan").attr("style",oa)}else if(J){const oa=aa.exec(J);if(oa){const Ca=oa[0].replace("color","fill");nt.selectAll("tspan").attr("style",Ca)}}}return bt(d,Ie),d.intersect=function(aa){return oe.rect(d,aa)},nt})).apply(this,arguments)}function Pi(Gt,d){return ua.apply(this,arguments)}function ua(){return(ua=(0,lt.A)(function*(Gt,d){const{labelStyles:ht,nodeStyles:Zt}=(0,L.GX)(d);d.labelStyle=ht;const Tt=d,vt=d,At="verifyMethod"in d,J=Xt(d),Q=Gt.insert("g").attr("class",J).attr("id",d.domId??d.id);let Mt;Mt=At?yield ki(Q,`&lt;&lt;${Tt.type}&gt;&gt;`,0,d.labelStyle):yield ki(Q,"&lt;&lt;Element&gt;&gt;",0,d.labelStyle);let pe=Mt;const Ae=yield ki(Q,Tt.name,pe,d.labelStyle+"; font-weight: bold;");pe+=Ae+20,At?(pe+=(yield ki(Q,Tt.requirementId?`ID: ${Tt.requirementId}`:"",pe,d.labelStyle)),pe+=(yield ki(Q,Tt.text?`Text: ${Tt.text}`:"",pe,d.labelStyle)),pe+=(yield ki(Q,Tt.risk?`Risk: ${Tt.risk}`:"",pe,d.labelStyle)),yield ki(Q,Tt.verifyMethod?`Verification: ${Tt.verifyMethod}`:"",pe,d.labelStyle)):(pe+=(yield ki(Q,vt.type?`Type: ${vt.type}`:"",pe,d.labelStyle)),yield ki(Q,vt.docRef?`Doc Ref: ${vt.docRef}`:"",pe,d.labelStyle));const tt=(Q.node()?.getBBox().width??200)+20,l=(Q.node()?.getBBox().height??200)+20,T=-tt/2,F=-l/2,ot=$t.A.svg(Q),_t=(0,L.Fr)(d,{});"handDrawn"!==d.look&&(_t.roughness=0,_t.fillStyle="solid");const Ie=ot.rectangle(T,F,tt,l,_t),Qt=Q.insert(()=>Ie,":first-child");if(Qt.attr("class","basic label-container").attr("style",Zt),Q.selectAll(".label").each((Ue,yr,Dr)=>{const aa=(0,A.Ltv)(Dr[yr]),Nr=aa.attr("transform");let oa=0,Ca=0;if(Nr){const $a=RegExp(/translate\(([^,]+),([^)]+)\)/).exec(Nr);$a&&(oa=parseFloat($a[1]),Ca=parseFloat($a[2]))}let Pa=T+10;(0===yr||1===yr)&&(Pa=oa),aa.attr("transform",`translate(${Pa}, ${Ca-l/2+20})`)}),pe>Mt+Ae+20){const Ue=ot.line(T,F+Mt+Ae+20,T+tt,F+Mt+Ae+20,_t);Q.insert(()=>Ue).attr("style",Zt)}return bt(d,Qt),d.intersect=function(Ue){return oe.rect(d,Ue)},Q})).apply(this,arguments)}function ki(Gt,d,ht){return Ri.apply(this,arguments)}function Ri(){return(Ri=(0,lt.A)(function*(Gt,d,ht,Zt=""){if(""===d)return 0;const Tt=Gt.insert("g").attr("class","label").attr("style",Zt),vt=(0,dt.D7)(),de=vt.htmlLabels??!0,nt=yield(0,D.GZ)(Tt,(0,dt.oB)((0,Rt.Sm)(d)),{width:(0,Rt.Un)(d,vt)+50,classes:"markdown-node-label",useHtmlLabels:de,style:Zt},vt);let At;if(de){const J=nt.children[0],Q=(0,A.Ltv)(nt);At=J.getBoundingClientRect(),Q.attr("width",At.width),Q.attr("height",At.height)}else{const J=nt.children[0];for(const Q of J.children)Q.textContent=Q.textContent.replaceAll("&gt;",">").replaceAll("&lt;","<"),Zt&&Q.setAttribute("style",Zt);At=nt.getBBox(),At.height+=6}return Tt.attr("transform",`translate(${-At.width/2},${-At.height/2+ht})`),At.height})).apply(this,arguments)}(0,q.K2)(M,"tiltedCylinder"),(0,q.K2)(Ve,"trapezoid"),(0,q.K2)(Lt,"trapezoidalPentagon"),(0,q.K2)(Qe,"triangle"),(0,q.K2)(Gr,"waveEdgedRectangle"),(0,q.K2)(La,"waveRectangle"),(0,q.K2)(wa,"windowPane"),(0,q.K2)(Ya,"erBox"),(0,q.K2)(Ei,"addText"),(0,q.K2)(Na,"textHelper"),(0,q.K2)(ma,"addText"),(0,q.K2)(ni,"classBox"),(0,q.K2)(Pi,"requirementBox"),(0,q.K2)(ki,"addText");var Wi=(0,q.K2)(Gt=>{switch(Gt){case"Very High":return"red";case"High":return"orange";case"Medium":return null;case"Low":return"blue";case"Very Low":return"lightblue"}},"colorFromPriority");function ln(Gt,d,ht){return Ji.apply(this,arguments)}function Ji(){return(Ji=(0,lt.A)(function*(Gt,d,{config:ht}){const{labelStyles:Zt,nodeStyles:Tt}=(0,L.GX)(d);d.labelStyle=Zt||"";const de=d.width;d.width=(d.width??200)-10;const{shapeSvg:nt,bbox:At,label:J}=yield yt(Gt,d,Xt(d)),Q=d.padding||10;let pe,Mt="";"ticket"in d&&d.ticket&&ht?.kanban?.ticketBaseUrl&&(Mt=ht?.kanban?.ticketBaseUrl.replace("#TICKET#",d.ticket),pe=nt.insert("svg:a",":first-child").attr("class","kanban-ticket-link").attr("xlink:href",Mt).attr("target","_blank"));const Ae={useHtmlLabels:d.useHtmlLabels,labelStyle:d.labelStyle||"",width:d.width,img:d.img,padding:d.padding||8,centerLabel:!1};let tt,l;({label:tt,bbox:l}=pe?yield Ye(pe,"ticket"in d&&d.ticket||"",Ae):yield Ye(nt,"ticket"in d&&d.ticket||"",Ae));const{label:T,bbox:F}=yield Ye(nt,"assigned"in d&&d.assigned||"",Ae);d.width=de;const _t=d?.width||0,Ie=Math.max(l.height,F.height)/2,Qt=Math.max(At.height+20,d?.height||0)+Ie,Ue=-_t/2,yr=-Qt/2;let Dr;J.attr("transform","translate("+(Q-_t/2)+", "+(-Ie-At.height/2)+")"),tt.attr("transform","translate("+(Q-_t/2)+", "+(At.height/2-Ie)+")"),T.attr("transform","translate("+(Q+_t/2-F.width-20)+", "+(At.height/2-Ie)+")");const{rx:aa,ry:Nr}=d,{cssStyles:oa}=d;if("handDrawn"===d.look){const Ca=$t.A.svg(nt),ka=(0,L.Fr)(d,{}),Pa=aa||Nr?Ca.path(ge(Ue,yr,_t,Qt,aa||0),ka):Ca.rectangle(Ue,yr,_t,Qt,ka);Dr=nt.insert(()=>Pa,":first-child"),Dr.attr("class","basic label-container").attr("style",oa||null)}else{Dr=nt.insert("rect",":first-child"),Dr.attr("class","basic label-container __APA__").attr("style",Tt).attr("rx",aa??5).attr("ry",Nr??5).attr("x",Ue).attr("y",yr).attr("width",_t).attr("height",Qt);const Ca="priority"in d&&d.priority;if(Ca){const ka=nt.append("line"),Pa=Ue+2,Za=yr+Math.floor((aa??0)/2),$a=yr+Qt-Math.floor((aa??0)/2);ka.attr("x1",Pa).attr("y1",Za).attr("x2",Pa).attr("y2",$a).attr("stroke-width","4").attr("stroke",Wi(Ca))}}return bt(d,Dr),d.height=Qt,d.intersect=function(Ca){return oe.rect(d,Ca)},nt})).apply(this,arguments)}function Oi(Gt,d){return zi.apply(this,arguments)}function zi(){return(zi=(0,lt.A)(function*(Gt,d){const{labelStyles:ht,nodeStyles:Zt}=(0,L.GX)(d);d.labelStyle=ht;const{shapeSvg:Tt,bbox:vt,halfPadding:de,label:nt}=yield yt(Gt,d,Xt(d)),At=vt.width+10*de,J=vt.height+8*de,Q=.15*At,{cssStyles:Mt}=d,Ae=vt.height+20,tt=Math.max(At,vt.width+20),l=Math.max(J,Ae);let T;nt.attr("transform",`translate(${-vt.width/2}, ${-vt.height/2})`);const F=`M0 0 \n    a${Q},${Q} 1 0,0 ${.25*tt},${-1*l*.1}\n    a${Q},${Q} 1 0,0 ${.25*tt},0\n    a${Q},${Q} 1 0,0 ${.25*tt},0\n    a${Q},${Q} 1 0,0 ${.25*tt},${.1*l}\n\n    a${Q},${Q} 1 0,0 ${.15*tt},${.33*l}\n    a${.8*Q},${.8*Q} 1 0,0 0,${.34*l}\n    a${Q},${Q} 1 0,0 ${-1*tt*.15},${.33*l}\n\n    a${Q},${Q} 1 0,0 ${-1*tt*.25},${.15*l}\n    a${Q},${Q} 1 0,0 ${-1*tt*.25},0\n    a${Q},${Q} 1 0,0 ${-1*tt*.25},0\n    a${Q},${Q} 1 0,0 ${-1*tt*.25},${-1*l*.15}\n\n    a${Q},${Q} 1 0,0 ${-1*tt*.1},${-1*l*.33}\n    a${.8*Q},${.8*Q} 1 0,0 0,${-1*l*.34}\n    a${Q},${Q} 1 0,0 ${.1*tt},${-1*l*.33}\n  H0 V0 Z`;if("handDrawn"===d.look){const ot=$t.A.svg(Tt),_t=(0,L.Fr)(d,{}),Ie=ot.path(F,_t);T=Tt.insert(()=>Ie,":first-child"),T.attr("class","basic label-container").attr("style",(0,Rt.KL)(Mt))}else T=Tt.insert("path",":first-child").attr("class","basic label-container").attr("style",Zt).attr("d",F);return T.attr("transform",`translate(${-tt/2}, ${-l/2})`),bt(d,T),d.calcIntersect=function(ot,_t){return oe.rect(ot,_t)},d.intersect=function(ot){return q.Rm.info("Bang intersect",d,ot),oe.rect(d,ot)},Tt})).apply(this,arguments)}function cn(Gt,d){return Ln.apply(this,arguments)}function Ln(){return(Ln=(0,lt.A)(function*(Gt,d){const{labelStyles:ht,nodeStyles:Zt}=(0,L.GX)(d);d.labelStyle=ht;const{shapeSvg:Tt,bbox:vt,halfPadding:de,label:nt}=yield yt(Gt,d,Xt(d)),At=vt.width+2*de,J=vt.height+2*de,Q=.15*At,Mt=.25*At,pe=.35*At,Ae=.2*At,{cssStyles:tt}=d;let l;const T=`M0 0 \n    a${Q},${Q} 0 0,1 ${.25*At},${-1*At*.1}\n    a${pe},${pe} 1 0,1 ${.4*At},${-1*At*.1}\n    a${Mt},${Mt} 1 0,1 ${.35*At},${.2*At}\n\n    a${Q},${Q} 1 0,1 ${.15*At},${.35*J}\n    a${Ae},${Ae} 1 0,1 ${-1*At*.15},${.65*J}\n\n    a${Mt},${Q} 1 0,1 ${-1*At*.25},${.15*At}\n    a${pe},${pe} 1 0,1 ${-1*At*.5},0\n    a${Q},${Q} 1 0,1 ${-1*At*.25},${-1*At*.15}\n\n    a${Q},${Q} 1 0,1 ${-1*At*.1},${-1*J*.35}\n    a${Ae},${Ae} 1 0,1 ${.1*At},${-1*J*.65}\n  H0 V0 Z`;if("handDrawn"===d.look){const F=$t.A.svg(Tt),ot=(0,L.Fr)(d,{}),_t=F.path(T,ot);l=Tt.insert(()=>_t,":first-child"),l.attr("class","basic label-container").attr("style",(0,Rt.KL)(tt))}else l=Tt.insert("path",":first-child").attr("class","basic label-container").attr("style",Zt).attr("d",T);return nt.attr("transform",`translate(${-vt.width/2}, ${-vt.height/2})`),l.attr("transform",`translate(${-At/2}, ${-J/2})`),bt(d,l),d.calcIntersect=function(F,ot){return oe.rect(F,ot)},d.intersect=function(F){return q.Rm.info("Cloud intersect",d,F),oe.rect(d,F)},Tt})).apply(this,arguments)}function Bn(Gt,d){return Vn.apply(this,arguments)}function Vn(){return(Vn=(0,lt.A)(function*(Gt,d){const{labelStyles:ht,nodeStyles:Zt}=(0,L.GX)(d);d.labelStyle=ht;const{shapeSvg:Tt,bbox:vt,halfPadding:de,label:nt}=yield yt(Gt,d,Xt(d)),At=vt.width+8*de,J=vt.height+2*de,Mt=`\n    M${-At/2} ${J/2-5}\n    v${10-J}\n    q0,-5 5,-5\n    h${At-10}\n    q5,0 5,5\n    v${J-10}\n    q0,5 -5,5\n    h${10-At}\n    q-5,0 -5,-5\n    Z\n  `,pe=Tt.append("path").attr("id","node-"+d.id).attr("class","node-bkg node-"+d.type).attr("style",Zt).attr("d",Mt);return Tt.append("line").attr("class","node-line-").attr("x1",-At/2).attr("y1",J/2).attr("x2",At/2).attr("y2",J/2),nt.attr("transform",`translate(${-vt.width/2}, ${-vt.height/2})`),Tt.append(()=>nt.node()),bt(d,pe),d.calcIntersect=function(Ae,tt){return oe.rect(Ae,tt)},d.intersect=function(Ae){return oe.rect(d,Ae)},Tt})).apply(this,arguments)}function hn(Gt,d){return Un.apply(this,arguments)}function Un(){return(Un=(0,lt.A)(function*(Gt,d){return it(Gt,d,{padding:d.padding??0})})).apply(this,arguments)}(0,q.K2)(ln,"kanbanItem"),(0,q.K2)(Oi,"bang"),(0,q.K2)(cn,"cloud"),(0,q.K2)(Bn,"defaultMindmapNode"),(0,q.K2)(hn,"mindmapCircle");var tn=[{semanticName:"Process",name:"Rectangle",shortName:"rect",description:"Standard process shape",aliases:["proc","process","rectangle"],internalAliases:["squareRect"],handler:ha},{semanticName:"Event",name:"Rounded Rectangle",shortName:"rounded",description:"Represents an event",aliases:["event"],internalAliases:["roundedRect"],handler:or},{semanticName:"Terminal Point",name:"Stadium",shortName:"stadium",description:"Terminal point",aliases:["terminal","pill"],handler:Fa},{semanticName:"Subprocess",name:"Framed Rectangle",shortName:"fr-rect",description:"Subprocess",aliases:["subprocess","subproc","framed-rectangle","subroutine"],handler:ja},{semanticName:"Database",name:"Cylinder",shortName:"cyl",description:"Database storage",aliases:["db","database","cylinder"],handler:ir},{semanticName:"Start",name:"Circle",shortName:"circle",description:"Starting point",aliases:["circ"],handler:it},{semanticName:"Bang",name:"Bang",shortName:"bang",description:"Bang",aliases:["bang"],handler:Oi},{semanticName:"Cloud",name:"Cloud",shortName:"cloud",description:"cloud",aliases:["cloud"],handler:cn},{semanticName:"Decision",name:"Diamond",shortName:"diam",description:"Decision-making step",aliases:["decision","diamond","question"],handler:N},{semanticName:"Prepare Conditional",name:"Hexagon",shortName:"hex",description:"Preparation or condition step",aliases:["hexagon","prepare"],handler:ne},{semanticName:"Data Input/Output",name:"Lean Right",shortName:"lean-r",description:"Represents input or output",aliases:["lean-right","in-out"],internalAliases:["lean_right"],handler:Cr},{semanticName:"Data Input/Output",name:"Lean Left",shortName:"lean-l",description:"Represents output or input",aliases:["lean-left","out-in"],internalAliases:["lean_left"],handler:je},{semanticName:"Priority Action",name:"Trapezoid Base Bottom",shortName:"trap-b",description:"Priority action",aliases:["priority","trapezoid-bottom","trapezoid"],handler:Ve},{semanticName:"Manual Operation",name:"Trapezoid Base Top",shortName:"trap-t",description:"Represents a manual task",aliases:["manual","trapezoid-top","inv-trapezoid"],internalAliases:["inv_trapezoid"],handler:ct},{semanticName:"Stop",name:"Double Circle",shortName:"dbl-circ",description:"Represents a stop point",aliases:["double-circle"],internalAliases:["doublecircle"],handler:Te},{semanticName:"Text Block",name:"Text Block",shortName:"text",description:"Text block",handler:we},{semanticName:"Card",name:"Notched Rectangle",shortName:"notch-rect",description:"Represents a card",aliases:["card","notched-rectangle"],handler:O},{semanticName:"Lined/Shaded Process",name:"Lined Rectangle",shortName:"lin-rect",description:"Lined process shape",aliases:["lined-rectangle","lined-process","lin-proc","shaded-process"],handler:Ma},{semanticName:"Start",name:"Small Circle",shortName:"sm-circ",description:"Small starting point",aliases:["start","small-circle"],internalAliases:["stateStart"],handler:za},{semanticName:"Stop",name:"Framed Circle",shortName:"fr-circ",description:"Stop point",aliases:["stop","framed-circle"],internalAliases:["stateEnd"],handler:qa},{semanticName:"Fork/Join",name:"Filled Rectangle",shortName:"fork",description:"Fork or join in process flow",aliases:["join"],internalAliases:["forkJoin"],handler:qr},{semanticName:"Collate",name:"Hourglass",shortName:"hourglass",description:"Represents a collate operation",aliases:["hourglass","collate"],handler:tr},{semanticName:"Comment",name:"Curly Brace",shortName:"brace",description:"Adds a comment",aliases:["comment","brace-l"],handler:G},{semanticName:"Comment Right",name:"Curly Brace",shortName:"brace-r",description:"Adds a comment",handler:Ot},{semanticName:"Comment with braces on both sides",name:"Curly Braces",shortName:"braces",description:"Adds a comment",handler:Be},{semanticName:"Com Link",name:"Lightning Bolt",shortName:"bolt",description:"Communication link",aliases:["com-link","lightning-bolt"],handler:sr},{semanticName:"Document",name:"Document",shortName:"doc",description:"Represents a document",aliases:["doc","document"],handler:Gr},{semanticName:"Delay",name:"Half-Rounded Rectangle",shortName:"delay",description:"Represents a delay",aliases:["half-rounded-rectangle"],handler:nr},{semanticName:"Direct Access Storage",name:"Horizontal Cylinder",shortName:"h-cyl",description:"Direct access storage",aliases:["das","horizontal-cylinder"],handler:M},{semanticName:"Disk Storage",name:"Lined Cylinder",shortName:"lin-cyl",description:"Disk storage",aliases:["disk","lined-cylinder"],handler:wr},{semanticName:"Display",name:"Curved Trapezoid",shortName:"curv-trap",description:"Represents a display",aliases:["curved-trapezoid","display"],handler:ye},{semanticName:"Divided Process",name:"Divided Rectangle",shortName:"div-rect",description:"Divided process shape",aliases:["div-proc","divided-rectangle","divided-process"],handler:ce},{semanticName:"Extract",name:"Triangle",shortName:"tri",description:"Extraction process",aliases:["extract","triangle"],handler:Qe},{semanticName:"Internal Storage",name:"Window Pane",shortName:"win-pane",description:"Internal storage",aliases:["internal-storage","window-pane"],handler:wa},{semanticName:"Junction",name:"Filled Circle",shortName:"f-circ",description:"Junction point",aliases:["junction","filled-circle"],handler:Xe},{semanticName:"Loop Limit",name:"Trapezoidal Pentagon",shortName:"notch-pent",description:"Loop limit step",aliases:["loop-limit","notched-pentagon"],handler:Lt},{semanticName:"Manual File",name:"Flipped Triangle",shortName:"flip-tri",description:"Manual file operation",aliases:["manual-file","flipped-triangle"],handler:Ir},{semanticName:"Manual Input",name:"Sloped Rectangle",shortName:"sl-rect",description:"Manual input step",aliases:["manual-input","sloped-rectangle"],handler:Jr},{semanticName:"Multi-Document",name:"Stacked Document",shortName:"docs",description:"Multiple documents",aliases:["documents","st-doc","stacked-document"],handler:Qr},{semanticName:"Multi-Process",name:"Stacked Rectangle",shortName:"st-rect",description:"Multiple processes",aliases:["procs","processes","stacked-rectangle"],handler:Zr},{semanticName:"Stored Data",name:"Bow Tie Rectangle",shortName:"bow-rect",description:"Stored data",aliases:["stored-data","bow-tie-rectangle"],handler:Ct},{semanticName:"Summary",name:"Crossed Circle",shortName:"cross-circ",description:"Summary",aliases:["summary","crossed-circle"],handler:ut},{semanticName:"Tagged Document",name:"Tagged Document",shortName:"tag-doc",description:"Tagged document",aliases:["tag-doc","tagged-document"],handler:fa},{semanticName:"Tagged Process",name:"Tagged Rectangle",shortName:"tag-rect",description:"Tagged process",aliases:["tagged-rectangle","tag-proc","tagged-process"],handler:Ua},{semanticName:"Paper Tape",name:"Flag",shortName:"flag",description:"Paper tape",aliases:["paper-tape"],handler:La},{semanticName:"Odd",name:"Odd",shortName:"odd",description:"Odd shape",internalAliases:["rect_left_inv_arrow"],handler:Ke},{semanticName:"Lined Document",name:"Lined Document",shortName:"lin-doc",description:"Lined document",aliases:["lined-document"],handler:xr}],xn=(0,q.K2)(()=>{const d=[...Object.entries({state:Va,choice:xt,note:Xr,rectWithTitle:ia,labelRect:zt,iconSquare:x,iconCircle:P,icon:y,iconRounded:z,imageSquare:w,anchor:qe,kanbanItem:ln,mindmapCircle:hn,defaultMindmapNode:Bn,classBox:ni,erBox:Ya,requirementBox:Pi}),...tn.flatMap(ht=>[ht.shortName,..."aliases"in ht?ht.aliases:[],..."internalAliases"in ht?ht.internalAliases:[]].map(Tt=>[Tt,ht.handler]))];return Object.fromEntries(d)},"generateShapeMap")();function nn(Gt){return Gt in xn}(0,q.K2)(nn,"isValidShape");var kn=new Map;function Rn(Gt,d,ht){return un.apply(this,arguments)}function un(){return(un=(0,lt.A)(function*(Gt,d,ht){let Zt,Tt;"rect"===d.shape&&(d.shape=d.rx&&d.ry?"roundedRect":"squareRect");const vt=d.shape?xn[d.shape]:void 0;if(!vt)throw new Error(`No such shape: ${d.shape}. Please check your syntax.`);if(d.link){let de;"sandbox"===ht.config.securityLevel?de="_top":d.linkTarget&&(de=d.linkTarget||"_blank"),Zt=Gt.insert("svg:a").attr("xlink:href",d.link).attr("target",de??null),Tt=yield vt(Zt,d,ht)}else Tt=yield vt(Gt,d,ht),Zt=Tt;return d.tooltip&&Tt.attr("title",d.tooltip),kn.set(d.id,Zt),d.haveCallback&&Zt.attr("class",Zt.attr("class")+" clickable"),Zt})).apply(this,arguments)}(0,q.K2)(Rn,"insertNode");var Xi=(0,q.K2)((Gt,d)=>{kn.set(d.id,Gt)},"setNodeElem"),rn=(0,q.K2)(()=>{kn.clear()},"clear"),Yn=(0,q.K2)(Gt=>{const d=kn.get(Gt.id);q.Rm.trace("Transforming node",Gt.diff,Gt,"translate("+(Gt.x-Gt.width/2-5)+", "+Gt.width/2+")");const Zt=Gt.diff||0;return d.attr("transform",Gt.clusterNode?"translate("+(Gt.x+Zt-Gt.width/2)+", "+(Gt.y-Gt.height/2-8)+")":"translate("+Gt.x+", "+Gt.y+")"),Zt},"positionNode")},89630:function(ti){ti.exports=function(){"use strict";var _r,B,L=36e5,D=864e5,Rt=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,dt=31536e6,q=2628e6,A=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/,$t={years:dt,months:q,days:D,hours:L,minutes:6e4,seconds:1e3,milliseconds:1,weeks:6048e5},yt=function(br){return br instanceof vr},Ye=function(br,mr,Er){return new vr(br,Er,mr.$l)},bt=function(br){return B.p(br)+"s"},Xt=function(br){return br<0},j=function(br){return Xt(br)?Math.ceil(br):Math.floor(br)},fr=function(br){return Math.abs(br)},Fe=function(br,mr){return br?Xt(br)?{negative:!0,format:""+fr(br)+mr}:{negative:!1,format:""+br+mr}:{negative:!1,format:""}},vr=function(){function br(Er,Lr,Ar){var ge=this;if(this.$d={},this.$l=Ar,void 0===Er&&(this.$ms=0,this.parseFromMilliseconds()),Lr)return Ye(Er*$t[bt(Lr)],this);if("number"==typeof Er)return this.$ms=Er,this.parseFromMilliseconds(),this;if("object"==typeof Er)return Object.keys(Er).forEach(function(W){ge.$d[bt(W)]=Er[W]}),this.calMilliseconds(),this;if("string"==typeof Er){var Br=Er.match(A);if(Br){var Ge=Br.slice(2).map(function(W){return null!=W?Number(W):0});return this.$d.years=Ge[0],this.$d.months=Ge[1],this.$d.weeks=Ge[2],this.$d.days=Ge[3],this.$d.hours=Ge[4],this.$d.minutes=Ge[5],this.$d.seconds=Ge[6],this.calMilliseconds(),this}}return this}var mr=br.prototype;return mr.calMilliseconds=function(){var Er=this;this.$ms=Object.keys(this.$d).reduce(function(Lr,Ar){return Lr+(Er.$d[Ar]||0)*$t[Ar]},0)},mr.parseFromMilliseconds=function(){var Er=this.$ms;this.$d.years=j(Er/dt),this.$d.months=j((Er%=dt)/q),this.$d.days=j((Er%=q)/D),this.$d.hours=j((Er%=D)/L),this.$d.minutes=j((Er%=L)/6e4),this.$d.seconds=j((Er%=6e4)/1e3),this.$d.milliseconds=Er%=1e3},mr.toISOString=function(){var Er=Fe(this.$d.years,"Y"),Lr=Fe(this.$d.months,"M"),Ar=+this.$d.days||0;this.$d.weeks&&(Ar+=7*this.$d.weeks);var ge=Fe(Ar,"D"),Br=Fe(this.$d.hours,"H"),Ge=Fe(this.$d.minutes,"M"),W=this.$d.seconds||0;this.$d.milliseconds&&(W+=this.$d.milliseconds/1e3,W=Math.round(1e3*W)/1e3);var ft=Fe(W,"S"),Z=(Er.negative||Lr.negative||ge.negative||Br.negative||Ge.negative||ft.negative?"-":"")+"P"+Er.format+Lr.format+ge.format+(Br.format||Ge.format||ft.format?"T":"")+Br.format+Ge.format+ft.format;return"P"===Z||"-P"===Z?"P0D":Z},mr.toJSON=function(){return this.toISOString()},mr.format=function(Er){var Lr=Er||"YYYY-MM-DDTHH:mm:ss",Ar={Y:this.$d.years,YY:B.s(this.$d.years,2,"0"),YYYY:B.s(this.$d.years,4,"0"),M:this.$d.months,MM:B.s(this.$d.months,2,"0"),D:this.$d.days,DD:B.s(this.$d.days,2,"0"),H:this.$d.hours,HH:B.s(this.$d.hours,2,"0"),m:this.$d.minutes,mm:B.s(this.$d.minutes,2,"0"),s:this.$d.seconds,ss:B.s(this.$d.seconds,2,"0"),SSS:B.s(this.$d.milliseconds,3,"0")};return Lr.replace(Rt,function(ge,Br){return Br||String(Ar[ge])})},mr.as=function(Er){return this.$ms/$t[bt(Er)]},mr.get=function(Er){var Lr=this.$ms,Ar=bt(Er);return"milliseconds"===Ar?Lr%=1e3:Lr="weeks"===Ar?j(Lr/$t[Ar]):this.$d[Ar],Lr||0},mr.add=function(Er,Lr,Ar){var ge;return ge=Lr?Er*$t[bt(Lr)]:yt(Er)?Er.$ms:Ye(Er,this).$ms,Ye(this.$ms+ge*(Ar?-1:1),this)},mr.subtract=function(Er,Lr){return this.add(Er,Lr,!0)},mr.locale=function(Er){var Lr=this.clone();return Lr.$l=Er,Lr},mr.clone=function(){return Ye(this.$ms,this)},mr.humanize=function(Er){return _r().add(this.$ms,"ms").locale(this.$l).fromNow(!Er)},mr.valueOf=function(){return this.asMilliseconds()},mr.milliseconds=function(){return this.get("milliseconds")},mr.asMilliseconds=function(){return this.as("milliseconds")},mr.seconds=function(){return this.get("seconds")},mr.asSeconds=function(){return this.as("seconds")},mr.minutes=function(){return this.get("minutes")},mr.asMinutes=function(){return this.as("minutes")},mr.hours=function(){return this.get("hours")},mr.asHours=function(){return this.as("hours")},mr.days=function(){return this.get("days")},mr.asDays=function(){return this.as("days")},mr.weeks=function(){return this.get("weeks")},mr.asWeeks=function(){return this.as("weeks")},mr.months=function(){return this.get("months")},mr.asMonths=function(){return this.as("months")},mr.years=function(){return this.get("years")},mr.asYears=function(){return this.as("years")},br}(),zr=function(br,mr,Er){return br.add(mr.years()*Er,"y").add(mr.months()*Er,"M").add(mr.days()*Er,"d").add(mr.hours()*Er,"h").add(mr.minutes()*Er,"m").add(mr.seconds()*Er,"s").add(mr.milliseconds()*Er,"ms")};return function(br,mr,Er){_r=Er,B=Er().$utils(),Er.duration=function(ge,Br){var Ge=Er.locale();return Ye(ge,{$l:Ge},Br)},Er.isDuration=yt;var Lr=mr.prototype.add,Ar=mr.prototype.subtract;mr.prototype.add=function(ge,Br){return yt(ge)?zr(this,ge,1):Lr.bind(this)(ge,Br)},mr.prototype.subtract=function(ge,Br){return yt(ge)?zr(this,ge,-1):Ar.bind(this)(ge,Br)}}}()},90543:(ti,_r,B)=>{"use strict";B.r(_r),B.d(_r,{diagram:()=>pt});var lt=B(89204),ee=B(69664),L=B(97787),D=B(24715),Rt=B(87452),yt=(B(32239),B(19753),B(59355),B(52052),B(79006)),Ye=B(32303),bt=B(79687),Xt=function(){var H=(0,Ye.K2)(function(Ce,Ot,Jt,fe){for(Jt=Jt||{},fe=Ce.length;fe--;Jt[Ce[fe]]=Ot);return Jt},"o"),Nt=[1,4],wt=[1,13],Wt=[1,12],xe=[1,15],le=[1,16],Re=[1,20],oe=[1,19],qe=[6,7,8],We=[1,26],Ct=[1,24],St=[1,25],R=[6,7,11],O=[1,31],et=[6,7,11,24],xt=[1,6,13,16,17,20,23],it=[1,35],rt=[1,36],Et=[1,6,7,11,13,16,17,20,23],ut=[1,38],It={trace:(0,Ye.K2)(function(){},"trace"),yy:{},symbols_:{error:2,start:3,mindMap:4,spaceLines:5,SPACELINE:6,NL:7,KANBAN:8,document:9,stop:10,EOF:11,statement:12,SPACELIST:13,node:14,shapeData:15,ICON:16,CLASS:17,nodeWithId:18,nodeWithoutId:19,NODE_DSTART:20,NODE_DESCR:21,NODE_DEND:22,NODE_ID:23,SHAPE_DATA:24,$accept:0,$end:1},terminals_:{2:"error",6:"SPACELINE",7:"NL",8:"KANBAN",11:"EOF",13:"SPACELIST",16:"ICON",17:"CLASS",20:"NODE_DSTART",21:"NODE_DESCR",22:"NODE_DEND",23:"NODE_ID",24:"SHAPE_DATA"},productions_:[0,[3,1],[3,2],[5,1],[5,2],[5,2],[4,2],[4,3],[10,1],[10,1],[10,1],[10,2],[10,2],[9,3],[9,2],[12,3],[12,2],[12,2],[12,2],[12,1],[12,2],[12,1],[12,1],[12,1],[12,1],[14,1],[14,1],[19,3],[18,1],[18,4],[15,2],[15,1]],performAction:(0,Ye.K2)(function(Ot,Jt,fe,Be,Ze,ye,kr){var ur=ye.length-1;switch(Ze){case 6:case 7:return Be;case 8:Be.getLogger().trace("Stop NL ");break;case 9:Be.getLogger().trace("Stop EOF ");break;case 11:Be.getLogger().trace("Stop NL2 ");break;case 12:Be.getLogger().trace("Stop EOF2 ");break;case 15:Be.getLogger().info("Node: ",ye[ur-1].id),Be.addNode(ye[ur-2].length,ye[ur-1].id,ye[ur-1].descr,ye[ur-1].type,ye[ur]);break;case 16:Be.getLogger().info("Node: ",ye[ur].id),Be.addNode(ye[ur-1].length,ye[ur].id,ye[ur].descr,ye[ur].type);break;case 17:Be.getLogger().trace("Icon: ",ye[ur]),Be.decorateNode({icon:ye[ur]});break;case 18:case 23:Be.decorateNode({class:ye[ur]});break;case 19:Be.getLogger().trace("SPACELIST");break;case 20:Be.getLogger().trace("Node: ",ye[ur-1].id),Be.addNode(0,ye[ur-1].id,ye[ur-1].descr,ye[ur-1].type,ye[ur]);break;case 21:Be.getLogger().trace("Node: ",ye[ur].id),Be.addNode(0,ye[ur].id,ye[ur].descr,ye[ur].type);break;case 22:Be.decorateNode({icon:ye[ur]});break;case 27:Be.getLogger().trace("node found ..",ye[ur-2]),this.$={id:ye[ur-1],descr:ye[ur-1],type:Be.getType(ye[ur-2],ye[ur])};break;case 28:this.$={id:ye[ur],descr:ye[ur],type:0};break;case 29:Be.getLogger().trace("node found ..",ye[ur-3]),this.$={id:ye[ur-3],descr:ye[ur-1],type:Be.getType(ye[ur-2],ye[ur])};break;case 30:this.$=ye[ur-1]+ye[ur];break;case 31:this.$=ye[ur]}},"anonymous"),table:[{3:1,4:2,5:3,6:[1,5],8:Nt},{1:[3]},{1:[2,1]},{4:6,6:[1,7],7:[1,8],8:Nt},{6:wt,7:[1,10],9:9,12:11,13:Wt,14:14,16:xe,17:le,18:17,19:18,20:Re,23:oe},H(qe,[2,3]),{1:[2,2]},H(qe,[2,4]),H(qe,[2,5]),{1:[2,6],6:wt,12:21,13:Wt,14:14,16:xe,17:le,18:17,19:18,20:Re,23:oe},{6:wt,9:22,12:11,13:Wt,14:14,16:xe,17:le,18:17,19:18,20:Re,23:oe},{6:We,7:Ct,10:23,11:St},H(R,[2,24],{18:17,19:18,14:27,16:[1,28],17:[1,29],20:Re,23:oe}),H(R,[2,19]),H(R,[2,21],{15:30,24:O}),H(R,[2,22]),H(R,[2,23]),H(et,[2,25]),H(et,[2,26]),H(et,[2,28],{20:[1,32]}),{21:[1,33]},{6:We,7:Ct,10:34,11:St},{1:[2,7],6:wt,12:21,13:Wt,14:14,16:xe,17:le,18:17,19:18,20:Re,23:oe},H(xt,[2,14],{7:it,11:rt}),H(Et,[2,8]),H(Et,[2,9]),H(Et,[2,10]),H(R,[2,16],{15:37,24:O}),H(R,[2,17]),H(R,[2,18]),H(R,[2,20],{24:ut}),H(et,[2,31]),{21:[1,39]},{22:[1,40]},H(xt,[2,13],{7:it,11:rt}),H(Et,[2,11]),H(Et,[2,12]),H(R,[2,15],{24:ut}),H(et,[2,30]),{22:[1,41]},H(et,[2,27]),H(et,[2,29])],defaultActions:{2:[2,1],6:[2,2]},parseError:(0,Ye.K2)(function(Ot,Jt){if(!Jt.recoverable){var fe=new Error(Ot);throw fe.hash=Jt,fe}this.trace(Ot)},"parseError"),parse:(0,Ye.K2)(function(Ot){var Jt=this,fe=[0],Be=[],Ze=[null],ye=[],kr=this.table,ur="",Kt=0,Pe=0,ir=0,ke=ye.slice.call(arguments,1),Te=Object.create(this.lexer),er={yy:{}};for(var Xe in this.yy)Object.prototype.hasOwnProperty.call(this.yy,Xe)&&(er.yy[Xe]=this.yy[Xe]);Te.setInput(Ot,er.yy),er.yy.lexer=Te,er.yy.parser=this,typeof Te.yylloc>"u"&&(Te.yylloc={});var Ir=Te.yylloc;ye.push(Ir);var Ee=Te.options&&Te.options.ranges;function nr(){var C;return"number"!=typeof(C=Be.pop()||Te.lex()||1)&&(C instanceof Array&&(C=(Be=C).pop()),C=Jt.symbols_[C]||C),C}this.parseError="function"==typeof er.yy.parseError?er.yy.parseError:Object.getPrototypeOf(this).parseError,(0,Ye.K2)(function qr(C){fe.length=fe.length-2*C,Ze.length=Ze.length-C,ye.length=ye.length-C},"popStack"),(0,Ye.K2)(nr,"lex");for(var te,ne,Le,tr,y,P,b,p,E={};;){if(this.defaultActions[Le=fe[fe.length-1]]?tr=this.defaultActions[Le]:((null===te||typeof te>"u")&&(te=nr()),tr=kr[Le]&&kr[Le][te]),typeof tr>"u"||!tr.length||!tr[0]){var x;for(P in p=[],kr[Le])this.terminals_[P]&&P>2&&p.push("'"+this.terminals_[P]+"'");x=Te.showPosition?"Parse error on line "+(Kt+1)+":\n"+Te.showPosition()+"\nExpecting "+p.join(", ")+", got '"+(this.terminals_[te]||te)+"'":"Parse error on line "+(Kt+1)+": Unexpected "+(1==te?"end of input":"'"+(this.terminals_[te]||te)+"'"),this.parseError(x,{text:Te.match,token:this.terminals_[te]||te,line:Te.yylineno,loc:Ir,expected:p})}if(tr[0]instanceof Array&&tr.length>1)throw new Error("Parse Error: multiple actions possible at state: "+Le+", token: "+te);switch(tr[0]){case 1:fe.push(te),Ze.push(Te.yytext),ye.push(Te.yylloc),fe.push(tr[1]),te=null,ne?(te=ne,ne=null):(Pe=Te.yyleng,ur=Te.yytext,Kt=Te.yylineno,Ir=Te.yylloc,ir>0&&ir--);break;case 2:if(E.$=Ze[Ze.length-(b=this.productions_[tr[1]][1])],E._$={first_line:ye[ye.length-(b||1)].first_line,last_line:ye[ye.length-1].last_line,first_column:ye[ye.length-(b||1)].first_column,last_column:ye[ye.length-1].last_column},Ee&&(E._$.range=[ye[ye.length-(b||1)].range[0],ye[ye.length-1].range[1]]),typeof(y=this.performAction.apply(E,[ur,Pe,Kt,er.yy,tr[1],Ze,ye].concat(ke)))<"u")return y;b&&(fe=fe.slice(0,-1*b*2),Ze=Ze.slice(0,-1*b),ye=ye.slice(0,-1*b)),fe.push(this.productions_[tr[1]][0]),Ze.push(E.$),ye.push(E._$),fe.push(kr[fe[fe.length-2]][fe[fe.length-1]]);break;case 3:return!0}}return!0},"parse")};function st(){this.yy={}}return It.lexer=function(){return{EOF:1,parseError:(0,Ye.K2)(function(Jt,fe){if(!this.yy.parser)throw new Error(Jt);this.yy.parser.parseError(Jt,fe)},"parseError"),setInput:(0,Ye.K2)(function(Ot,Jt){return this.yy=Jt||this.yy||{},this._input=Ot,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},"setInput"),input:(0,Ye.K2)(function(){var Ot=this._input[0];return this.yytext+=Ot,this.yyleng++,this.offset++,this.match+=Ot,this.matched+=Ot,Ot.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),Ot},"input"),unput:(0,Ye.K2)(function(Ot){var Jt=Ot.length,fe=Ot.split(/(?:\r\n?|\n)/g);this._input=Ot+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-Jt),this.offset-=Jt;var Be=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),fe.length-1&&(this.yylineno-=fe.length-1);var Ze=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:fe?(fe.length===Be.length?this.yylloc.first_column:0)+Be[Be.length-fe.length].length-fe[0].length:this.yylloc.first_column-Jt},this.options.ranges&&(this.yylloc.range=[Ze[0],Ze[0]+this.yyleng-Jt]),this.yyleng=this.yytext.length,this},"unput"),more:(0,Ye.K2)(function(){return this._more=!0,this},"more"),reject:(0,Ye.K2)(function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},"reject"),less:(0,Ye.K2)(function(Ot){this.unput(this.match.slice(Ot))},"less"),pastInput:(0,Ye.K2)(function(){var Ot=this.matched.substr(0,this.matched.length-this.match.length);return(Ot.length>20?"...":"")+Ot.substr(-20).replace(/\n/g,"")},"pastInput"),upcomingInput:(0,Ye.K2)(function(){var Ot=this.match;return Ot.length<20&&(Ot+=this._input.substr(0,20-Ot.length)),(Ot.substr(0,20)+(Ot.length>20?"...":"")).replace(/\n/g,"")},"upcomingInput"),showPosition:(0,Ye.K2)(function(){var Ot=this.pastInput(),Jt=new Array(Ot.length+1).join("-");return Ot+this.upcomingInput()+"\n"+Jt+"^"},"showPosition"),test_match:(0,Ye.K2)(function(Ot,Jt){var fe,Be,Ze;if(this.options.backtrack_lexer&&(Ze={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(Ze.yylloc.range=this.yylloc.range.slice(0))),(Be=Ot[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=Be.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:Be?Be[Be.length-1].length-Be[Be.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+Ot[0].length},this.yytext+=Ot[0],this.match+=Ot[0],this.matches=Ot,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(Ot[0].length),this.matched+=Ot[0],fe=this.performAction.call(this,this.yy,this,Jt,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),fe)return fe;if(this._backtrack){for(var ye in Ze)this[ye]=Ze[ye];return!1}return!1},"test_match"),next:(0,Ye.K2)(function(){if(this.done)return this.EOF;var Ot,Jt,fe,Be;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var Ze=this._currentRules(),ye=0;ye<Ze.length;ye++)if((fe=this._input.match(this.rules[Ze[ye]]))&&(!Jt||fe[0].length>Jt[0].length)){if(Jt=fe,Be=ye,this.options.backtrack_lexer){if(!1!==(Ot=this.test_match(fe,Ze[ye])))return Ot;if(this._backtrack){Jt=!1;continue}return!1}if(!this.options.flex)break}return Jt?!1!==(Ot=this.test_match(Jt,Ze[Be]))&&Ot:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},"next"),lex:(0,Ye.K2)(function(){return this.next()||this.lex()},"lex"),begin:(0,Ye.K2)(function(Jt){this.conditionStack.push(Jt)},"begin"),popState:(0,Ye.K2)(function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},"popState"),_currentRules:(0,Ye.K2)(function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},"_currentRules"),topState:(0,Ye.K2)(function(Jt){return(Jt=this.conditionStack.length-1-Math.abs(Jt||0))>=0?this.conditionStack[Jt]:"INITIAL"},"topState"),pushState:(0,Ye.K2)(function(Jt){this.begin(Jt)},"pushState"),stateStackSize:(0,Ye.K2)(function(){return this.conditionStack.length},"stateStackSize"),options:{"case-insensitive":!0},performAction:(0,Ye.K2)(function(Jt,fe,Be,Ze){switch(Be){case 0:return this.pushState("shapeData"),fe.yytext="",24;case 1:return this.pushState("shapeDataStr"),24;case 2:return this.popState(),24;case 3:return fe.yytext=fe.yytext.replace(/\n\s*/g,"<br/>"),24;case 4:return 24;case 5:case 10:case 29:case 32:this.popState();break;case 6:return Jt.getLogger().trace("Found comment",fe.yytext),6;case 7:return 8;case 8:this.begin("CLASS");break;case 9:return this.popState(),17;case 11:Jt.getLogger().trace("Begin icon"),this.begin("ICON");break;case 12:return Jt.getLogger().trace("SPACELINE"),6;case 13:return 7;case 14:return 16;case 15:Jt.getLogger().trace("end icon"),this.popState();break;case 16:return Jt.getLogger().trace("Exploding node"),this.begin("NODE"),20;case 17:return Jt.getLogger().trace("Cloud"),this.begin("NODE"),20;case 18:return Jt.getLogger().trace("Explosion Bang"),this.begin("NODE"),20;case 19:return Jt.getLogger().trace("Cloud Bang"),this.begin("NODE"),20;case 20:case 21:case 22:case 23:return this.begin("NODE"),20;case 24:return 13;case 25:return 23;case 26:return 11;case 27:this.begin("NSTR2");break;case 28:return"NODE_DESCR";case 30:Jt.getLogger().trace("Starting NSTR"),this.begin("NSTR");break;case 31:return Jt.getLogger().trace("description:",fe.yytext),"NODE_DESCR";case 33:return this.popState(),Jt.getLogger().trace("node end ))"),"NODE_DEND";case 34:return this.popState(),Jt.getLogger().trace("node end )"),"NODE_DEND";case 35:return this.popState(),Jt.getLogger().trace("node end ...",fe.yytext),"NODE_DEND";case 36:case 39:case 40:return this.popState(),Jt.getLogger().trace("node end (("),"NODE_DEND";case 37:case 38:return this.popState(),Jt.getLogger().trace("node end (-"),"NODE_DEND";case 41:case 42:return Jt.getLogger().trace("Long description:",fe.yytext),21}},"anonymous"),rules:[/^(?:@\{)/i,/^(?:["])/i,/^(?:["])/i,/^(?:[^\"]+)/i,/^(?:[^}^"]+)/i,/^(?:\})/i,/^(?:\s*%%.*)/i,/^(?:kanban\b)/i,/^(?::::)/i,/^(?:.+)/i,/^(?:\n)/i,/^(?:::icon\()/i,/^(?:[\s]+[\n])/i,/^(?:[\n]+)/i,/^(?:[^\)]+)/i,/^(?:\))/i,/^(?:-\))/i,/^(?:\(-)/i,/^(?:\)\))/i,/^(?:\))/i,/^(?:\(\()/i,/^(?:\{\{)/i,/^(?:\()/i,/^(?:\[)/i,/^(?:[\s]+)/i,/^(?:[^\(\[\n\)\{\}@]+)/i,/^(?:$)/i,/^(?:["][`])/i,/^(?:[^`"]+)/i,/^(?:[`]["])/i,/^(?:["])/i,/^(?:[^"]+)/i,/^(?:["])/i,/^(?:[\)]\))/i,/^(?:[\)])/i,/^(?:[\]])/i,/^(?:\}\})/i,/^(?:\(-)/i,/^(?:-\))/i,/^(?:\(\()/i,/^(?:\()/i,/^(?:[^\)\]\(\}]+)/i,/^(?:.+(?!\(\())/i],conditions:{shapeDataEndBracket:{rules:[],inclusive:!1},shapeDataStr:{rules:[2,3],inclusive:!1},shapeData:{rules:[1,4,5],inclusive:!1},CLASS:{rules:[9,10],inclusive:!1},ICON:{rules:[14,15],inclusive:!1},NSTR2:{rules:[28,29],inclusive:!1},NSTR:{rules:[31,32],inclusive:!1},NODE:{rules:[27,30,33,34,35,36,37,38,39,40,41,42],inclusive:!1},INITIAL:{rules:[0,6,7,8,11,12,13,16,17,18,19,20,21,22,23,24,25,26],inclusive:!0}}}}(),(0,Ye.K2)(st,"Parser"),st.prototype=It,It.Parser=st,new st}();Xt.parser=Xt;var j=Xt,fr=[],Fe=[],vr=0,zr={},br=(0,Ye.K2)(()=>{fr=[],Fe=[],vr=0,zr={}},"clear"),mr=(0,Ye.K2)(H=>{if(0===fr.length)return null;const Nt=fr[0].level;let wt=null;for(let Wt=fr.length-1;Wt>=0;Wt--)if(fr[Wt].level===Nt&&!wt&&(wt=fr[Wt]),fr[Wt].level<Nt)throw new Error('Items without section detected, found section ("'+fr[Wt].label+'")');return H===wt?.level?null:wt},"getSection"),Er=(0,Ye.K2)(function(){return Fe},"getSections"),Lr=(0,Ye.K2)(function(){const Nt=[],wt=Er(),Wt=(0,yt.D7)();for(const xe of wt){const le={id:xe.id,label:(0,yt.jZ)(xe.label??"",Wt),isGroup:!0,ticket:xe.ticket,shape:"kanbanSection",level:xe.level,look:Wt.look};Nt.push(le);const Re=fr.filter(oe=>oe.parentId===xe.id);for(const oe of Re){const qe={id:oe.id,parentId:xe.id,label:(0,yt.jZ)(oe.label??"",Wt),isGroup:!1,ticket:oe?.ticket,priority:oe?.priority,assigned:oe?.assigned,icon:oe?.icon,shape:"kanbanItem",level:oe.level,rx:5,ry:5,cssStyles:["text-align: left"]};Nt.push(qe)}}return{nodes:Nt,edges:[],other:{},config:(0,yt.D7)()}},"getData"),Ar=(0,Ye.K2)((H,Nt,wt,Wt,xe)=>{const le=(0,yt.D7)();let Re=le.mindmap?.padding??yt.UI.mindmap.padding;switch(Wt){case ge.ROUNDED_RECT:case ge.RECT:case ge.HEXAGON:Re*=2}const oe={id:(0,yt.jZ)(Nt,le)||"kbn"+vr++,level:H,label:(0,yt.jZ)(wt,le),width:le.mindmap?.maxNodeWidth??yt.UI.mindmap.maxNodeWidth,padding:Re,isGroup:!1};if(void 0!==xe){let We;We=xe.includes("\n")?xe+"\n":"{\n"+xe+"\n}";const Ct=(0,D.H)(We,{schema:D.r});if(Ct.shape&&(Ct.shape!==Ct.shape.toLowerCase()||Ct.shape.includes("_")))throw new Error(`No such shape: ${Ct.shape}. Shape names should be lowercase.`);Ct?.shape&&"kanbanItem"===Ct.shape&&(oe.shape=Ct?.shape),Ct?.label&&(oe.label=Ct?.label),Ct?.icon&&(oe.icon=Ct?.icon.toString()),Ct?.assigned&&(oe.assigned=Ct?.assigned.toString()),Ct?.ticket&&(oe.ticket=Ct?.ticket.toString()),Ct?.priority&&(oe.priority=Ct?.priority)}const qe=mr(H);qe?oe.parentId=qe.id||"kbn"+vr++:Fe.push(oe),fr.push(oe)},"addNode"),ge={DEFAULT:0,NO_BORDER:0,ROUNDED_RECT:1,RECT:2,CIRCLE:3,CLOUD:4,BANG:5,HEXAGON:6},ae={clear:br,addNode:Ar,getSections:Er,getData:Lr,nodeType:ge,getType:(0,Ye.K2)((H,Nt)=>{switch(Ye.Rm.debug("In get type",H,Nt),H){case"[":return ge.RECT;case"(":return")"===Nt?ge.ROUNDED_RECT:ge.CLOUD;case"((":return ge.CIRCLE;case")":return ge.CLOUD;case"))":return ge.BANG;case"{{":return ge.HEXAGON;default:return ge.DEFAULT}},"getType"),setElementForId:(0,Ye.K2)((H,Nt)=>{zr[H]=Nt},"setElementForId"),decorateNode:(0,Ye.K2)(H=>{if(!H)return;const Nt=(0,yt.D7)(),wt=fr[fr.length-1];H.icon&&(wt.icon=(0,yt.jZ)(H.icon,Nt)),H.class&&(wt.cssClasses=(0,yt.jZ)(H.class,Nt))},"decorateNode"),type2Str:(0,Ye.K2)(H=>{switch(H){case ge.DEFAULT:return"no-border";case ge.RECT:return"rect";case ge.ROUNDED_RECT:return"rounded-rect";case ge.CIRCLE:return"circle";case ge.CLOUD:return"cloud";case ge.BANG:return"bang";case ge.HEXAGON:return"hexgon";default:return"no-border"}},"type2Str"),getLogger:(0,Ye.K2)(()=>Ye.Rm,"getLogger"),getElementById:(0,Ye.K2)(H=>zr[H],"getElementById")},re={draw:(0,Ye.K2)(function(){var H=(0,lt.A)(function*(Nt,wt,Wt,xe){Ye.Rm.debug("Rendering kanban diagram\n"+Nt);const Re=xe.db.getData(),oe=(0,yt.D7)();oe.htmlLabels=!1;const qe=(0,ee.D)(wt),We=qe.append("g");We.attr("class","sections");const Ct=qe.append("g");Ct.attr("class","items");const St=Re.nodes.filter(rt=>rt.isGroup);let R=0;const et=[];let xt=25;for(const rt of St){const Et=oe?.kanban?.sectionWidth||200;R+=1,rt.x=Et*R+10*(R-1)/2,rt.width=Et,rt.y=0,rt.height=3*Et,rt.rx=5,rt.ry=5,rt.cssClasses=rt.cssClasses+" section-"+R;const ut=yield(0,Rt.U)(We,rt);xt=Math.max(xt,ut?.labelBBox?.height),et.push(ut)}let it=0;for(const rt of St){const Et=et[it];it+=1;const ut=oe?.kanban?.sectionWidth||200,It=3*-ut/2+xt;let G=It;const st=Re.nodes.filter(Jt=>Jt.parentId===rt.id);for(const Jt of st){if(Jt.isGroup)throw new Error("Groups within groups are not allowed in Kanban diagrams");Jt.x=rt.x,Jt.width=ut-15;const Be=(yield(0,Rt.on)(Ct,Jt,{config:oe})).node().getBBox();Jt.y=G+Be.height/2,yield(0,Rt.U_)(Jt),G=Jt.y+Be.height/2+5}const Ce=Et.cluster.select("rect"),Ot=Math.max(G-It+30,50)+(xt-25);Ce.attr("height",Ot)}(0,yt.ot)(void 0,qe,oe.mindmap?.padding??yt.UI.kanban.padding,oe.mindmap?.useMaxWidth??yt.UI.kanban.useMaxWidth)});return function(Nt,wt,Wt,xe){return H.apply(this,arguments)}}(),"draw")},Pt=(0,Ye.K2)(H=>{let Nt="";for(let Wt=0;Wt<H.THEME_COLOR_LIMIT;Wt++)H["lineColor"+Wt]=H["lineColor"+Wt]||H["cScaleInv"+Wt],H["lineColor"+Wt]=(0,bt.HD)(H["lineColor"+Wt])?(0,bt.a)(H["lineColor"+Wt],20):(0,bt.e$)(H["lineColor"+Wt],20);const wt=(0,Ye.K2)((Wt,xe)=>H.darkMode?(0,bt.e$)(Wt,xe):(0,bt.a)(Wt,xe),"adjuster");for(let Wt=0;Wt<H.THEME_COLOR_LIMIT;Wt++){const xe=""+(17-3*Wt);Nt+=`\n    .section-${Wt-1} rect, .section-${Wt-1} path, .section-${Wt-1} circle, .section-${Wt-1} polygon, .section-${Wt-1} path  {\n      fill: ${wt(H["cScale"+Wt],10)};\n      stroke: ${wt(H["cScale"+Wt],10)};\n\n    }\n    .section-${Wt-1} text {\n     fill: ${H["cScaleLabel"+Wt]};\n    }\n    .node-icon-${Wt-1} {\n      font-size: 40px;\n      color: ${H["cScaleLabel"+Wt]};\n    }\n    .section-edge-${Wt-1}{\n      stroke: ${H["cScale"+Wt]};\n    }\n    .edge-depth-${Wt-1}{\n      stroke-width: ${xe};\n    }\n    .section-${Wt-1} line {\n      stroke: ${H["cScaleInv"+Wt]} ;\n      stroke-width: 3;\n    }\n\n    .disabled, .disabled circle, .disabled text {\n      fill: lightgray;\n    }\n    .disabled text {\n      fill: #efefef;\n    }\n\n  .node rect,\n  .node circle,\n  .node ellipse,\n  .node polygon,\n  .node path {\n    fill: ${H.background};\n    stroke: ${H.nodeBorder};\n    stroke-width: 1px;\n  }\n\n  .kanban-ticket-link {\n    fill: ${H.background};\n    stroke: ${H.nodeBorder};\n    text-decoration: underline;\n  }\n    `}return Nt},"genSections"),pt={db:ae,renderer:re,parser:j,styles:(0,Ye.K2)(H=>`\n  .edge {\n    stroke-width: 3;\n  }\n  ${Pt(H)}\n  .section-root rect, .section-root path, .section-root circle, .section-root polygon  {\n    fill: ${H.git0};\n  }\n  .section-root text {\n    fill: ${H.gitBranchLabel0};\n  }\n  .icon-container {\n    height:100%;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n  }\n  .edge {\n    fill: none;\n  }\n  .cluster-label, .label {\n    color: ${H.textColor};\n    fill: ${H.textColor};\n    }\n  .kanban-label {\n    dy: 1em;\n    alignment-baseline: middle;\n    text-anchor: middle;\n    dominant-baseline: middle;\n    text-align: center;\n  }\n    ${(0,L.o)()}\n`,"getStyles")}},91634:(ti,_r,B)=>{"use strict";B.r(_r),B.d(_r,{diagram:()=>ft});var lt=B(89204),ee=B(69664),L=B(80525),D=B(52052),Rt=B(79006),dt=B(32303),q=B(62233),A=B(40622),$t=Rt.UI.pie,yt={sections:new Map,showData:!1,config:$t},Ye=yt.sections,bt=yt.showData,Xt=structuredClone($t),mr={getConfig:(0,dt.K2)(()=>structuredClone(Xt),"getConfig"),clear:(0,dt.K2)(()=>{Ye=new Map,bt=yt.showData,(0,Rt.IU)()},"clear"),setDiagramTitle:Rt.ke,getDiagramTitle:Rt.ab,setAccTitle:Rt.SV,getAccTitle:Rt.iN,setAccDescription:Rt.EI,getAccDescription:Rt.m7,addSection:(0,dt.K2)(({label:Bt,value:_e})=>{if(_e<0)throw new Error(`"${Bt}" has invalid value: ${_e}. Negative values are not allowed in pie charts. All slice values must be >= 0.`);Ye.has(Bt)||(Ye.set(Bt,_e),dt.Rm.debug(`added new section: ${Bt}, with value: ${_e}`))},"addSection"),getSections:(0,dt.K2)(()=>Ye,"getSections"),setShowData:(0,dt.K2)(Bt=>{bt=Bt},"setShowData"),getShowData:(0,dt.K2)(()=>bt,"getShowData")},Er=(0,dt.K2)((Bt,_e)=>{(0,L.S)(Bt,_e),_e.setShowData(Bt.showData),Bt.sections.map(_e.addSection)},"populateDb"),Lr={parse:(0,dt.K2)(function(){var Bt=(0,lt.A)(function*(_e){const Z=yield(0,q.qg)("pie",_e);dt.Rm.debug(Z),Er(Z,mr)});return function(_e){return Bt.apply(this,arguments)}}(),"parse")},ge=(0,dt.K2)(Bt=>`\n  .pieCircle{\n    stroke: ${Bt.pieStrokeColor};\n    stroke-width : ${Bt.pieStrokeWidth};\n    opacity : ${Bt.pieOpacity};\n  }\n  .pieOuterCircle{\n    stroke: ${Bt.pieOuterStrokeColor};\n    stroke-width: ${Bt.pieOuterStrokeWidth};\n    fill: none;\n  }\n  .pieTitleText {\n    text-anchor: middle;\n    font-size: ${Bt.pieTitleTextSize};\n    fill: ${Bt.pieTitleTextColor};\n    font-family: ${Bt.fontFamily};\n  }\n  .slice {\n    font-family: ${Bt.fontFamily};\n    fill: ${Bt.pieSectionTextColor};\n    font-size:${Bt.pieSectionTextSize};\n    // fill: white;\n  }\n  .legend text {\n    fill: ${Bt.pieLegendTextColor};\n    font-family: ${Bt.fontFamily};\n    font-size: ${Bt.pieLegendTextSize};\n  }\n`,"getStyles"),Br=(0,dt.K2)(Bt=>{const _e=[...Bt.values()].reduce((S,re)=>S+re,0),Z=[...Bt.entries()].map(([S,re])=>({label:S,value:re})).filter(S=>S.value/_e*100>=1).sort((S,re)=>re.value-S.value);return(0,A.rLf)().value(S=>S.value)(Z)},"createPieArcs"),ft={parser:Lr,db:mr,renderer:{draw:(0,dt.K2)((Bt,_e,Z,ae)=>{dt.Rm.debug("rendering pie chart\n"+Bt);const S=ae.db,re=(0,Rt.D7)(),Pt=(0,D.$t)(S.getConfig(),re.pie),wt=(0,ee.D)(_e),Wt=wt.append("g");Wt.attr("transform","translate(225,225)");const{themeVariables:xe}=re;let[le]=(0,D.I5)(xe.pieOuterStrokeWidth);le??=2;const Re=Pt.textPosition,oe=Math.min(450,450)/2-40,qe=(0,A.JLW)().innerRadius(0).outerRadius(oe),We=(0,A.JLW)().innerRadius(oe*Re).outerRadius(oe*Re);Wt.append("circle").attr("cx",0).attr("cy",0).attr("r",oe+le/2).attr("class","pieOuterCircle");const Ct=S.getSections(),St=Br(Ct),R=[xe.pie1,xe.pie2,xe.pie3,xe.pie4,xe.pie5,xe.pie6,xe.pie7,xe.pie8,xe.pie9,xe.pie10,xe.pie11,xe.pie12];let O=0;Ct.forEach(It=>{O+=It});const et=St.filter(It=>"0"!==(It.data.value/O*100).toFixed(0)),xt=(0,A.UMr)(R);Wt.selectAll("mySlices").data(et).enter().append("path").attr("d",qe).attr("fill",It=>xt(It.data.label)).attr("class","pieCircle"),Wt.selectAll("mySlices").data(et).enter().append("text").text(It=>(It.data.value/O*100).toFixed(0)+"%").attr("transform",It=>"translate("+We.centroid(It)+")").style("text-anchor","middle").attr("class","slice"),Wt.append("text").text(S.getDiagramTitle()).attr("x",0).attr("y",-200).attr("class","pieTitleText");const it=[...Ct.entries()].map(([It,G])=>({label:It,value:G})),rt=Wt.selectAll(".legend").data(it).enter().append("g").attr("class","legend").attr("transform",(It,G)=>"translate(216,"+(22*G-22*it.length/2)+")");rt.append("rect").attr("width",18).attr("height",18).style("fill",It=>xt(It.label)).style("stroke",It=>xt(It.label)),rt.append("text").attr("x",22).attr("y",14).text(It=>S.getShowData()?`${It.label} [${It.value}]`:It.label);const ut=512+Math.max(...rt.selectAll("text").nodes().map(It=>It?.getBoundingClientRect().width??0));wt.attr("viewBox",`0 0 ${ut} 450`),(0,Rt.a$)(wt,450,ut,Pt.useMaxWidth)},"draw")},styles:ge}},94221:(ti,_r)=>{"use strict";function lt(q){return"string"==typeof q||q instanceof String}function Rt(q){return Array.isArray(q)}Object.defineProperty(_r,"__esModule",{value:!0}),_r.stringArray=_r.array=_r.func=_r.error=_r.number=_r.string=_r.boolean=void 0,_r.boolean=function B(q){return!0===q||!1===q},_r.string=lt,_r.number=function ee(q){return"number"==typeof q||q instanceof Number},_r.error=function L(q){return q instanceof Error},_r.func=function D(q){return"function"==typeof q},_r.array=Rt,_r.stringArray=function dt(q){return Rt(q)&&q.every(A=>lt(A))}},96434:(ti,_r,B)=>{"use strict";B.r(_r),B.d(_r,{diagram:()=>tr});var Ye,lt=B(89204),ee=B(45027),L=B(62045),D=B(24715),Rt=B(67040),dt=B(52052),q=B(79006),A=B(32303),$t=B(40622),yt=B(73986),bt=function(){var g=(0,A.K2)(function(Ra,Jr,ca,ha){for(ca=ca||{},ha=Ra.length;ha--;ca[Ra[ha]]=Jr);return ca},"o"),y=[1,2],E=[1,3],P=[1,4],b=[2,4],z=[1,9],p=[1,11],x=[1,13],C=[1,14],w=[1,16],$=[1,17],ct=[1,18],kt=[1,24],Ut=[1,25],Ht=[1,26],zt=[1,27],ue=[1,28],je=[1,29],ze=[1,30],Cr=[1,31],cr=[1,32],sr=[1,33],$e=[1,34],He=[1,35],Pr=[1,36],wr=[1,37],Vr=[1,38],xr=[1,39],Ba=[1,41],Zr=[1,42],Oa=[1,43],Qr=[1,44],ra=[1,45],Xr=[1,46],Rr=[1,4,5,13,14,16,18,21,23,29,30,31,33,35,36,37,38,39,41,43,44,46,47,48,49,50,52,53,55,60,61,62,63,71],Tr=[2,71],N=[4,5,16,50,52,53],Vt=[4,5,13,14,16,18,21,23,29,30,31,33,35,36,37,38,39,41,43,44,46,50,52,53,55,60,61,62,63,71],Ke=[4,5,13,14,16,18,21,23,29,30,31,33,35,36,37,38,39,41,43,44,46,49,50,52,53,55,60,61,62,63,71],rr=[4,5,13,14,16,18,21,23,29,30,31,33,35,36,37,38,39,41,43,44,46,48,50,52,53,55,60,61,62,63,71],ia=[4,5,13,14,16,18,21,23,29,30,31,33,35,36,37,38,39,41,43,44,46,47,50,52,53,55,60,61,62,63,71],hr=[69,70,71],ga=[1,127],or={trace:(0,A.K2)(function(){},"trace"),yy:{},symbols_:{error:2,start:3,SPACE:4,NEWLINE:5,SD:6,document:7,line:8,statement:9,box_section:10,box_line:11,participant_statement:12,create:13,box:14,restOfLine:15,end:16,signal:17,autonumber:18,NUM:19,off:20,activate:21,actor:22,deactivate:23,note_statement:24,links_statement:25,link_statement:26,properties_statement:27,details_statement:28,title:29,legacy_title:30,acc_title:31,acc_title_value:32,acc_descr:33,acc_descr_value:34,acc_descr_multiline_value:35,loop:36,rect:37,opt:38,alt:39,else_sections:40,par:41,par_sections:42,par_over:43,critical:44,option_sections:45,break:46,option:47,and:48,else:49,participant:50,AS:51,participant_actor:52,destroy:53,actor_with_config:54,note:55,placement:56,text2:57,over:58,actor_pair:59,links:60,link:61,properties:62,details:63,spaceList:64,",":65,left_of:66,right_of:67,signaltype:68,"+":69,"-":70,ACTOR:71,config_object:72,CONFIG_START:73,CONFIG_CONTENT:74,CONFIG_END:75,SOLID_OPEN_ARROW:76,DOTTED_OPEN_ARROW:77,SOLID_ARROW:78,BIDIRECTIONAL_SOLID_ARROW:79,DOTTED_ARROW:80,BIDIRECTIONAL_DOTTED_ARROW:81,SOLID_CROSS:82,DOTTED_CROSS:83,SOLID_POINT:84,DOTTED_POINT:85,TXT:86,$accept:0,$end:1},terminals_:{2:"error",4:"SPACE",5:"NEWLINE",6:"SD",13:"create",14:"box",15:"restOfLine",16:"end",18:"autonumber",19:"NUM",20:"off",21:"activate",23:"deactivate",29:"title",30:"legacy_title",31:"acc_title",32:"acc_title_value",33:"acc_descr",34:"acc_descr_value",35:"acc_descr_multiline_value",36:"loop",37:"rect",38:"opt",39:"alt",41:"par",43:"par_over",44:"critical",46:"break",47:"option",48:"and",49:"else",50:"participant",51:"AS",52:"participant_actor",53:"destroy",55:"note",58:"over",60:"links",61:"link",62:"properties",63:"details",65:",",66:"left_of",67:"right_of",69:"+",70:"-",71:"ACTOR",73:"CONFIG_START",74:"CONFIG_CONTENT",75:"CONFIG_END",76:"SOLID_OPEN_ARROW",77:"DOTTED_OPEN_ARROW",78:"SOLID_ARROW",79:"BIDIRECTIONAL_SOLID_ARROW",80:"DOTTED_ARROW",81:"BIDIRECTIONAL_DOTTED_ARROW",82:"SOLID_CROSS",83:"DOTTED_CROSS",84:"SOLID_POINT",85:"DOTTED_POINT",86:"TXT"},productions_:[0,[3,2],[3,2],[3,2],[7,0],[7,2],[8,2],[8,1],[8,1],[10,0],[10,2],[11,2],[11,1],[11,1],[9,1],[9,2],[9,4],[9,2],[9,4],[9,3],[9,3],[9,2],[9,3],[9,3],[9,2],[9,2],[9,2],[9,2],[9,2],[9,1],[9,1],[9,2],[9,2],[9,1],[9,4],[9,4],[9,4],[9,4],[9,4],[9,4],[9,4],[9,4],[45,1],[45,4],[42,1],[42,4],[40,1],[40,4],[12,5],[12,3],[12,5],[12,3],[12,3],[12,3],[24,4],[24,4],[25,3],[26,3],[27,3],[28,3],[64,2],[64,1],[59,3],[59,1],[56,1],[56,1],[17,5],[17,5],[17,4],[54,2],[72,3],[22,1],[68,1],[68,1],[68,1],[68,1],[68,1],[68,1],[68,1],[68,1],[68,1],[68,1],[57,1]],performAction:(0,A.K2)(function(Jr,ca,ha,Yr,Fa,pr,Va){var lr=pr.length-1;switch(Fa){case 3:return Yr.apply(pr[lr]),pr[lr];case 4:case 9:case 8:case 13:this.$=[];break;case 5:case 10:pr[lr-1].push(pr[lr]),this.$=pr[lr-1];break;case 6:case 7:case 11:case 12:case 63:this.$=pr[lr];break;case 15:pr[lr].type="createParticipant",this.$=pr[lr];break;case 16:pr[lr-1].unshift({type:"boxStart",boxData:Yr.parseBoxData(pr[lr-2])}),pr[lr-1].push({type:"boxEnd",boxText:pr[lr-2]}),this.$=pr[lr-1];break;case 18:this.$={type:"sequenceIndex",sequenceIndex:Number(pr[lr-2]),sequenceIndexStep:Number(pr[lr-1]),sequenceVisible:!0,signalType:Yr.LINETYPE.AUTONUMBER};break;case 19:this.$={type:"sequenceIndex",sequenceIndex:Number(pr[lr-1]),sequenceIndexStep:1,sequenceVisible:!0,signalType:Yr.LINETYPE.AUTONUMBER};break;case 20:this.$={type:"sequenceIndex",sequenceVisible:!1,signalType:Yr.LINETYPE.AUTONUMBER};break;case 21:this.$={type:"sequenceIndex",sequenceVisible:!0,signalType:Yr.LINETYPE.AUTONUMBER};break;case 22:this.$={type:"activeStart",signalType:Yr.LINETYPE.ACTIVE_START,actor:pr[lr-1].actor};break;case 23:this.$={type:"activeEnd",signalType:Yr.LINETYPE.ACTIVE_END,actor:pr[lr-1].actor};break;case 29:Yr.setDiagramTitle(pr[lr].substring(6)),this.$=pr[lr].substring(6);break;case 30:Yr.setDiagramTitle(pr[lr].substring(7)),this.$=pr[lr].substring(7);break;case 31:this.$=pr[lr].trim(),Yr.setAccTitle(this.$);break;case 32:case 33:this.$=pr[lr].trim(),Yr.setAccDescription(this.$);break;case 34:pr[lr-1].unshift({type:"loopStart",loopText:Yr.parseMessage(pr[lr-2]),signalType:Yr.LINETYPE.LOOP_START}),pr[lr-1].push({type:"loopEnd",loopText:pr[lr-2],signalType:Yr.LINETYPE.LOOP_END}),this.$=pr[lr-1];break;case 35:pr[lr-1].unshift({type:"rectStart",color:Yr.parseMessage(pr[lr-2]),signalType:Yr.LINETYPE.RECT_START}),pr[lr-1].push({type:"rectEnd",color:Yr.parseMessage(pr[lr-2]),signalType:Yr.LINETYPE.RECT_END}),this.$=pr[lr-1];break;case 36:pr[lr-1].unshift({type:"optStart",optText:Yr.parseMessage(pr[lr-2]),signalType:Yr.LINETYPE.OPT_START}),pr[lr-1].push({type:"optEnd",optText:Yr.parseMessage(pr[lr-2]),signalType:Yr.LINETYPE.OPT_END}),this.$=pr[lr-1];break;case 37:pr[lr-1].unshift({type:"altStart",altText:Yr.parseMessage(pr[lr-2]),signalType:Yr.LINETYPE.ALT_START}),pr[lr-1].push({type:"altEnd",signalType:Yr.LINETYPE.ALT_END}),this.$=pr[lr-1];break;case 38:pr[lr-1].unshift({type:"parStart",parText:Yr.parseMessage(pr[lr-2]),signalType:Yr.LINETYPE.PAR_START}),pr[lr-1].push({type:"parEnd",signalType:Yr.LINETYPE.PAR_END}),this.$=pr[lr-1];break;case 39:pr[lr-1].unshift({type:"parStart",parText:Yr.parseMessage(pr[lr-2]),signalType:Yr.LINETYPE.PAR_OVER_START}),pr[lr-1].push({type:"parEnd",signalType:Yr.LINETYPE.PAR_END}),this.$=pr[lr-1];break;case 40:pr[lr-1].unshift({type:"criticalStart",criticalText:Yr.parseMessage(pr[lr-2]),signalType:Yr.LINETYPE.CRITICAL_START}),pr[lr-1].push({type:"criticalEnd",signalType:Yr.LINETYPE.CRITICAL_END}),this.$=pr[lr-1];break;case 41:pr[lr-1].unshift({type:"breakStart",breakText:Yr.parseMessage(pr[lr-2]),signalType:Yr.LINETYPE.BREAK_START}),pr[lr-1].push({type:"breakEnd",optText:Yr.parseMessage(pr[lr-2]),signalType:Yr.LINETYPE.BREAK_END}),this.$=pr[lr-1];break;case 43:this.$=pr[lr-3].concat([{type:"option",optionText:Yr.parseMessage(pr[lr-1]),signalType:Yr.LINETYPE.CRITICAL_OPTION},pr[lr]]);break;case 45:this.$=pr[lr-3].concat([{type:"and",parText:Yr.parseMessage(pr[lr-1]),signalType:Yr.LINETYPE.PAR_AND},pr[lr]]);break;case 47:this.$=pr[lr-3].concat([{type:"else",altText:Yr.parseMessage(pr[lr-1]),signalType:Yr.LINETYPE.ALT_ELSE},pr[lr]]);break;case 48:pr[lr-3].draw="participant",pr[lr-3].type="addParticipant",pr[lr-3].description=Yr.parseMessage(pr[lr-1]),this.$=pr[lr-3];break;case 49:case 53:pr[lr-1].draw="participant",pr[lr-1].type="addParticipant",this.$=pr[lr-1];break;case 50:pr[lr-3].draw="actor",pr[lr-3].type="addParticipant",pr[lr-3].description=Yr.parseMessage(pr[lr-1]),this.$=pr[lr-3];break;case 51:pr[lr-1].draw="actor",pr[lr-1].type="addParticipant",this.$=pr[lr-1];break;case 52:pr[lr-1].type="destroyParticipant",this.$=pr[lr-1];break;case 54:this.$=[pr[lr-1],{type:"addNote",placement:pr[lr-2],actor:pr[lr-1].actor,text:pr[lr]}];break;case 55:pr[lr-2]=[].concat(pr[lr-1],pr[lr-1]).slice(0,2),pr[lr-2][0]=pr[lr-2][0].actor,pr[lr-2][1]=pr[lr-2][1].actor,this.$=[pr[lr-1],{type:"addNote",placement:Yr.PLACEMENT.OVER,actor:pr[lr-2].slice(0,2),text:pr[lr]}];break;case 56:this.$=[pr[lr-1],{type:"addLinks",actor:pr[lr-1].actor,text:pr[lr]}];break;case 57:this.$=[pr[lr-1],{type:"addALink",actor:pr[lr-1].actor,text:pr[lr]}];break;case 58:this.$=[pr[lr-1],{type:"addProperties",actor:pr[lr-1].actor,text:pr[lr]}];break;case 59:this.$=[pr[lr-1],{type:"addDetails",actor:pr[lr-1].actor,text:pr[lr]}];break;case 62:this.$=[pr[lr-2],pr[lr]];break;case 64:this.$=Yr.PLACEMENT.LEFTOF;break;case 65:this.$=Yr.PLACEMENT.RIGHTOF;break;case 66:this.$=[pr[lr-4],pr[lr-1],{type:"addMessage",from:pr[lr-4].actor,to:pr[lr-1].actor,signalType:pr[lr-3],msg:pr[lr],activate:!0},{type:"activeStart",signalType:Yr.LINETYPE.ACTIVE_START,actor:pr[lr-1].actor}];break;case 67:this.$=[pr[lr-4],pr[lr-1],{type:"addMessage",from:pr[lr-4].actor,to:pr[lr-1].actor,signalType:pr[lr-3],msg:pr[lr]},{type:"activeEnd",signalType:Yr.LINETYPE.ACTIVE_END,actor:pr[lr-4].actor}];break;case 68:this.$=[pr[lr-3],pr[lr-1],{type:"addMessage",from:pr[lr-3].actor,to:pr[lr-1].actor,signalType:pr[lr-2],msg:pr[lr]}];break;case 69:this.$={type:"addParticipant",actor:pr[lr-1],config:pr[lr]};break;case 70:this.$=pr[lr-1].trim();break;case 71:this.$={type:"addParticipant",actor:pr[lr]};break;case 72:this.$=Yr.LINETYPE.SOLID_OPEN;break;case 73:this.$=Yr.LINETYPE.DOTTED_OPEN;break;case 74:this.$=Yr.LINETYPE.SOLID;break;case 75:this.$=Yr.LINETYPE.BIDIRECTIONAL_SOLID;break;case 76:this.$=Yr.LINETYPE.DOTTED;break;case 77:this.$=Yr.LINETYPE.BIDIRECTIONAL_DOTTED;break;case 78:this.$=Yr.LINETYPE.SOLID_CROSS;break;case 79:this.$=Yr.LINETYPE.DOTTED_CROSS;break;case 80:this.$=Yr.LINETYPE.SOLID_POINT;break;case 81:this.$=Yr.LINETYPE.DOTTED_POINT;break;case 82:this.$=Yr.parseMessage(pr[lr].trim().substring(1))}},"anonymous"),table:[{3:1,4:y,5:E,6:P},{1:[3]},{3:5,4:y,5:E,6:P},{3:6,4:y,5:E,6:P},g([1,4,5,13,14,18,21,23,29,30,31,33,35,36,37,38,39,41,43,44,46,50,52,53,55,60,61,62,63,71],b,{7:7}),{1:[2,1]},{1:[2,2]},{1:[2,3],4:z,5:p,8:8,9:10,12:12,13:x,14:C,17:15,18:w,21:$,22:40,23:ct,24:19,25:20,26:21,27:22,28:23,29:kt,30:Ut,31:Ht,33:zt,35:ue,36:je,37:ze,38:Cr,39:cr,41:sr,43:$e,44:He,46:Pr,50:wr,52:Vr,53:xr,55:Ba,60:Zr,61:Oa,62:Qr,63:ra,71:Xr},g(Rr,[2,5]),{9:47,12:12,13:x,14:C,17:15,18:w,21:$,22:40,23:ct,24:19,25:20,26:21,27:22,28:23,29:kt,30:Ut,31:Ht,33:zt,35:ue,36:je,37:ze,38:Cr,39:cr,41:sr,43:$e,44:He,46:Pr,50:wr,52:Vr,53:xr,55:Ba,60:Zr,61:Oa,62:Qr,63:ra,71:Xr},g(Rr,[2,7]),g(Rr,[2,8]),g(Rr,[2,14]),{12:48,50:wr,52:Vr,53:xr},{15:[1,49]},{5:[1,50]},{5:[1,53],19:[1,51],20:[1,52]},{22:54,71:Xr},{22:55,71:Xr},{5:[1,56]},{5:[1,57]},{5:[1,58]},{5:[1,59]},{5:[1,60]},g(Rr,[2,29]),g(Rr,[2,30]),{32:[1,61]},{34:[1,62]},g(Rr,[2,33]),{15:[1,63]},{15:[1,64]},{15:[1,65]},{15:[1,66]},{15:[1,67]},{15:[1,68]},{15:[1,69]},{15:[1,70]},{22:71,54:72,71:[1,73]},{22:74,71:Xr},{22:75,71:Xr},{68:76,76:[1,77],77:[1,78],78:[1,79],79:[1,80],80:[1,81],81:[1,82],82:[1,83],83:[1,84],84:[1,85],85:[1,86]},{56:87,58:[1,88],66:[1,89],67:[1,90]},{22:91,71:Xr},{22:92,71:Xr},{22:93,71:Xr},{22:94,71:Xr},g([5,51,65,76,77,78,79,80,81,82,83,84,85,86],Tr),g(Rr,[2,6]),g(Rr,[2,15]),g(N,[2,9],{10:95}),g(Rr,[2,17]),{5:[1,97],19:[1,96]},{5:[1,98]},g(Rr,[2,21]),{5:[1,99]},{5:[1,100]},g(Rr,[2,24]),g(Rr,[2,25]),g(Rr,[2,26]),g(Rr,[2,27]),g(Rr,[2,28]),g(Rr,[2,31]),g(Rr,[2,32]),g(Vt,b,{7:101}),g(Vt,b,{7:102}),g(Vt,b,{7:103}),g(Ke,b,{40:104,7:105}),g(rr,b,{42:106,7:107}),g(rr,b,{7:107,42:108}),g(ia,b,{45:109,7:110}),g(Vt,b,{7:111}),{5:[1,113],51:[1,112]},{5:[1,114]},g([5,51],Tr,{72:115,73:[1,116]}),{5:[1,118],51:[1,117]},{5:[1,119]},{22:122,69:[1,120],70:[1,121],71:Xr},g(hr,[2,72]),g(hr,[2,73]),g(hr,[2,74]),g(hr,[2,75]),g(hr,[2,76]),g(hr,[2,77]),g(hr,[2,78]),g(hr,[2,79]),g(hr,[2,80]),g(hr,[2,81]),{22:123,71:Xr},{22:125,59:124,71:Xr},{71:[2,64]},{71:[2,65]},{57:126,86:ga},{57:128,86:ga},{57:129,86:ga},{57:130,86:ga},{4:[1,133],5:[1,135],11:132,12:134,16:[1,131],50:wr,52:Vr,53:xr},{5:[1,136]},g(Rr,[2,19]),g(Rr,[2,20]),g(Rr,[2,22]),g(Rr,[2,23]),{4:z,5:p,8:8,9:10,12:12,13:x,14:C,16:[1,137],17:15,18:w,21:$,22:40,23:ct,24:19,25:20,26:21,27:22,28:23,29:kt,30:Ut,31:Ht,33:zt,35:ue,36:je,37:ze,38:Cr,39:cr,41:sr,43:$e,44:He,46:Pr,50:wr,52:Vr,53:xr,55:Ba,60:Zr,61:Oa,62:Qr,63:ra,71:Xr},{4:z,5:p,8:8,9:10,12:12,13:x,14:C,16:[1,138],17:15,18:w,21:$,22:40,23:ct,24:19,25:20,26:21,27:22,28:23,29:kt,30:Ut,31:Ht,33:zt,35:ue,36:je,37:ze,38:Cr,39:cr,41:sr,43:$e,44:He,46:Pr,50:wr,52:Vr,53:xr,55:Ba,60:Zr,61:Oa,62:Qr,63:ra,71:Xr},{4:z,5:p,8:8,9:10,12:12,13:x,14:C,16:[1,139],17:15,18:w,21:$,22:40,23:ct,24:19,25:20,26:21,27:22,28:23,29:kt,30:Ut,31:Ht,33:zt,35:ue,36:je,37:ze,38:Cr,39:cr,41:sr,43:$e,44:He,46:Pr,50:wr,52:Vr,53:xr,55:Ba,60:Zr,61:Oa,62:Qr,63:ra,71:Xr},{16:[1,140]},{4:z,5:p,8:8,9:10,12:12,13:x,14:C,16:[2,46],17:15,18:w,21:$,22:40,23:ct,24:19,25:20,26:21,27:22,28:23,29:kt,30:Ut,31:Ht,33:zt,35:ue,36:je,37:ze,38:Cr,39:cr,41:sr,43:$e,44:He,46:Pr,49:[1,141],50:wr,52:Vr,53:xr,55:Ba,60:Zr,61:Oa,62:Qr,63:ra,71:Xr},{16:[1,142]},{4:z,5:p,8:8,9:10,12:12,13:x,14:C,16:[2,44],17:15,18:w,21:$,22:40,23:ct,24:19,25:20,26:21,27:22,28:23,29:kt,30:Ut,31:Ht,33:zt,35:ue,36:je,37:ze,38:Cr,39:cr,41:sr,43:$e,44:He,46:Pr,48:[1,143],50:wr,52:Vr,53:xr,55:Ba,60:Zr,61:Oa,62:Qr,63:ra,71:Xr},{16:[1,144]},{16:[1,145]},{4:z,5:p,8:8,9:10,12:12,13:x,14:C,16:[2,42],17:15,18:w,21:$,22:40,23:ct,24:19,25:20,26:21,27:22,28:23,29:kt,30:Ut,31:Ht,33:zt,35:ue,36:je,37:ze,38:Cr,39:cr,41:sr,43:$e,44:He,46:Pr,47:[1,146],50:wr,52:Vr,53:xr,55:Ba,60:Zr,61:Oa,62:Qr,63:ra,71:Xr},{4:z,5:p,8:8,9:10,12:12,13:x,14:C,16:[1,147],17:15,18:w,21:$,22:40,23:ct,24:19,25:20,26:21,27:22,28:23,29:kt,30:Ut,31:Ht,33:zt,35:ue,36:je,37:ze,38:Cr,39:cr,41:sr,43:$e,44:He,46:Pr,50:wr,52:Vr,53:xr,55:Ba,60:Zr,61:Oa,62:Qr,63:ra,71:Xr},{15:[1,148]},g(Rr,[2,49]),g(Rr,[2,53]),{5:[2,69]},{74:[1,149]},{15:[1,150]},g(Rr,[2,51]),g(Rr,[2,52]),{22:151,71:Xr},{22:152,71:Xr},{57:153,86:ga},{57:154,86:ga},{57:155,86:ga},{65:[1,156],86:[2,63]},{5:[2,56]},{5:[2,82]},{5:[2,57]},{5:[2,58]},{5:[2,59]},g(Rr,[2,16]),g(N,[2,10]),{12:157,50:wr,52:Vr,53:xr},g(N,[2,12]),g(N,[2,13]),g(Rr,[2,18]),g(Rr,[2,34]),g(Rr,[2,35]),g(Rr,[2,36]),g(Rr,[2,37]),{15:[1,158]},g(Rr,[2,38]),{15:[1,159]},g(Rr,[2,39]),g(Rr,[2,40]),{15:[1,160]},g(Rr,[2,41]),{5:[1,161]},{75:[1,162]},{5:[1,163]},{57:164,86:ga},{57:165,86:ga},{5:[2,68]},{5:[2,54]},{5:[2,55]},{22:166,71:Xr},g(N,[2,11]),g(Ke,b,{7:105,40:167}),g(rr,b,{7:107,42:168}),g(ia,b,{7:110,45:169}),g(Rr,[2,48]),{5:[2,70]},g(Rr,[2,50]),{5:[2,66]},{5:[2,67]},{86:[2,62]},{16:[2,47]},{16:[2,45]},{16:[2,43]}],defaultActions:{5:[2,1],6:[2,2],89:[2,64],90:[2,65],115:[2,69],126:[2,56],127:[2,82],128:[2,57],129:[2,58],130:[2,59],153:[2,68],154:[2,54],155:[2,55],162:[2,70],164:[2,66],165:[2,67],166:[2,62],167:[2,47],168:[2,45],169:[2,43]},parseError:(0,A.K2)(function(Jr,ca){if(!ca.recoverable){var ha=new Error(Jr);throw ha.hash=ca,ha}this.trace(Jr)},"parseError"),parse:(0,A.K2)(function(Jr){var ca=this,ha=[0],Yr=[],Fa=[null],pr=[],Va=this.table,lr="",qa=0,za=0,ja=0,Ka=pr.slice.call(arguments,1),fa=Object.create(this.lexer),di={yy:{}};for(var we in this.yy)Object.prototype.hasOwnProperty.call(this.yy,we)&&(di.yy[we]=this.yy[we]);fa.setInput(Jr,di.yy),di.yy.lexer=fa,di.yy.parser=this,typeof fa.yylloc>"u"&&(fa.yylloc={});var Li=fa.yylloc;pr.push(Li);var Me=fa.options&&fa.options.ranges;function Dt(){var wa;return"number"!=typeof(wa=Yr.pop()||fa.lex()||1)&&(wa instanceof Array&&(wa=(Yr=wa).pop()),wa=ca.symbols_[wa]||wa),wa}this.parseError="function"==typeof di.yy.parseError?di.yy.parseError:Object.getPrototypeOf(this).parseError,(0,A.K2)(function at(wa){ha.length=ha.length-2*wa,Fa.length=Fa.length-wa,pr.length=pr.length-wa},"popStack"),(0,A.K2)(Dt,"lex");for(var M,jt,Ve,gt,Ft,ta,Gr,La,Qe={};;){if(this.defaultActions[Ve=ha[ha.length-1]]?gt=this.defaultActions[Ve]:((null===M||typeof M>"u")&&(M=Dt()),gt=Va[Ve]&&Va[Ve][M]),typeof gt>"u"||!gt.length||!gt[0]){var da;for(ta in La=[],Va[Ve])this.terminals_[ta]&&ta>2&&La.push("'"+this.terminals_[ta]+"'");da=fa.showPosition?"Parse error on line "+(qa+1)+":\n"+fa.showPosition()+"\nExpecting "+La.join(", ")+", got '"+(this.terminals_[M]||M)+"'":"Parse error on line "+(qa+1)+": Unexpected "+(1==M?"end of input":"'"+(this.terminals_[M]||M)+"'"),this.parseError(da,{text:fa.match,token:this.terminals_[M]||M,line:fa.yylineno,loc:Li,expected:La})}if(gt[0]instanceof Array&&gt.length>1)throw new Error("Parse Error: multiple actions possible at state: "+Ve+", token: "+M);switch(gt[0]){case 1:ha.push(M),Fa.push(fa.yytext),pr.push(fa.yylloc),ha.push(gt[1]),M=null,jt?(M=jt,jt=null):(za=fa.yyleng,lr=fa.yytext,qa=fa.yylineno,Li=fa.yylloc,ja>0&&ja--);break;case 2:if(Qe.$=Fa[Fa.length-(Gr=this.productions_[gt[1]][1])],Qe._$={first_line:pr[pr.length-(Gr||1)].first_line,last_line:pr[pr.length-1].last_line,first_column:pr[pr.length-(Gr||1)].first_column,last_column:pr[pr.length-1].last_column},Me&&(Qe._$.range=[pr[pr.length-(Gr||1)].range[0],pr[pr.length-1].range[1]]),typeof(Ft=this.performAction.apply(Qe,[lr,za,qa,di.yy,gt[1],Fa,pr].concat(Ka)))<"u")return Ft;Gr&&(ha=ha.slice(0,-1*Gr*2),Fa=Fa.slice(0,-1*Gr),pr=pr.slice(0,-1*Gr)),ha.push(this.productions_[gt[1]][0]),Fa.push(Qe.$),pr.push(Qe._$),ha.push(Va[ha[ha.length-2]][ha[ha.length-1]]);break;case 3:return!0}}return!0},"parse")};function Ma(){this.yy={}}return or.lexer=function(){return{EOF:1,parseError:(0,A.K2)(function(ca,ha){if(!this.yy.parser)throw new Error(ca);this.yy.parser.parseError(ca,ha)},"parseError"),setInput:(0,A.K2)(function(Jr,ca){return this.yy=ca||this.yy||{},this._input=Jr,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},"setInput"),input:(0,A.K2)(function(){var Jr=this._input[0];return this.yytext+=Jr,this.yyleng++,this.offset++,this.match+=Jr,this.matched+=Jr,Jr.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),Jr},"input"),unput:(0,A.K2)(function(Jr){var ca=Jr.length,ha=Jr.split(/(?:\r\n?|\n)/g);this._input=Jr+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-ca),this.offset-=ca;var Yr=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),ha.length-1&&(this.yylineno-=ha.length-1);var Fa=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:ha?(ha.length===Yr.length?this.yylloc.first_column:0)+Yr[Yr.length-ha.length].length-ha[0].length:this.yylloc.first_column-ca},this.options.ranges&&(this.yylloc.range=[Fa[0],Fa[0]+this.yyleng-ca]),this.yyleng=this.yytext.length,this},"unput"),more:(0,A.K2)(function(){return this._more=!0,this},"more"),reject:(0,A.K2)(function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},"reject"),less:(0,A.K2)(function(Jr){this.unput(this.match.slice(Jr))},"less"),pastInput:(0,A.K2)(function(){var Jr=this.matched.substr(0,this.matched.length-this.match.length);return(Jr.length>20?"...":"")+Jr.substr(-20).replace(/\n/g,"")},"pastInput"),upcomingInput:(0,A.K2)(function(){var Jr=this.match;return Jr.length<20&&(Jr+=this._input.substr(0,20-Jr.length)),(Jr.substr(0,20)+(Jr.length>20?"...":"")).replace(/\n/g,"")},"upcomingInput"),showPosition:(0,A.K2)(function(){var Jr=this.pastInput(),ca=new Array(Jr.length+1).join("-");return Jr+this.upcomingInput()+"\n"+ca+"^"},"showPosition"),test_match:(0,A.K2)(function(Jr,ca){var ha,Yr,Fa;if(this.options.backtrack_lexer&&(Fa={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(Fa.yylloc.range=this.yylloc.range.slice(0))),(Yr=Jr[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=Yr.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:Yr?Yr[Yr.length-1].length-Yr[Yr.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+Jr[0].length},this.yytext+=Jr[0],this.match+=Jr[0],this.matches=Jr,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(Jr[0].length),this.matched+=Jr[0],ha=this.performAction.call(this,this.yy,this,ca,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),ha)return ha;if(this._backtrack){for(var pr in Fa)this[pr]=Fa[pr];return!1}return!1},"test_match"),next:(0,A.K2)(function(){if(this.done)return this.EOF;var Jr,ca,ha,Yr;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var Fa=this._currentRules(),pr=0;pr<Fa.length;pr++)if((ha=this._input.match(this.rules[Fa[pr]]))&&(!ca||ha[0].length>ca[0].length)){if(ca=ha,Yr=pr,this.options.backtrack_lexer){if(!1!==(Jr=this.test_match(ha,Fa[pr])))return Jr;if(this._backtrack){ca=!1;continue}return!1}if(!this.options.flex)break}return ca?!1!==(Jr=this.test_match(ca,Fa[Yr]))&&Jr:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},"next"),lex:(0,A.K2)(function(){return this.next()||this.lex()},"lex"),begin:(0,A.K2)(function(ca){this.conditionStack.push(ca)},"begin"),popState:(0,A.K2)(function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},"popState"),_currentRules:(0,A.K2)(function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},"_currentRules"),topState:(0,A.K2)(function(ca){return(ca=this.conditionStack.length-1-Math.abs(ca||0))>=0?this.conditionStack[ca]:"INITIAL"},"topState"),pushState:(0,A.K2)(function(ca){this.begin(ca)},"pushState"),stateStackSize:(0,A.K2)(function(){return this.conditionStack.length},"stateStackSize"),options:{"case-insensitive":!0},performAction:(0,A.K2)(function(ca,ha,Yr,Fa){switch(Yr){case 0:case 56:case 72:return 5;case 1:case 2:case 3:case 4:case 5:break;case 6:return 19;case 7:return this.begin("CONFIG"),73;case 8:return 74;case 9:return this.popState(),this.popState(),75;case 10:case 57:return ha.yytext=ha.yytext.trim(),71;case 11:case 17:return ha.yytext=ha.yytext.trim(),this.begin("ALIAS"),71;case 12:return this.begin("LINE"),14;case 13:return this.begin("ID"),50;case 14:return this.begin("ID"),52;case 15:return 13;case 16:return this.begin("ID"),53;case 18:return this.popState(),this.popState(),this.begin("LINE"),51;case 19:return this.popState(),this.popState(),5;case 20:return this.begin("LINE"),36;case 21:return this.begin("LINE"),37;case 22:return this.begin("LINE"),38;case 23:return this.begin("LINE"),39;case 24:return this.begin("LINE"),49;case 25:return this.begin("LINE"),41;case 26:return this.begin("LINE"),43;case 27:return this.begin("LINE"),48;case 28:return this.begin("LINE"),44;case 29:return this.begin("LINE"),47;case 30:return this.begin("LINE"),46;case 31:return this.popState(),15;case 32:return 16;case 33:return 66;case 34:return 67;case 35:return 60;case 36:return 61;case 37:return 62;case 38:return 63;case 39:return 58;case 40:return 55;case 41:return this.begin("ID"),21;case 42:return this.begin("ID"),23;case 43:return 29;case 44:return 30;case 45:return this.begin("acc_title"),31;case 46:return this.popState(),"acc_title_value";case 47:return this.begin("acc_descr"),33;case 48:return this.popState(),"acc_descr_value";case 49:this.begin("acc_descr_multiline");break;case 50:this.popState();break;case 51:return"acc_descr_multiline_value";case 52:return 6;case 53:return 18;case 54:return 20;case 55:return 65;case 58:return 78;case 59:return 79;case 60:return 80;case 61:return 81;case 62:return 76;case 63:return 77;case 64:return 82;case 65:return 83;case 66:return 84;case 67:return 85;case 68:case 69:return 86;case 70:return 69;case 71:return 70;case 73:return"INVALID"}},"anonymous"),rules:[/^(?:[\n]+)/i,/^(?:\s+)/i,/^(?:((?!\n)\s)+)/i,/^(?:#[^\n]*)/i,/^(?:%(?!\{)[^\n]*)/i,/^(?:[^\}]%%[^\n]*)/i,/^(?:[0-9]+(?=[ \n]+))/i,/^(?:@\{)/i,/^(?:[^\}]+)/i,/^(?:\})/i,/^(?:[^\<->\->:\n,;@\s]+(?=@\{))/i,/^(?:[^\<->\->:\n,;@]+?([\-]*[^\<->\->:\n,;@]+?)*?(?=((?!\n)\s)+as(?!\n)\s|[#\n;]|$))/i,/^(?:box\b)/i,/^(?:participant\b)/i,/^(?:actor\b)/i,/^(?:create\b)/i,/^(?:destroy\b)/i,/^(?:[^<\->\->:\n,;]+?([\-]*[^<\->\->:\n,;]+?)*?(?=((?!\n)\s)+as(?!\n)\s|[#\n;]|$))/i,/^(?:as\b)/i,/^(?:(?:))/i,/^(?:loop\b)/i,/^(?:rect\b)/i,/^(?:opt\b)/i,/^(?:alt\b)/i,/^(?:else\b)/i,/^(?:par\b)/i,/^(?:par_over\b)/i,/^(?:and\b)/i,/^(?:critical\b)/i,/^(?:option\b)/i,/^(?:break\b)/i,/^(?:(?:[:]?(?:no)?wrap)?[^#\n;]*)/i,/^(?:end\b)/i,/^(?:left of\b)/i,/^(?:right of\b)/i,/^(?:links\b)/i,/^(?:link\b)/i,/^(?:properties\b)/i,/^(?:details\b)/i,/^(?:over\b)/i,/^(?:note\b)/i,/^(?:activate\b)/i,/^(?:deactivate\b)/i,/^(?:title\s[^#\n;]+)/i,/^(?:title:\s[^#\n;]+)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:sequenceDiagram\b)/i,/^(?:autonumber\b)/i,/^(?:off\b)/i,/^(?:,)/i,/^(?:;)/i,/^(?:[^+<\->\->:\n,;]+((?!(-x|--x|-\)|--\)))[\-]*[^\+<\->\->:\n,;]+)*)/i,/^(?:->>)/i,/^(?:<<->>)/i,/^(?:-->>)/i,/^(?:<<-->>)/i,/^(?:->)/i,/^(?:-->)/i,/^(?:-[x])/i,/^(?:--[x])/i,/^(?:-[\)])/i,/^(?:--[\)])/i,/^(?::(?:(?:no)?wrap)?[^#\n;]*)/i,/^(?::)/i,/^(?:\+)/i,/^(?:-)/i,/^(?:$)/i,/^(?:.)/i],conditions:{acc_descr_multiline:{rules:[50,51],inclusive:!1},acc_descr:{rules:[48],inclusive:!1},acc_title:{rules:[46],inclusive:!1},ID:{rules:[2,3,7,10,11,17],inclusive:!1},ALIAS:{rules:[2,3,18,19],inclusive:!1},LINE:{rules:[2,3,31],inclusive:!1},CONFIG:{rules:[8,9],inclusive:!1},CONFIG_DATA:{rules:[],inclusive:!1},INITIAL:{rules:[0,1,3,4,5,6,12,13,14,15,16,20,21,22,23,24,25,26,27,28,29,30,32,33,34,35,36,37,38,39,40,41,42,43,44,45,47,49,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73],inclusive:!0}}}}(),(0,A.K2)(Ma,"Parser"),Ma.prototype=or,or.Parser=Ma,new Ma}();bt.parser=bt;var Xt=bt,j={SOLID:0,DOTTED:1,NOTE:2,SOLID_CROSS:3,DOTTED_CROSS:4,SOLID_OPEN:5,DOTTED_OPEN:6,LOOP_START:10,LOOP_END:11,ALT_START:12,ALT_ELSE:13,ALT_END:14,OPT_START:15,OPT_END:16,ACTIVE_START:17,ACTIVE_END:18,PAR_START:19,PAR_AND:20,PAR_END:21,RECT_START:22,RECT_END:23,SOLID_POINT:24,DOTTED_POINT:25,AUTONUMBER:26,CRITICAL_START:27,CRITICAL_OPTION:28,CRITICAL_END:29,BREAK_START:30,BREAK_END:31,PAR_OVER_START:32,BIDIRECTIONAL_SOLID:33,BIDIRECTIONAL_DOTTED:34},fr={FILLED:0,OPEN:1},Fe={LEFTOF:0,RIGHTOF:1,OVER:2},zr=(class{constructor(){this.state=new Rt.m(()=>({prevActor:void 0,actors:new Map,createdActors:new Map,destroyedActors:new Map,boxes:[],messages:[],notes:[],sequenceNumbersEnabled:!1,wrapEnabled:void 0,currentBox:void 0,lastCreated:void 0,lastDestroyed:void 0})),this.setAccTitle=q.SV,this.setAccDescription=q.EI,this.setDiagramTitle=q.ke,this.getAccTitle=q.iN,this.getAccDescription=q.m7,this.getDiagramTitle=q.ab,this.apply=this.apply.bind(this),this.parseBoxData=this.parseBoxData.bind(this),this.parseMessage=this.parseMessage.bind(this),this.clear(),this.setWrap((0,q.D7)().wrap),this.LINETYPE=j,this.ARROWTYPE=fr,this.PLACEMENT=Fe}addBox(g){this.state.records.boxes.push({name:g.text,wrap:g.wrap??this.autoWrap(),fill:g.color,actorKeys:[]}),this.state.records.currentBox=this.state.records.boxes.slice(-1)[0]}addActor(g,y,E,P,b){let p,z=this.state.records.currentBox;if(void 0!==b){let C;C=b.includes("\n")?b+"\n":"{\n"+b+"\n}",p=(0,D.H)(C,{schema:D.r})}P=p?.type??P;const x=this.state.records.actors.get(g);if(x){if(this.state.records.currentBox&&x.box&&this.state.records.currentBox!==x.box)throw new Error(`A same participant should only be defined in one Box: ${x.name} can't be in '${x.box.name}' and in '${this.state.records.currentBox.name}' at the same time.`);if(z=x.box?x.box:this.state.records.currentBox,x.box=z,x&&y===x.name&&null==E)return}if(null==E?.text&&(E={text:y,type:P}),(null==P||null==E.text)&&(E={text:y,type:P}),this.state.records.actors.set(g,{box:z,name:y,description:E.text,wrap:E.wrap??this.autoWrap(),prevActor:this.state.records.prevActor,links:{},properties:{},actorCnt:null,rectData:null,type:P??"participant"}),this.state.records.prevActor){const C=this.state.records.actors.get(this.state.records.prevActor);C&&(C.nextActor=g)}this.state.records.currentBox&&this.state.records.currentBox.actorKeys.push(g),this.state.records.prevActor=g}activationCount(g){let y,E=0;if(!g)return 0;for(y=0;y<this.state.records.messages.length;y++)this.state.records.messages[y].type===this.LINETYPE.ACTIVE_START&&this.state.records.messages[y].from===g&&E++,this.state.records.messages[y].type===this.LINETYPE.ACTIVE_END&&this.state.records.messages[y].from===g&&E--;return E}addMessage(g,y,E,P){this.state.records.messages.push({id:this.state.records.messages.length.toString(),from:g,to:y,message:E.text,wrap:E.wrap??this.autoWrap(),answer:P})}addSignal(g,y,E,P,b=!1){if(P===this.LINETYPE.ACTIVE_END&&this.activationCount(g??"")<1){const p=new Error("Trying to inactivate an inactive participant ("+g+")");throw p.hash={text:"->>-",token:"->>-",line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["'ACTIVE_PARTICIPANT'"]},p}return this.state.records.messages.push({id:this.state.records.messages.length.toString(),from:g,to:y,message:E?.text??"",wrap:E?.wrap??this.autoWrap(),type:P,activate:b}),!0}hasAtLeastOneBox(){return this.state.records.boxes.length>0}hasAtLeastOneBoxWithTitle(){return this.state.records.boxes.some(g=>g.name)}getMessages(){return this.state.records.messages}getBoxes(){return this.state.records.boxes}getActors(){return this.state.records.actors}getCreatedActors(){return this.state.records.createdActors}getDestroyedActors(){return this.state.records.destroyedActors}getActor(g){return this.state.records.actors.get(g)}getActorKeys(){return[...this.state.records.actors.keys()]}enableSequenceNumbers(){this.state.records.sequenceNumbersEnabled=!0}disableSequenceNumbers(){this.state.records.sequenceNumbersEnabled=!1}showSequenceNumbers(){return this.state.records.sequenceNumbersEnabled}setWrap(g){this.state.records.wrapEnabled=g}extractWrap(g){if(void 0===g)return{};g=g.trim();const y=null!==/^:?wrap:/.exec(g)||null===/^:?nowrap:/.exec(g)&&void 0;return{cleanedText:(void 0===y?g:g.replace(/^:?(?:no)?wrap:/,"")).trim(),wrap:y}}autoWrap(){return void 0!==this.state.records.wrapEnabled?this.state.records.wrapEnabled:(0,q.D7)().sequence?.wrap??!1}clear(){this.state.reset(),(0,q.IU)()}parseMessage(g){const y=g.trim(),{wrap:E,cleanedText:P}=this.extractWrap(y),b={text:P,wrap:E};return A.Rm.debug(`parseMessage: ${JSON.stringify(b)}`),b}parseBoxData(g){const y=/^((?:rgba?|hsla?)\s*\(.*\)|\w*)(.*)$/.exec(g);let E=y?.[1]?y[1].trim():"transparent",P=y?.[2]?y[2].trim():void 0;if(window?.CSS)window.CSS.supports("color",E)||(E="transparent",P=g.trim());else{const p=(new Option).style;p.color=E,p.color!==E&&(E="transparent",P=g.trim())}const{wrap:b,cleanedText:z}=this.extractWrap(P);return{text:z?(0,q.jZ)(z,(0,q.D7)()):void 0,color:E,wrap:b}}addNote(g,y,E){const P={actor:g,placement:y,message:E.text,wrap:E.wrap??this.autoWrap()},b=[].concat(g,g);this.state.records.notes.push(P),this.state.records.messages.push({id:this.state.records.messages.length.toString(),from:b[0],to:b[1],message:E.text,wrap:E.wrap??this.autoWrap(),type:this.LINETYPE.NOTE,placement:y})}addLinks(g,y){const E=this.getActor(g);try{let P=(0,q.jZ)(y.text,(0,q.D7)());P=P.replace(/&equals;/g,"="),P=P.replace(/&amp;/g,"&");const b=JSON.parse(P);this.insertLinks(E,b)}catch(P){A.Rm.error("error while parsing actor link text",P)}}addALink(g,y){const E=this.getActor(g);try{const P={};let b=(0,q.jZ)(y.text,(0,q.D7)());const z=b.indexOf("@");b=b.replace(/&equals;/g,"="),b=b.replace(/&amp;/g,"&");const p=b.slice(0,z-1).trim(),x=b.slice(z+1).trim();P[p]=x,this.insertLinks(E,P)}catch(P){A.Rm.error("error while parsing actor link text",P)}}insertLinks(g,y){if(null==g.links)g.links=y;else for(const E in y)g.links[E]=y[E]}addProperties(g,y){const E=this.getActor(g);try{const P=(0,q.jZ)(y.text,(0,q.D7)()),b=JSON.parse(P);this.insertProperties(E,b)}catch(P){A.Rm.error("error while parsing actor properties text",P)}}insertProperties(g,y){if(null==g.properties)g.properties=y;else for(const E in y)g.properties[E]=y[E]}boxEnd(){this.state.records.currentBox=void 0}addDetails(g,y){const E=this.getActor(g),P=document.getElementById(y.text);try{const z=JSON.parse(P.innerHTML);z.properties&&this.insertProperties(E,z.properties),z.links&&this.insertLinks(E,z.links)}catch(b){A.Rm.error("error while parsing actor details text",b)}}getActorProperty(g,y){if(void 0!==g?.properties)return g.properties[y]}apply(g){if(Array.isArray(g))g.forEach(y=>{this.apply(y)});else switch(g.type){case"sequenceIndex":this.state.records.messages.push({id:this.state.records.messages.length.toString(),from:void 0,to:void 0,message:{start:g.sequenceIndex,step:g.sequenceIndexStep,visible:g.sequenceVisible},wrap:!1,type:g.signalType});break;case"addParticipant":this.addActor(g.actor,g.actor,g.description,g.draw,g.config);break;case"createParticipant":if(this.state.records.actors.has(g.actor))throw new Error("It is not possible to have actors with the same id, even if one is destroyed before the next is created. Use 'AS' aliases to simulate the behavior");this.state.records.lastCreated=g.actor,this.addActor(g.actor,g.actor,g.description,g.draw,g.config),this.state.records.createdActors.set(g.actor,this.state.records.messages.length);break;case"destroyParticipant":this.state.records.lastDestroyed=g.actor,this.state.records.destroyedActors.set(g.actor,this.state.records.messages.length);break;case"activeStart":case"activeEnd":this.addSignal(g.actor,void 0,void 0,g.signalType);break;case"addNote":this.addNote(g.actor,g.placement,g.text);break;case"addLinks":this.addLinks(g.actor,g.text);break;case"addALink":this.addALink(g.actor,g.text);break;case"addProperties":this.addProperties(g.actor,g.text);break;case"addDetails":this.addDetails(g.actor,g.text);break;case"addMessage":if(this.state.records.lastCreated){if(g.to!==this.state.records.lastCreated)throw new Error("The created participant "+this.state.records.lastCreated.name+" does not have an associated creating message after its declaration. Please check the sequence diagram.");this.state.records.lastCreated=void 0}else if(this.state.records.lastDestroyed){if(g.to!==this.state.records.lastDestroyed&&g.from!==this.state.records.lastDestroyed)throw new Error("The destroyed participant "+this.state.records.lastDestroyed.name+" does not have an associated destroying message after its declaration. Please check the sequence diagram.");this.state.records.lastDestroyed=void 0}this.addSignal(g.from,g.to,g.msg,g.signalType,g.activate);break;case"boxStart":this.addBox(g.boxData);break;case"boxEnd":this.boxEnd();break;case"loopStart":this.addSignal(void 0,void 0,g.loopText,g.signalType);break;case"loopEnd":case"rectEnd":case"optEnd":case"altEnd":case"parEnd":case"criticalEnd":case"breakEnd":this.addSignal(void 0,void 0,void 0,g.signalType);break;case"rectStart":this.addSignal(void 0,void 0,g.color,g.signalType);break;case"optStart":this.addSignal(void 0,void 0,g.optText,g.signalType);break;case"altStart":case"else":this.addSignal(void 0,void 0,g.altText,g.signalType);break;case"setAccTitle":(0,q.SV)(g.text);break;case"parStart":case"and":this.addSignal(void 0,void 0,g.parText,g.signalType);break;case"criticalStart":this.addSignal(void 0,void 0,g.criticalText,g.signalType);break;case"option":this.addSignal(void 0,void 0,g.optionText,g.signalType);break;case"breakStart":this.addSignal(void 0,void 0,g.breakText,g.signalType)}}getConfig(){return(0,q.D7)().sequence}static#t=Ye=()=>((0,ee.A)(this,"SequenceDB"),(0,A.K2)(this,"SequenceDB"),this)},Ye()),mr=(0,A.K2)(g=>`.actor {\n    stroke: ${g.actorBorder};\n    fill: ${g.actorBkg};\n  }\n\n  text.actor > tspan {\n    fill: ${g.actorTextColor};\n    stroke: none;\n  }\n\n  .actor-line {\n    stroke: ${g.actorLineColor};\n  }\n  \n  .innerArc {\n    stroke-width: 1.5;\n    stroke-dasharray: none;\n  }\n\n  .messageLine0 {\n    stroke-width: 1.5;\n    stroke-dasharray: none;\n    stroke: ${g.signalColor};\n  }\n\n  .messageLine1 {\n    stroke-width: 1.5;\n    stroke-dasharray: 2, 2;\n    stroke: ${g.signalColor};\n  }\n\n  #arrowhead path {\n    fill: ${g.signalColor};\n    stroke: ${g.signalColor};\n  }\n\n  .sequenceNumber {\n    fill: ${g.sequenceNumberColor};\n  }\n\n  #sequencenumber {\n    fill: ${g.signalColor};\n  }\n\n  #crosshead path {\n    fill: ${g.signalColor};\n    stroke: ${g.signalColor};\n  }\n\n  .messageText {\n    fill: ${g.signalTextColor};\n    stroke: none;\n  }\n\n  .labelBox {\n    stroke: ${g.labelBoxBorderColor};\n    fill: ${g.labelBoxBkgColor};\n  }\n\n  .labelText, .labelText > tspan {\n    fill: ${g.labelTextColor};\n    stroke: none;\n  }\n\n  .loopText, .loopText > tspan {\n    fill: ${g.loopTextColor};\n    stroke: none;\n  }\n\n  .loopLine {\n    stroke-width: 2px;\n    stroke-dasharray: 2, 2;\n    stroke: ${g.labelBoxBorderColor};\n    fill: ${g.labelBoxBorderColor};\n  }\n\n  .note {\n    //stroke: #decc93;\n    stroke: ${g.noteBorderColor};\n    fill: ${g.noteBkgColor};\n  }\n\n  .noteText, .noteText > tspan {\n    fill: ${g.noteTextColor};\n    stroke: none;\n  }\n\n  .activation0 {\n    fill: ${g.activationBkgColor};\n    stroke: ${g.activationBorderColor};\n  }\n\n  .activation1 {\n    fill: ${g.activationBkgColor};\n    stroke: ${g.activationBorderColor};\n  }\n\n  .activation2 {\n    fill: ${g.activationBkgColor};\n    stroke: ${g.activationBorderColor};\n  }\n\n  .actorPopupMenu {\n    position: absolute;\n  }\n\n  .actorPopupMenuPanel {\n    position: absolute;\n    fill: ${g.actorBkg};\n    box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);\n    filter: drop-shadow(3px 5px 2px rgb(0 0 0 / 0.4));\n}\n  .actor-man line {\n    stroke: ${g.actorBorder};\n    fill: ${g.actorBkg};\n  }\n  .actor-man circle, line {\n    stroke: ${g.actorBorder};\n    fill: ${g.actorBkg};\n    stroke-width: 2px;\n  }\n\n`,"getStyles"),Lr="actor-top",Ar="actor-bottom",ge="actor-box",Br="actor-man",Ge=(0,A.K2)(function(g,y){return(0,L.tk)(g,y)},"drawRect"),W=(0,A.K2)(function(g,y,E,P,b){if(null==y.links||0===Object.keys(y.links).length)return{height:0,width:0};const z=y.links,p=y.actorCnt,x=y.rectData;var C="none";b&&(C="block !important");const w=g.append("g");w.attr("id","actor"+p+"_popup"),w.attr("class","actorPopupMenu"),w.attr("display",C);var $="";void 0!==x.class&&($=" "+x.class);let ct=x.width>E?x.width:E;const kt=w.append("rect");if(kt.attr("class","actorPopupMenuPanel"+$),kt.attr("x",x.x),kt.attr("y",x.height),kt.attr("fill",x.fill),kt.attr("stroke",x.stroke),kt.attr("width",ct),kt.attr("height",x.height),kt.attr("rx",x.rx),kt.attr("ry",x.ry),null!=z){var Ut=20;for(let ue in z){var Ht=w.append("a"),zt=(0,yt.J)(z[ue]);Ht.attr("xlink:href",zt),Ht.attr("target","_blank"),ut(P)(ue,Ht,x.x+10,x.height+Ut,ct,20,{class:"actor"},P),Ut+=30}}return kt.attr("height",Ut),{height:x.height+Ut,width:ct}},"drawPopup"),ft=(0,A.K2)(function(g){return"var pu = document.getElementById('"+g+"'); if (pu != null) { pu.style.display = pu.style.display == 'block' ? 'none' : 'block'; }"},"popupMenuToggle"),Bt=(0,A.K2)(function(){var g=(0,lt.A)(function*(y,E,P=null){let b=y.append("foreignObject");const z=yield(0,q.dj)(E.text,(0,q.zj)()),x=b.append("xhtml:div").attr("style","width: fit-content;").attr("xmlns","http://www.w3.org/1999/xhtml").html(z).node().getBoundingClientRect();if(b.attr("height",Math.round(x.height)).attr("width",Math.round(x.width)),"noteText"===E.class){const C=y.node().firstChild;C.setAttribute("height",x.height+2*E.textMargin);const w=C.getBBox();b.attr("x",Math.round(w.x+w.width/2-x.width/2)).attr("y",Math.round(w.y+w.height/2-x.height/2))}else if(P){let{startx:C,stopx:w,starty:$}=P;if(C>w){const ct=C;C=w,w=ct}b.attr("x",Math.round(C+Math.abs(C-w)/2-x.width/2)),b.attr("y","loopText"===E.class?Math.round($):Math.round($-x.height))}return[b]});return function(y,E){return g.apply(this,arguments)}}(),"drawKatex"),_e=(0,A.K2)(function(g,y){let E=0,P=0;const b=y.text.split(q.Y2.lineBreakRegex),[z,p]=(0,dt.I5)(y.fontSize);let x=[],C=0,w=(0,A.K2)(()=>y.y,"yfunc");if(void 0!==y.valign&&void 0!==y.textMargin&&y.textMargin>0)switch(y.valign){case"top":case"start":w=(0,A.K2)(()=>Math.round(y.y+y.textMargin),"yfunc");break;case"middle":case"center":w=(0,A.K2)(()=>Math.round(y.y+(E+P+y.textMargin)/2),"yfunc");break;case"bottom":case"end":w=(0,A.K2)(()=>Math.round(y.y+(E+P+2*y.textMargin)-y.textMargin),"yfunc")}if(void 0!==y.anchor&&void 0!==y.textMargin&&void 0!==y.width)switch(y.anchor){case"left":case"start":y.x=Math.round(y.x+y.textMargin),y.anchor="start",y.dominantBaseline="middle",y.alignmentBaseline="middle";break;case"middle":case"center":y.x=Math.round(y.x+y.width/2),y.anchor="middle",y.dominantBaseline="middle",y.alignmentBaseline="middle";break;case"right":case"end":y.x=Math.round(y.x+y.width-y.textMargin),y.anchor="end",y.dominantBaseline="middle",y.alignmentBaseline="middle"}for(let[$,ct]of b.entries()){void 0!==y.textMargin&&0===y.textMargin&&void 0!==z&&(C=$*z);const kt=g.append("text");kt.attr("x",y.x),kt.attr("y",w()),void 0!==y.anchor&&kt.attr("text-anchor",y.anchor).attr("dominant-baseline",y.dominantBaseline).attr("alignment-baseline",y.alignmentBaseline),void 0!==y.fontFamily&&kt.style("font-family",y.fontFamily),void 0!==p&&kt.style("font-size",p),void 0!==y.fontWeight&&kt.style("font-weight",y.fontWeight),void 0!==y.fill&&kt.attr("fill",y.fill),void 0!==y.class&&kt.attr("class",y.class),void 0!==y.dy?kt.attr("dy",y.dy):0!==C&&kt.attr("dy",C);const Ut=ct||dt.pe;if(y.tspan){const Ht=kt.append("tspan");Ht.attr("x",y.x),void 0!==y.fill&&Ht.attr("fill",y.fill),Ht.text(Ut)}else kt.text(Ut);void 0!==y.valign&&void 0!==y.textMargin&&y.textMargin>0&&(P+=(kt._groups||kt)[0][0].getBBox().height,E=P),x.push(kt)}return x},"drawText"),Z=(0,A.K2)(function(g,y){function E(b,z,p,x,C){return b+","+z+" "+(b+p)+","+z+" "+(b+p)+","+(z+x-C)+" "+(b+p-1.2*C)+","+(z+x)+" "+b+","+(z+x)}(0,A.K2)(E,"genPoints");const P=g.append("polygon");return P.attr("points",E(y.x,y.y,y.width,y.height,7)),P.attr("class","labelBox"),y.y=y.y+y.height/2,_e(g,y),P},"drawLabel"),ae=-1,S=(0,A.K2)((g,y,E,P)=>{g.select&&E.forEach(b=>{const z=y.get(b),p=g.select("#actor"+z.actorCnt);!P.mirrorActors&&z.stopy?p.attr("y2",z.stopy+z.height/2):P.mirrorActors&&p.attr("y2",z.stopy)})},"fixLifeLineHeights"),re=(0,A.K2)(function(g,y,E,P){const b=P?y.stopy:y.starty,z=y.x+y.width/2,p=b+y.height,x=g.append("g").lower();var C=x;P||(ae++,Object.keys(y.links||{}).length&&!E.forceMenus&&C.attr("onclick",ft(`actor${ae}_popup`)).attr("cursor","pointer"),C.append("line").attr("id","actor"+ae).attr("x1",z).attr("y1",p).attr("x2",z).attr("y2",2e3).attr("class","actor-line 200").attr("stroke-width","0.5px").attr("stroke","#999").attr("name",y.name),C=x.append("g"),y.actorCnt=ae,null!=y.links&&C.attr("id","root-"+ae));const w=(0,L.PB)();var $="actor";y.properties?.class?$=y.properties.class:w.fill="#eaeaea",$+=P?` ${Ar}`:` ${Lr}`,w.x=y.x,w.y=b,w.width=y.width,w.height=y.height,w.class=$,w.rx=3,w.ry=3,w.name=y.name;const ct=Ge(C,w);if(y.rectData=w,y.properties?.icon){const Ut=y.properties.icon.trim();"@"===Ut.charAt(0)?(0,L.CP)(C,w.x+w.width-20,w.y+10,Ut.substr(1)):(0,L.aC)(C,w.x+w.width-20,w.y+10,Ut)}Et(E,(0,q.Wi)(y.description))(y.description,C,w.x,w.y,w.width,w.height,{class:`actor ${ge}`},E);let kt=y.height;if(ct.node){const Ut=ct.node().getBBox();y.height=Ut.height,kt=Ut.height}return kt},"drawActorTypeParticipant"),Pt=(0,A.K2)(function(g,y,E,P){const b=P?y.stopy:y.starty,z=y.x+y.width/2,p=b+y.height,x=g.append("g").lower();var C=x;P||(ae++,Object.keys(y.links||{}).length&&!E.forceMenus&&C.attr("onclick",ft(`actor${ae}_popup`)).attr("cursor","pointer"),C.append("line").attr("id","actor"+ae).attr("x1",z).attr("y1",p).attr("x2",z).attr("y2",2e3).attr("class","actor-line 200").attr("stroke-width","0.5px").attr("stroke","#999").attr("name",y.name),C=x.append("g"),y.actorCnt=ae,null!=y.links&&C.attr("id","root-"+ae));const w=(0,L.PB)();var $="actor";y.properties?.class?$=y.properties.class:w.fill="#eaeaea",$+=P?` ${Ar}`:` ${Lr}`,w.x=y.x,w.y=b,w.width=y.width,w.height=y.height,w.class=$,w.name=y.name;const kt={...w,x:w.x+-6,y:w.y+6,class:"actor"},Ut=Ge(C,w);if(Ge(C,kt),y.rectData=w,y.properties?.icon){const zt=y.properties.icon.trim();"@"===zt.charAt(0)?(0,L.CP)(C,w.x+w.width-20,w.y+10,zt.substr(1)):(0,L.aC)(C,w.x+w.width-20,w.y+10,zt)}Et(E,(0,q.Wi)(y.description))(y.description,C,w.x-6,w.y+6,w.width,w.height,{class:`actor ${ge}`},E);let Ht=y.height;if(Ut.node){const zt=Ut.node().getBBox();y.height=zt.height,Ht=zt.height}return Ht},"drawActorTypeCollections"),qt=(0,A.K2)(function(g,y,E,P){const b=P?y.stopy:y.starty,z=y.x+y.width/2,p=b+y.height,x=g.append("g").lower();let C=x;P||(ae++,Object.keys(y.links||{}).length&&!E.forceMenus&&C.attr("onclick",ft(`actor${ae}_popup`)).attr("cursor","pointer"),C.append("line").attr("id","actor"+ae).attr("x1",z).attr("y1",p).attr("x2",z).attr("y2",2e3).attr("class","actor-line 200").attr("stroke-width","0.5px").attr("stroke","#999").attr("name",y.name),C=x.append("g"),y.actorCnt=ae,null!=y.links&&C.attr("id","root-"+ae));const w=(0,L.PB)();let $="actor";y.properties?.class?$=y.properties.class:w.fill="#eaeaea",$+=P?` ${Ar}`:` ${Lr}`,w.x=y.x,w.y=b,w.width=y.width,w.height=y.height,w.class=$,w.name=y.name;const ct=w.height/2,kt=ct/(2.5+w.height/50),Ut=C.append("g"),Ht=C.append("g");if(Ut.append("path").attr("d",`M ${w.x},${w.y+ct}\n    a ${kt},${ct} 0 0 0 0,${w.height}\n    h ${w.width-2*kt}\n    a ${kt},${ct} 0 0 0 0,-${w.height}\n    Z\n  `).attr("class",$),Ht.append("path").attr("d",`M ${w.x},${w.y+ct}\n      a ${kt},${ct} 0 0 0 0,${w.height}`).attr("stroke","#666").attr("stroke-width","1px").attr("class",$),Ut.attr("transform",`translate(${kt}, ${-w.height/2})`),Ht.attr("transform",`translate(${w.width-kt}, ${-w.height/2})`),y.rectData=w,y.properties?.icon){const je=y.properties.icon.trim(),ze=w.x+w.width-20,Cr=w.y+10;"@"===je.charAt(0)?(0,L.CP)(C,ze,Cr,je.substr(1)):(0,L.aC)(C,ze,Cr,je)}Et(E,(0,q.Wi)(y.description))(y.description,C,w.x,w.y,w.width,w.height,{class:`actor ${ge}`},E);let zt=y.height;const ue=Ut.select("path:last-child");if(ue.node()){const je=ue.node().getBBox();y.height=je.height,zt=je.height}return zt},"drawActorTypeQueue"),V=(0,A.K2)(function(g,y,E,P){const b=P?y.stopy:y.starty,z=y.x+y.width/2,p=b+75,x=g.append("g").lower();P||(ae++,x.append("line").attr("id","actor"+ae).attr("x1",z).attr("y1",p).attr("x2",z).attr("y2",2e3).attr("class","actor-line 200").attr("stroke-width","0.5px").attr("stroke","#999").attr("name",y.name),y.actorCnt=ae);const C=g.append("g");let w=Br;w+=P?` ${Ar}`:` ${Lr}`,C.attr("class",w),C.attr("name",y.name);const $=(0,L.PB)();$.x=y.x,$.y=b,$.fill="#eaeaea",$.width=y.width,$.height=y.height,$.class="actor";const ct=y.x+y.width/2,kt=b+30;C.append("defs").append("marker").attr("id","filled-head-control").attr("refX",11).attr("refY",5.8).attr("markerWidth",20).attr("markerHeight",28).attr("orient","172.5").append("path").attr("d","M 14.4 5.6 L 7.2 10.4 L 8.8 5.6 L 7.2 0.8 Z"),C.append("circle").attr("cx",ct).attr("cy",kt).attr("r",18).attr("fill","#eaeaf7").attr("stroke","#666").attr("stroke-width",1.2),C.append("line").attr("marker-end","url(#filled-head-control)").attr("transform",`translate(${ct}, ${kt-18})`);const Ht=C.node().getBBox();return y.height=Ht.height+2*(E?.sequence?.labelBoxHeight??0),Et(E,(0,q.Wi)(y.description))(y.description,C,$.x,$.y+18+(P?5:10),$.width,$.height,{class:`actor ${Br}`},E),y.height},"drawActorTypeControl"),pt=(0,A.K2)(function(g,y,E,P){const b=P?y.stopy:y.starty,z=y.x+y.width/2,p=b+75,x=g.append("g").lower(),C=g.append("g");let w=Br;w+=P?` ${Ar}`:` ${Lr}`,C.attr("class",w),C.attr("name",y.name);const $=(0,L.PB)();$.x=y.x,$.y=b,$.fill="#eaeaea",$.width=y.width,$.height=y.height,$.class="actor";const ct=y.x+y.width/2,kt=b+(P?10:25);C.append("circle").attr("cx",ct).attr("cy",kt).attr("r",18).attr("width",y.width).attr("height",y.height),C.append("line").attr("x1",ct-18).attr("x2",ct+18).attr("y1",kt+18).attr("y2",kt+18).attr("stroke","#333").attr("stroke-width",2);const Ht=C.node().getBBox();return y.height=Ht.height+(E?.sequence?.labelBoxHeight??0),P||(ae++,x.append("line").attr("id","actor"+ae).attr("x1",z).attr("y1",p).attr("x2",z).attr("y2",2e3).attr("class","actor-line 200").attr("stroke-width","0.5px").attr("stroke","#999").attr("name",y.name),y.actorCnt=ae),Et(E,(0,q.Wi)(y.description))(y.description,C,$.x,$.y+(P?(kt-b+18-5)/2:(kt+18-b)/2),$.width,$.height,{class:`actor ${Br}`},E),C.attr("transform","translate(0, 9)"),y.height},"drawActorTypeEntity"),H=(0,A.K2)(function(g,y,E,P){const b=P?y.stopy:y.starty,z=y.x+y.width/2,p=b+y.height+2*E.boxTextMargin,x=g.append("g").lower();let C=x;P||(ae++,Object.keys(y.links||{}).length&&!E.forceMenus&&C.attr("onclick",ft(`actor${ae}_popup`)).attr("cursor","pointer"),C.append("line").attr("id","actor"+ae).attr("x1",z).attr("y1",p).attr("x2",z).attr("y2",2e3).attr("class","actor-line 200").attr("stroke-width","0.5px").attr("stroke","#999").attr("name",y.name),C=x.append("g"),y.actorCnt=ae,null!=y.links&&C.attr("id","root-"+ae));const w=(0,L.PB)();let $="actor";y.properties?.class?$=y.properties.class:w.fill="#eaeaea",$+=P?` ${Ar}`:` ${Lr}`,w.x=y.x,w.y=b,w.width=y.width,w.height=y.height,w.class=$,w.name=y.name,w.x=y.x,w.y=b;const ct=w.width/4,kt=w.width/4,Ut=ct/2,Ht=Ut/(2.5+ct/50),zt=C.append("g"),ue=`\n  M ${w.x},${w.y+Ht}\n  a ${Ut},${Ht} 0 0 0 ${ct},0\n  a ${Ut},${Ht} 0 0 0 -${ct},0\n  l 0,${kt-2*Ht}\n  a ${Ut},${Ht} 0 0 0 ${ct},0\n  l 0,-${kt-2*Ht}\n`;zt.append("path").attr("d",ue).attr("fill","#eaeaea").attr("stroke","#000").attr("stroke-width",1).attr("class",$),zt.attr("transform",P?`translate(${1.5*ct}, ${w.height/4-2*Ht})`:`translate(${1.5*ct}, ${(w.height+Ht)/4})`),y.rectData=w,Et(E,(0,q.Wi)(y.description))(y.description,C,w.x,w.y+(P?(w.height+kt)/4:(w.height+Ht)/2),w.width,w.height,{class:`actor ${ge}`},E);const je=zt.select("path:last-child");if(je.node()){const ze=je.node().getBBox();y.height=ze.height+(E.sequence.labelBoxHeight??0)}return y.height},"drawActorTypeDatabase"),Nt=(0,A.K2)(function(g,y,E,P){const b=P?y.stopy:y.starty,z=y.x+y.width/2,p=b+80,C=g.append("g").lower();P||(ae++,C.append("line").attr("id","actor"+ae).attr("x1",z).attr("y1",p).attr("x2",z).attr("y2",2e3).attr("class","actor-line 200").attr("stroke-width","0.5px").attr("stroke","#999").attr("name",y.name),y.actorCnt=ae);const w=g.append("g");let $=Br;$+=P?` ${Ar}`:` ${Lr}`,w.attr("class",$),w.attr("name",y.name);const ct=(0,L.PB)();ct.x=y.x,ct.y=b,ct.fill="#eaeaea",ct.width=y.width,ct.height=y.height,ct.class="actor",w.append("line").attr("id","actor-man-torso"+ae).attr("x1",y.x+y.width/2-75).attr("y1",b+10).attr("x2",y.x+y.width/2-15).attr("y2",b+10),w.append("line").attr("id","actor-man-arms"+ae).attr("x1",y.x+y.width/2-75).attr("y1",b+0).attr("x2",y.x+y.width/2-75).attr("y2",b+20),w.append("circle").attr("cx",y.x+y.width/2).attr("cy",b+10).attr("r",30);const kt=w.node().getBBox();return y.height=kt.height+(E.sequence.labelBoxHeight??0),Et(E,(0,q.Wi)(y.description))(y.description,w,ct.x,ct.y+(P?11:18),ct.width,ct.height,{class:`actor ${Br}`},E),w.attr("transform","translate(0,22)"),y.height},"drawActorTypeBoundary"),wt=(0,A.K2)(function(g,y,E,P){const b=P?y.stopy:y.starty,z=y.x+y.width/2,p=b+80,x=g.append("g").lower();P||(ae++,x.append("line").attr("id","actor"+ae).attr("x1",z).attr("y1",p).attr("x2",z).attr("y2",2e3).attr("class","actor-line 200").attr("stroke-width","0.5px").attr("stroke","#999").attr("name",y.name),y.actorCnt=ae);const C=g.append("g");let w=Br;w+=P?` ${Ar}`:` ${Lr}`,C.attr("class",w),C.attr("name",y.name);const $=(0,L.PB)();$.x=y.x,$.y=b,$.fill="#eaeaea",$.width=y.width,$.height=y.height,$.class="actor",$.rx=3,$.ry=3,C.append("line").attr("id","actor-man-torso"+ae).attr("x1",z).attr("y1",b+25).attr("x2",z).attr("y2",b+45),C.append("line").attr("id","actor-man-arms"+ae).attr("x1",z-18).attr("y1",b+33).attr("x2",z+18).attr("y2",b+33),C.append("line").attr("x1",z-18).attr("y1",b+60).attr("x2",z).attr("y2",b+45),C.append("line").attr("x1",z).attr("y1",b+45).attr("x2",z+18-2).attr("y2",b+60);const ct=C.append("circle");ct.attr("cx",y.x+y.width/2),ct.attr("cy",b+10),ct.attr("r",15),ct.attr("width",y.width),ct.attr("height",y.height);const kt=C.node().getBBox();return y.height=kt.height,Et(E,(0,q.Wi)(y.description))(y.description,C,$.x,$.y+35,$.width,$.height,{class:`actor ${Br}`},E),y.height},"drawActorTypeActor"),Wt=(0,A.K2)(function(){var g=(0,lt.A)(function*(y,E,P,b){switch(E.type){case"actor":return yield wt(y,E,P,b);case"participant":return yield re(y,E,P,b);case"boundary":return yield Nt(y,E,P,b);case"control":return yield V(y,E,P,b);case"entity":return yield pt(y,E,P,b);case"database":return yield H(y,E,P,b);case"collections":return yield Pt(y,E,P,b);case"queue":return yield qt(y,E,P,b)}});return function(y,E,P,b){return g.apply(this,arguments)}}(),"drawActor"),xe=(0,A.K2)(function(g,y,E){const b=g.append("g");qe(b,y),y.name&&Et(E)(y.name,b,y.x,y.y+E.boxTextMargin+(y.textMaxHeight||0)/2,y.width,0,{class:"text"},E),b.lower()},"drawBox"),le=(0,A.K2)(function(g){return g.append("g")},"anchorElement"),Re=(0,A.K2)(function(g,y,E,P,b){const z=(0,L.PB)(),p=y.anchored;z.x=y.startx,z.y=y.starty,z.class="activation"+b%3,z.width=y.stopx-y.startx,z.height=E-y.starty,Ge(p,z)},"drawActivation"),oe=(0,A.K2)(function(){var g=(0,lt.A)(function*(y,E,P,b){const{boxMargin:z,boxTextMargin:p,labelBoxHeight:x,labelBoxWidth:C,messageFontFamily:w,messageFontSize:$,messageFontWeight:ct}=b,kt=y.append("g"),Ut=(0,A.K2)(function(ue,je,ze,Cr){return kt.append("line").attr("x1",ue).attr("y1",je).attr("x2",ze).attr("y2",Cr).attr("class","loopLine")},"drawLoopLine");Ut(E.startx,E.starty,E.stopx,E.starty),Ut(E.stopx,E.starty,E.stopx,E.stopy),Ut(E.startx,E.stopy,E.stopx,E.stopy),Ut(E.startx,E.starty,E.startx,E.stopy),void 0!==E.sections&&E.sections.forEach(function(ue){Ut(E.startx,ue.y,E.stopx,ue.y).style("stroke-dasharray","3, 3")});let Ht=(0,L.HT)();Ht.text=P,Ht.x=E.startx,Ht.y=E.starty,Ht.fontFamily=w,Ht.fontSize=$,Ht.fontWeight=ct,Ht.anchor="middle",Ht.valign="middle",Ht.tspan=!1,Ht.width=C||50,Ht.height=x||20,Ht.textMargin=p,Ht.class="labelText",Z(kt,Ht),Ht=it(),Ht.text=E.title,Ht.x=E.startx+C/2+(E.stopx-E.startx)/2,Ht.y=E.starty+z+p,Ht.anchor="middle",Ht.valign="middle",Ht.textMargin=p,Ht.class="loopText",Ht.fontFamily=w,Ht.fontSize=$,Ht.fontWeight=ct,Ht.wrap=!0;let zt=(0,q.Wi)(Ht.text)?yield Bt(kt,Ht,E):_e(kt,Ht);if(void 0!==E.sectionTitles)for(const[ue,je]of Object.entries(E.sectionTitles))if(je.message){Ht.text=je.message,Ht.x=E.startx+(E.stopx-E.startx)/2,Ht.y=E.sections[ue].y+z+p,Ht.class="loopText",Ht.anchor="middle",Ht.valign="middle",Ht.tspan=!1,Ht.fontFamily=w,Ht.fontSize=$,Ht.fontWeight=ct,Ht.wrap=E.wrap,(0,q.Wi)(Ht.text)?(E.starty=E.sections[ue].y,yield Bt(kt,Ht,E)):_e(kt,Ht);let ze=Math.round(zt.map(Cr=>(Cr._groups||Cr)[0][0].getBBox().height).reduce((Cr,cr)=>Cr+cr));E.sections[ue].height+=ze-(z+p)}return E.height=Math.round(E.stopy-E.starty),kt});return function(y,E,P,b){return g.apply(this,arguments)}}(),"drawLoop"),qe=(0,A.K2)(function(g,y){(0,L.lC)(g,y)},"drawBackgroundRect"),We=(0,A.K2)(function(g){g.append("defs").append("symbol").attr("id","database").attr("fill-rule","evenodd").attr("clip-rule","evenodd").append("path").attr("transform","scale(.5)").attr("d","M12.258.001l.256.004.255.005.253.008.251.01.249.012.247.015.246.016.242.019.241.02.239.023.236.024.233.027.231.028.229.031.225.032.223.034.22.036.217.038.214.04.211.041.208.043.205.045.201.046.198.048.194.05.191.051.187.053.183.054.18.056.175.057.172.059.168.06.163.061.16.063.155.064.15.066.074.033.073.033.071.034.07.034.069.035.068.035.067.035.066.035.064.036.064.036.062.036.06.036.06.037.058.037.058.037.055.038.055.038.053.038.052.038.051.039.05.039.048.039.047.039.045.04.044.04.043.04.041.04.04.041.039.041.037.041.036.041.034.041.033.042.032.042.03.042.029.042.027.042.026.043.024.043.023.043.021.043.02.043.018.044.017.043.015.044.013.044.012.044.011.045.009.044.007.045.006.045.004.045.002.045.001.045v17l-.001.045-.002.045-.004.045-.006.045-.007.045-.009.044-.011.045-.012.044-.013.044-.015.044-.017.043-.018.044-.02.043-.021.043-.023.043-.024.043-.026.043-.027.042-.029.042-.03.042-.032.042-.033.042-.034.041-.036.041-.037.041-.039.041-.04.041-.041.04-.043.04-.044.04-.045.04-.047.039-.048.039-.05.039-.051.039-.052.038-.053.038-.055.038-.055.038-.058.037-.058.037-.06.037-.06.036-.062.036-.064.036-.064.036-.066.035-.067.035-.068.035-.069.035-.07.034-.071.034-.073.033-.074.033-.15.066-.155.064-.16.063-.163.061-.168.06-.172.059-.175.057-.18.056-.183.054-.187.053-.191.051-.194.05-.198.048-.201.046-.205.045-.208.043-.211.041-.214.04-.217.038-.22.036-.223.034-.225.032-.229.031-.231.028-.233.027-.236.024-.239.023-.241.02-.242.019-.246.016-.247.015-.249.012-.251.01-.253.008-.255.005-.256.004-.258.001-.258-.001-.256-.004-.255-.005-.253-.008-.251-.01-.249-.012-.247-.015-.245-.016-.243-.019-.241-.02-.238-.023-.236-.024-.234-.027-.231-.028-.228-.031-.226-.032-.223-.034-.22-.036-.217-.038-.214-.04-.211-.041-.208-.043-.204-.045-.201-.046-.198-.048-.195-.05-.19-.051-.187-.053-.184-.054-.179-.056-.176-.057-.172-.059-.167-.06-.164-.061-.159-.063-.155-.064-.151-.066-.074-.033-.072-.033-.072-.034-.07-.034-.069-.035-.068-.035-.067-.035-.066-.035-.064-.036-.063-.036-.062-.036-.061-.036-.06-.037-.058-.037-.057-.037-.056-.038-.055-.038-.053-.038-.052-.038-.051-.039-.049-.039-.049-.039-.046-.039-.046-.04-.044-.04-.043-.04-.041-.04-.04-.041-.039-.041-.037-.041-.036-.041-.034-.041-.033-.042-.032-.042-.03-.042-.029-.042-.027-.042-.026-.043-.024-.043-.023-.043-.021-.043-.02-.043-.018-.044-.017-.043-.015-.044-.013-.044-.012-.044-.011-.045-.009-.044-.007-.045-.006-.045-.004-.045-.002-.045-.001-.045v-17l.001-.045.002-.045.004-.045.006-.045.007-.045.009-.044.011-.045.012-.044.013-.044.015-.044.017-.043.018-.044.02-.043.021-.043.023-.043.024-.043.026-.043.027-.042.029-.042.03-.042.032-.042.033-.042.034-.041.036-.041.037-.041.039-.041.04-.041.041-.04.043-.04.044-.04.046-.04.046-.039.049-.039.049-.039.051-.039.052-.038.053-.038.055-.038.056-.038.057-.037.058-.037.06-.037.061-.036.062-.036.063-.036.064-.036.066-.035.067-.035.068-.035.069-.035.07-.034.072-.034.072-.033.074-.033.151-.066.155-.064.159-.063.164-.061.167-.06.172-.059.176-.057.179-.056.184-.054.187-.053.19-.051.195-.05.198-.048.201-.046.204-.045.208-.043.211-.041.214-.04.217-.038.22-.036.223-.034.226-.032.228-.031.231-.028.234-.027.236-.024.238-.023.241-.02.243-.019.245-.016.247-.015.249-.012.251-.01.253-.008.255-.005.256-.004.258-.001.258.001zm-9.258 20.499v.01l.001.021.003.021.004.022.005.021.006.022.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.023.018.024.019.024.021.024.022.025.023.024.024.025.052.049.056.05.061.051.066.051.07.051.075.051.079.052.084.052.088.052.092.052.097.052.102.051.105.052.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.048.144.049.147.047.152.047.155.047.16.045.163.045.167.043.171.043.176.041.178.041.183.039.187.039.19.037.194.035.197.035.202.033.204.031.209.03.212.029.216.027.219.025.222.024.226.021.23.02.233.018.236.016.24.015.243.012.246.01.249.008.253.005.256.004.259.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.021.224-.024.22-.026.216-.027.212-.028.21-.031.205-.031.202-.034.198-.034.194-.036.191-.037.187-.039.183-.04.179-.04.175-.042.172-.043.168-.044.163-.045.16-.046.155-.046.152-.047.148-.048.143-.049.139-.049.136-.05.131-.05.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.053.083-.051.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.05.023-.024.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.023.01-.022.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.127l-.077.055-.08.053-.083.054-.085.053-.087.052-.09.052-.093.051-.095.05-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.045-.118.044-.12.043-.122.042-.124.042-.126.041-.128.04-.13.04-.132.038-.134.038-.135.037-.138.037-.139.035-.142.035-.143.034-.144.033-.147.032-.148.031-.15.03-.151.03-.153.029-.154.027-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.01-.179.008-.179.008-.181.006-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.006-.179-.008-.179-.008-.178-.01-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.027-.153-.029-.151-.03-.15-.03-.148-.031-.146-.032-.145-.033-.143-.034-.141-.035-.14-.035-.137-.037-.136-.037-.134-.038-.132-.038-.13-.04-.128-.04-.126-.041-.124-.042-.122-.042-.12-.044-.117-.043-.116-.045-.113-.045-.112-.046-.109-.047-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.05-.093-.052-.09-.051-.087-.052-.085-.053-.083-.054-.08-.054-.077-.054v4.127zm0-5.654v.011l.001.021.003.021.004.021.005.022.006.022.007.022.009.022.01.022.011.023.012.023.013.023.015.024.016.023.017.024.018.024.019.024.021.024.022.024.023.025.024.024.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.052.11.051.114.051.119.052.123.05.127.051.131.05.135.049.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.044.171.042.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.022.23.02.233.018.236.016.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.012.241-.015.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.048.139-.05.136-.049.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.051.051-.049.023-.025.023-.024.021-.025.02-.024.019-.024.018-.024.017-.024.015-.023.014-.023.013-.024.012-.022.01-.023.01-.023.008-.022.006-.022.006-.022.004-.021.004-.022.001-.021.001-.021v-4.139l-.077.054-.08.054-.083.054-.085.052-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.044-.118.044-.12.044-.122.042-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.035-.143.033-.144.033-.147.033-.148.031-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.009-.179.009-.179.007-.181.007-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.007-.179-.007-.179-.009-.178-.009-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.031-.146-.033-.145-.033-.143-.033-.141-.035-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.04-.126-.041-.124-.042-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.051-.093-.051-.09-.051-.087-.053-.085-.052-.083-.054-.08-.054-.077-.054v4.139zm0-5.666v.011l.001.02.003.022.004.021.005.022.006.021.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.024.018.023.019.024.021.025.022.024.023.024.024.025.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.051.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.043.171.043.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.021.23.02.233.018.236.017.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.013.241-.014.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.049.139-.049.136-.049.131-.051.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.049.023-.025.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.022.01-.023.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.153l-.077.054-.08.054-.083.053-.085.053-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.048-.105.048-.106.048-.109.046-.111.046-.114.046-.115.044-.118.044-.12.043-.122.043-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.034-.143.034-.144.033-.147.032-.148.032-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.024-.161.024-.162.023-.163.023-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.01-.178.01-.179.009-.179.007-.181.006-.182.006-.182.004-.184.003-.184.001-.185.001-.185-.001-.184-.001-.184-.003-.182-.004-.182-.006-.181-.006-.179-.007-.179-.009-.178-.01-.176-.01-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.023-.162-.023-.161-.024-.159-.024-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.032-.146-.032-.145-.033-.143-.034-.141-.034-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.041-.126-.041-.124-.041-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.048-.105-.048-.102-.048-.1-.05-.097-.049-.095-.051-.093-.051-.09-.052-.087-.052-.085-.053-.083-.053-.08-.054-.077-.054v4.153zm8.74-8.179l-.257.004-.254.005-.25.008-.247.011-.244.012-.241.014-.237.016-.233.018-.231.021-.226.022-.224.023-.22.026-.216.027-.212.028-.21.031-.205.032-.202.033-.198.034-.194.036-.191.038-.187.038-.183.04-.179.041-.175.042-.172.043-.168.043-.163.045-.16.046-.155.046-.152.048-.148.048-.143.048-.139.049-.136.05-.131.05-.126.051-.123.051-.118.051-.114.052-.11.052-.106.052-.101.052-.096.052-.092.052-.088.052-.083.052-.079.052-.074.051-.07.052-.065.051-.06.05-.056.05-.051.05-.023.025-.023.024-.021.024-.02.025-.019.024-.018.024-.017.023-.015.024-.014.023-.013.023-.012.023-.01.023-.01.022-.008.022-.006.023-.006.021-.004.022-.004.021-.001.021-.001.021.001.021.001.021.004.021.004.022.006.021.006.023.008.022.01.022.01.023.012.023.013.023.014.023.015.024.017.023.018.024.019.024.02.025.021.024.023.024.023.025.051.05.056.05.06.05.065.051.07.052.074.051.079.052.083.052.088.052.092.052.096.052.101.052.106.052.11.052.114.052.118.051.123.051.126.051.131.05.136.05.139.049.143.048.148.048.152.048.155.046.16.046.163.045.168.043.172.043.175.042.179.041.183.04.187.038.191.038.194.036.198.034.202.033.205.032.21.031.212.028.216.027.22.026.224.023.226.022.231.021.233.018.237.016.241.014.244.012.247.011.25.008.254.005.257.004.26.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.022.224-.023.22-.026.216-.027.212-.028.21-.031.205-.032.202-.033.198-.034.194-.036.191-.038.187-.038.183-.04.179-.041.175-.042.172-.043.168-.043.163-.045.16-.046.155-.046.152-.048.148-.048.143-.048.139-.049.136-.05.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.05.051-.05.023-.025.023-.024.021-.024.02-.025.019-.024.018-.024.017-.023.015-.024.014-.023.013-.023.012-.023.01-.023.01-.022.008-.022.006-.023.006-.021.004-.022.004-.021.001-.021.001-.021-.001-.021-.001-.021-.004-.021-.004-.022-.006-.021-.006-.023-.008-.022-.01-.022-.01-.023-.012-.023-.013-.023-.014-.023-.015-.024-.017-.023-.018-.024-.019-.024-.02-.025-.021-.024-.023-.024-.023-.025-.051-.05-.056-.05-.06-.05-.065-.051-.07-.052-.074-.051-.079-.052-.083-.052-.088-.052-.092-.052-.096-.052-.101-.052-.106-.052-.11-.052-.114-.052-.118-.051-.123-.051-.126-.051-.131-.05-.136-.05-.139-.049-.143-.048-.148-.048-.152-.048-.155-.046-.16-.046-.163-.045-.168-.043-.172-.043-.175-.042-.179-.041-.183-.04-.187-.038-.191-.038-.194-.036-.198-.034-.202-.033-.205-.032-.21-.031-.212-.028-.216-.027-.22-.026-.224-.023-.226-.022-.231-.021-.233-.018-.237-.016-.241-.014-.244-.012-.247-.011-.25-.008-.254-.005-.257-.004-.26-.001-.26.001z")},"insertDatabaseIcon"),Ct=(0,A.K2)(function(g){g.append("defs").append("symbol").attr("id","computer").attr("width","24").attr("height","24").append("path").attr("transform","scale(.5)").attr("d","M2 2v13h20v-13h-20zm18 11h-16v-9h16v9zm-10.228 6l.466-1h3.524l.467 1h-4.457zm14.228 3h-24l2-6h2.104l-1.33 4h18.45l-1.297-4h2.073l2 6zm-5-10h-14v-7h14v7z")},"insertComputerIcon"),St=(0,A.K2)(function(g){g.append("defs").append("symbol").attr("id","clock").attr("width","24").attr("height","24").append("path").attr("transform","scale(.5)").attr("d","M12 2c5.514 0 10 4.486 10 10s-4.486 10-10 10-10-4.486-10-10 4.486-10 10-10zm0-2c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm5.848 12.459c.202.038.202.333.001.372-1.907.361-6.045 1.111-6.547 1.111-.719 0-1.301-.582-1.301-1.301 0-.512.77-5.447 1.125-7.445.034-.192.312-.181.343.014l.985 6.238 5.394 1.011z")},"insertClockIcon"),R=(0,A.K2)(function(g){g.append("defs").append("marker").attr("id","arrowhead").attr("refX",7.9).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto-start-reverse").append("path").attr("d","M -1 0 L 10 5 L 0 10 z")},"insertArrowHead"),O=(0,A.K2)(function(g){g.append("defs").append("marker").attr("id","filled-head").attr("refX",15.5).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")},"insertArrowFilledHead"),et=(0,A.K2)(function(g){g.append("defs").append("marker").attr("id","sequencenumber").attr("refX",15).attr("refY",15).attr("markerWidth",60).attr("markerHeight",40).attr("orient","auto").append("circle").attr("cx",15).attr("cy",15).attr("r",6)},"insertSequenceNumber"),xt=(0,A.K2)(function(g){g.append("defs").append("marker").attr("id","crosshead").attr("markerWidth",15).attr("markerHeight",8).attr("orient","auto").attr("refX",4).attr("refY",4.5).append("path").attr("fill","none").attr("stroke","#000000").style("stroke-dasharray","0, 0").attr("stroke-width","1pt").attr("d","M 1,2 L 6,7 M 6,2 L 1,7")},"insertArrowCrossHead"),it=(0,A.K2)(function(){return{x:0,y:0,fill:void 0,anchor:void 0,style:"#666",width:void 0,height:void 0,textMargin:0,rx:0,ry:0,tspan:!0,valign:void 0}},"getTextObj"),rt=(0,A.K2)(function(){return{x:0,y:0,fill:"#EDF2AE",stroke:"#666",width:100,anchor:"start",height:100,rx:0,ry:0}},"getNoteRect"),Et=function(){function g(p,x,C,w,$,ct,kt){z(x.append("text").attr("x",C+$/2).attr("y",w+ct/2+5).style("text-anchor","middle").text(p),kt)}function y(p,x,C,w,$,ct,kt,Ut){const{actorFontSize:Ht,actorFontFamily:zt,actorFontWeight:ue}=Ut,[je,ze]=(0,dt.I5)(Ht),Cr=p.split(q.Y2.lineBreakRegex);for(let cr=0;cr<Cr.length;cr++){const sr=cr*je-je*(Cr.length-1)/2,$e=x.append("text").attr("x",C+$/2).attr("y",w).style("text-anchor","middle").style("font-size",ze).style("font-weight",ue).style("font-family",zt);$e.append("tspan").attr("x",C+$/2).attr("dy",sr).text(Cr[cr]),$e.attr("y",w+ct/2).attr("dominant-baseline","central").attr("alignment-baseline","central"),z($e,kt)}}function E(p,x,C,w,$,ct,kt,Ut){const Ht=x.append("switch"),ue=Ht.append("foreignObject").attr("x",C).attr("y",w).attr("width",$).attr("height",ct).append("xhtml:div").style("display","table").style("height","100%").style("width","100%");ue.append("div").style("display","table-cell").style("text-align","center").style("vertical-align","middle").text(p),y(p,Ht,C,w,$,ct,kt,Ut),z(ue,kt)}function P(p,x,C,w,$,ct,kt,Ut){return b.apply(this,arguments)}function b(){return(b=(0,lt.A)(function*(p,x,C,w,$,ct,kt,Ut){const Ht=yield(0,q.Dl)(p,(0,q.zj)()),zt=x.append("switch"),je=zt.append("foreignObject").attr("x",C+$/2-Ht.width/2).attr("y",w+ct/2-Ht.height/2).attr("width",Ht.width).attr("height",Ht.height).append("xhtml:div").style("height","100%").style("width","100%");je.append("div").style("text-align","center").style("vertical-align","middle").html(yield(0,q.dj)(p,(0,q.zj)())),y(p,zt,C,w,$,ct,kt,Ut),z(je,kt)})).apply(this,arguments)}function z(p,x){for(const C in x)x.hasOwnProperty(C)&&p.attr(C,x[C])}return(0,A.K2)(g,"byText"),(0,A.K2)(y,"byTspan"),(0,A.K2)(E,"byFo"),(0,A.K2)(P,"byKatex"),(0,A.K2)(z,"_setTextAttrs"),function(p,x=!1){return x?P:"fo"===p.textPlacement?E:"old"===p.textPlacement?g:y}}(),ut=function(){function g(b,z,p,x,C,w,$){P(z.append("text").attr("x",p).attr("y",x).style("text-anchor","start").text(b),$)}function y(b,z,p,x,C,w,$,ct){const{actorFontSize:kt,actorFontFamily:Ut,actorFontWeight:Ht}=ct,zt=b.split(q.Y2.lineBreakRegex);for(let ue=0;ue<zt.length;ue++){const je=ue*kt-kt*(zt.length-1)/2,ze=z.append("text").attr("x",p).attr("y",x).style("text-anchor","start").style("font-size",kt).style("font-weight",Ht).style("font-family",Ut);ze.append("tspan").attr("x",p).attr("dy",je).text(zt[ue]),ze.attr("y",x+w/2).attr("dominant-baseline","central").attr("alignment-baseline","central"),P(ze,$)}}function E(b,z,p,x,C,w,$,ct){const kt=z.append("switch"),Ht=kt.append("foreignObject").attr("x",p).attr("y",x).attr("width",C).attr("height",w).append("xhtml:div").style("display","table").style("height","100%").style("width","100%");Ht.append("div").style("display","table-cell").style("text-align","center").style("vertical-align","middle").text(b),y(b,kt,p,x,0,w,$,ct),P(Ht,$)}function P(b,z){for(const p in z)z.hasOwnProperty(p)&&b.attr(p,z[p])}return(0,A.K2)(g,"byText"),(0,A.K2)(y,"byTspan"),(0,A.K2)(E,"byFo"),(0,A.K2)(P,"_setTextAttrs"),function(b){return"fo"===b.textPlacement?E:"old"===b.textPlacement?g:y}}(),It={drawRect:Ge,drawText:_e,drawLabel:Z,drawActor:Wt,drawBox:xe,drawPopup:W,anchorElement:le,drawActivation:Re,drawLoop:oe,drawBackgroundRect:qe,insertArrowHead:R,insertArrowFilledHead:O,insertSequenceNumber:et,insertArrowCrossHead:xt,insertDatabaseIcon:We,insertComputerIcon:Ct,insertClockIcon:St,getTextObj:it,getNoteRect:rt,fixLifeLineHeights:S,sanitizeUrl:yt.J},G={},st={data:{startx:void 0,stopx:void 0,starty:void 0,stopy:void 0},verticalPos:0,sequenceItems:[],activations:[],models:{getHeight:(0,A.K2)(function(){return Math.max.apply(null,0===this.actors.length?[0]:this.actors.map(g=>g.height||0))+(0===this.loops.length?0:this.loops.map(g=>g.height||0).reduce((g,y)=>g+y))+(0===this.messages.length?0:this.messages.map(g=>g.height||0).reduce((g,y)=>g+y))+(0===this.notes.length?0:this.notes.map(g=>g.height||0).reduce((g,y)=>g+y))},"getHeight"),clear:(0,A.K2)(function(){this.actors=[],this.boxes=[],this.loops=[],this.messages=[],this.notes=[]},"clear"),addBox:(0,A.K2)(function(g){this.boxes.push(g)},"addBox"),addActor:(0,A.K2)(function(g){this.actors.push(g)},"addActor"),addLoop:(0,A.K2)(function(g){this.loops.push(g)},"addLoop"),addMessage:(0,A.K2)(function(g){this.messages.push(g)},"addMessage"),addNote:(0,A.K2)(function(g){this.notes.push(g)},"addNote"),lastActor:(0,A.K2)(function(){return this.actors[this.actors.length-1]},"lastActor"),lastLoop:(0,A.K2)(function(){return this.loops[this.loops.length-1]},"lastLoop"),lastMessage:(0,A.K2)(function(){return this.messages[this.messages.length-1]},"lastMessage"),lastNote:(0,A.K2)(function(){return this.notes[this.notes.length-1]},"lastNote"),actors:[],boxes:[],loops:[],messages:[],notes:[]},init:(0,A.K2)(function(){this.sequenceItems=[],this.activations=[],this.models.clear(),this.data={startx:void 0,stopx:void 0,starty:void 0,stopy:void 0},this.verticalPos=0,Pe((0,q.D7)())},"init"),updateVal:(0,A.K2)(function(g,y,E,P){g[y]=void 0===g[y]?E:P(E,g[y])},"updateVal"),updateBounds:(0,A.K2)(function(g,y,E,P){const b=this;let z=0;function p(x){return(0,A.K2)(function(w){z++;const $=b.sequenceItems.length-z+1;b.updateVal(w,"starty",y-$*G.boxMargin,Math.min),b.updateVal(w,"stopy",P+$*G.boxMargin,Math.max),b.updateVal(st.data,"startx",g-$*G.boxMargin,Math.min),b.updateVal(st.data,"stopx",E+$*G.boxMargin,Math.max),"activation"!==x&&(b.updateVal(w,"startx",g-$*G.boxMargin,Math.min),b.updateVal(w,"stopx",E+$*G.boxMargin,Math.max),b.updateVal(st.data,"starty",y-$*G.boxMargin,Math.min),b.updateVal(st.data,"stopy",P+$*G.boxMargin,Math.max))},"updateItemBounds")}(0,A.K2)(p,"updateFn"),this.sequenceItems.forEach(p()),this.activations.forEach(p("activation"))},"updateBounds"),insert:(0,A.K2)(function(g,y,E,P){const b=q.Y2.getMin(g,E),z=q.Y2.getMax(g,E),p=q.Y2.getMin(y,P),x=q.Y2.getMax(y,P);this.updateVal(st.data,"startx",b,Math.min),this.updateVal(st.data,"starty",p,Math.min),this.updateVal(st.data,"stopx",z,Math.max),this.updateVal(st.data,"stopy",x,Math.max),this.updateBounds(b,p,z,x)},"insert"),newActivation:(0,A.K2)(function(g,y,E){const P=E.get(g.from),b=ir(g.from).length||0,z=P.x+P.width/2+(b-1)*G.activationWidth/2;this.activations.push({startx:z,starty:this.verticalPos+2,stopx:z+G.activationWidth,stopy:void 0,actor:g.from,anchored:It.anchorElement(y)})},"newActivation"),endActivation:(0,A.K2)(function(g){const y=this.activations.map(function(E){return E.actor}).lastIndexOf(g.from);return this.activations.splice(y,1)[0]},"endActivation"),createLoop:(0,A.K2)(function(g={message:void 0,wrap:!1,width:void 0},y){return{startx:void 0,starty:this.verticalPos,stopx:void 0,stopy:void 0,title:g.message,wrap:g.wrap,width:g.width,height:0,fill:y}},"createLoop"),newLoop:(0,A.K2)(function(g={message:void 0,wrap:!1,width:void 0},y){this.sequenceItems.push(this.createLoop(g,y))},"newLoop"),endLoop:(0,A.K2)(function(){return this.sequenceItems.pop()},"endLoop"),isLoopOverlap:(0,A.K2)(function(){return!!this.sequenceItems.length&&this.sequenceItems[this.sequenceItems.length-1].overlap},"isLoopOverlap"),addSectionToLoop:(0,A.K2)(function(g){const y=this.sequenceItems.pop();y.sections=y.sections||[],y.sectionTitles=y.sectionTitles||[],y.sections.push({y:st.getVerticalPos(),height:0}),y.sectionTitles.push(g),this.sequenceItems.push(y)},"addSectionToLoop"),saveVerticalPos:(0,A.K2)(function(){this.isLoopOverlap()&&(this.savedVerticalPos=this.verticalPos)},"saveVerticalPos"),resetVerticalPos:(0,A.K2)(function(){this.isLoopOverlap()&&(this.verticalPos=this.savedVerticalPos)},"resetVerticalPos"),bumpVerticalPos:(0,A.K2)(function(g){this.verticalPos=this.verticalPos+g,this.data.stopy=q.Y2.getMax(this.data.stopy,this.verticalPos)},"bumpVerticalPos"),getVerticalPos:(0,A.K2)(function(){return this.verticalPos},"getVerticalPos"),getBounds:(0,A.K2)(function(){return{bounds:this.data,models:this.models}},"getBounds")},Ce=(0,A.K2)(function(){var g=(0,lt.A)(function*(y,E){st.bumpVerticalPos(G.boxMargin),E.height=G.boxMargin,E.starty=st.getVerticalPos();const P=(0,L.PB)();P.x=E.startx,P.y=E.starty,P.width=E.width||G.width,P.class="note";const b=y.append("g"),z=It.drawRect(b,P),p=(0,L.HT)();p.x=E.startx,p.y=E.starty,p.width=P.width,p.dy="1em",p.text=E.message,p.class="noteText",p.fontFamily=G.noteFontFamily,p.fontSize=G.noteFontSize,p.fontWeight=G.noteFontWeight,p.anchor=G.noteAlign,p.textMargin=G.noteMargin,p.valign="center";const x=(0,q.Wi)(p.text)?yield Bt(b,p):_e(b,p),C=Math.round(x.map(w=>(w._groups||w)[0][0].getBBox().height).reduce((w,$)=>w+$));z.attr("height",C+2*G.noteMargin),E.height+=C+2*G.noteMargin,st.bumpVerticalPos(C+2*G.noteMargin),E.stopy=E.starty+C+2*G.noteMargin,E.stopx=E.startx+P.width,st.insert(E.startx,E.starty,E.stopx,E.stopy),st.models.addNote(E)});return function(y,E){return g.apply(this,arguments)}}(),"drawNote"),Ot=(0,A.K2)(g=>({fontFamily:g.messageFontFamily,fontSize:g.messageFontSize,fontWeight:g.messageFontWeight}),"messageFont"),Jt=(0,A.K2)(g=>({fontFamily:g.noteFontFamily,fontSize:g.noteFontSize,fontWeight:g.noteFontWeight}),"noteFont"),fe=(0,A.K2)(g=>({fontFamily:g.actorFontFamily,fontSize:g.actorFontSize,fontWeight:g.actorFontWeight}),"actorFont");function Be(g,y){return Ze.apply(this,arguments)}function Ze(){return(Ze=(0,lt.A)(function*(g,y){st.bumpVerticalPos(10);const{startx:E,stopx:P,message:b}=y,z=q.Y2.splitBreaks(b).length,p=(0,q.Wi)(b),x=p?yield(0,q.Dl)(b,(0,q.D7)()):dt._K.calculateTextDimensions(b,Ot(G));if(!p){const ct=x.height/z;y.height+=ct,st.bumpVerticalPos(ct)}let C,w=x.height-10;const $=x.width;if(E===P){C=st.getVerticalPos()+w,G.rightAngles||(w+=G.boxMargin,C=st.getVerticalPos()+w),w+=30;const ct=q.Y2.getMax($/2,G.width/2);st.insert(E-ct,st.getVerticalPos()-10+w,P+ct,st.getVerticalPos()+30+w)}else w+=G.boxMargin,C=st.getVerticalPos()+w,st.insert(E,C-10,P,C);return st.bumpVerticalPos(w),y.height+=w,y.stopy=y.starty+y.height,st.insert(y.fromBounds,y.starty,y.toBounds,y.stopy),C})).apply(this,arguments)}(0,A.K2)(Be,"boundMessage");var ye=(0,A.K2)(function(){var g=(0,lt.A)(function*(y,E,P,b){const{startx:z,stopx:p,starty:x,message:C,type:w,sequenceIndex:$,sequenceVisible:ct}=E,kt=dt._K.calculateTextDimensions(C,Ot(G)),Ut=(0,L.HT)();Ut.x=z,Ut.y=x+10,Ut.width=p-z,Ut.class="messageText",Ut.dy="1em",Ut.text=C,Ut.fontFamily=G.messageFontFamily,Ut.fontSize=G.messageFontSize,Ut.fontWeight=G.messageFontWeight,Ut.anchor=G.messageAlign,Ut.valign="center",Ut.textMargin=G.wrapPadding,Ut.tspan=!1,(0,q.Wi)(Ut.text)?yield Bt(y,Ut,{startx:z,stopx:p,starty:P}):_e(y,Ut);const Ht=kt.width;let zt;z===p?zt=G.rightAngles?y.append("path").attr("d",`M  ${z},${P} H ${z+q.Y2.getMax(G.width/2,Ht/2)} V ${P+25} H ${z}`):y.append("path").attr("d","M "+z+","+P+" C "+(z+60)+","+(P-10)+" "+(z+60)+","+(P+30)+" "+z+","+(P+20)):(zt=y.append("line"),zt.attr("x1",z),zt.attr("y1",P),zt.attr("x2",p),zt.attr("y2",P)),w===b.db.LINETYPE.DOTTED||w===b.db.LINETYPE.DOTTED_CROSS||w===b.db.LINETYPE.DOTTED_POINT||w===b.db.LINETYPE.DOTTED_OPEN||w===b.db.LINETYPE.BIDIRECTIONAL_DOTTED?(zt.style("stroke-dasharray","3, 3"),zt.attr("class","messageLine1")):zt.attr("class","messageLine0");let ue="";G.arrowMarkerAbsolute&&(ue=(0,q.ID)(!0)),zt.attr("stroke-width",2),zt.attr("stroke","none"),zt.style("fill","none"),(w===b.db.LINETYPE.SOLID||w===b.db.LINETYPE.DOTTED)&&zt.attr("marker-end","url("+ue+"#arrowhead)"),(w===b.db.LINETYPE.BIDIRECTIONAL_SOLID||w===b.db.LINETYPE.BIDIRECTIONAL_DOTTED)&&(zt.attr("marker-start","url("+ue+"#arrowhead)"),zt.attr("marker-end","url("+ue+"#arrowhead)")),(w===b.db.LINETYPE.SOLID_POINT||w===b.db.LINETYPE.DOTTED_POINT)&&zt.attr("marker-end","url("+ue+"#filled-head)"),(w===b.db.LINETYPE.SOLID_CROSS||w===b.db.LINETYPE.DOTTED_CROSS)&&zt.attr("marker-end","url("+ue+"#crosshead)"),(ct||G.showSequenceNumbers)&&((w===b.db.LINETYPE.BIDIRECTIONAL_SOLID||w===b.db.LINETYPE.BIDIRECTIONAL_DOTTED)&&zt.attr("x1",z<p?z+12:z+6),y.append("line").attr("x1",z).attr("y1",P).attr("x2",z).attr("y2",P).attr("stroke-width",0).attr("marker-start","url("+ue+"#sequencenumber)"),y.append("text").attr("x",z).attr("y",P+4).attr("font-family","sans-serif").attr("font-size","12px").attr("text-anchor","middle").attr("class","sequenceNumber").text($))});return function(y,E,P,b){return g.apply(this,arguments)}}(),"drawMessage"),kr=(0,A.K2)(function(g,y,E,P,b,z,p){let w,x=0,C=0,$=0;for(const ct of P){const kt=y.get(ct),Ut=kt.box;w&&w!=Ut&&(p||st.models.addBox(w),C+=G.boxMargin+w.margin),Ut&&Ut!=w&&(p||(Ut.x=x+C,Ut.y=b),C+=Ut.margin),kt.width=kt.width||G.width,kt.height=q.Y2.getMax(kt.height||G.height,G.height),kt.margin=kt.margin||G.actorMargin,$=q.Y2.getMax($,kt.height),E.get(kt.name)&&(C+=kt.width/2),kt.x=x+C,kt.starty=st.getVerticalPos(),st.insert(kt.x,b,kt.x+kt.width,kt.height),x+=kt.width+C,kt.box&&(kt.box.width=x+Ut.margin-kt.box.x),C=kt.margin,w=kt.box,st.models.addActor(kt)}w&&!p&&st.models.addBox(w),st.bumpVerticalPos($)},"addActorRenderingData"),ur=(0,A.K2)(function(){var g=(0,lt.A)(function*(y,E,P,b){if(b){let z=0;st.bumpVerticalPos(2*G.boxMargin);for(const p of P){const x=E.get(p);x.stopy||(x.stopy=st.getVerticalPos());const C=yield It.drawActor(y,x,G,!0);z=q.Y2.getMax(z,C)}st.bumpVerticalPos(z+G.boxMargin)}else for(const z of P){const p=E.get(z);yield It.drawActor(y,p,G,!1)}});return function(y,E,P,b){return g.apply(this,arguments)}}(),"drawActors"),Kt=(0,A.K2)(function(g,y,E,P){let b=0,z=0;for(const p of E){const x=y.get(p),C=Ir(x),w=It.drawPopup(g,x,C,G,G.forceMenus,P);w.height>b&&(b=w.height),w.width+x.x>z&&(z=w.width+x.x)}return{maxHeight:b,maxWidth:z}},"drawActorsPopup"),Pe=(0,A.K2)(function(g){(0,q.hH)(G,g),g.fontFamily&&(G.actorFontFamily=G.noteFontFamily=G.messageFontFamily=g.fontFamily),g.fontSize&&(G.actorFontSize=G.noteFontSize=G.messageFontSize=g.fontSize),g.fontWeight&&(G.actorFontWeight=G.noteFontWeight=G.messageFontWeight=g.fontWeight)},"setConf"),ir=(0,A.K2)(function(g){return st.activations.filter(function(y){return y.actor===g})},"actorActivations"),me=(0,A.K2)(function(g,y){const E=y.get(g),P=ir(g);return[P.reduce(function(p,x){return q.Y2.getMin(p,x.startx)},E.x+E.width/2-1),P.reduce(function(p,x){return q.Y2.getMax(p,x.stopx)},E.x+E.width/2+1)]},"activationBounds");function ce(g,y,E,P,b){st.bumpVerticalPos(E);let z=P;if(y.id&&y.message&&g[y.id]){const p=g[y.id].width,x=Ot(G);y.message=dt._K.wrapLabel(`[${y.message}]`,p-2*G.wrapPadding,x),y.width=p,y.wrap=!0;const C=dt._K.calculateTextDimensions(y.message,x),w=q.Y2.getMax(C.height,G.labelBoxHeight);z=P+w,A.Rm.debug(`${w} - ${y.message}`)}b(y),st.bumpVerticalPos(z)}function ke(g,y,E,P,b,z,p){function x($,ct){$.x<b.get(g.from).x?(st.insert(y.stopx-ct,y.starty,y.startx,y.stopy+$.height/2+G.noteMargin),y.stopx=y.stopx+ct):(st.insert(y.startx,y.starty,y.stopx+ct,y.stopy+$.height/2+G.noteMargin),y.stopx=y.stopx-ct)}function C($,ct){$.x<b.get(g.to).x?(st.insert(y.startx-ct,y.starty,y.stopx,y.stopy+$.height/2+G.noteMargin),y.startx=y.startx+ct):(st.insert(y.stopx,y.starty,y.startx+ct,y.stopy+$.height/2+G.noteMargin),y.startx=y.startx-ct)}(0,A.K2)(x,"receiverAdjustment"),(0,A.K2)(C,"senderAdjustment");const w=["actor","control","entity","database"];if(z.get(g.to)==P){const $=b.get(g.to);x($,w.includes($.type)?21:$.width/2+3),$.starty=E-$.height/2,st.bumpVerticalPos($.height/2)}else if(p.get(g.from)==P){const $=b.get(g.from);G.mirrorActors&&C($,w.includes($.type)?18:$.width/2),$.stopy=E-$.height/2,st.bumpVerticalPos($.height/2)}else if(p.get(g.to)==P){const $=b.get(g.to);G.mirrorActors&&x($,w.includes($.type)?21:$.width/2+3),$.stopy=E-$.height/2,st.bumpVerticalPos($.height/2)}}(0,A.K2)(ce,"adjustLoopHeightForWrap"),(0,A.K2)(ke,"adjustCreatedDestroyedData");var Te=(0,A.K2)(function(){var g=(0,lt.A)(function*(y,E,P,b){const{securityLevel:z,sequence:p}=(0,q.D7)();let x;G=p,"sandbox"===z&&(x=(0,$t.Ltv)("#i"+E));const C=(0,$t.Ltv)("sandbox"===z?x.nodes()[0].contentDocument.body:"body"),w="sandbox"===z?x.nodes()[0].contentDocument:document;st.init(),A.Rm.debug(b.db);const $="sandbox"===z?C.select(`[id="${E}"]`):(0,$t.Ltv)(`[id="${E}"]`),ct=b.db.getActors(),kt=b.db.getCreatedActors(),Ut=b.db.getDestroyedActors(),Ht=b.db.getBoxes();let zt=b.db.getActorKeys();const ue=b.db.getMessages(),je=b.db.getDiagramTitle(),ze=b.db.hasAtLeastOneBox(),Cr=b.db.hasAtLeastOneBoxWithTitle(),cr=yield er(ct,ue,b);if(G.height=yield Ee(ct,cr,Ht),It.insertComputerIcon($),It.insertDatabaseIcon($),It.insertClockIcon($),ze&&(st.bumpVerticalPos(G.boxMargin),Cr&&st.bumpVerticalPos(Ht[0].textMaxHeight)),!0===G.hideUnusedParticipants){const Tr=new Set;ue.forEach(N=>{Tr.add(N.from),Tr.add(N.to)}),zt=zt.filter(N=>Tr.has(N))}kr($,ct,kt,zt,0,ue,!1);const sr=yield ne(ue,ct,cr,b);function $e(Tr,N){const Vt=st.endActivation(Tr);Vt.starty+18>N&&(Vt.starty=N-6,N+=12),It.drawActivation($,Vt,N,G,ir(Tr.from).length),st.insert(Vt.startx,N-10,Vt.stopx,N)}It.insertArrowHead($),It.insertArrowCrossHead($),It.insertArrowFilledHead($),It.insertSequenceNumber($),(0,A.K2)($e,"activeEnd");let He=1,Pr=1;const wr=[],Vr=[];let xr=0;for(const Tr of ue){let N,Vt,Ke;switch(Tr.type){case b.db.LINETYPE.NOTE:st.resetVerticalPos(),Vt=Tr.noteModel,yield Ce($,Vt);break;case b.db.LINETYPE.ACTIVE_START:st.newActivation(Tr,$,ct);break;case b.db.LINETYPE.ACTIVE_END:$e(Tr,st.getVerticalPos());break;case b.db.LINETYPE.LOOP_START:ce(sr,Tr,G.boxMargin,G.boxMargin+G.boxTextMargin,rr=>st.newLoop(rr));break;case b.db.LINETYPE.LOOP_END:N=st.endLoop(),yield It.drawLoop($,N,"loop",G),st.bumpVerticalPos(N.stopy-st.getVerticalPos()),st.models.addLoop(N);break;case b.db.LINETYPE.RECT_START:ce(sr,Tr,G.boxMargin,G.boxMargin,rr=>st.newLoop(void 0,rr.message));break;case b.db.LINETYPE.RECT_END:N=st.endLoop(),Vr.push(N),st.models.addLoop(N),st.bumpVerticalPos(N.stopy-st.getVerticalPos());break;case b.db.LINETYPE.OPT_START:ce(sr,Tr,G.boxMargin,G.boxMargin+G.boxTextMargin,rr=>st.newLoop(rr));break;case b.db.LINETYPE.OPT_END:N=st.endLoop(),yield It.drawLoop($,N,"opt",G),st.bumpVerticalPos(N.stopy-st.getVerticalPos()),st.models.addLoop(N);break;case b.db.LINETYPE.ALT_START:ce(sr,Tr,G.boxMargin,G.boxMargin+G.boxTextMargin,rr=>st.newLoop(rr));break;case b.db.LINETYPE.ALT_ELSE:ce(sr,Tr,G.boxMargin+G.boxTextMargin,G.boxMargin,rr=>st.addSectionToLoop(rr));break;case b.db.LINETYPE.ALT_END:N=st.endLoop(),yield It.drawLoop($,N,"alt",G),st.bumpVerticalPos(N.stopy-st.getVerticalPos()),st.models.addLoop(N);break;case b.db.LINETYPE.PAR_START:case b.db.LINETYPE.PAR_OVER_START:ce(sr,Tr,G.boxMargin,G.boxMargin+G.boxTextMargin,rr=>st.newLoop(rr)),st.saveVerticalPos();break;case b.db.LINETYPE.PAR_AND:ce(sr,Tr,G.boxMargin+G.boxTextMargin,G.boxMargin,rr=>st.addSectionToLoop(rr));break;case b.db.LINETYPE.PAR_END:N=st.endLoop(),yield It.drawLoop($,N,"par",G),st.bumpVerticalPos(N.stopy-st.getVerticalPos()),st.models.addLoop(N);break;case b.db.LINETYPE.AUTONUMBER:He=Tr.message.start||He,Pr=Tr.message.step||Pr,Tr.message.visible?b.db.enableSequenceNumbers():b.db.disableSequenceNumbers();break;case b.db.LINETYPE.CRITICAL_START:ce(sr,Tr,G.boxMargin,G.boxMargin+G.boxTextMargin,rr=>st.newLoop(rr));break;case b.db.LINETYPE.CRITICAL_OPTION:ce(sr,Tr,G.boxMargin+G.boxTextMargin,G.boxMargin,rr=>st.addSectionToLoop(rr));break;case b.db.LINETYPE.CRITICAL_END:N=st.endLoop(),yield It.drawLoop($,N,"critical",G),st.bumpVerticalPos(N.stopy-st.getVerticalPos()),st.models.addLoop(N);break;case b.db.LINETYPE.BREAK_START:ce(sr,Tr,G.boxMargin,G.boxMargin+G.boxTextMargin,rr=>st.newLoop(rr));break;case b.db.LINETYPE.BREAK_END:N=st.endLoop(),yield It.drawLoop($,N,"break",G),st.bumpVerticalPos(N.stopy-st.getVerticalPos()),st.models.addLoop(N);break;default:try{Ke=Tr.msgModel,Ke.starty=st.getVerticalPos(),Ke.sequenceIndex=He,Ke.sequenceVisible=b.db.showSequenceNumbers();const rr=yield Be($,Ke);ke(Tr,Ke,rr,xr,ct,kt,Ut),wr.push({messageModel:Ke,lineStartY:rr}),st.models.addMessage(Ke)}catch(rr){A.Rm.error("error while drawing message",rr)}}[b.db.LINETYPE.SOLID_OPEN,b.db.LINETYPE.DOTTED_OPEN,b.db.LINETYPE.SOLID,b.db.LINETYPE.DOTTED,b.db.LINETYPE.SOLID_CROSS,b.db.LINETYPE.DOTTED_CROSS,b.db.LINETYPE.SOLID_POINT,b.db.LINETYPE.DOTTED_POINT,b.db.LINETYPE.BIDIRECTIONAL_SOLID,b.db.LINETYPE.BIDIRECTIONAL_DOTTED].includes(Tr.type)&&(He+=Pr),xr++}A.Rm.debug("createdActors",kt),A.Rm.debug("destroyedActors",Ut),yield ur($,ct,zt,!1);for(const Tr of wr)yield ye($,Tr.messageModel,Tr.lineStartY,b);G.mirrorActors&&(yield ur($,ct,zt,!0)),Vr.forEach(Tr=>It.drawBackgroundRect($,Tr)),S($,ct,zt,G);for(const Tr of st.models.boxes){Tr.height=st.getVerticalPos()-Tr.y,st.insert(Tr.x,Tr.y,Tr.x+Tr.width,Tr.height);const N=2*G.boxMargin;Tr.startx=Tr.x-N,Tr.starty=Tr.y-.25*N,Tr.stopx=Tr.startx+Tr.width+2*N,Tr.stopy=Tr.starty+Tr.height+.75*N,Tr.stroke="rgb(0,0,0, 0.5)",It.drawBox($,Tr,G)}ze&&st.bumpVerticalPos(G.boxMargin);const Ba=Kt($,ct,zt,w),{bounds:Zr}=st.getBounds();void 0===Zr.startx&&(Zr.startx=0),void 0===Zr.starty&&(Zr.starty=0),void 0===Zr.stopx&&(Zr.stopx=0),void 0===Zr.stopy&&(Zr.stopy=0);let Oa=Zr.stopy-Zr.starty;Oa<Ba.maxHeight&&(Oa=Ba.maxHeight);let Qr=Oa+2*G.diagramMarginY;G.mirrorActors&&(Qr=Qr-G.boxMargin+G.bottomMarginAdj);let ra=Zr.stopx-Zr.startx;ra<Ba.maxWidth&&(ra=Ba.maxWidth);const Xr=ra+2*G.diagramMarginX;je&&$.append("text").text(je).attr("x",(Zr.stopx-Zr.startx)/2-2*G.diagramMarginX).attr("y",-25),(0,q.a$)($,Qr,Xr,G.useMaxWidth);const Rr=je?40:0;$.attr("viewBox",Zr.startx-G.diagramMarginX+" -"+(G.diagramMarginY+Rr)+" "+Xr+" "+(Qr+Rr)),A.Rm.debug("models:",st.models)});return function(y,E,P,b){return g.apply(this,arguments)}}(),"draw");function er(g,y,E){return Xe.apply(this,arguments)}function Xe(){return(Xe=(0,lt.A)(function*(g,y,E){const P={};for(const b of y)if(g.get(b.to)&&g.get(b.from)){const z=g.get(b.to);if(b.placement===E.db.PLACEMENT.LEFTOF&&!z.prevActor||b.placement===E.db.PLACEMENT.RIGHTOF&&!z.nextActor)continue;const p=void 0!==b.placement,x=!p,C=p?Jt(G):Ot(G),w=b.wrap?dt._K.wrapLabel(b.message,G.width-2*G.wrapPadding,C):b.message,ct=((0,q.Wi)(w)?yield(0,q.Dl)(b.message,(0,q.D7)()):dt._K.calculateTextDimensions(w,C)).width+2*G.wrapPadding;x&&b.from===z.nextActor?P[b.to]=q.Y2.getMax(P[b.to]||0,ct):x&&b.from===z.prevActor?P[b.from]=q.Y2.getMax(P[b.from]||0,ct):x&&b.from===b.to?(P[b.from]=q.Y2.getMax(P[b.from]||0,ct/2),P[b.to]=q.Y2.getMax(P[b.to]||0,ct/2)):b.placement===E.db.PLACEMENT.RIGHTOF?P[b.from]=q.Y2.getMax(P[b.from]||0,ct):b.placement===E.db.PLACEMENT.LEFTOF?P[z.prevActor]=q.Y2.getMax(P[z.prevActor]||0,ct):b.placement===E.db.PLACEMENT.OVER&&(z.prevActor&&(P[z.prevActor]=q.Y2.getMax(P[z.prevActor]||0,ct/2)),z.nextActor&&(P[b.from]=q.Y2.getMax(P[b.from]||0,ct/2)))}return A.Rm.debug("maxMessageWidthPerActor:",P),P})).apply(this,arguments)}(0,A.K2)(er,"getMaxMessageWidthPerActor");var Ir=(0,A.K2)(function(g){let y=0;const E=fe(G);for(const P in g.links){const z=dt._K.calculateTextDimensions(P,E).width+2*G.wrapPadding+2*G.boxMargin;y<z&&(y=z)}return y},"getRequiredPopupWidth");function Ee(g,y,E){return qr.apply(this,arguments)}function qr(){return(qr=(0,lt.A)(function*(g,y,E){let P=0;for(const z of g.keys()){const p=g.get(z);p.wrap&&(p.description=dt._K.wrapLabel(p.description,G.width-2*G.wrapPadding,fe(G)));const x=(0,q.Wi)(p.description)?yield(0,q.Dl)(p.description,(0,q.D7)()):dt._K.calculateTextDimensions(p.description,fe(G));p.width=p.wrap?G.width:q.Y2.getMax(G.width,x.width+2*G.wrapPadding),p.height=p.wrap?q.Y2.getMax(x.height,G.height):G.height,P=q.Y2.getMax(P,p.height)}for(const z in y){const p=g.get(z);if(!p)continue;const x=g.get(p.nextActor);x?p.margin=q.Y2.getMax(y[z]+G.actorMargin-p.width/2-x.width/2,G.actorMargin):p.margin=q.Y2.getMax(y[z]+G.actorMargin-p.width/2,G.actorMargin)}let b=0;return E.forEach(z=>{const p=Ot(G);let x=z.actorKeys.reduce((ct,kt)=>ct+(g.get(kt).width+(g.get(kt).margin||0)),0);x+=8*G.boxMargin,x-=2*G.boxTextMargin,z.wrap&&(z.name=dt._K.wrapLabel(z.name,x-2*G.wrapPadding,p));const w=dt._K.calculateTextDimensions(z.name,p);b=q.Y2.getMax(w.height,b);const $=q.Y2.getMax(x,w.width+2*G.wrapPadding);z.margin=G.boxTextMargin,x<$&&(z.margin+=($-x)/2)}),E.forEach(z=>z.textMaxHeight=b),q.Y2.getMax(P,G.height)})).apply(this,arguments)}(0,A.K2)(Ee,"calculateActorMargins");var nr=(0,A.K2)(function(){var g=(0,lt.A)(function*(y,E,P){const b=E.get(y.from),z=E.get(y.to),p=b.x,x=z.x,C=y.wrap&&y.message;let w=(0,q.Wi)(y.message)?yield(0,q.Dl)(y.message,(0,q.D7)()):dt._K.calculateTextDimensions(C?dt._K.wrapLabel(y.message,G.width,Jt(G)):y.message,Jt(G));const $={width:C?G.width:q.Y2.getMax(G.width,w.width+2*G.noteMargin),height:0,startx:b.x,stopx:0,starty:0,stopy:0,message:y.message};return y.placement===P.db.PLACEMENT.RIGHTOF?($.width=C?q.Y2.getMax(G.width,w.width):q.Y2.getMax(b.width/2+z.width/2,w.width+2*G.noteMargin),$.startx=p+(b.width+G.actorMargin)/2):y.placement===P.db.PLACEMENT.LEFTOF?($.width=q.Y2.getMax(C?G.width:b.width/2+z.width/2,w.width+2*G.noteMargin),$.startx=p-$.width+(b.width-G.actorMargin)/2):y.to===y.from?(w=dt._K.calculateTextDimensions(C?dt._K.wrapLabel(y.message,q.Y2.getMax(G.width,b.width),Jt(G)):y.message,Jt(G)),$.width=C?q.Y2.getMax(G.width,b.width):q.Y2.getMax(b.width,G.width,w.width+2*G.noteMargin),$.startx=p+(b.width-$.width)/2):($.width=Math.abs(p+b.width/2-(x+z.width/2))+G.actorMargin,$.startx=p<x?p+b.width/2-G.actorMargin/2:x+z.width/2-G.actorMargin/2),C&&($.message=dt._K.wrapLabel(y.message,$.width-2*G.wrapPadding,Jt(G))),A.Rm.debug(`NM:[${$.startx},${$.stopx},${$.starty},${$.stopy}:${$.width},${$.height}=${y.message}]`),$});return function(y,E,P){return g.apply(this,arguments)}}(),"buildNoteModel"),te=(0,A.K2)(function(g,y,E){if(![E.db.LINETYPE.SOLID_OPEN,E.db.LINETYPE.DOTTED_OPEN,E.db.LINETYPE.SOLID,E.db.LINETYPE.DOTTED,E.db.LINETYPE.SOLID_CROSS,E.db.LINETYPE.DOTTED_CROSS,E.db.LINETYPE.SOLID_POINT,E.db.LINETYPE.DOTTED_POINT,E.db.LINETYPE.BIDIRECTIONAL_SOLID,E.db.LINETYPE.BIDIRECTIONAL_DOTTED].includes(g.type))return{};const[P,b]=me(g.from,y),[z,p]=me(g.to,y),x=P<=z;let C=x?b:P,w=x?z:p;const $=Math.abs(z-p)>2,ct=(0,A.K2)(zt=>x?-zt:zt,"adjustValue");g.from===g.to?w=C:(g.activate&&!$&&(w+=ct(G.activationWidth/2-1)),[E.db.LINETYPE.SOLID_OPEN,E.db.LINETYPE.DOTTED_OPEN].includes(g.type)||(w+=ct(3)),[E.db.LINETYPE.BIDIRECTIONAL_SOLID,E.db.LINETYPE.BIDIRECTIONAL_DOTTED].includes(g.type)&&(C-=ct(3)));const kt=[P,b,z,p],Ut=Math.abs(C-w);g.wrap&&g.message&&(g.message=dt._K.wrapLabel(g.message,q.Y2.getMax(Ut+2*G.wrapPadding,G.width),Ot(G)));const Ht=dt._K.calculateTextDimensions(g.message,Ot(G));return{width:q.Y2.getMax(g.wrap?0:Ht.width+2*G.wrapPadding,Ut+2*G.wrapPadding,G.width),height:0,startx:C,stopx:w,starty:0,stopy:0,message:g.message,type:g.type,wrap:g.wrap,fromBounds:Math.min.apply(null,kt),toBounds:Math.max.apply(null,kt)}},"buildMessageModel"),ne=(0,A.K2)(function(){var g=(0,lt.A)(function*(y,E,P,b){const z={},p=[];let x,C,w;for(const $ of y){switch($.type){case b.db.LINETYPE.LOOP_START:case b.db.LINETYPE.ALT_START:case b.db.LINETYPE.OPT_START:case b.db.LINETYPE.PAR_START:case b.db.LINETYPE.PAR_OVER_START:case b.db.LINETYPE.CRITICAL_START:case b.db.LINETYPE.BREAK_START:p.push({id:$.id,msg:$.message,from:Number.MAX_SAFE_INTEGER,to:Number.MIN_SAFE_INTEGER,width:0});break;case b.db.LINETYPE.ALT_ELSE:case b.db.LINETYPE.PAR_AND:case b.db.LINETYPE.CRITICAL_OPTION:$.message&&(x=p.pop(),z[x.id]=x,z[$.id]=x,p.push(x));break;case b.db.LINETYPE.LOOP_END:case b.db.LINETYPE.ALT_END:case b.db.LINETYPE.OPT_END:case b.db.LINETYPE.PAR_END:case b.db.LINETYPE.CRITICAL_END:case b.db.LINETYPE.BREAK_END:x=p.pop(),z[x.id]=x;break;case b.db.LINETYPE.ACTIVE_START:{const kt=E.get($.from?$.from:$.to.actor),Ut=ir($.from?$.from:$.to.actor).length,Ht=kt.x+kt.width/2+(Ut-1)*G.activationWidth/2;st.activations.push({startx:Ht,stopx:Ht+G.activationWidth,actor:$.from,enabled:!0})}break;case b.db.LINETYPE.ACTIVE_END:{const kt=st.activations.map(Ut=>Ut.actor).lastIndexOf($.from);st.activations.splice(kt,1).splice(0,1)}}void 0!==$.placement?(C=yield nr($,E,b),$.noteModel=C,p.forEach(kt=>{x=kt,x.from=q.Y2.getMin(x.from,C.startx),x.to=q.Y2.getMax(x.to,C.startx+C.width),x.width=q.Y2.getMax(x.width,Math.abs(x.from-x.to))-G.labelBoxWidth})):(w=te($,E,b),$.msgModel=w,w.startx&&w.stopx&&p.length>0&&p.forEach(kt=>{if(x=kt,w.startx===w.stopx){const Ut=E.get($.from),Ht=E.get($.to);x.from=q.Y2.getMin(Ut.x-w.width/2,Ut.x-Ut.width/2,x.from),x.to=q.Y2.getMax(Ht.x+w.width/2,Ht.x+Ut.width/2,x.to),x.width=q.Y2.getMax(x.width,Math.abs(x.to-x.from))-G.labelBoxWidth}else x.from=q.Y2.getMin(w.startx,x.from),x.to=q.Y2.getMax(w.stopx,x.to),x.width=q.Y2.getMax(x.width,w.width)-G.labelBoxWidth}))}return st.activations=[],A.Rm.debug("Loop type widths:",z),z});return function(y,E,P,b){return g.apply(this,arguments)}}(),"calculateLoopBounds"),Le={bounds:st,drawActors:ur,drawActorsPopup:Kt,setConf:Pe,draw:Te},tr={parser:Xt,get db(){return new zr},renderer:Le,styles:mr,init:(0,A.K2)(g=>{g.sequence||(g.sequence={}),g.wrap&&(g.sequence.wrap=g.wrap,(0,q.XV)({sequence:{wrap:g.wrap}}))},"init")}},97787:(ti,_r,B)=>{"use strict";B.d(_r,{o:()=>ee});var ee=(0,B(32303).K2)(()=>"\n  /* Font Awesome icon styling - consolidated */\n  .label-icon {\n    display: inline-block;\n    height: 1em;\n    overflow: visible;\n    vertical-align: -0.125em;\n  }\n  \n  .node .label-icon path {\n    fill: currentColor;\n    stroke: revert;\n    stroke-width: revert;\n  }\n","getIconStyles")},98954:(ti,_r,B)=>{"use strict";B.d(_r,{IU:()=>vr,Jo:()=>Bt,T_:()=>Er,g0:()=>St,jP:()=>br});var lt=B(89204),ee=B(36384),L=B(87452),D=B(32239),Rt=B(19753),dt=B(59355),q=B(52052),A=B(79006),$t=B(32303),yt=B(40622),Ye=B(93654),bt=(0,$t.K2)((R,O,et,xt,it,rt)=>{O.arrowTypeStart&&j(R,"start",O.arrowTypeStart,et,xt,it,rt),O.arrowTypeEnd&&j(R,"end",O.arrowTypeEnd,et,xt,it,rt)},"addEdgeMarkers"),Xt={arrow_cross:{type:"cross",fill:!1},arrow_point:{type:"point",fill:!0},arrow_barb:{type:"barb",fill:!0},arrow_circle:{type:"circle",fill:!1},aggregation:{type:"aggregation",fill:!1},extension:{type:"extension",fill:!1},composition:{type:"composition",fill:!0},dependency:{type:"dependency",fill:!0},lollipop:{type:"lollipop",fill:!1},only_one:{type:"onlyOne",fill:!1},zero_or_one:{type:"zeroOrOne",fill:!1},one_or_more:{type:"oneOrMore",fill:!1},zero_or_more:{type:"zeroOrMore",fill:!1},requirement_arrow:{type:"requirement_arrow",fill:!1},requirement_contains:{type:"requirement_contains",fill:!1}},j=(0,$t.K2)((R,O,et,xt,it,rt,Et)=>{const ut=Xt[et];if(!ut)return void $t.Rm.warn(`Unknown arrow type: ${et}`);const st=`${it}_${rt}-${ut.type}${"start"===O?"Start":"End"}`;if(Et&&""!==Et.trim()){const Ot=`${st}_${Et.replace(/[^\dA-Za-z]/g,"_")}`;if(!document.getElementById(Ot)){const Jt=document.getElementById(st);if(Jt){const fe=Jt.cloneNode(!0);fe.id=Ot,fe.querySelectorAll("path, circle, line").forEach(Ze=>{Ze.setAttribute("stroke",Et),ut.fill&&Ze.setAttribute("fill",Et)}),Jt.parentNode?.appendChild(fe)}}R.attr(`marker-${O}`,`url(${xt}#${Ot})`)}else R.attr(`marker-${O}`,`url(${xt}#${st})`)},"addEdgeMarker"),fr=new Map,Fe=new Map,vr=(0,$t.K2)(()=>{fr.clear(),Fe.clear()},"clear"),zr=(0,$t.K2)(R=>R?R.reduce((et,xt)=>et+";"+xt,""):"","getLabelStyles"),br=(0,$t.K2)(function(){var R=(0,lt.A)(function*(O,et){let xt=(0,A._3)((0,A.D7)().flowchart.htmlLabels);const{labelStyles:it}=(0,Rt.GX)(et);et.labelStyle=it;const rt=yield(0,dt.GZ)(O,et.label,{style:et.labelStyle,useHtmlLabels:xt,addSvgBackground:!0,isNode:!1});$t.Rm.info("abc82",et,et.labelType);const Et=O.insert("g").attr("class","edgeLabel"),ut=Et.insert("g").attr("class","label").attr("data-id",et.id);ut.node().appendChild(rt);let G,It=rt.getBBox();if(xt){const st=rt.children[0],Ce=(0,yt.Ltv)(rt);It=st.getBoundingClientRect(),Ce.attr("width",It.width),Ce.attr("height",It.height)}if(ut.attr("transform","translate("+-It.width/2+", "+-It.height/2+")"),fr.set(et.id,Et),et.width=It.width,et.height=It.height,et.startLabelLeft){const st=yield(0,L.DA)(et.startLabelLeft,zr(et.labelStyle)),Ce=O.insert("g").attr("class","edgeTerminals"),Ot=Ce.insert("g").attr("class","inner");G=Ot.node().appendChild(st);const Jt=st.getBBox();Ot.attr("transform","translate("+-Jt.width/2+", "+-Jt.height/2+")"),Fe.get(et.id)||Fe.set(et.id,{}),Fe.get(et.id).startLeft=Ce,mr(G,et.startLabelLeft)}if(et.startLabelRight){const st=yield(0,L.DA)(et.startLabelRight,zr(et.labelStyle)),Ce=O.insert("g").attr("class","edgeTerminals"),Ot=Ce.insert("g").attr("class","inner");G=Ce.node().appendChild(st),Ot.node().appendChild(st);const Jt=st.getBBox();Ot.attr("transform","translate("+-Jt.width/2+", "+-Jt.height/2+")"),Fe.get(et.id)||Fe.set(et.id,{}),Fe.get(et.id).startRight=Ce,mr(G,et.startLabelRight)}if(et.endLabelLeft){const st=yield(0,L.DA)(et.endLabelLeft,zr(et.labelStyle)),Ce=O.insert("g").attr("class","edgeTerminals"),Ot=Ce.insert("g").attr("class","inner");G=Ot.node().appendChild(st);const Jt=st.getBBox();Ot.attr("transform","translate("+-Jt.width/2+", "+-Jt.height/2+")"),Ce.node().appendChild(st),Fe.get(et.id)||Fe.set(et.id,{}),Fe.get(et.id).endLeft=Ce,mr(G,et.endLabelLeft)}if(et.endLabelRight){const st=yield(0,L.DA)(et.endLabelRight,zr(et.labelStyle)),Ce=O.insert("g").attr("class","edgeTerminals"),Ot=Ce.insert("g").attr("class","inner");G=Ot.node().appendChild(st);const Jt=st.getBBox();Ot.attr("transform","translate("+-Jt.width/2+", "+-Jt.height/2+")"),Ce.node().appendChild(st),Fe.get(et.id)||Fe.set(et.id,{}),Fe.get(et.id).endRight=Ce,mr(G,et.endLabelRight)}return rt});return function(O,et){return R.apply(this,arguments)}}(),"insertEdgeLabel");function mr(R,O){(0,A.D7)().flowchart.htmlLabels&&R&&(R.style.width=9*O.length+"px",R.style.height="12px")}(0,$t.K2)(mr,"setTerminalWidth");var Er=(0,$t.K2)((R,O)=>{$t.Rm.debug("Moving label abc88 ",R.id,R.label,fr.get(R.id),O);let et=O.updatedPath?O.updatedPath:O.originalPath;const xt=(0,A.D7)(),{subGraphTitleTotalMargin:it}=(0,D.O)(xt);if(R.label){const rt=fr.get(R.id);let Et=R.x,ut=R.y;if(et){const It=q._K.calcLabelPosition(et);$t.Rm.debug("Moving label "+R.label+" from (",Et,",",ut,") to (",It.x,",",It.y,") abc88"),O.updatedPath&&(Et=It.x,ut=It.y)}rt.attr("transform",`translate(${Et}, ${ut+it/2})`)}if(R.startLabelLeft){const rt=Fe.get(R.id).startLeft;let Et=R.x,ut=R.y;if(et){const It=q._K.calcTerminalLabelPosition(R.arrowTypeStart?10:0,"start_left",et);Et=It.x,ut=It.y}rt.attr("transform",`translate(${Et}, ${ut})`)}if(R.startLabelRight){const rt=Fe.get(R.id).startRight;let Et=R.x,ut=R.y;if(et){const It=q._K.calcTerminalLabelPosition(R.arrowTypeStart?10:0,"start_right",et);Et=It.x,ut=It.y}rt.attr("transform",`translate(${Et}, ${ut})`)}if(R.endLabelLeft){const rt=Fe.get(R.id).endLeft;let Et=R.x,ut=R.y;if(et){const It=q._K.calcTerminalLabelPosition(R.arrowTypeEnd?10:0,"end_left",et);Et=It.x,ut=It.y}rt.attr("transform",`translate(${Et}, ${ut})`)}if(R.endLabelRight){const rt=Fe.get(R.id).endRight;let Et=R.x,ut=R.y;if(et){const It=q._K.calcTerminalLabelPosition(R.arrowTypeEnd?10:0,"end_right",et);Et=It.x,ut=It.y}rt.attr("transform",`translate(${Et}, ${ut})`)}},"positionEdgeLabel"),Lr=(0,$t.K2)((R,O)=>{const xt=R.y,it=Math.abs(O.x-R.x),rt=Math.abs(O.y-xt);return it>=R.width/2||rt>=R.height/2},"outsideNode"),Ar=(0,$t.K2)((R,O,et)=>{$t.Rm.debug(`intersection calc abc89:\n  outsidePoint: ${JSON.stringify(O)}\n  insidePoint : ${JSON.stringify(et)}\n  node        : x:${R.x} y:${R.y} w:${R.width} h:${R.height}`);const xt=R.x,it=R.y,rt=Math.abs(xt-et.x),Et=R.width/2;let ut=et.x<O.x?Et-rt:Et+rt;const It=R.height/2,G=Math.abs(O.y-et.y),st=Math.abs(O.x-et.x);if(Math.abs(it-O.y)*Et>Math.abs(xt-O.x)*It){let Ce=et.y<O.y?O.y-It-it:it-It-O.y;ut=st*Ce/G;const Ot={x:et.x<O.x?et.x+ut:et.x-st+ut,y:et.y<O.y?et.y+G-Ce:et.y-G+Ce};return 0===ut&&(Ot.x=O.x,Ot.y=O.y),0===st&&(Ot.x=O.x),0===G&&(Ot.y=O.y),$t.Rm.debug(`abc89 top/bottom calc, Q ${G}, q ${Ce}, R ${st}, r ${ut}`,Ot),Ot}{ut=et.x<O.x?O.x-Et-xt:xt-Et-O.x;let Ce=G*ut/st,Ot=et.x<O.x?et.x+st-ut:et.x-st+ut,Jt=et.y<O.y?et.y+Ce:et.y-Ce;return $t.Rm.debug(`sides calc abc89, Q ${G}, q ${Ce}, R ${st}, r ${ut}`,{_x:Ot,_y:Jt}),0===ut&&(Ot=O.x,Jt=O.y),0===st&&(Ot=O.x),0===G&&(Jt=O.y),{x:Ot,y:Jt}}},"intersection"),ge=(0,$t.K2)((R,O)=>{$t.Rm.warn("abc88 cutPathAtIntersect",R,O);let et=[],xt=R[0],it=!1;return R.forEach(rt=>{if($t.Rm.info("abc88 checking point",rt,O),Lr(O,rt)||it)$t.Rm.warn("abc88 outside",rt,xt),xt=rt,it||et.push(rt);else{const Et=Ar(O,xt,rt);$t.Rm.debug("abc88 inside",rt,xt,Et),$t.Rm.debug("abc88 intersection",Et,O);let ut=!1;et.forEach(It=>{ut=ut||It.x===Et.x&&It.y===Et.y}),et.some(It=>It.x===Et.x&&It.y===Et.y)?$t.Rm.warn("abc88 no intersect",Et,et):et.push(Et),it=!0}}),$t.Rm.debug("returning points",et),et},"cutPathAtIntersect");function Br(R){const O=[],et=[];for(let xt=1;xt<R.length-1;xt++){const it=R[xt-1],rt=R[xt],Et=R[xt+1];(it.x===rt.x&&rt.y===Et.y&&Math.abs(rt.x-Et.x)>5&&Math.abs(rt.y-it.y)>5||it.y===rt.y&&rt.x===Et.x&&Math.abs(rt.x-it.x)>5&&Math.abs(rt.y-Et.y)>5)&&(O.push(rt),et.push(xt))}return{cornerPoints:O,cornerPointPositions:et}}(0,$t.K2)(Br,"extractCornerPoints");var Ge=(0,$t.K2)(function(R,O,et){const xt=O.x-R.x,it=O.y-R.y,Et=et/Math.sqrt(xt*xt+it*it);return{x:O.x-Et*xt,y:O.y-Et*it}},"findAdjacentPoint"),W=(0,$t.K2)(function(R){const{cornerPointPositions:O}=Br(R),et=[];for(let xt=0;xt<R.length;xt++)if(O.includes(xt)){const it=R[xt-1],rt=R[xt+1],Et=R[xt],ut=Ge(it,Et,5),It=Ge(rt,Et,5),G=It.x-ut.x,st=It.y-ut.y;et.push(ut);const Ce=2*Math.sqrt(2);let Ot={x:Et.x,y:Et.y};if(Math.abs(rt.x-it.x)>10&&Math.abs(rt.y-it.y)>=10){$t.Rm.debug("Corner point fixing",Math.abs(rt.x-it.x),Math.abs(rt.y-it.y));const Jt=5;Ot=Et.x===ut.x?{x:G<0?ut.x-Jt+Ce:ut.x+Jt-Ce,y:st<0?ut.y-Ce:ut.y+Ce}:{x:G<0?ut.x-Ce:ut.x+Ce,y:st<0?ut.y-Jt+Ce:ut.y+Jt-Ce}}else $t.Rm.debug("Corner point skipping fixing",Math.abs(rt.x-it.x),Math.abs(rt.y-it.y));et.push(Ot,It)}else et.push(R[xt]);return et},"fixCorners"),ft=(0,$t.K2)((R,O,et)=>{const ut=Math.floor((R-O-et)/4);return`0 ${O} ${Array(ut).fill("2 2").join(" ")} ${et}`},"generateDashArray"),Bt=(0,$t.K2)(function(R,O,et,xt,it,rt,Et,ut=!1){const{handDrawnSeed:It}=(0,A.D7)();let G=O.points,st=!1;const Ce=it;var Ot=rt;const Jt=[];for(const Ee in O.cssCompiledStyles)(0,Rt.KX)(Ee)||Jt.push(O.cssCompiledStyles[Ee]);$t.Rm.debug("UIO intersect check",O.points,Ot.x,Ce.x),Ot.intersect&&Ce.intersect&&!ut&&(G=G.slice(1,O.points.length-1),G.unshift(Ce.intersect(G[0])),$t.Rm.debug("Last point UIO",O.start,"--\x3e",O.end,G[G.length-1],Ot,Ot.intersect(G[G.length-1])),G.push(Ot.intersect(G[G.length-1])));const fe=btoa(JSON.stringify(G));O.toCluster&&($t.Rm.info("to cluster abc88",et.get(O.toCluster)),G=ge(O.points,et.get(O.toCluster).node),st=!0),O.fromCluster&&($t.Rm.debug("from cluster abc88",et.get(O.fromCluster),JSON.stringify(G,null,2)),G=ge(G.reverse(),et.get(O.fromCluster).node).reverse(),st=!0);let Be=G.filter(Ee=>!Number.isNaN(Ee.y));Be=W(Be);let Ze=yt.qrM;switch(Ze=yt.lUB,O.curve){case"linear":Ze=yt.lUB;break;case"basis":default:Ze=yt.qrM;break;case"cardinal":Ze=yt.y8u;break;case"bumpX":Ze=yt.Wi0;break;case"bumpY":Ze=yt.PGM;break;case"catmullRom":Ze=yt.oDi;break;case"monotoneX":Ze=yt.nVG;break;case"monotoneY":Ze=yt.uxU;break;case"natural":Ze=yt.Xf2;break;case"step":Ze=yt.GZz;break;case"stepAfter":Ze=yt.UPb;break;case"stepBefore":Ze=yt.dyv}const{x:ye,y:kr}=(0,ee.RI)(O),ur=(0,yt.n8j)().x(ye).y(kr).curve(Ze);let Kt;switch(O.thickness){case"normal":default:Kt="edge-thickness-normal";break;case"thick":Kt="edge-thickness-thick";break;case"invisible":Kt="edge-thickness-invisible"}switch(O.pattern){case"solid":default:Kt+=" edge-pattern-solid";break;case"dotted":Kt+=" edge-pattern-dotted";break;case"dashed":Kt+=" edge-pattern-dashed"}let Pe,ir="rounded"===O.curve?_e(ae(Be,O),5):ur(Be);const me=Array.isArray(O.style)?O.style:[O.style];let ce=me.find(Ee=>Ee?.startsWith("stroke:")),ke=!1;if("handDrawn"===O.look){const Ee=Ye.A.svg(R);Object.assign([],Be);const qr=Ee.path(ir,{roughness:.3,seed:It});Kt+=" transition",Pe=(0,yt.Ltv)(qr).select("path").attr("id",O.id).attr("class"," "+Kt+(O.classes?" "+O.classes:"")).attr("style",me?me.reduce((te,ne)=>te+";"+ne,""):"");let nr=Pe.attr("d");Pe.attr("d",nr),R.node().appendChild(Pe.node())}else{const Ee=Jt.join(";"),qr=me?me.reduce((y,E)=>y+E+";",""):"";let nr="";O.animate&&(nr=" edge-animation-fast"),O.animation&&(nr=" edge-animation-"+O.animation);const te=(Ee?Ee+";"+qr+";":qr)+";"+(me?me.reduce((y,E)=>y+";"+E,""):"");Pe=R.append("path").attr("d",ir).attr("id",O.id).attr("class"," "+Kt+(O.classes?" "+O.classes:"")+(nr??"")).attr("style",te),ce=te.match(/stroke:([^;]+)/)?.[1],ke=!0===O.animate||!!O.animation||Ee.includes("animation");const ne=Pe.node(),Le="function"==typeof ne.getTotalLength?ne.getTotalLength():0,tr=ee.Nq[O.arrowTypeStart]||0,g=ee.Nq[O.arrowTypeEnd]||0;if("neo"===O.look&&!ke){const E=`stroke-dasharray: ${"dotted"===O.pattern||"dashed"===O.pattern?ft(Le,tr,g):`0 ${tr} ${Le-tr-g} ${g}`}; stroke-dashoffset: 0;`;Pe.attr("style",E+Pe.attr("style"))}}Pe.attr("data-edge",!0),Pe.attr("data-et","edge"),Pe.attr("data-id",O.id),Pe.attr("data-points",fe),O.showPoints&&Be.forEach(Ee=>{R.append("circle").style("stroke","red").style("fill","red").attr("r",1).attr("cx",Ee.x).attr("cy",Ee.y)});let Te="";((0,A.D7)().flowchart.arrowMarkerAbsolute||(0,A.D7)().state.arrowMarkerAbsolute)&&(Te=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,Te=Te.replace(/\(/g,"\\(").replace(/\)/g,"\\)")),$t.Rm.info("arrowTypeStart",O.arrowTypeStart),$t.Rm.info("arrowTypeEnd",O.arrowTypeEnd),bt(Pe,O,Te,Et,xt,ce);const er=Math.floor(G.length/2);q._K.isLabelCoordinateInPath(G[er],Pe.attr("d"))||(st=!0);let Ir={};return st&&(Ir.updatedPath=G),Ir.originalPath=O.points,Ir},"insertEdge");function _e(R,O){if(R.length<2)return"";let et="";const xt=R.length,it=1e-5;for(let rt=0;rt<xt;rt++){const Et=R[rt],ut=R[rt-1],It=R[rt+1];if(0===rt)et+=`M${Et.x},${Et.y}`;else if(rt===xt-1)et+=`L${Et.x},${Et.y}`;else{const G=Et.x-ut.x,st=Et.y-ut.y,Ce=It.x-Et.x,Ot=It.y-Et.y,Jt=Math.hypot(G,st),fe=Math.hypot(Ce,Ot);if(Jt<it||fe<it){et+=`L${Et.x},${Et.y}`;continue}const Be=G/Jt,Ze=st/Jt,ye=Ce/fe,kr=Ot/fe,Kt=Math.max(-1,Math.min(1,Be*ye+Ze*kr)),Pe=Math.acos(Kt);if(Pe<it||Math.abs(Math.PI-Pe)<it){et+=`L${Et.x},${Et.y}`;continue}const ir=Math.min(O/Math.sin(Pe/2),Jt/2,fe/2);et+=`L${Et.x-Be*ir},${Et.y-Ze*ir}`,et+=`Q${Et.x},${Et.y} ${Et.x+ye*ir},${Et.y+kr*ir}`}}return et}function Z(R,O){if(!R||!O)return{angle:0,deltaX:0,deltaY:0};const et=O.x-R.x,xt=O.y-R.y;return{angle:Math.atan2(xt,et),deltaX:et,deltaY:xt}}function ae(R,O){const et=R.map(it=>({...it}));if(R.length>=2&&ee.hq[O.arrowTypeStart]){const it=ee.hq[O.arrowTypeStart],rt=R[0],Et=R[1],{angle:ut}=Z(rt,Et),It=it*Math.cos(ut),G=it*Math.sin(ut);et[0].x=rt.x+It,et[0].y=rt.y+G}const xt=R.length;if(xt>=2&&ee.hq[O.arrowTypeEnd]){const it=ee.hq[O.arrowTypeEnd],rt=R[xt-1],Et=R[xt-2],{angle:ut}=Z(Et,rt),It=it*Math.cos(ut),G=it*Math.sin(ut);et[xt-1].x=rt.x-It,et[xt-1].y=rt.y-G}return et}(0,$t.K2)(_e,"generateRoundedPath"),(0,$t.K2)(Z,"calculateDeltaAndAngle"),(0,$t.K2)(ae,"applyMarkerOffsetsToPoints");var S=(0,$t.K2)((R,O,et,xt)=>{O.forEach(it=>{Ct[it](R,et,xt)})},"insertMarkers"),Ct={extension:(0,$t.K2)((R,O,et)=>{$t.Rm.trace("Making markers for ",et),R.append("defs").append("marker").attr("id",et+"_"+O+"-extensionStart").attr("class","marker extension "+O).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 1,7 L18,13 V 1 Z"),R.append("defs").append("marker").attr("id",et+"_"+O+"-extensionEnd").attr("class","marker extension "+O).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 1,1 V 13 L18,7 Z")},"extension"),composition:(0,$t.K2)((R,O,et)=>{R.append("defs").append("marker").attr("id",et+"_"+O+"-compositionStart").attr("class","marker composition "+O).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),R.append("defs").append("marker").attr("id",et+"_"+O+"-compositionEnd").attr("class","marker composition "+O).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")},"composition"),aggregation:(0,$t.K2)((R,O,et)=>{R.append("defs").append("marker").attr("id",et+"_"+O+"-aggregationStart").attr("class","marker aggregation "+O).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),R.append("defs").append("marker").attr("id",et+"_"+O+"-aggregationEnd").attr("class","marker aggregation "+O).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")},"aggregation"),dependency:(0,$t.K2)((R,O,et)=>{R.append("defs").append("marker").attr("id",et+"_"+O+"-dependencyStart").attr("class","marker dependency "+O).attr("refX",6).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 5,7 L9,13 L1,7 L9,1 Z"),R.append("defs").append("marker").attr("id",et+"_"+O+"-dependencyEnd").attr("class","marker dependency "+O).attr("refX",13).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")},"dependency"),lollipop:(0,$t.K2)((R,O,et)=>{R.append("defs").append("marker").attr("id",et+"_"+O+"-lollipopStart").attr("class","marker lollipop "+O).attr("refX",13).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("circle").attr("stroke","black").attr("fill","transparent").attr("cx",7).attr("cy",7).attr("r",6),R.append("defs").append("marker").attr("id",et+"_"+O+"-lollipopEnd").attr("class","marker lollipop "+O).attr("refX",1).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("circle").attr("stroke","black").attr("fill","transparent").attr("cx",7).attr("cy",7).attr("r",6)},"lollipop"),point:(0,$t.K2)((R,O,et)=>{R.append("marker").attr("id",et+"_"+O+"-pointEnd").attr("class","marker "+O).attr("viewBox","0 0 10 10").attr("refX",5).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",8).attr("markerHeight",8).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),R.append("marker").attr("id",et+"_"+O+"-pointStart").attr("class","marker "+O).attr("viewBox","0 0 10 10").attr("refX",4.5).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",8).attr("markerHeight",8).attr("orient","auto").append("path").attr("d","M 0 5 L 10 10 L 10 0 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")},"point"),circle:(0,$t.K2)((R,O,et)=>{R.append("marker").attr("id",et+"_"+O+"-circleEnd").attr("class","marker "+O).attr("viewBox","0 0 10 10").attr("refX",11).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),R.append("marker").attr("id",et+"_"+O+"-circleStart").attr("class","marker "+O).attr("viewBox","0 0 10 10").attr("refX",-1).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")},"circle"),cross:(0,$t.K2)((R,O,et)=>{R.append("marker").attr("id",et+"_"+O+"-crossEnd").attr("class","marker cross "+O).attr("viewBox","0 0 11 11").attr("refX",12).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0"),R.append("marker").attr("id",et+"_"+O+"-crossStart").attr("class","marker cross "+O).attr("viewBox","0 0 11 11").attr("refX",-1).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0")},"cross"),barb:(0,$t.K2)((R,O,et)=>{R.append("defs").append("marker").attr("id",et+"_"+O+"-barbEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",14).attr("markerUnits","userSpaceOnUse").attr("orient","auto").append("path").attr("d","M 19,7 L9,13 L14,7 L9,1 Z")},"barb"),only_one:(0,$t.K2)((R,O,et)=>{R.append("defs").append("marker").attr("id",et+"_"+O+"-onlyOneStart").attr("class","marker onlyOne "+O).attr("refX",0).attr("refY",9).attr("markerWidth",18).attr("markerHeight",18).attr("orient","auto").append("path").attr("d","M9,0 L9,18 M15,0 L15,18"),R.append("defs").append("marker").attr("id",et+"_"+O+"-onlyOneEnd").attr("class","marker onlyOne "+O).attr("refX",18).attr("refY",9).attr("markerWidth",18).attr("markerHeight",18).attr("orient","auto").append("path").attr("d","M3,0 L3,18 M9,0 L9,18")},"only_one"),zero_or_one:(0,$t.K2)((R,O,et)=>{const xt=R.append("defs").append("marker").attr("id",et+"_"+O+"-zeroOrOneStart").attr("class","marker zeroOrOne "+O).attr("refX",0).attr("refY",9).attr("markerWidth",30).attr("markerHeight",18).attr("orient","auto");xt.append("circle").attr("fill","white").attr("cx",21).attr("cy",9).attr("r",6),xt.append("path").attr("d","M9,0 L9,18");const it=R.append("defs").append("marker").attr("id",et+"_"+O+"-zeroOrOneEnd").attr("class","marker zeroOrOne "+O).attr("refX",30).attr("refY",9).attr("markerWidth",30).attr("markerHeight",18).attr("orient","auto");it.append("circle").attr("fill","white").attr("cx",9).attr("cy",9).attr("r",6),it.append("path").attr("d","M21,0 L21,18")},"zero_or_one"),one_or_more:(0,$t.K2)((R,O,et)=>{R.append("defs").append("marker").attr("id",et+"_"+O+"-oneOrMoreStart").attr("class","marker oneOrMore "+O).attr("refX",18).attr("refY",18).attr("markerWidth",45).attr("markerHeight",36).attr("orient","auto").append("path").attr("d","M0,18 Q 18,0 36,18 Q 18,36 0,18 M42,9 L42,27"),R.append("defs").append("marker").attr("id",et+"_"+O+"-oneOrMoreEnd").attr("class","marker oneOrMore "+O).attr("refX",27).attr("refY",18).attr("markerWidth",45).attr("markerHeight",36).attr("orient","auto").append("path").attr("d","M3,9 L3,27 M9,18 Q27,0 45,18 Q27,36 9,18")},"one_or_more"),zero_or_more:(0,$t.K2)((R,O,et)=>{const xt=R.append("defs").append("marker").attr("id",et+"_"+O+"-zeroOrMoreStart").attr("class","marker zeroOrMore "+O).attr("refX",18).attr("refY",18).attr("markerWidth",57).attr("markerHeight",36).attr("orient","auto");xt.append("circle").attr("fill","white").attr("cx",48).attr("cy",18).attr("r",6),xt.append("path").attr("d","M0,18 Q18,0 36,18 Q18,36 0,18");const it=R.append("defs").append("marker").attr("id",et+"_"+O+"-zeroOrMoreEnd").attr("class","marker zeroOrMore "+O).attr("refX",39).attr("refY",18).attr("markerWidth",57).attr("markerHeight",36).attr("orient","auto");it.append("circle").attr("fill","white").attr("cx",9).attr("cy",18).attr("r",6),it.append("path").attr("d","M21,18 Q39,0 57,18 Q39,36 21,18")},"zero_or_more"),requirement_arrow:(0,$t.K2)((R,O,et)=>{R.append("defs").append("marker").attr("id",et+"_"+O+"-requirement_arrowEnd").attr("refX",20).attr("refY",10).attr("markerWidth",20).attr("markerHeight",20).attr("orient","auto").append("path").attr("d","M0,0\n      L20,10\n      M20,10\n      L0,20")},"requirement_arrow"),requirement_contains:(0,$t.K2)((R,O,et)=>{const xt=R.append("defs").append("marker").attr("id",et+"_"+O+"-requirement_containsStart").attr("refX",0).attr("refY",10).attr("markerWidth",20).attr("markerHeight",20).attr("orient","auto").append("g");xt.append("circle").attr("cx",10).attr("cy",10).attr("r",9).attr("fill","none"),xt.append("line").attr("x1",1).attr("x2",19).attr("y1",10).attr("y2",10),xt.append("line").attr("y1",1).attr("y2",19).attr("x1",10).attr("x2",10)},"requirement_contains")},St=S}}]);
//# sourceMappingURL=mermaid-vendor.29d998543da66396.js.map