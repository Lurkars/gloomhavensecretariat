"use strict";(self.webpackChunkgloomhavensecretariat=self.webpackChunkgloomhavensecretariat||[]).push([[259],{259:(pe,A,s)=>{s.r(A),s.d(A,{diagram:()=>ae});var U=s(9204),B=s(5767),y=s(5595),b=s(1113),t=s(4110),F=s(2233),u=s(3172),$=t.UI.pie,m={sections:new Map,showData:!1,config:$},h=m.sections,f=m.showData,G=structuredClone($),N=(0,t.K2)(()=>structuredClone(G),"getConfig"),z=(0,t.K2)(()=>{h=new Map,f=m.showData,(0,t.IU)()},"clear"),j=(0,t.K2)(({label:e,value:r})=>{if(r<0)throw new Error(`"${e}" has invalid value: ${r}. Negative values are not allowed in pie charts. All slice values must be >= 0.`);h.has(e)||(h.set(e,r),t.Rm.debug(`added new section: ${e}, with value: ${r}`))},"addSection"),w={getConfig:N,clear:z,setDiagramTitle:t.ke,getDiagramTitle:t.ab,setAccTitle:t.SV,getAccTitle:t.iN,setAccDescription:t.EI,getAccDescription:t.m7,addSection:j,getSections:(0,t.K2)(()=>h,"getSections"),setShowData:(0,t.K2)(e=>{f=e},"setShowData"),getShowData:(0,t.K2)(()=>f,"getShowData")},Y=(0,t.K2)((e,r)=>{(0,B.S)(e,r),r.setShowData(e.showData),e.sections.map(r.addSection)},"populateDb"),Z={parse:(0,t.K2)(function(){var e=(0,U.A)(function*(r){const p=yield(0,F.qg)("pie",r);t.Rm.debug(p),Y(p,w)});return function(r){return e.apply(this,arguments)}}(),"parse")},Q=(0,t.K2)(e=>`\n  .pieCircle{\n    stroke: ${e.pieStrokeColor};\n    stroke-width : ${e.pieStrokeWidth};\n    opacity : ${e.pieOpacity};\n  }\n  .pieOuterCircle{\n    stroke: ${e.pieOuterStrokeColor};\n    stroke-width: ${e.pieOuterStrokeWidth};\n    fill: none;\n  }\n  .pieTitleText {\n    text-anchor: middle;\n    font-size: ${e.pieTitleTextSize};\n    fill: ${e.pieTitleTextColor};\n    font-family: ${e.fontFamily};\n  }\n  .slice {\n    font-family: ${e.fontFamily};\n    fill: ${e.pieSectionTextColor};\n    font-size:${e.pieSectionTextSize};\n    // fill: white;\n  }\n  .legend text {\n    fill: ${e.pieLegendTextColor};\n    font-family: ${e.fontFamily};\n    font-size: ${e.pieLegendTextSize};\n  }\n`,"getStyles"),q=(0,t.K2)(e=>{const r=[...e.values()].reduce((i,l)=>i+l,0),p=[...e.entries()].map(([i,l])=>({label:i,value:l})).filter(i=>i.value/r*100>=1).sort((i,l)=>l.value-i.value);return(0,u.rLf)().value(i=>i.value)(p)},"createPieArcs"),ae={parser:Z,db:w,renderer:{draw:(0,t.K2)((e,r,p,M)=>{t.Rm.debug("rendering pie chart\n"+e);const i=M.db,l=(0,t.D7)(),P=(0,y.$t)(i.getConfig(),l.pie),D=(0,b.D)(r),d=D.append("g");d.attr("transform","translate(225,225)");const{themeVariables:n}=l;let[I]=(0,y.I5)(n.pieOuterStrokeWidth);I??=2;const K=P.textPosition,_=Math.min(450,450)/2-40,re=(0,u.JLW)().innerRadius(0).outerRadius(_),ie=(0,u.JLW)().innerRadius(_*K).outerRadius(_*K);d.append("circle").attr("cx",0).attr("cy",0).attr("r",_+I/2).attr("class","pieOuterCircle");const E=i.getSections(),ne=q(E),se=[n.pie1,n.pie2,n.pie3,n.pie4,n.pie5,n.pie6,n.pie7,n.pie8,n.pie9,n.pie10,n.pie11,n.pie12];let S=0;E.forEach(a=>{S+=a});const L=ne.filter(a=>"0"!==(a.data.value/S*100).toFixed(0)),C=(0,u.UMr)(se);d.selectAll("mySlices").data(L).enter().append("path").attr("d",re).attr("fill",a=>C(a.data.label)).attr("class","pieCircle"),d.selectAll("mySlices").data(L).enter().append("text").text(a=>(a.data.value/S*100).toFixed(0)+"%").attr("transform",a=>"translate("+ie.centroid(a)+")").style("text-anchor","middle").attr("class","slice"),d.append("text").text(i.getDiagramTitle()).attr("x",0).attr("y",-200).attr("class","pieTitleText");const W=[...E.entries()].map(([a,x])=>({label:a,value:x})),T=d.selectAll(".legend").data(W).enter().append("g").attr("class","legend").attr("transform",(a,x)=>"translate(216,"+(22*x-22*W.length/2)+")");T.append("rect").attr("width",18).attr("height",18).style("fill",a=>C(a.label)).style("stroke",a=>C(a.label)),T.append("text").attr("x",22).attr("y",14).text(a=>i.getShowData()?`${a.label} [${a.value}]`:a.label);const R=512+Math.max(...T.selectAll("text").nodes().map(a=>a?.getBoundingClientRect().width??0));D.attr("viewBox",`0 0 ${R} 450`),(0,t.a$)(D,450,R,P.useMaxWidth)},"draw")},styles:Q}}}]);
//# sourceMappingURL=259.31d2047b8f1b4c76.js.map