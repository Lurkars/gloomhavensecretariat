(self.webpackChunkgloomhavensecretariat=self.webpackChunkgloomhavensecretariat||[]).push([[617],{867:function(kt,ct,At){var S;kt.exports=(S=At(4329),(()=>{"use strict";var E={658:s=>{s.exports=null!=Object.assign?Object.assign.bind(Object):function(c){for(var e=arguments.length,v=Array(e>1?e-1:0),t=1;t<e;t++)v[t-1]=arguments[t];return v.forEach(function(r){Object.keys(r).forEach(function(h){return c[h]=r[h]})}),c}},548:(s,c,e)=>{var v=function(){return function(g,u){if(Array.isArray(g))return g;if(Symbol.iterator in Object(g))return function h(g,u){var T=[],f=!0,A=!1,N=void 0;try{for(var D,L=g[Symbol.iterator]();!(f=(D=L.next()).done)&&(T.push(D.value),!u||T.length!==u);f=!0);}catch(q){A=!0,N=q}finally{try{!f&&L.return&&L.return()}finally{if(A)throw N}}return T}(g,u);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),t=e(140).layoutBase.LinkedList;s.exports={getTopMostNodes:function(h){for(var g={},u=0;u<h.length;u++)g[h[u].id()]=!0;return h.filter(function(f,A){"number"==typeof f&&(f=A);for(var N=f.parent()[0];null!=N;){if(g[N.id()])return!1;N=N.parent()[0]}return!0})},connectComponents:function(h,g,u,T){var f=new t,A=new Set,N=[],L=void 0,D=void 0,q=void 0,I=!1,it=1,pt=[],lt=[],wt=function(){var k=h.collection();lt.push(k);var i=u[0],m=h.collection();m.merge(i).merge(i.descendants().intersection(g)),N.push(i),m.forEach(function(d){f.push(d),A.add(d),k.merge(d)});for(var l=function(){i=f.shift();var R=h.collection();i.neighborhood().nodes().forEach(function(F){g.intersection(i.edgesWith(F)).length>0&&R.merge(F)});for(var w=0;w<R.length;w++){var X=R[w];null==(L=u.intersection(X.union(X.ancestors())))||A.has(L[0])||L.union(L.descendants()).forEach(function(F){f.push(F),A.add(F),k.merge(F),u.has(F)&&N.push(F)})}};0!=f.length;)l();if(k.forEach(function(d){g.intersection(d.connectedEdges()).forEach(function(R){k.has(R.source())&&k.has(R.target())&&k.merge(R)})}),N.length==u.length&&(I=!0),!I||I&&it>1){q=(D=N[0]).connectedEdges().length,N.forEach(function(d){d.connectedEdges().length<q&&(q=d.connectedEdges().length,D=d)}),pt.push(D.id());var p=h.collection();p.merge(N[0]),N.forEach(function(d){p.merge(d)}),N=[],u=u.difference(p),it++}};do{wt()}while(!I);return T&&pt.length>0&&T.set("dummy"+(T.size+1),pt),lt},relocateComponent:function(h,g,u){if(!u.fixedNodeConstraint){var T=Number.POSITIVE_INFINITY,f=Number.NEGATIVE_INFINITY,A=Number.POSITIVE_INFINITY,N=Number.NEGATIVE_INFINITY;if("draft"==u.quality){var L=!0,D=!1,q=void 0;try{for(var it,I=g.nodeIndexes[Symbol.iterator]();!(L=(it=I.next()).done);L=!0){var lt=v(it.value,2),G=lt[1],k=u.cy.getElementById(lt[0]);if(k){var i=k.boundingBox(),m=g.xCoords[G]-i.w/2,l=g.xCoords[G]+i.w/2,p=g.yCoords[G]-i.h/2,d=g.yCoords[G]+i.h/2;m<T&&(T=m),l>f&&(f=l),p<A&&(A=p),d>N&&(N=d)}}}catch(F){D=!0,q=F}finally{try{!L&&I.return&&I.return()}finally{if(D)throw q}}var R=h.x-(f+T)/2,w=h.y-(N+A)/2;g.xCoords=g.xCoords.map(function(F){return F+R}),g.yCoords=g.yCoords.map(function(F){return F+w})}else{Object.keys(g).forEach(function(F){var Q=g[F],st=Q.getRect().x,V=Q.getRect().x+Q.getRect().width,ht=Q.getRect().y,J=Q.getRect().y+Q.getRect().height;st<T&&(T=st),V>f&&(f=V),ht<A&&(A=ht),J>N&&(N=J)});var X=h.x-(f+T)/2,U=h.y-(N+A)/2;Object.keys(g).forEach(function(F){var Q=g[F];Q.setCenter(Q.getCenterX()+X,Q.getCenterY()+U)})}}},calcBoundingBox:function(h,g,u,T){for(var f=Number.MAX_SAFE_INTEGER,A=Number.MIN_SAFE_INTEGER,N=Number.MAX_SAFE_INTEGER,L=Number.MIN_SAFE_INTEGER,D=void 0,q=void 0,I=void 0,it=void 0,pt=h.descendants().not(":parent"),lt=pt.length,wt=0;wt<lt;wt++){var G=pt[wt];f>(D=g[T.get(G.id())]-G.width()/2)&&(f=D),A<(q=g[T.get(G.id())]+G.width()/2)&&(A=q),N>(I=u[T.get(G.id())]-G.height()/2)&&(N=I),L<(it=u[T.get(G.id())]+G.height()/2)&&(L=it)}var k={};return k.topLeftX=f,k.topLeftY=N,k.width=A-f,k.height=L-N,k},calcParentsWithoutChildren:function(h,g){var u=h.collection();return g.nodes(":parent").forEach(function(T){var f=!1;T.children().forEach(function(A){"none"!=A.css("display")&&(f=!0)}),f||u.merge(T)}),u}}},816:(s,c,e)=>{var v=e(548),t=e(140).CoSELayout,r=e(140).CoSENode,h=e(140).layoutBase.PointD,g=e(140).layoutBase.DimensionD,u=e(140).layoutBase.LayoutConstants,T=e(140).layoutBase.FDLayoutConstants,f=e(140).CoSEConstants;s.exports={coseLayout:function(L,D){var q=L.cy,I=L.eles,it=I.nodes(),pt=I.edges(),lt=void 0,wt=void 0,G=void 0,k={};L.randomize&&(lt=D.nodeIndexes,wt=D.xCoords,G=D.yCoords);var i=function(F){return"function"==typeof F},m=function(F,Q){return i(F)?F(Q):F},l=v.calcParentsWithoutChildren(q,I);null!=L.nestingFactor&&(f.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=T.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=L.nestingFactor),null!=L.gravity&&(f.DEFAULT_GRAVITY_STRENGTH=T.DEFAULT_GRAVITY_STRENGTH=L.gravity),null!=L.numIter&&(f.MAX_ITERATIONS=T.MAX_ITERATIONS=L.numIter),null!=L.gravityRange&&(f.DEFAULT_GRAVITY_RANGE_FACTOR=T.DEFAULT_GRAVITY_RANGE_FACTOR=L.gravityRange),null!=L.gravityCompound&&(f.DEFAULT_COMPOUND_GRAVITY_STRENGTH=T.DEFAULT_COMPOUND_GRAVITY_STRENGTH=L.gravityCompound),null!=L.gravityRangeCompound&&(f.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=T.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=L.gravityRangeCompound),null!=L.initialEnergyOnIncremental&&(f.DEFAULT_COOLING_FACTOR_INCREMENTAL=T.DEFAULT_COOLING_FACTOR_INCREMENTAL=L.initialEnergyOnIncremental),null!=L.tilingCompareBy&&(f.TILING_COMPARE_BY=L.tilingCompareBy),u.QUALITY="proof"==L.quality?2:0,f.NODE_DIMENSIONS_INCLUDE_LABELS=T.NODE_DIMENSIONS_INCLUDE_LABELS=u.NODE_DIMENSIONS_INCLUDE_LABELS=L.nodeDimensionsIncludeLabels,f.DEFAULT_INCREMENTAL=T.DEFAULT_INCREMENTAL=u.DEFAULT_INCREMENTAL=!L.randomize,f.ANIMATE=T.ANIMATE=u.ANIMATE=L.animate,f.TILE=L.tile,f.TILING_PADDING_VERTICAL="function"==typeof L.tilingPaddingVertical?L.tilingPaddingVertical.call():L.tilingPaddingVertical,f.TILING_PADDING_HORIZONTAL="function"==typeof L.tilingPaddingHorizontal?L.tilingPaddingHorizontal.call():L.tilingPaddingHorizontal,f.DEFAULT_INCREMENTAL=T.DEFAULT_INCREMENTAL=u.DEFAULT_INCREMENTAL=!0,f.PURE_INCREMENTAL=!L.randomize,u.DEFAULT_UNIFORM_LEAF_NODE_SIZES=L.uniformNodeDimensions,"transformed"==L.step&&(f.TRANSFORM_ON_CONSTRAINT_HANDLING=!0,f.ENFORCE_CONSTRAINTS=!1,f.APPLY_LAYOUT=!1),"enforced"==L.step&&(f.TRANSFORM_ON_CONSTRAINT_HANDLING=!1,f.ENFORCE_CONSTRAINTS=!0,f.APPLY_LAYOUT=!1),"cose"==L.step&&(f.TRANSFORM_ON_CONSTRAINT_HANDLING=!1,f.ENFORCE_CONSTRAINTS=!1,f.APPLY_LAYOUT=!0),"all"==L.step&&(f.TRANSFORM_ON_CONSTRAINT_HANDLING=!!L.randomize,f.ENFORCE_CONSTRAINTS=!0,f.APPLY_LAYOUT=!0),f.TREE_REDUCTION_ON_INCREMENTAL=!(L.fixedNodeConstraint||L.alignmentConstraint||L.relativePlacementConstraint);var F,Q,w=new t,X=w.newGraphManager();return function U(F,Q,st,V){for(var ht=Q.length,J=0;J<ht;J++){var O=Q[J],z=null;0==O.intersection(l).length&&(z=O.children());var $=void 0,nt=O.layoutDimensions({nodeDimensionsIncludeLabels:V.nodeDimensionsIncludeLabels});if(null!=O.outerWidth()&&null!=O.outerHeight())if(V.randomize)if(O.isParent()){var Ct=v.calcBoundingBox(O,wt,G,lt);$=0==O.intersection(l).length?F.add(new r(st.graphManager,new h(Ct.topLeftX,Ct.topLeftY),new g(Ct.width,Ct.height))):F.add(new r(st.graphManager,new h(Ct.topLeftX,Ct.topLeftY),new g(parseFloat(nt.w),parseFloat(nt.h))))}else $=F.add(new r(st.graphManager,new h(wt[lt.get(O.id())]-nt.w/2,G[lt.get(O.id())]-nt.h/2),new g(parseFloat(nt.w),parseFloat(nt.h))));else $=F.add(new r(st.graphManager,new h(O.position("x")-nt.w/2,O.position("y")-nt.h/2),new g(parseFloat(nt.w),parseFloat(nt.h))));else $=F.add(new r(this.graphManager));$.id=O.data("id"),$.nodeRepulsion=m(V.nodeRepulsion,O),$.paddingLeft=parseInt(O.css("padding")),$.paddingTop=parseInt(O.css("padding")),$.paddingRight=parseInt(O.css("padding")),$.paddingBottom=parseInt(O.css("padding")),V.nodeDimensionsIncludeLabels&&($.labelWidth=O.boundingBox({includeLabels:!0,includeNodes:!1,includeOverlays:!1}).w,$.labelHeight=O.boundingBox({includeLabels:!0,includeNodes:!1,includeOverlays:!1}).h,$.labelPosVertical=O.css("text-valign"),$.labelPosHorizontal=O.css("text-halign")),k[O.data("id")]=$,isNaN($.rect.x)&&($.rect.x=0),isNaN($.rect.y)&&($.rect.y=0),null!=z&&z.length>0&&U(st.getGraphManager().add(st.newGraph(),$),z,st,V)}}(X.addRoot(),v.getTopMostNodes(it),w,L),function(F,Q,st){for(var V=0,ht=0,J=0;J<st.length;J++){var O=st[J],z=k[O.data("source")],$=k[O.data("target")];if(z&&$&&z!==$&&0==z.getEdgesBetween($).length){var nt=Q.add(F.newEdge(),z,$);nt.id=O.id(),nt.idealLength=m(L.idealEdgeLength,O),nt.edgeElasticity=m(L.edgeElasticity,O),V+=nt.idealLength,ht++}}null!=L.idealEdgeLength&&(f.DEFAULT_EDGE_LENGTH=T.DEFAULT_EDGE_LENGTH=ht>0?V/ht:i(L.idealEdgeLength)?50:L.idealEdgeLength,f.MIN_REPULSION_DIST=T.MIN_REPULSION_DIST=T.DEFAULT_EDGE_LENGTH/10,f.DEFAULT_RADIAL_SEPARATION=T.DEFAULT_EDGE_LENGTH)}(w,X,pt),F=w,(Q=L).fixedNodeConstraint&&(F.constraints.fixedNodeConstraint=Q.fixedNodeConstraint),Q.alignmentConstraint&&(F.constraints.alignmentConstraint=Q.alignmentConstraint),Q.relativePlacementConstraint&&(F.constraints.relativePlacementConstraint=Q.relativePlacementConstraint),w.runLayout(),k}}},212:(s,c,e)=>{var v=function(){function L(D,q){for(var I=0;I<q.length;I++){var it=q[I];it.enumerable=it.enumerable||!1,it.configurable=!0,"value"in it&&(it.writable=!0),Object.defineProperty(D,it.key,it)}}return function(D,q,I){return q&&L(D.prototype,q),I&&L(D,I),D}}();var r=e(658),h=e(548),u=e(657).spectralLayout,f=e(816).coseLayout,A=Object.freeze({quality:"default",randomize:!0,animate:!0,animationDuration:1e3,animationEasing:void 0,fit:!0,padding:30,nodeDimensionsIncludeLabels:!1,uniformNodeDimensions:!1,packComponents:!0,step:"all",samplingType:!0,sampleSize:25,nodeSeparation:75,piTol:1e-7,nodeRepulsion:function(D){return 4500},idealEdgeLength:function(D){return 50},edgeElasticity:function(D){return.45},nestingFactor:.1,gravity:.25,numIter:2500,tile:!0,tilingCompareBy:void 0,tilingPaddingVertical:10,tilingPaddingHorizontal:10,gravityRangeCompound:1.5,gravityCompound:1,gravityRange:3.8,initialEnergyOnIncremental:.3,fixedNodeConstraint:void 0,alignmentConstraint:void 0,relativePlacementConstraint:void 0,ready:function(){},stop:function(){}}),N=function(){function L(D){(function t(L,D){if(!(L instanceof D))throw new TypeError("Cannot call a class as a function")})(this,L),this.options=r({},A,D)}return v(L,[{key:"run",value:function(){var I=this.options,it=I.cy,pt=I.eles,lt=[],k=[],i=void 0,m=[];I.fixedNodeConstraint&&(!Array.isArray(I.fixedNodeConstraint)||0==I.fixedNodeConstraint.length)&&(I.fixedNodeConstraint=void 0),I.alignmentConstraint&&(I.alignmentConstraint.vertical&&(!Array.isArray(I.alignmentConstraint.vertical)||0==I.alignmentConstraint.vertical.length)&&(I.alignmentConstraint.vertical=void 0),I.alignmentConstraint.horizontal&&(!Array.isArray(I.alignmentConstraint.horizontal)||0==I.alignmentConstraint.horizontal.length)&&(I.alignmentConstraint.horizontal=void 0)),I.relativePlacementConstraint&&(!Array.isArray(I.relativePlacementConstraint)||0==I.relativePlacementConstraint.length)&&(I.relativePlacementConstraint=void 0),(I.fixedNodeConstraint||I.alignmentConstraint||I.relativePlacementConstraint)&&(I.tile=!1,I.packComponents=!1);var p=void 0,d=!1;if(it.layoutUtilities&&I.packComponents&&((p=it.layoutUtilities("get"))||(p=it.layoutUtilities()),d=!0),pt.nodes().length>0)if(d){var X=h.getTopMostNodes(I.eles.nodes());if((i=h.connectComponents(it,I.eles,X)).forEach(function(y){var C=y.boundingBox();m.push({x:C.x1+C.w/2,y:C.y1+C.h/2})}),I.randomize&&i.forEach(function(y){I.eles=y,lt.push(u(I))}),"default"==I.quality||"proof"==I.quality){var U=it.collection();if(I.tile){var V=0,ht={nodeIndexes:new Map,xCoords:[],yCoords:[]},J=[];if(i.forEach(function(y,C){0==y.edges().length&&(y.nodes().forEach(function(Y,W){U.merge(y.nodes()[W]),Y.isParent()||(ht.nodeIndexes.set(y.nodes()[W].id(),V++),ht.xCoords.push(y.nodes()[0].position().x),ht.yCoords.push(y.nodes()[0].position().y))}),J.push(C))}),U.length>1){var O=U.boundingBox();m.push({x:O.x1+O.w/2,y:O.y1+O.h/2}),i.push(U),lt.push(ht);for(var z=J.length-1;z>=0;z--)i.splice(J[z],1),lt.splice(J[z],1),m.splice(J[z],1)}}i.forEach(function(y,C){I.eles=y,k.push(f(I,lt[C])),h.relocateComponent(m[C],k[C],I)})}else i.forEach(function(y,C){h.relocateComponent(m[C],lt[C],I)});var $=new Set;if(i.length>1){var nt=[],Ct=pt.filter(function(y){return"none"==y.css("display")});i.forEach(function(y,C){var Y=void 0;if("draft"==I.quality&&(Y=lt[C].nodeIndexes),y.nodes().not(Ct).length>0){var W={edges:[],nodes:[]},et=void 0;y.nodes().not(Ct).forEach(function(j){if("draft"==I.quality)if(j.isParent()){var ot=h.calcBoundingBox(j,lt[C].xCoords,lt[C].yCoords,Y);W.nodes.push({x:ot.topLeftX,y:ot.topLeftY,width:ot.width,height:ot.height})}else et=Y.get(j.id()),W.nodes.push({x:lt[C].xCoords[et]-j.boundingbox().w/2,y:lt[C].yCoords[et]-j.boundingbox().h/2,width:j.boundingbox().w,height:j.boundingbox().h});else k[C][j.id()]&&W.nodes.push({x:k[C][j.id()].getLeft(),y:k[C][j.id()].getTop(),width:k[C][j.id()].getWidth(),height:k[C][j.id()].getHeight()})}),y.edges().forEach(function(j){var ot=j.source(),tt=j.target();if("none"!=ot.css("display")&&"none"!=tt.css("display"))if("draft"==I.quality){var ut=Y.get(ot.id()),vt=Y.get(tt.id()),rt=[],dt=[];if(ot.isParent()){var Et=h.calcBoundingBox(ot,lt[C].xCoords,lt[C].yCoords,Y);rt.push(Et.topLeftX+Et.width/2),rt.push(Et.topLeftY+Et.height/2)}else rt.push(lt[C].xCoords[ut]),rt.push(lt[C].yCoords[ut]);if(tt.isParent()){var M=h.calcBoundingBox(tt,lt[C].xCoords,lt[C].yCoords,Y);dt.push(M.topLeftX+M.width/2),dt.push(M.topLeftY+M.height/2)}else dt.push(lt[C].xCoords[vt]),dt.push(lt[C].yCoords[vt]);W.edges.push({startX:rt[0],startY:rt[1],endX:dt[0],endY:dt[1]})}else k[C][ot.id()]&&k[C][tt.id()]&&W.edges.push({startX:k[C][ot.id()].getCenterX(),startY:k[C][ot.id()].getCenterY(),endX:k[C][tt.id()].getCenterX(),endY:k[C][tt.id()].getCenterY()})}),W.nodes.length>0&&(nt.push(W),$.add(C))}});var _=p.packComponents(nt,I.randomize).shifts;if("draft"==I.quality)lt.forEach(function(y,C){var Y=y.xCoords.map(function(et){return et+_[C].dx}),W=y.yCoords.map(function(et){return et+_[C].dy});y.xCoords=Y,y.yCoords=W});else{var bt=0;$.forEach(function(y){Object.keys(k[y]).forEach(function(C){var Y=k[y][C];Y.setCenter(Y.getCenterX()+_[bt].dx,Y.getCenterY()+_[bt].dy)}),bt++})}}}else{var R=I.eles.boundingBox();if(m.push({x:R.x1+R.w/2,y:R.y1+R.h/2}),I.randomize){var w=u(I);lt.push(w)}"default"==I.quality||"proof"==I.quality?(k.push(f(I,lt[0])),h.relocateComponent(m[0],k[0],I)):h.relocateComponent(m[0],lt[0],I)}var Rt=function(C,Y){if("default"==I.quality||"proof"==I.quality){"number"==typeof C&&(C=Y);var W=void 0,et=void 0,j=C.data("id");return k.forEach(function(tt){j in tt&&(W={x:tt[j].getRect().getCenterX(),y:tt[j].getRect().getCenterY()},et=tt[j])}),I.nodeDimensionsIncludeLabels&&(et.labelWidth&&("left"==et.labelPosHorizontal?W.x+=et.labelWidth/2:"right"==et.labelPosHorizontal&&(W.x-=et.labelWidth/2)),et.labelHeight&&("top"==et.labelPosVertical?W.y+=et.labelHeight/2:"bottom"==et.labelPosVertical&&(W.y-=et.labelHeight/2))),null==W&&(W={x:C.position("x"),y:C.position("y")}),{x:W.x,y:W.y}}var ot=void 0;return lt.forEach(function(tt){var ut=tt.nodeIndexes.get(C.id());null!=ut&&(ot={x:tt.xCoords[ut],y:tt.yCoords[ut]})}),null==ot&&(ot={x:C.position("x"),y:C.position("y")}),{x:ot.x,y:ot.y}};if("default"==I.quality||"proof"==I.quality||I.randomize){var Wt=h.calcParentsWithoutChildren(it,pt),Gt=pt.filter(function(y){return"none"==y.css("display")});I.eles=pt.not(Gt),pt.nodes().not(":parent").not(Gt).layoutPositions(this,I,Rt),Wt.length>0&&Wt.forEach(function(y){y.position(Rt(y))})}else console.log("If randomize option is set to false, then quality option must be 'default' or 'proof'.")}}]),L}();s.exports=N},657:(s,c,e)=>{var v=e(548),t=e(140).layoutBase.Matrix,r=e(140).layoutBase.SVD;s.exports={spectralLayout:function(u){var T=u.cy,f=u.eles,A=f.nodes(),N=f.nodes(":parent"),L=new Map,D=new Map,q=new Map,I=[],it=[],pt=[],lt=[],wt=[],G=[],k=[],i=[],l=void 0,p=1e8,d=1e-9,R=u.piTol,w=u.samplingType,X=u.nodeSeparation,U=void 0,Q=function(b,P,H){for(var K=[],ft=0,at=0,B=0,Z=void 0,mt=[],Mt=0,Tt=1,xt=0;xt<l;xt++)mt[xt]=p;for(K[at]=b,mt[b]=0;at>=ft;){B=K[ft++];for(var Lt=I[B],gt=0;gt<Lt.length;gt++)mt[Z=D.get(Lt[gt])]==p&&(mt[Z]=mt[B]+1,K[++at]=Z);G[B][P]=mt[B]*X}if(H){for(var Ot=0;Ot<l;Ot++)G[Ot][P]<wt[Ot]&&(wt[Ot]=G[Ot][P]);for(var yt=0;yt<l;yt++)wt[yt]>Mt&&(Mt=wt[yt],Tt=yt)}return Tt};v.connectComponents(T,f,v.getTopMostNodes(A),L),N.forEach(function(x){v.connectComponents(T,f,v.getTopMostNodes(x.descendants().intersection(f)),L)});for(var J=0,O=0;O<A.length;O++)A[O].isParent()||D.set(A[O].id(),J++);var z=!0,$=!1,nt=void 0;try{for(var _,Ct=L.keys()[Symbol.iterator]();!(z=(_=Ct.next()).done);z=!0)D.set(_.value,J++)}catch(x){$=!0,nt=x}finally{try{!z&&Ct.return&&Ct.return()}finally{if($)throw nt}}for(var Rt=0;Rt<D.size;Rt++)I[Rt]=[];N.forEach(function(x){for(var b=x.children().intersection(f);0==b.nodes(":childless").length;)b=b.nodes()[0].children().intersection(f);var P=0,H=b.nodes(":childless")[0].connectedEdges().length;b.nodes(":childless").forEach(function(K,ft){K.connectedEdges().length<H&&(H=K.connectedEdges().length,P=ft)}),q.set(x.id(),b.nodes(":childless")[P].id())}),A.forEach(function(x){var b;b=x.isParent()?D.get(q.get(x.id())):D.get(x.id()),x.neighborhood().nodes().forEach(function(P){f.intersection(x.edgesWith(P)).length>0&&(P.isParent()?I[b].push(q.get(P.id())):I[b].push(P.id()))})});var Wt=function(b){var P=D.get(b),H=void 0;L.get(b).forEach(function(K){H=T.getElementById(K).isParent()?q.get(K):K,I[P].push(H),I[D.get(H)].push(b)})},Gt=!0,y=!1,C=void 0;try{for(var W,Y=L.keys()[Symbol.iterator]();!(Gt=(W=Y.next()).done);Gt=!0)Wt(W.value)}catch(x){y=!0,C=x}finally{try{!Gt&&Y.return&&Y.return()}finally{if(y)throw C}}var j=void 0;if((l=D.size)>2){U=l<u.sampleSize?l:u.sampleSize;for(var ot=0;ot<l;ot++)G[ot]=[];for(var tt=0;tt<U;tt++)i[tt]=[];return"draft"==u.quality||"all"==u.step?(function(b){var P=void 0;if(b){P=Math.floor(Math.random()*l);for(var K=0;K<l;K++)wt[K]=p;for(var ft=0;ft<U;ft++)lt[ft]=P,P=Q(P,ft,b)}else{!function(){for(var b=0,P=0,H=!1;P<U;){b=Math.floor(Math.random()*l),H=!1;for(var K=0;K<P;K++)if(lt[K]==b){H=!0;break}H||(lt[P]=b,P++)}}();for(var H=0;H<U;H++)Q(lt[H],H,b)}for(var at=0;at<l;at++)for(var B=0;B<U;B++)G[at][B]*=G[at][B];for(var Z=0;Z<U;Z++)k[Z]=[];for(var mt=0;mt<U;mt++)for(var Mt=0;Mt<U;Mt++)k[mt][Mt]=G[lt[Mt]][mt]}(w),function(){for(var b=r.svd(k),P=b.S,H=b.U,K=b.V,ft=P[0]*P[0]*P[0],at=[],B=0;B<U;B++){at[B]=[];for(var Z=0;Z<U;Z++)at[B][Z]=0,B==Z&&(at[B][Z]=P[B]/(P[B]*P[B]+ft/(P[B]*P[B])))}i=t.multMat(t.multMat(K,at),t.transpose(H))}(),function(){for(var b=void 0,P=void 0,H=[],K=[],ft=[],at=[],B=0;B<l;B++)H[B]=Math.random(),K[B]=Math.random();H=t.normalize(H),K=t.normalize(K);for(var mt=d,Mt=d,Tt=void 0;;){for(var xt=0;xt<l;xt++)ft[xt]=H[xt];if(H=t.multGamma(t.multL(t.multGamma(ft),G,i)),b=t.dotProduct(ft,H),H=t.normalize(H),mt=t.dotProduct(ft,H),(Tt=Math.abs(mt/Mt))<=1+R&&Tt>=1)break;Mt=mt}for(var Lt=0;Lt<l;Lt++)ft[Lt]=H[Lt];for(Mt=d;;){for(var gt=0;gt<l;gt++)at[gt]=K[gt];if(at=t.minusOp(at,t.multCons(ft,t.dotProduct(ft,at))),K=t.multGamma(t.multL(t.multGamma(at),G,i)),P=t.dotProduct(at,K),K=t.normalize(K),mt=t.dotProduct(at,K),(Tt=Math.abs(mt/Mt))<=1+R&&Tt>=1)break;Mt=mt}for(var Ot=0;Ot<l;Ot++)at[Ot]=K[Ot];it=t.multCons(ft,Math.sqrt(Math.abs(b))),pt=t.multCons(at,Math.sqrt(Math.abs(P)))}(),j={nodeIndexes:D,xCoords:it,yCoords:pt}):(D.forEach(function(x,b){it.push(T.getElementById(b).position("x")),pt.push(T.getElementById(b).position("y"))}),j={nodeIndexes:D,xCoords:it,yCoords:pt}),j}var ut=D.keys(),vt=T.getElementById(ut.next().value),rt=vt.position(),dt=vt.outerWidth();if(it.push(rt.x),pt.push(rt.y),2==l){var M=T.getElementById(ut.next().value).outerWidth();it.push(rt.x+dt/2+M/2+u.idealEdgeLength),pt.push(rt.y)}return{nodeIndexes:D,xCoords:it,yCoords:pt}}}},579:(s,c,e)=>{var v=e(212),t=function(h){h&&h("layout","fcose",v)};typeof cytoscape<"u"&&t(cytoscape),s.exports=t},140:s=>{s.exports=S}},n={};return function o(s){var c=n[s];if(void 0!==c)return c.exports;var e=n[s]={exports:{}};return E[s](e,e.exports,o),e.exports}(579)})())},3545:function(kt){kt.exports=function(ct){var At={};function S(E){if(At[E])return At[E].exports;var n=At[E]={i:E,l:!1,exports:{}};return ct[E].call(n.exports,n,n.exports,S),n.l=!0,n.exports}return S.m=ct,S.c=At,S.i=function(E){return E},S.d=function(E,n,o){S.o(E,n)||Object.defineProperty(E,n,{configurable:!1,enumerable:!0,get:o})},S.n=function(E){var n=E&&E.__esModule?function(){return E.default}:function(){return E};return S.d(n,"a",n),n},S.o=function(E,n){return Object.prototype.hasOwnProperty.call(E,n)},S.p="",S(S.s=28)}([function(ct,At,S){"use strict";function E(){}E.QUALITY=1,E.DEFAULT_CREATE_BENDS_AS_NEEDED=!1,E.DEFAULT_INCREMENTAL=!1,E.DEFAULT_ANIMATION_ON_LAYOUT=!0,E.DEFAULT_ANIMATION_DURING_LAYOUT=!1,E.DEFAULT_ANIMATION_PERIOD=50,E.DEFAULT_UNIFORM_LEAF_NODE_SIZES=!1,E.DEFAULT_GRAPH_MARGIN=15,E.NODE_DIMENSIONS_INCLUDE_LABELS=!1,E.SIMPLE_NODE_HALF_SIZE=(E.SIMPLE_NODE_SIZE=40)/2,E.EMPTY_COMPOUND_NODE_SIZE=40,E.MIN_EDGE_LENGTH=1,E.INITIAL_WORLD_BOUNDARY=(E.WORLD_BOUNDARY=1e6)/1e3,E.WORLD_CENTER_X=1200,E.WORLD_CENTER_Y=900,ct.exports=E},function(ct,At,S){"use strict";var E=S(2),n=S(8),o=S(9);function a(c,e,v){E.call(this,v),this.isOverlapingSourceAndTarget=!1,this.vGraphObject=v,this.bendpoints=[],this.source=c,this.target=e}for(var s in a.prototype=Object.create(E.prototype),E)a[s]=E[s];a.prototype.getSource=function(){return this.source},a.prototype.getTarget=function(){return this.target},a.prototype.isInterGraph=function(){return this.isInterGraph},a.prototype.getLength=function(){return this.length},a.prototype.isOverlapingSourceAndTarget=function(){return this.isOverlapingSourceAndTarget},a.prototype.getBendpoints=function(){return this.bendpoints},a.prototype.getLca=function(){return this.lca},a.prototype.getSourceInLca=function(){return this.sourceInLca},a.prototype.getTargetInLca=function(){return this.targetInLca},a.prototype.getOtherEnd=function(c){if(this.source===c)return this.target;if(this.target===c)return this.source;throw"Node is not incident with this edge"},a.prototype.getOtherEndInGraph=function(c,e){for(var v=this.getOtherEnd(c),t=e.getGraphManager().getRoot();;){if(v.getOwner()==e)return v;if(v.getOwner()==t)break;v=v.getOwner().getParent()}return null},a.prototype.updateLength=function(){var c=new Array(4);this.isOverlapingSourceAndTarget=n.getIntersection(this.target.getRect(),this.source.getRect(),c),this.isOverlapingSourceAndTarget||(this.lengthX=c[0]-c[2],this.lengthY=c[1]-c[3],Math.abs(this.lengthX)<1&&(this.lengthX=o.sign(this.lengthX)),Math.abs(this.lengthY)<1&&(this.lengthY=o.sign(this.lengthY)),this.length=Math.sqrt(this.lengthX*this.lengthX+this.lengthY*this.lengthY))},a.prototype.updateLengthSimple=function(){this.lengthX=this.target.getCenterX()-this.source.getCenterX(),this.lengthY=this.target.getCenterY()-this.source.getCenterY(),Math.abs(this.lengthX)<1&&(this.lengthX=o.sign(this.lengthX)),Math.abs(this.lengthY)<1&&(this.lengthY=o.sign(this.lengthY)),this.length=Math.sqrt(this.lengthX*this.lengthX+this.lengthY*this.lengthY)},ct.exports=a},function(ct,At,S){"use strict";ct.exports=function E(n){this.vGraphObject=n}},function(ct,At,S){"use strict";var E=S(2),n=S(10),o=S(13),a=S(0),s=S(16),c=S(5);function e(t,r,h,g){null==h&&null==g&&(g=r),E.call(this,g),null!=t.graphManager&&(t=t.graphManager),this.estimatedSize=n.MIN_VALUE,this.inclusionTreeDepth=n.MAX_VALUE,this.vGraphObject=g,this.edges=[],this.graphManager=t,this.rect=null!=h&&null!=r?new o(r.x,r.y,h.width,h.height):new o}for(var v in e.prototype=Object.create(E.prototype),E)e[v]=E[v];e.prototype.getEdges=function(){return this.edges},e.prototype.getChild=function(){return this.child},e.prototype.getOwner=function(){return this.owner},e.prototype.getWidth=function(){return this.rect.width},e.prototype.setWidth=function(t){this.rect.width=t},e.prototype.getHeight=function(){return this.rect.height},e.prototype.setHeight=function(t){this.rect.height=t},e.prototype.getCenterX=function(){return this.rect.x+this.rect.width/2},e.prototype.getCenterY=function(){return this.rect.y+this.rect.height/2},e.prototype.getCenter=function(){return new c(this.rect.x+this.rect.width/2,this.rect.y+this.rect.height/2)},e.prototype.getLocation=function(){return new c(this.rect.x,this.rect.y)},e.prototype.getRect=function(){return this.rect},e.prototype.getDiagonal=function(){return Math.sqrt(this.rect.width*this.rect.width+this.rect.height*this.rect.height)},e.prototype.getHalfTheDiagonal=function(){return Math.sqrt(this.rect.height*this.rect.height+this.rect.width*this.rect.width)/2},e.prototype.setRect=function(t,r){this.rect.x=t.x,this.rect.y=t.y,this.rect.width=r.width,this.rect.height=r.height},e.prototype.setCenter=function(t,r){this.rect.x=t-this.rect.width/2,this.rect.y=r-this.rect.height/2},e.prototype.setLocation=function(t,r){this.rect.x=t,this.rect.y=r},e.prototype.moveBy=function(t,r){this.rect.x+=t,this.rect.y+=r},e.prototype.getEdgeListToNode=function(t){var r=[],g=this;return g.edges.forEach(function(u){if(u.target==t){if(u.source!=g)throw"Incorrect edge source!";r.push(u)}}),r},e.prototype.getEdgesBetween=function(t){var r=[],g=this;return g.edges.forEach(function(u){if(u.source!=g&&u.target!=g)throw"Incorrect edge source and/or target";(u.target==t||u.source==t)&&r.push(u)}),r},e.prototype.getNeighborsList=function(){var t=new Set,r=this;return r.edges.forEach(function(h){if(h.source==r)t.add(h.target);else{if(h.target!=r)throw"Incorrect incidency!";t.add(h.source)}}),t},e.prototype.withChildren=function(){var t=new Set;if(t.add(this),null!=this.child)for(var g=this.child.getNodes(),u=0;u<g.length;u++)g[u].withChildren().forEach(function(T){t.add(T)});return t},e.prototype.getNoOfChildren=function(){var t=0;if(null==this.child)t=1;else for(var h=this.child.getNodes(),g=0;g<h.length;g++)t+=h[g].getNoOfChildren();return 0==t&&(t=1),t},e.prototype.getEstimatedSize=function(){if(this.estimatedSize==n.MIN_VALUE)throw"assert failed";return this.estimatedSize},e.prototype.calcEstimatedSize=function(){return null==this.child?this.estimatedSize=(this.rect.width+this.rect.height)/2:(this.estimatedSize=this.child.calcEstimatedSize(),this.rect.width=this.estimatedSize,this.rect.height=this.estimatedSize,this.estimatedSize)},e.prototype.scatter=function(){var t,r,h=-a.INITIAL_WORLD_BOUNDARY,g=a.INITIAL_WORLD_BOUNDARY;t=a.WORLD_CENTER_X+s.nextDouble()*(g-h)+h;var u=-a.INITIAL_WORLD_BOUNDARY,T=a.INITIAL_WORLD_BOUNDARY;r=a.WORLD_CENTER_Y+s.nextDouble()*(T-u)+u,this.rect.x=t,this.rect.y=r},e.prototype.updateBounds=function(){if(null==this.getChild())throw"assert failed";if(0!=this.getChild().getNodes().length){var t=this.getChild();if(t.updateBounds(!0),this.rect.x=t.getLeft(),this.rect.y=t.getTop(),this.setWidth(t.getRight()-t.getLeft()),this.setHeight(t.getBottom()-t.getTop()),a.NODE_DIMENSIONS_INCLUDE_LABELS){var r=t.getRight()-t.getLeft(),h=t.getBottom()-t.getTop();this.labelWidth&&("left"==this.labelPosHorizontal?(this.rect.x-=this.labelWidth,this.setWidth(r+this.labelWidth)):"center"==this.labelPosHorizontal&&this.labelWidth>r?(this.rect.x-=(this.labelWidth-r)/2,this.setWidth(this.labelWidth)):"right"==this.labelPosHorizontal&&this.setWidth(r+this.labelWidth)),this.labelHeight&&("top"==this.labelPosVertical?(this.rect.y-=this.labelHeight,this.setHeight(h+this.labelHeight)):"center"==this.labelPosVertical&&this.labelHeight>h?(this.rect.y-=(this.labelHeight-h)/2,this.setHeight(this.labelHeight)):"bottom"==this.labelPosVertical&&this.setHeight(h+this.labelHeight))}}},e.prototype.getInclusionTreeDepth=function(){if(this.inclusionTreeDepth==n.MAX_VALUE)throw"assert failed";return this.inclusionTreeDepth},e.prototype.transform=function(t){var r=this.rect.x;r>a.WORLD_BOUNDARY?r=a.WORLD_BOUNDARY:r<-a.WORLD_BOUNDARY&&(r=-a.WORLD_BOUNDARY);var h=this.rect.y;h>a.WORLD_BOUNDARY?h=a.WORLD_BOUNDARY:h<-a.WORLD_BOUNDARY&&(h=-a.WORLD_BOUNDARY);var g=new c(r,h),u=t.inverseTransformPoint(g);this.setLocation(u.x,u.y)},e.prototype.getLeft=function(){return this.rect.x},e.prototype.getRight=function(){return this.rect.x+this.rect.width},e.prototype.getTop=function(){return this.rect.y},e.prototype.getBottom=function(){return this.rect.y+this.rect.height},e.prototype.getParent=function(){return null==this.owner?null:this.owner.getParent()},ct.exports=e},function(ct,At,S){"use strict";var E=S(0);function n(){}for(var o in E)n[o]=E[o];n.MAX_ITERATIONS=2500,n.DEFAULT_EDGE_LENGTH=50,n.DEFAULT_SPRING_STRENGTH=.45,n.DEFAULT_REPULSION_STRENGTH=4500,n.DEFAULT_GRAVITY_STRENGTH=.4,n.DEFAULT_COMPOUND_GRAVITY_STRENGTH=1,n.DEFAULT_GRAVITY_RANGE_FACTOR=3.8,n.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=1.5,n.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION=!0,n.DEFAULT_USE_SMART_REPULSION_RANGE_CALCULATION=!0,n.DEFAULT_COOLING_FACTOR_INCREMENTAL=.3,n.COOLING_ADAPTATION_FACTOR=.33,n.ADAPTATION_LOWER_NODE_LIMIT=1e3,n.ADAPTATION_UPPER_NODE_LIMIT=5e3,n.MAX_NODE_DISPLACEMENT=3*(n.MAX_NODE_DISPLACEMENT_INCREMENTAL=100),n.MIN_REPULSION_DIST=n.DEFAULT_EDGE_LENGTH/10,n.CONVERGENCE_CHECK_PERIOD=100,n.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=.1,n.MIN_EDGE_LENGTH=1,n.GRID_CALCULATION_CHECK_PERIOD=10,ct.exports=n},function(ct,At,S){"use strict";function E(n,o){null==n&&null==o?(this.x=0,this.y=0):(this.x=n,this.y=o)}E.prototype.getX=function(){return this.x},E.prototype.getY=function(){return this.y},E.prototype.setX=function(n){this.x=n},E.prototype.setY=function(n){this.y=n},E.prototype.getDifference=function(n){return new DimensionD(this.x-n.x,this.y-n.y)},E.prototype.getCopy=function(){return new E(this.x,this.y)},E.prototype.translate=function(n){return this.x+=n.width,this.y+=n.height,this},ct.exports=E},function(ct,At,S){"use strict";var E=S(2),n=S(10),o=S(0),a=S(7),s=S(3),c=S(1),e=S(13),v=S(12),t=S(11);function r(g,u,T){E.call(this,T),this.estimatedSize=n.MIN_VALUE,this.margin=o.DEFAULT_GRAPH_MARGIN,this.edges=[],this.nodes=[],this.isConnected=!1,this.parent=g,null!=u&&u instanceof a?this.graphManager=u:null!=u&&u instanceof Layout&&(this.graphManager=u.graphManager)}for(var h in r.prototype=Object.create(E.prototype),E)r[h]=E[h];r.prototype.getNodes=function(){return this.nodes},r.prototype.getEdges=function(){return this.edges},r.prototype.getGraphManager=function(){return this.graphManager},r.prototype.getParent=function(){return this.parent},r.prototype.getLeft=function(){return this.left},r.prototype.getRight=function(){return this.right},r.prototype.getTop=function(){return this.top},r.prototype.getBottom=function(){return this.bottom},r.prototype.isConnected=function(){return this.isConnected},r.prototype.add=function(g,u,T){if(null==u&&null==T){var f=g;if(null==this.graphManager)throw"Graph has no graph mgr!";if(this.getNodes().indexOf(f)>-1)throw"Node already in graph!";return f.owner=this,this.getNodes().push(f),f}var A=g;if(!(this.getNodes().indexOf(u)>-1&&this.getNodes().indexOf(T)>-1))throw"Source or target not in graph!";if(u.owner!=T.owner||u.owner!=this)throw"Both owners must be this graph!";return u.owner!=T.owner?null:(A.source=u,A.target=T,A.isInterGraph=!1,this.getEdges().push(A),u.edges.push(A),T!=u&&T.edges.push(A),A)},r.prototype.remove=function(g){var u=g;if(g instanceof s){if(null==u)throw"Node is null!";if(null==u.owner||u.owner!=this)throw"Owner graph is invalid!";if(null==this.graphManager)throw"Owner graph manager is invalid!";for(var T=u.edges.slice(),A=T.length,N=0;N<A;N++)(f=T[N]).isInterGraph?this.graphManager.remove(f):f.source.owner.remove(f);if(-1==(L=this.nodes.indexOf(u)))throw"Node not in owner node list!";this.nodes.splice(L,1)}else if(g instanceof c){var f;if(null==(f=g))throw"Edge is null!";if(null==f.source||null==f.target)throw"Source and/or target is null!";if(null==f.source.owner||null==f.target.owner||f.source.owner!=this||f.target.owner!=this)throw"Source and/or target owner is invalid!";var L,D=f.source.edges.indexOf(f),q=f.target.edges.indexOf(f);if(!(D>-1&&q>-1))throw"Source and/or target doesn't know this edge!";if(f.source.edges.splice(D,1),f.target!=f.source&&f.target.edges.splice(q,1),-1==(L=f.source.owner.getEdges().indexOf(f)))throw"Not in owner's edge list!";f.source.owner.getEdges().splice(L,1)}},r.prototype.updateLeftTop=function(){for(var T,f,A,g=n.MAX_VALUE,u=n.MAX_VALUE,N=this.getNodes(),L=N.length,D=0;D<L;D++){var q=N[D];g>(T=q.getTop())&&(g=T),u>(f=q.getLeft())&&(u=f)}return g==n.MAX_VALUE?null:(A=null!=N[0].getParent().paddingLeft?N[0].getParent().paddingLeft:this.margin,this.left=u-A,this.top=g-A,new v(this.left,this.top))},r.prototype.updateBounds=function(g){for(var N,L,D,q,I,u=n.MAX_VALUE,T=-n.MAX_VALUE,f=n.MAX_VALUE,A=-n.MAX_VALUE,it=this.nodes,pt=it.length,lt=0;lt<pt;lt++){var wt=it[lt];g&&null!=wt.child&&wt.updateBounds(),u>(N=wt.getLeft())&&(u=N),T<(L=wt.getRight())&&(T=L),f>(D=wt.getTop())&&(f=D),A<(q=wt.getBottom())&&(A=q)}var G=new e(u,f,T-u,A-f);u==n.MAX_VALUE&&(this.left=this.parent.getLeft(),this.right=this.parent.getRight(),this.top=this.parent.getTop(),this.bottom=this.parent.getBottom()),I=null!=it[0].getParent().paddingLeft?it[0].getParent().paddingLeft:this.margin,this.left=G.x-I,this.right=G.x+G.width+I,this.top=G.y-I,this.bottom=G.y+G.height+I},r.calculateBounds=function(g){for(var N,L,D,q,u=n.MAX_VALUE,T=-n.MAX_VALUE,f=n.MAX_VALUE,A=-n.MAX_VALUE,I=g.length,it=0;it<I;it++){var pt=g[it];u>(N=pt.getLeft())&&(u=N),T<(L=pt.getRight())&&(T=L),f>(D=pt.getTop())&&(f=D),A<(q=pt.getBottom())&&(A=q)}return new e(u,f,T-u,A-f)},r.prototype.getInclusionTreeDepth=function(){return this==this.graphManager.getRoot()?1:this.parent.getInclusionTreeDepth()},r.prototype.getEstimatedSize=function(){if(this.estimatedSize==n.MIN_VALUE)throw"assert failed";return this.estimatedSize},r.prototype.calcEstimatedSize=function(){for(var g=0,u=this.nodes,T=u.length,f=0;f<T;f++)g+=u[f].calcEstimatedSize();return this.estimatedSize=0==g?o.EMPTY_COMPOUND_NODE_SIZE:g/Math.sqrt(this.nodes.length),this.estimatedSize},r.prototype.updateConnected=function(){var g=this;if(0!=this.nodes.length){var A,N,u=new t,T=new Set,f=this.nodes[0];for(f.withChildren().forEach(function(lt){u.push(lt),T.add(lt)});0!==u.length;)for(var D=(A=(f=u.shift()).getEdges()).length,q=0;q<D;q++)null==(N=A[q].getOtherEndInGraph(f,this))||T.has(N)||N.withChildren().forEach(function(lt){u.push(lt),T.add(lt)});if(this.isConnected=!1,T.size>=this.nodes.length){var pt=0;T.forEach(function(lt){lt.owner==g&&pt++}),pt==this.nodes.length&&(this.isConnected=!0)}}else this.isConnected=!0},ct.exports=r},function(ct,At,S){"use strict";var E,n=S(1);function o(a){E=S(6),this.layout=a,this.graphs=[],this.edges=[]}o.prototype.addRoot=function(){var a=this.layout.newGraph(),s=this.layout.newNode(null),c=this.add(a,s);return this.setRootGraph(c),this.rootGraph},o.prototype.add=function(a,s,c,e,v){if(null==c&&null==e&&null==v){if(null==a)throw"Graph is null!";if(null==s)throw"Parent node is null!";if(this.graphs.indexOf(a)>-1)throw"Graph already in this graph mgr!";if(this.graphs.push(a),null!=a.parent)throw"Already has a parent!";if(null!=s.child)throw"Already has a child!";return a.parent=s,s.child=a,a}v=c,c=a;var t=(e=s).getOwner(),r=v.getOwner();if(null==t||t.getGraphManager()!=this)throw"Source not in this graph mgr!";if(null==r||r.getGraphManager()!=this)throw"Target not in this graph mgr!";if(t==r)return c.isInterGraph=!1,t.add(c,e,v);if(c.isInterGraph=!0,c.source=e,c.target=v,this.edges.indexOf(c)>-1)throw"Edge already in inter-graph edge list!";if(this.edges.push(c),null==c.source||null==c.target)throw"Edge source and/or target is null!";if(-1!=c.source.edges.indexOf(c)||-1!=c.target.edges.indexOf(c))throw"Edge already in source and/or target incidency list!";return c.source.edges.push(c),c.target.edges.push(c),c},o.prototype.remove=function(a){if(a instanceof E){var s=a;if(s.getGraphManager()!=this)throw"Graph not in this graph mgr";if(s!=this.rootGraph&&(null==s.parent||s.parent.graphManager!=this))throw"Invalid parent node!";for(var e,c=[],v=(c=c.concat(s.getEdges())).length,t=0;t<v;t++)s.remove(e=c[t]);var r=[];for(v=(r=r.concat(s.getNodes())).length,t=0;t<v;t++)s.remove(r[t]);s==this.rootGraph&&this.setRootGraph(null);var g=this.graphs.indexOf(s);this.graphs.splice(g,1),s.parent=null}else if(a instanceof n){if(null==(e=a))throw"Edge is null!";if(!e.isInterGraph)throw"Not an inter-graph edge!";if(null==e.source||null==e.target)throw"Source and/or target is null!";if(-1==e.source.edges.indexOf(e)||-1==e.target.edges.indexOf(e))throw"Source and/or target doesn't know this edge!";if(g=e.source.edges.indexOf(e),e.source.edges.splice(g,1),g=e.target.edges.indexOf(e),e.target.edges.splice(g,1),null==e.source.owner||null==e.source.owner.getGraphManager())throw"Edge owner graph or owner graph manager is null!";if(-1==e.source.owner.getGraphManager().edges.indexOf(e))throw"Not in owner graph manager's edge list!";g=e.source.owner.getGraphManager().edges.indexOf(e),e.source.owner.getGraphManager().edges.splice(g,1)}},o.prototype.updateBounds=function(){this.rootGraph.updateBounds(!0)},o.prototype.getGraphs=function(){return this.graphs},o.prototype.getAllNodes=function(){if(null==this.allNodes){for(var a=[],s=this.getGraphs(),c=s.length,e=0;e<c;e++)a=a.concat(s[e].getNodes());this.allNodes=a}return this.allNodes},o.prototype.resetAllNodes=function(){this.allNodes=null},o.prototype.resetAllEdges=function(){this.allEdges=null},o.prototype.resetAllNodesToApplyGravitation=function(){this.allNodesToApplyGravitation=null},o.prototype.getAllEdges=function(){if(null==this.allEdges){for(var a=[],s=this.getGraphs(),e=0;e<s.length;e++)a=a.concat(s[e].getEdges());a=a.concat(this.edges),this.allEdges=a}return this.allEdges},o.prototype.getAllNodesToApplyGravitation=function(){return this.allNodesToApplyGravitation},o.prototype.setAllNodesToApplyGravitation=function(a){if(null!=this.allNodesToApplyGravitation)throw"assert failed";this.allNodesToApplyGravitation=a},o.prototype.getRoot=function(){return this.rootGraph},o.prototype.setRootGraph=function(a){if(a.getGraphManager()!=this)throw"Root not in this graph mgr!";this.rootGraph=a,null==a.parent&&(a.parent=this.layout.newNode("Root node"))},o.prototype.getLayout=function(){return this.layout},o.prototype.isOneAncestorOfOther=function(a,s){if(null==a||null==s)throw"assert failed";if(a==s)return!0;for(var e,c=a.getOwner();null!=(e=c.getParent());){if(e==s)return!0;if(null==(c=e.getOwner()))break}for(c=s.getOwner();null!=(e=c.getParent());){if(e==a)return!0;if(null==(c=e.getOwner()))break}return!1},o.prototype.calcLowestCommonAncestors=function(){for(var a,s,c,e,v,t=this.getAllEdges(),r=t.length,h=0;h<r;h++)if(s=(a=t[h]).source,c=a.target,a.lca=null,a.sourceInLca=s,a.targetInLca=c,s!=c){for(e=s.getOwner();null==a.lca;){for(a.targetInLca=c,v=c.getOwner();null==a.lca;){if(v==e){a.lca=v;break}if(v==this.rootGraph)break;if(null!=a.lca)throw"assert failed";a.targetInLca=v.getParent(),v=a.targetInLca.getOwner()}if(e==this.rootGraph)break;null==a.lca&&(a.sourceInLca=e.getParent(),e=a.sourceInLca.getOwner())}if(null==a.lca)throw"assert failed"}else a.lca=s.getOwner()},o.prototype.calcLowestCommonAncestor=function(a,s){if(a==s)return a.getOwner();for(var c=a.getOwner();null!=c;){for(var e=s.getOwner();null!=e;){if(e==c)return e;e=e.getParent().getOwner()}c=c.getParent().getOwner()}return c},o.prototype.calcInclusionTreeDepths=function(a,s){null==a&&null==s&&(a=this.rootGraph,s=1);for(var c,e=a.getNodes(),v=e.length,t=0;t<v;t++)(c=e[t]).inclusionTreeDepth=s,null!=c.child&&this.calcInclusionTreeDepths(c.child,s+1)},o.prototype.includesInvalidEdge=function(){for(var a,s=[],c=this.edges.length,e=0;e<c;e++)this.isOneAncestorOfOther((a=this.edges[e]).source,a.target)&&s.push(a);for(e=0;e<s.length;e++)this.remove(s[e]);return!1},ct.exports=o},function(ct,At,S){"use strict";var E=S(12);function n(){}n.calcSeparationAmount=function(o,a,s,c){if(!o.intersects(a))throw"assert failed";var e=new Array(2);this.decideDirectionsForOverlappingNodes(o,a,e),s[0]=Math.min(o.getRight(),a.getRight())-Math.max(o.x,a.x),s[1]=Math.min(o.getBottom(),a.getBottom())-Math.max(o.y,a.y),o.getX()<=a.getX()&&o.getRight()>=a.getRight()?s[0]+=Math.min(a.getX()-o.getX(),o.getRight()-a.getRight()):a.getX()<=o.getX()&&a.getRight()>=o.getRight()&&(s[0]+=Math.min(o.getX()-a.getX(),a.getRight()-o.getRight())),o.getY()<=a.getY()&&o.getBottom()>=a.getBottom()?s[1]+=Math.min(a.getY()-o.getY(),o.getBottom()-a.getBottom()):a.getY()<=o.getY()&&a.getBottom()>=o.getBottom()&&(s[1]+=Math.min(o.getY()-a.getY(),a.getBottom()-o.getBottom()));var v=Math.abs((a.getCenterY()-o.getCenterY())/(a.getCenterX()-o.getCenterX()));a.getCenterY()===o.getCenterY()&&a.getCenterX()===o.getCenterX()&&(v=1);var t=v*s[0],r=s[1]/v;s[0]<r?r=s[0]:t=s[1],s[0]=-1*e[0]*(r/2+c),s[1]=-1*e[1]*(t/2+c)},n.decideDirectionsForOverlappingNodes=function(o,a,s){s[0]=o.getCenterX()<a.getCenterX()?-1:1,s[1]=o.getCenterY()<a.getCenterY()?-1:1},n.getIntersection2=function(o,a,s){var c=o.getCenterX(),e=o.getCenterY(),v=a.getCenterX(),t=a.getCenterY();if(o.intersects(a))return s[0]=c,s[1]=e,s[2]=v,s[3]=t,!0;var r=o.getX(),h=o.getY(),g=o.getRight(),u=o.getX(),T=o.getBottom(),f=o.getRight(),A=o.getWidthHalf(),N=o.getHeightHalf(),L=a.getX(),D=a.getY(),q=a.getRight(),I=a.getX(),it=a.getBottom(),pt=a.getRight(),lt=a.getWidthHalf(),wt=a.getHeightHalf(),G=!1,k=!1;if(c===v){if(e>t)return s[0]=c,s[1]=h,s[2]=v,s[3]=it,!1;if(e<t)return s[0]=c,s[1]=T,s[2]=v,s[3]=D,!1}else if(e===t){if(c>v)return s[0]=r,s[1]=e,s[2]=q,s[3]=t,!1;if(c<v)return s[0]=g,s[1]=e,s[2]=L,s[3]=t,!1}else{var i=o.height/o.width,m=a.height/a.width,l=(t-e)/(v-c),p=void 0,d=void 0,w=void 0,U=void 0;if(-i===l?c>v?(s[0]=u,s[1]=T,G=!0):(s[0]=g,s[1]=h,G=!0):i===l&&(c>v?(s[0]=r,s[1]=h,G=!0):(s[0]=f,s[1]=T,G=!0)),-m===l?v>c?(s[2]=I,s[3]=it,k=!0):(s[2]=q,s[3]=D,k=!0):m===l&&(v>c?(s[2]=L,s[3]=D,k=!0):(s[2]=pt,s[3]=it,k=!0)),G&&k)return!1;if(c>v?e>t?(p=this.getCardinalDirection(i,l,4),d=this.getCardinalDirection(m,l,2)):(p=this.getCardinalDirection(-i,l,3),d=this.getCardinalDirection(-m,l,1)):e>t?(p=this.getCardinalDirection(-i,l,1),d=this.getCardinalDirection(-m,l,3)):(p=this.getCardinalDirection(i,l,2),d=this.getCardinalDirection(m,l,4)),!G)switch(p){case 1:w=h,s[0]=c+-N/l,s[1]=w;break;case 2:w=e+A*l,s[0]=f,s[1]=w;break;case 3:w=T,s[0]=c+N/l,s[1]=w;break;case 4:w=e+-A*l,s[0]=u,s[1]=w}if(!k)switch(d){case 1:U=D,s[2]=v+-wt/l,s[3]=U;break;case 2:U=t+lt*l,s[2]=pt,s[3]=U;break;case 3:U=it,s[2]=v+wt/l,s[3]=U;break;case 4:U=t+-lt*l,s[2]=I,s[3]=U}}return!1},n.getCardinalDirection=function(o,a,s){return o>a?s:1+s%4},n.getIntersection=function(o,a,s,c){if(null==c)return this.getIntersection2(o,a,s);var N,L,D,q,I,it,pt,e=o.x,v=o.y,t=a.x,r=a.y,h=s.x,g=s.y,u=c.x,T=c.y;return I=t*v-e*r,it=u*g-h*T,0===(pt=(N=r-v)*(q=h-u)-(L=T-g)*(D=e-t))?null:new E((D*it-q*I)/pt,(L*I-N*it)/pt)},n.angleOfVector=function(o,a,s,c){var e=void 0;return o!==s?(e=Math.atan((c-a)/(s-o)),s<o?e+=Math.PI:c<a&&(e+=this.TWO_PI)):e=c<a?this.ONE_AND_HALF_PI:this.HALF_PI,e},n.doIntersect=function(o,a,s,c){var e=o.x,v=o.y,t=a.x,r=a.y,h=s.x,g=s.y,u=c.x,T=c.y,f=(t-e)*(T-g)-(u-h)*(r-v);if(0===f)return!1;var A=((T-g)*(u-e)+(h-u)*(T-v))/f,N=((v-r)*(u-e)+(t-e)*(T-v))/f;return 0<A&&A<1&&0<N&&N<1},n.findCircleLineIntersections=function(o,a,s,c,e,v,t){var r=(s-o)*(s-o)+(c-a)*(c-a),h=2*((o-e)*(s-o)+(a-v)*(c-a)),g=(o-e)*(o-e)+(a-v)*(a-v)-t*t;if(h*h-4*r*g>=0){var T=(-h+Math.sqrt(h*h-4*r*g))/(2*r),f=(-h-Math.sqrt(h*h-4*r*g))/(2*r);return T>=0&&T<=1?[T]:f>=0&&f<=1?[f]:null}return null},n.HALF_PI=.5*Math.PI,n.ONE_AND_HALF_PI=1.5*Math.PI,n.TWO_PI=2*Math.PI,n.THREE_PI=3*Math.PI,ct.exports=n},function(ct,At,S){"use strict";function E(){}E.sign=function(n){return n>0?1:n<0?-1:0},E.floor=function(n){return n<0?Math.ceil(n):Math.floor(n)},E.ceil=function(n){return n<0?Math.floor(n):Math.ceil(n)},ct.exports=E},function(ct,At,S){"use strict";function E(){}E.MAX_VALUE=2147483647,E.MIN_VALUE=-2147483648,ct.exports=E},function(ct,At,S){"use strict";var E=function(){function e(v,t){for(var r=0;r<t.length;r++){var h=t[r];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(v,h.key,h)}}return function(v,t,r){return t&&e(v.prototype,t),r&&e(v,r),v}}();var o=function(v){return{value:v,next:null,prev:null}},a=function(v,t,r,h){return null!==v?v.next=t:h.head=t,null!==r?r.prev=t:h.tail=t,t.prev=v,t.next=r,h.length++,t},s=function(v,t){var r=v.prev,h=v.next;return null!==r?r.next=h:t.head=h,null!==h?h.prev=r:t.tail=r,v.prev=v.next=null,t.length--,v},c=function(){function e(v){var t=this;(function n(e,v){if(!(e instanceof v))throw new TypeError("Cannot call a class as a function")})(this,e),this.length=0,this.head=null,this.tail=null,v?.forEach(function(r){return t.push(r)})}return E(e,[{key:"size",value:function(){return this.length}},{key:"insertBefore",value:function(t,r){return a(r.prev,o(t),r,this)}},{key:"insertAfter",value:function(t,r){return a(r,o(t),r.next,this)}},{key:"insertNodeBefore",value:function(t,r){return a(r.prev,t,r,this)}},{key:"insertNodeAfter",value:function(t,r){return a(r,t,r.next,this)}},{key:"push",value:function(t){return a(this.tail,o(t),null,this)}},{key:"unshift",value:function(t){return a(null,o(t),this.head,this)}},{key:"remove",value:function(t){return s(t,this)}},{key:"pop",value:function(){return s(this.tail,this).value}},{key:"popNode",value:function(){return s(this.tail,this)}},{key:"shift",value:function(){return s(this.head,this).value}},{key:"shiftNode",value:function(){return s(this.head,this)}},{key:"get_object_at",value:function(t){if(t<=this.length()){for(var r=1,h=this.head;r<t;)h=h.next,r++;return h.value}}},{key:"set_object_at",value:function(t,r){if(t<=this.length()){for(var h=1,g=this.head;h<t;)g=g.next,h++;g.value=r}}}]),e}();ct.exports=c},function(ct,At,S){"use strict";function E(n,o,a){this.x=null,this.y=null,null==n&&null==o&&null==a?(this.x=0,this.y=0):"number"==typeof n&&"number"==typeof o&&null==a?(this.x=n,this.y=o):"Point"==n.constructor.name&&null==o&&null==a&&(this.x=(a=n).x,this.y=a.y)}E.prototype.getX=function(){return this.x},E.prototype.getY=function(){return this.y},E.prototype.getLocation=function(){return new E(this.x,this.y)},E.prototype.setLocation=function(n,o,a){"Point"==n.constructor.name&&null==o&&null==a?this.setLocation((a=n).x,a.y):"number"==typeof n&&"number"==typeof o&&null==a&&(parseInt(n)==n&&parseInt(o)==o?this.move(n,o):(this.x=Math.floor(n+.5),this.y=Math.floor(o+.5)))},E.prototype.move=function(n,o){this.x=n,this.y=o},E.prototype.translate=function(n,o){this.x+=n,this.y+=o},E.prototype.equals=function(n){return"Point"==n.constructor.name?this.x==n.x&&this.y==n.y:this==n},E.prototype.toString=function(){return(new E).constructor.name+"[x="+this.x+",y="+this.y+"]"},ct.exports=E},function(ct,At,S){"use strict";function E(n,o,a,s){this.x=0,this.y=0,this.width=0,this.height=0,null!=n&&null!=o&&null!=a&&null!=s&&(this.x=n,this.y=o,this.width=a,this.height=s)}E.prototype.getX=function(){return this.x},E.prototype.setX=function(n){this.x=n},E.prototype.getY=function(){return this.y},E.prototype.setY=function(n){this.y=n},E.prototype.getWidth=function(){return this.width},E.prototype.setWidth=function(n){this.width=n},E.prototype.getHeight=function(){return this.height},E.prototype.setHeight=function(n){this.height=n},E.prototype.getRight=function(){return this.x+this.width},E.prototype.getBottom=function(){return this.y+this.height},E.prototype.intersects=function(n){return!(this.getRight()<n.x||this.getBottom()<n.y||n.getRight()<this.x||n.getBottom()<this.y)},E.prototype.getCenterX=function(){return this.x+this.width/2},E.prototype.getMinX=function(){return this.getX()},E.prototype.getMaxX=function(){return this.getX()+this.width},E.prototype.getCenterY=function(){return this.y+this.height/2},E.prototype.getMinY=function(){return this.getY()},E.prototype.getMaxY=function(){return this.getY()+this.height},E.prototype.getWidthHalf=function(){return this.width/2},E.prototype.getHeightHalf=function(){return this.height/2},ct.exports=E},function(ct,At,S){"use strict";var E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o};function n(){}n.lastID=0,n.createID=function(o){return n.isPrimitive(o)?o:(null!=o.uniqueID||(o.uniqueID=n.getString(),n.lastID++),o.uniqueID)},n.getString=function(o){return null==o&&(o=n.lastID),"Object#"+o},n.isPrimitive=function(o){var a=typeof o>"u"?"undefined":E(o);return null==o||"object"!=a&&"function"!=a},ct.exports=n},function(ct,At,S){"use strict";function E(h){if(Array.isArray(h)){for(var g=0,u=Array(h.length);g<h.length;g++)u[g]=h[g];return u}return Array.from(h)}var n=S(0),o=S(7),a=S(3),s=S(1),c=S(6),e=S(5),v=S(17),t=S(29);function r(h){t.call(this),this.layoutQuality=n.QUALITY,this.createBendsAsNeeded=n.DEFAULT_CREATE_BENDS_AS_NEEDED,this.incremental=n.DEFAULT_INCREMENTAL,this.animationOnLayout=n.DEFAULT_ANIMATION_ON_LAYOUT,this.animationDuringLayout=n.DEFAULT_ANIMATION_DURING_LAYOUT,this.animationPeriod=n.DEFAULT_ANIMATION_PERIOD,this.uniformLeafNodeSizes=n.DEFAULT_UNIFORM_LEAF_NODE_SIZES,this.edgeToDummyNodes=new Map,this.graphManager=new o(this),this.isLayoutFinished=!1,this.isSubLayout=!1,this.isRemoteUse=!1,null!=h&&(this.isRemoteUse=h)}r.RANDOM_SEED=1,(r.prototype=Object.create(t.prototype)).getGraphManager=function(){return this.graphManager},r.prototype.getAllNodes=function(){return this.graphManager.getAllNodes()},r.prototype.getAllEdges=function(){return this.graphManager.getAllEdges()},r.prototype.getAllNodesToApplyGravitation=function(){return this.graphManager.getAllNodesToApplyGravitation()},r.prototype.newGraphManager=function(){var h=new o(this);return this.graphManager=h,h},r.prototype.newGraph=function(h){return new c(null,this.graphManager,h)},r.prototype.newNode=function(h){return new a(this.graphManager,h)},r.prototype.newEdge=function(h){return new s(null,null,h)},r.prototype.checkLayoutSuccess=function(){return null==this.graphManager.getRoot()||0==this.graphManager.getRoot().getNodes().length||this.graphManager.includesInvalidEdge()},r.prototype.runLayout=function(){var h;return this.isLayoutFinished=!1,this.tilingPreLayout&&this.tilingPreLayout(),this.initParameters(),h=!this.checkLayoutSuccess()&&this.layout(),"during"!==n.ANIMATE&&(h&&(this.isSubLayout||this.doPostLayout()),this.tilingPostLayout&&this.tilingPostLayout(),this.isLayoutFinished=!0,h)},r.prototype.doPostLayout=function(){this.incremental||this.transform(),this.update()},r.prototype.update2=function(){if(this.createBendsAsNeeded&&(this.createBendpointsFromDummyNodes(),this.graphManager.resetAllEdges()),!this.isRemoteUse){for(var g=this.graphManager.getAllEdges(),u=0;u<g.length;u++);var f=this.graphManager.getRoot().getNodes();for(u=0;u<f.length;u++);this.update(this.graphManager.getRoot())}},r.prototype.update=function(h){if(null==h)this.update2();else if(h instanceof a){var g=h;if(null!=g.getChild())for(var u=g.getChild().getNodes(),T=0;T<u.length;T++)update(u[T]);null!=g.vGraphObject&&g.vGraphObject.update(g)}else h instanceof s?null!=h.vGraphObject&&h.vGraphObject.update(h):h instanceof c&&null!=h.vGraphObject&&h.vGraphObject.update(h)},r.prototype.initParameters=function(){this.isSubLayout||(this.layoutQuality=n.QUALITY,this.animationDuringLayout=n.DEFAULT_ANIMATION_DURING_LAYOUT,this.animationPeriod=n.DEFAULT_ANIMATION_PERIOD,this.animationOnLayout=n.DEFAULT_ANIMATION_ON_LAYOUT,this.incremental=n.DEFAULT_INCREMENTAL,this.createBendsAsNeeded=n.DEFAULT_CREATE_BENDS_AS_NEEDED,this.uniformLeafNodeSizes=n.DEFAULT_UNIFORM_LEAF_NODE_SIZES),this.animationDuringLayout&&(this.animationOnLayout=!1)},r.prototype.transform=function(h){if(null==h)this.transform(new e(0,0));else{var g=new v,u=this.graphManager.getRoot().updateLeftTop();if(null!=u){g.setWorldOrgX(h.x),g.setWorldOrgY(h.y),g.setDeviceOrgX(u.x),g.setDeviceOrgY(u.y);for(var T=this.getAllNodes(),A=0;A<T.length;A++)T[A].transform(g)}}},r.prototype.positionNodesRandomly=function(h){if(null==h)this.positionNodesRandomly(this.getGraphManager().getRoot()),this.getGraphManager().getRoot().updateBounds(!0);else for(var g,u,T=h.getNodes(),f=0;f<T.length;f++)null==(u=(g=T[f]).getChild())||0==u.getNodes().length?g.scatter():(this.positionNodesRandomly(u),g.updateBounds())},r.prototype.getFlatForest=function(){for(var h=[],g=!0,u=this.graphManager.getRoot().getNodes(),T=!0,f=0;f<u.length;f++)null!=u[f].getChild()&&(T=!1);if(!T)return h;var A=new Set,N=[],L=new Map,D=[];for(D=D.concat(u);D.length>0&&g;){for(N.push(D[0]);N.length>0&&g;){var q=N[0];N.splice(0,1),A.add(q);var I=q.getEdges();for(f=0;f<I.length;f++){var it=I[f].getOtherEnd(q);if(L.get(q)!=it){if(A.has(it)){g=!1;break}N.push(it),L.set(it,q)}}}if(g){var pt=[].concat(E(A));for(h.push(pt),f=0;f<pt.length;f++){var wt=D.indexOf(pt[f]);wt>-1&&D.splice(wt,1)}A=new Set,L=new Map}else h=[]}return h},r.prototype.createDummyNodesForBendpoints=function(h){for(var g=[],u=h.source,T=this.graphManager.calcLowestCommonAncestor(h.source,h.target),f=0;f<h.bendpoints.length;f++){var A=this.newNode(null);A.setRect(new Point(0,0),new Dimension(1,1)),T.add(A);var N=this.newEdge(null);this.graphManager.add(N,u,A),g.add(A),u=A}return N=this.newEdge(null),this.graphManager.add(N,u,h.target),this.edgeToDummyNodes.set(h,g),h.isInterGraph()?this.graphManager.remove(h):T.remove(h),g},r.prototype.createBendpointsFromDummyNodes=function(){var h=[];h=h.concat(this.graphManager.getAllEdges()),h=[].concat(E(this.edgeToDummyNodes.keys())).concat(h);for(var g=0;g<h.length;g++){var u=h[g];if(u.bendpoints.length>0){for(var T=this.edgeToDummyNodes.get(u),f=0;f<T.length;f++){var A=T[f],N=new e(A.getCenterX(),A.getCenterY()),L=u.bendpoints.get(f);L.x=N.x,L.y=N.y,A.getOwner().remove(A)}this.graphManager.add(u,u.source,u.target)}}},r.transform=function(h,g,u,T){if(null!=u&&null!=T){var f=g;return h<=50?f-=(g-g/u)/50*(50-h):f+=(g*T-g)/50*(h-50),f}var L,D;return h<=50?(L=9*g/500,D=g/10):(L=9*g/50,D=-8*g),L*h+D},r.findCenterOfTree=function(h){var g=[];g=g.concat(h);var u=[],T=new Map,f=!1,A=null;(1==g.length||2==g.length)&&(f=!0,A=g[0]);for(var N=0;N<g.length;N++){var D=(L=g[N]).getNeighborsList().size;T.set(L,L.getNeighborsList().size),1==D&&u.push(L)}var q=[];for(q=q.concat(u);!f;){var I=[];for(I=I.concat(q),q=[],N=0;N<g.length;N++){var L,it=g.indexOf(L=g[N]);it>=0&&g.splice(it,1),L.getNeighborsList().forEach(function(G){if(u.indexOf(G)<0){var i=T.get(G)-1;1==i&&q.push(G),T.set(G,i)}})}u=u.concat(q),(1==g.length||2==g.length)&&(f=!0,A=g[0])}return A},r.prototype.setGraphManager=function(h){this.graphManager=h},ct.exports=r},function(ct,At,S){"use strict";function E(){}E.seed=1,E.x=0,E.nextDouble=function(){return(E.x=1e4*Math.sin(E.seed++))-Math.floor(E.x)},ct.exports=E},function(ct,At,S){"use strict";var E=S(5);function n(o,a){this.lworldOrgX=0,this.lworldOrgY=0,this.ldeviceOrgX=0,this.ldeviceOrgY=0,this.lworldExtX=1,this.lworldExtY=1,this.ldeviceExtX=1,this.ldeviceExtY=1}n.prototype.getWorldOrgX=function(){return this.lworldOrgX},n.prototype.setWorldOrgX=function(o){this.lworldOrgX=o},n.prototype.getWorldOrgY=function(){return this.lworldOrgY},n.prototype.setWorldOrgY=function(o){this.lworldOrgY=o},n.prototype.getWorldExtX=function(){return this.lworldExtX},n.prototype.setWorldExtX=function(o){this.lworldExtX=o},n.prototype.getWorldExtY=function(){return this.lworldExtY},n.prototype.setWorldExtY=function(o){this.lworldExtY=o},n.prototype.getDeviceOrgX=function(){return this.ldeviceOrgX},n.prototype.setDeviceOrgX=function(o){this.ldeviceOrgX=o},n.prototype.getDeviceOrgY=function(){return this.ldeviceOrgY},n.prototype.setDeviceOrgY=function(o){this.ldeviceOrgY=o},n.prototype.getDeviceExtX=function(){return this.ldeviceExtX},n.prototype.setDeviceExtX=function(o){this.ldeviceExtX=o},n.prototype.getDeviceExtY=function(){return this.ldeviceExtY},n.prototype.setDeviceExtY=function(o){this.ldeviceExtY=o},n.prototype.transformX=function(o){var a=0,s=this.lworldExtX;return 0!=s&&(a=this.ldeviceOrgX+(o-this.lworldOrgX)*this.ldeviceExtX/s),a},n.prototype.transformY=function(o){var a=0,s=this.lworldExtY;return 0!=s&&(a=this.ldeviceOrgY+(o-this.lworldOrgY)*this.ldeviceExtY/s),a},n.prototype.inverseTransformX=function(o){var a=0,s=this.ldeviceExtX;return 0!=s&&(a=this.lworldOrgX+(o-this.ldeviceOrgX)*this.lworldExtX/s),a},n.prototype.inverseTransformY=function(o){var a=0,s=this.ldeviceExtY;return 0!=s&&(a=this.lworldOrgY+(o-this.ldeviceOrgY)*this.lworldExtY/s),a},n.prototype.inverseTransformPoint=function(o){return new E(this.inverseTransformX(o.x),this.inverseTransformY(o.y))},ct.exports=n},function(ct,At,S){"use strict";var n=S(15),o=S(4),a=S(0),s=S(8),c=S(9);function e(){n.call(this),this.useSmartIdealEdgeLengthCalculation=o.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION,this.gravityConstant=o.DEFAULT_GRAVITY_STRENGTH,this.compoundGravityConstant=o.DEFAULT_COMPOUND_GRAVITY_STRENGTH,this.gravityRangeFactor=o.DEFAULT_GRAVITY_RANGE_FACTOR,this.compoundGravityRangeFactor=o.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR,this.displacementThresholdPerNode=3*o.DEFAULT_EDGE_LENGTH/100,this.coolingFactor=o.DEFAULT_COOLING_FACTOR_INCREMENTAL,this.initialCoolingFactor=o.DEFAULT_COOLING_FACTOR_INCREMENTAL,this.totalDisplacement=0,this.oldTotalDisplacement=0,this.maxIterations=o.MAX_ITERATIONS}for(var v in e.prototype=Object.create(n.prototype),n)e[v]=n[v];e.prototype.initParameters=function(){n.prototype.initParameters.call(this,arguments),this.totalIterations=0,this.notAnimatedIterations=0,this.useFRGridVariant=o.DEFAULT_USE_SMART_REPULSION_RANGE_CALCULATION,this.grid=[]},e.prototype.calcIdealEdgeLengths=function(){for(var t,r,h,g,u,T,f,A=this.getGraphManager().getAllEdges(),N=0;N<A.length;N++)r=(t=A[N]).idealLength,t.isInterGraph&&(g=t.getSource(),u=t.getTarget(),T=t.getSourceInLca().getEstimatedSize(),f=t.getTargetInLca().getEstimatedSize(),this.useSmartIdealEdgeLengthCalculation&&(t.idealLength+=T+f-2*a.SIMPLE_NODE_SIZE),h=t.getLca().getInclusionTreeDepth(),t.idealLength+=r*o.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR*(g.getInclusionTreeDepth()+u.getInclusionTreeDepth()-2*h))},e.prototype.initSpringEmbedder=function(){var t=this.getAllNodes().length;this.incremental?(t>o.ADAPTATION_LOWER_NODE_LIMIT&&(this.coolingFactor=Math.max(this.coolingFactor*o.COOLING_ADAPTATION_FACTOR,this.coolingFactor-(t-o.ADAPTATION_LOWER_NODE_LIMIT)/(o.ADAPTATION_UPPER_NODE_LIMIT-o.ADAPTATION_LOWER_NODE_LIMIT)*this.coolingFactor*(1-o.COOLING_ADAPTATION_FACTOR))),this.maxNodeDisplacement=o.MAX_NODE_DISPLACEMENT_INCREMENTAL):(this.coolingFactor=t>o.ADAPTATION_LOWER_NODE_LIMIT?Math.max(o.COOLING_ADAPTATION_FACTOR,1-(t-o.ADAPTATION_LOWER_NODE_LIMIT)/(o.ADAPTATION_UPPER_NODE_LIMIT-o.ADAPTATION_LOWER_NODE_LIMIT)*(1-o.COOLING_ADAPTATION_FACTOR)):1,this.initialCoolingFactor=this.coolingFactor,this.maxNodeDisplacement=o.MAX_NODE_DISPLACEMENT),this.maxIterations=Math.max(5*this.getAllNodes().length,this.maxIterations),this.displacementThresholdPerNode=3*o.DEFAULT_EDGE_LENGTH/100,this.totalDisplacementThreshold=this.displacementThresholdPerNode*this.getAllNodes().length,this.repulsionRange=this.calcRepulsionRange()},e.prototype.calcSpringForces=function(){for(var r,t=this.getAllEdges(),h=0;h<t.length;h++)this.calcSpringForce(r=t[h],r.idealLength)},e.prototype.calcRepulsionForces=function(){var h,g,u,T,A,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],f=this.getAllNodes();if(this.useFRGridVariant)for(this.totalIterations%o.GRID_CALCULATION_CHECK_PERIOD==1&&t&&this.updateGrid(),A=new Set,h=0;h<f.length;h++)this.calculateRepulsionForceOfANode(u=f[h],A,t,r),A.add(u);else for(h=0;h<f.length;h++)for(u=f[h],g=h+1;g<f.length;g++)T=f[g],u.getOwner()==T.getOwner()&&this.calcRepulsionForce(u,T)},e.prototype.calcGravitationalForces=function(){for(var r=this.getAllNodesToApplyGravitation(),h=0;h<r.length;h++)this.calcGravitationalForce(r[h])},e.prototype.moveNodes=function(){for(var t=this.getAllNodes(),h=0;h<t.length;h++)t[h].move()},e.prototype.calcSpringForce=function(t,r){var u,T,f,A,h=t.getSource(),g=t.getTarget();if(this.uniformLeafNodeSizes&&null==h.getChild()&&null==g.getChild())t.updateLengthSimple();else if(t.updateLength(),t.isOverlapingSourceAndTarget)return;0!=(u=t.getLength())&&(A=(T=t.edgeElasticity*(u-r))*(t.lengthY/u),h.springForceX+=f=T*(t.lengthX/u),h.springForceY+=A,g.springForceX-=f,g.springForceY-=A)},e.prototype.calcRepulsionForce=function(t,r){var f,A,N,L,D,q,I,h=t.getRect(),g=r.getRect(),u=new Array(2),T=new Array(4);if(h.intersects(g)){s.calcSeparationAmount(h,g,u,o.DEFAULT_EDGE_LENGTH/2),I=2*u[1];var it=t.noOfChildren*r.noOfChildren/(t.noOfChildren+r.noOfChildren);t.repulsionForceX-=it*(q=2*u[0]),t.repulsionForceY-=it*I,r.repulsionForceX+=it*q,r.repulsionForceY+=it*I}else this.uniformLeafNodeSizes&&null==t.getChild()&&null==r.getChild()?(f=g.getCenterX()-h.getCenterX(),A=g.getCenterY()-h.getCenterY()):(s.getIntersection(h,g,T),f=T[2]-T[0],A=T[3]-T[1]),Math.abs(f)<o.MIN_REPULSION_DIST&&(f=c.sign(f)*o.MIN_REPULSION_DIST),Math.abs(A)<o.MIN_REPULSION_DIST&&(A=c.sign(A)*o.MIN_REPULSION_DIST),N=f*f+A*A,L=Math.sqrt(N),I=(D=(t.nodeRepulsion/2+r.nodeRepulsion/2)*t.noOfChildren*r.noOfChildren/N)*A/L,t.repulsionForceX-=q=D*f/L,t.repulsionForceY-=I,r.repulsionForceX+=q,r.repulsionForceY+=I},e.prototype.calcGravitationalForce=function(t){var r,h,g,u,T,f,A,N;h=((r=t.getOwner()).getRight()+r.getLeft())/2,g=(r.getTop()+r.getBottom())/2,u=t.getCenterX()-h,T=t.getCenterY()-g,f=Math.abs(u)+t.getWidth()/2,A=Math.abs(T)+t.getHeight()/2,t.getOwner()==this.graphManager.getRoot()?(f>(N=r.getEstimatedSize()*this.gravityRangeFactor)||A>N)&&(t.gravitationForceX=-this.gravityConstant*u,t.gravitationForceY=-this.gravityConstant*T):(f>(N=r.getEstimatedSize()*this.compoundGravityRangeFactor)||A>N)&&(t.gravitationForceX=-this.gravityConstant*u*this.compoundGravityConstant,t.gravitationForceY=-this.gravityConstant*T*this.compoundGravityConstant)},e.prototype.isConverged=function(){var t,r=!1;return this.totalIterations>this.maxIterations/3&&(r=Math.abs(this.totalDisplacement-this.oldTotalDisplacement)<2),t=this.totalDisplacement<this.totalDisplacementThreshold,this.oldTotalDisplacement=this.totalDisplacement,t||r},e.prototype.animate=function(){this.animationDuringLayout&&!this.isSubLayout&&(this.notAnimatedIterations==this.animationPeriod?(this.update(),this.notAnimatedIterations=0):this.notAnimatedIterations++)},e.prototype.calcNoOfChildrenForAllNodes=function(){for(var t,r=this.graphManager.getAllNodes(),h=0;h<r.length;h++)(t=r[h]).noOfChildren=t.getNoOfChildren()},e.prototype.calcGrid=function(t){var r,h;r=parseInt(Math.ceil((t.getRight()-t.getLeft())/this.repulsionRange)),h=parseInt(Math.ceil((t.getBottom()-t.getTop())/this.repulsionRange));for(var g=new Array(r),u=0;u<r;u++)g[u]=new Array(h);for(u=0;u<r;u++)for(var T=0;T<h;T++)g[u][T]=new Array;return g},e.prototype.addNodeToGrid=function(t,r,h){var g,u,T,f;g=parseInt(Math.floor((t.getRect().x-r)/this.repulsionRange)),u=parseInt(Math.floor((t.getRect().width+t.getRect().x-r)/this.repulsionRange)),T=parseInt(Math.floor((t.getRect().y-h)/this.repulsionRange)),f=parseInt(Math.floor((t.getRect().height+t.getRect().y-h)/this.repulsionRange));for(var A=g;A<=u;A++)for(var N=T;N<=f;N++)this.grid[A][N].push(t),t.setGridCoordinates(g,u,T,f)},e.prototype.updateGrid=function(){var t,h=this.getAllNodes();for(this.grid=this.calcGrid(this.graphManager.getRoot()),t=0;t<h.length;t++)this.addNodeToGrid(h[t],this.graphManager.getRoot().getLeft(),this.graphManager.getRoot().getTop())},e.prototype.calculateRepulsionForceOfANode=function(t,r,h,g){if(this.totalIterations%o.GRID_CALCULATION_CHECK_PERIOD==1&&h||g){var u=new Set;t.surrounding=new Array;for(var T,f=this.grid,A=t.startX-1;A<t.finishX+2;A++)for(var N=t.startY-1;N<t.finishY+2;N++)if(!(A<0||N<0||A>=f.length||N>=f[0].length))for(var L=0;L<f[A][N].length;L++)if(T=f[A][N][L],t.getOwner()==T.getOwner()&&t!=T&&!r.has(T)&&!u.has(T)){var D=Math.abs(t.getCenterX()-T.getCenterX())-(t.getWidth()/2+T.getWidth()/2),q=Math.abs(t.getCenterY()-T.getCenterY())-(t.getHeight()/2+T.getHeight()/2);D<=this.repulsionRange&&q<=this.repulsionRange&&u.add(T)}t.surrounding=[].concat(function E(t){if(Array.isArray(t)){for(var r=0,h=Array(t.length);r<t.length;r++)h[r]=t[r];return h}return Array.from(t)}(u))}for(A=0;A<t.surrounding.length;A++)this.calcRepulsionForce(t,t.surrounding[A])},e.prototype.calcRepulsionRange=function(){return 0},ct.exports=e},function(ct,At,S){"use strict";var E=S(1),n=S(4);function o(s,c,e){E.call(this,s,c,e),this.idealLength=n.DEFAULT_EDGE_LENGTH,this.edgeElasticity=n.DEFAULT_SPRING_STRENGTH}for(var a in o.prototype=Object.create(E.prototype),E)o[a]=E[a];ct.exports=o},function(ct,At,S){"use strict";var E=S(3),n=S(4);function o(s,c,e,v){E.call(this,s,c,e,v),this.nodeRepulsion=n.DEFAULT_REPULSION_STRENGTH,this.springForceX=0,this.springForceY=0,this.repulsionForceX=0,this.repulsionForceY=0,this.gravitationForceX=0,this.gravitationForceY=0,this.displacementX=0,this.displacementY=0,this.startX=0,this.finishX=0,this.startY=0,this.finishY=0,this.surrounding=[]}for(var a in o.prototype=Object.create(E.prototype),E)o[a]=E[a];o.prototype.setGridCoordinates=function(s,c,e,v){this.startX=s,this.finishX=c,this.startY=e,this.finishY=v},ct.exports=o},function(ct,At,S){"use strict";function E(n,o){this.width=0,this.height=0,null!==n&&null!==o&&(this.height=o,this.width=n)}E.prototype.getWidth=function(){return this.width},E.prototype.setWidth=function(n){this.width=n},E.prototype.getHeight=function(){return this.height},E.prototype.setHeight=function(n){this.height=n},ct.exports=E},function(ct,At,S){"use strict";var E=S(14);function n(){this.map={},this.keys=[]}n.prototype.put=function(o,a){var s=E.createID(o);this.contains(s)||(this.map[s]=a,this.keys.push(o))},n.prototype.contains=function(o){return E.createID(o),null!=this.map[o]},n.prototype.get=function(o){var a=E.createID(o);return this.map[a]},n.prototype.keySet=function(){return this.keys},ct.exports=n},function(ct,At,S){"use strict";var E=S(14);function n(){this.set={}}n.prototype.add=function(o){var a=E.createID(o);this.contains(a)||(this.set[a]=o)},n.prototype.remove=function(o){delete this.set[E.createID(o)]},n.prototype.clear=function(){this.set={}},n.prototype.contains=function(o){return this.set[E.createID(o)]==o},n.prototype.isEmpty=function(){return 0===this.size()},n.prototype.size=function(){return Object.keys(this.set).length},n.prototype.addAllTo=function(o){for(var a=Object.keys(this.set),s=a.length,c=0;c<s;c++)o.push(this.set[a[c]])},n.prototype.size=function(){return Object.keys(this.set).length},n.prototype.addAll=function(o){for(var a=o.length,s=0;s<a;s++)this.add(o[s])},ct.exports=n},function(ct,At,S){"use strict";function E(){}E.multMat=function(n,o){for(var a=[],s=0;s<n.length;s++){a[s]=[];for(var c=0;c<o[0].length;c++){a[s][c]=0;for(var e=0;e<n[0].length;e++)a[s][c]+=n[s][e]*o[e][c]}}return a},E.transpose=function(n){for(var o=[],a=0;a<n[0].length;a++){o[a]=[];for(var s=0;s<n.length;s++)o[a][s]=n[s][a]}return o},E.multCons=function(n,o){for(var a=[],s=0;s<n.length;s++)a[s]=n[s]*o;return a},E.minusOp=function(n,o){for(var a=[],s=0;s<n.length;s++)a[s]=n[s]-o[s];return a},E.dotProduct=function(n,o){for(var a=0,s=0;s<n.length;s++)a+=n[s]*o[s];return a},E.mag=function(n){return Math.sqrt(this.dotProduct(n,n))},E.normalize=function(n){for(var o=[],a=this.mag(n),s=0;s<n.length;s++)o[s]=n[s]/a;return o},E.multGamma=function(n){for(var o=[],a=0,s=0;s<n.length;s++)a+=n[s];a*=-1/n.length;for(var c=0;c<n.length;c++)o[c]=a+n[c];return o},E.multL=function(n,o,a){for(var s=[],c=[],e=[],v=0;v<o[0].length;v++){for(var t=0,r=0;r<o.length;r++)t+=-.5*o[r][v]*n[r];c[v]=t}for(var h=0;h<a.length;h++){for(var g=0,u=0;u<a.length;u++)g+=a[h][u]*c[u];e[h]=g}for(var T=0;T<o.length;T++){for(var f=0,A=0;A<o[0].length;A++)f+=o[T][A]*e[A];s[T]=f}return s},ct.exports=E},function(ct,At,S){"use strict";var E=function(){function s(c,e){for(var v=0;v<e.length;v++){var t=e[v];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(c,t.key,t)}}return function(c,e,v){return e&&s(c.prototype,e),v&&s(c,v),c}}();var o=S(11),a=function(){function s(c,e){(function n(s,c){if(!(s instanceof c))throw new TypeError("Cannot call a class as a function")})(this,s),(null!==e||void 0!==e)&&(this.compareFunction=this._defaultCompareFunction);var v;v=c instanceof o?c.size():c.length,this._quicksort(c,0,v-1)}return E(s,[{key:"_quicksort",value:function(e,v,t){if(v<t){var r=this._partition(e,v,t);this._quicksort(e,v,r),this._quicksort(e,r+1,t)}}},{key:"_partition",value:function(e,v,t){for(var r=this._get(e,v),h=v,g=t;;){for(;this.compareFunction(r,this._get(e,g));)g--;for(;this.compareFunction(this._get(e,h),r);)h++;if(!(h<g))return g;this._swap(e,h,g),h++,g--}}},{key:"_get",value:function(e,v){return e instanceof o?e.get_object_at(v):e[v]}},{key:"_set",value:function(e,v,t){e instanceof o?e.set_object_at(v,t):e[v]=t}},{key:"_swap",value:function(e,v,t){var r=this._get(e,v);this._set(e,v,this._get(e,t)),this._set(e,t,r)}},{key:"_defaultCompareFunction",value:function(e,v){return v>e}}]),s}();ct.exports=a},function(ct,At,S){"use strict";function E(){}E.svd=function(n){this.U=null,this.V=null,this.s=null,this.m=0,this.n=0,this.m=n.length,this.n=n[0].length;var o=Math.min(this.m,this.n);this.s=function(Dt){for(var St=[];Dt-- >0;)St.push(0);return St}(Math.min(this.m+1,this.n)),this.U=function Ht(Yt){if(0==Yt.length)return 0;for(var Vt=[],Pt=0;Pt<Yt[0];Pt++)Vt.push(Ht(Yt.slice(1)));return Vt}([this.m,o]),this.V=function Ht(Yt){if(0==Yt.length)return 0;for(var Vt=[],Pt=0;Pt<Yt[0];Pt++)Vt.push(Ht(Yt.slice(1)));return Vt}([this.n,this.n]);for(var a=function(Dt){for(var St=[];Dt-- >0;)St.push(0);return St}(this.n),s=function(Dt){for(var St=[];Dt-- >0;)St.push(0);return St}(this.m),e=!0,v=Math.min(this.m-1,this.n),t=Math.max(0,Math.min(this.n-2,this.m)),r=0;r<Math.max(v,t);r++){if(r<v){this.s[r]=0;for(var h=r;h<this.m;h++)this.s[r]=E.hypot(this.s[r],n[h][r]);if(0!==this.s[r]){n[r][r]<0&&(this.s[r]=-this.s[r]);for(var g=r;g<this.m;g++)n[g][r]/=this.s[r];n[r][r]+=1}this.s[r]=-this.s[r]}for(var u=r+1;u<this.n;u++){if(function(Dt,St){return Dt&&St}(r<v,0!==this.s[r])){for(var T=0,f=r;f<this.m;f++)T+=n[f][r]*n[f][u];T=-T/n[r][r];for(var A=r;A<this.m;A++)n[A][u]+=T*n[A][r]}a[u]=n[r][u]}if(function(Dt,St){return St}(0,r<v))for(var N=r;N<this.m;N++)this.U[N][r]=n[N][r];if(r<t){a[r]=0;for(var L=r+1;L<this.n;L++)a[r]=E.hypot(a[r],a[L]);if(0!==a[r]){a[r+1]<0&&(a[r]=-a[r]);for(var D=r+1;D<this.n;D++)a[D]/=a[r];a[r+1]+=1}if(a[r]=-a[r],function(Dt,St){return Dt&&St}(r+1<this.m,0!==a[r])){for(var q=r+1;q<this.m;q++)s[q]=0;for(var I=r+1;I<this.n;I++)for(var it=r+1;it<this.m;it++)s[it]+=a[I]*n[it][I];for(var pt=r+1;pt<this.n;pt++)for(var lt=-a[pt]/a[r+1],wt=r+1;wt<this.m;wt++)n[wt][pt]+=lt*s[wt]}for(var G=r+1;G<this.n;G++)this.V[G][r]=a[G]}}var k=Math.min(this.n,this.m+1);v<this.n&&(this.s[v]=n[v][v]),this.m<k&&(this.s[k-1]=0),t+1<k&&(a[t]=n[t][k-1]),a[k-1]=0;for(var i=v;i<o;i++){for(var m=0;m<this.m;m++)this.U[m][i]=0;this.U[i][i]=1}for(var l=v-1;l>=0;l--)if(0!==this.s[l]){for(var p=l+1;p<o;p++){for(var d=0,R=l;R<this.m;R++)d+=this.U[R][l]*this.U[R][p];d=-d/this.U[l][l];for(var w=l;w<this.m;w++)this.U[w][p]+=d*this.U[w][l]}for(var X=l;X<this.m;X++)this.U[X][l]=-this.U[X][l];this.U[l][l]=1+this.U[l][l];for(var U=0;U<l-1;U++)this.U[U][l]=0}else{for(var F=0;F<this.m;F++)this.U[F][l]=0;this.U[l][l]=1}for(var Q=this.n-1;Q>=0;Q--){if(function(Dt,St){return Dt&&St}(Q<t,0!==a[Q]))for(var st=Q+1;st<o;st++){for(var V=0,ht=Q+1;ht<this.n;ht++)V+=this.V[ht][Q]*this.V[ht][st];V=-V/this.V[Q+1][Q];for(var J=Q+1;J<this.n;J++)this.V[J][st]+=V*this.V[J][Q]}for(var O=0;O<this.n;O++)this.V[O][Q]=0;this.V[Q][Q]=1}for(var z=k-1,nt=Math.pow(2,-52),Ct=Math.pow(2,-966);k>0;){var _=void 0,bt=void 0;for(_=k-2;_>=-1&&-1!==_;_--)if(Math.abs(a[_])<=Ct+nt*(Math.abs(this.s[_])+Math.abs(this.s[_+1]))){a[_]=0;break}if(_===k-2)bt=4;else{var Rt=void 0;for(Rt=k-1;Rt>=_&&Rt!==_;Rt--){var Wt=(Rt!==k?Math.abs(a[Rt]):0)+(Rt!==_+1?Math.abs(a[Rt-1]):0);if(Math.abs(this.s[Rt])<=Ct+nt*Wt){this.s[Rt]=0;break}}Rt===_?bt=3:Rt===k-1?bt=1:(bt=2,_=Rt)}switch(_++,bt){case 1:var Gt=a[k-2];a[k-2]=0;for(var y=k-2;y>=_;y--){var C=E.hypot(this.s[y],Gt),Y=this.s[y]/C,W=Gt/C;this.s[y]=C,y!==_&&(Gt=-W*a[y-1],a[y-1]=Y*a[y-1]);for(var et=0;et<this.n;et++)C=Y*this.V[et][y]+W*this.V[et][k-1],this.V[et][k-1]=-W*this.V[et][y]+Y*this.V[et][k-1],this.V[et][y]=C}break;case 2:var j=a[_-1];a[_-1]=0;for(var ot=_;ot<k;ot++){var tt=E.hypot(this.s[ot],j),ut=this.s[ot]/tt,vt=j/tt;this.s[ot]=tt,j=-vt*a[ot],a[ot]=ut*a[ot];for(var rt=0;rt<this.m;rt++)tt=ut*this.U[rt][ot]+vt*this.U[rt][_-1],this.U[rt][_-1]=-vt*this.U[rt][ot]+ut*this.U[rt][_-1],this.U[rt][ot]=tt}break;case 3:var dt=Math.max(Math.max(Math.max(Math.max(Math.abs(this.s[k-1]),Math.abs(this.s[k-2])),Math.abs(a[k-2])),Math.abs(this.s[_])),Math.abs(a[_])),Et=this.s[k-1]/dt,M=this.s[k-2]/dt,x=a[k-2]/dt,b=this.s[_]/dt,P=a[_]/dt,H=((M+Et)*(M-Et)+x*x)/2,K=Et*x*(Et*x),ft=0;(function(Dt,St){return Dt||St})(0!==H,0!==K)&&(ft=Math.sqrt(H*H+K),H<0&&(ft=-ft),ft=K/(H+ft));for(var at=(b+Et)*(b-Et)+ft,B=b*P,Z=_;Z<k-1;Z++){var mt=E.hypot(at,B),Mt=at/mt,Tt=B/mt;Z!==_&&(a[Z-1]=mt),at=Mt*this.s[Z]+Tt*a[Z],a[Z]=Mt*a[Z]-Tt*this.s[Z],B=Tt*this.s[Z+1],this.s[Z+1]=Mt*this.s[Z+1];for(var xt=0;xt<this.n;xt++)mt=Mt*this.V[xt][Z]+Tt*this.V[xt][Z+1],this.V[xt][Z+1]=-Tt*this.V[xt][Z]+Mt*this.V[xt][Z+1],this.V[xt][Z]=mt;if(Mt=at/(mt=E.hypot(at,B)),Tt=B/mt,this.s[Z]=mt,at=Mt*a[Z]+Tt*this.s[Z+1],this.s[Z+1]=-Tt*a[Z]+Mt*this.s[Z+1],B=Tt*a[Z+1],a[Z+1]=Mt*a[Z+1],Z<this.m-1)for(var Lt=0;Lt<this.m;Lt++)mt=Mt*this.U[Lt][Z]+Tt*this.U[Lt][Z+1],this.U[Lt][Z+1]=-Tt*this.U[Lt][Z]+Mt*this.U[Lt][Z+1],this.U[Lt][Z]=mt}a[k-2]=at;break;case 4:if(this.s[_]<=0&&(this.s[_]=this.s[_]<0?-this.s[_]:0,e))for(var gt=0;gt<=z;gt++)this.V[gt][_]=-this.V[gt][_];for(;_<z&&!(this.s[_]>=this.s[_+1]);){var Ot=this.s[_];if(this.s[_]=this.s[_+1],this.s[_+1]=Ot,_<this.n-1)for(var yt=0;yt<this.n;yt++)Ot=this.V[yt][_+1],this.V[yt][_+1]=this.V[yt][_],this.V[yt][_]=Ot;if(_<this.m-1)for(var Nt=0;Nt<this.m;Nt++)Ot=this.U[Nt][_+1],this.U[Nt][_+1]=this.U[Nt][_],this.U[Nt][_]=Ot;_++}k--}}return{U:this.U,V:this.V,S:this.s}},E.hypot=function(n,o){var a=void 0;return Math.abs(n)>Math.abs(o)?(a=o/n,a=Math.abs(n)*Math.sqrt(1+a*a)):0!=o?(a=n/o,a=Math.abs(o)*Math.sqrt(1+a*a)):a=0,a},ct.exports=E},function(ct,At,S){"use strict";var E=function(){function a(s,c){for(var e=0;e<c.length;e++){var v=c[e];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(s,v.key,v)}}return function(s,c,e){return c&&a(s.prototype,c),e&&a(s,e),s}}();var o=function(){function a(s,c){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,v=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,t=arguments.length>4&&void 0!==arguments[4]?arguments[4]:-1;(function n(a,s){if(!(a instanceof s))throw new TypeError("Cannot call a class as a function")})(this,a),this.sequence1=s,this.sequence2=c,this.match_score=e,this.mismatch_penalty=v,this.gap_penalty=t,this.iMax=s.length+1,this.jMax=c.length+1,this.grid=new Array(this.iMax);for(var r=0;r<this.iMax;r++){this.grid[r]=new Array(this.jMax);for(var h=0;h<this.jMax;h++)this.grid[r][h]=0}this.tracebackGrid=new Array(this.iMax);for(var g=0;g<this.iMax;g++){this.tracebackGrid[g]=new Array(this.jMax);for(var u=0;u<this.jMax;u++)this.tracebackGrid[g][u]=[null,null,null]}this.alignments=[],this.score=-1,this.computeGrids()}return E(a,[{key:"getScore",value:function(){return this.score}},{key:"getAlignments",value:function(){return this.alignments}},{key:"computeGrids",value:function(){for(var c=1;c<this.jMax;c++)this.grid[0][c]=this.grid[0][c-1]+this.gap_penalty,this.tracebackGrid[0][c]=[!1,!1,!0];for(var e=1;e<this.iMax;e++)this.grid[e][0]=this.grid[e-1][0]+this.gap_penalty,this.tracebackGrid[e][0]=[!1,!0,!1];for(var v=1;v<this.iMax;v++)for(var t=1;t<this.jMax;t++){var u=[this.sequence1[v-1]===this.sequence2[t-1]?this.grid[v-1][t-1]+this.match_score:this.grid[v-1][t-1]+this.mismatch_penalty,this.grid[v-1][t]+this.gap_penalty,this.grid[v][t-1]+this.gap_penalty],T=this.arrayAllMaxIndexes(u);this.grid[v][t]=u[T[0]],this.tracebackGrid[v][t]=[T.includes(0),T.includes(1),T.includes(2)]}this.score=this.grid[this.iMax-1][this.jMax-1]}},{key:"alignmentTraceback",value:function(){var c=[];for(c.push({pos:[this.sequence1.length,this.sequence2.length],seq1:"",seq2:""});c[0];){var e=c[0],v=this.tracebackGrid[e.pos[0]][e.pos[1]];v[0]&&c.push({pos:[e.pos[0]-1,e.pos[1]-1],seq1:this.sequence1[e.pos[0]-1]+e.seq1,seq2:this.sequence2[e.pos[1]-1]+e.seq2}),v[1]&&c.push({pos:[e.pos[0]-1,e.pos[1]],seq1:this.sequence1[e.pos[0]-1]+e.seq1,seq2:"-"+e.seq2}),v[2]&&c.push({pos:[e.pos[0],e.pos[1]-1],seq1:"-"+e.seq1,seq2:this.sequence2[e.pos[1]-1]+e.seq2}),0===e.pos[0]&&0===e.pos[1]&&this.alignments.push({sequence1:e.seq1,sequence2:e.seq2}),c.shift()}return this.alignments}},{key:"getAllIndexes",value:function(c,e){for(var v=[],t=-1;-1!==(t=c.indexOf(e,t+1));)v.push(t);return v}},{key:"arrayAllMaxIndexes",value:function(c){return this.getAllIndexes(c,Math.max.apply(null,c))}}]),a}();ct.exports=o},function(ct,At,S){"use strict";var E=function(){};E.FDLayout=S(18),E.FDLayoutConstants=S(4),E.FDLayoutEdge=S(19),E.FDLayoutNode=S(20),E.DimensionD=S(21),E.HashMap=S(22),E.HashSet=S(23),E.IGeometry=S(8),E.IMath=S(9),E.Integer=S(10),E.Point=S(12),E.PointD=S(5),E.RandomSeed=S(16),E.RectangleD=S(13),E.Transform=S(17),E.UniqueIDGeneretor=S(14),E.Quicksort=S(25),E.LinkedList=S(11),E.LGraphObject=S(2),E.LGraph=S(6),E.LEdge=S(1),E.LGraphManager=S(7),E.LNode=S(3),E.Layout=S(15),E.LayoutConstants=S(0),E.NeedlemanWunsch=S(27),E.Matrix=S(24),E.SVD=S(26),ct.exports=E},function(ct,At,S){"use strict";function E(){this.listeners=[]}var n=E.prototype;n.addListener=function(o,a){this.listeners.push({event:o,callback:a})},n.removeListener=function(o,a){for(var s=this.listeners.length;s>=0;s--){var c=this.listeners[s];c.event===o&&c.callback===a&&this.listeners.splice(s,1)}},n.emit=function(o,a){for(var s=0;s<this.listeners.length;s++){var c=this.listeners[s];o===c.event&&c.callback(a)}},ct.exports=E}])},4329:function(kt,ct,At){var S;kt.exports=(S=At(3545),(()=>{"use strict";var E={45:(s,c,e)=>{var v={};v.layoutBase=e(551),v.CoSEConstants=e(806),v.CoSEEdge=e(767),v.CoSEGraph=e(880),v.CoSEGraphManager=e(578),v.CoSELayout=e(765),v.CoSENode=e(991),v.ConstraintHandler=e(902),s.exports=v},806:(s,c,e)=>{var v=e(551).FDLayoutConstants;function t(){}for(var r in v)t[r]=v[r];t.DEFAULT_USE_MULTI_LEVEL_SCALING=!1,t.DEFAULT_RADIAL_SEPARATION=v.DEFAULT_EDGE_LENGTH,t.DEFAULT_COMPONENT_SEPERATION=60,t.TILE=!0,t.TILING_PADDING_VERTICAL=10,t.TILING_PADDING_HORIZONTAL=10,t.TRANSFORM_ON_CONSTRAINT_HANDLING=!0,t.ENFORCE_CONSTRAINTS=!0,t.APPLY_LAYOUT=!0,t.RELAX_MOVEMENT_ON_CONSTRAINTS=!0,t.TREE_REDUCTION_ON_INCREMENTAL=!0,t.PURE_INCREMENTAL=t.DEFAULT_INCREMENTAL,s.exports=t},767:(s,c,e)=>{var v=e(551).FDLayoutEdge;function t(h,g,u){v.call(this,h,g,u)}for(var r in t.prototype=Object.create(v.prototype),v)t[r]=v[r];s.exports=t},880:(s,c,e)=>{var v=e(551).LGraph;function t(h,g,u){v.call(this,h,g,u)}for(var r in t.prototype=Object.create(v.prototype),v)t[r]=v[r];s.exports=t},578:(s,c,e)=>{var v=e(551).LGraphManager;function t(h){v.call(this,h)}for(var r in t.prototype=Object.create(v.prototype),v)t[r]=v[r];s.exports=t},765:(s,c,e)=>{var v=e(551).FDLayout,t=e(578),r=e(880),h=e(991),g=e(767),u=e(806),T=e(902),f=e(551).FDLayoutConstants,A=e(551).LayoutConstants,N=e(551).Point,L=e(551).PointD,D=e(551).DimensionD,q=e(551).Layout,I=e(551).Integer,it=e(551).IGeometry,pt=e(551).LGraph,lt=e(551).Transform,wt=e(551).LinkedList;function G(){v.call(this),this.toBeTiled={},this.constraints={}}for(var k in G.prototype=Object.create(v.prototype),v)G[k]=v[k];G.prototype.newGraphManager=function(){var i=new t(this);return this.graphManager=i,i},G.prototype.newGraph=function(i){return new r(null,this.graphManager,i)},G.prototype.newNode=function(i){return new h(this.graphManager,i)},G.prototype.newEdge=function(i){return new g(null,null,i)},G.prototype.initParameters=function(){v.prototype.initParameters.call(this,arguments),this.isSubLayout||(this.idealEdgeLength=u.DEFAULT_EDGE_LENGTH<10?10:u.DEFAULT_EDGE_LENGTH,this.useSmartIdealEdgeLengthCalculation=u.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION,this.gravityConstant=f.DEFAULT_GRAVITY_STRENGTH,this.compoundGravityConstant=f.DEFAULT_COMPOUND_GRAVITY_STRENGTH,this.gravityRangeFactor=f.DEFAULT_GRAVITY_RANGE_FACTOR,this.compoundGravityRangeFactor=f.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR,this.prunedNodesAll=[],this.growTreeIterations=0,this.afterGrowthIterations=0,this.isTreeGrowing=!1,this.isGrowthFinished=!1)},G.prototype.initSpringEmbedder=function(){v.prototype.initSpringEmbedder.call(this),this.coolingCycle=0,this.maxCoolingCycle=this.maxIterations/f.CONVERGENCE_CHECK_PERIOD,this.finalTemperature=.04,this.coolingAdjuster=1},G.prototype.layout=function(){return A.DEFAULT_CREATE_BENDS_AS_NEEDED&&(this.createBendpoints(),this.graphManager.resetAllEdges()),this.level=0,this.classicLayout()},G.prototype.classicLayout=function(){if(this.nodesWithGravity=this.calculateNodesToApplyGravitationTo(),this.graphManager.setAllNodesToApplyGravitation(this.nodesWithGravity),this.calcNoOfChildrenForAllNodes(),this.graphManager.calcLowestCommonAncestors(),this.graphManager.calcInclusionTreeDepths(),this.graphManager.getRoot().calcEstimatedSize(),this.calcIdealEdgeLengths(),this.incremental){if(u.TREE_REDUCTION_ON_INCREMENTAL){this.reduceTrees(),this.graphManager.resetAllNodesToApplyGravitation();var m=new Set(this.getAllNodes()),l=this.nodesWithGravity.filter(function(R){return m.has(R)});this.graphManager.setAllNodesToApplyGravitation(l)}}else{var i=this.getFlatForest();i.length>0?this.positionNodesRadially(i):(this.reduceTrees(),this.graphManager.resetAllNodesToApplyGravitation(),m=new Set(this.getAllNodes()),l=this.nodesWithGravity.filter(function(p){return m.has(p)}),this.graphManager.setAllNodesToApplyGravitation(l),this.positionNodesRandomly())}return Object.keys(this.constraints).length>0&&(T.handleConstraints(this),this.initConstraintVariables()),this.initSpringEmbedder(),u.APPLY_LAYOUT&&this.runSpringEmbedder(),!0},G.prototype.tick=function(){if(this.totalIterations++,this.totalIterations===this.maxIterations&&!this.isTreeGrowing&&!this.isGrowthFinished){if(!(this.prunedNodesAll.length>0))return!0;this.isTreeGrowing=!0}if(this.totalIterations%f.CONVERGENCE_CHECK_PERIOD==0&&!this.isTreeGrowing&&!this.isGrowthFinished){if(this.isConverged()){if(!(this.prunedNodesAll.length>0))return!0;this.isTreeGrowing=!0}this.coolingCycle++,0==this.layoutQuality?this.coolingAdjuster=this.coolingCycle:1==this.layoutQuality&&(this.coolingAdjuster=this.coolingCycle/3),this.coolingFactor=Math.max(this.initialCoolingFactor-Math.pow(this.coolingCycle,Math.log(100*(this.initialCoolingFactor-this.finalTemperature))/Math.log(this.maxCoolingCycle))/100*this.coolingAdjuster,this.finalTemperature),this.animationPeriod=Math.ceil(this.initialAnimationPeriod*Math.sqrt(this.coolingFactor))}if(this.isTreeGrowing){if(this.growTreeIterations%10==0)if(this.prunedNodesAll.length>0){this.graphManager.updateBounds(),this.updateGrid(),this.growTree(this.prunedNodesAll),this.graphManager.resetAllNodesToApplyGravitation();var i=new Set(this.getAllNodes()),m=this.nodesWithGravity.filter(function(d){return i.has(d)});this.graphManager.setAllNodesToApplyGravitation(m),this.graphManager.updateBounds(),this.updateGrid(),this.coolingFactor=u.PURE_INCREMENTAL?f.DEFAULT_COOLING_FACTOR_INCREMENTAL/2:f.DEFAULT_COOLING_FACTOR_INCREMENTAL}else this.isTreeGrowing=!1,this.isGrowthFinished=!0;this.growTreeIterations++}if(this.isGrowthFinished){if(this.isConverged())return!0;this.afterGrowthIterations%10==0&&(this.graphManager.updateBounds(),this.updateGrid()),this.coolingFactor=u.PURE_INCREMENTAL?f.DEFAULT_COOLING_FACTOR_INCREMENTAL/2*((100-this.afterGrowthIterations)/100):f.DEFAULT_COOLING_FACTOR_INCREMENTAL*((100-this.afterGrowthIterations)/100),this.afterGrowthIterations++}var l=!this.isTreeGrowing&&!this.isGrowthFinished,p=this.growTreeIterations%10==1&&this.isTreeGrowing||this.afterGrowthIterations%10==1&&this.isGrowthFinished;return this.totalDisplacement=0,this.graphManager.updateBounds(),this.calcSpringForces(),this.calcRepulsionForces(l,p),this.calcGravitationalForces(),this.moveNodes(),this.animate(),!1},G.prototype.getPositionsData=function(){for(var i=this.graphManager.getAllNodes(),m={},l=0;l<i.length;l++){var p=i[l].rect,d=i[l].id;m[d]={id:d,x:p.getCenterX(),y:p.getCenterY(),w:p.width,h:p.height}}return m},G.prototype.runSpringEmbedder=function(){this.initialAnimationPeriod=25,this.animationPeriod=this.initialAnimationPeriod;var i=!1;if("during"===f.ANIMATE)this.emit("layoutstarted");else{for(;!i;)i=this.tick();this.graphManager.updateBounds()}},G.prototype.moveNodes=function(){for(var i=this.getAllNodes(),l=0;l<i.length;l++)i[l].calculateDisplacement();for(Object.keys(this.constraints).length>0&&this.updateDisplacements(),l=0;l<i.length;l++)i[l].move()},G.prototype.initConstraintVariables=function(){var i=this;this.idToNodeMap=new Map,this.fixedNodeSet=new Set;for(var m=this.graphManager.getAllNodes(),l=0;l<m.length;l++)this.idToNodeMap.set((p=m[l]).id,p);var p,d=function O(z){for(var nt,$=z.getChild().getNodes(),Ct=0,_=0;_<$.length;_++)null==(nt=$[_]).getChild()?i.fixedNodeSet.has(nt.id)&&(Ct+=100):Ct+=O(nt);return Ct};if(this.constraints.fixedNodeConstraint)for(this.constraints.fixedNodeConstraint.forEach(function($){i.fixedNodeSet.add($.nodeId)}),m=this.graphManager.getAllNodes(),l=0;l<m.length;l++)if(null!=(p=m[l]).getChild()){var R=d(p);R>0&&(p.fixedNodeWeight=R)}if(this.constraints.relativePlacementConstraint){var w=new Map,X=new Map;if(this.dummyToNodeForVerticalAlignment=new Map,this.dummyToNodeForHorizontalAlignment=new Map,this.fixedNodesOnHorizontal=new Set,this.fixedNodesOnVertical=new Set,this.fixedNodeSet.forEach(function(O){i.fixedNodesOnHorizontal.add(O),i.fixedNodesOnVertical.add(O)}),this.constraints.alignmentConstraint){if(this.constraints.alignmentConstraint.vertical){var U=this.constraints.alignmentConstraint.vertical;for(l=0;l<U.length;l++)this.dummyToNodeForVerticalAlignment.set("dummy"+l,[]),U[l].forEach(function(z){w.set(z,"dummy"+l),i.dummyToNodeForVerticalAlignment.get("dummy"+l).push(z),i.fixedNodeSet.has(z)&&i.fixedNodesOnHorizontal.add("dummy"+l)})}if(this.constraints.alignmentConstraint.horizontal){var F=this.constraints.alignmentConstraint.horizontal;for(l=0;l<F.length;l++)this.dummyToNodeForHorizontalAlignment.set("dummy"+l,[]),F[l].forEach(function(z){X.set(z,"dummy"+l),i.dummyToNodeForHorizontalAlignment.get("dummy"+l).push(z),i.fixedNodeSet.has(z)&&i.fixedNodesOnVertical.add("dummy"+l)})}}if(u.RELAX_MOVEMENT_ON_CONSTRAINTS)this.shuffle=function(O){var z,$,nt;for(nt=O.length-1;nt>=2*O.length/3;nt--)z=Math.floor(Math.random()*(nt+1)),$=O[nt],O[nt]=O[z],O[z]=$;return O},this.nodesInRelativeHorizontal=[],this.nodesInRelativeVertical=[],this.nodeToRelativeConstraintMapHorizontal=new Map,this.nodeToRelativeConstraintMapVertical=new Map,this.nodeToTempPositionMapHorizontal=new Map,this.nodeToTempPositionMapVertical=new Map,this.constraints.relativePlacementConstraint.forEach(function(O){if(O.left){var z=w.has(O.left)?w.get(O.left):O.left,$=w.has(O.right)?w.get(O.right):O.right;i.nodesInRelativeHorizontal.includes(z)||(i.nodesInRelativeHorizontal.push(z),i.nodeToRelativeConstraintMapHorizontal.set(z,[]),i.dummyToNodeForVerticalAlignment.has(z)?i.nodeToTempPositionMapHorizontal.set(z,i.idToNodeMap.get(i.dummyToNodeForVerticalAlignment.get(z)[0]).getCenterX()):i.nodeToTempPositionMapHorizontal.set(z,i.idToNodeMap.get(z).getCenterX())),i.nodesInRelativeHorizontal.includes($)||(i.nodesInRelativeHorizontal.push($),i.nodeToRelativeConstraintMapHorizontal.set($,[]),i.dummyToNodeForVerticalAlignment.has($)?i.nodeToTempPositionMapHorizontal.set($,i.idToNodeMap.get(i.dummyToNodeForVerticalAlignment.get($)[0]).getCenterX()):i.nodeToTempPositionMapHorizontal.set($,i.idToNodeMap.get($).getCenterX())),i.nodeToRelativeConstraintMapHorizontal.get(z).push({right:$,gap:O.gap}),i.nodeToRelativeConstraintMapHorizontal.get($).push({left:z,gap:O.gap})}else{var nt=X.has(O.top)?X.get(O.top):O.top,Ct=X.has(O.bottom)?X.get(O.bottom):O.bottom;i.nodesInRelativeVertical.includes(nt)||(i.nodesInRelativeVertical.push(nt),i.nodeToRelativeConstraintMapVertical.set(nt,[]),i.dummyToNodeForHorizontalAlignment.has(nt)?i.nodeToTempPositionMapVertical.set(nt,i.idToNodeMap.get(i.dummyToNodeForHorizontalAlignment.get(nt)[0]).getCenterY()):i.nodeToTempPositionMapVertical.set(nt,i.idToNodeMap.get(nt).getCenterY())),i.nodesInRelativeVertical.includes(Ct)||(i.nodesInRelativeVertical.push(Ct),i.nodeToRelativeConstraintMapVertical.set(Ct,[]),i.dummyToNodeForHorizontalAlignment.has(Ct)?i.nodeToTempPositionMapVertical.set(Ct,i.idToNodeMap.get(i.dummyToNodeForHorizontalAlignment.get(Ct)[0]).getCenterY()):i.nodeToTempPositionMapVertical.set(Ct,i.idToNodeMap.get(Ct).getCenterY())),i.nodeToRelativeConstraintMapVertical.get(nt).push({bottom:Ct,gap:O.gap}),i.nodeToRelativeConstraintMapVertical.get(Ct).push({top:nt,gap:O.gap})}});else{var Q=new Map,st=new Map;this.constraints.relativePlacementConstraint.forEach(function(O){if(O.left){var z=w.has(O.left)?w.get(O.left):O.left,$=w.has(O.right)?w.get(O.right):O.right;Q.has(z)?Q.get(z).push($):Q.set(z,[$]),Q.has($)?Q.get($).push(z):Q.set($,[z])}else{var nt=X.has(O.top)?X.get(O.top):O.top,Ct=X.has(O.bottom)?X.get(O.bottom):O.bottom;st.has(nt)?st.get(nt).push(Ct):st.set(nt,[Ct]),st.has(Ct)?st.get(Ct).push(nt):st.set(Ct,[nt])}});var V=function(z,$){var nt=[],Ct=[],_=new wt,bt=new Set,Rt=0;return z.forEach(function(Wt,Gt){if(!bt.has(Gt)){nt[Rt]=[],Ct[Rt]=!1;var y=Gt;for(_.push(y),bt.add(y),nt[Rt].push(y);0!=_.length;)y=_.shift(),$.has(y)&&(Ct[Rt]=!0),z.get(y).forEach(function(Y){bt.has(Y)||(_.push(Y),bt.add(Y),nt[Rt].push(Y))});Rt++}}),{components:nt,isFixed:Ct}},ht=V(Q,i.fixedNodesOnHorizontal);this.componentsOnHorizontal=ht.components,this.fixedComponentsOnHorizontal=ht.isFixed;var J=V(st,i.fixedNodesOnVertical);this.componentsOnVertical=J.components,this.fixedComponentsOnVertical=J.isFixed}}},G.prototype.updateDisplacements=function(){var i=this;if(this.constraints.fixedNodeConstraint&&this.constraints.fixedNodeConstraint.forEach(function(J){var O=i.idToNodeMap.get(J.nodeId);O.displacementX=0,O.displacementY=0}),this.constraints.alignmentConstraint){if(this.constraints.alignmentConstraint.vertical)for(var m=this.constraints.alignmentConstraint.vertical,l=0;l<m.length;l++){for(var p=0,d=0;d<m[l].length;d++){if(this.fixedNodeSet.has(m[l][d])){p=0;break}p+=this.idToNodeMap.get(m[l][d]).displacementX}var R=p/m[l].length;for(d=0;d<m[l].length;d++)this.idToNodeMap.get(m[l][d]).displacementX=R}if(this.constraints.alignmentConstraint.horizontal){var w=this.constraints.alignmentConstraint.horizontal;for(l=0;l<w.length;l++){var X=0;for(d=0;d<w[l].length;d++){if(this.fixedNodeSet.has(w[l][d])){X=0;break}X+=this.idToNodeMap.get(w[l][d]).displacementY}var U=X/w[l].length;for(d=0;d<w[l].length;d++)this.idToNodeMap.get(w[l][d]).displacementY=U}}}if(this.constraints.relativePlacementConstraint)if(u.RELAX_MOVEMENT_ON_CONSTRAINTS)this.totalIterations%10==0&&(this.shuffle(this.nodesInRelativeHorizontal),this.shuffle(this.nodesInRelativeVertical)),this.nodesInRelativeHorizontal.forEach(function(J){if(!i.fixedNodesOnHorizontal.has(J)){var O=0;O=i.dummyToNodeForVerticalAlignment.has(J)?i.idToNodeMap.get(i.dummyToNodeForVerticalAlignment.get(J)[0]).displacementX:i.idToNodeMap.get(J).displacementX,i.nodeToRelativeConstraintMapHorizontal.get(J).forEach(function(z){var $;z.right?($=i.nodeToTempPositionMapHorizontal.get(z.right)-i.nodeToTempPositionMapHorizontal.get(J)-O)<z.gap&&(O-=z.gap-$):($=i.nodeToTempPositionMapHorizontal.get(J)-i.nodeToTempPositionMapHorizontal.get(z.left)+O)<z.gap&&(O+=z.gap-$)}),i.nodeToTempPositionMapHorizontal.set(J,i.nodeToTempPositionMapHorizontal.get(J)+O),i.dummyToNodeForVerticalAlignment.has(J)?i.dummyToNodeForVerticalAlignment.get(J).forEach(function(z){i.idToNodeMap.get(z).displacementX=O}):i.idToNodeMap.get(J).displacementX=O}}),this.nodesInRelativeVertical.forEach(function(J){if(!i.fixedNodesOnHorizontal.has(J)){var O=0;O=i.dummyToNodeForHorizontalAlignment.has(J)?i.idToNodeMap.get(i.dummyToNodeForHorizontalAlignment.get(J)[0]).displacementY:i.idToNodeMap.get(J).displacementY,i.nodeToRelativeConstraintMapVertical.get(J).forEach(function(z){var $;z.bottom?($=i.nodeToTempPositionMapVertical.get(z.bottom)-i.nodeToTempPositionMapVertical.get(J)-O)<z.gap&&(O-=z.gap-$):($=i.nodeToTempPositionMapVertical.get(J)-i.nodeToTempPositionMapVertical.get(z.top)+O)<z.gap&&(O+=z.gap-$)}),i.nodeToTempPositionMapVertical.set(J,i.nodeToTempPositionMapVertical.get(J)+O),i.dummyToNodeForHorizontalAlignment.has(J)?i.dummyToNodeForHorizontalAlignment.get(J).forEach(function(z){i.idToNodeMap.get(z).displacementY=O}):i.idToNodeMap.get(J).displacementY=O}});else{for(l=0;l<this.componentsOnHorizontal.length;l++){var F=this.componentsOnHorizontal[l];if(this.fixedComponentsOnHorizontal[l])for(d=0;d<F.length;d++)this.dummyToNodeForVerticalAlignment.has(F[d])?this.dummyToNodeForVerticalAlignment.get(F[d]).forEach(function(z){i.idToNodeMap.get(z).displacementX=0}):this.idToNodeMap.get(F[d]).displacementX=0;else{var Q=0,st=0;for(d=0;d<F.length;d++)this.dummyToNodeForVerticalAlignment.has(F[d])?(Q+=(V=this.dummyToNodeForVerticalAlignment.get(F[d])).length*this.idToNodeMap.get(V[0]).displacementX,st+=V.length):(Q+=this.idToNodeMap.get(F[d]).displacementX,st++);var ht=Q/st;for(d=0;d<F.length;d++)this.dummyToNodeForVerticalAlignment.has(F[d])?this.dummyToNodeForVerticalAlignment.get(F[d]).forEach(function(z){i.idToNodeMap.get(z).displacementX=ht}):this.idToNodeMap.get(F[d]).displacementX=ht}}for(l=0;l<this.componentsOnVertical.length;l++)if(F=this.componentsOnVertical[l],this.fixedComponentsOnVertical[l])for(d=0;d<F.length;d++)this.dummyToNodeForHorizontalAlignment.has(F[d])?this.dummyToNodeForHorizontalAlignment.get(F[d]).forEach(function($){i.idToNodeMap.get($).displacementY=0}):this.idToNodeMap.get(F[d]).displacementY=0;else{for(Q=0,st=0,d=0;d<F.length;d++)if(this.dummyToNodeForHorizontalAlignment.has(F[d])){var V;Q+=(V=this.dummyToNodeForHorizontalAlignment.get(F[d])).length*this.idToNodeMap.get(V[0]).displacementY,st+=V.length}else Q+=this.idToNodeMap.get(F[d]).displacementY,st++;for(ht=Q/st,d=0;d<F.length;d++)this.dummyToNodeForHorizontalAlignment.has(F[d])?this.dummyToNodeForHorizontalAlignment.get(F[d]).forEach(function(_){i.idToNodeMap.get(_).displacementY=ht}):this.idToNodeMap.get(F[d]).displacementY=ht}}},G.prototype.calculateNodesToApplyGravitationTo=function(){var m,d,i=[],l=this.graphManager.getGraphs(),p=l.length;for(d=0;d<p;d++)(m=l[d]).updateConnected(),m.isConnected||(i=i.concat(m.getNodes()));return i},G.prototype.createBendpoints=function(){var i=[];i=i.concat(this.graphManager.getAllEdges());var l,m=new Set;for(l=0;l<i.length;l++){var p=i[l];if(!m.has(p)){var d=p.getSource(),R=p.getTarget();if(d==R)p.getBendpoints().push(new L),p.getBendpoints().push(new L),this.createDummyNodesForBendpoints(p),m.add(p);else{var w=[];if(w=(w=w.concat(d.getEdgeListToNode(R))).concat(R.getEdgeListToNode(d)),!m.has(w[0])){var X;if(w.length>1)for(X=0;X<w.length;X++){var U=w[X];U.getBendpoints().push(new L),this.createDummyNodesForBendpoints(U)}w.forEach(function(F){m.add(F)})}}}if(m.size==i.length)break}},G.prototype.positionNodesRadially=function(i){for(var m=new N(0,0),l=Math.ceil(Math.sqrt(i.length)),p=0,d=0,R=0,w=new L(0,0),X=0;X<i.length;X++){X%l==0&&(R=0,d=p,0!=X&&(d+=u.DEFAULT_COMPONENT_SEPERATION),p=0);var U=i[X],F=q.findCenterOfTree(U);m.x=R,m.y=d,(w=G.radialLayout(U,F,m)).y>p&&(p=Math.floor(w.y)),R=Math.floor(w.x+u.DEFAULT_COMPONENT_SEPERATION)}this.transform(new L(A.WORLD_CENTER_X-w.x/2,A.WORLD_CENTER_Y-w.y/2))},G.radialLayout=function(i,m,l){var p=Math.max(this.maxDiagonalInTree(i),u.DEFAULT_RADIAL_SEPARATION);G.branchRadialLayout(m,null,0,359,0,p);var d=pt.calculateBounds(i),R=new lt;R.setDeviceOrgX(d.getMinX()),R.setDeviceOrgY(d.getMinY()),R.setWorldOrgX(l.x),R.setWorldOrgY(l.y);for(var w=0;w<i.length;w++)i[w].transform(R);var U=new L(d.getMaxX(),d.getMaxY());return R.inverseTransformPoint(U)},G.branchRadialLayout=function(i,m,l,p,d,R){var w=(p-l+1)/2;w<0&&(w+=180);var U=(w+l)%360*it.TWO_PI/360,Q=(Math.cos(U),d*Math.cos(U)),st=d*Math.sin(U);i.setCenter(Q,st);var V=[],ht=(V=V.concat(i.getEdges())).length;null!=m&&ht--;for(var z,J=0,O=V.length,$=i.getEdgesBetween(m);$.length>1;){var nt=$[0];$.splice(0,1);var Ct=V.indexOf(nt);Ct>=0&&V.splice(Ct,1),O--,ht--}z=null!=m?(V.indexOf($[0])+1)%O:0;for(var _=Math.abs(p-l)/ht,bt=z;J!=ht;bt=++bt%O){var Rt=V[bt].getOtherEnd(i);if(Rt!=m){var Wt=(l+J*_)%360;G.branchRadialLayout(Rt,i,Wt,(Wt+_)%360,d+R,R),J++}}},G.maxDiagonalInTree=function(i){for(var m=I.MIN_VALUE,l=0;l<i.length;l++){var d=i[l].getDiagonal();d>m&&(m=d)}return m},G.prototype.calcRepulsionRange=function(){return 2*(this.level+1)*this.idealEdgeLength},G.prototype.groupZeroDegreeMembers=function(){var i=this,m={};this.memberGroups={},this.idToDummyNode={};for(var l=[],p=this.graphManager.getAllNodes(),d=0;d<p.length;d++){var w=(R=p[d]).getParent();0===this.getNodeDegreeWithChildren(R)&&(null==w.id||!this.getToBeTiled(w))&&l.push(R)}for(d=0;d<l.length;d++){var R,X=(R=l[d]).getParent().id;typeof m[X]>"u"&&(m[X]=[]),m[X]=m[X].concat(R)}Object.keys(m).forEach(function(U){if(m[U].length>1){var F="DummyCompound_"+U;i.memberGroups[F]=m[U];var Q=m[U][0].getParent(),st=new h(i.graphManager);st.id=F,st.paddingLeft=Q.paddingLeft||0,st.paddingRight=Q.paddingRight||0,st.paddingBottom=Q.paddingBottom||0,st.paddingTop=Q.paddingTop||0,i.idToDummyNode[F]=st;var V=i.getGraphManager().add(i.newGraph(),st),ht=Q.getChild();ht.add(st);for(var J=0;J<m[U].length;J++){var O=m[U][J];ht.remove(O),V.add(O)}}})},G.prototype.clearCompounds=function(){var i={},m={};this.performDFSOnCompounds();for(var l=0;l<this.compoundOrder.length;l++)m[this.compoundOrder[l].id]=this.compoundOrder[l],i[this.compoundOrder[l].id]=[].concat(this.compoundOrder[l].getChild().getNodes()),this.graphManager.remove(this.compoundOrder[l].getChild()),this.compoundOrder[l].child=null;this.graphManager.resetAllNodes(),this.tileCompoundMembers(i,m)},G.prototype.clearZeroDegreeMembers=function(){var i=this,m=this.tiledZeroDegreePack=[];Object.keys(this.memberGroups).forEach(function(l){var p=i.idToDummyNode[l];if(m[l]=i.tileNodes(i.memberGroups[l],p.paddingLeft+p.paddingRight),p.rect.width=m[l].width,p.rect.height=m[l].height,p.setCenter(m[l].centerX,m[l].centerY),p.labelMarginLeft=0,p.labelMarginTop=0,u.NODE_DIMENSIONS_INCLUDE_LABELS){var d=p.rect.width,R=p.rect.height;p.labelWidth&&("left"==p.labelPosHorizontal?(p.rect.x-=p.labelWidth,p.setWidth(d+p.labelWidth),p.labelMarginLeft=p.labelWidth):"center"==p.labelPosHorizontal&&p.labelWidth>d?(p.rect.x-=(p.labelWidth-d)/2,p.setWidth(p.labelWidth),p.labelMarginLeft=(p.labelWidth-d)/2):"right"==p.labelPosHorizontal&&p.setWidth(d+p.labelWidth)),p.labelHeight&&("top"==p.labelPosVertical?(p.rect.y-=p.labelHeight,p.setHeight(R+p.labelHeight),p.labelMarginTop=p.labelHeight):"center"==p.labelPosVertical&&p.labelHeight>R?(p.rect.y-=(p.labelHeight-R)/2,p.setHeight(p.labelHeight),p.labelMarginTop=(p.labelHeight-R)/2):"bottom"==p.labelPosVertical&&p.setHeight(R+p.labelHeight))}})},G.prototype.repopulateCompounds=function(){for(var i=this.compoundOrder.length-1;i>=0;i--){var m=this.compoundOrder[i];this.adjustLocations(this.tiledMemberPack[m.id],m.rect.x,m.rect.y,m.paddingLeft,m.paddingTop,m.labelMarginLeft,m.labelMarginTop)}},G.prototype.repopulateZeroDegreeMembers=function(){var i=this,m=this.tiledZeroDegreePack;Object.keys(m).forEach(function(l){var p=i.idToDummyNode[l];i.adjustLocations(m[l],p.rect.x,p.rect.y,p.paddingLeft,p.paddingTop,p.labelMarginLeft,p.labelMarginTop)})},G.prototype.getToBeTiled=function(i){var m=i.id;if(null!=this.toBeTiled[m])return this.toBeTiled[m];var l=i.getChild();if(null==l)return this.toBeTiled[m]=!1,!1;for(var p=l.getNodes(),d=0;d<p.length;d++){var R=p[d];if(this.getNodeDegree(R)>0)return this.toBeTiled[m]=!1,!1;if(null!=R.getChild()){if(!this.getToBeTiled(R))return this.toBeTiled[m]=!1,!1}else this.toBeTiled[R.id]=!1}return this.toBeTiled[m]=!0,!0},G.prototype.getNodeDegree=function(i){for(var l=i.getEdges(),p=0,d=0;d<l.length;d++){var R=l[d];R.getSource().id!==R.getTarget().id&&(p+=1)}return p},G.prototype.getNodeDegreeWithChildren=function(i){var m=this.getNodeDegree(i);if(null==i.getChild())return m;for(var l=i.getChild().getNodes(),p=0;p<l.length;p++)m+=this.getNodeDegreeWithChildren(l[p]);return m},G.prototype.performDFSOnCompounds=function(){this.compoundOrder=[],this.fillCompexOrderByDFS(this.graphManager.getRoot().getNodes())},G.prototype.fillCompexOrderByDFS=function(i){for(var m=0;m<i.length;m++){var l=i[m];null!=l.getChild()&&this.fillCompexOrderByDFS(l.getChild().getNodes()),this.getToBeTiled(l)&&this.compoundOrder.push(l)}},G.prototype.adjustLocations=function(i,m,l,p,d,R,w){l+=d+w;for(var X=m+=p+R,U=0;U<i.rows.length;U++){var F=i.rows[U];m=X;for(var Q=0,st=0;st<F.length;st++){var V=F[st];V.rect.x=m,V.rect.y=l,m+=V.rect.width+i.horizontalPadding,V.rect.height>Q&&(Q=V.rect.height)}l+=Q+i.verticalPadding}},G.prototype.tileCompoundMembers=function(i,m){var l=this;this.tiledMemberPack=[],Object.keys(i).forEach(function(p){var d=m[p];if(l.tiledMemberPack[p]=l.tileNodes(i[p],d.paddingLeft+d.paddingRight),d.rect.width=l.tiledMemberPack[p].width,d.rect.height=l.tiledMemberPack[p].height,d.setCenter(l.tiledMemberPack[p].centerX,l.tiledMemberPack[p].centerY),d.labelMarginLeft=0,d.labelMarginTop=0,u.NODE_DIMENSIONS_INCLUDE_LABELS){var R=d.rect.width,w=d.rect.height;d.labelWidth&&("left"==d.labelPosHorizontal?(d.rect.x-=d.labelWidth,d.setWidth(R+d.labelWidth),d.labelMarginLeft=d.labelWidth):"center"==d.labelPosHorizontal&&d.labelWidth>R?(d.rect.x-=(d.labelWidth-R)/2,d.setWidth(d.labelWidth),d.labelMarginLeft=(d.labelWidth-R)/2):"right"==d.labelPosHorizontal&&d.setWidth(R+d.labelWidth)),d.labelHeight&&("top"==d.labelPosVertical?(d.rect.y-=d.labelHeight,d.setHeight(w+d.labelHeight),d.labelMarginTop=d.labelHeight):"center"==d.labelPosVertical&&d.labelHeight>w?(d.rect.y-=(d.labelHeight-w)/2,d.setHeight(d.labelHeight),d.labelMarginTop=(d.labelHeight-w)/2):"bottom"==d.labelPosVertical&&d.setHeight(w+d.labelHeight))}})},G.prototype.tileNodes=function(i,m){var l=this.tileNodesByFavoringDim(i,m,!0),p=this.tileNodesByFavoringDim(i,m,!1),d=this.getOrgRatio(l);return this.getOrgRatio(p)<d?p:l},G.prototype.getOrgRatio=function(i){var p=i.width/i.height;return p<1&&(p=1/p),p},G.prototype.calcIdealRowWidth=function(i,m){var l=u.TILING_PADDING_VERTICAL,p=u.TILING_PADDING_HORIZONTAL,d=i.length,R=0,w=0,X=0;i.forEach(function(J){R+=J.getWidth(),w+=J.getHeight(),J.getWidth()>X&&(X=J.getWidth())});var V,U=R/d,F=w/d,Q=Math.pow(l-p,2)+4*(U+p)*(F+l)*d,st=(p-l+Math.sqrt(Q))/(2*(U+p));m?(V=Math.ceil(st))==st&&V++:V=Math.floor(st);var ht=V*(U+p)-p;return X>ht&&(ht=X),ht+2*p},G.prototype.tileNodesByFavoringDim=function(i,m,l){var R=u.TILING_COMPARE_BY,w={rows:[],rowWidth:[],rowHeight:[],width:0,height:m,verticalPadding:u.TILING_PADDING_VERTICAL,horizontalPadding:u.TILING_PADDING_HORIZONTAL,centerX:0,centerY:0};R&&(w.idealRowWidth=this.calcIdealRowWidth(i,l));var X=function(O){return O.rect.width*O.rect.height},U=function(O,z){return X(z)-X(O)};i.sort(function(J,O){var z=U;return w.idealRowWidth?(z=R)(J.id,O.id):z(J,O)});for(var F=0,Q=0,st=0;st<i.length;st++)F+=(V=i[st]).getCenterX(),Q+=V.getCenterY();for(w.centerX=F/i.length,w.centerY=Q/i.length,st=0;st<i.length;st++){var V=i[st];if(0==w.rows.length)this.insertNodeToRow(w,V,0,m);else if(this.canAddHorizontal(w,V.rect.width,V.rect.height)){var ht=w.rows.length-1;w.idealRowWidth||(ht=this.getShortestRowIndex(w)),this.insertNodeToRow(w,V,ht,m)}else this.insertNodeToRow(w,V,w.rows.length,m);this.shiftToLastRow(w)}return w},G.prototype.insertNodeToRow=function(i,m,l,p){var d=p;l==i.rows.length&&(i.rows.push([]),i.rowWidth.push(d),i.rowHeight.push(0));var w=i.rowWidth[l]+m.rect.width;i.rows[l].length>0&&(w+=i.horizontalPadding),i.rowWidth[l]=w,i.width<w&&(i.width=w);var X=m.rect.height;l>0&&(X+=i.verticalPadding);var U=0;X>i.rowHeight[l]&&(U=i.rowHeight[l],i.rowHeight[l]=X,U=i.rowHeight[l]-U),i.height+=U,i.rows[l].push(m)},G.prototype.getShortestRowIndex=function(i){for(var m=-1,l=Number.MAX_VALUE,p=0;p<i.rows.length;p++)i.rowWidth[p]<l&&(m=p,l=i.rowWidth[p]);return m},G.prototype.getLongestRowIndex=function(i){for(var m=-1,l=Number.MIN_VALUE,p=0;p<i.rows.length;p++)i.rowWidth[p]>l&&(m=p,l=i.rowWidth[p]);return m},G.prototype.canAddHorizontal=function(i,m,l){if(i.idealRowWidth)return i.rowWidth[i.rows.length-1]+m+i.horizontalPadding<=i.idealRowWidth;var R=this.getShortestRowIndex(i);if(R<0)return!0;var w=i.rowWidth[R];if(w+i.horizontalPadding+m<=i.width)return!0;var U,F,X=0;return i.rowHeight[R]<l&&R>0&&(X=l+i.verticalPadding-i.rowHeight[R]),U=i.width-w>=m+i.horizontalPadding?(i.height+X)/(w+m+i.horizontalPadding):(i.height+X)/i.width,X=l+i.verticalPadding,(F=i.width<m?(i.height+X)/m:(i.height+X)/i.width)<1&&(F=1/F),U<1&&(U=1/U),U<F},G.prototype.shiftToLastRow=function(i){var m=this.getLongestRowIndex(i),l=i.rowWidth.length-1,p=i.rows[m],d=p[p.length-1],R=d.width+i.horizontalPadding;if(i.width-i.rowWidth[l]>R&&m!=l){p.splice(-1,1),i.rows[l].push(d),i.rowWidth[m]=i.rowWidth[m]-R,i.rowWidth[l]=i.rowWidth[l]+R,i.width=i.rowWidth[instance.getLongestRowIndex(i)];for(var w=Number.MIN_VALUE,X=0;X<p.length;X++)p[X].height>w&&(w=p[X].height);m>0&&(w+=i.verticalPadding);var U=i.rowHeight[m]+i.rowHeight[l];i.rowHeight[m]=w,i.rowHeight[l]<d.height+i.verticalPadding&&(i.rowHeight[l]=d.height+i.verticalPadding),i.height+=i.rowHeight[m]+i.rowHeight[l]-U,this.shiftToLastRow(i)}},G.prototype.tilingPreLayout=function(){u.TILE&&(this.groupZeroDegreeMembers(),this.clearCompounds(),this.clearZeroDegreeMembers())},G.prototype.tilingPostLayout=function(){u.TILE&&(this.repopulateZeroDegreeMembers(),this.repopulateCompounds())},G.prototype.reduceTrees=function(){for(var l,i=[],m=!0;m;){var p=this.graphManager.getAllNodes(),d=[];m=!1;for(var R=0;R<p.length;R++)if(1==(l=p[R]).getEdges().length&&!l.getEdges()[0].isInterGraph&&null==l.getChild()){if(u.PURE_INCREMENTAL){var w=l.getEdges()[0].getOtherEnd(l),X=new D(l.getCenterX()-w.getCenterX(),l.getCenterY()-w.getCenterY());d.push([l,l.getEdges()[0],l.getOwner(),X])}else d.push([l,l.getEdges()[0],l.getOwner()]);m=!0}if(1==m){for(var U=[],F=0;F<d.length;F++)1==d[F][0].getEdges().length&&(U.push(d[F]),d[F][0].getOwner().remove(d[F][0]));i.push(U),this.graphManager.resetAllNodes(),this.graphManager.resetAllEdges()}}this.prunedNodesAll=i},G.prototype.growTree=function(i){for(var p,l=i[i.length-1],d=0;d<l.length;d++)this.findPlaceforPrunedNode(p=l[d]),p[2].add(p[0]),p[2].add(p[1],p[1].source,p[1].target);i.splice(i.length-1,1),this.graphManager.resetAllNodes(),this.graphManager.resetAllEdges()},G.prototype.findPlaceforPrunedNode=function(i){var m,l,p=i[0];if(l=p==i[1].source?i[1].target:i[1].source,u.PURE_INCREMENTAL)p.setCenter(l.getCenterX()+i[3].getWidth(),l.getCenterY()+i[3].getHeight());else{var d=l.startX,R=l.finishX,w=l.startY,X=l.finishY,V=[0,0,0,0];if(w>0)for(var ht=d;ht<=R;ht++)V[0]+=this.grid[ht][w-1].length+this.grid[ht][w].length-1;if(R<this.grid.length-1)for(ht=w;ht<=X;ht++)V[1]+=this.grid[R+1][ht].length+this.grid[R][ht].length-1;if(X<this.grid[0].length-1)for(ht=d;ht<=R;ht++)V[2]+=this.grid[ht][X+1].length+this.grid[ht][X].length-1;if(d>0)for(ht=w;ht<=X;ht++)V[3]+=this.grid[d-1][ht].length+this.grid[d][ht].length-1;for(var O,z,J=I.MAX_VALUE,$=0;$<V.length;$++)V[$]<J?(J=V[$],O=1,z=$):V[$]==J&&O++;if(3==O&&0==J)0==V[0]&&0==V[1]&&0==V[2]?m=1:0==V[0]&&0==V[1]&&0==V[3]?m=0:0==V[0]&&0==V[2]&&0==V[3]?m=3:0==V[1]&&0==V[2]&&0==V[3]&&(m=2);else if(2==O&&0==J){var nt=Math.floor(2*Math.random());m=0==V[0]&&0==V[1]?0==nt?0:1:0==V[0]&&0==V[2]?0==nt?0:2:0==V[0]&&0==V[3]?0==nt?0:3:0==V[1]&&0==V[2]?0==nt?1:2:0==V[1]&&0==V[3]?0==nt?1:3:0==nt?2:3}else m=4==O&&0==J?nt=Math.floor(4*Math.random()):z;0==m?p.setCenter(l.getCenterX(),l.getCenterY()-l.getHeight()/2-f.DEFAULT_EDGE_LENGTH-p.getHeight()/2):1==m?p.setCenter(l.getCenterX()+l.getWidth()/2+f.DEFAULT_EDGE_LENGTH+p.getWidth()/2,l.getCenterY()):2==m?p.setCenter(l.getCenterX(),l.getCenterY()+l.getHeight()/2+f.DEFAULT_EDGE_LENGTH+p.getHeight()/2):p.setCenter(l.getCenterX()-l.getWidth()/2-f.DEFAULT_EDGE_LENGTH-p.getWidth()/2,l.getCenterY())}},s.exports=G},991:(s,c,e)=>{var v=e(551).FDLayoutNode,t=e(551).IMath;function r(g,u,T,f){v.call(this,g,u,T,f)}for(var h in r.prototype=Object.create(v.prototype),v)r[h]=v[h];r.prototype.calculateDisplacement=function(){var g=this.graphManager.getLayout();null!=this.getChild()&&this.fixedNodeWeight?(this.displacementX+=g.coolingFactor*(this.springForceX+this.repulsionForceX+this.gravitationForceX)/this.fixedNodeWeight,this.displacementY+=g.coolingFactor*(this.springForceY+this.repulsionForceY+this.gravitationForceY)/this.fixedNodeWeight):(this.displacementX+=g.coolingFactor*(this.springForceX+this.repulsionForceX+this.gravitationForceX)/this.noOfChildren,this.displacementY+=g.coolingFactor*(this.springForceY+this.repulsionForceY+this.gravitationForceY)/this.noOfChildren),Math.abs(this.displacementX)>g.coolingFactor*g.maxNodeDisplacement&&(this.displacementX=g.coolingFactor*g.maxNodeDisplacement*t.sign(this.displacementX)),Math.abs(this.displacementY)>g.coolingFactor*g.maxNodeDisplacement&&(this.displacementY=g.coolingFactor*g.maxNodeDisplacement*t.sign(this.displacementY)),this.child&&this.child.getNodes().length>0&&this.propogateDisplacementToChildren(this.displacementX,this.displacementY)},r.prototype.propogateDisplacementToChildren=function(g,u){for(var f,T=this.getChild().getNodes(),A=0;A<T.length;A++)null==(f=T[A]).getChild()?(f.displacementX+=g,f.displacementY+=u):f.propogateDisplacementToChildren(g,u)},r.prototype.move=function(){var g=this.graphManager.getLayout();(null==this.child||0==this.child.getNodes().length)&&(this.moveBy(this.displacementX,this.displacementY),g.totalDisplacement+=Math.abs(this.displacementX)+Math.abs(this.displacementY)),this.springForceX=0,this.springForceY=0,this.repulsionForceX=0,this.repulsionForceY=0,this.gravitationForceX=0,this.gravitationForceY=0,this.displacementX=0,this.displacementY=0},r.prototype.setPred1=function(g){this.pred1=g},r.prototype.getPred1=function(){return pred1},r.prototype.getPred2=function(){return pred2},r.prototype.setNext=function(g){this.next=g},r.prototype.getNext=function(){return next},r.prototype.setProcessed=function(g){this.processed=g},r.prototype.isProcessed=function(){return processed},s.exports=r},902:(s,c,e)=>{function v(T){if(Array.isArray(T)){for(var f=0,A=Array(T.length);f<T.length;f++)A[f]=T[f];return A}return Array.from(T)}var t=e(806),r=e(551).LinkedList,h=e(551).Matrix,g=e(551).SVD;function u(){}u.handleConstraints=function(T){var f={};f.fixedNodeConstraint=T.constraints.fixedNodeConstraint,f.alignmentConstraint=T.constraints.alignmentConstraint,f.relativePlacementConstraint=T.constraints.relativePlacementConstraint;for(var A=new Map,N=new Map,L=[],D=[],q=T.getAllNodes(),I=0,it=0;it<q.length;it++){var pt=q[it];null==pt.getChild()&&(N.set(pt.id,I++),L.push(pt.getCenterX()),D.push(pt.getCenterY()),A.set(pt.id,pt))}f.relativePlacementConstraint&&f.relativePlacementConstraint.forEach(function(M){!M.gap&&0!=M.gap&&(M.gap=M.left?t.DEFAULT_EDGE_LENGTH+A.get(M.left).getWidth()/2+A.get(M.right).getWidth()/2:t.DEFAULT_EDGE_LENGTH+A.get(M.top).getHeight()/2+A.get(M.bottom).getHeight()/2)});var wt=function(x){var b=0,P=0;return x.forEach(function(H){b+=L[N.get(H)],P+=D[N.get(H)]}),{x:b/x.size,y:P/x.size}},G=function(x,b,P,H,K){var at=new Map;x.forEach(function(Lt,gt){at.set(gt,0)}),x.forEach(function(Lt,gt){Lt.forEach(function(Ot){at.set(Ot.id,at.get(Ot.id)+1)})});var B=new Map,Z=new Map,mt=new r;at.forEach(function(Lt,gt){0==Lt?(mt.push(gt),P||B.set(gt,"horizontal"==b?N.has(gt)?L[N.get(gt)]:H.get(gt):N.has(gt)?D[N.get(gt)]:H.get(gt))):B.set(gt,Number.NEGATIVE_INFINITY),P&&Z.set(gt,new Set([gt]))}),P&&K.forEach(function(Lt){var gt=[];if(Lt.forEach(function(Nt){P.has(Nt)&&gt.push(Nt)}),gt.length>0){var Ot=0;gt.forEach(function(Nt){"horizontal"==b?(B.set(Nt,N.has(Nt)?L[N.get(Nt)]:H.get(Nt)),Ot+=B.get(Nt)):(B.set(Nt,N.has(Nt)?D[N.get(Nt)]:H.get(Nt)),Ot+=B.get(Nt))}),Ot/=gt.length,Lt.forEach(function(Nt){P.has(Nt)||B.set(Nt,Ot)})}else{var yt=0;Lt.forEach(function(Nt){yt+="horizontal"==b?N.has(Nt)?L[N.get(Nt)]:H.get(Nt):N.has(Nt)?D[N.get(Nt)]:H.get(Nt)}),yt/=Lt.length,Lt.forEach(function(Nt){B.set(Nt,yt)})}});for(var Mt=function(){var gt=mt.shift();x.get(gt).forEach(function(yt){if(B.get(yt.id)<B.get(gt)+yt.gap)if(P&&P.has(yt.id)){var Nt;if(Nt="horizontal"==b?N.has(yt.id)?L[N.get(yt.id)]:H.get(yt.id):N.has(yt.id)?D[N.get(yt.id)]:H.get(yt.id),B.set(yt.id,Nt),Nt<B.get(gt)+yt.gap){var Ut=B.get(gt)+yt.gap-Nt;Z.get(gt).forEach(function(Dt){B.set(Dt,B.get(Dt)-Ut)})}}else B.set(yt.id,B.get(gt)+yt.gap);at.set(yt.id,at.get(yt.id)-1),0==at.get(yt.id)&&mt.push(yt.id),P&&Z.set(yt.id,function ft(Lt,gt){var Ot=new Set(Lt),yt=!0,Nt=!1,Ut=void 0;try{for(var St,Dt=gt[Symbol.iterator]();!(yt=(St=Dt.next()).done);yt=!0)Ot.add(St.value)}catch(Yt){Nt=!0,Ut=Yt}finally{try{!yt&&Dt.return&&Dt.return()}finally{if(Nt)throw Ut}}return Ot}(Z.get(gt),Z.get(yt.id)))})};0!=mt.length;)Mt();if(P){var Tt=new Set;x.forEach(function(Lt,gt){0==Lt.length&&Tt.add(gt)});var xt=[];Z.forEach(function(Lt,gt){if(Tt.has(gt)){var Ot=!1,yt=!0,Nt=!1,Ut=void 0;try{for(var St,Dt=Lt[Symbol.iterator]();!(yt=(St=Dt.next()).done);yt=!0)P.has(St.value)&&(Ot=!0)}catch(Pt){Nt=!0,Ut=Pt}finally{try{!yt&&Dt.return&&Dt.return()}finally{if(Nt)throw Ut}}if(!Ot){var Yt=!1,Vt=void 0;xt.forEach(function(Pt,Bt){Pt.has([].concat(v(Lt))[0])&&(Yt=!0,Vt=Bt)}),Yt?Lt.forEach(function(Pt){xt[Vt].add(Pt)}):xt.push(new Set(Lt))}}}),xt.forEach(function(Lt,gt){var Ot=Number.POSITIVE_INFINITY,yt=Number.POSITIVE_INFINITY,Nt=Number.NEGATIVE_INFINITY,Ut=Number.NEGATIVE_INFINITY,Dt=!0,St=!1,Ht=void 0;try{for(var Vt,Yt=Lt[Symbol.iterator]();!(Dt=(Vt=Yt.next()).done);Dt=!0){var Bt,Pt=Vt.value;Bt="horizontal"==b?N.has(Pt)?L[N.get(Pt)]:H.get(Pt):N.has(Pt)?D[N.get(Pt)]:H.get(Pt);var Jt=B.get(Pt);Bt<Ot&&(Ot=Bt),Bt>Nt&&(Nt=Bt),Jt<yt&&(yt=Jt),Jt>Ut&&(Ut=Jt)}}catch(_t){St=!0,Ht=_t}finally{try{!Dt&&Yt.return&&Yt.return()}finally{if(St)throw Ht}}var ee=(Ot+Nt)/2-(yt+Ut)/2,Kt=!0,Qt=!1,qt=void 0;try{for(var te,Zt=Lt[Symbol.iterator]();!(Kt=(te=Zt.next()).done);Kt=!0){var jt=te.value;B.set(jt,B.get(jt)+ee)}}catch(_t){Qt=!0,qt=_t}finally{try{!Kt&&Zt.return&&Zt.return()}finally{if(Qt)throw qt}}})}return B},k=function(x){var b=0,P=0,H=0,K=0;if(x.forEach(function(Z){Z.left?L[N.get(Z.left)]-L[N.get(Z.right)]>=0?b++:P++:D[N.get(Z.top)]-D[N.get(Z.bottom)]>=0?H++:K++}),b>P&&H>K)for(var ft=0;ft<N.size;ft++)L[ft]=-1*L[ft],D[ft]=-1*D[ft];else if(b>P)for(var at=0;at<N.size;at++)L[at]=-1*L[at];else if(H>K)for(var B=0;B<N.size;B++)D[B]=-1*D[B]},i=function(x){var b=[],P=new r,H=new Set,K=0;return x.forEach(function(ft,at){if(!H.has(at)){b[K]=[];var B=at;for(P.push(B),H.add(B),b[K].push(B);0!=P.length;)B=P.shift(),x.get(B).forEach(function(mt){H.has(mt.id)||(P.push(mt.id),H.add(mt.id),b[K].push(mt.id))});K++}}),b},m=function(x){var b=new Map;return x.forEach(function(P,H){b.set(H,[])}),x.forEach(function(P,H){P.forEach(function(K){b.get(H).push(K),b.get(K.id).push({id:H,gap:K.gap,direction:K.direction})})}),b},l=function(x){var b=new Map;return x.forEach(function(P,H){b.set(H,[])}),x.forEach(function(P,H){P.forEach(function(K){b.get(K.id).push({id:H,gap:K.gap,direction:K.direction})})}),b},p=[],d=[],R=!1,w=!1,X=new Set,U=new Map,F=new Map,Q=[];if(f.fixedNodeConstraint&&f.fixedNodeConstraint.forEach(function(M){X.add(M.nodeId)}),f.relativePlacementConstraint&&(f.relativePlacementConstraint.forEach(function(M){M.left?(U.has(M.left)?U.get(M.left).push({id:M.right,gap:M.gap,direction:"horizontal"}):U.set(M.left,[{id:M.right,gap:M.gap,direction:"horizontal"}]),U.has(M.right)||U.set(M.right,[])):(U.has(M.top)?U.get(M.top).push({id:M.bottom,gap:M.gap,direction:"vertical"}):U.set(M.top,[{id:M.bottom,gap:M.gap,direction:"vertical"}]),U.has(M.bottom)||U.set(M.bottom,[]))}),F=m(U),Q=i(F)),t.TRANSFORM_ON_CONSTRAINT_HANDLING){if(f.fixedNodeConstraint&&f.fixedNodeConstraint.length>1)f.fixedNodeConstraint.forEach(function(M,x){p[x]=[M.position.x,M.position.y],d[x]=[L[N.get(M.nodeId)],D[N.get(M.nodeId)]]}),R=!0;else if(f.alignmentConstraint)!function(){var M=0;if(f.alignmentConstraint.vertical){for(var x=f.alignmentConstraint.vertical,b=function(B){var Z=new Set;x[B].forEach(function(Tt){Z.add(Tt)});var Mt,mt=new Set([].concat(v(Z)).filter(function(Tt){return X.has(Tt)}));Mt=mt.size>0?L[N.get(mt.values().next().value)]:wt(Z).x,x[B].forEach(function(Tt){p[M]=[Mt,D[N.get(Tt)]],d[M]=[L[N.get(Tt)],D[N.get(Tt)]],M++})},P=0;P<x.length;P++)b(P);R=!0}if(f.alignmentConstraint.horizontal){for(var H=f.alignmentConstraint.horizontal,K=function(B){var Z=new Set;H[B].forEach(function(Tt){Z.add(Tt)});var Mt,mt=new Set([].concat(v(Z)).filter(function(Tt){return X.has(Tt)}));Mt=mt.size>0?L[N.get(mt.values().next().value)]:wt(Z).y,H[B].forEach(function(Tt){p[M]=[L[N.get(Tt)],Mt],d[M]=[L[N.get(Tt)],D[N.get(Tt)]],M++})},ft=0;ft<H.length;ft++)K(ft);R=!0}f.relativePlacementConstraint&&(w=!0)}();else if(f.relativePlacementConstraint){for(var st=0,V=0,ht=0;ht<Q.length;ht++)Q[ht].length>st&&(st=Q[ht].length,V=ht);if(st<F.size/2)k(f.relativePlacementConstraint),R=!1,w=!1;else{var J=new Map,O=new Map,z=[];Q[V].forEach(function(M){U.get(M).forEach(function(x){"horizontal"==x.direction?(J.has(M)?J.get(M).push(x):J.set(M,[x]),J.has(x.id)||J.set(x.id,[]),z.push({left:M,right:x.id})):(O.has(M)?O.get(M).push(x):O.set(M,[x]),O.has(x.id)||O.set(x.id,[]),z.push({top:M,bottom:x.id}))})}),k(z),w=!1;var $=G(J,"horizontal"),nt=G(O,"vertical");Q[V].forEach(function(M,x){d[x]=[L[N.get(M)],D[N.get(M)]],p[x]=[],p[x][0]=$.has(M)?$.get(M):L[N.get(M)],p[x][1]=nt.has(M)?nt.get(M):D[N.get(M)]}),R=!0}}if(R){for(var Ct,_=h.transpose(p),bt=h.transpose(d),Rt=0;Rt<_.length;Rt++)_[Rt]=h.multGamma(_[Rt]),bt[Rt]=h.multGamma(bt[Rt]);var Wt=h.multMat(_,h.transpose(bt)),Gt=g.svd(Wt);Ct=h.multMat(Gt.V,h.transpose(Gt.U));for(var y=0;y<N.size;y++){var C=[L[y],D[y]],W=[Ct[0][1],Ct[1][1]];L[y]=h.dotProduct(C,[Ct[0][0],Ct[1][0]]),D[y]=h.dotProduct(C,W)}w&&k(f.relativePlacementConstraint)}}if(t.ENFORCE_CONSTRAINTS){if(f.fixedNodeConstraint&&f.fixedNodeConstraint.length>0){var et={x:0,y:0};f.fixedNodeConstraint.forEach(function(M,x){var b={x:L[N.get(M.nodeId)],y:D[N.get(M.nodeId)]},H=function(x,b){return{x:x.x-b.x,y:x.y-b.y}}(M.position,b);et.x+=H.x,et.y+=H.y}),et.x/=f.fixedNodeConstraint.length,et.y/=f.fixedNodeConstraint.length,L.forEach(function(M,x){L[x]+=et.x}),D.forEach(function(M,x){D[x]+=et.y}),f.fixedNodeConstraint.forEach(function(M){L[N.get(M.nodeId)]=M.position.x,D[N.get(M.nodeId)]=M.position.y})}if(f.alignmentConstraint){if(f.alignmentConstraint.vertical)for(var j=f.alignmentConstraint.vertical,ot=function(x){var b=new Set;j[x].forEach(function(K){b.add(K)});var H,P=new Set([].concat(v(b)).filter(function(K){return X.has(K)}));H=P.size>0?L[N.get(P.values().next().value)]:wt(b).x,b.forEach(function(K){X.has(K)||(L[N.get(K)]=H)})},tt=0;tt<j.length;tt++)ot(tt);if(f.alignmentConstraint.horizontal)for(var ut=f.alignmentConstraint.horizontal,vt=function(x){var b=new Set;ut[x].forEach(function(K){b.add(K)});var H,P=new Set([].concat(v(b)).filter(function(K){return X.has(K)}));H=P.size>0?D[N.get(P.values().next().value)]:wt(b).y,b.forEach(function(K){X.has(K)||(D[N.get(K)]=H)})},rt=0;rt<ut.length;rt++)vt(rt)}f.relativePlacementConstraint&&function(){var M=new Map,x=new Map,b=new Map,P=new Map,H=new Map,K=new Map,ft=new Set,at=new Set;if(X.forEach(function(Xt){ft.add(Xt),at.add(Xt)}),f.alignmentConstraint){if(f.alignmentConstraint.vertical)for(var B=f.alignmentConstraint.vertical,Z=function(It){b.set("dummy"+It,[]),B[It].forEach(function(Ft){M.set(Ft,"dummy"+It),b.get("dummy"+It).push(Ft),X.has(Ft)&&ft.add("dummy"+It)}),H.set("dummy"+It,L[N.get(B[It][0])])},mt=0;mt<B.length;mt++)Z(mt);if(f.alignmentConstraint.horizontal)for(var Mt=f.alignmentConstraint.horizontal,Tt=function(It){P.set("dummy"+It,[]),Mt[It].forEach(function(Ft){x.set(Ft,"dummy"+It),P.get("dummy"+It).push(Ft),X.has(Ft)&&at.add("dummy"+It)}),K.set("dummy"+It,D[N.get(Mt[It][0])])},xt=0;xt<Mt.length;xt++)Tt(xt)}var Lt=new Map,gt=new Map,Ot=function(It){U.get(It).forEach(function(Ft){var $t=void 0,zt=void 0;"horizontal"==Ft.direction?($t=M.get(It)?M.get(It):It,zt=M.get(Ft.id)?{id:M.get(Ft.id),gap:Ft.gap,direction:Ft.direction}:Ft,Lt.has($t)?Lt.get($t).push(zt):Lt.set($t,[zt]),Lt.has(zt.id)||Lt.set(zt.id,[])):($t=x.get(It)?x.get(It):It,zt=x.get(Ft.id)?{id:x.get(Ft.id),gap:Ft.gap,direction:Ft.direction}:Ft,gt.has($t)?gt.get($t).push(zt):gt.set($t,[zt]),gt.has(zt.id)||gt.set(zt.id,[]))})},yt=!0,Nt=!1,Ut=void 0;try{for(var St,Dt=U.keys()[Symbol.iterator]();!(yt=(St=Dt.next()).done);yt=!0)Ot(St.value)}catch(Xt){Nt=!0,Ut=Xt}finally{try{!yt&&Dt.return&&Dt.return()}finally{if(Nt)throw Ut}}var Yt=m(Lt),Vt=m(gt),Pt=i(Yt),Bt=i(Vt),Jt=l(Lt),ee=l(gt),Kt=[],Qt=[];Pt.forEach(function(Xt,It){Kt[It]=[],Xt.forEach(function(Ft){0==Jt.get(Ft).length&&Kt[It].push(Ft)})}),Bt.forEach(function(Xt,It){Qt[It]=[],Xt.forEach(function(Ft){0==ee.get(Ft).length&&Qt[It].push(Ft)})});var qt=G(Lt,"horizontal",ft,H,Kt),Zt=G(gt,"vertical",at,K,Qt),te=function(It){b.get(It)?b.get(It).forEach(function(Ft){L[N.get(Ft)]=qt.get(It)}):L[N.get(It)]=qt.get(It)},jt=!0,_t=!1,oe=void 0;try{for(var se,re=qt.keys()[Symbol.iterator]();!(jt=(se=re.next()).done);jt=!0)te(se.value)}catch(Xt){_t=!0,oe=Xt}finally{try{!jt&&re.return&&re.return()}finally{if(_t)throw oe}}var ce=function(It){P.get(It)?P.get(It).forEach(function(Ft){D[N.get(Ft)]=Zt.get(It)}):D[N.get(It)]=Zt.get(It)},ae=!0,he=!1,le=void 0;try{for(var fe,ne=Zt.keys()[Symbol.iterator]();!(ae=(fe=ne.next()).done);ae=!0)ce(fe.value)}catch(Xt){he=!0,le=Xt}finally{try{!ae&&ne.return&&ne.return()}finally{if(he)throw le}}}()}for(var dt=0;dt<q.length;dt++){var Et=q[dt];null==Et.getChild()&&Et.setCenter(L[N.get(Et.id)],D[N.get(Et.id)])}},s.exports=u},551:s=>{s.exports=S}},n={};return function o(s){var c=n[s];if(void 0!==c)return c.exports;var e=n[s]={exports:{}};return E[s](e,e.exports,o),e.exports}(45)})())},9617:(kt,ct,At)=>{"use strict";At.r(ct),At.d(ct,{diagram:()=>Gt});var h,S=At(9204),E=At(5027),n=At(8389),o=At(5767),a=At(5595),s=At(1113),c=At(4110),e=At(2233),v=At(5363),t=At(867),r=At(3172),g={L:"left",R:"right",T:"top",B:"bottom"},u={L:(0,c.K2)(y=>`${y},${y/2} 0,${y} 0,0`,"L"),R:(0,c.K2)(y=>`0,${y/2} ${y},0 ${y},${y}`,"R"),T:(0,c.K2)(y=>`0,0 ${y},0 ${y/2},${y}`,"T"),B:(0,c.K2)(y=>`${y/2},0 ${y},${y} 0,${y}`,"B")},T={L:(0,c.K2)((y,C)=>y-C+2,"L"),R:(0,c.K2)((y,C)=>y-2,"R"),T:(0,c.K2)((y,C)=>y-C+2,"T"),B:(0,c.K2)((y,C)=>y-2,"B")},f=(0,c.K2)(function(y){return N(y)?"L"===y?"R":"L":"T"===y?"B":"T"},"getOppositeArchitectureDirection"),A=(0,c.K2)(function(y){return"L"===y||"R"===y||"T"===y||"B"===y},"isArchitectureDirection"),N=(0,c.K2)(function(y){return"L"===y||"R"===y},"isArchitectureDirectionX"),L=(0,c.K2)(function(y){return"T"===y||"B"===y},"isArchitectureDirectionY"),D=(0,c.K2)(function(y,C){const Y=N(y)&&L(C),W=L(y)&&N(C);return Y||W},"isArchitectureDirectionXY"),q=(0,c.K2)(function(y){const C=y[0],Y=y[1],W=N(C)&&L(Y),et=L(C)&&N(Y);return W||et},"isArchitecturePairXY"),I=(0,c.K2)(function(y){return"LL"!==y&&"RR"!==y&&"TT"!==y&&"BB"!==y},"isValidArchitectureDirectionPair"),it=(0,c.K2)(function(y,C){const Y=`${y}${C}`;return I(Y)?Y:void 0},"getArchitectureDirectionPair"),pt=(0,c.K2)(function([y,C],Y){const W=Y[0],et=Y[1];return N(W)?L(et)?[y+("L"===W?-1:1),C+("T"===et?1:-1)]:[y+("L"===W?-1:1),C]:N(et)?[y+("L"===et?1:-1),C+("T"===W?1:-1)]:[y,C+("T"===W?1:-1)]},"shiftPositionByArchitectureDirectionPair"),lt=(0,c.K2)(function(y){return"LT"===y||"TL"===y?[1,1]:"BL"===y||"LB"===y?[1,-1]:"BR"===y||"RB"===y?[-1,-1]:[-1,1]},"getArchitectureDirectionXYFactors"),wt=(0,c.K2)(function(y,C){return D(y,C)?"bend":N(y)?"horizontal":"vertical"},"getArchitectureDirectionAlignment"),G=(0,c.K2)(function(y){return"service"===y.type},"isArchitectureService"),k=(0,c.K2)(function(y){return"junction"===y.type},"isArchitectureJunction"),i=(0,c.K2)(y=>y.data(),"edgeData"),m=(0,c.K2)(y=>y.data(),"nodeData"),l=c.UI.architecture,p=(class{constructor(){this.nodes={},this.groups={},this.edges=[],this.registeredIds={},this.elements={},this.setAccTitle=c.SV,this.getAccTitle=c.iN,this.setDiagramTitle=c.ke,this.getDiagramTitle=c.ab,this.getAccDescription=c.m7,this.setAccDescription=c.EI,this.clear()}clear(){this.nodes={},this.groups={},this.edges=[],this.registeredIds={},this.dataStructures=void 0,this.elements={},(0,c.IU)()}addService({id:y,icon:C,in:Y,title:W,iconText:et}){if(void 0!==this.registeredIds[y])throw new Error(`The service id [${y}] is already in use by another ${this.registeredIds[y]}`);if(void 0!==Y){if(y===Y)throw new Error(`The service [${y}] cannot be placed within itself`);if(void 0===this.registeredIds[Y])throw new Error(`The service [${y}]'s parent does not exist. Please make sure the parent is created before this service`);if("node"===this.registeredIds[Y])throw new Error(`The service [${y}]'s parent is not a group`)}this.registeredIds[y]="node",this.nodes[y]={id:y,type:"service",icon:C,iconText:et,title:W,edges:[],in:Y}}getServices(){return Object.values(this.nodes).filter(G)}addJunction({id:y,in:C}){this.registeredIds[y]="node",this.nodes[y]={id:y,type:"junction",edges:[],in:C}}getJunctions(){return Object.values(this.nodes).filter(k)}getNodes(){return Object.values(this.nodes)}getNode(y){return this.nodes[y]??null}addGroup({id:y,icon:C,in:Y,title:W}){if(void 0!==this.registeredIds?.[y])throw new Error(`The group id [${y}] is already in use by another ${this.registeredIds[y]}`);if(void 0!==Y){if(y===Y)throw new Error(`The group [${y}] cannot be placed within itself`);if(void 0===this.registeredIds?.[Y])throw new Error(`The group [${y}]'s parent does not exist. Please make sure the parent is created before this group`);if("node"===this.registeredIds?.[Y])throw new Error(`The group [${y}]'s parent is not a group`)}this.registeredIds[y]="group",this.groups[y]={id:y,icon:C,title:W,in:Y}}getGroups(){return Object.values(this.groups)}addEdge({lhsId:y,rhsId:C,lhsDir:Y,rhsDir:W,lhsInto:et,rhsInto:j,lhsGroup:ot,rhsGroup:tt,title:ut}){if(!A(Y))throw new Error(`Invalid direction given for left hand side of edge ${y}--${C}. Expected (L,R,T,B) got ${String(Y)}`);if(!A(W))throw new Error(`Invalid direction given for right hand side of edge ${y}--${C}. Expected (L,R,T,B) got ${String(W)}`);if(void 0===this.nodes[y]&&void 0===this.groups[y])throw new Error(`The left-hand id [${y}] does not yet exist. Please create the service/group before declaring an edge to it.`);if(void 0===this.nodes[C]&&void 0===this.groups[C])throw new Error(`The right-hand id [${C}] does not yet exist. Please create the service/group before declaring an edge to it.`);const vt=this.nodes[y].in,rt=this.nodes[C].in;if(ot&&vt&&rt&&vt==rt)throw new Error(`The left-hand id [${y}] is modified to traverse the group boundary, but the edge does not pass through two groups.`);if(tt&&vt&&rt&&vt==rt)throw new Error(`The right-hand id [${C}] is modified to traverse the group boundary, but the edge does not pass through two groups.`);this.edges.push({lhsId:y,lhsDir:Y,lhsInto:et,lhsGroup:ot,rhsId:C,rhsDir:W,rhsInto:j,rhsGroup:tt,title:ut}),this.nodes[y]&&this.nodes[C]&&(this.nodes[y].edges.push(this.edges[this.edges.length-1]),this.nodes[C].edges.push(this.edges[this.edges.length-1]))}getEdges(){return this.edges}getDataStructures(){if(void 0===this.dataStructures){const y={},C=Object.entries(this.nodes).reduce((tt,[ut,vt])=>(tt[ut]=vt.edges.reduce((rt,dt)=>{const Et=this.getNode(dt.lhsId)?.in,M=this.getNode(dt.rhsId)?.in;if(Et&&M&&Et!==M){const x=wt(dt.lhsDir,dt.rhsDir);"bend"!==x&&(y[Et]??={},y[Et][M]=x,y[M]??={},y[M][Et]=x)}if(dt.lhsId===ut){const x=it(dt.lhsDir,dt.rhsDir);x&&(rt[x]=dt.rhsId)}else{const x=it(dt.rhsDir,dt.lhsDir);x&&(rt[x]=dt.lhsId)}return rt},{}),tt),{}),Y=Object.keys(C)[0],W={[Y]:1},et=Object.keys(C).reduce((tt,ut)=>ut===Y?tt:{...tt,[ut]:1},{}),j=(0,c.K2)(tt=>{const ut={[tt]:[0,0]},vt=[tt];for(;vt.length>0;){const rt=vt.shift();if(rt){W[rt]=1,delete et[rt];const dt=C[rt],[Et,M]=ut[rt];Object.entries(dt).forEach(([x,b])=>{W[b]||(ut[b]=pt([Et,M],x),vt.push(b))})}}return ut},"BFS"),ot=[j(Y)];for(;Object.keys(et).length>0;)ot.push(j(Object.keys(et)[0]));this.dataStructures={adjList:C,spatialMaps:ot,groupAlignments:y}}return this.dataStructures}setElementForId(y,C){this.elements[y]=C}getElementById(y){return this.elements[y]}getConfig(){return(0,a.$t)({...l,...(0,c.zj)().architecture})}getConfigField(y){return this.getConfig()[y]}static#t=h=()=>((0,E.A)(this,"ArchitectureDB"),(0,c.K2)(this,"ArchitectureDB"),this)},h()),d=(0,c.K2)((y,C)=>{(0,o.S)(y,C),y.groups.map(Y=>C.addGroup(Y)),y.services.map(Y=>C.addService({...Y,type:"service"})),y.junctions.map(Y=>C.addJunction({...Y,type:"junction"})),y.edges.map(Y=>C.addEdge(Y))},"populateDb"),R={parser:{yy:void 0},parse:(0,c.K2)(function(){var y=(0,S.A)(function*(C){const Y=yield(0,e.qg)("architecture",C);c.Rm.debug(Y);const W=R.parser?.yy;if(!(W instanceof p))throw new Error("parser.parser?.yy was not a ArchitectureDB. This is due to a bug within Mermaid, please report this issue at https://github.com/mermaid-js/mermaid/issues.");d(Y,W)});return function(C){return y.apply(this,arguments)}}(),"parse")},X=(0,c.K2)(y=>`\n  .edge {\n    stroke-width: ${y.archEdgeWidth};\n    stroke: ${y.archEdgeColor};\n    fill: none;\n  }\n\n  .arrow {\n    fill: ${y.archEdgeArrowColor};\n  }\n\n  .node-bkg {\n    fill: none;\n    stroke: ${y.archGroupBorderColor};\n    stroke-width: ${y.archGroupBorderWidth};\n    stroke-dasharray: 8;\n  }\n  .node-icon-text {\n    display: flex; \n    align-items: center;\n  }\n  \n  .node-icon-text > div {\n    color: #fff;\n    margin: 1px;\n    height: fit-content;\n    text-align: center;\n    overflow: hidden;\n    display: -webkit-box;\n    -webkit-box-orient: vertical;\n  }\n`,"getStyles"),U=(0,c.K2)(y=>`<g><rect width="80" height="80" style="fill: #087ebf; stroke-width: 0px;"/>${y}</g>`,"wrapIcon"),F={prefix:"mermaid-architecture",height:80,width:80,icons:{database:{body:U('<path id="b" data-name="4" d="m20,57.86c0,3.94,8.95,7.14,20,7.14s20-3.2,20-7.14" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><path id="c" data-name="3" d="m20,45.95c0,3.94,8.95,7.14,20,7.14s20-3.2,20-7.14" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><path id="d" data-name="2" d="m20,34.05c0,3.94,8.95,7.14,20,7.14s20-3.2,20-7.14" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><ellipse id="e" data-name="1" cx="40" cy="22.14" rx="20" ry="7.14" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="20" y1="57.86" x2="20" y2="22.14" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="60" y1="57.86" x2="60" y2="22.14" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/>')},server:{body:U('<rect x="17.5" y="17.5" width="45" height="45" rx="2" ry="2" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="17.5" y1="32.5" x2="62.5" y2="32.5" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="17.5" y1="47.5" x2="62.5" y2="47.5" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><g><path d="m56.25,25c0,.27-.45.5-1,.5h-10.5c-.55,0-1-.23-1-.5s.45-.5,1-.5h10.5c.55,0,1,.23,1,.5Z" style="fill: #fff; stroke-width: 0px;"/><path d="m56.25,25c0,.27-.45.5-1,.5h-10.5c-.55,0-1-.23-1-.5s.45-.5,1-.5h10.5c.55,0,1,.23,1,.5Z" style="fill: none; stroke: #fff; stroke-miterlimit: 10;"/></g><g><path d="m56.25,40c0,.27-.45.5-1,.5h-10.5c-.55,0-1-.23-1-.5s.45-.5,1-.5h10.5c.55,0,1,.23,1,.5Z" style="fill: #fff; stroke-width: 0px;"/><path d="m56.25,40c0,.27-.45.5-1,.5h-10.5c-.55,0-1-.23-1-.5s.45-.5,1-.5h10.5c.55,0,1,.23,1,.5Z" style="fill: none; stroke: #fff; stroke-miterlimit: 10;"/></g><g><path d="m56.25,55c0,.27-.45.5-1,.5h-10.5c-.55,0-1-.23-1-.5s.45-.5,1-.5h10.5c.55,0,1,.23,1,.5Z" style="fill: #fff; stroke-width: 0px;"/><path d="m56.25,55c0,.27-.45.5-1,.5h-10.5c-.55,0-1-.23-1-.5s.45-.5,1-.5h10.5c.55,0,1,.23,1,.5Z" style="fill: none; stroke: #fff; stroke-miterlimit: 10;"/></g><g><circle cx="32.5" cy="25" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/><circle cx="27.5" cy="25" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/><circle cx="22.5" cy="25" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/></g><g><circle cx="32.5" cy="40" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/><circle cx="27.5" cy="40" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/><circle cx="22.5" cy="40" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/></g><g><circle cx="32.5" cy="55" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/><circle cx="27.5" cy="55" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/><circle cx="22.5" cy="55" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/></g>')},disk:{body:U('<rect x="20" y="15" width="40" height="50" rx="1" ry="1" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><ellipse cx="24" cy="19.17" rx=".8" ry=".83" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><ellipse cx="56" cy="19.17" rx=".8" ry=".83" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><ellipse cx="24" cy="60.83" rx=".8" ry=".83" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><ellipse cx="56" cy="60.83" rx=".8" ry=".83" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><ellipse cx="40" cy="33.75" rx="14" ry="14.58" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><ellipse cx="40" cy="33.75" rx="4" ry="4.17" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><path d="m37.51,42.52l-4.83,13.22c-.26.71-1.1,1.02-1.76.64l-4.18-2.42c-.66-.38-.81-1.26-.33-1.84l9.01-10.8c.88-1.05,2.56-.08,2.09,1.2Z" style="fill: #fff; stroke-width: 0px;"/>')},internet:{body:U('<circle cx="40" cy="40" r="22.5" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="40" y1="17.5" x2="40" y2="62.5" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="17.5" y1="40" x2="62.5" y2="40" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><path d="m39.99,17.51c-15.28,11.1-15.28,33.88,0,44.98" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><path d="m40.01,17.51c15.28,11.1,15.28,33.88,0,44.98" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="19.75" y1="30.1" x2="60.25" y2="30.1" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="19.75" y1="49.9" x2="60.25" y2="49.9" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/>')},cloud:{body:U('<path d="m65,47.5c0,2.76-2.24,5-5,5H20c-2.76,0-5-2.24-5-5,0-1.87,1.03-3.51,2.56-4.36-.04-.21-.06-.42-.06-.64,0-2.6,2.48-4.74,5.65-4.97,1.65-4.51,6.34-7.76,11.85-7.76.86,0,1.69.08,2.5.23,2.09-1.57,4.69-2.5,7.5-2.5,6.1,0,11.19,4.38,12.28,10.17,2.14.56,3.72,2.51,3.72,4.83,0,.03,0,.07-.01.1,2.29.46,4.01,2.48,4.01,4.9Z" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/>')},unknown:n.Gc,blank:{body:U("")}}},Q=(0,c.K2)(function(){var y=(0,S.A)(function*(C,Y,W){const et=W.getConfigField("padding"),j=W.getConfigField("iconSize"),ot=j/2,tt=j/6,ut=tt/2;yield Promise.all(Y.edges().map(function(){var vt=(0,S.A)(function*(rt){const{source:dt,sourceDir:Et,sourceArrow:M,sourceGroup:x,target:b,targetDir:P,targetArrow:H,targetGroup:K,label:ft}=i(rt);let{x:at,y:B}=rt[0].sourceEndpoint();const{x:Z,y:mt}=rt[0].midpoint();let{x:Mt,y:Tt}=rt[0].targetEndpoint();const xt=et+4;if(x&&(N(Et)?at+="L"===Et?-xt:xt:B+="T"===Et?-xt:xt+18),K&&(N(P)?Mt+="L"===P?-xt:xt:Tt+="T"===P?-xt:xt+18),!x&&"junction"===W.getNode(dt)?.type&&(N(Et)?at+="L"===Et?ot:-ot:B+="T"===Et?ot:-ot),!K&&"junction"===W.getNode(b)?.type&&(N(P)?Mt+="L"===P?ot:-ot:Tt+="T"===P?ot:-ot),rt[0]._private.rscratch){const Lt=C.insert("g");if(Lt.insert("path").attr("d",`M ${at},${B} L ${Z},${mt} L${Mt},${Tt} `).attr("class","edge"),M){const gt=N(Et)?T[Et](at,tt):at-ut,Ot=L(Et)?T[Et](B,tt):B-ut;Lt.insert("polygon").attr("points",u[Et](tt)).attr("transform",`translate(${gt},${Ot})`).attr("class","arrow")}if(H){const gt=N(P)?T[P](Mt,tt):Mt-ut,Ot=L(P)?T[P](Tt,tt):Tt-ut;Lt.insert("polygon").attr("points",u[P](tt)).attr("transform",`translate(${gt},${Ot})`).attr("class","arrow")}if(ft){const gt=D(Et,P)?"XY":N(Et)?"X":"Y";let Ot=0;Ot="X"===gt?Math.abs(at-Mt):"Y"===gt?Math.abs(B-Tt)/1.5:Math.abs(at-Mt)/2;const yt=Lt.append("g");if(yield(0,n.GZ)(yt,ft,{useHtmlLabels:!1,width:Ot,classes:"architecture-service-label"},(0,c.D7)()),yt.attr("dy","1em").attr("alignment-baseline","middle").attr("dominant-baseline","middle").attr("text-anchor","middle"),"X"===gt)yt.attr("transform","translate("+Z+", "+mt+")");else if("Y"===gt)yt.attr("transform","translate("+Z+", "+mt+") rotate(-90)");else if("XY"===gt){const Nt=it(Et,P);if(Nt&&q(Nt)){const Ut=yt.node().getBoundingClientRect(),[Dt,St]=lt(Nt);yt.attr("dominant-baseline","auto").attr("transform",`rotate(${-1*Dt*St*45})`);const Ht=yt.node().getBoundingClientRect();yt.attr("transform",`\n                translate(${Z}, ${mt-Ut.height/2})\n                translate(${Dt*Ht.width/2}, ${St*Ht.height/2})\n                rotate(${-1*Dt*St*45}, 0, ${Ut.height/2})\n              `)}}}}});return function(rt){return vt.apply(this,arguments)}}()))});return function(C,Y,W){return y.apply(this,arguments)}}(),"drawEdges"),st=(0,c.K2)(function(){var y=(0,S.A)(function*(C,Y,W){const j=.75*W.getConfigField("padding"),ot=W.getConfigField("fontSize"),ut=W.getConfigField("iconSize")/2;yield Promise.all(Y.nodes().map(function(){var vt=(0,S.A)(function*(rt){const dt=m(rt);if("group"===dt.type){const{h:Et,w:M,x1:x,y1:b}=rt.boundingBox();C.append("rect").attr("x",x+ut).attr("y",b+ut).attr("width",M).attr("height",Et).attr("class","node-bkg");const P=C.append("g");let H=x,K=b;if(dt.icon){const ft=P.append("g");ft.html(`<g>${yield(0,n.WY)(dt.icon,{height:j,width:j,fallbackPrefix:F.prefix})}</g>`),ft.attr("transform","translate("+(H+ut+1)+", "+(K+ut+1)+")"),H+=j,K+=ot/2-1-2}if(dt.label){const ft=P.append("g");yield(0,n.GZ)(ft,dt.label,{useHtmlLabels:!1,width:M,classes:"architecture-service-label"},(0,c.D7)()),ft.attr("dy","1em").attr("alignment-baseline","middle").attr("dominant-baseline","start").attr("text-anchor","start"),ft.attr("transform","translate("+(H+ut+4)+", "+(K+ut+2)+")")}}});return function(rt){return vt.apply(this,arguments)}}()))});return function(C,Y,W){return y.apply(this,arguments)}}(),"drawGroups"),V=(0,c.K2)(function(){var y=(0,S.A)(function*(C,Y,W){const et=(0,c.D7)();for(const j of W){const ot=Y.append("g"),tt=C.getConfigField("iconSize");if(j.title){const dt=ot.append("g");yield(0,n.GZ)(dt,j.title,{useHtmlLabels:!1,width:1.5*tt,classes:"architecture-service-label"},et),dt.attr("dy","1em").attr("alignment-baseline","middle").attr("dominant-baseline","middle").attr("text-anchor","middle"),dt.attr("transform","translate("+tt/2+", "+tt+")")}const ut=ot.append("g");if(j.icon)ut.html(`<g>${yield(0,n.WY)(j.icon,{height:tt,width:tt,fallbackPrefix:F.prefix})}</g>`);else if(j.iconText){ut.html(`<g>${yield(0,n.WY)("blank",{height:tt,width:tt,fallbackPrefix:F.prefix})}</g>`);const M=ut.append("g").append("foreignObject").attr("width",tt).attr("height",tt).append("div").attr("class","node-icon-text").attr("style",`height: ${tt}px;`).append("div").html((0,c.jZ)(j.iconText,et)),x=parseInt(window.getComputedStyle(M.node(),null).getPropertyValue("font-size").replace(/\D/g,""))??16;M.attr("style",`-webkit-line-clamp: ${Math.floor((tt-2)/x)};`)}else ut.append("path").attr("class","node-bkg").attr("id","node-"+j.id).attr("d",`M0 ${tt} v${-tt} q0,-5 5,-5 h${tt} q5,0 5,5 v${tt} H0 Z`);ot.attr("class","architecture-service");const{width:vt,height:rt}=ot._groups[0][0].getBBox();j.width=vt,j.height=rt,C.setElementForId(j.id,ot)}return 0});return function(C,Y,W){return y.apply(this,arguments)}}(),"drawServices"),ht=(0,c.K2)(function(y,C,Y){Y.forEach(W=>{const et=C.append("g"),j=y.getConfigField("iconSize");et.append("g").append("rect").attr("id","node-"+W.id).attr("fill-opacity","0").attr("width",j).attr("height",j),et.attr("class","architecture-junction");const{width:tt,height:ut}=et._groups[0][0].getBBox();et.width=tt,et.height=ut,y.setElementForId(W.id,et)})},"drawJunctions");function J(y,C,Y){y.forEach(W=>{C.add({group:"nodes",data:{type:"service",id:W.id,icon:W.icon,label:W.title,parent:W.in,width:Y.getConfigField("iconSize"),height:Y.getConfigField("iconSize")},classes:"node-service"})})}function O(y,C,Y){y.forEach(W=>{C.add({group:"nodes",data:{type:"junction",id:W.id,parent:W.in,width:Y.getConfigField("iconSize"),height:Y.getConfigField("iconSize")},classes:"node-junction"})})}function z(y,C){C.nodes().map(Y=>{const W=m(Y);"group"!==W.type&&(W.x=Y.position().x,W.y=Y.position().y,y.getElementById(W.id).attr("transform","translate("+(W.x||0)+","+(W.y||0)+")"))})}function $(y,C){y.forEach(Y=>{C.add({group:"nodes",data:{type:"group",id:Y.id,icon:Y.icon,label:Y.title,parent:Y.in},classes:"node-group"})})}function nt(y,C){y.forEach(Y=>{const{lhsId:W,rhsId:et,lhsInto:j,lhsGroup:ot,rhsInto:tt,lhsDir:ut,rhsDir:vt,rhsGroup:rt,title:dt}=Y,Et=D(Y.lhsDir,Y.rhsDir)?"segments":"straight";C.add({group:"edges",data:{id:`${W}-${et}`,label:dt,source:W,sourceDir:ut,sourceArrow:j,sourceGroup:ot,sourceEndpoint:"L"===ut?"0 50%":"R"===ut?"100% 50%":"T"===ut?"50% 0":"50% 100%",target:et,targetDir:vt,targetArrow:tt,targetGroup:rt,targetEndpoint:"L"===vt?"0 50%":"R"===vt?"100% 50%":"T"===vt?"50% 0":"50% 100%"},classes:Et})})}function Ct(y,C,Y){const W=(0,c.K2)((tt,ut)=>Object.entries(tt).reduce((vt,[rt,dt])=>{let Et=0;const M=Object.entries(dt);if(1===M.length)return vt[rt]=M[0][1],vt;for(let x=0;x<M.length-1;x++)for(let b=x+1;b<M.length;b++){const[P,H]=M[x],[K,ft]=M[b];Y[P]?.[K]===ut||"default"===P||"default"===K?(vt[rt]??=[],vt[rt]=[...vt[rt],...H,...ft]):(vt[`${rt}-${Et++}`]=H,vt[`${rt}-${Et++}`]=ft)}return vt},{}),"flattenAlignments"),et=C.map(tt=>{const ut={},vt={};return Object.entries(tt).forEach(([rt,[dt,Et]])=>{const M=y.getNode(rt)?.in??"default";ut[Et]??={},ut[Et][M]??=[],ut[Et][M].push(rt),vt[dt]??={},vt[dt][M]??=[],vt[dt][M].push(rt)}),{horiz:Object.values(W(ut,"horizontal")).filter(rt=>rt.length>1),vert:Object.values(W(vt,"vertical")).filter(rt=>rt.length>1)}}),[j,ot]=et.reduce(([tt,ut],{horiz:vt,vert:rt})=>[[...tt,...vt],[...ut,...rt]],[[],[]]);return{horizontal:j,vertical:ot}}function _(y,C){const Y=[],W=(0,c.K2)(j=>`${j[0]},${j[1]}`,"posToStr"),et=(0,c.K2)(j=>j.split(",").map(ot=>parseInt(ot)),"strToPos");return y.forEach(j=>{const ot=Object.fromEntries(Object.entries(j).map(([rt,dt])=>[W(dt),rt])),tt=[W([0,0])],ut={},vt={L:[-1,0],R:[1,0],T:[0,1],B:[0,-1]};for(;tt.length>0;){const rt=tt.shift();if(rt){ut[rt]=1;const dt=ot[rt];if(dt){const Et=et(rt);Object.entries(vt).forEach(([M,x])=>{const b=W([Et[0]+x[0],Et[1]+x[1]]),P=ot[b];P&&!ut[b]&&(tt.push(b),Y.push({[g[M]]:P,[g[f(M)]]:dt,gap:1.5*C.getConfigField("iconSize")}))})}}}}),Y}function bt(y,C,Y,W,et,{spatialMaps:j,groupAlignments:ot}){return new Promise(tt=>{const ut=(0,r.Ltv)("body").append("div").attr("id","cy").attr("style","display:none"),vt=(0,v.A)({container:document.getElementById("cy"),style:[{selector:"edge",style:{"curve-style":"straight",label:"data(label)","source-endpoint":"data(sourceEndpoint)","target-endpoint":"data(targetEndpoint)"}},{selector:"edge.segments",style:{"curve-style":"segments","segment-weights":"0","segment-distances":[.5],"edge-distances":"endpoints","source-endpoint":"data(sourceEndpoint)","target-endpoint":"data(targetEndpoint)"}},{selector:"node",style:{"compound-sizing-wrt-labels":"include"}},{selector:"node[label]",style:{"text-valign":"bottom","text-halign":"center","font-size":`${et.getConfigField("fontSize")}px`}},{selector:".node-service",style:{label:"data(label)",width:"data(width)",height:"data(height)"}},{selector:".node-junction",style:{width:"data(width)",height:"data(height)"}},{selector:".node-group",style:{padding:`${et.getConfigField("padding")}px`}}],layout:{name:"grid",boundingBox:{x1:0,x2:100,y1:0,y2:100}}});ut.remove(),$(Y,vt),J(y,vt,et),O(C,vt,et),nt(W,vt);const rt=Ct(et,j,ot),dt=_(j,et),Et=vt.layout({name:"fcose",quality:"proof",styleEnabled:!1,animate:!1,nodeDimensionsIncludeLabels:!1,idealEdgeLength(M){const[x,b]=M.connectedNodes(),{parent:P}=m(x),{parent:H}=m(b);return P===H?1.5*et.getConfigField("iconSize"):.5*et.getConfigField("iconSize")},edgeElasticity(M){const[x,b]=M.connectedNodes(),{parent:P}=m(x),{parent:H}=m(b);return P===H?.45:.001},alignmentConstraint:rt,relativePlacementConstraint:dt});Et.one("layoutstop",()=>{function M(x,b,P,H){let K,ft;const{x:at,y:B}=x,{x:Z,y:mt}=b;ft=(H-B+(at-P)*(B-mt)/(at-Z))/Math.sqrt(1+Math.pow((B-mt)/(at-Z),2)),K=Math.sqrt(Math.pow(H-B,2)+Math.pow(P-at,2)-Math.pow(ft,2)),K/=Math.sqrt(Math.pow(Z-at,2)+Math.pow(mt-B,2));let Tt=(Z-at)*(H-B)-(mt-B)*(P-at);switch(!0){case Tt>=0:Tt=1;break;case Tt<0:Tt=-1}let xt=(Z-at)*(P-at)+(mt-B)*(H-B);switch(!0){case xt>=0:xt=1;break;case xt<0:xt=-1}return ft=Math.abs(ft)*Tt,K*=xt,{distances:ft,weights:K}}(0,c.K2)(M,"getSegmentWeights"),vt.startBatch();for(const x of Object.values(vt.edges()))if(x.data?.()){const{x:b,y:P}=x.source().position(),{x:H,y:K}=x.target().position();if(b!==H&&P!==K){const ft=x.sourceEndpoint(),at=x.targetEndpoint(),{sourceDir:B}=i(x),[Z,mt]=L(B)?[ft.x,at.y]:[at.x,ft.y],{weights:Mt,distances:Tt}=M(ft,at,Z,mt);x.style("segment-distances",Tt),x.style("segment-weights",Mt)}}vt.endBatch(),Et.run()}),Et.run(),vt.ready(M=>{c.Rm.info("Ready",M),tt(vt)})})}(0,n.pC)([{name:F.prefix,icons:F}]),v.A.use(t),(0,c.K2)(J,"addServices"),(0,c.K2)(O,"addJunctions"),(0,c.K2)(z,"positionNodes"),(0,c.K2)($,"addGroups"),(0,c.K2)(nt,"addEdges"),(0,c.K2)(Ct,"getAlignments"),(0,c.K2)(_,"getRelativeConstraints"),(0,c.K2)(bt,"layoutArchitecture");var Wt={draw:(0,c.K2)(function(){var y=(0,S.A)(function*(C,Y,W,et){const j=et.db,ot=j.getServices(),tt=j.getJunctions(),ut=j.getGroups(),vt=j.getEdges(),rt=j.getDataStructures(),dt=(0,s.D)(Y),Et=dt.append("g");Et.attr("class","architecture-edges");const M=dt.append("g");M.attr("class","architecture-services");const x=dt.append("g");x.attr("class","architecture-groups"),yield V(j,M,ot),ht(j,M,tt);const b=yield bt(ot,tt,ut,vt,j,rt);yield Q(Et,b,j),yield st(x,b,j),z(j,b),(0,c.ot)(void 0,dt,j.getConfigField("padding"),j.getConfigField("useMaxWidth"))});return function(C,Y,W,et){return y.apply(this,arguments)}}(),"draw")},Gt={parser:R,get db(){return new p},renderer:Wt,styles:X}}}]);
//# sourceMappingURL=617.ba0221fbb7129702.js.map